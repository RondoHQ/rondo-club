# Milestone v3.3: Todo Enhancement

**Status:** ✅ SHIPPED 2026-01-14
**Phases:** 32-34
**Total Plans:** 3

## Overview

Expand todo functionality with notes/description field, multi-person support, and visual polish. Todos can now have rich text notes and be linked to multiple people, with stacked avatar displays across all views.

## Phases

### Phase 32: Todo Data Model Enhancement ✓

**Goal**: Add notes field to todos, change to multi-person model, update REST API
**Depends on**: v3.1 (stadion_todo CPT)
**Plans**: 1 plan

Plans:
- [x] 32-01: Todo Data Model Enhancement (notes field, multi-person, REST API, migration)

**Details:**
- Added WYSIWYG notes ACF field to todo data model
- Changed related_person to related_persons with multi-select
- Updated all REST API endpoints to return persons array
- Created `wp prm todos migrate-persons` CLI command
- Updated timeline endpoint for multi-person queries

### Phase 33: Todo Modal UI Enhancement ✓

**Goal**: Expand TodoModal with notes editor and multi-person selector, visual polish
**Depends on**: Phase 32
**Plans**: 1 plan

Plans:
- [x] 33-01: Todo Modal UI Enhancement (notes editor, multi-person selector, visual polish)

**Details:**
- TodoModal with collapsible RichTextEditor notes section
- Multi-person chip selector with search dropdown
- GlobalTodoModal upgraded to multi-person selection
- TodosList shows notes preview and stacked avatars
- PersonDetail todos sidebar with notes preview

### Phase 34: Cross-Person Todo Display ✓

**Goal**: Show shared todos on each linked person's profile with proper indicators
**Depends on**: Phase 33
**Plans**: 1 plan

Plans:
- [x] 34-01: Cross-Person Display (stacked avatars in sidebar, thumbnail API support)

**Details:**
- Stacked avatars in PersonDetail todos sidebar (desktop and mobile)
- "Also:" prefix clarifies additional linked people
- Timeline API returns thumbnail URLs for avatars
- Max 2 avatars in sidebar with +N overflow

---

## Milestone Summary

**Key Decisions:**
- Keep deprecated person_id/person_name/person_thumbnail for backward compatibility during transition
- Use LIKE query with quoted ID format for serialized ACF array lookups
- Multi-person selector only in edit mode for TodoModal (new todos context-bound)
- Notes section collapsible by default to avoid modal height bloat
- Stacked avatars max 3 in TodosList, max 2 in PersonDetail sidebar
- Filter out current person from "Also:" display (only shows OTHER people)

**Issues Resolved:**
- None during this milestone

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- Deprecated person_id/person_name/person_thumbnail fields still in API (to be removed in future)

---

_For current project status, see .planning/ROADMAP.md_
