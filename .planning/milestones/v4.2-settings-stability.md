# Milestone v4.2: Settings & Stability

**Status:** SHIPPED 2026-01-15
**Phases:** 58-60
**Total Plans:** 3

## Overview

Improve settings team, fix React DOM stability issues, and enhance calendar email matching. Focused on stability and UX polish.

## Phases

### Phase 58: React DOM Error Fix

**Goal**: Investigate and fix recurring removeChild synchronization errors between React's virtual DOM and actual DOM
**Depends on**: Previous milestone complete
**Research**: Complete (58-RESEARCH.md)
**Result**: Preventive measures (translate="no", meta tag, div wrapper) + DomErrorBoundary for graceful recovery

Plans:
- [x] 58-01: DOM modification prevention and error boundary (2/2 tasks)

**Details:**
- Added `translate="no"` attribute and Google notranslate meta tag to prevent Google Translate DOM interference
- Replaced React Fragment with div.app-root wrapper for stable DOM container
- Created DomErrorBoundary class component that catches DOM sync errors and auto-recovers

### Phase 59: Settings Restructure

**Goal**: Create Connections tab with subtabs for Calendars, CardDAV, and Slack, grouping all external service connections
**Depends on**: Phase 58
**Research**: Not needed (internal UI patterns)
**Result**: Settings page reorganized with Connections tab containing Calendars/CardDAV/Slack subtabs

Plans:
- [x] 59-01: Restructure tabs and update OAuth redirects (2/2 tasks)

**Details:**
- Consolidated external service connections under unified Connections tab
- Created subtab navigation pattern with URL persistence
- Separated connection management from notification preferences
- Updated all OAuth callback URLs to match new structure

### Phase 60: Calendar Email Matching

**Goal**: Re-run meetings matching when email address added and match events against all person email addresses
**Depends on**: Phase 59
**Research**: Not needed (internal patterns)
**Result**: Automatic re-matching on person save, WP-CLI command for manual re-matching

Plans:
- [x] 60-01: Auto re-match events on person email changes (3/3 tasks)

**Details:**
- Added `rematch_events_for_user()` method to RONDO_Calendar_Matcher
- Hook on `acf/save_post` at priority 25 triggers re-matching when person saved
- WP-CLI command: `wp prm calendar rematch --user-id=ID`
- Production verified: Re-matched 574 events for user 1

---

## Milestone Summary

**Key Decisions:**
- Prevention over cure approach for DOM stability (translate="no", meta tag, div wrapper)
- Error boundary catches only DOM-specific errors, lets other errors propagate
- Subtab URL pattern: `tab=connections&subtab=calendars`
- Re-matching on every person save acceptable for performance

**Issues Resolved:**
- React DOM removeChild/insertBefore errors from browser extensions documented as benign with graceful recovery
- Settings page information architecture improved with Connections grouping
- Calendar events now auto-update when person emails change

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
