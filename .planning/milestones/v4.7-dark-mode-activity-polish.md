# Milestone v4.7: Dark Mode & Activity Polish

**Status:** SHIPPED 2026-01-17
**Phases:** 71-72
**Total Plans:** 4

## Overview

Comprehensive dark mode contrast fixes across modals and settings, plus activity type improvements and minor bug fixes. This polish milestone addressed accumulated dark mode contrast issues and added two frequently-requested activity types (Dinner, Zoom).

## Phases

### Phase 71: Dark Mode Fixes

**Goal**: Fix contrast issues in modals and settings for dark mode
**Depends on**: Phase 70
**Requirements**: DM-01, DM-02, DM-03, DM-04, DM-05, DM-06, DM-07
**Plans**: 3 plans (01, 02, FIX)

Plans:

- [x] 71-01: Modal Dark Mode Support (WorkHistoryEditModal, AddressEditModal)
- [x] 71-02: Dark Mode Contrast Fixes (Settings subtabs, TimelineView, ImportantDateModal)
- [x] 71-FIX: Dark Mode UAT Fixes (solid background pattern for selected states)

**Success Criteria:**
1. User can view/edit work history modal in dark mode with proper contrast
2. User can view/edit address modal in dark mode with proper contrast
3. User can use date-related people modal in dark mode with proper contrast
4. Activity type buttons display correctly in dark mode
5. Settings Connections subtab headings are readable in dark mode

**Key Files Modified:**
- src/components/WorkHistoryEditModal.jsx
- src/components/AddressEditModal.jsx
- src/pages/Settings/Settings.jsx
- src/components/Timeline/TimelineView.jsx
- src/components/ImportantDateModal.jsx
- src/components/Timeline/QuickActivityModal.jsx

### Phase 72: Activity & Bug Fixes

**Goal**: Add activity types and fix UI bugs
**Depends on**: Phase 71
**Requirements**: ACT-01, ACT-02, ACT-03, BUG-01, BUG-02
**Plans**: 1 plan

Plans:

- [x] 72-01: Activity Types and Bug Fixes

**Success Criteria:**
1. User can select "Dinner" and "Zoom" as activity types
2. "Phone call" activity type shows as "Phone"
3. Topbar stays above content on People screen
4. Person header displays "at Company" with proper spacing

**Key Files Modified:**
- src/components/Timeline/QuickActivityModal.jsx
- src/utils/timeline.js
- src/components/Timeline/TimelineView.jsx
- src/components/layout/Layout.jsx
- src/pages/People/PersonDetail.jsx

---

## Milestone Summary

**Decimal Phases:** None

**Key Decisions:**

- Dark mode contrast pattern: Consistently use gray-300/gray-400 for better contrast (not gray-400/gray-500)
- Semi-transparent backgrounds don't work: accent-900/30 creates unreliable contrast in dark mode
- Solid background pattern: Use dark:bg-accent-800 with dark:text-accent-100 for all selected/active states
- Activity type ID preservation: Keep 'call' ID when renaming to "Phone" to preserve existing data

**Issues Resolved:**

- DM-01 through DM-07: All dark mode contrast issues fixed
- ACT-01, ACT-02: Dinner and Zoom activity types added
- ACT-03: Phone call renamed to Phone
- BUG-01: Topbar z-index layering fixed
- BUG-02: Person header spacing fixed

**Issues Deferred:** None

**Technical Debt Incurred:** None

---

_For current project status, see .planning/ROADMAP.md_
