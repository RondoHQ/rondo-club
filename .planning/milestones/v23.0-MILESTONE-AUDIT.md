---
milestone: v23.0
audited: 2026-02-09T23:30:00Z
status: passed
scores:
  requirements: 11/11
  phases: 4/4
  integration: 15/15
  flows: 5/5
gaps:
  requirements: []
  integration: []
  flows: []
tech_debt: []
---

# v23.0 Former Members — Milestone Audit Report

**Milestone Goal:** Archive former members when they leave the club (detected by rondo-sync), hiding them from default views while preserving all data. Findable through global search and a filter toggle on the Leden list.

**Audited:** 2026-02-09
**Status:** PASSED

## Phase Verification Summary

| Phase | Goal | Status | Score |
|-------|------|--------|-------|
| 166: Backend Foundation | Former member field + rondo-sync marking | ✅ PASSED | 4/4 |
| 167: Core Filtering | Exclude from people list, dashboard, teams | ✅ PASSED | 4/4 |
| 168: Visibility Controls | Toggle + search indicator | ✅ PASSED | 5/5 |
| 169: Contributie Logic | Fee calculation for former members | ✅ PASSED | 6/6 |

**All 4 phases verified. No unverified phases.**

## Requirements Coverage

| Requirement | Phase | Status | Evidence |
|-------------|-------|--------|----------|
| DATA-01: former_member status field | 166 | ✅ SATISFIED | ACF field in group_person_fields.json, default false |
| DATA-02: Settable via REST API | 166 | ✅ SATISFIED | ACF auto-exposes with show_in_rest: 1 |
| SYNC-01: REST API accepts updates from rondo-sync | 166 | ✅ SATISFIED | rondo-sync sends PUT with acf.former_member: true |
| SYNC-02: API documentation updated | 166 | ✅ SATISFIED | Developer docs with field reference + curl example |
| LIST-01: Leden list excludes former members | 167 | ✅ SATISFIED | SQL WHERE clause, NULL-safe pattern |
| DASH-01: Dashboard count excludes former members | 167 | ✅ SATISFIED | WP_Query meta_query on count + recent |
| TEAM-01: Team rosters exclude former members | 167 | ✅ SATISFIED | meta_query in team roster queries |
| LIST-02: "Toon oud-leden" toggle with visual distinction | 168 | ✅ SATISFIED | Toggle UI, Oud-lid badge, opacity-60 |
| SRCH-01: Global search with "oud-lid" indicator | 168 | ✅ SATISFIED | format_person_summary flag + SearchModal badge |
| FEE-01: Former members in fee list if lid-sinds in season | 169 | ✅ SATISFIED | is_former_member_in_season() method |
| FEE-02: No pro-rata for leavers (full season fee) | 169 | ✅ SATISFIED | Normal pro-rata from lid-sinds, no special override |

**Coverage: 11/11 (100%)**

## Cross-Phase Integration

**Connected exports:** 15/15
**Orphaned exports:** 0
**Missing connections:** 0

### Key Integration Points

1. **Phase 166 → 167/168/169**: former_member ACF field consumed by 7 locations (filtering, display, caching, fees)
2. **Phase 167 → 168**: NULL-safe exclusion pattern reused in conditional include_former logic
3. **Phase 168 → Frontend**: include_former param flows through usePeople hook → API → response
4. **Phase 169 → API + Export**: is_former_member_in_season() called by 5 consumers (fee list, person fee, export, family discount, diagnostics)

### Pattern Consistency

- SQL and WP_Query both use NULL-safe exclusion (IS NULL OR '' OR '0')
- ACF true_false handling: strict '1' comparison for SQL results, loose comparison for get_field()
- former_member field name consistent across all 15+ references

## E2E Flow Verification

| Flow | Status |
|------|--------|
| rondo-sync marks member → stored → filtered from views | ✅ COMPLETE |
| User toggles "Toon oud-leden" → API → former members displayed with badge | ✅ COMPLETE |
| Former member with lid-sinds during season → appears in fee list | ✅ COMPLETE |
| Former member with lid-sinds after season → excluded from fees/forecast | ✅ COMPLETE |
| Forecast mode → all former members excluded | ✅ COMPLETE |

**All 5 E2E flows verified.**

## Cross-Repo Integration

- rondo-club: ACF field + REST API + frontend UI
- rondo-sync: Marks former members via PUT (replaces DELETE)
- developer: API documentation updated

All repos committed separately with verified commits.

## Anti-Patterns

None found across all 4 phases. No TODOs, FIXMEs, stubs, or placeholder implementations.

## Tech Debt

None identified. Clean implementation with:
- Dedicated method for season eligibility (is_former_member_in_season)
- Cache invalidation hooks for fee recalculation
- Consistent patterns reusable for future status fields
- URL-persisted filter state for bookmarkability

## Conclusion

v23.0 Former Members milestone is ready for completion. All 11 requirements satisfied, all 4 phases verified, all 5 E2E flows complete, and cross-phase integration fully wired with no gaps or tech debt.

---
*Audited: 2026-02-09*
*Auditor: Claude (milestone-audit orchestrator + gsd-integration-checker)*
