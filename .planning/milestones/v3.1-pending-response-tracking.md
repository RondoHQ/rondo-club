# Milestone v3.1: Pending Response Tracking

**Status:** SHIPPED 2026-01-14
**Phases:** 24-28
**Total Plans:** 9

## Overview

Convert todos to a proper custom post type and add pending response tracking with aging indicators, filtering, and auto-timestamping.

## Phases

### Phase 24: Todo Post Type

**Goal**: Create `stadion_todo` CPT, migrate from comment type, update REST API
**Depends on**: v3.0 Testing Infrastructure
**Plans**: 4 plans

Plans:
- [x] 24-01: Register stadion_todo CPT with ACF fields and access control
- [x] 24-02: REST API endpoints for todo CRUD
- [x] 24-03: Migration from comment-based todos
- [x] 24-04: Update tests for new todo system

**Result**: stadion_todo CPT registered, REST API created, 13 todos migrated, 16 tests added

### Phase 25: Todo UI Migration

**Goal**: Update frontend components to use new todo post type API
**Depends on**: Phase 24
**Plans**: 1 plan

Plans:
- [x] 25-01: Integrate CPT todos into timeline and update cache invalidation

**Result**: Timeline endpoint returns todos from CPT, cache invalidation updated

### Phase 26: Pending Response Model

**Goal**: Add "awaiting response" status to todos with timestamp
**Depends on**: Phase 25
**Plans**: 1 plan

Plans:
- [x] 26-01: Add ACF fields, REST API support, PHPUnit tests for pending response

**Result**: awaiting_response and awaiting_response_since fields added, auto-timestamp on state change

### Phase 27: Pending Response UI

**Goal**: Mark as awaiting, dashboard widget, age indicators
**Depends on**: Phase 26
**Plans**: 2 plans

Plans:
- [x] 27-01: Add awaiting response UI (TodoModal, TodosList, Dashboard)
- [x] 27-02: Add awaiting response to TimelineView, GlobalTodoModal, PersonDetail

**Result**: Full UI for awaiting response across all components with urgency color coding

### Phase 28: Filters & Polish

**Goal**: Filter by pending status, dedicated view, refactor to post statuses
**Depends on**: Phase 27
**Plans**: 1 plan

Plans:
- [x] 28-01: Add awaiting_response filter and TodosList filter UI

**Result**: REST API status filter, TodosList filter tabs (Open/Awaiting/Completed), post status refactor

---

## Milestone Summary

**Key Decisions:**

| Decision | Rationale |
|----------|-----------|
| Todo CPT not Comment | Todos are posts, not comments; allows richer metadata |
| Migration deletes originals | Clean cutover; no duplicate data |
| Auto-timestamp on state change | awaiting_since set/cleared automatically |
| gmdate for timestamps | UTC timestamps for consistency |
| WordPress post statuses | Mutually exclusive states (open/awaiting/completed) |
| Urgency color scheme | Yellow 0-2d, orange 3-6d, red 7+d |

**Issues Resolved:**
- Fixed illogical state combinations (is_completed + awaiting_response as independent booleans)
- Proper todo filtering with mutually exclusive states

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- ESLint config missing from project (pre-existing)

---

_For current project status, see .planning/ROADMAP.md_
