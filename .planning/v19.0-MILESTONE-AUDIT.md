---
milestone: v19.0
audited: 2026-02-06T14:30:00Z
status: gaps_found
scores:
  requirements: 13/13
  phases: 2/2
  integration: 4/5
  flows: 4/6
gaps:
  requirements: []
  integration:
    - vCard birthday export reads from deleted personDates, not person.acf.birthdate
  flows:
    - vCard export omits BDAY field (broken)
    - /dates URL returns 404 with no redirect (minor, expected behavior)
tech_debt:
  - phase: 148-infrastructure-removal
    items:
      - "docs/carddav.md line 110: Still says 'Birthday (from important dates)'"
      - "docs/api-leden-crud.md line 204: Still says 'derived from birthday important date'"
      - "docs/frontend-architecture.md line 89: Still documents /dates route"
      - "docs/ical-feed.md line 3: Still mentions 'important dates'"
      - "docs/multi-user.md line 100: Still says 'Upcoming important dates'"
---

# Milestone v19.0 Birthdate Simplification — Audit Report

**Audited:** 2026-02-06T14:30:00Z
**Status:** gaps_found
**Integration Health:** 85%

## Scope

**Phases:**
- Phase 147: Birthdate Field & Widget (1 plan) — passed
- Phase 148: Infrastructure Removal (2 plans) — passed

**Requirements:** 13 total (BDAY-01/02, DASH-01/02, DATA-01, REMV-01 through REMV-08)

## Requirements Coverage

| Requirement | Description | Status |
|-------------|-------------|--------|
| BDAY-01 | Person has birthdate ACF field | SATISFIED |
| BDAY-02 | Person header displays birthdate after age | SATISFIED |
| DASH-01 | Upcoming birthdays widget queries person birthdate meta | SATISFIED |
| DASH-02 | Birthday calculation uses month/day comparison | SATISFIED |
| DATA-01 | All important_date posts deleted from production | SATISFIED |
| REMV-01 | important_date CPT registration removed | SATISFIED |
| REMV-02 | date_type taxonomy registration removed | SATISFIED |
| REMV-03 | Datums navigation item removed | SATISFIED |
| REMV-04 | DatesList page and route removed | SATISFIED |
| REMV-05 | ImportantDateModal component removed | SATISFIED |
| REMV-06 | Important dates card removed from PersonDetail | SATISFIED |
| REMV-07 | Related REST endpoints removed | SATISFIED |
| REMV-08 | Unused imports and hooks cleaned up | SATISFIED |

**Score:** 13/13 requirements satisfied

## Phase Verification Status

| Phase | Status | Score | Notes |
|-------|--------|-------|-------|
| 147 - Birthdate Field & Widget | passed | 4/4 | All truths verified |
| 148 - Infrastructure Removal | passed | 10/10 | All artifacts removed |

**Score:** 2/2 phases verified

## E2E Flow Status

| Flow | Status | Notes |
|------|--------|-------|
| View person profile with birthdate | COMPLETE | Displays "43 jaar (6 feb 1982)" |
| Dashboard upcoming birthdays widget | COMPLETE | Queries person.birthdate meta |
| iCal feed generates birthday events | COMPLETE | Uses RRULE:FREQ=YEARLY |
| Email reminders include birthdays | COMPLETE | Queries person.birthdate |
| vCard export includes birthday | BROKEN | Reads from deleted personDates array |
| /dates URL handling | BROKEN | Returns 404 (expected, no redirect) |

**Score:** 4/6 flows complete

## Critical Gap

### vCard Birthday Export (BROKEN)

**File:** `src/utils/vcard.js` lines 198-209

**Problem:** The `generateVCard()` function still expects a `personDates` array from the deleted Important Dates CPT to export birthdays:

```javascript
if (personDates && Array.isArray(personDates)) {
  const birthday = personDates.find(d => {
    const dateType = Array.isArray(d.date_type) ? d.date_type[0] : d.date_type;
    return dateType?.toLowerCase() === 'birthday';
  });
  // ...
}
```

**Caller:** `PersonDetail.jsx` line 608 calls `downloadVCard(person, { teamMap })` — does NOT pass `personDates`.

**Result:** Birthdays are silently omitted from exported vCard files.

**Fix Required:** Update vcard.js to read from `person.acf.birthdate` instead of `personDates`.

## Tech Debt (Documentation)

5 documentation files still reference "important dates":

| File | Line | Current | Should Be |
|------|------|---------|-----------|
| docs/carddav.md | 110 | "Birthday (from important dates)" | "Birthday (from person.birthdate field)" |
| docs/api-leden-crud.md | 204 | "derived from birthday important date" | "derived from person.birthdate field" |
| docs/frontend-architecture.md | 89 | Documents /dates route | Remove row entirely |
| docs/ical-feed.md | 3 | "important dates" | "birthdays" |
| docs/multi-user.md | 100 | "Upcoming important dates" | "Upcoming birthdays" |

## Cross-Phase Integration

**Wiring Status:**
- Phase 147 → 148: Birthdate field properly used by all systems
- Dashboard widget queries person.birthdate meta (not Important Dates CPT)
- Reminders system queries person.birthdate meta
- iCal feed generates from person.birthdate
- All Important Dates infrastructure cleanly removed

**Exception:** vCard export code not updated to use new data source.

## Production UAT

User acceptance testing completed on 2026-02-06:

| Test | Result |
|------|--------|
| Dashboard without Herinneringen stat card | PASS |
| Navigation without Datums link | PASS |
| Person detail without Important Dates card | PASS |
| Birthdays widget shows upcoming birthdays | PASS |
| Person age displays correctly | PASS |
| iCal feed still works for birthdays | PASS |

## Recommendation

**Status: gaps_found** — One critical broken flow (vCard export) requires fix before milestone completion.

**Required before completion:**
1. Fix vCard birthday export to read from `person.acf.birthdate`
2. Update 5 documentation files with new terminology

**Estimated effort:** 15-30 minutes

---

*Audited: 2026-02-06T14:30:00Z*
*Auditor: Claude (gsd-integration-checker)*
