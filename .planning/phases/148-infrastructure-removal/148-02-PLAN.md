---
phase: 148-infrastructure-removal
plan: 02
type: execute
wave: 1
depends_on: [148-01]
files_modified:
  - src/pages/Dates/DatesList.jsx
  - src/components/ImportantDateModal.jsx
  - src/hooks/useDates.js
  - src/hooks/usePeople.js
  - src/router.jsx
  - src/components/layout/Layout.jsx
  - src/api/client.js
  - src/pages/People/PersonDetail.jsx
  - src/hooks/useDocumentTitle.js
  - docs/access-control.md
  - docs/data-model.md
  - docs/family-tree.md
  - docs/ical-feed.md
  - docs/import.md
  - docs/multi-user.md
  - docs/php-autoloading.md
  - docs/reminders.md
  - docs/rest-api.md
autonomous: true

must_haves:
  truths:
    - "Sidebar navigation has no Datums item"
    - "/dates route returns 404 or redirects to dashboard"
    - "PersonDetail page has no Important Dates card"
    - "No console errors from missing date-related imports"
  artifacts:
    - path: "src/pages/Dates/DatesList.jsx"
      provides: "Removed - should not exist"
      exists: false
    - path: "src/components/ImportantDateModal.jsx"
      provides: "Removed - should not exist"
      exists: false
    - path: "src/hooks/useDates.js"
      provides: "Removed - should not exist"
      exists: false
    - path: "src/router.jsx"
      provides: "Router without dates route"
      not_contains: "DatesList"
    - path: "src/components/layout/Layout.jsx"
      provides: "Navigation without Datums item"
      not_contains: "Datums"
  key_links:
    - from: "src/router.jsx"
      to: "React Router"
      via: "No route for /dates path"
    - from: "src/components/layout/Layout.jsx"
      to: "Navigation"
      via: "No Datums navigation item in array"
---

<objective>
Remove frontend components and update documentation

Purpose: Complete removal of Important Dates from React SPA and documentation after backend removal in Plan 01
Output: Clean frontend without any date-related dead code, updated documentation
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/148-infrastructure-removal/148-CONTEXT.md
@.planning/phases/148-infrastructure-removal/148-RESEARCH.md
@.planning/phases/148-infrastructure-removal/148-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete standalone date files and clean hooks</name>
  <files>
src/pages/Dates/DatesList.jsx
src/components/ImportantDateModal.jsx
src/hooks/useDates.js
src/hooks/usePeople.js
src/api/client.js
  </files>
  <action>
Delete files and remove date-related exports from shared modules.

**Delete entire files:**
- `src/pages/Dates/DatesList.jsx` - delete file
- `src/pages/Dates/` - delete entire directory if empty after above
- `src/components/ImportantDateModal.jsx` - delete file
- `src/hooks/useDates.js` - delete file

**src/hooks/usePeople.js:**
- Remove `dates: (id) => [...peopleKeys.detail(id), 'dates'],` from `peopleKeys` object
- Delete `usePersonDates()` function (lines ~184-192)
- Delete `useDeleteDate()` function (lines ~526-539)
- Search for any other references to 'dates' or 'Date' and remove

**src/api/client.js:**
- Remove these lines from wpApi object:
  ```javascript
  getDates: (params) => api.get('/wp/v2/important-dates', { params }),
  getDate: (id) => api.get(`/wp/v2/important-dates/${id}`),
  createDate: (data) => api.post('/wp/v2/important-dates', data),
  updateDate: (id, data) => api.put(`/wp/v2/important-dates/${id}`, data),
  deleteDate: (id) => api.delete(`/wp/v2/important-dates/${id}`),
  ```
- Remove from prmApi object:
  ```javascript
  getPersonDates: (personId) => api.get(`/rondo/v1/people/${personId}/dates`),
  ```
  </action>
  <verify>
- `ls src/pages/Dates/` returns "No such file or directory"
- `ls src/components/ImportantDateModal.jsx` returns "No such file or directory"
- `ls src/hooks/useDates.js` returns "No such file or directory"
- `grep -n "important-dates\|getPersonDates\|usePersonDates\|useDeleteDate" src/` returns empty
  </verify>
  <done>Standalone date files deleted, shared hooks and API client cleaned</done>
</task>

<task type="auto">
  <name>Task 2: Remove dates from router, navigation, and PersonDetail</name>
  <files>
src/router.jsx
src/components/layout/Layout.jsx
src/pages/People/PersonDetail.jsx
src/hooks/useDocumentTitle.js
  </files>
  <action>
Remove all date references from routing, navigation, and PersonDetail page.

**src/router.jsx:**
- Remove lazy import: `const DatesList = lazy(() => import('@/pages/Dates/DatesList'));`
- Remove entire route block for '/dates':
  ```javascript
  {
    path: 'dates',
    element: (
      <RestrictedRoute>
        <DatesList />
      </RestrictedRoute>
    ),
  },
  ```

**src/components/layout/Layout.jsx:**
- Remove Calendar icon from imports (if only used for dates): `Calendar,` from lucide-react imports
- Remove Datums navigation item from `navigation` array:
  ```javascript
  { name: 'Datums', href: '/dates', icon: Calendar, requiresUnrestricted: true },
  ```
- Remove from `getCounts()` function: `case 'Datums': return stats?.total_dates || null;`
- Remove `/dates` handling from `getPageTitle()` function in Header component

**src/pages/People/PersonDetail.jsx:**
- Remove import: `import ImportantDateModal from '@/components/ImportantDateModal';`
- Remove from usePeople imports: `usePersonDates`, `useDeleteDate`
- Remove state: `const { data: personDates } = usePersonDates(id);`
- Remove state: `const deleteDate = useDeleteDate();`
- Remove modal state: `const [showDateModal, setShowDateModal] = useState(false);`
- Remove state: `const [isSavingDate, setIsSavingDate] = useState(false);`
- Remove state: `const [editingDate, setEditingDate] = useState(null);` (if exists)
- Remove `deathDate` calculation from personDates
- Remove `allDates` calculation and sorting
- Remove `personDates` from any passed props
- Remove `handleDeleteDate` function and similar handlers
- Remove the Important Dates card section from the JSX:
  - Look for section with "Belangrijke datums" heading
  - Remove entire card including the add button
- Remove the ImportantDateModal component at the bottom of JSX:
  ```jsx
  <ImportantDateModal
    isOpen={showDateModal}
    ...
  />
  ```
- Keep other imports and functionality intact (notes, activities, todos, etc.)

**src/hooks/useDocumentTitle.js:**
- Remove the entire `/dates` route handling block (lines ~71-80):
  ```javascript
  } else if (path.startsWith('/dates')) {
    if (path === '/dates' || path === '/dates/') {
      title = 'Datums';
    } else if (path === '/dates/new') {
      title = 'Nieuwe datum';
    } else if (path.endsWith('/edit')) {
      title = 'Datum bewerken';
    } else {
      title = 'Datums';
    }
  ```
- Update `extractRouteId()` regex to remove `dates`: change `/\/(?:people|teams|dates)\/(\d+)/` to `/\/(?:people|teams)\/(\d+)/`
  </action>
  <verify>
- `grep -n "DatesList\|Datums\|/dates\|showDateModal\|personDates" src/router.jsx src/components/layout/Layout.jsx src/pages/People/PersonDetail.jsx` returns empty
- `npm run lint` passes (or shows only pre-existing errors, not new unused-import errors)
  </verify>
  <done>Router, navigation, and PersonDetail cleaned of all date references</done>
</task>

<task type="auto">
  <name>Task 3: Update documentation and deploy</name>
  <files>
docs/access-control.md
docs/data-model.md
docs/family-tree.md
docs/ical-feed.md
docs/import.md
docs/multi-user.md
docs/php-autoloading.md
docs/reminders.md
docs/rest-api.md
style.css
package.json
CHANGELOG.md
  </files>
  <action>
Update documentation to remove Important Dates references, update version, and deploy.

**Documentation files - remove/update mentions of:**
- "important_date" post type
- "date_type" taxonomy
- "Datums" navigation/feature
- Any API endpoints for /important-dates or /dates
- Any references to Important Dates in data model diagrams or lists

For each doc file, search for these terms and either:
- Remove the section entirely if it's dedicated to Important Dates
- Update the text to remove the reference if it's part of a list

**docs/data-model.md:**
- Remove Important Date from CPT list
- Remove date_type from taxonomy list
- Remove any field descriptions for Important Dates

**docs/rest-api.md:**
- Remove /wp/v2/important-dates endpoint documentation
- Remove /rondo/v1/people/{id}/dates endpoint documentation

**docs/ical-feed.md:**
- Update to reflect that iCal now only includes birthdays from person records
- Remove sections about Important Dates in feed

**docs/reminders.md:**
- Update to reflect birthdate-only reminder system
- Remove references to important_date queries

**Version and changelog:**
- Update `style.css` version to 19.1.0
- Update `package.json` version to 19.1.0
- Add CHANGELOG.md entry:
  ```
  ## [19.1.0] - 2026-02-06

  ### Removed
  - Important Dates subsystem completely removed
  - Date Type taxonomy removed
  - Datums navigation item removed
  - ImportantDateModal component removed
  - DatesList page removed
  - Related REST endpoints removed
  ```

**Build and Deploy:**
1. Run `npm run build` to generate clean dist/ without deleted components
2. Run `bin/deploy.sh` to deploy all changes

**Post-deploy cleanup:**
SSH to production and flush rewrite rules:
```bash
source .env && ssh -p "$DEPLOY_SSH_PORT" "$DEPLOY_SSH_USER@$DEPLOY_SSH_HOST" "cd $DEPLOY_REMOTE_THEME_PATH && wp rewrite flush"
```
  </action>
  <verify>
- `grep -r "important_date\|date_type\|Important Date" docs/` returns only historical changelog references (if any)
- Production site loads without errors
- Production /dates returns 404
- Production sidebar has no Datums item
- `wp rewrite flush` completes successfully
  </verify>
  <done>Documentation updated, version bumped, deployed to production, rewrite rules flushed</done>
</task>

</tasks>

<verification>
Full phase verification:
1. Visit production site - no Datums in navigation
2. Visit production /dates - returns 404 or redirects to dashboard
3. Visit any person detail page - no Important Dates card
4. Check browser console - no errors about missing imports
5. Check WordPress admin - no Important Dates menu item
6. Check ACF admin - no Important Date Fields field group
</verification>

<success_criteria>
- [ ] `src/pages/Dates/` directory does not exist
- [ ] `src/components/ImportantDateModal.jsx` does not exist
- [ ] `src/hooks/useDates.js` does not exist
- [ ] `grep -r "important_date\|DatesList\|Datums\|usePersonDates" src/` returns empty
- [ ] `npm run build` completes without errors
- [ ] Production deployed and working
- [ ] Production /dates returns 404
- [ ] Documentation updated with no Important Dates references
- [ ] Version bumped to 19.1.0
- [ ] CHANGELOG.md updated
</success_criteria>

<output>
After completion, create `.planning/phases/148-infrastructure-removal/148-02-SUMMARY.md`
</output>
