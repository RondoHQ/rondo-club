---
phase: 176-frontend-cleanup
plan: 02
type: execute
wave: 2
depends_on: ["176-01"]
files_modified:
  - src/pages/People/PeopleList.jsx
  - src/pages/Teams/TeamsList.jsx
  - src/pages/Commissies/CommissiesList.jsx
  - src/pages/People/PersonDetail.jsx
autonomous: true

must_haves:
  truths:
    - "PeopleList has no label column, no label filter, no label bulk action, no BulkLabelsModal"
    - "TeamsList has no BulkLabelsModal import, no team labels query, no label bulk action"
    - "CommissiesList has no BulkLabelsModal import, no commissie labels query, no label bulk action"
    - "PersonDetail has no label display, no label add/remove UI, no label state or queries"
    - "Frontend builds with no errors"
  artifacts:
    - path: "src/pages/People/PeopleList.jsx"
      provides: "List view without labels column or labels bulk action"
    - path: "src/pages/Teams/TeamsList.jsx"
      provides: "List view without labels bulk action"
    - path: "src/pages/Commissies/CommissiesList.jsx"
      provides: "List view without labels bulk action"
    - path: "src/pages/People/PersonDetail.jsx"
      provides: "Person detail without label badges or add/remove label UI"
  key_links:
    - from: "src/pages/People/PeopleList.jsx"
      to: "src/api/client.js"
      via: "wpApi calls removed for getPersonLabels"
      pattern: "wpApi\\.getPersonLabels"
---

<objective>
Remove all label UI from list views (PeopleList, TeamsList, CommissiesList) and PersonDetail page.

Purpose: Complete the frontend label removal by cleaning up all label-related UI: columns, filters, badges, bulk actions, add/remove controls.
Output: Clean list views and detail pages with no label references.
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/176-frontend-cleanup/176-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove labels from PeopleList</name>
  <files>src/pages/People/PeopleList.jsx</files>
  <action>
This file has extensive label code. Remove ALL of it:

**Imports:**
1. Remove `Tag` from the lucide-react import (line 3) - it's only used for the labels bulk action button

**COLUMN_SORT_FIELDS:**
1. Remove `labels: 'labels',` from the sort fields map (line 58)

**PersonListRow component:**
1. Remove the entire `if (colId === 'labels')` block (lines 150-176) - this renders label badges in the table row

**Inline BulkLabelsModal component (lines 518-635):**
1. Delete the entire inline `BulkLabelsModal` component defined inside PeopleList.jsx (this is a separate copy from the shared component, lines 518-635). This is NOT an import - it's defined inline in this file.

**PeopleList component - state/queries to remove:**
1. Remove `showBulkLabelsModal` state (line 753): `const [showBulkLabelsModal, setShowBulkLabelsModal] = useState(false);`
2. Remove the person labels query (lines 822-828):
   ```jsx
   const { data: labelsData } = useQuery({
     queryKey: ['person-labels'],
     queryFn: async () => {
       const response = await wpApi.getPersonLabels();
       return response.data;
     },
   });
   ```
3. Remove `const availableLabelsWithIds = labelsData || [];` (line 831)

**PeopleList - URL-based label filter state to remove:**
1. Remove `selectedLabelIds` useMemo (lines 642-645):
   ```jsx
   const selectedLabelIds = useMemo(() => {
     const labels = searchParams.get('labels');
     return labels ? labels.split(',').map(Number).filter(Boolean) : [];
   }, [searchParams]);
   ```
2. Remove `setSelectedLabelIds` callback (lines 686-689)
3. Remove `handleLabelToggle` function (lines 971-977)
4. Remove `selectedLabelIds` from `hasActiveFilters` check (line 935) - remove `selectedLabelIds.length > 0 ||` from the expression
5. Remove `selectedLabelIds` from the useEffect that clears selection (line 1020) - remove it from the dependency array
6. Remove `labels: selectedLabelIds,` from useFilteredPeople params (line 781)
7. Remove `selectedLabelIds.length` from the filter count badge (line 1159)

**PeopleList - Filter dropdown label section to remove:**
1. Remove the entire "Labels Filter" section in the filter dropdown (lines 1208-1240):
   ```jsx
   {availableLabelsWithIds.length > 0 && (
     <div>
       <h3 ...>Labels</h3>
       ...
     </div>
   )}
   ```

**PeopleList - Active filter chips for labels to remove:**
1. Remove the label filter chips rendering (lines 1456-1472):
   ```jsx
   {selectedLabelIds.map(labelId => {
     ...
   })}
   ```

**PeopleList - Bulk actions to remove:**
1. Remove the "Labels beheren..." button from the bulk actions dropdown (lines 1680-1689):
   ```jsx
   <button onClick={() => { setShowBulkDropdown(false); setShowBulkLabelsModal(true); }} ...>
     <Tag className="w-4 h-4" />
     Labels beheren...
   </button>
   ```

**PeopleList - BulkLabelsModal usage to remove:**
1. Remove the `<BulkLabelsModal ... />` JSX at the bottom (lines 1788-1811)

**Fallback visible columns:**
1. In the `visibleColumns` useMemo, update the fallback from `['team', 'labels']` to `['team']` (line 868)
  </action>
  <verify>
Run `npm run build`. Grep PeopleList.jsx for "label" (case-insensitive) to verify only benign hits remain (like "label" in HTML label elements, not label taxonomy references).
  </verify>
  <done>
PeopleList has zero references to label taxonomies, label filters, label columns, label bulk actions, or BulkLabelsModal.
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove labels from TeamsList, CommissiesList, and PersonDetail</name>
  <files>
    src/pages/Teams/TeamsList.jsx
    src/pages/Commissies/CommissiesList.jsx
    src/pages/People/PersonDetail.jsx
  </files>
  <action>
**TeamsList.jsx:**
1. Remove `Tag` from lucide-react imports (line 3)
2. Remove `import BulkLabelsModal from '@/components/BulkLabelsModal';` (line 8)
3. Remove `showBulkLabelsModal` state (line 268): `const [showBulkLabelsModal, setShowBulkLabelsModal] = useState(false);`
4. Remove `bulkActionLoading` state (line 269): `const [bulkActionLoading, setBulkActionLoading] = useState(false);`
5. Remove the team labels query (lines 355-362):
   ```jsx
   const { data: teamLabelsData } = useQuery({
     queryKey: ['team-labels'],
     queryFn: async () => {
       const response = await wpApi.getTeamLabels();
       return response.data;
     },
   });
   const teamLabels = teamLabelsData || [];
   ```
6. Remove the entire bulk actions dropdown in the selection toolbar (lines 737-761). This includes the "Acties" button and dropdown with only the "Labels beheren..." option. Since labels are the ONLY bulk action for teams, remove the entire dropdown. Keep the selection toolbar itself (the "N teams geselecteerd" bar) but remove the Acties dropdown. Also remove `bulkDropdownRef` ref and the `showBulkDropdown` state.
7. Remove the `<BulkLabelsModal ... />` JSX at the bottom (lines 801-825)
8. Remove `showBulkDropdown` state (line 267)
9. Remove `bulkDropdownRef` ref (line 273)
10. Remove `bulkDropdownRef` from the click-outside handler useEffect (lines 393-398)
11. Since there are no bulk actions left for teams, also remove the bulk update mutation import and usage: remove `useBulkUpdateTeams` import and `bulkUpdateMutation` (line 276). However, keep selection functionality (checkboxes) as it may be used for future bulk actions.

Actually, reconsider: With no bulk actions remaining, the selection toolbar's "Acties" dropdown has no purpose. Remove the bulk actions dropdown and button entirely. The selection toolbar with "N teams geselecteerd" and "Selectie wissen" can remain as skeleton for future use, or be removed too. Since labels were the ONLY bulk action, simplify by removing:
- The "Acties" button + dropdown from the toolbar
- `showBulkDropdown` state, `bulkDropdownRef` ref, bulk dropdown click-outside handling
- `showBulkLabelsModal` state, `bulkActionLoading` state
- `bulkUpdateMutation` and `useBulkUpdateTeams` import
- The `<BulkLabelsModal>` JSX
But KEEP the selection toolbar (checkboxes, "N teams geselecteerd", "Selectie wissen") and selection state for potential future use.

**CommissiesList.jsx:**
Apply the same changes as TeamsList:
1. Remove `Tag` from lucide-react imports (line 3)
2. Remove `import BulkLabelsModal from '@/components/BulkLabelsModal';` (line 8)
3. Remove `showBulkLabelsModal` state (line 247)
4. Remove `bulkActionLoading` state (line 248)
5. Remove the commissie labels query (lines 337-344):
   ```jsx
   const { data: commissieLabelsData } = useQuery({
     queryKey: ['commissie-labels'],
     queryFn: async () => {
       const response = await wpApi.getCommissieLabels();
       return response.data;
     },
   });
   const commissieLabels = commissieLabelsData || [];
   ```
6. Remove the bulk actions dropdown from the selection toolbar (lines 649-673)
7. Remove `<BulkLabelsModal ... />` JSX (lines 713-737)
8. Remove `showBulkDropdown` state (line 246)
9. Remove `bulkDropdownRef` ref (line 252)
10. Remove `bulkDropdownRef` from click-outside handler
11. Remove `bulkUpdateMutation` and `useBulkUpdateCommissies` import (line 5, line 255)
Keep selection toolbar skeleton (checkboxes, count, clear) for future use.

**PersonDetail.jsx:**
1. Remove `isAddingLabel` state (line 83): `const [isAddingLabel, setIsAddingLabel] = useState(false);`
2. Remove `selectedLabelToAdd` state (line 84): `const [selectedLabelToAdd, setSelectedLabelToAdd] = useState('');`
3. Remove the available labels query (lines 112-119):
   ```jsx
   const { data: availableLabelsData } = useQuery({
     queryKey: ['person-labels'],
     queryFn: async () => {
       const response = await wpApi.getPersonLabels();
       return response.data;
     },
   });
   ```
4. Remove `availableLabels`, `currentLabelNames`, `currentLabelTermIds`, `availableLabelsToAdd` derived state (lines 121-131)
5. Remove `handleRemoveLabel` function (lines 530-548)
6. Remove `handleAddLabel` function (lines 549-567)
7. Remove the entire label badges display and add/remove label UI section in the JSX (lines 1099-1159). This is the `<div>` inside the header area that renders label badges with remove buttons and the "Label toevoegen" dropdown. Replace with an empty fragment or remove the wrapping div if it only contains label code.

Ensure the surrounding layout still works correctly after removing the labels section. The div at line 1099 wraps labels; if it also wraps other content below, preserve the wrapper.
  </action>
  <verify>
Run `npm run build` from rondo-club/. Run `npm run lint` to check for unused imports or variables. Grep all four files for "person_label|team_label|commissie_label|BulkLabelsModal|getPersonLabels|getTeamLabels|getCommissieLabels" to verify no references remain.
  </verify>
  <done>
All four files are free of label-related code. TeamsList and CommissiesList no longer import or use BulkLabelsModal. PersonDetail has no label display or management UI. Build passes cleanly.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds with zero errors
2. `npm run lint` passes (or shows only pre-existing warnings unrelated to labels)
3. `grep -r "BulkLabelsModal" src/` returns zero hits
4. `grep -r "person_label\|team_label\|commissie_label" src/` returns zero hits
5. `grep -r "getPersonLabels\|getTeamLabels\|getCommissieLabels" src/` returns zero hits
6. `grep -r "isAddingLabel\|selectedLabelToAdd\|handleRemoveLabel\|handleAddLabel" src/` returns zero hits
7. PeopleList renders without labels column
8. TeamsList/CommissiesList render without labels bulk action
9. PersonDetail renders without labels section
</verification>

<success_criteria>
- All label UI removed from PeopleList (column, filter, chips, bulk action, inline modal)
- All label UI removed from TeamsList (BulkLabelsModal, query, bulk action)
- All label UI removed from CommissiesList (BulkLabelsModal, query, bulk action)
- All label UI removed from PersonDetail (badges, add/remove controls, state, queries)
- Frontend builds and lints successfully
</success_criteria>

<output>
After completion, create `.planning/phases/176-frontend-cleanup/176-02-SUMMARY.md`
</output>
