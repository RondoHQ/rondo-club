---
phase: 176-frontend-cleanup
plan: 02
type: execute
wave: 2
depends_on: ["176-01"]
files_modified:
  - src/pages/People/PeopleList.jsx
  - src/pages/People/PersonDetail.jsx
  - src/pages/Teams/TeamsList.jsx
autonomous: true

must_haves:
  truths:
    - "PeopleList no longer shows label columns, label filters, or bulk labels modal"
    - "TeamsList no longer shows bulk labels action or fetches team labels"
    - "PersonDetail no longer displays labels or provides add/remove label UI"
    - "CommissiesList label functionality is untouched (commissie_label is live)"
    - "Frontend builds successfully with no new errors"
  artifacts:
    - path: "src/pages/People/PeopleList.jsx"
      provides: "People list without label column, filter, or bulk modal"
    - path: "src/pages/People/PersonDetail.jsx"
      provides: "Person detail without label display/management"
    - path: "src/pages/Teams/TeamsList.jsx"
      provides: "Teams list without bulk labels action"
  key_links:
    - from: "src/pages/People/PeopleList.jsx"
      to: "BulkLabelsModal"
      via: "Inline component and import removed"
      pattern: "BulkLabelsModal"
    - from: "src/pages/Teams/TeamsList.jsx"
      to: "@/components/BulkLabelsModal"
      via: "Import and usage removed"
      pattern: "BulkLabelsModal"
---

<objective>
Remove label UI from PeopleList, TeamsList, and PersonDetail: label columns, label filters, bulk label modals, and label display/management widgets.

Purpose: With person_label and team_label removed from the backend (Phase 175) and API methods removed (Phase 176-01), the UI components that display and manage these labels are dead code.

Output: Clean list views and detail pages with no person_label/team_label UI. CommissiesList and BulkLabelsModal.jsx component file preserved (commissie_label is still live).
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/176-frontend-cleanup/176-01-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove label UI from PeopleList</name>
  <files>src/pages/People/PeopleList.jsx</files>
  <action>
This is a large file (~1810 lines). Remove ALL label-related code. Here's what to remove:

1. **Column definition** (~line 58): Remove `labels: 'labels',` from the SORT_FIELD_MAP object.

2. **Label column renderer** (~lines 150-171): Remove the entire `if (colId === 'labels')` block that renders label badges in table cells.

3. **Inline BulkLabelsModal component** (~lines 518-630): Remove the entire locally-defined `BulkLabelsModal` function component. Also remove the `useState`, `useEffect` imports if they become unused (but they're likely used elsewhere).

4. **URL filter parsing** (~lines 642-645): Remove `selectedLabelIds` useMemo that parses labels from search params.

5. **Filter setter** (~lines 686-689): Remove `setSelectedLabelIds` useCallback.

6. **State** (~line 753): Remove `const [showBulkLabelsModal, setShowBulkLabelsModal] = useState(false);`

7. **API filter param** (~line 781): Remove `labels: selectedLabelIds,` from the filter params object.

8. **Sort field fallback** (~line 786): In the orderby expression, remove `|| sortField === 'labels'` from the ternary condition.

9. **Person labels query** (~lines 821-831): Remove the entire useQuery for person-labels and the `availableLabelsWithIds` derived variable.

10. **Default visible columns fallback** (~line 867): Change `['team', 'labels']` to `['team']`.

11. **Active filters check** (~line 935): Remove `selectedLabelIds.length > 0 ||` from the hasActiveFilters expression.

12. **Label toggle handler** (~lines 971-976): Remove the `handleLabelToggle` function.

13. **Reset effect dependency** (~line 1019): Remove `selectedLabelIds` from the useEffect dependency array.

14. **Export labels filter** (~line 1096): Remove `labels: selectedLabelIds.length > 0 ? selectedLabelIds : undefined,` from the export filter params.

15. **Filter badge count** (~line 1159): Remove `selectedLabelIds.length +` from the filter count calculation.

16. **Labels filter UI** (~lines 1208-1238): Remove the entire "Labels Filter" section in the filter panel (the `{availableLabelsWithIds.length > 0 && (...)}` block).

17. **Active filter badges** (~lines 1456-1470): Remove the `selectedLabelIds.map(labelId => {...})` block that renders active label filter badges.

18. **Bulk labels dropdown option** (~lines 1681-1689): Remove the bulk dropdown button that opens the labels modal (the `<Tag>` icon button with "Labels beheren...").

19. **BulkLabelsModal usage** (~lines 1788-1810): Remove the `<BulkLabelsModal>` component JSX and its `onSubmit` handler.

20. **Unused imports**: After removing all label code, remove the `Tag` import from lucide-react if it's no longer used elsewhere in the file. Check if `Check` is still used (likely yes for other checkboxes). Remove the `{ useState, useEffect }` only if they become unused.

**IMPORTANT:** Do NOT touch the `column.label` references used for table header display — those are the column configuration `label` property (e.g., "Naam", "Organisatie"), NOT related to the labels taxonomy.
  </action>
  <verify>
    - `grep "person_label\|person-labels\|selectedLabelIds\|BulkLabelsModal\|availableLabelsWithIds\|handleLabelToggle\|showBulkLabelsModal" src/pages/People/PeopleList.jsx` returns no matches
    - `grep "labels.*bulk\|bulk.*label" src/pages/People/PeopleList.jsx` (case-insensitive) returns no matches
    - The file still contains `column.label` references (these are NOT taxonomy labels)
  </verify>
  <done>PeopleList has no label columns, no label filters, no label bulk actions, and no label queries. All legitimate `label` property references (column headers) preserved.</done>
</task>

<task type="auto">
  <name>Task 2: Remove label UI from TeamsList and PersonDetail</name>
  <files>
    src/pages/Teams/TeamsList.jsx
    src/pages/People/PersonDetail.jsx
  </files>
  <action>
**TeamsList (`src/pages/Teams/TeamsList.jsx`):**

1. **Import** (~line 8): Remove `import BulkLabelsModal from '@/components/BulkLabelsModal';`

2. **State** (~line 268): Remove `const [showBulkLabelsModal, setShowBulkLabelsModal] = useState(false);`

3. **Team labels query** (~lines 354-362): Remove the entire useQuery for team-labels:
   ```js
   const { data: teamLabelsData } = useQuery({
     queryKey: ['team-labels'],
     queryFn: async () => {
       const response = await wpApi.getTeamLabels();
       return response.data;
     },
   });
   const teamLabels = teamLabelsData || [];
   ```

4. **Bulk dropdown labels option** (~lines 749-757): Remove the button in the bulk dropdown that opens the labels modal (the Tag icon + "Labels beheren..." text).

5. **BulkLabelsModal JSX** (~lines 800-822): Remove the entire `<BulkLabelsModal>` component and its `onSubmit` handler.

6. **Unused imports**: Remove `Tag` from lucide-react import if no longer used. Remove `BulkLabelsModal` import already handled in step 1.

7. **If the bulk dropdown now has NO items in it**, remove the entire bulk dropdown button and its state (`showBulkDropdown`). Check if there are other bulk action options besides labels.

**PersonDetail (`src/pages/People/PersonDetail.jsx`):**

1. **State** (~lines 83-84): Remove:
   ```js
   const [isAddingLabel, setIsAddingLabel] = useState(false);
   const [selectedLabelToAdd, setSelectedLabelToAdd] = useState('');
   ```

2. **Available labels query** (~lines 112-121): Remove the entire useQuery for person-labels and derived variables:
   ```js
   const { data: availableLabelsData } = useQuery({...});
   const availableLabels = availableLabelsData || [];
   const currentLabelNames = person?.labels || [];
   const currentLabelTermIds = person?._embedded?.['wp:term']?.flat()
     ?.filter(term => term?.taxonomy === 'person_label')
     ?.map(term => term.id) || [];
   const availableLabelsToAdd = availableLabels.filter(
     label => !currentLabelNames.includes(label.name)
   );
   ```

3. **handleRemoveLabel function** (~lines 531-547): Remove the entire function.

4. **handleAddLabel function** (~lines 550-568): Remove the entire function.

5. **Labels display section** (~lines 1099-1160): Remove the entire labels display block in the header area. This includes:
   - The label badges with remove buttons
   - The "Label toevoegen" button
   - The label select dropdown
   - The add/cancel buttons

   Look for the `<div>` that contains `person.labels && person.labels.length > 0` and the `isAddingLabel` conditional — remove the entire wrapping `<div>` for labels.

6. **Unused imports**: After removing all label code, check if `Plus` and `Tag` icons are still used. Remove any that become unused.

**IMPORTANT:** Do NOT touch:
- `relationship_label` references — these are relationship type labels, not the labels taxonomy
- `contact_label` references — these are contact type labels
- `address_label` references — these are address type labels
- `excludeLabelPrefixes` prop — this is for the CustomFieldsSection, not taxonomy labels
- `vogStatus.label` — this is a VOG status label
- CommissiesList — commissie_label is still live

After both files are edited, run `npm run build` to verify the build succeeds.
  </action>
  <verify>
    - `grep "person_label\|person-labels\|BulkLabelsModal\|teamLabels\|team-labels\|isAddingLabel\|handleRemoveLabel\|handleAddLabel\|selectedLabelToAdd\|availableLabels\|currentLabelNames\|currentLabelTermIds" src/pages/Teams/TeamsList.jsx src/pages/People/PersonDetail.jsx` returns no matches
    - `grep "BulkLabelsModal" src/pages/Teams/TeamsList.jsx` returns no matches
    - `grep "person.labels" src/pages/People/PersonDetail.jsx` returns no matches
    - `npm run build` succeeds
  </verify>
  <done>TeamsList has no bulk labels action or team labels query. PersonDetail has no label display, add, or remove functionality. Build passes. CommissiesList untouched.</done>
</task>

</tasks>

<verification>
After both tasks:
1. `grep -r "person_label\|person-labels" src/pages/` returns no matches
2. `grep -r "team_label\|team-labels" src/pages/ src/api/` returns no matches (except commissie references)
3. `grep -r "BulkLabelsModal" src/pages/People/ src/pages/Teams/` returns no matches
4. `grep -r "BulkLabelsModal" src/pages/Commissies/` STILL shows commissie usage (preserved)
5. `npm run build` completes successfully
6. `npm run lint` shows no NEW errors (pre-existing errors are acceptable)
</verification>

<success_criteria>
- PeopleList: no label column, no label filter, no inline BulkLabelsModal, no label query
- TeamsList: no BulkLabelsModal import/usage, no team labels query
- PersonDetail: no label display, no add/remove label functionality
- CommissiesList: untouched (commissie_label is still live)
- BulkLabelsModal.jsx component file: preserved (still used by CommissiesList)
- Build passes with no new errors
</success_criteria>

<output>
After completion, create `.planning/phases/176-frontend-cleanup/176-02-SUMMARY.md`
</output>
