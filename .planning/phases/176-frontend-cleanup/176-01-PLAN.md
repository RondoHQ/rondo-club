---
phase: 176-frontend-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - includes/class-taxonomies.php
  - includes/class-rest-commissies.php
  - src/api/client.js
  - src/hooks/usePeople.js
  - src/hooks/useListPreferences.js
  - src/router.jsx
  - src/pages/Settings/Settings.jsx
  - src/pages/Settings/Labels.jsx
  - src/components/BulkLabelsModal.jsx
autonomous: true

must_haves:
  truths:
    - "No label taxonomy registration exists in PHP (person_label, team_label, commissie_label all gone)"
    - "No label API methods exist in client.js"
    - "Settings/Labels page is unreachable and deleted"
    - "BulkLabelsModal component file is deleted"
    - "commissie_label terms/taxonomy cleaned from database"
  artifacts:
    - path: "includes/class-taxonomies.php"
      provides: "No commissie_label registration, expanded cleanup to include commissie_label"
    - path: "includes/class-rest-commissies.php"
      provides: "No label references in bulk update validation or execution"
    - path: "src/api/client.js"
      provides: "No label CRUD methods for any taxonomy"
  key_links:
    - from: "src/router.jsx"
      to: "src/pages/Settings/Labels.jsx"
      via: "route definition and lazy import"
      pattern: "Labels.*import.*Settings/Labels"
---

<objective>
Remove all label infrastructure: backend commissie_label taxonomy, all label API client methods, Settings/Labels page, BulkLabelsModal component, and database cleanup.

Purpose: Eliminate dead label taxonomies and their supporting code from both backend and frontend infrastructure.
Output: Clean backend (no label taxonomies), clean API client (no label methods), deleted Settings/Labels page and BulkLabelsModal component.
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/175-backend-cleanup/175-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove commissie_label backend and all label API methods</name>
  <files>
    includes/class-taxonomies.php
    includes/class-rest-commissies.php
    src/api/client.js
    src/hooks/usePeople.js
    src/hooks/useListPreferences.js
  </files>
  <action>
**Backend - includes/class-taxonomies.php:**
1. Remove the `register_commissie_label_taxonomy()` method entirely (lines 74-98)
2. Remove the call to `$this->register_commissie_label_taxonomy();` from `register_taxonomies()` (line 25)
3. Expand `cleanup_removed_taxonomies()` to also clean up `commissie_label`:
   - Change the SQL WHERE clauses from `IN ('person_label', 'team_label')` to `IN ('person_label', 'team_label', 'commissie_label')`
   - Bump the option key to `rondo_labels_cleaned_v2` (so the cleanup runs again for commissie_label on existing installs)

**Backend - includes/class-rest-commissies.php:**
1. Remove the entire `bulk_update_commissies` route registration from `register_routes()` (lines 117-182). The only operations this endpoint supports are labels_add and labels_remove, which are now dead.
2. Remove the `check_bulk_update_permission()` method (lines 538-572)
3. Remove the `bulk_update_commissies()` method (lines 580-615)

**Frontend - src/api/client.js:**
1. Remove ALL label taxonomy methods (lines 68-81):
   - `getPersonLabels`, `createPersonLabel`, `updatePersonLabel`, `deletePersonLabel`
   - `getTeamLabels`, `createTeamLabel`, `updateTeamLabel`, `deleteTeamLabel`
   - `getCommissieLabels`, `createCommissieLabel`, `updateCommissieLabel`, `deleteCommissieLabel`
2. Keep the blank line separation between the taxonomies section comment and the next section (relationship types)

**Frontend - src/hooks/usePeople.js:**
1. In the `transformPerson()` function, remove the labels extraction from embedded terms (lines 28-30):
   ```
   const labels = person._embedded?.['wp:term']?.flat()
     ?.filter(term => term?.taxonomy === 'person_label')
     ?.map(term => term.name) || [];
   ```
2. Remove `labels` from the returned object (line 46)
3. In `useFilteredPeople`, remove `labels` from the params object (line 127): `labels: filters.labels || [],`
4. Remove the `labels` JSDoc param from useFilteredPeople (line 101): `@param {number[]} filters.labels`

**Frontend - src/hooks/useListPreferences.js:**
1. Change the default visible columns from `['team', 'labels', 'modified']` to `['team', 'modified']` (line 106)
  </action>
  <verify>
Run `npm run build` from rondo-club/ to verify no import errors. Grep for `person_label|team_label|commissie_label` in src/ and includes/ to confirm removal. Grep for `getPersonLabels|getTeamLabels|getCommissieLabels` in src/ to confirm API method removal.
  </verify>
  <done>
No label taxonomy registration in PHP, no label API methods in client.js, no label data extraction in usePeople.js, commissie_label cleanup scheduled in DB migration.
  </done>
</task>

<task type="auto">
  <name>Task 2: Delete Settings/Labels page, BulkLabelsModal, and remove navigation</name>
  <files>
    src/pages/Settings/Labels.jsx
    src/components/BulkLabelsModal.jsx
    src/router.jsx
    src/pages/Settings/Settings.jsx
  </files>
  <action>
**Delete files:**
1. Delete `src/pages/Settings/Labels.jsx` entirely
2. Delete `src/components/BulkLabelsModal.jsx` entirely

**Router - src/router.jsx:**
1. Remove the lazy import for Labels (line 28): `const Labels = lazy(() => import('@/pages/Settings/Labels'));`
2. Remove the route definition (line 260): `{ path: 'settings/labels', element: <Labels /> },`

**Settings page - src/pages/Settings/Settings.jsx:**
1. Remove the Labels link from the AdminTab component (lines 2936-2942):
   ```jsx
   <Link
     to="/settings/labels"
     className="block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors"
   >
     <p className="font-medium">Labels</p>
     <p className="text-sm text-gray-500">Beheer labels voor personen en organisaties</p>
   </Link>
   ```
  </action>
  <verify>
Run `npm run build` from rondo-club/. Verify `Labels.jsx` and `BulkLabelsModal.jsx` no longer exist. Grep router.jsx for "labels" to confirm route removal. Grep Settings.jsx for "settings/labels" to confirm link removal.
  </verify>
  <done>
Settings/Labels page deleted, BulkLabelsModal deleted, route removed from router, navigation link removed from admin settings.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds with no errors
2. `grep -r "person_label\|team_label\|commissie_label" src/ includes/` returns no hits (except comments in cleanup code)
3. `grep -r "getPersonLabels\|getTeamLabels\|getCommissieLabels" src/` returns no hits
4. `grep -r "BulkLabelsModal" src/` returns no hits from deleted component (may still appear in PeopleList/TeamsList/CommissiesList - handled in plan 02)
5. Files `src/pages/Settings/Labels.jsx` and `src/components/BulkLabelsModal.jsx` do not exist
</verification>

<success_criteria>
- Zero label taxonomy registrations in PHP
- Zero label API client methods in client.js
- Settings/Labels page deleted and unreachable
- BulkLabelsModal component file deleted
- Frontend builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/176-frontend-cleanup/176-01-SUMMARY.md`
</output>
