---
phase: 109-mobile-ux
plan: 03
type: execute
wave: 3
depends_on: ["109-02"]
files_modified:
  - style.css
  - package.json
  - CHANGELOG.md
autonomous: false

must_haves:
  truths:
    - "Pull-to-refresh works on production in standalone PWA mode"
    - "iOS overscroll bounce is prevented in standalone mode"
    - "Pull gesture feels native and responsive"
    - "Refresh indicator appears during pull and data loading"
  artifacts:
    - path: "CHANGELOG.md"
      provides: "Version 8.2.0 release notes"
      contains: "Pull-to-refresh"
---

<objective>
Deploy and verify pull-to-refresh and overscroll prevention on production

Purpose: Validate that the mobile UX improvements work correctly on real iOS and Android devices in standalone PWA mode. Update version and changelog.

Output: Deployed, verified production build with pull-to-refresh and overscroll prevention working on mobile devices.
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update version and changelog, build, and deploy</name>
  <files>
    style.css
    package.json
    CHANGELOG.md
  </files>
  <action>
1. Update version to 8.2.0 in:
   - `style.css` (Theme Version header)
   - `package.json` (version field)

2. Add changelog entry in CHANGELOG.md under a new ## [8.2.0] section:
   ```markdown
   ## [8.2.0] - 2026-01-28

   ### Added
   - Pull-to-refresh gesture on all list views (People, Teams, Commissies, Dates, Todos, Feedback)
   - Pull-to-refresh on detail views (Person, Team, Commissie) and Dashboard
   - Native-like refresh indicator matching Stadion's accent color

   ### Fixed
   - iOS standalone mode no longer triggers page reload from overscroll bounce
   ```

3. Build for production:
   ```bash
   npm run build
   ```

4. Deploy to production:
   ```bash
   bin/deploy.sh
   ```
  </action>
  <verify>
    - style.css has Version: 8.2.0
    - package.json has "version": "8.2.0"
    - CHANGELOG.md has [8.2.0] section
    - `npm run build` completes successfully
    - Deploy script completes without errors
  </verify>
  <done>
    - Version bumped to 8.2.0
    - Changelog updated with pull-to-refresh and overscroll features
    - Production deployed
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Pull-to-refresh gesture on all list/detail views and Dashboard, plus iOS overscroll prevention.
  </what-built>
  <how-to-verify>
    Test on iOS device in standalone PWA mode (open from home screen):

    1. **Pull-to-refresh on People list:**
       - Go to Leden page
       - Pull down from top of list
       - Verify: Down arrow indicator appears while pulling
       - Verify: Spinner appears when released
       - Verify: Data refreshes (check network tab or wait for spinner to complete)

    2. **Pull-to-refresh on Dashboard:**
       - Go to Dashboard
       - Pull down from top
       - Verify: Same behavior - indicator, spinner, data refresh

    3. **Pull-to-refresh on detail view:**
       - Open any Person detail
       - Pull down from top
       - Verify: Spinner appears and person data refreshes

    4. **Overscroll prevention:**
       - On any page, scroll to the very top
       - Pull down firmly past the top boundary
       - Verify: NO bounce/rubberbanding effect
       - Verify: NO page reload or navigation triggered
       - (Note: Pull-to-refresh WILL trigger, which is correct - but no browser bounce)

    5. **Bottom overscroll:**
       - Scroll to very bottom of a long list
       - Pull up firmly past the bottom boundary
       - Verify: NO bounce effect at bottom either

    Test on Android if available:
    - Same pull-to-refresh tests should work
    - Android typically doesn't have overscroll issues but verify no regressions

    Production URL: Check DEPLOY_PRODUCTION_URL in .env
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 109 success criteria from ROADMAP.md:
1. [x] User can pull-to-refresh on mobile to reload current view
2. [x] iOS standalone mode does not accidentally reload page from overscroll bounce
3. [x] Pull-to-refresh gesture feels native and responsive
</verification>

<success_criteria>
- Version 8.2.0 deployed to production
- Pull-to-refresh works on all list views, detail views, and Dashboard
- iOS overscroll bounce prevented in standalone mode
- User verifies functionality on real device
</success_criteria>

<output>
After completion, create `.planning/phases/109-mobile-ux/109-03-SUMMARY.md`
</output>
