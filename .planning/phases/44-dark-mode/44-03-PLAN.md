---
phase: 44-dark-mode
plan: 03
type: execute
wave: 3
depends_on: ["44-02"]
files_modified:
  - src/components/PersonEditModal.jsx
  - src/components/TeamEditModal.jsx
  - src/components/ImportantDateModal.jsx
  - src/components/ContactEditModal.jsx
  - src/components/RelationshipEditModal.jsx
  - src/components/ShareModal.jsx
  - src/components/VisibilitySelector.jsx
  - src/components/Timeline/TodoModal.jsx
  - src/components/Timeline/GlobalTodoModal.jsx
  - src/components/Timeline/NoteModal.jsx
  - src/components/Timeline/QuickActivityModal.jsx
  - src/components/Timeline/CompleteTodoModal.jsx
  - src/components/Timeline/TimelineView.jsx
  - src/components/RichTextEditor.jsx
autonomous: true
---

<objective>
Add dark mode variants to all modal components and Timeline components.

Purpose: Complete dark mode support for all interactive modals and timeline views so the entire application is fully dark-mode compatible.
Output: All modals and timeline components display correctly in both light and dark modes.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/44-dark-mode/44-02-SUMMARY.md

# Color mapping reference:
# - bg-white → dark:bg-gray-800
# - bg-gray-50 → dark:bg-gray-900
# - bg-gray-100 → dark:bg-gray-700
# - border-gray-200 → dark:border-gray-700
# - border-gray-300 → dark:border-gray-600
# - text-gray-900 → dark:text-gray-50
# - text-gray-700 → dark:text-gray-200
# - text-gray-600 → dark:text-gray-300
# - text-gray-500 → dark:text-gray-400
# - hover:bg-gray-50 → dark:hover:bg-gray-700
# - divide-gray-100 → dark:divide-gray-700
# - placeholder-gray-400 → dark:placeholder-gray-500

# Modal overlay (bg-black/50) is already fine for both modes

@src/components/PersonEditModal.jsx
@src/components/Timeline/TodoModal.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add dark mode to Person/Team/Date edit modals</name>
  <files>src/components/PersonEditModal.jsx, src/components/TeamEditModal.jsx, src/components/ImportantDateModal.jsx</files>
  <action>
Add dark: variants to the main entity edit modals.

Common modal structure to update:
- Modal container: bg-white → dark:bg-gray-800
- Modal header: border-b border-gray-200 → dark:border-gray-700
- Modal title: text-gray-900 → dark:text-gray-50
- Form sections: background and borders
- Labels: should use .label class, but verify and add dark:text-gray-300 if needed
- Inputs: should use .input class, but verify and add dark variants if needed
- Select dropdowns and their options
- Radio buttons and checkboxes
- Helper text and error messages
- Footer buttons: border-t, button styling
- Close button (X icon)

Also look for:
- Photo upload areas
- Multi-select components
- Date pickers
- Dropdown menus within modals

Preserve all existing classes - only add dark: variants.
  </action>
  <verify>npm run build succeeds; open each modal in dark mode and verify all form elements visible</verify>
  <done>PersonEditModal, TeamEditModal, ImportantDateModal display correctly in dark mode</done>
</task>

<task type="auto">
  <name>Task 2: Add dark mode to Timeline and Todo modals</name>
  <files>src/components/Timeline/TodoModal.jsx, src/components/Timeline/GlobalTodoModal.jsx, src/components/Timeline/NoteModal.jsx, src/components/Timeline/QuickActivityModal.jsx, src/components/Timeline/CompleteTodoModal.jsx, src/components/Timeline/TimelineView.jsx</files>
  <action>
Add dark: variants to Timeline components and related modals.

TimelineView.jsx:
- Timeline item backgrounds
- Date separators
- Activity icons and badges
- Note content backgrounds
- Todo item cards
- Empty state

TodoModal.jsx & GlobalTodoModal.jsx:
- Modal container and header
- Form fields (title, due date, notes)
- Person selector dropdown
- Status/urgency indicators
- Notes editor area (if using TipTap)

NoteModal.jsx:
- Rich text editor container
- Toolbar styling (if visible)
- Content area

QuickActivityModal.jsx:
- Activity type selector
- Form fields

CompleteTodoModal.jsx:
- Completion confirmation dialog

Preserve all existing classes - only add dark: variants.
  </action>
  <verify>npm run build succeeds; timeline items visible in dark mode; todo modal form readable</verify>
  <done>All Timeline and Todo modals display correctly in dark mode</done>
</task>

<task type="auto">
  <name>Task 3: Add dark mode to remaining modals and shared components</name>
  <files>src/components/ContactEditModal.jsx, src/components/RelationshipEditModal.jsx, src/components/ShareModal.jsx, src/components/VisibilitySelector.jsx, src/components/RichTextEditor.jsx</files>
  <action>
Add dark: variants to remaining modals and shared components.

ContactEditModal.jsx:
- Contact type selector
- Phone/email/social input fields

RelationshipEditModal.jsx:
- Person search/selector
- Relationship type dropdown
- Form fields

ShareModal.jsx:
- User search field
- Share list with permissions
- Remove access buttons

VisibilitySelector.jsx:
- Radio or segmented control
- Option labels and descriptions
- Selected state styling

RichTextEditor.jsx:
- Editor container background
- Toolbar background and buttons
- Content area
- Placeholder text
- Focus ring

Note: TipTap editor may need special handling. Check if it has its own styling system or if Tailwind classes work directly.

Preserve all existing classes - only add dark: variants.
  </action>
  <verify>npm run build succeeds; all modals open and display correctly in dark mode; rich text editor usable</verify>
  <done>All remaining modals and RichTextEditor display correctly in dark mode</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] PersonEditModal form elements visible in dark mode
- [ ] TeamEditModal form elements visible in dark mode
- [ ] ImportantDateModal date picker usable in dark mode
- [ ] TodoModal notes editor visible in dark mode
- [ ] TimelineView items have proper contrast in dark mode
- [ ] ShareModal user list readable in dark mode
- [ ] RichTextEditor toolbar and content area properly styled
- [ ] All modal close buttons visible
- [ ] All form validation errors visible in dark mode
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- All modals render correctly in both light and dark modes
- Form elements have sufficient contrast
- Rich text editor fully functional in dark mode
  </success_criteria>

<output>
After completion, create `.planning/phases/44-dark-mode/44-03-SUMMARY.md`
</output>
