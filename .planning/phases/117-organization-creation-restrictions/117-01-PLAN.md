---
phase: 117-organization-creation-restrictions
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/Teams/TeamsList.jsx
  - src/pages/Commissies/CommissiesList.jsx
autonomous: true

must_haves:
  truths:
    - "Teams list page has no 'Nieuw team' button visible in header"
    - "Teams list page has no 'Nieuw team' button visible in empty state"
    - "Commissies list page has no 'Nieuwe commissie' button visible in header"
    - "Commissies list page has no 'Nieuwe commissie' button visible in empty state"
    - "REST API POST /wp/v2/teams still works for automation"
    - "REST API POST /wp/v2/commissies still works for automation"
  artifacts:
    - path: "src/pages/Teams/TeamsList.jsx"
      provides: "Teams list without creation controls"
      must_not_contain:
        - "showTeamModal"
        - "handleCreateTeam"
        - "Nieuw team"
    - path: "src/pages/Commissies/CommissiesList.jsx"
      provides: "Commissies list without creation controls"
      must_not_contain:
        - "showCommissieModal"
        - "handleCreateCommissie"
        - "Nieuwe commissie"
  key_links:
    - from: "src/pages/Teams/TeamsList.jsx"
      to: "TeamEditModal component"
      via: "import removed from list page"
      note: "Modal still used on TeamDetail.jsx for editing - only remove from list page"
    - from: "src/pages/Commissies/CommissiesList.jsx"
      to: "CommissieEditModal component"
      via: "import removed from list page"
      note: "Modal still used on CommissieDetail.jsx for editing - only remove from list page"
---

<objective>
Remove organization creation controls from TeamsList and CommissiesList pages

Purpose: Block manual creation of teams and commissies in the UI while preserving REST API functionality for Sportlink sync automation (constraint API-01)

Output: Both list pages display without creation buttons; all related modal components, state, and handlers removed from list pages only
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/116-person-edit-restrictions/116-01-SUMMARY.md
@.planning/phases/117-organization-creation-restrictions/117-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove team creation controls from TeamsList</name>
  <files>src/pages/Teams/TeamsList.jsx</files>
  <action>
Remove all team creation functionality from TeamsList.jsx. Follow the Phase 116 pattern exactly - remove elements entirely, not conditionally. Apply these changes in order:

1. **Remove imports** (lines 3, 5, 9):
   - Line 3: Remove `Plus` from lucide-react import
   - Line 5: Change `import { useCreateTeam, useBulkUpdateTeams }` to `import { useBulkUpdateTeams }`
   - Line 9: Remove `import TeamEditModal from '@/components/TeamEditModal';`

2. **Remove state variables** (lines 386-387):
   - Remove `const [showTeamModal, setShowTeamModal] = useState(false);`
   - Remove `const [isCreatingTeam, setIsCreatingTeam] = useState(false);`

3. **Remove mutation and handler** (lines 512-527):
   - Remove the `createTeamMutation` hook block (lines 513-518)
   - Remove the `handleCreateTeam` function (lines 520-527)
   - Remove the comment `// Create team mutation` (line 512)

4. **Remove header button** (lines 790-793):
   - Remove the entire button block:
     ```jsx
     <button onClick={() => setShowTeamModal(true)} className="btn-primary">
       <Plus className="w-4 h-4 md:mr-2" />
       <span className="hidden md:inline">Nieuw team</span>
     </button>
     ```

5. **Update empty state** (lines 818-826):
   - Change the message text from `'Voeg je eerste team toe.'` to `'Teams worden via de API of data import toegevoegd.'`
   - Remove the conditional button block (lines 821-826):
     ```jsx
     {!search && (
       <button onClick={() => setShowTeamModal(true)} className="btn-primary">
         <Plus className="w-4 h-4 md:mr-2" />
         <span className="hidden md:inline">Nieuw team</span>
       </button>
     )}
     ```

6. **Remove modal JSX** (lines 917-923):
   - Remove the `{/* Team Modal */}` comment
   - Remove the entire `<TeamEditModal>` component block

IMPORTANT: Do NOT modify the TeamEditModal component file itself - it's still used on TeamDetail.jsx for editing existing teams.
  </action>
  <verify>
Run `npm run lint` - no new errors or unused variable warnings related to the removed code.
Run `npm run build` - build completes successfully.
Grep for `showTeamModal` in TeamsList.jsx - should return no matches.
Grep for `Nieuw team` in TeamsList.jsx - should return no matches.
  </verify>
  <done>
TeamsList.jsx has no "Nieuw team" buttons, no TeamEditModal usage, no creation-related state/handlers. File compiles and lints cleanly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove commissie creation controls from CommissiesList</name>
  <files>src/pages/Commissies/CommissiesList.jsx</files>
  <action>
Remove all commissie creation functionality from CommissiesList.jsx. This mirrors Task 1 exactly:

1. **Remove imports** (lines 3, 5, 9):
   - Line 3: Remove `Plus` from lucide-react import
   - Line 5: Change `import { useCreateCommissie, useBulkUpdateCommissies }` to `import { useBulkUpdateCommissies }`
   - Line 9: Remove `import CommissieEditModal from '@/components/CommissieEditModal';`

2. **Remove state variables** (lines 386-387):
   - Remove `const [showCommissieModal, setShowCommissieModal] = useState(false);`
   - Remove `const [isCreatingCommissie, setIsCreatingCommissie] = useState(false);`

3. **Remove mutation and handler** (lines 512-527):
   - Remove the `createCommissieMutation` hook block (lines 513-518)
   - Remove the `handleCreateCommissie` function (lines 520-527)
   - Remove the comment `// Create commissie mutation` (line 512)

4. **Remove header button** (lines 790-793):
   - Remove the entire button block:
     ```jsx
     <button onClick={() => setShowCommissieModal(true)} className="btn-primary">
       <Plus className="w-4 h-4 md:mr-2" />
       <span className="hidden md:inline">Nieuwe commissie</span>
     </button>
     ```

5. **Update empty state** (lines 818-826):
   - Change the message text from `'Voeg je eerste commissie toe.'` to `'Commissies worden via de API of data import toegevoegd.'`
   - Remove the conditional button block (lines 821-826):
     ```jsx
     {!search && (
       <button onClick={() => setShowCommissieModal(true)} className="btn-primary">
         <Plus className="w-4 h-4 md:mr-2" />
         <span className="hidden md:inline">Nieuwe commissie</span>
       </button>
     )}
     ```

6. **Remove modal JSX** (lines 917-923):
   - Remove the `{/* Commissie Modal */}` comment
   - Remove the entire `<CommissieEditModal>` component block

IMPORTANT: Do NOT modify the CommissieEditModal component file itself - it's still used on CommissieDetail.jsx for editing existing commissies.
  </action>
  <verify>
Run `npm run lint` - no new errors or unused variable warnings related to the removed code.
Run `npm run build` - build completes successfully.
Grep for `showCommissieModal` in CommissiesList.jsx - should return no matches.
Grep for `Nieuwe commissie` in CommissiesList.jsx - should return no matches.
  </verify>
  <done>
CommissiesList.jsx has no "Nieuwe commissie" buttons, no CommissieEditModal usage, no creation-related state/handlers. File compiles and lints cleanly.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. **Build verification:**
   - `npm run lint` passes with no new warnings
   - `npm run build` completes successfully
   - No TypeScript or ESLint errors

2. **Code verification:**
   - `grep -r "Nieuw team" src/pages/Teams/TeamsList.jsx` returns no matches
   - `grep -r "Nieuwe commissie" src/pages/Commissies/CommissiesList.jsx` returns no matches
   - `grep -r "showTeamModal" src/pages/Teams/TeamsList.jsx` returns no matches
   - `grep -r "showCommissieModal" src/pages/Commissies/CommissiesList.jsx` returns no matches

3. **Component preservation:**
   - `grep -r "TeamEditModal" src/pages/Teams/TeamDetail.jsx` still has matches (editing preserved)
   - `grep -r "CommissieEditModal" src/pages/Commissies/CommissieDetail.jsx` still has matches (editing preserved)

4. **API verification:**
   - REST API endpoints remain unchanged (no PHP files modified)
   - POST /wp/v2/teams still available for automation
   - POST /wp/v2/commissies still available for automation
</verification>

<success_criteria>
Phase 117 requirements met:
- ORG-01: Team creation disabled in UI (no "Nieuw team" button in header or empty state)
- ORG-02: Commissie creation disabled in UI (no "Nieuwe commissie" button in header or empty state)
- API-01: REST API functionality unchanged (no backend modifications)

No other UI path allows creating teams or commissies:
- List page creation buttons removed
- Empty state creation buttons removed
- Modal components removed from list pages
- Creation handlers and state removed
</success_criteria>

<output>
After completion, create `.planning/phases/117-organization-creation-restrictions/117-01-SUMMARY.md`
</output>
