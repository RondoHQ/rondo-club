---
phase: 31-person-image-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/pages/People/PersonDetail.jsx]
autonomous: true
---

<objective>
Add mobile access to todos on PersonDetail page via floating action button and slide-up panel.

Purpose: The todos sidebar is hidden below lg breakpoint (`hidden lg:block`). Mobile users currently have no way to view or manage todos for a person without navigating away from the person profile.

Output: Floating action button visible on mobile that opens a slide-up panel with full todo functionality.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-todos-sidebar/30-01-SUMMARY.md

@src/pages/People/PersonDetail.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add floating action button for mobile todos</name>
  <files>src/pages/People/PersonDetail.jsx</files>
  <action>
Add a floating action button (FAB) that:
1. Is positioned fixed at bottom-right corner (`fixed bottom-6 right-6`)
2. Only visible on screens below lg breakpoint (`lg:hidden`)
3. Shows the CheckSquare2 icon (already imported)
4. Has a badge showing open todos count when > 0
5. Uses z-index 40 to appear above content but below modals (z-50)
6. Opens a mobile todos panel when clicked (via new state `showMobileTodos`)

Add state: `const [showMobileTodos, setShowMobileTodos] = useState(false);`

FAB styling:
- `bg-primary-600 hover:bg-primary-700 text-white rounded-full p-4 shadow-lg`
- Badge: absolute -top-1 -right-1, same style as sidebar badge

Place the FAB just before the modals section (after the closing `</div>` for the tab content flex container, before `{/* Modals */}`).
  </action>
  <verify>Visual inspection - FAB visible on mobile viewport (< 1024px), hidden on desktop</verify>
  <done>FAB appears at bottom-right on mobile, shows open todo count badge, hidden on lg+ screens</done>
</task>

<task type="auto">
  <name>Task 2: Add mobile todos slide-up panel</name>
  <files>src/pages/People/PersonDetail.jsx</files>
  <action>
Create a slide-up panel that:
1. Uses fixed positioning with backdrop (`fixed inset-0 z-50 bg-black bg-opacity-50`)
2. Panel slides up from bottom: `fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-xl max-h-[80vh] overflow-hidden`
3. Contains a header with "Todos" title, count badge, close button (X icon), and add button (Plus icon)
4. Scrollable content area (`overflow-y-auto`) with the existing todos list markup (copy from sidebar)
5. Only renders when `showMobileTodos` is true AND screen is below lg (use `lg:hidden` on the component)

Panel structure:
```
- Backdrop (onClick closes)
- Panel container
  - Header bar with drag indicator (small gray bar for visual affordance)
  - Title row: "Todos" + badge + spacer + Add button + Close button
  - Scrollable todo list (reuse sidebar markup)
```

Animation (optional but nice): Use transition classes for smooth slide-up.

Place immediately after the FAB, before modals section.

Important: The todo click handlers and functionality are already defined - reuse:
- handleToggleTodo for checkbox clicks
- setEditingTodo + setShowTodoModal for edit
- handleDeleteTodo for delete
- setShowTodoModal for add new
  </action>
  <verify>npm run build succeeds, no TypeScript/lint errors</verify>
  <done>Mobile panel opens when FAB clicked, shows all todos with full functionality (add/edit/delete/toggle), closes on backdrop click or X button</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes
- [ ] FAB visible on mobile (< 1024px), hidden on desktop
- [ ] Panel opens on FAB click, closes on X or backdrop
- [ ] Can add, edit, delete, and toggle todos from mobile panel
</verification>

<success_criteria>

- All tasks completed
- Mobile users can access todos without navigating away from PersonDetail
- Desktop experience unchanged (sidebar still visible)
- No errors or warnings introduced
</success_criteria>

<output>
After completion, create `.planning/phases/31-person-image-polish/31-01-SUMMARY.md`
</output>
