---
phase: 66-psr4-autoloader
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: [includes/class-calendar-connections.php, includes/class-calendar-matcher.php, includes/class-calendar-sync.php, includes/class-google-calendar-provider.php, includes/class-caldav-provider.php, includes/class-google-oauth.php, includes/class-notification-channel.php, includes/class-email-channel.php, includes/class-slack-channel.php, includes/class-comment-types.php, includes/class-workspace-members.php, includes/class-mentions.php, includes/class-mention-notifications.php, includes/class-reminders.php]
autonomous: true
---

<objective>
Add PSR-4 namespaces to calendar, notification, and collaboration feature classes.

Purpose: Enable Composer autoloading for feature modules that handle calendar sync, notifications, and team collaboration.
Output: 14 PHP files with proper Stadion\Calendar, Stadion\Notifications, and Stadion\Collaboration namespace declarations.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/64-audit-planning/AUDIT.md

Namespace mapping from AUDIT.md:
- STADION_Calendar_Connections → Stadion\Calendar\Connections
- STADION_Calendar_Matcher → Stadion\Calendar\Matcher
- STADION_Calendar_Sync → Stadion\Calendar\Sync
- STADION_Google_Calendar_Provider → Stadion\Calendar\GoogleProvider
- STADION_CalDAV_Provider → Stadion\Calendar\CalDAVProvider
- STADION_Google_OAuth → Stadion\Calendar\GoogleOAuth
- STADION_Notification_Channel → Stadion\Notifications\Channel
- STADION_Email_Channel → Stadion\Notifications\EmailChannel
- STADION_Slack_Channel → Stadion\Notifications\SlackChannel
- STADION_Comment_Types → Stadion\Collaboration\CommentTypes
- STADION_Workspace_Members → Stadion\Collaboration\WorkspaceMembers
- STADION_Mentions → Stadion\Collaboration\Mentions
- STADION_Mention_Notifications → Stadion\Collaboration\MentionNotifications
- STADION_Reminders → Stadion\Collaboration\Reminders

Relevant source files:
@includes/class-calendar-sync.php
@includes/class-notification-channel.php
@includes/class-email-channel.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add namespaces to Calendar classes</name>
  <files>includes/class-calendar-connections.php, includes/class-calendar-matcher.php, includes/class-calendar-sync.php, includes/class-google-calendar-provider.php, includes/class-caldav-provider.php, includes/class-google-oauth.php</files>
  <action>
For each of the 6 calendar class files:

1. Add namespace declaration after ABSPATH check:
   ```php
   namespace Stadion\Calendar;
   ```

2. Rename the class to remove STADION_ prefix:
   - `class STADION_Calendar_Connections` → `class Connections`
   - `class STADION_Calendar_Matcher` → `class Matcher`
   - `class STADION_Calendar_Sync` → `class Sync`
   - `class STADION_Google_Calendar_Provider` → `class GoogleProvider`
   - `class STADION_CalDAV_Provider` → `class CalDAVProvider`
   - `class STADION_Google_OAuth` → `class GoogleOAuth`

3. Keep ABSPATH check before namespace declaration.

4. Do NOT update references to other classes yet - that happens in Plan 66-04.

Example for class-calendar-sync.php:
```php
<?php
/**
 * Calendar Sync Handler
 */

if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

namespace Stadion\Calendar;

class Sync {
    // ... rest unchanged
}
```
  </action>
  <verify>Each calendar file has proper namespace: `grep -l "namespace Stadion\\\\Calendar" includes/class-calendar-*.php includes/class-google-calendar-provider.php includes/class-caldav-provider.php includes/class-google-oauth.php`</verify>
  <done>6 calendar classes have Stadion\Calendar namespace and renamed class names</done>
</task>

<task type="auto">
  <name>Task 2: Add namespaces to Notification and Collaboration classes</name>
  <files>includes/class-notification-channel.php, includes/class-email-channel.php, includes/class-slack-channel.php, includes/class-comment-types.php, includes/class-workspace-members.php, includes/class-mentions.php, includes/class-mention-notifications.php, includes/class-reminders.php</files>
  <action>
For the 3 notification class files, add namespace:
```php
namespace Stadion\Notifications;
```

Rename notification classes:
- `abstract class STADION_Notification_Channel` → `abstract class Channel`
- `class STADION_Email_Channel` → `class EmailChannel`
- `class STADION_Slack_Channel` → `class SlackChannel`

For EmailChannel and SlackChannel that extend STADION_Notification_Channel:
- Update `extends STADION_Notification_Channel` → `extends Channel`
(Same namespace, no use statement needed)

---

For the 5 collaboration class files, add namespace:
```php
namespace Stadion\Collaboration;
```

Rename collaboration classes:
- `class STADION_Comment_Types` → `class CommentTypes`
- `class STADION_Workspace_Members` → `class WorkspaceMembers`
- `class STADION_Mentions` → `class Mentions`
- `class STADION_Mention_Notifications` → `class MentionNotifications`
- `class STADION_Reminders` → `class Reminders`

Example for class-email-channel.php:
```php
<?php
/**
 * Email notification channel
 */

if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

namespace Stadion\Notifications;

class EmailChannel extends Channel {
    // ... rest unchanged
}
```
  </action>
  <verify>Verify namespaces: `grep "namespace Stadion" includes/class-notification-channel.php includes/class-email-channel.php includes/class-slack-channel.php includes/class-comment-types.php includes/class-workspace-members.php includes/class-mentions.php includes/class-mention-notifications.php includes/class-reminders.php`</verify>
  <done>3 notification classes have Stadion\Notifications namespace, 5 collaboration classes have Stadion\Collaboration namespace, extends clauses updated for channel inheritance</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 14 files have namespace declarations
- [ ] All class names are renamed (no STADION_ prefix)
- [ ] EmailChannel and SlackChannel use `extends Channel`
- [ ] ABSPATH checks remain before namespace
- [ ] `php -l` passes on all modified files
</verification>

<success_criteria>
- All tasks completed
- 6 Calendar classes namespaced as Stadion\Calendar\*
- 3 Notification classes namespaced as Stadion\Notifications\*
- 5 Collaboration classes namespaced as Stadion\Collaboration\*
- Notification channel inheritance chain preserved
- No PHP syntax errors
</success_criteria>

<output>
After completion, create `.planning/phases/66-psr4-autoloader/66-02-SUMMARY.md`
</output>
