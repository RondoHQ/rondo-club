---
phase: 105-instellingen-settings
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/Settings/Settings.jsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "All error messages in Settings display in Dutch"
    - "All success messages in Settings display in Dutch"
    - "All confirmation dialogs in Settings display in Dutch"
    - "Date formatting returns 'Nooit' instead of 'Never'"
    - "No mixed-language strings remain"
  artifacts:
    - path: "src/pages/Settings/Settings.jsx"
      provides: "Dutch translations for all error/success/confirmation messages"
      contains: "Verbinding mislukt"
  key_links:
    - from: "Error handlers"
      to: "User-facing messages"
      via: "alert(), setError(), setSuccessMessage()"
      pattern: "mislukt|succesvol|Nooit"
---

<objective>
Translate all remaining English error messages, success messages, and confirmation dialogs in Settings.jsx to Dutch.

Purpose: Close verification gaps - users currently see English text during error conditions and confirmations, breaking the fully Dutch experience.
Output: Settings.jsx with all dynamic messages translated to Dutch.
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/105-instellingen-settings/105-VERIFICATION.md
@src/pages/Settings/Settings.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Translate error messages and formatDate function</name>
  <files>src/pages/Settings/Settings.jsx</files>
  <action>
Find and translate the following English strings in Settings.jsx:

1. **formatDate function (line ~487):**
   - `'Never'` -> `'Nooit'`
   - Also change date locale from 'en-US' to 'nl-NL' with Dutch month formatting

2. **Slack-related error messages:**
   - Line 152: `'Failed to load Slack channels and users. Please try refreshing the page.'` -> `'Kan Slack-kanalen en -gebruikers niet laden. Ververs de pagina.'`
   - Line 279: `'Failed to connect Slack'` -> `'Kan Slack niet verbinden'`
   - Line 301: `'Failed to disconnect Slack'` -> `'Kan Slack niet ontkoppelen'`
   - Line 321: `'Failed to save notification targets'` -> `'Kan meldingsdoelen niet opslaan'`

3. **Google Contacts error messages:**
   - Line 259: `'Connection failed: ${googleError}'` -> `'Verbinding mislukt: ${googleError}'`
   - Line 336: `'Failed to initiate connection'` -> `'Kan verbinding niet starten'`
   - Line 350: `'Failed to disconnect'` -> `'Kan niet ontkoppelen'`
   - Line 418: `'Sync failed'` -> `'Synchronisatie mislukt'`

4. **App password error messages:**
   - Line 449: `'Failed to create app password'` -> `'Kan applicatiewachtwoord niet aanmaken'`
   - Line 464: `'Failed to revoke app password'` -> `'Kan applicatiewachtwoord niet intrekken'`

5. **Notification settings error messages:**
   - Line 506: `'Failed to update notification channels'` -> `'Kan meldingskanalen niet bijwerken'`
   - Line 525: `'Failed to update notification time'` -> `'Kan meldingstijd niet bijwerken'`
   - Line 541: `'Failed to update mention notification preference'` -> `'Kan vermeldingsvoorkeur niet bijwerken'`

6. **Admin tab error messages:**
   - Line 560: `'Failed to trigger reminders. Please check server logs.'` -> `'Kan herinneringen niet versturen. Controleer de serverlogboeken.'`
   - Line 578: `'Failed to reschedule cron jobs. Please check server logs.'` -> `'Kan cron-taken niet herplannen. Controleer de serverlogboeken.'`
  </action>
  <verify>
Run: `grep -n "Failed to" src/pages/Settings/Settings.jsx` - should return 0 matches outside console.error statements.
Run: `grep -n "'Never'" src/pages/Settings/Settings.jsx` - should return 0 matches.
  </verify>
  <done>
All error messages in functions show Dutch text, formatDate returns 'Nooit'.
  </done>
</task>

<task type="auto">
  <name>Task 2: Translate Calendar/CalDAV error messages and confirmation dialogs</name>
  <files>src/pages/Settings/Settings.jsx</files>
  <action>
Find and translate the following English strings:

1. **Calendar connection messages:**
   - Line 1031: `'Google Calendar connected successfully!'` -> `'Google Agenda succesvol verbonden!'`
   - Line 1065: `'Failed to load agenda connections.'` -> `'Kan agendakoppelingen niet laden.'`
   - Line 1077: `'Failed to get authorization URL.'` -> `'Kan autorisatie-URL niet ophalen.'`
   - Line 1080: `'Failed to connect Google Calendar.'` -> `'Kan Google Agenda niet verbinden.'`
   - Line 1093: `'Sync failed.'` -> `'Synchronisatie mislukt.'`
   - Line 1108: `'Connection deleted successfully.'` -> `'Koppeling succesvol verwijderd.'`
   - Line 1111: `'Failed to delete connection.'` -> `'Kan koppeling niet verwijderen.'`
   - Line 1120: `'CalDAV agenda connected successfully!'` -> `'CalDAV-agenda succesvol verbonden!'`
   - Line 1416: `'Connection updated successfully.'` -> `'Koppeling succesvol bijgewerkt.'`

2. **Confirmation dialogs (confirm() calls):**
   - Line 284: `'Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.'` -> `'Weet je zeker dat je Slack wilt ontkoppelen? Je ontvangt dan geen Slack-meldingen meer.'`
   - Line 342: `'Disconnect Google Contacts? This will stop syncing contacts.'` -> `'Google Contacten ontkoppelen? Hiermee stopt de synchronisatie.'`
   - Line 549: `'This will send reminder emails for all reminders due today. Continue?'` -> `'Dit verstuurt herinneringsmails voor alle herinneringen van vandaag. Doorgaan?'`
   - Line 567: `'This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?'` -> `'Dit herplant alle cron-taken op basis van de meldingsvoorkeuren van gebruikers. Doorgaan?'`
   - Line 1101: `'Are you sure you want to delete "${connectionName}"? All synced events from this agenda will also be deleted.'` -> `'Weet je zeker dat je "${connectionName}" wilt verwijderen? Alle gesynchroniseerde afspraken worden ook verwijderd.'`
   - Line 1139: `'Are you sure you want to regenerate your agenda URL? Any existing agenda subscriptions will stop working until you update them with the new URL.'` -> `'Weet je zeker dat je de agenda-URL opnieuw wilt genereren? Bestaande abonnementen werken niet meer totdat je ze bijwerkt met de nieuwe URL.'`

3. **UI text in CalendarsTab iCal section:**
   - Line 1303: `'Sign in with your Google account'` -> `'Inloggen met je Google-account'`
   - Line 1328: `'Subscribe to important dates in your agenda'` -> `'Abonneer op belangrijke datums in je agenda'`
   - Line 1329-1330: `'Subscribe to your important dates in any agenda app...'` -> `'Abonneer op je belangrijke datums in elke agenda-app (Apple Agenda, Google Agenda, Outlook, etc.)'`
   - Line 1341: `'Your agenda feed URL'` -> `'Je agenda-feed-URL'`
   - Line 1360: `'Copied'` -> `'Gekopieerd'`
   - Line 1367: `'Copy'` -> `'Kopiëren'`
   - Line 1380: `'Subscribe in agenda app'` -> `'Abonneren in agenda-app'`
   - Line 1389: `'Regenerate URL'` -> `'URL opnieuw genereren'`
   - Lines 1393-1396: `'Keep this URL private...'` -> `'Houd deze URL privé. Iedereen met toegang kan je belangrijke datums zien. Als je denkt dat de URL is uitgelekt, klik dan op "URL opnieuw genereren" voor een nieuwe.'`
  </action>
  <verify>
Run: `grep -n "connected successfully\|Subscribe to\|Sign in with" src/pages/Settings/Settings.jsx` - should return 0 matches.
Run: `grep -n "Are you sure" src/pages/Settings/Settings.jsx` - should return 0 matches.
  </verify>
  <done>
All calendar messages, confirmation dialogs, and iCal subscription text show Dutch.
  </done>
</task>

<task type="auto">
  <name>Task 3: Fix mixed-language string and remaining console messages</name>
  <files>src/pages/Settings/Settings.jsx</files>
  <action>
Find and translate the following:

1. **Mixed-language string (line 2938):**
   - `'These passwords work with the REST API and CardDAV-synchronisatie.'` -> `'Deze wachtwoorden werken met de REST API en CardDAV-synchronisatie.'`

2. **Console error messages (translate for consistency, though not user-facing):**
   - Line 217: `console.fout('Failed to fetch unlinked count:'` -> `console.error('Kan ontkoppeld aantal niet ophalen:'`
   - Line 434: `console.fout('Failed to update sync frequency:'` -> `console.error('Kan synchronisatiefrequentie niet bijwerken:'`
   - Line 1662: `console.error('Failed to fetch agendas:'` -> `console.error('Kan agenda\'s niet ophalen:'`

Note: Also fix `console.fout` typos to `console.error` where found.

3. **Final verification scan - search for any remaining English phrases:**
   - Search for: `failed`, `successfully`, `error`, `Are you sure`, `Please`, `Continue?`
   - Translate any found instances that are user-facing (not in comments or variable names)
  </action>
  <verify>
Run: `grep -n "These passwords work" src/pages/Settings/Settings.jsx` - should return 0 matches.
Run: `grep -n "console.fout" src/pages/Settings/Settings.jsx` - should return 0 matches (typos fixed).
Run: `npm run build` - should complete without errors.
Run: `npm run lint` - should pass.
  </verify>
  <done>
No mixed-language strings remain, console typos fixed, all user-facing text in Dutch.
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. `npm run build` completes successfully
2. `npm run lint` passes
3. `grep -E "(Failed to|Are you sure|successfully|'Never')" src/pages/Settings/Settings.jsx` returns only non-user-facing matches (comments, console.error)
4. All confirmation dialogs display Dutch text
5. All error/success messages display Dutch text
6. formatDate returns 'Nooit' for null dates
</verification>

<success_criteria>
- Zero English error messages shown to users
- Zero English success messages shown to users
- Zero English confirmation dialogs
- formatDate function returns Dutch 'Nooit'
- No mixed Dutch/English strings
- Build and lint pass
</success_criteria>

<output>
After completion, create `.planning/phases/105-instellingen-settings/105-06-SUMMARY.md`
</output>
