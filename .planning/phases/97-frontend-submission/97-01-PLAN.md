---
phase: 97-frontend-submission
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/api/client.js
  - src/hooks/useFeedback.js
  - src/App.jsx
  - src/components/layout/Layout.jsx
autonomous: true

must_haves:
  truths:
    - "API client can call all feedback REST endpoints"
    - "TanStack Query hooks fetch and cache feedback data"
    - "User can navigate to /feedback route"
    - "Feedback menu item appears in sidebar navigation"
  artifacts:
    - path: "src/api/client.js"
      provides: "Feedback API methods in prmApi object"
      contains: "getFeedbackList"
    - path: "src/hooks/useFeedback.js"
      provides: "TanStack Query hooks for feedback"
      exports: ["useFeedbackList", "useFeedback", "useCreateFeedback", "useUpdateFeedback", "useDeleteFeedback"]
    - path: "src/App.jsx"
      provides: "Route registration for /feedback and /feedback/:id"
      contains: "FeedbackList"
    - path: "src/components/layout/Layout.jsx"
      provides: "Feedback navigation item in sidebar"
      contains: "Feedback"
  key_links:
    - from: "src/hooks/useFeedback.js"
      to: "src/api/client.js"
      via: "prmApi.getFeedbackList import"
      pattern: "prmApi\\.getFeedbackList"
    - from: "src/App.jsx"
      to: "src/pages/Feedback/FeedbackList.jsx"
      via: "lazy import and route"
      pattern: "FeedbackList.*lazy"
---

<objective>
Set up API client methods, TanStack Query hooks, and routing infrastructure for the feedback feature.

Purpose: Create the foundation layer that Plan 02's UI components will consume. Following established patterns from usePeople and useTodos.
Output: Feedback API methods in client.js, useFeedback hook with CRUD operations, routes registered, and navigation added.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v6.1-feedback-system/ROADMAP.md
@.planning/STATE.md
@.planning/phases/97-frontend-submission/97-RESEARCH.md

# Prior phase - REST API is ready
@.planning/phases/96-rest-api/96-01-SUMMARY.md

# Existing patterns to follow
@src/api/client.js
@src/hooks/usePeople.js
@src/App.jsx
@src/components/layout/Layout.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add feedback API methods to client.js</name>
  <files>src/api/client.js</files>
  <action>
Add feedback CRUD methods to the prmApi object in src/api/client.js.

Methods to add (following existing pattern like todos):
```javascript
// Feedback
getFeedbackList: (params) => api.get('/prm/v1/feedback', { params }),
getFeedback: (id) => api.get(`/prm/v1/feedback/${id}`),
createFeedback: (data) => api.post('/prm/v1/feedback', data),
updateFeedback: (id, data) => api.put(`/prm/v1/feedback/${id}`, data),
deleteFeedback: (id) => api.delete(`/prm/v1/feedback/${id}`),
```

Place these methods at the end of the prmApi object, before the closing brace.
  </action>
  <verify>Run `npm run lint` - no errors in client.js</verify>
  <done>prmApi object contains all 5 feedback methods</done>
</task>

<task type="auto">
  <name>Task 2: Create useFeedback.js hook with TanStack Query</name>
  <files>src/hooks/useFeedback.js</files>
  <action>
Create new file src/hooks/useFeedback.js following the pattern from usePeople.js.

Include:
1. Query keys factory:
```javascript
export const feedbackKeys = {
  all: ['feedback'],
  lists: () => [...feedbackKeys.all, 'list'],
  list: (filters) => [...feedbackKeys.lists(), filters],
  details: () => [...feedbackKeys.all, 'detail'],
  detail: (id) => [...feedbackKeys.details(), id],
};
```

2. Hooks to implement:
- `useFeedbackList(filters = {})` - Fetches list with optional type/status filters
- `useFeedback(id)` - Fetches single feedback item, enabled only when id truthy
- `useCreateFeedback()` - Mutation that invalidates feedbackKeys.lists() on success
- `useUpdateFeedback()` - Mutation accepting { id, data }, invalidates detail and lists
- `useDeleteFeedback()` - Mutation that invalidates lists and details

Pattern to follow from usePeople.js:
- Import useQuery, useMutation, useQueryClient from @tanstack/react-query
- Import prmApi from @/api/client
- Return response.data from queryFn
- Use enabled: !!id for detail queries
  </action>
  <verify>Run `npm run lint` - no errors in useFeedback.js</verify>
  <done>useFeedback.js exports feedbackKeys, useFeedbackList, useFeedback, useCreateFeedback, useUpdateFeedback, useDeleteFeedback</done>
</task>

<task type="auto">
  <name>Task 3: Add routes and navigation for feedback</name>
  <files>src/App.jsx, src/components/layout/Layout.jsx</files>
  <action>
**In src/App.jsx:**

1. Add lazy import for FeedbackList and FeedbackDetail (after TodosList import):
```javascript
const FeedbackList = lazy(() => import('@/pages/Feedback/FeedbackList'));
const FeedbackDetail = lazy(() => import('@/pages/Feedback/FeedbackDetail'));
```

2. Add routes inside the protected Routes (after Todos routes, before Settings):
```javascript
{/* Feedback routes */}
<Route path="/feedback" element={<FeedbackList />} />
<Route path="/feedback/:id" element={<FeedbackDetail />} />
```

**In src/components/layout/Layout.jsx:**

1. Add MessageSquare import from lucide-react (at the top with other icons)

2. Add Feedback to navigation array (before Settings, after Workspaces):
```javascript
{ name: 'Feedback', href: '/feedback', icon: MessageSquare },
```

Note: The page components don't exist yet (Plan 02), but React Router will handle this gracefully during development.
  </action>
  <verify>Run `npm run lint` - no errors in App.jsx or Layout.jsx</verify>
  <done>Routes /feedback and /feedback/:id registered, Feedback navigation item added to sidebar</done>
</task>

</tasks>

<verification>
After completing all tasks:
1. `npm run lint` passes with no errors
2. `npm run build` succeeds (build may warn about missing page components - that's expected)
3. prmApi.getFeedbackList is defined in client.js
4. useFeedbackList hook is exported from useFeedback.js
5. Feedback appears in Layout.jsx navigation array
6. /feedback route registered in App.jsx
</verification>

<success_criteria>
- API client has 5 feedback methods
- TanStack Query hook file created with all CRUD hooks
- Routes registered for /feedback and /feedback/:id
- Navigation item added to sidebar
- All files pass linting
</success_criteria>

<output>
After completion, create `.planning/phases/97-frontend-submission/97-01-SUMMARY.md`
</output>
