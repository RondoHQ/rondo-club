---
phase: 145-frontend-color-refactor
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tailwind.config.js
  - src/index.css
  - src/hooks/useTheme.js
  - src/pages/Settings/Settings.jsx
  - functions.php
autonomous: true

must_haves:
  truths:
    - "Selecting 'club' accent color applies the club color from window.stadionConfig.accentColor"
    - "Users with 'awc' saved in localStorage are auto-migrated to 'club' on load"
    - "All AWC comments and references removed from source code"
    - "Club color swatch in accent picker uses dynamic hex from config, not hardcoded green"
    - "Dark mode works correctly with club accent color"
    - "Favicon SVG uses club color when club accent is selected (React-side, via useTheme)"
    - "Theme-color meta tags use club color when club accent is selected (React-side, via useTheme)"
    - "Zero AWC/awc references remain anywhere in src/ or in modified config files"
  artifacts:
    - path: "tailwind.config.js"
      provides: "Renamed awc palette to club"
      contains: "club:"
    - path: "src/index.css"
      provides: "CSS custom properties for accent colors with updated comments (no AWC)"
      contains: "Default accent: Club color"
    - path: "src/hooks/useTheme.js"
      provides: "Club accent support with dynamic hex, auto-migration from awc"
      contains: "club"
    - path: "src/pages/Settings/Settings.jsx"
      provides: "Accent picker with 'Club' as first option, using bg-club-600 and ring-club-600"
      contains: "'Club'"
  key_links:
    - from: "src/hooks/useTheme.js"
      to: "window.stadionConfig.accentColor"
      via: "Dynamic hex lookup for club accent"
      pattern: "stadionConfig.*accentColor"
    - from: "src/hooks/useTheme.js"
      to: "src/index.css"
      via: "data-accent attribute drives CSS custom properties"
      pattern: "setAttribute.*data-accent.*club"
    - from: "src/pages/Settings/Settings.jsx"
      to: "src/hooks/useTheme.js"
      via: "ACCENT_COLORS import includes club"
      pattern: "ACCENT_COLORS"
    - from: "src/pages/Settings/Settings.jsx"
      to: "tailwind.config.js"
      via: "bg-club-600 and ring-club-600 classes resolve to club palette"
      pattern: "bg-club-600|ring-club-600"
---

<objective>
Rename all AWC color references to "club" throughout the frontend codebase and make the club accent color dynamic (reading hex from window.stadionConfig.accentColor instead of hardcoded green).

Purpose: This is the foundational rename that all other Phase 145 work builds on. After this plan, the color system uses "club" everywhere and supports arbitrary hex values from the backend config API. The React-side favicon and theme-color meta tag updates (via useTheme.js) are included here; the PHP-side login page and initial-load meta tags are handled in Plan 02.

Output: Renamed color system with dynamic club color support in Tailwind config, CSS, useTheme hook, and Settings accent picker.
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/144-backend-configuration-system/144-01-SUMMARY.md
@.planning/phases/145-frontend-color-refactor/145-CONTEXT.md
@.planning/phases/145-frontend-color-refactor/145-RESEARCH.md

Key source files to modify:
@tailwind.config.js
@src/index.css
@src/hooks/useTheme.js
@src/pages/Settings/Settings.jsx
@functions.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename AWC to Club in Tailwind config, CSS custom properties, PHP comments, and Settings component classes</name>
  <files>tailwind.config.js, src/index.css, functions.php, src/pages/Settings/Settings.jsx</files>
  <action>
    **tailwind.config.js:**
    - Rename the `awc` color palette key to `club` (line 24: `awc: {` becomes `club: {`)
    - Update the comment from "AWC Green palette" to "Club color palette" (line 23)
    - Keep all hex values identical (these are the green fallback defaults)

    **src/index.css:**
    - The `:root` block (lines 119-131) already defines the default accent CSS variables with hardcoded green values. These stay as-is since they ARE the default/fallback. Update the comment on line 120 from "Default accent: AWC green (#006935)" to "Default accent: Club color (fallback #006935)"
    - The `.dark` block (lines 238-250) has the dark mode defaults. Update comment on line 239 from "Default accent: AWC green" to "Default accent: Club color"
    - There is NO `[data-accent="awc"]` block in index.css because the green values are the `:root` defaults. No `[data-accent="club"]` block is needed either -- `:root` provides the defaults, and when the club color is non-default, useTheme.js injects CSS variable overrides via inline styles on `:root`. Only update the two comments.

    **functions.php:**
    - Line 624: Change comment from "Theme Color (default AWC green, React will update dynamically)" to "Theme Color (default club color, React will update dynamically)"
    - Line 953: Change comment from "Background - AWC Green gradient" to "Background gradient"
    - No other AWC references exist in PHP files

    **src/pages/Settings/Settings.jsx:**
    This is the ONLY component in src/ that uses AWC Tailwind classes. Confirmed via grep: only `bg-awc-600` and `ring-awc-600` exist in Settings.jsx. No other components use awc-prefixed classes (the rest of the app uses `bg-accent-*` CSS variable classes).

    1. Update accentColorClasses (around line 908-918):
       - Change `awc: 'bg-awc-600'` to `club: 'bg-club-600'`

    2. Update accentRingClasses (around line 920-930):
       - Change `awc: 'ring-awc-600'` to `club: 'ring-club-600'`

    3. Update the accent picker button title (around line 991):
       - Change `color === 'awc' ? 'AWC'` to `color === 'club' ? 'Club'`

    4. Update the aria-label (around line 992):
       - Change `color === 'awc' ? 'AWC'` to `color === 'club' ? 'Club'`

    5. Update the selected indicator text (around line 1000):
       - Change `accentColor === 'awc' ? 'AWC'` to `accentColor === 'club' ? 'Club'`

    6. Add note below the selected indicator when club is selected:
       ```jsx
       {accentColor === 'club' && (
         <span className="text-gray-400 dark:text-gray-500"> (past zich aan wanneer de beheerder de clubkleur wijzigt)</span>
       )}
       ```

    7. For the club color swatch specifically, use a dynamic background style instead of the Tailwind class so it shows the actual configured club color (not just the static green from CSS):
       In the accent color picker button, when `color === 'club'`, use an inline style for the background color:
       ```jsx
       style={color === 'club' ? { backgroundColor: window.stadionConfig?.accentColor || '#006935' } : undefined}
       className={`
         w-10 h-10 rounded-full transition-transform hover:scale-110
         ${color !== 'club' ? accentColorClasses[color] : ''}
         ${isSelected ? `ring-2 ring-offset-2 ${color !== 'club' ? accentRingClasses[color] : 'ring-current'} dark:ring-offset-gray-800` : ''}
       `}
       ```
       This ensures the club swatch always shows the actual configured club color.
  </action>
  <verify>
    1. `grep -rn "awc\|AWC" tailwind.config.js src/index.css functions.php` returns no results
    2. `grep -rn "awc\|AWC" src/pages/Settings/Settings.jsx` returns no results
    3. Full codebase check: `grep -rn "bg-awc\|text-awc\|ring-awc\|border-awc" src/` returns no results
    4. `grep -rn "'awc'" src/` returns no results (no string literal 'awc' in any JS file)
    5. `grep "club" tailwind.config.js` shows the renamed palette
    6. `npm run build` completes without errors
  </verify>
  <done>All AWC references renamed to club across ALL files in src/ and config files. Tailwind palette key is "club", CSS comments updated, PHP comments updated, Settings.jsx uses bg-club-600 and ring-club-600. Zero AWC references remain. Build succeeds.</done>
</task>

<task type="auto">
  <name>Task 2: Update useTheme.js for dynamic club color, auto-migration, favicon, and theme-color meta</name>
  <files>src/hooks/useTheme.js</files>
  <action>
    **src/hooks/useTheme.js:**

    1. Rename ACCENT_COLORS array: Change `'awc'` to `'club'` (first element)

    2. Update ACCENT_HEX: Change `awc:` key to `club:` BUT make it a function that reads from window.stadionConfig:
       ```javascript
       const ACCENT_HEX = {
         club: '#006935', // Fallback; getClubHex() reads from stadionConfig
         orange: '#f97316',
         // ... rest unchanged
       };
       ```
       Add a helper function:
       ```javascript
       function getClubHex() {
         return window.stadionConfig?.accentColor || ACCENT_HEX.club;
       }
       ```

    3. Update ACCENT_HEX_DARK: Change `awc:` key to `club:` with value `'#22c560'` (same default)
       Add a helper:
       ```javascript
       function getClubHexDark() {
         const clubHex = getClubHex();
         // If using default green, return the known dark variant
         if (clubHex === '#006935') return '#22c560';
         // For custom colors, lighten for dark mode visibility
         return lightenHex(clubHex, 40);
       }
       ```

       Add a simple lightenHex utility:
       ```javascript
       function lightenHex(hex, percent) {
         const r = parseInt(hex.slice(1, 3), 16);
         const g = parseInt(hex.slice(3, 5), 16);
         const b = parseInt(hex.slice(5, 7), 16);
         const factor = percent / 100;
         const newR = Math.min(255, Math.round(r + (255 - r) * factor));
         const newG = Math.min(255, Math.round(g + (255 - g) * factor));
         const newB = Math.min(255, Math.round(b + (255 - b) * factor));
         return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
       }
       ```

    4. Update DEFAULT_PREFERENCES: Change `accentColor: 'awc'` to `accentColor: 'club'`

    5. Update comment on line 9: Change "awc is default" to "club is default"

    6. Auto-migration in loadPreferences(): After parsing stored preferences, add migration:
       ```javascript
       // Auto-migrate 'awc' to 'club' for existing users
       if (parsed.accentColor === 'awc') {
         parsed.accentColor = 'club';
       }
       ```
       Place this after the `const parsed = JSON.parse(stored);` line, before the return.

    7. Update updateFavicon(): When accent is 'club', use `getClubHex()` instead of looking up ACCENT_HEX directly:
       ```javascript
       function updateFavicon(accentColor) {
         if (typeof document === 'undefined') return;
         const hex = accentColor === 'club' ? getClubHex() : (ACCENT_HEX[accentColor] || ACCENT_HEX.orange);
         // ... rest stays same
       }
       ```

    8. Update updateThemeColorMeta(): When accent is 'club', use dynamic hex:
       ```javascript
       function updateThemeColorMeta(accentColor) {
         if (typeof document === 'undefined') return;
         let lightHex, darkHex;
         if (accentColor === 'club') {
           lightHex = getClubHex();
           darkHex = getClubHexDark();
         } else {
           lightHex = ACCENT_HEX[accentColor] || ACCENT_HEX.orange;
           darkHex = ACCENT_HEX_DARK[accentColor] || ACCENT_HEX_DARK.orange;
         }
         // ... rest stays same
       }
       ```

    9. Update applyTheme(): When accent is 'club', inject the dynamic hex values as inline CSS custom properties on :root so they override the CSS defaults. This enables admin-configured colors to work without rebuilding CSS:
       ```javascript
       function applyTheme(effectiveColorScheme, accentColor) {
         if (typeof document === 'undefined') return;
         const root = document.documentElement;

         // Clear any previously injected club color variables
         clearClubColorVars(root);

         // Apply dark mode class
         if (effectiveColorScheme === 'dark') {
           root.classList.add('dark');
         } else {
           root.classList.remove('dark');
         }

         // For club accent, inject dynamic CSS variables if custom color is configured
         if (accentColor === 'club') {
           const clubHex = getClubHex();
           const defaultHex = '#006935';
           if (clubHex !== defaultHex) {
             injectClubColorVars(root, clubHex, effectiveColorScheme);
           }
         }

         root.setAttribute('data-accent', accentColor);
         updateFavicon(accentColor);
         updateThemeColorMeta(accentColor);
       }
       ```

       Add helper functions:
       ```javascript
       function clearClubColorVars(root) {
         for (let i = 0; i <= 9; i++) {
           root.style.removeProperty(`--color-accent-${i === 0 ? '50' : i + '00'}`);
         }
       }

       function injectClubColorVars(root, hex, colorScheme) {
         if (colorScheme === 'light') {
           root.style.setProperty('--color-accent-50', lightenHex(hex, 92));
           root.style.setProperty('--color-accent-100', lightenHex(hex, 82));
           root.style.setProperty('--color-accent-200', lightenHex(hex, 68));
           root.style.setProperty('--color-accent-300', lightenHex(hex, 52));
           root.style.setProperty('--color-accent-400', lightenHex(hex, 35));
           root.style.setProperty('--color-accent-500', lightenHex(hex, 15));
           root.style.setProperty('--color-accent-600', hex);
           root.style.setProperty('--color-accent-700', darkenHex(hex, 15));
           root.style.setProperty('--color-accent-800', darkenHex(hex, 30));
           root.style.setProperty('--color-accent-900', darkenHex(hex, 45));
         } else {
           root.style.setProperty('--color-accent-50', darkenHex(hex, 45));
           root.style.setProperty('--color-accent-100', darkenHex(hex, 30));
           root.style.setProperty('--color-accent-200', darkenHex(hex, 15));
           root.style.setProperty('--color-accent-300', hex);
           root.style.setProperty('--color-accent-400', lightenHex(hex, 15));
           root.style.setProperty('--color-accent-500', lightenHex(hex, 35));
           root.style.setProperty('--color-accent-600', lightenHex(hex, 52));
           root.style.setProperty('--color-accent-700', lightenHex(hex, 68));
           root.style.setProperty('--color-accent-800', lightenHex(hex, 82));
           root.style.setProperty('--color-accent-900', lightenHex(hex, 92));
         }
       }

       function darkenHex(hex, percent) {
         const r = parseInt(hex.slice(1, 3), 16);
         const g = parseInt(hex.slice(3, 5), 16);
         const b = parseInt(hex.slice(5, 7), 16);
         const factor = percent / 100;
         const newR = Math.max(0, Math.round(r * (1 - factor)));
         const newG = Math.max(0, Math.round(g * (1 - factor)));
         const newB = Math.max(0, Math.round(b * (1 - factor)));
         return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
       }
       ```
  </action>
  <verify>
    1. `grep -rn "awc\|AWC" src/hooks/useTheme.js` returns no results
    2. `grep -rn "'awc'" src/` returns no results (complete codebase check for string literal)
    3. `grep -rn "awc\|AWC" src/` returns no results (only svawc.nl URL in PersonDetail.jsx is expected, that is a FreeScout URL and will be addressed in Phase 146)
    4. `npm run build` completes without errors
    5. `npm run lint` passes (max-warnings: 0)
  </verify>
  <done>
    - ACCENT_COLORS array uses 'club' as first element
    - Dynamic club hex from window.stadionConfig works for favicon, theme-color meta, and CSS variable injection
    - Auto-migration from 'awc' to 'club' in localStorage
    - All AWC text references removed from JS files
    - Build and lint pass
    - Zero AWC/awc references remain in src/ (except svawc.nl FreeScout URL in PersonDetail.jsx, addressed in Phase 146)
  </done>
</task>

</tasks>

<verification>
1. `grep -rn "bg-awc\|text-awc\|ring-awc\|border-awc" src/` returns zero results (no AWC Tailwind classes anywhere)
2. `grep -rn "'awc'" src/` returns zero results (no AWC string literals in JS)
3. `grep -rn "awc\|AWC" tailwind.config.js src/index.css src/hooks/useTheme.js src/pages/Settings/Settings.jsx functions.php` returns zero results
4. `npm run build` succeeds
5. `npm run lint` passes
6. The accent color picker in Settings shows "Club" as the first swatch
7. Selecting "Club" accent applies the configured club color (or green #006935 default)
8. Users who had 'awc' saved get auto-migrated to 'club' on next page load
9. Favicon updates to club color when club accent is selected (React-side)
10. Theme-color meta tags update for PWA when club accent is selected (React-side)
</verification>

<success_criteria>
- Zero remaining AWC/awc references in src/ (except svawc.nl URL in PersonDetail.jsx)
- Zero remaining AWC/awc references in modified config/PHP files
- Build succeeds without errors
- Club accent color is dynamic (reads from window.stadionConfig.accentColor)
- Auto-migration from 'awc' to 'club' in localStorage works
- Dark mode supports club accent color with proper contrast
- Favicon and theme-color meta tags use dynamic club color (React-side)
</success_criteria>

<output>
After completion, create `.planning/phases/145-frontend-color-refactor/145-01-SUMMARY.md`
</output>
