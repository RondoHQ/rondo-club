---
phase: 145-frontend-color-refactor
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tailwind.config.js
  - src/index.css
  - src/hooks/useTheme.js
  - src/pages/Settings/Settings.jsx
  - functions.php
autonomous: true

must_haves:
  truths:
    - "Selecting 'club' accent color applies the club color from window.stadionConfig.accentColor"
    - "Users with 'awc' saved in localStorage are auto-migrated to 'club' on load"
    - "All AWC comments removed from source code"
    - "Club color swatch in accent picker uses dynamic hex from config, not hardcoded green"
    - "Dark mode works correctly with club accent color"
    - "Favicon and theme-color meta tags reflect club color when club accent is selected"
  artifacts:
    - path: "tailwind.config.js"
      provides: "Renamed awc palette to club"
      contains: "club:"
    - path: "src/index.css"
      provides: "CSS custom properties for club accent including light and dark mode"
      contains: "data-accent=\"club\""
    - path: "src/hooks/useTheme.js"
      provides: "Club accent support with dynamic hex, auto-migration from awc"
      contains: "club"
    - path: "src/pages/Settings/Settings.jsx"
      provides: "Accent picker with 'Club' as first option"
      contains: "'Club'"
  key_links:
    - from: "src/hooks/useTheme.js"
      to: "window.stadionConfig.accentColor"
      via: "Dynamic hex lookup for club accent"
      pattern: "stadionConfig.*accentColor"
    - from: "src/hooks/useTheme.js"
      to: "src/index.css"
      via: "data-accent attribute drives CSS custom properties"
      pattern: "setAttribute.*data-accent.*club"
    - from: "src/pages/Settings/Settings.jsx"
      to: "src/hooks/useTheme.js"
      via: "ACCENT_COLORS import includes club"
      pattern: "ACCENT_COLORS"
---

<objective>
Rename all AWC color references to "club" throughout the frontend codebase and make the club accent color dynamic (reading hex from window.stadionConfig.accentColor instead of hardcoded green).

Purpose: This is the foundational rename that all other Phase 145 work builds on. After this plan, the color system uses "club" everywhere and supports arbitrary hex values from the backend config API.

Output: Renamed color system with dynamic club color support in Tailwind config, CSS, useTheme hook, and Settings accent picker.
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/144-backend-configuration-system/144-01-SUMMARY.md
@.planning/phases/145-frontend-color-refactor/145-CONTEXT.md
@.planning/phases/145-frontend-color-refactor/145-RESEARCH.md

Key source files to modify:
@tailwind.config.js
@src/index.css
@src/hooks/useTheme.js
@src/pages/Settings/Settings.jsx
@functions.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename AWC to Club in Tailwind config, CSS custom properties, and PHP comments</name>
  <files>tailwind.config.js, src/index.css, functions.php</files>
  <action>
    **tailwind.config.js:**
    - Rename the `awc` color palette key to `club` (line 24: `awc: {` becomes `club: {`)
    - Update the comment from "AWC Green palette" to "Club color palette" (line 23)
    - Keep all hex values identical (these are the green fallback defaults)

    **src/index.css:**
    - The `:root` block (lines 119-131) already defines the default accent CSS variables with hardcoded AWC green values. These stay as-is since they ARE the default/fallback. Update the comment on line 120 from "Default accent: AWC green (#006935)" to "Default accent: Club color (fallback #006935)"
    - The `.dark` block (lines 238-250) has the dark mode defaults. Update comment on line 239 from "Default accent: AWC green" to "Default accent: Club color"
    - There is NO `[data-accent="awc"]` block because AWC green IS the `:root` default. We need to add a `[data-accent="club"]` block that is identical to `:root` defaults (same green values) so that when `data-accent="club"` is set explicitly, it still uses the club/green defaults. This is needed because the other accent blocks (orange, teal, etc.) override `:root`. Without a `[data-accent="club"]` block, switching from orange back to club would keep the orange values.

    Actually, looking more carefully: the current system works because `:root` IS the AWC/default. When `data-accent="awc"` is set, there's no matching CSS block, so `:root` defaults apply. This works. The rename to `data-accent="club"` will work the same way - no explicit `[data-accent="club"]` block is needed because `:root` provides the defaults. However, to support DYNAMIC club colors (arbitrary hex from admin), we DO need a `[data-accent="club"]` section. But that dynamic injection happens via JavaScript (inline styles on `:root`), not via CSS blocks.

    So for index.css: Only update the two comments. No structural changes needed.

    **functions.php:**
    - Line 624: Change comment from "Theme Color (default AWC green, React will update dynamically)" to "Theme Color (default club color, React will update dynamically)"
    - Line 953: Change comment from "Background - AWC Green gradient" to "Background gradient"
    - No other AWC references exist in PHP files
  </action>
  <verify>
    1. `grep -r "awc\|AWC" tailwind.config.js src/index.css functions.php` returns no results (except possibly unrelated strings)
    2. `grep "club" tailwind.config.js` shows the renamed palette
    3. `npm run build` completes without errors
  </verify>
  <done>All AWC references renamed to club in config files. Tailwind palette key is "club", CSS comments updated, PHP comments updated. Build succeeds.</done>
</task>

<task type="auto">
  <name>Task 2: Update useTheme.js for dynamic club color and auto-migration, update Settings.jsx accent picker</name>
  <files>src/hooks/useTheme.js, src/pages/Settings/Settings.jsx</files>
  <action>
    **src/hooks/useTheme.js:**

    1. Rename ACCENT_COLORS array: Change `'awc'` to `'club'` (first element)

    2. Update ACCENT_HEX: Change `awc:` key to `club:` BUT make it a function that reads from window.stadionConfig:
       ```javascript
       const ACCENT_HEX = {
         club: '#006935', // Fallback; getClubHex() reads from stadionConfig
         orange: '#f97316',
         // ... rest unchanged
       };
       ```
       Add a helper function:
       ```javascript
       function getClubHex() {
         return window.stadionConfig?.accentColor || ACCENT_HEX.club;
       }
       ```

    3. Update ACCENT_HEX_DARK: Change `awc:` key to `club:` with value `'#22c560'` (same default)
       Add a helper:
       ```javascript
       function getClubHexDark() {
         const clubHex = getClubHex();
         // If using default green, return the known dark variant
         if (clubHex === '#006935') return '#22c560';
         // For custom colors, lighten for dark mode visibility
         return lightenHex(clubHex, 40);
       }
       ```

       Add a simple lightenHex utility:
       ```javascript
       function lightenHex(hex, percent) {
         // Parse hex to RGB
         const r = parseInt(hex.slice(1, 3), 16);
         const g = parseInt(hex.slice(3, 5), 16);
         const b = parseInt(hex.slice(5, 7), 16);
         // Lighten towards white
         const factor = percent / 100;
         const newR = Math.min(255, Math.round(r + (255 - r) * factor));
         const newG = Math.min(255, Math.round(g + (255 - g) * factor));
         const newB = Math.min(255, Math.round(b + (255 - b) * factor));
         return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
       }
       ```

    4. Update DEFAULT_PREFERENCES: Change `accentColor: 'awc'` to `accentColor: 'club'`

    5. Update comment on line 9: Change "awc is default" to "club is default"

    6. Auto-migration in loadPreferences(): After parsing stored preferences, add migration:
       ```javascript
       // Auto-migrate 'awc' to 'club' for existing users
       if (parsed.accentColor === 'awc') {
         parsed.accentColor = 'club';
       }
       ```
       Place this after the `const parsed = JSON.parse(stored);` line, before the return.

    7. Update updateFavicon(): When accent is 'club', use `getClubHex()` instead of looking up ACCENT_HEX directly:
       ```javascript
       function updateFavicon(accentColor) {
         if (typeof document === 'undefined') return;
         const hex = accentColor === 'club' ? getClubHex() : (ACCENT_HEX[accentColor] || ACCENT_HEX.orange);
         // ... rest stays same
       }
       ```

    8. Update updateThemeColorMeta(): When accent is 'club', use dynamic hex:
       ```javascript
       function updateThemeColorMeta(accentColor) {
         if (typeof document === 'undefined') return;
         let lightHex, darkHex;
         if (accentColor === 'club') {
           lightHex = getClubHex();
           darkHex = getClubHexDark();
         } else {
           lightHex = ACCENT_HEX[accentColor] || ACCENT_HEX.orange;
           darkHex = ACCENT_HEX_DARK[accentColor] || ACCENT_HEX_DARK.orange;
         }
         // ... rest stays same
       }
       ```

    9. Update applyTheme(): When accent is 'club', inject the dynamic hex values as inline CSS custom properties on :root so they override the CSS defaults. This enables admin-configured colors to work without rebuilding CSS:
       ```javascript
       function applyTheme(effectiveColorScheme, accentColor) {
         if (typeof document === 'undefined') return;
         const root = document.documentElement;

         // Clear any previously injected club color variables
         clearClubColorVars(root);

         // Apply dark mode class
         if (effectiveColorScheme === 'dark') {
           root.classList.add('dark');
         } else {
           root.classList.remove('dark');
         }

         // For club accent, inject dynamic CSS variables if custom color is configured
         if (accentColor === 'club') {
           const clubHex = getClubHex();
           const defaultHex = '#006935';
           if (clubHex !== defaultHex) {
             injectClubColorVars(root, clubHex, effectiveColorScheme);
           }
         }

         root.setAttribute('data-accent', accentColor);
         updateFavicon(accentColor);
         updateThemeColorMeta(accentColor);
       }
       ```

       Add helper functions:
       ```javascript
       function clearClubColorVars(root) {
         // Remove any inline club color overrides
         for (let i = 0; i <= 9; i++) {
           root.style.removeProperty(`--color-accent-${i === 0 ? '50' : i + '00'}`);
         }
       }

       function injectClubColorVars(root, hex, colorScheme) {
         // Generate a simple color scale from the club hex
         // Use the hex as the primary color (600 in light, 400 in dark)
         // and derive lighter/darker shades
         if (colorScheme === 'light') {
           root.style.setProperty('--color-accent-50', lightenHex(hex, 92));
           root.style.setProperty('--color-accent-100', lightenHex(hex, 82));
           root.style.setProperty('--color-accent-200', lightenHex(hex, 68));
           root.style.setProperty('--color-accent-300', lightenHex(hex, 52));
           root.style.setProperty('--color-accent-400', lightenHex(hex, 35));
           root.style.setProperty('--color-accent-500', lightenHex(hex, 15));
           root.style.setProperty('--color-accent-600', hex);
           root.style.setProperty('--color-accent-700', darkenHex(hex, 15));
           root.style.setProperty('--color-accent-800', darkenHex(hex, 30));
           root.style.setProperty('--color-accent-900', darkenHex(hex, 45));
         } else {
           // Dark mode: reverse the scale
           root.style.setProperty('--color-accent-50', darkenHex(hex, 45));
           root.style.setProperty('--color-accent-100', darkenHex(hex, 30));
           root.style.setProperty('--color-accent-200', darkenHex(hex, 15));
           root.style.setProperty('--color-accent-300', hex);
           root.style.setProperty('--color-accent-400', lightenHex(hex, 15));
           root.style.setProperty('--color-accent-500', lightenHex(hex, 35));
           root.style.setProperty('--color-accent-600', lightenHex(hex, 52));
           root.style.setProperty('--color-accent-700', lightenHex(hex, 68));
           root.style.setProperty('--color-accent-800', lightenHex(hex, 82));
           root.style.setProperty('--color-accent-900', lightenHex(hex, 92));
         }
       }

       function darkenHex(hex, percent) {
         const r = parseInt(hex.slice(1, 3), 16);
         const g = parseInt(hex.slice(3, 5), 16);
         const b = parseInt(hex.slice(5, 7), 16);
         const factor = percent / 100;
         const newR = Math.max(0, Math.round(r * (1 - factor)));
         const newG = Math.max(0, Math.round(g * (1 - factor)));
         const newB = Math.max(0, Math.round(b * (1 - factor)));
         return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
       }
       ```

    **src/pages/Settings/Settings.jsx:**

    1. Update accentColorClasses (around line 908-918):
       - Change `awc: 'bg-awc-600'` to `club: 'bg-club-600'`

    2. Update accentRingClasses (around line 920-930):
       - Change `awc: 'ring-awc-600'` to `club: 'ring-club-600'`

    3. Update the accent picker button title (around line 991):
       - Change `color === 'awc' ? 'AWC'` to `color === 'club' ? 'Club'`

    4. Update the aria-label (around line 992):
       - Change `color === 'awc' ? 'AWC'` to `color === 'club' ? 'Club'`

    5. Update the selected indicator text (around line 1000):
       - Change `accentColor === 'awc' ? 'AWC'` to `accentColor === 'club' ? 'Club'`

    6. Add note below the selected indicator when club is selected:
       ```jsx
       {accentColor === 'club' && (
         <span className="text-gray-400 dark:text-gray-500"> (past zich aan wanneer de beheerder de clubkleur wijzigt)</span>
       )}
       ```

    7. For the club color swatch specifically, use a dynamic background style instead of the Tailwind class so it shows the actual configured club color (not just the static green from CSS):
       In the accent color picker button, when `color === 'club'`, use an inline style for the background color:
       ```jsx
       style={color === 'club' ? { backgroundColor: window.stadionConfig?.accentColor || '#006935' } : undefined}
       className={`
         w-10 h-10 rounded-full transition-transform hover:scale-110
         ${color !== 'club' ? accentColorClasses[color] : ''}
         ${isSelected ? `ring-2 ring-offset-2 ${color !== 'club' ? accentRingClasses[color] : 'ring-current'} dark:ring-offset-gray-800` : ''}
       `}
       ```
       This ensures the club swatch always shows the actual configured club color.
  </action>
  <verify>
    1. `grep -r "awc\|AWC" src/hooks/useTheme.js src/pages/Settings/Settings.jsx` returns no results
    2. `npm run build` completes without errors
    3. `npm run lint` passes (max-warnings: 0)
  </verify>
  <done>
    - ACCENT_COLORS array uses 'club' as first element
    - Dynamic club hex from window.stadionConfig works for favicon, theme-color meta, and CSS variable injection
    - Auto-migration from 'awc' to 'club' in localStorage
    - Settings accent picker shows "Club" as first option with dynamic background color
    - All AWC text references removed from JS files
    - Build and lint pass
  </done>
</task>

</tasks>

<verification>
1. `grep -rn "awc\|AWC" tailwind.config.js src/index.css src/hooks/useTheme.js src/pages/Settings/Settings.jsx functions.php` returns zero results
2. `npm run build` succeeds
3. `npm run lint` passes
4. The accent color picker in Settings shows "Club" as the first swatch
5. Selecting "Club" accent applies the configured club color (or green #006935 default)
6. Users who had 'awc' saved get auto-migrated to 'club' on next page load
7. Favicon updates to club color when club accent is selected
8. Theme-color meta tags update for PWA when club accent is selected
</verification>

<success_criteria>
- Zero remaining AWC/awc references in the five modified files
- Build succeeds without errors
- Club accent color is dynamic (reads from window.stadionConfig.accentColor)
- Auto-migration from 'awc' to 'club' in localStorage works
- Dark mode supports club accent color with proper contrast
</success_criteria>

<output>
After completion, create `.planning/phases/145-frontend-color-refactor/145-01-SUMMARY.md`
</output>
