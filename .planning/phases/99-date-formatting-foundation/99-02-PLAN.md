---
phase: 99-date-formatting-foundation
plan: 02
type: execute
wave: 2
depends_on: ["99-01"]
files_modified:
  - src/pages/Dashboard.jsx
  - src/pages/Dates/DatesList.jsx
  - src/pages/Todos/TodosList.jsx
  - src/pages/People/PersonDetail.jsx
  - src/pages/Feedback/FeedbackDetail.jsx
  - src/pages/Feedback/FeedbackList.jsx
  - src/pages/Settings/Settings.jsx
  - src/pages/Settings/FeedbackManagement.jsx
  - src/hooks/useMeetings.js
  - src/components/MeetingDetailModal.jsx
  - src/components/CustomFieldColumn.jsx
  - src/components/CustomFieldsSection.jsx
  - src/components/CustomFieldsEditModal.jsx
  - src/components/Timeline/TodoModal.jsx
  - src/components/Timeline/TimelineView.jsx
  - src/components/InlineFieldInput.jsx
autonomous: true

must_haves:
  truths:
    - "All 16 files import date functions from '@/utils/dateFormat' instead of 'date-fns'"
    - "No direct 'date-fns' imports remain in src/ directory (except dateFormat.js)"
    - "Date formatting uses Dutch conventions: day-month-year order"
    - "Month names display in Dutch throughout the application"
  artifacts:
    - path: "src/pages/Dashboard.jsx"
      contains: "from '@/utils/dateFormat'"
    - path: "src/pages/Dates/DatesList.jsx"
      contains: "from '@/utils/dateFormat'"
    - path: "src/components/Timeline/TimelineView.jsx"
      contains: "from '@/utils/dateFormat'"
  key_links:
    - from: "src/pages/Dashboard.jsx"
      to: "src/utils/dateFormat.js"
      via: "import statement"
      pattern: "from '@/utils/dateFormat'"
    - from: "src/pages/Dates/DatesList.jsx"
      to: "src/utils/dateFormat.js"
      via: "import statement"
      pattern: "from '@/utils/dateFormat'"
---

<objective>
Update all remaining files to use Dutch date formatting utility

Purpose: Replace all direct date-fns imports with the centralized dateFormat utility across the entire codebase. This ensures consistent Dutch locale usage and Dutch date format conventions (day-month-year) throughout the application.

Output:
- 16 files updated to import from '@/utils/dateFormat'
- Date format strings updated to Dutch conventions where appropriate
- Zero direct date-fns imports remaining (except in dateFormat.js itself)
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/99-date-formatting-foundation/99-RESEARCH.md
@.planning/phases/99-date-formatting-foundation/99-01-SUMMARY.md

# Reference for import patterns
@src/utils/dateFormat.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update page components to use Dutch formatting</name>
  <files>
    src/pages/Dashboard.jsx
    src/pages/Dates/DatesList.jsx
    src/pages/Todos/TodosList.jsx
    src/pages/People/PersonDetail.jsx
    src/pages/Feedback/FeedbackDetail.jsx
    src/pages/Feedback/FeedbackList.jsx
    src/pages/Settings/Settings.jsx
    src/pages/Settings/FeedbackManagement.jsx
  </files>
  <action>
For each page file, update the date-fns import to use the centralized utility:

**1. src/pages/Dashboard.jsx**
Change:
```javascript
import { format, addDays, subDays, isToday } from 'date-fns';
```
To:
```javascript
import { format, addDays, subDays, isToday } from '@/utils/dateFormat';
```

Update format strings to Dutch conventions:
- `'MMMM d, yyyy'` -> `'d MMMM yyyy'` (e.g., line 89 in ReminderCard)
- `'MMM d'` -> `'d MMM'` (e.g., line 182 for todo due dates)
- `'EEEE, MMMM d'` -> `'EEEE d MMMM'` (e.g., line 732 for meetings header)
- `'MMMM d'` -> `'d MMMM'` (e.g., line 776 for no meetings message)
- Change `'Today'` to `'Vandaag'` where it appears as a label (line 84)
- Note: `'HH:mm'` format stays the same (24-hour is Dutch standard)

**2. src/pages/Dates/DatesList.jsx**
Change:
```javascript
import { format } from 'date-fns';
```
To:
```javascript
import { format } from '@/utils/dateFormat';
```

Update format strings:
- `'yyyy-MM-dd'` stays the same (ISO format for grouping keys)
- `'MMMM yyyy'` stays the same (month headers - locale handles Dutch month names)
- `'d'` stays the same (day number in card)

**3. src/pages/Todos/TodosList.jsx**
Change import to `from '@/utils/dateFormat'`
Keep format strings as-is (or update any English-specific ones)

**4. src/pages/People/PersonDetail.jsx**
Change:
```javascript
import { format, differenceInYears } from 'date-fns';
```
To:
```javascript
import { format, differenceInYears } from '@/utils/dateFormat';
```
Note: This file also uses toLocaleTimeString and toLocaleDateString - those are separate from date-fns and handled by browser locale (leave as-is for now, can be addressed in later phases).

**5. src/pages/Feedback/FeedbackDetail.jsx**
Change import to `from '@/utils/dateFormat'`

**6. src/pages/Feedback/FeedbackList.jsx**
Change import to `from '@/utils/dateFormat'`

**7. src/pages/Settings/Settings.jsx**
Change:
```javascript
import { format, formatDistanceToNow } from 'date-fns';
```
To:
```javascript
import { format, formatDistanceToNow } from '@/utils/dateFormat';
```

**8. src/pages/Settings/FeedbackManagement.jsx**
Change import to `from '@/utils/dateFormat'`

IMPORTANT: For all files, only change the import statement. The date-fns function names and signatures remain the same. The Dutch locale is automatically applied by the wrapper.
  </action>
  <verify>
Check all page files use dateFormat:
```bash
for f in Dashboard DatesList TodosList PersonDetail FeedbackDetail FeedbackList Settings FeedbackManagement; do
  echo "=== $f ==="
  grep -E "from ['\"].*date" src/pages/**/$f.jsx src/pages/$f.jsx 2>/dev/null | head -1
done
```
Verify no direct date-fns imports in pages:
```bash
grep -r "from 'date-fns'" src/pages/ && echo "FAIL" || echo "OK"
```
  </verify>
  <done>
- All 8 page files import from '@/utils/dateFormat'
- No direct 'date-fns' imports remain in src/pages/
- Format strings updated to Dutch conventions where applicable
  </done>
</task>

<task type="auto">
  <name>Task 2: Update hooks and components to use Dutch formatting</name>
  <files>
    src/hooks/useMeetings.js
    src/components/MeetingDetailModal.jsx
    src/components/CustomFieldColumn.jsx
    src/components/CustomFieldsSection.jsx
    src/components/CustomFieldsEditModal.jsx
    src/components/Timeline/TodoModal.jsx
    src/components/Timeline/TimelineView.jsx
    src/components/InlineFieldInput.jsx
  </files>
  <action>
Update all remaining files with date-fns imports:

**1. src/hooks/useMeetings.js**
Change:
```javascript
import { format } from 'date-fns';
```
To:
```javascript
import { format } from '@/utils/dateFormat';
```

**2. src/components/MeetingDetailModal.jsx**
Change import to `from '@/utils/dateFormat'`

**3. src/components/CustomFieldColumn.jsx**
Change import to `from '@/utils/dateFormat'`
This file formats custom field date values - locale will apply Dutch month names.

**4. src/components/CustomFieldsSection.jsx**
Change:
```javascript
import { format, parse, isValid } from 'date-fns';
```
To:
```javascript
import { format, parse, isValid } from '@/utils/dateFormat';
```

**5. src/components/CustomFieldsEditModal.jsx**
Change import (same as CustomFieldsSection)

**6. src/components/Timeline/TodoModal.jsx**
Change import to `from '@/utils/dateFormat'`

**7. src/components/Timeline/TimelineView.jsx**
Change import to `from '@/utils/dateFormat'`
Note: This file also imports from '@/utils/timeline' which already uses dateFormat (from Plan 01).

**8. src/components/InlineFieldInput.jsx**
Change import to `from '@/utils/dateFormat'`

All files: Only change the import path. The function calls remain identical since the wrapper functions have the same signatures.
  </action>
  <verify>
Check all component/hook files use dateFormat:
```bash
echo "=== useMeetings ===" && grep "from.*date" src/hooks/useMeetings.js | head -1
echo "=== Components ===" && grep -r "from.*date" src/components/*.jsx src/components/**/*.jsx 2>/dev/null | grep -E "(date-fns|dateFormat)"
```
Verify no direct date-fns imports remain in src/ (except dateFormat.js):
```bash
grep -r "from 'date-fns'" src/ --include="*.js" --include="*.jsx" | grep -v "dateFormat.js" && echo "FAIL: Direct imports found" || echo "OK: All imports use dateFormat"
```
  </verify>
  <done>
- All 8 hook/component files import from '@/utils/dateFormat'
- No direct 'date-fns' imports remain anywhere in src/ except dateFormat.js
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify build and test Dutch formatting</name>
  <files></files>
  <action>
Run verification steps to ensure the changes work correctly:

1. Run ESLint to check for any import/syntax issues:
```bash
npm run lint
```

2. Run production build to verify no bundling issues:
```bash
npm run build
```

3. Verify no direct date-fns imports remain (final check):
```bash
grep -r "from 'date-fns'" src/ --include="*.js" --include="*.jsx" | grep -v "dateFormat.js"
```
Should return empty (no matches).

4. Verify dateFormat.js is the only file importing from date-fns:
```bash
grep -l "from 'date-fns" src/**/*.js src/**/*.jsx 2>/dev/null
```
Should only show `src/utils/dateFormat.js`.

If any errors occur during build or lint, fix them before proceeding.
  </action>
  <verify>
```bash
cd /Users/joostdevalk/Code/stadion && npm run lint && npm run build
```
Both commands should complete successfully with no errors.
  </verify>
  <done>
- `npm run lint` passes with no errors
- `npm run build` completes successfully
- Only dateFormat.js imports directly from date-fns
- All other files use @/utils/dateFormat
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Complete grep verification:
```bash
cd /Users/joostdevalk/Code/stadion
echo "Files with direct date-fns imports (should only be dateFormat.js):"
grep -rl "from 'date-fns'" src/

echo ""
echo "Files using dateFormat utility:"
grep -rl "from '@/utils/dateFormat'" src/
```

2. Build verification:
```bash
npm run build
```

3. File count verification (should be 17 files using dateFormat, 1 file with date-fns):
```bash
echo "Count of dateFormat imports: $(grep -rl "from '@/utils/dateFormat'" src/ | wc -l)"
echo "Count of direct date-fns imports: $(grep -rl "from 'date-fns'" src/ | wc -l)"
```
Expected: ~17 dateFormat imports, 1 date-fns import (dateFormat.js itself)
</verification>

<success_criteria>
- All 16 files updated to import from '@/utils/dateFormat'
- Only src/utils/dateFormat.js imports directly from 'date-fns'
- `npm run lint` passes
- `npm run build` passes
- Dutch date formatting is active via the centralized locale configuration
</success_criteria>

<output>
After completion, create `.planning/phases/99-date-formatting-foundation/99-02-SUMMARY.md`
</output>
