---
phase: 14-list-view-columns-sorting
plan: 02
type: execute
depends_on: ["14-01"]
files_modified:
  - src/pages/People/PeopleList.jsx
  - src/index.css
---

<objective>
Make table headers clickable for sorting and add sticky positioning for better UX with long lists.

Purpose: Improve list view usability with intuitive click-to-sort headers and persistent header/toolbar visibility.
Output: Clickable column headers with sort indicators, sticky header row and selection toolbar.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan in this phase:
@.planning/phases/14-list-view-columns-sorting/14-01-SUMMARY.md

# Source files to modify:
@src/pages/People/PeopleList.jsx
@src/index.css

**Issues being addressed:**
- ISS-004: Click table headers to change sorting
- ISS-005: Sticky table header and action bar

**Tech stack available:** React 18, Tailwind CSS, lucide-react icons
**Established patterns:**
- sortField/sortOrder state at PeopleList component level
- ArrowUp/ArrowDown icons already imported for sort direction
- Tailwind utility classes for styling
</context>

<tasks>

<task type="auto">
  <name>Task 1: Make table headers clickable with sort indicators</name>
  <files>src/pages/People/PeopleList.jsx</files>
  <action>
Make the column headers in PersonListView clickable to trigger sorting:

1. Pass sortField, sortOrder, and onSort callback as props to PersonListView:
   - onSort(field) should set sortField to field and toggle sortOrder if already that field

2. Create a SortableHeader helper component or inline in thead:
   - Props: field, label, currentSortField, currentSortOrder, onSort
   - Render as button inside th with cursor-pointer, hover:bg-gray-100
   - Show ArrowUp icon when field matches and order is 'asc'
   - Show ArrowDown icon when field matches and order is 'desc'
   - No icon when field doesn't match current sort
   - Icon should be small (w-3 h-3) and inline after label text

3. Map columns to their sort field values:
   - First Name → "first_name"
   - Last Name → "last_name"
   - Team → "team"
   - Workspace → "workspace"
   - Labels → "labels"

4. Checkbox column header stays as-is (not sortable).

5. Clicking same header toggles between asc/desc. Clicking different header switches to that field with 'asc' default.
  </action>
  <verify>npm run build succeeds, clicking column headers changes sort, active column shows arrow indicator</verify>
  <done>All data columns are clickable, show sort direction arrow when active, toggle direction on re-click</done>
</task>

<task type="auto">
  <name>Task 2: Add sticky positioning to header row and action bar</name>
  <files>src/pages/People/PeopleList.jsx, src/index.css</files>
  <action>
Make the table header and selection toolbar sticky:

1. Selection toolbar (the div with "X people selected" and Actions):
   - Add `sticky top-0 z-10` classes
   - Ensure background is opaque (bg-primary-50 already set)

2. Table header (thead):
   - Add `sticky top-0 z-10` to thead element
   - Add `bg-gray-50` is already set, ensure it's opaque
   - The sticky position should account for when selection toolbar is visible:
     - When toolbar visible: header sticks below toolbar
     - When no selection: header sticks to top

3. To handle the stacking:
   - Selection toolbar: `sticky top-0 z-20`
   - Table thead: `sticky top-0 z-10` (will scroll under toolbar)

   OR use CSS custom property approach if needed for dynamic top offset.

4. Add subtle bottom border/shadow to sticky elements for visual separation:
   - Selection toolbar: already has border, add `shadow-sm` if needed
   - Thead: add `shadow-sm` when stuck (can use simple always-on shadow)

5. If the parent container needs overflow handling, ensure the card wrapper has appropriate overflow settings.
  </action>
  <verify>npm run build succeeds, scroll down long list and verify header stays visible</verify>
  <done>Table header remains visible when scrolling, selection toolbar stays above header when selections exist</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Clickable sortable headers with indicators and sticky positioning</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:5173/people
    3. Switch to list view (click List icon)
    4. Test clickable headers:
       - Click "First Name" header → should sort by first name, show arrow
       - Click again → should reverse sort direction, arrow flips
       - Click "Team" → should sort by team name
       - Click "Labels" → should sort alphabetically by first label
    5. Test sticky behavior:
       - Scroll down a long list (need 20+ contacts or resize window smaller)
       - Header row should stay visible at top
       - Select some contacts, scroll - selection toolbar should stay at top
       - Header should appear below the selection toolbar
    6. Confirm: Sort indicators show correctly, sticky elements don't overlap badly
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes with no warnings
- [ ] Column headers are clickable and show sort indicators
- [ ] Sticky header works on scroll
- [ ] Selection toolbar sticks above header when visible
- [ ] Human verification checkpoint approved
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Human verified clickable headers work correctly
- Human verified sticky behavior works correctly
- Phase 14 complete
</success_criteria>

<output>
After completion, create `.planning/phases/14-list-view-columns-sorting/14-02-SUMMARY.md`

Mark Phase 14 complete in STATE.md and close ISS-001, ISS-002, ISS-004, ISS-005 in ISSUES.md.
</output>
