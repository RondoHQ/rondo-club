---
phase: 14-list-view-columns-sorting
plan: 01
type: execute
depends_on: []
files_modified:
  - src/pages/People/PeopleList.jsx
---

<objective>
Add split name columns, labels column, and extended sorting options to the list view.

Purpose: Complete the list view column structure with all relevant contact information and enable sorting by any column.
Output: List view with First Name, Last Name, Labels, Organization, Workspace columns and sorting by all fields.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context (list view implementation):
@.planning/phases/12-list-view-selection/12-01-SUMMARY.md
@.planning/phases/13-bulk-actions/13-02-SUMMARY.md

# Source file to modify:
@src/pages/People/PeopleList.jsx

**Issues being addressed:**
- ISS-001: Add sorting by Organization and Workspace columns
- ISS-002: Add Label column to list view with sorting

**Tech stack available:** React 18, TanStack Query, Tailwind CSS, lucide-react icons
**Established patterns:**
- sortField/sortOrder state with dropdown selector
- PersonListRow component receives person data and renders table row
- personCompanyMap lookup for company names
- workspaces array for workspace name lookup
</context>

<tasks>

<task type="auto">
  <name>Task 1: Split Name column into First Name and Last Name columns</name>
  <files>src/pages/People/PeopleList.jsx</files>
  <action>
Modify the table structure in PersonListView and PersonListRow:

1. In PersonListView thead, replace the single "Name" th with two columns:
   - "First Name" column
   - "Last Name" column

2. In PersonListRow, split the name cell into two separate td elements:
   - First td: Avatar + first name (keep avatar, deceased marker, favorite star with first name)
   - Second td: Last name only (plain text)

3. Update the first_name cell to be the clickable link (Link to person detail), move last name to separate non-linked cell.

4. Add zebra striping to table rows for easier scanning:
   - In PersonListView tbody, pass the row index to PersonListRow
   - Add conditional background: even rows get `bg-white`, odd rows get `bg-gray-50`
   - OR use CSS `odd:bg-gray-50` on tr elements (Tailwind's odd: variant)

Keep the existing avatar rendering (thumbnail or initial fallback), deceased marker (â€ ), and favorite star (yellow Star icon) with the first name column.
  </action>
  <verify>npm run build succeeds, list view shows separate First Name and Last Name columns</verify>
  <done>Table has 6 columns: checkbox, First Name (with avatar/icons), Last Name, Organization, Workspace, Labels (to be added)</done>
</task>

<task type="auto">
  <name>Task 2: Add Labels column to table</name>
  <files>src/pages/People/PeopleList.jsx</files>
  <action>
Add a Labels column after Workspace:

1. In PersonListView thead, add a new th for "Labels" after Workspace column.

2. In PersonListRow, add a new td that displays person.labels array:
   - If labels exist, render as inline badge/pills similar to PersonCard (use same styling: `px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600`)
   - Limit display to 2-3 labels with "+N more" indicator if more exist
   - If no labels, display "-"

3. Use flex-wrap gap-1 for multiple labels to handle wrapping gracefully.
  </action>
  <verify>npm run build succeeds, Labels column shows person labels as pills</verify>
  <done>Labels column displays taxonomy terms as styled pills, empty shows "-"</done>
</task>

<task type="auto">
  <name>Task 3: Add Organization and Workspace sorting options</name>
  <files>src/pages/People/PeopleList.jsx</files>
  <action>
Extend the sorting logic to support Organization and Workspace:

1. Add new options to the sortField dropdown select:
   - "organization" - Sort by company name
   - "workspace" - Sort by workspace names
   - "labels" - Sort by first label name

2. In filteredAndSortedPeople useMemo sort logic, add cases for new sort fields:

   For "organization" sorting:
   - Get company name from personCompanyMap[person.id] or empty string
   - Compare alphabetically (localeCompare)
   - Empty/no company sorts last

   For "workspace" sorting:
   - Get workspace names string (same logic as PersonListRow uses)
   - Compare alphabetically
   - Empty/no workspace sorts last

   For "labels" sorting:
   - Get first label from person.labels[0] or empty string
   - Compare alphabetically
   - Empty/no labels sorts last

3. Ensure sortOrder (asc/desc) is respected for all new sort fields.
  </action>
  <verify>npm run build succeeds, dropdown shows all sort options, sorting by org/workspace/labels works correctly</verify>
  <done>Sort dropdown includes Organization, Workspace, Labels options; sorting produces correct order for each</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes with no warnings
- [ ] List view shows 6 columns: Checkbox, First Name, Last Name, Organization, Workspace, Labels
- [ ] Sort dropdown includes: First name, Last name, Last modified, Organization, Workspace, Labels
- [ ] Each sort option produces correctly ordered results
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript/ESLint errors
- Table columns properly separated
- All sort options functional
</success_criteria>

<output>
After completion, create `.planning/phases/14-list-view-columns-sorting/14-01-SUMMARY.md`
</output>
