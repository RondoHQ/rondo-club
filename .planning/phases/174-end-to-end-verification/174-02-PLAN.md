---
phase: 174-end-to-end-verification
plan: 02
type: execute
wave: 2
depends_on: ["174-01"]
files_modified:
  - fixtures/demo-fixture.json
  - style.css
  - package.json
  - CHANGELOG.md
  - .planning/ROADMAP.md
  - .planning/STATE.md
  - .planning/PROJECT.md
autonomous: false

must_haves:
  truths:
    - "All Rondo Club pages render correctly with demo data on demo.rondo.club"
    - "Demo banner is visible on the demo site"
    - "The fixture file is committed to the repository"
    - "Version is bumped to 24.0.0"
    - "Changelog documents the v24.0 Demo Data milestone"
    - "Roadmap shows v24.0 as shipped"
  artifacts:
    - path: "fixtures/demo-fixture.json"
      provides: "Committed anonymized fixture"
    - path: "CHANGELOG.md"
      provides: "v24.0 changelog entry"
    - path: "style.css"
      provides: "Version 24.0.0"
    - path: "package.json"
      provides: "Version 24.0.0"
  key_links:
    - from: "fixtures/demo-fixture.json"
      to: "git repository"
      via: "git add + commit"
    - from: "style.css + package.json"
      to: "version 24.0.0"
      via: "version bump"
    - from: "CHANGELOG.md"
      to: "v24.0 release notes"
      via: "Keep a Changelog format"
---

<objective>
Verify all pages on the demo site, then ship v24.0 with committed fixture, version bump, and changelog.

Purpose: Human-verify the entire application works with demo data, then finalize the v24.0 milestone by committing the fixture, bumping version, updating docs, and deploying.

Output: Tagged v24.0 release with committed fixture, verified demo site, and updated planning docs.
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/174-end-to-end-verification/174-01-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Verify all Rondo Club pages on demo site</name>
  <files>none (visual verification only)</files>
  <action>
User verifies all Rondo Club pages on the demo site after demo data import.

**What was built:** Full demo data pipeline: exported anonymized data from production, deployed to demo.rondo.club, imported with --clean. Demo banner added to distinguish from production.

**How to verify — log in at https://demo.rondo.club/wp-login.php and visit each page:**

0. **Demo Banner** — A yellow banner at the top of every page reads "DEMO OMGEVING — Dit is geen echte data". Verify it's visible and obnoxious enough to prevent confusion with production.

1. **Dashboard** (https://demo.rondo.club/) — Stats row shows counts for leden, teams, etc. Birthday widget shows upcoming birthdays (dates shifted to be current). Activity widget shows recent activities. Todo widget shows todo counts.

2. **Leden page** (https://demo.rondo.club/leden) — List displays imported people with Dutch fake names. Names include infixes where applicable. Sorting works. Filters work (leeftijdsklasse, team, etc.).

3. **Person detail** (click any person) — Header shows name, age, birthdate. Work history shows team/commissie assignments. Timeline shows activities and notes. Tasks sidebar shows linked todos. Relationships show linked family members. Contact info shows fake Dutch addresses, phone numbers, emails.

4. **Teams page** (https://demo.rondo.club/teams) — List displays all imported teams (real team names preserved). Team detail shows roster with player/staff members.

5. **Commissies page** (https://demo.rondo.club/commissies) — List displays all imported commissies. Commissie detail shows members.

6. **Contributie page** (https://demo.rondo.club/contributie) — Fee calculations display for imported people. Season selector works. Family discount calculations appear where applicable.

7. **Tuchtzaken page** (https://demo.rondo.club/tuchtzaken) — Discipline cases display with season filter. Case detail shows linked person.

8. **Taken page** (https://demo.rondo.club/taken) — Tasks display with correct statuses. Task detail shows linked persons.

9. **Global search** (Cmd+K or magnifying glass) — Search for a name from imported data. Results appear with correct fake names.

Type "approved" if all pages render correctly, or describe any issues found. Issues will be fixed before shipping.
  </action>
  <verify>User confirms all 9 page areas plus demo banner render correctly with demo data on demo.rondo.club.</verify>
  <done>All Rondo Club pages display imported demo data correctly on demo.rondo.club — no rendering errors, no missing data, no broken relationships, demo banner visible.</done>
</task>

<task type="auto">
  <name>Task 2: Version bump, changelog, commit fixture, and ship v24.0</name>
  <files>
    fixtures/demo-fixture.json
    style.css
    package.json
    CHANGELOG.md
    .planning/ROADMAP.md
    .planning/STATE.md
    .planning/PROJECT.md
  </files>
  <action>
**1. Bump version to 24.0.0** in both files:
- `style.css`: Update `Version: 23.2.1` (or current) to `Version: 24.0.0`
- `package.json`: Update `"version": "23.2.1"` (or current) to `"version": "24.0.0"`

**2. Update CHANGELOG.md** — add v24.0 entry after `## [Unreleased]`:

```markdown
## [24.0.0] - 2026-02-12

### Added
- Demo data pipeline: `wp rondo demo export` creates anonymized fixture from production data
- Demo data pipeline: `wp rondo demo import [--clean]` loads fixture into any WordPress instance
- Dutch fake data generator (names with infixes, addresses, phone numbers, emails)
- Date-shifting on import so demo data always looks current relative to today
- Data anonymization: fake names, emails, phones, addresses replace real PII
- Weighted fake financial amounts for realistic fee patterns
- Season-aware date shifting for fee configs and discipline case seasons
- Demo fixture file (`fixtures/demo-fixture.json`) committed for portable demo environments
- Demo site banner ("DEMO OMGEVING") distinguishes demo from production
- `bin/deploy-demo.sh` script for deploying to demo.rondo.club

### Removed
- Photos and avatars stripped from demo fixture (photos are identity, not anonymizable)
```

**3. Remove the example fixture** since the real fixture supersedes it:
```bash
cd /Users/joostdevalk/Code/rondo/rondo-club
git rm fixtures/demo-fixture.example.json 2>/dev/null || true
```

**4. Update ROADMAP.md:**
- Mark Phase 174 plans as `[x]` complete
- Update progress table: Phase 174 status = "Complete", plans = "2/2", with today's date
- Change v24.0 from "In Progress" to shipped: `- ✅ **v24.0 Demo Data** — Phases 170-174 (shipped 2026-02-12)`
- Move v24.0 phases into a `<details>` collapsed section like previous milestones

**5. Update STATE.md:**
- Update current focus to reflect no active milestone
- Update progress to 100% (13/13 plans)
- Add v24.0 to recent milestones: `v24.0: 13 plans, 2 days (2026-02-11 -> 2026-02-12)`
- Update "Last activity" line

**6. Update PROJECT.md:**
- Mark all v24.0 requirements (EXPORT-*, IMP-*, FIX-*) as completed with `[x]`
- Update "Last updated" line

**7. Create developer docs** at `../developer/src/content/docs/integrations/demo-data.md`:
```markdown
---
title: Demo Data Pipeline
---

Documentation for the demo data export/import system.

## Overview

The demo data pipeline anonymizes production data into a portable JSON fixture, enabling realistic demo environments that always look "fresh."

## Export

Run on the production server:

\`\`\`bash
wp rondo demo export
\`\`\`

Creates `fixtures/demo-fixture.json` in the theme directory with:
- All people (anonymized names, addresses, phones, emails)
- All teams and commissies (names preserved)
- Discipline cases, tasks, activities, notes
- Settings (fee categories, role config, family discount config)

## Import

Run on the target site:

\`\`\`bash
wp rondo demo import           # Import alongside existing data
wp rondo demo import --clean   # Wipe existing data first, then import
\`\`\`

Default fixture path: `fixtures/demo-fixture.json` in the theme directory.

### Date Shifting

All dates in the fixture are shifted relative to today on import:
- Birthdates maintain the person's age (full-year shift)
- Activity/note dates are shifted to appear recent
- Season references are shifted to current/recent seasons
- Leap year dates (Feb 29) become Feb 28 in non-leap years

### Demo Site Banner

Sites with the `rondo_is_demo_site` WordPress option set to `1` display a yellow banner reading "DEMO OMGEVING — Dit is geen echte data" at the top of every page.

Set via WP-CLI:

\`\`\`bash
wp option update rondo_is_demo_site 1
\`\`\`

## Fixture Format

The fixture is a self-contained JSON file with:
- `meta` — version, export date, record counts
- `people`, `teams`, `commissies` — entity arrays
- `discipline_cases`, `todos`, `comments` — related entities
- `settings` — WordPress options (fee categories, VOG config, etc.)
- `taxonomies` — relationship types, seizoenen

All cross-entity references use portable refs (`person:1`, `team:5`) resolved during import.
```

**8. Commit everything:**
```bash
cd /Users/joostdevalk/Code/rondo/rondo-club
git add fixtures/demo-fixture.json style.css package.json CHANGELOG.md
git add -A .planning/
git commit -m "feat(v24.0): ship Demo Data milestone with committed fixture"
git push
```

**9. Tag the release:**
```bash
git tag v24.0
git push origin v24.0
```

**10. Deploy to production** (to get version bump + banner code, but banner won't show since rondo_is_demo_site is not set):
```bash
bin/deploy.sh
```

**11. Deploy to demo** (to get version bump):
```bash
bin/deploy-demo.sh
```
  </action>
  <verify>
- `git log --oneline -1` shows the commit
- `git tag -l v24.0` shows the tag
- `fixtures/demo-fixture.json` is tracked in git
- Version is 24.0.0 in both style.css and package.json
- CHANGELOG.md has v24.0.0 entry
- ROADMAP.md shows v24.0 as shipped
- Both deploy scripts complete without errors
  </verify>
  <done>Fixture committed, version bumped to 24.0.0, changelog updated, tagged v24.0, deployed to both production and demo, planning docs updated. v24.0 Demo Data milestone shipped.</done>
</task>

</tasks>

<verification>
1. All Rondo Club pages render correctly on demo.rondo.club (human verified)
2. Demo banner visible on demo site
3. `fixtures/demo-fixture.json` committed to git
4. Version 24.0.0 in style.css and package.json
5. CHANGELOG.md has complete v24.0 entry
6. Git tag v24.0 exists
7. ROADMAP.md shows v24.0 as shipped
8. Both production and demo deployments successful
</verification>

<success_criteria>
- Human verified all 9 page areas on demo.rondo.club work correctly
- Fixture file committed to repository (FIX-01)
- Self-contained JSON fixture with no external dependencies (FIX-02)
- Version bumped to 24.0.0 following semantic versioning
- Changelog updated with all v24.0 features
- Planning docs reflect completed milestone
- Code deployed to both production and demo
- Developer docs created for the demo data system
</success_criteria>

<output>
After completion, create `.planning/phases/174-end-to-end-verification/174-02-SUMMARY.md`
</output>
