---
phase: 07-data-model-visibility
plan: 01
type: execute
depends_on: []
files_modified: [includes/class-post-types.php, includes/class-taxonomies.php]
---

<objective>
Register the workspace Custom Post Type and workspace_access taxonomy.

Purpose: Establish WordPress primitives for workspaces and post-to-workspace relationships.
Output: Workspace CPT and workspace_access taxonomy registered, REST API enabled.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@Stadion-Multi-User-Project-Plan.md (sections 1.2, 1.4, 2.1)
@includes/class-post-types.php
@includes/class-taxonomies.php

**Key constraints:**
- Follow existing pattern in class-post-types.php (private registration methods called from register_post_types)
- Follow existing pattern in class-taxonomies.php (private registration methods)
- Workspace CPT: public=false, show_in_rest=true, rest_base='workspaces'
- workspace_access taxonomy: hierarchical=false, attached to person, team, important_date
- No custom tables - use WordPress primitives only
</context>

<tasks>

<task type="auto">
  <name>Task 1: Register workspace Custom Post Type</name>
  <files>includes/class-post-types.php</files>
  <action>
Add register_workspace_post_type() private method following the exact pattern of register_person_post_type().

CPT configuration:
- post_type slug: 'workspace'
- Labels: Workspaces/Workspace
- public: false
- publicly_queryable: false
- show_ui: true
- show_in_menu: true (menu_position: 4, before People)
- show_in_rest: true
- rest_base: 'workspaces'
- capability_type: 'post' (standard capabilities for now)
- supports: ['title', 'editor', 'author', 'thumbnail']
- menu_icon: 'dashicons-groups' (or 'dashicons-networking')
- rewrite: false (React Router handles routing)

Call this method from register_post_types() BEFORE person registration.

Do NOT add meta_box_cb or other advanced features - keep it minimal.
  </action>
  <verify>Check WordPress admin menu shows "Workspaces" and REST endpoint /wp/v2/workspaces returns empty array (not 404)</verify>
  <done>Workspace CPT appears in WordPress admin with REST API enabled at /wp/v2/workspaces</done>
</task>

<task type="auto">
  <name>Task 2: Register workspace_access taxonomy</name>
  <files>includes/class-taxonomies.php</files>
  <action>
Add register_workspace_access_taxonomy() private method.

Taxonomy configuration:
- taxonomy slug: 'workspace_access'
- Labels: Workspace Access/Workspace Access
- Object types: ['person', 'team', 'important_date']
- hierarchical: false (tags, not categories)
- show_ui: true
- show_admin_column: false (we'll control display in React)
- show_in_rest: true (needed for React API calls)
- query_var: true
- rewrite: false (no frontend permalinks needed)

Terms will be auto-created when workspaces are created (Phase 8), so no default terms.

Call from register_taxonomies().
  </action>
  <verify>REST endpoint /wp/v2/workspace_access returns empty array (not 404)</verify>
  <done>workspace_access taxonomy registered, visible in admin under People/Teams, REST API enabled</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] WordPress admin shows "Workspaces" menu item
- [ ] Can create a test workspace via admin
- [ ] `/wp/v2/workspaces` REST endpoint returns valid JSON
- [ ] `/wp/v2/workspace_access` REST endpoint returns valid JSON
- [ ] `npm run build` succeeds
- [ ] No PHP errors in debug log
</verification>

<success_criteria>
- Both registrations complete
- REST APIs accessible
- No changes to existing functionality (person, team, important_date unchanged)
- Code follows existing patterns in the files
</success_criteria>

<output>
After completion, create `.planning/phases/07-data-model-visibility/07-01-SUMMARY.md`
</output>
