---
phase: 20-bundle-optimization
plan: 01
type: execute
depends_on: []
files_modified: [vite.config.js, src/App.jsx]
---

<objective>
Implement Vite manual chunks to split vendor libraries into separate cacheable bundles.

Purpose: The largest bundle size reduction comes from vendor chunking - separating stable dependencies (React, React Query, etc.) from application code. These rarely change and can be cached long-term by browsers.

Output: Production build with separate vendor, framework, and application chunks.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@vite.config.js
@package.json

**Current state:**
- Single main.js bundle: 1,646 KB (480 KB gzipped)
- All dependencies bundled together
- Any code change invalidates entire bundle cache

**Target:**
- Reduce bundle size to under 500 KB
- Separate vendor chunks for better caching

**Key dependencies to split:**
- react, react-dom (~137KB)
- @tanstack/react-query (~53KB)
- react-router-dom (~28KB)
- date-fns (~35KB)
- zustand (~4KB)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure Vite manual chunks for vendor splitting</name>
  <files>vite.config.js</files>
  <action>
Add `output.manualChunks` configuration to `build.rollupOptions`:

1. Create a `vendor` chunk containing:
   - react
   - react-dom
   - react-router-dom
   - @tanstack/react-query

2. Create a `utils` chunk containing:
   - date-fns
   - clsx
   - zustand
   - axios
   - react-hook-form

3. Keep application code in the main chunk.

Configuration pattern:
```javascript
manualChunks: {
  vendor: ['react', 'react-dom', 'react-router-dom', '@tanstack/react-query'],
  utils: ['date-fns', 'clsx', 'zustand', 'axios', 'react-hook-form'],
}
```

Do NOT include heavy optional libraries (vis-network, @tiptap, @icons-pack) in static chunks - these will be lazy loaded in Plan 02.
  </action>
  <verify>npm run build shows multiple chunk files in output</verify>
  <done>Build produces vendor-*.js, utils-*.js, and main-*.js chunks</done>
</task>

<task type="auto">
  <name>Task 2: Verify chunk splitting and measure sizes</name>
  <files>None (verification only)</files>
  <action>
1. Run `npm run build` and capture output
2. Document all chunk sizes (raw and gzipped)
3. Calculate total size and compare to baseline (1,646 KB)
4. Verify the app still works by running `npm run preview` and checking the browser console for errors
  </action>
  <verify>npm run build shows chunk breakdown, npm run preview loads without errors</verify>
  <done>Build succeeds with multiple chunks, no runtime errors, total size documented</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` produces multiple chunks
- [ ] vendor chunk contains React ecosystem
- [ ] utils chunk contains date-fns, zustand, etc.
- [ ] No build errors or warnings (except expected "chunk size" warnings for remaining large chunks)
- [ ] `npm run preview` loads application correctly
</verification>

<success_criteria>

- vite.config.js updated with manualChunks configuration
- Build produces separate vendor and utils chunks
- Main chunk size reduced from baseline
- Application functions correctly with chunked build
  </success_criteria>

<output>
After completion, create `.planning/phases/20-bundle-optimization/20-01-SUMMARY.md`
</output>
