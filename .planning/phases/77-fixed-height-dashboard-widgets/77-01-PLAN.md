---
phase: 77-fixed-height-dashboard-widgets
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/Dashboard.jsx
  - src/index.css
autonomous: true

must_haves:
  truths:
    - "Dashboard layout remains stable during data loading and refresh"
    - "Stats row widgets have uniform height"
    - "Activity widget scrolls internally when content exceeds fixed height"
    - "Meetings widget scrolls internally when content exceeds fixed height"
    - "Todos widget scrolls internally when content exceeds fixed height"
    - "Favorites widget scrolls internally when content exceeds fixed height"
  artifacts:
    - path: "src/pages/Dashboard.jsx"
      provides: "Fixed height widget containers with internal scrolling"
      contains: "overflow-y-auto"
    - path: "src/index.css"
      provides: "Optional: scrollbar styling for dark mode consistency"
      contains: ".dashboard-scroll"
  key_links:
    - from: "Widget content divs"
      to: "Fixed height container"
      via: "max-h-* class with overflow-y-auto"
      pattern: "max-h-\\[.*\\].*overflow-y-auto"
---

<objective>
Add fixed heights and internal scrolling to all dashboard widgets

Purpose: Prevent layout shifts when data loads or changes, creating a stable dashboard experience. Currently widgets expand based on content count, causing the page to jump around during loading and data refresh.

Output: Dashboard widgets with consistent fixed heights that scroll internally when content overflows.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@src/pages/Dashboard.jsx
@src/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add fixed heights to content-bearing widgets</name>
  <files>src/pages/Dashboard.jsx</files>
  <action>
Add fixed heights and internal scrolling to the content areas of dashboard widgets. The widget header should remain fixed, only the content area scrolls.

**Widget Height Strategy:**
- Stats row: Keep as-is (already uniform via grid, no scrolling needed)
- Content widgets (reminders, todos, awaiting, meetings, recent-contacted, recent-edited, favorites): Fixed content area height of ~280px (enough for ~5 items)

**Implementation Pattern for each widget:**
1. The outer `.card` div keeps no height constraint (just the container)
2. The content `div` with `divide-y` gets: `max-h-[280px] overflow-y-auto`
3. This creates: fixed header + scrollable content area

**Widgets to modify (in cardRenderers object):**

1. **reminders** (line ~576-594):
   - Find: `<div className="divide-y divide-gray-100 dark:divide-gray-700">`
   - Add to className: `max-h-[280px] overflow-y-auto`

2. **todos** (line ~596-614):
   - Find the same pattern
   - Add: `max-h-[280px] overflow-y-auto`

3. **awaiting** (line ~616-634):
   - Same pattern
   - Add: `max-h-[280px] overflow-y-auto`

4. **meetings** (line ~636-688):
   - Same pattern
   - Add: `max-h-[280px] overflow-y-auto`

5. **recent-contacted** (line ~690-705):
   - Same pattern
   - Add: `max-h-[280px] overflow-y-auto`

6. **recent-edited** (line ~707-727):
   - Same pattern
   - Add: `max-h-[280px] overflow-y-auto`

7. **favorites** (line ~729-744):
   - Same pattern
   - Add: `max-h-[280px] overflow-y-auto`

**Important:** Apply the scroll class ONLY to the content area div (with `divide-y`), NOT the entire card. The header with the title should remain visible at all times.
  </action>
  <verify>
Run `npm run build` - should complete without errors.
Visually verify: Each widget should have consistent height, content scrolls when more than ~5 items.
  </verify>
  <done>
All 7 content widgets have `max-h-[280px] overflow-y-auto` on their content divs, creating fixed-height scrollable areas.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add loading skeleton with fixed heights</name>
  <files>src/pages/Dashboard.jsx</files>
  <action>
Currently the loading state (line ~478-484) shows only a spinner. This doesn't reserve layout space, causing a jump when data loads.

**Update the loading state to show skeleton widgets:**

Replace the current loading return block with skeleton cards that match the final layout:

```jsx
if (isLoading) {
  return (
    <div className="space-y-6">
      {/* Stats skeleton - full width grid */}
      <div className="grid grid-cols-2 lg:grid-cols-5 gap-4">
        {[...Array(5)].map((_, i) => (
          <div key={i} className="card p-6">
            <div className="animate-pulse">
              <div className="h-4 bg-gray-200 dark:bg-gray-700 rounded w-24 mb-2"></div>
              <div className="h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"></div>
            </div>
          </div>
        ))}
      </div>

      {/* Widget skeletons - 3 column grid */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {[...Array(6)].map((_, i) => (
          <div key={i} className="card">
            <div className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
              <div className="h-5 bg-gray-200 dark:bg-gray-700 rounded w-32 animate-pulse"></div>
            </div>
            <div className="max-h-[280px] overflow-y-auto">
              {[...Array(3)].map((_, j) => (
                <div key={j} className="p-3 border-b border-gray-100 dark:border-gray-700 last:border-0">
                  <div className="animate-pulse flex items-center">
                    <div className="w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"></div>
                    <div className="ml-3 flex-1">
                      <div className="h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"></div>
                      <div className="h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"></div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}
```

This ensures:
1. Stats row skeleton matches final stats row height
2. Widget skeletons have same fixed 280px content height
3. No layout shift when real data loads
  </action>
  <verify>
1. Run `npm run build` - should complete without errors
2. Test by temporarily adding delay to API or throttling network
3. Loading state should show skeleton cards with same dimensions as loaded state
  </verify>
  <done>
Loading state renders skeleton widgets with fixed heights matching the final widget heights, preventing layout shift during data loading.
  </done>
</task>

</tasks>

<verification>
After completing both tasks:

1. **Build check:** `npm run build` passes
2. **Lint check:** `npm run lint` passes
3. **Visual check on production:**
   - Stats row: 5 cards, uniform height
   - Widget row: All widgets same height (~280px content + header)
   - Scroll test: Add test data to exceed 5 items, verify internal scrolling works
   - Loading test: Throttle network to 3G, observe no layout shift during load
4. **Dark mode:** Scrollbars should be visible and usable in dark mode
</verification>

<success_criteria>
- Dashboard loads with skeleton showing same layout dimensions as final state
- All content widgets have fixed content area of 280px
- Widgets with more than ~5 items show internal scrollbar
- Layout never shifts during data loading or refresh
- Build and lint pass with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/77-fixed-height-dashboard-widgets/77-01-SUMMARY.md`
</output>
