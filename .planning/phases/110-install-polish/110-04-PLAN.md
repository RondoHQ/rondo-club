---
phase: 110-install-polish
plan: 04
type: execute
wave: 3
depends_on: ["110-02", "110-03"]
files_modified:
  - style.css
  - package.json
  - CHANGELOG.md
autonomous: false

must_haves:
  truths:
    - "App deployed to production with all Phase 110 changes"
    - "Lighthouse PWA audit score is 90 or above"
    - "App works correctly in standalone mode on iOS device"
    - "App works correctly in standalone mode on Android device"
    - "Version bumped to 8.3.0 and changelog updated"
  artifacts:
    - path: "style.css"
      provides: "Theme version 8.3.0"
      contains: "Version: 8.3.0"
    - path: "package.json"
      provides: "Package version 8.3.0"
      contains: "8.3.0"
    - path: "CHANGELOG.md"
      provides: "v8.3.0 changelog entry"
      contains: "[8.3.0]"
  key_links: []
---

<objective>
Deploy Phase 110 changes, run Lighthouse PWA audit, and verify on real devices.

Purpose: Complete the v8.0 PWA Enhancement milestone by deploying all install prompt and update notification improvements, validating PWA quality with Lighthouse, and performing manual device testing to ensure production readiness.

Output: Deployed production app, Lighthouse audit results, device verification confirmation, version bump to 8.3.0.
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/110-install-polish/110-01-SUMMARY.md
@.planning/phases/110-install-polish/110-02-SUMMARY.md
@.planning/phases/110-install-polish/110-03-SUMMARY.md
@CHANGELOG.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update version and changelog</name>
  <files>style.css, package.json, CHANGELOG.md</files>
  <action>
Bump version from 8.2.0 to 8.3.0 and add changelog entry.

1. Update style.css: Change "Version: 8.2.0" to "Version: 8.3.0"
2. Update package.json: Change "version": "8.2.0" to "version": "8.3.0"
3. Add CHANGELOG.md entry for v8.3.0:

```markdown
## [8.3.0] - 2026-01-28

### Added
- Smart Android install prompt after user engagement (2 page views or 1 note)
- iOS install instructions modal with visual Add to Home Screen guide
- Periodic service worker update checking (hourly)
- Engagement tracking for install prompt timing

### Changed
- ReloadPrompt text localized to Dutch
- Install prompts respect dismissal preferences with 7-day cooldown
```

Place the new version entry after the ## [Unreleased] section (or create one if needed).
  </action>
  <verify>
Version is 8.3.0 in both files and changelog entry exists.
Run: grep -E "8.3.0" style.css package.json CHANGELOG.md
  </verify>
  <done>
Version bumped to 8.3.0 with complete changelog entry documenting Phase 110 features.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build and deploy to production</name>
  <files></files>
  <action>
Build production assets and deploy to production server.

1. Run production build:
   ```bash
   npm run build
   ```
2. Verify build succeeds without errors
3. Deploy using the deployment script:
   ```bash
   bin/deploy.sh
   ```
4. Wait for deploy to complete
5. Clear any caches via the deploy script (it should do this automatically)

Note: The deploy script syncs dist/ folder and theme files, then clears WordPress and SiteGround caches.
  </action>
  <verify>
Deploy script completes successfully.
Check production URL is accessible.
  </verify>
  <done>
Production deployment complete with all Phase 110 changes live.
  </done>
</task>

<task type="auto">
  <name>Task 3: Run Lighthouse PWA audit</name>
  <files></files>
  <action>
Run Lighthouse audit on production URL to verify PWA score.

Option 1 - Using Chrome DevTools:
1. Open production URL in Chrome
2. Open DevTools (F12)
3. Go to Lighthouse tab
4. Select categories: Performance, Accessibility, Best Practices, PWA
5. Select device: Mobile
6. Click "Analyze page load"
7. Document PWA score and any failing audits

Option 2 - Using Lighthouse CLI (if installed):
```bash
npx lighthouse https://stadion.svawc.nl/dashboard --only-categories=pwa --output=json --output-path=./lighthouse-pwa.json
```

Target: PWA score of 90 or above.

Document findings:
- Overall PWA score
- Any failed audits
- Installability status
- Offline capability status
  </action>
  <verify>
Lighthouse PWA audit completed.
PWA score is documented.
  </verify>
  <done>
Lighthouse PWA audit shows score of 90+ with passing installability and offline checks.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete PWA Install & Polish features:
- Android smart install prompt after engagement
- iOS install instructions modal
- Periodic SW update checking
- Dutch localization of all prompts
- Version 8.3.0 deployed to production
  </what-built>
  <how-to-verify>
**iOS Device Testing (iPhone):**
1. Open Safari and navigate to production URL
2. Browse app, view at least 3 pages
3. Verify iOS install modal appears with Dutch instructions
4. Tap "Misschien later" to dismiss
5. Clear site data, return - verify modal doesn't reappear (7-day cooldown)
6. Use Share > Add to Home Screen to install
7. Open installed app from home screen
8. Verify app launches in standalone mode (no Safari UI)
9. Verify pull-to-refresh works
10. Verify offline banner appears when toggling airplane mode

**Android Device Testing (Chrome):**
1. Open Chrome and navigate to production URL
2. Browse app, view at least 2 people
3. Verify install banner appears at bottom with "Installeer Stadion"
4. Tap "Installeer" button
5. Confirm Android install dialog appears
6. Complete installation
7. Open installed app from home screen
8. Verify app launches in standalone mode (no Chrome UI)
9. Verify pull-to-refresh works
10. Verify offline banner appears when toggling airplane mode

**Update Notification Testing:**
If a previous version was installed, verify update notification appears after deployment with "Nu herladen" button.

**Lighthouse Score:**
Confirm PWA audit score is 90 or above.
  </how-to-verify>
  <resume-signal>Type "approved" when device testing confirms all features work, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
1. Version 8.3.0 in style.css and package.json
2. CHANGELOG.md has complete entry for 8.3.0
3. Production deployment successful
4. Lighthouse PWA score >= 90
5. iOS device testing confirms install modal and standalone mode
6. Android device testing confirms install prompt and standalone mode
</verification>

<success_criteria>
- App deployed to production with version 8.3.0
- Lighthouse PWA audit score is 90 or above
- iOS install instructions modal works correctly
- Android install prompt triggers after engagement
- Both platforms work correctly in standalone mode
- v8.0 PWA Enhancement milestone complete
</success_criteria>

<output>
After completion, create `.planning/phases/110-install-polish/110-04-SUMMARY.md`
</output>
