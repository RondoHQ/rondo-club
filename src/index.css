@tailwind base;
@tailwind components;
@tailwind utilities;

/* Prevent iOS standalone mode bounce/reload on overscroll */
@supports (overscroll-behavior-y: none) {
  /* Apply to html/body for full coverage */
  html, body {
    overscroll-behavior-y: none;
  }
}

/* Custom base styles */
@layer base {
  html {
    @apply antialiased;
    /* Extend background color behind safe areas */
    min-height: calc(100% + env(safe-area-inset-top));
  }

  body {
    @apply bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100;
    /* Apply safe area padding for iOS standalone mode */
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* iOS Safe Area utility classes - handle notch and Dynamic Island */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
  .safe-x {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  .safe-y {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
  .safe-all {
    padding-top: env(safe-area-inset-top);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
  }

  /* Theme transition support for smooth color scheme and accent changes */
  body,
  .card,
  .btn,
  .input {
    transition-property: background-color, border-color, color;
    transition-duration: 150ms;
    transition-timing-function: ease-in-out;
  }

  /* Respect user preference for reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      transition-duration: 0ms !important;
      animation-duration: 0ms !important;
    }
  }
}

/* Timeline content styles for activities and notes */
.timeline-content a {
  @apply text-accent-600 hover:text-accent-700 underline dark:text-accent-400 dark:hover:text-accent-300;
}

.timeline-content ul,
.timeline-content ol {
  @apply pl-5 my-2;
}

.timeline-content ul {
  @apply list-disc;
}

.timeline-content ol {
  @apply list-decimal;
}

.timeline-content li {
  @apply my-1;
}

.timeline-content p {
  @apply my-2 first:mt-0 last:mb-0;
}

/* Mobile panel slide-up animation */
@keyframes slide-up {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

/* Theme custom properties for accent colors */
@layer base {
  :root {
    /* Default accent: orange */
    --color-accent-50: theme('colors.orange.50');
    --color-accent-100: theme('colors.orange.100');
    --color-accent-200: theme('colors.orange.200');
    --color-accent-300: theme('colors.orange.300');
    --color-accent-400: theme('colors.orange.400');
    --color-accent-500: theme('colors.orange.500');
    --color-accent-600: theme('colors.orange.600');
    --color-accent-700: theme('colors.orange.700');
    --color-accent-800: theme('colors.orange.800');
    --color-accent-900: theme('colors.orange.900');
  }

  [data-accent="teal"] {
    --color-accent-50: theme('colors.teal.50');
    --color-accent-100: theme('colors.teal.100');
    --color-accent-200: theme('colors.teal.200');
    --color-accent-300: theme('colors.teal.300');
    --color-accent-400: theme('colors.teal.400');
    --color-accent-500: theme('colors.teal.500');
    --color-accent-600: theme('colors.teal.600');
    --color-accent-700: theme('colors.teal.700');
    --color-accent-800: theme('colors.teal.800');
    --color-accent-900: theme('colors.teal.900');
  }

  [data-accent="indigo"] {
    --color-accent-50: theme('colors.indigo.50');
    --color-accent-100: theme('colors.indigo.100');
    --color-accent-200: theme('colors.indigo.200');
    --color-accent-300: theme('colors.indigo.300');
    --color-accent-400: theme('colors.indigo.400');
    --color-accent-500: theme('colors.indigo.500');
    --color-accent-600: theme('colors.indigo.600');
    --color-accent-700: theme('colors.indigo.700');
    --color-accent-800: theme('colors.indigo.800');
    --color-accent-900: theme('colors.indigo.900');
  }

  [data-accent="emerald"] {
    --color-accent-50: theme('colors.emerald.50');
    --color-accent-100: theme('colors.emerald.100');
    --color-accent-200: theme('colors.emerald.200');
    --color-accent-300: theme('colors.emerald.300');
    --color-accent-400: theme('colors.emerald.400');
    --color-accent-500: theme('colors.emerald.500');
    --color-accent-600: theme('colors.emerald.600');
    --color-accent-700: theme('colors.emerald.700');
    --color-accent-800: theme('colors.emerald.800');
    --color-accent-900: theme('colors.emerald.900');
  }

  [data-accent="violet"] {
    --color-accent-50: theme('colors.violet.50');
    --color-accent-100: theme('colors.violet.100');
    --color-accent-200: theme('colors.violet.200');
    --color-accent-300: theme('colors.violet.300');
    --color-accent-400: theme('colors.violet.400');
    --color-accent-500: theme('colors.violet.500');
    --color-accent-600: theme('colors.violet.600');
    --color-accent-700: theme('colors.violet.700');
    --color-accent-800: theme('colors.violet.800');
    --color-accent-900: theme('colors.violet.900');
  }

  [data-accent="pink"] {
    --color-accent-50: theme('colors.pink.50');
    --color-accent-100: theme('colors.pink.100');
    --color-accent-200: theme('colors.pink.200');
    --color-accent-300: theme('colors.pink.300');
    --color-accent-400: theme('colors.pink.400');
    --color-accent-500: theme('colors.pink.500');
    --color-accent-600: theme('colors.pink.600');
    --color-accent-700: theme('colors.pink.700');
    --color-accent-800: theme('colors.pink.800');
    --color-accent-900: theme('colors.pink.900');
  }

  [data-accent="fuchsia"] {
    --color-accent-50: theme('colors.fuchsia.50');
    --color-accent-100: theme('colors.fuchsia.100');
    --color-accent-200: theme('colors.fuchsia.200');
    --color-accent-300: theme('colors.fuchsia.300');
    --color-accent-400: theme('colors.fuchsia.400');
    --color-accent-500: theme('colors.fuchsia.500');
    --color-accent-600: theme('colors.fuchsia.600');
    --color-accent-700: theme('colors.fuchsia.700');
    --color-accent-800: theme('colors.fuchsia.800');
    --color-accent-900: theme('colors.fuchsia.900');
  }

  [data-accent="rose"] {
    --color-accent-50: theme('colors.rose.50');
    --color-accent-100: theme('colors.rose.100');
    --color-accent-200: theme('colors.rose.200');
    --color-accent-300: theme('colors.rose.300');
    --color-accent-400: theme('colors.rose.400');
    --color-accent-500: theme('colors.rose.500');
    --color-accent-600: theme('colors.rose.600');
    --color-accent-700: theme('colors.rose.700');
    --color-accent-800: theme('colors.rose.800');
    --color-accent-900: theme('colors.rose.900');
  }
}

/* Custom component classes */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-900;
  }

  .btn-primary {
    @apply btn bg-accent-600 text-white hover:bg-accent-700 focus:ring-accent-500 dark:bg-accent-500 dark:hover:bg-accent-400;
  }

  .btn-secondary {
    @apply btn bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-accent-500 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-700;
  }

  .btn-danger {
    @apply btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 dark:bg-red-500 dark:hover:bg-red-400;
  }

  .btn-danger-outline {
    @apply btn bg-transparent text-red-500 border border-red-500 hover:bg-red-50 hover:text-red-600 focus:ring-red-500 dark:text-red-400 dark:border-red-400 dark:hover:bg-red-900/30 dark:hover:text-red-300;
  }

  .input {
    @apply block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-accent-500 focus:border-accent-500 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-100;
  }

  .label {
    @apply block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300;
  }

  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 dark:bg-gray-800 dark:border-gray-700;
  }
}
