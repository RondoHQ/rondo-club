var h$=t=>{throw TypeError(t)};var Yb=(t,e,r)=>e.has(t)||h$("Cannot "+r);var R=(t,e,r)=>(Yb(t,e,"read from private field"),r?r.call(t):e.get(t)),xe=(t,e,r)=>e.has(t)?h$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ae=(t,e,r,n)=>(Yb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),$e=(t,e,r)=>(Yb(t,e,"access private method"),r);var ag=(t,e,r,n)=>({set _(i){ae(t,e,i,r)},get _(){return R(t,e,n)}});function lce(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function RJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var MJ={exports:{}},u0={},AJ={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em=Symbol.for("react.element"),cce=Symbol.for("react.portal"),uce=Symbol.for("react.fragment"),dce=Symbol.for("react.strict_mode"),hce=Symbol.for("react.profiler"),fce=Symbol.for("react.provider"),pce=Symbol.for("react.context"),mce=Symbol.for("react.forward_ref"),gce=Symbol.for("react.suspense"),yce=Symbol.for("react.memo"),vce=Symbol.for("react.lazy"),f$=Symbol.iterator;function bce(t){return t===null||typeof t!="object"?null:(t=f$&&t[f$]||t["@@iterator"],typeof t=="function"?t:null)}var DJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$J=Object.assign,FJ={};function oh(t,e,r){this.props=t,this.context=e,this.refs=FJ,this.updater=r||DJ}oh.prototype.isReactComponent={};oh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qJ(){}qJ.prototype=oh.prototype;function mR(t,e,r){this.props=t,this.context=e,this.refs=FJ,this.updater=r||DJ}var gR=mR.prototype=new qJ;gR.constructor=mR;$J(gR,oh.prototype);gR.isPureReactComponent=!0;var p$=Array.isArray,LJ=Object.prototype.hasOwnProperty,yR={current:null},BJ={key:!0,ref:!0,__self:!0,__source:!0};function zJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)LJ.call(e,n)&&!BJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:em,type:t,key:s,ref:o,props:i,_owner:yR.current}}function xce(t,e){return{$$typeof:em,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vR(t){return typeof t=="object"&&t!==null&&t.$$typeof===em}function wce(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var m$=/\/+/g;function Qb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wce(""+t.key):e.toString(36)}function Qg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case em:case cce:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Qb(o,0):n,p$(i)?(r="",t!=null&&(r=t.replace(m$,"$&/")+"/"),Qg(i,e,r,"",function(u){return u})):i!=null&&(vR(i)&&(i=xce(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(m$,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",p$(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Qb(s,a);o+=Qg(s,e,r,l,i)}else if(l=bce(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Qb(s,a++),o+=Qg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lg(t,e,r){if(t==null)return t;var n=[],i=0;return Qg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Sce(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dn={current:null},Xg={transition:null},_ce={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:Xg,ReactCurrentOwner:yR};function VJ(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:lg,forEach:function(t,e,r){lg(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return lg(t,function(){e++}),e},toArray:function(t){return lg(t,function(e){return e})||[]},only:function(t){if(!vR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=oh;nt.Fragment=uce;nt.Profiler=hce;nt.PureComponent=mR;nt.StrictMode=dce;nt.Suspense=gce;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_ce;nt.act=VJ;nt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=$J({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)LJ.call(e,l)&&!BJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:em,type:t.type,key:i,ref:s,props:n,_owner:o}};nt.createContext=function(t){return t={$$typeof:pce,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fce,_context:t},t.Consumer=t};nt.createElement=zJ;nt.createFactory=function(t){var e=zJ.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:mce,render:t}};nt.isValidElement=vR;nt.lazy=function(t){return{$$typeof:vce,_payload:{_status:-1,_result:t},_init:Sce}};nt.memo=function(t,e){return{$$typeof:yce,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=Xg.transition;Xg.transition={};try{t()}finally{Xg.transition=e}};nt.unstable_act=VJ;nt.useCallback=function(t,e){return Dn.current.useCallback(t,e)};nt.useContext=function(t){return Dn.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return Dn.current.useDeferredValue(t)};nt.useEffect=function(t,e){return Dn.current.useEffect(t,e)};nt.useId=function(){return Dn.current.useId()};nt.useImperativeHandle=function(t,e,r){return Dn.current.useImperativeHandle(t,e,r)};nt.useInsertionEffect=function(t,e){return Dn.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return Dn.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return Dn.current.useMemo(t,e)};nt.useReducer=function(t,e,r){return Dn.current.useReducer(t,e,r)};nt.useRef=function(t){return Dn.current.useRef(t)};nt.useState=function(t){return Dn.current.useState(t)};nt.useSyncExternalStore=function(t,e,r){return Dn.current.useSyncExternalStore(t,e,r)};nt.useTransition=function(){return Dn.current.useTransition()};nt.version="18.3.1";AJ.exports=nt;var k=AJ.exports;const Se=RJ(k),Ece=lce({__proto__:null,default:Se},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nce=k,kce=Symbol.for("react.element"),Cce=Symbol.for("react.fragment"),jce=Object.prototype.hasOwnProperty,Tce=Nce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oce={key:!0,ref:!0,__self:!0,__source:!0};function WJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)jce.call(e,n)&&!Oce.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:kce,type:t,key:s,ref:o,props:i,_owner:Tce.current}}u0.Fragment=Cce;u0.jsx=WJ;u0.jsxs=WJ;MJ.exports=u0;var c=MJ.exports,zO={},UJ={exports:{}},bi={},HJ={exports:{}},KJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,B){var Y=M.length;M.push(B);e:for(;0<Y;){var Q=Y-1>>>1,pe=M[Q];if(0<i(pe,B))M[Q]=B,M[Y]=pe,Y=Q;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var B=M[0],Y=M.pop();if(Y!==B){M[0]=Y;e:for(var Q=0,pe=M.length,H=pe>>>1;Q<H;){var oe=2*(Q+1)-1,je=M[oe],me=oe+1,qe=M[me];if(0>i(je,Y))me<pe&&0>i(qe,je)?(M[Q]=qe,M[me]=Y,Q=me):(M[Q]=je,M[oe]=Y,Q=oe);else if(me<pe&&0>i(qe,Y))M[Q]=qe,M[me]=Y,Q=me;else break e}}return B}function i(M,B){var Y=M.sortIndex-B.sortIndex;return Y!==0?Y:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=M)n(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=r(u)}}function x(M){if(g=!1,w(M),!m)if(r(l)!==null)m=!0,$(S);else{var B=r(u);B!==null&&L(x,B.startTime-M)}}function S(M,B){m=!1,g&&(g=!1,y(N),N=-1),p=!0;var Y=f;try{for(w(B),h=r(l);h!==null&&(!(h.expirationTime>B)||M&&!T());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var pe=Q(h.expirationTime<=B);B=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===r(l)&&n(l),w(B)}else n(l);h=r(l)}if(h!==null)var H=!0;else{var oe=r(u);oe!==null&&L(x,oe.startTime-B),H=!1}return H}finally{h=null,f=Y,p=!1}}var _=!1,E=null,N=-1,C=5,j=-1;function T(){return!(t.unstable_now()-j<C)}function P(){if(E!==null){var M=t.unstable_now();j=M;var B=!0;try{B=E(!0,M)}finally{B?O():(_=!1,E=null)}}else _=!1}var O;if(typeof b=="function")O=function(){b(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=P,O=function(){q.postMessage(null)}}else O=function(){v(P,0)};function $(M){E=M,_||(_=!0,O())}function L(M,B){N=v(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,$(S))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var Y=f;f=B;try{return M()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=f;f=M;try{return B()}finally{f=Y}},t.unstable_scheduleCallback=function(M,B,Y){var Q=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Q+Y:Q):Y=Q,M){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Y+pe,M={id:d++,callback:B,priorityLevel:M,startTime:Y,expirationTime:pe,sortIndex:-1},Y>Q?(M.sortIndex=Y,e(u,M),r(l)===null&&M===r(u)&&(g?(y(N),N=-1):g=!0,L(x,Y-Q))):(M.sortIndex=pe,e(l,M),m||p||(m=!0,$(S))),M},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(M){var B=f;return function(){var Y=f;f=B;try{return M.apply(this,arguments)}finally{f=Y}}}})(KJ);HJ.exports=KJ;var Pce=HJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ice=k,vi=Pce;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GJ=new Set,Jf={};function Uc(t,e){Id(t,e),Id(t+"Capture",e)}function Id(t,e){for(Jf[t]=e,t=0;t<e.length;t++)GJ.add(e[t])}var Po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),VO=Object.prototype.hasOwnProperty,Rce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g$={},y$={};function Mce(t){return VO.call(y$,t)?!0:VO.call(g$,t)?!1:Rce.test(t)?y$[t]=!0:(g$[t]=!0,!1)}function Ace(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Dce(t,e,r,n){if(e===null||typeof e>"u"||Ace(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $n(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new $n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new $n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new $n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new $n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new $n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new $n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new $n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new $n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new $n(t,5,!1,t.toLowerCase(),null,!1,!1)});var bR=/[\-:]([a-z])/g;function xR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bR,xR);nn[e]=new $n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bR,xR);nn[e]=new $n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bR,xR);nn[e]=new $n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new $n(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new $n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new $n(t,1,!1,t.toLowerCase(),null,!0,!0)});function wR(t,e,r,n){var i=nn.hasOwnProperty(e)?nn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Dce(e,r,i,n)&&(r=null),n||i===null?Mce(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Fo=Ice.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cg=Symbol.for("react.element"),Du=Symbol.for("react.portal"),$u=Symbol.for("react.fragment"),SR=Symbol.for("react.strict_mode"),WO=Symbol.for("react.profiler"),YJ=Symbol.for("react.provider"),QJ=Symbol.for("react.context"),_R=Symbol.for("react.forward_ref"),UO=Symbol.for("react.suspense"),HO=Symbol.for("react.suspense_list"),ER=Symbol.for("react.memo"),ia=Symbol.for("react.lazy"),XJ=Symbol.for("react.offscreen"),v$=Symbol.iterator;function Gh(t){return t===null||typeof t!="object"?null:(t=v$&&t[v$]||t["@@iterator"],typeof t=="function"?t:null)}var Kt=Object.assign,Xb;function mf(t){if(Xb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Xb=e&&e[1]||""}return`
`+Xb+t}var Jb=!1;function Zb(t,e){if(!t||Jb)return"";Jb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?mf(t):""}function $ce(t){switch(t.tag){case 5:return mf(t.type);case 16:return mf("Lazy");case 13:return mf("Suspense");case 19:return mf("SuspenseList");case 0:case 2:case 15:return t=Zb(t.type,!1),t;case 11:return t=Zb(t.type.render,!1),t;case 1:return t=Zb(t.type,!0),t;default:return""}}function KO(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $u:return"Fragment";case Du:return"Portal";case WO:return"Profiler";case SR:return"StrictMode";case UO:return"Suspense";case HO:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QJ:return(t.displayName||"Context")+".Consumer";case YJ:return(t._context.displayName||"Context")+".Provider";case _R:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ER:return e=t.displayName||null,e!==null?e:KO(t.type)||"Memo";case ia:e=t._payload,t=t._init;try{return KO(t(e))}catch{}}return null}function Fce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return KO(e);case 8:return e===SR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qce(t){var e=JJ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ug(t){t._valueTracker||(t._valueTracker=qce(t))}function ZJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=JJ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function _y(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function GO(t,e){var r=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function b$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=tl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eZ(t,e){e=e.checked,e!=null&&wR(t,"checked",e,!1)}function YO(t,e){eZ(t,e);var r=tl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?QO(t,e.type,r):e.hasOwnProperty("defaultValue")&&QO(t,e.type,tl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function QO(t,e,r){(e!=="number"||_y(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var gf=Array.isArray;function rd(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+tl(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function XO(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function w$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(re(92));if(gf(r)){if(1<r.length)throw Error(re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:tl(r)}}function tZ(t,e){var r=tl(e.value),n=tl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function S$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rZ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function JO(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rZ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dg,nZ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dg=dg||document.createElement("div"),dg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var kf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lce=["Webkit","ms","Moz","O"];Object.keys(kf).forEach(function(t){Lce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kf[e]=kf[t]})});function iZ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||kf.hasOwnProperty(t)&&kf[t]?(""+e).trim():e+"px"}function sZ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=iZ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Bce=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZO(t,e){if(e){if(Bce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function eP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tP=null;function NR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rP=null,nd=null,id=null;function _$(t){if(t=nm(t)){if(typeof rP!="function")throw Error(re(280));var e=t.stateNode;e&&(e=m0(e),rP(t.stateNode,t.type,e))}}function oZ(t){nd?id?id.push(t):id=[t]:nd=t}function aZ(){if(nd){var t=nd,e=id;if(id=nd=null,_$(t),e)for(t=0;t<e.length;t++)_$(e[t])}}function lZ(t,e){return t(e)}function cZ(){}var ex=!1;function uZ(t,e,r){if(ex)return t(e,r);ex=!0;try{return lZ(t,e,r)}finally{ex=!1,(nd!==null||id!==null)&&(cZ(),aZ())}}function ep(t,e){var r=t.stateNode;if(r===null)return null;var n=m0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(re(231,e,typeof r));return r}var nP=!1;if(Po)try{var Yh={};Object.defineProperty(Yh,"passive",{get:function(){nP=!0}}),window.addEventListener("test",Yh,Yh),window.removeEventListener("test",Yh,Yh)}catch{nP=!1}function zce(t,e,r,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Cf=!1,Ey=null,Ny=!1,iP=null,Vce={onError:function(t){Cf=!0,Ey=t}};function Wce(t,e,r,n,i,s,o,a,l){Cf=!1,Ey=null,zce.apply(Vce,arguments)}function Uce(t,e,r,n,i,s,o,a,l){if(Wce.apply(this,arguments),Cf){if(Cf){var u=Ey;Cf=!1,Ey=null}else throw Error(re(198));Ny||(Ny=!0,iP=u)}}function Hc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function dZ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function E$(t){if(Hc(t)!==t)throw Error(re(188))}function Hce(t){var e=t.alternate;if(!e){if(e=Hc(t),e===null)throw Error(re(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return E$(i),t;if(s===n)return E$(i),e;s=s.sibling}throw Error(re(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(re(189))}}if(r.alternate!==n)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?t:e}function hZ(t){return t=Hce(t),t!==null?fZ(t):null}function fZ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fZ(t);if(e!==null)return e;t=t.sibling}return null}var pZ=vi.unstable_scheduleCallback,N$=vi.unstable_cancelCallback,Kce=vi.unstable_shouldYield,Gce=vi.unstable_requestPaint,ur=vi.unstable_now,Yce=vi.unstable_getCurrentPriorityLevel,kR=vi.unstable_ImmediatePriority,mZ=vi.unstable_UserBlockingPriority,ky=vi.unstable_NormalPriority,Qce=vi.unstable_LowPriority,gZ=vi.unstable_IdlePriority,d0=null,Ds=null;function Xce(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(d0,t,void 0,(t.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:eue,Jce=Math.log,Zce=Math.LN2;function eue(t){return t>>>=0,t===0?32:31-(Jce(t)/Zce|0)|0}var hg=64,fg=4194304;function yf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cy(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=yf(a):(s&=o,s!==0&&(n=yf(s)))}else o=r&~i,o!==0?n=yf(o):s!==0&&(n=yf(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-hs(e),i=1<<r,n|=t[r],e&=~i;return n}function tue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rue(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-hs(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=tue(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function sP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yZ(){var t=hg;return hg<<=1,!(hg&4194240)&&(hg=64),t}function tx(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function tm(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hs(e),t[e]=r}function nue(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-hs(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function CR(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-hs(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var wt=0;function vZ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bZ,jR,xZ,wZ,SZ,oP=!1,pg=[],Ma=null,Aa=null,Da=null,tp=new Map,rp=new Map,ha=[],iue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function k$(t,e){switch(t){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":tp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rp.delete(e.pointerId)}}function Qh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=nm(e),e!==null&&jR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sue(t,e,r,n,i){switch(e){case"focusin":return Ma=Qh(Ma,t,e,r,n,i),!0;case"dragenter":return Aa=Qh(Aa,t,e,r,n,i),!0;case"mouseover":return Da=Qh(Da,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return tp.set(s,Qh(tp.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,rp.set(s,Qh(rp.get(s)||null,t,e,r,n,i)),!0}return!1}function _Z(t){var e=$l(t.target);if(e!==null){var r=Hc(e);if(r!==null){if(e=r.tag,e===13){if(e=dZ(r),e!==null){t.blockedOn=e,SZ(t.priority,function(){xZ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=aP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);tP=n,r.target.dispatchEvent(n),tP=null}else return e=nm(r),e!==null&&jR(e),t.blockedOn=r,!1;e.shift()}return!0}function C$(t,e,r){Jg(t)&&r.delete(e)}function oue(){oP=!1,Ma!==null&&Jg(Ma)&&(Ma=null),Aa!==null&&Jg(Aa)&&(Aa=null),Da!==null&&Jg(Da)&&(Da=null),tp.forEach(C$),rp.forEach(C$)}function Xh(t,e){t.blockedOn===e&&(t.blockedOn=null,oP||(oP=!0,vi.unstable_scheduleCallback(vi.unstable_NormalPriority,oue)))}function np(t){function e(i){return Xh(i,t)}if(0<pg.length){Xh(pg[0],t);for(var r=1;r<pg.length;r++){var n=pg[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ma!==null&&Xh(Ma,t),Aa!==null&&Xh(Aa,t),Da!==null&&Xh(Da,t),tp.forEach(e),rp.forEach(e),r=0;r<ha.length;r++)n=ha[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ha.length&&(r=ha[0],r.blockedOn===null);)_Z(r),r.blockedOn===null&&ha.shift()}var sd=Fo.ReactCurrentBatchConfig,jy=!0;function aue(t,e,r,n){var i=wt,s=sd.transition;sd.transition=null;try{wt=1,TR(t,e,r,n)}finally{wt=i,sd.transition=s}}function lue(t,e,r,n){var i=wt,s=sd.transition;sd.transition=null;try{wt=4,TR(t,e,r,n)}finally{wt=i,sd.transition=s}}function TR(t,e,r,n){if(jy){var i=aP(t,e,r,n);if(i===null)dx(t,e,n,Ty,r),k$(t,n);else if(sue(i,t,e,r,n))n.stopPropagation();else if(k$(t,n),e&4&&-1<iue.indexOf(t)){for(;i!==null;){var s=nm(i);if(s!==null&&bZ(s),s=aP(t,e,r,n),s===null&&dx(t,e,n,Ty,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else dx(t,e,n,null,r)}}var Ty=null;function aP(t,e,r,n){if(Ty=null,t=NR(n),t=$l(t),t!==null)if(e=Hc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=dZ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ty=t,null}function EZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yce()){case kR:return 1;case mZ:return 4;case ky:case Qce:return 16;case gZ:return 536870912;default:return 16}default:return 16}}var Ca=null,OR=null,Zg=null;function NZ(){if(Zg)return Zg;var t,e=OR,r=e.length,n,i="value"in Ca?Ca.value:Ca.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Zg=i.slice(t,1<n?1-n:void 0)}function ey(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mg(){return!0}function j$(){return!1}function xi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mg:j$,this.isPropagationStopped=j$,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=mg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=mg)},persist:function(){},isPersistent:mg}),e}var ah={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PR=xi(ah),rm=Kt({},ah,{view:0,detail:0}),cue=xi(rm),rx,nx,Jh,h0=Kt({},rm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jh&&(Jh&&t.type==="mousemove"?(rx=t.screenX-Jh.screenX,nx=t.screenY-Jh.screenY):nx=rx=0,Jh=t),rx)},movementY:function(t){return"movementY"in t?t.movementY:nx}}),T$=xi(h0),uue=Kt({},h0,{dataTransfer:0}),due=xi(uue),hue=Kt({},rm,{relatedTarget:0}),ix=xi(hue),fue=Kt({},ah,{animationName:0,elapsedTime:0,pseudoElement:0}),pue=xi(fue),mue=Kt({},ah,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gue=xi(mue),yue=Kt({},ah,{data:0}),O$=xi(yue),vue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wue(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xue[t])?!!e[t]:!1}function IR(){return wue}var Sue=Kt({},rm,{key:function(t){if(t.key){var e=vue[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ey(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bue[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IR,charCode:function(t){return t.type==="keypress"?ey(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ey(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_ue=xi(Sue),Eue=Kt({},h0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P$=xi(Eue),Nue=Kt({},rm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IR}),kue=xi(Nue),Cue=Kt({},ah,{propertyName:0,elapsedTime:0,pseudoElement:0}),jue=xi(Cue),Tue=Kt({},h0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Oue=xi(Tue),Pue=[9,13,27,32],RR=Po&&"CompositionEvent"in window,jf=null;Po&&"documentMode"in document&&(jf=document.documentMode);var Iue=Po&&"TextEvent"in window&&!jf,kZ=Po&&(!RR||jf&&8<jf&&11>=jf),I$=" ",R$=!1;function CZ(t,e){switch(t){case"keyup":return Pue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jZ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fu=!1;function Rue(t,e){switch(t){case"compositionend":return jZ(e);case"keypress":return e.which!==32?null:(R$=!0,I$);case"textInput":return t=e.data,t===I$&&R$?null:t;default:return null}}function Mue(t,e){if(Fu)return t==="compositionend"||!RR&&CZ(t,e)?(t=NZ(),Zg=OR=Ca=null,Fu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kZ&&e.locale!=="ko"?null:e.data;default:return null}}var Aue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Aue[t.type]:e==="textarea"}function TZ(t,e,r,n){oZ(n),e=Oy(e,"onChange"),0<e.length&&(r=new PR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Tf=null,ip=null;function Due(t){LZ(t,0)}function f0(t){var e=Bu(t);if(ZJ(e))return t}function $ue(t,e){if(t==="change")return e}var OZ=!1;if(Po){var sx;if(Po){var ox="oninput"in document;if(!ox){var A$=document.createElement("div");A$.setAttribute("oninput","return;"),ox=typeof A$.oninput=="function"}sx=ox}else sx=!1;OZ=sx&&(!document.documentMode||9<document.documentMode)}function D$(){Tf&&(Tf.detachEvent("onpropertychange",PZ),ip=Tf=null)}function PZ(t){if(t.propertyName==="value"&&f0(ip)){var e=[];TZ(e,ip,t,NR(t)),uZ(Due,e)}}function Fue(t,e,r){t==="focusin"?(D$(),Tf=e,ip=r,Tf.attachEvent("onpropertychange",PZ)):t==="focusout"&&D$()}function que(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return f0(ip)}function Lue(t,e){if(t==="click")return f0(e)}function Bue(t,e){if(t==="input"||t==="change")return f0(e)}function zue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ps=typeof Object.is=="function"?Object.is:zue;function sp(t,e){if(ps(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!VO.call(e,i)||!ps(t[i],e[i]))return!1}return!0}function $$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F$(t,e){var r=$$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$$(r)}}function IZ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IZ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RZ(){for(var t=window,e=_y();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=_y(t.document)}return e}function MR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Vue(t){var e=RZ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&IZ(r.ownerDocument.documentElement,r)){if(n!==null&&MR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=F$(r,s);var o=F$(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Wue=Po&&"documentMode"in document&&11>=document.documentMode,qu=null,lP=null,Of=null,cP=!1;function q$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cP||qu==null||qu!==_y(n)||(n=qu,"selectionStart"in n&&MR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Of&&sp(Of,n)||(Of=n,n=Oy(lP,"onSelect"),0<n.length&&(e=new PR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=qu)))}function gg(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Lu={animationend:gg("Animation","AnimationEnd"),animationiteration:gg("Animation","AnimationIteration"),animationstart:gg("Animation","AnimationStart"),transitionend:gg("Transition","TransitionEnd")},ax={},MZ={};Po&&(MZ=document.createElement("div").style,"AnimationEvent"in window||(delete Lu.animationend.animation,delete Lu.animationiteration.animation,delete Lu.animationstart.animation),"TransitionEvent"in window||delete Lu.transitionend.transition);function p0(t){if(ax[t])return ax[t];if(!Lu[t])return t;var e=Lu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in MZ)return ax[t]=e[r];return t}var AZ=p0("animationend"),DZ=p0("animationiteration"),$Z=p0("animationstart"),FZ=p0("transitionend"),qZ=new Map,L$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ul(t,e){qZ.set(t,e),Uc(e,[t])}for(var lx=0;lx<L$.length;lx++){var cx=L$[lx],Uue=cx.toLowerCase(),Hue=cx[0].toUpperCase()+cx.slice(1);ul(Uue,"on"+Hue)}ul(AZ,"onAnimationEnd");ul(DZ,"onAnimationIteration");ul($Z,"onAnimationStart");ul("dblclick","onDoubleClick");ul("focusin","onFocus");ul("focusout","onBlur");ul(FZ,"onTransitionEnd");Id("onMouseEnter",["mouseout","mouseover"]);Id("onMouseLeave",["mouseout","mouseover"]);Id("onPointerEnter",["pointerout","pointerover"]);Id("onPointerLeave",["pointerout","pointerover"]);Uc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kue=new Set("cancel close invalid load scroll toggle".split(" ").concat(vf));function B$(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Uce(n,e,void 0,t),t.currentTarget=null}function LZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;B$(i,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;B$(i,a,u),s=l}}}if(Ny)throw t=iP,Ny=!1,iP=null,t}function Mt(t,e){var r=e[pP];r===void 0&&(r=e[pP]=new Set);var n=t+"__bubble";r.has(n)||(BZ(e,t,2,!1),r.add(n))}function ux(t,e,r){var n=0;e&&(n|=4),BZ(r,t,n,e)}var yg="_reactListening"+Math.random().toString(36).slice(2);function op(t){if(!t[yg]){t[yg]=!0,GJ.forEach(function(r){r!=="selectionchange"&&(Kue.has(r)||ux(r,!1,t),ux(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yg]||(e[yg]=!0,ux("selectionchange",!1,e))}}function BZ(t,e,r,n){switch(EZ(e)){case 1:var i=aue;break;case 4:i=lue;break;default:i=TR}r=i.bind(null,e,r,t),i=void 0,!nP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function dx(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$l(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}uZ(function(){var u=s,d=NR(r),h=[];e:{var f=qZ.get(t);if(f!==void 0){var p=PR,m=t;switch(t){case"keypress":if(ey(r)===0)break e;case"keydown":case"keyup":p=_ue;break;case"focusin":m="focus",p=ix;break;case"focusout":m="blur",p=ix;break;case"beforeblur":case"afterblur":p=ix;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=T$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=due;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kue;break;case AZ:case DZ:case $Z:p=pue;break;case FZ:p=jue;break;case"scroll":p=cue;break;case"wheel":p=Oue;break;case"copy":case"cut":case"paste":p=gue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=P$}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=ep(b,y),x!=null&&g.push(ap(b,x,w)))),v)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==tP&&(m=r.relatedTarget||r.fromElement)&&($l(m)||m[Io]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?$l(m):null,m!==null&&(v=Hc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=T$,x="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=P$,x="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:Bu(p),w=m==null?f:Bu(m),f=new g(x,b+"leave",p,r,d),f.target=v,f.relatedTarget=w,x=null,$l(d)===u&&(g=new g(y,b+"enter",m,r,d),g.target=w,g.relatedTarget=v,x=g),v=x,p&&m)t:{for(g=p,y=m,b=0,w=g;w;w=_u(w))b++;for(w=0,x=y;x;x=_u(x))w++;for(;0<b-w;)g=_u(g),b--;for(;0<w-b;)y=_u(y),w--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=_u(g),y=_u(y)}g=null}else g=null;p!==null&&z$(h,f,p,g,!1),m!==null&&v!==null&&z$(h,v,m,g,!0)}}e:{if(f=u?Bu(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=$ue;else if(M$(f))if(OZ)S=Bue;else{S=que;var _=Fue}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Lue);if(S&&(S=S(t,u))){TZ(h,S,r,d);break e}_&&_(t,f,u),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&QO(f,"number",f.value)}switch(_=u?Bu(u):window,t){case"focusin":(M$(_)||_.contentEditable==="true")&&(qu=_,lP=u,Of=null);break;case"focusout":Of=lP=qu=null;break;case"mousedown":cP=!0;break;case"contextmenu":case"mouseup":case"dragend":cP=!1,q$(h,r,d);break;case"selectionchange":if(Wue)break;case"keydown":case"keyup":q$(h,r,d)}var E;if(RR)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Fu?CZ(t,r)&&(N="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(kZ&&r.locale!=="ko"&&(Fu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Fu&&(E=NZ()):(Ca=d,OR="value"in Ca?Ca.value:Ca.textContent,Fu=!0)),_=Oy(u,N),0<_.length&&(N=new O$(N,t,null,r,d),h.push({event:N,listeners:_}),E?N.data=E:(E=jZ(r),E!==null&&(N.data=E)))),(E=Iue?Rue(t,r):Mue(t,r))&&(u=Oy(u,"onBeforeInput"),0<u.length&&(d=new O$("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=E))}LZ(h,e)})}function ap(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Oy(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ep(t,r),s!=null&&n.unshift(ap(t,s,i)),s=ep(t,e),s!=null&&n.push(ap(t,s,i))),t=t.return}return n}function _u(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function z$(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=ep(r,s),l!=null&&o.unshift(ap(r,l,a))):i||(l=ep(r,s),l!=null&&o.push(ap(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Gue=/\r\n?/g,Yue=/\u0000|\uFFFD/g;function V$(t){return(typeof t=="string"?t:""+t).replace(Gue,`
`).replace(Yue,"")}function vg(t,e,r){if(e=V$(e),V$(t)!==e&&r)throw Error(re(425))}function Py(){}var uP=null,dP=null;function hP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fP=typeof setTimeout=="function"?setTimeout:void 0,Que=typeof clearTimeout=="function"?clearTimeout:void 0,W$=typeof Promise=="function"?Promise:void 0,Xue=typeof queueMicrotask=="function"?queueMicrotask:typeof W$<"u"?function(t){return W$.resolve(null).then(t).catch(Jue)}:fP;function Jue(t){setTimeout(function(){throw t})}function hx(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),np(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);np(e)}function $a(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function U$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var lh=Math.random().toString(36).slice(2),Ps="__reactFiber$"+lh,lp="__reactProps$"+lh,Io="__reactContainer$"+lh,pP="__reactEvents$"+lh,Zue="__reactListeners$"+lh,ede="__reactHandles$"+lh;function $l(t){var e=t[Ps];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Io]||r[Ps]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=U$(t);t!==null;){if(r=t[Ps])return r;t=U$(t)}return e}t=r,r=t.parentNode}return null}function nm(t){return t=t[Ps]||t[Io],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function m0(t){return t[lp]||null}var mP=[],zu=-1;function dl(t){return{current:t}}function $t(t){0>zu||(t.current=mP[zu],mP[zu]=null,zu--)}function Rt(t,e){zu++,mP[zu]=t.current,t.current=e}var rl={},yn=dl(rl),Xn=dl(!1),xc=rl;function Rd(t,e){var r=t.type.contextTypes;if(!r)return rl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jn(t){return t=t.childContextTypes,t!=null}function Iy(){$t(Xn),$t(yn)}function H$(t,e,r){if(yn.current!==rl)throw Error(re(168));Rt(yn,e),Rt(Xn,r)}function zZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(re(108,Fce(t)||"Unknown",i));return Kt({},r,n)}function Ry(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rl,xc=yn.current,Rt(yn,t),Rt(Xn,Xn.current),!0}function K$(t,e,r){var n=t.stateNode;if(!n)throw Error(re(169));r?(t=zZ(t,e,xc),n.__reactInternalMemoizedMergedChildContext=t,$t(Xn),$t(yn),Rt(yn,t)):$t(Xn),Rt(Xn,r)}var lo=null,g0=!1,fx=!1;function VZ(t){lo===null?lo=[t]:lo.push(t)}function tde(t){g0=!0,VZ(t)}function hl(){if(!fx&&lo!==null){fx=!0;var t=0,e=wt;try{var r=lo;for(wt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}lo=null,g0=!1}catch(i){throw lo!==null&&(lo=lo.slice(t+1)),pZ(kR,hl),i}finally{wt=e,fx=!1}}return null}var Vu=[],Wu=0,My=null,Ay=0,Ai=[],Di=0,wc=null,po=1,mo="";function Rl(t,e){Vu[Wu++]=Ay,Vu[Wu++]=My,My=t,Ay=e}function WZ(t,e,r){Ai[Di++]=po,Ai[Di++]=mo,Ai[Di++]=wc,wc=t;var n=po;t=mo;var i=32-hs(n)-1;n&=~(1<<i),r+=1;var s=32-hs(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,po=1<<32-hs(e)+i|r<<i|n,mo=s+t}else po=1<<s|r<<i|n,mo=t}function AR(t){t.return!==null&&(Rl(t,1),WZ(t,1,0))}function DR(t){for(;t===My;)My=Vu[--Wu],Vu[Wu]=null,Ay=Vu[--Wu],Vu[Wu]=null;for(;t===wc;)wc=Ai[--Di],Ai[Di]=null,mo=Ai[--Di],Ai[Di]=null,po=Ai[--Di],Ai[Di]=null}var gi=null,mi=null,Lt=!1,ss=null;function UZ(t,e){var r=Li(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function G$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gi=t,mi=$a(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gi=t,mi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=wc!==null?{id:po,overflow:mo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Li(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,gi=t,mi=null,!0):!1;default:return!1}}function gP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yP(t){if(Lt){var e=mi;if(e){var r=e;if(!G$(t,e)){if(gP(t))throw Error(re(418));e=$a(r.nextSibling);var n=gi;e&&G$(t,e)?UZ(n,r):(t.flags=t.flags&-4097|2,Lt=!1,gi=t)}}else{if(gP(t))throw Error(re(418));t.flags=t.flags&-4097|2,Lt=!1,gi=t}}}function Y$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gi=t}function bg(t){if(t!==gi)return!1;if(!Lt)return Y$(t),Lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hP(t.type,t.memoizedProps)),e&&(e=mi)){if(gP(t))throw HZ(),Error(re(418));for(;e;)UZ(t,e),e=$a(e.nextSibling)}if(Y$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){mi=$a(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}mi=null}}else mi=gi?$a(t.stateNode.nextSibling):null;return!0}function HZ(){for(var t=mi;t;)t=$a(t.nextSibling)}function Md(){mi=gi=null,Lt=!1}function $R(t){ss===null?ss=[t]:ss.push(t)}var rde=Fo.ReactCurrentBatchConfig;function Zh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var n=r.stateNode}if(!n)throw Error(re(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,t))}return t}function xg(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Q$(t){var e=t._init;return e(t._payload)}function KZ(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function r(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=Ba(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,x){return b===null||b.tag!==6?(b=xx(w,y.mode,x),b.return=y,b):(b=i(b,w),b.return=y,b)}function l(y,b,w,x){var S=w.type;return S===$u?d(y,b,w.props.children,x,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ia&&Q$(S)===b.type)?(x=i(b,w.props),x.ref=Zh(y,b,w),x.return=y,x):(x=ay(w.type,w.key,w.props,null,y.mode,x),x.ref=Zh(y,b,w),x.return=y,x)}function u(y,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=wx(w,y.mode,x),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function d(y,b,w,x,S){return b===null||b.tag!==7?(b=ac(w,y.mode,x,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function h(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=xx(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cg:return w=ay(b.type,b.key,b.props,null,y.mode,w),w.ref=Zh(y,null,b),w.return=y,w;case Du:return b=wx(b,y.mode,w),b.return=y,b;case ia:var x=b._init;return h(y,x(b._payload),w)}if(gf(b)||Gh(b))return b=ac(b,y.mode,w,null),b.return=y,b;xg(y,b)}return null}function f(y,b,w,x){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case cg:return w.key===S?l(y,b,w,x):null;case Du:return w.key===S?u(y,b,w,x):null;case ia:return S=w._init,f(y,b,S(w._payload),x)}if(gf(w)||Gh(w))return S!==null?null:d(y,b,w,x,null);xg(y,w)}return null}function p(y,b,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(b,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cg:return y=y.get(x.key===null?w:x.key)||null,l(b,y,x,S);case Du:return y=y.get(x.key===null?w:x.key)||null,u(b,y,x,S);case ia:var _=x._init;return p(y,b,w,_(x._payload),S)}if(gf(x)||Gh(x))return y=y.get(w)||null,d(b,y,x,S,null);xg(b,x)}return null}function m(y,b,w,x){for(var S=null,_=null,E=b,N=b=0,C=null;E!==null&&N<w.length;N++){E.index>N?(C=E,E=null):C=E.sibling;var j=f(y,E,w[N],x);if(j===null){E===null&&(E=C);break}t&&E&&j.alternate===null&&e(y,E),b=s(j,b,N),_===null?S=j:_.sibling=j,_=j,E=C}if(N===w.length)return r(y,E),Lt&&Rl(y,N),S;if(E===null){for(;N<w.length;N++)E=h(y,w[N],x),E!==null&&(b=s(E,b,N),_===null?S=E:_.sibling=E,_=E);return Lt&&Rl(y,N),S}for(E=n(y,E);N<w.length;N++)C=p(E,y,N,w[N],x),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?N:C.key),b=s(C,b,N),_===null?S=C:_.sibling=C,_=C);return t&&E.forEach(function(T){return e(y,T)}),Lt&&Rl(y,N),S}function g(y,b,w,x){var S=Gh(w);if(typeof S!="function")throw Error(re(150));if(w=S.call(w),w==null)throw Error(re(151));for(var _=S=null,E=b,N=b=0,C=null,j=w.next();E!==null&&!j.done;N++,j=w.next()){E.index>N?(C=E,E=null):C=E.sibling;var T=f(y,E,j.value,x);if(T===null){E===null&&(E=C);break}t&&E&&T.alternate===null&&e(y,E),b=s(T,b,N),_===null?S=T:_.sibling=T,_=T,E=C}if(j.done)return r(y,E),Lt&&Rl(y,N),S;if(E===null){for(;!j.done;N++,j=w.next())j=h(y,j.value,x),j!==null&&(b=s(j,b,N),_===null?S=j:_.sibling=j,_=j);return Lt&&Rl(y,N),S}for(E=n(y,E);!j.done;N++,j=w.next())j=p(E,y,N,j.value,x),j!==null&&(t&&j.alternate!==null&&E.delete(j.key===null?N:j.key),b=s(j,b,N),_===null?S=j:_.sibling=j,_=j);return t&&E.forEach(function(P){return e(y,P)}),Lt&&Rl(y,N),S}function v(y,b,w,x){if(typeof w=="object"&&w!==null&&w.type===$u&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case cg:e:{for(var S=w.key,_=b;_!==null;){if(_.key===S){if(S=w.type,S===$u){if(_.tag===7){r(y,_.sibling),b=i(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ia&&Q$(S)===_.type){r(y,_.sibling),b=i(_,w.props),b.ref=Zh(y,_,w),b.return=y,y=b;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===$u?(b=ac(w.props.children,y.mode,x,w.key),b.return=y,y=b):(x=ay(w.type,w.key,w.props,null,y.mode,x),x.ref=Zh(y,b,w),x.return=y,y=x)}return o(y);case Du:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else e(y,b);b=b.sibling}b=wx(w,y.mode,x),b.return=y,y=b}return o(y);case ia:return _=w._init,v(y,b,_(w._payload),x)}if(gf(w))return m(y,b,w,x);if(Gh(w))return g(y,b,w,x);xg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(y,b.sibling),b=i(b,w),b.return=y,y=b):(r(y,b),b=xx(w,y.mode,x),b.return=y,y=b),o(y)):r(y,b)}return v}var Ad=KZ(!0),GZ=KZ(!1),Dy=dl(null),$y=null,Uu=null,FR=null;function qR(){FR=Uu=$y=null}function LR(t){var e=Dy.current;$t(Dy),t._currentValue=e}function vP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function od(t,e){$y=t,FR=Uu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Hi(t){var e=t._currentValue;if(FR!==t)if(t={context:t,memoizedValue:e,next:null},Uu===null){if($y===null)throw Error(re(308));Uu=t,$y.dependencies={lanes:0,firstContext:t}}else Uu=Uu.next=t;return e}var Fl=null;function BR(t){Fl===null?Fl=[t]:Fl.push(t)}function YZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,BR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ro(t,n)}function Ro(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var sa=!1;function zR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fa(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ro(t,r)}return i=n.interleaved,i===null?(e.next=e,BR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ro(t,r)}function ty(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,CR(t,r)}}function X$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Fy(t,e,r,n){var i=t.updateQueue;sa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Kt({},h,f);break e;case 2:sa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);_c|=o,t.lanes=o,t.memoizedState=h}}function J$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(re(191,i));i.call(n)}}}var im={},$s=dl(im),cp=dl(im),up=dl(im);function ql(t){if(t===im)throw Error(re(174));return t}function VR(t,e){switch(Rt(up,e),Rt(cp,t),Rt($s,im),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:JO(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=JO(e,t)}$t($s),Rt($s,e)}function Dd(){$t($s),$t(cp),$t(up)}function XZ(t){ql(up.current);var e=ql($s.current),r=JO(e,t.type);e!==r&&(Rt(cp,t),Rt($s,r))}function WR(t){cp.current===t&&($t($s),$t(cp))}var Vt=dl(0);function qy(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var px=[];function UR(){for(var t=0;t<px.length;t++)px[t]._workInProgressVersionPrimary=null;px.length=0}var ry=Fo.ReactCurrentDispatcher,mx=Fo.ReactCurrentBatchConfig,Sc=0,Ut=null,Tr=null,$r=null,Ly=!1,Pf=!1,dp=0,nde=0;function ln(){throw Error(re(321))}function HR(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ps(t[r],e[r]))return!1;return!0}function KR(t,e,r,n,i,s){if(Sc=s,Ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ry.current=t===null||t.memoizedState===null?ade:lde,t=r(n,i),Pf){s=0;do{if(Pf=!1,dp=0,25<=s)throw Error(re(301));s+=1,$r=Tr=null,e.updateQueue=null,ry.current=cde,t=r(n,i)}while(Pf)}if(ry.current=By,e=Tr!==null&&Tr.next!==null,Sc=0,$r=Tr=Ut=null,Ly=!1,e)throw Error(re(300));return t}function GR(){var t=dp!==0;return dp=0,t}function _s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?Ut.memoizedState=$r=t:$r=$r.next=t,$r}function Ki(){if(Tr===null){var t=Ut.alternate;t=t!==null?t.memoizedState:null}else t=Tr.next;var e=$r===null?Ut.memoizedState:$r.next;if(e!==null)$r=e,Tr=t;else{if(t===null)throw Error(re(310));Tr=t,t={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},$r===null?Ut.memoizedState=$r=t:$r=$r.next=t}return $r}function hp(t,e){return typeof e=="function"?e(t):e}function gx(t){var e=Ki(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=Tr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Sc&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Ut.lanes|=d,_c|=d}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,ps(n,e.memoizedState)||(Yn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Ut.lanes|=s,_c|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function yx(t){var e=Ki(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ps(s,e.memoizedState)||(Yn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function JZ(){}function ZZ(t,e){var r=Ut,n=Ki(),i=e(),s=!ps(n.memoizedState,i);if(s&&(n.memoizedState=i,Yn=!0),n=n.queue,YR(ree.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||$r!==null&&$r.memoizedState.tag&1){if(r.flags|=2048,fp(9,tee.bind(null,r,n,i,e),void 0,null),Lr===null)throw Error(re(349));Sc&30||eee(r,e,i)}return i}function eee(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ut.updateQueue,e===null?(e={lastEffect:null,stores:null},Ut.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function tee(t,e,r,n){e.value=r,e.getSnapshot=n,nee(e)&&iee(t)}function ree(t,e,r){return r(function(){nee(e)&&iee(t)})}function nee(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ps(t,r)}catch{return!0}}function iee(t){var e=Ro(t,1);e!==null&&fs(e,t,1,-1)}function Z$(t){var e=_s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hp,lastRenderedState:t},e.queue=t,t=t.dispatch=ode.bind(null,Ut,t),[e.memoizedState,t]}function fp(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ut.updateQueue,e===null?(e={lastEffect:null,stores:null},Ut.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function see(){return Ki().memoizedState}function ny(t,e,r,n){var i=_s();Ut.flags|=t,i.memoizedState=fp(1|e,r,void 0,n===void 0?null:n)}function y0(t,e,r,n){var i=Ki();n=n===void 0?null:n;var s=void 0;if(Tr!==null){var o=Tr.memoizedState;if(s=o.destroy,n!==null&&HR(n,o.deps)){i.memoizedState=fp(e,r,s,n);return}}Ut.flags|=t,i.memoizedState=fp(1|e,r,s,n)}function e4(t,e){return ny(8390656,8,t,e)}function YR(t,e){return y0(2048,8,t,e)}function oee(t,e){return y0(4,2,t,e)}function aee(t,e){return y0(4,4,t,e)}function lee(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cee(t,e,r){return r=r!=null?r.concat([t]):null,y0(4,4,lee.bind(null,e,t),r)}function QR(){}function uee(t,e){var r=Ki();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&HR(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function dee(t,e){var r=Ki();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&HR(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function hee(t,e,r){return Sc&21?(ps(r,e)||(r=yZ(),Ut.lanes|=r,_c|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=r)}function ide(t,e){var r=wt;wt=r!==0&&4>r?r:4,t(!0);var n=mx.transition;mx.transition={};try{t(!1),e()}finally{wt=r,mx.transition=n}}function fee(){return Ki().memoizedState}function sde(t,e,r){var n=La(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},pee(t))mee(e,r);else if(r=YZ(t,e,r,n),r!==null){var i=Pn();fs(r,t,n,i),gee(r,e,n)}}function ode(t,e,r){var n=La(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(pee(t))mee(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,ps(a,o)){var l=e.interleaved;l===null?(i.next=i,BR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=YZ(t,e,i,n),r!==null&&(i=Pn(),fs(r,t,n,i),gee(r,e,n))}}function pee(t){var e=t.alternate;return t===Ut||e!==null&&e===Ut}function mee(t,e){Pf=Ly=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function gee(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,CR(t,r)}}var By={readContext:Hi,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},ade={readContext:Hi,useCallback:function(t,e){return _s().memoizedState=[t,e===void 0?null:e],t},useContext:Hi,useEffect:e4,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ny(4194308,4,lee.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ny(4194308,4,t,e)},useInsertionEffect:function(t,e){return ny(4,2,t,e)},useMemo:function(t,e){var r=_s();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_s();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=sde.bind(null,Ut,t),[n.memoizedState,t]},useRef:function(t){var e=_s();return t={current:t},e.memoizedState=t},useState:Z$,useDebugValue:QR,useDeferredValue:function(t){return _s().memoizedState=t},useTransition:function(){var t=Z$(!1),e=t[0];return t=ide.bind(null,t[1]),_s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ut,i=_s();if(Lt){if(r===void 0)throw Error(re(407));r=r()}else{if(r=e(),Lr===null)throw Error(re(349));Sc&30||eee(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,e4(ree.bind(null,n,s,t),[t]),n.flags|=2048,fp(9,tee.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=_s(),e=Lr.identifierPrefix;if(Lt){var r=mo,n=po;r=(n&~(1<<32-hs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=dp++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=nde++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lde={readContext:Hi,useCallback:uee,useContext:Hi,useEffect:YR,useImperativeHandle:cee,useInsertionEffect:oee,useLayoutEffect:aee,useMemo:dee,useReducer:gx,useRef:see,useState:function(){return gx(hp)},useDebugValue:QR,useDeferredValue:function(t){var e=Ki();return hee(e,Tr.memoizedState,t)},useTransition:function(){var t=gx(hp)[0],e=Ki().memoizedState;return[t,e]},useMutableSource:JZ,useSyncExternalStore:ZZ,useId:fee,unstable_isNewReconciler:!1},cde={readContext:Hi,useCallback:uee,useContext:Hi,useEffect:YR,useImperativeHandle:cee,useInsertionEffect:oee,useLayoutEffect:aee,useMemo:dee,useReducer:yx,useRef:see,useState:function(){return yx(hp)},useDebugValue:QR,useDeferredValue:function(t){var e=Ki();return Tr===null?e.memoizedState=t:hee(e,Tr.memoizedState,t)},useTransition:function(){var t=yx(hp)[0],e=Ki().memoizedState;return[t,e]},useMutableSource:JZ,useSyncExternalStore:ZZ,useId:fee,unstable_isNewReconciler:!1};function ts(t,e){if(t&&t.defaultProps){e=Kt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function bP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Kt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var v0={isMounted:function(t){return(t=t._reactInternals)?Hc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Pn(),i=La(t),s=bo(n,i);s.payload=e,r!=null&&(s.callback=r),e=Fa(t,s,i),e!==null&&(fs(e,t,i,n),ty(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Pn(),i=La(t),s=bo(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Fa(t,s,i),e!==null&&(fs(e,t,i,n),ty(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Pn(),n=La(t),i=bo(r,n);i.tag=2,e!=null&&(i.callback=e),e=Fa(t,i,n),e!==null&&(fs(e,t,n,r),ty(e,t,n))}};function t4(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!sp(r,n)||!sp(i,s):!0}function yee(t,e,r){var n=!1,i=rl,s=e.contextType;return typeof s=="object"&&s!==null?s=Hi(s):(i=Jn(e)?xc:yn.current,n=e.contextTypes,s=(n=n!=null)?Rd(t,i):rl),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=v0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function r4(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&v0.enqueueReplaceState(e,e.state,null)}function xP(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},zR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Hi(s):(s=Jn(e)?xc:yn.current,i.context=Rd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(bP(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&v0.enqueueReplaceState(i,i.state,null),Fy(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $d(t,e){try{var r="",n=e;do r+=$ce(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function vx(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function wP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ude=typeof WeakMap=="function"?WeakMap:Map;function vee(t,e,r){r=bo(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Vy||(Vy=!0,PP=n),wP(t,e)},r}function bee(t,e,r){r=bo(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){wP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){wP(t,e),typeof n!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function n4(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new ude;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Ede.bind(null,t,e,r),e.then(t,t))}function i4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function s4(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=bo(-1,1),e.tag=2,Fa(r,e,1))),r.lanes|=1),t)}var dde=Fo.ReactCurrentOwner,Yn=!1;function _n(t,e,r,n){e.child=t===null?GZ(e,null,r,n):Ad(e,t.child,r,n)}function o4(t,e,r,n,i){r=r.render;var s=e.ref;return od(e,i),n=KR(t,e,r,n,s,i),r=GR(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mo(t,e,i)):(Lt&&r&&AR(e),e.flags|=1,_n(t,e,n,i),e.child)}function a4(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!iM(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,xee(t,e,s,n,i)):(t=ay(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:sp,r(o,n)&&t.ref===e.ref)return Mo(t,e,i)}return e.flags|=1,t=Ba(s,n),t.ref=e.ref,t.return=e,e.child=t}function xee(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(sp(s,n)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,Mo(t,e,i)}return SP(t,e,r,n,i)}function wee(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Ku,di),di|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(Ku,di),di|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Rt(Ku,di),di|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Rt(Ku,di),di|=n;return _n(t,e,i,r),e.child}function See(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function SP(t,e,r,n,i){var s=Jn(r)?xc:yn.current;return s=Rd(e,s),od(e,i),r=KR(t,e,r,n,s,i),n=GR(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mo(t,e,i)):(Lt&&n&&AR(e),e.flags|=1,_n(t,e,r,i),e.child)}function l4(t,e,r,n,i){if(Jn(r)){var s=!0;Ry(e)}else s=!1;if(od(e,i),e.stateNode===null)iy(t,e),yee(e,r,n),xP(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Hi(u):(u=Jn(r)?xc:yn.current,u=Rd(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&r4(e,o,n,u),sa=!1;var f=e.memoizedState;o.state=f,Fy(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Xn.current||sa?(typeof d=="function"&&(bP(e,r,d,n),l=e.memoizedState),(a=sa||t4(e,r,a,n,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,QZ(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ts(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Hi(l):(l=Jn(r)?xc:yn.current,l=Rd(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&r4(e,o,n,l),sa=!1,f=e.memoizedState,o.state=f,Fy(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Xn.current||sa?(typeof p=="function"&&(bP(e,r,p,n),m=e.memoizedState),(u=sa||t4(e,r,u,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return _P(t,e,r,n,s,i)}function _P(t,e,r,n,i,s){See(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&K$(e,r,!1),Mo(t,e,s);n=e.stateNode,dde.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ad(e,t.child,null,s),e.child=Ad(e,null,a,s)):_n(t,e,a,s),e.memoizedState=n.state,i&&K$(e,r,!0),e.child}function _ee(t){var e=t.stateNode;e.pendingContext?H$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&H$(t,e.context,!1),VR(t,e.containerInfo)}function c4(t,e,r,n,i){return Md(),$R(i),e.flags|=256,_n(t,e,r,n),e.child}var EP={dehydrated:null,treeContext:null,retryLane:0};function NP(t){return{baseLanes:t,cachePool:null,transitions:null}}function Eee(t,e,r){var n=e.pendingProps,i=Vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Rt(Vt,i&1),t===null)return yP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=w0(o,n,0,null),t=ac(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=NP(r),e.memoizedState=EP,t):XR(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hde(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ba(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ba(a,s):(s=ac(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?NP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=EP,n}return s=t.child,t=s.sibling,n=Ba(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function XR(t,e){return e=w0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wg(t,e,r,n){return n!==null&&$R(n),Ad(e,t.child,null,r),t=XR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hde(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=vx(Error(re(422))),wg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=w0({mode:"visible",children:n.children},i,0,null),s=ac(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Ad(e,t.child,null,o),e.child.memoizedState=NP(o),e.memoizedState=EP,s);if(!(e.mode&1))return wg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(re(419)),n=vx(s,n,void 0),wg(t,e,o,n)}if(a=(o&t.childLanes)!==0,Yn||a){if(n=Lr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ro(t,i),fs(n,t,i,-1))}return nM(),n=vx(Error(re(421))),wg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Nde.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,mi=$a(i.nextSibling),gi=e,Lt=!0,ss=null,t!==null&&(Ai[Di++]=po,Ai[Di++]=mo,Ai[Di++]=wc,po=t.id,mo=t.overflow,wc=e),e=XR(e,n.children),e.flags|=4096,e)}function u4(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),vP(t.return,e,r)}function bx(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Nee(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(_n(t,e,n.children,r),n=Vt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&u4(t,r,e);else if(t.tag===19)u4(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Rt(Vt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&qy(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),bx(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qy(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}bx(e,!0,r,null,s);break;case"together":bx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function iy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mo(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),_c|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,r=Ba(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ba(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function fde(t,e,r){switch(e.tag){case 3:_ee(e),Md();break;case 5:XZ(e);break;case 1:Jn(e.type)&&Ry(e);break;case 4:VR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Rt(Dy,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Rt(Vt,Vt.current&1),e.flags|=128,null):r&e.child.childLanes?Eee(t,e,r):(Rt(Vt,Vt.current&1),t=Mo(t,e,r),t!==null?t.sibling:null);Rt(Vt,Vt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Nee(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Rt(Vt,Vt.current),n)break;return null;case 22:case 23:return e.lanes=0,wee(t,e,r)}return Mo(t,e,r)}var kee,kP,Cee,jee;kee=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};kP=function(){};Cee=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ql($s.current);var s=null;switch(r){case"input":i=GO(t,i),n=GO(t,n),s=[];break;case"select":i=Kt({},i,{value:void 0}),n=Kt({},n,{value:void 0}),s=[];break;case"textarea":i=XO(t,i),n=XO(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Py)}ZO(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Mt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};jee=function(t,e,r,n){r!==n&&(e.flags|=4)};function ef(t,e){if(!Lt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function pde(t,e,r){var n=e.pendingProps;switch(DR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(e),null;case 1:return Jn(e.type)&&Iy(),cn(e),null;case 3:return n=e.stateNode,Dd(),$t(Xn),$t(yn),UR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(bg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ss!==null&&(MP(ss),ss=null))),kP(t,e),cn(e),null;case 5:WR(e);var i=ql(up.current);if(r=e.type,t!==null&&e.stateNode!=null)Cee(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(re(166));return cn(e),null}if(t=ql($s.current),bg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ps]=e,n[lp]=s,t=(e.mode&1)!==0,r){case"dialog":Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":case"embed":Mt("load",n);break;case"video":case"audio":for(i=0;i<vf.length;i++)Mt(vf[i],n);break;case"source":Mt("error",n);break;case"img":case"image":case"link":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"input":b$(n,s),Mt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Mt("invalid",n);break;case"textarea":w$(n,s),Mt("invalid",n)}ZO(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&vg(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&vg(n.textContent,a,t),i=["children",""+a]):Jf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Mt("scroll",n)}switch(r){case"input":ug(n),x$(n,s,!0);break;case"textarea":ug(n),S$(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Py)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rZ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ps]=e,t[lp]=n,kee(t,e,!1,!1),e.stateNode=t;e:{switch(o=eP(r,n),r){case"dialog":Mt("cancel",t),Mt("close",t),i=n;break;case"iframe":case"object":case"embed":Mt("load",t),i=n;break;case"video":case"audio":for(i=0;i<vf.length;i++)Mt(vf[i],t);i=n;break;case"source":Mt("error",t),i=n;break;case"img":case"image":case"link":Mt("error",t),Mt("load",t),i=n;break;case"details":Mt("toggle",t),i=n;break;case"input":b$(t,n),i=GO(t,n),Mt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Kt({},n,{value:void 0}),Mt("invalid",t);break;case"textarea":w$(t,n),i=XO(t,n),Mt("invalid",t);break;default:i=n}ZO(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?sZ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nZ(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Zf(t,l):typeof l=="number"&&Zf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Mt("scroll",t):l!=null&&wR(t,s,l,o))}switch(r){case"input":ug(t),x$(t,n,!1);break;case"textarea":ug(t),S$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+tl(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?rd(t,!!n.multiple,s,!1):n.defaultValue!=null&&rd(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Py)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cn(e),null;case 6:if(t&&e.stateNode!=null)jee(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(re(166));if(r=ql(up.current),ql($s.current),bg(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ps]=e,(s=n.nodeValue!==r)&&(t=gi,t!==null))switch(t.tag){case 3:vg(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vg(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ps]=e,e.stateNode=n}return cn(e),null;case 13:if($t(Vt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lt&&mi!==null&&e.mode&1&&!(e.flags&128))HZ(),Md(),e.flags|=98560,s=!1;else if(s=bg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(re(317));s[Ps]=e}else Md(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cn(e),s=!1}else ss!==null&&(MP(ss),ss=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Vt.current&1?Or===0&&(Or=3):nM())),e.updateQueue!==null&&(e.flags|=4),cn(e),null);case 4:return Dd(),kP(t,e),t===null&&op(e.stateNode.containerInfo),cn(e),null;case 10:return LR(e.type._context),cn(e),null;case 17:return Jn(e.type)&&Iy(),cn(e),null;case 19:if($t(Vt),s=e.memoizedState,s===null)return cn(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)ef(s,!1);else{if(Or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qy(t),o!==null){for(e.flags|=128,ef(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Rt(Vt,Vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&ur()>Fd&&(e.flags|=128,n=!0,ef(s,!1),e.lanes=4194304)}else{if(!n)if(t=qy(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ef(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Lt)return cn(e),null}else 2*ur()-s.renderingStartTime>Fd&&r!==1073741824&&(e.flags|=128,n=!0,ef(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ur(),e.sibling=null,r=Vt.current,Rt(Vt,n?r&1|2:r&1),e):(cn(e),null);case 22:case 23:return rM(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?di&1073741824&&(cn(e),e.subtreeFlags&6&&(e.flags|=8192)):cn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function mde(t,e){switch(DR(e),e.tag){case 1:return Jn(e.type)&&Iy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dd(),$t(Xn),$t(yn),UR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return WR(e),null;case 13:if($t(Vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Md()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(Vt),null;case 4:return Dd(),null;case 10:return LR(e.type._context),null;case 22:case 23:return rM(),null;case 24:return null;default:return null}}var Sg=!1,fn=!1,gde=typeof WeakSet=="function"?WeakSet:Set,we=null;function Hu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tr(t,e,n)}else r.current=null}function CP(t,e,r){try{r()}catch(n){tr(t,e,n)}}var d4=!1;function yde(t,e){if(uP=jy,t=RZ(),MR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++u===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(dP={focusedElem:t,selectionRange:r},jy=!1,we=e;we!==null;)if(e=we,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,we=t;else for(;we!==null;){e=we;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:ts(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(x){tr(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,we=t;break}we=e.return}return m=d4,d4=!1,m}function If(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&CP(e,r,s)}i=i.next}while(i!==n)}}function b0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function jP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Tee(t){var e=t.alternate;e!==null&&(t.alternate=null,Tee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ps],delete e[lp],delete e[pP],delete e[Zue],delete e[ede])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Oee(t){return t.tag===5||t.tag===3||t.tag===4}function h4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Oee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function TP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Py));else if(n!==4&&(t=t.child,t!==null))for(TP(t,e,r),t=t.sibling;t!==null;)TP(t,e,r),t=t.sibling}function OP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(OP(t,e,r),t=t.sibling;t!==null;)OP(t,e,r),t=t.sibling}var Jr=null,is=!1;function Qo(t,e,r){for(r=r.child;r!==null;)Pee(t,e,r),r=r.sibling}function Pee(t,e,r){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(d0,r)}catch{}switch(r.tag){case 5:fn||Hu(r,e);case 6:var n=Jr,i=is;Jr=null,Qo(t,e,r),Jr=n,is=i,Jr!==null&&(is?(t=Jr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jr.removeChild(r.stateNode));break;case 18:Jr!==null&&(is?(t=Jr,r=r.stateNode,t.nodeType===8?hx(t.parentNode,r):t.nodeType===1&&hx(t,r),np(t)):hx(Jr,r.stateNode));break;case 4:n=Jr,i=is,Jr=r.stateNode.containerInfo,is=!0,Qo(t,e,r),Jr=n,is=i;break;case 0:case 11:case 14:case 15:if(!fn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&CP(r,e,o),i=i.next}while(i!==n)}Qo(t,e,r);break;case 1:if(!fn&&(Hu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){tr(r,e,a)}Qo(t,e,r);break;case 21:Qo(t,e,r);break;case 22:r.mode&1?(fn=(n=fn)||r.memoizedState!==null,Qo(t,e,r),fn=n):Qo(t,e,r);break;default:Qo(t,e,r)}}function f4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new gde),e.forEach(function(n){var i=kde.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Zi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jr=a.stateNode,is=!1;break e;case 3:Jr=a.stateNode.containerInfo,is=!0;break e;case 4:Jr=a.stateNode.containerInfo,is=!0;break e}a=a.return}if(Jr===null)throw Error(re(160));Pee(s,o,i),Jr=null,is=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){tr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Iee(e,t),e=e.sibling}function Iee(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zi(e,t),ws(t),n&4){try{If(3,t,t.return),b0(3,t)}catch(g){tr(t,t.return,g)}try{If(5,t,t.return)}catch(g){tr(t,t.return,g)}}break;case 1:Zi(e,t),ws(t),n&512&&r!==null&&Hu(r,r.return);break;case 5:if(Zi(e,t),ws(t),n&512&&r!==null&&Hu(r,r.return),t.flags&32){var i=t.stateNode;try{Zf(i,"")}catch(g){tr(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&eZ(i,s),eP(a,o);var u=eP(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?sZ(i,h):d==="dangerouslySetInnerHTML"?nZ(i,h):d==="children"?Zf(i,h):wR(i,d,h,u)}switch(a){case"input":YO(i,s);break;case"textarea":tZ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?rd(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?rd(i,!!s.multiple,s.defaultValue,!0):rd(i,!!s.multiple,s.multiple?[]:"",!1))}i[lp]=s}catch(g){tr(t,t.return,g)}}break;case 6:if(Zi(e,t),ws(t),n&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){tr(t,t.return,g)}}break;case 3:if(Zi(e,t),ws(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{np(e.containerInfo)}catch(g){tr(t,t.return,g)}break;case 4:Zi(e,t),ws(t);break;case 13:Zi(e,t),ws(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(eM=ur())),n&4&&f4(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(fn=(u=fn)||d,Zi(e,t),fn=u):Zi(e,t),ws(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(we=t,d=t.child;d!==null;){for(h=we=d;we!==null;){switch(f=we,p=f.child,f.tag){case 0:case 11:case 14:case 15:If(4,f,f.return);break;case 1:Hu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){tr(n,r,g)}}break;case 5:Hu(f,f.return);break;case 22:if(f.memoizedState!==null){m4(h);continue}}p!==null?(p.return=f,we=p):m4(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=iZ("display",o))}catch(g){tr(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){tr(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zi(e,t),ws(t),n&4&&f4(t);break;case 21:break;default:Zi(e,t),ws(t)}}function ws(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Oee(r)){var n=r;break e}r=r.return}throw Error(re(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Zf(i,""),n.flags&=-33);var s=h4(t);OP(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=h4(t);TP(t,a,o);break;default:throw Error(re(161))}}catch(l){tr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vde(t,e,r){we=t,Ree(t)}function Ree(t,e,r){for(var n=(t.mode&1)!==0;we!==null;){var i=we,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Sg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||fn;a=Sg;var u=fn;if(Sg=o,(fn=l)&&!u)for(we=i;we!==null;)o=we,l=o.child,o.tag===22&&o.memoizedState!==null?g4(i):l!==null?(l.return=o,we=l):g4(i);for(;s!==null;)we=s,Ree(s),s=s.sibling;we=i,Sg=a,fn=u}p4(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,we=s):p4(t)}}function p4(t){for(;we!==null;){var e=we;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fn||b0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!fn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ts(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&J$(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}J$(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&np(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}fn||e.flags&512&&jP(e)}catch(f){tr(e,e.return,f)}}if(e===t){we=null;break}if(r=e.sibling,r!==null){r.return=e.return,we=r;break}we=e.return}}function m4(t){for(;we!==null;){var e=we;if(e===t){we=null;break}var r=e.sibling;if(r!==null){r.return=e.return,we=r;break}we=e.return}}function g4(t){for(;we!==null;){var e=we;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{b0(4,e)}catch(l){tr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){tr(e,i,l)}}var s=e.return;try{jP(e)}catch(l){tr(e,s,l)}break;case 5:var o=e.return;try{jP(e)}catch(l){tr(e,o,l)}}}catch(l){tr(e,e.return,l)}if(e===t){we=null;break}var a=e.sibling;if(a!==null){a.return=e.return,we=a;break}we=e.return}}var bde=Math.ceil,zy=Fo.ReactCurrentDispatcher,JR=Fo.ReactCurrentOwner,Bi=Fo.ReactCurrentBatchConfig,pt=0,Lr=null,mr=null,rn=0,di=0,Ku=dl(0),Or=0,pp=null,_c=0,x0=0,ZR=0,Rf=null,Hn=null,eM=0,Fd=1/0,oo=null,Vy=!1,PP=null,qa=null,_g=!1,ja=null,Wy=0,Mf=0,IP=null,sy=-1,oy=0;function Pn(){return pt&6?ur():sy!==-1?sy:sy=ur()}function La(t){return t.mode&1?pt&2&&rn!==0?rn&-rn:rde.transition!==null?(oy===0&&(oy=yZ()),oy):(t=wt,t!==0||(t=window.event,t=t===void 0?16:EZ(t.type)),t):1}function fs(t,e,r,n){if(50<Mf)throw Mf=0,IP=null,Error(re(185));tm(t,r,n),(!(pt&2)||t!==Lr)&&(t===Lr&&(!(pt&2)&&(x0|=r),Or===4&&fa(t,rn)),Zn(t,n),r===1&&pt===0&&!(e.mode&1)&&(Fd=ur()+500,g0&&hl()))}function Zn(t,e){var r=t.callbackNode;rue(t,e);var n=Cy(t,t===Lr?rn:0);if(n===0)r!==null&&N$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&N$(r),e===1)t.tag===0?tde(y4.bind(null,t)):VZ(y4.bind(null,t)),Xue(function(){!(pt&6)&&hl()}),r=null;else{switch(vZ(n)){case 1:r=kR;break;case 4:r=mZ;break;case 16:r=ky;break;case 536870912:r=gZ;break;default:r=ky}r=Bee(r,Mee.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Mee(t,e){if(sy=-1,oy=0,pt&6)throw Error(re(327));var r=t.callbackNode;if(ad()&&t.callbackNode!==r)return null;var n=Cy(t,t===Lr?rn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Uy(t,n);else{e=n;var i=pt;pt|=2;var s=Dee();(Lr!==t||rn!==e)&&(oo=null,Fd=ur()+500,oc(t,e));do try{Sde();break}catch(a){Aee(t,a)}while(!0);qR(),zy.current=s,pt=i,mr!==null?e=0:(Lr=null,rn=0,e=Or)}if(e!==0){if(e===2&&(i=sP(t),i!==0&&(n=i,e=RP(t,i))),e===1)throw r=pp,oc(t,0),fa(t,n),Zn(t,ur()),r;if(e===6)fa(t,n);else{if(i=t.current.alternate,!(n&30)&&!xde(i)&&(e=Uy(t,n),e===2&&(s=sP(t),s!==0&&(n=s,e=RP(t,s))),e===1))throw r=pp,oc(t,0),fa(t,n),Zn(t,ur()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(re(345));case 2:Ml(t,Hn,oo);break;case 3:if(fa(t,n),(n&130023424)===n&&(e=eM+500-ur(),10<e)){if(Cy(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Pn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fP(Ml.bind(null,t,Hn,oo),e);break}Ml(t,Hn,oo);break;case 4:if(fa(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-hs(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=ur()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bde(n/1960))-n,10<n){t.timeoutHandle=fP(Ml.bind(null,t,Hn,oo),n);break}Ml(t,Hn,oo);break;case 5:Ml(t,Hn,oo);break;default:throw Error(re(329))}}}return Zn(t,ur()),t.callbackNode===r?Mee.bind(null,t):null}function RP(t,e){var r=Rf;return t.current.memoizedState.isDehydrated&&(oc(t,e).flags|=256),t=Uy(t,e),t!==2&&(e=Hn,Hn=r,e!==null&&MP(e)),t}function MP(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function xde(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!ps(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fa(t,e){for(e&=~ZR,e&=~x0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-hs(e),n=1<<r;t[r]=-1,e&=~n}}function y4(t){if(pt&6)throw Error(re(327));ad();var e=Cy(t,0);if(!(e&1))return Zn(t,ur()),null;var r=Uy(t,e);if(t.tag!==0&&r===2){var n=sP(t);n!==0&&(e=n,r=RP(t,n))}if(r===1)throw r=pp,oc(t,0),fa(t,e),Zn(t,ur()),r;if(r===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ml(t,Hn,oo),Zn(t,ur()),null}function tM(t,e){var r=pt;pt|=1;try{return t(e)}finally{pt=r,pt===0&&(Fd=ur()+500,g0&&hl())}}function Ec(t){ja!==null&&ja.tag===0&&!(pt&6)&&ad();var e=pt;pt|=1;var r=Bi.transition,n=wt;try{if(Bi.transition=null,wt=1,t)return t()}finally{wt=n,Bi.transition=r,pt=e,!(pt&6)&&hl()}}function rM(){di=Ku.current,$t(Ku)}function oc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Que(r)),mr!==null)for(r=mr.return;r!==null;){var n=r;switch(DR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Iy();break;case 3:Dd(),$t(Xn),$t(yn),UR();break;case 5:WR(n);break;case 4:Dd();break;case 13:$t(Vt);break;case 19:$t(Vt);break;case 10:LR(n.type._context);break;case 22:case 23:rM()}r=r.return}if(Lr=t,mr=t=Ba(t.current,null),rn=di=e,Or=0,pp=null,ZR=x0=_c=0,Hn=Rf=null,Fl!==null){for(e=0;e<Fl.length;e++)if(r=Fl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Fl=null}return t}function Aee(t,e){do{var r=mr;try{if(qR(),ry.current=By,Ly){for(var n=Ut.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ly=!1}if(Sc=0,$r=Tr=Ut=null,Pf=!1,dp=0,JR.current=null,r===null||r.return===null){Or=1,pp=e,mr=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=rn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=i4(o);if(p!==null){p.flags&=-257,s4(p,o,a,s,e),p.mode&1&&n4(s,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){n4(s,u,e),nM();break e}l=Error(re(426))}}else if(Lt&&a.mode&1){var v=i4(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),s4(v,o,a,s,e),$R($d(l,a));break e}}s=l=$d(l,a),Or!==4&&(Or=2),Rf===null?Rf=[s]:Rf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=vee(s,l,e);X$(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qa===null||!qa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=bee(s,a,e);X$(s,x);break e}}s=s.return}while(s!==null)}Fee(r)}catch(S){e=S,mr===r&&r!==null&&(mr=r=r.return);continue}break}while(!0)}function Dee(){var t=zy.current;return zy.current=By,t===null?By:t}function nM(){(Or===0||Or===3||Or===2)&&(Or=4),Lr===null||!(_c&268435455)&&!(x0&268435455)||fa(Lr,rn)}function Uy(t,e){var r=pt;pt|=2;var n=Dee();(Lr!==t||rn!==e)&&(oo=null,oc(t,e));do try{wde();break}catch(i){Aee(t,i)}while(!0);if(qR(),pt=r,zy.current=n,mr!==null)throw Error(re(261));return Lr=null,rn=0,Or}function wde(){for(;mr!==null;)$ee(mr)}function Sde(){for(;mr!==null&&!Kce();)$ee(mr)}function $ee(t){var e=Lee(t.alternate,t,di);t.memoizedProps=t.pendingProps,e===null?Fee(t):mr=e,JR.current=null}function Fee(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=mde(r,e),r!==null){r.flags&=32767,mr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Or=6,mr=null;return}}else if(r=pde(r,e,di),r!==null){mr=r;return}if(e=e.sibling,e!==null){mr=e;return}mr=e=t}while(e!==null);Or===0&&(Or=5)}function Ml(t,e,r){var n=wt,i=Bi.transition;try{Bi.transition=null,wt=1,_de(t,e,r,n)}finally{Bi.transition=i,wt=n}return null}function _de(t,e,r,n){do ad();while(ja!==null);if(pt&6)throw Error(re(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(nue(t,s),t===Lr&&(mr=Lr=null,rn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_g||(_g=!0,Bee(ky,function(){return ad(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Bi.transition,Bi.transition=null;var o=wt;wt=1;var a=pt;pt|=4,JR.current=null,yde(t,r),Iee(r,t),Vue(dP),jy=!!uP,dP=uP=null,t.current=r,vde(r),Gce(),pt=a,wt=o,Bi.transition=s}else t.current=r;if(_g&&(_g=!1,ja=t,Wy=i),s=t.pendingLanes,s===0&&(qa=null),Xce(r.stateNode),Zn(t,ur()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Vy)throw Vy=!1,t=PP,PP=null,t;return Wy&1&&t.tag!==0&&ad(),s=t.pendingLanes,s&1?t===IP?Mf++:(Mf=0,IP=t):Mf=0,hl(),null}function ad(){if(ja!==null){var t=vZ(Wy),e=Bi.transition,r=wt;try{if(Bi.transition=null,wt=16>t?16:t,ja===null)var n=!1;else{if(t=ja,ja=null,Wy=0,pt&6)throw Error(re(331));var i=pt;for(pt|=4,we=t.current;we!==null;){var s=we,o=s.child;if(we.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(we=u;we!==null;){var d=we;switch(d.tag){case 0:case 11:case 15:If(8,d,s)}var h=d.child;if(h!==null)h.return=d,we=h;else for(;we!==null;){d=we;var f=d.sibling,p=d.return;if(Tee(d),d===u){we=null;break}if(f!==null){f.return=p,we=f;break}we=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}we=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,we=o;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:If(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,we=y;break e}we=s.return}}var b=t.current;for(we=b;we!==null;){o=we;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,we=w;else e:for(o=b;we!==null;){if(a=we,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:b0(9,a)}}catch(S){tr(a,a.return,S)}if(a===o){we=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,we=x;break e}we=a.return}}if(pt=i,hl(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(d0,t)}catch{}n=!0}return n}finally{wt=r,Bi.transition=e}}return!1}function v4(t,e,r){e=$d(r,e),e=vee(t,e,1),t=Fa(t,e,1),e=Pn(),t!==null&&(tm(t,1,e),Zn(t,e))}function tr(t,e,r){if(t.tag===3)v4(t,t,r);else for(;e!==null;){if(e.tag===3){v4(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qa===null||!qa.has(n))){t=$d(r,t),t=bee(e,t,1),e=Fa(e,t,1),t=Pn(),e!==null&&(tm(e,1,t),Zn(e,t));break}}e=e.return}}function Ede(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Pn(),t.pingedLanes|=t.suspendedLanes&r,Lr===t&&(rn&r)===r&&(Or===4||Or===3&&(rn&130023424)===rn&&500>ur()-eM?oc(t,0):ZR|=r),Zn(t,e)}function qee(t,e){e===0&&(t.mode&1?(e=fg,fg<<=1,!(fg&130023424)&&(fg=4194304)):e=1);var r=Pn();t=Ro(t,e),t!==null&&(tm(t,e,r),Zn(t,r))}function Nde(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),qee(t,r)}function kde(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(re(314))}n!==null&&n.delete(e),qee(t,r)}var Lee;Lee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xn.current)Yn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Yn=!1,fde(t,e,r);Yn=!!(t.flags&131072)}else Yn=!1,Lt&&e.flags&1048576&&WZ(e,Ay,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;iy(t,e),t=e.pendingProps;var i=Rd(e,yn.current);od(e,r),i=KR(null,e,n,t,i,r);var s=GR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(n)?(s=!0,Ry(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zR(e),i.updater=v0,e.stateNode=i,i._reactInternals=e,xP(e,n,t,r),e=_P(null,e,n,!0,s,r)):(e.tag=0,Lt&&s&&AR(e),_n(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(iy(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=jde(n),t=ts(n,t),i){case 0:e=SP(null,e,n,t,r);break e;case 1:e=l4(null,e,n,t,r);break e;case 11:e=o4(null,e,n,t,r);break e;case 14:e=a4(null,e,n,ts(n.type,t),r);break e}throw Error(re(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),SP(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),l4(t,e,n,i,r);case 3:e:{if(_ee(e),t===null)throw Error(re(387));n=e.pendingProps,s=e.memoizedState,i=s.element,QZ(t,e),Fy(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=$d(Error(re(423)),e),e=c4(t,e,n,r,i);break e}else if(n!==i){i=$d(Error(re(424)),e),e=c4(t,e,n,r,i);break e}else for(mi=$a(e.stateNode.containerInfo.firstChild),gi=e,Lt=!0,ss=null,r=GZ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Md(),n===i){e=Mo(t,e,r);break e}_n(t,e,n,r)}e=e.child}return e;case 5:return XZ(e),t===null&&yP(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,hP(n,i)?o=null:s!==null&&hP(n,s)&&(e.flags|=32),See(t,e),_n(t,e,o,r),e.child;case 6:return t===null&&yP(e),null;case 13:return Eee(t,e,r);case 4:return VR(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ad(e,null,n,r):_n(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),o4(t,e,n,i,r);case 7:return _n(t,e,e.pendingProps,r),e.child;case 8:return _n(t,e,e.pendingProps.children,r),e.child;case 12:return _n(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Rt(Dy,n._currentValue),n._currentValue=o,s!==null)if(ps(s.value,o)){if(s.children===i.children&&!Xn.current){e=Mo(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=bo(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),vP(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(re(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),vP(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_n(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,od(e,r),i=Hi(i),n=n(i),e.flags|=1,_n(t,e,n,r),e.child;case 14:return n=e.type,i=ts(n,e.pendingProps),i=ts(n.type,i),a4(t,e,n,i,r);case 15:return xee(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),iy(t,e),e.tag=1,Jn(n)?(t=!0,Ry(e)):t=!1,od(e,r),yee(e,n,i),xP(e,n,i,r),_P(null,e,n,!0,t,r);case 19:return Nee(t,e,r);case 22:return wee(t,e,r)}throw Error(re(156,e.tag))};function Bee(t,e){return pZ(t,e)}function Cde(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(t,e,r,n){return new Cde(t,e,r,n)}function iM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jde(t){if(typeof t=="function")return iM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_R)return 11;if(t===ER)return 14}return 2}function Ba(t,e){var r=t.alternate;return r===null?(r=Li(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ay(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")iM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $u:return ac(r.children,i,s,e);case SR:o=8,i|=8;break;case WO:return t=Li(12,r,e,i|2),t.elementType=WO,t.lanes=s,t;case UO:return t=Li(13,r,e,i),t.elementType=UO,t.lanes=s,t;case HO:return t=Li(19,r,e,i),t.elementType=HO,t.lanes=s,t;case XJ:return w0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YJ:o=10;break e;case QJ:o=9;break e;case _R:o=11;break e;case ER:o=14;break e;case ia:o=16,n=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Li(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ac(t,e,r,n){return t=Li(7,t,n,e),t.lanes=r,t}function w0(t,e,r,n){return t=Li(22,t,n,e),t.elementType=XJ,t.lanes=r,t.stateNode={isHidden:!1},t}function xx(t,e,r){return t=Li(6,t,null,e),t.lanes=r,t}function wx(t,e,r){return e=Li(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Tde(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tx(0),this.expirationTimes=tx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tx(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sM(t,e,r,n,i,s,o,a,l){return t=new Tde(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Li(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zR(s),t}function Ode(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Du,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function zee(t){if(!t)return rl;t=t._reactInternals;e:{if(Hc(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var r=t.type;if(Jn(r))return zZ(t,r,e)}return e}function Vee(t,e,r,n,i,s,o,a,l){return t=sM(r,n,!0,t,i,s,o,a,l),t.context=zee(null),r=t.current,n=Pn(),i=La(r),s=bo(n,i),s.callback=e??null,Fa(r,s,i),t.current.lanes=i,tm(t,i,n),Zn(t,n),t}function S0(t,e,r,n){var i=e.current,s=Pn(),o=La(i);return r=zee(r),e.context===null?e.context=r:e.pendingContext=r,e=bo(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Fa(i,e,o),t!==null&&(fs(t,i,o,s),ty(t,i,o)),o}function Hy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function b4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function oM(t,e){b4(t,e),(t=t.alternate)&&b4(t,e)}function Pde(){return null}var Wee=typeof reportError=="function"?reportError:function(t){console.error(t)};function aM(t){this._internalRoot=t}_0.prototype.render=aM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));S0(t,e,null,null)};_0.prototype.unmount=aM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ec(function(){S0(null,t,null,null)}),e[Io]=null}};function _0(t){this._internalRoot=t}_0.prototype.unstable_scheduleHydration=function(t){if(t){var e=wZ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ha.length&&e!==0&&e<ha[r].priority;r++);ha.splice(r,0,t),r===0&&_Z(t)}};function lM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function E0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function x4(){}function Ide(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Hy(o);s.call(u)}}var o=Vee(e,n,t,0,null,!1,!1,"",x4);return t._reactRootContainer=o,t[Io]=o.current,op(t.nodeType===8?t.parentNode:t),Ec(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=Hy(l);a.call(u)}}var l=sM(t,0,!1,null,null,!1,!1,"",x4);return t._reactRootContainer=l,t[Io]=l.current,op(t.nodeType===8?t.parentNode:t),Ec(function(){S0(e,l,r,n)}),l}function N0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Hy(o);a.call(l)}}S0(e,o,t,i)}else o=Ide(r,e,t,i,n);return Hy(o)}bZ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=yf(e.pendingLanes);r!==0&&(CR(e,r|1),Zn(e,ur()),!(pt&6)&&(Fd=ur()+500,hl()))}break;case 13:Ec(function(){var n=Ro(t,1);if(n!==null){var i=Pn();fs(n,t,1,i)}}),oM(t,1)}};jR=function(t){if(t.tag===13){var e=Ro(t,134217728);if(e!==null){var r=Pn();fs(e,t,134217728,r)}oM(t,134217728)}};xZ=function(t){if(t.tag===13){var e=La(t),r=Ro(t,e);if(r!==null){var n=Pn();fs(r,t,e,n)}oM(t,e)}};wZ=function(){return wt};SZ=function(t,e){var r=wt;try{return wt=t,e()}finally{wt=r}};rP=function(t,e,r){switch(e){case"input":if(YO(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=m0(n);if(!i)throw Error(re(90));ZJ(n),YO(n,i)}}}break;case"textarea":tZ(t,r);break;case"select":e=r.value,e!=null&&rd(t,!!r.multiple,e,!1)}};lZ=tM;cZ=Ec;var Rde={usingClientEntryPoint:!1,Events:[nm,Bu,m0,oZ,aZ,tM]},tf={findFiberByHostInstance:$l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mde={bundleType:tf.bundleType,version:tf.version,rendererPackageName:tf.rendererPackageName,rendererConfig:tf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hZ(t),t===null?null:t.stateNode},findFiberByHostInstance:tf.findFiberByHostInstance||Pde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eg.isDisabled&&Eg.supportsFiber)try{d0=Eg.inject(Mde),Ds=Eg}catch{}}bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rde;bi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lM(e))throw Error(re(200));return Ode(t,e,null,r)};bi.createRoot=function(t,e){if(!lM(t))throw Error(re(299));var r=!1,n="",i=Wee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sM(t,1,!1,null,null,r,!1,n,i),t[Io]=e.current,op(t.nodeType===8?t.parentNode:t),new aM(e)};bi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=hZ(e),t=t===null?null:t.stateNode,t};bi.flushSync=function(t){return Ec(t)};bi.hydrate=function(t,e,r){if(!E0(e))throw Error(re(200));return N0(null,t,e,!0,r)};bi.hydrateRoot=function(t,e,r){if(!lM(t))throw Error(re(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Wee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Vee(e,null,t,1,r??null,i,!1,s,o),t[Io]=e.current,op(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new _0(e)};bi.render=function(t,e,r){if(!E0(e))throw Error(re(200));return N0(null,t,e,!1,r)};bi.unmountComponentAtNode=function(t){if(!E0(t))throw Error(re(40));return t._reactRootContainer?(Ec(function(){N0(null,null,t,!1,function(){t._reactRootContainer=null,t[Io]=null})}),!0):!1};bi.unstable_batchedUpdates=tM;bi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!E0(r))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return N0(t,e,r,!1,n)};bi.version="18.3.1-next-f1338f8080-20240426";function Uee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uee)}catch(t){console.error(t)}}Uee(),UJ.exports=bi;var Hee=UJ.exports;const Ade=RJ(Hee);var w4=Hee;zO.createRoot=w4.createRoot,zO.hydrateRoot=w4.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mp.apply(this,arguments)}var Ta;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ta||(Ta={}));const S4="popstate";function Dde(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return AP("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Ky(i)}return Fde(e,r,null,t)}function Ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $de(){return Math.random().toString(36).substr(2,8)}function _4(t,e){return{usr:t.state,key:t.key,idx:e}}function AP(t,e,r,n){return r===void 0&&(r=null),mp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ch(e):e,{state:r,key:e&&e.key||n||$de()})}function Ky(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ch(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Fde(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Ta.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(mp({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ta.Pop;let v=d(),y=v==null?null:v-u;u=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=Ta.Push;let b=AP(g.location,v,y);u=d()+1;let w=_4(b,u),x=g.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(v,y){a=Ta.Replace;let b=AP(g.location,v,y);u=d();let w=_4(b,u),x=g.createHref(b);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof v=="string"?v:Ky(v);return b=b.replace(/ $/,"%20"),Ht(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(S4,h),l=v,()=>{i.removeEventListener(S4,h),l=null}},createHref(v){return e(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var E4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(E4||(E4={}));function qde(t,e,r){return r===void 0&&(r="/"),Lde(t,e,r)}function Lde(t,e,r,n){let i=typeof e=="string"?ch(e):e,s=qd(i.pathname||"/",r);if(s==null)return null;let o=Kee(t);Bde(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Jde(s);a=Qde(o[l],u)}return a}function Kee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ht(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=za([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Ht(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Kee(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Gde(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Gee(s.path))i(s,o,l)}),e}function Gee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Gee(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Bde(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Yde(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const zde=/^:[\w-]+$/,Vde=3,Wde=2,Ude=1,Hde=10,Kde=-2,N4=t=>t==="*";function Gde(t,e){let r=t.split("/"),n=r.length;return r.some(N4)&&(n+=Kde),e&&(n+=Wde),r.filter(i=>!N4(i)).reduce((i,s)=>i+(zde.test(s)?Vde:s===""?Ude:Hde),n)}function Yde(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Qde(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=DP({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:za([s,h.pathname]),pathnameBase:nhe(za([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=za([s,h.pathnameBase]))}return o}function DP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Xde(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Xde(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),cM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Jde(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Zde=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ehe=t=>Zde.test(t);function the(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?ch(t):t,s;if(r)if(ehe(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),cM(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=k4(r.substring(1),"/"):s=k4(r,e)}else s=e;return{pathname:s,search:ihe(n),hash:she(i)}}function k4(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Sx(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rhe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function uM(t,e){let r=rhe(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function dM(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=ch(t):(i=mp({},t),Ht(!i.pathname||!i.pathname.includes("?"),Sx("?","pathname","search",i)),Ht(!i.pathname||!i.pathname.includes("#"),Sx("#","pathname","hash",i)),Ht(!i.search||!i.search.includes("#"),Sx("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=the(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const za=t=>t.join("/").replace(/\/\/+/g,"/"),nhe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ihe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,she=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ohe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Yee=["post","put","patch","delete"];new Set(Yee);const ahe=["get",...Yee];new Set(ahe);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gp(){return gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gp.apply(this,arguments)}const k0=k.createContext(null),Qee=k.createContext(null),qo=k.createContext(null),C0=k.createContext(null),Lo=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Xee=k.createContext(null);function lhe(t,e){let{relative:r}=e===void 0?{}:e;uh()||Ht(!1);let{basename:n,navigator:i}=k.useContext(qo),{hash:s,pathname:o,search:a}=j0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:za([n,o])),i.createHref({pathname:l,search:a,hash:s})}function uh(){return k.useContext(C0)!=null}function Bo(){return uh()||Ht(!1),k.useContext(C0).location}function Jee(t){k.useContext(qo).static||k.useLayoutEffect(t)}function Fn(){let{isDataRoute:t}=k.useContext(Lo);return t?whe():che()}function che(){uh()||Ht(!1);let t=k.useContext(k0),{basename:e,future:r,navigator:n}=k.useContext(qo),{matches:i}=k.useContext(Lo),{pathname:s}=Bo(),o=JSON.stringify(uM(i,r.v7_relativeSplatPath)),a=k.useRef(!1);return Jee(()=>{a.current=!0}),k.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let h=dM(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:za([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function dh(){let{matches:t}=k.useContext(Lo),e=t[t.length-1];return e?e.params:{}}function j0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=k.useContext(qo),{matches:i}=k.useContext(Lo),{pathname:s}=Bo(),o=JSON.stringify(uM(i,n.v7_relativeSplatPath));return k.useMemo(()=>dM(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function uhe(t,e){return dhe(t,e)}function dhe(t,e,r,n){uh()||Ht(!1);let{navigator:i}=k.useContext(qo),{matches:s}=k.useContext(Lo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Bo(),d;if(e){var h;let v=typeof e=="string"?ch(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Ht(!1),d=v}else d=u;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=qde(t,{pathname:p}),g=ghe(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:za([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:za([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,n);return e&&g?k.createElement(C0.Provider,{value:{location:gp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ta.Pop}},g):g}function hhe(){let t=xhe(),e=ohe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:i},r):null,null)}const fhe=k.createElement(hhe,null);class phe extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?k.createElement(Lo.Provider,{value:this.props.routeContext},k.createElement(Xee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mhe(t){let{routeContext:e,match:r,children:n}=t,i=k.useContext(k0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(Lo.Provider,{value:e},n)}function ghe(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ht(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,v=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||fhe,l&&(u<0&&f===0?(She("route-fallback"),m=!0,v=null):u===f&&(m=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),b=()=>{let w;return p?w=g:m?w=v:h.route.Component?w=k.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,k.createElement(mhe,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(phe,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Zee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Zee||{}),ete=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ete||{});function yhe(t){let e=k.useContext(k0);return e||Ht(!1),e}function vhe(t){let e=k.useContext(Qee);return e||Ht(!1),e}function bhe(t){let e=k.useContext(Lo);return e||Ht(!1),e}function tte(t){let e=bhe(),r=e.matches[e.matches.length-1];return r.route.id||Ht(!1),r.route.id}function xhe(){var t;let e=k.useContext(Xee),r=vhe(),n=tte();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function whe(){let{router:t}=yhe(Zee.UseNavigateStable),e=tte(ete.UseNavigateStable),r=k.useRef(!1);return Jee(()=>{r.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,gp({fromRouteId:e},s)))},[t,e])}const C4={};function She(t,e,r){C4[t]||(C4[t]=!0)}function _he(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rte(t){let{to:e,replace:r,state:n,relative:i}=t;uh()||Ht(!1);let{future:s,static:o}=k.useContext(qo),{matches:a}=k.useContext(Lo),{pathname:l}=Bo(),u=Fn(),d=dM(e,uM(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return k.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:i}),[u,h,i,r,n]),null}function jr(t){Ht(!1)}function Ehe(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ta.Pop,navigator:s,static:o=!1,future:a}=t;uh()&&Ht(!1);let l=e.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:s,static:o,future:gp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=ch(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=k.useMemo(()=>{let v=qd(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:k.createElement(qo.Provider,{value:u},k.createElement(C0.Provider,{children:r,value:g}))}function j4(t){let{children:e,location:r}=t;return uhe($P(e),r)}new Promise(()=>{});function $P(t,e){e===void 0&&(e=[]);let r=[];return k.Children.forEach(t,(n,i)=>{if(!k.isValidElement(n))return;let s=[...e,i];if(n.type===k.Fragment){r.push.apply(r,$P(n.props.children,s));return}n.type!==jr&&Ht(!1),!n.props.index||!n.props.children||Ht(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=$P(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gy(){return Gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gy.apply(this,arguments)}function nte(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Nhe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function khe(t,e){return t.button===0&&(!e||e==="_self")&&!Nhe(t)}function FP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Che(t,e){let r=FP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const jhe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],The=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Ohe="6";try{window.__reactRouterVersion=Ohe}catch{}const Phe=k.createContext({isTransitioning:!1}),Ihe="startTransition",T4=Ece[Ihe];function Rhe(t){let{basename:e,children:r,future:n,window:i}=t,s=k.useRef();s.current==null&&(s.current=Dde({window:i,v5Compat:!0}));let o=s.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=k.useCallback(h=>{u&&T4?T4(()=>l(h)):l(h)},[l,u]);return k.useLayoutEffect(()=>o.listen(d),[o,d]),k.useEffect(()=>_he(n),[n]),k.createElement(Ehe,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const Mhe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ahe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=k.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,f=nte(e,jhe),{basename:p}=k.useContext(qo),m,g=!1;if(typeof u=="string"&&Ahe.test(u)&&(m=u,Mhe))try{let w=new URL(window.location.href),x=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=qd(x.pathname,p);x.origin===w.origin&&S!=null?u=S+x.search+x.hash:g=!0}catch{}let v=lhe(u,{relative:i}),y=Fhe(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function b(w){n&&n(w),w.defaultPrevented||y(w)}return k.createElement("a",Gy({},f,{href:m||v,onClick:g||s?n:b,ref:r,target:l}))}),Dhe=k.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:d}=e,h=nte(e,The),f=j0(l,{relative:h.relative}),p=Bo(),m=k.useContext(Qee),{navigator:g,basename:v}=k.useContext(qo),y=m!=null&&Lhe(f)&&u===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&v&&(x=qd(x,v)||x);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=w===b||!o&&w.startsWith(b)&&w.charAt(S)==="/",E=x!=null&&(x===b||!o&&x.startsWith(b)&&x.charAt(b.length)==="/"),N={isActive:_,isPending:E,isTransitioning:y},C=_?n:void 0,j;typeof s=="function"?j=s(N):j=[s,_?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(N):a;return k.createElement(Le,Gy({},h,{"aria-current":C,className:j,ref:r,style:T,to:l,viewTransition:u}),typeof d=="function"?d(N):d)});var qP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qP||(qP={}));var O4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(O4||(O4={}));function $he(t){let e=k.useContext(k0);return e||Ht(!1),e}function Fhe(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Fn(),u=Bo(),d=j0(t,{relative:o});return k.useCallback(h=>{if(khe(h,r)){h.preventDefault();let f=n!==void 0?n:Ky(u)===Ky(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,n,i,r,t,s,o,a])}function qhe(t){let e=k.useRef(FP(t)),r=k.useRef(!1),n=Bo(),i=k.useMemo(()=>Che(n.search,r.current?null:e.current),[n.search]),s=Fn(),o=k.useCallback((a,l)=>{const u=FP(typeof a=="function"?a(i):a);r.current=!0,s("?"+u,l)},[s,i]);return[i,o]}function Lhe(t,e){e===void 0&&(e={});let r=k.useContext(Phe);r==null&&Ht(!1);let{basename:n}=$he(qP.useViewTransitionState),i=j0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=qd(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=qd(r.nextLocation.pathname,n)||r.nextLocation.pathname;return DP(i.pathname,o)!=null||DP(i.pathname,s)!=null}var Kc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bhe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ya,pR,wJ,zhe=(wJ=class{constructor(){xe(this,ya,Bhe);xe(this,pR,!1)}setTimeoutProvider(t){ae(this,ya,t)}setTimeout(t,e){return R(this,ya).setTimeout(t,e)}clearTimeout(t){R(this,ya).clearTimeout(t)}setInterval(t,e){return R(this,ya).setInterval(t,e)}clearInterval(t){R(this,ya).clearInterval(t)}},ya=new WeakMap,pR=new WeakMap,wJ),Ll=new zhe;function Vhe(t){setTimeout(t,0)}var Nc=typeof window>"u"||"Deno"in globalThis;function hn(){}function Whe(t,e){return typeof t=="function"?t(e):t}function LP(t){return typeof t=="number"&&t>=0&&t!==1/0}function ite(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Va(t,e){return typeof t=="function"?t(e):t}function Ii(t,e){return typeof t=="function"?t(e):t}function P4(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==hM(o,e.options))return!1}else if(!yp(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function I4(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(kc(e.options.mutationKey)!==kc(s))return!1}else if(!yp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function hM(t,e){return((e==null?void 0:e.queryKeyHashFn)||kc)(t)}function kc(t){return JSON.stringify(t,(e,r)=>BP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function yp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>yp(t[r],e[r])):!1}var Uhe=Object.prototype.hasOwnProperty;function fM(t,e){if(t===e)return t;const r=R4(t)&&R4(e);if(!r&&!(BP(t)&&BP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let u=0;u<o;u++){const d=r?u:s[u],h=t[d],f=e[d];if(h===f){a[d]=h,(r?u<i:Uhe.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=fM(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function vp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function R4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function BP(t){if(!M4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!M4(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function M4(t){return Object.prototype.toString.call(t)==="[object Object]"}function Hhe(t){return new Promise(e=>{Ll.setTimeout(e,t)})}function zP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?fM(t,e):e}function Khe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Ghe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var pM=Symbol();function ste(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===pM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function mM(t,e){return typeof t=="function"?t(...e):!!t}function Yhe(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var Xl,va,yd,SJ,Qhe=(SJ=class extends Kc{constructor(){super();xe(this,Xl);xe(this,va);xe(this,yd);ae(this,yd,e=>{if(!Nc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,va)||this.setEventListener(R(this,yd))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,va))==null||e.call(this),ae(this,va,void 0))}setEventListener(e){var r;ae(this,yd,e),(r=R(this,va))==null||r.call(this),ae(this,va,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,Xl)!==e&&(ae(this,Xl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof R(this,Xl)=="boolean"?R(this,Xl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Xl=new WeakMap,va=new WeakMap,yd=new WeakMap,SJ),gM=new Qhe;function VP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var Xhe=Vhe;function Jhe(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=Xhe;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var ir=Jhe(),vd,ba,bd,_J,Zhe=(_J=class extends Kc{constructor(){super();xe(this,vd,!0);xe(this,ba);xe(this,bd);ae(this,bd,e=>{if(!Nc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,ba)||this.setEventListener(R(this,bd))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ba))==null||e.call(this),ae(this,ba,void 0))}setEventListener(e){var r;ae(this,bd,e),(r=R(this,ba))==null||r.call(this),ae(this,ba,e(this.setOnline.bind(this)))}setOnline(e){R(this,vd)!==e&&(ae(this,vd,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,vd)}},vd=new WeakMap,ba=new WeakMap,bd=new WeakMap,_J),Yy=new Zhe;function efe(t){return Math.min(1e3*2**t,3e4)}function ote(t){return(t??"online")==="online"?Yy.isOnline():!0}var WP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ate(t){let e=!1,r=0,n;const i=VP(),s=()=>i.status!=="pending",o=g=>{var v;if(!s()){const y=new WP(g);f(y),(v=t.onCancel)==null||v.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>gM.isFocused()&&(t.networkMode==="always"||Yy.isOnline())&&t.canRun(),d=()=>ote(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var v;n=y=>{(s()||u())&&g(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const v=r===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const b=t.retry??(Nc?0:3),w=t.retryDelay??efe,x=typeof w=="function"?w(r,y):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),Hhe(x).then(()=>u()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Jl,EJ,lte=(EJ=class{constructor(){xe(this,Jl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),LP(this.gcTime)&&ae(this,Jl,Ll.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Nc?1/0:5*60*1e3))}clearGcTimeout(){R(this,Jl)&&(Ll.clearTimeout(R(this,Jl)),ae(this,Jl,void 0))}},Jl=new WeakMap,EJ),Zl,xd,Oi,ec,Dr,Hp,tc,rs,io,NJ,tfe=(NJ=class extends lte{constructor(e){super();xe(this,rs);xe(this,Zl);xe(this,xd);xe(this,Oi);xe(this,ec);xe(this,Dr);xe(this,Hp);xe(this,tc);ae(this,tc,!1),ae(this,Hp,e.defaultOptions),this.setOptions(e.options),this.observers=[],ae(this,ec,e.client),ae(this,Oi,R(this,ec).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ae(this,Zl,D4(this.options)),this.state=e.state??R(this,Zl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Dr))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,Hp),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=D4(this.options);r.data!==void 0&&(this.setState(A4(r.data,r.dataUpdatedAt)),ae(this,Zl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Oi).remove(this)}setData(e,r){const n=zP(this.state.data,e,this.options);return $e(this,rs,io).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){$e(this,rs,io).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=R(this,Dr))==null?void 0:n.promise;return(i=R(this,Dr))==null||i.cancel(e),r?r.then(hn).catch(hn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Zl))}isActive(){return this.observers.some(e=>Ii(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Va(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ite(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Dr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Dr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,Oi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(R(this,Dr)&&(R(this,tc)?R(this,Dr).cancel({revert:!0}):R(this,Dr).cancelRetry()),this.scheduleGc()),R(this,Oi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$e(this,rs,io).call(this,{type:"invalidate"})}async fetch(e,r){var l,u,d,h,f,p,m,g,v,y,b,w;if(this.state.fetchStatus!=="idle"&&((l=R(this,Dr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,Dr))return R(this,Dr).continueRetry(),R(this,Dr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(ae(this,tc,!0),n.signal)})},s=()=>{const x=ste(this.options,r),_=(()=>{const E={client:R(this,ec),queryKey:this.queryKey,meta:this.meta};return i(E),E})();return ae(this,tc,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,ec),state:this.state,fetchFn:s};return i(x),x})();(u=this.options.behavior)==null||u.onFetch(a,this),ae(this,xd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&$e(this,rs,io).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),ae(this,Dr,ate({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof WP&&x.revert&&this.setState({...R(this,xd),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{$e(this,rs,io).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{$e(this,rs,io).call(this,{type:"pause"})},onContinue:()=>{$e(this,rs,io).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await R(this,Dr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=R(this,Oi).config).onSuccess)==null||p.call(f,x,this),(g=(m=R(this,Oi).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof WP){if(x.silent)return R(this,Dr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw $e(this,rs,io).call(this,{type:"error",error:x}),(y=(v=R(this,Oi).config).onError)==null||y.call(v,x,this),(w=(b=R(this,Oi).config).onSettled)==null||w.call(b,this.state.data,x,this),x}finally{this.scheduleGc()}}},Zl=new WeakMap,xd=new WeakMap,Oi=new WeakMap,ec=new WeakMap,Dr=new WeakMap,Hp=new WeakMap,tc=new WeakMap,rs=new WeakSet,io=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...cte(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...A4(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ae(this,xd,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),ir.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Oi).notify({query:this,type:"updated",action:e})})},NJ);function cte(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ote(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function A4(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function D4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var zn,lt,Kp,wn,rc,wd,co,xa,Gp,Sd,_d,nc,ic,wa,Ed,yt,bf,UP,HP,KP,GP,YP,QP,XP,ute,kJ,yM=(kJ=class extends Kc{constructor(e,r){super();xe(this,yt);xe(this,zn);xe(this,lt);xe(this,Kp);xe(this,wn);xe(this,rc);xe(this,wd);xe(this,co);xe(this,xa);xe(this,Gp);xe(this,Sd);xe(this,_d);xe(this,nc);xe(this,ic);xe(this,wa);xe(this,Ed,new Set);this.options=r,ae(this,zn,e),ae(this,xa,null),ae(this,co,VP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,lt).addObserver(this),$4(R(this,lt),this.options)?$e(this,yt,bf).call(this):this.updateResult(),$e(this,yt,GP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return JP(R(this,lt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return JP(R(this,lt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,$e(this,yt,YP).call(this),$e(this,yt,QP).call(this),R(this,lt).removeObserver(this)}setOptions(e){const r=this.options,n=R(this,lt);if(this.options=R(this,zn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ii(this.options.enabled,R(this,lt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");$e(this,yt,XP).call(this),R(this,lt).setOptions(this.options),r._defaulted&&!vp(this.options,r)&&R(this,zn).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,lt),observer:this});const i=this.hasListeners();i&&F4(R(this,lt),n,this.options,r)&&$e(this,yt,bf).call(this),this.updateResult(),i&&(R(this,lt)!==n||Ii(this.options.enabled,R(this,lt))!==Ii(r.enabled,R(this,lt))||Va(this.options.staleTime,R(this,lt))!==Va(r.staleTime,R(this,lt)))&&$e(this,yt,UP).call(this);const s=$e(this,yt,HP).call(this);i&&(R(this,lt)!==n||Ii(this.options.enabled,R(this,lt))!==Ii(r.enabled,R(this,lt))||s!==R(this,wa))&&$e(this,yt,KP).call(this,s)}getOptimisticResult(e){const r=R(this,zn).getQueryCache().build(R(this,zn),e),n=this.createResult(r,e);return nfe(this,n)&&(ae(this,wn,n),ae(this,wd,this.options),ae(this,rc,R(this,lt).state)),n}getCurrentResult(){return R(this,wn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,co).status==="pending"&&R(this,co).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){R(this,Ed).add(e)}getCurrentQuery(){return R(this,lt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=R(this,zn).defaultQueryOptions(e),n=R(this,zn).getQueryCache().build(R(this,zn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return $e(this,yt,bf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,wn)))}createResult(e,r){var C;const n=R(this,lt),i=this.options,s=R(this,wn),o=R(this,rc),a=R(this,wd),u=e!==n?e.state:R(this,Kp),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const j=this.hasListeners(),T=!j&&$4(e,r),P=j&&F4(e,n,r,i);(T||P)&&(h={...h,...cte(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let j;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(j=s.data,y=!0):j=typeof r.placeholderData=="function"?r.placeholderData((C=R(this,_d))==null?void 0:C.state.data,R(this,_d)):r.placeholderData,j!==void 0&&(v="success",p=zP(s==null?void 0:s.data,j,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===R(this,Gp))p=R(this,Sd);else try{ae(this,Gp,r.select),p=r.select(p),p=zP(s==null?void 0:s.data,p,r),ae(this,Sd,p),ae(this,xa,null)}catch(j){ae(this,xa,j)}R(this,xa)&&(m=R(this,xa),p=R(this,Sd),g=Date.now(),v="error");const b=h.fetchStatus==="fetching",w=v==="pending",x=v==="error",S=w&&b,_=p!==void 0,N={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:vM(e,r),refetch:this.refetch,promise:R(this,co),isEnabled:Ii(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=O=>{N.status==="error"?O.reject(N.error):N.data!==void 0&&O.resolve(N.data)},T=()=>{const O=ae(this,co,N.promise=VP());j(O)},P=R(this,co);switch(P.status){case"pending":e.queryHash===n.queryHash&&j(P);break;case"fulfilled":(N.status==="error"||N.data!==P.value)&&T();break;case"rejected":(N.status!=="error"||N.error!==P.reason)&&T();break}}return N}updateResult(){const e=R(this,wn),r=this.createResult(R(this,lt),this.options);if(ae(this,rc,R(this,lt).state),ae(this,wd,this.options),R(this,rc).data!==void 0&&ae(this,_d,R(this,lt)),vp(r,e))return;ae(this,wn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!R(this,Ed).size)return!0;const o=new Set(s??R(this,Ed));return this.options.throwOnError&&o.add("error"),Object.keys(R(this,wn)).some(a=>{const l=a;return R(this,wn)[l]!==e[l]&&o.has(l)})};$e(this,yt,ute).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&$e(this,yt,GP).call(this)}},zn=new WeakMap,lt=new WeakMap,Kp=new WeakMap,wn=new WeakMap,rc=new WeakMap,wd=new WeakMap,co=new WeakMap,xa=new WeakMap,Gp=new WeakMap,Sd=new WeakMap,_d=new WeakMap,nc=new WeakMap,ic=new WeakMap,wa=new WeakMap,Ed=new WeakMap,yt=new WeakSet,bf=function(e){$e(this,yt,XP).call(this);let r=R(this,lt).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(hn)),r},UP=function(){$e(this,yt,YP).call(this);const e=Va(this.options.staleTime,R(this,lt));if(Nc||R(this,wn).isStale||!LP(e))return;const n=ite(R(this,wn).dataUpdatedAt,e)+1;ae(this,nc,Ll.setTimeout(()=>{R(this,wn).isStale||this.updateResult()},n))},HP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,lt)):this.options.refetchInterval)??!1},KP=function(e){$e(this,yt,QP).call(this),ae(this,wa,e),!(Nc||Ii(this.options.enabled,R(this,lt))===!1||!LP(R(this,wa))||R(this,wa)===0)&&ae(this,ic,Ll.setInterval(()=>{(this.options.refetchIntervalInBackground||gM.isFocused())&&$e(this,yt,bf).call(this)},R(this,wa)))},GP=function(){$e(this,yt,UP).call(this),$e(this,yt,KP).call(this,$e(this,yt,HP).call(this))},YP=function(){R(this,nc)&&(Ll.clearTimeout(R(this,nc)),ae(this,nc,void 0))},QP=function(){R(this,ic)&&(Ll.clearInterval(R(this,ic)),ae(this,ic,void 0))},XP=function(){const e=R(this,zn).getQueryCache().build(R(this,zn),this.options);if(e===R(this,lt))return;const r=R(this,lt);ae(this,lt,e),ae(this,Kp,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},ute=function(e){ir.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(R(this,wn))}),R(this,zn).getQueryCache().notify({query:R(this,lt),type:"observerResultsUpdated"})})},kJ);function rfe(t,e){return Ii(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function $4(t,e){return rfe(t,e)||t.state.data!==void 0&&JP(t,e,e.refetchOnMount)}function JP(t,e,r){if(Ii(e.enabled,t)!==!1&&Va(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&vM(t,e)}return!1}function F4(t,e,r,n){return(t!==e||Ii(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&vM(t,r)}function vM(t,e){return Ii(e.enabled,t)!==!1&&t.isStaleByTime(Va(e.staleTime,t))}function nfe(t,e){return!vp(t.getCurrentResult(),e)}function q4(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const v=w=>{Yhe(w,()=>e.signal,()=>g=!0)},y=ste(e.options,e.fetchOptions),b=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const E=(()=>{const T={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return v(T),T})(),N=await y(E),{maxPages:C}=e.options,j=S?Ghe:Khe;return{pages:j(w.pages,N,C),pageParams:j(w.pageParams,x,C)}};if(i&&s.length){const w=i==="backward",x=w?ife:L4,S={pages:s,pageParams:o},_=x(n,S);a=await b(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:L4(n,a);if(l>0&&x==null)break;a=await b(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function L4(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function ife(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Yp,js,Sn,sc,Ts,ra,CJ,sfe=(CJ=class extends lte{constructor(e){super();xe(this,Ts);xe(this,Yp);xe(this,js);xe(this,Sn);xe(this,sc);ae(this,Yp,e.client),this.mutationId=e.mutationId,ae(this,Sn,e.mutationCache),ae(this,js,[]),this.state=e.state||dte(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,js).includes(e)||(R(this,js).push(e),this.clearGcTimeout(),R(this,Sn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ae(this,js,R(this,js).filter(r=>r!==e)),this.scheduleGc(),R(this,Sn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,js).length||(this.state.status==="pending"?this.scheduleGc():R(this,Sn).remove(this))}continue(){var e;return((e=R(this,sc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,u,d,h,f,p,m,g,v,y,b,w,x,S,_,E,N,C;const r=()=>{$e(this,Ts,ra).call(this,{type:"continue"})},n={client:R(this,Yp),meta:this.options.meta,mutationKey:this.options.mutationKey};ae(this,sc,ate({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(j,T)=>{$e(this,Ts,ra).call(this,{type:"failed",failureCount:j,error:T})},onPause:()=>{$e(this,Ts,ra).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Sn).canRun(this)}));const i=this.state.status==="pending",s=!R(this,sc).canStart();try{if(i)r();else{$e(this,Ts,ra).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=R(this,Sn).config).onMutate)==null?void 0:a.call(o,e,this,n));const T=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e,n));T!==this.state.context&&$e(this,Ts,ra).call(this,{type:"pending",context:T,variables:e,isPaused:s})}const j=await R(this,sc).start();return await((h=(d=R(this,Sn).config).onSuccess)==null?void 0:h.call(d,j,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,j,e,this.state.context,n)),await((g=(m=R(this,Sn).config).onSettled)==null?void 0:g.call(m,j,null,this.state.variables,this.state.context,this,n)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,j,null,e,this.state.context,n)),$e(this,Ts,ra).call(this,{type:"success",data:j}),j}catch(j){try{await((w=(b=R(this,Sn).config).onError)==null?void 0:w.call(b,j,e,this.state.context,this,n))}catch(T){Promise.reject(T)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,j,e,this.state.context,n))}catch(T){Promise.reject(T)}try{await((E=(_=R(this,Sn).config).onSettled)==null?void 0:E.call(_,void 0,j,this.state.variables,this.state.context,this,n))}catch(T){Promise.reject(T)}try{await((C=(N=this.options).onSettled)==null?void 0:C.call(N,void 0,j,e,this.state.context,n))}catch(T){Promise.reject(T)}throw $e(this,Ts,ra).call(this,{type:"error",error:j}),j}finally{R(this,Sn).runNext(this)}}},Yp=new WeakMap,js=new WeakMap,Sn=new WeakMap,sc=new WeakMap,Ts=new WeakSet,ra=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ir.batch(()=>{R(this,js).forEach(n=>{n.onMutationUpdate(e)}),R(this,Sn).notify({mutation:this,type:"updated",action:e})})},CJ);function dte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var uo,ns,Qp,jJ,ofe=(jJ=class extends Kc{constructor(e={}){super();xe(this,uo);xe(this,ns);xe(this,Qp);this.config=e,ae(this,uo,new Set),ae(this,ns,new Map),ae(this,Qp,0)}build(e,r,n){const i=new sfe({client:e,mutationCache:this,mutationId:++ag(this,Qp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){R(this,uo).add(e);const r=Ng(e);if(typeof r=="string"){const n=R(this,ns).get(r);n?n.push(e):R(this,ns).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,uo).delete(e)){const r=Ng(e);if(typeof r=="string"){const n=R(this,ns).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&R(this,ns).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Ng(e);if(typeof r=="string"){const n=R(this,ns).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=Ng(e);if(typeof r=="string"){const i=(n=R(this,ns).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ir.batch(()=>{R(this,uo).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,uo).clear(),R(this,ns).clear()})}getAll(){return Array.from(R(this,uo))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>I4(r,n))}findAll(e={}){return this.getAll().filter(r=>I4(e,r))}notify(e){ir.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return ir.batch(()=>Promise.all(e.map(r=>r.continue().catch(hn))))}},uo=new WeakMap,ns=new WeakMap,Qp=new WeakMap,jJ);function Ng(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ho,Sa,Vn,fo,Oo,ly,ZP,TJ,afe=(TJ=class extends Kc{constructor(e,r){super();xe(this,Oo);xe(this,ho);xe(this,Sa);xe(this,Vn);xe(this,fo);ae(this,ho,e),this.setOptions(r),this.bindMethods(),$e(this,Oo,ly).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=R(this,ho).defaultMutationOptions(e),vp(this.options,r)||R(this,ho).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Vn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&kc(r.mutationKey)!==kc(this.options.mutationKey)?this.reset():((n=R(this,Vn))==null?void 0:n.state.status)==="pending"&&R(this,Vn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=R(this,Vn))==null||e.removeObserver(this)}onMutationUpdate(e){$e(this,Oo,ly).call(this),$e(this,Oo,ZP).call(this,e)}getCurrentResult(){return R(this,Sa)}reset(){var e;(e=R(this,Vn))==null||e.removeObserver(this),ae(this,Vn,void 0),$e(this,Oo,ly).call(this),$e(this,Oo,ZP).call(this)}mutate(e,r){var n;return ae(this,fo,r),(n=R(this,Vn))==null||n.removeObserver(this),ae(this,Vn,R(this,ho).getMutationCache().build(R(this,ho),this.options)),R(this,Vn).addObserver(this),R(this,Vn).execute(e)}},ho=new WeakMap,Sa=new WeakMap,Vn=new WeakMap,fo=new WeakMap,Oo=new WeakSet,ly=function(){var r;const e=((r=R(this,Vn))==null?void 0:r.state)??dte();ae(this,Sa,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},ZP=function(e){ir.batch(()=>{var r,n,i,s,o,a,l,u;if(R(this,fo)&&this.hasListeners()){const d=R(this,Sa).variables,h=R(this,Sa).context,f={client:R(this,ho),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=R(this,fo)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=R(this,fo)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=R(this,fo)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(u=(l=R(this,fo)).onSettled)==null||u.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(R(this,Sa))})})},TJ);function B4(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function lfe(t,e,r){const n=t.slice(0);return n[e]=r,n}var Nd,ui,kd,Cd,Pi,_a,Xp,Jp,Zp,sn,eI,tI,rI,nI,iI,OJ,cfe=(OJ=class extends Kc{constructor(e,r,n){super();xe(this,sn);xe(this,Nd);xe(this,ui);xe(this,kd);xe(this,Cd);xe(this,Pi);xe(this,_a);xe(this,Xp);xe(this,Jp);xe(this,Zp,[]);ae(this,Nd,e),ae(this,Cd,n),ae(this,kd,[]),ae(this,Pi,[]),ae(this,ui,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&R(this,Pi).forEach(e=>{e.subscribe(r=>{$e(this,sn,nI).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,R(this,Pi).forEach(e=>{e.destroy()})}setQueries(e,r){ae(this,kd,e),ae(this,Cd,r),ir.batch(()=>{const n=R(this,Pi),i=$e(this,sn,rI).call(this,R(this,kd));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),u=a||l,d=u?!0:o.some((h,f)=>{const p=R(this,ui)[f];return!p||!vp(h,p)});!u&&!d||(u&&(ae(this,Zp,i),ae(this,Pi,s)),ae(this,ui,o),this.hasListeners()&&(u&&(B4(n,s).forEach(h=>{h.destroy()}),B4(s,n).forEach(h=>{h.subscribe(f=>{$e(this,sn,nI).call(this,h,f)})})),$e(this,sn,iI).call(this)))})}getCurrentResult(){return R(this,ui)}getQueries(){return R(this,Pi).map(e=>e.getCurrentQuery())}getObservers(){return R(this,Pi)}getOptimisticResult(e,r){const n=$e(this,sn,rI).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>$e(this,sn,tI).call(this,s??i,r),()=>$e(this,sn,eI).call(this,i,n)]}},Nd=new WeakMap,ui=new WeakMap,kd=new WeakMap,Cd=new WeakMap,Pi=new WeakMap,_a=new WeakMap,Xp=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,sn=new WeakSet,eI=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},tI=function(e,r){return r?((!R(this,_a)||R(this,ui)!==R(this,Jp)||r!==R(this,Xp))&&(ae(this,Xp,r),ae(this,Jp,R(this,ui)),ae(this,_a,fM(R(this,_a),r(e)))),R(this,_a)):e},rI=function(e){const r=new Map;R(this,Pi).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=R(this,Nd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new yM(R(this,Nd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},nI=function(e,r){const n=R(this,Pi).indexOf(e);n!==-1&&(ae(this,ui,lfe(R(this,ui),n,r)),$e(this,sn,iI).call(this))},iI=function(){var e;if(this.hasListeners()){const r=R(this,_a),n=$e(this,sn,eI).call(this,R(this,ui),R(this,Zp)),i=$e(this,sn,tI).call(this,n,(e=R(this,Cd))==null?void 0:e.combine);r!==i&&ir.batch(()=>{this.listeners.forEach(s=>{s(R(this,ui))})})}},OJ),Os,PJ,ufe=(PJ=class extends Kc{constructor(e={}){super();xe(this,Os);this.config=e,ae(this,Os,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??hM(i,r);let o=this.get(s);return o||(o=new tfe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){R(this,Os).has(e.queryHash)||(R(this,Os).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=R(this,Os).get(e.queryHash);r&&(e.destroy(),r===e&&R(this,Os).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ir.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,Os).get(e)}getAll(){return[...R(this,Os).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>P4(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>P4(e,n)):r}notify(e){ir.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){ir.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ir.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Os=new WeakMap,PJ),er,Ea,Na,jd,Td,ka,Od,Pd,IJ,dfe=(IJ=class{constructor(t={}){xe(this,er);xe(this,Ea);xe(this,Na);xe(this,jd);xe(this,Td);xe(this,ka);xe(this,Od);xe(this,Pd);ae(this,er,t.queryCache||new ufe),ae(this,Ea,t.mutationCache||new ofe),ae(this,Na,t.defaultOptions||{}),ae(this,jd,new Map),ae(this,Td,new Map),ae(this,ka,0)}mount(){ag(this,ka)._++,R(this,ka)===1&&(ae(this,Od,gM.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,er).onFocus())})),ae(this,Pd,Yy.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,er).onOnline())})))}unmount(){var t,e;ag(this,ka)._--,R(this,ka)===0&&((t=R(this,Od))==null||t.call(this),ae(this,Od,void 0),(e=R(this,Pd))==null||e.call(this),ae(this,Pd,void 0))}isFetching(t){return R(this,er).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,Ea).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,er).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=R(this,er).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Va(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return R(this,er).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=R(this,er).get(n.queryHash),s=i==null?void 0:i.state.data,o=Whe(e,s);if(o!==void 0)return R(this,er).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return ir.batch(()=>R(this,er).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,er).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=R(this,er);ir.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=R(this,er);return ir.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=ir.batch(()=>R(this,er).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(hn).catch(hn)}invalidateQueries(t,e={}){return ir.batch(()=>(R(this,er).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=ir.batch(()=>R(this,er).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(hn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(hn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=R(this,er).build(this,e);return r.isStaleByTime(Va(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hn).catch(hn)}fetchInfiniteQuery(t){return t.behavior=q4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hn).catch(hn)}ensureInfiniteQueryData(t){return t.behavior=q4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Yy.isOnline()?R(this,Ea).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,er)}getMutationCache(){return R(this,Ea)}getDefaultOptions(){return R(this,Na)}setDefaultOptions(t){ae(this,Na,t)}setQueryDefaults(t,e){R(this,jd).set(kc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,jd).values()],r={};return e.forEach(n=>{yp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){R(this,Td).set(kc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,Td).values()],r={};return e.forEach(n=>{yp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Na).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=hM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===pM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Na).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,er).clear(),R(this,Ea).clear()}},er=new WeakMap,Ea=new WeakMap,Na=new WeakMap,jd=new WeakMap,Td=new WeakMap,ka=new WeakMap,Od=new WeakMap,Pd=new WeakMap,IJ),hte=k.createContext(void 0),rt=t=>{const e=k.useContext(hte);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},hfe=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(hte.Provider,{value:t,children:e})),fte=k.createContext(!1),pte=()=>k.useContext(fte);fte.Provider;function ffe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var pfe=k.createContext(ffe()),mte=()=>k.useContext(pfe),gte=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?mM(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},yte=t=>{k.useEffect(()=>{t.clearReset()},[t])},vte=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||mM(r,[t.error,n])),bte=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},xte=(t,e)=>t.isLoading&&t.isFetching&&!e,sI=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Qy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function cy({queries:t,...e},r){const n=rt(),i=pte(),s=mte(),o=k.useMemo(()=>t.map(g=>{const v=n.defaultQueryOptions(g);return v._optimisticResults=i?"isRestoring":"optimistic",v}),[t,n,i]);o.forEach(g=>{bte(g);const v=n.getQueryCache().get(g.queryHash);gte(g,s,v)}),yte(s);const[a]=k.useState(()=>new cfe(n,o,e)),[l,u,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;k.useSyncExternalStore(k.useCallback(g=>h?a.subscribe(ir.batchCalls(g)):hn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),k.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,v)=>sI(o[v],g))?l.flatMap((g,v)=>{const y=o[v];if(y){const b=new yM(n,y);if(sI(y,g))return Qy(y,b,s);xte(g,i)&&Qy(y,b,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,v)=>{const y=o[v];return y&&vte({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return u(d())}function mfe(t,e,r){var f,p,m,g;const n=pte(),i=mte(),s=rt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",bte(o),gte(o,i,a),yte(i);const l=!s.getQueryCache().get(o.queryHash),[u]=k.useState(()=>new e(s,o)),d=u.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(v=>{const y=h?u.subscribe(ir.batchCalls(v)):hn;return u.updateResult(),y},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),k.useEffect(()=>{u.setOptions(o)},[o,u]),sI(o,d))throw Qy(o,u,i);if(vte({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!Nc&&xte(d,n)){const v=l?Qy(o,u,i):a==null?void 0:a.promise;v==null||v.catch(hn).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?d:u.trackResult(d)}function st(t,e){return mfe(t,yM)}function He(t,e){const r=rt(),[n]=k.useState(()=>new afe(r,t));k.useEffect(()=>{n.setOptions(t)},[n,t]);const i=k.useSyncExternalStore(k.useCallback(o=>n.subscribe(ir.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=k.useCallback((o,a)=>{n.mutate(o,a).catch(hn)},[n]);if(i.error&&mM(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function bM(){const t=window.prmConfig||{};return k.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function wte(t,e){return function(){return t.apply(e,arguments)}}const{toString:gfe}=Object.prototype,{getPrototypeOf:xM}=Object,{iterator:T0,toStringTag:Ste}=Symbol,O0=(t=>e=>{const r=gfe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ys=t=>(t=t.toLowerCase(),e=>O0(e)===t),P0=t=>e=>typeof e===t,{isArray:hh}=Array,Ld=P0("undefined");function sm(t){return t!==null&&!Ld(t)&&t.constructor!==null&&!Ld(t.constructor)&&ei(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const _te=ys("ArrayBuffer");function yfe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&_te(t.buffer),e}const vfe=P0("string"),ei=P0("function"),Ete=P0("number"),om=t=>t!==null&&typeof t=="object",bfe=t=>t===!0||t===!1,uy=t=>{if(O0(t)!=="object")return!1;const e=xM(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Ste in t)&&!(T0 in t)},xfe=t=>{if(!om(t)||sm(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},wfe=ys("Date"),Sfe=ys("File"),_fe=ys("Blob"),Efe=ys("FileList"),Nfe=t=>om(t)&&ei(t.pipe),kfe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ei(t.append)&&((e=O0(t))==="formdata"||e==="object"&&ei(t.toString)&&t.toString()==="[object FormData]"))},Cfe=ys("URLSearchParams"),[jfe,Tfe,Ofe,Pfe]=["ReadableStream","Request","Response","Headers"].map(ys),Ife=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function am(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),hh(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(sm(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function Nte(t,e){if(sm(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Bl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kte=t=>!Ld(t)&&t!==Bl;function oI(){const{caseless:t,skipUndefined:e}=kte(this)&&this||{},r={},n=(i,s)=>{const o=t&&Nte(r,s)||s;uy(r[o])&&uy(i)?r[o]=oI(r[o],i):uy(i)?r[o]=oI({},i):hh(i)?r[o]=i.slice():(!e||!Ld(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&am(arguments[i],n);return r}const Rfe=(t,e,r,{allOwnKeys:n}={})=>(am(e,(i,s)=>{r&&ei(i)?t[s]=wte(i,r):t[s]=i},{allOwnKeys:n}),t),Mfe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Afe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Dfe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&xM(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},$fe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Ffe=t=>{if(!t)return null;if(hh(t))return t;let e=t.length;if(!Ete(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},qfe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&xM(Uint8Array)),Lfe=(t,e)=>{const n=(t&&t[T0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Bfe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},zfe=ys("HTMLFormElement"),Vfe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),z4=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Wfe=ys("RegExp"),Cte=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};am(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},Ufe=t=>{Cte(t,(e,r)=>{if(ei(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(ei(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Hfe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return hh(t)?n(t):n(String(t).split(e)),r},Kfe=()=>{},Gfe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Yfe(t){return!!(t&&ei(t.append)&&t[Ste]==="FormData"&&t[T0])}const Qfe=t=>{const e=new Array(10),r=(n,i)=>{if(om(n)){if(e.indexOf(n)>=0)return;if(sm(n))return n;if(!("toJSON"in n)){e[i]=n;const s=hh(n)?[]:{};return am(n,(o,a)=>{const l=r(o,i+1);!Ld(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},Xfe=ys("AsyncFunction"),Jfe=t=>t&&(om(t)||ei(t))&&ei(t.then)&&ei(t.catch),jte=((t,e)=>t?setImmediate:e?((r,n)=>(Bl.addEventListener("message",({source:i,data:s})=>{i===Bl&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Bl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ei(Bl.postMessage)),Zfe=typeof queueMicrotask<"u"?queueMicrotask.bind(Bl):typeof process<"u"&&process.nextTick||jte,epe=t=>t!=null&&ei(t[T0]),z={isArray:hh,isArrayBuffer:_te,isBuffer:sm,isFormData:kfe,isArrayBufferView:yfe,isString:vfe,isNumber:Ete,isBoolean:bfe,isObject:om,isPlainObject:uy,isEmptyObject:xfe,isReadableStream:jfe,isRequest:Tfe,isResponse:Ofe,isHeaders:Pfe,isUndefined:Ld,isDate:wfe,isFile:Sfe,isBlob:_fe,isRegExp:Wfe,isFunction:ei,isStream:Nfe,isURLSearchParams:Cfe,isTypedArray:qfe,isFileList:Efe,forEach:am,merge:oI,extend:Rfe,trim:Ife,stripBOM:Mfe,inherits:Afe,toFlatObject:Dfe,kindOf:O0,kindOfTest:ys,endsWith:$fe,toArray:Ffe,forEachEntry:Lfe,matchAll:Bfe,isHTMLForm:zfe,hasOwnProperty:z4,hasOwnProp:z4,reduceDescriptors:Cte,freezeMethods:Ufe,toObjectSet:Hfe,toCamelCase:Vfe,noop:Kfe,toFiniteNumber:Gfe,findKey:Nte,global:Bl,isContextDefined:kte,isSpecCompliantForm:Yfe,toJSONObject:Qfe,isAsyncFn:Xfe,isThenable:Jfe,setImmediate:jte,asap:Zfe,isIterable:epe};function Ue(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}z.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const Tte=Ue.prototype,Ote={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ote[t]={value:t}});Object.defineProperties(Ue,Ote);Object.defineProperty(Tte,"isAxiosError",{value:!0});Ue.from=(t,e,r,n,i,s)=>{const o=Object.create(Tte);z.toFlatObject(t,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Ue.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const tpe=null;function aI(t){return z.isPlainObject(t)||z.isArray(t)}function Pte(t){return z.endsWith(t,"[]")?t.slice(0,-2):t}function V4(t,e,r){return t?t.concat(e).map(function(i,s){return i=Pte(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function rpe(t){return z.isArray(t)&&!t.some(aI)}const npe=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function I0(t,e,r){if(!z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=z.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!z.isUndefined(v[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(e);if(!z.isFunction(i))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(z.isDate(m))return m.toISOString();if(z.isBoolean(m))return m.toString();if(!l&&z.isBlob(m))throw new Ue("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(m)||z.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,v){let y=m;if(m&&!v&&typeof m=="object"){if(z.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(z.isArray(m)&&rpe(m)||(z.isFileList(m)||z.endsWith(g,"[]"))&&(y=z.toArray(m)))return g=Pte(g),y.forEach(function(w,x){!(z.isUndefined(w)||w===null)&&e.append(o===!0?V4([g],x,s):o===null?g:g+"[]",u(w))}),!1}return aI(m)?!0:(e.append(V4(v,g,s),u(m)),!1)}const h=[],f=Object.assign(npe,{defaultVisitor:d,convertValue:u,isVisitable:aI});function p(m,g){if(!z.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),z.forEach(m,function(y,b){(!(z.isUndefined(y)||y===null)&&i.call(e,y,z.isString(b)?b.trim():b,g,f))===!0&&p(y,g?g.concat(b):[b])}),h.pop()}}if(!z.isObject(t))throw new TypeError("data must be an object");return p(t),e}function W4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function wM(t,e){this._pairs=[],t&&I0(t,this,e)}const Ite=wM.prototype;Ite.append=function(e,r){this._pairs.push([e,r])};Ite.toString=function(e){const r=e?function(n){return e.call(this,n,W4)}:W4;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function ipe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Rte(t,e,r){if(!e)return t;const n=r&&r.encode||ipe;z.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=z.isURLSearchParams(e)?e.toString():new wM(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class U4{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Mte={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},spe=typeof URLSearchParams<"u"?URLSearchParams:wM,ope=typeof FormData<"u"?FormData:null,ape=typeof Blob<"u"?Blob:null,lpe={isBrowser:!0,classes:{URLSearchParams:spe,FormData:ope,Blob:ape},protocols:["http","https","file","blob","url","data"]},SM=typeof window<"u"&&typeof document<"u",lI=typeof navigator=="object"&&navigator||void 0,cpe=SM&&(!lI||["ReactNative","NativeScript","NS"].indexOf(lI.product)<0),upe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",dpe=SM&&window.location.href||"http://localhost",hpe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:SM,hasStandardBrowserEnv:cpe,hasStandardBrowserWebWorkerEnv:upe,navigator:lI,origin:dpe},Symbol.toStringTag,{value:"Module"})),mn={...hpe,...lpe};function fpe(t,e){return I0(t,new mn.classes.URLSearchParams,{visitor:function(r,n,i,s){return mn.isNode&&z.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function ppe(t){return z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function mpe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Ate(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&z.isArray(i)?i.length:o,l?(z.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!z.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&z.isArray(i[o])&&(i[o]=mpe(i[o])),!a)}if(z.isFormData(t)&&z.isFunction(t.entries)){const r={};return z.forEachEntry(t,(n,i)=>{e(ppe(n),i,r,0)}),r}return null}function gpe(t,e,r){if(z.isString(t))try{return(e||JSON.parse)(t),z.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const lm={transitional:Mte,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=z.isObject(e);if(s&&z.isHTMLForm(e)&&(e=new FormData(e)),z.isFormData(e))return i?JSON.stringify(Ate(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return fpe(e,this.formSerializer).toString();if((a=z.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return I0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),gpe(e)):e}],transformResponse:[function(e){const r=this.transitional||lm.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ue.from(a,Ue.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mn.classes.FormData,Blob:mn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],t=>{lm.headers[t]={}});const ype=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vpe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&ype[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},H4=Symbol("internals");function rf(t){return t&&String(t).trim().toLowerCase()}function dy(t){return t===!1||t==null?t:z.isArray(t)?t.map(dy):String(t)}function bpe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const xpe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _x(t,e,r,n,i){if(z.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!z.isString(e)){if(z.isString(n))return e.indexOf(n)!==-1;if(z.isRegExp(n))return n.test(e)}}function wpe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Spe(t,e){const r=z.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let ti=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,u){const d=rf(l);if(!d)throw new Error("header name must be a non-empty string");const h=z.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=dy(a))}const o=(a,l)=>z.forEach(a,(u,d)=>s(u,d,l));if(z.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(z.isString(e)&&(e=e.trim())&&!xpe(e))o(vpe(e),r);else if(z.isObject(e)&&z.isIterable(e)){let a={},l,u;for(const d of e){if(!z.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(l=a[u])?z.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=rf(e),e){const n=z.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return bpe(i);if(z.isFunction(r))return r.call(this,i,n);if(z.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=rf(e),e){const n=z.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||_x(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=rf(o),o){const a=z.findKey(n,o);a&&(!r||_x(n,n[a],a,r))&&(delete n[a],i=!0)}}return z.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||_x(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return z.forEach(this,(i,s)=>{const o=z.findKey(n,s);if(o){r[o]=dy(i),delete r[s];return}const a=e?wpe(s):String(s).trim();a!==s&&delete r[s],r[a]=dy(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return z.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&z.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[H4]=this[H4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=rf(o);n[a]||(Spe(i,o),n[a]=!0)}return z.isArray(e)?e.forEach(s):s(e),this}};ti.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(ti.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});z.freezeMethods(ti);function Ex(t,e){const r=this||lm,n=e||r,i=ti.from(n.headers);let s=n.data;return z.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Dte(t){return!!(t&&t.__CANCEL__)}function fh(t,e,r){Ue.call(this,t??"canceled",Ue.ERR_CANCELED,e,r),this.name="CanceledError"}z.inherits(fh,Ue,{__CANCEL__:!0});function $te(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ue("Request failed with status code "+r.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function _pe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Epe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=n[s];o||(o=u),r[i]=l,n[i]=u;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function Npe(t,e){let r=0,n=1e3/e,i,s;const o=(u,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-r;h>=n?o(u,d):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const Xy=(t,e,r=3)=>{let n=0;const i=Epe(50,250);return Npe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,u=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},K4=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},G4=t=>(...e)=>z.asap(()=>t(...e)),kpe=mn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,mn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(mn.origin),mn.navigator&&/(msie|trident)/i.test(mn.navigator.userAgent)):()=>!0,Cpe=mn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];z.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),z.isString(n)&&a.push(`path=${n}`),z.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),z.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function jpe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Tpe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Fte(t,e,r){let n=!jpe(e);return t&&(n||r==!1)?Tpe(t,e):e}const Y4=t=>t instanceof ti?{...t}:t;function Cc(t,e){e=e||{};const r={};function n(u,d,h,f){return z.isPlainObject(u)&&z.isPlainObject(d)?z.merge.call({caseless:f},u,d):z.isPlainObject(d)?z.merge({},d):z.isArray(d)?d.slice():d}function i(u,d,h,f){if(z.isUndefined(d)){if(!z.isUndefined(u))return n(void 0,u,h,f)}else return n(u,d,h,f)}function s(u,d){if(!z.isUndefined(d))return n(void 0,d)}function o(u,d){if(z.isUndefined(d)){if(!z.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function a(u,d,h){if(h in e)return n(u,d);if(h in t)return n(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d,h)=>i(Y4(u),Y4(d),h,!0)};return z.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);z.isUndefined(f)&&h!==a||(r[d]=f)}),r}const qte=t=>{const e=Cc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=ti.from(o),e.url=Rte(Fte(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),z.isFormData(r)){if(mn.hasStandardBrowserEnv||mn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(z.isFunction(r.getHeaders)){const l=r.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{u.includes(d.toLowerCase())&&o.set(d,h)})}}if(mn.hasStandardBrowserEnv&&(n&&z.isFunction(n)&&(n=n(e)),n||n!==!1&&kpe(e.url))){const l=i&&s&&Cpe.read(s);l&&o.set(i,l)}return e},Ope=typeof XMLHttpRequest<"u",Ppe=Ope&&function(t){return new Promise(function(r,n){const i=qte(t);let s=i.data;const o=ti.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function y(){if(!v)return;const w=ti.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:t,request:v};$te(function(E){r(E),g()},function(E){n(E),g()},S),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(n(new Ue("Request aborted",Ue.ECONNABORTED,t,v)),v=null)},v.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new Ue(S,Ue.ERR_NETWORK,t,v);_.event=x||null,n(_),v=null},v.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||Mte;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Ue(x,S.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,t,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&z.forEach(o.toJSON(),function(x,S){v.setRequestHeader(S,x)}),z.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),u&&([f,m]=Xy(u,!0),v.addEventListener("progress",f)),l&&v.upload&&([h,p]=Xy(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{v&&(n(!w||w.type?new fh(null,t,v):w),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=_pe(i.url);if(b&&mn.protocols.indexOf(b)===-1){n(new Ue("Unsupported protocol "+b+":",Ue.ERR_BAD_REQUEST,t));return}v.send(s||null)})},Ipe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(u){if(!i){i=!0,a();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Ue?d:new fh(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Ue(`timeout ${e} of ms exceeded`,Ue.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>z.asap(a),l}},Rpe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},Mpe=async function*(t,e){for await(const r of Ape(t))yield*Rpe(r,e)},Ape=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},Q4=(t,e,r,n)=>{const i=Mpe(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await i.next();if(u){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},X4=64*1024,{isFunction:kg}=z,Dpe=(({Request:t,Response:e})=>({Request:t,Response:e}))(z.global),{ReadableStream:J4,TextEncoder:Z4}=z.global,e5=(t,...e)=>{try{return!!t(...e)}catch{return!1}},$pe=t=>{t=z.merge.call({skipUndefined:!0},Dpe,t);const{fetch:e,Request:r,Response:n}=t,i=e?kg(e):typeof fetch=="function",s=kg(r),o=kg(n);if(!i)return!1;const a=i&&kg(J4),l=i&&(typeof Z4=="function"?(m=>g=>m.encode(g))(new Z4):async m=>new Uint8Array(await new r(m).arrayBuffer())),u=s&&a&&e5(()=>{let m=!1;const g=new r(mn.origin,{body:new J4,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&e5(()=>z.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,v)=>{let y=g&&g[m];if(y)return y.call(g);throw new Ue(`Response type '${m}' is not supported`,Ue.ERR_NOT_SUPPORT,v)})});const f=async m=>{if(m==null)return 0;if(z.isBlob(m))return m.size;if(z.isSpecCompliantForm(m))return(await new r(mn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(z.isArrayBufferView(m)||z.isArrayBuffer(m))return m.byteLength;if(z.isURLSearchParams(m)&&(m=m+""),z.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const v=z.toFiniteNumber(m.getContentLength());return v??f(g)};return async m=>{let{url:g,method:v,data:y,signal:b,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:E,headers:N,withCredentials:C="same-origin",fetchOptions:j}=qte(m),T=e||fetch;E=E?(E+"").toLowerCase():"text";let P=Ipe([b,w&&w.toAbortSignal()],x),O=null;const D=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let q;try{if(_&&u&&v!=="get"&&v!=="head"&&(q=await p(N,y))!==0){let Q=new r(g,{method:"POST",body:y,duplex:"half"}),pe;if(z.isFormData(y)&&(pe=Q.headers.get("content-type"))&&N.setContentType(pe),Q.body){const[H,oe]=K4(q,Xy(G4(_)));y=Q4(Q.body,X4,H,oe)}}z.isString(C)||(C=C?"include":"omit");const $=s&&"credentials"in r.prototype,L={...j,signal:P,method:v.toUpperCase(),headers:N.normalize().toJSON(),body:y,duplex:"half",credentials:$?C:void 0};O=s&&new r(g,L);let M=await(s?T(O,j):T(g,L));const B=d&&(E==="stream"||E==="response");if(d&&(S||B&&D)){const Q={};["status","statusText","headers"].forEach(je=>{Q[je]=M[je]});const pe=z.toFiniteNumber(M.headers.get("content-length")),[H,oe]=S&&K4(pe,Xy(G4(S),!0))||[];M=new n(Q4(M.body,X4,H,()=>{oe&&oe(),D&&D()}),Q)}E=E||"text";let Y=await h[z.findKey(h,E)||"text"](M,m);return!B&&D&&D(),await new Promise((Q,pe)=>{$te(Q,pe,{data:Y,headers:ti.from(M.headers),status:M.status,statusText:M.statusText,config:m,request:O})})}catch($){throw D&&D(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Ue("Network Error",Ue.ERR_NETWORK,m,O),{cause:$.cause||$}):Ue.from($,$&&$.code,m,O)}}},Fpe=new Map,Lte=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,u,d=Fpe;for(;a--;)l=s[a],u=d.get(l),u===void 0&&d.set(l,u=a?new Map:$pe(e)),d=u;return u};Lte();const _M={http:tpe,xhr:Ppe,fetch:{get:Lte}};z.forEach(_M,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const t5=t=>`- ${t}`,qpe=t=>z.isFunction(t)||t===null||t===!1;function Lpe(t,e){t=z.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!qpe(n)&&(i=_M[(a=String(n)).toLowerCase()],i===void 0))throw new Ue(`Unknown adapter '${a}'`);if(i&&(z.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(t5).join(`
`):" "+t5(o[0]):"as no adapter specified";throw new Ue("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const Bte={getAdapter:Lpe,adapters:_M};function Nx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fh(null,t)}function r5(t){return Nx(t),t.headers=ti.from(t.headers),t.data=Ex.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Bte.getAdapter(t.adapter||lm.adapter,t)(t).then(function(n){return Nx(t),n.data=Ex.call(t,t.transformResponse,n),n.headers=ti.from(n.headers),n},function(n){return Dte(n)||(Nx(t),n&&n.response&&(n.response.data=Ex.call(t,t.transformResponse,n.response),n.response.headers=ti.from(n.response.headers))),Promise.reject(n)})}const zte="1.13.2",R0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{R0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const n5={};R0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+zte+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Ue(i(o," has been removed"+(r?" in "+r:"")),Ue.ERR_DEPRECATED);return r&&!n5[o]&&(n5[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};R0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Bpe(t,e,r){if(typeof t!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Ue("option "+s+" must be "+l,Ue.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ue("Unknown option "+s,Ue.ERR_BAD_OPTION)}}const hy={assertOptions:Bpe,validators:R0},Ss=hy.validators;let lc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new U4,response:new U4}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Cc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&hy.assertOptions(n,{silentJSONParsing:Ss.transitional(Ss.boolean),forcedJSONParsing:Ss.transitional(Ss.boolean),clarifyTimeoutError:Ss.transitional(Ss.boolean)},!1),i!=null&&(z.isFunction(i)?r.paramsSerializer={serialize:i}:hy.assertOptions(i,{encode:Ss.function,serialize:Ss.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),hy.assertOptions(r,{baseUrl:Ss.spelling("baseURL"),withXsrfToken:Ss.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&z.merge(s.common,s[r.method]);s&&z.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=ti.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[r5.bind(this),void 0];for(m.unshift(...a),m.push(...u),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(v){g.call(this,v);break}}try{d=r5.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Cc(this.defaults,e);const r=Fte(e.baseURL,e.url,e.allowAbsoluteUrls);return Rte(r,e.params,e.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(e){lc.prototype[e]=function(r,n){return this.request(Cc(n||{},{method:e,url:r,data:(n||{}).data}))}});z.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(Cc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}lc.prototype[e]=r(),lc.prototype[e+"Form"]=r(!0)});let zpe=class Vte{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new fh(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Vte(function(i){e=i}),cancel:e}}};function Vpe(t){return function(r){return t.apply(null,r)}}function Wpe(t){return z.isObject(t)&&t.isAxiosError===!0}const cI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(cI).forEach(([t,e])=>{cI[e]=t});function Wte(t){const e=new lc(t),r=wte(lc.prototype.request,e);return z.extend(r,lc.prototype,e,{allOwnKeys:!0}),z.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Wte(Cc(t,i))},r}const hr=Wte(lm);hr.Axios=lc;hr.CanceledError=fh;hr.CancelToken=zpe;hr.isCancel=Dte;hr.VERSION=zte;hr.toFormData=I0;hr.AxiosError=Ue;hr.Cancel=hr.CanceledError;hr.all=function(e){return Promise.all(e)};hr.spread=Vpe;hr.isAxiosError=Wpe;hr.mergeConfig=Cc;hr.AxiosHeaders=ti;hr.formToJSON=t=>Ate(z.isHTMLForm(t)?new FormData(t):t);hr.getAdapter=Bte.getAdapter;hr.HttpStatusCode=cI;hr.default=hr;const{Axios:LFe,AxiosError:BFe,CanceledError:zFe,isCancel:VFe,CancelToken:WFe,VERSION:UFe,all:HFe,Cancel:KFe,isAxiosError:GFe,spread:YFe,toFormData:QFe,AxiosHeaders:XFe,HttpStatusCode:JFe,formToJSON:ZFe,getAdapter:e3e,mergeConfig:t3e}=hr,uI=window.prmConfig||{},X=hr.create({baseURL:uI.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":uI.nonce||""}});X.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});X.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=uI.loginUrl||"/wp-login.php"),Promise.reject(t)});const Ze={getPeople:t=>X.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>X.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>X.post("/wp/v2/people",t),updatePerson:(t,e)=>X.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>X.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>X.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>X.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>X.post("/wp/v2/companies",t),updateCompany:(t,e)=>X.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>X.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>X.get("/wp/v2/important-dates",{params:t}),getDate:t=>X.get(`/wp/v2/important-dates/${t}`),createDate:t=>X.post("/wp/v2/important-dates",t),updateDate:(t,e)=>X.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>X.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>X.get("/wp/v2/person_label"),getCompanyLabels:()=>X.get("/wp/v2/company_label"),getRelationshipTypes:()=>X.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>X.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>X.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>X.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>X.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>X.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),X.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},_e={getVersion:()=>X.get("/prm/v1/version"),getDashboard:()=>X.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>X.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>X.get("/prm/v1/user/me"),getUsers:()=>X.get("/prm/v1/users"),approveUser:t=>X.post(`/prm/v1/users/${t}/approve`),denyUser:t=>X.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>X.delete(`/prm/v1/users/${t}`),search:t=>X.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>X.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>X.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>X.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>X.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>X.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>X.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>X.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>X.get("/prm/v1/user/slack-status"),disconnectSlack:()=>X.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>X.get("/prm/v1/slack/channels"),getSlackTargets:()=>X.get("/prm/v1/slack/targets"),updateSlackTargets:t=>X.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>X.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>X.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>X.get(`/prm/v1/people/${t}/notes`),createNote:(t,e,r="private")=>X.post(`/prm/v1/people/${t}/notes`,{content:e,visibility:r}),updateNote:(t,e,r=null)=>X.put(`/prm/v1/notes/${t}`,{content:e,...r&&{visibility:r}}),deleteNote:t=>X.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>X.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>X.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>X.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>X.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>X.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>X.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>X.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>X.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>X.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>X.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>X.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>X.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),X.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),X.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>X.get("/prm/v1/carddav/urls"),getAppPasswords:t=>X.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>X.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>X.delete(`/wp/v2/users/${t}/application-passwords/${e}`),getWorkspaces:()=>X.get("/prm/v1/workspaces"),getWorkspace:t=>X.get(`/prm/v1/workspaces/${t}`),createWorkspace:t=>X.post("/prm/v1/workspaces",t),updateWorkspace:(t,e)=>X.put(`/prm/v1/workspaces/${t}`,e),deleteWorkspace:t=>X.delete(`/prm/v1/workspaces/${t}`),addWorkspaceMember:(t,e)=>X.post(`/prm/v1/workspaces/${t}/members`,e),removeWorkspaceMember:(t,e)=>X.delete(`/prm/v1/workspaces/${t}/members/${e}`),updateWorkspaceMember:(t,e,r)=>X.put(`/prm/v1/workspaces/${t}/members/${e}`,r),searchWorkspaceMembers:async(t,e)=>{const{data:r}=await X.get("/prm/v1/workspaces/members/search",{params:{workspace_ids:t.join(","),query:e}});return r},getWorkspaceInvites:t=>X.get(`/prm/v1/workspaces/${t}/invites`),createWorkspaceInvite:(t,e)=>X.post(`/prm/v1/workspaces/${t}/invites`,e),revokeWorkspaceInvite:(t,e)=>X.delete(`/prm/v1/workspaces/${t}/invites/${e}`),validateInvite:t=>X.get(`/prm/v1/invites/${t}`),acceptInvite:t=>X.post(`/prm/v1/invites/${t}/accept`),getPostShares:(t,e)=>X.get(`/prm/v1/${e}/${t}/shares`),sharePost:(t,e,r)=>X.post(`/prm/v1/${e}/${t}/shares`,r),unsharePost:(t,e,r)=>X.delete(`/prm/v1/${e}/${t}/shares/${r}`),searchUsers:t=>X.get("/prm/v1/users/search",{params:{q:t}}),getIcalUrl:()=>X.get("/prm/v1/user/ical-url")};function Upe({checkInterval:t=5*60*1e3}={}){const[e,r]=k.useState(!1),[n]=k.useState(()=>{var l;return((l=window.prmConfig)==null?void 0:l.version)||null}),[i,s]=k.useState(null),o=k.useCallback(async()=>{var l;if(n)try{const d=(l=(await _e.getVersion()).data)==null?void 0:l.version;d&&d!==n&&(s(d),r(!0))}catch(u){console.debug("Version check failed:",u.message)}},[n]),a=k.useCallback(()=>{window.location.reload(!0)},[]);return k.useEffect(()=>{const l=setTimeout(o,5e3);return()=>clearTimeout(l)},[o]),k.useEffect(()=>{const l=setInterval(o,t);return()=>clearInterval(l)},[o,t]),k.useEffect(()=>{const l=()=>{document.visibilityState==="visible"&&o()};return document.addEventListener("visibilitychange",l),()=>document.removeEventListener("visibilitychange",l)},[o]),{hasUpdate:e,currentVersion:n,latestVersion:i,reload:a,checkVersion:o}}/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kpe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(t,e)=>{const r=k.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},d)=>k.createElement("svg",{ref:d,...Hpe,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Kpe(t)}`,a].join(" "),...u},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gpe=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ype=ue("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qpe=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xpe=ue("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=ue("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=ue("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=ue("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=ue("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ue("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=ue("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jpe=ue("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zpe=ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=ue("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=ue("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=ue("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eme=ue("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=ue("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tme=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rme=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nme=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ime=ue("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sme=ue("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ome=ue("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ere=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ame=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lme=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cme=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ume=ue("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dme=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=ue("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hme=ue("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tre=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rre=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nre=ue("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=ue("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fme=ue("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ire=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sre=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=ue("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=ue("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pme=ue("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mme=ue("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gme=ue("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=ue("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yme=ue("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ore=ue("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=ue("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bme=ue("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function Tn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function cr(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Tn(e)}function ld(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Tn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Tn(e)}function Js(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const It={all:["people"],lists:()=>[...It.all,"list"],list:t=>[...It.lists(),t],details:()=>[...It.all,"detail"],detail:t=>[...It.details(),t],timeline:t=>[...It.detail(t),"timeline"],dates:t=>[...It.detail(t),"dates"]};function are(t){var i,s,o,a,l,u,d,h,f,p,m,g,v,y,b,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(u=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:u.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((v=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:v.map(S=>S.name))||[],n=Tn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((b=t.acf)==null?void 0:b.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function Gc(t={}){return st({queryKey:It.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await Ze.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(are);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function lre(t){return st({queryKey:It.detail(t),queryFn:async()=>{const e=await Ze.getPerson(t,{_embed:!0});return are(e.data)},enabled:!!t})}function xme(t){return st({queryKey:It.timeline(t),queryFn:async()=>(await _e.getPersonTimeline(t)).data,enabled:!!t})}function wme(t){return st({queryKey:It.dates(t),queryFn:async()=>(await _e.getPersonDates(t)).data,enabled:!!t})}function cre({onSuccess:t}={}){const e=rt();return He({mutationFn:async r=>{const n=[];r.email&&n.push({contact_type:"email",contact_value:r.email,contact_label:"Email"}),r.phone&&n.push({contact_type:r.phone_type||"mobile",contact_value:r.phone,contact_label:r.phone_type==="mobile"?"Mobile":"Phone"});const i={title:`${r.first_name} ${r.last_name}`.trim(),status:"publish",acf:{first_name:r.first_name,last_name:r.last_name,nickname:r.nickname,gender:r.gender||null,pronouns:r.pronouns||null,how_we_met:r.how_we_met,is_favorite:r.is_favorite,contact_info:n,_visibility:r.visibility||"private",_assigned_workspaces:r.assigned_workspaces||[]}},s=await Ze.createPerson(i),o=s.data.id;if(r.email)try{await _e.sideloadGravatar(o,r.email)}catch{}if(r.birthday&&r.birthdayType)try{await Ze.createDate({title:`${r.first_name}'s Birthday`,status:"publish",date_type:[r.birthdayType.id],acf:{date_value:r.birthday,is_recurring:!0,related_people:[o],_visibility:"private"}})}catch{}return s.data},onSuccess:r=>{e.invalidateQueries({queryKey:It.lists()}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["reminders"]}),t==null||t(r)}})}function Sme(){const t=rt();return He({mutationFn:({id:e,data:r})=>Ze.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:It.detail(r)}),t.invalidateQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:It.detail(a)})})}})}function _me(){const t=rt();return He({mutationFn:e=>Ze.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:It.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Eme(){const t=rt();return He({mutationFn:({personId:e,content:r,visibility:n="private"})=>_e.createNote(e,r,n),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function Nme(){const t=rt();return He({mutationFn:({noteId:e,personId:r})=>_e.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function PM(){const t=rt();return He({mutationFn:({personId:e,data:r})=>_e.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function kme(){const t=rt();return He({mutationFn:({activityId:e,data:r,personId:n})=>_e.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function Cme(){const t=rt();return He({mutationFn:({activityId:e,personId:r})=>_e.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function ure(){const t=rt();return He({mutationFn:({personId:e,data:r})=>_e.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function jme(){const t=rt();return He({mutationFn:({todoId:e,data:r,personId:n})=>_e.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function Tme(){const t=rt();return He({mutationFn:({todoId:e,personId:r})=>_e.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function Ome(){const t=rt();return He({mutationFn:({dateId:e,personId:r})=>Ze.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:It.dates(r)}),t.invalidateQueries({queryKey:It.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function dre({onSuccess:t}={}){const e=rt();return He({mutationFn:async r=>{const n={title:r.title,status:"publish",date_type:r.date_type,acf:{date_value:r.date_value,related_people:r.related_people,is_recurring:r.is_recurring,year_unknown:r.year_unknown,_visibility:"private"}};return(await Ze.createDate(n)).data},onSuccess:r=>{e.invalidateQueries({queryKey:["reminders"]}),t==null||t(r)}})}function hre({onSuccess:t}={}){const e=rt();return He({mutationFn:async r=>{const n={title:r.title,status:"publish",parent:r.parentId||0,acf:{website:r.website,industry:r.industry,investors:r.investors||[],_visibility:r.visibility||"private",_assigned_workspaces:r.assigned_workspaces||[]}};return(await Ze.createCompany(n)).data},onSuccess:r=>{e.invalidateQueries({queryKey:["companies"]}),e.invalidateQueries({queryKey:["dashboard"]}),t==null||t(r)}})}const Oc="Caelis";function mh(t){k.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Oc;document.title=`${t} - ${r}`}},[t])}function Pme(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function fre(t=null){const e=Bo();k.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=Pme(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=Oc}const n=((i=window.prmConfig)==null?void 0:i.siteName)||Oc;document.title=`${r} - ${n}`},[e.pathname,t])}function Ime(){return st({queryKey:["dashboard"],queryFn:async()=>(await _e.getDashboard()).data})}function Rme(t=30){return st({queryKey:["reminders",t],queryFn:async()=>(await _e.getReminders(t)).data})}function pre(t=!1){return st({queryKey:["todos",t],queryFn:async()=>(await _e.getAllTodos(t)).data})}function mre(){const t=rt();return He({mutationFn:({todoId:e,data:r})=>_e.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Mme(){const t=rt();return He({mutationFn:e=>_e.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Ame(t){const e=typeof t=="string"?t:"",r=e.length>=2;return st({queryKey:["search",e],queryFn:async()=>r?(await _e.search(e)).data:{people:[],companies:[]},enabled:r})}function gre({isOpen:t,onClose:e}){const[r,n]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(""),[l,u]=k.useState(!1),[d,h]=k.useState(""),{data:f=[],isLoading:p}=Gc(),m=ure(),g=rt(),v=k.useMemo(()=>{const _=d.toLowerCase().trim();let E=f;return _&&(E=f.filter(N=>{var C,j,T;return((C=N.name)==null?void 0:C.toLowerCase().includes(_))||((j=N.first_name)==null?void 0:j.toLowerCase().includes(_))||((T=N.last_name)==null?void 0:T.toLowerCase().includes(_))})),[...E].sort((N,C)=>(N.name||"").localeCompare(C.name||""))},[f,d]),y=k.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),b=()=>new Date().toISOString().split("T")[0];if(k.useEffect(()=>{t&&(n(""),s(b()),a(""),h(""),u(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch{}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),c.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:w,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{type:"button",onClick:()=>u(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?c.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?c.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(il,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-gray-900",children:y.name})]}):c.jsx("span",{className:"text-gray-400",children:"Select a person..."}),c.jsx(xp,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(nl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto max-h-48",children:p?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):v.length>0?v.map(_=>c.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),u(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?c.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(il,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),c.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}var um=t=>t.type==="checkbox",zl=t=>t instanceof Date,Wn=t=>t==null;const yre=t=>typeof t=="object";var yr=t=>!Wn(t)&&!Array.isArray(t)&&yre(t)&&!zl(t),vre=t=>yr(t)&&t.target?um(t.target)?t.target.checked:t.target.value:t,Dme=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,bre=(t,e)=>t.has(Dme(e)),$me=t=>{const e=t.constructor&&t.constructor.prototype;return yr(e)&&e.hasOwnProperty("isPrototypeOf")},IM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function At(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(IM&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(yr(t)&&$me(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=At(t[i]));return n}var F0=t=>/^\w*$/.test(t),Ot=t=>t===void 0,q0=t=>Array.isArray(t)?t.filter(Boolean):[],RM=t=>q0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),fe=(t,e,r)=>{if(!e||!yr(t))return r;const n=(F0(e)?[e]:RM(e)).reduce((i,s)=>Wn(i)?i:i[s],t);return Ot(n)||n===t?Ot(t[e])?r:t[e]:n},hi=t=>typeof t=="boolean",jn=t=>typeof t=="function",Et=(t,e,r)=>{let n=-1;const i=F0(e)?[e]:RM(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const u=t[a];l=yr(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Zy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$i={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},xre=Se.createContext(null);xre.displayName="HookFormContext";const L0=()=>Se.useContext(xre);var wre=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==$i.all&&(e._proxyFormState[o]=!n||$i.all),r&&(r[o]=!0),t[o]}});return i};const B0=typeof window<"u"?Se.useLayoutEffect:Se.useEffect;function Fme(t){const e=L0(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=Se.useState(r._formState),l=Se.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return B0(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:u=>{!n&&a({...r._formState,...u})}}),[i,n,s]),Se.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),Se.useMemo(()=>wre(o,r,l.current,!1),[o,r])}var fi=t=>typeof t=="string",mI=(t,e,r,n,i)=>fi(t)?(n&&e.watch.add(t),fe(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),fe(r,s))):(n&&(e.watchAll=!0),r),gI=t=>Wn(t)||!yre(t);function cs(t,e,r=new WeakSet){if(gI(t)||gI(e))return Object.is(t,e);if(zl(t)&&zl(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(zl(o)&&zl(a)||yr(o)&&yr(a)||Array.isArray(o)&&Array.isArray(a)?!cs(o,a,r):!Object.is(o,a))return!1}}return!0}function qme(t){const e=L0(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=Se.useRef(i),u=Se.useRef(a),d=Se.useRef(void 0),h=Se.useRef(r),f=Se.useRef(n);u.current=a;const[p,m]=Se.useState(()=>{const x=r._getWatch(n,l.current);return u.current?u.current(x):x}),g=Se.useCallback(x=>{const S=mI(n,r._names,x||r._formValues,!1,l.current);return u.current?u.current(S):S},[r._formValues,r._names,n]),v=Se.useCallback(x=>{if(!s){const S=mI(n,r._names,x||r._formValues,!1,l.current);if(u.current){const _=u.current(S);cs(_,d.current)||(m(_),d.current=_)}else m(S)}},[r._formValues,r._names,s,n]);B0(()=>((h.current!==r||!cs(f.current,n))&&(h.current=r,f.current=n,v()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{v(x.values)}})),[r,o,n,v]),Se.useEffect(()=>r._removeUnmounted());const y=h.current!==r,b=f.current,w=Se.useMemo(()=>{if(s)return null;const x=!y&&!cs(b,n);return y||x?g():null},[s,y,n,b,g]);return w!==null?w:p}function Lme(t){const e=L0(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=bre(i._names.array,r),u=Se.useMemo(()=>fe(i._formValues,r,fe(i._defaultValues,r,o)),[i,r,o]),d=qme({control:i,name:r,defaultValue:u,exact:a}),h=Fme({control:i,name:r,exact:a}),f=Se.useRef(t),p=Se.useRef(void 0),m=Se.useRef(i.register(r,{...t.rules,value:d,...hi(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=Se.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!fe(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!fe(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!fe(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!fe(h.validatingFields,r)},error:{enumerable:!0,get:()=>fe(h.errors,r)}}),[h,r]),v=Se.useCallback(x=>m.current.onChange({target:{value:vre(x),name:r},type:Zy.CHANGE}),[r]),y=Se.useCallback(()=>m.current.onBlur({target:{value:fe(i._formValues,r),name:r},type:Zy.BLUR}),[r,i._formValues]),b=Se.useCallback(x=>{const S=fe(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>jn(x.focus)&&x.focus(),select:()=>jn(x.select)&&x.select(),setCustomValidity:_=>jn(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>jn(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=Se.useMemo(()=>({name:r,value:d,...hi(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:v,onBlur:y,ref:b}),[r,n,h.disabled,v,y,b,d]);return Se.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...hi(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(E,N)=>{const C=fe(i._fields,E);C&&C._f&&(C._f.mount=N)};if(_(r,!0),x){const E=At(fe(i._options.defaultValues,r,f.current.defaultValue));Et(i._defaultValues,r,E),Ot(fe(i._formValues,r))&&Et(i._formValues,r,E)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),Se.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Se.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const ev=t=>t.render(Lme(t));var Bme=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},Qn=t=>Array.isArray(t)?t:[t],a5=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function Sre(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&yr(i)&&s){const o=Sre(i,s);yr(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var un=t=>yr(t)&&!Object.keys(t).length,MM=t=>t.type==="file",tv=t=>{if(!IM)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},_re=t=>t.type==="select-multiple",AM=t=>t.type==="radio",zme=t=>AM(t)||um(t),Cx=t=>tv(t)&&t.isConnected;function Vme(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Ot(t)?n++:t[e[n++]];return t}function Wme(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ot(t[e]))return!1;return!0}function lr(t,e){const r=Array.isArray(e)?e:F0(e)?[e]:RM(e),n=r.length===1?t:Vme(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(yr(n)&&un(n)||Array.isArray(n)&&Wme(n))&&lr(t,r.slice(0,-1)),t}var Ume=t=>{for(const e in t)if(jn(t[e]))return!0;return!1};function Ere(t){return Array.isArray(t)||yr(t)&&!Ume(t)}function yI(t,e={}){for(const r in t){const n=t[r];Ere(n)?(e[r]=Array.isArray(n)?[]:{},yI(n,e[r])):Ot(n)||(e[r]=!0)}return e}function Pu(t,e,r){r||(r=yI(e));for(const n in t){const i=t[n];if(Ere(i))Ot(e)||gI(r[n])?r[n]=yI(i,Array.isArray(i)?[]:{}):Pu(i,Wn(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!cs(i,s)}}return r}const l5={value:!1,isValid:!1},c5={value:!0,isValid:!0};var Nre=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ot(t[0].attributes.value)?Ot(t[0].value)||t[0].value===""?c5:{value:t[0].value,isValid:!0}:c5:l5}return l5},kre=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Ot(t)?t:e?t===""?NaN:t&&+t:r&&fi(t)?new Date(t):n?n(t):t;const u5={isValid:!1,value:null};var Cre=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,u5):u5;function d5(t){const e=t.ref;return MM(e)?e.files:AM(e)?Cre(t.refs).value:_re(e)?[...e.selectedOptions].map(({value:r})=>r):um(e)?Nre(t.refs).value:kre(Ot(e.value)?t.ref.value:e.value,t)}var Hme=(t,e,r,n)=>{const i={};for(const s of t){const o=fe(e,s);o&&Et(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},rv=t=>t instanceof RegExp,nf=t=>Ot(t)?t:rv(t)?t.source:yr(t)?rv(t.value)?t.value.source:t.value:t,Gu=t=>({isOnSubmit:!t||t===$i.onSubmit,isOnBlur:t===$i.onBlur,isOnChange:t===$i.onChange,isOnAll:t===$i.all,isOnTouch:t===$i.onTouched});const h5="AsyncFunction";var Kme=t=>!!t&&!!t.validate&&!!(jn(t.validate)&&t.validate.constructor.name===h5||yr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===h5)),Gme=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),vI=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const cd=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=fe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(cd(a,e))break}else if(yr(a)&&cd(a,e))break}}};function f5(t,e,r){const n=fe(t,r);if(n||F0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=fe(e,s),a=fe(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var Yme=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return un(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||$i.all))},Qme=(t,e,r)=>!t||!e||t===e||Qn(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),Xme=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,Jme=(t,e)=>!q0(fe(t,e)).length&&lr(t,e),jre=(t,e,r)=>{const n=Qn(fe(t,r));return Et(n,"root",e[r]),Et(t,r,n),t};function p5(t,e,r="validate"){if(fi(t)||Array.isArray(t)&&t.every(fi)||hi(t)&&!t)return{type:r,message:fi(t)?t:"",ref:e}}var Eu=t=>yr(t)&&!rv(t)?t:{value:t,message:""},bI=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:v,mount:y}=t._f,b=fe(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=P=>{i&&w.reportValidity&&(w.setCustomValidity(hi(P)?"":P||""),w.reportValidity())},S={},_=AM(o),E=um(o),N=_||E,C=(v||MM(o))&&Ot(o.value)&&Ot(b)||tv(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,j=Bme.bind(null,g,n,S),T=(P,O,D,q=Zs.maxLength,$=Zs.minLength)=>{const L=P?O:D;S[g]={type:P?q:$,message:L,ref:o,...j(P?q:$,L)}};if(s?!Array.isArray(b)||!b.length:l&&(!N&&(C||Wn(b))||hi(b)&&!b||E&&!Nre(a).isValid||_&&!Cre(a).isValid)){const{value:P,message:O}=fi(l)?{value:!!l,message:l}:Eu(l);if(P&&(S[g]={type:Zs.required,message:O,ref:w,...j(Zs.required,O)},!n))return x(O),S}if(!C&&(!Wn(h)||!Wn(f))){let P,O;const D=Eu(f),q=Eu(h);if(!Wn(b)&&!isNaN(b)){const $=o.valueAsNumber||b&&+b;Wn(D.value)||(P=$>D.value),Wn(q.value)||(O=$<q.value)}else{const $=o.valueAsDate||new Date(b),L=Y=>new Date(new Date().toDateString()+" "+Y),M=o.type=="time",B=o.type=="week";fi(D.value)&&b&&(P=M?L(b)>L(D.value):B?b>D.value:$>new Date(D.value)),fi(q.value)&&b&&(O=M?L(b)<L(q.value):B?b<q.value:$<new Date(q.value))}if((P||O)&&(T(!!P,D.message,q.message,Zs.max,Zs.min),!n))return x(S[g].message),S}if((u||d)&&!C&&(fi(b)||s&&Array.isArray(b))){const P=Eu(u),O=Eu(d),D=!Wn(P.value)&&b.length>+P.value,q=!Wn(O.value)&&b.length<+O.value;if((D||q)&&(T(D,P.message,O.message),!n))return x(S[g].message),S}if(p&&!C&&fi(b)){const{value:P,message:O}=Eu(p);if(rv(P)&&!b.match(P)&&(S[g]={type:Zs.pattern,message:O,ref:o,...j(Zs.pattern,O)},!n))return x(O),S}if(m){if(jn(m)){const P=await m(b,r),O=p5(P,w);if(O&&(S[g]={...O,...j(Zs.validate,O.message)},!n))return x(O.message),S}else if(yr(m)){let P={};for(const O in m){if(!un(P)&&!n)break;const D=p5(await m[O](b,r),w,O);D&&(P={...D,...j(O,D.message)},x(D.message),n&&(S[g]=P))}if(!un(P)&&(S[g]={ref:w,...P},!n))return S}}return x(!0),S};const Zme={mode:$i.onSubmit,reValidateMode:$i.onChange,shouldFocusError:!0};function ege(t={}){let e={...Zme,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:jn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=yr(e.defaultValues)||yr(e.values)?At(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:At(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:a5(),state:a5()},m=e.criteriaMode===$i.all,g=A=>F=>{clearTimeout(u),u=setTimeout(A,F)},v=async A=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||A)){let F;e.resolver?(F=un((await N()).errors),y()):F=await j(n,!0),F!==r.isValid&&p.state.next({isValid:F})}},y=(A,F)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((A||Array.from(a.mount)).forEach(V=>{V&&(F?Et(r.validatingFields,V,F):lr(r.validatingFields,V))}),p.state.next({validatingFields:r.validatingFields,isValidating:!un(r.validatingFields)}))},b=(A,F=[],V,le,ee=!0,Z=!0)=>{if(le&&V&&!e.disabled){if(o.action=!0,Z&&Array.isArray(fe(n,A))){const ye=V(fe(n,A),le.argA,le.argB);ee&&Et(n,A,ye)}if(Z&&Array.isArray(fe(r.errors,A))){const ye=V(fe(r.errors,A),le.argA,le.argB);ee&&Et(r.errors,A,ye),Jme(r.errors,A)}if((h.touchedFields||f.touchedFields)&&Z&&Array.isArray(fe(r.touchedFields,A))){const ye=V(fe(r.touchedFields,A),le.argA,le.argB);ee&&Et(r.touchedFields,A,ye)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Pu(i,s)),p.state.next({name:A,isDirty:P(A,F),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Et(s,A,F)},w=(A,F)=>{Et(r.errors,A,F),p.state.next({errors:r.errors})},x=A=>{r.errors=A,p.state.next({errors:r.errors,isValid:!1})},S=(A,F,V,le)=>{const ee=fe(n,A);if(ee){const Z=fe(s,A,Ot(V)?fe(i,A):V);Ot(Z)||le&&le.defaultChecked||F?Et(s,A,F?Z:d5(ee._f)):q(A,Z),o.mount&&!o.action&&v()}},_=(A,F,V,le,ee)=>{let Z=!1,ye=!1;const Ve={name:A};if(!e.disabled){if(!V||le){(h.isDirty||f.isDirty)&&(ye=r.isDirty,r.isDirty=Ve.isDirty=P(),Z=ye!==Ve.isDirty);const Ke=cs(fe(i,A),F);ye=!!fe(r.dirtyFields,A),Ke?lr(r.dirtyFields,A):Et(r.dirtyFields,A,!0),Ve.dirtyFields=r.dirtyFields,Z=Z||(h.dirtyFields||f.dirtyFields)&&ye!==!Ke}if(V){const Ke=fe(r.touchedFields,A);Ke||(Et(r.touchedFields,A,V),Ve.touchedFields=r.touchedFields,Z=Z||(h.touchedFields||f.touchedFields)&&Ke!==V)}Z&&ee&&p.state.next(Ve)}return Z?Ve:{}},E=(A,F,V,le)=>{const ee=fe(r.errors,A),Z=(h.isValid||f.isValid)&&hi(F)&&r.isValid!==F;if(e.delayError&&V?(l=g(()=>w(A,V)),l(e.delayError)):(clearTimeout(u),l=null,V?Et(r.errors,A,V):lr(r.errors,A)),(V?!cs(ee,V):ee)||!un(le)||Z){const ye={...le,...Z&&hi(F)?{isValid:F}:{},errors:r.errors,name:A};r={...r,...ye},p.state.next(ye)}},N=async A=>(y(A,!0),await e.resolver(s,e.context,Hme(A||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),C=async A=>{const{errors:F}=await N(A);if(y(A),A)for(const V of A){const le=fe(F,V);le?Et(r.errors,V,le):lr(r.errors,V)}else r.errors=F;return F},j=async(A,F,V={valid:!0})=>{for(const le in A){const ee=A[le];if(ee){const{_f:Z,...ye}=ee;if(Z){const Ve=a.array.has(Z.name),Ke=ee._f&&Kme(ee._f);Ke&&h.validatingFields&&y([Z.name],!0);const Ft=await bI(ee,a.disabled,s,m,e.shouldUseNativeValidation&&!F,Ve);if(Ke&&h.validatingFields&&y([Z.name]),Ft[Z.name]&&(V.valid=!1,F))break;!F&&(fe(Ft,Z.name)?Ve?jre(r.errors,Ft,Z.name):Et(r.errors,Z.name,Ft[Z.name]):lr(r.errors,Z.name))}!un(ye)&&await j(ye,F,V)}}return V.valid},T=()=>{for(const A of a.unMount){const F=fe(n,A);F&&(F._f.refs?F._f.refs.every(V=>!Cx(V)):!Cx(F._f.ref))&&Pe(A)}a.unMount=new Set},P=(A,F)=>!e.disabled&&(A&&F&&Et(s,A,F),!cs(Q(),i)),O=(A,F,V)=>mI(A,a,{...o.mount?s:Ot(F)?i:fi(A)?{[A]:F}:F},V,F),D=A=>q0(fe(o.mount?s:i,A,e.shouldUnregister?fe(i,A,[]):[])),q=(A,F,V={})=>{const le=fe(n,A);let ee=F;if(le){const Z=le._f;Z&&(!Z.disabled&&Et(s,A,kre(F,Z)),ee=tv(Z.ref)&&Wn(F)?"":F,_re(Z.ref)?[...Z.ref.options].forEach(ye=>ye.selected=ee.includes(ye.value)):Z.refs?um(Z.ref)?Z.refs.forEach(ye=>{(!ye.defaultChecked||!ye.disabled)&&(Array.isArray(ee)?ye.checked=!!ee.find(Ve=>Ve===ye.value):ye.checked=ee===ye.value||!!ee)}):Z.refs.forEach(ye=>ye.checked=ye.value===ee):MM(Z.ref)?Z.ref.value="":(Z.ref.value=ee,Z.ref.type||p.state.next({name:A,values:At(s)})))}(V.shouldDirty||V.shouldTouch)&&_(A,ee,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&Y(A)},$=(A,F,V)=>{for(const le in F){if(!F.hasOwnProperty(le))return;const ee=F[le],Z=A+"."+le,ye=fe(n,Z);(a.array.has(A)||yr(ee)||ye&&!ye._f)&&!zl(ee)?$(Z,ee,V):q(Z,ee,V)}},L=(A,F,V={})=>{const le=fe(n,A),ee=a.array.has(A),Z=At(F);Et(s,A,Z),ee?(p.array.next({name:A,values:At(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&V.shouldDirty&&p.state.next({name:A,dirtyFields:Pu(i,s),isDirty:P(A,Z)})):le&&!le._f&&!Wn(Z)?$(A,Z,V):q(A,Z,V),vI(A,a)&&p.state.next({...r,name:A}),p.state.next({name:o.mount?A:void 0,values:At(s)})},M=async A=>{o.mount=!0;const F=A.target;let V=F.name,le=!0;const ee=fe(n,V),Z=Ke=>{le=Number.isNaN(Ke)||zl(Ke)&&isNaN(Ke.getTime())||cs(Ke,fe(s,V,Ke))},ye=Gu(e.mode),Ve=Gu(e.reValidateMode);if(ee){let Ke,Ft;const Ee=F.type?d5(ee._f):vre(A),ne=A.type===Zy.BLUR||A.type===Zy.FOCUS_OUT,ge=!Gme(ee._f)&&!e.resolver&&!fe(r.errors,V)&&!ee._f.deps||Xme(ne,fe(r.touchedFields,V),r.isSubmitted,Ve,ye),he=vI(V,a,ne);Et(s,V,Ee),ne?(!F||!F.readOnly)&&(ee._f.onBlur&&ee._f.onBlur(A),l&&l(0)):ee._f.onChange&&ee._f.onChange(A);const ke=_(V,Ee,ne),Xe=!un(ke)||he;if(!ne&&p.state.next({name:V,type:A.type,values:At(s)}),ge)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?ne&&v():ne||v()),Xe&&p.state.next({name:V,...he?{}:ke});if(!ne&&he&&p.state.next({...r}),e.resolver){const{errors:ki}=await N([V]);if(y([V]),Z(Ee),le){const xn=f5(r.errors,n,V),El=f5(ki,n,xn.name||V);Ke=El.error,V=El.name,Ft=un(ki)}}else y([V],!0),Ke=(await bI(ee,a.disabled,s,m,e.shouldUseNativeValidation))[V],y([V]),Z(Ee),le&&(Ke?Ft=!1:(h.isValid||f.isValid)&&(Ft=await j(n,!0)));le&&(ee._f.deps&&(!Array.isArray(ee._f.deps)||ee._f.deps.length>0)&&Y(ee._f.deps),E(V,Ft,Ke,ke))}},B=(A,F)=>{if(fe(r.errors,F)&&A.focus)return A.focus(),1},Y=async(A,F={})=>{let V,le;const ee=Qn(A);if(e.resolver){const Z=await C(Ot(A)?A:ee);V=un(Z),le=A?!ee.some(ye=>fe(Z,ye)):V}else A?(le=(await Promise.all(ee.map(async Z=>{const ye=fe(n,Z);return await j(ye&&ye._f?{[Z]:ye}:ye)}))).every(Boolean),!(!le&&!r.isValid)&&v()):le=V=await j(n);return p.state.next({...!fi(A)||(h.isValid||f.isValid)&&V!==r.isValid?{}:{name:A},...e.resolver||!A?{isValid:V}:{},errors:r.errors}),F.shouldFocus&&!le&&cd(n,B,A?ee:a.mount),le},Q=(A,F)=>{let V={...o.mount?s:i};return F&&(V=Sre(F.dirtyFields?r.dirtyFields:r.touchedFields,V)),Ot(A)?V:fi(A)?fe(V,A):A.map(le=>fe(V,le))},pe=(A,F)=>({invalid:!!fe((F||r).errors,A),isDirty:!!fe((F||r).dirtyFields,A),error:fe((F||r).errors,A),isValidating:!!fe(r.validatingFields,A),isTouched:!!fe((F||r).touchedFields,A)}),H=A=>{A&&Qn(A).forEach(F=>lr(r.errors,F)),p.state.next({errors:A?r.errors:{}})},oe=(A,F,V)=>{const le=(fe(n,A,{_f:{}})._f||{}).ref,ee=fe(r.errors,A)||{},{ref:Z,message:ye,type:Ve,...Ke}=ee;Et(r.errors,A,{...Ke,...F,ref:le}),p.state.next({name:A,errors:r.errors,isValid:!1}),V&&V.shouldFocus&&le&&le.focus&&le.focus()},je=(A,F)=>jn(A)?p.state.subscribe({next:V=>"values"in V&&A(O(void 0,F),V)}):O(A,F,!0),me=A=>p.state.subscribe({next:F=>{Qme(A.name,F.name,A.exact)&&Yme(F,A.formState||h,ar,A.reRenderRoot)&&A.callback({values:{...s},...r,...F,defaultValues:i})}}).unsubscribe,qe=A=>(o.mount=!0,f={...f,...A.formState},me({...A,formState:{...d,...A.formState}})),Pe=(A,F={})=>{for(const V of A?Qn(A):a.mount)a.mount.delete(V),a.array.delete(V),F.keepValue||(lr(n,V),lr(s,V)),!F.keepError&&lr(r.errors,V),!F.keepDirty&&lr(r.dirtyFields,V),!F.keepTouched&&lr(r.touchedFields,V),!F.keepIsValidating&&lr(r.validatingFields,V),!e.shouldUnregister&&!F.keepDefaultValue&&lr(i,V);p.state.next({values:At(s)}),p.state.next({...r,...F.keepDirty?{isDirty:P()}:{}}),!F.keepIsValid&&v()},G=({disabled:A,name:F})=>{(hi(A)&&o.mount||A||a.disabled.has(F))&&(A?a.disabled.add(F):a.disabled.delete(F))},de=(A,F={})=>{let V=fe(n,A);const le=hi(F.disabled)||hi(e.disabled);return Et(n,A,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:A}},name:A,mount:!0,...F}}),a.mount.add(A),V?G({disabled:hi(F.disabled)?F.disabled:e.disabled,name:A}):S(A,!0,F.value),{...le?{disabled:F.disabled||e.disabled}:{},...e.progressive?{required:!!F.required,min:nf(F.min),max:nf(F.max),minLength:nf(F.minLength),maxLength:nf(F.maxLength),pattern:nf(F.pattern)}:{},name:A,onChange:M,onBlur:M,ref:ee=>{if(ee){de(A,F),V=fe(n,A);const Z=Ot(ee.value)&&ee.querySelectorAll&&ee.querySelectorAll("input,select,textarea")[0]||ee,ye=zme(Z),Ve=V._f.refs||[];if(ye?Ve.find(Ke=>Ke===Z):Z===V._f.ref)return;Et(n,A,{_f:{...V._f,...ye?{refs:[...Ve.filter(Cx),Z,...Array.isArray(fe(i,A))?[{}]:[]],ref:{type:Z.type,name:A}}:{ref:Z}}}),S(A,!1,void 0,Z)}else V=fe(n,A,{}),V._f&&(V._f.mount=!1),(e.shouldUnregister||F.shouldUnregister)&&!(bre(a.array,A)&&o.action)&&a.unMount.add(A)}}},Oe=()=>e.shouldFocusError&&cd(n,B,a.mount),ut=A=>{hi(A)&&(p.state.next({disabled:A}),cd(n,(F,V)=>{const le=fe(n,V);le&&(F.disabled=le._f.disabled||A,Array.isArray(le._f.refs)&&le._f.refs.forEach(ee=>{ee.disabled=le._f.disabled||A}))},0,!1))},et=(A,F)=>async V=>{let le;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let ee=At(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Z,values:ye}=await N();y(),r.errors=Z,ee=At(ye)}else await j(n);if(a.disabled.size)for(const Z of a.disabled)lr(ee,Z);if(lr(r.errors,"root"),un(r.errors)){p.state.next({errors:{}});try{await A(ee,V)}catch(Z){le=Z}}else F&&await F({...r.errors},V),Oe(),setTimeout(Oe);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:un(r.errors)&&!le,submitCount:r.submitCount+1,errors:r.errors}),le)throw le},Mr=(A,F={})=>{fe(n,A)&&(Ot(F.defaultValue)?L(A,At(fe(i,A))):(L(A,F.defaultValue),Et(i,A,At(F.defaultValue))),F.keepTouched||lr(r.touchedFields,A),F.keepDirty||(lr(r.dirtyFields,A),r.isDirty=F.defaultValue?P(A,At(fe(i,A))):P()),F.keepError||(lr(r.errors,A),h.isValid&&v()),p.state.next({...r}))},Yr=(A,F={})=>{const V=A?At(A):i,le=At(V),ee=un(A),Z=ee?i:le;if(F.keepDefaultValues||(i=V),!F.keepValues){if(F.keepDirtyValues){const ye=new Set([...a.mount,...Object.keys(Pu(i,s))]);for(const Ve of Array.from(ye))fe(r.dirtyFields,Ve)?Et(Z,Ve,fe(s,Ve)):L(Ve,fe(Z,Ve))}else{if(IM&&Ot(A))for(const ye of a.mount){const Ve=fe(n,ye);if(Ve&&Ve._f){const Ke=Array.isArray(Ve._f.refs)?Ve._f.refs[0]:Ve._f.ref;if(tv(Ke)){const Ft=Ke.closest("form");if(Ft){Ft.reset();break}}}}if(F.keepFieldsRef)for(const ye of a.mount)L(ye,fe(Z,ye));else n={}}s=e.shouldUnregister?F.keepDefaultValues?At(i):{}:At(Z),p.array.next({values:{...Z}}),p.state.next({values:{...Z}})}a={mount:F.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!F.keepIsValid||!!F.keepDirtyValues||!e.shouldUnregister&&!un(Z),o.watch=!!e.shouldUnregister,o.keepIsValid=!!F.keepIsValid,o.action=!1,F.keepErrors||(r.errors={}),p.state.next({submitCount:F.keepSubmitCount?r.submitCount:0,isDirty:ee?!1:F.keepDirty?r.isDirty:!!(F.keepDefaultValues&&!cs(A,i)),isSubmitted:F.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ee?{}:F.keepDirtyValues?F.keepDefaultValues&&s?Pu(i,s):r.dirtyFields:F.keepDefaultValues&&A?Pu(i,A):F.keepDirty?r.dirtyFields:{},touchedFields:F.keepTouched?r.touchedFields:{},errors:F.keepErrors?r.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Cr=(A,F)=>Yr(jn(A)?A(s):A,{...e.resetOptions,...F}),ht=(A,F={})=>{const V=fe(n,A),le=V&&V._f;if(le){const ee=le.refs?le.refs[0]:le.ref;ee.focus&&setTimeout(()=>{ee.focus(),F.shouldSelect&&jn(ee.select)&&ee.select()})}},ar=A=>{r={...r,...A}},Xt={control:{register:de,unregister:Pe,getFieldState:pe,handleSubmit:et,setError:oe,_subscribe:me,_runSchema:N,_updateIsValidating:y,_focusError:Oe,_getWatch:O,_getDirty:P,_setValid:v,_setFieldArray:b,_setDisabledField:G,_setErrors:x,_getFieldArray:D,_reset:Yr,_resetDefaultValues:()=>jn(e.defaultValues)&&e.defaultValues().then(A=>{Cr(A,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:ut,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(A){o=A},get _defaultValues(){return i},get _names(){return a},set _names(A){a=A},get _formState(){return r},get _options(){return e},set _options(A){e={...e,...A}}},subscribe:qe,trigger:Y,register:de,handleSubmit:et,watch:je,setValue:L,getValues:Q,reset:Cr,resetField:Mr,clearErrors:H,unregister:Pe,setError:oe,setFocus:ht,getFieldState:pe};return{...Xt,formControl:Xt}}var Xo=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},jx=(t,e,r={})=>r.shouldFocus||Ot(r.shouldFocus)?r.focusName||`${t}.${Ot(r.focusIndex)?e:r.focusIndex}.`:"",Tx=(t,e)=>[...t,...Qn(e)],Ox=t=>Array.isArray(t)?t.map(()=>{}):void 0;function Px(t,e,r){return[...t.slice(0,e),...Qn(r),...t.slice(e)]}var Ix=(t,e,r)=>Array.isArray(t)?(Ot(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],Rx=(t,e)=>[...Qn(e),...Qn(t)];function tge(t,e){let r=0;const n=[...t];for(const i of e)n.splice(i-r,1),r++;return q0(n).length?n:[]}var Mx=(t,e)=>Ot(e)?[]:tge(t,Qn(e).sort((r,n)=>r-n)),Ax=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},m5=(t,e,r)=>(t[e]=r,t);function rge(t){const e=L0(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:s,rules:o}=t,[a,l]=Se.useState(r._getFieldArray(n)),u=Se.useRef(r._getFieldArray(n).map(Xo)),d=Se.useRef(!1);r._names.array.add(n),Se.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),B0(()=>r._subjects.array.subscribe({next:({values:x,name:S})=>{if(S===n||!S){const _=fe(x,n);Array.isArray(_)&&(l(_),u.current=_.map(Xo))}}}).unsubscribe,[r,n]);const h=Se.useCallback(x=>{d.current=!0,r._setFieldArray(n,x)},[r,n]),f=(x,S)=>{const _=Qn(At(x)),E=Tx(r._getFieldArray(n),_);r._names.focus=jx(n,E.length-1,S),u.current=Tx(u.current,_.map(Xo)),h(E),l(E),r._setFieldArray(n,E,Tx,{argA:Ox(x)})},p=(x,S)=>{const _=Qn(At(x)),E=Rx(r._getFieldArray(n),_);r._names.focus=jx(n,0,S),u.current=Rx(u.current,_.map(Xo)),h(E),l(E),r._setFieldArray(n,E,Rx,{argA:Ox(x)})},m=x=>{const S=Mx(r._getFieldArray(n),x);u.current=Mx(u.current,x),h(S),l(S),!Array.isArray(fe(r._fields,n))&&Et(r._fields,n,void 0),r._setFieldArray(n,S,Mx,{argA:x})},g=(x,S,_)=>{const E=Qn(At(S)),N=Px(r._getFieldArray(n),x,E);r._names.focus=jx(n,x,_),u.current=Px(u.current,x,E.map(Xo)),h(N),l(N),r._setFieldArray(n,N,Px,{argA:x,argB:Ox(S)})},v=(x,S)=>{const _=r._getFieldArray(n);Ax(_,x,S),Ax(u.current,x,S),h(_),l(_),r._setFieldArray(n,_,Ax,{argA:x,argB:S},!1)},y=(x,S)=>{const _=r._getFieldArray(n);Ix(_,x,S),Ix(u.current,x,S),h(_),l(_),r._setFieldArray(n,_,Ix,{argA:x,argB:S},!1)},b=(x,S)=>{const _=At(S),E=m5(r._getFieldArray(n),x,_);u.current=[...E].map((N,C)=>!N||C===x?Xo():u.current[C]),h(E),l([...E]),r._setFieldArray(n,E,m5,{argA:x,argB:_},!0,!1)},w=x=>{const S=Qn(At(x));u.current=S.map(Xo),h([...S]),l([...S]),r._setFieldArray(n,[...S],_=>_,{},!0,!1)};return Se.useEffect(()=>{if(r._state.action=!1,vI(n,r._names)&&r._subjects.state.next({...r._formState}),d.current&&(!Gu(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Gu(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(x=>{r._updateIsValidating([n]);const S=fe(x.errors,n),_=fe(r._formState.errors,n);(_?!S&&_.type||S&&(_.type!==S.type||_.message!==S.message):S&&S.type)&&(S?Et(r._formState.errors,n,S):lr(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const x=fe(r._fields,n);x&&x._f&&!(Gu(r._options.reValidateMode).isOnSubmit&&Gu(r._options.mode).isOnSubmit)&&bI(x,r._names.disabled,r._formValues,r._options.criteriaMode===$i.all,r._options.shouldUseNativeValidation,!0).then(S=>!un(S)&&r._subjects.state.next({errors:jre(r._formState.errors,S,n)}))}r._subjects.state.next({name:n,values:At(r._formValues)}),r._names.focus&&cd(r._fields,(x,S)=>{if(r._names.focus&&S.startsWith(r._names.focus)&&x.focus)return x.focus(),1}),r._names.focus="",r._setValid(),d.current=!1},[a,n,r]),Se.useEffect(()=>(!fe(r._formValues,n)&&r._setFieldArray(n),()=>{const x=(S,_)=>{const E=fe(r._fields,S);E&&E._f&&(E._f.mount=_)};r._options.shouldUnregister||s?r.unregister(n):x(n,!1)}),[n,r,i,s]),{swap:Se.useCallback(v,[h,n,r]),move:Se.useCallback(y,[h,n,r]),prepend:Se.useCallback(p,[h,n,r]),append:Se.useCallback(f,[h,n,r]),remove:Se.useCallback(m,[h,n,r]),insert:Se.useCallback(g,[h,n,r]),update:Se.useCallback(b,[h,n,r]),replace:Se.useCallback(w,[h,n,r]),fields:Se.useMemo(()=>a.map((x,S)=>({...x,[i]:u.current[S]||Xo()})),[a,i])}}function Ws(t={}){const e=Se.useRef(void 0),r=Se.useRef(void 0),[n,i]=Se.useState({isDirty:!1,isValidating:!1,isLoading:jn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:jn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!jn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=ege(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,B0(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Se.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Se.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Se.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Se.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Se.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),Se.useEffect(()=>{var o;t.values&&!cs(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),Se.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=wre(n,s),e.current}function z0(){return st({queryKey:["workspaces"],queryFn:async()=>(await _e.getWorkspaces()).data})}function Tre(t){return st({queryKey:["workspaces",t],queryFn:async()=>(await _e.getWorkspace(t)).data,enabled:!!t})}function nge(){const t=rt();return He({mutationFn:async e=>(await _e.createWorkspace(e)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function ige(){const t=rt();return He({mutationFn:async({id:e,data:r})=>(await _e.updateWorkspace(e,r)).data,onSuccess:(e,{id:r})=>{t.invalidateQueries({queryKey:["workspaces"]}),t.invalidateQueries({queryKey:["workspaces",r]})}})}function sge(){const t=rt();return He({mutationFn:async e=>{await _e.deleteWorkspace(e)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function oge(){const t=rt();return He({mutationFn:async({workspaceId:e,userId:r})=>{await _e.removeWorkspaceMember(e,r)},onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r]})}})}function age(){const t=rt();return He({mutationFn:async({workspaceId:e,userId:r,role:n})=>(await _e.updateWorkspaceMember(e,r,{role:n})).data,onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r]})}})}function lge(t){return st({queryKey:["workspaces",t,"invites"],queryFn:async()=>(await _e.getWorkspaceInvites(t)).data,enabled:!!t})}function cge(){const t=rt();return He({mutationFn:async({workspaceId:e,email:r,role:n})=>(await _e.createWorkspaceInvite(e,{email:r,role:n})).data,onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r,"invites"]})}})}function uge(){const t=rt();return He({mutationFn:async({workspaceId:e,inviteId:r})=>{await _e.revokeWorkspaceInvite(e,r)},onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r,"invites"]})}})}function dge(t){return st({queryKey:["invite",t],queryFn:async()=>(await _e.validateInvite(t)).data,enabled:!!t,retry:!1})}function hge(){const t=rt();return He({mutationFn:async e=>(await _e.acceptInvite(e)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function Ore({value:t="private",workspaces:e=[],onChange:r,disabled:n=!1}){const[i,s]=k.useState(!1),{data:o=[],isLoading:a}=z0(),l=[{value:"private",label:"Private",description:"Only you can see this",icon:ere},{value:"workspace",label:"Workspace",description:"Share with workspace members",icon:gn}],u=l.find(p=>p.value===t)||l[0],d=u.icon,h=p=>{r==null||r({visibility:p,workspaces:p==="private"?[]:e}),p==="private"&&s(!1)},f=p=>{const m=e.includes(p)?e.filter(g=>g!==p):[...e,p];r==null||r({visibility:t,workspaces:m})};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visibility"}),c.jsxs("button",{type:"button",onClick:()=>!n&&s(!i),disabled:n,className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-lg bg-white text-left focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(d,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-sm text-gray-900",children:u.label})]}),c.jsx(xp,{className:`w-4 h-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]}),i&&c.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:l.map(p=>{const m=p.icon,g=t===p.value;return c.jsxs("button",{type:"button",onClick:()=>h(p.value),className:`w-full flex items-start gap-3 p-2 rounded-md text-left hover:bg-gray-50 ${g?"bg-primary-50":""}`,children:[c.jsx(m,{className:`w-4 h-4 mt-0.5 ${g?"text-primary-600":"text-gray-400"}`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-sm font-medium ${g?"text-primary-900":"text-gray-900"}`,children:p.label}),c.jsx("div",{className:"text-xs text-gray-500",children:p.description})]}),g&&c.jsx(bp,{className:"w-4 h-4 text-primary-600 mt-0.5"})]},p.value)})}),t==="workspace"&&c.jsxs("div",{className:"p-2",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-2",children:"Select Workspaces"}),a?c.jsx("div",{className:"px-2 py-3 text-sm text-gray-500",children:"Loading workspaces..."}):o.length===0?c.jsx("div",{className:"px-2 py-3 text-sm text-gray-500",children:"No workspaces available. Create one first."}):c.jsx("div",{className:"max-h-48 overflow-y-auto",children:o.map(p=>{const m=e.includes(p.id);return c.jsxs("button",{type:"button",onClick:()=>f(p.id),className:"w-full flex items-center gap-3 p-2 rounded-md text-left hover:bg-gray-50",children:[c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded ${m?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:m&&c.jsx(bp,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm text-gray-900",children:p.title}),c.jsxs("div",{className:"text-xs text-gray-500",children:[p.member_count," members"]})]})]},p.id)})})]}),t==="workspace"&&c.jsx("div",{className:"p-2 border-t border-gray-100",children:c.jsx("button",{type:"button",onClick:()=>s(!1),className:"w-full px-3 py-2 text-sm font-medium text-primary-600 hover:bg-primary-50 rounded-md",children:"Done"})})]}),t==="workspace"&&e.length>0&&!i&&c.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Shared with ",e.length," workspace",e.length!==1?"s":""]})]})}function DM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,person:i=null}){const s=!!i,[o,a]=k.useState(!1),[l,u]=k.useState(null),[d,h]=k.useState(null),[f,p]=k.useState("private"),[m,g]=k.useState([]),{data:v=[]}=st({queryKey:["date-types"],queryFn:async()=>(await Ze.getDateTypes()).data,enabled:t&&!s}),y=v.find(O=>O.slug==="birthday"||O.name.toLowerCase()==="birthday"),b=He({mutationFn:async O=>{const D=new FormData;return D.append("file",O),(await X.post("/prm/v1/import/vcard/parse",D,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:x,reset:S,formState:{errors:_}}=Ws({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",pronouns:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}});k.useEffect(()=>{var O,D,q,$,L,M,B,Y,Q,pe,H,oe,je;if(t)if(u(null),h(null),b.reset(),i){const me=(D=(O=i.acf)==null?void 0:O.contact_info)==null?void 0:D.find(Pe=>Pe.contact_type==="email"),qe=($=(q=i.acf)==null?void 0:q.contact_info)==null?void 0:$.find(Pe=>Pe.contact_type==="phone"||Pe.contact_type==="mobile");S({first_name:((L=i.acf)==null?void 0:L.first_name)||"",last_name:((M=i.acf)==null?void 0:M.last_name)||"",nickname:((B=i.acf)==null?void 0:B.nickname)||"",gender:((Y=i.acf)==null?void 0:Y.gender)||"",pronouns:((Q=i.acf)==null?void 0:Q.pronouns)||"",email:(me==null?void 0:me.contact_value)||"",phone:(qe==null?void 0:qe.contact_value)||"",phone_type:(qe==null?void 0:qe.contact_type)||"mobile",birthday:"",how_we_met:((pe=i.acf)==null?void 0:pe.how_we_met)||"",is_favorite:((H=i.acf)==null?void 0:H.is_favorite)||!1}),p(((oe=i.acf)==null?void 0:oe._visibility)||"private"),g(((je=i.acf)==null?void 0:je._assigned_workspaces)||[])}else S({first_name:"",last_name:"",nickname:"",gender:"",pronouns:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}),p("private"),g([])},[t,i,S]);const E=k.useCallback(O=>{O.preventDefault(),O.stopPropagation(),O.type==="dragenter"||O.type==="dragover"?a(!0):O.type==="dragleave"&&a(!1)},[]),N=k.useCallback(O=>{O.preventDefault(),O.stopPropagation(),a(!1),h(null),O.dataTransfer.files&&O.dataTransfer.files[0]&&C(O.dataTransfer.files[0])},[]),C=O=>{const D=O.name.split(".").pop().toLowerCase();if(D!=="vcf"&&D!=="vcard"){h("Please select a vCard file (.vcf)");return}u(O),b.mutate(O,{onSuccess:q=>{S({first_name:q.first_name||"",last_name:q.last_name||"",nickname:q.nickname||"",gender:q.gender||"",pronouns:q.pronouns||"",email:q.email||"",phone:q.phone||"",phone_type:q.phone_type||"mobile",birthday:q.birthday||"",how_we_met:q.note||"",is_favorite:!1}),q.contact_count>1&&h(`Note: File contains ${q.contact_count} contacts. Only the first contact was loaded.`)},onError:q=>{var $,L;h(((L=($=q.response)==null?void 0:$.data)==null?void 0:L.message)||"Failed to parse vCard file"),u(null)}})},j=O=>{h(null),O.target.files&&O.target.files[0]&&C(O.target.files[0])},T=()=>{u(null),h(null),b.reset()};if(!t)return null;const P=O=>{r({...O,birthdayType:y,visibility:f,assigned_workspaces:m})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit person":"Add person"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:x(P),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!s&&c.jsxs("div",{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-3 text-center transition-colors ${o?"border-primary-500 bg-primary-50":l&&!d?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:E,onDragLeave:E,onDragOver:E,onDrop:N,children:[c.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:j,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:n}),b.isPending?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):l&&!d?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx(cm,{className:"h-4 w-4 text-green-600"}),c.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",l.name]}),c.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation(),T()},className:"ml-1 p-0.5 hover:bg-green-100 rounded",children:c.jsx(gt,{className:"h-3 w-3 text-green-600"})})]}):c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx(Tc,{className:"h-4 w-4 text-gray-400"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard or ",c.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),d&&c.jsxs("div",{className:"mt-2 flex items-start gap-2 text-xs text-amber-700 bg-amber-50 rounded-lg p-2",children:[c.jsx(Ao,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:d})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"First name *"}),c.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John",disabled:n,autoFocus:!0}),_.first_name&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:_.first_name.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Last name"}),c.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe",disabled:n})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Nickname"}),c.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Gender"}),c.jsxs("select",{...w("gender"),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select..."}),c.jsx("option",{value:"male",children:"Male"}),c.jsx("option",{value:"female",children:"Female"}),c.jsx("option",{value:"non_binary",children:"Non-binary"}),c.jsx("option",{value:"other",children:"Other"}),c.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Pronouns"}),c.jsx("input",{...w("pronouns"),type:"text",className:"input",placeholder:"e.g., they/them",disabled:n})]})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Email"}),c.jsx("input",{...w("email"),type:"email",className:"input",placeholder:"john@example.com",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gravatar will be auto-fetched if available"})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Phone"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("select",{...w("phone_type"),className:"input w-24",disabled:n,children:[c.jsx("option",{value:"mobile",children:"Mobile"}),c.jsx("option",{value:"phone",children:"Phone"})]}),c.jsx("input",{...w("phone"),type:"tel",className:"input flex-1",placeholder:"+1 234 567 890",disabled:n})]})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Birthday"}),c.jsx("input",{...w("birthday"),type:"date",className:"input",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"How we met"}),c.jsx("textarea",{...w("how_we_met"),className:"input",rows:3,placeholder:"We met at...",disabled:n})]}),c.jsx(Ore,{value:f,workspaces:m,onChange:({visibility:O,workspaces:D})=>{p(O),g(D)},disabled:n}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create person"})]})]})]})})}function $M({isOpen:t,onClose:e,onSubmit:r,isLoading:n,company:i=null}){var Y,Q,pe;const s=!!i,[o,a]=k.useState(!1),[l,u]=k.useState(""),[d,h]=k.useState(""),[f,p]=k.useState(!1),[m,g]=k.useState(""),[v,y]=k.useState([]),[b,w]=k.useState("private"),[x,S]=k.useState([]),_=k.useRef(null),E=k.useRef(null),{data:N=[],isLoading:C}=st({queryKey:["companies","all"],queryFn:async()=>(await Ze.getCompanies({per_page:100,_embed:!0})).data,enabled:t}),{data:j=[],isLoading:T}=st({queryKey:["people","all"],queryFn:async()=>(await Ze.getPeople({per_page:100,_embed:!0})).data,enabled:t}),{register:P,handleSubmit:O,reset:D,formState:{errors:q}}=Ws({defaultValues:{title:"",website:"",industry:""}}),$=k.useMemo(()=>{const H=l.toLowerCase().trim();let oe=N.filter(je=>!(s&&je.id===(i==null?void 0:i.id)||s&&je.parent===(i==null?void 0:i.id)));return H&&(oe=oe.filter(je=>{var me;return(me=cr(je))==null?void 0:me.toLowerCase().includes(H)})),[...oe].sort((je,me)=>(cr(je)||"").localeCompare(cr(me)||""))},[N,l,i,s]),L=k.useMemo(()=>N.find(H=>H.id===parseInt(d)),[N,d]),M=k.useMemo(()=>{const H=m.toLowerCase().trim(),oe=j.map(Pe=>{var G,de,Oe,ut;return{id:Pe.id,type:"person",name:Tn(((G=Pe.title)==null?void 0:G.rendered)||""),thumbnail:(ut=(Oe=(de=Pe._embedded)==null?void 0:de["wp:featuredmedia"])==null?void 0:Oe[0])==null?void 0:ut.source_url}}),je=N.filter(Pe=>!s||Pe.id!==(i==null?void 0:i.id)).map(Pe=>{var G,de,Oe;return{id:Pe.id,type:"company",name:cr(Pe),thumbnail:(Oe=(de=(G=Pe._embedded)==null?void 0:G["wp:featuredmedia"])==null?void 0:de[0])==null?void 0:Oe.source_url}});let me=[...oe,...je];H&&(me=me.filter(Pe=>{var G;return(G=Pe.name)==null?void 0:G.toLowerCase().includes(H)}));const qe=v.map(Pe=>`${Pe.type}-${Pe.id}`);return me=me.filter(Pe=>!qe.includes(`${Pe.type}-${Pe.id}`)),me.sort((Pe,G)=>(Pe.name||"").localeCompare(G.name||""))},[j,N,m,v,i,s]);if(k.useEffect(()=>{var H,oe,je,me,qe;t&&(a(!1),p(!1),u(""),g(""),i?(D({title:Tn(((H=i.title)==null?void 0:H.rendered)||""),website:((oe=i.acf)==null?void 0:oe.website)||"",industry:((je=i.acf)==null?void 0:je.industry)||""}),h(i.parent?String(i.parent):""),w(((me=i.acf)==null?void 0:me._visibility)||"private"),S(((qe=i.acf)==null?void 0:qe._assigned_workspaces)||[])):(D({title:"",website:"",industry:""}),h(""),y([]),w("private"),S([])))},[t,i,D]),k.useEffect(()=>{var H,oe;if(t&&((oe=(H=i==null?void 0:i.acf)==null?void 0:H.investors)==null?void 0:oe.length)>0&&j.length>0&&N.length>0){const me=i.acf.investors.map(qe=>{var de,Oe,ut,et,Mr,Yr,Cr;const Pe=j.find(ht=>ht.id===qe);if(Pe)return{id:Pe.id,type:"person",name:Tn(((de=Pe.title)==null?void 0:de.rendered)||""),thumbnail:(et=(ut=(Oe=Pe._embedded)==null?void 0:Oe["wp:featuredmedia"])==null?void 0:ut[0])==null?void 0:et.source_url};const G=N.find(ht=>ht.id===qe);return G?{id:G.id,type:"company",name:cr(G),thumbnail:(Cr=(Yr=(Mr=G._embedded)==null?void 0:Mr["wp:featuredmedia"])==null?void 0:Yr[0])==null?void 0:Cr.source_url}:null}).filter(Boolean);y(me)}else t&&!i&&y([])},[t,i,j,N]),k.useEffect(()=>{const H=oe=>{_.current&&!_.current.contains(oe.target)&&a(!1)};if(o)return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[o]),k.useEffect(()=>{const H=oe=>{E.current&&!E.current.contains(oe.target)&&p(!1)};if(f)return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[f]),!t)return null;const B=H=>{r({...H,parentId:d?parseInt(d):0,investors:v.map(oe=>oe.id),visibility:b,assigned_workspaces:x})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit organization":"Add organization"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:O(B),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Organization name *"}),c.jsx("input",{...P("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc.",disabled:n,autoFocus:!0}),q.title&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:q.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Website"}),c.jsx("input",{...P("website"),type:"url",className:"input",placeholder:"https://example.com",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Industry"}),c.jsx("input",{...P("industry"),className:"input",placeholder:"Technology",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Parent organization"}),c.jsxs("div",{className:"relative",ref:_,children:[c.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:C||n,children:[L?c.jsxs("div",{className:"flex items-center gap-2",children:[(pe=(Q=(Y=L._embedded)==null?void 0:Y["wp:featuredmedia"])==null?void 0:Q[0])!=null&&pe.source_url?c.jsx("img",{src:L._embedded["wp:featuredmedia"][0].source_url,alt:cr(L),className:"w-6 h-6 rounded object-contain bg-white"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(Pr,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-gray-900",children:cr(L)})]}):c.jsx("span",{className:"text-gray-400",children:"No parent organization"}),c.jsx(xp,{className:`w-4 h-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(nl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:l,onChange:H=>u(H.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsxs("div",{className:"overflow-y-auto max-h-48",children:[c.jsx("button",{type:"button",onClick:()=>{h(""),a(!1),u("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d?"":"bg-primary-50"}`,children:c.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),C?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):$.length>0?$.map(H=>{var oe,je,me;return c.jsxs("button",{type:"button",onClick:()=>{h(String(H.id)),a(!1),u("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d===String(H.id)?"bg-primary-50":""}`,children:[(me=(je=(oe=H._embedded)==null?void 0:oe["wp:featuredmedia"])==null?void 0:je[0])!=null&&me.source_url?c.jsx("img",{src:H._embedded["wp:featuredmedia"][0].source_url,alt:cr(H),className:"w-6 h-6 rounded object-contain bg-white"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(Pr,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-900 truncate",children:cr(H)})]},H.id)}):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"label flex items-center",children:[c.jsx(Jy,{className:"w-4 h-4 mr-2"}),"Investors"]}),v.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:v.map(H=>c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[H.thumbnail?c.jsx("img",{src:H.thumbnail,alt:H.name,className:`w-5 h-5 object-cover ${H.type==="person"?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${H.type==="person"?"rounded-full":"rounded"}`,children:H.type==="person"?c.jsx(il,{className:"w-3 h-3 text-gray-500"}):c.jsx(Pr,{className:"w-3 h-3 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-700",children:H.name}),c.jsx("button",{type:"button",onClick:()=>y(oe=>oe.filter(je=>!(je.id===H.id&&je.type===H.type))),className:"ml-1 text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-3.5 h-3.5"})})]},`${H.type}-${H.id}`))}),c.jsxs("div",{className:"relative",ref:E,children:[c.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:C||T||n,children:[c.jsx("span",{className:"text-gray-400",children:"Add investor..."}),c.jsx(xp,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(nl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:m,onChange:H=>g(H.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto max-h-48",children:C||T?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):M.length>0?M.map(H=>c.jsxs("button",{type:"button",onClick:()=>{y(oe=>[...oe,H]),g("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[H.thumbnail?c.jsx("img",{src:H.thumbnail,alt:H.name,className:`w-6 h-6 object-cover ${H.type==="person"?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${H.type==="person"?"rounded-full":"rounded"}`,children:H.type==="person"?c.jsx(il,{className:"w-4 h-4 text-gray-500"}):c.jsx(Pr,{className:"w-4 h-4 text-gray-500"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-sm text-gray-900 truncate block",children:H.name}),c.jsx("span",{className:"text-xs text-gray-500",children:H.type==="person"?"Person":"Organization"})]})]},`${H.type}-${H.id}`)):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:m?"No results found":"No people or organizations available"})})]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),c.jsx(Ore,{value:b,workspaces:x,onChange:({visibility:H,workspaces:oe})=>{w(H),S(oe)},disabled:n})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create organization"})]})]})]})})}function fge({value:t=[],onChange:e,people:r=[],isLoading:n,currentPersonId:i}){const[s,o]=k.useState(""),a=k.useMemo(()=>{if(!s)return r.slice(0,10);const h=s.toLowerCase();return r.filter(f=>ld(f).toLowerCase().includes(h)).slice(0,10)},[r,s]),l=k.useMemo(()=>t.map(h=>r.find(f=>f.id===h)).filter(Boolean),[t,r]),u=h=>{t.includes(h)||e([...t,h]),o("")},d=h=>{h!==i&&e(t.filter(f=>f!==h))};return c.jsxs("div",{className:"space-y-2",children:[l.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[ld(h),h.id!==i&&c.jsx("button",{type:"button",onClick:()=>d(h.id),className:"hover:text-primary-600",children:c.jsx(gt,{className:"w-3 h-3"})})]},h.id))}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:s,onChange:h=>o(h.target.value),placeholder:"Search for people to add...",className:"input",disabled:n}),s&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:a.length>0?a.map(h=>c.jsx("button",{type:"button",onClick:()=>u(h.id),disabled:t.includes(h.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(h.id)?"opacity-50 cursor-not-allowed":""}`,children:ld(h)},h.id)):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function FM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,dateItem:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1}){const l=!!i,{data:u=[]}=st({queryKey:["date-types"],queryFn:async()=>((await Ze.getDateTypes()).data||[]).sort((E,N)=>{const C=E.name||"",j=N.name||"";return C.localeCompare(j)})}),{register:d,handleSubmit:h,reset:f,watch:p,setValue:m,control:g,formState:{errors:v}}=Ws({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),y=p("related_people"),b=p("date_type"),w=p("title");if(k.useEffect(()=>{var E;if((!w||["'s Birthday","Wedding of "].some(N=>w.endsWith(N)||w.startsWith(N)))&&(y==null?void 0:y.length)>0&&b){const N=u.find(P=>P.id===parseInt(b)),C=(N==null?void 0:N.name)||"",j=((E=N==null?void 0:N.slug)==null?void 0:E.toLowerCase())||C.toLowerCase(),T=y.map(P=>{var D,q,$;const O=o.find(L=>L.id===P);return O?Tn(((D=O.acf)==null?void 0:D.first_name)||O.first_name||(($=(q=O.title)==null?void 0:q.rendered)==null?void 0:$.split(" ")[0])||""):null}).filter(Boolean);if(T.length>0&&C){let P;j==="wedding"?P=T.length>=2?`Wedding of ${T[0]} & ${T[1]}`:`Wedding of ${T[0]}`:P=`${T[0]}'s ${C}`,m("title",P)}}},[y,b,o,u,m,w]),k.useEffect(()=>{var S,_,E,N,C,j;if(t)if(i){let T=[];const P=i.related_people||((S=i.acf)==null?void 0:S.related_people);P&&(Array.isArray(P)?T=P.map(D=>parseInt(typeof D=="object"&&D!==null?D.ID||D.id||D.post_id:D,10)).filter(D=>!isNaN(D)&&D>0):typeof P=="number"&&(T=[P]));let O="";if(((_=i.date_type)==null?void 0:_.length)>0&&i.date_type[0]!=null){const D=i.date_type[0];if(typeof D=="string"){const q=u.find($=>$.name.toLowerCase()===D.toLowerCase());O=q?String(q.id):""}else O=String(D)}f({title:Tn(((E=i.title)==null?void 0:E.rendered)||i.title||""),date_value:((N=i.acf)==null?void 0:N.date_value)||i.date_value||"",date_type:O,related_people:T,is_recurring:((C=i.acf)==null?void 0:C.is_recurring)??i.is_recurring??!0,year_unknown:((j=i.acf)==null?void 0:j.year_unknown)??i.year_unknown??!1})}else f({title:"",date_value:"",date_type:"",related_people:s?[parseInt(s)]:[],is_recurring:!0,year_unknown:!1})},[t,i,s,f,u]),!t)return null;const x=S=>{const _=S.date_type?parseInt(S.date_type,10):null,E=_&&!isNaN(_)?[_]:[];r({title:S.title,date_type:E,date_value:S.date_value,related_people:S.related_people,is_recurring:S.is_recurring,year_unknown:S.year_unknown})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:l?"Edit date":"Add date"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:h(x),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Related people"}),c.jsx(ev,{name:"related_people",control:g,render:({field:S})=>c.jsx(fge,{value:S.value,onChange:S.onChange,people:o,isLoading:a,currentPersonId:parseInt(s)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Date type *"}),c.jsx(ev,{name:"date_type",control:g,rules:{required:"Please select a date type"},render:({field:S})=>c.jsxs("select",{value:S.value?String(S.value):"",onChange:_=>S.onChange(_.target.value),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select a type..."}),u.map(_=>c.jsx("option",{value:String(_.id),children:_.name},_.id))]})}),v.date_type&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_type.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Label"}),c.jsx("input",{...d("title"),className:"input",placeholder:"e.g., Mom's Birthday",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Date *"}),c.jsx("input",{...d("date_value",{required:"Date is required"}),type:"date",className:"input",disabled:n}),v.date_value&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_value.message})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"year_unknown",...d("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_recurring",...d("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":l?"Save changes":"Add date"})]})]})]})})}const pge=[{name:"Dashboard",href:"/",icon:rme},{name:"People",href:"/people",icon:gn},{name:"Organizations",href:"/companies",icon:Pr},{name:"Dates",href:"/dates",icon:Fs},{name:"Todos",href:"/todos",icon:qs},{name:"Workspaces",href:"/workspaces",icon:yme},{name:"Settings",href:"/settings",icon:CM}];function g5({mobile:t=!1,onClose:e}){const{logoutUrl:r}=bM();return c.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[c.jsxs(Le,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[c.jsx(ire,{className:"w-5 h-5"}),Oc]}),t&&c.jsx("button",{onClick:e,className:"p-2 -mr-2",children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:pge.map(n=>c.jsxs(Dhe,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[c.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),c.jsx("div",{className:"p-4 border-t border-gray-200",children:c.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(ame,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function mge(){var o;const[t,e]=k.useState(!1),r=k.useRef(null),{data:n,isLoading:i}=st({queryKey:["current-user"],queryFn:async()=>(await _e.getCurrentUser()).data});if(k.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return c.jsx("div",{className:"flex items-center ml-auto",children:c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return c.jsxs("div",{className:"relative ml-auto",ref:r,children:[c.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?c.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),c.jsx(xp,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[c.jsx(il,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&c.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[c.jsx(CM,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function gge({isOpen:t,onClose:e}){const[r,n]=k.useState(""),[i,s]=k.useState(0),o=Fn(),a=k.useRef(null),l=r.trim(),{data:u,isLoading:d}=Ame(l),h=u||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;k.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),k.useEffect(()=>{s(0)},[u]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(b=>Math.min(b+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(b=>Math.max(b-1,0));else if(y.key==="Enter"){y.preventDefault();const b=f[i];b&&v(b.type,b.id)}}},v=(y,b)=>{e(),y==="person"?o(`/people/${b}`):y==="company"&&o(`/companies/${b}`)};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),c.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:c.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[c.jsx(nl,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),c.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),c.jsx("span",{children:"to close"})]})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?c.jsxs("div",{className:"px-4 py-8 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),c.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?c.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,b)=>{const x=i===b;return c.jsxs("button",{onClick:()=>v("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?c.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(il,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&c.jsxs("div",{className:"px-2 mt-2",children:[c.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,b)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+b,x=i===w;return c.jsxs("button",{onClick:()=>v("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?c.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(Pr,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):c.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:c.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):c.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[c.jsx(nl,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),c.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("span",{children:"to navigate"})]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("span",{children:"to select"})]})]})})]})})]}):null}function yge({onAddTodo:t,onAddPerson:e,onAddCompany:r,onAddDate:n}){const[i,s]=k.useState(!1),o=k.useRef(null);k.useEffect(()=>{const h=f=>{o.current&&!o.current.contains(f.target)&&s(!1)};if(i)return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[i]);const a=()=>{s(!1),t()},l=()=>{s(!1),e()},u=()=>{s(!1),r()},d=()=>{s(!1),n()};return c.jsxs("div",{className:"relative",ref:o,children:[c.jsx("button",{onClick:()=>s(!i),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:c.jsx(sr,{className:"w-5 h-5"})}),i&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:l,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(il,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),c.jsxs("button",{onClick:u,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(Pr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),c.jsxs("button",{onClick:a,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(qs,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),c.jsxs("button",{onClick:d,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(Fs,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function vge({onMenuClick:t,onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i,onOpenSearch:s}){const o=Bo(),a=()=>{const l=o.pathname;return l==="/"?"Dashboard":l.startsWith("/people")?"People":l.startsWith("/companies")?"Organizations":l.startsWith("/dates")?"Important Dates":l.startsWith("/todos")?"Todos":l.startsWith("/workspaces")?"Workspaces":l.startsWith("/settings")?"Settings":""};return c.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:c.jsx(cme,{className:"w-5 h-5"})}),c.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:a()}),c.jsx("div",{className:"flex-1"}),c.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[c.jsx(nl,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),c.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[c.jsx(Jpe,{className:"w-3 h-3"}),"K"]})]}),c.jsx("div",{className:"ml-2",children:c.jsx(yge,{onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i})}),c.jsx("div",{className:"ml-2",children:c.jsx(mge,{})})]})}function bge({children:t}){const[e,r]=k.useState(!1),[n,i]=k.useState(!1),[s,o]=k.useState(!1),[a,l]=k.useState(!1),[u,d]=k.useState(!1),[h,f]=k.useState(!1),[p,m]=k.useState(!1),[g,v]=k.useState(!1),[y,b]=k.useState(!1),w=Fn();rt();const{data:x=[],isLoading:S}=Gc();fre();const _=cre({onSuccess:P=>{l(!1),w(`/people/${P.id}`)}}),E=hre({onSuccess:P=>{d(!1),w(`/companies/${P.id}`)}}),N=dre({onSuccess:()=>f(!1)}),C=async P=>{m(!0);try{await _.mutateAsync(P)}finally{m(!1)}},j=async P=>{v(!0);try{await E.mutateAsync(P)}finally{v(!1)}},T=async P=>{b(!0);try{await N.mutateAsync(P)}finally{b(!1)}};return k.useEffect(()=>{const P=O=>{(O.metaKey||O.ctrlKey)&&O.key==="k"&&(O.preventDefault(),o(!0))};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[]),c.jsxs("div",{className:"flex h-screen bg-gray-50",children:[c.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:c.jsx(g5,{})}),e&&c.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),c.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:c.jsx(g5,{mobile:!0,onClose:()=>r(!1)})})]}),c.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[c.jsx(vge,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onAddPerson:()=>l(!0),onAddCompany:()=>d(!0),onAddDate:()=>f(!0),onOpenSearch:()=>o(!0)}),c.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),c.jsx(gge,{isOpen:s,onClose:()=>o(!1)}),c.jsx(gre,{isOpen:n,onClose:()=>i(!1)}),c.jsx(DM,{isOpen:a,onClose:()=>l(!1),onSubmit:C,isLoading:p}),c.jsx($M,{isOpen:u,onClose:()=>d(!1),onSubmit:j,isLoading:g}),c.jsx(FM,{isOpen:h,onClose:()=>f(!1),onSubmit:T,isLoading:y,allPeople:x,isPeopleLoading:S})]})}function dt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function $o(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function xge(t,e){const r=dt(t);return isNaN(e)?$o(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const Pre=6048e5,wge=864e5,Ire=6e4,Rre=36e5,Cg=43200,y5=1440;let Sge={};function dm(){return Sge}function Pc(t,e){var a,l,u,d;const r=dm(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=dt(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function nv(t){return Pc(t,{weekStartsOn:1})}function Mre(t){const e=dt(t),r=e.getFullYear(),n=$o(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=nv(n),s=$o(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=nv(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function iv(t){const e=dt(t);return e.setHours(0,0,0,0),e}function sv(t){const e=dt(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function _ge(t,e){const r=iv(t),n=iv(e),i=+r-sv(r),s=+n-sv(n);return Math.round((i-s)/wge)}function Ege(t){const e=Mre(t),r=$o(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),nv(r)}function ud(t,e){const r=dt(t),n=dt(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function V0(t){return $o(t,Date.now())}function Are(t,e){const r=iv(t),n=iv(e);return+r==+n}function Nge(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function kge(t){if(!Nge(t)&&typeof t!="number")return!1;const e=dt(t);return!isNaN(Number(e))}function Cge(t,e){const r=dt(t),n=dt(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function jge(t,e){const r=dt(t),n=dt(e);return r.getFullYear()-n.getFullYear()}function Tge(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Oge(t,e){return+dt(t)-+dt(e)}function Pge(t){const e=dt(t);return e.setHours(23,59,59,999),e}function Ige(t){const e=dt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Rge(t){const e=dt(t);return+Pge(e)==+Ige(e)}function Mge(t,e){const r=dt(t),n=dt(e),i=ud(r,n),s=Math.abs(Cge(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=ud(r,n)===-i;Rge(dt(t))&&s===1&&ud(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Age(t,e,r){const n=Oge(t,e)/1e3;return Tge(r==null?void 0:r.roundingMethod)(n)}function Dx(t,e){const r=dt(t),n=dt(e),i=ud(r,n),s=Math.abs(jge(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=ud(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Dge(t){const e=dt(t),r=$o(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const $ge={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fge=(t,e,r)=>{let n;const i=$ge[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function $x(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const qge={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Lge={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Bge={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zge={date:$x({formats:qge,defaultWidth:"full"}),time:$x({formats:Lge,defaultWidth:"full"}),dateTime:$x({formats:Bge,defaultWidth:"full"})},Vge={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Wge=(t,e,r,n)=>Vge[t];function sf(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Uge={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Hge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kge={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Gge={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Yge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xge=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Jge={ordinalNumber:Xge,era:sf({values:Uge,defaultWidth:"wide"}),quarter:sf({values:Hge,defaultWidth:"wide",argumentCallback:t=>t-1}),month:sf({values:Kge,defaultWidth:"wide"}),day:sf({values:Gge,defaultWidth:"wide"}),dayPeriod:sf({values:Yge,defaultWidth:"wide",formattingValues:Qge,defaultFormattingWidth:"wide"})};function of(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?eye(a,h=>h.test(o)):Zge(a,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function Zge(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function eye(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function tye(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const rye=/^(\d+)(th|st|nd|rd)?/i,nye=/\d+/i,iye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sye={any:[/^b/i,/^(a|c)/i]},oye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aye={any:[/1/i,/2/i,/3/i,/4/i]},lye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dye={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pye={ordinalNumber:tye({matchPattern:rye,parsePattern:nye,valueCallback:t=>parseInt(t,10)}),era:of({matchPatterns:iye,defaultMatchWidth:"wide",parsePatterns:sye,defaultParseWidth:"any"}),quarter:of({matchPatterns:oye,defaultMatchWidth:"wide",parsePatterns:aye,defaultParseWidth:"any",valueCallback:t=>t+1}),month:of({matchPatterns:lye,defaultMatchWidth:"wide",parsePatterns:cye,defaultParseWidth:"any"}),day:of({matchPatterns:uye,defaultMatchWidth:"wide",parsePatterns:dye,defaultParseWidth:"any"}),dayPeriod:of({matchPatterns:hye,defaultMatchWidth:"any",parsePatterns:fye,defaultParseWidth:"any"})},Dre={code:"en-US",formatDistance:Fge,formatLong:zge,formatRelative:Wge,localize:Jge,match:pye,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mye(t){const e=dt(t);return _ge(e,Dge(e))+1}function gye(t){const e=dt(t),r=+nv(e)-+Ege(e);return Math.round(r/Pre)+1}function $re(t,e){var d,h,f,p;const r=dt(t),n=r.getFullYear(),i=dm(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=$o(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Pc(o,e),l=$o(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const u=Pc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function yye(t,e){var a,l,u,d;const r=dm(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=$re(t,e),s=$o(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Pc(s,e)}function vye(t,e){const r=dt(t),n=+Pc(r,e)-+yye(r,e);return Math.round(n/Pre)+1}function bt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Jo={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return bt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):bt(r+1,2)},d(t,e){return bt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return bt(t.getHours()%12||12,e.length)},H(t,e){return bt(t.getHours(),e.length)},m(t,e){return bt(t.getMinutes(),e.length)},s(t,e){return bt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return bt(i,e.length)}},Nu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},v5={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Jo.y(t,e)},Y:function(t,e,r,n){const i=$re(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return bt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):bt(s,e.length)},R:function(t,e){const r=Mre(t);return bt(r,e.length)},u:function(t,e){const r=t.getFullYear();return bt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return bt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return bt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Jo.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return bt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=vye(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):bt(i,e.length)},I:function(t,e,r){const n=gye(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):bt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Jo.d(t,e)},D:function(t,e,r){const n=mye(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):bt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return bt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return bt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return bt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Nu.noon:n===0?i=Nu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Nu.evening:n>=12?i=Nu.afternoon:n>=4?i=Nu.morning:i=Nu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Jo.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Jo.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):bt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):bt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Jo.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Jo.s(t,e)},S:function(t,e){return Jo.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return x5(n);case"XXXX":case"XX":return Al(n);case"XXXXX":case"XXX":default:return Al(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return x5(n);case"xxxx":case"xx":return Al(n);case"xxxxx":case"xxx":default:return Al(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+b5(n,":");case"OOOO":default:return"GMT"+Al(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+b5(n,":");case"zzzz":default:return"GMT"+Al(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return bt(n,e.length)},T:function(t,e,r){const n=t.getTime();return bt(n,e.length)}};function b5(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+bt(s,2)}function x5(t,e){return t%60===0?(t>0?"-":"+")+bt(Math.abs(t)/60,2):Al(t,e)}function Al(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=bt(Math.trunc(n/60),2),s=bt(n%60,2);return r+i+e+s}const w5=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Fre=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},bye=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return w5(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",w5(n,e)).replace("{{time}}",Fre(i,e))},xye={p:Fre,P:bye},wye=/^D+$/,Sye=/^Y+$/,_ye=["D","DD","YY","YYYY"];function Eye(t){return wye.test(t)}function Nye(t){return Sye.test(t)}function kye(t,e,r){const n=Cye(t,e,r);if(console.warn(n),_ye.includes(t))throw new RangeError(n)}function Cye(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Tye=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oye=/^'([^]*?)'?$/,Pye=/''/g,Iye=/[a-zA-Z]/;function kn(t,e,r){var d,h,f,p;const n=dm(),i=n.locale??Dre,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=dt(t);if(!kge(a))throw new RangeError("Invalid time value");let l=e.match(Tye).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=xye[g];return v(m,i.formatLong)}return m}).join("").match(jye).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Rye(m)};if(v5[g])return{isToken:!0,value:m};if(g.match(Iye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(Nye(g)||Eye(g))&&kye(g,e,String(t));const v=v5[g[0]];return v(a,g,i.localize,u)}).join("")}function Rye(t){const e=t.match(Oye);return e?e[1].replace(Pye,"'"):t}function Mye(t,e,r){const n=dm(),i=(r==null?void 0:r.locale)??n.locale??Dre,s=2520,o=ud(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,u;o>0?(l=dt(e),u=dt(t)):(l=dt(t),u=dt(e));const d=Age(u,l),h=(sv(u)-sv(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<y5){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<Cg){const m=Math.round(f/y5);return i.formatDistance("xDays",m,a)}else if(f<Cg*2)return p=Math.round(f/Cg),i.formatDistance("aboutXMonths",p,a)}if(p=Mge(u,l),p<12){const m=Math.round(f/Cg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function Aye(t,e){return Mye(t,V0(t),e)}function Dye(t,e){const r=dt(t),n=dt(e);return r.getTime()>n.getTime()}function $ye(t,e,r){const n=Pc(t,r),i=Pc(e,r);return+n==+i}function Fye(t,e){return $ye(t,V0(t),e)}function qre(t){return Are(t,V0(t))}function Lre(t,e){return xge(t,-e)}function Bre(t){return Are(t,Lre(V0(t),1))}function Sp(t,e){const n=zye(t);let i;if(n.date){const l=Vye(n.date,2);i=Wye(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=Uye(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=Hye(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),u=new Date(0);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return new Date(s+o+a)}const jg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},qye=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Lye=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Bye=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zye(t){const e={},r=t.split(jg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],jg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(jg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=jg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function Vye(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function Wye(t,e){if(e===null)return new Date(NaN);const r=t.match(qye);if(!r)return new Date(NaN);const n=!!r[4],i=af(r[1]),s=af(r[2])-1,o=af(r[3]),a=af(r[4]),l=af(r[5])-1;if(n)return Xye(e,a,l)?Kye(e,a,l):new Date(NaN);{const u=new Date(0);return!Yye(e,s,o)||!Qye(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}}function af(t){return t?parseInt(t):1}function Uye(t){const e=t.match(Lye);if(!e)return NaN;const r=Fx(e[1]),n=Fx(e[2]),i=Fx(e[3]);return Jye(r,n,i)?r*Rre+n*Ire+i*1e3:NaN}function Fx(t){return t&&parseFloat(t.replace(",","."))||0}function Hye(t){if(t==="Z")return 0;const e=t.match(Bye);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Zye(n,i)?r*(n*Rre+i*Ire):NaN}function Kye(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const Gye=[31,null,31,30,31,30,31,31,30,31,30,31];function zre(t){return t%400===0||t%4===0&&t%100!==0}function Yye(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(Gye[e]||(zre(t)?29:28))}function Qye(t,e){return e>=1&&e<=(zre(t)?366:365)}function Xye(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Jye(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function Zye(t,e){return e>=0&&e<=59}function eve(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}Sp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=Sp(n);qre(i)?e.today.push(r):Bre(i)?e.yesterday.push(r):Fye(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function tve(t){if(!t)return"";try{const e=Sp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return qre(e)?Aye(e,{addSuffix:!0}):Bre(e)?r?kn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":kn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function rve(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function nve(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function hm(t){if(!t.due_date||t.is_completed)return!1;try{const e=Sp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function ive(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):hm(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function qM({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4",children:[c.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[c.jsx(qs,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),c.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[c.jsx(M0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),c.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var Vre={exports:{}},Wre={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=k;function sve(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ove=typeof Object.is=="function"?Object.is:sve,ave=Vd.useState,lve=Vd.useEffect,cve=Vd.useLayoutEffect,uve=Vd.useDebugValue;function dve(t,e){var r=e(),n=ave({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return cve(function(){i.value=r,i.getSnapshot=e,qx(i)&&s({inst:i})},[t,r,e]),lve(function(){return qx(i)&&s({inst:i}),t(function(){qx(i)&&s({inst:i})})},[t]),uve(r),r}function qx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ove(t,r)}catch{return!0}}function hve(t,e){return e()}var fve=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hve:dve;Wre.useSyncExternalStore=Vd.useSyncExternalStore!==void 0?Vd.useSyncExternalStore:fve;Vre.exports=Wre;var LM=Vre.exports;function Zr(t){this.content=t}Zr.prototype={constructor:Zr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new Zr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Zr(r)},addToStart:function(t,e){return new Zr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new Zr(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new Zr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Zr.from(t),t.size?new Zr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Zr.from(t),t.size?new Zr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Zr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};Zr.from=function(t){if(t instanceof Zr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new Zr(e)};function Ure(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=Ure(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function Hre(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let u=0,d=Math.min(o.text.length,a.text.length);for(;u<d&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let u=Hre(o.content,a.content,r-1,n-1);if(u)return u}r-=l,n-=l}}class J{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new J(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new J(n,i)}cutByIndex(e,r){return e==r?J.empty:e==0&&r==this.content.length?this:new J(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new J(i,s)}addToStart(e){return new J([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new J(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return Ure(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return Hre(this,e,r,n)}findIndex(e){if(e==0)return Tg(0,e);if(e==this.size)return Tg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?Tg(r+1,s):Tg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return J.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new J(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return J.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new J(r||e,n)}static from(e){if(!e)return J.empty;if(e instanceof J)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new J([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}J.empty=new J([],0);const Lx={index:0,offset:0};function Tg(t,e){return Lx.index=t,Lx.offset=e,Lx}function ov(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!ov(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!ov(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Nt=class xI{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ov(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return xI.none;if(e instanceof xI)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Nt.none=[];class av extends Error{}class ve{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=Gre(this.content,e+this.openStart,r);return n&&new ve(n,this.openStart,this.openEnd)}removeBetween(e,r){return new ve(Kre(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return ve.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ve(J.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new ve(e,n,i)}}ve.empty=new ve(J.empty,0,0);function Kre(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(Kre(s.content,e-i-1,r-i-1)))}function Gre(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=Gre(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function pve(t,e,r){if(r.openStart>t.depth)throw new av("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new av("Inconsistent open depths");return Yre(t,e,r,0)}function Yre(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=Yre(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return uc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=mve(r,t);return uc(s,Xre(t,o,a,e,n))}else return uc(s,lv(t,e,n))}function Qre(t,e){if(!e.type.compatibleContent(t.type))throw new av("Cannot join "+e.type.name+" onto "+t.type.name)}function wI(t,e,r){let n=t.node(r);return Qre(n,e.node(r)),n}function cc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Af(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(cc(t.nodeAfter,n),s++));for(let a=s;a<o;a++)cc(i.child(a),n);e&&e.depth==r&&e.textOffset&&cc(e.nodeBefore,n)}function uc(t,e){return t.type.checkContent(e),t.copy(e)}function Xre(t,e,r,n,i){let s=t.depth>i&&wI(t,e,i+1),o=n.depth>i&&wI(r,n,i+1),a=[];return Af(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(Qre(s,o),cc(uc(s,Xre(t,e,r,n,i+1)),a)):(s&&cc(uc(s,lv(t,e,i+1)),a),Af(e,r,i,a),o&&cc(uc(o,lv(r,n,i+1)),a)),Af(n,null,i,a),new J(a)}function lv(t,e,r){let n=[];if(Af(null,t,r,n),t.depth>r){let i=wI(t,e,r+1);cc(uc(i,lv(t,e,r+1)),n)}return Af(e,null,r,n),new J(n)}function mve(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(J.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class _p{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Nt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new cv(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(n.push(o,a,i+l),!u||(o=o.child(a),o.isText))break;s=u-1,i+=l+1}return new _p(r,n,s)}static resolveCached(e,r){let n=S5.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else S5.set(e,n=new gve);let i=n.elts[n.i]=_p.resolve(e,r);return n.i=(n.i+1)%yve,i}}class gve{constructor(){this.elts=[],this.i=0}}const yve=12,S5=new WeakMap;class cv{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const vve=Object.create(null);let Wa=class SI{constructor(e,r,n,i=Nt.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||J.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&ov(this.attrs,r||e.defaultAttrs||vve)&&Nt.sameSet(this.marks,n||Nt.none)}copy(e=null){return e==this.content?this:new SI(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new SI(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return ve.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),u=i.node(o).content.cut(i.pos-a,s.pos-a);return new ve(u,i.depth-o,s.depth-o)}replace(e,r,n){return pve(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return _p.resolveCached(this,e)}resolveNoCache(e){return _p.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Jre(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=J.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Nt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Nt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=J.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};Wa.prototype.text=void 0;class uv extends Wa{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Jre(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new uv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new uv(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Jre(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Ic{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new bve(e,r);if(n.next==null)return Ic.empty;let i=Zre(n);n.next&&n.err("Unexpected trailing text");let s=kve(Nve(i));return Cve(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return J.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:d,next:h}=o.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Ic.empty=new Ic(!0);class bve{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Zre(t){let e=[];do e.push(xve(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function xve(t){let e=[];do e.push(wve(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function wve(t){let e=Eve(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Sve(t,e);else break;return e}function _5(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Sve(t,e){let r=_5(t),n=r;return t.eat(",")&&(t.next!="}"?n=_5(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function _ve(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Eve(t){if(t.eat("(")){let e=Zre(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=_ve(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Nve(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;i(u,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function ene(t,e){return e-t}function E5(t,e){let r=[];return n(e),r.sort(ene);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function kve(t){let e=Object.create(null);return r(E5(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let d=0;d<i.length;d++)i[d][0]==a&&(u=i[d][1]);E5(t,l).forEach(d=>{u||i.push([a,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let s=e[n.join(",")]=new Ic(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(ene);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function Cve(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(u)==-1&&n.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function tne(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function rne(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function nne(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function ine(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new Tve(t,n,e[n]);return r}let N5=class sne{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=ine(e,n.attrs),this.defaultAttrs=tne(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ic.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:rne(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Wa(this,this.computeAttrs(e),J.from(r),Nt.setFrom(n))}createChecked(e=null,r,n){return r=J.from(r),this.checkContent(r),new Wa(this,this.computeAttrs(e),r,Nt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=J.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(J.empty,!0);return s?new Wa(this,e,r.append(s),Nt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){nne(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Nt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new sne(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function jve(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class Tve{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?jve(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class W0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=ine(e,i.attrs),this.excluded=null;let s=tne(this.attrs);this.instance=s?new Nt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Nt(this,rne(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new W0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){nne(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class one{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=Zr.from(e.nodes),r.marks=Zr.from(e.marks||{}),this.nodes=N5.compile(this.spec.nodes,this),this.marks=W0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Ic.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?k5(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:k5(this,o.split(" "))}this.nodeFromJSON=i=>Wa.fromJSON(this,i),this.markFromJSON=i=>Nt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof N5){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new uv(n,n.defaultAttrs,e,Nt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function k5(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function Ove(t){return t.tag!=null}function Pve(t){return t.style!=null}class Ua{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(Ove(i))this.tags.push(i);else if(Pve(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new j5(this,r,!1);return n.addAll(e,Nt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new j5(this,r,!0);return n.addAll(e,Nt.none,r.from,r.to),ve.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Mve(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=T5(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=T5(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ua(e,Ua.schemaRules(e)))}}const ane={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ive={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lne={ol:!0,ul:!0},Ep=1,_I=2,Df=4;function C5(t,e,r){return e!=null?(e?Ep:0)|(e==="full"?_I:0):t&&t.whitespace=="pre"?Ep|_I:r&~Df}class Og{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Nt.none,this.match=s||(o&Df?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(J.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ep)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=J.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(J.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ane.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class j5{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=C5(null,r.preserveWhitespace,0)|(n?Df:0);i?s=new Og(i.type,i.attrs,Nt.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new Og(null,null,Nt.none,!0,null,o):s=new Og(e.schema.topNodeType,null,Nt.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&_I?"full":this.localPreserveWS||(i.options&Ep)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;lne.hasOwnProperty(o)&&this.parser.normalizeLists&&Rve(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:Ive.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,d=this.needsBlock;if(ane.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),u&&this.sync(s),this.needsBlock=d}else{let u=this.readStyles(e,r);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(u=>!l.clearMark(u)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!i||i.length>u.length+a)&&(i=u,s=l,!u.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Nt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):O5(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=C5(e,s,o.options);o.options&Df&&o.content.length==0&&(a|=Df);let l=Nt.none;return n=n.filter(u=>(o.type?o.type.allowsMarkType(u.type):O5(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new Og(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=Ep)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let u=r[a];if(u==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Rve(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&lne.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function Mve(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function T5(t){let e={};for(let r in t)e[r]=t[r];return e}function O5(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:d}=a.edge(l);if(u==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Yc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=Bx(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],d=this.serializeMark(u,o.isInline,r);d&&(s.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=py(Bx(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&py(Bx(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return py(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Yc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=P5(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return P5(e.marks)}}function P5(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function Bx(t){return t.document||window.document}const I5=new WeakMap;function Ave(t){let e=I5.get(t);return e===void 0&&I5.set(t,e=Dve(t)),e}function Dve(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function py(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=Ave(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let h in u)if(u[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),u[h]):h=="style"&&l.style?l.style.cssText=u[h]:l.setAttribute(h,u[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=py(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const cne=65535,une=Math.pow(2,16);function $ve(t,e){return t+e*une}function R5(t){return t&cne}function Fve(t){return(t-(t&cne))/une}const dne=1,hne=2,my=4,fne=8;class EI{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&fne)>0}get deletedBefore(){return(this.delInfo&(dne|my))>0}get deletedAfter(){return(this.delInfo&(hne|my))>0}get deletedAcross(){return(this.delInfo&my)>0}}class pi{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&pi.empty)return pi.empty}recover(e){let r=0,n=R5(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+Fve(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+s],d=this.ranges[a+o],h=l+u;if(e<=h){let f=u?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:$ve(a/3,e-l),g=e==l?hne:e==h?dne:my;return(r<0?e!=l:e!=h)&&(g|=fne),new EI(p,g,m)}i+=d-u}return n?e+i:new EI(e+i,0,null)}touches(e,r){let n=0,i=R5(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let u=this.ranges[a+s],d=l+u;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-u}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[i+r],d=this.ranges[i+n];e(a,a+u,l,l+d),s+=d-u}}invert(){return new pi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?pi.empty:new pi(e<0?[0,-e,0]:[0,0,e])}}pi.empty=new pi([]);class Np{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new Np(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new Np;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new EI(e,i,null)}}const zx=Object.create(null);class bn{getMap(){return pi.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=zx[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in zx)throw new RangeError("Duplicate use of step JSON ID "+e);return zx[e]=r,r.prototype.jsonID=e,r}}class gr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new gr(e,null)}static fail(e){return new gr(null,e)}static fromReplace(e,r,n,i){try{return gr.ok(e.replace(r,n,i))}catch(s){if(s instanceof av)return gr.fail(s.message);throw s}}}function BM(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(BM(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return J.fromArray(n)}class Oa extends bn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new ve(BM(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return gr.fromReplace(e,this.from,this.to,s)}invert(){return new ds(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Oa(r.pos,n.pos,this.mark)}merge(e){return e instanceof Oa&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Oa(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Oa(r.from,r.to,e.markFromJSON(r.mark))}}bn.jsonID("addMark",Oa);class ds extends bn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new ve(BM(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return gr.fromReplace(e,this.from,this.to,n)}invert(){return new Oa(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ds(r.pos,n.pos,this.mark)}merge(e){return e instanceof ds&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ds(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ds(r.from,r.to,e.markFromJSON(r.mark))}}bn.jsonID("removeMark",ds);class Pa extends bn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return gr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return gr.fromReplace(e,this.pos,this.pos+1,new ve(J.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Pa(this.pos,r.marks[i]);return new Pa(this.pos,this.mark)}}return new Rc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Pa(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Pa(r.pos,e.markFromJSON(r.mark))}}bn.jsonID("addNodeMark",Pa);class Rc extends bn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return gr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return gr.fromReplace(e,this.pos,this.pos+1,new ve(J.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Pa(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Rc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Rc(r.pos,e.markFromJSON(r.mark))}}bn.jsonID("removeNodeMark",Rc);class Fr extends bn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&NI(e,this.from,this.to)?gr.fail("Structure replace would overwrite content"):gr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new pi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Fr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Fr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Fr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?ve.empty:new ve(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Fr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?ve.empty:new ve(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Fr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Fr(r.from,r.to,ve.fromJSON(e,r.slice),!!r.structure)}}bn.jsonID("replace",Fr);class Br extends bn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(NI(e,this.from,this.gapFrom)||NI(e,this.gapTo,this.to)))return gr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return gr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?gr.fromReplace(e,this.from,this.to,n):gr.fail("Content does not fit in gap")}getMap(){return new pi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Br(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Br(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Br(r.from,r.to,r.gapFrom,r.gapTo,ve.fromJSON(e,r.slice),r.insert,!!r.structure)}}bn.jsonID("replaceAround",Br);function NI(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function qve(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,u,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(u,e),p=Math.min(u+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new ds(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new Oa(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Lve(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof W0){let u=o.marks,d;for(;d=n.isInSet(u);)(l||(l=[])).push(d),u=d.removeFromSet(u)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=u,f.step=s):i.push({style:h,from:Math.max(a,e),to:u,step:s})}}}),i.forEach(o=>t.step(new ds(o.from,o.to,o.style)))}function zM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let u=s.child(l),d=a+u.nodeSize,h=n.matchType(u.type);if(!h)o.push(new Fr(a,d,ve.empty));else{n=h;for(let f=0;f<u.marks.length;f++)r.allowsMarkType(u.marks[f].type)||t.step(new ds(a,d,u.marks[f]));if(i&&u.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(u.text);)m||(m=new ve(J.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),o.push(new Fr(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(J.empty,!0);t.replace(a,a,new ve(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function Bve(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function gh(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!Bve(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function zve(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,u=a,d=J.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=J.from(n.node(m).copy(d)),h++):l--;let f=J.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=J.from(i.node(m).copy(f)),p++):u++;t.step(new Br(l,u,o,a,new ve(d.append(f),h,p),d.size-h,!0))}function VM(t,e,r=null,n=t){let i=Vve(t,e),s=i&&Wve(n,e);return s?i.map(M5).concat({type:e,attrs:r}).concat(s.map(M5)):null}function M5(t){return{type:t,attrs:null}}function Vve(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function Wve(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=n;l&&u<i;u++)l=l.matchType(r.child(u).type);return!l||!l.validEnd?null:o}function Uve(t,e,r){let n=J.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=J.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Br(i,s,i,s,new ve(n,0,0),r.length,!0))}function Hve(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&Kve(t.doc,t.mapping.slice(s).map(a),n)){let u=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?u=!1:!p&&m&&(u=!0)}u===!1&&mne(t,o,a,s),zM(t,t.mapping.slice(s).map(a,1),n,void 0,u===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new Br(h,f,h+1,f-1,new ve(J.from(n.create(l,null,o.marks)),0,0),1,!0)),u===!0&&pne(t,o,a,s),!1}})}function pne(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function mne(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Kve(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function Gve(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Br(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ve(J.from(o),0,0),1,!0))}function xo(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=r-2;u>s;u--,d--){let h=i.node(u),f=i.index(u);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Yve(t,e,r=1,n){let i=t.doc.resolve(e),s=J.empty,o=J.empty;for(let a=i.depth,l=i.depth-r,u=r-1;a>l;a--,u--){s=J.from(i.node(a).copy(s));let d=n&&n[u];o=J.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new Fr(e,e,new ve(s.append(o),r,r),!0))}function fl(t,e){let r=t.resolve(e),n=r.index();return gne(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Qve(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function gne(t,e){return!!(t&&e&&!t.isLeaf&&Qve(t,e))}function U0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&gne(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function Xve(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);mne(t,d.node(),d.before(),a)}o.inlineContent&&zM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),u=l.map(e-r);if(t.step(new Fr(u,l.map(e+r,-1),ve.empty,!0)),n===!0){let d=t.doc.resolve(u);pne(t,d.node(),d.before(),t.steps.length)}return t}function Jve(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function yne(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),u=n.node(o),d=!1;if(s==1)d=u.canReplace(l,l,i);else{let h=u.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&u.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function H0(t,e,r=e,n=ve.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return vne(i,s,n)?new Fr(e,r,n):new Zve(i,s,n).fit()}function vne(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class Zve{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=J.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=J.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ve(s,o,a);return e>-1?new Br(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Fr(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=Vx(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],d,h=null;if(r==1&&(o?u.matchType(o.type)||(h=u.fillBefore(J.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=u.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=Vx(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ve(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=Vx(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new ve(xf(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new ve(xf(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,u=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let g=a.child(u),v=h.matchType(g.type);if(!v)break;u++,(u>1||l==0||g.content.size)&&(h=v,d.push(bne(g.mark(f.allowedMarks(g.marks)),u==1?l:0,u==a.childCount?p:-1)))}let m=u==a.childCount;m||(p=-1),this.placed=wf(this.placed,r,J.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<p;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?ve.empty:new ve(xf(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new ve(xf(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!Wx(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=Wx(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],d=Wx(e,a,u,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=wf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=wf(this.placed,this.depth,J.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(J.empty,!0);r.childCount&&(this.placed=wf(this.placed,this.frontier.length,r))}}function xf(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(xf(t.firstChild.content,e-1,r)))}function wf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(wf(t.lastChild.content,e-1,r)))}function Vx(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function bne(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,bne(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(J.empty,!0)))),t.copy(n)}function Wx(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!e0e(r,s.content,o)?a:null}function e0e(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function t0e(t){return t.spec.defining||t.spec.definingForContent}function r0e(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(vne(i,s,n))return t.step(new Fr(e,r,n));let o=wne(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),u=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(u.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=u[f],m=t0e(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=u[p];if(m)for(let g=0;g<o.length;g++){let v=o[(g+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let b=i.node(v-1),w=i.index(v-1);if(b.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(v),y?s.after(v):r,new ve(xne(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function xne(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(xne(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(J.empty,!0))}return t}function n0e(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Jve(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new ve(J.from(n),0,0))}function i0e(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=wne(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function wne(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class dd extends bn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return gr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return gr.fromReplace(e,this.pos,this.pos+1,new ve(J.from(i),0,r.isLeaf?0:1))}getMap(){return pi.empty}invert(e){return new dd(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new dd(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new dd(r.pos,r.attr,r.value)}}bn.jsonID("attr",dd);class kp extends bn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return gr.ok(n)}getMap(){return pi.empty}invert(e){return new kp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new kp(r.attr,r.value)}}bn.jsonID("docAttr",kp);let Wd=class extends Error{};Wd=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Wd.prototype=Object.create(Error.prototype);Wd.prototype.constructor=Wd;Wd.prototype.name="TransformError";class Sne{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Np}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Wd(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=ve.empty){let i=H0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new ve(J.from(n),0,0))}delete(e,r){return this.replace(e,r,ve.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return r0e(this,e,r,n),this}replaceRangeWith(e,r,n){return n0e(this,e,r,n),this}deleteRange(e,r){return i0e(this,e,r),this}lift(e,r){return zve(this,e,r),this}join(e,r=1){return Xve(this,e,r),this}wrap(e,r){return Uve(this,e,r),this}setBlockType(e,r=e,n,i=null){return Hve(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return Gve(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new dd(e,r,n)),this}setDocAttribute(e,r){return this.step(new kp(e,r)),this}addNodeMark(e,r){return this.step(new Pa(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Nt)r.isInSet(n.marks)&&this.step(new Rc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Rc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return Yve(this,e,r,n),this}addMark(e,r,n){return qve(this,e,r,n),this}removeMark(e,r,n){return Lve(this,e,r,n),this}clearIncompatible(e,r,n){return zM(this,e,r,n),this}}const Ux=Object.create(null);class Qe{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new s0e(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=ve.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(u.pos),a?ve.empty:r),a==0&&$5(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),u=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(u,d):(e.replaceRangeWith(u,d,r),$5(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new Be(e):Iu(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?Iu(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):Iu(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new yi(e.node(0))}static atStart(e){return Iu(e,e,0,0,1)||new yi(e)}static atEnd(e){return Iu(e,e,e.content.size,e.childCount,-1)||new yi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Ux[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in Ux)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ux[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}Qe.prototype.visible=!0;class s0e{constructor(e,r){this.$from=e,this.$to=r}}let A5=!1;function D5(t){!A5&&!t.parent.inlineContent&&(A5=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends Qe{constructor(e,r=e){D5(e),D5(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Qe.near(n);let i=e.resolve(r.map(this.anchor));return new Be(i.parent.inlineContent?i:n,n)}replace(e,r=ve.empty){if(super.replace(e,r),r==ve.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new K0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=Qe.findFrom(r,n,!0)||Qe.findFrom(r,-n,!0);if(s)r=s.$head;else return Qe.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(Qe.findFrom(e,-n,!0)||Qe.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new Be(e,r)}}Qe.jsonID("text",Be);class K0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new K0(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class Me extends Qe{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?Qe.near(s):new Me(s)}content(){return new ve(J.from(this.node),0,0)}eq(e){return e instanceof Me&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new WM(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Me(e.resolve(r.anchor))}static create(e,r){return new Me(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Me.prototype.visible=!1;Qe.jsonID("node",Me);class WM{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new K0(n,n):new WM(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Me.isSelectable(n)?new Me(r):Qe.near(r)}}class yi extends Qe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=ve.empty){if(r==ve.empty){e.delete(0,e.doc.content.size);let n=Qe.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new yi(e)}map(e){return new yi(e)}eq(e){return e instanceof yi}getBookmark(){return o0e}}Qe.jsonID("all",yi);const o0e={map(){return this},resolve(t){return new yi(t)}};function Iu(t,e,r,n,i,s=!1){if(e.inlineContent)return Be.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Me.isSelectable(a))return Me.create(t,r-(i<0?a.nodeSize:0))}else{let l=Iu(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function $5(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof Fr||i instanceof Br))return;let s=t.mapping.maps[n],o;s.forEach((a,l,u,d)=>{o==null&&(o=d)}),t.setSelection(Qe.near(t.doc.resolve(o),r))}const F5=1,Pg=2,q5=4;class a0e extends Sne{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|F5)&~Pg,this.storedMarks=null,this}get selectionSet(){return(this.updated&F5)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Pg,this}ensureMarks(e){return Nt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Pg)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~Pg,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Nt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Qe.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=q5,this}get scrolledIntoView(){return(this.updated&q5)>0}}function L5(t,e){return!e||!t?t:t.bind(e)}class Sf{constructor(e,r,n){this.name=e,this.init=L5(r.init,n),this.apply=L5(r.apply,n)}}const l0e=[new Sf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Sf("selection",{init(t,e){return t.selection||Qe.atStart(e.doc)},apply(t){return t.selection}}),new Sf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new Sf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Hx{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=l0e.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Sf(n.key,n.spec.state,n))})}}class Yu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,u=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,u,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Yu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new a0e(this)}static create(e){let r=new Hx(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Yu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new Hx(this.schema,e.plugins),n=r.fields,i=new Yu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Hx(e.schema,e.plugins),s=new Yu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Wa.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=Qe.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=u.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function _ne(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=_ne(i,e,{})),r[n]=i}return r}class Gt{constructor(e){this.spec=e,this.props={},e.props&&_ne(e.props,this,this.props),this.key=e.key?e.key.key:Ene("plugin")}getState(e){return e[this.key]}}const Kx=Object.create(null);function Ene(t){return t in Kx?t+"$"+ ++Kx[t]:(Kx[t]=0,t+"$")}class Ir{constructor(e="key"){this.key=Ene(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const UM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Nne(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const kne=(t,e,r)=>{let n=Nne(t,r);if(!n)return!1;let i=HM(n);if(!i){let o=n.blockRange(),a=o&&gh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Ane(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Ud(s,"end")||Me.isSelectable(s)))for(let o=n.depth;;o--){let a=H0(t.doc,n.before(o),n.after(o),ve.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ud(s,"end")?Qe.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Me.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},c0e=(t,e,r)=>{let n=Nne(t,r);if(!n)return!1;let i=HM(n);return i?Cne(t,i,e):!1},u0e=(t,e,r)=>{let n=Tne(t,r);if(!n)return!1;let i=KM(n);return i?Cne(t,i,e):!1};function Cne(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let u=H0(t.doc,s,l,ve.empty);if(!u||u.from!=s||u instanceof Fr&&u.slice.size>=l-s)return!1;if(r){let d=t.tr.step(u);d.setSelection(Be.create(d.doc,s)),r(d.scrollIntoView())}return!0}function Ud(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const jne=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=HM(n)}let o=s&&s.nodeBefore;return!o||!Me.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Me.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function HM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Tne(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const One=(t,e,r)=>{let n=Tne(t,r);if(!n)return!1;let i=KM(n);if(!i)return!1;let s=i.nodeAfter;if(Ane(t,i,e,1))return!0;if(n.parent.content.size==0&&(Ud(s,"start")||Me.isSelectable(s))){let o=H0(t.doc,n.before(),n.after(),ve.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ud(s,"start")?Qe.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Me.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Pne=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=KM(n)}let o=s&&s.nodeAfter;return!o||!Me.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Me.create(t.doc,s.pos)).scrollIntoView()),!0)};function KM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const d0e=(t,e)=>{let r=t.selection,n=r instanceof Me,i;if(n){if(r.node.isTextblock||!fl(t.doc,r.from))return!1;i=r.from}else if(i=U0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(Me.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},h0e=(t,e)=>{let r=t.selection,n;if(r instanceof Me){if(r.node.isTextblock||!fl(t.doc,r.to))return!1;n=r.to}else if(n=U0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},f0e=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&gh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Ine=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function GM(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const p0e=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=GM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Qe.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Rne=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof yi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=GM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Be.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Mne=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(xo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&gh(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function m0e(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof Me&&e.selection.node.isBlock)return!n.parentOffset||!xo(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,u=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),u=n.start(p)==n.pos-(n.depth-p),a=GM(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof Be||e.selection instanceof yi)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=xo(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=xo(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&u&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const g0e=m0e(),y0e=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(Me.create(t.doc,i))),!0)};function v0e(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||fl(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function Ane(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&v0e(t,e,r))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=J.empty;for(let y=o.length-1;y>=0;y--)m=J.from(o[y].create(null,m));m=J.from(i.copy(m));let g=t.tr.step(new Br(e.pos-1,p,e.pos,p,new ve(m,1,0),o.length,!0)),v=g.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&fl(g.doc,v.pos)&&g.join(v.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:Qe.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&gh(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(u&&Ud(s,"start",!0)&&Ud(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=J.empty;for(let w=m.length-1;w>=0;w--)y=J.from(m[w].copy(y));let b=t.tr.step(new Br(e.pos-m.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new ve(y,m.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function Dne(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(Be.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const b0e=Dne(-1),x0e=Dne(1);function w0e(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&VM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function B5(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(u),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function YM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}YM(UM,kne,jne);YM(UM,One,Pne);YM(Ine,Rne,Mne,g0e);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function S0e(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return _0e(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function _0e(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new cv(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new cv(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=VM(s,r,n,e);return a?(t&&E0e(t,e,a,i,r),!0):!1}function E0e(t,e,r,n,i){let s=J.empty;for(let d=r.length-1;d>=0;d--)s=J.from(r[d].type.create(r[d].attrs,s));t.step(new Br(e.start-(n?2:0),e.end,e.start,e.end,new ve(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),u=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&xo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(d).nodeSize;return t}function N0e(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?k0e(e,r,t,s):C0e(e,r,s):!0:!1}}function k0e(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Br(s-1,o,s,o,new ve(J.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new cv(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=gh(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return fl(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function C0e(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+(a?0:1),d+1,o.content.append(l?J.empty:J.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new Br(h-(a?1:0),f+(l?1:0),h+1,f-1,new ve((a?J.empty:J.from(i.copy(J.empty))).append(l?J.empty:J.from(i.copy(J.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function j0e(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let u=l.lastChild&&l.lastChild.type==a.type,d=J.from(u?t.create():null),h=new ve(J.from(t.create(null,J.from(a.type.create(null,d)))),u?3:1,0),f=s.start,p=s.end;r(e.tr.step(new Br(f-(u?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const en=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Hd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let kI=null;const ao=function(t,e,r){let n=kI||(kI=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},T0e=function(){kI=null},Mc=function(t,e,r,n){return r&&(z5(t,e,r,n,-1)||z5(t,e,r,n,1))},O0e=/^(img|br|input|textarea|hr)$/i;function z5(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Fi(t))){let o=t.parentNode;if(!o||o.nodeType!=1||fm(t)||O0e.test(t.nodeName)||t.contentEditable=="false")return!1;e=en(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Fi(t):0}else return!1}}function Fi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function P0e(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Fi(t)}else if(t.parentNode&&!fm(t))e=en(t),t=t.parentNode;else return null}}function I0e(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!fm(t))e=en(t)+1,t=t.parentNode;else return null}}function R0e(t,e,r){for(let n=e==0,i=e==Fi(t);n||i;){if(t==r)return!0;let s=en(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Fi(t)}}function fm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const G0=function(t){return t.focusNode&&Mc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Dl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function M0e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function A0e(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Fi(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Fi(n.startContainer),n.startOffset)}}}const zs=typeof navigator<"u"?navigator:null,V5=typeof document<"u"?document:null,pl=zs&&zs.userAgent||"",CI=/Edge\/(\d+)/.exec(pl),$ne=/MSIE \d/.exec(pl),jI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pl),ri=!!($ne||jI||CI),Ha=$ne?document.documentMode:jI?+jI[1]:CI?+CI[1]:0,zi=!ri&&/gecko\/(\d+)/i.test(pl);zi&&+(/Firefox\/(\d+)/.exec(pl)||[0,0])[1];const TI=!ri&&/Chrome\/(\d+)/.exec(pl),qr=!!TI,Fne=TI?+TI[1]:0,vn=!ri&&!!zs&&/Apple Computer/.test(zs.vendor),Kd=vn&&(/Mobile\/\w+/.test(pl)||!!zs&&zs.maxTouchPoints>2),Ri=Kd||(zs?/Mac/.test(zs.platform):!1),qne=zs?/Win/.test(zs.platform):!1,go=/Android \d/.test(pl),pm=!!V5&&"webkitFontSmoothing"in V5.documentElement.style,D0e=pm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function $0e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function eo(t,e){return typeof t=="number"?t:t[e]}function F0e(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function W5(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=Hd(o);continue}let a=o,l=a==s.body,u=l?$0e(s):F0e(a),d=0,h=0;if(e.top<u.top+eo(n,"top")?h=-(u.top-e.top+eo(i,"top")):e.bottom>u.bottom-eo(n,"bottom")&&(h=e.bottom-e.top>u.bottom-u.top?e.top+eo(i,"top")-u.top:e.bottom-u.bottom+eo(i,"bottom")),e.left<u.left+eo(n,"left")?d=-(u.left-e.left+eo(i,"left")):e.right>u.right-eo(n,"right")&&(d=e.right-u.right+eo(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Hd(o)}}function q0e(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:Lne(t.dom)}}function Lne(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Hd(n));return e}function L0e({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;Bne(r,n==0?0:n-e)}function Bne(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let ku=null;function B0e(t){if(t.setActive)return t.setActive();if(ku)return t.focus(ku);let e=Lne(t);t.focus(ku==null?{get preventScroll(){return ku={preventScroll:!0},!0}}:void 0),ku||(ku=!1,Bne(e,0))}function zne(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,u;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=ao(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=u,n=0),r&&r.nodeType==3?z0e(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:zne(r,i)}function z0e(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=na(n,1);if(o.top!=o.bottom&&QM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function QM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function V0e(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function W0e(t,e,r){let{node:n,offset:i}=zne(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function U0e(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function Vne(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(QM(e,u))return Vne(o,e,u)}}if((s=(s+1)%n)==i)break}return t}function H0e(t,e){let r=t.dom.ownerDocument,n,i=0,s=A0e(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!QM(e,u)||(o=Vne(t.dom,e,u),!o))return null}if(vn)for(let u=o;n&&u;u=Hd(u))u.draggable&&(n=void 0);if(o=V0e(o,e),n){if(zi&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let u;pm&&i&&n.nodeType==1&&(u=n.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=U0e(t,n,i,e))}a==null&&(a=W0e(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function U5(t){return t.top<t.bottom||t.left<t.right}function na(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(U5(n))return n}return Array.prototype.find.call(r,U5)||t.getBoundingClientRect()}const K0e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Wne(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=pm||zi;if(n.nodeType==3)if(o&&(K0e.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=na(ao(n,i,i),r);if(zi&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let u=na(ao(n,i-1,i-1),-1);if(u.top==l.top){let d=na(ao(n,i,i+1),-1);if(d.top!=l.top)return lf(d,d.left<u.left)}}return l}else{let l=i,u=i,d=r<0?1:-1;return r<0&&!i?(u++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:u++,lf(na(ao(n,l,u),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Fi(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return Gx(l.getBoundingClientRect(),!1)}if(s==null&&i<Fi(n)){let l=n.childNodes[i];if(l.nodeType==1)return Gx(l.getBoundingClientRect(),!0)}return Gx(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Fi(n))){let l=n.childNodes[i-1],u=l.nodeType==3?ao(l,Fi(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return lf(na(u,1),!1)}if(s==null&&i<Fi(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?ao(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return lf(na(u,-1),!0)}return lf(na(n.nodeType==3?ao(n):n,-r),r>=0)}function lf(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function Gx(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function Une(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function G0e(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return Une(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Wne(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=ao(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let d=l[u];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const Y0e=/[\u0590-\u08ac]/;function Q0e(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!Y0e.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:Une(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==g;try{a.collapse(d,h),l&&(l!=d||u!=h)&&a.extend&&a.extend(l,u)}catch{}return f!=null&&(a.caretBidiLevel=f),v}):n.pos==n.start()||n.pos==n.end()}let H5=null,K5=null,G5=!1;function X0e(t,e,r){return H5==e&&K5==r?G5:(H5=e,K5=r,G5=r=="up"||r=="down"?G0e(t,e,r):Q0e(t,e,r))}const Vi=0,Y5=1,Vl=2,Vs=3;class mm{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Vi,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>en(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof Kne){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof Hne&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?en(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?en(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],u=o+l.size;if(i==-1&&e<=u){let d=o+l.border;if(e>=d&&r<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=en(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>r||a==this.children.length-1)){r=u;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=en(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(s>m&&o<v)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=v}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),u=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((zi||vn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:en(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(zi&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&vn)&&Mc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Mc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((u.extend||e==r)&&!(h&&zi)){u.collapse(a.node,a.offset);try{e!=r&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?Vl:Y5,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Vs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Vl:Vs}n=o}this.dirty=Vl}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Vl:Y5;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Hne extends mm{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Vi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class J0e extends mm{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ac extends mm{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Yc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Ac(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Vs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Vs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Vi){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Vi}}slice(e,r,n){let i=Ac.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=PI(s,r,o,n)),e>0&&(s=PI(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ka extends mm{constructor(e,r,n,i,s,o,a,l,u){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,u=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=u&&u.dom,h=u&&u.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=Yc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=Qne(d,n,r),u?l=new Z0e(e,r,n,i,d,h||null,f,u,s,o+1):r.isText?new Y0(e,r,n,i,d,f,s):new Ka(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>J.empty)}return e}matchesNode(e,r,n){return this.dirty==Vi&&e.eq(this.node)&&dv(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new tbe(this,o&&o.node,e);ibe(this.node,this.innerDeco,(u,d,h)=>{u.spec.marks?l.syncToMarks(u.spec.marks,n,e):u.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Nt.none:this.node.child(d).marks,n,e),l.placeWidget(u,e,i)},(u,d,h,f)=>{l.syncToMarks(u.marks,n,e);let p;l.findNodeMatch(u,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,d,h,p,e)||l.updateNextNode(u,d,h,e,f,i)||l.addNode(u,d,h,e,i),i+=u.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Vl)&&(o&&this.protectLocalComposition(e,o),Gne(this.contentDOM,this.children,e),Kd&&sbe(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=obe(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new J0e(this,s,r,i);e.input.compositionNodes.push(o),this.children=PI(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==Vs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Vi}updateOuterDeco(e){if(dv(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Yne(this.dom,this.nodeDOM,OI(this.outerDeco,this.node,r),OI(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Q5(t,e,r,n,i){Qne(n,e,t);let s=new Ka(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Y0 extends Ka{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==Vs||this.dirty!=Vi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Vi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Vi,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new Y0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Vs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Kne extends mm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Vi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Z0e extends Ka{constructor(e,r,n,i,s,o,a,l,u,d){super(e,r,n,i,s,o,a,u,d),this.spec=l}update(e,r,n,i){if(this.dirty==Vs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Gne(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=X5(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Ac){let l=n?n.previousSibling:t.lastChild;Gne(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=X5(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const $f=function(t){t&&(this.nodeName=t)};$f.prototype=Object.create(null);const Wl=[new $f];function OI(t,e,r){if(t.length==0)return Wl;let n=r?Wl[0]:new $f,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new $f(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new $f(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function Yne(t,e,r,n){if(r==Wl&&n==Wl)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Wl[0]),i=l}ebe(i,a||Wl[0],o)}return i}function ebe(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function Qne(t,e,r){return Yne(t,t,Wl,OI(e,r,t.nodeType!=1))}function dv(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function X5(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class tbe{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=rbe(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Vi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ac.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,r,n)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==Vs&&o.dom==o.contentDOM&&(o.dirty=Vl),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ka){let u=this.preMatch.matched.get(l);if(u!=null&&u!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Vs&&dv(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Vl,h.updateChildren(i,o+1),h.dirty=Vi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!dv(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ka.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Ka.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Hne(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Ac;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof Y0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((vn||qr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Kne(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function rbe(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let u=r.children[n-1];if(u instanceof Ac)r=u,n=u.children.length;else{a=u,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function nbe(t,e){return t.type.side-e.type.side}function ibe(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);n(d,i,e.forChild(s,d),u),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(d?(h||(h=[d])).push(v):d=v)}if(d)if(h){h.sort(nbe);for(let v=0;v<h.length;v++)r(h[v],u,!!l)}else r(d,u,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(u<t.childCount)p=u,f=t.child(u++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let v=m;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<m&&(l=f.cut(v-s),f=f.cut(0,v-s),m=v,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function sbe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function obe(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let u=a<n?l.lastIndexOf(e,n-a-1):-1;if(u>=0&&u+e.length+a>=r)return a+u;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function PI(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],u=a,d=a+=l.size;u>=r||d<=e?s.push(l):(u<e&&s.push(l.slice(0,e-u,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-u,l.size,n)))}return s}function XM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,u;if(G0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Me.isSelectable(h)&&i.parent&&!(h.isInline&&R0e(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;u=new Me(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!u){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;u=JM(t,d,a,h)}return u}function Xne(t){return t.editable?t.hasFocus():Zne(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function wo(t,e=!1){let r=t.state.selection;if(Jne(t,r),!!Xne(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&qr){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Mc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)lbe(t);else{let{anchor:n,head:i}=r,s,o;J5&&!(r instanceof Be)&&(r.$from.parent.inlineContent||(s=Z5(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=Z5(t,r.to))),t.docView.setSelection(n,i,t,e),J5&&(s&&eF(s),o&&eF(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&abe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const J5=vn||qr&&Fne<63;function Z5(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(vn&&i&&i.contentEditable=="false")return Yx(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Yx(i);if(s)return Yx(s)}}function Yx(t){return t.contentEditable="true",vn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function eF(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function abe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Xne(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function lbe(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,en(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&ri&&Ha<=11&&(r.disabled=!0,r.disabled=!1)}function Jne(t,e){if(e instanceof Me){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(tF(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else tF(t)}function tF(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function JM(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||Be.between(e,r,n)}function rF(t){return t.editable&&!t.hasFocus()?!1:Zne(t)}function Zne(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function cbe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Mc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function II(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Qe.findFrom(s,e)}function aa(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function nF(t,e,r){let n=t.state.selection;if(n instanceof Be)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return aa(t,new Be(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=II(t.state,e);return i&&i instanceof Me?aa(t,i):!1}else if(!(Ri&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Me.isSelectable(s)?aa(t,new Me(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):pm?aa(t,new Be(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Me&&n.node.isInline)return aa(t,new Be(e>0?n.$to:n.$from));{let i=II(t.state,e);return i?aa(t,i):!1}}}function hv(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ff(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Cu(t,e){return e<0?ube(t):dbe(t)}function ube(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(zi&&r.nodeType==1&&n<hv(r)&&Ff(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(Ff(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(eie(r))break;{let a=r.previousSibling;for(;a&&Ff(a,-1);)i=r.parentNode,s=en(a),a=a.previousSibling;if(a)r=a,n=hv(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?RI(t,r,n):i&&RI(t,i,s)}function dbe(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=hv(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(Ff(a,1))s=r,o=++n;else break}else{if(eie(r))break;{let a=r.nextSibling;for(;a&&Ff(a,1);)s=a.parentNode,o=en(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=hv(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&RI(t,s,o)}function eie(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function hbe(t,e){for(;t&&e==t.childNodes.length&&!fm(t);)e=en(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function fbe(t,e){for(;t&&!e&&!fm(t);)e=en(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function RI(t,e,r){if(e.nodeType!=3){let s,o;(o=hbe(e,r))?(e=o,r=0):(s=fbe(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(G0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&wo(t)},50)}function iF(t,e){let r=t.state.doc.resolve(e);if(!(qr||qne)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function sF(t,e,r){let n=t.state.selection;if(n instanceof Be&&!n.empty||r.indexOf("s")>-1||Ri&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=II(t.state,e);if(o&&o instanceof Me)return aa(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof yi?Qe.near(o,e):Qe.findFrom(o,e);return a?aa(t,a):!1}return!1}function oF(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function aF(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function pbe(t){if(!vn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;aF(t,n,"true"),setTimeout(()=>aF(t,n,"false"),20)}return!1}function mbe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function gbe(t,e){let r=e.keyCode,n=mbe(e);if(r==8||Ri&&r==72&&n=="c")return oF(t,-1)||Cu(t,-1);if(r==46&&!e.shiftKey||Ri&&r==68&&n=="c")return oF(t,1)||Cu(t,1);if(r==13||r==27)return!0;if(r==37||Ri&&r==66&&n=="c"){let i=r==37?iF(t,t.state.selection.from)=="ltr"?-1:1:-1;return nF(t,i,n)||Cu(t,i)}else if(r==39||Ri&&r==70&&n=="c"){let i=r==39?iF(t,t.state.selection.from)=="ltr"?1:-1:1;return nF(t,i,n)||Cu(t,i)}else{if(r==38||Ri&&r==80&&n=="c")return sF(t,-1,n)||Cu(t,-1);if(r==40||Ri&&r==78&&n=="c")return pbe(t)||sF(t,1,n)||Cu(t,1);if(n==(Ri?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function ZM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Yc.fromSchema(t.state.schema),a=oie(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let u=l.firstChild,d,h=0;for(;u&&u.nodeType==1&&(d=sie[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function tie(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new ve(J.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Yc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=xbe(r),pm&&wbe(o);let u=o&&o.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ua.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!ybe.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=Sbe(lF(a,+d[1],+d[2]),d[4]);else if(a=ve.maxOpen(vbe(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=lF(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const ybe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function vbe(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&nie(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=iie(o[o.length-1],s.length));let d=rie(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return J.from(o)}return t}function rie(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,J.from(t));return t}function nie(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=nie(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(J.from(rie(r,t,i+1))))}}function iie(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,iie(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(J.empty,!0);return t.copy(r.append(n))}function MI(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=MI(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(J.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function lF(t,e,r){return e<t.openStart&&(t=new ve(MI(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new ve(MI(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const sie={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let cF=null;function oie(){return cF||(cF=document.implementation.createHTMLDocument("title"))}let Qx=null;function bbe(t){let e=window.trustedTypes;return e?(Qx||(Qx=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),Qx.createHTML(t)):t}function xbe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=oie().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&sie[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=bbe(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function wbe(t){let e=t.querySelectorAll(qr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function Sbe(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=J.from(l.create(n[a+1],i)),s++,o++}return new ve(i,s,o)}const In={},Rn={},_be={touchstart:!0,touchmove:!0};class Ebe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Nbe(t){for(let e in In){let r=In[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{Cbe(t,n)&&!eA(t,n)&&(t.editable||!(n.type in Rn))&&r(t,n)},_be[e]?{passive:!0}:void 0)}vn&&t.dom.addEventListener("input",()=>null),AI(t)}function Ia(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function kbe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function AI(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>eA(t,n))})}function eA(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function Cbe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function jbe(t,e){!eA(t,e)&&In[e.type]&&(t.editable||!(e.type in Rn))&&In[e.type](t,e)}Rn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!lie(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(go&&qr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Kd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Dl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||gbe(t,r)?r.preventDefault():Ia(t,"key")};Rn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Rn.keypress=(t,e)=>{let r=e;if(lie(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||Ri&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Be)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function Q0(t){return{left:t.clientX,top:t.clientY}}function Tbe(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function tA(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function hd(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function Obe(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Me.isSelectable(n)?(hd(t,new Me(r)),!0):!1}function Pbe(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof Me&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Me.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(hd(t,Me.create(t.state.doc,i)),!0):!1}function Ibe(t,e,r,n,i){return tA(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?Pbe(t,r):Obe(t,r))}function Rbe(t,e,r,n){return tA(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function Mbe(t,e,r,n){return tA(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||Abe(t,r,n)}function Abe(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(hd(t,Be.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)hd(t,Be.create(n,a+1,a+1+o.content.size));else if(Me.isSelectable(o))hd(t,Me.create(n,a));else continue;return!0}}function rA(t){return fv(t)}const aie=Ri?"metaKey":"ctrlKey";In.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=rA(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&Tbe(r,t.input.lastClick)&&!r[aie]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(Q0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Dbe(t,o,r,!!n)):(s=="doubleClick"?Rbe:Mbe)(t,o.pos,o.inside,r)?r.preventDefault():Ia(t,"pointer"))};class Dbe{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[aie],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Me&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&zi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ia(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>wo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(Q0(e))),this.updateAllowDefault(e),this.allowDefault||!r?Ia(this.view,"pointer"):Ibe(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||vn&&this.mightDrag&&!this.mightDrag.node.isAtom||qr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(hd(this.view,Qe.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Ia(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ia(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}In.touchstart=t=>{t.input.lastTouch=Date.now(),rA(t),Ia(t,"pointer")};In.touchmove=t=>{t.input.lastTouch=Date.now(),Ia(t,"pointer")};In.contextmenu=t=>rA(t);function lie(t,e){return t.composing?!0:vn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const $be=go?5e3:-1;Rn.compositionstart=Rn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||qr&&qne&&Fbe(t)))t.markCursor=t.state.storedMarks||r.marks(),fv(t,!0),t.markCursor=null;else if(fv(t,!e.selection.empty),zi&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}cie(t,$be)};function Fbe(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Rn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,cie(t,20))};function cie(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>fv(t),e))}function uie(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Lbe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function qbe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=P0e(e.focusNode,e.focusOffset),n=I0e(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function Lbe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function fv(t,e=!1){if(!(go&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),uie(t),e||t.docView&&t.docView.dirty){let r=XM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Bbe(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const Cp=ri&&Ha<15||Kd&&D0e<604;In.copy=Rn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=Cp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=ZM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Bbe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function zbe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Vbe(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?jp(t,n.value,null,i,e):jp(t,n.textContent,n.innerHTML,i,e)},50)}function jp(t,e,r,n,i){let s=tie(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||ve.empty)))return!0;if(!s)return!1;let o=zbe(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function die(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Rn.paste=(t,e)=>{let r=e;if(t.composing&&!go)return;let n=Cp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&jp(t,die(n),n.getData("text/html"),i,r)?r.preventDefault():Vbe(t,r)};class hie{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const Wbe=Ri?"altKey":"ctrlKey";function fie(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[Wbe]}In.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Q0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Me?i.to-1:i.to))){if(n&&n.mightDrag)o=Me.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=Me.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:u,slice:d}=ZM(t,a);(!r.dataTransfer.files.length||!qr||Fne>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Cp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",Cp||r.dataTransfer.setData("text/plain",u),t.dragging=new hie(d,fie(t,r),o)};In.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Rn.dragover=Rn.dragenter=(t,e)=>e.preventDefault();Rn.drop=(t,e)=>{try{Ube(t,e,t.dragging)}finally{t.dragging=null}};function Ube(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(Q0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=tie(t,die(e.dataTransfer),Cp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&fie(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||ve.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?yne(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let u=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(u,u,s.content.firstChild):l.replaceRange(u,u,s),l.doc.eq(h))return;let f=l.doc.resolve(u);if(d&&Me.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Me(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,v,y)=>p=y),l.setSelection(JM(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}In.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&wo(t)},20))};In.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};In.beforeinput=(t,e)=>{if(qr&&go&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Dl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Rn)In[t]=Rn[t];function Tp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class pv{constructor(e,r){this.toDOM=e,this.spec=r||dc,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new On(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof pv&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Tp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ga{constructor(e,r){this.attrs=e,this.spec=r||dc}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new On(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Ga&&Tp(this.attrs,e.attrs)&&Tp(this.spec,e.spec)}static is(e){return e.type instanceof Ga}destroy(){}}class nA{constructor(e,r){this.attrs=e,this.spec=r||dc}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new On(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof nA&&Tp(this.attrs,e.attrs)&&Tp(this.spec,e.spec)}destroy(){}}class On{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new On(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new On(e,e,new pv(r,n))}static inline(e,r,n,i){return new On(e,r,new Ga(n,i))}static node(e,r,n,i){return new On(e,r,new nA(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ga}get widget(){return this.type instanceof pv}}const Ru=[],dc={};class Wt{constructor(e,r){this.local=e.length?e:Ru,this.children=r.length?r:Ru}static create(e,r){return r.length?mv(r,e,0,dc):dn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==dn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||dc)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Hbe(this.children,o||[],e,r,n,i,s):o?new Wt(o.sort(hc),Ru):dn}add(e,r){return r.length?this==dn?Wt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let u=l+n,d;if(d=mie(r,a,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,u+1):i.splice(s,0,l,l+a.nodeSize,mv(d,a,u+1,dc)),s+=3}});let o=pie(s?gie(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Wt(o.length?this.local.concat(o).sort(hc):this.local,i||this.children)}remove(e){return e.length==0||this==dn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let u=n[s+2].removeInner(o,a+1);u!=dn?n[s+2]=u:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Wt(i,n):dn}forChild(e,r){if(this==dn)return this;if(r.isLeaf)return Wt.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ga){let u=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;u<d&&(i||(i=[])).push(l.copy(u,d))}}if(i){let a=new Wt(i.sort(hc),Ru);return n?new pa([a,n]):a}return n||dn}eq(e){if(this==e)return!0;if(!(e instanceof Wt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return iA(this.localsInner(e))}localsInner(e){if(this==dn)return Ru;if(e.inlineContent||!this.local.some(Ga.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ga||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Wt.empty=new Wt([],[]);Wt.removeOverlap=iA;const dn=Wt.empty;class pa{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,dc));return pa.from(n)}forChild(e,r){if(r.isLeaf)return Wt.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=dn&&(s instanceof pa?n=n.concat(s.members):n.push(s))}return pa.from(n)}eq(e){if(!(e instanceof pa)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?iA(n?r:r.sort(hc)):Ru}static from(e){switch(e.length){case 0:return dn;case 1:return e[0];default:return new pa(e.every(r=>r instanceof Wt)?e:e.reduce((r,n)=>r.concat(n instanceof Wt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function Hbe(t,e,r,n,i,s,o){let a=t.slice();for(let u=0,d=s;u<r.maps.length;u++){let h=0;r.maps[u].forEach((f,p,m,g)=>{let v=g-m-(p-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+d-h)continue;let w=a[y]+d-h;p>=w?a[y+1]=f<=w?-2:-1:f>=d&&v&&(a[y]+=v,a[y+1]+=v)}h+=v}),d=r.maps[u].map(d,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let d=r.map(t[u]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[u+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),v=n.maybeChild(m);if(v&&g==h&&g+v.nodeSize==p){let y=a[u+2].mapInner(r,v,d+1,t[u]+s+1,o);y!=dn?(a[u]=h,a[u+1]=p,a[u+2]=y):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=Kbe(a,t,e,r,i,s,o),d=mv(u,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Wt(e.sort(hc),a)}function pie(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new On(i.from+e,i.to+e,i.type))}return r}function Kbe(t,e,r,n,i,s,o){function a(l,u){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,u);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function mie(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function gie(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function mv(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let u=mie(t,a,l+r);if(u){s=!0;let d=mv(u,a,r+l+1,n);d!=dn&&i.push(l,l+a.nodeSize,d)}});let o=pie(s?gie(t):t,-r).sort(hc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Wt(o,i):dn}function hc(t,e){return t.from-e.from||t.to-e.to}function iA(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),uF(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),uF(e,i,n.copy(s.from,n.to)));break}}}return e}function uF(t,e,r){for(;e<t.length&&hc(r,t[e])>0;)e++;t.splice(e,0,r)}function Xx(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=dn&&e.push(n)}),t.cursorWrapper&&e.push(Wt.create(t.state.doc,[t.cursorWrapper.deco])),pa.from(e)}const Gbe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ybe=ri&&Ha<=11;class Qbe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Xbe{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Qbe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);ri&&Ha<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Ybe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Gbe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(rF(this.view)){if(this.suppressingSelectionUpdates)return wo(this.view);if(ri&&Ha<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Mc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=Hd(s))r.add(s);for(let s=e.anchorNode;s;s=Hd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&rF(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(zi&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||exe(e,h)!=p)&&f.remove()}}}else if((qr||vn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&G0(n)&&(u=XM(e))&&u.eq(Qe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,wo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Jbe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||wo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ri&&Ha<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?en(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?en(s):e.target.childNodes.length,u=n.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let dF=new WeakMap,hF=!1;function Jbe(t){if(!dF.has(t)&&(dF.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=zi,hF)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),hF=!0}}function fF(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Mc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Zbe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return fF(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?fF(t,r):null}function exe(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function txe(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),u,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:l.anchorOffset}],G0(l)||u.push({node:l.focusNode,offset:l.focusOffset})),qr&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=n.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=v;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||Ua.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:rxe,context:p});if(u&&u[0].pos!=null){let v=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function rxe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(vn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||vn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const nxe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ixe(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=XM(t,E);if(N&&!t.state.selection.eq(N)){if(qr&&go&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,Dl(13,"Enter"))))return;let C=t.state.tr.setSelection(N);E=="pointer"?C.setMeta("pointer",!0):E=="key"&&C.scrollIntoView(),s&&C.setMeta("composition",s),t.dispatch(C)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,u=txe(t,e,r),d=t.state.doc,h=d.slice(u.from,u.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=axe(h.content,u.doc.content,u.from,f,p);if(m&&t.input.domChangeCount++,(Kd&&t.input.lastIOSEnter>Date.now()-225||go)&&i.some(E=>E.nodeType==1&&!nxe.test(E.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",E=>E(t,Dl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof Be&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let E=pF(t,t.state.doc,u.sel);if(E&&!E.eq(t.state.selection)){let N=t.state.tr.setSelection(E);s&&N.setMeta("composition",s),t.dispatch(N)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Be&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ri&&Ha<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=u.doc.resolveNoCache(m.start-u.from),v=u.doc.resolveNoCache(m.endB-u.from),y=d.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if((Kd&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!b&&g.pos<u.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(u.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",E=>E(t,Dl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&oxe(d,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",E=>E(t,Dl(8,"Backspace")))){go&&qr&&t.domObserver.suppressSelectionUpdates();return}qr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),go&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,v=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,Dl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=E=>{let N=E||t.state.tr.replace(w,x,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let C=pF(t,N.doc,u.sel);C&&!(qr&&t.composing&&C.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(C.head==w||C.head==N.mapping.map(x)-1)||ri&&C.empty&&C.head==w)&&N.setSelection(C)}return s&&N.setMeta("composition",s),N.scrollIntoView()},_;if(b)if(g.pos==v.pos){ri&&Ha<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>wo(t),20));let E=S(t.state.tr.delete(w,x)),N=d.resolve(m.start).marksAcross(d.resolve(m.endA));N&&E.ensureMarks(N),t.dispatch(E)}else if(m.endA==m.endB&&(_=sxe(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let E=S(t.state.tr);_.type=="add"?E.addMark(w,x,_.mark):E.removeMark(w,x,_.mark),t.dispatch(E)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let E=g.parent.textBetween(g.parentOffset,v.parentOffset),N=()=>S(t.state.tr.insertText(E,w,x));t.someProp("handleTextInput",C=>C(t,w,x,E,N))||t.dispatch(N())}else t.dispatch(S());else t.dispatch(S())}function pF(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:JM(t,e.resolve(r.anchor),e.resolve(r.head))}function sxe(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(l(e.child(d)));if(J.from(u).eq(t))return{mark:a,type:o}}function oxe(t,e,r,n,i){if(r-e<=i.pos-n.pos||Jx(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Jx(s,!0,!0));return!o.parent.isTextblock||o.pos>r||Jx(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function Jx(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function axe(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&mF(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&mF(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function mF(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class yie{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ebe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(xF),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=vF(this),yF(this),this.nodeViews=bF(this),this.docView=Q5(this.state.doc,gF(this),Xx(this),this.dom,this),this.domObserver=new Xbe(this,(n,i,s,o)=>ixe(this,n,i,s,o)),this.domObserver.start(),Nbe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&AI(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(xF),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(uie(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=bF(this);cxe(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&AI(this),this.editable=vF(this),yF(this);let l=Xx(this),u=gF(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,u,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&q0e(this);if(o){this.domObserver.stop();let p=h&&(ri||qr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&lxe(i.selection,e.selection);if(h){let m=qr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=qbe(this)),(s||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=Q5(e.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&cbe(this))?wo(this,p):(Jne(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&L0e(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Me){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&W5(this,r.getBoundingClientRect(),e)}else W5(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new hie(e.slice,e.move,i<0?void 0:Me.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(ri){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&B0e(this.dom),wo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return H0e(this,e)}coordsAtPos(e,r=1){return Wne(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return X0e(this,r||this.state,e)}pasteHTML(e,r){return jp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return jp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return ZM(this,e)}destroy(){this.docView&&(kbe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Xx(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,T0e())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return jbe(this,e)}domSelectionRange(){let e=this.domSelection();return e?vn&&this.root.nodeType===11&&M0e(this.dom.ownerDocument)==this.dom&&Zbe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}yie.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function gF(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[On.node(0,t.state.doc.content.size,e)]}function yF(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:On.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function vF(t){return!t.someProp("editable",e=>e(t.state)===!1)}function lxe(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function bF(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function cxe(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function xF(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var sl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},uxe=typeof navigator<"u"&&/Mac/.test(navigator.platform),dxe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var tn=0;tn<10;tn++)sl[48+tn]=sl[96+tn]=String(tn);for(var tn=1;tn<=24;tn++)sl[tn+111]="F"+tn;for(var tn=65;tn<=90;tn++)sl[tn]=String.fromCharCode(tn+32),gv[tn]=String.fromCharCode(tn);for(var Zx in sl)gv.hasOwnProperty(Zx)||(gv[Zx]=sl[Zx]);function hxe(t){var e=uxe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||dxe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?gv:sl)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const fxe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),pxe=typeof navigator<"u"&&/Win/.test(navigator.platform);function mxe(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))fxe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function gxe(t){let e=Object.create(null);for(let r in t)e[mxe(r)]=t[r];return e}function e1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function yxe(t){return new Gt({props:{handleKeyDown:vie(t)}})}function vie(t){let e=gxe(t);return function(r,n){let i=hxe(n),s,o=e[e1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[e1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(pxe&&n.ctrlKey&&n.altKey)&&(s=sl[n.keyCode])&&s!=i){let a=e[e1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var vxe=Object.defineProperty,sA=(t,e)=>{for(var r in e)vxe(t,r,{get:e[r],enumerable:!0})};function X0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var J0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...u)=>{const d=a(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,u=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),v=f(...m)(g);return o.push(v),d}])),run:u};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>l(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:X0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...u)=>l(...u)(o)]))}};return o}},bie={};sA(bie,{blur:()=>bxe,clearContent:()=>xxe,clearNodes:()=>wxe,command:()=>Sxe,createParagraphNear:()=>_xe,cut:()=>Exe,deleteCurrentNode:()=>Nxe,deleteNode:()=>kxe,deleteRange:()=>Cxe,deleteSelection:()=>jxe,enter:()=>Txe,exitCode:()=>Oxe,extendMarkRange:()=>Pxe,first:()=>Ixe,focus:()=>Mxe,forEach:()=>Axe,insertContent:()=>Dxe,insertContentAt:()=>qxe,joinBackward:()=>zxe,joinDown:()=>Bxe,joinForward:()=>Vxe,joinItemBackward:()=>Wxe,joinItemForward:()=>Uxe,joinTextblockBackward:()=>Hxe,joinTextblockForward:()=>Kxe,joinUp:()=>Lxe,keyboardShortcut:()=>Yxe,lift:()=>Qxe,liftEmptyBlock:()=>Xxe,liftListItem:()=>Jxe,newlineInCode:()=>Zxe,resetAttributes:()=>e1e,scrollIntoView:()=>t1e,selectAll:()=>r1e,selectNodeBackward:()=>n1e,selectNodeForward:()=>i1e,selectParentNode:()=>s1e,selectTextblockEnd:()=>o1e,selectTextblockStart:()=>a1e,setContent:()=>l1e,setMark:()=>j1e,setMeta:()=>T1e,setNode:()=>O1e,setNodeSelection:()=>P1e,setTextDirection:()=>I1e,setTextSelection:()=>R1e,sinkListItem:()=>M1e,splitBlock:()=>A1e,splitListItem:()=>D1e,toggleList:()=>$1e,toggleMark:()=>F1e,toggleNode:()=>q1e,toggleWrap:()=>L1e,undoInputRule:()=>B1e,unsetAllMarks:()=>z1e,unsetMark:()=>V1e,unsetTextDirection:()=>W1e,updateAttributes:()=>U1e,wrapIn:()=>H1e,wrapInList:()=>K1e});var bxe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),xxe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),wxe=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:d}=e,h=u.resolve(d.map(l)),f=u.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=gh(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},Sxe=t=>e=>t(e),_xe=()=>({state:t,dispatch:e})=>Rne(t,e),Exe=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new Be(n.doc.resolve(Math.max(o-1,0)))),!0},Nxe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function wr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var kxe=t=>({tr:e,state:r,dispatch:n})=>{const i=wr(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),u=s.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},Cxe=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},jxe=()=>({state:t,dispatch:e})=>UM(t,e),Txe=()=>({commands:t})=>t.keyboardShortcut("Enter"),Oxe=()=>({state:t,dispatch:e})=>p0e(t,e);function oA(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function yv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:oA(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function xie(t,e,r={}){return t.find(n=>n.type===e&&yv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function wF(t,e,r={}){return!!xie(t,e,r)}function aA(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!xie([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,u=a+i.node.nodeSize;for(;o>0&&wF([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&wF([...t.parent.child(l).marks],e,r);)u+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function zo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Pxe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=zo(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:u,to:d}=a;if(i){const h=aA(l,s,e);if(h&&h.from<=u&&h.to>=d){const f=Be.create(o,h.from,h.to);r.setSelection(f)}}return!0},Ixe=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function wie(t){return t instanceof Be}function Ul(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function Sie(t,e=null){if(!e)return null;const r=Qe.atStart(t),n=Qe.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?Be.create(t,Ul(0,i,s),Ul(t.content.size,i,s)):Be.create(t,Ul(e,i,s),Ul(e,i,s))}function SF(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function vv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Rxe(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Mxe=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(vv()||SF())&&n.dom.focus(),Rxe()&&!vv()&&!SF()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!wie(r.state.selection))return o(),!0;const a=Sie(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Axe=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),Dxe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),_ie=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&_ie(n)}return t};function Ig(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return _ie(r)}function Op(t,e,r){if(t instanceof Wa||t instanceof J)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return J.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Op("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new one({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(r.slice?Ua.fromSchema(l).parseSlice(Ig(t),r.parseOptions):Ua.fromSchema(l).parse(Ig(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Ua.fromSchema(e);return r.slice?s.parseSlice(Ig(t),r.parseOptions).content:s.parse(Ig(t),r.parseOptions)}return Op("",e,r)}function $xe(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof Fr||i instanceof Br))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,u,d)=>{o===0&&(o=d)}),t.setSelection(Qe.near(t.doc.resolve(o),r))}var Fxe=t=>!("type"in t),qxe=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Op(e,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=Op(e,s.schema,{parseOptions:u,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((Fxe(a)?a:[a]).forEach(v=>{v.check(),f=f?v.isText&&v.marks.length===0:!1,p=p?v.isBlock:!1}),d===h&&p){const{parent:v}=n.doc.resolve(d);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof J){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const v=n.doc.resolve(d),y=v.node(),b=v.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;b&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&$xe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},Lxe=()=>({state:t,dispatch:e})=>d0e(t,e),Bxe=()=>({state:t,dispatch:e})=>h0e(t,e),zxe=()=>({state:t,dispatch:e})=>kne(t,e),Vxe=()=>({state:t,dispatch:e})=>One(t,e),Wxe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=U0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},Uxe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=U0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},Hxe=()=>({state:t,dispatch:e})=>c0e(t,e),Kxe=()=>({state:t,dispatch:e})=>u0e(t,e);function Eie(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Gxe(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))vv()||Eie()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var Yxe=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=Gxe(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,a))});return l==null||l.steps.forEach(u=>{const d=u.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function ol(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?wr(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,u=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>yv(h.node.attrs,r,{strict:!1}));return s?!!u.length:u.reduce((h,f)=>h+f.to-f.from,0)>=l}var Qxe=(t,e={})=>({state:r,dispatch:n})=>{const i=wr(t,r.schema);return ol(r,i,e)?f0e(r,n):!1},Xxe=()=>({state:t,dispatch:e})=>Mne(t,e),Jxe=t=>({state:e,dispatch:r})=>{const n=wr(t,e.schema);return N0e(n)(e,r)},Zxe=()=>({state:t,dispatch:e})=>Ine(t,e);function Z0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function _F(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var e1e=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=Z0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=wr(t,n.schema)),a==="mark"&&(o=zo(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{n.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,_F(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(_F(f.attrs,e))))})})}),l},t1e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),r1e=()=>({tr:t,dispatch:e})=>{if(e){const r=new yi(t.doc);t.setSelection(r)}return!0},n1e=()=>({state:t,dispatch:e})=>jne(t,e),i1e=()=>({state:t,dispatch:e})=>Pne(t,e),s1e=()=>({state:t,dispatch:e})=>y0e(t,e),o1e=()=>({state:t,dispatch:e})=>x0e(t,e),a1e=()=>({state:t,dispatch:e})=>b0e(t,e);function DI(t,e,r={},n={}){return Op(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var l1e=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const u=DI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function Nie(t,e){const r=zo(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function kie(t,e){const r=new Sne(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function c1e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function u1e(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function d1e(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function eb(t){return e=>d1e(e.$from,t)}function Ie(t,e,r){return t.config[e]===void 0&&t.parent?Ie(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Ie(t.parent,e,r):null}):t.config[e]}function lA(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Ie(e,"addExtensions",r);return n?[e,...lA(n())]:e}).flat(10)}function cA(t,e){const r=Yc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function Cie(t){return typeof t=="function"}function vt(t,e=void 0,...r){return Cie(t)?e?t.bind(e)(...r):t(...r):t}function h1e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Gd(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function jie(t){const e=[],{nodeExtensions:r,markExtensions:n}=Gd(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Ie(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Ie(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function Sr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],u=a.filter(d=>!l.includes(d));n[i]=[...l,...u].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),n[i]=Array.from(u.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function Pp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Sr(r,n),{})}function f1e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function EF(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):f1e(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function NF(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&h1e(r)?!1:r!=null))}function kF(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function p1e(t,e){var r;const n=jie(t),{nodeExtensions:i,markExtensions:s}=Gd(t),o=(r=i.find(u=>Ie(u,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(u=>{const d=n.filter(y=>y.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((y,b)=>{const w=Ie(b,"extendNodeSchema",h);return{...y,...w?w(u):{}}},{}),p=NF({...f,content:vt(Ie(u,"content",h)),marks:vt(Ie(u,"marks",h)),group:vt(Ie(u,"group",h)),inline:vt(Ie(u,"inline",h)),atom:vt(Ie(u,"atom",h)),selectable:vt(Ie(u,"selectable",h)),draggable:vt(Ie(u,"draggable",h)),code:vt(Ie(u,"code",h)),whitespace:vt(Ie(u,"whitespace",h)),linebreakReplacement:vt(Ie(u,"linebreakReplacement",h)),defining:vt(Ie(u,"defining",h)),isolating:vt(Ie(u,"isolating",h)),attrs:Object.fromEntries(d.map(kF))}),m=vt(Ie(u,"parseHTML",h));m&&(p.parseDOM=m.map(y=>EF(y,d)));const g=Ie(u,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:Pp(y,d)}));const v=Ie(u,"renderText",h);return v&&(p.toText=v),[u.name,p]})),l=Object.fromEntries(s.map(u=>{const d=n.filter(v=>v.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((v,y)=>{const b=Ie(y,"extendMarkSchema",h);return{...v,...b?b(u):{}}},{}),p=NF({...f,inclusive:vt(Ie(u,"inclusive",h)),excludes:vt(Ie(u,"excludes",h)),group:vt(Ie(u,"group",h)),spanning:vt(Ie(u,"spanning",h)),code:vt(Ie(u,"code",h)),attrs:Object.fromEntries(d.map(kF))}),m=vt(Ie(u,"parseHTML",h));m&&(p.parseDOM=m.map(v=>EF(v,d)));const g=Ie(u,"renderHTML",h);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:Pp(v,d)})),[u.name,p]}));return new one({topNode:o,nodes:a,marks:l})}function m1e(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function bv(t){return t.sort((r,n)=>{const i=Ie(r,"priority")||100,s=Ie(n,"priority")||100;return i>s?-1:i<s?1:0})}function Tie(t){const e=bv(lA(t)),r=m1e(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function Oie(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,u,d,h)=>{var f;l.isBlock&&u>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:u,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,u)-u,i-u))}),a}function g1e(t,e){const r={from:0,to:t.content.size};return Oie(t,r,e)}function Pie(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function y1e(t,e){const r=wr(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function Iie(t,e){const r=Z0(typeof e=="string"?e:e.name,t.schema);return r==="node"?y1e(t,e):r==="mark"?Nie(t,e):{}}function v1e(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function b1e(t){const e=v1e(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function Rie(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const u=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(u,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:u,to:d}})})}),b1e(n)}function uA(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=aA(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var x1e=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function Rg(t,e){return e.nodes[t]||e.marks[t]||null}function gy(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var w1e=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,u;const d=((u=(l=i.type.spec).toText)==null?void 0:u.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function $I(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?zo(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>yv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,v),b=Math.min(m,v+g.nodeSize),w=b-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:b})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>yv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),u=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+u:l)>=o}function S1e(t,e,r={}){if(!e)return ol(t,null,r)||$I(t,null,r);const n=Z0(e,t.schema);return n==="node"?ol(t,e,r):n==="mark"?$I(t,e,r):!1}var _1e=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=eb(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},E1e=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function CF(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function jF(t,e){const{nodeExtensions:r}=Gd(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=vt(Ie(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function tb(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(tb(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function Mie(t){return t instanceof Me}var Aie=class Die{constructor(e){this.position=e}static fromJSON(e){return new Die(e.position)}toJSON(){return{position:this.position}}};function N1e(t,e){const r=e.mapping.mapResult(t.position);return{position:new Aie(r.pos),mapResult:r}}function k1e(t){return new Aie(t)}function C1e(t,e,r){var n;const{selection:i}=e;let s=null;if(wie(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(u=>u.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(u)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));u=p&&m}return!u}),u})}var j1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=zo(t,n.schema);if(i)if(o){const u=Nie(n,l);r.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return C1e(n,r,l)},T1e=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),O1e=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=wr(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>B5(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>B5(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},P1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Ul(t,0,n.content.size),s=Me.create(n,i);e.setSelection(s)}return!0},I1e=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,u)=>{l.isText||r.setNodeMarkup(u,void 0,{...l.attrs,dir:t})}),!0},R1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Be.atStart(n).from,a=Be.atEnd(n).to,l=Ul(i,o,a),u=Ul(s,o,a),d=Be.create(n,l,u);e.setSelection(d)}return!0},M1e=t=>({state:e,dispatch:r})=>{const n=wr(t,e.schema);return j0e(n)(e,r)};function TF(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var A1e=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,u=i.extensionManager.attributes,d=gy(u,a.node().type.name,a.node().attrs);if(s instanceof Me&&s.node.isBlock)return!a.parentOffset||!xo(o,a.pos)?!1:(n&&(t&&TF(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:c1e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=xo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&xo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof Be&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),v=e.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&TF(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},D1e=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=wr(t,n.schema),{$from:l,$to:u}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(u))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=J.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-b;N>=l.depth-3;N-=1)y=J.from(l.node(N).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...gy(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(J.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(b-1));r.replace(_,l.after(-w),new ve(y,4-b,0));let E=-1;r.doc.nodesBetween(_,r.doc.content.size,(N,C)=>{if(E>-1)return!1;N.isTextblock&&N.content.size===0&&(E=C+1)}),E>-1&&r.setSelection(Be.near(r.doc.resolve(E))),r.scrollIntoView()}return!0}const p=u.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...gy(f,h.type.name,h.attrs),...e},g={...gy(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,u.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!xo(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=n,{splittableMarks:w}=s.extensionManager,x=b||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,v).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},t1=(t,e)=>{const r=eb(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&fl(t.doc,r.pos)&&t.join(r.pos),!0},r1=(t,e)=>{const r=eb(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&fl(t.doc,n)&&t.join(n),!0},$1e=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:u,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=wr(t,o.schema),m=wr(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:b}=g,w=y.blockRange(b),x=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=eb(_=>jF(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return u.liftListItem(m);if(jF(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>t1(s,p)).command(()=>r1(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:u.clearNodes()).wrapInList(p,n).command(()=>t1(s,p)).command(()=>r1(s,p)).run():l().command(()=>{const _=d().wrapInList(p,n),E=x.filter(N=>f.includes(N.type.name));return s.ensureMarks(E),_?!0:u.clearNodes()}).wrapInList(p,n).command(()=>t1(s,p)).command(()=>r1(s,p)).run()},F1e=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=zo(t,n.schema);return $I(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},q1e=(t,e,r={})=>({state:n,commands:i})=>{const s=wr(t,n.schema),o=wr(e,n.schema),a=ol(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},L1e=(t,e={})=>({state:r,commands:n})=>{const i=wr(t,r.schema);return ol(r,i,e)?n.lift(i):n.wrapIn(i,e)},B1e=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},z1e=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},V1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=zo(t,n.schema),{$from:u,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=u.marks().find(v=>v.type===l))==null?void 0:s.attrs,g=aA(u,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},W1e=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const u={...a.attrs};delete u.dir,e.setNodeMarkup(l,void 0,u)}),!0},U1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=Z0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=wr(t,n.schema)),a==="mark"&&(o=zo(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(v,y)=>{s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v)}):n.doc.nodesBetween(d,h,(v,y)=>{y<d&&s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v),y>=d&&y<=h&&(s&&s===v.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...v.attrs,...e})),o&&v.marks.length&&v.marks.forEach(b=>{if(o===b.type&&(l=!0,i)){const w=Math.max(y,d),x=Math.min(y+v.nodeSize,h);r.addMark(w,x,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(v=>{o===v.type&&i&&r.addMark(m,g,o.create({...v.attrs,...e}))}))}),l},H1e=(t,e={})=>({state:r,dispatch:n})=>{const i=wr(t,r.schema);return w0e(i,e)(r,n)},K1e=(t,e={})=>({state:r,dispatch:n})=>{const i=wr(t,r.schema);return S0e(i,e)(r,n)},G1e=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},rb=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},Y1e=(t,e)=>{if(oA(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function Mg(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const u=l.state.doc.resolve(n);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=w1e(u)+s;return o.forEach(f=>{if(d)return;const p=Y1e(h,f.find);if(!p)return;const m=l.state.tr,g=X0({state:l.state,transaction:m}),v={from:n-(p[0].length-s.length),to:i},{commands:y,chain:b,can:w}=new J0({editor:r,state:g});f.handler({state:g,range:v,match:p,commands:y,chain:b,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function Q1e(t){const{editor:e,rules:r}=t,n=new Gt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=cA(J.from(d),o.schema);const{from:h}=l,f=h+d.length;Mg({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Mg({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Mg({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Mg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function X1e(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ag(t){return X1e(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function $ie(t,e){const r={...t};return Ag(t)&&Ag(e)&&Object.keys(e).forEach(n=>{Ag(e[n])&&Ag(t[n])?r[n]=$ie(t[n],e[n]):r[n]=e[n]}),r}var dA=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...vt(Ie(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...vt(Ie(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>$ie(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Qc=class Fie extends dA{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new Fie(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===r.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function J1e(t){return typeof t=="number"}var Z1e=class{constructor(t){this.find=t.find,this.handler=t.handler}},ewe=(t,e,r)=>{if(oA(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function twe(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:u,can:d}=new J0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,v,y,b,w;if((v=(g=p.type)==null?void 0:g.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(b=(y=p.content)==null?void 0:y.size)!=null?b:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const E=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");ewe(E,s.find,o).forEach(C=>{if(C.index===void 0)return;const j=S+C.index+1,T=j+C[0].length,P={from:r.tr.mapping.map(j),to:r.tr.mapping.map(T)},O=s.handler({state:r,range:P,match:C,commands:l,chain:u,can:d,pasteEvent:o,dropEvent:a});h.push(O)})}),h.every(p=>p!==null)}var Dg=null,rwe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function nwe(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,v=X0({state:d,transaction:g});if(!(!twe({editor:e,state:v,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Gt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(Dg=e)},p=()=>{Dg&&(Dg=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=Dg;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:S}=y;typeof S=="string"?S=S:S=cA(J.from(S),p.schema);const{from:_}=y,E=_+S.length,N=rwe(S);return l({rule:d,state:p,from:_,to:{b:E},pasteEvt:N})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!J1e(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var nb=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Tie(t),this.schema=p1e(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Rg(e.name,this.schema)},n=Ie(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return bv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Rg(n.name,this.schema)},s=[],o=Ie(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&Ie(n,"exitable",i)&&(a.ArrowRight=()=>Qc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=yxe(a);s.push(l);const u=Ie(n,"addInputRules",i);if(CF(n,t.options.enableInputRules)&&u){const f=u();if(f&&f.length){const p=Q1e({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=Ie(n,"addPasteRules",i);if(CF(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=nwe({editor:t,rules:f});s.push(...p)}}const h=Ie(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return jie(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Gd(this.extensions);return Object.fromEntries(e.filter(r=>!!Ie(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:wr(r.name,this.schema)},s=Ie(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,u,d,h,f)=>{const p=Pp(l,n);return o({node:l,view:u,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return bv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Rg(i.name,this.schema)},o=Ie(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Gd(this.extensions);return Object.fromEntries(e.filter(r=>!!Ie(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:zo(r.name,this.schema)},s=Ie(r,"addMarkView",i);if(!s)return[];const o=(a,l,u)=>{const d=Pp(a,n);return s()({mark:a,view:l,inline:u,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{ywe(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Rg(e.name,this.schema)};e.type==="mark"&&((r=vt(Ie(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=Ie(e,"onBeforeCreate",n),s=Ie(e,"onCreate",n),o=Ie(e,"onUpdate",n),a=Ie(e,"onSelectionUpdate",n),l=Ie(e,"onTransaction",n),u=Ie(e,"onFocus",n),d=Ie(e,"onBlur",n),h=Ie(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};nb.resolve=Tie;nb.sort=bv;nb.flatten=lA;var iwe={};sA(iwe,{ClipboardTextSerializer:()=>Lie,Commands:()=>Bie,Delete:()=>zie,Drop:()=>Vie,Editable:()=>Wie,FocusEvents:()=>Hie,Keymap:()=>Kie,Paste:()=>Gie,Tabindex:()=>Yie,TextDirection:()=>Qie,focusEventsPluginKey:()=>Uie});var fr=class qie extends dA{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new qie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},Lie=fr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Gt({key:new Ir("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=Pie(r);return Oie(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Bie=fr.create({name:"commands",addCommands(){return{...bie}}}),zie=fr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,u;if((u=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?u:t.getMeta("y-sync$"))return;const d=kie(t.before,[t,...e]);Rie(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=p.oldRange.from<=g&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:d.mapping.map(g),newTo:d.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,v;if(p instanceof ds){const y=f.slice(m).map(p.from,-1),b=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(b),S=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(E=>E.eq(p.mark)),_=(v=d.doc.nodeAt(b))==null?void 0:v.marks.some(E=>E.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:b},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),Vie=fr.create({name:"drop",addProseMirrorPlugins(){return[new Gt({key:new Ir("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),Wie=fr.create({name:"editable",addProseMirrorPlugins(){return[new Gt({key:new Ir("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Uie=new Ir("focusEvents"),Hie=fr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Gt({key:Uie,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),Kie=fr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,v=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?v===h.pos:Qe.atStart(u).from===f;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return vv()||Eie()?s:i},addProseMirrorPlugins(){return[new Gt({key:new Ir("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=Qe.atStart(e.doc).from,u=Qe.atEnd(e.doc).to;if(s||!(o===l&&a===u)||!tb(r.doc))return;const f=r.tr,p=X0({state:r,transaction:f}),{commands:m}=new J0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),Gie=fr.create({name:"paste",addProseMirrorPlugins(){return[new Gt({key:new Ir("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),Yie=fr.create({name:"tabindex",addProseMirrorPlugins(){return[new Gt({key:new Ir("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Qie=fr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Gd(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Gt({key:new Ir("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),swe=class Mu{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Mu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Mu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Mu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Mu(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Mu(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},owe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function awe(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var lwe=class extends G1e{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:N1e,createMappablePosition:k1e},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=Sie(e,this.options.autofocus);this.editorState=Yu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=awe(owe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=Cie(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[Wie,Lie.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Bie,Hie,Kie,Yie,Vie,Gie,zie,Qie.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new nb(n,this)}createCommandManager(){this.commandManager=new J0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=DI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=DI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new yie(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(u=>u.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return Iie(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return S1e(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return cA(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return g1e(this.state.doc,{blockSeparator:e,textSerializers:{...Pie(this.schema),...r}})}get isEmpty(){return tb(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new swe(e,this)}get $doc(){return this.$pos(0)}};function Yd(t){return new rb({find:t.find,handler:({state:e,range:r,match:n})=>{const i=vt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),u=r.from+a.indexOf(o),d=u+o.length;if(uA(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;d<r.to&&s.delete(d,r.to),u>r.from&&s.delete(r.from+l,u);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function cwe(t){return new rb({find:t.find,handler:({state:e,range:r,match:n})=>{const i=vt(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const u=n[0].lastIndexOf(n[1]);let d=o+u;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function FI(t){return new rb({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=vt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function Qd(t){return new rb({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=vt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),u=l&&VM(l,t.type,s);if(!u)return null;if(o.wrap(l,u),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&fl(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function uwe(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Me){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var dwe={};sA(dwe,{createAtomBlockMarkdownSpec:()=>hwe,createBlockMarkdownSpec:()=>fwe,createInlineMarkdownSpec:()=>gwe,parseAttributes:()=>hA,parseIndentedBlocks:()=>qI,renderNestedMarkdownContent:()=>pA,serializeAttributes:()=>fA});function hA(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,u=>(r.push(u),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(d=>d.trim().slice(1));e.class=u.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,u,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[u]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function fA(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function hwe(t){const{nodeName:e,name:r,parseAttributes:n=hA,serializeAttributes:i=fA,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,u=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",v=n(g);if(!o.find(b=>!(b in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:d=>{const h=u(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function fwe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=hA,serializeAttributes:s=fA,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,u=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${u}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=h.match(g);if(!v)return;const[y,b=""]=v,w=i(b);let x=1;const S=y.length;let _="";const E=/^:::([\w-]*)(\s.*)?/gm,N=h.slice(S);for(E.lastIndex=0;;){const C=E.exec(N);if(C===null)break;const j=C.index,T=C[1];if(!((m=C[2])!=null&&m.endsWith(":::"))){if(T)x+=1;else if(x-=1,x===0){const P=N.slice(0,j);_=P.trim();const O=h.slice(0,S+j+C[0].length);let D=[];if(_)if(a==="block")for(D=p.blockTokens(P),D.forEach(q=>{q.text&&(!q.tokens||q.tokens.length===0)&&(q.tokens=p.inlineTokens(q.text))});D.length>0;){const q=D[D.length-1];if(q.type==="paragraph"&&(!q.text||q.text.trim()===""))D.pop();else break}else D=p.inlineTokens(_);return{type:e,raw:O,attributes:w,content:_,tokens:D}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",v=f.renderChildren(h.content||[],`

`);return`:::${u}${g}

${v}

:::`}}}function pwe(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function mwe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function gwe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=pwe,serializeAttributes:s=mwe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,u=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,v=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(v!==void 0&&y===v)return;p[g]=y}}),p},h=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),v=f.match(g);if(!v)return;let y="",b="";if(a){const[,x]=v;b=x}else{const[,x,S]=v;b=x,y=S||""}const w=i(b.trim());return{type:e,raw:v[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(f.attrs||{}),g=s(m),v=g?` ${g}`:"";return a?`[${u}${v}]`:`[${u}${v}]${p}[/${u}]`}}}function qI(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let u="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,u=`${u}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:v}=m;u=`${u}${f}
`;const y=[v];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const E=a.slice(d+1).findIndex(j=>j.trim()!=="");if(E===-1)break;if((((i=(n=a[d+1+E].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),u=`${u}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),u=`${u}${S}
`,d+=1;else break}let b;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?b=e.customNestedParser(S):b=r.blockTokens(S))}const x=e.createToken(m,b);l.push(x)}if(l.length!==0)return{items:l,raw:u}}function pA(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(u=>{const d=e.renderChildren([u]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function ywe(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const u=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(u,d,t.type),s.addMark(u,d,p)}}),s.docChanged&&e.view.dispatch(s)}var wi=class Xie extends dA{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new Xie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Dc(t){return new Z1e({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=vt(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let u=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(uA(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),u=r.from+d+a.length,o.addMark(r.from+d,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:vwe,getOwnPropertySymbols:bwe}=Object,{hasOwnProperty:xwe}=Object.prototype;function n1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function $g(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function wwe(t){return t!=null?t[Symbol.toStringTag]:void 0}function OF(t){return vwe(t).concat(bwe(t))}const Swe=Object.hasOwn||((t,e)=>xwe.call(t,e));function Xc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const _we="__v",Ewe="__o",Nwe="_owner",{getOwnPropertyDescriptor:PF,keys:IF}=Object;function kwe(t,e){return t.byteLength===e.byteLength&&xv(new Uint8Array(t),new Uint8Array(e))}function Cwe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function jwe(t,e){return t.byteLength===e.byteLength&&xv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Twe(t,e){return Xc(t.getTime(),e.getTime())}function Owe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Pwe(t,e){return t===e}function RF(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const u=e.entries();let d=!1,h=0;for(;(a=u.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const Iwe=Xc;function Rwe(t,e,r){const n=IF(t);let i=n.length;if(IF(e).length!==i)return!1;for(;i-- >0;)if(!Jie(t,e,r,n[i]))return!1;return!0}function cf(t,e,r){const n=OF(t);let i=n.length;if(OF(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!Jie(t,e,r,s)||(o=PF(t,s),a=PF(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Mwe(t,e){return Xc(t.valueOf(),e.valueOf())}function Awe(t,e){return t.source===e.source&&t.flags===e.flags}function MF(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let u=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function xv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Dwe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Jie(t,e,r,n){return(n===Nwe||n===Ewe||n===_we)&&(t.$$typeof||e.$$typeof)?!0:Swe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const $we="[object ArrayBuffer]",Fwe="[object Arguments]",qwe="[object Boolean]",Lwe="[object DataView]",Bwe="[object Date]",zwe="[object Error]",Vwe="[object Map]",Wwe="[object Number]",Uwe="[object Object]",Hwe="[object RegExp]",Kwe="[object Set]",Gwe="[object String]",Ywe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Qwe="[object URL]",Xwe=Object.prototype.toString;function Jwe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(v,y,b){if(v===y)return!0;if(v==null||y==null)return!1;const w=typeof v;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(v,y,b):w==="function"?s(v,y,b):!1;const x=v.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(v,y,b);if(Array.isArray(v))return e(v,y,b);if(x===Date)return n(v,y,b);if(x===RegExp)return d(v,y,b);if(x===Map)return o(v,y,b);if(x===Set)return h(v,y,b);const S=Xwe.call(v);if(S===Bwe)return n(v,y,b);if(S===Hwe)return d(v,y,b);if(S===Vwe)return o(v,y,b);if(S===Kwe)return h(v,y,b);if(S===Uwe)return typeof v.then!="function"&&typeof y.then!="function"&&l(v,y,b);if(S===Qwe)return p(v,y,b);if(S===zwe)return i(v,y,b);if(S===Fwe)return l(v,y,b);if(Ywe[S])return f(v,y,b);if(S===$we)return t(v,y,b);if(S===Lwe)return r(v,y,b);if(S===qwe||S===Wwe||S===Gwe)return u(v,y,b);if(m){let _=m[S];if(!_){const E=wwe(v);E&&(_=m[E])}if(_)return _(v,y,b)}return!1}}function Zwe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:kwe,areArraysEqual:r?cf:Cwe,areDataViewsEqual:jwe,areDatesEqual:Twe,areErrorsEqual:Owe,areFunctionsEqual:Pwe,areMapsEqual:r?n1(RF,cf):RF,areNumbersEqual:Iwe,areObjectsEqual:r?cf:Rwe,arePrimitiveWrappersEqual:Mwe,areRegExpsEqual:Awe,areSetsEqual:r?n1(MF,cf):MF,areTypedArraysEqual:r?n1(xv,cf):xv,areUrlsEqual:Dwe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=$g(n.areArraysEqual),s=$g(n.areMapsEqual),o=$g(n.areObjectsEqual),a=$g(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function eSe(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function tSe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:u=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:u,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const rSe=ml();ml({strict:!0});ml({circular:!0});ml({circular:!0,strict:!0});ml({createInternalComparator:()=>Xc});ml({strict:!0,createInternalComparator:()=>Xc});ml({circular:!0,createInternalComparator:()=>Xc});ml({circular:!0,createInternalComparator:()=>Xc,strict:!0});function ml(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=Zwe(t),o=Jwe(s),a=r?r(o):eSe(o);return tSe({circular:e,comparator:o,createState:n,equals:a,strict:i})}var Zie={exports:{}},ese={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib=k,nSe=LM;function iSe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sSe=typeof Object.is=="function"?Object.is:iSe,oSe=nSe.useSyncExternalStore,aSe=ib.useRef,lSe=ib.useEffect,cSe=ib.useMemo,uSe=ib.useDebugValue;ese.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=aSe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=cSe(function(){function l(p){if(!u){if(u=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,sSe(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=oSe(t,s[0],s[1]);return lSe(function(){o.hasValue=!0,o.value=a},[a]),uSe(a),a};Zie.exports=ese;var dSe=Zie.exports,hSe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},fSe=({contentComponent:t})=>{const e=LM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return c.jsx(c.Fragment,{children:Object.values(e)})};function pSe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:Ade.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var mSe=class extends Se.Component{constructor(t){var e;super(t),this.editorContentRef=Se.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=pSe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:hSe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&c.jsx(fSe,{contentComponent:t.contentComponent})]})}},gSe=k.forwardRef((t,e)=>{const r=Se.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Se.createElement(mSe,{key:r,innerRef:e,...t})}),ySe=Se.memo(gSe),vSe=typeof window<"u"?k.useLayoutEffect:k.useEffect,bSe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function xSe(t){var e;const[r]=k.useState(()=>new bSe(t.editor)),n=dSe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:rSe);return vSe(()=>r.watch(t.editor),[t.editor,r]),k.useDebugValue(n),n}var wSe=!1,LI=typeof window>"u",SSe=LI||!!(typeof window<"u"&&window.next),_Se=class tse{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?LI||SSe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new lwe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?tse.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function ESe(t={},e=[]){const r=k.useRef(t);r.current=t;const[n]=k.useState(()=>new _Se(r)),i=LM.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return k.useDebugValue(i),k.useEffect(n.onRender(e)),xSe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var NSe=k.createContext({editor:null});NSe.Consumer;var kSe=k.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),CSe=()=>k.useContext(kSe);Se.forwardRef((t,e)=>{const{onDragStart:r}=CSe(),n=t.as||"div";return c.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});Se.createContext({markViewContentRef:()=>{}});var wv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},jSe=/^\s*>\s$/,TSe=wi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return wv("blockquote",{...Sr(this.options.HTMLAttributes,t),children:wv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Qd({find:jSe,type:this.type})]}}),OSe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,PSe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ISe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,RSe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,MSe=Qc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return wv("strong",{...Sr(this.options.HTMLAttributes,t),children:wv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Yd({find:OSe,type:this.type}),Yd({find:ISe,type:this.type})]},addPasteRules(){return[Dc({find:PSe,type:this.type}),Dc({find:RSe,type:this.type})]}}),ASe=/(^|[^`])`([^`]+)`(?!`)$/,DSe=/(^|[^`])`([^`]+)`(?!`)/g,$Se=Qc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Yd({find:ASe,type:this.type})]},addPasteRules(){return[Dc({find:DSe,type:this.type})]}}),i1=4,FSe=/^```([a-z]+)?[\s\n]$/,qSe=/^~~~([a-z]+)?[\s\n]$/,LSe=wi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:i1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Sr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:i1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:u,to:d}=i,p=n.doc.textBetween(u,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(u,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:i1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:u}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const v=u-d;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=v){m=_;break}g+=p[_].length+1}const b=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(b.length,r);if(w===0)return!0;let x=d;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),u-x<=w&&a.setSelection(Be.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:u}=i,f=n.doc.textBetween(l,u,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",v=Math.min(g.length,r);return p.slice(v)}).join(`
`);return a.replaceWith(l,u,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:u})=>(u.setSelection(Qe.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[FI({find:FSe,type:this.type,getAttributes:t=>({language:t[1]})}),FI({find:qSe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Gt({key:new Ir("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Be.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),BSe=wi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),zSe=wi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Sr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));u.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),VSe=wi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Sr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>FI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),WSe=wi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Sr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!uwe(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return Mie(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Be.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Me.create(o.doc,l.pos)):o.setSelection(Be.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(u,h),o.setSelection(Be.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[cwe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),USe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,HSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,KSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,GSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,YSe=Qc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Sr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Yd({find:USe,type:this.type}),Yd({find:KSe,type:this.type})]},addPasteRules(){return[Dc({find:HSe,type:this.type}),Dc({find:GSe,type:this.type})]}});const QSe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",XSe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",BI="numeric",zI="ascii",VI="alpha",qf="asciinumeric",_f="alphanumeric",WI="domain",rse="emoji",JSe="scheme",ZSe="slashscheme",s1="whitespace";function e_e(t,e){return t in e||(e[t]=[]),e[t]}function Hl(t,e,r){e[BI]&&(e[qf]=!0,e[_f]=!0),e[zI]&&(e[qf]=!0,e[VI]=!0),e[qf]&&(e[_f]=!0),e[VI]&&(e[_f]=!0),e[_f]&&(e[WI]=!0),e[rse]&&(e[WI]=!0);for(const n in e){const i=e_e(n,r);i.indexOf(t)<0&&i.push(t)}}function t_e(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Kn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Kn.groups={};Kn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Kn.groups;let i;return e&&e.j?i=e:(i=new Kn(e),r&&n&&Hl(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Kn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Kn,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Kn,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(t_e(o.t,n),r);Hl(s,l,n)}else r&&Hl(s,r,n);o.t=s}return i.j[t]=o,o}};const Ye=(t,e,r,n,i)=>t.ta(e,r,n,i),Jt=(t,e,r,n,i)=>t.tr(e,r,n,i),AF=(t,e,r,n,i)=>t.ts(e,r,n,i),te=(t,e,r,n,i)=>t.tt(e,r,n,i),so="WORD",UI="UWORD",nse="ASCIINUMERICAL",ise="ALPHANUMERICAL",Ip="LOCALHOST",HI="TLD",KI="UTLD",yy="SCHEME",Au="SLASH_SCHEME",mA="NUM",GI="WS",gA="NL",Lf="OPENBRACE",Bf="CLOSEBRACE",Sv="OPENBRACKET",_v="CLOSEBRACKET",Ev="OPENPAREN",Nv="CLOSEPAREN",kv="OPENANGLEBRACKET",Cv="CLOSEANGLEBRACKET",jv="FULLWIDTHLEFTPAREN",Tv="FULLWIDTHRIGHTPAREN",Ov="LEFTCORNERBRACKET",Pv="RIGHTCORNERBRACKET",Iv="LEFTWHITECORNERBRACKET",Rv="RIGHTWHITECORNERBRACKET",Mv="FULLWIDTHLESSTHAN",Av="FULLWIDTHGREATERTHAN",Dv="AMPERSAND",$v="APOSTROPHE",Fv="ASTERISK",la="AT",qv="BACKSLASH",Lv="BACKTICK",Bv="CARET",ma="COLON",yA="COMMA",zv="DOLLAR",Es="DOT",Vv="EQUALS",vA="EXCLAMATION",Ti="HYPHEN",zf="PERCENT",Wv="PIPE",Uv="PLUS",Hv="POUND",Vf="QUERY",bA="QUOTE",sse="FULLWIDTHMIDDLEDOT",xA="SEMI",Ns="SLASH",Wf="TILDE",Kv="UNDERSCORE",ose="EMOJI",Gv="SYM";var ase=Object.freeze({__proto__:null,ALPHANUMERICAL:ise,AMPERSAND:Dv,APOSTROPHE:$v,ASCIINUMERICAL:nse,ASTERISK:Fv,AT:la,BACKSLASH:qv,BACKTICK:Lv,CARET:Bv,CLOSEANGLEBRACKET:Cv,CLOSEBRACE:Bf,CLOSEBRACKET:_v,CLOSEPAREN:Nv,COLON:ma,COMMA:yA,DOLLAR:zv,DOT:Es,EMOJI:ose,EQUALS:Vv,EXCLAMATION:vA,FULLWIDTHGREATERTHAN:Av,FULLWIDTHLEFTPAREN:jv,FULLWIDTHLESSTHAN:Mv,FULLWIDTHMIDDLEDOT:sse,FULLWIDTHRIGHTPAREN:Tv,HYPHEN:Ti,LEFTCORNERBRACKET:Ov,LEFTWHITECORNERBRACKET:Iv,LOCALHOST:Ip,NL:gA,NUM:mA,OPENANGLEBRACKET:kv,OPENBRACE:Lf,OPENBRACKET:Sv,OPENPAREN:Ev,PERCENT:zf,PIPE:Wv,PLUS:Uv,POUND:Hv,QUERY:Vf,QUOTE:bA,RIGHTCORNERBRACKET:Pv,RIGHTWHITECORNERBRACKET:Rv,SCHEME:yy,SEMI:xA,SLASH:Ns,SLASH_SCHEME:Au,SYM:Gv,TILDE:Wf,TLD:HI,UNDERSCORE:Kv,UTLD:KI,UWORD:UI,WORD:so,WS:GI});const to=/[a-z]/,uf=new RegExp("\\p{L}","u"),o1=new RegExp("\\p{Emoji}","u"),ro=/\d/,a1=/\s/,DF="\r",l1=`
`,r_e="",n_e="",c1="";let Fg=null,qg=null;function i_e(t=[]){const e={};Kn.groups=e;const r=new Kn;Fg==null&&(Fg=$F(QSe)),qg==null&&(qg=$F(XSe)),te(r,"'",$v),te(r,"{",Lf),te(r,"}",Bf),te(r,"[",Sv),te(r,"]",_v),te(r,"(",Ev),te(r,")",Nv),te(r,"<",kv),te(r,">",Cv),te(r,"",jv),te(r,"",Tv),te(r,"",Ov),te(r,"",Pv),te(r,"",Iv),te(r,"",Rv),te(r,"",Mv),te(r,"",Av),te(r,"&",Dv),te(r,"*",Fv),te(r,"@",la),te(r,"`",Lv),te(r,"^",Bv),te(r,":",ma),te(r,",",yA),te(r,"$",zv),te(r,".",Es),te(r,"=",Vv),te(r,"!",vA),te(r,"-",Ti),te(r,"%",zf),te(r,"|",Wv),te(r,"+",Uv),te(r,"#",Hv),te(r,"?",Vf),te(r,'"',bA),te(r,"/",Ns),te(r,";",xA),te(r,"~",Wf),te(r,"_",Kv),te(r,"\\",qv),te(r,"",sse);const n=Jt(r,ro,mA,{[BI]:!0});Jt(n,ro,n);const i=Jt(n,to,nse,{[qf]:!0}),s=Jt(n,uf,ise,{[_f]:!0}),o=Jt(r,to,so,{[zI]:!0});Jt(o,ro,i),Jt(o,to,o),Jt(i,ro,i),Jt(i,to,i);const a=Jt(r,uf,UI,{[VI]:!0});Jt(a,to),Jt(a,ro,s),Jt(a,uf,a),Jt(s,ro,s),Jt(s,to),Jt(s,uf,s);const l=te(r,l1,gA,{[s1]:!0}),u=te(r,DF,GI,{[s1]:!0}),d=Jt(r,a1,GI,{[s1]:!0});te(r,c1,d),te(u,l1,l),te(u,c1,d),Jt(u,a1,d),te(d,DF),te(d,l1),Jt(d,a1,d),te(d,c1,d);const h=Jt(r,o1,ose,{[rse]:!0});te(h,"#"),Jt(h,o1,h),te(h,r_e,h);const f=te(h,n_e);te(f,"#"),Jt(f,o1,h);const p=[[to,o],[ro,i]],m=[[to,null],[uf,a],[ro,s]];for(let g=0;g<Fg.length;g++)Zo(r,Fg[g],HI,so,p);for(let g=0;g<qg.length;g++)Zo(r,qg[g],KI,UI,m);Hl(HI,{tld:!0,ascii:!0},e),Hl(KI,{utld:!0,alpha:!0},e),Zo(r,"file",yy,so,p),Zo(r,"mailto",yy,so,p),Zo(r,"http",Au,so,p),Zo(r,"https",Au,so,p),Zo(r,"ftp",Au,so,p),Zo(r,"ftps",Au,so,p),Hl(yy,{scheme:!0,ascii:!0},e),Hl(Au,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],b=t[g][1]?{[JSe]:!0}:{[ZSe]:!0};v.indexOf("-")>=0?b[WI]=!0:to.test(v)?ro.test(v)?b[qf]=!0:b[zI]=!0:b[BI]=!0,AF(r,v,v,b)}return AF(r,"localhost",Ip,{ascii:!0}),r.jd=new Kn(Gv),{start:r,tokens:Object.assign({groups:e},ase)}}function lse(t,e){const r=s_e(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,u=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),u+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,u-=h,i.push({t:d.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function s_e(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Zo(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Kn(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Kn(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function $F(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const Rp={defaultProtocol:"http",events:null,format:FF,formatHref:FF,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function wA(t,e=null){let r=Object.assign({},Rp);t&&(r=Object.assign(r,t instanceof wA?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}wA.prototype={o:Rp,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:Rp[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function FF(t){return t}function cse(t,e){this.t="token",this.v=t,this.tk=e}cse.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Rp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),u=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),u&&(o.rel=u),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function sb(t,e){class r extends cse{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const qF=sb("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),LF=sb("text"),o_e=sb("nl"),Lg=sb("url",{isLink:!0,toHref(t=Rp.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Ip&&t[1].t===ma}}),ji=t=>new Kn(t);function a_e({groups:t}){const e=t.domain.concat([Dv,Fv,la,qv,Lv,Bv,zv,Vv,Ti,mA,zf,Wv,Uv,Hv,Ns,Gv,Wf,Kv]),r=[$v,ma,yA,Es,vA,zf,Vf,bA,xA,kv,Cv,Lf,Bf,_v,Sv,Ev,Nv,jv,Tv,Ov,Pv,Iv,Rv,Mv,Av],n=[Dv,$v,Fv,qv,Lv,Bv,zv,Vv,Ti,Lf,Bf,zf,Wv,Uv,Hv,Vf,Ns,Gv,Wf,Kv],i=ji(),s=te(i,Wf);Ye(s,n,s),Ye(s,t.domain,s);const o=ji(),a=ji(),l=ji();Ye(i,t.domain,o),Ye(i,t.scheme,a),Ye(i,t.slashscheme,l),Ye(o,n,s),Ye(o,t.domain,o);const u=te(o,la);te(s,la,u),te(a,la,u),te(l,la,u);const d=te(s,Es);Ye(d,n,s),Ye(d,t.domain,s);const h=ji();Ye(u,t.domain,h),Ye(h,t.domain,h);const f=te(h,Es);Ye(f,t.domain,h);const p=ji(qF);Ye(f,t.tld,p),Ye(f,t.utld,p),te(u,Ip,p);const m=te(h,Ti);te(m,Ti,m),Ye(m,t.domain,h),Ye(p,t.domain,h),te(p,Es,f),te(p,Ti,m);const g=te(p,ma);Ye(g,t.numeric,qF);const v=te(o,Ti),y=te(o,Es);te(v,Ti,v),Ye(v,t.domain,o),Ye(y,n,s),Ye(y,t.domain,o);const b=ji(Lg);Ye(y,t.tld,b),Ye(y,t.utld,b),Ye(b,t.domain,o),Ye(b,n,s),te(b,Es,y),te(b,Ti,v),te(b,la,u);const w=te(b,ma),x=ji(Lg);Ye(w,t.numeric,x);const S=ji(Lg),_=ji();Ye(S,e,S),Ye(S,r,_),Ye(_,e,S),Ye(_,r,_),te(b,Ns,S),te(x,Ns,S);const E=te(a,ma),N=te(l,ma),C=te(N,Ns),j=te(C,Ns);Ye(a,t.domain,o),te(a,Es,y),te(a,Ti,v),Ye(l,t.domain,o),te(l,Es,y),te(l,Ti,v),Ye(E,t.domain,S),te(E,Ns,S),te(E,Vf,S),Ye(j,t.domain,S),Ye(j,e,S),te(j,Ns,S);const T=[[Lf,Bf],[Sv,_v],[Ev,Nv],[kv,Cv],[jv,Tv],[Ov,Pv],[Iv,Rv],[Mv,Av]];for(let P=0;P<T.length;P++){const[O,D]=T[P],q=te(S,O);te(_,O,q),te(q,D,S);const $=ji(Lg);Ye(q,e,$);const L=ji();Ye(q,r),Ye($,e,$),Ye($,r,L),Ye(L,e,$),Ye(L,r,L),te($,D,S),te(L,D,S)}return te(i,Ip,b),te(i,gA,o_e),{start:i,tokens:ase}}function l_e(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,u=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(u=l||a.go(r[i].t));)l=null,a=u,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(u1(LF,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(u1(p,e,m))}}return o.length>0&&s.push(u1(LF,e,o)),s}function u1(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const c_e=typeof console<"u"&&console&&console.warn||(()=>{}),u_e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Dt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function d_e(){return Kn.groups={},Dt.scanner=null,Dt.parser=null,Dt.tokenQueue=[],Dt.pluginQueue=[],Dt.customSchemes=[],Dt.initialized=!1,Dt}function BF(t,e=!1){if(Dt.initialized&&c_e(`linkifyjs: already initialized - will not register custom scheme "${t}" ${u_e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Dt.customSchemes.push([t,e])}function h_e(){Dt.scanner=i_e(Dt.customSchemes);for(let t=0;t<Dt.tokenQueue.length;t++)Dt.tokenQueue[t][1]({scanner:Dt.scanner});Dt.parser=a_e(Dt.scanner.tokens);for(let t=0;t<Dt.pluginQueue.length;t++)Dt.pluginQueue[t][1]({scanner:Dt.scanner,parser:Dt.parser});return Dt.initialized=!0,Dt}function SA(t){return Dt.initialized||h_e(),l_e(Dt.parser.start,t,lse(Dt.scanner.start,t))}SA.scan=lse;function use(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new wA(r),i=SA(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var _A="[\0- -\u2029]",f_e=new RegExp(_A),p_e=new RegExp(`${_A}$`),m_e=new RegExp(_A,"g");function g_e(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function y_e(t){return new Gt({key:new Ir("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(u=>u.docChanged)&&!r.doc.eq(n.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=kie(r.doc,[...e]);if(Rie(a).forEach(({newRange:u})=>{const d=u1e(n.doc,u,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(u.from,u.to," "," ");if(!p_e.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,u.to,void 0," ")}if(h&&f){const p=f.split(f_e).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const v=SA(m).map(y=>y.toObject(t.defaultProtocol));if(!g_e(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{uA(y.from,y.to,n.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function v_e(t){return new Gt({key:new Ir("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=Iie(e.state,t.type.name),u=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&u&&(window.open(u,d),o=!0)}return o}}})}function b_e(t){return new Gt({key:new Ir("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const u=use(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u||i!==void 0&&!i(u.value)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function Ol(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(m_e,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var dse=Qc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){BF(t);return}BF(t.scheme,t.optionalSlashes)})},onDestroy(){d_e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Ol(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!Ol(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Ol(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Sr(this.options.HTMLAttributes,t),0]:["a",Sr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Ol(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Ol(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Dc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=use(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Ol(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(y_e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!Ol(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(v_e({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(b_e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),x_e=dse,w_e=Object.defineProperty,S_e=(t,e)=>{for(var r in e)w_e(t,r,{get:e[r],enumerable:!0})},__e="listItem",zF="textStyle",VF=/^\s*([-+*])\s$/,hse=wi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(__e,this.editor.getAttributes(zF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Qd({find:VF,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Qd({find:VF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(zF),editor:this.editor})),[t]}}),fse=wi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>pA(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),E_e={};S_e(E_e,{findListItemPos:()=>gm,getNextListDepth:()=>EA,handleBackspace:()=>YI,handleDelete:()=>QI,hasListBefore:()=>pse,hasListItemAfter:()=>N_e,hasListItemBefore:()=>mse,listItemHasSubList:()=>gse,nextListIsDeeper:()=>yse,nextListIsHigher:()=>vse});var gm=(t,e)=>{const{$from:r}=e.selection,n=wr(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},EA=(t,e)=>{const r=gm(t,e);if(!r)return!1;const[,n]=x1e(e,t,r.$pos.pos+4);return n},pse=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},mse=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},gse=(t,e,r)=>{if(!r)return!1;const n=wr(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},YI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!ol(t.state,e)&&pse(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),u=[];l.node().descendants((f,p)=>{f.type.name===e&&u.push({node:f,pos:p})});const d=u.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!ol(t.state,e)||!E1e(t.state))return!1;const n=gm(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=gse(e,t.state,s);return mse(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},yse=(t,e)=>{const r=EA(t,e),n=gm(t,e);return!n||!r?!1:r>n.depth},vse=(t,e)=>{const r=EA(t,e),n=gm(t,e);return!n||!r?!1:r<n.depth},QI=(t,e)=>{if(!ol(t.state,e)||!_1e(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:yse(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():vse(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},N_e=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},bse=fr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&QI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&QI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&YI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&YI(t,r,n)&&(e=!0)}),e}}}}),WF=/^(\s*)(\d+)\.\s+(.*)$/,k_e=/^\s/;function C_e(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(WF);if(!s)break;const[,o,a,l]=s,u=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(WF))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(k_e))f.push(p),d+=`
${p.slice(u+2)}`,h+=1;else break}e.push({indent:u,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function xse(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",u=[];l&&u.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);u.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=xse(f,p,r);u.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:u}),s=h}else s+=1}return i}function j_e(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var T_e="listItem",UF="textStyle",HF=/^(\d+)\.\s$/,wse=wi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Sr(this.options.HTMLAttributes,r),0]:["ol",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?j_e(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=C_e(i);if(s.length===0)return;const a=xse(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(T_e,this.editor.getAttributes(UF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Qd({find:HF,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Qd({find:HF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(UF)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),O_e=/^\s*(\[([( |x])?\])\s$/,P_e=wi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Sr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return pA(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),u=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};u(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,u(h);const f=n.extensionManager.attributes,p=Pp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(v=>{m.has(v)||(v in g?i.setAttribute(v,g[v]):i.removeAttribute(v))}),Object.entries(p).forEach(([v,y])=>{y==null?v in g?i.setAttribute(v,g[v]):i.removeAttribute(v):i.setAttribute(v,y)}),d=m,!0}}}},addInputRules(){return[Qd({find:O_e,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),I_e=wi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Sr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=qI(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=qI(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});fr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(hse.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(fse.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(bse.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(wse.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(P_e.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(I_e.configure(this.options.taskList)),t}});var R_e=wi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Sr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),M_e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,A_e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,D_e=Qc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Yd({find:M_e,type:this.type})]},addPasteRules(){return[Dc({find:A_e,type:this.type})]}}),$_e=wi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),F_e=Qc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Sr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function q_e(t={}){return new Gt({view(e){return new L_e(e,t)}})}class L_e{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;n={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let u,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;u=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-u)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=yne(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class nr extends Qe{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return nr.valid(n)?new nr(n):Qe.near(n)}content(){return ve.empty}eq(e){return e instanceof nr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new nr(e.resolve(r.pos))}getBookmark(){return new NA(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!B_e(e)||!z_e(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&nr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(nr.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Me.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(nr.valid(a))return a}return null}}}nr.prototype.visible=!1;nr.findFrom=nr.findGapCursorFrom;Qe.jsonID("gapcursor",nr);class NA{constructor(e){this.pos=e}map(e){return new NA(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return nr.valid(r)?new nr(r):Qe.near(r)}}function Sse(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function B_e(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Sse(i.type))return!0;if(i.inlineContent)return!1}}return!0}function z_e(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Sse(i.type))return!0;if(i.inlineContent)return!1}}return!0}function V_e(){return new Gt({props:{decorations:K_e,createSelectionBetween(t,e,r){return e.pos==r.pos&&nr.valid(r)?new nr(r):null},handleClick:U_e,handleKeyDown:W_e,handleDOMEvents:{beforeinput:H_e}}})}const W_e=vie({ArrowLeft:Bg("horiz",-1),ArrowRight:Bg("horiz",1),ArrowUp:Bg("vert",-1),ArrowDown:Bg("vert",1)});function Bg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Be){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let u=nr.findGapCursorFrom(a,e,l);return u?(i&&i(n.tr.setSelection(new nr(u))),!0):!1}}function U_e(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!nr.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&Me.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new nr(n))),!0)}function H_e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof nr))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=J.empty;for(let o=n.length-1;o>=0;o--)i=J.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new ve(i,0,0));return s.setSelection(Be.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function K_e(t){if(!(t.selection instanceof nr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Wt.create(t.doc,[On.widget(t.selection.head,e,{key:"gapcursor"})])}var Yv=200,zr=function(){};zr.prototype.append=function(e){return e.length?(e=zr.from(e),!this.length&&e||e.length<Yv&&this.leafAppend(e)||this.length<Yv&&e.leafPrepend(this)||this.appendInner(e)):this};zr.prototype.prepend=function(e){return e.length?zr.from(e).append(this):this};zr.prototype.appendInner=function(e){return new G_e(this,e)};zr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?zr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};zr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};zr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};zr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};zr.from=function(e){return e instanceof zr?e:e&&e.length?new _se(e):zr.empty};var _se=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Yv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Yv)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(zr);zr.empty=new _se([]);var G_e=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(zr);const Y_e=500;class us{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,u=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new ks(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],u.push(new ks(m,void 0,void 0,u.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new us(this.items.slice(0,n).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new ks(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let u=o-n.depth;return u>X_e&&(a=Q_e(a,u),o-=u),new us(a.append(s),o)}remapping(e,r){let n=new Np;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new us(this.items.append(e.map(r=>new ks(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),v=f.selection&&f.selection.map(s.slice(l+1,p));v&&a++,n.push(new ks(m,g,v))}else n.push(new ks(m))},i);let u=[];for(let f=r;f<o;f++)u.push(new ks(s.maps[f]));let d=this.items.slice(0,i).append(u).append(n),h=new us(d,a);return h.emptyItemCount()>Y_e&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),u=l&&l.getMap();if(n--,u&&r.appendMap(u,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new ks(u.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new us(zr.from(i.reverse()),s)}}us.empty=new us(zr.empty,0);function Q_e(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class ks{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new ks(r.getMap().invert(),r,this.selection)}}}class ca{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const X_e=20;function J_e(t,e,r,n){let i=r.getMeta(fc),s;if(i)return i.historyState;r.getMeta(tEe)&&(t=new ca(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(fc))return o.getMeta(fc).redo?new ca(t.done.addTransform(r,void 0,n,vy(e)),t.undone,KF(r.mapping.maps),t.prevTime,t.prevComposition):new ca(t.done,t.undone.addTransform(r,void 0,n,vy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!Z_e(r,t.prevRanges)),u=o?d1(t.prevRanges,r.mapping):KF(r.mapping.maps);return new ca(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,vy(e)),us.empty,u,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new ca(t.done.rebased(r,s),t.undone.rebased(r,s),d1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new ca(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),d1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function Z_e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function KF(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function d1(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function eEe(t,e,r){let n=vy(e),i=fc.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new ca(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(fc,{redo:r,historyState:l})}let h1=!1,GF=null;function vy(t){let e=t.plugins;if(GF!=e){h1=!1,GF=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){h1=!0;break}}return h1}const fc=new Ir("history"),tEe=new Ir("closeHistory");function rEe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Gt({key:fc,state:{init(){return new ca(us.empty,us.empty,null,0,-1)},apply(e,r,n){return J_e(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?Nse:n=="historyRedo"?kse:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function Ese(t,e){return(r,n)=>{let i=fc.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=eEe(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const Nse=Ese(!1,!0),kse=Ese(!0,!0);fr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Gt({key:new Ir("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=n.tr.deleteRange(a,l);return t=!0,u}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,u=a-l,d=a;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>n)}})]}});var nEe=fr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[q_e(this.options)]}});fr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Gt({key:new Ir("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Wt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(On.node(u,u+l.nodeSize,{class:this.options.className}))}),Wt.create(t,s)}}})]}});var iEe=fr.create({name:"gapCursor",addProseMirrorPlugins(){return[V_e()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=vt(Ie(t,"allowGapCursor",r)))!=null?e:null}}}),sEe=fr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Gt({key:new Ir("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,u=!o.isLeaf&&tb(o);if((l||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=On.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Wt.create(t,i)}}})]}});fr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Gt({key:new Ir("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||Mie(r.selection)||t.view.dragging?null:Wt.create(r.doc,[On.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function YF({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var oEe=fr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Ir(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Gt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:u}=o,d=e.getState(o),h=a.content.size,f=u.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!YF({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!YF({node:o,types:n})}}})]}}),aEe=fr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Nse(t,e),redo:()=>({state:t,dispatch:e})=>kse(t,e)}},addProseMirrorPlugins(){return[rEe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),lEe=fr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(MSe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(TSe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(hse.configure(this.options.bulletList)),this.options.code!==!1&&i.push($Se.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(LSe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(BSe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(nEe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(iEe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(zSe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(VSe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(aEe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(WSe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(YSe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(fse.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(bse.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(dse.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(wse.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(R_e.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(D_e.configure(this.options.strike)),this.options.text!==!1&&i.push($_e.configure(this.options.text)),this.options.underline!==!1&&i.push(F_e.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(oEe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),cEe=lEe,uEe=sEe;const ea=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>c.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),dEe=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return c.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[c.jsx(ea,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:c.jsx(Xpe,{className:"w-4 h-4"})}),c.jsx(ea,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:c.jsx(ime,{className:"w-4 h-4"})}),c.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),c.jsx(ea,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:c.jsx(ome,{className:"w-4 h-4"})}),c.jsx(ea,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:c.jsx(sme,{className:"w-4 h-4"})}),c.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),c.jsx(ea,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:c.jsx(NM,{className:"w-4 h-4"})}),t.isActive("link")&&c.jsx(ea,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:c.jsx(mme,{className:"w-4 h-4"})}),c.jsx("div",{className:"flex-1"}),c.jsx(ea,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:c.jsx(pme,{className:"w-4 h-4"})}),c.jsx(ea,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:c.jsx(hme,{className:"w-4 h-4"})})]})};function Cse({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=ESe({extensions:[cEe.configure({heading:!1,codeBlock:!1,blockquote:!1}),uEe.configure({placeholder:r}),x_e.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return c.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[c.jsx(dEe,{editor:o}),c.jsx(ySe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),c.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function Qv(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const f1=[{id:"call",label:"Phone call",icon:kM},{id:"email",label:"Email",icon:A0},{id:"chat",label:"Chat",icon:D0},{id:"meeting",label:"Meeting",icon:gn},{id:"coffee",label:"Coffee",icon:Yte},{id:"lunch",label:"Lunch",icon:ore},{id:"note",label:"Other",icon:M0}];function kA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=k.useState("call"),[u,d]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState(""),[g,v]=k.useState([]),[y,b]=k.useState(!1),[w,x]=k.useState(""),{data:S}=Gc(),_=!!o;if(k.useEffect(()=>{if(t){const $=new Date,L=$.toISOString().split("T")[0],M=$.toTimeString().slice(0,5);o?(d(o.activity_date||L),f(o.activity_time||""),m(o.content||""),v(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||L),f(s.activity_time||M),m(s.content||""),v(s.participants||[]),l(s.activity_type||"note")):(d(L),f(M),m(""),v([]),l("call"))}},[t,s,o]),!t)return null;const E=(S||[]).filter($=>$.id.toString()!==(i==null?void 0:i.toString())),N=E.filter($=>{var L;return(L=$.name)==null?void 0:L.toLowerCase().includes(w.toLowerCase())}),C=$=>{$.preventDefault(),!Qv(p)&&(r({activity_type:a,activity_date:u||null,activity_time:h||null,content:p,participants:g}),m(""),v([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},j=()=>{m(""),v([]),d(""),f(""),b(!1),x(""),e()},T=$=>{v(L=>L.includes($)?L.filter(M=>M!==$):[...L,$])},P=$=>{v(L=>L.filter(M=>M!==$))},O=()=>E.filter($=>g.includes($.id)),D=$=>{if(!$)return"";try{return new Date($).toISOString().split("T")[0]}catch{return""}};return(f1.find($=>$.id===a)||f1[0]).icon,c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[c.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),c.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:C,className:"p-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-4 md:col-span-1",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:f1.map($=>{const L=$.icon,M=a===$.id;return c.jsxs("button",{type:"button",onClick:()=>l($.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${M?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[c.jsx(L,{className:"w-5 h-5 mb-1"}),c.jsx("span",{className:"text-xs",children:$.label})]},$.id)})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),c.jsx("input",{id:"activity-date",type:"date",value:D(u),onChange:$=>d($.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),c.jsx("input",{id:"activity-time",type:"time",value:h,onChange:$=>f($.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),O().length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:O().map($=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[$.name,c.jsx("button",{type:"button",onClick:()=>P($.id),className:"hover:text-primary-900",disabled:n,children:c.jsx(gt,{className:"w-3 h-3"})})]},$.id))}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",onClick:()=>b(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&c.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[c.jsx("div",{className:"p-2 border-b",children:c.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:$=>x($.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),c.jsx("div",{className:"max-h-48 overflow-y-auto",children:N.length===0?c.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):N.map($=>{var M;const L=g.includes($.id);return c.jsxs("button",{type:"button",onClick:()=>T($.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${L?"bg-primary-50":""}`,children:[c.jsx("input",{type:"checkbox",checked:L,onChange:()=>{},className:"mr-1"}),$.thumbnail?c.jsx("img",{src:$.thumbnail,alt:$.name,className:"w-6 h-6 rounded-full"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:((M=$.first_name)==null?void 0:M[0])||"?"})}),c.jsx("span",{children:$.name})]},$.id)})})]})]})]})]}),c.jsxs("div",{className:"flex flex-col md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("div",{className:"flex-1",children:c.jsx(Cse,{value:p,onChange:m,placeholder:"What happened? Add your call notes, chat summary, meeting notes...",disabled:n,minHeight:"280px"})})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:[c.jsx("button",{type:"button",onClick:j,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Qv(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function ta({title:t,value:e,icon:r,href:n}){return c.jsx(Le,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),c.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function p1({person:t,hideStar:e=!1}){var r,n;return c.jsxs(Le,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&c.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&c.jsx(zd,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function hEe({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),c.jsx("p",{className:"text-xs text-gray-500",children:kn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&c.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(u=>{var d;return u.thumbnail?c.jsx("img",{src:u.thumbnail,alt:u.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},u.id):c.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:c.jsx("span",{className:"text-sm",children:(d=u.name)==null?void 0:d[0]})},u.id)})})]});return i&&n?c.jsx(Le,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):c.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function fEe({todo:t,onToggle:e}){var n;const r=hm(t);return c.jsxs(Le,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[c.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?c.jsx(qs,{className:"w-5 h-5 text-primary-600"}):c.jsx(Bd,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?c.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):c.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),c.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&c.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[c.jsx("div",{children:kn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&c.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function pEe(){return c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:c.jsx(ire,{className:"w-12 h-12 text-primary-600"})})}),c.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Oc,"!"]}),c.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsxs(Le,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[c.jsx(sr,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),c.jsxs(Le,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(sr,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function mEe(){var j,T,P;const{data:t,isLoading:e,error:r}=Ime(),{data:n}=pre(!1),i=mre(),s=PM(),[o,a]=k.useState(null),[l,u]=k.useState(!1),[d,h]=k.useState(!1),[f,p]=k.useState(null),m=O=>{if(!O.is_completed){a(O),u(!0);return}i.mutate({todoId:O.id,data:{content:O.content,due_date:O.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),u(!1),a(null))},v=()=>{if(!o)return;const O=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:O,activity_type:"note",participants:[]}),u(!1),h(!0)},y=async O=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:O}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch{alert("Failed to create activity. Please try again.")}};if(e)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const O=((j=r==null?void 0:r.response)==null?void 0:j.status)>=500||!(r!=null&&r.response);return c.jsx("div",{className:"card p-8 text-center",children:c.jsx("div",{className:"text-red-600 mb-2",children:O?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),c.jsx("p",{className:"text-sm text-gray-600",children:((P=(T=r==null?void 0:r.response)==null?void 0:T.data)==null?void 0:P.message)||"An error occurred while loading your data."})]})})})}const{stats:b,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:_}=t||{};if(((b==null?void 0:b.total_people)||0)+((b==null?void 0:b.total_companies)||0)+((b==null?void 0:b.total_dates)||0)===0)return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(ta,{title:"Total people",value:0,icon:gn,href:"/people"}),c.jsx(ta,{title:"Organizations",value:0,icon:Pr,href:"/companies"}),c.jsx(ta,{title:"Events",value:0,icon:Fs,href:"/dates"}),c.jsx(ta,{title:"Open todos",value:0,icon:qs,href:"/todos"})]}),c.jsx(pEe,{})]});const C=(n==null?void 0:n.slice(0,5))||[];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(ta,{title:"Total people",value:(b==null?void 0:b.total_people)||0,icon:gn,href:"/people"}),c.jsx(ta,{title:"Organizations",value:(b==null?void 0:b.total_companies)||0,icon:Pr,href:"/companies"}),c.jsx(ta,{title:"Events",value:(b==null?void 0:b.total_dates)||0,icon:Fs,href:"/dates"}),c.jsx(ta,{title:"Open todos",value:(b==null?void 0:b.open_todos_count)||0,icon:qs,href:"/todos"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Fs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),c.jsxs(Le,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",c.jsx(kx,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(O=>c.jsx(hEe,{reminder:O},O.id)):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(qs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),c.jsxs(Le,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",c.jsx(kx,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:C.length>0?C.map(O=>c.jsx(fEe,{todo:O,onToggle:m},O.id)):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(zd,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?c.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(O=>c.jsx(p1,{person:O,hideStar:!0},O.id))}):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(D0,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(_==null?void 0:_.length)>0?c.jsx("div",{className:"divide-y divide-gray-100",children:_.map(O=>c.jsx(p1,{person:O},O.id))}):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(gn,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),c.jsxs(Le,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",c.jsx(kx,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(O=>c.jsx(p1,{person:O},O.id)):c.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",c.jsx(Le,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),c.jsx(qM,{isOpen:l,onClose:()=>{u(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:v}),c.jsx(kA,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function QF(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function gEe({person:t,companyName:e,isDeceased:r}){var n,i;return c.jsx(Le,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-start",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):c.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&c.jsx(zd,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&c.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>c.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function yEe(){var qe,Pe;const[t,e]=k.useState(!1),[r,n]=k.useState(!1),[i,s]=k.useState([]),[o,a]=k.useState(""),[l,u]=k.useState(""),[d,h]=k.useState("all"),[f,p]=k.useState(""),[m,g]=k.useState("first_name"),[v,y]=k.useState("asc"),[b,w]=k.useState(!1),[x,S]=k.useState(!1),_=k.useRef(null),E=k.useRef(null),N=Fn(),{data:C,isLoading:j,error:T}=Gc(),{data:P=[]}=z0(),O=(qe=window.prmConfig)==null?void 0:qe.userId,D=cre({onSuccess:G=>{w(!1),N(`/people/${G.id}`)}}),q=async G=>{S(!0);try{await D.mutateAsync(G)}finally{S(!1)}},{data:$}=st({queryKey:["person-labels"],queryFn:async()=>(await Ze.getPersonLabels()).data}),L=($==null?void 0:$.map(G=>G.name))||[],M=k.useMemo(()=>{if(!C)return[];const G=C.map(de=>de.birth_year).filter(de=>de!=null);return[...new Set(G)].sort((de,Oe)=>Oe-de)},[C]);k.useEffect(()=>{const G=de=>{E.current&&!E.current.contains(de.target)&&_.current&&!_.current.contains(de.target)&&e(!1)};return document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[]);const B=k.useMemo(()=>{if(!C)return[];let G=[...C];if(r&&(G=G.filter(de=>de.is_favorite)),i.length>0&&(G=G.filter(de=>{const Oe=de.labels||[];return i.some(ut=>Oe.includes(ut))})),o){const de=parseInt(o,10);G=G.filter(Oe=>Oe.birth_year===de)}if(l){const de=new Date;let Oe;switch(l){case"7":Oe=new Date(de.setDate(de.getDate()-7));break;case"30":Oe=new Date(de.setDate(de.getDate()-30));break;case"90":Oe=new Date(de.setDate(de.getDate()-90));break;case"365":Oe=new Date(de.setDate(de.getDate()-365));break;default:Oe=null}Oe&&(G=G.filter(ut=>ut.modified?new Date(ut.modified)>=Oe:!1))}return d==="mine"?G=G.filter(de=>de.author===O):d==="shared"&&(G=G.filter(de=>de.author!==O)),f&&(G=G.filter(de=>{var ut;return(((ut=de.acf)==null?void 0:ut._assigned_workspaces)||[]).includes(parseInt(f))})),G.sort((de,Oe)=>{var Yr,Cr,ht,ar,Ni,Xt,A,F;let ut,et;if(m==="modified"){ut=de.modified?new Date(de.modified).getTime():0,et=Oe.modified?new Date(Oe.modified).getTime():0;const V=ut-et;return v==="asc"?V:-V}if(m==="first_name"?(ut=(((Yr=de.acf)==null?void 0:Yr.first_name)||de.first_name||"").toLowerCase(),et=(((Cr=Oe.acf)==null?void 0:Cr.first_name)||Oe.first_name||"").toLowerCase()):(ut=(((ht=de.acf)==null?void 0:ht.last_name)||de.last_name||"").toLowerCase(),et=(((ar=Oe.acf)==null?void 0:ar.last_name)||Oe.last_name||"").toLowerCase()),ut===et){const V=m==="first_name"?(((Ni=de.acf)==null?void 0:Ni.last_name)||de.last_name||"").toLowerCase():(((Xt=de.acf)==null?void 0:Xt.first_name)||de.first_name||"").toLowerCase(),le=m==="first_name"?(((A=Oe.acf)==null?void 0:A.last_name)||Oe.last_name||"").toLowerCase():(((F=Oe.acf)==null?void 0:F.first_name)||Oe.first_name||"").toLowerCase(),ee=V.localeCompare(le);return v==="asc"?ee:-ee}const Mr=ut.localeCompare(et);return v==="asc"?Mr:-Mr})},[C,r,i,o,l,d,f,O,m,v]),Y=r||i.length>0||o||l||d!=="all"||f,Q=G=>{s(de=>de.includes(G)?de.filter(Oe=>Oe!==G):[...de,G])},pe=()=>{n(!1),s([]),a(""),u(""),h("all"),p("")},H=k.useMemo(()=>{if(!B)return[];const G=B.map(de=>QF(de)).filter(Boolean);return[...new Set(G)]},[B]),{data:oe}=st({queryKey:["companies","batch",H.sort().join(",")],queryFn:async()=>H.length===0?[]:(await Ze.getCompanies({per_page:100,include:H.join(",")})).data,enabled:H.length>0}),je=k.useMemo(()=>{const G={};return oe&&oe.forEach(de=>{G[de.id]=cr(de)}),G},[oe]),me=k.useMemo(()=>{const G={};return B.forEach(de=>{const Oe=QF(de);Oe&&je[Oe]&&(G[de.id]=je[Oe])}),G},[B,je]);return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[c.jsxs("select",{value:m,onChange:G=>g(G.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[c.jsx("option",{value:"first_name",children:"First name"}),c.jsx("option",{value:"last_name",children:"Last name"}),c.jsx("option",{value:"modified",children:"Last modified"})]}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("button",{onClick:()=>y(v==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${v==="asc"?"descending":"ascending"}`,children:v==="asc"?c.jsx(Ype,{className:"w-4 h-4 text-gray-600"}):c.jsx(Gpe,{className:"w-4 h-4 text-gray-600"})})]}),c.jsxs("div",{className:"relative",ref:_,children:[c.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${Y?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[c.jsx(wp,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Filter"}),Y&&c.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&c.jsx("div",{ref:E,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsx("div",{children:c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r,onChange:G=>n(G.target.checked),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&c.jsx(bp,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(zd,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),L.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),c.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:L.map(G=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"checkbox",checked:i.includes(G),onChange:()=>Q(G),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(G)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(G)&&c.jsx(bp,{className:"w-3 h-3 text-white"})}),c.jsx("span",{className:"text-sm text-gray-700",children:G})]},G))})]}),M.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),c.jsxs("select",{value:o,onChange:G=>a(G.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All years"}),M.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),c.jsxs("select",{value:l,onChange:G=>u(G.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"Any time"}),c.jsx("option",{value:"7",children:"Last 7 days"}),c.jsx("option",{value:"30",children:"Last 30 days"}),c.jsx("option",{value:"90",children:"Last 90 days"}),c.jsx("option",{value:"365",children:"Last year"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ownership"}),c.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Contacts"},{value:"mine",label:"My Contacts"},{value:"shared",label:"Shared with Me"}].map(G=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"radio",name:"ownership",value:G.value,checked:d===G.value,onChange:de=>h(de.target.value),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded-full mr-3 ${d===G.value?"border-primary-600":"border-gray-300"}`,children:d===G.value&&c.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})}),c.jsx("span",{className:"text-sm text-gray-700",children:G.label})]},G.value))})]}),P.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Workspace"}),c.jsxs("select",{value:f,onChange:G=>p(G.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All Workspaces"}),P.map(G=>c.jsx("option",{value:G.id,children:G.title},G.id))]})]}),Y&&c.jsx("button",{onClick:pe,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),Y&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[c.jsx(zd,{className:"w-3 h-3"}),"Favorites",c.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:c.jsx(gt,{className:"w-3 h-3"})})]}),i.map(G=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[G,c.jsx("button",{onClick:()=>Q(G),className:"hover:text-gray-600",children:c.jsx(gt,{className:"w-3 h-3"})})]},G)),o&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,c.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:c.jsx(gt,{className:"w-3 h-3"})})]}),l&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",c.jsx("button",{onClick:()=>u(""),className:"hover:text-gray-600",children:c.jsx(gt,{className:"w-3 h-3"})})]}),d!=="all"&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[d==="mine"?"My Contacts":"Shared with Me",c.jsx("button",{onClick:()=>h("all"),className:"hover:text-primary-600",children:c.jsx(gt,{className:"w-3 h-3"})})]}),f&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[((Pe=P.find(G=>G.id===parseInt(f)))==null?void 0:Pe.title)||"Workspace",c.jsx("button",{onClick:()=>p(""),className:"hover:text-blue-600",children:c.jsx(gt,{className:"w-3 h-3"})})]})]}),c.jsxs("button",{onClick:()=>w(!0),className:"btn-primary",children:[c.jsx(sr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),j&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),T&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!j&&!T&&(C==null?void 0:C.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(sr,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),c.jsxs("button",{onClick:()=>w(!0),className:"btn-primary",children:[c.jsx(sr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!j&&!T&&(B==null?void 0:B.length)>0&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(G=>c.jsx(gEe,{person:G,companyName:me[G.id],isDeceased:G.is_deceased},G.id))}),!j&&!T&&(C==null?void 0:C.length)>0&&(B==null?void 0:B.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(wp,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),c.jsx("button",{onClick:pe,className:"btn-secondary",children:"Clear filters"})]}),c.jsx(DM,{isOpen:b,onClose:()=>w(!1),onSubmit:q,isLoading:x})]})}const vEe="#0285FF",bEe=k.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=vEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),xEe="#0866FF",wEe=k.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=xEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),SEe="#FF0069",_Ee=k.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=SEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),EEe="#4A154B",NEe=k.forwardRef(function({title:e="Slack",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=EEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})]})}),kEe="#000000",CEe=k.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=kEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),jEe="#25D366",TEe=k.forwardRef(function({title:e="WhatsApp",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=jEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})]})}),OEe="#000000",PEe=k.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=OEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),IEe={Phone:kM,Mail:A0,Users:gn,Coffee:Yte,Utensils:ore,FileText:M0,Circle:hI,MessageCircle:D0};function REe({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=k.useMemo(()=>eve(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?dI:Bd;if(f.type==="activity"&&f.activity_type){const p=rve(f.activity_type);return IEe[p]||hI}return f.type==="note"?M0:hI},u=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",v=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const b=tve(y),w=ive(f),x=m&&hm(f);return c.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&c.jsx("div",{className:"absolute left-0 top-1",children:c.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),c.jsx("div",{className:`${w}`,children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&c.jsx("span",{className:"text-xs font-medium text-gray-600",children:nve(f.activity_type)}),c.jsx("span",{className:"text-xs text-gray-400",children:""}),c.jsx("span",{className:"text-xs text-gray-500",children:b})]}),c.jsxs("div",{className:"flex items-start gap-2",children:[m&&c.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?c.jsx(dI,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):c.jsx(Bd,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(v||g)&&((S=f.content)!=null&&S.includes("<"))?c.jsx("div",{className:`text-sm flex-1 timeline-content ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):c.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&c.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const E=a(_);return E?c.jsxs(Le,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[c.jsx(NM,{className:"w-3 h-3"}),E.name]},_):null})]}),m&&f.due_date&&c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",kn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&c.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&c.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),c.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(u)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?c.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function MEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i="",isContactShared:s=!1}){const[o,a]=k.useState(""),[l,u]=k.useState("private");if(k.useEffect(()=>{t&&(a(i||""),u("private"))},[t,i]),!t)return null;const d=f=>{f.preventDefault(),!Qv(o)&&(r(o,l),a(""),u("private"))},h=()=>{a(""),u("private"),e()};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),c.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:d,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),c.jsx(Cse,{value:o,onChange:a,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),s&&c.jsx("div",{className:"mb-4",children:c.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:l==="shared",onChange:f=>u(f.target.checked?"shared":"private"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsxs("span",{className:"flex items-center gap-1.5",children:[l==="shared"?c.jsx(gn,{className:"w-4 h-4 text-blue-500"}):c.jsx(ere,{className:"w-4 h-4 text-gray-400"}),"Share this note with others who can see this contact"]})]})}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:h,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Qv(o),children:n?"Adding...":"Add note"})]})]})]})})}function jse({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=k.useState(""),[a,l]=k.useState(""),[u,d]=k.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(k.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:u}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),c.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:f,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),c.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&c.jsx("div",{className:"mb-4",children:c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:u,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),c.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}const AEe=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"slack",label:"Slack"},{value:"other",label:"Other"}];function DEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,contactInfo:i=[]}){const{register:s,control:o,handleSubmit:a,reset:l,formState:{errors:u}}=Ws({defaultValues:{contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]}}),{fields:d,append:h,remove:f}=rge({control:o,name:"contacts"});if(k.useEffect(()=>{t&&l({contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]})},[t,i,l]),!t)return null;const p=g=>{const v=g.contacts.filter(y=>y.contact_type&&y.contact_value);r(v)},m=()=>{h({contact_type:"",contact_label:"",contact_value:""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Edit contact details"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:a(p),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[d.length===0?c.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:'No contact details yet. Click "Add contact detail" to add one.'}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-2 text-xs font-medium text-gray-500 px-1",children:[c.jsx("div",{className:"col-span-3",children:"Type"}),c.jsx("div",{className:"col-span-3",children:"Label"}),c.jsx("div",{className:"col-span-5",children:"Value"}),c.jsx("div",{className:"col-span-1"})]}),d.map((g,v)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 p-3 md:p-2 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Type"}),c.jsxs("select",{...s(`contacts.${v}.contact_type`,{required:!0}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n,children:[c.jsx("option",{value:"",children:"Select type..."}),AEe.map(y=>c.jsx("option",{value:y.value,children:y.label},y.value))]})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Label"}),c.jsx("input",{...s(`contacts.${v}.contact_label`),placeholder:"e.g., Work",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsxs("div",{className:"md:col-span-5",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Value"}),c.jsx("input",{...s(`contacts.${v}.contact_value`,{required:!0}),placeholder:"e.g., john@example.com",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsx("div",{className:"md:col-span-1 flex items-center justify-end md:justify-center",children:c.jsx("button",{type:"button",onClick:()=>f(v),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",disabled:n,children:c.jsx(pn,{className:"w-4 h-4"})})})]},g.id))]}),c.jsxs("button",{type:"button",onClick:m,className:"mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",disabled:n,children:[c.jsx(sr,{className:"w-4 h-4"}),"Add contact detail"]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":"Save changes"})]})]})]})})}function $Ee({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=k.useState(""),[a,l]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),h=k.useMemo(()=>r.filter(b=>b.id!==i).sort((b,w)=>{var _,E;const x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((E=w.acf)==null?void 0:E.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=k.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(b=>{var _,E;const w=ld(b).toLowerCase(),x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(b.last_name||((E=b.acf)==null?void 0:E.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=k.useMemo(()=>h.find(y=>y.id===t),[h,t]);k.useEffect(()=>{const y=b=>{d.current&&!d.current.contains(b.target)&&u.current&&!u.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},v=p?ld(p):"";return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative",children:p&&!a?c.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[c.jsx("span",{children:v}),c.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:c.jsx(gt,{className:"w-4 h-4"})})]}):c.jsx("input",{ref:u,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&c.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>c.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:ld(y)},y.id)):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function FEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,relationship:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1,onCreatePerson:l}){const u=!!i,{data:d=[],isLoading:h}=st({queryKey:["relationship-types"],queryFn:async()=>(await Ze.getRelationshipTypes()).data}),{register:f,handleSubmit:p,reset:m,control:g,formState:{errors:v}}=Ws({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});if(k.useEffect(()=>{t&&m(i?{related_person:i.related_person||null,relationship_type:i.relationship_type?String(i.relationship_type):"",relationship_label:i.relationship_label||""}:{related_person:null,relationship_type:"",relationship_label:""})},[t,i,m]),!t)return null;const y=b=>{r({related_person:b.related_person||null,relationship_type:b.relationship_type?parseInt(b.relationship_type,10):null,relationship_label:b.relationship_label||""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:u?"Edit relationship":"Add relationship"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:p(y),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Related person *"}),c.jsx(ev,{name:"related_person",control:g,rules:{required:"Please select a person"},render:({field:b})=>c.jsx($Ee,{value:b.value,onChange:b.onChange,people:o,isLoading:a,excludePersonId:parseInt(s,10)})}),v.related_person&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.related_person.message}),!u&&l&&c.jsx("div",{className:"mt-2",children:c.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[c.jsx(sr,{className:"w-4 h-4"}),"Add new person"]})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Relationship type"}),c.jsxs("select",{...f("relationship_type"),className:"input",disabled:h||n,children:[c.jsx("option",{value:"",children:"Select a type..."}),d.map(b=>c.jsx("option",{value:b.id,children:b.name},b.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Custom label"}),c.jsx("input",{...f("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":u?"Save changes":"Add relationship"})]})]})]})})}function qEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,address:i=null}){const s=!!i,{register:o,handleSubmit:a,reset:l,formState:{errors:u}}=Ws({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});if(k.useEffect(()=>{t&&l(i?{address_label:i.address_label||"",street:i.street||"",postal_code:i.postal_code||"",city:i.city||"",state:i.state||"",country:i.country||""}:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""})},[t,i,l]),!t)return null;const d=h=>{r({address_label:h.address_label||"",street:h.street||"",postal_code:h.postal_code||"",city:h.city||"",state:h.state||"",country:h.country||""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit address":"Add address"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:a(d),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Label"}),c.jsx("input",{...o("address_label"),className:"input",placeholder:"e.g., Home, Work",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Street"}),c.jsx("input",{...o("street"),className:"input",placeholder:"e.g., 123 Main Street",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Postal code"}),c.jsx("input",{...o("postal_code"),className:"input",placeholder:"e.g., 12345",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"City"}),c.jsx("input",{...o("city"),className:"input",placeholder:"e.g., Amsterdam",disabled:n})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"State/Province"}),c.jsx("input",{...o("state"),className:"input",placeholder:"e.g., North Holland",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Country"}),c.jsx("input",{...o("country"),className:"input",placeholder:"e.g., Netherlands",disabled:n})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add address"})]})]})]})})}function LEe({value:t,onChange:e,companies:r,isLoading:n}){return c.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return c.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function BEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,workHistoryItem:i=null}){const s=!!i,{data:o=[],isLoading:a}=st({queryKey:["companies","all"],queryFn:async()=>(await Ze.getCompanies({per_page:100})).data}),l=k.useMemo(()=>[...o].sort((v,y)=>{var x,S;const b=(((x=v.title)==null?void 0:x.rendered)||v.title||"").toLowerCase(),w=(((S=y.title)==null?void 0:S.rendered)||y.title||"").toLowerCase();return b.localeCompare(w)}),[o]),{register:u,handleSubmit:d,reset:h,watch:f,control:p,formState:{errors:m}}=Ws({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});if(f("is_current"),k.useEffect(()=>{t&&h(i?{company:i.company||null,job_title:i.job_title||"",description:i.description||"",start_date:i.start_date||"",end_date:i.end_date||"",is_current:i.is_current||!1}:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1})},[t,i,h]),!t)return null;const g=v=>{r({company:v.company||null,job_title:v.job_title||"",description:v.description||"",start_date:v.start_date||"",end_date:v.end_date||"",is_current:v.is_current||!1})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit work history":"Add work history"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:d(g),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Organization"}),c.jsx(ev,{name:"company",control:p,render:({field:v})=>c.jsx(LEe,{value:v.value,onChange:v.onChange,companies:l,isLoading:a||n})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Job title"}),c.jsx("input",{...u("job_title"),className:"input",placeholder:"e.g., Software Engineer",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Description"}),c.jsx("textarea",{...u("description"),className:"input",rows:3,placeholder:"Job description, responsibilities, achievements...",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Start date"}),c.jsx("input",{type:"date",...u("start_date"),className:"input",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"End date"}),c.jsx("input",{type:"date",...u("end_date"),className:"input",disabled:n})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_current",...u("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add work history"})]})]})]})})}function zEe(t,e){return st({queryKey:["shares",t,e],queryFn:async()=>(await _e.getPostShares(e,t)).data,enabled:!!e})}function VEe(){const t=rt();return He({mutationFn:async({postType:e,postId:r,userId:n,permission:i})=>(await _e.sharePost(r,e,{user_id:n,permission:i})).data,onSuccess:(e,{postType:r,postId:n})=>{t.invalidateQueries({queryKey:["shares",r,n]})}})}function WEe(){const t=rt();return He({mutationFn:async({postType:e,postId:r,userId:n})=>{await _e.unsharePost(r,e,n)},onSuccess:(e,{postType:r,postId:n})=>{t.invalidateQueries({queryKey:["shares",r,n]})}})}function UEe(t){return st({queryKey:["users","search",t],queryFn:async()=>(await _e.searchUsers(t)).data,enabled:(t==null?void 0:t.length)>=2})}function Tse({isOpen:t,onClose:e,postType:r,postId:n,postTitle:i}){const[s,o]=k.useState(""),[a,l]=k.useState("view"),u=k.useRef(null),{data:d=[],isLoading:h}=zEe(r,n),{data:f=[],isLoading:p}=UEe(s),m=VEe(),g=WEe();k.useEffect(()=>{t&&(o(""),setTimeout(()=>{var w;return(w=u.current)==null?void 0:w.focus()},100))},[t]);const v=f.filter(w=>!d.some(x=>x.user_id===w.id)),y=async w=>{await m.mutateAsync({postType:r,postId:n,userId:w.id,permission:a}),o("")},b=async w=>{await g.mutateAsync({postType:r,postId:n,userId:w})};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Share"}),c.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:i})]}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"px-6 py-4",children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsx(nl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{ref:u,type:"text",value:s,onChange:w=>o(w.target.value),placeholder:"Search users by name or email...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Permission:"}),c.jsxs("select",{value:a,onChange:w=>l(w.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"view",children:"Can view"}),c.jsx("option",{value:"edit",children:"Can edit"})]})]}),s.length>=2&&c.jsx("div",{className:"mb-4",children:p?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:"Searching..."}):v.length===0?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:f.length===0?"No users found":"All matching users already have access"}):c.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-100",children:v.map(w=>c.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50",children:[c.jsx("img",{src:w.avatar_url,alt:w.display_name,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:w.display_name}),c.jsx("div",{className:"text-xs text-gray-500 truncate",children:w.email})]}),c.jsx("button",{onClick:()=>y(w),disabled:m.isPending,className:"p-2 text-primary-600 hover:bg-primary-50 rounded-full",children:c.jsx($0,{className:"w-4 h-4"})})]},w.id))})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Shared with (",d.length,")"]}),h?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:"Loading..."}):d.length===0?c.jsx("div",{className:"py-6 text-center text-sm text-gray-500",children:"Not shared with anyone yet"}):c.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-100",children:d.map(w=>c.jsxs("div",{className:"flex items-center gap-3 p-3",children:[c.jsx("img",{src:w.avatar_url,alt:w.display_name,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:w.display_name}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Can ",w.permission]})]}),c.jsx("button",{onClick:()=>b(w.user_id),disabled:g.isPending,className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:c.jsx(pn,{className:"w-4 h-4"})})]},w.user_id))})]})]}),c.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:c.jsx("button",{onClick:e,className:"btn-secondary",children:"Done"})})]})})]}):null}function Bn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function HEe(t){return t?t.replace(/[^\d+]/g,""):""}function XF(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function KEe(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function GEe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${Bn(l)}`),s.push(`N:${Bn(a)};${Bn(o)};;;`),i.nickname&&s.push(`NICKNAME:${Bn(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=Bn(h.contact_value),p=h.contact_label?Bn(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",v=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=HEe(h.contact_value);y&&s.push(`${v}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let b=h.contact_value;b.match(/^https?:\/\//i)||(b=`https://${b}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${Bn(b)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=Bn(h.street||""),m=Bn(h.city||""),g=Bn(h.state||""),v=Bn(h.postal_code||""),y=Bn(h.country||"");(p||m||g||v||y)&&s.push(`${f}:;;${p};${m};${g};${v};${y}`)});const{title:u,org:d}=KEe(i.work_history,r);if(d&&s.push(`ORG:${Bn(d)}`),u&&s.push(`TITLE:${Bn(u)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=XF(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=XF(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function YEe(t,e={}){const{filename:r,...n}=e,i=GEe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const QEe=({className:t})=>c.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:c.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function no(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function XEe(){var zD,VD,WD,UD,HD,KD,GD,YD,QD,XD,JD,ZD,e$,t$,r$,n$,i$,s$,o$,a$;const{id:t}=dh(),e=Fn(),r=rt(),{data:n,isLoading:i,error:s}=lre(t),{data:o}=xme(t),{data:a}=wme(t),l=_me(),u=Nme(),d=Ome(),h=Sme(),f=Eme(),p=PM(),m=kme(),g=ure(),v=jme(),y=Cme(),b=Tme(),{data:w,isLoading:x}=Gc(),{data:S=[]}=st({queryKey:["investments",t],queryFn:async()=>(await _e.getInvestments(t)).data,enabled:!!t}),[_,E]=k.useState("profile"),[N,C]=k.useState(!1),[j,T]=k.useState(""),[P,O]=k.useState(!1),D=k.useRef(null),[q,$]=k.useState(!1),[L,M]=k.useState(!1),[B,Y]=k.useState(!1),[Q,pe]=k.useState(!1),[H,oe]=k.useState(!1),[je,me]=k.useState(!1),[qe,Pe]=k.useState(!1),[G,de]=k.useState(!1),[Oe,ut]=k.useState(!1),[et,Mr]=k.useState(!1),[Yr,Cr]=k.useState(!1),[ht,ar]=k.useState(!1),[Ni,Xt]=k.useState(!1),[A,F]=k.useState(!1),[V,le]=k.useState(!1),[ee,Z]=k.useState(!1),[ye,Ve]=k.useState(null),[Ke,Ft]=k.useState(null),[Ee,ne]=k.useState(null),[ge,he]=k.useState(null),[ke,Xe]=k.useState(null),[ki,xn]=k.useState(null),[El,Nl]=k.useState(null),[Bb,kl]=k.useState(null),[Zm,Cl]=k.useState(null),[li,Yo]=k.useState(null),[zb,yu]=k.useState(!1),[Vb,Wh]=k.useState(null),{data:Te}=st({queryKey:["person-labels"],queryFn:async()=>(await Ze.getPersonLabels()).data}),Fe=Te||[],Ge=(n==null?void 0:n.labels)||[],zt=((UD=(WD=(VD=(zD=n==null?void 0:n._embedded)==null?void 0:zD["wp:term"])==null?void 0:VD.flat())==null?void 0:WD.filter(I=>(I==null?void 0:I.taxonomy)==="person_label"))==null?void 0:UD.map(I=>I.id))||[],ci=Fe.filter(I=>!Ge.includes(I.name));mh((n==null?void 0:n.name)||((HD=n==null?void 0:n.title)==null?void 0:HD.rendered)||(n==null?void 0:n.title)||"Person");const Gs=a==null?void 0:a.find(I=>{const U=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(U==null?void 0:U.toLowerCase())==="birthday"}),vu=Gs!=null&&Gs.date_value?new Date(Gs.date_value):null,eg=(Gs==null?void 0:Gs.year_unknown)??!1,xs=a==null?void 0:a.find(I=>{const U=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(U==null?void 0:U.toLowerCase())==="died"}),bu=xs!=null&&xs.date_value?new Date(xs.date_value):null,Wb=(xs==null?void 0:xs.year_unknown)??!1,xu=!!bu,wu=vu&&!eg?Dx(xu?bu:new Date,vu):null,RD=a?[...a].sort((I,U)=>{const K=I.date_value?new Date(I.date_value):new Date(0),be=U.date_value?new Date(U.date_value):new Date(0);return K-be}):[],jle=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch{alert("Failed to delete person. Please try again.")}},Tle=I=>{if(!I)return"";let U=I.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const K=U.startsWith("+");return U=U.replace(/\D/g,""),K?`+${U}`:U},Ole=async I=>{Cr(!0);try{const U=Js(n.acf,{contact_info:I});await h.mutateAsync({id:t,data:{acf:U}}),pe(!1)}catch{alert("Failed to save contacts. Please try again.")}finally{Cr(!1)}},Ple=async I=>{ar(!0);try{Ee?await Ze.updateDate(Ee.id,{title:I.title,date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown}}):await Ze.createDate({title:I.title,status:"publish",date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown,_visibility:"private"}}),r.invalidateQueries({queryKey:["person-dates",t]}),r.invalidateQueries({queryKey:["reminders"]}),oe(!1),ne(null)}catch{alert("Failed to save date. Please try again.")}finally{ar(!1)}},Ile=async I=>{var U;Xt(!0);try{const K=[...((U=n.acf)==null?void 0:U.relationships)||[]],be={related_person:I.related_person||null,relationship_type:I.relationship_type||null,relationship_label:I.relationship_label||""};ke!==null?K[ke]=be:K.push(be);const Ae=Js(n.acf,{relationships:K});await h.mutateAsync({id:t,data:{acf:Ae}}),r.invalidateQueries({queryKey:["person",t]}),me(!1),he(null),Xe(null)}catch{alert("Failed to save relationship. Please try again.")}finally{Xt(!1)}},Rle=async I=>{var U;F(!0);try{const K=[...((U=n.acf)==null?void 0:U.addresses)||[]],be={address_label:I.address_label||"",street:I.street||"",postal_code:I.postal_code||"",city:I.city||"",state:I.state||"",country:I.country||""};El!==null?K[El]=be:K.push(be);const Ae=Js(n.acf,{addresses:K});await h.mutateAsync({id:t,data:{acf:Ae}}),Pe(!1),xn(null),Nl(null)}catch{alert("Failed to save address. Please try again.")}finally{F(!1)}},Mle=async I=>{var U;le(!0);try{const K=[...((U=n.acf)==null?void 0:U.work_history)||[]],be={company:I.company||null,job_title:I.job_title||"",description:I.description||"",start_date:I.start_date||"",end_date:I.end_date||"",is_current:I.is_current||!1};Zm!==null?K[Zm]=be:K.push(be);const Ae=Js(n.acf,{work_history:K});await h.mutateAsync({id:t,data:{acf:Ae}}),de(!1),kl(null),Cl(null)}catch{alert("Failed to save work history. Please try again.")}finally{le(!1)}},Ale=async I=>{Z(!0);try{const U=Js(n.acf,{first_name:I.first_name,last_name:I.last_name,nickname:I.nickname,gender:I.gender||null,pronouns:I.pronouns||null,how_we_met:I.how_we_met,is_favorite:I.is_favorite});await h.mutateAsync({id:t,data:{title:`${I.first_name} ${I.last_name}`.trim(),acf:U}}),ut(!1)}catch{alert("Failed to save person. Please try again.")}finally{Z(!1)}},Dle=async I=>{var be;if(!window.confirm("Are you sure you want to delete this address?"))return;const U=[...((be=n.acf)==null?void 0:be.addresses)||[]];U.splice(I,1);const K=Js(n.acf,{addresses:U});await h.mutateAsync({id:t,data:{acf:K}})},$le=async I=>{var Ln,Qs,Uh,sg,l$,c$;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const U=(Qs=(Ln=n.acf)==null?void 0:Ln.relationships)==null?void 0:Qs[I];if(!U)return;const K=U.related_person,be=U.relationship_type;let Ae=!0;K&&be&&(Ae=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let it=null;if(!Ae&&K&&be)try{const[Su,og]=await Promise.all([Ze.getPerson(K,{_embed:!0}),Ze.getRelationshipTypes()]),Gb={};og.data.forEach(Hh=>{Gb[Hh.id]=Hh});const Ci=Gb[be],Tl=(Uh=Ci==null?void 0:Ci.acf)==null?void 0:Uh.inverse_relationship_type;if(Tl){const Kh=(((sg=Su.data.acf)==null?void 0:sg.relationships)||[]).find(Xs=>{var u$,d$;const oce=typeof Xs.related_person=="object"?(u$=Xs.related_person)==null?void 0:u$.ID:Xs.related_person,ace=typeof Xs.relationship_type=="object"?(d$=Xs.relationship_type)==null?void 0:d$.term_id:Xs.relationship_type;return oce===parseInt(t)&&ace===Tl});Kh&&(it={related_person:parseInt(t),relationship_type:Tl,relationship_label:Kh.relationship_label||""})}}catch{}const mt=[...((l$=n.acf)==null?void 0:l$.relationships)||[]];mt.splice(I,1);const Ys=Js(n.acf,{relationships:mt});if(await h.mutateAsync({id:t,data:{acf:Ys}}),!Ae&&it&&K){await new Promise(Su=>setTimeout(Su,500));try{const Su=await Ze.getPerson(K,{_embed:!0}),og=((c$=Su.data.acf)==null?void 0:c$.relationships)||[];if(!og.some(Ci=>{var Kh,Xs;const Tl=typeof Ci.related_person=="object"?(Kh=Ci.related_person)==null?void 0:Kh.ID:Ci.related_person,Hh=typeof Ci.relationship_type=="object"?(Xs=Ci.relationship_type)==null?void 0:Xs.term_id:Ci.relationship_type;return Tl===it.related_person&&Hh===it.relationship_type})){const Ci=[...og,it],Tl=Js(Su.data.acf,{relationships:Ci});await Ze.updatePerson(K,{acf:Tl})}}catch{}}r.invalidateQueries({queryKey:["person",t]}),K&&r.invalidateQueries({queryKey:["person",K]}),r.invalidateQueries({queryKey:["people"]})},Fle=async I=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:I,personId:t})},qle=async I=>{window.confirm("Are you sure you want to delete this note?")&&await u.mutateAsync({noteId:I,personId:t})},Lle=async(I,U="private")=>{try{await f.mutateAsync({personId:t,content:I,visibility:U}),$(!1)}catch{alert("Failed to create note. Please try again.")}},Ble=async I=>{try{Ke?(await m.mutateAsync({activityId:Ke.id,data:I,personId:t}),Ft(null)):(await p.mutateAsync({personId:t,data:I}),li&&(await v.mutateAsync({todoId:li.id,data:{content:li.content,due_date:li.due_date,is_completed:!0},personId:t}),Yo(null),Wh(null))),M(!1)}catch{alert("Failed to save activity. Please try again.")}},zle=async I=>{try{await g.mutateAsync({personId:t,data:I}),Y(!1),Ve(null)}catch{alert("Failed to create todo. Please try again.")}},Vle=async I=>{if(ye)try{await v.mutateAsync({todoId:ye.id,data:I,personId:t}),Y(!1),Ve(null)}catch{alert("Failed to update todo. Please try again.")}},MD=async I=>{if(!I.is_completed){Yo(I),yu(!0);return}try{await v.mutateAsync({todoId:I.id,data:{content:I.content,due_date:I.due_date,is_completed:!1},personId:t})}catch{alert("Failed to update todo. Please try again.")}},Wle=async()=>{if(li)try{await v.mutateAsync({todoId:li.id,data:{content:li.content,due_date:li.due_date,is_completed:!0},personId:t}),yu(!1),Yo(null)}catch{alert("Failed to complete todo. Please try again.")}},Ule=()=>{if(!li)return;const I=new Date().toISOString().split("T")[0];Wh({content:li.content,activity_date:I,activity_type:"note",participants:[]}),yu(!1),M(!0)},Hle=async I=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:I,personId:t})},AD=async I=>{window.confirm("Are you sure you want to delete this todo?")&&await b.mutateAsync({todoId:I,personId:t})},Kle=I=>{I.type==="todo"?(Ve(I),Y(!0)):I.type==="activity"&&(Ft(I),M(!0))},Gle=I=>{I.type==="note"?qle(I.id):I.type==="activity"?Hle(I.id):I.type==="todo"&&AD(I.id)},Yle=async I=>{var be;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const U=[...((be=n.acf)==null?void 0:be.work_history)||[]];U.splice(I,1);const K=Js(n.acf,{work_history:U});await h.mutateAsync({id:t,data:{acf:K}})},Qle=async I=>{var be,Ae,it;const U=(it=(Ae=(be=n==null?void 0:n._embedded)==null?void 0:be["wp:term"])==null?void 0:Ae.flat())==null?void 0:it.find(mt=>(mt==null?void 0:mt.taxonomy)==="person_label"&&(mt==null?void 0:mt.name)===I);if(!U)return;const K=zt.filter(mt=>mt!==U.id);await h.mutateAsync({id:t,data:{person_label:K}})},Xle=async()=>{if(!j)return;const I=Fe.find(K=>K.id.toString()===j);if(!I)return;const U=[...zt,I.id];await h.mutateAsync({id:t,data:{person_label:U}}),T(""),C(!1)},Jle=async I=>{var K;const U=(K=I.target.files)==null?void 0:K[0];if(U){if(!U.type.startsWith("image/")){alert("Please select an image file");return}if(U.size>5*1024*1024){alert("Image size must be less than 5MB");return}O(!0);try{await _e.uploadPersonPhoto(t,U),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch{alert("Failed to upload photo. Please try again.")}finally{O(!1),D.current&&(D.current.value="")}}},Zle=()=>{if(n)try{YEe(n,{companyMap:Hb,personDates:a||[]})}catch{alert("Failed to export vCard. Please try again.")}},DD=((GD=(KD=n==null?void 0:n.acf)==null?void 0:KD.work_history)==null?void 0:GD.map(I=>I.company).filter(Boolean))||[],ece=cy({queries:DD.map(I=>({queryKey:["company",I],queryFn:async()=>(await Ze.getCompany(I,{_embed:!0})).data,enabled:!!I}))}),tce=k.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?n.acf.work_history.filter(U=>!U.end_date&&U.company).map(U=>U.company):[]},[(YD=n==null?void 0:n.acf)==null?void 0:YD.work_history]),$D=cy({queries:tce.map(I=>({queryKey:["company-people",I],queryFn:async()=>{const U=await _e.getCompanyPeople(I);return{companyId:I,...U.data}},enabled:!!I}))}),tg=k.useMemo(()=>{const I=new Map;return $D.forEach(U=>{var K;(K=U.data)!=null&&K.current&&U.data.current.forEach(be=>{if(be.id!==parseInt(t))if(I.has(be.id)){const Ae=I.get(be.id);Ae.companies.includes(U.data.companyId)||Ae.companies.push(U.data.companyId)}else I.set(be.id,{...be,companies:[U.data.companyId]})})}),Array.from(I.values()).sort((U,K)=>(U.name||"").localeCompare(K.name||""))},[$D,t]),jl=((XD=(QD=n==null?void 0:n.acf)==null?void 0:QD.relationships)==null?void 0:XD.map(I=>I.related_person).filter(Boolean))||[],rg=cy({queries:jl.map(I=>({queryKey:["person-dates",I],queryFn:async()=>(await _e.getPersonDates(I)).data,enabled:!!I}))}),Ub=k.useMemo(()=>{const I={};return rg.forEach((U,K)=>{if(U.data&&jl[K]){const be=jl[K],Ae=U.data.find(it=>{const mt=Array.isArray(it.date_type)?it.date_type[0]:it.date_type;return(mt==null?void 0:mt.toLowerCase())==="birthday"});if(Ae!=null&&Ae.date_value){const it=new Date(Ae.date_value);I[be]=Dx(new Date,it)}else I[be]=-1}}),I},[rg,jl]),rce=k.useMemo(()=>{const I={};return rg.forEach((U,K)=>{if(U.data&&jl[K]){const be=jl[K],Ae=U.data.some(it=>{const mt=Array.isArray(it.date_type)?it.date_type[0]:it.date_type;return(mt==null?void 0:mt.toLowerCase())==="died"});I[be]=Ae}}),I},[rg,jl]),ng=k.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.relationships?[...n.acf.relationships].sort((U,K)=>{const be=Ub[U.related_person]??-1,Ae=Ub[K.related_person]??-1;return be===-1&&Ae===-1?0:be===-1?1:Ae===-1?-1:Ae-be}):[]},[(JD=n==null?void 0:n.acf)==null?void 0:JD.relationships,Ub]),Hb={};ece.forEach((I,U)=>{var K,be,Ae,it,mt,Ys,Ln,Qs,Uh;if(I.data){const sg=DD[U];Hb[sg]={name:cr(I.data),logo:((Ae=(be=(K=I.data._embedded)==null?void 0:K["wp:featuredmedia"])==null?void 0:be[0])==null?void 0:Ae.source_url)||((Uh=(Qs=(Ln=(Ys=(mt=(it=I.data._embedded)==null?void 0:it["wp:featuredmedia"])==null?void 0:mt[0])==null?void 0:Ys.media_details)==null?void 0:Ln.sizes)==null?void 0:Qs.thumbnail)==null?void 0:Uh.source_url)||null}}});const ig=k.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?[...n.acf.work_history].map((U,K)=>({...U,originalIndex:K})).sort((U,K)=>{if(U.is_current&&!K.is_current)return-1;if(!U.is_current&&K.is_current)return 1;const be=U.start_date?new Date(U.start_date):new Date(0);return(K.start_date?new Date(K.start_date):new Date(0))-be}):[]},[(ZD=n==null?void 0:n.acf)==null?void 0:ZD.work_history]),FD=k.useMemo(()=>o?o.filter(U=>U.type==="todo").sort((U,K)=>{if(U.is_completed&&!K.is_completed)return 1;if(!U.is_completed&&K.is_completed)return-1;if(!U.is_completed&&!K.is_completed){if(U.due_date&&K.due_date)return new Date(U.due_date)-new Date(K.due_date);if(U.due_date&&!K.due_date)return-1;if(!U.due_date&&K.due_date)return 1}return new Date(K.created)-new Date(U.created)}):[],[o]);if(k.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load person."}),c.jsx(Le,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const ft=n.acf||{},Kb=["facebook","linkedin","instagram","twitter","bluesky","threads","website"],nce=((e$=ft.contact_info)==null?void 0:e$.filter(I=>Kb.includes(I.contact_type)))||[],qD=(t$=ft.contact_info)==null?void 0:t$.find(I=>I.contact_type==="mobile"),LD={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,whatsapp:7,website:8},BD=(()=>{const I=[...nce];return qD&&I.push({contact_type:"whatsapp",contact_value:`https://wa.me/${qD.contact_value.replace(/[^0-9+]/g,"")}`}),I.sort((U,K)=>{const be=LD[U.contact_type]||99,Ae=LD[K.contact_type]||99;return be-Ae})})(),ice=I=>{switch(I){case"facebook":return wEe;case"linkedin":return QEe;case"instagram":return _Ee;case"twitter":return PEe;case"bluesky":return bEe;case"threads":return CEe;case"whatsapp":return TEe;case"website":return fy;default:return fy}},sce=I=>{switch(I){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"whatsapp":return"text-[#25D366]";case"website":return"text-gray-600";default:return"text-gray-600"}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(Le,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(ph,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:Zle,className:"btn-secondary",children:[c.jsx(fI,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),c.jsxs("button",{onClick:()=>Mr(!0),className:"btn-secondary",title:"Share",children:[c.jsx(jM,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Share"})]}),c.jsxs("button",{onClick:()=>ut(!0),className:"btn-secondary",children:[c.jsx(sre,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),c.jsxs("button",{onClick:jle,className:"btn-danger",children:[c.jsx(pn,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[c.jsxs("div",{className:"relative group",children:[n.thumbnail?c.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):c.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((r$=n.first_name)==null?void 0:r$[0])||"?"})}),c.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var I;return(I=D.current)==null?void 0:I.click()},children:P?c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):c.jsx(Kte,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),c.jsx("input",{ref:D,type:"file",accept:"image/*",onChange:Jle,className:"hidden",disabled:P})]}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,xu&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&c.jsx(zd,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),ft.nickname&&c.jsxs("p",{className:"text-gray-500",children:['"',ft.nickname,'"']}),xu&&bu&&c.jsxs("p",{className:"text-gray-500 text-sm inline-flex items-center flex-wrap",children:[no(ft.gender)&&c.jsx("span",{children:no(ft.gender)}),no(ft.gender)&&ft.pronouns&&c.jsx("span",{children:""}),ft.pronouns&&c.jsx("span",{children:ft.pronouns}),(no(ft.gender)||ft.pronouns)&&c.jsx("span",{children:""}),c.jsxs("span",{children:["Died ",kn(bu,Wb?"MMMM d":"MMMM d, yyyy"),wu!==null&&` at age ${wu}`]})]}),!xu&&(no(ft.gender)||ft.pronouns||wu!==null)&&c.jsxs("p",{className:"text-gray-500 text-sm inline-flex items-center flex-wrap",children:[no(ft.gender)&&c.jsx("span",{children:no(ft.gender)}),no(ft.gender)&&ft.pronouns&&c.jsx("span",{children:""}),ft.pronouns&&c.jsx("span",{children:ft.pronouns}),(no(ft.gender)||ft.pronouns)&&wu!==null&&c.jsx("span",{children:""}),wu!==null&&c.jsxs("span",{children:[wu," years old"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map((I,U)=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[I,c.jsx("button",{onClick:()=>Qle(I),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:c.jsx(gt,{className:"w-3 h-3"})})]},U)),N?c.jsxs("div",{className:"inline-flex items-center gap-2",children:[c.jsxs("select",{value:j,onChange:I=>T(I.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:ci.length===0,children:[c.jsx("option",{value:"",children:"Select a label..."}),ci.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]}),c.jsx("button",{onClick:Xle,disabled:!j,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),c.jsx("button",{onClick:()=>{C(!1),T("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):ci.length>0&&c.jsxs("button",{onClick:()=>C(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[c.jsx(sr,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),BD.length>0&&c.jsx("div",{className:"flex items-center gap-3 mt-4",children:BD.map((I,U)=>{const K=ice(I.contact_type),be=sce(I.contact_type);let Ae=I.contact_value;return Ae.match(/^https?:\/\//i)||(Ae=`https://${Ae}`),c.jsx("a",{href:Ae,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${be}`,title:`${I.contact_type.charAt(0).toUpperCase()+I.contact_type.slice(1)}: ${I.contact_value}`,children:c.jsx(K,{className:"w-5 h-5"})},U)})})]})]})]})}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("nav",{className:"flex gap-8",children:[c.jsx("button",{onClick:()=>E("profile"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${_==="profile"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Profile"}),c.jsx("button",{onClick:()=>E("timeline"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${_==="timeline"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Timeline"}),c.jsx("button",{onClick:()=>E("work"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${_==="work"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Work"})]})}),c.jsxs("div",{className:"space-y-6",children:[_==="profile"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[!xu&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Contact information"}),c.jsxs("button",{onClick:()=>pe(!0),className:"btn-secondary text-sm",children:[c.jsx(oa,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]}),((n$=ft.contact_info)==null?void 0:n$.filter(I=>!Kb.includes(I.contact_type)).length)>0?c.jsx("div",{className:"space-y-2",children:(()=>{const I={email:1,phone:2,mobile:2,slack:3,calendar:4,other:5};return ft.contact_info.filter(K=>!Kb.includes(K.contact_type)).map((K,be)=>({...K,originalIndex:be})).sort((K,be)=>{const Ae=I[K.contact_type]||99,it=I[be.contact_type]||99;return Ae!==it?Ae-it:K.originalIndex-be.originalIndex}).map(K=>{const be=K.contact_type==="email"?A0:K.contact_type==="phone"||K.contact_type==="mobile"?kM:K.contact_type==="slack"?NEe:K.contact_type==="calendar"?Fs:fy,Ae=K.contact_type==="email",it=K.contact_type==="phone"||K.contact_type==="mobile",mt=K.contact_type==="slack",Ys=K.contact_type==="calendar";let Ln=null,Qs=null;return Ae?Ln=`mailto:${K.contact_value}`:it?Ln=`tel:${Tle(K.contact_value)}`:(mt||Ys)&&(Ln=K.contact_value,Qs="_blank"),c.jsx("div",{children:c.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5",children:[c.jsx(be,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm text-gray-500",children:[K.contact_label||K.contact_type,": "]}),Ln?c.jsx("a",{href:Ln,target:Qs||void 0,rel:Qs==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:K.contact_value}):c.jsx("span",{children:K.contact_value})]})]})},K.originalIndex)})})()}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No contact information yet. ",c.jsx("button",{onClick:()=>pe(!0),className:"text-primary-600 hover:underline",children:"Add some"})]})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Important dates"}),c.jsx("button",{onClick:()=>{ne(null),oe(!0)},className:"btn-secondary text-sm",title:"Add important date",children:c.jsx(sr,{className:"w-4 h-4"})})]}),RD.length>0?c.jsx("div",{className:"space-y-3",children:RD.map(I=>{const U=Array.isArray(I.date_type)?I.date_type[0]:I.date_type,K=(U==null?void 0:U.toLowerCase())||"",be=K.includes("died"),Ae=K.includes("wedding")||K.includes("marriage")?tme:K.includes("birthday")?eme:Fs,it=I.year_unknown?"MMMM d":"MMMM d, yyyy";return c.jsxs("div",{className:"flex items-start group",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:be?c.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):c.jsx(Ae,{className:"w-4 h-4 text-gray-500"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:I.title}),c.jsx("p",{className:"text-xs text-gray-500",children:I.date_value&&kn(new Date(I.date_value),it)}),U&&c.jsx("p",{className:"text-xs text-gray-400 capitalize",children:U})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{ne(I),oe(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>Fle(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No important dates yet. ",c.jsx("button",{onClick:()=>{ne(null),oe(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),!xu&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Addresses"}),c.jsx("button",{onClick:()=>{xn(null),Nl(null),Pe(!0)},className:"btn-secondary text-sm",title:"Add address",children:c.jsx(sr,{className:"w-4 h-4"})})]}),((i$=ft.addresses)==null?void 0:i$.length)>0?c.jsx("div",{className:"space-y-3",children:ft.addresses.map((I,U)=>{const K=[I.street,[I.city,I.state,I.postal_code].filter(Boolean).join(", "),I.country].filter(Boolean),be=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(K.join(", "))}`;return c.jsxs("div",{className:"flex items-start group",children:[c.jsx(lme,{className:"w-4 h-4 text-gray-400 mt-1 mr-3 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[I.address_label&&c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:I.address_label}),c.jsx("a",{href:be,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:K.map((Ae,it)=>c.jsx("span",{className:"block",children:Ae},it))})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{xn(I),Nl(U),Pe(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>Dle(U),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},U)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No addresses yet. ",c.jsx("button",{onClick:()=>{xn(null),Nl(null),Pe(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),(ft.how_we_met||ft.met_date)&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),ft.met_date&&c.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[c.jsx(Fs,{className:"w-4 h-4 inline mr-1"}),kn(new Date(ft.met_date),"MMMM d, yyyy")]}),ft.how_we_met&&c.jsx("p",{className:"text-sm",children:ft.how_we_met})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Relationships"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Le,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"}),c.jsx("button",{onClick:()=>{he(null),Xe(null),me(!0)},className:"btn-secondary text-sm",title:"Add relationship",children:c.jsx(sr,{className:"w-4 h-4"})})]})]}),(ng==null?void 0:ng.length)>0?c.jsx("div",{className:"space-y-2",children:ng.map((I,U)=>{var be,Ae,it;const K=((Ae=(be=n==null?void 0:n.acf)==null?void 0:be.relationships)==null?void 0:Ae.findIndex(mt=>mt.related_person===I.related_person&&mt.relationship_type===I.relationship_type))??U;return c.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[c.jsxs(Le,{to:`/people/${I.related_person}`,className:"flex items-center flex-1 min-w-0",children:[I.person_thumbnail?c.jsx("img",{src:I.person_thumbnail,alt:Tn(I.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium text-gray-500",children:((it=Tn(I.person_name))==null?void 0:it[0])||"?"})}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium",children:[Tn(I.person_name)||`Person #${I.related_person}`,rce[I.related_person]&&c.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),c.jsx("p",{className:"text-xs text-gray-500",children:Tn(I.relationship_name||I.relationship_label)})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{var Ys,Ln;const mt=(Ln=(Ys=n==null?void 0:n.acf)==null?void 0:Ys.relationships)==null?void 0:Ln[K];he(mt),Xe(K),me(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>$le(K),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},U)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No relationships yet. ",c.jsx("button",{onClick:()=>{he(null),Xe(null),me(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]})]}),_==="timeline"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Todos"}),c.jsx("button",{onClick:()=>{Ve(null),Y(!0)},className:"btn-secondary text-sm",title:"Add todo",children:c.jsx(sr,{className:"w-4 h-4"})})]}),FD.length>0?c.jsx("div",{className:"space-y-2",children:FD.map(I=>{const U=hm(I);return c.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[c.jsx("button",{onClick:()=>MD(I),className:"mt-0.5 mr-2 flex-shrink-0",title:I.is_completed?"Mark as incomplete":"Mark as complete",children:I.is_completed?c.jsx(dI,{className:"w-5 h-5 text-primary-600"}):c.jsx(Bd,{className:`w-5 h-5 ${U?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${I.is_completed?"line-through text-gray-400":U?"text-red-600":""}`,children:I.content}),I.due_date&&c.jsxs("p",{className:`text-xs mt-0.5 ${U&&!I.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",kn(new Date(I.due_date),"MMM d, yyyy"),U&&!I.is_completed&&" (overdue)"]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{Ve(I),Y(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>AD(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):c.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Timeline"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>$(!0),className:"btn-secondary text-sm",title:"Add note",children:[c.jsx(OM,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Note"})]}),c.jsxs("button",{onClick:()=>M(!0),className:"btn-secondary text-sm",title:"Add activity",children:[c.jsx(D0,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),c.jsx(REe,{timeline:o||[],onEdit:Kle,onDelete:Gle,onToggleTodo:MD,personId:t,allPeople:w||[]})]})]}),_==="work"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Work history"}),c.jsx("button",{onClick:()=>{kl(null),Cl(null),de(!0)},className:"btn-secondary text-sm",title:"Add work history",children:c.jsx(sr,{className:"w-4 h-4"})})]}),(ig==null?void 0:ig.length)>0?c.jsx("div",{className:"space-y-4",children:ig.map((I,U)=>{const K=I.company?Hb[I.company]:null,be=I.originalIndex;return c.jsxs("div",{className:"flex items-start group",children:[K!=null&&K.logo?c.jsx("img",{src:K.logo,alt:K.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):c.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:c.jsx(Pr,{className:"w-10 h-10 text-gray-500"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium",children:I.job_title}),I.company&&K&&c.jsx(Le,{to:`/companies/${I.company}`,className:"text-sm text-primary-600 hover:underline",children:K.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[I.start_date&&kn(new Date(I.start_date),"MMM yyyy")," - ",I.is_current?"Present":I.end_date?kn(new Date(I.end_date),"MMM yyyy"):""]}),I.description&&c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.description})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{var it,mt;const Ae=(mt=(it=n==null?void 0:n.acf)==null?void 0:it.work_history)==null?void 0:mt[be];kl(Ae),Cl(be),de(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>Yle(be),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},be)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No work history yet. ",c.jsx("button",{onClick:()=>{kl(null),Cl(null),de(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),S.length>0&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Jy,{className:"w-5 h-5 mr-2"}),"Investments"]}),c.jsx("div",{className:"space-y-3",children:S.map(I=>c.jsxs(Le,{to:`/companies/${I.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[I.thumbnail?c.jsx("img",{src:I.thumbnail,alt:I.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):c.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(Pr,{className:"w-6 h-6 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:I.name}),I.industry&&c.jsx("p",{className:"text-xs text-gray-500",children:I.industry})]})]},I.id))})]}),tg.length>0&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Colleagues"}),c.jsxs("span",{className:"text-xs text-gray-500",children:[tg.length," ",tg.length===1?"colleague":"colleagues"]})]}),c.jsx("div",{className:"space-y-2",children:tg.map(I=>{var U;return c.jsxs(Le,{to:`/people/${I.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[I.thumbnail?c.jsx("img",{src:I.thumbnail,alt:I.name||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium text-gray-500",children:((U=I.name)==null?void 0:U[0])||"?"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:I.name}),I.job_title&&c.jsx("p",{className:"text-xs text-gray-500 truncate",children:I.job_title})]})]},I.id)})})]})]})]}),c.jsx(MEe,{isOpen:q,onClose:()=>$(!1),onSubmit:Lle,isLoading:f.isPending,isContactShared:((s$=n==null?void 0:n.acf)==null?void 0:s$._visibility)==="workspace"||((o$=n==null?void 0:n.acf)==null?void 0:o$._visibility)==="shared"}),c.jsx(kA,{isOpen:L,onClose:()=>{M(!1),Ft(null),Yo(null),Wh(null)},onSubmit:Ble,isLoading:Ke?m.isPending:p.isPending,personId:t,initialData:Vb,activity:Ke}),c.jsx(qM,{isOpen:zb,onClose:()=>{yu(!1),Yo(null)},todo:li,onComplete:Wle,onCompleteAsActivity:Ule}),c.jsx(jse,{isOpen:B,onClose:()=>{Y(!1),Ve(null)},onSubmit:ye?Vle:zle,isLoading:ye?v.isPending:g.isPending,todo:ye}),c.jsx(DEe,{isOpen:Q,onClose:()=>pe(!1),onSubmit:Ole,isLoading:Yr,contactInfo:ft.contact_info||[]}),c.jsx(FM,{isOpen:H,onClose:()=>{oe(!1),ne(null)},onSubmit:Ple,isLoading:ht,dateItem:Ee,personId:t,allPeople:w||[],isPeopleLoading:x}),c.jsx(FEe,{isOpen:je,onClose:()=>{me(!1),he(null),Xe(null)},onSubmit:Ile,isLoading:Ni,relationship:ge,personId:t,allPeople:w||[],isPeopleLoading:x}),c.jsx(qEe,{isOpen:qe,onClose:()=>{Pe(!1),xn(null),Nl(null)},onSubmit:Rle,isLoading:A,address:ki}),c.jsx(BEe,{isOpen:G,onClose:()=>{de(!1),kl(null),Cl(null)},onSubmit:Mle,isLoading:V,workHistoryItem:Bb}),c.jsx(DM,{isOpen:Oe,onClose:()=>ut(!1),onSubmit:Ale,isLoading:ee,person:n}),c.jsx(Tse,{isOpen:et,onClose:()=>Mr(!1),postType:"people",postId:n.id,postTitle:n.name||((a$=n.title)==null?void 0:a$.rendered)})]})}function JEe({company:t}){var e,r,n,i,s;return c.jsx(Le,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?c.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:cr(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):c.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(Pr,{className:"w-6 h-6 text-gray-400"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:cr(t)}),((i=t.acf)==null?void 0:i.industry)&&c.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&c.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function ZEe(){var C,j;const[t,e]=k.useState(""),[r,n]=k.useState(!1),[i,s]=k.useState("all"),[o,a]=k.useState(""),[l,u]=k.useState(!1),[d,h]=k.useState(!1),f=k.useRef(null),p=k.useRef(null),m=Fn(),{data:g=[]}=z0(),v=(C=window.prmConfig)==null?void 0:C.userId,{data:y,isLoading:b,error:w}=st({queryKey:["companies",t],queryFn:async()=>(await Ze.getCompanies({search:t,per_page:100,_embed:!0})).data}),x=hre({onSuccess:T=>{u(!1),m(`/companies/${T.id}`)}}),S=async T=>{h(!0);try{await x.mutateAsync(T)}finally{h(!1)}};k.useEffect(()=>{const T=P=>{p.current&&!p.current.contains(P.target)&&f.current&&!f.current.contains(P.target)&&n(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const _=i!=="all"||o,E=()=>{s("all"),a("")},N=k.useMemo(()=>{if(!y)return[];let T=[...y];return i==="mine"?T=T.filter(P=>P.author===v):i==="shared"&&(T=T.filter(P=>P.author!==v)),o&&(T=T.filter(P=>{var D;return(((D=P.acf)==null?void 0:D._assigned_workspaces)||[]).includes(parseInt(o))})),T.sort((P,O)=>{var $,L;const D=((($=P.title)==null?void 0:$.rendered)||P.title||"").toLowerCase(),q=(((L=O.title)==null?void 0:L.rendered)||O.title||"").toLowerCase();return D.localeCompare(q)})},[y,i,o,v]);return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"relative flex-1 min-w-48 max-w-md",children:[c.jsx(nl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:T=>e(T.target.value),className:"input pl-9"})]}),c.jsxs("div",{className:"relative",ref:f,children:[c.jsxs("button",{onClick:()=>n(!r),className:`btn-secondary ${_?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[c.jsx(wp,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Filter"}),_&&c.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:(i!=="all"?1:0)+(o?1:0)})]}),r&&c.jsx("div",{ref:p,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ownership"}),c.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Organizations"},{value:"mine",label:"My Organizations"},{value:"shared",label:"Shared with Me"}].map(T=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"radio",name:"ownership",value:T.value,checked:i===T.value,onChange:P=>s(P.target.value),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded-full mr-3 ${i===T.value?"border-primary-600":"border-gray-300"}`,children:i===T.value&&c.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})}),c.jsx("span",{className:"text-sm text-gray-700",children:T.label})]},T.value))})]}),g.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Workspace"}),c.jsxs("select",{value:o,onChange:T=>a(T.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All Workspaces"}),g.map(T=>c.jsx("option",{value:T.id,children:T.title},T.id))]})]}),_&&c.jsx("button",{onClick:E,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),_&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[i!=="all"&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[i==="mine"?"My Organizations":"Shared with Me",c.jsx("button",{onClick:()=>s("all"),className:"hover:text-primary-600",children:c.jsx(gt,{className:"w-3 h-3"})})]}),o&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[((j=g.find(T=>T.id===parseInt(o)))==null?void 0:j.title)||"Workspace",c.jsx("button",{onClick:()=>a(""),className:"hover:text-blue-600",children:c.jsx(gt,{className:"w-3 h-3"})})]})]}),c.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[c.jsx(sr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]})}),b&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),w&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!b&&!w&&(y==null?void 0:y.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Pr,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&c.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[c.jsx(sr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!b&&!w&&(y==null?void 0:y.length)>0&&(N==null?void 0:N.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(wp,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations match your filters"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),c.jsx("button",{onClick:E,className:"btn-secondary",children:"Clear filters"})]}),!b&&!w&&(N==null?void 0:N.length)>0&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(T=>c.jsx(JEe,{company:T},T.id))}),c.jsx($M,{isOpen:l,onClose:()=>u(!1),onSubmit:S,isLoading:d})]})}function eNe(){var T,P,O,D,q,$,L;const{id:t}=dh(),e=Fn(),r=rt(),n=k.useRef(null),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,u]=k.useState(!1),[d,h]=k.useState(!1),{data:f,isLoading:p,error:m}=st({queryKey:["company",t],queryFn:async()=>(await Ze.getCompany(t,{_embed:!0})).data}),{data:g}=st({queryKey:["company-people",t],queryFn:async()=>(await _e.getCompanyPeople(t)).data}),{data:v}=st({queryKey:["company",f==null?void 0:f.parent],queryFn:async()=>(await Ze.getCompany(f.parent,{_embed:!0})).data,enabled:!!(f!=null&&f.parent)}),{data:y=[]}=st({queryKey:["company-children",t],queryFn:async()=>(await Ze.getCompanies({parent:t,per_page:100,_embed:!0})).data}),b=((T=f==null?void 0:f.acf)==null?void 0:T.investors)||[],{data:w=[]}=st({queryKey:["company-investors",t,b],queryFn:async()=>{if(!b.length)return[];const[M,B]=await Promise.all([Ze.getPeople({per_page:100,include:b.join(","),_embed:!0}),Ze.getCompanies({per_page:100,include:b.join(","),_embed:!0})]),Y=(M.data||[]).map(H=>{var oe,je,me,qe;return{id:H.id,type:"person",name:Tn(((oe=H.title)==null?void 0:oe.rendered)||""),thumbnail:(qe=(me=(je=H._embedded)==null?void 0:je["wp:featuredmedia"])==null?void 0:me[0])==null?void 0:qe.source_url}}),Q=(B.data||[]).map(H=>{var oe,je,me;return{id:H.id,type:"company",name:cr(H),thumbnail:(me=(je=(oe=H._embedded)==null?void 0:oe["wp:featuredmedia"])==null?void 0:je[0])==null?void 0:me.source_url}}),pe=[...Y,...Q];return b.map(H=>pe.find(oe=>oe.id===H)).filter(Boolean)},enabled:b.length>0}),{data:x=[]}=st({queryKey:["investments",t],queryFn:async()=>(await _e.getInvestments(t)).data,enabled:!!t}),S=He({mutationFn:()=>Ze.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}}),_=He({mutationFn:M=>Ze.updateCompany(t,M),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["company-investors",t]}),r.invalidateQueries({queryKey:["dashboard"]})}});mh(cr(f)||"Organization"),k.useEffect(()=>{(f==null?void 0:f.status)==="trash"&&e("/companies",{replace:!0})},[f,e]);const E=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await S.mutateAsync()}catch{alert("Failed to delete organization. Please try again.")}},N=async M=>{h(!0);try{const B={title:M.title,parent:M.parentId||0,acf:{website:M.website,industry:M.industry,investors:M.investors||[]}};await _.mutateAsync(B),a(!1)}catch{alert("Failed to save organization. Please try again.")}finally{h(!1)}},C=async M=>{var Y;const B=(Y=M.target.files)==null?void 0:Y[0];if(B){if(!B.type.startsWith("image/")){alert("Please select an image file");return}if(B.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await _e.uploadCompanyLogo(t,B),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch{alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(p)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(m||!f)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),c.jsx(Le,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(f.status==="trash")return null;const j=f.acf||{};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(Le,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(ph,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>u(!0),className:"btn-secondary",title:"Share",children:[c.jsx(jM,{className:"w-4 h-4 mr-2"}),"Share"]}),c.jsxs("button",{onClick:()=>a(!0),className:"btn-secondary",children:[c.jsx(sre,{className:"w-4 h-4 mr-2"}),"Edit"]}),c.jsxs("button",{onClick:E,className:"btn-danger",children:[c.jsx(pn,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative group",children:[(D=(O=(P=f._embedded)==null?void 0:P["wp:featuredmedia"])==null?void 0:O[0])!=null&&D.source_url?c.jsx("img",{src:f._embedded["wp:featuredmedia"][0].source_url,alt:cr(f),className:"w-24 h-24 rounded-lg object-contain bg-white"}):c.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(Pr,{className:"w-12 h-12 text-gray-400"})}),c.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var M;return(M=n.current)==null?void 0:M.click()},children:i?c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):c.jsx(Kte,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),c.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:C,className:"hidden",disabled:i})]}),c.jsxs("div",{children:[v&&c.jsxs(Le,{to:`/companies/${v.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[c.jsx(s5,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",cr(v)]}),c.jsx("h1",{className:"text-2xl font-bold",children:cr(f)}),j.industry&&c.jsx("p",{className:"text-gray-500",children:j.industry}),j.website&&c.jsxs("a",{href:j.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[c.jsx(fy,{className:"w-4 h-4 mr-1"}),j.website]})]})]})}),y.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(s5,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:y.map(M=>{var B,Y,Q,pe;return c.jsxs(Le,{to:`/companies/${M.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(Q=(Y=(B=M._embedded)==null?void 0:B["wp:featuredmedia"])==null?void 0:Y[0])!=null&&Q.source_url?c.jsx("img",{src:M._embedded["wp:featuredmedia"][0].source_url,alt:cr(M),className:"w-10 h-10 rounded object-contain bg-white"}):c.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:c.jsx(Pr,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:cr(M)}),((pe=M.acf)==null?void 0:pe.industry)&&c.jsx("p",{className:"text-xs text-gray-500",children:M.acf.industry})]})]},M.id)})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(gn,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((q=g==null?void 0:g.current)==null?void 0:q.length)>0?c.jsx("div",{className:"space-y-2",children:g.current.map(M=>{var B;return c.jsxs(Le,{to:`/people/${M.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:((B=M.name)==null?void 0:B[0])||"?"})}),c.jsxs("div",{className:"ml-2",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),M.job_title&&c.jsx("p",{className:"text-xs text-gray-500",children:M.job_title})]})]},M.id)})}):c.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(gn,{className:"w-5 h-5 mr-2"}),"Former employees"]}),(($=g==null?void 0:g.former)==null?void 0:$.length)>0?c.jsx("div",{className:"space-y-2",children:g.former.map(M=>{var B;return c.jsxs(Le,{to:`/people/${M.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:c.jsx("span",{className:"text-xs text-gray-500",children:((B=M.name)==null?void 0:B[0])||"?"})}),c.jsxs("div",{className:"ml-2",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:M.name}),M.job_title&&c.jsx("p",{className:"text-xs text-gray-500",children:M.job_title})]})]},M.id)})}):c.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),w.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Jy,{className:"w-5 h-5 mr-2"}),"Investors"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:w.map(M=>{const B=M.type==="person",Y=B?`/people/${M.id}`:`/companies/${M.id}`;return c.jsxs(Le,{to:Y,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:M.name,loading:"lazy",className:`w-10 h-10 object-cover ${B?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${B?"rounded-full":"rounded"}`,children:B?c.jsx(il,{className:"w-5 h-5 text-gray-400"}):c.jsx(Pr,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),c.jsx("p",{className:"text-xs text-gray-500",children:B?"Person":"Organization"})]})]},`${M.type}-${M.id}`)})})]}),x.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Jy,{className:"w-5 h-5 mr-2"}),"Invested in"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:x.map(M=>c.jsxs(Le,{to:`/companies/${M.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:M.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):c.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:c.jsx(Pr,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),M.industry&&c.jsx("p",{className:"text-xs text-gray-500",children:M.industry})]})]},M.id))})]}),((L=j.contact_info)==null?void 0:L.length)>0&&c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),c.jsx("div",{className:"space-y-3",children:j.contact_info.map((M,B)=>c.jsxs("div",{children:[c.jsxs("span",{className:"text-sm text-gray-500",children:[M.contact_label||M.contact_type,":"]}),c.jsx("span",{className:"ml-2",children:M.contact_value})]},B))})]}),c.jsx($M,{isOpen:o,onClose:()=>a(!1),onSubmit:N,isLoading:d,company:f}),c.jsx(Tse,{isOpen:l,onClose:()=>u(!1),postType:"companies",postId:f.id,postTitle:cr(f)})]})}function tNe({person:t,dateType:e}){var r;return c.jsx("div",{className:"flex items-center gap-3 py-2",children:c.jsxs(Le,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),c.jsx("span",{className:"font-medium truncate",children:t.name}),c.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function rNe({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(u=>{i.push({person:u,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),c.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:c.jsx("span",{className:"text-2xl font-bold leading-none",children:kn(new Date(e.next_occurrence),"d")})}),c.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>c.jsx(tNe,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function nNe(){const[t,e]=k.useState(!1),[r,n]=k.useState(!1),{data:i,isLoading:s,error:o}=Rme(365),{data:a=[],isLoading:l}=Gc(),u=dre({onSuccess:()=>e(!1)}),d=async p=>{n(!0);try{await u.mutateAsync(p)}finally{n(!1)}},h=(i==null?void 0:i.reduce((p,m)=>{const g=kn(new Date(m.next_occurrence),"yyyy-MM-dd");return p[g]||(p[g]=[]),p[g].push(m),p},{}))||{},f=Object.entries(h).reduce((p,[m,g])=>{const v=kn(new Date(m),"MMMM yyyy");return p[v]||(p[v]=[]),p[v].push(g),p},{});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("p",{className:"text-gray-600",children:[(i==null?void 0:i.length)||0," upcoming dates"]}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(sr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),s&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),o&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!s&&!o&&(i==null?void 0:i.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx(Fs,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(sr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(f).map(([p,m])=>c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:p}),c.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:m.map(g=>c.jsx(rNe,{dates:g},g[0].next_occurrence))})]},p)),c.jsx(FM,{isOpen:t,onClose:()=>e(!1),onSubmit:d,isLoading:r,allPeople:a,isPeopleLoading:l})]})}function iNe(){mh("Todos");const[t,e]=k.useState(!1),[r,n]=k.useState(null),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,u]=k.useState(null),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[m,g]=k.useState(null),{data:v,isLoading:y}=pre(!0),b=mre(),w=Mme(),x=PM(),S=k.useMemo(()=>Lre(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:E,olderCompletedTodos:N}=k.useMemo(()=>{if(!v)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const $=[],L=[],M=[];return v.forEach(B=>{if(!B.is_completed)$.push(B);else try{const Y=Sp(B.created);Dye(Y,S)?L.push(B):M.push(B)}catch{M.push(B)}}),{incompleteTodos:$,recentlyCompletedTodos:L,olderCompletedTodos:M}},[v,S]),C=$=>{if(!$.is_completed){u($),h(!0);return}b.mutate({todoId:$.id,data:{content:$.content,due_date:$.due_date,is_completed:!1}})},j=()=>{l&&(b.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),u(null))},T=()=>{if(!l)return;const $=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:$,activity_type:"note",participants:[]}),h(!1),p(!0)},P=async $=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:$}),await b.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),u(null),g(null)}catch{alert("Failed to create activity. Please try again.")}},O=async $=>{r&&(await b.mutateAsync({todoId:r.id,data:$}),s(!1),n(null))},D=async $=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync($)};if(y)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const q=[...E,...N];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),c.jsxs("div",{className:"flex items-center gap-2",children:[N.length>0&&c.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[c.jsx(wp,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),c.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[c.jsx(sr,{className:"w-4 h-4"}),"Add todo"]})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Bd,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?c.jsx("div",{className:"divide-y divide-gray-100",children:_.map($=>c.jsx(m1,{todo:$,onToggle:C,onEdit:L=>{n(L),s(!0)},onDelete:D},$.id))}):c.jsxs("div",{className:"p-8 text-center",children:[c.jsx(qs,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500",children:"No open todos"}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),E.length>0&&!t&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Gte,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",E.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:E.map($=>c.jsx(m1,{todo:$,onToggle:C,onEdit:L=>{n(L),s(!0)},onDelete:D},$.id))})]}),t&&q.length>0&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(qs,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",q.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:q.map($=>c.jsx(m1,{todo:$,onToggle:C,onEdit:L=>{n(L),s(!0)},onDelete:D},$.id))})]}),c.jsx(jse,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:O,isLoading:b.isPending,todo:r}),c.jsx(gre,{isOpen:o,onClose:()=>a(!1)}),c.jsx(qM,{isOpen:d,onClose:()=>{h(!1),u(null)},todo:l,onComplete:j,onCompleteAsActivity:T}),c.jsx(kA,{isOpen:f,onClose:()=>{p(!1),u(null),g(null)},onSubmit:P,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function m1({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=hm(t);return c.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[c.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?c.jsx(qs,{className:"w-5 h-5 text-primary-600"}):c.jsx(Bd,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[c.jsxs(Le,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?c.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):c.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&c.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",kn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function sNe(){var y,b,w;const[t,e]=k.useState(null),[r,n]=k.useState(""),[i,s]=k.useState(!1),[o,a]=k.useState(null),l=rt(),u=He({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await X.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),d=He({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await X.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=k.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=k.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),u.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},v=()=>{e(null),n(""),a(null),u.reset(),d.reset()};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(jc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),c.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),c.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),c.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((y=d.data.stats.errors)==null?void 0:y.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>c.jsx("li",{children:x},S))})]})]}),c.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[c.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Do,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(cm,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Tc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&c.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(jc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[c.jsxs("p",{children:["Export format: ",o.version]}),c.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),c.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),c.jsxs("p",{children:["Notes: ",o.summary.notes]}),c.jsxs("p",{children:["Dates: ",o.summary.reminders]}),c.jsxs("p",{children:["Photos: ",o.summary.photos]}),c.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(NM,{className:"h-4 w-4 text-gray-400"})}),c.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&c.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),c.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Do,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Tc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(b=d.error.response)==null?void 0:b.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function oNe(){var g,v,y;const[t,e]=k.useState(null),[r,n]=k.useState(!1),[i,s]=k.useState(null),o=rt(),a=He({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await X.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{s(b)},onError:b=>{var w,x;s({valid:!1,error:((x=(w=b.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=He({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await X.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),u=k.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?n(!0):b.type==="dragleave"&&n(!1)},[]),d=k.useCallback(b=>{b.preventDefault(),b.stopPropagation(),n(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&f(b.dataTransfer.files[0])},[]),h=b=>{b.target.files&&b.target.files[0]&&f(b.target.files[0])},f=b=>{const w=b.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(b),s(null),l.reset(),a.mutate(b)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(jc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),c.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),c.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((b,w)=>c.jsx("li",{children:b},w))})]})]}),c.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:u,onDragLeave:u,onDragOver:u,onDrop:d,children:[c.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Do,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(cm,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Tc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&c.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(jc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(gn,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Pr,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Hte,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Zte,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(OM,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Do,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Tc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(v=l.error.response)==null?void 0:v.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function aNe(){var x,S,_;const[t,e]=k.useState(null),[r,n]=k.useState(!1),[i,s]=k.useState(null),[o,a]=k.useState({}),l=rt(),u=He({mutationFn:async E=>{const N=new FormData;return N.append("file",E),(await X.post("/prm/v1/import/google-contacts/validate",N,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:E=>{var N;if(s(E),((N=E.duplicates)==null?void 0:N.length)>0){const C={};E.duplicates.forEach(j=>{C[j.index]="merge"}),a(C)}},onError:E=>{var N,C;s({valid:!1,error:((C=(N=E.response)==null?void 0:N.data)==null?void 0:C.message)||"Failed to validate file"})}}),d=He({mutationFn:async({file:E,decisions:N})=>{const C=new FormData;return C.append("file",E),C.append("decisions",JSON.stringify(N)),(await X.post("/prm/v1/import/google-contacts",C,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=k.useCallback(E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?n(!0):E.type==="dragleave"&&n(!1)},[]),f=k.useCallback(E=>{E.preventDefault(),E.stopPropagation(),n(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&m(E.dataTransfer.files[0])},[]),p=E=>{E.target.files&&E.target.files[0]&&m(E.target.files[0])},m=E=>{if(!E.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(E),s(null),a({}),d.reset(),u.mutate(E)},g=(E,N)=>{a(C=>({...C,[E]:N}))},v=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),u.reset(),d.reset()},b=(i==null?void 0:i.duplicates)||[],w=b.length>0;return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),c.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[c.jsxs("li",{children:["Go to ",c.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),c.jsx("li",{children:'Click "Export" in the left sidebar'}),c.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(jc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),c.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),c.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((E,N)=>c.jsx("li",{children:E},N))})]})]}),c.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[c.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Do,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(EM,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Tc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&c.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(jc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(gn,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Pr,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Hte,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(OM,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Zte,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&c.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ute,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("h3",{className:"font-medium text-amber-900",children:[b.length," contact",b.length>1?"s":""," may already exist"]}),c.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),c.jsx("div",{className:"mt-4 space-y-4",children:b.map(E=>c.jsx(lNe,{duplicate:E,decision:o[E.index]||"merge",onDecision:N=>g(E.index,N)},E.index))})]})]})}),(i==null?void 0:i.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Do,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Tc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=d.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function lNe({duplicate:t,decision:e,onDecision:r}){var n,i;return c.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),c.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&c.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&c.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),c.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:c.jsx("span",{className:"text-lg",children:""})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),c.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?c.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&c.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&c.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(tre,{className:"h-4 w-4"}),"Update existing"]}),c.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx($0,{className:"h-4 w-4"}),"Create new"]}),c.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(fme,{className:"h-4 w-4"}),"Skip"]})]})]})}const cNe=[{id:"sync",label:"Sync",icon:jM},{id:"notifications",label:"Notifications",icon:Qpe},{id:"data",label:"Data",icon:Xte},{id:"admin",label:"Admin",icon:TM,adminOnly:!0},{id:"about",label:"About",icon:nme}];function uNe(){const[t,e]=qhe(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=Te=>{e({tab:Te})},a=cNe.filter(Te=>!Te.adminOnly||n),[l,u]=k.useState(""),[d,h]=k.useState(""),[f,p]=k.useState(!0),[m,g]=k.useState(!1),[v,y]=k.useState(!1),[b,w]=k.useState([]),[x,S]=k.useState(!0),[_,E]=k.useState(""),[N,C]=k.useState(!1),[j,T]=k.useState(null),[P,O]=k.useState(!1),[D,q]=k.useState(null),[$,L]=k.useState([]),[M,B]=k.useState(""),[Y,Q]=k.useState(!1),[pe,H]=k.useState(""),[oe,je]=k.useState("09:00"),[me,qe]=k.useState(!0),[Pe,G]=k.useState(!1),[de,Oe]=k.useState(!1),[ut,et]=k.useState(""),[Mr,Yr]=k.useState(!1),[Cr,ht]=k.useState([]),[ar,Ni]=k.useState([]),[Xt,A]=k.useState([]),[F,V]=k.useState(!1),[le,ee]=k.useState(!1),[Z,ye]=k.useState(!1),[Ve,Ke]=k.useState(""),[Ft,Ee]=k.useState(!1),[ne,ge]=k.useState("");k.useEffect(()=>{(async()=>{try{const Fe=await X.get("/prm/v1/user/ical-url");u(Fe.data.url),h(Fe.data.webcal_url)}catch{}finally{p(!1)}})()},[]),k.useEffect(()=>{i&&(async()=>{try{const[Fe,Ge]=await Promise.all([_e.getAppPasswords(i),_e.getCardDAVUrls()]);w(Fe.data||[]),q(Ge.data)}catch{}finally{S(!1)}})()},[i]);const he=async()=>{V(!0);try{const[Te,Fe]=await Promise.all([_e.getSlackChannels(),_e.getSlackTargets()]);ht(Te.data.channels||[]),Ni(Te.data.users||[]),A(Fe.data.targets||[])}catch{et("Failed to load Slack channels and users. Please try refreshing the page.")}finally{V(!1)}};k.useEffect(()=>{(async()=>{try{const Fe=await _e.getNotificationChannels();L(Fe.data.channels||["email"]),B(Fe.data.slack_webhook||""),je(Fe.data.notification_time||"09:00");const Ge=await _e.getSlackStatus(),zt=Ge.data.connected||!1;Q(zt),H(Ge.data.workspace_name||""),zt&&await he()}catch{}finally{qe(!1)}})()},[]),k.useEffect(()=>{Y&&he()},[Y]),k.useEffect(()=>{const Te=new URLSearchParams(window.location.search),Fe=Te.get("slack_connected"),Ge=Te.get("slack_error");Fe==="1"?(et("Slack connected successfully!"),o("notifications"),_e.getSlackStatus().then(zt=>{Q(zt.data.connected||!1),H(zt.data.workspace_name||"")}),e({tab:"notifications"})):Ge&&(et(`Slack connection failed: ${Ge}`),o("notifications"),e({tab:"notifications"}))},[]);const ke=async()=>{var Te,Fe;try{const Ge=await X.get("/prm/v1/slack/oauth/authorize");window.location.href=Ge.data.oauth_url}catch(Ge){alert(((Fe=(Te=Ge.response)==null?void 0:Te.data)==null?void 0:Fe.message)||"Failed to connect Slack")}},Xe=async()=>{var Te,Fe;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){Yr(!0);try{await _e.disconnectSlack(),Q(!1),H(""),ht([]),Ni([]),A([]),et("Slack disconnected successfully"),$.includes("slack")&&await Yo("slack")}catch(Ge){alert(((Fe=(Te=Ge.response)==null?void 0:Te.data)==null?void 0:Fe.message)||"Failed to disconnect Slack")}finally{Yr(!1)}}},ki=Te=>{const Fe=Xt.includes(Te)?Xt.filter(Ge=>Ge!==Te):[...Xt,Te];A(Fe)},xn=async()=>{var Te,Fe;ee(!0);try{await _e.updateSlackTargets(Xt),et("Notification targets saved successfully"),setTimeout(()=>et(""),3e3)}catch(Ge){alert(((Fe=(Te=Ge.response)==null?void 0:Te.data)==null?void 0:Fe.message)||"Failed to save notification targets")}finally{ee(!1)}},El=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch{}},Nl=async Te=>{var Fe,Ge;if(Te.preventDefault(),!!_.trim()){C(!0);try{const zt=await _e.createAppPassword(i,_.trim());T(zt.data.password),w([...b,zt.data]),E("")}catch(zt){alert(((Ge=(Fe=zt.response)==null?void 0:Fe.data)==null?void 0:Ge.message)||"Failed to create app password")}finally{C(!1)}}},Bb=async(Te,Fe)=>{var Ge,zt;if(confirm(`Are you sure you want to revoke the app password "${Fe}"? Any devices using this password will no longer be able to sync.`))try{await _e.deleteAppPassword(i,Te),w(b.filter(ci=>ci.uuid!==Te))}catch(ci){alert(((zt=(Ge=ci.response)==null?void 0:Ge.data)==null?void 0:zt.message)||"Failed to revoke app password")}},kl=async()=>{try{await navigator.clipboard.writeText(j),O(!0),setTimeout(()=>O(!1),2e3)}catch{}},Zm=async Te=>{try{await navigator.clipboard.writeText(Te)}catch{}},Cl=Te=>{if(!Te)return"Never";const Fe=new Date(Te);return Fe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:Fe.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},li=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){y(!0);try{const Te=await X.post("/prm/v1/user/regenerate-ical-token");u(Te.data.url),h(Te.data.webcal_url)}catch{}finally{y(!1)}}},Yo=async Te=>{var Ge,zt;const Fe=$.includes(Te)?$.filter(ci=>ci!==Te):[...$,Te];G(!0);try{await _e.updateNotificationChannels(Fe),L(Fe)}catch(ci){alert(((zt=(Ge=ci.response)==null?void 0:Ge.data)==null?void 0:zt.message)||"Failed to update notification channels")}finally{G(!1)}},zb=async Te=>{var eg,xs;const[Fe,Ge]=Te.split(":").map(Number),zt=Math.round(Ge/5)*5,ci=zt===60?(Fe+1)%24:Fe,Gs=zt===60?0:zt,vu=`${String(ci).padStart(2,"0")}:${String(Gs).padStart(2,"0")}`;je(vu),Oe(!0);try{await _e.updateNotificationTime(vu)}catch(bu){alert(((xs=(eg=bu.response)==null?void 0:eg.data)==null?void 0:xs.message)||"Failed to update notification time");const Wb=await _e.getNotificationChannels();je(Wb.data.notification_time||"09:00")}finally{Oe(!1)}},yu=async()=>{var Te,Fe;if(confirm("This will send reminder emails for all reminders due today. Continue?")){ye(!0),Ke("");try{const Ge=await _e.triggerReminders();Ke(Ge.data.message||"Reminders triggered successfully.")}catch(Ge){Ke(((Fe=(Te=Ge.response)==null?void 0:Te.data)==null?void 0:Fe.message)||"Failed to trigger reminders. Please check server logs.")}finally{ye(!1)}}},Vb=async()=>{var Te,Fe;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){Ee(!0),ge("");try{const Ge=await _e.rescheduleCronJobs();ge(Ge.data.message||"Cron jobs rescheduled successfully.")}catch(Ge){ge(((Fe=(Te=Ge.response)==null?void 0:Te.data)==null?void 0:Fe.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{Ee(!1)}}},Wh=()=>{switch(s){case"sync":return c.jsx(dNe,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:El,regenerateIcalToken:li,regenerating:v,appPasswords:b,appPasswordsLoading:x,carddavUrls:D,config:r,newPasswordName:_,setNewPasswordName:E,handleCreateAppPassword:Nl,creatingPassword:N,newPassword:j,setNewPassword:T,copyNewPassword:kl,passwordCopied:P,handleDeleteAppPassword:Bb,formatDate:Cl,copyCarddavUrl:Zm});case"notifications":return c.jsx(hNe,{notificationsLoading:me,notificationChannels:$,toggleChannel:Yo,savingChannels:Pe,slackConnected:Y,slackWorkspaceName:pe,handleConnectSlack:ke,handleDisconnectSlack:Xe,disconnectingSlack:Mr,webhookTestMessage:ut,slackChannels:Cr,slackUsers:ar,slackTargets:Xt,loadingSlackData:F,handleToggleSlackTarget:ki,handleSaveSlackTargets:xn,savingSlackTargets:le,slackWebhook:M,notificationTime:oe,handleNotificationTimeChange:zb,savingTime:de});case"data":return c.jsx(fNe,{});case"admin":return n?c.jsx(pNe,{handleTriggerReminders:yu,triggeringReminders:Z,reminderMessage:Ve,handleRescheduleCron:Vb,reschedulingCron:Ft,cronMessage:ne}):null;case"about":return c.jsx(mNe,{config:r});default:return null}};return c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(Te=>{const Fe=Te.icon,Ge=s===Te.id;return c.jsxs("button",{onClick:()=>o(Te.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${Ge?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[c.jsx(Fe,{className:"w-4 h-4"}),Te.label]},Te.id)})})}),c.jsx("div",{className:"space-y-6",children:Wh()})]})}function dNe({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:u,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:v,copyNewPassword:y,passwordCopied:b,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:_=>_.target.select()}),c.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("a",{href:e,className:"btn-primary",children:c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),c.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):c.jsxs("div",{className:"space-y-4",children:[u&&c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[c.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("input",{type:"text",readOnly:!0,value:u.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),c.jsx("button",{onClick:()=>S(u.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),c.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),c.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),c.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&c.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:_=>_.target.select()}),c.jsx("button",{onClick:y,className:"btn-primary whitespace-nowrap",children:b?"Copied!":"Copy"})]}),c.jsx("button",{onClick:()=>v(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),c.jsx("div",{className:"space-y-2",children:a.map(_=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm",children:_.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(_.created),"  Last used ",x(_.last_used)]})]}),c.jsx("button",{onClick:()=>w(_.uuid,_.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},_.uuid))})]}),a.length===0&&!g&&c.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function hNe({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:u,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:v,slackWebhook:y,notificationTime:b,handleNotificationTimeChange:w,savingTime:x}){return c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Email"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Slack"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsx("div",{children:i?c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&c.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),c.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),u&&c.jsx("p",{className:`text-sm ${u.includes("successfully")||u.includes("disconnected")?"text-green-600":"text-red-600"}`,children:u}),e.includes("slack")&&c.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[c.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?c.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):c.jsxs(c.Fragment,{children:[d.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(S=>c.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),c.jsx("span",{className:"text-sm",children:S.name})]},S.id))})]}),h.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(S=>c.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),c.jsxs("span",{className:"text-sm",children:[S.name,S.is_me&&c.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},S.id))})]}),d.length===0&&h.length===0&&!p&&c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),c.jsx("button",{onClick:g,disabled:v,className:"btn-primary text-sm mt-4",children:v?"Saving...":"Save targets"})]})]})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),u&&c.jsx("p",{className:`text-sm ${u.includes("successfully")?"text-green-600":"text-red-600"}`,children:u}),c.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),y&&!i&&c.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),c.jsxs("div",{children:[c.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),c.jsx("input",{type:"time",value:b,onChange:S=>w(S.target.value),className:"input",disabled:x,step:"300"}),b&&c.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[c.jsxs("p",{className:"text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"UTC:"})," ",b]}),c.jsxs("p",{className:"text-gray-700 mt-1",children:[c.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[S,_]=b.split(":"),E=new Date;return E.setUTCHours(parseInt(S),parseInt(_),0,0),E.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}})()]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]})}const JF=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:cm,component:oNe},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:EM,component:aNe},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:Xte,component:sNe}];function fNe(){var i;const[t,e]=k.useState("vcard"),r=s=>{s==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":s==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(i=JF.find(s=>s.id===t))==null?void 0:i.component;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:JF.map(s=>{const o=s.icon,a=t===s.id;return c.jsxs("button",{onClick:()=>e(s.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),c.jsxs("div",{className:"text-left",children:[c.jsx("span",{className:"block",children:s.name}),c.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:s.description})]})]},s.id)})})}),n&&c.jsx(n,{})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(cm,{className:"w-6 h-6 text-primary-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),c.jsx(fI,{className:"w-5 h-5 text-gray-400"})]}),c.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(EM,{className:"w-6 h-6 text-primary-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),c.jsx(fI,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function pNe({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),c.jsx("div",{className:"space-y-3",children:c.jsxs(Le,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[c.jsx("p",{className:"font-medium",children:"User approval"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),c.jsx("div",{className:"space-y-3",children:c.jsxs(Le,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[c.jsx("p",{className:"font-medium",children:"Relationship types"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("p",{className:"font-medium",children:"Trigger reminders"}),c.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&c.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),c.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),c.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&c.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function mNe({config:t}){return c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",Oc]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:c.jsxs("p",{className:"text-sm text-gray-600",children:[Oc," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:c.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function ZF({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=k.useState(""),[o,a]=k.useState(!1),l=k.useRef(null),u=k.useRef(null),d=k.useMemo(()=>r.sort((v,y)=>{const b=(v.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return b<w?-1:b>w?1:0}),[r]),h=k.useMemo(()=>{if(!i)return d.slice(0,10);const v=i.toLowerCase();return d.filter(y=>(y.name||"").toLowerCase().includes(v)).slice(0,10)},[d,i]),f=k.useMemo(()=>d.find(v=>v.id===parseInt(t,10)),[d,t]);k.useEffect(()=>{const v=y=>{u.current&&!u.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const p=v=>{e(v?v.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative",children:f&&!o?c.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[c.jsx("span",{children:g}),c.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:c.jsx(gt,{className:"w-4 h-4"})})]}):c.jsx("input",{ref:l,type:"text",value:i,onChange:v=>{s(v.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&c.jsx("div",{ref:u,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:c.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(v=>c.jsx("button",{type:"button",onClick:()=>p(v.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===v.id.toString()?"bg-primary-50":""}`,children:v.name},v.id))]}):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function gNe(){mh("Relationship Types - Settings");const t=rt();if(!((window.prmConfig||{}).isAdmin||!1))return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx(nre,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),c.jsx(Le,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=st({queryKey:["relationship-types"],queryFn:async()=>(await Ze.getRelationshipTypes()).data}),[s,o]=k.useState(null),[a,l]=k.useState(""),[u,d]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState(""),[g,v]=k.useState(!1),y=He({mutationFn:async({id:T,name:P,inverseId:O})=>{const D={name:P};return O&&(D.acf={inverse_relationship_type:parseInt(O,10)}),Ze.updateRelationshipType(T,D)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),b=He({mutationFn:async({name:T,inverseId:P})=>{const O={name:T};return P&&(O.acf={inverse_relationship_type:parseInt(P,10)}),Ze.createRelationshipType(O)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),v(!1)}}),w=He({mutationFn:T=>Ze.deleteRelationshipType(T),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=He({mutationFn:()=>Ze.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return c.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):c.jsx(rre,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=T=>{var O;o(T.id),l(T.name);const P=(O=T.acf)==null?void 0:O.inverse_relationship_type;d(P?P.toString():"")},E=()=>{o(null),l(""),d("")},N=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:u||null})},C=()=>{if(!h.trim()){alert("Name is required");return}b.mutate({name:h.trim(),inverseId:p||null})},j=(T,P)=>{window.confirm(`Are you sure you want to delete "${P}"? This cannot be undone.`)&&w.mutate(T)};return i?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):c.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),c.jsx("div",{className:"flex gap-2",children:!g&&c.jsxs(c.Fragment,{children:[c.jsx(S,{}),c.jsxs("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[c.jsx(sr,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&c.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[c.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Name *"}),c.jsx("input",{type:"text",value:h,onChange:T=>f(T.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Inverse Relationship Type"}),c.jsx(ZF,{value:p,onChange:m,relationshipTypes:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:C,disabled:b.isPending,className:"btn-primary flex items-center gap-2",children:[b.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(o5,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Save"})]}),c.jsx("button",{onClick:()=>{v(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),c.jsx("div",{className:"space-y-2",children:n.length===0?c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(T=>{var $,L;const P=s===T.id,O=($=T.acf)==null?void 0:$.inverse_relationship_type,D=typeof O=="object"&&(O!=null&&O.ID)?O.ID:typeof O=="object"&&(O!=null&&O.id)?O.id:O,q=D?n.find(M=>M.id===D):null;return c.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:P?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Name *"}),c.jsx("input",{type:"text",value:a,onChange:M=>l(M.target.value),className:"input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Inverse Relationship Type"}),c.jsx(ZF,{value:u,onChange:d,relationshipTypes:n,currentTypeId:T.id}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:N,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(o5,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Save"})]}),c.jsxs("button",{onClick:E,className:"btn-secondary flex items-center gap-2",children:[c.jsx(gt,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium",children:T.name}),q&&c.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",c.jsx("span",{className:"font-medium",children:q.name})]}),!q&&((L=T.acf)==null?void 0:L.inverse_relationship_type)===null&&c.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>_(T),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:c.jsx(dme,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>j(T.id,T.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:c.jsx(pn,{className:"w-4 h-4"})})]})]})},T.id)})})]})})}function yNe(){mh("User Approval - Settings");const t=rt();if(!((window.prmConfig||{}).isAdmin||!1))return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx(nre,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),c.jsx(Le,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=st({queryKey:["users"],queryFn:async()=>(await _e.getUsers()).data}),s=He({mutationFn:p=>_e.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=He({mutationFn:p=>_e.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=He({mutationFn:p=>_e.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},u=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx(Do,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(Le,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[c.jsx(ph,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),c.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),c.jsxs("div",{className:"space-y-6",children:[h.length>0&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),c.jsx("div",{className:"space-y-3",children:h.map(p=>c.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:p.name}),c.jsx("p",{className:"text-sm text-gray-500",children:p.email}),c.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[c.jsx(i5,{className:"w-4 h-4"}),"Approve"]}),c.jsxs("button",{onClick:()=>u(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[c.jsx(pI,{className:"w-4 h-4"}),"Deny"]}),c.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[c.jsx(pn,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),c.jsx("div",{className:"space-y-3",children:f.map(p=>c.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,c.jsx(i5,{className:"w-4 h-4 text-green-600"})]}),c.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>u(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[c.jsx(pI,{className:"w-4 h-4"}),"Revoke Access"]}),c.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[c.jsx(pn,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&c.jsx("div",{className:"card p-8 text-center",children:c.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var e3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g1={exports:{}},t3={},df,r3;function _r(){if(r3)return df;r3=1;var t=function(e){return e&&e.Math===Math&&e};return df=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof e3=="object"&&e3)||t(typeof df=="object"&&df)||function(){return this}()||Function("return this")(),df}var y1,n3;function St(){return n3||(n3=1,y1=function(t){try{return!!t()}catch{return!0}}),y1}var v1,i3;function ym(){if(i3)return v1;i3=1;var t=St();return v1=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),v1}var b1,s3;function ob(){if(s3)return b1;s3=1;var t=ym(),e=Function.prototype,r=e.apply,n=e.call;return b1=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),b1}var x1,o3;function Ct(){if(o3)return x1;o3=1;var t=ym(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return x1=t?n:function(i){return function(){return r.apply(i,arguments)}},x1}var w1,a3;function Vo(){if(a3)return w1;a3=1;var t=Ct(),e=t({}.toString),r=t("".slice);return w1=function(n){return r(e(n),8,-1)},w1}var S1,l3;function Ose(){if(l3)return S1;l3=1;var t=Vo(),e=Ct();return S1=function(r){if(t(r)==="Function")return e(r)},S1}var _1,c3;function Vr(){if(c3)return _1;c3=1;var t=typeof document=="object"&&document.all;return _1=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},_1}var E1={},N1,u3;function Er(){if(u3)return N1;u3=1;var t=St();return N1=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),N1}var k1,d3;function si(){if(d3)return k1;d3=1;var t=ym(),e=Function.prototype.call;return k1=t?e.bind(e):function(){return e.apply(e,arguments)},k1}var C1={},h3;function CA(){if(h3)return C1;h3=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return C1.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,C1}var j1,f3;function vm(){return f3||(f3=1,j1=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),j1}var T1,p3;function ab(){if(p3)return T1;p3=1;var t=Ct(),e=St(),r=Vo(),n=Object,i=t("".split);return T1=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,T1}var O1,m3;function bm(){return m3||(m3=1,O1=function(t){return t==null}),O1}var P1,g3;function Jc(){if(g3)return P1;g3=1;var t=bm(),e=TypeError;return P1=function(r){if(t(r))throw new e("Can't call method on "+r);return r},P1}var I1,y3;function Us(){if(y3)return I1;y3=1;var t=ab(),e=Jc();return I1=function(r){return t(e(r))},I1}var R1,v3;function qn(){if(v3)return R1;v3=1;var t=Vr();return R1=function(e){return typeof e=="object"?e!==null:t(e)},R1}var M1,b3;function Rr(){return b3||(b3=1,M1={}),M1}var A1,x3;function Si(){if(x3)return A1;x3=1;var t=Rr(),e=_r(),r=Vr(),n=function(i){return r(i)?i:void 0};return A1=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},A1}var D1,w3;function Wr(){if(w3)return D1;w3=1;var t=Ct();return D1=t({}.isPrototypeOf),D1}var $1,S3;function yh(){if(S3)return $1;S3=1;var t=_r(),e=t.navigator,r=e&&e.userAgent;return $1=r?String(r):"",$1}var F1,_3;function xm(){if(_3)return F1;_3=1;var t=_r(),e=yh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),F1=a,F1}var q1,E3;function vh(){if(E3)return q1;E3=1;var t=xm(),e=St(),r=_r(),n=r.String;return q1=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),q1}var L1,N3;function Pse(){if(N3)return L1;N3=1;var t=vh();return L1=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",L1}var B1,k3;function wm(){if(k3)return B1;k3=1;var t=Si(),e=Vr(),r=Wr(),n=Pse(),i=Object;return B1=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},B1}var z1,C3;function bh(){if(C3)return z1;C3=1;var t=String;return z1=function(e){try{return t(e)}catch{return"Object"}},z1}var V1,j3;function Wo(){if(j3)return V1;j3=1;var t=Vr(),e=bh(),r=TypeError;return V1=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},V1}var W1,T3;function jA(){if(T3)return W1;T3=1;var t=Wo(),e=bm();return W1=function(r,n){var i=r[n];return e(i)?void 0:t(i)},W1}var U1,O3;function vNe(){if(O3)return U1;O3=1;var t=si(),e=Vr(),r=qn(),n=TypeError;return U1=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},U1}var H1={exports:{}},K1,P3;function xh(){return P3||(P3=1,K1=!0),K1}var G1,I3;function bNe(){if(I3)return G1;I3=1;var t=_r(),e=Object.defineProperty;return G1=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},G1}var R3;function TA(){if(R3)return H1.exports;R3=1;var t=xh(),e=_r(),r=bNe(),n="__core-js_shared__",i=H1.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),H1.exports}var Y1,M3;function wh(){if(M3)return Y1;M3=1;var t=TA();return Y1=function(e,r){return t[e]||(t[e]=r||{})},Y1}var Q1,A3;function vs(){if(A3)return Q1;A3=1;var t=Jc(),e=Object;return Q1=function(r){return e(t(r))},Q1}var X1,D3;function Ur(){if(D3)return X1;D3=1;var t=Ct(),e=vs(),r=t({}.hasOwnProperty);return X1=Object.hasOwn||function(i,s){return r(e(i),s)},X1}var J1,$3;function lb(){if($3)return J1;$3=1;var t=Ct(),e=0,r=Math.random(),n=t(1.1.toString);return J1=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},J1}var Z1,F3;function Hr(){if(F3)return Z1;F3=1;var t=_r(),e=wh(),r=Ur(),n=lb(),i=vh(),s=Pse(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Z1=function(u){return r(a,u)||(a[u]=i&&r(o,u)?o[u]:l("Symbol."+u)),a[u]},Z1}var ew,q3;function Ise(){if(q3)return ew;q3=1;var t=si(),e=qn(),r=wm(),n=jA(),i=vNe(),s=Hr(),o=TypeError,a=s("toPrimitive");return ew=function(l,u){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(u===void 0&&(u="default"),h=t(d,l,u),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return u===void 0&&(u="number"),i(l,u)},ew}var tw,L3;function OA(){if(L3)return tw;L3=1;var t=Ise(),e=wm();return tw=function(r){var n=t(r,"string");return e(n)?n:n+""},tw}var rw,B3;function Rse(){if(B3)return rw;B3=1;var t=_r(),e=qn(),r=t.document,n=e(r)&&e(r.createElement);return rw=function(i){return n?r.createElement(i):{}},rw}var nw,z3;function Mse(){if(z3)return nw;z3=1;var t=Er(),e=St(),r=Rse();return nw=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),nw}var V3;function cb(){if(V3)return E1;V3=1;var t=Er(),e=si(),r=CA(),n=vm(),i=Us(),s=OA(),o=Ur(),a=Mse(),l=Object.getOwnPropertyDescriptor;return E1.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},E1}var iw,W3;function xNe(){if(W3)return iw;W3=1;var t=St(),e=Vr(),r=/#|\.prototype\./,n=function(l,u){var d=s[i(l)];return d===a?!0:d===o?!1:e(u)?t(u):!!u},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return iw=n,iw}var sw,U3;function ub(){if(U3)return sw;U3=1;var t=Ose(),e=Wo(),r=ym(),n=t(t.bind);return sw=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},sw}var ow={},aw,H3;function Ase(){if(H3)return aw;H3=1;var t=Er(),e=St();return aw=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),aw}var lw,K3;function Uo(){if(K3)return lw;K3=1;var t=qn(),e=String,r=TypeError;return lw=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},lw}var G3;function Gi(){if(G3)return ow;G3=1;var t=Er(),e=Mse(),r=Ase(),n=Uo(),i=OA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",d="writable";return ow.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:u in m?m[u]:g[u],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},ow}var cw,Y3;function Sh(){if(Y3)return cw;Y3=1;var t=Er(),e=Gi(),r=vm();return cw=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},cw}var uw,Q3;function We(){if(Q3)return uw;Q3=1;var t=_r(),e=ob(),r=Ose(),n=Vr(),i=cb().f,s=xNe(),o=Rr(),a=ub(),l=Sh(),u=Ur(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return uw=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,E,N,C,j,T,P;for(E in f)x=s(m?E:p+(g?".":"#")+E,h.forced),S=!x&&y&&u(y,E),C=b[E],S&&(h.dontCallGetSet?(P=i(y,E),j=P&&P.value):j=y[E]),N=S&&j?j:f[E],!(!x&&!v&&typeof C==typeof N)&&(h.bind&&S?T=a(N,t):h.wrap&&S?T=d(N):v&&n(N)?T=r(N):T=N,(h.sham||N&&N.sham||C&&C.sham)&&l(T,"sham",!0),l(b,E,T),v&&(_=p+"Prototype",u(o,_)||l(o,_,{}),l(o[_],E,N),h.real&&w&&(x||!w[E])&&l(w,E,N)))},uw}var X3;function wNe(){if(X3)return t3;X3=1;var t=We(),e=Er(),r=Gi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),t3}var J3;function SNe(){if(J3)return g1.exports;J3=1,wNe();var t=Rr(),e=t.Object,r=g1.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),g1.exports}var dw,Z3;function Dse(){if(Z3)return dw;Z3=1;var t=SNe();return dw=t,dw}var hw,eq;function _Ne(){if(eq)return hw;eq=1;var t=Dse();return hw=t,hw}var fw,tq;function ENe(){if(tq)return fw;tq=1;var t=_Ne();return fw=t,fw}var pw,rq;function NNe(){return rq||(rq=1,pw=ENe()),pw}var kNe=NNe(),CNe=ot(kNe),nq={},mw,iq;function Zc(){if(iq)return mw;iq=1;var t=Vo();return mw=Array.isArray||function(r){return t(r)==="Array"},mw}var gw,sq;function jNe(){if(sq)return gw;sq=1;var t=Math.ceil,e=Math.floor;return gw=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},gw}var yw,oq;function _h(){if(oq)return yw;oq=1;var t=jNe();return yw=function(e){var r=+e;return r!==r||r===0?0:t(r)},yw}var vw,aq;function $se(){if(aq)return vw;aq=1;var t=_h(),e=Math.min;return vw=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},vw}var bw,lq;function gl(){if(lq)return bw;lq=1;var t=$se();return bw=function(e){return t(e.length)},bw}var xw,cq;function Fse(){if(cq)return xw;cq=1;var t=TypeError,e=9007199254740991;return xw=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},xw}var ww,uq;function db(){if(uq)return ww;uq=1;var t=Er(),e=Gi(),r=vm();return ww=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},ww}var Sw,dq;function PA(){if(dq)return Sw;dq=1;var t=Hr(),e=t("toStringTag"),r={};return r[e]="z",Sw=String(r)==="[object z]",Sw}var _w,hq;function yl(){if(hq)return _w;hq=1;var t=PA(),e=Vr(),r=Vo(),n=Hr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,u){try{return l[u]}catch{}};return _w=t?r:function(l){var u,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(u=s(l),i))=="string"?d:o?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},_w}var Ew,fq;function TNe(){if(fq)return Ew;fq=1;var t=Ct(),e=Vr(),r=TA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),Ew=r.inspectSource,Ew}var Nw,pq;function qse(){if(pq)return Nw;pq=1;var t=Ct(),e=St(),r=Vr(),n=yl(),i=Si(),s=TNe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(l,s(m))}catch{return!0}};return f.sham=!0,Nw=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,Nw}var kw,mq;function ONe(){if(mq)return kw;mq=1;var t=Zc(),e=qse(),r=qn(),n=Hr(),i=n("species"),s=Array;return kw=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},kw}var Cw,gq;function IA(){if(gq)return Cw;gq=1;var t=ONe();return Cw=function(e,r){return new(t(e))(r===0?0:r)},Cw}var jw,yq;function Sm(){if(yq)return jw;yq=1;var t=St(),e=Hr(),r=xm(),n=e("species");return jw=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},jw}var vq;function Lse(){if(vq)return nq;vq=1;var t=We(),e=St(),r=Zc(),n=qn(),i=vs(),s=gl(),o=Fse(),a=db(),l=IA(),u=Sm(),d=Hr(),h=xm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,E,N,C;for(S=-1,E=arguments.length;S<E;S++)if(C=S===-1?b:arguments[S],m(C))for(N=s(C),o(x+N),_=0;_<N;_++,x++)_ in C&&a(w,x,C[_]);else o(x+1),a(w,x++,C);return w.length=x,w}}),nq}var bq={},xq={},Tw,wq;function vl(){if(wq)return Tw;wq=1;var t=yl(),e=String;return Tw=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},Tw}var Ow={},Pw,Sq;function RA(){if(Sq)return Pw;Sq=1;var t=_h(),e=Math.max,r=Math.min;return Pw=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},Pw}var Iw,_q;function PNe(){if(_q)return Iw;_q=1;var t=Us(),e=RA(),r=gl(),n=function(i){return function(s,o,a){var l=t(s),u=r(l);if(u===0)return!i&&-1;var d=e(a,u),h;if(i&&o!==o){for(;u>d;)if(h=l[d++],h!==h)return!0}else for(;u>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return Iw={includes:n(!0),indexOf:n(!1)},Iw}var Rw,Eq;function _m(){return Eq||(Eq=1,Rw={}),Rw}var Mw,Nq;function Bse(){if(Nq)return Mw;Nq=1;var t=Ct(),e=Ur(),r=Us(),n=PNe().indexOf,i=_m(),s=t([].push);return Mw=function(o,a){var l=r(o),u=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>u;)e(l,h=a[u++])&&(~n(d,h)||s(d,h));return d},Mw}var Aw,kq;function MA(){return kq||(kq=1,Aw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Aw}var Dw,Cq;function hb(){if(Cq)return Dw;Cq=1;var t=Bse(),e=MA();return Dw=Object.keys||function(n){return t(n,e)},Dw}var jq;function AA(){if(jq)return Ow;jq=1;var t=Er(),e=Ase(),r=Gi(),n=Uo(),i=Us(),s=hb();return Ow.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var u=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],u[p]);return a},Ow}var $w,Tq;function INe(){if(Tq)return $w;Tq=1;var t=Si();return $w=t("document","documentElement"),$w}var Fw,Oq;function fb(){if(Oq)return Fw;Oq=1;var t=wh(),e=lb(),r=t("keys");return Fw=function(n){return r[n]||(r[n]=e(n))},Fw}var qw,Pq;function Em(){if(Pq)return qw;Pq=1;var t=Uo(),e=AA(),r=MA(),n=_m(),i=INe(),s=Rse(),o=fb(),a=">",l="<",u="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[u][r[b]];return y()};return n[h]=!0,qw=Object.create||function(w,x){var S;return w!==null?(f[u]=t(w),S=new f,f[u]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},qw}var Lw={},Iq;function pb(){if(Iq)return Lw;Iq=1;var t=Bse(),e=MA(),r=e.concat("length","prototype");return Lw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},Lw}var Bw={},zw,Rq;function Eh(){if(Rq)return zw;Rq=1;var t=Ct();return zw=t([].slice),zw}var Mq;function zse(){if(Mq)return Bw;Mq=1;var t=Vo(),e=Us(),r=pb().f,n=Eh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return Bw.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},Bw}var Vw={},Aq;function mb(){return Aq||(Aq=1,Vw.f=Object.getOwnPropertySymbols),Vw}var Ww,Dq;function Nm(){if(Dq)return Ww;Dq=1;var t=Sh();return Ww=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},Ww}var Uw,$q;function DA(){if($q)return Uw;$q=1;var t=Gi();return Uw=function(e,r,n){return t.f(e,r,n)},Uw}var Hw={},Fq;function gb(){if(Fq)return Hw;Fq=1;var t=Hr();return Hw.f=t,Hw}var Kw,qq;function Yt(){if(qq)return Kw;qq=1;var t=Rr(),e=Ur(),r=gb(),n=Gi().f;return Kw=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},Kw}var Gw,Lq;function Vse(){if(Lq)return Gw;Lq=1;var t=si(),e=Si(),r=Hr(),n=Nm();return Gw=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},Gw}var Yw,Bq;function RNe(){if(Bq)return Yw;Bq=1;var t=PA(),e=yl();return Yw=t?{}.toString:function(){return"[object "+e(this)+"]"},Yw}var Qw,zq;function eu(){if(zq)return Qw;zq=1;var t=PA(),e=Gi().f,r=Sh(),n=Ur(),i=RNe(),s=Hr(),o=s("toStringTag");return Qw=function(a,l,u,d){var h=u?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},Qw}var Xw,Vq;function MNe(){if(Vq)return Xw;Vq=1;var t=_r(),e=Vr(),r=t.WeakMap;return Xw=e(r)&&/native code/.test(String(r)),Xw}var Jw,Wq;function km(){if(Wq)return Jw;Wq=1;var t=MNe(),e=_r(),r=qn(),n=Sh(),i=Ur(),s=TA(),o=fb(),a=_m(),l="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new u("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new u(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new u(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return Jw={set:h,get:f,has:p,enforce:m,getterFor:g},Jw}var Zw,Uq;function Nh(){if(Uq)return Zw;Uq=1;var t=ub(),e=Ct(),r=ab(),n=vs(),i=gl(),s=IA(),o=e([].push),a=function(l){var u=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),E=t(y,b),N=0,C=w||s,j=u?C(v,_):d||m?C(v,0):void 0,T,P;_>N;N++)if((g||N in S)&&(T=S[N],P=E(T,N,x),l))if(u)j[N]=P;else if(P)switch(l){case 3:return!0;case 5:return T;case 6:return N;case 2:o(j,T)}else switch(l){case 4:return!1;case 7:o(j,T)}return p?-1:h||f?f:j}};return Zw={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},Zw}var Hq;function ANe(){if(Hq)return xq;Hq=1;var t=We(),e=_r(),r=si(),n=Ct(),i=xh(),s=Er(),o=vh(),a=St(),l=Ur(),u=Wr(),d=Uo(),h=Us(),f=OA(),p=vl(),m=vm(),g=Em(),v=hb(),y=pb(),b=zse(),w=mb(),x=cb(),S=Gi(),_=AA(),E=CA(),N=Nm(),C=DA(),j=wh(),T=fb(),P=_m(),O=lb(),D=Hr(),q=gb(),$=Yt(),L=Vse(),M=eu(),B=km(),Y=Nh().forEach,Q=T("hidden"),pe="Symbol",H="prototype",oe=B.set,je=B.getterFor(pe),me=Object[H],qe=e.Symbol,Pe=qe&&qe[H],G=e.RangeError,de=e.TypeError,Oe=e.QObject,ut=x.f,et=S.f,Mr=b.f,Yr=E.f,Cr=n([].push),ht=j("symbols"),ar=j("op-symbols"),Ni=j("wks"),Xt=!Oe||!Oe[H]||!Oe[H].findChild,A=function(Ee,ne,ge){var he=ut(me,ne);he&&delete me[ne],et(Ee,ne,ge),he&&Ee!==me&&et(me,ne,he)},F=s&&a(function(){return g(et({},"a",{get:function(){return et(this,"a",{value:7}).a}})).a!==7})?A:et,V=function(Ee,ne){var ge=ht[Ee]=g(Pe);return oe(ge,{type:pe,tag:Ee,description:ne}),s||(ge.description=ne),ge},le=function(ne,ge,he){ne===me&&le(ar,ge,he),d(ne);var ke=f(ge);return d(he),l(ht,ke)?(he.enumerable?(l(ne,Q)&&ne[Q][ke]&&(ne[Q][ke]=!1),he=g(he,{enumerable:m(0,!1)})):(l(ne,Q)||et(ne,Q,m(1,g(null))),ne[Q][ke]=!0),F(ne,ke,he)):et(ne,ke,he)},ee=function(ne,ge){d(ne);var he=h(ge),ke=v(he).concat(Ft(he));return Y(ke,function(Xe){(!s||r(ye,he,Xe))&&le(ne,Xe,he[Xe])}),ne},Z=function(ne,ge){return ge===void 0?g(ne):ee(g(ne),ge)},ye=function(ne){var ge=f(ne),he=r(Yr,this,ge);return this===me&&l(ht,ge)&&!l(ar,ge)?!1:he||!l(this,ge)||!l(ht,ge)||l(this,Q)&&this[Q][ge]?he:!0},Ve=function(ne,ge){var he=h(ne),ke=f(ge);if(!(he===me&&l(ht,ke)&&!l(ar,ke))){var Xe=ut(he,ke);return Xe&&l(ht,ke)&&!(l(he,Q)&&he[Q][ke])&&(Xe.enumerable=!0),Xe}},Ke=function(ne){var ge=Mr(h(ne)),he=[];return Y(ge,function(ke){!l(ht,ke)&&!l(P,ke)&&Cr(he,ke)}),he},Ft=function(Ee){var ne=Ee===me,ge=Mr(ne?ar:h(Ee)),he=[];return Y(ge,function(ke){l(ht,ke)&&(!ne||l(me,ke))&&Cr(he,ht[ke])}),he};return o||(qe=function(){if(u(Pe,this))throw new de("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),ge=O(ne),he=function(ke){var Xe=this===void 0?e:this;Xe===me&&r(he,ar,ke),l(Xe,Q)&&l(Xe[Q],ge)&&(Xe[Q][ge]=!1);var ki=m(1,ke);try{F(Xe,ge,ki)}catch(xn){if(!(xn instanceof G))throw xn;A(Xe,ge,ki)}};return s&&Xt&&F(me,ge,{configurable:!0,set:he}),V(ge,ne)},Pe=qe[H],N(Pe,"toString",function(){return je(this).tag}),N(qe,"withoutSetter",function(Ee){return V(O(Ee),Ee)}),E.f=ye,S.f=le,_.f=ee,x.f=Ve,y.f=b.f=Ke,w.f=Ft,q.f=function(Ee){return V(D(Ee),Ee)},s&&(C(Pe,"description",{configurable:!0,get:function(){return je(this).description}}),i||N(me,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:qe}),Y(v(Ni),function(Ee){$(Ee)}),t({target:pe,stat:!0,forced:!o},{useSetter:function(){Xt=!0},useSimple:function(){Xt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Z,defineProperty:le,defineProperties:ee,getOwnPropertyDescriptor:Ve}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ke}),L(),M(qe,pe),P[Q]=!0,xq}var Kq={},eS,Gq;function Wse(){if(Gq)return eS;Gq=1;var t=vh();return eS=t&&!!Symbol.for&&!!Symbol.keyFor,eS}var Yq;function DNe(){if(Yq)return Kq;Yq=1;var t=We(),e=Si(),r=Ur(),n=vl(),i=wh(),s=Wse(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var u=n(l);if(r(o,u))return o[u];var d=e("Symbol")(u);return o[u]=d,a[d]=u,d}}),Kq}var Qq={},Xq;function $Ne(){if(Xq)return Qq;Xq=1;var t=We(),e=Ur(),r=wm(),n=bh(),i=wh(),s=Wse(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),Qq}var Jq={},tS,Zq;function FNe(){if(Zq)return tS;Zq=1;var t=Ct(),e=Zc(),r=Vr(),n=Vo(),i=vl(),s=t([].push);return tS=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],u=0;u<a;u++){var d=o[u];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},tS}var eL;function Use(){if(eL)return Jq;eL=1;var t=We(),e=Si(),r=ob(),n=si(),i=Ct(),s=St(),o=Vr(),a=wm(),l=Eh(),u=FNe(),d=vh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var C=e("Symbol")("stringify detection");return f([C])!=="[null]"||f({a:C})!=="{}"||f(Object(C))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),E=function(C,j){var T=l(arguments),P=u(j);if(!(!o(P)&&(C===void 0||a(C))))return T[1]=function(O,D){if(o(P)&&(D=n(P,this,h(O),D)),!a(D))return D},r(f,null,T)},N=function(C,j,T){var P=m(T,j-1),O=m(T,j+1);return p(w,C)&&!p(x,O)||p(x,C)&&!p(w,P)?"\\u"+y(g(C,0),16):C};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(j,T,P){var O=l(arguments),D=r(S?E:f,null,O);return _&&typeof D=="string"?v(D,b,N):D}}),Jq}var tL={},rL;function qNe(){if(rL)return tL;rL=1;var t=We(),e=vh(),r=St(),n=mb(),i=vs(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),tL}var nL;function Hse(){return nL||(nL=1,ANe(),DNe(),$Ne(),Use(),qNe()),bq}var iL={},sL;function Kse(){if(sL)return iL;sL=1;var t=Yt();return t("asyncDispose"),iL}var oL={},aL;function LNe(){if(aL)return oL;aL=1;var t=Yt();return t("asyncIterator"),oL}var lL={},cL;function Gse(){if(cL)return lL;cL=1;var t=Yt();return t("dispose"),lL}var uL={},dL;function BNe(){if(dL)return uL;dL=1;var t=Yt();return t("hasInstance"),uL}var hL={},fL;function zNe(){if(fL)return hL;fL=1;var t=Yt();return t("isConcatSpreadable"),hL}var pL={},mL;function Yse(){if(mL)return pL;mL=1;var t=Yt();return t("iterator"),pL}var gL={},yL;function VNe(){if(yL)return gL;yL=1;var t=Yt();return t("match"),gL}var vL={},bL;function WNe(){if(bL)return vL;bL=1;var t=Yt();return t("matchAll"),vL}var xL={},wL;function UNe(){if(wL)return xL;wL=1;var t=Yt();return t("replace"),xL}var SL={},_L;function HNe(){if(_L)return SL;_L=1;var t=Yt();return t("search"),SL}var EL={},NL;function KNe(){if(NL)return EL;NL=1;var t=Yt();return t("species"),EL}var kL={},CL;function GNe(){if(CL)return kL;CL=1;var t=Yt();return t("split"),kL}var jL={},TL;function Qse(){if(TL)return jL;TL=1;var t=Yt(),e=Vse();return t("toPrimitive"),e(),jL}var OL={},PL;function YNe(){if(PL)return OL;PL=1;var t=Si(),e=Yt(),r=eu();return e("toStringTag"),r(t("Symbol"),"Symbol"),OL}var IL={},RL;function QNe(){if(RL)return IL;RL=1;var t=Yt();return t("unscopables"),IL}var ML={},AL;function XNe(){if(AL)return ML;AL=1;var t=_r(),e=eu();return e(t.JSON,"JSON",!0),ML}var rS,DL;function JNe(){if(DL)return rS;DL=1,Lse(),Hse(),Kse(),LNe(),Gse(),BNe(),zNe(),Yse(),VNe(),WNe(),UNe(),HNe(),KNe(),GNe(),Qse(),YNe(),QNe(),XNe();var t=Rr();return rS=t.Symbol,rS}var $L={},nS,FL;function ZNe(){return FL||(FL=1,nS=function(){}),nS}var iS,qL;function kh(){return qL||(qL=1,iS={}),iS}var sS,LL;function eke(){if(LL)return sS;LL=1;var t=Er(),e=Ur(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return sS={EXISTS:i,PROPER:s,CONFIGURABLE:o},sS}var oS,BL;function tke(){if(BL)return oS;BL=1;var t=St();return oS=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),oS}var aS,zL;function Xse(){if(zL)return aS;zL=1;var t=Ur(),e=Vr(),r=vs(),n=fb(),i=tke(),s=n("IE_PROTO"),o=Object,a=o.prototype;return aS=i?o.getPrototypeOf:function(l){var u=r(l);if(t(u,s))return u[s];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof o?a:null},aS}var lS,VL;function Jse(){if(VL)return lS;VL=1;var t=St(),e=Vr(),r=qn(),n=Em(),i=Xse(),s=Nm(),o=Hr(),a=xh(),l=o("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),lS={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},lS}var cS,WL;function rke(){if(WL)return cS;WL=1;var t=Jse().IteratorPrototype,e=Em(),r=vm(),n=eu(),i=kh(),s=function(){return this};return cS=function(o,a,l,u){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!u,l)}),n(o,d,!1,!0),i[d]=s,o},cS}var uS,UL;function nke(){if(UL)return uS;UL=1;var t=Ct(),e=Wo();return uS=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},uS}var dS,HL;function ike(){if(HL)return dS;HL=1;var t=qn();return dS=function(e){return t(e)||e===null},dS}var hS,KL;function ske(){if(KL)return hS;KL=1;var t=ike(),e=String,r=TypeError;return hS=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},hS}var fS,GL;function oke(){if(GL)return fS;GL=1;var t=nke(),e=qn(),r=Jc(),n=ske();return fS=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,u){return r(l),n(u),e(l)&&(i?o(l,u):l.__proto__=u),l}}():void 0),fS}var pS,YL;function $A(){if(YL)return pS;YL=1;var t=We(),e=si(),r=xh(),n=eke(),i=Vr(),s=rke(),o=Xse(),a=oke(),l=eu(),u=Sh(),d=Nm(),h=Hr(),f=kh(),p=Jse(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return pS=function(E,N,C,j,T,P,O){s(C,N,j);var D=function(oe){if(oe===T&&B)return B;if(!y&&oe&&oe in L)return L[oe];switch(oe){case w:return function(){return new C(this,oe)};case x:return function(){return new C(this,oe)};case S:return function(){return new C(this,oe)}}return function(){return new C(this)}},q=N+" Iterator",$=!1,L=E.prototype,M=L[b]||L["@@iterator"]||T&&L[T],B=!y&&M||D(T),Y=N==="Array"&&L.entries||M,Q,pe,H;if(Y&&(Q=o(Y.call(new E)),Q!==Object.prototype&&Q.next&&(!r&&o(Q)!==v&&(a?a(Q,v):i(Q[b])||d(Q,b,_)),l(Q,q,!0,!0),r&&(f[q]=_))),m&&T===x&&M&&M.name!==x&&(!r&&g?u(L,"name",x):($=!0,B=function(){return e(M,this)})),T)if(pe={values:D(x),keys:P?B:D(w),entries:D(S)},O)for(H in pe)(y||$||!(H in L))&&d(L,H,pe[H]);else t({target:N,proto:!0,forced:y||$},pe);return(!r||O)&&L[b]!==B&&d(L,b,B,{name:T}),f[N]=B,pe},pS}var mS,QL;function FA(){return QL||(QL=1,mS=function(t,e){return{value:t,done:e}}),mS}var gS,XL;function bl(){if(XL)return gS;XL=1;var t=Us(),e=ZNe(),r=kh(),n=km(),i=Gi().f,s=$A(),o=FA(),a=xh(),l=Er(),u="Array Iterator",d=n.set,h=n.getterFor(u);gS=s(Array,"Array",function(p,m){d(this,{type:u,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return gS}var yS,JL;function ake(){return JL||(JL=1,yS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),yS}var ZL;function xl(){if(ZL)return $L;ZL=1,bl();var t=ake(),e=_r(),r=eu(),n=kh();for(var i in t)r(e[i],i),n[i]=n.Array;return $L}var vS,eB;function Zse(){if(eB)return vS;eB=1;var t=JNe();return xl(),vS=t,vS}var tB={},rB;function lke(){if(rB)return tB;rB=1;var t=Hr(),e=Gi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),tB}var nB={},iB;function cke(){return iB||(iB=1,Kse()),nB}var sB={},oB;function uke(){return oB||(oB=1,Gse()),sB}var aB={},lB;function dke(){if(lB)return aB;lB=1;var t=Yt();return t("metadata"),aB}var bS,cB;function hke(){if(cB)return bS;cB=1;var t=Zse();return lke(),cke(),uke(),dke(),bS=t,bS}var uB={},xS,dB;function eoe(){if(dB)return xS;dB=1;var t=Si(),e=Ct(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return xS=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},xS}var hB;function fke(){if(hB)return uB;hB=1;var t=We(),e=eoe();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),uB}var fB={},wS,pB;function toe(){if(pB)return wS;pB=1;for(var t=wh(),e=Si(),r=Ct(),n=wm(),i=Hr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),u=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return wS=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(u),w=b.length;y<w;y++)if(u[b[y]]==v)return!0}catch{}return!1},wS}var mB;function pke(){if(mB)return fB;mB=1;var t=We(),e=toe();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),fB}var gB={},yB;function mke(){if(yB)return gB;yB=1;var t=Yt();return t("customMatcher"),gB}var vB={},bB;function gke(){if(bB)return vB;bB=1;var t=Yt();return t("observable"),vB}var xB={},wB;function yke(){if(wB)return xB;wB=1;var t=We(),e=eoe();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),xB}var SB={},_B;function vke(){if(_B)return SB;_B=1;var t=We(),e=toe();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),SB}var EB={},NB;function bke(){if(NB)return EB;NB=1;var t=Yt();return t("matcher"),EB}var kB={},CB;function xke(){if(CB)return kB;CB=1;var t=Yt();return t("metadataKey"),kB}var jB={},TB;function wke(){if(TB)return jB;TB=1;var t=Yt();return t("patternMatch"),jB}var OB={},PB;function Ske(){if(PB)return OB;PB=1;var t=Yt();return t("replaceAll"),OB}var SS,IB;function _ke(){if(IB)return SS;IB=1;var t=hke();return fke(),pke(),mke(),gke(),yke(),vke(),bke(),xke(),wke(),Ske(),SS=t,SS}var _S,RB;function Eke(){return RB||(RB=1,_S=_ke()),_S}var Nke=Eke(),zg=ot(Nke),MB={},ES,AB;function kke(){if(AB)return ES;AB=1;var t=Ct(),e=_h(),r=vl(),n=Jc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return ES={codeAt:a(!1),charAt:a(!0)},ES}var DB;function yb(){if(DB)return MB;DB=1;var t=kke().charAt,e=vl(),r=km(),n=$A(),i=FA(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var u=a(this),d=u.string,h=u.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),u.index+=f.length,i(f,!1))}),MB}var NS,$B;function Cke(){if($B)return NS;$B=1,bl(),yb(),Yse();var t=gb();return NS=t.f("iterator"),NS}var kS,FB;function roe(){if(FB)return kS;FB=1;var t=Cke();return xl(),kS=t,kS}var CS,qB;function jke(){if(qB)return CS;qB=1;var t=roe();return CS=t,CS}var jS,LB;function Tke(){if(LB)return jS;LB=1;var t=jke();return jS=t,jS}var TS,BB;function Oke(){return BB||(BB=1,TS=Tke()),TS}var Pke=Oke(),Ike=ot(Pke);function Mp(t){"@babel/helpers - typeof";return Mp=typeof zg=="function"&&typeof Ike=="symbol"?function(e){return typeof e}:function(e){return e&&typeof zg=="function"&&e.constructor===zg&&e!==zg.prototype?"symbol":typeof e},Mp(t)}var OS,zB;function Rke(){if(zB)return OS;zB=1,Qse();var t=gb();return OS=t.f("toPrimitive"),OS}var PS,VB;function Mke(){if(VB)return PS;VB=1;var t=Rke();return PS=t,PS}var IS,WB;function Ake(){if(WB)return IS;WB=1;var t=Mke();return IS=t,IS}var RS,UB;function Dke(){if(UB)return RS;UB=1;var t=Ake();return RS=t,RS}var MS,HB;function $ke(){return HB||(HB=1,MS=Dke()),MS}var Fke=$ke(),qke=ot(Fke);function Lke(t,e){if(Mp(t)!="object"||!t)return t;var r=t[qke];if(r!==void 0){var n=r.call(t,e);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bke(t){var e=Lke(t,"string");return Mp(e)=="symbol"?e:e+""}function Ya(t,e,r){return(e=Bke(e))in t?CNe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var KB={},AS,GB;function zke(){if(GB)return AS;GB=1;var t=Ct(),e=Wo(),r=qn(),n=Ur(),i=Eh(),s=ym(),o=Function,a=t([].concat),l=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";u[f]=o("C,a","return new C("+l(m,",")+")")}return u[f](h,p)};return AS=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},AS}var YB;function Vke(){if(YB)return KB;YB=1;var t=We(),e=zke();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),KB}var DS,QB;function oi(){if(QB)return DS;QB=1;var t=_r(),e=Rr();return DS=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},DS}var $S,XB;function Wke(){if(XB)return $S;XB=1,Vke();var t=oi();return $S=t("Function","bind"),$S}var FS,JB;function Uke(){if(JB)return FS;JB=1;var t=Wr(),e=Wke(),r=Function.prototype;return FS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},FS}var qS,ZB;function Hke(){if(ZB)return qS;ZB=1;var t=Uke();return qS=t,qS}var LS,e6;function Kke(){return e6||(e6=1,LS=Hke()),LS}var Gke=Kke(),noe=ot(Gke),t6={},BS,r6;function Yke(){if(r6)return BS;r6=1;var t=Wo(),e=vs(),r=ab(),n=gl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,u,d,h){var f=e(l),p=r(f),m=n(f);if(t(u),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=u(h,p[g],g,f));return h}};return BS={left:o(!1),right:o(!0)},BS}var zS,n6;function vb(){if(n6)return zS;n6=1;var t=St();return zS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},zS}var VS,i6;function ioe(){if(i6)return VS;i6=1;var t=_r(),e=yh(),r=Vo(),n=function(i){return e.slice(0,i.length)===i};return VS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),VS}var WS,s6;function Qke(){if(s6)return WS;s6=1;var t=ioe();return WS=t==="NODE",WS}var o6;function Xke(){if(o6)return t6;o6=1;var t=We(),e=Yke().left,r=vb(),n=xm(),i=Qke(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),t6}var US,a6;function Jke(){if(a6)return US;a6=1,Xke();var t=oi();return US=t("Array","reduce"),US}var HS,l6;function Zke(){if(l6)return HS;l6=1;var t=Wr(),e=Jke(),r=Array.prototype;return HS=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},HS}var KS,c6;function e2e(){if(c6)return KS;c6=1;var t=Zke();return KS=t,KS}var GS,u6;function t2e(){return u6||(u6=1,GS=e2e()),GS}var r2e=t2e(),n2e=ot(r2e),d6={},h6;function i2e(){if(h6)return d6;h6=1;var t=We(),e=Nh().filter,r=Sm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),d6}var YS,f6;function s2e(){if(f6)return YS;f6=1,i2e();var t=oi();return YS=t("Array","filter"),YS}var QS,p6;function o2e(){if(p6)return QS;p6=1;var t=Wr(),e=s2e(),r=Array.prototype;return QS=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},QS}var XS,m6;function a2e(){if(m6)return XS;m6=1;var t=o2e();return XS=t,XS}var JS,g6;function l2e(){return g6||(g6=1,JS=a2e()),JS}var c2e=l2e(),Qu=ot(c2e),y6={},v6;function u2e(){if(v6)return y6;v6=1;var t=We(),e=Nh().map,r=Sm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),y6}var ZS,b6;function d2e(){if(b6)return ZS;b6=1,u2e();var t=oi();return ZS=t("Array","map"),ZS}var e_,x6;function h2e(){if(x6)return e_;x6=1;var t=Wr(),e=d2e(),r=Array.prototype;return e_=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},e_}var t_,w6;function f2e(){if(w6)return t_;w6=1;var t=h2e();return t_=t,t_}var r_,S6;function p2e(){return S6||(S6=1,r_=f2e()),r_}var m2e=p2e(),as=ot(m2e),n_,_6;function g2e(){return _6||(_6=1,n_=Zse()),n_}var y2e=g2e(),v2e=ot(y2e),E6={},N6;function b2e(){if(N6)return E6;N6=1;var t=We(),e=Zc(),r=qse(),n=qn(),i=RA(),s=gl(),o=Us(),a=db(),l=Hr(),u=Sm(),d=Eh(),h=u("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,E,N;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(E=new(_===void 0?p:_)(m(S-x,0)),N=0;x<S;x++,N++)x in b&&a(E,N,b[x]);return E.length=N,E}}),E6}var i_,k6;function x2e(){if(k6)return i_;k6=1,b2e();var t=oi();return i_=t("Array","slice"),i_}var s_,C6;function w2e(){if(C6)return s_;C6=1;var t=Wr(),e=x2e(),r=Array.prototype;return s_=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},s_}var o_,j6;function S2e(){if(j6)return o_;j6=1;var t=w2e();return o_=t,o_}var a_,T6;function _2e(){return T6||(T6=1,a_=S2e()),a_}var E2e=_2e(),N2e=ot(E2e),O6={},l_,P6;function soe(){if(P6)return l_;P6=1;var t=Si(),e=Ct(),r=pb(),n=mb(),i=Uo(),s=e([].concat);return l_=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),u=n.f;return u?s(l,u(a)):l},l_}var I6;function k2e(){if(I6)return O6;I6=1;var t=We(),e=soe();return t({target:"Reflect",stat:!0},{ownKeys:e}),O6}var c_,R6;function C2e(){if(R6)return c_;R6=1,k2e();var t=Rr();return c_=t.Reflect.ownKeys,c_}var u_,M6;function j2e(){if(M6)return u_;M6=1;var t=C2e();return u_=t,u_}var d_,A6;function T2e(){return A6||(A6=1,d_=j2e()),d_}var O2e=T2e(),P2e=ot(O2e),D6={},$6;function I2e(){if($6)return D6;$6=1;var t=We(),e=Zc();return t({target:"Array",stat:!0},{isArray:e}),D6}var h_,F6;function R2e(){if(F6)return h_;F6=1,I2e();var t=Rr();return h_=t.Array.isArray,h_}var f_,q6;function M2e(){if(q6)return f_;q6=1;var t=R2e();return f_=t,f_}var p_,L6;function A2e(){return L6||(L6=1,p_=M2e()),p_}var D2e=A2e(),Cs=ot(D2e),B6={},z6;function $2e(){if(z6)return B6;z6=1;var t=We(),e=vs(),r=hb(),n=St(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),B6}var m_,V6;function F2e(){if(V6)return m_;V6=1,$2e();var t=Rr();return m_=t.Object.keys,m_}var g_,W6;function q2e(){if(W6)return g_;W6=1;var t=F2e();return g_=t,g_}var y_,U6;function L2e(){return U6||(U6=1,y_=q2e()),y_}var B2e=L2e(),qA=ot(B2e),H6={},v_,K6;function z2e(){if(K6)return v_;K6=1;var t=Nh().forEach,e=vb(),r=e("forEach");return v_=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},v_}var G6;function V2e(){if(G6)return H6;G6=1;var t=We(),e=z2e();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),H6}var b_,Y6;function W2e(){if(Y6)return b_;Y6=1,V2e();var t=oi();return b_=t("Array","forEach"),b_}var x_,Q6;function U2e(){if(Q6)return x_;Q6=1;var t=W2e();return x_=t,x_}var w_,X6;function H2e(){if(X6)return w_;X6=1;var t=yl(),e=Ur(),r=Wr(),n=U2e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return w_=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},w_}var S_,J6;function K2e(){return J6||(J6=1,S_=H2e()),S_}var G2e=K2e(),$c=ot(G2e),Z6={},ez;function Y2e(){if(ez)return Z6;ez=1;var t=We(),e=Ct(),r=Zc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),Z6}var __,tz;function Q2e(){if(tz)return __;tz=1,Y2e();var t=oi();return __=t("Array","reverse"),__}var E_,rz;function X2e(){if(rz)return E_;rz=1;var t=Wr(),e=Q2e(),r=Array.prototype;return E_=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},E_}var N_,nz;function J2e(){if(nz)return N_;nz=1;var t=X2e();return N_=t,N_}var k_,iz;function Z2e(){return iz||(iz=1,k_=J2e()),k_}var eCe=Z2e(),tCe=ot(eCe),sz={},C_,oz;function rCe(){if(oz)return C_;oz=1;var t=Er(),e=Zc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return C_=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},C_}var j_,az;function ooe(){if(az)return j_;az=1;var t=bh(),e=TypeError;return j_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},j_}var lz;function nCe(){if(lz)return sz;lz=1;var t=We(),e=vs(),r=RA(),n=_h(),i=gl(),s=rCe(),o=Fse(),a=IA(),l=db(),u=ooe(),d=Sm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,E,N,C,j;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),E=a(y,_),N=0;N<_;N++)C=w+N,C in y&&l(E,N,y[C]);if(E.length=_,S<_){for(N=w;N<b-_;N++)C=N+_,j=N+S,C in y?y[j]=y[C]:u(y,j);for(N=b;N>b-_+S;N--)u(y,N-1)}else if(S>_)for(N=b-_;N>w;N--)C=N+_-1,j=N+S-1,C in y?y[j]=y[C]:u(y,j);for(N=0;N<S;N++)y[N+w]=arguments[N+2];return s(y,b-_+S),E}}),sz}var T_,cz;function iCe(){if(cz)return T_;cz=1,nCe();var t=oi();return T_=t("Array","splice"),T_}var O_,uz;function sCe(){if(uz)return O_;uz=1;var t=Wr(),e=iCe(),r=Array.prototype;return O_=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},O_}var P_,dz;function oCe(){if(dz)return P_;dz=1;var t=sCe();return P_=t,P_}var I_,hz;function aCe(){return hz||(hz=1,I_=oCe()),I_}var lCe=aCe(),aoe=ot(lCe),fz={},R_,pz;function cCe(){if(pz)return R_;pz=1;var t=Er(),e=Ct(),r=si(),n=St(),i=hb(),s=mb(),o=CA(),a=vs(),l=ab(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return R_=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),u({},f)[m]!==7||i(u({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,E=0,N;_>E;)N=S[E++],(!t||r(w,x,N))&&(g[N]=x[N]);return g}:u,R_}var mz;function uCe(){if(mz)return fz;mz=1;var t=We(),e=cCe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),fz}var M_,gz;function dCe(){if(gz)return M_;gz=1,uCe();var t=Rr();return M_=t.Object.assign,M_}var A_,yz;function hCe(){if(yz)return A_;yz=1;var t=dCe();return A_=t,A_}var D_,vz;function fCe(){return vz||(vz=1,D_=hCe()),D_}var pCe=fCe(),mCe=ot(pCe),$_,bz;function gCe(){if(bz)return $_;bz=1,Lse();var t=oi();return $_=t("Array","concat"),$_}var F_,xz;function yCe(){if(xz)return F_;xz=1;var t=Wr(),e=gCe(),r=Array.prototype;return F_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},F_}var q_,wz;function vCe(){if(wz)return q_;wz=1;var t=yCe();return q_=t,q_}var L_,Sz;function bCe(){return Sz||(Sz=1,L_=vCe()),L_}var xCe=bCe(),wCe=ot(xCe),_z={},Ez;function SCe(){if(Ez)return _z;Ez=1;var t=We(),e=Er(),r=Em();return t({target:"Object",stat:!0,sham:!e},{create:r}),_z}var B_,Nz;function _Ce(){if(Nz)return B_;Nz=1,SCe();var t=Rr(),e=t.Object;return B_=function(n,i){return e.create(n,i)},B_}var z_,kz;function ECe(){if(kz)return z_;kz=1;var t=_Ce();return z_=t,z_}var V_,Cz;function NCe(){return Cz||(Cz=1,V_=ECe()),V_}var kCe=NCe(),CCe=ot(kCe),jz={},W_,Tz;function jCe(){if(Tz)return W_;Tz=1;var t=_h(),e=vl(),r=Jc(),n=RangeError;return W_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},W_}var U_,Oz;function TCe(){if(Oz)return U_;Oz=1;var t=Ct(),e=$se(),r=vl(),n=jCe(),i=Jc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(u){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),u?p+b:b+p)}};return U_={start:l(!1),end:l(!0)},U_}var H_,Pz;function OCe(){if(Pz)return H_;Pz=1;var t=Ct(),e=St(),r=TCe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),u=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return H_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(u(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,H_}var Iz;function PCe(){if(Iz)return jz;Iz=1;var t=We(),e=si(),r=vs(),n=Ise(),i=OCe(),s=Vo(),o=St(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),jz}var K_,Rz;function ICe(){if(Rz)return K_;Rz=1,PCe(),Use();var t=Rr(),e=ob();return t.JSON||(t.JSON={stringify:JSON.stringify}),K_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},K_}var G_,Mz;function RCe(){if(Mz)return G_;Mz=1;var t=ICe();return G_=t,G_}var Y_,Az;function MCe(){return Az||(Az=1,Y_=RCe()),Y_}var ACe=MCe(),DCe=ot(ACe),Dz={},$z={},Q_,Fz;function $Ce(){if(Fz)return Q_;Fz=1;var t=TypeError;return Q_=function(e,r){if(e<r)throw new t("Not enough arguments");return e},Q_}var X_,qz;function loe(){if(qz)return X_;qz=1;var t=_r(),e=ob(),r=Vr(),n=ioe(),i=yh(),s=Eh(),o=$Ce(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return X_=function(u,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?u(y,p):u(y)}:u},X_}var Lz;function FCe(){if(Lz)return $z;Lz=1;var t=We(),e=_r(),r=loe(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),$z}var Bz={},zz;function qCe(){if(zz)return Bz;zz=1;var t=We(),e=_r(),r=loe(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),Bz}var Vz;function LCe(){return Vz||(Vz=1,FCe(),qCe()),Dz}var J_,Wz;function BCe(){if(Wz)return J_;Wz=1,LCe();var t=Rr();return J_=t.setTimeout,J_}var Z_,Uz;function zCe(){return Uz||(Uz=1,Z_=BCe()),Z_}var VCe=zCe(),WCe=ot(VCe),eE={exports:{}},Hz;function UCe(){return Hz||(Hz=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(eE)),eE.exports}var HCe=UCe(),KCe=ot(HCe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ms(){return ms=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ms.apply(this,arguments)}function Yi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Vg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var XI;typeof Object.assign!="function"?XI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:XI=Object.assign;var Fc=XI,Kz=["","webkit","Moz","MS","ms","o"],GCe=typeof document>"u"?{style:{}}:document.createElement("div"),YCe="function",Xu=Math.round,qc=Math.abs,LA=Date.now;function bb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<Kz.length;){if(r=Kz[s],n=r?r+i:e,n in t)return n;s++}}var So;typeof window>"u"?So={}:So=window;var coe=bb(GCe.style,"touchAction"),uoe=coe!==void 0;function QCe(){if(!uoe)return!1;var t={},e=So.CSS&&So.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?So.CSS.supports("touch-action",r):!0}),t}var doe="compute",hoe="auto",JI="manipulation",pc="none",Ap="pan-x",Dp="pan-y",Wg=QCe(),XCe=/mobile|tablet|ip(ad|hone|od)|android/i,foe="ontouchstart"in So,JCe=bb(So,"PointerEvent")!==void 0,ZCe=foe&&XCe.test(navigator.userAgent),Cm="touch",eje="pen",BA="mouse",tje="kinect",rje=25,Mn=1,tu=2,vr=4,ni=8,Xv=1,jm=2,Tm=4,Om=8,Xd=16,Ls=jm|Tm,mc=Om|Xd,poe=Ls|mc,moe=["x","y"],Jv=["clientX","clientY"];function _o(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function xb(t,e){return typeof t===YCe?t.apply(e&&e[0]||void 0,e):t}function Kl(t,e){return t.indexOf(e)>-1}function nje(t){if(Kl(t,pc))return pc;var e=Kl(t,Ap),r=Kl(t,Dp);return e&&r?pc:e||r?e?Ap:Dp:Kl(t,JI)?JI:hoe}var goe=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===doe&&(n=this.compute()),uoe&&this.manager.element.style&&Wg[n]&&(this.manager.element.style[coe]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return _o(this.manager.recognizers,function(i){xb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),nje(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Kl(o,pc)&&!Wg[pc],l=Kl(o,Dp)&&!Wg[Dp],u=Kl(o,Ap)&&!Wg[Ap];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&l)&&(a||l&&s&Ls||u&&s&mc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function zA(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function yoe(t){var e=t.length;if(e===1)return{x:Xu(t[0].clientX),y:Xu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Xu(r/e),y:Xu(n/e)}}function Gz(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Xu(t.pointers[r].clientX),clientY:Xu(t.pointers[r].clientY)},r++;return{timeStamp:LA(),pointers:e,center:yoe(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Zv(t,e,r){r||(r=moe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function ZI(t,e,r){r||(r=moe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function voe(t,e){return t===e?Xv:qc(t)>=qc(e)?t<0?jm:Tm:e<0?Om:Xd}function ije(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Mn||s.eventType===vr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function boe(t,e,r){return{x:e/t||0,y:r/t||0}}function sje(t,e){return Zv(e[0],e[1],Jv)/Zv(t[0],t[1],Jv)}function oje(t,e){return ZI(e[1],e[0],Jv)+ZI(t[1],t[0],Jv)}function aje(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ni&&(n>rje||r.velocity===void 0)){var l=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=boe(n,l,u);s=d.x,o=d.y,i=qc(d.x)>qc(d.y)?d.x:d.y,a=voe(l,u),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function lje(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=Gz(e)),i>1&&!r.firstMultiple?r.firstMultiple=Gz(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=yoe(n);e.timeStamp=LA(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=ZI(a,l),e.distance=Zv(a,l),ije(r,e),e.offsetDirection=voe(e.deltaX,e.deltaY);var u=boe(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=qc(u.x)>qc(u.y)?u.x:u.y,e.scale=o?sje(o.pointers,n):1,e.rotation=o?oje(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,aje(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,zA(f,d)&&(d=f),e.target=d}function cje(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Mn&&n-i===0,o=e&(vr|ni)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,lje(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function $p(t){return t.trim().split(/\s+/g)}function Uf(t,e,r){_o($p(e),function(n){t.addEventListener(n,r,!1)})}function Hf(t,e,r){_o($p(e),function(n){t.removeEventListener(n,r,!1)})}function Yz(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Ch=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){xb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Uf(this.element,this.evEl,this.domHandler),this.evTarget&&Uf(this.target,this.evTarget,this.domHandler),this.evWin&&Uf(Yz(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Hf(this.element,this.evEl,this.domHandler),this.evTarget&&Hf(this.target,this.evTarget,this.domHandler),this.evWin&&Hf(Yz(this.element),this.evWin,this.domHandler)},t}();function Lc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var uje={pointerdown:Mn,pointermove:tu,pointerup:vr,pointercancel:ni,pointerout:ni},dje={2:Cm,3:eje,4:BA,5:tje},xoe="pointerdown",woe="pointermove pointerup pointercancel";So.MSPointerEvent&&!So.PointerEvent&&(xoe="MSPointerDown",woe="MSPointerMove MSPointerUp MSPointerCancel");var Soe=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=xoe,i.evWin=woe,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=uje[a],u=dje[i.pointerType]||i.pointerType,d=u===Cm,h=Lc(s,i.pointerId,"pointerId");l&Mn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(vr|ni)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(h,1))},e}(Ch);function Fp(t){return Array.prototype.slice.call(t,0)}function VA(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Lc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var hje={touchstart:Mn,touchmove:tu,touchend:vr,touchcancel:ni},fje="touchstart touchmove touchend touchcancel",WA=function(t){Yi(e,t);function e(){var n;return e.prototype.evTarget=fje,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=hje[i.type],o=pje.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Cm,srcEvent:i})},e}(Ch);function pje(t,e){var r=Fp(t.touches),n=this.targetIds;if(e&(Mn|tu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Fp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(u){return zA(u.target,l)}),e===Mn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(vr|ni)&&delete n[o[i].identifier],i++;if(a.length)return[VA(s.concat(a),"identifier",!0),a]}var mje={mousedown:Mn,mousemove:tu,mouseup:vr},gje="mousedown",yje="mousemove mouseup",UA=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=gje,i.evWin=yje,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=mje[i.type];s&Mn&&i.button===0&&(this.pressed=!0),s&tu&&i.which!==1&&(s=vr),this.pressed&&(s&vr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:BA,srcEvent:i}))},e}(Ch),vje=2500,Qz=25;function Xz(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,vje)}}function bje(t,e){t&Mn?(this.primaryTouch=e.changedPointers[0].identifier,Xz.call(this,e)):t&(vr|ni)&&Xz.call(this,e)}function xje(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=Qz&&o<=Qz)return!0}return!1}var _oe=function(){var t=function(e){Yi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,u){var d=u.pointerType===Cm,h=u.pointerType===BA;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)bje.call(Vg(Vg(o)),l,u);else if(h&&xje.call(Vg(Vg(o)),u))return;o.callback(a,l,u)}},o.touch=new WA(o.manager,o.handler),o.mouse=new UA(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Ch);return t}();function wje(t){var e,r=t.options.inputClass;return r?e=r:JCe?e=Soe:ZCe?e=WA:foe?e=_oe:e=UA,new e(t,cje)}function Ju(t,e,r){return Array.isArray(t)?(_o(t,r[e],r),!0):!1}var by=1,Wi=2,Jd=4,Qa=8,Eo=Qa,qp=16,Rs=32,Sje=1;function _je(){return Sje++}function Ug(t,e){var r=e.manager;return r?r.get(t):t}function Jz(t){return t&qp?"cancel":t&Qa?"end":t&Jd?"move":t&Wi?"start":""}var Pm=function(){function t(r){r===void 0&&(r={}),this.options=ms({enable:!0},r),this.id=_je(),this.manager=null,this.state=by,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Fc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Ju(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Ug(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Ju(n,"dropRecognizeWith",this)?this:(n=Ug(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Ju(n,"requireFailure",this))return this;var i=this.requireFail;return n=Ug(n,this),Lc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Ju(n,"dropRequireFailure",this))return this;n=Ug(n,this);var i=Lc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Qa&&o(i.options.event+Jz(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Qa&&o(i.options.event+Jz(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Rs},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Rs|by)))return!1;n++}return!0},e.recognize=function(n){var i=Fc({},n);if(!xb(this.options.enable,[this,i])){this.reset(),this.state=Rs;return}this.state&(Eo|qp|Rs)&&(this.state=by),this.state=this.process(i),this.state&(Wi|Jd|Qa|qp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),eR=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[JI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&Mn&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==vr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Zv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=Eo,s.tryEmit()},o.interval),Wi):Eo}return Rs},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Rs},this.options.interval),Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===Eo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Pm),Zd=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Wi|Jd),l=this.attrTest(i);return a&&(o&ni||!l)?s|qp:a||l?o&vr?s|Qa:s&Wi?s|Jd:Wi:Rs},e}(Pm);function Eoe(t){return t===Xd?"down":t===Om?"up":t===jm?"left":t===Tm?"right":""}var HA=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"pan",threshold:10,pointers:1,direction:poe},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Ls&&s.push(Dp),i&mc&&s.push(Ap),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Ls?(l=u===0?Xv:u<0?jm:Tm,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Xv:d<0?Om:Xd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Zd.prototype.attrTest.call(this,i)&&(this.state&Wi||!(this.state&Wi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Eoe(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Zd),Noe=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"swipe",threshold:10,velocity:.3,direction:Ls|mc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return HA.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Ls|mc)?o=i.overallVelocity:s&Ls?o=i.overallVelocityX:s&mc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&qc(o)>this.options.velocity&&i.eventType&vr},r.emit=function(i){var s=Eoe(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Zd),koe=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[pc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Wi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Zd),Coe=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[pc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Wi)},e}(Zd),joe=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[hoe]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(vr|ni)&&!u)this.reset();else if(i.eventType&Mn)this.reset(),this._timer=setTimeout(function(){s.state=Eo,s.tryEmit()},o.time);else if(i.eventType&vr)return Eo;return Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===Eo&&(i&&i.eventType&vr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=LA(),this.manager.emit(this.options.event,this._input)))},e}(Pm),Toe={domEvents:!1,touchAction:doe,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Zz=[[Coe,{enable:!1}],[koe,{enable:!1},["rotate"]],[Noe,{direction:Ls}],[HA,{direction:Ls},["swipe"]],[eR],[eR,{event:"doubletap",taps:2},["tap"]],[joe]],Eje=1,e8=2;function t8(t,e){var r=t.element;if(r.style){var n;_o(t.options.cssProps,function(i,s){n=bb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function Nje(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var r8=function(){function t(r,n){var i=this;this.options=Fc({},Toe,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=wje(this),this.touchAction=new goe(this,this.options.touchAction),t8(this,!0),_o(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Fc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?e8:Eje},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&Eo)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==e8&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Wi|Jd|Qa)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Pm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Ju(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Ju(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Lc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return _o($p(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return _o($p(n),function(o){i?s[o]&&s[o].splice(Lc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&Nje(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&t8(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),kje={touchstart:Mn,touchmove:tu,touchend:vr,touchcancel:ni},Cje="touchstart",jje="touchstart touchmove touchend touchcancel",Tje=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evTarget=Cje,i.evWin=jje,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=kje[i.type];if(s===Mn&&(this.started=!0),!!this.started){var o=Oje.call(this,i,s);s&(vr|ni)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Cm,srcEvent:i})}},e}(Ch);function Oje(t,e){var r=Fp(t.touches),n=Fp(t.changedTouches);return e&(vr|ni)&&(r=VA(r.concat(n),"identifier",!0)),[r,n]}function Ooe(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Poe=Ooe(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),Pje=Ooe(function(t,e){return Poe(t,e,!0)},"merge","Use `assign`.");function Ije(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Fc(i,r)}function n8(t,e){return function(){return t.apply(e,arguments)}}var Rje=function(){var t=function(r,n){return n===void 0&&(n={}),new r8(r,ms({recognizers:Zz.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=poe,t.DIRECTION_DOWN=Xd,t.DIRECTION_LEFT=jm,t.DIRECTION_RIGHT=Tm,t.DIRECTION_UP=Om,t.DIRECTION_HORIZONTAL=Ls,t.DIRECTION_VERTICAL=mc,t.DIRECTION_NONE=Xv,t.DIRECTION_DOWN=Xd,t.INPUT_START=Mn,t.INPUT_MOVE=tu,t.INPUT_END=vr,t.INPUT_CANCEL=ni,t.STATE_POSSIBLE=by,t.STATE_BEGAN=Wi,t.STATE_CHANGED=Jd,t.STATE_ENDED=Qa,t.STATE_RECOGNIZED=Eo,t.STATE_CANCELLED=qp,t.STATE_FAILED=Rs,t.Manager=r8,t.Input=Ch,t.TouchAction=goe,t.TouchInput=WA,t.MouseInput=UA,t.PointerEventInput=Soe,t.TouchMouseInput=_oe,t.SingleTouchInput=Tje,t.Recognizer=Pm,t.AttrRecognizer=Zd,t.Tap=eR,t.Pan=HA,t.Swipe=Noe,t.Pinch=koe,t.Rotate=Coe,t.Press=joe,t.on=Uf,t.off=Hf,t.each=_o,t.merge=Pje,t.extend=Poe,t.bindFn=n8,t.assign=Fc,t.inherit=Ije,t.bindFn=n8,t.prefixed=bb,t.toArray=Fp,t.inArray=Lc,t.uniqueArray=VA,t.splitStr=$p,t.boolOrFn=xb,t.hasParent=zA,t.addEventListeners=Uf,t.removeEventListeners=Hf,t.defaults=Fc({},Toe,{preset:Zz}),t}();const Ioe=v2e("DELETE");function Mje(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Roe({},t,...r)}function Roe(){const t=e0(...arguments);return Aoe(t),t}function e0(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return e0(Roe(e[0],e[1]),...N2e(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of P2e(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===Ioe?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!Cs(n[s])&&!Cs(i[s])?n[s]=e0(n[s],i[s]):n[s]=Moe(i[s]));return n}function Moe(t){return Cs(t)?as(t).call(t,e=>Moe(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):e0({},t):t}function Aoe(t){for(const e of qA(t))t[e]===Ioe?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&Aoe(t[e])}function Aje(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const Dje=typeof window<"u"?window.Hammer||Rje:function(){return Aje()};function yo(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=Dje(this._dom.overlay);r.on("tap",noe(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];$c(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{$je(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}KCe(yo.prototype);yo.current=null;yo.prototype.destroy=function(){this.deactivate();for(const r of tCe(t=aoe(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};yo.prototype.activate=function(){yo.current&&yo.current.deactivate(),yo.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};yo.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};yo.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function $je(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var tE,i8;function Fje(){if(i8)return tE;i8=1,Hse();var t=Rr();return tE=t.Object.getOwnPropertySymbols,tE}var rE,s8;function qje(){if(s8)return rE;s8=1;var t=Fje();return rE=t,rE}var nE,o8;function Lje(){return o8||(o8=1,nE=qje()),nE}var Bje=Lje(),a8=ot(Bje),iE={exports:{}},l8={},c8;function zje(){if(c8)return l8;c8=1;var t=We(),e=St(),r=Us(),n=cb().f,i=Er(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),l8}var u8;function Vje(){if(u8)return iE.exports;u8=1,zje();var t=Rr(),e=t.Object,r=iE.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),iE.exports}var sE,d8;function Wje(){if(d8)return sE;d8=1;var t=Vje();return sE=t,sE}var oE,h8;function Uje(){return h8||(h8=1,oE=Wje()),oE}var Hje=Uje(),Doe=ot(Hje),f8={},p8;function Kje(){if(p8)return f8;p8=1;var t=We(),e=Er(),r=soe(),n=Us(),i=cb(),s=db();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),u=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=u(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),f8}var aE,m8;function Gje(){if(m8)return aE;m8=1,Kje();var t=Rr();return aE=t.Object.getOwnPropertyDescriptors,aE}var lE,g8;function Yje(){if(g8)return lE;g8=1;var t=Gje();return lE=t,lE}var cE,y8;function Qje(){return y8||(y8=1,cE=Yje()),cE}var Xje=Qje(),v8=ot(Xje),uE={exports:{}},b8={},x8;function Jje(){if(x8)return b8;x8=1;var t=We(),e=Er(),r=AA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),b8}var w8;function Zje(){if(w8)return uE.exports;w8=1,Jje();var t=Rr(),e=t.Object,r=uE.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),uE.exports}var dE,S8;function eTe(){if(S8)return dE;S8=1;var t=Zje();return dE=t,dE}var hE,_8;function tTe(){return _8||(_8=1,hE=eTe()),hE}var rTe=tTe(),nTe=ot(rTe),fE,E8;function iTe(){return E8||(E8=1,fE=Dse()),fE}var sTe=iTe(),oTe=ot(sTe),N8={},k8={},pE={exports:{}},mE,C8;function aTe(){if(C8)return mE;C8=1;var t=St();return mE=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),mE}var gE,j8;function lTe(){if(j8)return gE;j8=1;var t=St(),e=qn(),r=Vo(),n=aTe(),i=Object.isExtensible,s=t(function(){});return gE=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,gE}var yE,T8;function cTe(){if(T8)return yE;T8=1;var t=St();return yE=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),yE}var O8;function $oe(){if(O8)return pE.exports;O8=1;var t=We(),e=Ct(),r=_m(),n=qn(),i=Ur(),s=Gi().f,o=pb(),a=zse(),l=lTe(),u=lb(),d=cTe(),h=!1,f=u("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(E){for(var N=x(E),C=0,j=N.length;C<j;C++)if(N[C]===f){S(N,C,1);break}return N},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=pE.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,pE.exports}var vE,P8;function uTe(){if(P8)return vE;P8=1;var t=Hr(),e=kh(),r=t("iterator"),n=Array.prototype;return vE=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},vE}var bE,I8;function Foe(){if(I8)return bE;I8=1;var t=yl(),e=jA(),r=bm(),n=kh(),i=Hr(),s=i("iterator");return bE=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},bE}var xE,R8;function qoe(){if(R8)return xE;R8=1;var t=si(),e=Wo(),r=Uo(),n=bh(),i=Foe(),s=TypeError;return xE=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},xE}var wE,M8;function KA(){if(M8)return wE;M8=1;var t=si(),e=Uo(),r=jA();return wE=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},wE}var SE,A8;function GA(){if(A8)return SE;A8=1;var t=ub(),e=si(),r=Uo(),n=bh(),i=uTe(),s=gl(),o=Wr(),a=qoe(),l=Foe(),u=KA(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return SE=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,E,N,C,j,T,P,O=function(q){return _&&u(_,"normal"),new h(!0,q)},D=function(q){return y?(r(q),x?S(q[0],q[1],O):S(q[0],q[1])):x?S(q,O):S(q)};if(b)_=p.iterator;else if(w)_=p;else{if(E=l(p),!E)throw new d(n(p)+" is not iterable");if(i(E)){for(N=0,C=s(p);C>N;N++)if(j=D(p[N]),j&&o(f,j))return j;return new h(!1)}_=a(p,E)}for(T=b?p.next:_.next;!(P=e(T,_)).done;){try{j=D(P.value)}catch(q){u(_,"throw",q)}if(typeof j=="object"&&j&&o(f,j))return j}return new h(!1)},SE}var _E,D8;function Loe(){if(D8)return _E;D8=1;var t=Wr(),e=TypeError;return _E=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},_E}var EE,$8;function Boe(){if($8)return EE;$8=1;var t=We(),e=_r(),r=$oe(),n=St(),i=Sh(),s=GA(),o=Loe(),a=Vr(),l=qn(),u=bm(),d=eu(),h=Gi().f,f=Nh().forEach,p=Er(),m=km(),g=m.set,v=m.getterFor;return EE=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",E=e[y],N=E&&E.prototype,C={},j;if(!p||!a(E)||!(S||N.forEach&&!n(function(){new E().entries().next()})))j=w.getConstructor(b,y,x,_),r.enable();else{j=b(function(O,D){g(o(O,T),{type:y,collection:new E}),u(D)||s(D,O[_],{that:O,AS_ENTRIES:x})});var T=j.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in N&&!(S&&O==="clear")&&i(T,O,function(q,$){var L=P(this).collection;if(!D&&S&&!l(q))return O==="get"?void 0:!1;var M=L[O](q===0?0:q,$);return D?this:M})}),S||h(T,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(j,y,!1,!0),C[y]=j,t({global:!0,forced:!0},C),S||w.setStrong(j,y,x),j},EE}var NE,F8;function dTe(){if(F8)return NE;F8=1;var t=Nm();return NE=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},NE}var kE,q8;function hTe(){if(q8)return kE;q8=1;var t=Si(),e=DA(),r=Hr(),n=Er(),i=r("species");return kE=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},kE}var CE,L8;function zoe(){if(L8)return CE;L8=1;var t=Em(),e=DA(),r=dTe(),n=ub(),i=Loe(),s=bm(),o=GA(),a=$A(),l=FA(),u=hTe(),d=Er(),h=$oe().fastKey,f=km(),p=f.set,m=f.getterFor;return CE={getConstructor:function(g,v,y,b){var w=g(function(N,C){i(N,x),p(N,{type:v,index:t(null),first:null,last:null,size:0}),d||(N.size=0),s(C)||o(C,N[b],{that:N,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(N,C,j){var T=S(N),P=E(N,C),O,D;return P?P.value=j:(T.last=P={index:D=h(C,!0),key:C,value:j,previous:O=T.last,next:null,removed:!1},T.first||(T.first=P),O&&(O.next=P),d?T.size++:N.size++,D!=="F"&&(T.index[D]=P)),N},E=function(N,C){var j=S(N),T=h(C),P;if(T!=="F")return j.index[T];for(P=j.first;P;P=P.next)if(P.key===C)return P};return r(x,{clear:function(){for(var C=this,j=S(C),T=j.first;T;)T.removed=!0,T.previous&&(T.previous=T.previous.next=null),T=T.next;j.first=j.last=null,j.index=t(null),d?j.size=0:C.size=0},delete:function(N){var C=this,j=S(C),T=E(C,N);if(T){var P=T.next,O=T.previous;delete j.index[T.index],T.removed=!0,O&&(O.next=P),P&&(P.previous=O),j.first===T&&(j.first=P),j.last===T&&(j.last=O),d?j.size--:C.size--}return!!T},forEach:function(C){for(var j=S(this),T=n(C,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:j.first;)for(T(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(C){return!!E(this,C)}}),r(x,y?{get:function(C){var j=E(this,C);return j&&j.value},set:function(C,j){return _(this,C===0?0:C,j)}}:{add:function(C){return _(this,C=C===0?0:C,C)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,E=S.last;E&&E.removed;)E=E.previous;return!S.target||!(S.last=E=E?E.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?E.key:_==="values"?E.value:[E.key,E.value],!1)},y?"entries":"values",!y,!0),u(v)}},CE}var B8;function fTe(){if(B8)return k8;B8=1;var t=Boe(),e=zoe();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),k8}var z8;function pTe(){return z8||(z8=1,fTe()),N8}var V8={},jE,W8;function Voe(){return W8||(W8=1,jE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),jE}var TE,U8;function mTe(){if(U8)return TE;U8=1;var t=Si(),e=Voe(),r=t("Map");return TE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},TE}var H8;function gTe(){if(H8)return V8;H8=1;var t=We(),e=Ct(),r=Wo(),n=Jc(),i=GA(),s=mTe(),o=xh(),a=St(),l=s.Map,u=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);u(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),V8}var OE,K8;function yTe(){if(K8)return OE;K8=1,bl(),pTe(),gTe(),yb();var t=Rr();return OE=t.Map,OE}var PE,G8;function vTe(){if(G8)return PE;G8=1;var t=yTe();return xl(),PE=t,PE}var IE,Y8;function bTe(){return Y8||(Y8=1,IE=vTe()),IE}var xTe=bTe(),Woe=ot(xTe),Q8={},X8;function wTe(){if(X8)return Q8;X8=1;var t=We(),e=Nh().some,r=vb(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),Q8}var RE,J8;function STe(){if(J8)return RE;J8=1,wTe();var t=oi();return RE=t("Array","some"),RE}var ME,Z8;function _Te(){if(Z8)return ME;Z8=1;var t=Wr(),e=STe(),r=Array.prototype;return ME=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},ME}var AE,e7;function ETe(){if(e7)return AE;e7=1;var t=_Te();return AE=t,AE}var DE,t7;function NTe(){return t7||(t7=1,DE=ETe()),DE}var kTe=NTe(),CTe=ot(kTe),$E,r7;function jTe(){if(r7)return $E;r7=1,bl();var t=oi();return $E=t("Array","keys"),$E}var FE,n7;function TTe(){if(n7)return FE;n7=1;var t=jTe();return FE=t,FE}var qE,i7;function OTe(){if(i7)return qE;i7=1,xl();var t=yl(),e=Ur(),r=Wr(),n=TTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return qE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},qE}var LE,s7;function PTe(){return s7||(s7=1,LE=OTe()),LE}var ITe=PTe(),ju=ot(ITe),o7={},BE,a7;function RTe(){if(a7)return BE;a7=1;var t=Eh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var u=e(s/2),d=r(t(n,0,u),i),h=r(t(n,u),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return BE=r,BE}var zE,l7;function MTe(){if(l7)return zE;l7=1;var t=yh(),e=t.match(/firefox\/(\d+)/i);return zE=!!e&&+e[1],zE}var VE,c7;function ATe(){if(c7)return VE;c7=1;var t=yh();return VE=/MSIE|Trident/.test(t),VE}var WE,u7;function DTe(){if(u7)return WE;u7=1;var t=yh(),e=t.match(/AppleWebKit\/(\d+)\./);return WE=!!e&&+e[1],WE}var d7;function $Te(){if(d7)return o7;d7=1;var t=We(),e=Ct(),r=Wo(),n=vs(),i=gl(),s=ooe(),o=vl(),a=St(),l=RTe(),u=vb(),d=MTe(),h=ATe(),f=xm(),p=DTe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=u("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var E="",N,C,j,T;for(N=65;N<76;N++){switch(C=String.fromCharCode(N),N){case 66:case 69:case 70:case 72:j=3;break;case 68:case 71:j=4;break;default:j=2}for(T=0;T<47;T++)m.push({k:C+T,v:j})}for(m.sort(function(P,O){return O.v-P.v}),T=0;T<m.length;T++)C=m[T].k.charAt(0),E.charAt(E.length-1)!==C&&(E+=C);return E!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(E){return function(N,C){return C===void 0?-1:N===void 0?1:E!==void 0?+E(N,C)||0:o(N)>o(C)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(N){N!==void 0&&r(N);var C=n(this);if(x)return N===void 0?g(C):g(C,N);var j=[],T=i(C),P,O;for(O=0;O<T;O++)O in C&&v(j,C[O]);for(l(j,_(N)),P=i(j),O=0;O<P;)C[O]=j[O++];for(;O<T;)s(C,O++);return C}}),o7}var UE,h7;function FTe(){if(h7)return UE;h7=1,$Te();var t=oi();return UE=t("Array","sort"),UE}var HE,f7;function qTe(){if(f7)return HE;f7=1;var t=Wr(),e=FTe(),r=Array.prototype;return HE=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},HE}var KE,p7;function LTe(){if(p7)return KE;p7=1;var t=qTe();return KE=t,KE}var GE,m7;function BTe(){return m7||(m7=1,GE=LTe()),GE}var zTe=BTe(),tR=ot(zTe),YE,g7;function VTe(){if(g7)return YE;g7=1,bl();var t=oi();return YE=t("Array","values"),YE}var QE,y7;function WTe(){if(y7)return QE;y7=1;var t=VTe();return QE=t,QE}var XE,v7;function UTe(){if(v7)return XE;v7=1,xl();var t=yl(),e=Ur(),r=Wr(),n=WTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return XE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},XE}var JE,b7;function HTe(){return b7||(b7=1,JE=UTe()),JE}var KTe=HTe(),x7=ot(KTe),ZE,w7;function GTe(){return w7||(w7=1,ZE=roe()),ZE}var YTe=GTe(),Zu=ot(YTe),eN,S7;function QTe(){if(S7)return eN;S7=1,bl();var t=oi();return eN=t("Array","entries"),eN}var tN,_7;function XTe(){if(_7)return tN;_7=1;var t=QTe();return tN=t,tN}var rN,E7;function JTe(){if(E7)return rN;E7=1,xl();var t=yl(),e=Ur(),r=Wr(),n=XTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return rN=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},rN}var nN,N7;function ZTe(){return N7||(N7=1,nN=JTe()),nN}var eOe=ZTe(),tOe=ot(eOe);const Qr=[];for(let t=0;t<256;++t)Qr.push((t+256).toString(16).slice(1));function rOe(t,e=0){return(Qr[t[e+0]]+Qr[t[e+1]]+Qr[t[e+2]]+Qr[t[e+3]]+"-"+Qr[t[e+4]]+Qr[t[e+5]]+"-"+Qr[t[e+6]]+Qr[t[e+7]]+"-"+Qr[t[e+8]]+Qr[t[e+9]]+"-"+Qr[t[e+10]]+Qr[t[e+11]]+Qr[t[e+12]]+Qr[t[e+13]]+Qr[t[e+14]]+Qr[t[e+15]]).toLowerCase()}let iN;const nOe=new Uint8Array(16);function iOe(){if(!iN){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");iN=crypto.getRandomValues.bind(crypto)}return iN(nOe)}const sOe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var k7={randomUUID:sOe};function oOe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??iOe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,rOe(n)}function aOe(t,e,r){return k7.randomUUID&&!t?k7.randomUUID():oOe(t)}function C7(t){return typeof t=="string"||typeof t=="number"}class YA{constructor(e){Ya(this,"_queue",[]),Ya(this,"_timeout",null),Ya(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new YA(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=WCe(()=>{this.flush()},this.delay))}flush(){var e,r;$c(e=aoe(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class t0{constructor(){Ya(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Ya(this,"subscribe",t0.prototype.on),Ya(this,"unsubscribe",t0.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");$c(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=Qu(n=this._subscribers[e]).call(n,i=>i!==r)}}var j7={},T7={},O7;function lOe(){if(O7)return T7;O7=1;var t=Boe(),e=zoe();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),T7}var P7;function cOe(){return P7||(P7=1,lOe()),j7}var I7={},sN,R7;function ru(){if(R7)return sN;R7=1;var t=bh(),e=TypeError;return sN=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},sN}var oN,M7;function nu(){if(M7)return oN;M7=1;var t=Si(),e=Voe(),r=t("Set"),n=r.prototype;return oN={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},oN}var aN,A7;function iu(){if(A7)return aN;A7=1;var t=si();return aN=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},aN}var lN,D7;function Im(){if(D7)return lN;D7=1;var t=iu();return lN=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},lN}var cN,$7;function QA(){if($7)return cN;$7=1;var t=nu(),e=Im(),r=t.Set,n=t.add;return cN=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},cN}var uN,F7;function Rm(){return F7||(F7=1,uN=function(t){return t.size}),uN}var dN,q7;function uOe(){return q7||(q7=1,dN=function(t){return{iterator:t,next:t.next,done:!1}}),dN}var hN,L7;function su(){if(L7)return hN;L7=1;var t=Wo(),e=Uo(),r=si(),n=_h(),i=uOe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,u=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},hN=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new u(d,f)},hN}var fN,B7;function dOe(){if(B7)return fN;B7=1;var t=ru(),e=nu(),r=QA(),n=Rm(),i=su(),s=Im(),o=iu(),a=e.has,l=e.remove;return fN=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},fN}var pN,z7;function ou(){return z7||(z7=1,pN=function(){return!1}),pN}var V7;function hOe(){if(V7)return I7;V7=1;var t=We(),e=dOe(),r=St(),n=ou(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return a.has(1)&&a.clear(),{done:u,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),I7}var W7={},mN,U7;function fOe(){if(U7)return mN;U7=1;var t=ru(),e=nu(),r=Rm(),n=su(),i=Im(),s=iu(),o=e.Set,a=e.add,l=e.has;return mN=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},mN}var H7;function pOe(){if(H7)return W7;H7=1;var t=We(),e=St(),r=fOe(),n=ou(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),W7}var K7={},gN,G7;function mOe(){if(G7)return gN;G7=1;var t=ru(),e=nu().has,r=Rm(),n=su(),i=Im(),s=iu(),o=KA();return gN=function(l){var u=t(this),d=n(l);if(r(u)<=d.size)return i(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(u,f))return o(h,"normal",!1)})!==!1},gN}var Y7;function gOe(){if(Y7)return K7;Y7=1;var t=We(),e=mOe(),r=ou(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),K7}var Q7={},yN,X7;function yOe(){if(X7)return yN;X7=1;var t=ru(),e=Rm(),r=Im(),n=su();return yN=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},yN}var J7;function vOe(){if(J7)return Q7;J7=1;var t=We(),e=yOe(),r=ou(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),Q7}var Z7={},vN,eV;function bOe(){if(eV)return vN;eV=1;var t=ru(),e=nu().has,r=Rm(),n=su(),i=iu(),s=KA();return vN=function(a){var l=t(this),u=n(a);if(r(l)<u.size)return!1;var d=u.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},vN}var tV;function xOe(){if(tV)return Z7;tV=1;var t=We(),e=bOe(),r=ou(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),Z7}var rV={},bN,nV;function wOe(){if(nV)return bN;nV=1;var t=ru(),e=nu(),r=QA(),n=su(),i=iu(),s=e.add,o=e.has,a=e.remove;return bN=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},bN}var xN,iV;function Uoe(){return iV||(iV=1,xN=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),xN}var sV;function SOe(){if(sV)return rV;sV=1;var t=We(),e=wOe(),r=Uoe(),n=ou(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),rV}var oV={},wN,aV;function _Oe(){if(aV)return wN;aV=1;var t=ru(),e=nu().add,r=QA(),n=su(),i=iu();return wN=function(o){var a=t(this),l=n(o).getIterator(),u=r(a);return i(l,function(d){e(u,d)}),u},wN}var lV;function EOe(){if(lV)return oV;lV=1;var t=We(),e=_Oe(),r=Uoe(),n=ou(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),oV}var SN,cV;function NOe(){if(cV)return SN;cV=1,bl(),cOe(),hOe(),pOe(),gOe(),vOe(),xOe(),SOe(),EOe(),yb();var t=Rr();return SN=t.Set,SN}var _N,uV;function kOe(){if(uV)return _N;uV=1;var t=NOe();return xl(),_N=t,_N}var EN,dV;function COe(){return dV||(dV=1,EN=kOe()),EN}var jOe=COe(),NN=ot(jOe),kN,hV;function TOe(){if(hV)return kN;hV=1,bl(),yb();var t=qoe();return kN=t,kN}var CN,fV;function OOe(){if(fV)return CN;fV=1;var t=TOe();return xl(),CN=t,CN}var jN,pV;function POe(){if(pV)return jN;pV=1;var t=OOe();return jN=t,jN}var TN,mV;function IOe(){if(mV)return TN;mV=1;var t=POe();return TN=t,TN}var ON,gV;function ROe(){return gV||(gV=1,ON=IOe()),ON}var PN,yV;function MOe(){return yV||(yV=1,PN=ROe()),PN}var AOe=MOe(),IN=ot(AOe);class Gl{constructor(e){this._pairs=e}*[Zu](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return as(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return as(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=CCe(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new Woe(this._pairs)}toIdSet(){return new NN(this.toIdArray())}toItemSet(){return new NN(this.toItemArray())}cache(){return new Gl([...this._pairs])}distinct(e){const r=new NN;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new Gl({*[Zu](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new Gl({*[Zu](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=IN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=IN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new Gl({[Zu]:()=>{var r;return IN(tR(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function vV(t,e){var r=qA(t);if(a8){var n=a8(t);e&&(n=Qu(n).call(n,function(i){return Doe(t,i).enumerable})),r.push.apply(r,n)}return r}function bV(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?$c(r=vV(Object(i),!0)).call(r,function(s){Ya(t,s,i[s])}):v8?nTe(t,v8(i)):$c(n=vV(Object(i))).call(n,function(s){oTe(t,s,Doe(i,s))})}return t}function DOe(t,e){return t[e]==null&&(t[e]=aOe()),t}class eh extends t0{get idProp(){return this._idProp}constructor(e,r){super(),Ya(this,"_queue",null),e&&!Cs(e)&&(r=e,e=[]),this._options=r||{},this._data=new Woe,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=YA.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(Cs(e)){const s=as(e).call(e,o=>o[this._idProp]);if(CTe(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=u=>{const d=u[a];if(d!=null&&this._data.has(d)){const h=u,f=mCe({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(u);n.push(h)}};if(Cs(e))for(let u=0,d=e.length;u<d;u++)e[u]&&typeof e[u]=="object"?l(e[u]):console.warn("Ignoring input item, which is not an object at index "+u);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const u={items:i,oldData:s,data:o};this._trigger("update",u,r)}return wCe(n).call(n,i)}updateOnly(e,r){var n;Cs(e)||(e=[e]);const i=as(n=as(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],u=Mje(o,a);return this._data.set(l,u),{id:l,oldData:o,updatedData:u}});if(i.length){const s={items:as(i).call(i,o=>o.id),oldData:as(i).call(i,o=>o.oldData),data:as(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;C7(e)?(n=e,s=r):Cs(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&Qu(s),l=[];let u,d,h;if(n!=null)u=this._data.get(n),u&&a&&!a(u)&&(u=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)u=this._data.get(i[p]),u!=null&&(!a||a(u))&&l.push(u);else{var f;d=[...ju(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],u=this._data.get(h),u!=null&&(!a||a(u))&&l.push(u)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&u!=null)u=this._filterFields(u,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const v=l[m],y=v[this._idProp];p[y]=v}return p}else return n!=null?u??null:l}getIds(e){const r=this._data,n=e&&Qu(e),i=e&&e.order,s=[...ju(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,u=s.length;l<u;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,u=a.length;l<u;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const u=s[a],d=this._data.get(u);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,u=s.length;l<u;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,u=a.length;l<u;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const u=s[a],d=r.get(u);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&Qu(r),i=this._data,s=[...ju(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const u=o[a],d=u[this._idProp];e(u,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._data.get(l);u!=null&&(!n||n(u))&&e(u,l)}}map(e,r){const n=r&&Qu(r),i=[],s=this._data,o=[...ju(s).call(s)];for(let a=0,l=o.length;a<l;a++){const u=o[a],d=this._data.get(u);d!=null&&(!n||n(d))&&i.push(e(d,u))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&n2e(n=Cs(r)?r:qA(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;tR(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")tR(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=Cs(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const u=l[this._idProp];u!=null&&(n.push(u),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(C7(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...ju(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of x7(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of x7(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[...ju(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=DOe(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+DCe(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,bV(bV({},n),e)),r}stream(e){if(e){const n=this._data;return new Gl({*[Zu](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new Gl({[Zu]:noe(r=tOe(this._data)).call(r,this._data)})}}}function $Oe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof $c(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof as(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function Hoe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof $c(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof as(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&$Oe(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var xV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ze(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wV={},hf,SV;function Bt(){if(SV)return hf;SV=1;var t=function(e){return e&&e.Math===Math&&e};return hf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof xV=="object"&&xV)||t(typeof hf=="object"&&hf)||function(){return this}()||Function("return this")(),hf}var RN,_V;function at(){return _V||(_V=1,RN=function(t){try{return!!t()}catch{return!0}}),RN}var MN,EV;function Mm(){if(EV)return MN;EV=1;var t=at();return MN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),MN}var AN,NV;function wb(){if(NV)return AN;NV=1;var t=Mm(),e=Function.prototype,r=e.apply,n=e.call;return AN=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),AN}var DN,kV;function ct(){if(kV)return DN;kV=1;var t=Mm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return DN=t?n:function(i){return function(){return r.apply(i,arguments)}},DN}var $N,CV;function Hs(){if(CV)return $N;CV=1;var t=ct(),e=t({}.toString),r=t("".slice);return $N=function(n){return r(e(n),8,-1)},$N}var FN,jV;function XA(){if(jV)return FN;jV=1;var t=Hs(),e=ct();return FN=function(r){if(t(r)==="Function")return e(r)},FN}var qN,TV;function Kr(){if(TV)return qN;TV=1;var t=typeof document=="object"&&document.all;return qN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},qN}var LN={},BN,OV;function pr(){if(OV)return BN;OV=1;var t=at();return BN=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),BN}var zN,PV;function ai(){if(PV)return zN;PV=1;var t=Mm(),e=Function.prototype.call;return zN=t?e.bind(e):function(){return e.apply(e,arguments)},zN}var VN={},IV;function Sb(){if(IV)return VN;IV=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return VN.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,VN}var WN,RV;function Am(){return RV||(RV=1,WN=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),WN}var UN,MV;function _b(){if(MV)return UN;MV=1;var t=ct(),e=at(),r=Hs(),n=Object,i=t("".split);return UN=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,UN}var HN,AV;function jh(){return AV||(AV=1,HN=function(t){return t==null}),HN}var KN,DV;function Ho(){if(DV)return KN;DV=1;var t=jh(),e=TypeError;return KN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},KN}var GN,$V;function bs(){if($V)return GN;$V=1;var t=_b(),e=Ho();return GN=function(r){return t(e(r))},GN}var YN,FV;function Gr(){if(FV)return YN;FV=1;var t=Kr();return YN=function(e){return typeof e=="object"?e!==null:t(e)},YN}var QN,qV;function _t(){return qV||(qV=1,QN={}),QN}var XN,LV;function _i(){if(LV)return XN;LV=1;var t=_t(),e=Bt(),r=Kr(),n=function(i){return r(i)?i:void 0};return XN=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},XN}var JN,BV;function Nr(){if(BV)return JN;BV=1;var t=ct();return JN=t({}.isPrototypeOf),JN}var ZN,zV;function Th(){if(zV)return ZN;zV=1;var t=Bt(),e=t.navigator,r=e&&e.userAgent;return ZN=r?String(r):"",ZN}var ek,VV;function Dm(){if(VV)return ek;VV=1;var t=Bt(),e=Th(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),ek=a,ek}var tk,WV;function Oh(){if(WV)return tk;WV=1;var t=Dm(),e=at(),r=Bt(),n=r.String;return tk=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),tk}var rk,UV;function Koe(){if(UV)return rk;UV=1;var t=Oh();return rk=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",rk}var nk,HV;function $m(){if(HV)return nk;HV=1;var t=_i(),e=Kr(),r=Nr(),n=Koe(),i=Object;return nk=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},nk}var ik,KV;function Ph(){if(KV)return ik;KV=1;var t=String;return ik=function(e){try{return t(e)}catch{return"Object"}},ik}var sk,GV;function Ko(){if(GV)return sk;GV=1;var t=Kr(),e=Ph(),r=TypeError;return sk=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},sk}var ok,YV;function JA(){if(YV)return ok;YV=1;var t=Ko(),e=jh();return ok=function(r,n){var i=r[n];return e(i)?void 0:t(i)},ok}var ak,QV;function FOe(){if(QV)return ak;QV=1;var t=ai(),e=Kr(),r=Gr(),n=TypeError;return ak=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},ak}var lk={exports:{}},ck,XV;function Ih(){return XV||(XV=1,ck=!0),ck}var uk,JV;function qOe(){if(JV)return uk;JV=1;var t=Bt(),e=Object.defineProperty;return uk=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},uk}var ZV;function ZA(){if(ZV)return lk.exports;ZV=1;var t=Ih(),e=Bt(),r=qOe(),n="__core-js_shared__",i=lk.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),lk.exports}var dk,eW;function Rh(){if(eW)return dk;eW=1;var t=ZA();return dk=function(e,r){return t[e]||(t[e]=r||{})},dk}var hk,tW;function Ei(){if(tW)return hk;tW=1;var t=Ho(),e=Object;return hk=function(r){return e(t(r))},hk}var fk,rW;function on(){if(rW)return fk;rW=1;var t=ct(),e=Ei(),r=t({}.hasOwnProperty);return fk=Object.hasOwn||function(i,s){return r(e(i),s)},fk}var pk,nW;function Eb(){if(nW)return pk;nW=1;var t=ct(),e=0,r=Math.random(),n=t(1.1.toString);return pk=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},pk}var mk,iW;function kr(){if(iW)return mk;iW=1;var t=Bt(),e=Rh(),r=on(),n=Eb(),i=Oh(),s=Koe(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return mk=function(u){return r(a,u)||(a[u]=i&&r(o,u)?o[u]:l("Symbol."+u)),a[u]},mk}var gk,sW;function Goe(){if(sW)return gk;sW=1;var t=ai(),e=Gr(),r=$m(),n=JA(),i=FOe(),s=kr(),o=TypeError,a=s("toPrimitive");return gk=function(l,u){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(u===void 0&&(u="default"),h=t(d,l,u),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return u===void 0&&(u="number"),i(l,u)},gk}var yk,oW;function eD(){if(oW)return yk;oW=1;var t=Goe(),e=$m();return yk=function(r){var n=t(r,"string");return e(n)?n:n+""},yk}var vk,aW;function Yoe(){if(aW)return vk;aW=1;var t=Bt(),e=Gr(),r=t.document,n=e(r)&&e(r.createElement);return vk=function(i){return n?r.createElement(i):{}},vk}var bk,lW;function Qoe(){if(lW)return bk;lW=1;var t=pr(),e=at(),r=Yoe();return bk=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),bk}var cW;function Nb(){if(cW)return LN;cW=1;var t=pr(),e=ai(),r=Sb(),n=Am(),i=bs(),s=eD(),o=on(),a=Qoe(),l=Object.getOwnPropertyDescriptor;return LN.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},LN}var xk,uW;function LOe(){if(uW)return xk;uW=1;var t=at(),e=Kr(),r=/#|\.prototype\./,n=function(l,u){var d=s[i(l)];return d===a?!0:d===o?!1:e(u)?t(u):!!u},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return xk=n,xk}var wk,dW;function kb(){if(dW)return wk;dW=1;var t=XA(),e=Ko(),r=Mm(),n=t(t.bind);return wk=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},wk}var Sk={},_k,hW;function Xoe(){if(hW)return _k;hW=1;var t=pr(),e=at();return _k=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),_k}var Ek,fW;function Ks(){if(fW)return Ek;fW=1;var t=Gr(),e=String,r=TypeError;return Ek=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},Ek}var pW;function Qi(){if(pW)return Sk;pW=1;var t=pr(),e=Qoe(),r=Xoe(),n=Ks(),i=eD(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",d="writable";return Sk.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:u in m?m[u]:g[u],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Sk}var Nk,mW;function Mh(){if(mW)return Nk;mW=1;var t=pr(),e=Qi(),r=Am();return Nk=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},Nk}var kk,gW;function Re(){if(gW)return kk;gW=1;var t=Bt(),e=wb(),r=XA(),n=Kr(),i=Nb().f,s=LOe(),o=_t(),a=kb(),l=Mh(),u=on(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return kk=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,E,N,C,j,T,P;for(E in f)x=s(m?E:p+(g?".":"#")+E,h.forced),S=!x&&y&&u(y,E),C=b[E],S&&(h.dontCallGetSet?(P=i(y,E),j=P&&P.value):j=y[E]),N=S&&j?j:f[E],!(!x&&!v&&typeof C==typeof N)&&(h.bind&&S?T=a(N,t):h.wrap&&S?T=d(N):v&&n(N)?T=r(N):T=N,(h.sham||N&&N.sham||C&&C.sham)&&l(T,"sham",!0),l(b,E,T),v&&(_=p+"Prototype",u(o,_)||l(o,_,{}),l(o[_],E,N),h.real&&w&&(x||!w[E])&&l(w,E,N)))},kk}var Ck,yW;function BOe(){if(yW)return Ck;yW=1;var t=Math.ceil,e=Math.floor;return Ck=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},Ck}var jk,vW;function Ah(){if(vW)return jk;vW=1;var t=BOe();return jk=function(e){var r=+e;return r!==r||r===0?0:t(r)},jk}var Tk,bW;function Cb(){if(bW)return Tk;bW=1;var t=Ah(),e=Math.max,r=Math.min;return Tk=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},Tk}var Ok,xW;function Joe(){if(xW)return Ok;xW=1;var t=Ah(),e=Math.min;return Ok=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},Ok}var Pk,wW;function Go(){if(wW)return Pk;wW=1;var t=Joe();return Pk=function(e){return t(e.length)},Pk}var Ik,SW;function tD(){if(SW)return Ik;SW=1;var t=bs(),e=Cb(),r=Go(),n=function(i){return function(s,o,a){var l=t(s),u=r(l);if(u===0)return!i&&-1;var d=e(a,u),h;if(i&&o!==o){for(;u>d;)if(h=l[d++],h!==h)return!0}else for(;u>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return Ik={includes:n(!0),indexOf:n(!1)},Ik}var Rk,_W;function Fm(){return _W||(_W=1,Rk={}),Rk}var Mk,EW;function Zoe(){if(EW)return Mk;EW=1;var t=ct(),e=on(),r=bs(),n=tD().indexOf,i=Fm(),s=t([].push);return Mk=function(o,a){var l=r(o),u=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>u;)e(l,h=a[u++])&&(~n(d,h)||s(d,h));return d},Mk}var Ak,NW;function rD(){return NW||(NW=1,Ak=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Ak}var Dk,kW;function qm(){if(kW)return Dk;kW=1;var t=Zoe(),e=rD();return Dk=Object.keys||function(n){return t(n,e)},Dk}var $k={},CW;function jb(){return CW||(CW=1,$k.f=Object.getOwnPropertySymbols),$k}var Fk,jW;function zOe(){if(jW)return Fk;jW=1;var t=pr(),e=ct(),r=ai(),n=at(),i=qm(),s=jb(),o=Sb(),a=Ei(),l=_b(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return Fk=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),u({},f)[m]!==7||i(u({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,E=0,N;_>E;)N=S[E++],(!t||r(w,x,N))&&(g[N]=x[N]);return g}:u,Fk}var TW;function VOe(){if(TW)return wV;TW=1;var t=Re(),e=zOe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),wV}var qk,OW;function WOe(){if(OW)return qk;OW=1,VOe();var t=_t();return qk=t.Object.assign,qk}var Lk,PW;function UOe(){if(PW)return Lk;PW=1;var t=WOe();return Lk=t,Lk}var Bk,IW;function HOe(){return IW||(IW=1,Bk=UOe()),Bk}var KOe=HOe(),br=ze(KOe),RW={},zk,MW;function Dh(){if(MW)return zk;MW=1;var t=ct();return zk=t([].slice),zk}var Vk,AW;function GOe(){if(AW)return Vk;AW=1;var t=ct(),e=Ko(),r=Gr(),n=on(),i=Dh(),s=Mm(),o=Function,a=t([].concat),l=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";u[f]=o("C,a","return new C("+l(m,",")+")")}return u[f](h,p)};return Vk=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},Vk}var DW;function YOe(){if(DW)return RW;DW=1;var t=Re(),e=GOe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),RW}var Wk,$W;function an(){if($W)return Wk;$W=1;var t=Bt(),e=_t();return Wk=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},Wk}var Uk,FW;function QOe(){if(FW)return Uk;FW=1,YOe();var t=an();return Uk=t("Function","bind"),Uk}var Hk,qW;function XOe(){if(qW)return Hk;qW=1;var t=Nr(),e=QOe(),r=Function.prototype;return Hk=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},Hk}var Kk,LW;function JOe(){if(LW)return Kk;LW=1;var t=XOe();return Kk=t,Kk}var Gk,BW;function ZOe(){return BW||(BW=1,Gk=JOe()),Gk}var ePe=ZOe(),se=ze(ePe);function nD(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function tPe(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function rPe(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function nPe(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function iPe(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function sPe(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function eae(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function rR(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,u=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,u,d,u),t.bezierCurveTo(d-o,u,e,h+a,e,h),t.closePath()}function tae(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,u=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),v=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+u,f,p,f),t.bezierCurveTo(p-u,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-u,r,p,r),t.bezierCurveTo(p+u,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+u,v,p,v),t.bezierCurveTo(p-u,v,e,g+d,e,g),t.lineTo(e,m)}function rae(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,u=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+u*u)),p=a<0?-p:p,e+=p,r+=u*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function oPe(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const zW={circle:nD,dashedLine:rae,database:tae,diamond:sPe,ellipse:rR,ellipse_vis:rR,hexagon:oPe,roundRect:eae,square:tPe,star:iPe,triangle:rPe,triangleDown:nPe};function aPe(t){return Object.prototype.hasOwnProperty.call(zW,t)?zW[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var Yk={exports:{}},VW;function lPe(){return VW||(VW=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(Yk)),Yk.exports}var cPe=lPe(),nae=ze(cPe),WW={},Qk,UW;function au(){if(UW)return Qk;UW=1;var t=Hs();return Qk=Array.isArray||function(r){return t(r)==="Array"},Qk}var Xk,HW;function iae(){if(HW)return Xk;HW=1;var t=TypeError,e=9007199254740991;return Xk=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},Xk}var Jk,KW;function Tb(){if(KW)return Jk;KW=1;var t=pr(),e=Qi(),r=Am();return Jk=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},Jk}var Zk,GW;function iD(){if(GW)return Zk;GW=1;var t=kr(),e=t("toStringTag"),r={};return r[e]="z",Zk=String(r)==="[object z]",Zk}var e2,YW;function $h(){if(YW)return e2;YW=1;var t=iD(),e=Kr(),r=Hs(),n=kr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,u){try{return l[u]}catch{}};return e2=t?r:function(l){var u,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(u=s(l),i))=="string"?d:o?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},e2}var t2,QW;function uPe(){if(QW)return t2;QW=1;var t=ct(),e=Kr(),r=ZA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),t2=r.inspectSource,t2}var r2,XW;function sae(){if(XW)return r2;XW=1;var t=ct(),e=at(),r=Kr(),n=$h(),i=_i(),s=uPe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(l,s(m))}catch{return!0}};return f.sham=!0,r2=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,r2}var n2,JW;function dPe(){if(JW)return n2;JW=1;var t=au(),e=sae(),r=Gr(),n=kr(),i=n("species"),s=Array;return n2=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},n2}var i2,ZW;function sD(){if(ZW)return i2;ZW=1;var t=dPe();return i2=function(e,r){return new(t(e))(r===0?0:r)},i2}var s2,eU;function Lm(){if(eU)return s2;eU=1;var t=at(),e=kr(),r=Dm(),n=e("species");return s2=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},s2}var tU;function oae(){if(tU)return WW;tU=1;var t=Re(),e=at(),r=au(),n=Gr(),i=Ei(),s=Go(),o=iae(),a=Tb(),l=sD(),u=Lm(),d=kr(),h=Dm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,E,N,C;for(S=-1,E=arguments.length;S<E;S++)if(C=S===-1?b:arguments[S],m(C))for(N=s(C),o(x+N),_=0;_<N;_++,x++)_ in C&&a(w,x,C[_]);else o(x+1),a(w,x++,C);return w.length=x,w}}),WW}var rU={},nU={},o2,iU;function Xi(){if(iU)return o2;iU=1;var t=$h(),e=String;return o2=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},o2}var a2={},sU;function oD(){if(sU)return a2;sU=1;var t=pr(),e=Xoe(),r=Qi(),n=Ks(),i=bs(),s=qm();return a2.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var u=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],u[p]);return a},a2}var l2,oU;function hPe(){if(oU)return l2;oU=1;var t=_i();return l2=t("document","documentElement"),l2}var c2,aU;function Ob(){if(aU)return c2;aU=1;var t=Rh(),e=Eb(),r=t("keys");return c2=function(n){return r[n]||(r[n]=e(n))},c2}var u2,lU;function Bm(){if(lU)return u2;lU=1;var t=Ks(),e=oD(),r=rD(),n=Fm(),i=hPe(),s=Yoe(),o=Ob(),a=">",l="<",u="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[u][r[b]];return y()};return n[h]=!0,u2=Object.create||function(w,x){var S;return w!==null?(f[u]=t(w),S=new f,f[u]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},u2}var d2={},cU;function Pb(){if(cU)return d2;cU=1;var t=Zoe(),e=rD(),r=e.concat("length","prototype");return d2.f=Object.getOwnPropertyNames||function(i){return t(i,r)},d2}var h2={},uU;function aD(){if(uU)return h2;uU=1;var t=Hs(),e=bs(),r=Pb().f,n=Dh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return h2.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},h2}var f2,dU;function zm(){if(dU)return f2;dU=1;var t=Mh();return f2=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},f2}var p2,hU;function lD(){if(hU)return p2;hU=1;var t=Qi();return p2=function(e,r,n){return t.f(e,r,n)},p2}var m2={},fU;function Ib(){if(fU)return m2;fU=1;var t=kr();return m2.f=t,m2}var g2,pU;function Qt(){if(pU)return g2;pU=1;var t=_t(),e=on(),r=Ib(),n=Qi().f;return g2=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},g2}var y2,mU;function aae(){if(mU)return y2;mU=1;var t=ai(),e=_i(),r=kr(),n=zm();return y2=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},y2}var v2,gU;function fPe(){if(gU)return v2;gU=1;var t=iD(),e=$h();return v2=t?{}.toString:function(){return"[object "+e(this)+"]"},v2}var b2,yU;function lu(){if(yU)return b2;yU=1;var t=iD(),e=Qi().f,r=Mh(),n=on(),i=fPe(),s=kr(),o=s("toStringTag");return b2=function(a,l,u,d){var h=u?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},b2}var x2,vU;function lae(){if(vU)return x2;vU=1;var t=Bt(),e=Kr(),r=t.WeakMap;return x2=e(r)&&/native code/.test(String(r)),x2}var w2,bU;function cu(){if(bU)return w2;bU=1;var t=lae(),e=Bt(),r=Gr(),n=Mh(),i=on(),s=ZA(),o=Ob(),a=Fm(),l="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new u("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new u(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new u(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return w2={set:h,get:f,has:p,enforce:m,getterFor:g},w2}var S2,xU;function wl(){if(xU)return S2;xU=1;var t=kb(),e=ct(),r=_b(),n=Ei(),i=Go(),s=sD(),o=e([].push),a=function(l){var u=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),E=t(y,b),N=0,C=w||s,j=u?C(v,_):d||m?C(v,0):void 0,T,P;_>N;N++)if((g||N in S)&&(T=S[N],P=E(T,N,x),l))if(u)j[N]=P;else if(P)switch(l){case 3:return!0;case 5:return T;case 6:return N;case 2:o(j,T)}else switch(l){case 4:return!1;case 7:o(j,T)}return p?-1:h||f?f:j}};return S2={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},S2}var wU;function pPe(){if(wU)return nU;wU=1;var t=Re(),e=Bt(),r=ai(),n=ct(),i=Ih(),s=pr(),o=Oh(),a=at(),l=on(),u=Nr(),d=Ks(),h=bs(),f=eD(),p=Xi(),m=Am(),g=Bm(),v=qm(),y=Pb(),b=aD(),w=jb(),x=Nb(),S=Qi(),_=oD(),E=Sb(),N=zm(),C=lD(),j=Rh(),T=Ob(),P=Fm(),O=Eb(),D=kr(),q=Ib(),$=Qt(),L=aae(),M=lu(),B=cu(),Y=wl().forEach,Q=T("hidden"),pe="Symbol",H="prototype",oe=B.set,je=B.getterFor(pe),me=Object[H],qe=e.Symbol,Pe=qe&&qe[H],G=e.RangeError,de=e.TypeError,Oe=e.QObject,ut=x.f,et=S.f,Mr=b.f,Yr=E.f,Cr=n([].push),ht=j("symbols"),ar=j("op-symbols"),Ni=j("wks"),Xt=!Oe||!Oe[H]||!Oe[H].findChild,A=function(Ee,ne,ge){var he=ut(me,ne);he&&delete me[ne],et(Ee,ne,ge),he&&Ee!==me&&et(me,ne,he)},F=s&&a(function(){return g(et({},"a",{get:function(){return et(this,"a",{value:7}).a}})).a!==7})?A:et,V=function(Ee,ne){var ge=ht[Ee]=g(Pe);return oe(ge,{type:pe,tag:Ee,description:ne}),s||(ge.description=ne),ge},le=function(ne,ge,he){ne===me&&le(ar,ge,he),d(ne);var ke=f(ge);return d(he),l(ht,ke)?(he.enumerable?(l(ne,Q)&&ne[Q][ke]&&(ne[Q][ke]=!1),he=g(he,{enumerable:m(0,!1)})):(l(ne,Q)||et(ne,Q,m(1,g(null))),ne[Q][ke]=!0),F(ne,ke,he)):et(ne,ke,he)},ee=function(ne,ge){d(ne);var he=h(ge),ke=v(he).concat(Ft(he));return Y(ke,function(Xe){(!s||r(ye,he,Xe))&&le(ne,Xe,he[Xe])}),ne},Z=function(ne,ge){return ge===void 0?g(ne):ee(g(ne),ge)},ye=function(ne){var ge=f(ne),he=r(Yr,this,ge);return this===me&&l(ht,ge)&&!l(ar,ge)?!1:he||!l(this,ge)||!l(ht,ge)||l(this,Q)&&this[Q][ge]?he:!0},Ve=function(ne,ge){var he=h(ne),ke=f(ge);if(!(he===me&&l(ht,ke)&&!l(ar,ke))){var Xe=ut(he,ke);return Xe&&l(ht,ke)&&!(l(he,Q)&&he[Q][ke])&&(Xe.enumerable=!0),Xe}},Ke=function(ne){var ge=Mr(h(ne)),he=[];return Y(ge,function(ke){!l(ht,ke)&&!l(P,ke)&&Cr(he,ke)}),he},Ft=function(Ee){var ne=Ee===me,ge=Mr(ne?ar:h(Ee)),he=[];return Y(ge,function(ke){l(ht,ke)&&(!ne||l(me,ke))&&Cr(he,ht[ke])}),he};return o||(qe=function(){if(u(Pe,this))throw new de("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),ge=O(ne),he=function(ke){var Xe=this===void 0?e:this;Xe===me&&r(he,ar,ke),l(Xe,Q)&&l(Xe[Q],ge)&&(Xe[Q][ge]=!1);var ki=m(1,ke);try{F(Xe,ge,ki)}catch(xn){if(!(xn instanceof G))throw xn;A(Xe,ge,ki)}};return s&&Xt&&F(me,ge,{configurable:!0,set:he}),V(ge,ne)},Pe=qe[H],N(Pe,"toString",function(){return je(this).tag}),N(qe,"withoutSetter",function(Ee){return V(O(Ee),Ee)}),E.f=ye,S.f=le,_.f=ee,x.f=Ve,y.f=b.f=Ke,w.f=Ft,q.f=function(Ee){return V(D(Ee),Ee)},s&&(C(Pe,"description",{configurable:!0,get:function(){return je(this).description}}),i||N(me,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:qe}),Y(v(Ni),function(Ee){$(Ee)}),t({target:pe,stat:!0,forced:!o},{useSetter:function(){Xt=!0},useSimple:function(){Xt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Z,defineProperty:le,defineProperties:ee,getOwnPropertyDescriptor:Ve}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ke}),L(),M(qe,pe),P[Q]=!0,nU}var SU={},_2,_U;function cae(){if(_U)return _2;_U=1;var t=Oh();return _2=t&&!!Symbol.for&&!!Symbol.keyFor,_2}var EU;function mPe(){if(EU)return SU;EU=1;var t=Re(),e=_i(),r=on(),n=Xi(),i=Rh(),s=cae(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var u=n(l);if(r(o,u))return o[u];var d=e("Symbol")(u);return o[u]=d,a[d]=u,d}}),SU}var NU={},kU;function gPe(){if(kU)return NU;kU=1;var t=Re(),e=on(),r=$m(),n=Ph(),i=Rh(),s=cae(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),NU}var CU={},E2,jU;function yPe(){if(jU)return E2;jU=1;var t=ct(),e=au(),r=Kr(),n=Hs(),i=Xi(),s=t([].push);return E2=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],u=0;u<a;u++){var d=o[u];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},E2}var TU;function uae(){if(TU)return CU;TU=1;var t=Re(),e=_i(),r=wb(),n=ai(),i=ct(),s=at(),o=Kr(),a=$m(),l=Dh(),u=yPe(),d=Oh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var C=e("Symbol")("stringify detection");return f([C])!=="[null]"||f({a:C})!=="{}"||f(Object(C))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),E=function(C,j){var T=l(arguments),P=u(j);if(!(!o(P)&&(C===void 0||a(C))))return T[1]=function(O,D){if(o(P)&&(D=n(P,this,h(O),D)),!a(D))return D},r(f,null,T)},N=function(C,j,T){var P=m(T,j-1),O=m(T,j+1);return p(w,C)&&!p(x,O)||p(x,C)&&!p(w,P)?"\\u"+y(g(C,0),16):C};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(j,T,P){var O=l(arguments),D=r(S?E:f,null,O);return _&&typeof D=="string"?v(D,b,N):D}}),CU}var OU={},PU;function vPe(){if(PU)return OU;PU=1;var t=Re(),e=Oh(),r=at(),n=jb(),i=Ei(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),OU}var IU;function dae(){return IU||(IU=1,pPe(),mPe(),gPe(),uae(),vPe()),rU}var RU={},MU;function hae(){if(MU)return RU;MU=1;var t=Qt();return t("asyncDispose"),RU}var AU={},DU;function bPe(){if(DU)return AU;DU=1;var t=Qt();return t("asyncIterator"),AU}var $U={},FU;function fae(){if(FU)return $U;FU=1;var t=Qt();return t("dispose"),$U}var qU={},LU;function xPe(){if(LU)return qU;LU=1;var t=Qt();return t("hasInstance"),qU}var BU={},zU;function wPe(){if(zU)return BU;zU=1;var t=Qt();return t("isConcatSpreadable"),BU}var VU={},WU;function pae(){if(WU)return VU;WU=1;var t=Qt();return t("iterator"),VU}var UU={},HU;function SPe(){if(HU)return UU;HU=1;var t=Qt();return t("match"),UU}var KU={},GU;function _Pe(){if(GU)return KU;GU=1;var t=Qt();return t("matchAll"),KU}var YU={},QU;function EPe(){if(QU)return YU;QU=1;var t=Qt();return t("replace"),YU}var XU={},JU;function NPe(){if(JU)return XU;JU=1;var t=Qt();return t("search"),XU}var ZU={},eH;function kPe(){if(eH)return ZU;eH=1;var t=Qt();return t("species"),ZU}var tH={},rH;function CPe(){if(rH)return tH;rH=1;var t=Qt();return t("split"),tH}var nH={},iH;function mae(){if(iH)return nH;iH=1;var t=Qt(),e=aae();return t("toPrimitive"),e(),nH}var sH={},oH;function jPe(){if(oH)return sH;oH=1;var t=_i(),e=Qt(),r=lu();return e("toStringTag"),r(t("Symbol"),"Symbol"),sH}var aH={},lH;function TPe(){if(lH)return aH;lH=1;var t=Qt();return t("unscopables"),aH}var cH={},uH;function OPe(){if(uH)return cH;uH=1;var t=Bt(),e=lu();return e(t.JSON,"JSON",!0),cH}var N2,dH;function PPe(){if(dH)return N2;dH=1,oae(),dae(),hae(),bPe(),fae(),xPe(),wPe(),pae(),SPe(),_Pe(),EPe(),NPe(),kPe(),CPe(),mae(),jPe(),TPe(),OPe();var t=_t();return N2=t.Symbol,N2}var hH={},k2,fH;function cD(){return fH||(fH=1,k2=function(){}),k2}var C2,pH;function Fh(){return pH||(pH=1,C2={}),C2}var j2,mH;function IPe(){if(mH)return j2;mH=1;var t=pr(),e=on(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return j2={EXISTS:i,PROPER:s,CONFIGURABLE:o},j2}var T2,gH;function gae(){if(gH)return T2;gH=1;var t=at();return T2=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),T2}var O2,yH;function Rb(){if(yH)return O2;yH=1;var t=on(),e=Kr(),r=Ei(),n=Ob(),i=gae(),s=n("IE_PROTO"),o=Object,a=o.prototype;return O2=i?o.getPrototypeOf:function(l){var u=r(l);if(t(u,s))return u[s];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof o?a:null},O2}var P2,vH;function yae(){if(vH)return P2;vH=1;var t=at(),e=Kr(),r=Gr(),n=Bm(),i=Rb(),s=zm(),o=kr(),a=Ih(),l=o("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),P2={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},P2}var I2,bH;function RPe(){if(bH)return I2;bH=1;var t=yae().IteratorPrototype,e=Bm(),r=Am(),n=lu(),i=Fh(),s=function(){return this};return I2=function(o,a,l,u){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!u,l)}),n(o,d,!1,!0),i[d]=s,o},I2}var R2,xH;function MPe(){if(xH)return R2;xH=1;var t=ct(),e=Ko();return R2=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},R2}var M2,wH;function APe(){if(wH)return M2;wH=1;var t=Gr();return M2=function(e){return t(e)||e===null},M2}var A2,SH;function DPe(){if(SH)return A2;SH=1;var t=APe(),e=String,r=TypeError;return A2=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},A2}var D2,_H;function $Pe(){if(_H)return D2;_H=1;var t=MPe(),e=Gr(),r=Ho(),n=DPe();return D2=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,u){return r(l),n(u),e(l)&&(i?o(l,u):l.__proto__=u),l}}():void 0),D2}var $2,EH;function uD(){if(EH)return $2;EH=1;var t=Re(),e=ai(),r=Ih(),n=IPe(),i=Kr(),s=RPe(),o=Rb(),a=$Pe(),l=lu(),u=Mh(),d=zm(),h=kr(),f=Fh(),p=yae(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return $2=function(E,N,C,j,T,P,O){s(C,N,j);var D=function(oe){if(oe===T&&B)return B;if(!y&&oe&&oe in L)return L[oe];switch(oe){case w:return function(){return new C(this,oe)};case x:return function(){return new C(this,oe)};case S:return function(){return new C(this,oe)}}return function(){return new C(this)}},q=N+" Iterator",$=!1,L=E.prototype,M=L[b]||L["@@iterator"]||T&&L[T],B=!y&&M||D(T),Y=N==="Array"&&L.entries||M,Q,pe,H;if(Y&&(Q=o(Y.call(new E)),Q!==Object.prototype&&Q.next&&(!r&&o(Q)!==v&&(a?a(Q,v):i(Q[b])||d(Q,b,_)),l(Q,q,!0,!0),r&&(f[q]=_))),m&&T===x&&M&&M.name!==x&&(!r&&g?u(L,"name",x):($=!0,B=function(){return e(M,this)})),T)if(pe={values:D(x),keys:P?B:D(w),entries:D(S)},O)for(H in pe)(y||$||!(H in L))&&d(L,H,pe[H]);else t({target:N,proto:!0,forced:y||$},pe);return(!r||O)&&L[b]!==B&&d(L,b,B,{name:T}),f[N]=B,pe},$2}var F2,NH;function dD(){return NH||(NH=1,F2=function(t,e){return{value:t,done:e}}),F2}var q2,kH;function qh(){if(kH)return q2;kH=1;var t=bs(),e=cD(),r=Fh(),n=cu(),i=Qi().f,s=uD(),o=dD(),a=Ih(),l=pr(),u="Array Iterator",d=n.set,h=n.getterFor(u);q2=s(Array,"Array",function(p,m){d(this,{type:u,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return q2}var L2,CH;function FPe(){return CH||(CH=1,L2={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),L2}var jH;function Lh(){if(jH)return hH;jH=1,qh();var t=FPe(),e=Bt(),r=lu(),n=Fh();for(var i in t)r(e[i],i),n[i]=n.Array;return hH}var B2,TH;function vae(){if(TH)return B2;TH=1;var t=PPe();return Lh(),B2=t,B2}var z2,OH;function qPe(){return OH||(OH=1,z2=vae()),z2}var LPe=qPe(),BPe=ze(LPe),PH={},IH;function zPe(){if(IH)return PH;IH=1;var t=Re(),e=au(),r=sae(),n=Gr(),i=Cb(),s=Go(),o=bs(),a=Tb(),l=kr(),u=Lm(),d=Dh(),h=u("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,E,N;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(E=new(_===void 0?p:_)(m(S-x,0)),N=0;x<S;x++,N++)x in b&&a(E,N,b[x]);return E.length=N,E}}),PH}var V2,RH;function VPe(){if(RH)return V2;RH=1,zPe();var t=an();return V2=t("Array","slice"),V2}var W2,MH;function WPe(){if(MH)return W2;MH=1;var t=Nr(),e=VPe(),r=Array.prototype;return W2=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},W2}var U2,AH;function UPe(){if(AH)return U2;AH=1;var t=WPe();return U2=t,U2}var H2,DH;function HPe(){return DH||(DH=1,H2=UPe()),H2}var KPe=HPe(),Is=ze(KPe),K2,$H;function GPe(){if($H)return K2;$H=1;var t=_i(),e=ct(),r=Pb(),n=jb(),i=Ks(),s=e([].concat);return K2=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),u=n.f;return u?s(l,u(a)):l},K2}var FH={},qH;function YPe(){if(qH)return FH;qH=1;var t=Re(),e=au();return t({target:"Array",stat:!0},{isArray:e}),FH}var G2,LH;function QPe(){if(LH)return G2;LH=1,YPe();var t=_t();return G2=t.Array.isArray,G2}var Y2,BH;function XPe(){if(BH)return Y2;BH=1;var t=QPe();return Y2=t,Y2}var Q2,zH;function JPe(){return zH||(zH=1,Q2=XPe()),Q2}var ZPe=JPe(),or=ze(ZPe),VH={},WH;function eIe(){if(WH)return VH;WH=1;var t=Re(),e=wl().map,r=Lm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),VH}var X2,UH;function tIe(){if(UH)return X2;UH=1,eIe();var t=an();return X2=t("Array","map"),X2}var J2,HH;function rIe(){if(HH)return J2;HH=1;var t=Nr(),e=tIe(),r=Array.prototype;return J2=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},J2}var Z2,KH;function nIe(){if(KH)return Z2;KH=1;var t=rIe();return Z2=t,Z2}var eC,GH;function iIe(){return GH||(GH=1,eC=nIe()),eC}var sIe=iIe(),th=ze(sIe),YH={},QH;function oIe(){if(QH)return YH;QH=1;var t=Re(),e=Ei(),r=qm(),n=at(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),YH}var tC,XH;function aIe(){if(XH)return tC;XH=1,oIe();var t=_t();return tC=t.Object.keys,tC}var rC,JH;function lIe(){if(JH)return rC;JH=1;var t=aIe();return rC=t,rC}var nC,ZH;function cIe(){return ZH||(ZH=1,nC=lIe()),nC}var uIe=cIe(),rr=ze(uIe),e9={},t9;function dIe(){if(t9)return e9;t9=1;var t=Re(),e=ct(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),e9}var iC,r9;function hIe(){if(r9)return iC;r9=1,dIe();var t=_t();return iC=t.Date.now,iC}var sC,n9;function fIe(){if(n9)return sC;n9=1;var t=hIe();return sC=t,sC}var oC,i9;function pIe(){return i9||(i9=1,oC=fIe()),oC}var mIe=pIe(),r0=ze(mIe),s9={},aC,o9;function Bh(){if(o9)return aC;o9=1;var t=at();return aC=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},aC}var lC,a9;function gIe(){if(a9)return lC;a9=1;var t=wl().forEach,e=Bh(),r=e("forEach");return lC=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},lC}var l9;function yIe(){if(l9)return s9;l9=1;var t=Re(),e=gIe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),s9}var cC,c9;function vIe(){if(c9)return cC;c9=1,yIe();var t=an();return cC=t("Array","forEach"),cC}var uC,u9;function bIe(){if(u9)return uC;u9=1;var t=vIe();return uC=t,uC}var dC,d9;function xIe(){if(d9)return dC;d9=1;var t=$h(),e=on(),r=Nr(),n=bIe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return dC=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},dC}var hC,h9;function wIe(){return h9||(h9=1,hC=xIe()),hC}var SIe=wIe(),kt=ze(SIe),f9={},p9;function _Ie(){if(p9)return f9;p9=1;var t=Re(),e=ct(),r=au(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),f9}var fC,m9;function EIe(){if(m9)return fC;m9=1,_Ie();var t=an();return fC=t("Array","reverse"),fC}var pC,g9;function NIe(){if(g9)return pC;g9=1;var t=Nr(),e=EIe(),r=Array.prototype;return pC=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},pC}var mC,y9;function kIe(){if(y9)return mC;y9=1;var t=NIe();return mC=t,mC}var gC,v9;function CIe(){return v9||(v9=1,gC=kIe()),gC}var jIe=CIe(),gc=ze(jIe),b9={},yC,x9;function TIe(){if(x9)return yC;x9=1;var t=pr(),e=au(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return yC=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},yC}var vC,w9;function bae(){if(w9)return vC;w9=1;var t=Ph(),e=TypeError;return vC=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},vC}var S9;function OIe(){if(S9)return b9;S9=1;var t=Re(),e=Ei(),r=Cb(),n=Ah(),i=Go(),s=TIe(),o=iae(),a=sD(),l=Tb(),u=bae(),d=Lm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,E,N,C,j;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),E=a(y,_),N=0;N<_;N++)C=w+N,C in y&&l(E,N,y[C]);if(E.length=_,S<_){for(N=w;N<b-_;N++)C=N+_,j=N+S,C in y?y[j]=y[C]:u(y,j);for(N=b;N>b-_+S;N--)u(y,N-1)}else if(S>_)for(N=b-_;N>w;N--)C=N+_-1,j=N+S-1,C in y?y[j]=y[C]:u(y,j);for(N=0;N<S;N++)y[N+w]=arguments[N+2];return s(y,b-_+S),E}}),b9}var bC,_9;function PIe(){if(_9)return bC;_9=1,OIe();var t=an();return bC=t("Array","splice"),bC}var xC,E9;function IIe(){if(E9)return xC;E9=1;var t=Nr(),e=PIe(),r=Array.prototype;return xC=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},xC}var wC,N9;function RIe(){if(N9)return wC;N9=1;var t=IIe();return wC=t,wC}var SC,k9;function MIe(){return k9||(k9=1,SC=RIe()),SC}var AIe=MIe(),No=ze(AIe),C9={},j9;function DIe(){if(j9)return C9;j9=1;var t=Re(),e=tD().includes,r=at(),n=cD(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),C9}var _C,T9;function $Ie(){if(T9)return _C;T9=1,DIe();var t=an();return _C=t("Array","includes"),_C}var O9={},EC,P9;function FIe(){if(P9)return EC;P9=1;var t=Gr(),e=Hs(),r=kr(),n=r("match");return EC=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},EC}var NC,I9;function qIe(){if(I9)return NC;I9=1;var t=FIe(),e=TypeError;return NC=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},NC}var kC,R9;function LIe(){if(R9)return kC;R9=1;var t=kr(),e=t("match");return kC=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},kC}var M9;function BIe(){if(M9)return O9;M9=1;var t=Re(),e=ct(),r=qIe(),n=Ho(),i=Xi(),s=LIe(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),O9}var CC,A9;function zIe(){if(A9)return CC;A9=1,BIe();var t=an();return CC=t("String","includes"),CC}var jC,D9;function VIe(){if(D9)return jC;D9=1;var t=Nr(),e=$Ie(),r=zIe(),n=Array.prototype,i=String.prototype;return jC=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},jC}var TC,$9;function WIe(){if($9)return TC;$9=1;var t=VIe();return TC=t,TC}var OC,F9;function UIe(){return F9||(F9=1,OC=WIe()),OC}var HIe=UIe(),Xa=ze(HIe),q9={},L9;function KIe(){if(L9)return q9;L9=1;var t=Re(),e=at(),r=Ei(),n=Rb(),i=gae(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),q9}var PC,B9;function GIe(){if(B9)return PC;B9=1,KIe();var t=_t();return PC=t.Object.getPrototypeOf,PC}var IC,z9;function YIe(){if(z9)return IC;z9=1;var t=GIe();return IC=t,IC}var RC,V9;function QIe(){return V9||(V9=1,RC=YIe()),RC}var XIe=QIe(),W9=ze(XIe),MC,U9;function JIe(){if(U9)return MC;U9=1,oae();var t=an();return MC=t("Array","concat"),MC}var AC,H9;function ZIe(){if(H9)return AC;H9=1;var t=Nr(),e=JIe(),r=Array.prototype;return AC=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},AC}var DC,K9;function eRe(){if(K9)return DC;K9=1;var t=ZIe();return DC=t,DC}var $C,G9;function tRe(){return G9||(G9=1,$C=eRe()),$C}var rRe=tRe(),nRe=ze(rRe),Y9={},Q9;function iRe(){if(Q9)return Y9;Q9=1;var t=Re(),e=wl().filter,r=Lm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),Y9}var FC,X9;function sRe(){if(X9)return FC;X9=1,iRe();var t=an();return FC=t("Array","filter"),FC}var qC,J9;function oRe(){if(J9)return qC;J9=1;var t=Nr(),e=sRe(),r=Array.prototype;return qC=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},qC}var LC,Z9;function aRe(){if(Z9)return LC;Z9=1;var t=oRe();return LC=t,LC}var BC,eK;function lRe(){return eK||(eK=1,BC=aRe()),BC}var cRe=lRe(),Gn=ze(cRe),tK={},zC,rK;function uRe(){if(rK)return zC;rK=1;var t=pr(),e=at(),r=ct(),n=Rb(),i=qm(),s=bs(),o=Sb().f,a=r(o),l=r([].push),u=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=u&&n(p)===null,v=m.length,y=0,b=[],w;v>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(b,h?[w,p[w]]:p[w]);return b}};return zC={entries:d(!0),values:d(!1)},zC}var nK;function dRe(){if(nK)return tK;nK=1;var t=Re(),e=uRe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),tK}var VC,iK;function hRe(){if(iK)return VC;iK=1,dRe();var t=_t();return VC=t.Object.values,VC}var WC,sK;function fRe(){if(sK)return WC;sK=1;var t=hRe();return WC=t,WC}var UC,oK;function pRe(){return oK||(oK=1,UC=fRe()),UC}var mRe=pRe(),gRe=ze(mRe),aK={},HC,lK;function hD(){return lK||(lK=1,HC=`	
\v\f\r \u2028\u2029\uFEFF`),HC}var KC,cK;function xae(){if(cK)return KC;cK=1;var t=ct(),e=Ho(),r=Xi(),n=hD(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(u){var d=r(e(u));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return KC={start:a(1),end:a(2),trim:a(3)},KC}var GC,uK;function yRe(){if(uK)return GC;uK=1;var t=Bt(),e=at(),r=ct(),n=Xi(),i=xae().trim,s=hD(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,u=/^[+-]?0x/i,d=r(u.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return GC=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(u,g)?16:10))}:o,GC}var dK;function vRe(){if(dK)return aK;dK=1;var t=Re(),e=yRe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),aK}var YC,hK;function bRe(){if(hK)return YC;hK=1,vRe();var t=_t();return YC=t.parseInt,YC}var QC,fK;function xRe(){if(fK)return QC;fK=1;var t=bRe();return QC=t,QC}var XC,pK;function wRe(){return pK||(pK=1,XC=xRe()),XC}var SRe=wRe(),ls=ze(SRe),mK={},gK;function _Re(){if(gK)return mK;gK=1;var t=Re(),e=XA(),r=tD().indexOf,n=Bh(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var u=arguments.length>1?arguments[1]:void 0;return s?i(this,l,u)||0:r(this,l,u)}}),mK}var JC,yK;function ERe(){if(yK)return JC;yK=1,_Re();var t=an();return JC=t("Array","indexOf"),JC}var ZC,vK;function NRe(){if(vK)return ZC;vK=1;var t=Nr(),e=ERe(),r=Array.prototype;return ZC=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},ZC}var ej,bK;function kRe(){if(bK)return ej;bK=1;var t=NRe();return ej=t,ej}var tj,xK;function CRe(){return xK||(xK=1,tj=kRe()),tj}var jRe=CRe(),xt=ze(jRe),wK={},SK;function TRe(){if(SK)return wK;SK=1;var t=Re(),e=pr(),r=Bm();return t({target:"Object",stat:!0,sham:!e},{create:r}),wK}var rj,_K;function ORe(){if(_K)return rj;_K=1,TRe();var t=_t(),e=t.Object;return rj=function(n,i){return e.create(n,i)},rj}var nj,EK;function PRe(){if(EK)return nj;EK=1;var t=ORe();return nj=t,nj}var ij,NK;function IRe(){return NK||(NK=1,ij=PRe()),ij}var RRe=IRe(),yc=ze(RRe),kK={},sj,CK;function MRe(){if(CK)return sj;CK=1;var t=Ah(),e=Xi(),r=Ho(),n=RangeError;return sj=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},sj}var oj,jK;function ARe(){if(jK)return oj;jK=1;var t=ct(),e=Joe(),r=Xi(),n=MRe(),i=Ho(),s=t(n),o=t("".slice),a=Math.ceil,l=function(u){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),u?p+b:b+p)}};return oj={start:l(!1),end:l(!0)},oj}var aj,TK;function DRe(){if(TK)return aj;TK=1;var t=ct(),e=at(),r=ARe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),u=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return aj=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(u(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,aj}var OK;function $Re(){if(OK)return kK;OK=1;var t=Re(),e=ai(),r=Ei(),n=Goe(),i=DRe(),s=Hs(),o=at(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),kK}var lj,PK;function FRe(){if(PK)return lj;PK=1,$Re(),uae();var t=_t(),e=wb();return t.JSON||(t.JSON={stringify:JSON.stringify}),lj=function(n,i,s){return e(t.JSON.stringify,null,arguments)},lj}var cj,IK;function qRe(){if(IK)return cj;IK=1;var t=FRe();return cj=t,cj}var uj,RK;function LRe(){return RK||(RK=1,uj=qRe()),uj}var BRe=LRe(),Vm=ze(BRe),MK={},AK={},dj,DK;function wae(){if(DK)return dj;DK=1;var t=Bt(),e=Th(),r=Hs(),n=function(i){return e.slice(0,i.length)===i};return dj=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),dj}var hj,$K;function zRe(){if($K)return hj;$K=1;var t=TypeError;return hj=function(e,r){if(e<r)throw new t("Not enough arguments");return e},hj}var fj,FK;function Sae(){if(FK)return fj;FK=1;var t=Bt(),e=wb(),r=Kr(),n=wae(),i=Th(),s=Dh(),o=zRe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return fj=function(u,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?u(y,p):u(y)}:u},fj}var qK;function VRe(){if(qK)return AK;qK=1;var t=Re(),e=Bt(),r=Sae(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),AK}var LK={},BK;function WRe(){if(BK)return LK;BK=1;var t=Re(),e=Bt(),r=Sae(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),LK}var zK;function _ae(){return zK||(zK=1,VRe(),WRe()),MK}var pj,VK;function URe(){if(VK)return pj;VK=1,_ae();var t=_t();return pj=t.setTimeout,pj}var mj,WK;function HRe(){return WK||(WK=1,mj=URe()),mj}var KRe=HRe(),ko=ze(KRe),UK={},gj,HK;function GRe(){if(HK)return gj;HK=1;var t=Ei(),e=Cb(),r=Go();return gj=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),u=a>2?arguments[2]:void 0,d=u===void 0?o:e(u,o);d>l;)s[l++]=i;return s},gj}var KK;function YRe(){if(KK)return UK;KK=1;var t=Re(),e=GRe(),r=cD();return t({target:"Array",proto:!0},{fill:e}),r("fill"),UK}var yj,GK;function QRe(){if(GK)return yj;GK=1,YRe();var t=an();return yj=t("Array","fill"),yj}var vj,YK;function XRe(){if(YK)return vj;YK=1;var t=Nr(),e=QRe(),r=Array.prototype;return vj=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},vj}var bj,QK;function JRe(){if(QK)return bj;QK=1;var t=XRe();return bj=t,bj}var xj,XK;function ZRe(){return XK||(XK=1,xj=JRe()),xj}var eMe=ZRe(),Wm=ze(eMe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function gs(){return gs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gs.apply(this,arguments)}function Ji(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Hg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var nR;typeof Object.assign!="function"?nR=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:nR=Object.assign;var Bc=nR,JK=["","webkit","Moz","MS","ms","o"],tMe=typeof document>"u"?{style:{}}:document.createElement("div"),rMe="function",ed=Math.round,zc=Math.abs,fD=Date.now;function Mb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<JK.length;){if(r=JK[s],n=r?r+i:e,n in t)return n;s++}}var Co;typeof window>"u"?Co={}:Co=window;var Eae=Mb(tMe.style,"touchAction"),Nae=Eae!==void 0;function nMe(){if(!Nae)return!1;var t={},e=Co.CSS&&Co.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?Co.CSS.supports("touch-action",r):!0}),t}var kae="compute",Cae="auto",iR="manipulation",vc="none",Lp="pan-x",Bp="pan-y",Kg=nMe(),iMe=/mobile|tablet|ip(ad|hone|od)|android/i,jae="ontouchstart"in Co,sMe=Mb(Co,"PointerEvent")!==void 0,oMe=jae&&iMe.test(navigator.userAgent),Um="touch",aMe="pen",pD="mouse",lMe="kinect",cMe=25,An=1,uu=2,xr=4,ii=8,n0=1,Hm=2,Km=4,Gm=8,rh=16,Bs=Hm|Km,bc=Gm|rh,Tae=Bs|bc,Oae=["x","y"],i0=["clientX","clientY"];function jo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function Ab(t,e){return typeof t===rMe?t.apply(e&&e[0]||void 0,e):t}function Yl(t,e){return t.indexOf(e)>-1}function uMe(t){if(Yl(t,vc))return vc;var e=Yl(t,Lp),r=Yl(t,Bp);return e&&r?vc:e||r?e?Lp:Bp:Yl(t,iR)?iR:Cae}var Pae=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===kae&&(n=this.compute()),Nae&&this.manager.element.style&&Kg[n]&&(this.manager.element.style[Eae]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return jo(this.manager.recognizers,function(i){Ab(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),uMe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Yl(o,vc)&&!Kg[vc],l=Yl(o,Bp)&&!Kg[Bp],u=Yl(o,Lp)&&!Kg[Lp];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&l)&&(a||l&&s&Bs||u&&s&bc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function mD(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Iae(t){var e=t.length;if(e===1)return{x:ed(t[0].clientX),y:ed(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:ed(r/e),y:ed(n/e)}}function ZK(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:ed(t.pointers[r].clientX),clientY:ed(t.pointers[r].clientY)},r++;return{timeStamp:fD(),pointers:e,center:Iae(e),deltaX:t.deltaX,deltaY:t.deltaY}}function s0(t,e,r){r||(r=Oae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function sR(t,e,r){r||(r=Oae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Rae(t,e){return t===e?n0:zc(t)>=zc(e)?t<0?Hm:Km:e<0?Gm:rh}function dMe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===An||s.eventType===xr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Mae(t,e,r){return{x:e/t||0,y:r/t||0}}function hMe(t,e){return s0(e[0],e[1],i0)/s0(t[0],t[1],i0)}function fMe(t,e){return sR(e[1],e[0],i0)+sR(t[1],t[0],i0)}function pMe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ii&&(n>cMe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=Mae(n,l,u);s=d.x,o=d.y,i=zc(d.x)>zc(d.y)?d.x:d.y,a=Rae(l,u),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function mMe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=ZK(e)),i>1&&!r.firstMultiple?r.firstMultiple=ZK(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Iae(n);e.timeStamp=fD(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=sR(a,l),e.distance=s0(a,l),dMe(r,e),e.offsetDirection=Rae(e.deltaX,e.deltaY);var u=Mae(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=zc(u.x)>zc(u.y)?u.x:u.y,e.scale=o?hMe(o.pointers,n):1,e.rotation=o?fMe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,pMe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,mD(f,d)&&(d=f),e.target=d}function gMe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&An&&n-i===0,o=e&(xr|ii)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,mMe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function zp(t){return t.trim().split(/\s+/g)}function Kf(t,e,r){jo(zp(e),function(n){t.addEventListener(n,r,!1)})}function Gf(t,e,r){jo(zp(e),function(n){t.removeEventListener(n,r,!1)})}function eG(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var zh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){Ab(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Kf(this.element,this.evEl,this.domHandler),this.evTarget&&Kf(this.target,this.evTarget,this.domHandler),this.evWin&&Kf(eG(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Gf(this.element,this.evEl,this.domHandler),this.evTarget&&Gf(this.target,this.evTarget,this.domHandler),this.evWin&&Gf(eG(this.element),this.evWin,this.domHandler)},t}();function Vc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var yMe={pointerdown:An,pointermove:uu,pointerup:xr,pointercancel:ii,pointerout:ii},vMe={2:Um,3:aMe,4:pD,5:lMe},Aae="pointerdown",Dae="pointermove pointerup pointercancel";Co.MSPointerEvent&&!Co.PointerEvent&&(Aae="MSPointerDown",Dae="MSPointerMove MSPointerUp MSPointerCancel");var $ae=function(t){Ji(e,t);function e(){var n,i=e.prototype;return i.evEl=Aae,i.evWin=Dae,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=yMe[a],u=vMe[i.pointerType]||i.pointerType,d=u===Um,h=Vc(s,i.pointerId,"pointerId");l&An&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(xr|ii)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(h,1))},e}(zh);function Vp(t){return Array.prototype.slice.call(t,0)}function gD(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Vc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var bMe={touchstart:An,touchmove:uu,touchend:xr,touchcancel:ii},xMe="touchstart touchmove touchend touchcancel",yD=function(t){Ji(e,t);function e(){var n;return e.prototype.evTarget=xMe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=bMe[i.type],o=wMe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Um,srcEvent:i})},e}(zh);function wMe(t,e){var r=Vp(t.touches),n=this.targetIds;if(e&(An|uu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Vp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(u){return mD(u.target,l)}),e===An)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(xr|ii)&&delete n[o[i].identifier],i++;if(a.length)return[gD(s.concat(a),"identifier",!0),a]}var SMe={mousedown:An,mousemove:uu,mouseup:xr},_Me="mousedown",EMe="mousemove mouseup",vD=function(t){Ji(e,t);function e(){var n,i=e.prototype;return i.evEl=_Me,i.evWin=EMe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=SMe[i.type];s&An&&i.button===0&&(this.pressed=!0),s&uu&&i.which!==1&&(s=xr),this.pressed&&(s&xr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:pD,srcEvent:i}))},e}(zh),NMe=2500,tG=25;function rG(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,NMe)}}function kMe(t,e){t&An?(this.primaryTouch=e.changedPointers[0].identifier,rG.call(this,e)):t&(xr|ii)&&rG.call(this,e)}function CMe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=tG&&o<=tG)return!0}return!1}var Fae=function(){var t=function(e){Ji(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,u){var d=u.pointerType===Um,h=u.pointerType===pD;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)kMe.call(Hg(Hg(o)),l,u);else if(h&&CMe.call(Hg(Hg(o)),u))return;o.callback(a,l,u)}},o.touch=new yD(o.manager,o.handler),o.mouse=new vD(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(zh);return t}();function jMe(t){var e,r=t.options.inputClass;return r?e=r:sMe?e=$ae:oMe?e=yD:jae?e=Fae:e=vD,new e(t,gMe)}function td(t,e,r){return Array.isArray(t)?(jo(t,r[e],r),!0):!1}var xy=1,Ui=2,nh=4,Ja=8,To=Ja,Wp=16,Ms=32,TMe=1;function OMe(){return TMe++}function Gg(t,e){var r=e.manager;return r?r.get(t):t}function nG(t){return t&Wp?"cancel":t&Ja?"end":t&nh?"move":t&Ui?"start":""}var Ym=function(){function t(r){r===void 0&&(r={}),this.options=gs({enable:!0},r),this.id=OMe(),this.manager=null,this.state=xy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Bc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(td(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Gg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return td(n,"dropRecognizeWith",this)?this:(n=Gg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(td(n,"requireFailure",this))return this;var i=this.requireFail;return n=Gg(n,this),Vc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(td(n,"dropRequireFailure",this))return this;n=Gg(n,this);var i=Vc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ja&&o(i.options.event+nG(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ja&&o(i.options.event+nG(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Ms},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Ms|xy)))return!1;n++}return!0},e.recognize=function(n){var i=Bc({},n);if(!Ab(this.options.enable,[this,i])){this.reset(),this.state=Ms;return}this.state&(To|Wp|Ms)&&(this.state=xy),this.state=this.process(i),this.state&(Ui|nh|Ja|Wp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),oR=function(t){Ji(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[iR]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&An&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==xr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||s0(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=To,s.tryEmit()},o.interval),Ui):To}return Ms},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Ms},this.options.interval),Ms},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===To&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Ym),ih=function(t){Ji(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Ui|nh),l=this.attrTest(i);return a&&(o&ii||!l)?s|Wp:a||l?o&xr?s|Ja:s&Ui?s|nh:Ui:Ms},e}(Ym);function qae(t){return t===rh?"down":t===Gm?"up":t===Hm?"left":t===Km?"right":""}var bD=function(t){Ji(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"pan",threshold:10,pointers:1,direction:Tae},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Bs&&s.push(Bp),i&bc&&s.push(Lp),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Bs?(l=u===0?n0:u<0?Hm:Km,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?n0:d<0?Gm:rh,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return ih.prototype.attrTest.call(this,i)&&(this.state&Ui||!(this.state&Ui)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=qae(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(ih),Lae=function(t){Ji(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"swipe",threshold:10,velocity:.3,direction:Bs|bc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return bD.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Bs|bc)?o=i.overallVelocity:s&Bs?o=i.overallVelocityX:s&bc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&zc(o)>this.options.velocity&&i.eventType&xr},r.emit=function(i){var s=qae(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(ih),Bae=function(t){Ji(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[vc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Ui)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(ih),zae=function(t){Ji(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[vc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Ui)},e}(ih),Vae=function(t){Ji(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Cae]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(xr|ii)&&!u)this.reset();else if(i.eventType&An)this.reset(),this._timer=setTimeout(function(){s.state=To,s.tryEmit()},o.time);else if(i.eventType&xr)return To;return Ms},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===To&&(i&&i.eventType&xr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=fD(),this.manager.emit(this.options.event,this._input)))},e}(Ym),Wae={domEvents:!1,touchAction:kae,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},iG=[[zae,{enable:!1}],[Bae,{enable:!1},["rotate"]],[Lae,{direction:Bs}],[bD,{direction:Bs},["swipe"]],[oR],[oR,{event:"doubletap",taps:2},["tap"]],[Vae]],PMe=1,sG=2;function oG(t,e){var r=t.element;if(r.style){var n;jo(t.options.cssProps,function(i,s){n=Mb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function IMe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var aG=function(){function t(r,n){var i=this;this.options=Bc({},Wae,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=jMe(this),this.touchAction=new Pae(this,this.options.touchAction),oG(this,!0),jo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Bc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?sG:PMe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&To)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==sG&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Ui|nh|Ja)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Ym)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(td(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(td(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Vc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return jo(zp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return jo(zp(n),function(o){i?s[o]&&s[o].splice(Vc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&IMe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&oG(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),RMe={touchstart:An,touchmove:uu,touchend:xr,touchcancel:ii},MMe="touchstart",AMe="touchstart touchmove touchend touchcancel",DMe=function(t){Ji(e,t);function e(){var n,i=e.prototype;return i.evTarget=MMe,i.evWin=AMe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=RMe[i.type];if(s===An&&(this.started=!0),!!this.started){var o=$Me.call(this,i,s);s&(xr|ii)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Um,srcEvent:i})}},e}(zh);function $Me(t,e){var r=Vp(t.touches),n=Vp(t.changedTouches);return e&(xr|ii)&&(r=gD(r.concat(n),"identifier",!0)),[r,n]}function Uae(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Hae=Uae(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),FMe=Uae(function(t,e){return Hae(t,e,!0)},"merge","Use `assign`.");function qMe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Bc(i,r)}function lG(t,e){return function(){return t.apply(e,arguments)}}var Kae=function(){var t=function(r,n){return n===void 0&&(n={}),new aG(r,gs({recognizers:iG.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Tae,t.DIRECTION_DOWN=rh,t.DIRECTION_LEFT=Hm,t.DIRECTION_RIGHT=Km,t.DIRECTION_UP=Gm,t.DIRECTION_HORIZONTAL=Bs,t.DIRECTION_VERTICAL=bc,t.DIRECTION_NONE=n0,t.DIRECTION_DOWN=rh,t.INPUT_START=An,t.INPUT_MOVE=uu,t.INPUT_END=xr,t.INPUT_CANCEL=ii,t.STATE_POSSIBLE=xy,t.STATE_BEGAN=Ui,t.STATE_CHANGED=nh,t.STATE_ENDED=Ja,t.STATE_RECOGNIZED=To,t.STATE_CANCELLED=Wp,t.STATE_FAILED=Ms,t.Manager=aG,t.Input=zh,t.TouchAction=Pae,t.TouchInput=yD,t.MouseInput=vD,t.PointerEventInput=$ae,t.TouchMouseInput=Fae,t.SingleTouchInput=DMe,t.Recognizer=Ym,t.AttrRecognizer=ih,t.Tap=oR,t.Pan=bD,t.Swipe=Lae,t.Pinch=Bae,t.Rotate=zae,t.Press=Vae,t.on=Kf,t.off=Gf,t.each=jo,t.merge=FMe,t.extend=Hae,t.bindFn=lG,t.assign=Bc,t.inherit=qMe,t.bindFn=lG,t.prefixed=Mb,t.toArray=Vp,t.inArray=Vc,t.uniqueArray=gD,t.splitStr=zp,t.boolOrFn=Ab,t.hasParent=mD,t.addEventListeners=Kf,t.removeEventListeners=Gf,t.defaults=Bc({},Wae,{preset:iG}),t}();Kae.defaults;BPe("DELETE");function Db(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return LMe(e.length?e:[r0()])}function LMe(t){let[e,r,n]=BMe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function BMe(){const t=zMe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function zMe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function VMe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const xD=typeof window<"u"?window.Hammer||Kae:function(){return VMe()};function As(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=xD(this._dom.overlay);r.on("tap",se(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];kt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{WMe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}nae(As.prototype);As.current=null;As.prototype.destroy=function(){this.deactivate();for(const r of gc(t=No(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};As.prototype.activate=function(){As.current&&As.current.deactivate(),As.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};As.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};As.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function WMe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const UMe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,HMe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,KMe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,GMe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function ua(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(ua(e),t.removeChild(e))}}function fd(t){return t instanceof String||typeof t=="string"}function cG(t){return typeof t=="object"&&t!==null}function Wc(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function Gae(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")Wc(t,e,n,r);else{const i=t[n],s=e[n];cG(i)&&cG(s)&&Gae(i,s,r)}}function Vh(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(or(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Tt(e[s],r[s],!1,n):Wc(e,r,s,n);else{if(or(r[s]))throw new TypeError("Arrays are not supported by deepExtend");Wc(e,r,s,n)}}return e}function o0(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(or(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Xa(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?Tt(e[i],r[i]):Wc(e,r,i,n);else if(or(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else Wc(e,r,i,n);return e}function Tt(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&W9(e[s])===Object.prototype)t[s]===void 0?t[s]=Tt({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&W9(t[s])===Object.prototype?Tt(t[s],e[s],r):Wc(t,e,s,n);else if(or(e[s])){var i;t[s]=Is(i=e[s]).call(i)}else Wc(t,e,s,n);return t}function a0(t,e){return[...t,e]}function YMe(t){return Is(t).call(t)}function QMe(t){return t.getBoundingClientRect().left}function XMe(t){return t.getBoundingClientRect().top}function tt(t,e){if(or(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function wD(t){let e;switch(t.length){case 3:case 4:return e=HMe.exec(t),e?{r:ls(e[1]+e[1],16),g:ls(e[2]+e[2],16),b:ls(e[3]+e[3],16)}:null;case 6:case 7:return e=UMe.exec(t),e?{r:ls(e[1],16),g:ls(e[2],16),b:ls(e[3],16)}:null;default:return null}}function qi(t,e){if(Xa(t).call(t,"rgba"))return t;if(Xa(t).call(t,"rgb")){const r=t.substr(xt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=wD(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function Yae(t,e,r){var n;return"#"+Is(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function aR(t,e){if(fd(t)){let n=t;if(Xae(n)){var r;const i=th(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return ls(s)});n=Yae(i[0],i[1],i[2])}if(Qae(n)===!0){const i=JMe(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=lR(o.h,o.s,o.v),l=lR(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:fd(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:fd(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function Ef(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function wy(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),u=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=u,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=u,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function lR(t,e,r){const n=wy(t,e,r);return Yae(n.r,n.g,n.b)}function JMe(t){const e=wD(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return Ef(e.r,e.g,e.b)}function Qae(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function Xae(t){return KMe.test(t)}function ZMe(t){return GMe.test(t)}function Za(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=yc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Za(t[r]));return e}function Mi(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const v=m[g],y=p[g];for(const b in v)Object.prototype.hasOwnProperty.call(v,b)&&(y[b]=v[b])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=yc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const eAe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function da(t,e){let r;or(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const tAe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let rAe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return tAe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),fd(e)===!0){if(Xae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(ZMe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(Qae(e)===!0){const s=wD(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Vm(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=br({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",ko(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=br({},e)),this.color=e;const n=Ef(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=Ef(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=wy(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=Ef(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Wm(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=se(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=se(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=se(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=se(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new xD(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,u=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=wy(o*u,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,u=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(u)*d+s,f=Math.sin(u)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=u/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=Ef(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const v=wy(g.h,g.s,g.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function cR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(cR(...Is(e).call(e,1))),n}}let nAe=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},br(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new rAe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(or(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Gn(e)!==void 0&&(this.options.filter=Gn(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Gn(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Gn(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||xt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return kt(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(cR("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&xt(e).call(e,r)!==-1&&(s=xt(e).call(e,r));for(let l=0;l<e.length;l++){const u=document.createElement("option");u.value=e[l],l===s&&(u.selected="selected"),u.innerText=e[l],i.appendChild(u)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let u="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,u="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,u="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,u="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);u!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(u,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=ko(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=ko(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Gn(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],u=a0(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!or(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,u,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(u);if(or(l))this._handleArray(l,d,u);else if(typeof l=="string")this._makeTextInput(l,d,u);else if(typeof l=="boolean")this._makeCheckbox(l,d,u);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=a0(u,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,u,!0);this._makeItem(u,p),o=this._handleObject(l,u)||o}else this._makeCheckbox(l,f,u)}else{const h=this._makeLabel(a,u,!0);this._makeItem(u,h),o=this._handleObject(l,u)||o}}else console.error("dont know how to handle",l,a,u)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(cR("pre","const options = "+Vm(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},iAe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=ls(e),this.y=ls(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,u=!0;this.y-r<this.padding&&(u=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,u?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},ff=!1,uG;const uR="background: #FFeeee; color: #dd0000";let sAe=class Zt{static validate(e,r,n){ff=!1,uG=r;let i=r;return n!==void 0&&(i=r[n]),Zt.parse(e,i,[]),ff}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&Zt.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){Zt.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=Zt.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),Zt.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+Zt.printLocation(o,e),uR)},l=Zt.getType(r[e]),u=s[l];u!==void 0?Zt.getType(u)==="array"&&xt(u).call(u,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+Zt.print(u)+' not "'+r[e]+'". '),ff=!0):l==="object"&&i!=="__any__"&&(o=a0(o,e),Zt.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+Zt.print(rr(s))+". Received ["+l+'] "'+r[e]+'"'),ff=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":or(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=Zt.findInOptions(e,r,n,!1),s=Zt.findInOptions(e,uG,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+Zt.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+Zt.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+Zt.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+Zt.printLocation(i.path,e):l=". Did you mean one of these: "+Zt.print(rr(r))+Zt.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,uR),ff=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let u;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=Zt.findInOptions(e,r[h],a0(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,u=p.indexMatch)}else{var d;xt(d=h.toLowerCase()).call(d,l)!==-1&&(u=h),f=Zt.levenshteinDistance(e,h),s>f&&(o=h,a=YMe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:u}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return Vm(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const oAe=As,aAe=nAe,pd=xD,lAe=iAe,Jae=uR,cAe=sAe;function uAe(t){return Ra=t,pAe()}var Zae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},SD=yc(Zae);SD.color="color.color";SD.style="dashes";var En={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},dG={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Ra="",sh=0,Je="",De="",Un=En.NULL;function dAe(){sh=0,Je=Ra.charAt(0)}function Ar(){sh++,Je=Ra.charAt(sh)}function Tu(){return Ra.charAt(sh+1)}function hG(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function al(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function hAe(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function ele(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=al(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),xt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=al(i.attr,e.attr))}function fAe(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=al({},t.edge);e.attr=al(r,e.attr)}}function tle(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=al({},t.edge)),s.attr=al(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Pt(){for(Un=En.NULL,De="";Je===" "||Je==="	"||Je===`
`||Je==="\r";)Ar();do{var t=!1;if(Je==="#"){for(var e=sh-1;Ra.charAt(e)===" "||Ra.charAt(e)==="	";)e--;if(Ra.charAt(e)===`
`||Ra.charAt(e)===""){for(;Je!=""&&Je!=`
`;)Ar();t=!0}}if(Je==="/"&&Tu()==="/"){for(;Je!=""&&Je!=`
`;)Ar();t=!0}if(Je==="/"&&Tu()==="*"){for(;Je!="";)if(Je==="*"&&Tu()==="/"){Ar(),Ar();break}else Ar();t=!0}for(;Je===" "||Je==="	"||Je===`
`||Je==="\r";)Ar()}while(t);if(Je===""){Un=En.DELIMITER;return}var r=Je+Tu();if(dG[r]){Un=En.DELIMITER,De=r,Ar(),Ar();return}if(dG[Je]){Un=En.DELIMITER,De=Je,Ar();return}if(hG(Je)||Je==="-"){for(De+=Je,Ar();hG(Je);)De+=Je,Ar();De==="false"?De=!1:De==="true"?De=!0:isNaN(Number(De))||(De=Number(De)),Un=En.IDENTIFIER;return}if(Je==='"'){for(Ar();Je!=""&&(Je!='"'||Je==='"'&&Tu()==='"');)Je==='"'?(De+=Je,Ar()):Je==="\\"&&Tu()==="n"?(De+=`
`,Ar()):De+=Je,Ar();if(Je!='"')throw Nn('End of string " expected');Ar(),Un=En.IDENTIFIER;return}for(Un=En.UNKNOWN;Je!="";)De+=Je,Ar();throw new SyntaxError('Syntax error in part "'+sle(De,30)+'"')}function pAe(){var t={};if(dAe(),Pt(),De==="strict"&&(t.strict=!0,Pt()),(De==="graph"||De==="digraph")&&(t.type=De,Pt()),Un===En.IDENTIFIER&&(t.id=De,Pt()),De!="{")throw Nn("Angle bracket { expected");if(Pt(),rle(t),De!="}")throw Nn("Angle bracket } expected");if(Pt(),De!=="")throw Nn("End of file expected");return Pt(),delete t.node,delete t.edge,delete t.graph,t}function rle(t){for(;De!==""&&De!="}";)mAe(t),De===";"&&Pt()}function mAe(t){var e=nle(t);if(e){ile(t,e);return}var r=gAe(t);if(!r){if(Un!=En.IDENTIFIER)throw Nn("Identifier expected");var n=De;if(Pt(),De==="="){if(Pt(),Un!=En.IDENTIFIER)throw Nn("Identifier expected");t[n]=De,Pt()}else yAe(t,n)}}function nle(t){var e=null;if(De==="subgraph"&&(e={},e.type="subgraph",Pt(),Un===En.IDENTIFIER&&(e.id=De,Pt())),De==="{"){if(Pt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,rle(e),De!="}")throw Nn("Angle bracket } expected");Pt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function gAe(t){return De==="node"?(Pt(),t.node=Yf(),"node"):De==="edge"?(Pt(),t.edge=Yf(),"edge"):De==="graph"?(Pt(),t.graph=Yf(),"graph"):null}function yAe(t,e){var r={id:e},n=Yf();n&&(r.attr=n),ele(t,r),ile(t,e)}function ile(t,e){for(;De==="->"||De==="--";){var r,n=De;Pt();var i=nle(t);if(i)r=i;else{if(Un!=En.IDENTIFIER)throw Nn("Identifier or subgraph expected");r=De,ele(t,{id:r}),Pt()}var s=Yf(),o=tle(t,e,r,n,s);fAe(t,o),e=r}}function Yf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;De==="[";){for(Pt(),e={};De!==""&&De!="]";){if(Un!=En.IDENTIFIER)throw Nn("Attribute name expected");var o=De;if(Pt(),De!="=")throw Nn("Equal sign = expected");if(Pt(),Un!=En.IDENTIFIER)throw Nn("Attribute value expected");var a=De;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),Pt(),De==","&&Pt()}if(De!="]")throw Nn("Bracket ] expected");Pt()}if(Xa(s).call(s,"dir")){var u={};for(u.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)u.arrows.to=t;else if(i[t].value.from!=null)u.arrows.from=t;else throw Nn("Invalid value of arrows");else i[t].name==="dir"&&(u.dir=t);var d=i[u.dir].value;if(!Xa(s).call(s,"arrows"))if(d==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw Nn('Invalid dir type "'+d+'"');var h,f;if(d==="both")u.arrows.to&&u.arrows.from?(f=i[u.arrows.to].value.to.type,h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},No(i).call(i,u.arrows.from,1)):u.arrows.to?(f=i[u.arrows.to].value.to.type,h="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")u.arrows.to&&u.arrows.from?(f="",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f="",h="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="",h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(d==="none"){var p;u.arrows.to?p=u.arrows.to:p=u.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")u.arrows.to&&u.arrows.from?(f=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw Nn('Invalid dir type "'+d+'"');No(i).call(i,u.dir,1)}var m;if(Xa(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)hAe(i[t].attr,i[t].name,i[t].value);return e}function Nn(t){return new SyntaxError(t+', got "'+sle(De,30)+'" (char '+sh+")")}function sle(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function vAe(t,e,r){or(t)?kt(t).call(t,function(n){or(e)?kt(e).call(e,function(i){r(n,i)}):r(n,e)}):or(e)?kt(e).call(e,function(n){r(t,n)}):r(t,e)}function wj(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function fG(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];or(i)?kt(i).call(i,function(s){wj(r,s,t[n])}):typeof i=="string"?wj(r,i,t[n]):wj(r,n,t[n])}return r}function bAe(t){var e=uAe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;kt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};al(a,fG(o.attr,Zae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return al(a,fG(o.attr,SD)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};kt(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;kt(u=o.from.edges).call(u,function(h){var f=s(h);r.edges.push(f)})}if(vAe(a,l,function(h,f){var p=tle(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;kt(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function xAe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=th(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:th(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const wAe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},SAe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},_Ae={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},EAe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},NAe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},kAe={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},CAe={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},jAe={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},TAe={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},OAe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},PAe={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var IAe=Object.freeze({__proto__:null,cn:jAe,cs:PAe,de:SAe,en:wAe,es:_Ae,fr:OAe,it:EAe,nl:NAe,pt:kAe,ru:CAe,uk:TAe});function RAe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(nRe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class MAe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),u=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,u,s],[5*u,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class AAe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new MAe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var pG={},mG={},Sj={exports:{}},_j,gG;function DAe(){if(gG)return _j;gG=1;var t=at();return _j=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),_j}var Ej,yG;function $Ae(){if(yG)return Ej;yG=1;var t=at(),e=Gr(),r=Hs(),n=DAe(),i=Object.isExtensible,s=t(function(){});return Ej=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,Ej}var Nj,vG;function ole(){if(vG)return Nj;vG=1;var t=at();return Nj=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),Nj}var bG;function $b(){if(bG)return Sj.exports;bG=1;var t=Re(),e=ct(),r=Fm(),n=Gr(),i=on(),s=Qi().f,o=Pb(),a=aD(),l=$Ae(),u=Eb(),d=ole(),h=!1,f=u("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(E){for(var N=x(E),C=0,j=N.length;C<j;C++)if(N[C]===f){S(N,C,1);break}return N},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=Sj.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,Sj.exports}var kj,xG;function FAe(){if(xG)return kj;xG=1;var t=kr(),e=Fh(),r=t("iterator"),n=Array.prototype;return kj=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},kj}var Cj,wG;function ale(){if(wG)return Cj;wG=1;var t=$h(),e=JA(),r=jh(),n=Fh(),i=kr(),s=i("iterator");return Cj=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},Cj}var jj,SG;function qAe(){if(SG)return jj;SG=1;var t=ai(),e=Ko(),r=Ks(),n=Ph(),i=ale(),s=TypeError;return jj=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},jj}var Tj,_G;function _D(){if(_G)return Tj;_G=1;var t=ai(),e=Ks(),r=JA();return Tj=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},Tj}var Oj,EG;function Fb(){if(EG)return Oj;EG=1;var t=kb(),e=ai(),r=Ks(),n=Ph(),i=FAe(),s=Go(),o=Nr(),a=qAe(),l=ale(),u=_D(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return Oj=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,E,N,C,j,T,P,O=function(q){return _&&u(_,"normal"),new h(!0,q)},D=function(q){return y?(r(q),x?S(q[0],q[1],O):S(q[0],q[1])):x?S(q,O):S(q)};if(b)_=p.iterator;else if(w)_=p;else{if(E=l(p),!E)throw new d(n(p)+" is not iterable");if(i(E)){for(N=0,C=s(p);C>N;N++)if(j=D(p[N]),j&&o(f,j))return j;return new h(!1)}_=a(p,E)}for(T=b?p.next:_.next;!(P=e(T,_)).done;){try{j=D(P.value)}catch(q){u(_,"throw",q)}if(typeof j=="object"&&j&&o(f,j))return j}return new h(!1)},Oj}var Pj,NG;function ED(){if(NG)return Pj;NG=1;var t=Nr(),e=TypeError;return Pj=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},Pj}var Ij,kG;function ND(){if(kG)return Ij;kG=1;var t=Re(),e=Bt(),r=$b(),n=at(),i=Mh(),s=Fb(),o=ED(),a=Kr(),l=Gr(),u=jh(),d=lu(),h=Qi().f,f=wl().forEach,p=pr(),m=cu(),g=m.set,v=m.getterFor;return Ij=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",E=e[y],N=E&&E.prototype,C={},j;if(!p||!a(E)||!(S||N.forEach&&!n(function(){new E().entries().next()})))j=w.getConstructor(b,y,x,_),r.enable();else{j=b(function(O,D){g(o(O,T),{type:y,collection:new E}),u(D)||s(D,O[_],{that:O,AS_ENTRIES:x})});var T=j.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in N&&!(S&&O==="clear")&&i(T,O,function(q,$){var L=P(this).collection;if(!D&&S&&!l(q))return O==="get"?void 0:!1;var M=L[O](q===0?0:q,$);return D?this:M})}),S||h(T,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(j,y,!1,!0),C[y]=j,t({global:!0,forced:!0},C),S||w.setStrong(j,y,x),j},Ij}var Rj,CG;function kD(){if(CG)return Rj;CG=1;var t=zm();return Rj=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},Rj}var Mj,jG;function LAe(){if(jG)return Mj;jG=1;var t=_i(),e=lD(),r=kr(),n=pr(),i=r("species");return Mj=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},Mj}var Aj,TG;function lle(){if(TG)return Aj;TG=1;var t=Bm(),e=lD(),r=kD(),n=kb(),i=ED(),s=jh(),o=Fb(),a=uD(),l=dD(),u=LAe(),d=pr(),h=$b().fastKey,f=cu(),p=f.set,m=f.getterFor;return Aj={getConstructor:function(g,v,y,b){var w=g(function(N,C){i(N,x),p(N,{type:v,index:t(null),first:null,last:null,size:0}),d||(N.size=0),s(C)||o(C,N[b],{that:N,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(N,C,j){var T=S(N),P=E(N,C),O,D;return P?P.value=j:(T.last=P={index:D=h(C,!0),key:C,value:j,previous:O=T.last,next:null,removed:!1},T.first||(T.first=P),O&&(O.next=P),d?T.size++:N.size++,D!=="F"&&(T.index[D]=P)),N},E=function(N,C){var j=S(N),T=h(C),P;if(T!=="F")return j.index[T];for(P=j.first;P;P=P.next)if(P.key===C)return P};return r(x,{clear:function(){for(var C=this,j=S(C),T=j.first;T;)T.removed=!0,T.previous&&(T.previous=T.previous.next=null),T=T.next;j.first=j.last=null,j.index=t(null),d?j.size=0:C.size=0},delete:function(N){var C=this,j=S(C),T=E(C,N);if(T){var P=T.next,O=T.previous;delete j.index[T.index],T.removed=!0,O&&(O.next=P),P&&(P.previous=O),j.first===T&&(j.first=P),j.last===T&&(j.last=O),d?j.size--:C.size--}return!!T},forEach:function(C){for(var j=S(this),T=n(C,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:j.first;)for(T(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(C){return!!E(this,C)}}),r(x,y?{get:function(C){var j=E(this,C);return j&&j.value},set:function(C,j){return _(this,C===0?0:C,j)}}:{add:function(C){return _(this,C=C===0?0:C,C)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,E=S.last;E&&E.removed;)E=E.previous;return!S.target||!(S.last=E=E?E.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?E.key:_==="values"?E.value:[E.key,E.value],!1)},y?"entries":"values",!y,!0),u(v)}},Aj}var OG;function BAe(){if(OG)return mG;OG=1;var t=ND(),e=lle();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),mG}var PG;function zAe(){return PG||(PG=1,BAe()),pG}var IG={},Dj,RG;function cle(){return RG||(RG=1,Dj=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),Dj}var $j,MG;function VAe(){if(MG)return $j;MG=1;var t=_i(),e=cle(),r=t("Map");return $j={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},$j}var AG;function WAe(){if(AG)return IG;AG=1;var t=Re(),e=ct(),r=Ko(),n=Ho(),i=Fb(),s=VAe(),o=Ih(),a=at(),l=s.Map,u=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);u(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),IG}var DG={},Fj,$G;function UAe(){if($G)return Fj;$G=1;var t=ct(),e=Ah(),r=Xi(),n=Ho(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return Fj={codeAt:a(!1),charAt:a(!0)},Fj}var FG;function CD(){if(FG)return DG;FG=1;var t=UAe().charAt,e=Xi(),r=cu(),n=uD(),i=dD(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var u=a(this),d=u.string,h=u.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),u.index+=f.length,i(f,!1))}),DG}var qj,qG;function HAe(){if(qG)return qj;qG=1,qh(),zAe(),WAe(),CD();var t=_t();return qj=t.Map,qj}var Lj,LG;function KAe(){if(LG)return Lj;LG=1;var t=HAe();return Lh(),Lj=t,Lj}var Bj,BG;function GAe(){return BG||(BG=1,Bj=KAe()),Bj}var YAe=GAe(),jD=ze(YAe);class QAe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},br(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&xt(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new jD,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var zG={},VG;function XAe(){if(VG)return zG;VG=1;var t=Re();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),zG}var zj,WG;function JAe(){if(WG)return zj;WG=1,XAe();var t=_t();return zj=t.Number.isNaN,zj}var Vj,UG;function ZAe(){if(UG)return Vj;UG=1;var t=JAe();return Vj=t,Vj}var Wj,HG;function eDe(){return HG||(HG=1,Wj=ZAe()),Wj}var tDe=eDe(),dR=ze(tDe),KG={},Uj,GG;function rDe(){if(GG)return Uj;GG=1;var t=Bt(),e=t.isFinite;return Uj=Number.isFinite||function(n){return typeof n=="number"&&e(n)},Uj}var YG;function nDe(){if(YG)return KG;YG=1;var t=Re(),e=rDe();return t({target:"Number",stat:!0},{isFinite:e}),KG}var Hj,QG;function iDe(){if(QG)return Hj;QG=1,nDe();var t=_t();return Hj=t.Number.isFinite,Hj}var Kj,XG;function sDe(){if(XG)return Kj;XG=1;var t=iDe();return Kj=t,Kj}var Gj,JG;function oDe(){return JG||(JG=1,Gj=sDe()),Gj}var aDe=oDe(),Ql=ze(aDe),ZG={},eY;function lDe(){if(eY)return ZG;eY=1;var t=Re(),e=wl().some,r=Bh(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),ZG}var Yj,tY;function cDe(){if(tY)return Yj;tY=1,lDe();var t=an();return Yj=t("Array","some"),Yj}var Qj,rY;function uDe(){if(rY)return Qj;rY=1;var t=Nr(),e=cDe(),r=Array.prototype;return Qj=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},Qj}var Xj,nY;function dDe(){if(nY)return Xj;nY=1;var t=uDe();return Xj=t,Xj}var Jj,iY;function hDe(){return iY||(iY=1,Jj=dDe()),Jj}var fDe=hDe(),pDe=ze(fDe),Zj={exports:{}},sY={},oY;function mDe(){if(oY)return sY;oY=1;var t=Re(),e=pr(),r=Qi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),sY}var aY;function gDe(){if(aY)return Zj.exports;aY=1,mDe();var t=_t(),e=t.Object,r=Zj.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),Zj.exports}var eT,lY;function ule(){if(lY)return eT;lY=1;var t=gDe();return eT=t,eT}var tT,cY;function yDe(){if(cY)return tT;cY=1;var t=ule();return tT=t,tT}var rT,uY;function vDe(){if(uY)return rT;uY=1;var t=yDe();return rT=t,rT}var nT,dY;function bDe(){return dY||(dY=1,nT=vDe()),nT}var xDe=bDe(),wDe=ze(xDe),hY={},fY;function SDe(){if(fY)return hY;fY=1;var t=kr(),e=Qi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),hY}var pY={},mY;function _De(){return mY||(mY=1,hae()),pY}var gY={},yY;function EDe(){return yY||(yY=1,fae()),gY}var vY={},bY;function NDe(){if(bY)return vY;bY=1;var t=Qt();return t("metadata"),vY}var iT,xY;function kDe(){if(xY)return iT;xY=1;var t=vae();return SDe(),_De(),EDe(),NDe(),iT=t,iT}var wY={},sT,SY;function dle(){if(SY)return sT;SY=1;var t=_i(),e=ct(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return sT=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},sT}var _Y;function CDe(){if(_Y)return wY;_Y=1;var t=Re(),e=dle();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),wY}var EY={},oT,NY;function hle(){if(NY)return oT;NY=1;for(var t=Rh(),e=_i(),r=ct(),n=$m(),i=kr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),u=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return oT=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(u),w=b.length;y<w;y++)if(u[b[y]]==v)return!0}catch{}return!1},oT}var kY;function jDe(){if(kY)return EY;kY=1;var t=Re(),e=hle();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),EY}var CY={},jY;function TDe(){if(jY)return CY;jY=1;var t=Qt();return t("customMatcher"),CY}var TY={},OY;function ODe(){if(OY)return TY;OY=1;var t=Qt();return t("observable"),TY}var PY={},IY;function PDe(){if(IY)return PY;IY=1;var t=Re(),e=dle();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),PY}var RY={},MY;function IDe(){if(MY)return RY;MY=1;var t=Re(),e=hle();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),RY}var AY={},DY;function RDe(){if(DY)return AY;DY=1;var t=Qt();return t("matcher"),AY}var $Y={},FY;function MDe(){if(FY)return $Y;FY=1;var t=Qt();return t("metadataKey"),$Y}var qY={},LY;function ADe(){if(LY)return qY;LY=1;var t=Qt();return t("patternMatch"),qY}var BY={},zY;function DDe(){if(zY)return BY;zY=1;var t=Qt();return t("replaceAll"),BY}var aT,VY;function $De(){if(VY)return aT;VY=1;var t=kDe();return CDe(),jDe(),TDe(),ODe(),PDe(),IDe(),RDe(),MDe(),ADe(),DDe(),aT=t,aT}var lT,WY;function FDe(){return WY||(WY=1,lT=$De()),lT}var qDe=FDe(),Yg=ze(qDe),cT,UY;function LDe(){if(UY)return cT;UY=1,qh(),CD(),pae();var t=Ib();return cT=t.f("iterator"),cT}var uT,HY;function BDe(){if(HY)return uT;HY=1;var t=LDe();return Lh(),uT=t,uT}var dT,KY;function zDe(){if(KY)return dT;KY=1;var t=BDe();return dT=t,dT}var hT,GY;function VDe(){if(GY)return hT;GY=1;var t=zDe();return hT=t,hT}var fT,YY;function WDe(){return YY||(YY=1,fT=VDe()),fT}var UDe=WDe(),HDe=ze(UDe);function Up(t){"@babel/helpers - typeof";return Up=typeof Yg=="function"&&typeof HDe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Yg=="function"&&e.constructor===Yg&&e!==Yg.prototype?"symbol":typeof e},Up(t)}var pT,QY;function KDe(){if(QY)return pT;QY=1,mae();var t=Ib();return pT=t.f("toPrimitive"),pT}var mT,XY;function GDe(){if(XY)return mT;XY=1;var t=KDe();return mT=t,mT}var gT,JY;function YDe(){if(JY)return gT;JY=1;var t=GDe();return gT=t,gT}var yT,ZY;function QDe(){if(ZY)return yT;ZY=1;var t=YDe();return yT=t,yT}var vT,eQ;function XDe(){return eQ||(eQ=1,vT=QDe()),vT}var JDe=XDe(),ZDe=ze(JDe);function e$e(t,e){if(Up(t)!="object"||!t)return t;var r=t[ZDe];if(r!==void 0){var n=r.call(t,e);if(Up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t$e(t){var e=e$e(t,"string");return Up(e)=="symbol"?e:e+""}function vo(t,e,r){return(e=t$e(e))in t?wDe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var tQ={},bT,rQ;function r$e(){if(rQ)return bT;rQ=1;var t=Bt(),e=at(),r=ct(),n=Xi(),i=xae().trim,s=hD(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,u=l&&l.iterator,d=1/a(s+"-0")!==-1/0||u&&!e(function(){a(Object(u))});return bT=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,bT}var nQ;function n$e(){if(nQ)return tQ;nQ=1;var t=Re(),e=r$e();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),tQ}var xT,iQ;function i$e(){if(iQ)return xT;iQ=1,n$e();var t=_t();return xT=t.parseFloat,xT}var wT,sQ;function s$e(){if(sQ)return wT;sQ=1;var t=i$e();return wT=t,wT}var ST,oQ;function o$e(){return oQ||(oQ=1,ST=s$e()),ST}var a$e=o$e(),fle=ze(a$e),aQ={},lQ;function l$e(){if(lQ)return aQ;lQ=1;var t=Re(),e=at(),r=aD().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),aQ}var _T,cQ;function c$e(){if(cQ)return _T;cQ=1,l$e();var t=_t(),e=t.Object;return _T=function(n){return e.getOwnPropertyNames(n)},_T}var ET,uQ;function u$e(){if(uQ)return ET;uQ=1;var t=c$e();return ET=t,ET}var NT,dQ;function d$e(){return dQ||(dQ=1,NT=u$e()),NT}var h$e=d$e(),f$e=ze(h$e),kT,hQ;function p$e(){if(hQ)return kT;hQ=1,dae();var t=_t();return kT=t.Object.getOwnPropertySymbols,kT}var CT,fQ;function m$e(){if(fQ)return CT;fQ=1;var t=p$e();return CT=t,CT}var jT,pQ;function g$e(){return pQ||(pQ=1,jT=m$e()),jT}var y$e=g$e(),ll=ze(y$e),TT={exports:{}},mQ={},gQ;function v$e(){if(gQ)return mQ;gQ=1;var t=Re(),e=at(),r=bs(),n=Nb().f,i=pr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),mQ}var yQ;function b$e(){if(yQ)return TT.exports;yQ=1,v$e();var t=_t(),e=t.Object,r=TT.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),TT.exports}var OT,vQ;function x$e(){if(vQ)return OT;vQ=1;var t=b$e();return OT=t,OT}var PT,bQ;function w$e(){return bQ||(bQ=1,PT=x$e()),PT}var S$e=w$e(),Sl=ze(S$e),xQ={},wQ;function _$e(){if(wQ)return xQ;wQ=1;var t=Re(),e=pr(),r=GPe(),n=bs(),i=Nb(),s=Tb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),u=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=u(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),xQ}var IT,SQ;function E$e(){if(SQ)return IT;SQ=1,_$e();var t=_t();return IT=t.Object.getOwnPropertyDescriptors,IT}var RT,_Q;function N$e(){if(_Q)return RT;_Q=1;var t=E$e();return RT=t,RT}var MT,EQ;function k$e(){return EQ||(EQ=1,MT=N$e()),MT}var C$e=k$e(),cl=ze(C$e),AT={exports:{}},NQ={},kQ;function j$e(){if(kQ)return NQ;kQ=1;var t=Re(),e=pr(),r=oD().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),NQ}var CQ;function T$e(){if(CQ)return AT.exports;CQ=1,j$e();var t=_t(),e=t.Object,r=AT.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),AT.exports}var DT,jQ;function O$e(){if(jQ)return DT;jQ=1;var t=T$e();return DT=t,DT}var $T,TQ;function P$e(){return TQ||(TQ=1,$T=O$e()),$T}var I$e=P$e(),qb=ze(I$e),FT,OQ;function R$e(){return OQ||(OQ=1,FT=ule()),FT}var M$e=R$e(),Lb=ze(M$e);function TD(t,e){const r=["node","edge","label"];let n=!0;const i=da(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(xt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=da(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function hR(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function l0(t){return typeof t=="string"&&t!==""}function ple(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var qT,PQ;function A$e(){if(PQ)return qT;PQ=1,qh();var t=an();return qT=t("Array","values"),qT}var LT,IQ;function D$e(){if(IQ)return LT;IQ=1;var t=A$e();return LT=t,LT}var BT,RQ;function $$e(){if(RQ)return BT;RQ=1,Lh();var t=$h(),e=on(),r=Nr(),n=D$e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return BT=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},BT}var zT,MQ;function F$e(){return MQ||(MQ=1,zT=$$e()),zT}var q$e=F$e(),mle=ze(q$e);class L$e{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=br({},mle(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};br(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const B$e={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class AQ{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=B$e[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class z$e{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let u=0;return o!==""&&(u=this.ctx.measureText(o).width),{width:u,values:l}};this.lines=new L$e(s)}process(e){if(!l0(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,u=o[a].text;this.splitStringIntoLines(u,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,u=o[a].text;this.lines.append(u,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new AQ(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new AQ(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Is(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Is(o).call(o,0,a),r),i[0]=Is(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=Is(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=Is(i).call(i,o)}}}}const pf=["bold","ital","boldital","mono"];class md{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),l0(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(tt(pf,r=>{this.fontOptions[r]={}}),md.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}tt(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=da(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=da(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=da(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=da(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=da(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=da(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),Tt(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=TD("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};md.parseFontString(s,i)&&(i=s),tt(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(xt(pf).call(pf,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(md.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<pf.length;++n){const i=pf[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);tt(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let u=0;u<a.blocks.length;u++){const d=a.blocks[u];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=qi(i,o),s=qi(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,u,d){return u==="normal"?d==="mod"?"":l[d]:l[u][d]!==void 0?l[u][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new z$e(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class du{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Wm(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let V$e=class extends du{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),eae(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class OD extends du{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),nD(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let W$e=class extends OD{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class U$e extends OD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class _l extends du{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),aPe(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const u=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,u,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function DQ(t,e){var r=rr(t);if(ll){var n=ll(t);e&&(n=Gn(n).call(n,function(i){return Sl(t,i).enumerable})),r.push.apply(r,n)}return r}function H$e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=DQ(Object(i),!0)).call(r,function(s){vo(t,s,i[s])}):cl?qb(t,cl(i)):kt(n=DQ(Object(i))).call(n,function(s){Lb(t,s,Sl(i,s))})}return t}class K$e extends _l{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:H$e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class G$e extends du{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),tae(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let Y$e=class extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class Q$e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class $Q extends du{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),rR(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class X$e extends du{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let J$e=class extends OD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const u=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:u)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=qi(f,o.opacity),p=qi(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Wm(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class Z$e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class e4e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class t4e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class r4e extends du{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let n4e=class extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class i4e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function FQ(t,e){var r=rr(t);if(ll){var n=ll(t);e&&(n=Gn(n).call(n,function(i){return Sl(t,i).enumerable})),r.push.apply(r,n)}return r}function qQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=FQ(Object(i),!0)).call(r,function(s){vo(t,s,i[s])}):cl?qb(t,cl(i)):kt(n=FQ(Object(i))).call(n,function(s){Lb(t,s,Sl(i,s))})}return t}class qt{constructor(e,r,n,i,s,o){this.options=Za(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new md(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;xt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=xt(r=this.edges).call(r,e);if(n!=-1){var i;No(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");qt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ls(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ls(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=fle(e.value)),qt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=TD("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&qt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(qt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Gn(i=f$e(r)).call(i,u=>r[u]!=null);l.push("font"),o0(l,e,a),e.color=aR(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(o0(["color","fixed","shadow"],e,r,n),qt.checkMass(r),e.opacity!==void 0&&(qt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(qt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!qt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Mi(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=aR(r.color);Gae(e.color,a)}else n===!0&&r.color===null&&(e.color=Za(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Za(i.font)),qt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Mi(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=qi(e.borderColor,r),e.color=qi(e.color,r),e.shadowColor=qi(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),qt.updateGroupOptions(this.options,qQ(qQ({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new V$e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new W$e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new U$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new K$e(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new G$e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new Y$e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new Q$e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new $Q(this.options,this.body,this.labelModule);break;case"icon":this.shape=new X$e(this.options,this.body,this.labelModule);break;case"image":this.shape=new J$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new Z$e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new e4e(this.options,this.body,this.labelModule);break;case"star":this.shape=new t4e(this.options,this.body,this.labelModule);break;case"text":this.shape=new r4e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new n4e(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new i4e(this.options,this.body,this.labelModule);break;default:this.shape=new $Q(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&hR(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),hR(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",Jae),e.mass=1}}}class s4e{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=se(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,u){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(u-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Za(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",se(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",se(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{tt(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(qt.parseOptions(this.options,e),e.opacity!==void 0&&(dR(e.opacity)||!Ql(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of rr(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(Hoe("id",e))this.body.data.nodes=e;else if(or(e))this.body.data.nodes=new eh,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new eh;else throw new TypeError("Array or DataSet expected");if(n&&tt(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;tt(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const u=r[o];l!==void 0?l.setOptions(u)&&(s=!0):(s=!0,l=this.create(u),i[a]=l)}!s&&n!==void 0&&(s=pDe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;tt(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(or(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),ko(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var LQ={},BQ;function o4e(){if(BQ)return LQ;BQ=1;var t=Re(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,u=0,d=arguments.length,h=0,f,p;u<d;)f=r(arguments[u++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),LQ}var VT,zQ;function a4e(){if(zQ)return VT;zQ=1,o4e();var t=_t();return VT=t.Math.hypot,VT}var WT,VQ;function l4e(){if(VQ)return WT;VQ=1;var t=a4e();return WT=t,WT}var UT,WQ;function c4e(){return WQ||(WQ=1,UT=l4e()),UT}var u4e=c4e(),d4e=ze(u4e);class dr{static transform(e,r){or(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],u=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*u,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let h4e=class extends dr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class f4e extends dr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class p4e{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class m4e{static draw(e,r){const n={x:-.4,y:0};dr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class g4e{static draw(e,r){const n={x:-.3,y:0};dr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class y4e{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class v4e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class b4e{static draw(e,r){const n={x:-.4,y:0};return dr.transform(n,r),nD(e,n.x,n.y,r.length*.4),!0}}class x4e{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class w4e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class S4e{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class _4e{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class gle{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return h4e.draw(e,r);case"circle":return b4e.draw(e,r);case"box":return w4e.draw(e,r);case"crow":return p4e.draw(e,r);case"curve":return m4e.draw(e,r);case"diamond":return S4e.draw(e,r);case"inv_curve":return g4e.draw(e,r);case"triangle":return y4e.draw(e,r);case"inv_triangle":return v4e.draw(e,r);case"bar":return x4e.draw(e,r);case"vee":return _4e.draw(e,r);case"arrow":default:return f4e.draw(e,r)}}}function UQ(t,e){var r=rr(t);if(ll){var n=ll(t);e&&(n=Gn(n).call(n,function(i){return Sl(t,i).enumerable})),r.push.apply(r,n)}return r}function HQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=UQ(Object(i),!0)).call(r,function(s){vo(t,s,i[s])}):cl?qb(t,cl(i)):kt(n=UQ(Object(i))).call(n,function(s){Lb(t,s,Sl(i,s))})}return t}class yle{constructor(e,r,n){vo(this,"color",{}),vo(this,"colorDirty",!0),vo(this,"hoverWidth",1.5),vo(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=or(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,u]=this._getCircleData(e);this._circle(e,r,a,l,u)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)rae(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,u]=this._getCircleData(e);this._circle(e,r,a,l,u)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Is(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=ple(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,u=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const v=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,v)+m,b=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-b;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<u);return HQ(HQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=qi(this.from.options.color.border,r.opacity),s=qi(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?qi(this.to.options.color.border,r.opacity):qi(this.from.options.color.border,r.opacity)}else return qi(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,u=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:u,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:u,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,u]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-u)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,u=a*a+l*l;let d=((s-e)*a+(o-r)*l)/u;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,u,d,h,f,p;const m=o.width;r==="from"?(u=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(u=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(u=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(u!=d){const w=d4e(u.x-d.x,u.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(u,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(u.y-d.y,u.x-d.x),l=this._findBorderPosition(u,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),E=this.getPoint(.5-S,n);a=Math.atan2(_.y-E.y,_.x-E.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,E=this.options.selfReference.angle+Math.PI,N=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:E,direction:-1});a=N.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=N}else if(r==="to"){const _=this.options.selfReference.angle,E=this.options.selfReference.angle+Math.PI,N=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:E,direction:1});a=N.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=N}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const v=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:v,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,gle.draw(e,s)&&(this.enableShadow(e,r),Wm(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=or(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function KQ(t,e){var r=rr(t);if(ll){var n=ll(t);e&&(n=Gn(n).call(n,function(i){return Sl(t,i).enumerable})),r.push.apply(r,n)}return r}function GQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=KQ(Object(i),!0)).call(r,function(s){vo(t,s,i[s])}):cl?qb(t,cl(i)):kt(n=KQ(Object(i))).call(n,function(s){Lb(t,s,Sl(i,s))})}return t}class PD extends yle{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,u=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(u=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(u.y-d.y,u.x-d.x),g=u.distanceToBorder(r,m)+f,v=Math.sqrt(Math.pow(d.x-u.x,2)+Math.pow(d.y-u.y,2)),y=g-v;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return GQ(GQ({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,u,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(u=this._getDistanceToLine(m,g,f,p,s,o),l=u<l?u:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class YQ extends PD{constructor(e,r,n){super(e,r,n),vo(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class QQ extends PD{constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class E4e extends PD{constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let u=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,v=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(d,h,g,v,s,o);u=y<u?y:u}d=g,h=v}return u}}class XQ extends E4e{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class JQ extends yle{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),u=e.distanceToBorder(r,s),d=(l-u)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class el{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Za(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new md(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;el.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=fle(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=TD("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Vh(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(Ql(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(Ql(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),l0(r.label)?e.label=r.label:l0(e.label)||(e.label=void 0),Mi(e,r,"smooth",i),Mi(e,r,"shadow",i),Mi(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=yc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Mi(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=yc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=xt(a).call(a,"to")!=-1,e.arrows.middle.enabled=xt(a).call(a,"middle")!=-1,e.arrows.from.enabled=xt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Mi(e.arrows,r.arrows,"to",i.arrows),Mi(e.arrows,r.arrows,"middle",i.arrows),Mi(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Vm(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=yc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=fd(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)Tt(l,i.color,!1,n);else for(const u in l)Object.prototype.hasOwnProperty.call(l,u)&&delete l[u];if(fd(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let u=!1;a.color!==void 0&&(l.color=a.color,u=!0),a.highlight!==void 0&&(l.highlight=a.highlight,u=!0),a.hover!==void 0&&(l.hover=a.hover,u=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),u===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Za(i.color));n===!0&&r.font===null&&(e.font=Za(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof YQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof XQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof QQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof JQ&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new YQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new XQ(this.options,this.body,this.labelModule):this.edgeType=new QQ(this.options,this.body,this.labelModule):this.edgeType=new JQ(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=ple(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();hR(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class N4e{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=se(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const u=1/(o-s);return Math.max(0,(l-s)*u)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Tt(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],u=e.body.data.edges.get(a);if(u!=null){const d=u.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",se(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",se(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{tt(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){el.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(Hoe("id",e))this.body.data.edges=e;else if(or(e))this.body.data.edges=new eh,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new eh;else throw new TypeError("Array or DataSet expected");if(n&&tt(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){tt(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;tt(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){tt(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new el(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];tt(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];kt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class vle{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=Db("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let v=1;v<i;v++){const y=e[r[v]],b=y.x,w=y.y;y.options.mass>0&&(b<s&&(s=b),b>a&&(a=b),w<o&&(o=w),w>l&&(l=w))}const u=Math.abs(a-s)-Math.abs(l-o);u>0?(o-=.5*u,l+=.5*u):(s+=.5*u,a-=.5*u);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let v=0;v<i;v++)n=e[r[v]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class k4e{constructor(e,r,n){this._rng=Db("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const u=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=u[d[g]];for(let v=g+1;v<d.length;v++)l=u[d[v]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class C4e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const u=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<u?m=-Math.pow(p*f,2)+Math.pow(p*u,2):m=0,f!==0&&(m=m/f);const g=d*m,v=h*m;n[o.id].x-=g,n[o.id].y-=v,n[l.id].x+=g,n[l.id].y+=v}}}}}class HT{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,u=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=u),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=u)}}class j4e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const u=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=u[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let v=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];v+=p[S].x,y+=p[S].y}const b=v/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=b,p[S].y-=w}}}class Sy{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const u=o[l];i=s[u],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class T4e extends vle{constructor(e,r,n){super(e,r,n),this._rng=Db("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,u=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=u}}class O4e extends Sy{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class P4e{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},br(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,o0(["stabilization"],this.options,e),Mi(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||dR(r.x))&&(r.x=0),(typeof r.y!="number"||dR(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new T4e(this.body,this.physicsBody,e),this.edgesSolver=new HT(this.body,this.physicsBody,e),this.gravitySolver=new O4e(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new k4e(this.body,this.physicsBody,e),this.edgesSolver=new HT(this.body,this.physicsBody,e),this.gravitySolver=new Sy(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new C4e(this.body,this.physicsBody,e),this.edgesSolver=new j4e(this.body,this.physicsBody,e),this.gravitySolver=new Sy(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new vle(this.body,this.physicsBody,e),this.edgesSolver=new HT(this.body,this.physicsBody,e),this.gravitySolver=new Sy(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=se(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=r0();this.physicsTick(),(r0()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&ko(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=rr(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,ko(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;ko(se(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),u=Math.min(Math.max(5,l),15),d=3*u,h=lR((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=u,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,gle.draw(e,{type:"arrow",point:f,angle:p,length:d}),Wm(e).call(e)}}}const Xr=[];for(let t=0;t<256;++t)Xr.push((t+256).toString(16).slice(1));function I4e(t,e=0){return(Xr[t[e+0]]+Xr[t[e+1]]+Xr[t[e+2]]+Xr[t[e+3]]+"-"+Xr[t[e+4]]+Xr[t[e+5]]+"-"+Xr[t[e+6]]+Xr[t[e+7]]+"-"+Xr[t[e+8]]+Xr[t[e+9]]+"-"+Xr[t[e+10]]+Xr[t[e+11]]+Xr[t[e+12]]+Xr[t[e+13]]+Xr[t[e+14]]+Xr[t[e+15]]).toLowerCase()}let KT;const R4e=new Uint8Array(16);function M4e(){if(!KT){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");KT=crypto.getRandomValues.bind(crypto)}return KT(R4e)}const A4e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var ZQ={randomUUID:A4e};function D4e(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??M4e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,I4e(n)}function Qf(t,e,r){return ZQ.randomUUID&&!t?ZQ.randomUUID():D4e(t)}class Cn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(Tt(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):Tt(n,e.options,!0),n}}class $4e extends qt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],tt(r.edges,n=>{delete this.containedEdges[n.id]}),tt(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},tt(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},tt(r.edges,n=>{tt(this.edges,i=>{var s,o;const a=xt(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(tt(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),No(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class F4e{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},br(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};tt(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,tt(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let u=0;u<this.body.nodeIndices.length;u++){const d={},h={},f=this.body.nodeIndices[u],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(v){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=Cn.cloneOptions(v);return r.joinCondition(y)};let g=!0;for(let v=0;v<a.length;v++){o=a[v];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(rr(d).length>0&&rr(h).length>0&&g===!0){const y=function(){for(let b=0;b<i.length;++b)for(const w in d)if(i[b].nodes[w]!==void 0)return i[b]}();if(y!==void 0){for(const b in d)y.nodes[b]===void 0&&(y.nodes[b]=d[b]);for(const b in h)y.edges[b]===void 0&&(y.edges[b]=h[b])}else i.push({nodes:d,edges:h})}}}}for(let u=0;u<i.length;u++)this._cluster(i[u].nodes,i[u].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,u=Cn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=Cn.cloneOptions(this.body.nodes[p]);r.joinCondition(u,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=th(n=rr(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];xt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,u,d;const h=rr(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let v=0;v<a.edges.length;v++)s=a.edges[v],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,u=s.fromId,d=u):(l=s.toId,u=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:u,toId:l}))}const p=[],m=function(g){for(let v=0;v<p.length;v++){const y=p[v],b=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(b||w)return y}return null};for(let g=0;g<f.length;g++){const v=f[g],y=v.edge;let b=m(v);b===null?(b=this._createClusteredEdge(v.fromId,v.toId,y,i),p.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(rr(e).length==0||rr(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=Tt({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=Cn.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=Cn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+Qf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const u=this.body.functions.createNode(o,$4e);u.containedNodes=e,u.containedEdges=r,u.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=u,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=rr(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=xt(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else tt(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const u=[];for(let d=0;d<i.edges.length;d++)u.push(i.edges[d]);for(let d=0;d<u.length;d++){const h=u[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],v=this.body.edges[g];if(v!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[v.id]=v,delete l[v.id];let b=v.fromId,w=v.toId;v.toId==f?w=p.clusterId:b=p.clusterId,this._createClusteredEdge(b,w,v,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(v)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),gc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return gc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const u=l.clusteringEdgeReplacingIds;if(u===void 0)i.push(a);else for(let d=0;d<u.length;++d){const h=u[d];xt(r).call(r,u)!==-1||xt(n).call(n,u)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const u=this.body.nodes[this.body.nodeIndices[l]];u.edges.length>i&&(i=u.edges.length),e+=u.edges.length,r+=Math.pow(u.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=Cn.cloneOptions(n,"edge");Tt(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+Qf(),s!==void 0&&Tt(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof el){const s=r,o={};o[s.id]=s,r=o}if(e instanceof qt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return tt(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{tt(this.body.nodes,u=>{u.isCluster===!0&&l(u)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let u=0;u<r.length;u++)delete l.containedNodes[r[u]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];tt(this.clusteredEdges,l=>{const u=this.body.edges[l];(u===void 0||!u.endPointsValid())&&(n[l]=l)}),i(function(l){tt(l.containedEdges,(u,d)=>{!u.endPointsValid()&&!n[d]&&(n[d]=d)})}),tt(this.body.edges,(l,u)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;tt(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[u]=u)}),i(l=>{tt(n,u=>{delete l.containedEdges[u],tt(l.edges,(d,h)=>{if(d.id===u){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),tt(n,l=>{delete this.clusteredEdges[l]}),tt(n,l=>{delete this.body.edges[l]});const s=rr(this.body.edges);tt(s,l=>{const u=this.body.edges[l],d=this._isClusteredNode(u.fromId)||this._isClusteredNode(u.toId);if(d!==this._isClusteredEdge(u.id))if(d){const h=this._getClusterNodeForNode(u.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[u.fromId],u,h);const f=this._getClusterNodeForNode(u.toId);f!==void 0&&this._clusterEdges(this.body.nodes[u.toId],u,f)}else delete this._clusterEdges[l],this._restoreEdge(u)});let o=!1,a=!0;for(;a;){const l=[];i(function(u){const d=rr(u.containedNodes).length,h=u.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(u.id)});for(let u=0;u<l.length;++u)this.openCluster(l[u],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class q4e{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},br(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=ko(()=>{var r;this.zooming=!1,se(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",se(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&Vh(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(se(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,u=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:u.y,left:u.x,bottom:d.y,right:d.x},f=[];for(let v=0;v<i.length;v++)if(s=n[i[v]],s.hover)a.push(i[v]);else if(s.isSelected())o.push(i[v]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}return{drawExternalLabels:()=>{for(const v of f)v()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var GT,eX;function L4e(){if(eX)return GT;eX=1,_ae();var t=_t();return GT=t.setInterval,GT}var YT,tX;function B4e(){return tX||(tX=1,YT=L4e()),YT}var z4e=B4e(),V4e=ze(z4e);function c0(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function ble(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class W4e{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},br(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",se(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&Vh(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=V4e(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=se(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;kt(e=gc(r=No(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(xt(e).call(e,"%")!==-1||xt(e).call(e,"px")!==-1)return e;if(xt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new pd(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:pd.DIRECTION_ALL}),c0(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new pd(this.frame),ble(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function U4e(t,e){const r=br({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!or(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class H4e{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",se(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",se(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=U4e(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=Cn.getRange(this.body.nodes,e.nodes);else if(r===!0){let u=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(u+=1);if(u>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=Cn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=Cn.getRange(this.body.nodes,e.nodes);const u=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/u,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:Cn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!Ql(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!Ql(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!Ql(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!Ql(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=se(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=se(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=eAe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=se(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function rX(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){u(d,"keydown")},l=function(d){u(d,"keyup")},u=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class K4e{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new pd(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;c0(a,se(n=this._fit).call(n,this))}else{var i;c0(a,se(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new pd(this.canvas.frame);ble(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=se(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=rX({container:window,preventDefault:!0}):this.keycharm=rX({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,u,d,h,f,p,m,g,v,y,b,w,x,S,_,E,N;se(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),se(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),se(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),se(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),se(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(u=this.keycharm).call(u,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),se(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),se(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),se(v=this.keycharm).call(v,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),se(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(b=this.keycharm).call(b,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(E=this.keycharm).call(E,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(N=this.keycharm).call(N,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class G4e{constructor(e,r,n){var i,s,o,a,l,u,d,h,f,p,m,g,v;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new K4e(e,r),this.body.eventListeners.onTap=se(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=se(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=se(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=se(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=se(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=se(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=se(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=se(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=se(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=se(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=se(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=se(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=se(v=this.getPointer).call(v,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},br(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(o0(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Mi(this.options,e,"keyboard"),e.tooltip&&(br(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=aR(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-QMe(this.canvas.frame.canvas),y:e.y-XMe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];xt(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=br({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;kt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Gn(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});kt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(kt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const u=this.canvas.canvasToDOM(i);this.drag.pointer.x=u.x,this.drag.pointer.y=u.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=ko(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,u=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=u[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=u[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,u=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=u[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=u[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new lAe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var nX={},iX={},sX;function Y4e(){if(sX)return iX;sX=1;var t=ND(),e=lle();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),iX}var oX;function Q4e(){return oX||(oX=1,Y4e()),nX}var aX={},QT,lX;function hu(){if(lX)return QT;lX=1;var t=Ph(),e=TypeError;return QT=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},QT}var XT,cX;function fu(){if(cX)return XT;cX=1;var t=_i(),e=cle(),r=t("Set"),n=r.prototype;return XT={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},XT}var JT,uX;function pu(){if(uX)return JT;uX=1;var t=ai();return JT=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},JT}var ZT,dX;function Qm(){if(dX)return ZT;dX=1;var t=pu();return ZT=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},ZT}var eO,hX;function ID(){if(hX)return eO;hX=1;var t=fu(),e=Qm(),r=t.Set,n=t.add;return eO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},eO}var tO,fX;function Xm(){return fX||(fX=1,tO=function(t){return t.size}),tO}var rO,pX;function X4e(){return pX||(pX=1,rO=function(t){return{iterator:t,next:t.next,done:!1}}),rO}var nO,mX;function mu(){if(mX)return nO;mX=1;var t=Ko(),e=Ks(),r=ai(),n=Ah(),i=X4e(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,u=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},nO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new u(d,f)},nO}var iO,gX;function J4e(){if(gX)return iO;gX=1;var t=hu(),e=fu(),r=ID(),n=Xm(),i=mu(),s=Qm(),o=pu(),a=e.has,l=e.remove;return iO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},iO}var sO,yX;function gu(){return yX||(yX=1,sO=function(){return!1}),sO}var vX;function Z4e(){if(vX)return aX;vX=1;var t=Re(),e=J4e(),r=at(),n=gu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return a.has(1)&&a.clear(),{done:u,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),aX}var bX={},oO,xX;function e5e(){if(xX)return oO;xX=1;var t=hu(),e=fu(),r=Xm(),n=mu(),i=Qm(),s=pu(),o=e.Set,a=e.add,l=e.has;return oO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},oO}var wX;function t5e(){if(wX)return bX;wX=1;var t=Re(),e=at(),r=e5e(),n=gu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),bX}var SX={},aO,_X;function r5e(){if(_X)return aO;_X=1;var t=hu(),e=fu().has,r=Xm(),n=mu(),i=Qm(),s=pu(),o=_D();return aO=function(l){var u=t(this),d=n(l);if(r(u)<=d.size)return i(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(u,f))return o(h,"normal",!1)})!==!1},aO}var EX;function n5e(){if(EX)return SX;EX=1;var t=Re(),e=r5e(),r=gu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),SX}var NX={},lO,kX;function i5e(){if(kX)return lO;kX=1;var t=hu(),e=Xm(),r=Qm(),n=mu();return lO=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},lO}var CX;function s5e(){if(CX)return NX;CX=1;var t=Re(),e=i5e(),r=gu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),NX}var jX={},cO,TX;function o5e(){if(TX)return cO;TX=1;var t=hu(),e=fu().has,r=Xm(),n=mu(),i=pu(),s=_D();return cO=function(a){var l=t(this),u=n(a);if(r(l)<u.size)return!1;var d=u.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},cO}var OX;function a5e(){if(OX)return jX;OX=1;var t=Re(),e=o5e(),r=gu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),jX}var PX={},uO,IX;function l5e(){if(IX)return uO;IX=1;var t=hu(),e=fu(),r=ID(),n=mu(),i=pu(),s=e.add,o=e.has,a=e.remove;return uO=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},uO}var dO,RX;function xle(){return RX||(RX=1,dO=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),dO}var MX;function c5e(){if(MX)return PX;MX=1;var t=Re(),e=l5e(),r=xle(),n=gu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),PX}var AX={},hO,DX;function u5e(){if(DX)return hO;DX=1;var t=hu(),e=fu().add,r=ID(),n=mu(),i=pu();return hO=function(o){var a=t(this),l=n(o).getIterator(),u=r(a);return i(l,function(d){e(u,d)}),u},hO}var $X;function d5e(){if($X)return AX;$X=1;var t=Re(),e=u5e(),r=xle(),n=gu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),AX}var fO,FX;function h5e(){if(FX)return fO;FX=1,qh(),Q4e(),Z4e(),t5e(),n5e(),s5e(),a5e(),c5e(),d5e(),CD();var t=_t();return fO=t.Set,fO}var pO,qX;function f5e(){if(qX)return pO;qX=1;var t=h5e();return Lh(),pO=t,pO}var mO,LX;function p5e(){return LX||(LX=1,mO=f5e()),mO}var m5e=p5e(),ga=ze(m5e),BX={},zX={},gO,VX;function g5e(){if(VX)return gO;VX=1;var t=ct(),e=kD(),r=$b().getWeakData,n=ED(),i=Ks(),s=jh(),o=Gr(),a=Fb(),l=wl(),u=on(),d=cu(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),v=0,y=function(x){return x.frozen||(x.frozen=new b)},b=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return b.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},gO={getConstructor:function(x,S,_,E){var N=x(function(P,O){n(P,C),h(P,{type:S,id:v++,frozen:null}),s(O)||a(O,P[E],{that:P,AS_ENTRIES:_})}),C=N.prototype,j=f(S),T=function(P,O,D){var q=j(P),$=r(i(O),!0);return $===!0?y(q).set(O,D):$[q.id]=D,P};return e(C,{delete:function(P){var O=j(this);if(!o(P))return!1;var D=r(P);return D===!0?y(O).delete(P):D&&u(D,O.id)&&delete D[O.id]},has:function(O){var D=j(this);if(!o(O))return!1;var q=r(O);return q===!0?y(D).has(O):q&&u(q,D.id)}}),e(C,_?{get:function(O){var D=j(this);if(o(O)){var q=r(O);if(q===!0)return y(D).get(O);if(q)return q[D.id]}},set:function(O,D){return T(this,O,D)}}:{add:function(O){return T(this,O,!0)}}),N}},gO}var WX;function y5e(){if(WX)return zX;WX=1;var t=ole(),e=Bt(),r=ct(),n=kD(),i=$b(),s=ND(),o=g5e(),a=Gr(),l=cu().enforce,u=at(),d=lae(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,v=h.freeze,y=h.seal,b=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,E=r(_.set),N=function(){return t&&u(function(){var P=v([]);return E(new S,P,1),!m(P)})};if(d)if(b){w=o.getConstructor(x,"WeakMap",!0),i.enable();var C=r(_.delete),j=r(_.has),T=r(_.get);n(_,{delete:function(P){if(a(P)&&!p(P)){var O=l(this);return O.frozen||(O.frozen=new w),C(this,P)||O.frozen.delete(P)}return C(this,P)},has:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),j(this,O)||D.frozen.has(O)}return j(this,O)},get:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),j(this,O)?T(this,O):D.frozen.get(O)}return T(this,O)},set:function(O,D){if(a(O)&&!p(O)){var q=l(this);q.frozen||(q.frozen=new w),j(this,O)?E(this,O,D):q.frozen.set(O,D)}else E(this,O,D);return this}})}else N()&&n(_,{set:function(O,D){var q;return f(O)&&(m(O)?q=v:g(O)&&(q=y)),E(this,O,D),q&&q(O),this}});return zX}var UX;function v5e(){return UX||(UX=1,y5e()),BX}var yO,HX;function b5e(){if(HX)return yO;HX=1,qh(),v5e();var t=_t();return yO=t.WeakMap,yO}var vO,KX;function x5e(){if(KX)return vO;KX=1;var t=b5e();return Lh(),vO=t,vO}var bO,GX;function w5e(){return GX||(GX=1,bO=x5e()),bO}var S5e=w5e(),Jm=ze(S5e);function Xf(t,e,r){_5e(t,e),e.set(t,r)}function _5e(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fR(t,e,r){return t.set(wle(t,e),r),r}function jt(t,e){return t.get(wle(t,e))}function wle(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function YX(t,e){const r=new ga;for(const n of e)t.has(n)||r.add(n);return r}var Ou=new Jm,es=new Jm;class QX{constructor(){Xf(this,Ou,new ga),Xf(this,es,new ga)}get size(){return jt(es,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)jt(es,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)jt(es,this).delete(i)}clear(){jt(es,this).clear()}getSelection(){return[...jt(es,this)]}getChanges(){return{added:[...YX(jt(Ou,this),jt(es,this))],deleted:[...YX(jt(es,this),jt(Ou,this))],previous:[...new ga(jt(Ou,this))],current:[...new ga(jt(es,this))]}}commit(){const e=this.getChanges();fR(Ou,this,jt(es,this)),fR(es,this,new ga(jt(Ou,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var Pl=new Jm,Il=new Jm,xO=new Jm;class E5e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Xf(this,Pl,new QX),Xf(this,Il,new QX),Xf(this,xO,void 0),fR(xO,this,e)}get sizeNodes(){return jt(Pl,this).size}get sizeEdges(){return jt(Il,this).size}getNodes(){return jt(Pl,this).getSelection()}getEdges(){return jt(Il,this).getSelection()}addNodes(){jt(Pl,this).add(...arguments)}addEdges(){jt(Il,this).add(...arguments)}deleteNodes(e){jt(Pl,this).delete(e)}deleteEdges(e){jt(Il,this).delete(e)}clear(){jt(Pl,this).clear(),jt(Il,this).clear()}commit(){const e={nodes:jt(Pl,this).commit(),edges:jt(Il,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return jt(xO,this).call(this,e,...n),e}}class N5e{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new E5e,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},br(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&Vh(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof qt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],u=o[l];if(u.connected){const d=u.from.x,h=u.from.y,f=u.to.x,p=u.to.y,m=u.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof qt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof qt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof qt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof qt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof qt&&n.id!=s||n instanceof el)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof el&&n.id!=s||n instanceof qt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=rr(this.hoverObj.edges).length,o=rr(this.hoverObj.nodes).length,a=n instanceof el&&s===0&&o===0,l=n instanceof qt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof qt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return th(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return th(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var XX={},wO,JX;function k5e(){if(JX)return wO;JX=1;var t=Dh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var u=e(s/2),d=r(t(n,0,u),i),h=r(t(n,u),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return wO=r,wO}var SO,ZX;function C5e(){if(ZX)return SO;ZX=1;var t=Th(),e=t.match(/firefox\/(\d+)/i);return SO=!!e&&+e[1],SO}var _O,eJ;function j5e(){if(eJ)return _O;eJ=1;var t=Th();return _O=/MSIE|Trident/.test(t),_O}var EO,tJ;function T5e(){if(tJ)return EO;tJ=1;var t=Th(),e=t.match(/AppleWebKit\/(\d+)\./);return EO=!!e&&+e[1],EO}var rJ;function O5e(){if(rJ)return XX;rJ=1;var t=Re(),e=ct(),r=Ko(),n=Ei(),i=Go(),s=bae(),o=Xi(),a=at(),l=k5e(),u=Bh(),d=C5e(),h=j5e(),f=Dm(),p=T5e(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=u("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var E="",N,C,j,T;for(N=65;N<76;N++){switch(C=String.fromCharCode(N),N){case 66:case 69:case 70:case 72:j=3;break;case 68:case 71:j=4;break;default:j=2}for(T=0;T<47;T++)m.push({k:C+T,v:j})}for(m.sort(function(P,O){return O.v-P.v}),T=0;T<m.length;T++)C=m[T].k.charAt(0),E.charAt(E.length-1)!==C&&(E+=C);return E!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(E){return function(N,C){return C===void 0?-1:N===void 0?1:E!==void 0?+E(N,C)||0:o(N)>o(C)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(N){N!==void 0&&r(N);var C=n(this);if(x)return N===void 0?g(C):g(C,N);var j=[],T=i(C),P,O;for(O=0;O<T;O++)O in C&&v(j,C[O]);for(l(j,_(N)),P=i(j),O=0;O<P;)C[O]=j[O++];for(;O<T;)s(C,O++);return C}}),XX}var NO,nJ;function P5e(){if(nJ)return NO;nJ=1,O5e();var t=an();return NO=t("Array","sort"),NO}var kO,iJ;function I5e(){if(iJ)return kO;iJ=1;var t=Nr(),e=P5e(),r=Array.prototype;return kO=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},kO}var CO,sJ;function R5e(){if(sJ)return CO;sJ=1;var t=I5e();return CO=t,CO}var jO,oJ;function M5e(){return oJ||(oJ=1,jO=R5e()),jO}var A5e=M5e(),gd=ze(A5e),aJ={},TO,lJ;function D5e(){if(lJ)return TO;lJ=1;var t=Ko(),e=Ei(),r=_b(),n=Go(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,u,d,h){var f=e(l),p=r(f),m=n(f);if(t(u),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=u(h,p[g],g,f));return h}};return TO={left:o(!1),right:o(!0)},TO}var OO,cJ;function $5e(){if(cJ)return OO;cJ=1;var t=wae();return OO=t==="NODE",OO}var uJ;function F5e(){if(uJ)return aJ;uJ=1;var t=Re(),e=D5e().left,r=Bh(),n=Dm(),i=$5e(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),aJ}var PO,dJ;function q5e(){if(dJ)return PO;dJ=1,F5e();var t=an();return PO=t("Array","reduce"),PO}var IO,hJ;function L5e(){if(hJ)return IO;hJ=1;var t=Nr(),e=q5e(),r=Array.prototype;return IO=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},IO}var RO,fJ;function B5e(){if(fJ)return RO;fJ=1;var t=L5e();return RO=t,RO}var MO,pJ;function z5e(){return pJ||(pJ=1,MO=B5e()),MO}var V5e=z5e(),Sle=ze(V5e);class _le{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class W5e extends _le{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){gd(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class U5e extends _le{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){gd(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var mJ={},gJ;function H5e(){if(gJ)return mJ;gJ=1;var t=Re(),e=wl().every,r=Bh(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),mJ}var AO,yJ;function K5e(){if(yJ)return AO;yJ=1,H5e();var t=an();return AO=t("Array","every"),AO}var DO,vJ;function G5e(){if(vJ)return DO;vJ=1;var t=Nr(),e=K5e(),r=Array.prototype;return DO=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},DO}var $O,bJ;function Y5e(){if(bJ)return $O;bJ=1;var t=G5e();return $O=t,$O}var FO,xJ;function Q5e(){return xJ||(xJ=1,FO=Y5e()),FO}var X5e=Q5e(),Ele=ze(X5e);function J5e(t,e){const r=new ga;return kt(t).call(t,n=>{var i;kt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),kt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function Z5e(t){return Nle(e=>{var r,n;return Ele(r=Gn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function eFe(t){return Nle(e=>{var r,n;return Ele(r=Gn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function Nle(t,e,r,n){var i;const s=yc(null),o=Sle(i=[...mle(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var u,d;if(!n.has(h))continue;const v=s[g.id]+l;if(kt(u=Gn(d=g.edges).call(d,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(u,y=>{const b=y[a],w=s[b];(w==null||e(v,w))&&(s[b]=v,p.push(y[r]))}),m>o)return J5e(n,s);++m}}return s}class tFe{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new jD;let n=0;const i=gd(e=[...new ga(gRe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return rr(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class rFe{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+r0()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},br(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(Vh(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Mi(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),Tt(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=Db(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const u=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(u==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const u=this.body.nodes[e[l]];u.predefinedPosition===!1&&(u.x+=(.5-this._rng())*a,u.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=Cn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=Cn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new tFe;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let b=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;b+=x+this.options.hierarchical.treeSpacing,s(w+1,b)}},s=(y,b)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,b)},o=()=>{const y=[];for(let b=0;b<this.hierarchical.numTrees();b++)y.push(this.direction.getTreeSize(b));return y},a=(y,b)=>{if(!b[y.id]&&(b[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],b)}},l=function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const E in y)if(Object.prototype.hasOwnProperty.call(y,E)){const N=e.body.nodes[E],C=e.hierarchical.levels[N.id],j=e.direction.getPosition(N),[T,P]=e._getSpaceAroundNode(N,y);w=Math.min(T,w),x=Math.min(P,x),C<=b&&(S=Math.min(j,S),_=Math.max(j,_))}return[S,_,w,x]},u=(y,b)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(b.id);return Math.min(w,x)},d=(y,b,w)=>{const x=this.hierarchical;for(let S=0;S<b.length;S++){const _=b[S],E=x.distributionOrdering[_];if(E.length>1)for(let N=0;N<E.length-1;N++){const C=E[N],j=E[N+1];x.hasSameParent(C,j)&&x.inSameSubNetwork(C,j)&&y(C,j,w)}}},h=function(y,b){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(b),_=Math.abs(S-x),E=e.options.hierarchical.nodeSpacing;if(_>E){const N={},C={};a(y,N),a(b,C);const j=u(y,b),T=l(N,j),P=l(C,j),O=T[1],D=P[0],q=P[2];if(Math.abs(O-D)>E){let L=O-D+E;L<-q+E&&(L=-q+E),L<0&&(e._shiftBlock(b.id,L),r=!0,w===!0&&e._centerParent(b))}}},f=(y,b)=>{const w=b.id,x=b.edges,S=this.hierarchical.levels[b.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,E={},N=[];for(let q=0;q<x.length;q++){const $=x[q];if($.toId!=$.fromId){const L=$.toId==w?$.from:$.to;E[x[q].id]=L,this.hierarchical.levels[L.id]<S&&N.push($)}}const C=(q,$)=>{let L=0;for(let M=0;M<$.length;M++)if(E[$[M].id]!==void 0){const B=this.direction.getPosition(E[$[M].id])-q;L+=B/Math.sqrt(B*B+_)}return L},j=(q,$)=>{let L=0;for(let M=0;M<$.length;M++)if(E[$[M].id]!==void 0){const B=this.direction.getPosition(E[$[M].id])-q;L-=_*Math.pow(B*B+_,-1.5)}return L},T=(q,$)=>{let L=this.direction.getPosition(b);const M={};for(let B=0;B<q;B++){const Y=C(L,$),Q=j(L,$),pe=40,H=Math.max(-pe,Math.min(pe,Math.round(Y/Q)));if(L=L-H,M[L]!==void 0)break;M[L]=B}return L},P=q=>{const $=this.direction.getPosition(b);if(n[b.id]===void 0){const pe={};a(b,pe),n[b.id]=pe}const L=l(n[b.id]),M=L[2],B=L[3],Y=q-$;let Q=0;Y>0?Q=Math.min(Y,B-this.options.hierarchical.nodeSpacing):Y<0&&(Q=-Math.min(-Y,M-this.options.hierarchical.nodeSpacing)),Q!=0&&(this._shiftBlock(b.id,Q),r=!0)},O=q=>{const $=this.direction.getPosition(b),[L,M]=this._getSpaceAroundNode(b),B=q-$;let Y=$;B>0?Y=Math.min($+(M-this.options.hierarchical.nodeSpacing),q):B<0&&(Y=Math.max($-(L-this.options.hierarchical.nodeSpacing),q)),Y!==$&&(this.direction.setPosition(b,Y),r=!0)};let D=T(y,N);P(D),D=T(y,x),O(D)},p=y=>{let b=this.hierarchical.getLevels();b=gc(b).call(b);for(let w=0;w<y;w++){r=!1;for(let x=0;x<b.length;x++){const S=b[x],_=this.hierarchical.distributionOrdering[S];for(let E=0;E<_.length;E++)f(1e3,_[E])}if(r!==!0)break}},m=y=>{let b=this.hierarchical.getLevels();b=gc(b).call(b);for(let w=0;w<y&&(r=!1,d(h,b,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},v=()=>{let y=this.hierarchical.getLevels();y=gc(y).call(y);for(let b=0;b<y.length;b++){const w=y[b],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&v(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,u=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);u=Math.min(u,h-o)}}return[l,u]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[u,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=rr(e[n]);i=this._indexArrayToNodes(i),gd(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let u=l*s;s>0&&(u=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,u,n),this._validatePositionAndContinue(a,n,u),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);gd(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],u=this.hierarchical.levels[l.id];if(u>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,u),this._validatePositionAndContinue(l,u,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return tt(e.edges,n=>{var i;xt(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;tt(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return tt(e,i=>{n.push(Number(i))}),gd(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;tt(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(Cn.cloneOptions(i,"node"),Cn.cloneOptions(s,"node"),Cn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=Sle(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new jD);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=eFe(r):this.hierarchical.levels=Z5e(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let u=0;u<l.length;u++){const d=l[u];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let u=0;u<l.length;u++){const d=l[u];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let u=0;u<l.length;u++){const d=l[u];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new W5e(this):this.direction=new U5e(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class nFe{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},br(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",se(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",se(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,Tt(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,se(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",se(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,se(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",se(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=Tt({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,se(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",se(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",se(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",se(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",se(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",se(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,se(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",se(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",se(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",se(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",se(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",u=>{const d=o.edgeType.findBorderPositions(u);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=Tt({},this.options.controlNodeStyle);n.id="targetNode"+Qf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},ua(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,se(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(ua(this.editModeDiv),ua(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of No(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),ua(this.manipulationDiv),ua(this.editModeDiv),ua(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,se(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Vm(rr(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new pd(e,{});c0(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=xt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;No(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=xt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;No(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=br({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=br({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+Qf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(xt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(xt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:Qf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const ce="string",ie="boolean",W="number",Nf="array",Ce="object",kle="dom",iFe="any",qO=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],LO={borderWidth:{number:W},borderWidthSelected:{number:W,undefined:"undefined"},brokenImage:{string:ce,undefined:"undefined"},chosen:{label:{boolean:ie,function:"function"},node:{boolean:ie,function:"function"},__type__:{object:Ce,boolean:ie}},color:{border:{string:ce},background:{string:ce},highlight:{border:{string:ce},background:{string:ce},__type__:{object:Ce,string:ce}},hover:{border:{string:ce},background:{string:ce},__type__:{object:Ce,string:ce}},__type__:{object:Ce,string:ce}},opacity:{number:W,undefined:"undefined"},fixed:{x:{boolean:ie},y:{boolean:ie},__type__:{object:Ce,boolean:ie}},font:{align:{string:ce},color:{string:ce},size:{number:W},face:{string:ce},background:{string:ce},strokeWidth:{number:W},strokeColor:{string:ce},vadjust:{number:W},multi:{boolean:ie,string:ce},bold:{color:{string:ce},size:{number:W},face:{string:ce},mod:{string:ce},vadjust:{number:W},__type__:{object:Ce,string:ce}},boldital:{color:{string:ce},size:{number:W},face:{string:ce},mod:{string:ce},vadjust:{number:W},__type__:{object:Ce,string:ce}},ital:{color:{string:ce},size:{number:W},face:{string:ce},mod:{string:ce},vadjust:{number:W},__type__:{object:Ce,string:ce}},mono:{color:{string:ce},size:{number:W},face:{string:ce},mod:{string:ce},vadjust:{number:W},__type__:{object:Ce,string:ce}},__type__:{object:Ce,string:ce}},group:{string:ce,number:W,undefined:"undefined"},heightConstraint:{minimum:{number:W},valign:{string:ce},__type__:{object:Ce,boolean:ie,number:W}},hidden:{boolean:ie},icon:{face:{string:ce},code:{string:ce},size:{number:W},color:{string:ce},weight:{string:ce,number:W},__type__:{object:Ce}},id:{string:ce,number:W},image:{selected:{string:ce,undefined:"undefined"},unselected:{string:ce,undefined:"undefined"},__type__:{object:Ce,string:ce}},imagePadding:{top:{number:W},right:{number:W},bottom:{number:W},left:{number:W},__type__:{object:Ce,number:W}},label:{string:ce,undefined:"undefined"},labelHighlightBold:{boolean:ie},level:{number:W,undefined:"undefined"},margin:{top:{number:W},right:{number:W},bottom:{number:W},left:{number:W},__type__:{object:Ce,number:W}},mass:{number:W},physics:{boolean:ie},scaling:{min:{number:W},max:{number:W},label:{enabled:{boolean:ie},min:{number:W},max:{number:W},maxVisible:{number:W},drawThreshold:{number:W},__type__:{object:Ce,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:Ce}},shadow:{enabled:{boolean:ie},color:{string:ce},size:{number:W},x:{number:W},y:{number:W},__type__:{object:Ce,boolean:ie}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:ie,array:Nf},borderRadius:{number:W},interpolation:{boolean:ie},useImageSize:{boolean:ie},useBorderWithImage:{boolean:ie},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ce}},size:{number:W},title:{string:ce,dom:kle,undefined:"undefined"},value:{number:W,undefined:"undefined"},widthConstraint:{minimum:{number:W},maximum:{number:W},__type__:{object:Ce,boolean:ie,number:W}},x:{number:W},y:{number:W},__type__:{object:Ce}},sFe={configure:{enabled:{boolean:ie},filter:{boolean:ie,string:ce,array:Nf,function:"function"},container:{dom:kle},showButton:{boolean:ie},__type__:{object:Ce,boolean:ie,string:ce,array:Nf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:ie},scaleFactor:{number:W},type:{string:qO},imageHeight:{number:W},imageWidth:{number:W},src:{string:ce},__type__:{object:Ce,boolean:ie}},middle:{enabled:{boolean:ie},scaleFactor:{number:W},type:{string:qO},imageWidth:{number:W},imageHeight:{number:W},src:{string:ce},__type__:{object:Ce,boolean:ie}},from:{enabled:{boolean:ie},scaleFactor:{number:W},type:{string:qO},imageWidth:{number:W},imageHeight:{number:W},src:{string:ce},__type__:{object:Ce,boolean:ie}},__type__:{string:["from","to","middle"],object:Ce}},endPointOffset:{from:{number:W},to:{number:W},__type__:{object:Ce,number:W}},arrowStrikethrough:{boolean:ie},background:{enabled:{boolean:ie},color:{string:ce},size:{number:W},dashes:{boolean:ie,array:Nf},__type__:{object:Ce,boolean:ie}},chosen:{label:{boolean:ie,function:"function"},edge:{boolean:ie,function:"function"},__type__:{object:Ce,boolean:ie}},color:{color:{string:ce},highlight:{string:ce},hover:{string:ce},inherit:{string:["from","to","both"],boolean:ie},opacity:{number:W},__type__:{object:Ce,string:ce}},dashes:{boolean:ie,array:Nf},font:{color:{string:ce},size:{number:W},face:{string:ce},background:{string:ce},strokeWidth:{number:W},strokeColor:{string:ce},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:W},multi:{boolean:ie,string:ce},bold:{color:{string:ce},size:{number:W},face:{string:ce},mod:{string:ce},vadjust:{number:W},__type__:{object:Ce,string:ce}},boldital:{color:{string:ce},size:{number:W},face:{string:ce},mod:{string:ce},vadjust:{number:W},__type__:{object:Ce,string:ce}},ital:{color:{string:ce},size:{number:W},face:{string:ce},mod:{string:ce},vadjust:{number:W},__type__:{object:Ce,string:ce}},mono:{color:{string:ce},size:{number:W},face:{string:ce},mod:{string:ce},vadjust:{number:W},__type__:{object:Ce,string:ce}},__type__:{object:Ce,string:ce}},hidden:{boolean:ie},hoverWidth:{function:"function",number:W},label:{string:ce,undefined:"undefined"},labelHighlightBold:{boolean:ie},length:{number:W,undefined:"undefined"},physics:{boolean:ie},scaling:{min:{number:W},max:{number:W},label:{enabled:{boolean:ie},min:{number:W},max:{number:W},maxVisible:{number:W},drawThreshold:{number:W},__type__:{object:Ce,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:Ce}},selectionWidth:{function:"function",number:W},selfReferenceSize:{number:W},selfReference:{size:{number:W},angle:{number:W},renderBehindTheNode:{boolean:ie},__type__:{object:Ce}},shadow:{enabled:{boolean:ie},color:{string:ce},size:{number:W},x:{number:W},y:{number:W},__type__:{object:Ce,boolean:ie}},smooth:{enabled:{boolean:ie},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:W},forceDirection:{string:["horizontal","vertical","none"],boolean:ie},__type__:{object:Ce,boolean:ie}},title:{string:ce,undefined:"undefined"},width:{number:W},widthConstraint:{maximum:{number:W},__type__:{object:Ce,boolean:ie,number:W}},value:{number:W,undefined:"undefined"},__type__:{object:Ce}},groups:{useDefaultGroups:{boolean:ie},__any__:LO,__type__:{object:Ce}},interaction:{dragNodes:{boolean:ie},dragView:{boolean:ie},hideEdgesOnDrag:{boolean:ie},hideEdgesOnZoom:{boolean:ie},hideNodesOnDrag:{boolean:ie},hover:{boolean:ie},keyboard:{enabled:{boolean:ie},speed:{x:{number:W},y:{number:W},zoom:{number:W},__type__:{object:Ce}},bindToWindow:{boolean:ie},autoFocus:{boolean:ie},__type__:{object:Ce,boolean:ie}},multiselect:{boolean:ie},navigationButtons:{boolean:ie},selectable:{boolean:ie},selectConnectedEdges:{boolean:ie},hoverConnectedEdges:{boolean:ie},tooltipDelay:{number:W},zoomView:{boolean:ie},zoomSpeed:{number:W},__type__:{object:Ce}},layout:{randomSeed:{undefined:"undefined",number:W,string:ce},improvedLayout:{boolean:ie},clusterThreshold:{number:W},hierarchical:{enabled:{boolean:ie},levelSeparation:{number:W},nodeSpacing:{number:W},treeSpacing:{number:W},blockShifting:{boolean:ie},edgeMinimization:{boolean:ie},parentCentralization:{boolean:ie},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ce,boolean:ie}},__type__:{object:Ce}},manipulation:{enabled:{boolean:ie},initiallyActive:{boolean:ie},addNode:{boolean:ie,function:"function"},addEdge:{boolean:ie,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ce,boolean:ie,function:"function"}},deleteNode:{boolean:ie,function:"function"},deleteEdge:{boolean:ie,function:"function"},controlNodeStyle:LO,__type__:{object:Ce,boolean:ie}},nodes:LO,physics:{enabled:{boolean:ie},barnesHut:{theta:{number:W},gravitationalConstant:{number:W},centralGravity:{number:W},springLength:{number:W},springConstant:{number:W},damping:{number:W},avoidOverlap:{number:W},__type__:{object:Ce}},forceAtlas2Based:{theta:{number:W},gravitationalConstant:{number:W},centralGravity:{number:W},springLength:{number:W},springConstant:{number:W},damping:{number:W},avoidOverlap:{number:W},__type__:{object:Ce}},repulsion:{centralGravity:{number:W},springLength:{number:W},springConstant:{number:W},nodeDistance:{number:W},damping:{number:W},__type__:{object:Ce}},hierarchicalRepulsion:{centralGravity:{number:W},springLength:{number:W},springConstant:{number:W},nodeDistance:{number:W},damping:{number:W},avoidOverlap:{number:W},__type__:{object:Ce}},maxVelocity:{number:W},minVelocity:{number:W},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:ie},iterations:{number:W},updateInterval:{number:W},onlyDynamicEdges:{boolean:ie},fit:{boolean:ie},__type__:{object:Ce,boolean:ie}},timestep:{number:W},adaptiveTimestep:{boolean:ie},wind:{x:{number:W},y:{number:W},__type__:{object:Ce}},__type__:{object:Ce,boolean:ie}},autoResize:{boolean:ie},clickToUse:{boolean:ie},locale:{string:ce},locales:{__any__:{any:iFe},__type__:{object:Ce}},height:{string:ce},width:{string:ce},__type__:{object:Ce}},Cle={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},oFe=(t,e,r)=>{var n;return!!(Xa(t).call(t,"physics")&&Xa(n=Cle.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class aFe{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],u={};i[l]=u;for(let d=0;d<r.length;d++)u[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],u=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],v=Math.min(f[m],f[l]+u[m]);f[m]=v,g[h]=v}}}return i}}class lFe{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new aFe}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),u=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<u;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const u=r[l];if(n[u].predefinedPosition!==!0||n[u].isCluster===!0&&e===!0||n[u].options.fixed.x!==!0||n[u].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(u);i<d&&(i=d,s=u,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const u=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,E=s[S].y,N=h[S],C=f[S],j=1/((u-_)**2+(d-E)**2)**1.5;o+=N*(1-C*(d-E)**2*j),a+=N*(C*(u-_)*(d-E)*j),l+=N*(1-C*(u-_)**2*j)}}const p=o,m=a,g=r,v=l,y=n,b=(g/p+y/m)/(m/p-v/m),w=-(m*b+g)/p;s[e].x+=w,s[e].y+=b,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let u=n;u<e.length;u++){const d=e[u];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][u]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][u],a+=this.E_matrix[i][u][0],l+=this.E_matrix[i][u][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let u=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],v=n[f].x,y=n[f].y,b=1/Math.sqrt((a-v)**2+(l-y)**2),w=s[f]*(a-v-o[f]*(a-v)*b),x=s[f]*(l-y-o[f]*(l-y)*b);i[h]=[w,x],u+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[u,d]}}function Ne(t,e,r){var n,i,s,o;if(!(this instanceof Ne))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:IAe,clickToUse:!1},br(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:se(n=this.on).call(n,this),off:se(i=this.off).call(i,this),emit:se(s=this.emit).call(s,this),once:se(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new AAe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new QAe,this.canvas=new W4e(this.body),this.selectionHandler=new N5e(this.body,this.canvas),this.interactionHandler=new G4e(this.body,this.canvas,this.selectionHandler),this.view=new H4e(this.body,this.canvas),this.renderer=new q4e(this.body,this.canvas),this.physics=new P4e(this.body),this.layoutEngine=new rFe(this.body),this.clustering=new F4e(this.body),this.manipulation=new nFe(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new s4e(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new N4e(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new lFe(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}nae(Ne.prototype);Ne.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(cAe.validate(t,sFe)===!0&&console.error("%cErrors have been found in the supplied options object.",Jae),Vh(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=RAe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new aAe(this,this.body.container,Cle,this.canvas.pixelRatio,oFe)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Tt(n.nodes,this.nodesHandler.options),Tt(n.edges,this.edgesHandler.options),Tt(n.layout,this.layoutEngine.options),Tt(n.interaction,this.selectionHandler.options),Tt(n.interaction,this.renderer.options),Tt(n.interaction,this.interactionHandler.options),Tt(n.manipulation,this.manipulation.options),Tt(n.physics,this.physics.options),Tt(n.global,this.canvas.options),Tt(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new oAe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};Ne.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};Ne.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};Ne.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=bAe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=xAe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};Ne.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];ua(this.body.container)};Ne.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};Ne.prototype.isActive=function(){return!this.activator||this.activator.active};Ne.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};Ne.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};Ne.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};Ne.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};Ne.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};Ne.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};Ne.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};Ne.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};Ne.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};Ne.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};Ne.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};Ne.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};Ne.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};Ne.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};Ne.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};Ne.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};Ne.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};Ne.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};Ne.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};Ne.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};Ne.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};Ne.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};Ne.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};Ne.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};Ne.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};Ne.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};Ne.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};Ne.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};Ne.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};Ne.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};Ne.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};Ne.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};Ne.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};Ne.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};Ne.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};Ne.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};Ne.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};Ne.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};Ne.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};Ne.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Ne.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Ne.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};Ne.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};Ne.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};Ne.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};Ne.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};Ne.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};Ne.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};Ne.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};Ne.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};Ne.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};Ne.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function cFe({graphData:t,startPersonId:e,onNodeClick:r}){const n=k.useRef(null),i=k.useRef(null),s=Fn(),o=k.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);k.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new eh(t.nodes),h=new eh(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new Ne(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),v={},y=new Set;m.forEach(([b,w])=>{if(y.has(b)||y.has(w))return;const x=g[b],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;v[b]={x:_-60,y:x.y},v[w]={x:_+60,y:S.y},y.add(b),y.add(w)}),Object.entries(v).forEach(([b,w])=>{p.moveNode(b,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},u=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):c.jsxs("div",{className:"relative w-full h-full",children:[c.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[c.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:c.jsx(vme,{className:"w-4 h-4"})}),c.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:c.jsx(bme,{className:"w-4 h-4"})}),c.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:c.jsx(rre,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),c.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const uFe=["parent","child","spouse","lover","partner"];function dFe(t){return uFe.includes(t==null?void 0:t.toLowerCase())}function hFe(t){return(t==null?void 0:t.toLowerCase())==="parent"}function fFe(t){return(t==null?void 0:t.toLowerCase())==="child"}function pFe(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function mFe(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var w,x,S,_;const p=h.name||((w=h.title)==null?void 0:w.rendered)||h.title||`Person ${f}`,m=Tn(p);let g=null,v=((x=h.acf)==null?void 0:x.birth_date)||null;if(v){const E=new Date(v);isNaN(E.getTime())||(g=Math.floor((new Date-E)/(365.25*24*60*60*1e3)))}let y="";switch((S=h.acf)==null?void 0:S.gender){case"male":y="";break;case"female":y="";break;case"non_binary":case"other":case"prefer_not_to_say":y="";break}let b="";if(v)try{const E=new Date(v);if(!isNaN(E.getTime())){const N=String(E.getDate()).padStart(2,"0"),C=String(E.getMonth()+1).padStart(2,"0"),j=E.getFullYear();b=`${N}-${C}-${j}`}}catch{}return{id:f,name:m,gender:((_=h.acf)==null?void 0:_.gender)||"",genderSymbol:y,photo:h.thumbnail||null,age:g,birthDate:v,formattedBirthDate:b}}const u=o.get(t);for(u&&n.set(t,l(u,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!dFe(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const v=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===v||`${w.from}-${w.to}`===y)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(hFe(w))i.push({from:g,to:h,type:"parent-child"});else if(fFe(w))i.push({from:h,to:g,type:"parent-child"});else if(pFe(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function gFe(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(v=>{s.set(v.id,[]),o.set(v.id,[]),a.set(v.id,[])}),i.forEach(v=>{var y,b,w,x;v.type==="parent-child"?((y=s.get(v.to))==null||y.push(v.from),(b=o.get(v.from))==null||b.push(v.to)):v.type==="spouse"&&((w=a.get(v.from))==null||w.push(v.to),(x=a.get(v.to))==null||x.push(v.from))});const l=new Map,u=new Set,d=[{id:e,generation:0}];for(l.set(e,0),u.add(e);d.length>0;){const{id:v,generation:y}=d.shift(),b=s.get(v)||[];for(const S of b)u.has(S)||(u.add(S),l.set(S,y-1),d.push({id:S,generation:y-1}));const w=o.get(v)||[];for(const S of w)u.has(S)||(u.add(S),l.set(S,y+1),d.push({id:S,generation:y+1}));const x=a.get(v)||[];for(const S of x)u.has(S)||(u.add(S),l.set(S,y),d.push({id:S,generation:y}))}n.forEach(v=>{l.has(v.id)||l.set(v.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((v,y)=>{f.set(y,v-h)});function p(v,y,b=!1){const w=v?v.split(" ").map(E=>E[0]).join("").toUpperCase().slice(0,2):"?";let x,S;b?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(v=>{const y=f.get(v.id)||0,b=v.id===e,w=r[v.id]||!1;let x=v.name;w&&(x=v.name+" ");let S=[x],_="";v.genderSymbol&&(_+=v.genderSymbol+" "),v.age!==null&&(_+=v.age+" "),v.formattedBirthDate&&(_+=v.formattedBirthDate),_.trim()&&S.push(_.trim());const E=v.photo||p(v.name,b,w);let N="#d1d5db";return b?N="#f59e0b":w&&(N="#9ca3af"),{id:v.id,label:S.join(`
`),level:y,shape:"circularImage",image:E,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:N,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:b?3:2,data:{...v,isDeceased:w}}}),g=i.map((v,y)=>{const b=v.type==="spouse";return{id:`edge-${y}`,from:v.from,to:v.to,arrows:{to:{enabled:!1}},color:{color:b?"#ec4899":"#9ca3af",highlight:b?"#db2777":"#6b7280"},width:2,dashes:b?[5,5]:!1,smooth:!1,length:b?50:300}});return{nodes:m,edges:g}}function yFe(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var u,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((u=o.relationship_type)==null?void 0:u.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function vFe(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function bFe(){var p,m;const{id:t}=dh(),e=Fn(),r=parseInt(t,10),{data:n,isLoading:i}=lre(t),{data:s=[],isLoading:o}=Gc(),{data:a=[]}=st({queryKey:["relationship-types"],queryFn:async()=>(await Ze.getRelationshipTypes()).data}),l=k.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),u=cy({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await _e.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=k.useMemo(()=>{const g={};return u.forEach((v,y)=>{if(v.data&&l[y]){const b=l[y],w=v.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[b]=w}}),g},[u,l]);mh(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=k.useMemo(()=>{if(!n||!s.length)return null;try{const g=yFe(s);a.length>0&&vFe(g,a);const v=mFe(r,s,g);return!v||v.nodes.length===0?null:gFe(v,r,d)}catch{return null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?c.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(Le,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(ph,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),c.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),c.jsx("div",{className:"card p-6",children:c.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?c.jsx(cFe,{graphData:h,startPersonId:r,onNodeClick:f}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),c.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),c.jsx(Le,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function xFe({isOpen:t,onClose:e}){const r=Fn(),n=nge(),{register:i,handleSubmit:s,reset:o,formState:{errors:a}}=Ws({defaultValues:{title:"",description:""}});k.useEffect(()=>{t&&o({title:"",description:""})},[t,o]);const l=async u=>{const d=await n.mutateAsync({title:u.title,content:u.description,status:"publish"});e(),r(`/workspaces/${d.id}`)};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create Workspace"}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:s(l),children:[c.jsxs("div",{className:"px-6 py-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),c.jsx("input",{type:"text",...i("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Sales Team"}),a.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{...i("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"What's this workspace for?"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:n.isPending,className:"btn-primary",children:n.isPending?"Creating...":"Create Workspace"})]})]})]})})]}):null}function wFe({role:t,isOwner:e}){if(e)return c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:[c.jsx(Qte,{className:"w-3 h-3"}),"Owner"]});const r={admin:{icon:TM,bg:"bg-purple-100",text:"text-purple-800",label:"Admin"},member:{icon:gn,bg:"bg-blue-100",text:"text-blue-800",label:"Member"},viewer:{icon:Jte,bg:"bg-gray-100",text:"text-gray-800",label:"Viewer"}},n=r[t]||r.member,i=n.icon;return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 ${n.bg} ${n.text} text-xs rounded-full`,children:[c.jsx(i,{className:"w-3 h-3"}),n.label]})}function SFe({workspace:t}){return c.jsx(Le,{to:`/workspaces/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900 truncate",children:t.title}),t.description&&c.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:t.description}),c.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[c.jsx(wFe,{role:t.role,isOwner:t.is_owner}),c.jsxs("span",{className:"text-sm text-gray-500",children:[t.member_count," member",t.member_count!==1?"s":""]})]})]})})})}function _Fe(){const[t,e]=k.useState(!1),{data:r,isLoading:n,error:i}=z0();return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspaces"}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(sr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Create Workspace"})]})]}),n&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load workspaces."})}),!n&&!i&&(r==null?void 0:r.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(gn,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No workspaces yet"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Create a workspace to start collaborating with others."}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(sr,{className:"w-4 h-4 mr-2"}),"Create Workspace"]})]}),!n&&!i&&(r==null?void 0:r.length)>0&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(s=>c.jsx(SFe,{workspace:s},s.id))}),c.jsx(xFe,{isOpen:t,onClose:()=>e(!1)})]})}function EFe({isOpen:t,onClose:e,workspaceId:r,workspaceName:n}){var d,h,f;const i=cge(),{register:s,handleSubmit:o,reset:a,formState:{errors:l}}=Ws({defaultValues:{email:"",role:"member"}});k.useEffect(()=>{t&&a({email:"",role:"member"})},[t,a]);const u=async p=>{await i.mutateAsync({workspaceId:r,email:p.email,role:p.role}),e()};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Invite to Workspace"}),c.jsx("p",{className:"text-sm text-gray-500",children:n})]}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(gt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:o(u),children:[c.jsxs("div",{className:"px-6 py-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),c.jsxs("div",{className:"relative",children:[c.jsx(A0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"email",...s("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email address"}}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"colleague@example.com"})]}),l.email&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.email.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c.jsxs("select",{...s("role"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"admin",children:"Admin - Can manage members and settings"}),c.jsx("option",{value:"member",children:"Member - Can view and edit contacts"}),c.jsx("option",{value:"viewer",children:"Viewer - Can only view contacts"})]})]}),i.isError&&c.jsx("p",{className:"text-sm text-red-600",children:((f=(h=(d=i.error)==null?void 0:d.response)==null?void 0:h.data)==null?void 0:f.message)||"Failed to send invitation"})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:i.isPending,className:"btn-primary",children:i.isPending?"Sending...":"Send Invitation"})]})]})]})})]}):null}function NFe({role:t,isOwner:e,small:r=!1}){if(e)return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 rounded-full ${r?"text-xs":"text-sm"}`,children:[c.jsx(Qte,{className:r?"w-3 h-3":"w-4 h-4"}),"Owner"]});const n={admin:{icon:TM,bg:"bg-purple-100",text:"text-purple-800",label:"Admin"},member:{icon:gn,bg:"bg-blue-100",text:"text-blue-800",label:"Member"},viewer:{icon:Jte,bg:"bg-gray-100",text:"text-gray-600",label:"Viewer"}},i=n[t]||n.member,s=i.icon;return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 ${i.bg} ${i.text} rounded-full ${r?"text-xs":"text-sm"}`,children:[c.jsx(s,{className:r?"w-3 h-3":"w-4 h-4"}),i.label]})}function kFe({member:t,currentUserRole:e,onRemove:r,onChangeRole:n}){const[i,s]=k.useState(!1),o=e==="admin"||e==="owner",a=t.is_owner;return c.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50",children:[c.jsx("img",{src:t.avatar_url,alt:t.display_name,className:"w-10 h-10 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.display_name}),c.jsx("div",{className:"text-xs text-gray-500",children:t.email})]}),c.jsx(NFe,{role:t.role,isOwner:t.is_owner,small:!0}),o&&!a&&c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>s(!i),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(ume,{className:"w-4 h-4"})}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0",onClick:()=>s(!1)}),c.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:c.jsxs("div",{className:"py-1",children:[c.jsx("button",{onClick:()=>{n(t.user_id,"admin"),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Admin"}),c.jsx("button",{onClick:()=>{n(t.user_id,"member"),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Member"}),c.jsx("button",{onClick:()=>{n(t.user_id,"viewer"),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Viewer"}),c.jsx("hr",{className:"my-1"}),c.jsxs("button",{onClick:()=>{r(t.user_id),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[c.jsx(gme,{className:"w-4 h-4"}),"Remove"]})]})})]})]})]})}function CFe({invite:t,onRevoke:e}){return c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:c.jsx($0,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.email}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Invited as ",t.role,"  Expires ",new Date(t.expires_at).toLocaleDateString()]})]}),c.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"}),c.jsx("button",{onClick:()=>e(t.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Revoke invite",children:c.jsx(pn,{className:"w-4 h-4"})})]})}function jFe(){var E,N,C,j;const{id:t}=dh(),e=Fn(),[r,n]=k.useState(!1),[i,s]=k.useState(null),[o,a]=k.useState(!1),{data:l,isLoading:u,error:d}=Tre(t),{data:h=[]}=lge(t),f=oge(),p=age(),m=uge();k.useEffect(()=>{(async()=>{try{const P=await _e.getIcalUrl();s(P.data.token)}catch{}})()},[]);const g=i&&l?`${window.location.origin}/workspace/${l.id}/calendar/${i}.ics`:null,v=()=>{g&&(navigator.clipboard.writeText(g),a(!0),setTimeout(()=>a(!1),2e3))},y=async T=>{confirm("Remove this member from the workspace?")&&await f.mutateAsync({workspaceId:parseInt(t),userId:T})},b=async(T,P)=>{await p.mutateAsync({workspaceId:parseInt(t),userId:T,role:P})},w=async T=>{await m.mutateAsync({workspaceId:parseInt(t),inviteId:T})};if(u)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(d||!l)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load workspace."}),c.jsx(Le,{to:"/workspaces",className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspaces"})]});const x=(E=l.current_user)!=null&&E.is_owner?"owner":(N=l.current_user)==null?void 0:N.role,S=x==="admin"||x==="owner",_=(C=l.current_user)==null?void 0:C.is_owner;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>e("/workspaces"),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-2",children:[c.jsx(ph,{className:"w-4 h-4"}),"Back to Workspaces"]}),c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:l.title}),l.description&&c.jsx("p",{className:"text-gray-500 mt-1",children:l.description})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[S&&c.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[c.jsx($0,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Invite"})]}),_&&c.jsxs(Le,{to:`/workspaces/${t}/settings`,className:"btn-secondary",children:[c.jsx(CM,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Settings"})]})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Members (",l.member_count,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:(j=l.members)==null?void 0:j.map(T=>c.jsx(kFe,{member:T,currentUserRole:x,onRemove:y,onChangeRole:b},T.user_id))})]}),S&&h.length>0&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Pending Invites (",h.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:h.map(T=>c.jsx(CFe,{invite:T,onRevoke:w},T.id))})]}),c.jsxs("div",{className:"card p-4",children:[c.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[c.jsx(Fs,{className:"w-4 h-4"}),"Calendar Subscription"]}),c.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Subscribe to important dates for all contacts in this workspace."}),i?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:g||"",readOnly:!0,className:"flex-1 text-xs px-2 py-1.5 bg-gray-50 border border-gray-300 rounded font-mono",onClick:T=>T.target.select()}),c.jsxs("button",{onClick:v,className:"px-3 py-1.5 text-xs bg-primary-600 text-white rounded hover:bg-primary-700 flex items-center gap-1",children:[o?c.jsx(bp,{className:"w-3 h-3"}):c.jsx(Zpe,{className:"w-3 h-3"}),o?"Copied!":"Copy"]})]}):c.jsx("p",{className:"text-xs text-gray-500",children:"Enable iCal feed in Settings to subscribe to workspace calendars."})]}),c.jsx(EFe,{isOpen:r,onClose:()=>n(!1),workspaceId:parseInt(t),workspaceName:l.title})]})}function TFe(){var w;const{id:t}=dh(),e=Fn(),[r,n]=k.useState(!1),[i,s]=k.useState(""),{data:o,isLoading:a,error:l}=Tre(t),u=ige(),d=sge(),{register:h,handleSubmit:f,reset:p,formState:{errors:m,isDirty:g}}=Ws();k.useEffect(()=>{o&&p({title:o.title,description:o.description||""})},[o,p]);const v=async x=>{await u.mutateAsync({id:parseInt(t),data:{title:x.title,content:x.description}})},y=async()=>{i===o.title&&(await d.mutateAsync(parseInt(t)),e("/workspaces"))};return a?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):l||!o?c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load workspace."}),c.jsx(Le,{to:"/workspaces",className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspaces"})]}):((w=o.current_user)==null?void 0:w.is_owner)?c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>e(`/workspaces/${t}`),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-2",children:[c.jsx(ph,{className:"w-4 h-4"}),"Back to Workspace"]}),c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspace Settings"}),c.jsx("p",{className:"text-gray-500 mt-1",children:o.title})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"General"})}),c.jsxs("form",{onSubmit:f(v),className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),c.jsx("input",{type:"text",...h("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),m.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{...h("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:!g||u.isPending,className:"btn-primary disabled:opacity-50",children:u.isPending?"Saving...":"Save Changes"})})]})]}),c.jsxs("div",{className:"card border-red-200",children:[c.jsx("div",{className:"px-6 py-4 border-b border-red-200 bg-red-50",children:c.jsxs("h2",{className:"text-lg font-medium text-red-900 flex items-center gap-2",children:[c.jsx(Ute,{className:"w-5 h-5"}),"Danger Zone"]})}),c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx(pn,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Delete Workspace"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will permanently delete the workspace and remove all member access. Contacts will remain but will no longer be shared via this workspace."}),r?c.jsxs("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:[c.jsxs("p",{className:"text-sm text-red-800 mb-3",children:["Type ",c.jsx("strong",{children:o.title})," to confirm deletion:"]}),c.jsx("input",{type:"text",value:i,onChange:x=>s(x.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 mb-3",placeholder:"Type workspace name..."}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{n(!1),s("")},className:"btn-secondary",children:"Cancel"}),c.jsx("button",{onClick:y,disabled:i!==o.title||d.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d.isPending?"Deleting...":"Delete Forever"})]})]}):c.jsx("button",{onClick:()=>n(!0),className:"mt-4 px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:"Delete Workspace"})]})]})})]})]}):c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-gray-600",children:"Only workspace owners can access settings."}),c.jsx(Le,{to:`/workspaces/${t}`,className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspace"})]})}function OFe(){var a,l,u,d,h;const{token:t}=dh(),e=Fn(),{data:r,isLoading:n,error:i}=dge(t),s=hge(),o=async()=>{try{const f=await s.mutateAsync(t);e(`/workspaces/${f.workspace_id}`)}catch{}};if(n)return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx(Do,{className:"w-8 h-8 text-primary-600 animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Validating invitation..."})]})});if(i||!r){const f=((l=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:l.message)||"This invitation is invalid or has expired.";return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(pI,{className:"w-8 h-8 text-red-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Invalid Invitation"}),c.jsx("p",{className:"text-gray-600 mb-6",children:f}),c.jsx(Le,{to:"/workspaces",className:"btn-primary inline-block",children:"Go to Workspaces"})]})})}return r.status==="accepted"?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(jc,{className:"w-8 h-8 text-green-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Already Accepted"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"This invitation has already been accepted."}),c.jsx(Le,{to:`/workspaces/${r.workspace_id}`,className:"btn-primary inline-block",children:"Go to Workspace"})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(gn,{className:"w-8 h-8 text-primary-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Workspace Invitation"})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"You have been invited to join"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.workspace_name})]}),c.jsx("hr",{className:"my-4 border-gray-200"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Invited by"}),c.jsx("p",{className:"font-medium text-gray-900",children:r.invited_by})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Your role"}),c.jsx("p",{className:"font-medium text-gray-900 capitalize",children:r.role})]})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-gray-500",children:[c.jsx(Gte,{className:"w-4 h-4"}),"Expires ",new Date(r.expires_at).toLocaleDateString()]})]}),s.error&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-600",children:((h=(d=(u=s.error)==null?void 0:u.response)==null?void 0:d.data)==null?void 0:h.message)||"Failed to accept invitation"})}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:o,disabled:s.isPending,className:"btn-primary w-full justify-center",children:s.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Do,{className:"w-4 h-4 animate-spin mr-2"}),"Joining..."]}):"Accept Invitation"}),c.jsx(Le,{to:"/workspaces",className:"btn-secondary w-full justify-center text-center",children:"Decline"})]}),c.jsxs("p",{className:"text-xs text-gray-500 text-center mt-4",children:["This invitation was sent to ",r.email]})]})})}function PFe(){const{loginUrl:t,isLoggedIn:e}=bM();return fre(),k.useEffect(()=>{e||(window.location.href=t)},[e,t]),c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function IFe({children:t}){const{data:e,isLoading:r,error:n}=st({queryKey:["current-user"],queryFn:async()=>(await _e.getCurrentUser()).data,retry:!1});return r?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-md w-full mx-4",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:c.jsx(Ao,{className:"w-8 h-8 text-yellow-600"})})}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),c.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-md w-full mx-4",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:c.jsx(Ao,{className:"w-8 h-8 text-yellow-600"})})}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),c.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function RFe({children:t}){const{isLoggedIn:e,isLoading:r}=bM();return r?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?c.jsx(IFe,{children:t}):c.jsx(rte,{to:"/login",replace:!0})}function MFe(){const{hasUpdate:t,latestVersion:e,reload:r}=Upe();return t?c.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-primary-600 text-white py-2 px-4 shadow-lg",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-center gap-4 text-sm",children:[c.jsxs("span",{children:["A new version (",e,") is available."]}),c.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-3 py-1 bg-white text-primary-600 rounded-md font-medium hover:bg-primary-50 transition-colors",children:[c.jsx(tre,{className:"w-4 h-4"}),"Reload"]})]})}):null}function AFe(){return c.jsxs(c.Fragment,{children:[c.jsx(MFe,{}),c.jsxs(j4,{children:[c.jsx(jr,{path:"/login",element:c.jsx(PFe,{})}),c.jsx(jr,{path:"/*",element:c.jsx(RFe,{children:c.jsx(bge,{children:c.jsxs(j4,{children:[c.jsx(jr,{path:"/",element:c.jsx(mEe,{})}),c.jsx(jr,{path:"/people",element:c.jsx(yEe,{})}),c.jsx(jr,{path:"/people/:id/family-tree",element:c.jsx(bFe,{})}),c.jsx(jr,{path:"/people/:id",element:c.jsx(XEe,{})}),c.jsx(jr,{path:"/companies",element:c.jsx(ZEe,{})}),c.jsx(jr,{path:"/companies/:id",element:c.jsx(eNe,{})}),c.jsx(jr,{path:"/dates",element:c.jsx(nNe,{})}),c.jsx(jr,{path:"/todos",element:c.jsx(iNe,{})}),c.jsx(jr,{path:"/settings",element:c.jsx(uNe,{})}),c.jsx(jr,{path:"/settings/relationship-types",element:c.jsx(gNe,{})}),c.jsx(jr,{path:"/settings/user-approval",element:c.jsx(yNe,{})}),c.jsx(jr,{path:"/workspaces",element:c.jsx(_Fe,{})}),c.jsx(jr,{path:"/workspaces/:id",element:c.jsx(jFe,{})}),c.jsx(jr,{path:"/workspaces/:id/settings",element:c.jsx(TFe,{})}),c.jsx(jr,{path:"/workspace-invite/:token",element:c.jsx(OFe,{})}),c.jsx(jr,{path:"*",element:c.jsx(rte,{to:"/",replace:!0})})]})})})})]})]})}const DFe=new dfe({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),BO=document.getElementById("root");if(BO)try{zO.createRoot(BO).render(c.jsx(Se.StrictMode,{children:c.jsx(hfe,{client:DFe,children:c.jsx(Rhe,{children:c.jsx(AFe,{})})})}))}catch{BO.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
