var yD=t=>{throw TypeError(t)};var Cb=(t,e,r)=>e.has(t)||yD("Cannot "+r);var I=(t,e,r)=>(Cb(t,e,"read from private field"),r?r.call(t):e.get(t)),ve=(t,e,r)=>e.has(t)?yD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ae=(t,e,r,n)=>(Cb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),$e=(t,e,r)=>(Cb(t,e,"access private method"),r);var Ym=(t,e,r,n)=>({set _(i){ae(t,e,i,r)},get _(){return I(t,e,n)}});function $ae(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function YX(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var QX={exports:{}},Zv={},XX={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=Symbol.for("react.element"),Dae=Symbol.for("react.portal"),Aae=Symbol.for("react.fragment"),Fae=Symbol.for("react.strict_mode"),qae=Symbol.for("react.profiler"),Lae=Symbol.for("react.provider"),Bae=Symbol.for("react.context"),zae=Symbol.for("react.forward_ref"),Vae=Symbol.for("react.suspense"),Uae=Symbol.for("react.memo"),Hae=Symbol.for("react.lazy"),vD=Symbol.iterator;function Wae(t){return t===null||typeof t!="object"?null:(t=vD&&t[vD]||t["@@iterator"],typeof t=="function"?t:null)}var JX={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZX=Object.assign,eJ={};function Jd(t,e,r){this.props=t,this.context=e,this.refs=eJ,this.updater=r||JX}Jd.prototype.isReactComponent={};Jd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tJ(){}tJ.prototype=Jd.prototype;function DI(t,e,r){this.props=t,this.context=e,this.refs=eJ,this.updater=r||JX}var AI=DI.prototype=new tJ;AI.constructor=DI;ZX(AI,Jd.prototype);AI.isPureReactComponent=!0;var bD=Array.isArray,rJ=Object.prototype.hasOwnProperty,FI={current:null},nJ={key:!0,ref:!0,__self:!0,__source:!0};function iJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)rJ.call(e,n)&&!nJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Vp,type:t,key:s,ref:o,props:i,_owner:FI.current}}function Kae(t,e){return{$$typeof:Vp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qI(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vp}function Gae(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var xD=/\/+/g;function kb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gae(""+t.key):e.toString(36)}function qg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vp:case Dae:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+kb(o,0):n,bD(i)?(r="",t!=null&&(r=t.replace(xD,"$&/")+"/"),qg(i,e,r,"",function(c){return c})):i!=null&&(qI(i)&&(i=Kae(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xD,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",bD(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+kb(s,a);o+=qg(s,e,r,l,i)}else if(l=Wae(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+kb(s,a++),o+=qg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qm(t,e,r){if(t==null)return t;var n=[],i=0;return qg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Yae(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $n={current:null},Lg={transition:null},Qae={ReactCurrentDispatcher:$n,ReactCurrentBatchConfig:Lg,ReactCurrentOwner:FI};function sJ(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:Qm,forEach:function(t,e,r){Qm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Qm(t,function(){e++}),e},toArray:function(t){return Qm(t,function(e){return e})||[]},only:function(t){if(!qI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=Jd;nt.Fragment=Aae;nt.Profiler=qae;nt.PureComponent=DI;nt.StrictMode=Fae;nt.Suspense=Vae;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qae;nt.act=sJ;nt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=ZX({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=FI.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)rJ.call(e,l)&&!nJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Vp,type:t.type,key:i,ref:s,props:n,_owner:o}};nt.createContext=function(t){return t={$$typeof:Bae,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Lae,_context:t},t.Consumer=t};nt.createElement=iJ;nt.createFactory=function(t){var e=iJ.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:zae,render:t}};nt.isValidElement=qI;nt.lazy=function(t){return{$$typeof:Hae,_payload:{_status:-1,_result:t},_init:Yae}};nt.memo=function(t,e){return{$$typeof:Uae,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=Lg.transition;Lg.transition={};try{t()}finally{Lg.transition=e}};nt.unstable_act=sJ;nt.useCallback=function(t,e){return $n.current.useCallback(t,e)};nt.useContext=function(t){return $n.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return $n.current.useDeferredValue(t)};nt.useEffect=function(t,e){return $n.current.useEffect(t,e)};nt.useId=function(){return $n.current.useId()};nt.useImperativeHandle=function(t,e,r){return $n.current.useImperativeHandle(t,e,r)};nt.useInsertionEffect=function(t,e){return $n.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return $n.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return $n.current.useMemo(t,e)};nt.useReducer=function(t,e,r){return $n.current.useReducer(t,e,r)};nt.useRef=function(t){return $n.current.useRef(t)};nt.useState=function(t){return $n.current.useState(t)};nt.useSyncExternalStore=function(t,e,r){return $n.current.useSyncExternalStore(t,e,r)};nt.useTransition=function(){return $n.current.useTransition()};nt.version="18.3.1";XX.exports=nt;var T=XX.exports;const Ae=YX(T),Xae=$ae({__proto__:null,default:Ae},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jae=T,Zae=Symbol.for("react.element"),ele=Symbol.for("react.fragment"),tle=Object.prototype.hasOwnProperty,rle=Jae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nle={key:!0,ref:!0,__self:!0,__source:!0};function oJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)tle.call(e,n)&&!nle.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Zae,type:t,key:s,ref:o,props:i,_owner:rle.current}}Zv.Fragment=ele;Zv.jsx=oJ;Zv.jsxs=oJ;QX.exports=Zv;var u=QX.exports,uj={},aJ={exports:{}},yi={},lJ={exports:{}},cJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,W){var z=D.length;D.push(W);e:for(;0<z;){var H=z-1>>>1,K=D[H];if(0<i(K,W))D[H]=W,D[z]=K,z=H;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var W=D[0],z=D.pop();if(z!==W){D[0]=z;e:for(var H=0,K=D.length,he=K>>>1;H<he;){var xe=2*(H+1)-1,Be=D[xe],we=xe+1,Ie=D[we];if(0>i(Be,z))we<K&&0>i(Ie,Be)?(D[H]=Ie,D[we]=z,H=we):(D[H]=Be,D[xe]=z,H=xe);else if(we<K&&0>i(Ie,z))D[H]=Ie,D[we]=z,H=we;else break e}}return W}function i(D,W){var z=D.sortIndex-W.sortIndex;return z!==0?z:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var W=r(c);W!==null;){if(W.callback===null)n(c);else if(W.startTime<=D)n(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=r(c)}}function x(D){if(g=!1,w(D),!m)if(r(l)!==null)m=!0,R(S);else{var W=r(c);W!==null&&L(x,W.startTime-D)}}function S(D,W){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var z=f;try{for(w(W),h=r(l);h!==null&&(!(h.expirationTime>W)||D&&!O());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var K=H(h.expirationTime<=W);W=t.unstable_now(),typeof K=="function"?h.callback=K:h===r(l)&&n(l),w(W)}else n(l);h=r(l)}if(h!==null)var he=!0;else{var xe=r(c);xe!==null&&L(x,xe.startTime-W),he=!1}return he}finally{h=null,f=z,p=!1}}var _=!1,N=null,E=-1,k=5,C=-1;function O(){return!(t.unstable_now()-C<k)}function j(){if(N!==null){var D=t.unstable_now();C=D;var W=!0;try{W=N(!0,D)}finally{W?P():(_=!1,N=null)}}else _=!1}var P;if(typeof v=="function")P=function(){v(j)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,q=A.port2;A.port1.onmessage=j,P=function(){q.postMessage(null)}}else P=function(){b(j,0)};function R(D){N=D,_||(_=!0,P())}function L(D,W){E=b(function(){D(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var z=f;f=W;try{return D()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=f;f=D;try{return W()}finally{f=z}},t.unstable_scheduleCallback=function(D,W,z){var H=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=z+K,D={id:d++,callback:W,priorityLevel:D,startTime:z,expirationTime:K,sortIndex:-1},z>H?(D.sortIndex=z,e(c,D),r(l)===null&&D===r(c)&&(g?(y(E),E=-1):g=!0,L(x,z-H))):(D.sortIndex=K,e(l,D),m||p||(m=!0,R(S))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var W=f;return function(){var z=f;f=W;try{return D.apply(this,arguments)}finally{f=z}}}})(cJ);lJ.exports=cJ;var ile=lJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sle=T,gi=ile;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uJ=new Set,Uf={};function Fc(t,e){Sd(t,e),Sd(t+"Capture",e)}function Sd(t,e){for(Uf[t]=e,t=0;t<e.length;t++)uJ.add(e[t])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dj=Object.prototype.hasOwnProperty,ole=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wD={},SD={};function ale(t){return dj.call(SD,t)?!0:dj.call(wD,t)?!1:ole.test(t)?SD[t]=!0:(wD[t]=!0,!1)}function lle(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cle(t,e,r,n){if(e===null||typeof e>"u"||lle(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dn(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new Dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new Dn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new Dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new Dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new Dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new Dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new Dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new Dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new Dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var LI=/[\-:]([a-z])/g;function BI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(LI,BI);nn[e]=new Dn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(LI,BI);nn[e]=new Dn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(LI,BI);nn[e]=new Dn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new Dn(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new Dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zI(t,e,r,n){var i=nn.hasOwnProperty(e)?nn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cle(e,r,i,n)&&(r=null),n||i===null?ale(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ao=sle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xm=Symbol.for("react.element"),Ou=Symbol.for("react.portal"),ju=Symbol.for("react.fragment"),VI=Symbol.for("react.strict_mode"),hj=Symbol.for("react.profiler"),dJ=Symbol.for("react.provider"),hJ=Symbol.for("react.context"),UI=Symbol.for("react.forward_ref"),fj=Symbol.for("react.suspense"),pj=Symbol.for("react.suspense_list"),HI=Symbol.for("react.memo"),ra=Symbol.for("react.lazy"),fJ=Symbol.for("react.offscreen"),_D=Symbol.iterator;function Ah(t){return t===null||typeof t!="object"?null:(t=_D&&t[_D]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,Tb;function nf(t){if(Tb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Tb=e&&e[1]||""}return`
`+Tb+t}var Ob=!1;function jb(t,e){if(!t||Ob)return"";Ob=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ob=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?nf(t):""}function ule(t){switch(t.tag){case 5:return nf(t.type);case 16:return nf("Lazy");case 13:return nf("Suspense");case 19:return nf("SuspenseList");case 0:case 2:case 15:return t=jb(t.type,!1),t;case 11:return t=jb(t.type.render,!1),t;case 1:return t=jb(t.type,!0),t;default:return""}}function mj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ju:return"Fragment";case Ou:return"Portal";case hj:return"Profiler";case VI:return"StrictMode";case fj:return"Suspense";case pj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hJ:return(t.displayName||"Context")+".Consumer";case dJ:return(t._context.displayName||"Context")+".Provider";case UI:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case HI:return e=t.displayName||null,e!==null?e:mj(t.type)||"Memo";case ra:e=t._payload,t=t._init;try{return mj(t(e))}catch{}}return null}function dle(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mj(e);case 8:return e===VI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Za(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hle(t){var e=pJ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jm(t){t._valueTracker||(t._valueTracker=hle(t))}function mJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=pJ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function dy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gj(t,e){var r=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ED(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Za(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gJ(t,e){e=e.checked,e!=null&&zI(t,"checked",e,!1)}function yj(t,e){gJ(t,e);var r=Za(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vj(t,e.type,r):e.hasOwnProperty("defaultValue")&&vj(t,e.type,Za(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ND(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function vj(t,e,r){(e!=="number"||dy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var sf=Array.isArray;function Gu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Za(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function CD(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(te(92));if(sf(r)){if(1<r.length)throw Error(te(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Za(r)}}function yJ(t,e){var r=Za(e.value),n=Za(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function kD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zm,bJ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zm=Zm||document.createElement("div"),Zm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var mf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fle=["Webkit","ms","Moz","O"];Object.keys(mf).forEach(function(t){fle.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mf[e]=mf[t]})});function xJ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||mf.hasOwnProperty(t)&&mf[t]?(""+e).trim():e+"px"}function wJ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=xJ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var ple=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wj(t,e){if(e){if(ple[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function Sj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _j=null;function WI(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ej=null,Yu=null,Qu=null;function TD(t){if(t=Wp(t)){if(typeof Ej!="function")throw Error(te(280));var e=t.stateNode;e&&(e=i0(e),Ej(t.stateNode,t.type,e))}}function SJ(t){Yu?Qu?Qu.push(t):Qu=[t]:Yu=t}function _J(){if(Yu){var t=Yu,e=Qu;if(Qu=Yu=null,TD(t),e)for(t=0;t<e.length;t++)TD(e[t])}}function EJ(t,e){return t(e)}function NJ(){}var Pb=!1;function CJ(t,e,r){if(Pb)return t(e,r);Pb=!0;try{return EJ(t,e,r)}finally{Pb=!1,(Yu!==null||Qu!==null)&&(NJ(),_J())}}function Wf(t,e){var r=t.stateNode;if(r===null)return null;var n=i0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(te(231,e,typeof r));return r}var Nj=!1;if(jo)try{var Fh={};Object.defineProperty(Fh,"passive",{get:function(){Nj=!0}}),window.addEventListener("test",Fh,Fh),window.removeEventListener("test",Fh,Fh)}catch{Nj=!1}function mle(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var gf=!1,hy=null,fy=!1,Cj=null,gle={onError:function(t){gf=!0,hy=t}};function yle(t,e,r,n,i,s,o,a,l){gf=!1,hy=null,mle.apply(gle,arguments)}function vle(t,e,r,n,i,s,o,a,l){if(yle.apply(this,arguments),gf){if(gf){var c=hy;gf=!1,hy=null}else throw Error(te(198));fy||(fy=!0,Cj=c)}}function qc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function kJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function OD(t){if(qc(t)!==t)throw Error(te(188))}function ble(t){var e=t.alternate;if(!e){if(e=qc(t),e===null)throw Error(te(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return OD(i),t;if(s===n)return OD(i),e;s=s.sibling}throw Error(te(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(te(189))}}if(r.alternate!==n)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?t:e}function TJ(t){return t=ble(t),t!==null?OJ(t):null}function OJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OJ(t);if(e!==null)return e;t=t.sibling}return null}var jJ=gi.unstable_scheduleCallback,jD=gi.unstable_cancelCallback,xle=gi.unstable_shouldYield,wle=gi.unstable_requestPaint,hr=gi.unstable_now,Sle=gi.unstable_getCurrentPriorityLevel,KI=gi.unstable_ImmediatePriority,PJ=gi.unstable_UserBlockingPriority,py=gi.unstable_NormalPriority,_le=gi.unstable_LowPriority,IJ=gi.unstable_IdlePriority,e0=null,$s=null;function Ele(t){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(e0,t,void 0,(t.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:kle,Nle=Math.log,Cle=Math.LN2;function kle(t){return t>>>=0,t===0?32:31-(Nle(t)/Cle|0)|0}var eg=64,tg=4194304;function of(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function my(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=of(a):(s&=o,s!==0&&(n=of(s)))}else o=r&~i,o!==0?n=of(o):s!==0&&(n=of(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ds(e),i=1<<r,n|=t[r],e&=~i;return n}function Tle(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ole(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ds(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Tle(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function kj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RJ(){var t=eg;return eg<<=1,!(eg&4194240)&&(eg=64),t}function Ib(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Up(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ds(e),t[e]=r}function jle(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ds(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function GI(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ds(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var St=0;function MJ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $J,YI,DJ,AJ,FJ,Tj=!1,rg=[],Ia=null,Ra=null,Ma=null,Kf=new Map,Gf=new Map,ua=[],Ple="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PD(t,e){switch(t){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Ra=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Kf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gf.delete(e.pointerId)}}function qh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wp(e),e!==null&&YI(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ile(t,e,r,n,i){switch(e){case"focusin":return Ia=qh(Ia,t,e,r,n,i),!0;case"dragenter":return Ra=qh(Ra,t,e,r,n,i),!0;case"mouseover":return Ma=qh(Ma,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Kf.set(s,qh(Kf.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Gf.set(s,qh(Gf.get(s)||null,t,e,r,n,i)),!0}return!1}function qJ(t){var e=Ol(t.target);if(e!==null){var r=qc(e);if(r!==null){if(e=r.tag,e===13){if(e=kJ(r),e!==null){t.blockedOn=e,FJ(t.priority,function(){DJ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Oj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);_j=n,r.target.dispatchEvent(n),_j=null}else return e=Wp(r),e!==null&&YI(e),t.blockedOn=r,!1;e.shift()}return!0}function ID(t,e,r){Bg(t)&&r.delete(e)}function Rle(){Tj=!1,Ia!==null&&Bg(Ia)&&(Ia=null),Ra!==null&&Bg(Ra)&&(Ra=null),Ma!==null&&Bg(Ma)&&(Ma=null),Kf.forEach(ID),Gf.forEach(ID)}function Lh(t,e){t.blockedOn===e&&(t.blockedOn=null,Tj||(Tj=!0,gi.unstable_scheduleCallback(gi.unstable_NormalPriority,Rle)))}function Yf(t){function e(i){return Lh(i,t)}if(0<rg.length){Lh(rg[0],t);for(var r=1;r<rg.length;r++){var n=rg[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ia!==null&&Lh(Ia,t),Ra!==null&&Lh(Ra,t),Ma!==null&&Lh(Ma,t),Kf.forEach(e),Gf.forEach(e),r=0;r<ua.length;r++)n=ua[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ua.length&&(r=ua[0],r.blockedOn===null);)qJ(r),r.blockedOn===null&&ua.shift()}var Xu=Ao.ReactCurrentBatchConfig,gy=!0;function Mle(t,e,r,n){var i=St,s=Xu.transition;Xu.transition=null;try{St=1,QI(t,e,r,n)}finally{St=i,Xu.transition=s}}function $le(t,e,r,n){var i=St,s=Xu.transition;Xu.transition=null;try{St=4,QI(t,e,r,n)}finally{St=i,Xu.transition=s}}function QI(t,e,r,n){if(gy){var i=Oj(t,e,r,n);if(i===null)zb(t,e,n,yy,r),PD(t,n);else if(Ile(i,t,e,r,n))n.stopPropagation();else if(PD(t,n),e&4&&-1<Ple.indexOf(t)){for(;i!==null;){var s=Wp(i);if(s!==null&&$J(s),s=Oj(t,e,r,n),s===null&&zb(t,e,n,yy,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else zb(t,e,n,null,r)}}var yy=null;function Oj(t,e,r,n){if(yy=null,t=WI(n),t=Ol(t),t!==null)if(e=qc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=kJ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yy=t,null}function LJ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sle()){case KI:return 1;case PJ:return 4;case py:case _le:return 16;case IJ:return 536870912;default:return 16}default:return 16}}var Na=null,XI=null,zg=null;function BJ(){if(zg)return zg;var t,e=XI,r=e.length,n,i="value"in Na?Na.value:Na.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return zg=i.slice(t,1<n?1-n:void 0)}function Vg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ng(){return!0}function RD(){return!1}function vi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ng:RD,this.isPropagationStopped=RD,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ng)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ng)},persist:function(){},isPersistent:ng}),e}var Zd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JI=vi(Zd),Hp=Qt({},Zd,{view:0,detail:0}),Dle=vi(Hp),Rb,Mb,Bh,t0=Qt({},Hp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ZI,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bh&&(Bh&&t.type==="mousemove"?(Rb=t.screenX-Bh.screenX,Mb=t.screenY-Bh.screenY):Mb=Rb=0,Bh=t),Rb)},movementY:function(t){return"movementY"in t?t.movementY:Mb}}),MD=vi(t0),Ale=Qt({},t0,{dataTransfer:0}),Fle=vi(Ale),qle=Qt({},Hp,{relatedTarget:0}),$b=vi(qle),Lle=Qt({},Zd,{animationName:0,elapsedTime:0,pseudoElement:0}),Ble=vi(Lle),zle=Qt({},Zd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vle=vi(zle),Ule=Qt({},Zd,{data:0}),$D=vi(Ule),Hle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kle[t])?!!e[t]:!1}function ZI(){return Gle}var Yle=Qt({},Hp,{key:function(t){if(t.key){var e=Hle[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ZI,charCode:function(t){return t.type==="keypress"?Vg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qle=vi(Yle),Xle=Qt({},t0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DD=vi(Xle),Jle=Qt({},Hp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ZI}),Zle=vi(Jle),ece=Qt({},Zd,{propertyName:0,elapsedTime:0,pseudoElement:0}),tce=vi(ece),rce=Qt({},t0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nce=vi(rce),ice=[9,13,27,32],eR=jo&&"CompositionEvent"in window,yf=null;jo&&"documentMode"in document&&(yf=document.documentMode);var sce=jo&&"TextEvent"in window&&!yf,zJ=jo&&(!eR||yf&&8<yf&&11>=yf),AD=" ",FD=!1;function VJ(t,e){switch(t){case"keyup":return ice.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UJ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pu=!1;function oce(t,e){switch(t){case"compositionend":return UJ(e);case"keypress":return e.which!==32?null:(FD=!0,AD);case"textInput":return t=e.data,t===AD&&FD?null:t;default:return null}}function ace(t,e){if(Pu)return t==="compositionend"||!eR&&VJ(t,e)?(t=BJ(),zg=XI=Na=null,Pu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zJ&&e.locale!=="ko"?null:e.data;default:return null}}var lce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lce[t.type]:e==="textarea"}function HJ(t,e,r,n){SJ(n),e=vy(e,"onChange"),0<e.length&&(r=new JI("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var vf=null,Qf=null;function cce(t){rZ(t,0)}function r0(t){var e=Mu(t);if(mJ(e))return t}function uce(t,e){if(t==="change")return e}var WJ=!1;if(jo){var Db;if(jo){var Ab="oninput"in document;if(!Ab){var LD=document.createElement("div");LD.setAttribute("oninput","return;"),Ab=typeof LD.oninput=="function"}Db=Ab}else Db=!1;WJ=Db&&(!document.documentMode||9<document.documentMode)}function BD(){vf&&(vf.detachEvent("onpropertychange",KJ),Qf=vf=null)}function KJ(t){if(t.propertyName==="value"&&r0(Qf)){var e=[];HJ(e,Qf,t,WI(t)),CJ(cce,e)}}function dce(t,e,r){t==="focusin"?(BD(),vf=e,Qf=r,vf.attachEvent("onpropertychange",KJ)):t==="focusout"&&BD()}function hce(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return r0(Qf)}function fce(t,e){if(t==="click")return r0(e)}function pce(t,e){if(t==="input"||t==="change")return r0(e)}function mce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fs=typeof Object.is=="function"?Object.is:mce;function Xf(t,e){if(fs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!dj.call(e,i)||!fs(t[i],e[i]))return!1}return!0}function zD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function VD(t,e){var r=zD(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zD(r)}}function GJ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GJ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function YJ(){for(var t=window,e=dy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=dy(t.document)}return e}function tR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gce(t){var e=YJ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&GJ(r.ownerDocument.documentElement,r)){if(n!==null&&tR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=VD(r,s);var o=VD(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yce=jo&&"documentMode"in document&&11>=document.documentMode,Iu=null,jj=null,bf=null,Pj=!1;function UD(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pj||Iu==null||Iu!==dy(n)||(n=Iu,"selectionStart"in n&&tR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),bf&&Xf(bf,n)||(bf=n,n=vy(jj,"onSelect"),0<n.length&&(e=new JI("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Iu)))}function ig(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ru={animationend:ig("Animation","AnimationEnd"),animationiteration:ig("Animation","AnimationIteration"),animationstart:ig("Animation","AnimationStart"),transitionend:ig("Transition","TransitionEnd")},Fb={},QJ={};jo&&(QJ=document.createElement("div").style,"AnimationEvent"in window||(delete Ru.animationend.animation,delete Ru.animationiteration.animation,delete Ru.animationstart.animation),"TransitionEvent"in window||delete Ru.transitionend.transition);function n0(t){if(Fb[t])return Fb[t];if(!Ru[t])return t;var e=Ru[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in QJ)return Fb[t]=e[r];return t}var XJ=n0("animationend"),JJ=n0("animationiteration"),ZJ=n0("animationstart"),eZ=n0("transitionend"),tZ=new Map,HD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function al(t,e){tZ.set(t,e),Fc(e,[t])}for(var qb=0;qb<HD.length;qb++){var Lb=HD[qb],vce=Lb.toLowerCase(),bce=Lb[0].toUpperCase()+Lb.slice(1);al(vce,"on"+bce)}al(XJ,"onAnimationEnd");al(JJ,"onAnimationIteration");al(ZJ,"onAnimationStart");al("dblclick","onDoubleClick");al("focusin","onFocus");al("focusout","onBlur");al(eZ,"onTransitionEnd");Sd("onMouseEnter",["mouseout","mouseover"]);Sd("onMouseLeave",["mouseout","mouseover"]);Sd("onPointerEnter",["pointerout","pointerover"]);Sd("onPointerLeave",["pointerout","pointerover"]);Fc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var af="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xce=new Set("cancel close invalid load scroll toggle".split(" ").concat(af));function WD(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,vle(n,e,void 0,t),t.currentTarget=null}function rZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;WD(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;WD(i,a,c),s=l}}}if(fy)throw t=Cj,fy=!1,Cj=null,t}function At(t,e){var r=e[Dj];r===void 0&&(r=e[Dj]=new Set);var n=t+"__bubble";r.has(n)||(nZ(e,t,2,!1),r.add(n))}function Bb(t,e,r){var n=0;e&&(n|=4),nZ(r,t,n,e)}var sg="_reactListening"+Math.random().toString(36).slice(2);function Jf(t){if(!t[sg]){t[sg]=!0,uJ.forEach(function(r){r!=="selectionchange"&&(xce.has(r)||Bb(r,!1,t),Bb(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sg]||(e[sg]=!0,Bb("selectionchange",!1,e))}}function nZ(t,e,r,n){switch(LJ(e)){case 1:var i=Mle;break;case 4:i=$le;break;default:i=QI}r=i.bind(null,e,r,t),i=void 0,!Nj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function zb(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ol(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}CJ(function(){var c=s,d=WI(r),h=[];e:{var f=tZ.get(t);if(f!==void 0){var p=JI,m=t;switch(t){case"keypress":if(Vg(r)===0)break e;case"keydown":case"keyup":p=Qle;break;case"focusin":m="focus",p=$b;break;case"focusout":m="blur",p=$b;break;case"beforeblur":case"afterblur":p=$b;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=MD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Fle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Zle;break;case XJ:case JJ:case ZJ:p=Ble;break;case eZ:p=tce;break;case"scroll":p=Dle;break;case"wheel":p=nce;break;case"copy":case"cut":case"paste":p=Vle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=DD}var g=(e&4)!==0,b=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var v=c,w;v!==null;){w=v;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Wf(v,y),x!=null&&g.push(Zf(v,x,w)))),b)break;v=v.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==_j&&(m=r.relatedTarget||r.fromElement)&&(Ol(m)||m[Po]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Ol(m):null,m!==null&&(b=qc(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=MD,x="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=DD,x="onPointerLeave",y="onPointerEnter",v="pointer"),b=p==null?f:Mu(p),w=m==null?f:Mu(m),f=new g(x,v+"leave",p,r,d),f.target=b,f.relatedTarget=w,x=null,Ol(d)===c&&(g=new g(y,v+"enter",m,r,d),g.target=w,g.relatedTarget=b,x=g),b=x,p&&m)t:{for(g=p,y=m,v=0,w=g;w;w=gu(w))v++;for(w=0,x=y;x;x=gu(x))w++;for(;0<v-w;)g=gu(g),v--;for(;0<w-v;)y=gu(y),w--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=gu(g),y=gu(y)}g=null}else g=null;p!==null&&KD(h,f,p,g,!1),m!==null&&b!==null&&KD(h,b,m,g,!0)}}e:{if(f=c?Mu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=uce;else if(qD(f))if(WJ)S=pce;else{S=hce;var _=dce}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=fce);if(S&&(S=S(t,c))){HJ(h,S,r,d);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&vj(f,"number",f.value)}switch(_=c?Mu(c):window,t){case"focusin":(qD(_)||_.contentEditable==="true")&&(Iu=_,jj=c,bf=null);break;case"focusout":bf=jj=Iu=null;break;case"mousedown":Pj=!0;break;case"contextmenu":case"mouseup":case"dragend":Pj=!1,UD(h,r,d);break;case"selectionchange":if(yce)break;case"keydown":case"keyup":UD(h,r,d)}var N;if(eR)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Pu?VJ(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(zJ&&r.locale!=="ko"&&(Pu||E!=="onCompositionStart"?E==="onCompositionEnd"&&Pu&&(N=BJ()):(Na=d,XI="value"in Na?Na.value:Na.textContent,Pu=!0)),_=vy(c,E),0<_.length&&(E=new $D(E,t,null,r,d),h.push({event:E,listeners:_}),N?E.data=N:(N=UJ(r),N!==null&&(E.data=N)))),(N=sce?oce(t,r):ace(t,r))&&(c=vy(c,"onBeforeInput"),0<c.length&&(d=new $D("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=N))}rZ(h,e)})}function Zf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function vy(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Wf(t,r),s!=null&&n.unshift(Zf(t,s,i)),s=Wf(t,e),s!=null&&n.push(Zf(t,s,i))),t=t.return}return n}function gu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function KD(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Wf(r,s),l!=null&&o.unshift(Zf(r,l,a))):i||(l=Wf(r,s),l!=null&&o.push(Zf(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var wce=/\r\n?/g,Sce=/\u0000|\uFFFD/g;function GD(t){return(typeof t=="string"?t:""+t).replace(wce,`
`).replace(Sce,"")}function og(t,e,r){if(e=GD(e),GD(t)!==e&&r)throw Error(te(425))}function by(){}var Ij=null,Rj=null;function Mj(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $j=typeof setTimeout=="function"?setTimeout:void 0,_ce=typeof clearTimeout=="function"?clearTimeout:void 0,YD=typeof Promise=="function"?Promise:void 0,Ece=typeof queueMicrotask=="function"?queueMicrotask:typeof YD<"u"?function(t){return YD.resolve(null).then(t).catch(Nce)}:$j;function Nce(t){setTimeout(function(){throw t})}function Vb(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Yf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Yf(e)}function $a(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function QD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var eh=Math.random().toString(36).slice(2),js="__reactFiber$"+eh,ep="__reactProps$"+eh,Po="__reactContainer$"+eh,Dj="__reactEvents$"+eh,Cce="__reactListeners$"+eh,kce="__reactHandles$"+eh;function Ol(t){var e=t[js];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Po]||r[js]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=QD(t);t!==null;){if(r=t[js])return r;t=QD(t)}return e}t=r,r=t.parentNode}return null}function Wp(t){return t=t[js]||t[Po],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function i0(t){return t[ep]||null}var Aj=[],$u=-1;function ll(t){return{current:t}}function qt(t){0>$u||(t.current=Aj[$u],Aj[$u]=null,$u--)}function $t(t,e){$u++,Aj[$u]=t.current,t.current=e}var el={},mn=ll(el),Yn=ll(!1),fc=el;function _d(t,e){var r=t.type.contextTypes;if(!r)return el;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qn(t){return t=t.childContextTypes,t!=null}function xy(){qt(Yn),qt(mn)}function XD(t,e,r){if(mn.current!==el)throw Error(te(168));$t(mn,e),$t(Yn,r)}function iZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(te(108,dle(t)||"Unknown",i));return Qt({},r,n)}function wy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||el,fc=mn.current,$t(mn,t),$t(Yn,Yn.current),!0}function JD(t,e,r){var n=t.stateNode;if(!n)throw Error(te(169));r?(t=iZ(t,e,fc),n.__reactInternalMemoizedMergedChildContext=t,qt(Yn),qt(mn),$t(mn,t)):qt(Yn),$t(Yn,r)}var so=null,s0=!1,Ub=!1;function sZ(t){so===null?so=[t]:so.push(t)}function Tce(t){s0=!0,sZ(t)}function cl(){if(!Ub&&so!==null){Ub=!0;var t=0,e=St;try{var r=so;for(St=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}so=null,s0=!1}catch(i){throw so!==null&&(so=so.slice(t+1)),jJ(KI,cl),i}finally{St=e,Ub=!1}}return null}var Du=[],Au=0,Sy=null,_y=0,Ii=[],Ri=0,pc=null,ho=1,fo="";function Nl(t,e){Du[Au++]=_y,Du[Au++]=Sy,Sy=t,_y=e}function oZ(t,e,r){Ii[Ri++]=ho,Ii[Ri++]=fo,Ii[Ri++]=pc,pc=t;var n=ho;t=fo;var i=32-ds(n)-1;n&=~(1<<i),r+=1;var s=32-ds(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,ho=1<<32-ds(e)+i|r<<i|n,fo=s+t}else ho=1<<s|r<<i|n,fo=t}function rR(t){t.return!==null&&(Nl(t,1),oZ(t,1,0))}function nR(t){for(;t===Sy;)Sy=Du[--Au],Du[Au]=null,_y=Du[--Au],Du[Au]=null;for(;t===pc;)pc=Ii[--Ri],Ii[Ri]=null,fo=Ii[--Ri],Ii[Ri]=null,ho=Ii[--Ri],Ii[Ri]=null}var pi=null,fi=null,Ut=!1,ns=null;function aZ(t,e){var r=Di(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ZD(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pi=t,fi=$a(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pi=t,fi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=pc!==null?{id:ho,overflow:fo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Di(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,pi=t,fi=null,!0):!1;default:return!1}}function Fj(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qj(t){if(Ut){var e=fi;if(e){var r=e;if(!ZD(t,e)){if(Fj(t))throw Error(te(418));e=$a(r.nextSibling);var n=pi;e&&ZD(t,e)?aZ(n,r):(t.flags=t.flags&-4097|2,Ut=!1,pi=t)}}else{if(Fj(t))throw Error(te(418));t.flags=t.flags&-4097|2,Ut=!1,pi=t}}}function eA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pi=t}function ag(t){if(t!==pi)return!1;if(!Ut)return eA(t),Ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mj(t.type,t.memoizedProps)),e&&(e=fi)){if(Fj(t))throw lZ(),Error(te(418));for(;e;)aZ(t,e),e=$a(e.nextSibling)}if(eA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){fi=$a(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}fi=null}}else fi=pi?$a(t.stateNode.nextSibling):null;return!0}function lZ(){for(var t=fi;t;)t=$a(t.nextSibling)}function Ed(){fi=pi=null,Ut=!1}function iR(t){ns===null?ns=[t]:ns.push(t)}var Oce=Ao.ReactCurrentBatchConfig;function zh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var n=r.stateNode}if(!n)throw Error(te(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,t))}return t}function lg(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tA(t){var e=t._init;return e(t._payload)}function cZ(t){function e(y,v){if(t){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function r(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=qa(y,v),y.index=0,y.sibling=null,y}function s(y,v,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,w,x){return v===null||v.tag!==6?(v=Xb(w,y.mode,x),v.return=y,v):(v=i(v,w),v.return=y,v)}function l(y,v,w,x){var S=w.type;return S===ju?d(y,v,w.props.children,x,w.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ra&&tA(S)===v.type)?(x=i(v,w.props),x.ref=zh(y,v,w),x.return=y,x):(x=Qg(w.type,w.key,w.props,null,y.mode,x),x.ref=zh(y,v,w),x.return=y,x)}function c(y,v,w,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Jb(w,y.mode,x),v.return=y,v):(v=i(v,w.children||[]),v.return=y,v)}function d(y,v,w,x,S){return v===null||v.tag!==7?(v=Zl(w,y.mode,x,S),v.return=y,v):(v=i(v,w),v.return=y,v)}function h(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xb(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xm:return w=Qg(v.type,v.key,v.props,null,y.mode,w),w.ref=zh(y,null,v),w.return=y,w;case Ou:return v=Jb(v,y.mode,w),v.return=y,v;case ra:var x=v._init;return h(y,x(v._payload),w)}if(sf(v)||Ah(v))return v=Zl(v,y.mode,w,null),v.return=y,v;lg(y,v)}return null}function f(y,v,w,x){var S=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xm:return w.key===S?l(y,v,w,x):null;case Ou:return w.key===S?c(y,v,w,x):null;case ra:return S=w._init,f(y,v,S(w._payload),x)}if(sf(w)||Ah(w))return S!==null?null:d(y,v,w,x,null);lg(y,w)}return null}function p(y,v,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(v,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xm:return y=y.get(x.key===null?w:x.key)||null,l(v,y,x,S);case Ou:return y=y.get(x.key===null?w:x.key)||null,c(v,y,x,S);case ra:var _=x._init;return p(y,v,w,_(x._payload),S)}if(sf(x)||Ah(x))return y=y.get(w)||null,d(v,y,x,S,null);lg(v,x)}return null}function m(y,v,w,x){for(var S=null,_=null,N=v,E=v=0,k=null;N!==null&&E<w.length;E++){N.index>E?(k=N,N=null):k=N.sibling;var C=f(y,N,w[E],x);if(C===null){N===null&&(N=k);break}t&&N&&C.alternate===null&&e(y,N),v=s(C,v,E),_===null?S=C:_.sibling=C,_=C,N=k}if(E===w.length)return r(y,N),Ut&&Nl(y,E),S;if(N===null){for(;E<w.length;E++)N=h(y,w[E],x),N!==null&&(v=s(N,v,E),_===null?S=N:_.sibling=N,_=N);return Ut&&Nl(y,E),S}for(N=n(y,N);E<w.length;E++)k=p(N,y,E,w[E],x),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),v=s(k,v,E),_===null?S=k:_.sibling=k,_=k);return t&&N.forEach(function(O){return e(y,O)}),Ut&&Nl(y,E),S}function g(y,v,w,x){var S=Ah(w);if(typeof S!="function")throw Error(te(150));if(w=S.call(w),w==null)throw Error(te(151));for(var _=S=null,N=v,E=v=0,k=null,C=w.next();N!==null&&!C.done;E++,C=w.next()){N.index>E?(k=N,N=null):k=N.sibling;var O=f(y,N,C.value,x);if(O===null){N===null&&(N=k);break}t&&N&&O.alternate===null&&e(y,N),v=s(O,v,E),_===null?S=O:_.sibling=O,_=O,N=k}if(C.done)return r(y,N),Ut&&Nl(y,E),S;if(N===null){for(;!C.done;E++,C=w.next())C=h(y,C.value,x),C!==null&&(v=s(C,v,E),_===null?S=C:_.sibling=C,_=C);return Ut&&Nl(y,E),S}for(N=n(y,N);!C.done;E++,C=w.next())C=p(N,y,E,C.value,x),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?E:C.key),v=s(C,v,E),_===null?S=C:_.sibling=C,_=C);return t&&N.forEach(function(j){return e(y,j)}),Ut&&Nl(y,E),S}function b(y,v,w,x){if(typeof w=="object"&&w!==null&&w.type===ju&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Xm:e:{for(var S=w.key,_=v;_!==null;){if(_.key===S){if(S=w.type,S===ju){if(_.tag===7){r(y,_.sibling),v=i(_,w.props.children),v.return=y,y=v;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ra&&tA(S)===_.type){r(y,_.sibling),v=i(_,w.props),v.ref=zh(y,_,w),v.return=y,y=v;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===ju?(v=Zl(w.props.children,y.mode,x,w.key),v.return=y,y=v):(x=Qg(w.type,w.key,w.props,null,y.mode,x),x.ref=zh(y,v,w),x.return=y,y=x)}return o(y);case Ou:e:{for(_=w.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(y,v.sibling),v=i(v,w.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else e(y,v);v=v.sibling}v=Jb(w,y.mode,x),v.return=y,y=v}return o(y);case ra:return _=w._init,b(y,v,_(w._payload),x)}if(sf(w))return m(y,v,w,x);if(Ah(w))return g(y,v,w,x);lg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(y,v.sibling),v=i(v,w),v.return=y,y=v):(r(y,v),v=Xb(w,y.mode,x),v.return=y,y=v),o(y)):r(y,v)}return b}var Nd=cZ(!0),uZ=cZ(!1),Ey=ll(null),Ny=null,Fu=null,sR=null;function oR(){sR=Fu=Ny=null}function aR(t){var e=Ey.current;qt(Ey),t._currentValue=e}function Lj(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ju(t,e){Ny=t,sR=Fu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kn=!0),t.firstContext=null)}function zi(t){var e=t._currentValue;if(sR!==t)if(t={context:t,memoizedValue:e,next:null},Fu===null){if(Ny===null)throw Error(te(308));Fu=t,Ny.dependencies={lanes:0,firstContext:t}}else Fu=Fu.next=t;return e}var jl=null;function lR(t){jl===null?jl=[t]:jl.push(t)}function dZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,lR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Io(t,n)}function Io(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var na=!1;function cR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Da(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,dt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Io(t,r)}return i=n.interleaved,i===null?(e.next=e,lR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Io(t,r)}function Ug(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,GI(t,r)}}function rA(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Cy(t,e,r,n){var i=t.updateQueue;na=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Qt({},h,f);break e;case 2:na=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);gc|=o,t.lanes=o,t.memoizedState=h}}function nA(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(te(191,i));i.call(n)}}}var Kp={},Ds=ll(Kp),tp=ll(Kp),rp=ll(Kp);function Pl(t){if(t===Kp)throw Error(te(174));return t}function uR(t,e){switch($t(rp,e),$t(tp,t),$t(Ds,Kp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xj(e,t)}qt(Ds),$t(Ds,e)}function Cd(){qt(Ds),qt(tp),qt(rp)}function fZ(t){Pl(rp.current);var e=Pl(Ds.current),r=xj(e,t.type);e!==r&&($t(tp,t),$t(Ds,r))}function dR(t){tp.current===t&&(qt(Ds),qt(tp))}var Wt=ll(0);function ky(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hb=[];function hR(){for(var t=0;t<Hb.length;t++)Hb[t]._workInProgressVersionPrimary=null;Hb.length=0}var Hg=Ao.ReactCurrentDispatcher,Wb=Ao.ReactCurrentBatchConfig,mc=0,Gt=null,Pr=null,Fr=null,Ty=!1,xf=!1,np=0,jce=0;function cn(){throw Error(te(321))}function fR(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!fs(t[r],e[r]))return!1;return!0}function pR(t,e,r,n,i,s){if(mc=s,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hg.current=t===null||t.memoizedState===null?Mce:$ce,t=r(n,i),xf){s=0;do{if(xf=!1,np=0,25<=s)throw Error(te(301));s+=1,Fr=Pr=null,e.updateQueue=null,Hg.current=Dce,t=r(n,i)}while(xf)}if(Hg.current=Oy,e=Pr!==null&&Pr.next!==null,mc=0,Fr=Pr=Gt=null,Ty=!1,e)throw Error(te(300));return t}function mR(){var t=np!==0;return np=0,t}function Ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Gt.memoizedState=Fr=t:Fr=Fr.next=t,Fr}function Vi(){if(Pr===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=Fr===null?Gt.memoizedState:Fr.next;if(e!==null)Fr=e,Pr=t;else{if(t===null)throw Error(te(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Fr===null?Gt.memoizedState=Fr=t:Fr=Fr.next=t}return Fr}function ip(t,e){return typeof e=="function"?e(t):e}function Kb(t){var e=Vi(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=Pr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((mc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Gt.lanes|=d,gc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,fs(n,e.memoizedState)||(Kn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Gt.lanes|=s,gc|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Gb(t){var e=Vi(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);fs(s,e.memoizedState)||(Kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function pZ(){}function mZ(t,e){var r=Gt,n=Vi(),i=e(),s=!fs(n.memoizedState,i);if(s&&(n.memoizedState=i,Kn=!0),n=n.queue,gR(vZ.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Fr!==null&&Fr.memoizedState.tag&1){if(r.flags|=2048,sp(9,yZ.bind(null,r,n,i,e),void 0,null),Br===null)throw Error(te(349));mc&30||gZ(r,e,i)}return i}function gZ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function yZ(t,e,r,n){e.value=r,e.getSnapshot=n,bZ(e)&&xZ(t)}function vZ(t,e,r){return r(function(){bZ(e)&&xZ(t)})}function bZ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fs(t,r)}catch{return!0}}function xZ(t){var e=Io(t,1);e!==null&&hs(e,t,1,-1)}function iA(t){var e=Ss();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:t},e.queue=t,t=t.dispatch=Rce.bind(null,Gt,t),[e.memoizedState,t]}function sp(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function wZ(){return Vi().memoizedState}function Wg(t,e,r,n){var i=Ss();Gt.flags|=t,i.memoizedState=sp(1|e,r,void 0,n===void 0?null:n)}function o0(t,e,r,n){var i=Vi();n=n===void 0?null:n;var s=void 0;if(Pr!==null){var o=Pr.memoizedState;if(s=o.destroy,n!==null&&fR(n,o.deps)){i.memoizedState=sp(e,r,s,n);return}}Gt.flags|=t,i.memoizedState=sp(1|e,r,s,n)}function sA(t,e){return Wg(8390656,8,t,e)}function gR(t,e){return o0(2048,8,t,e)}function SZ(t,e){return o0(4,2,t,e)}function _Z(t,e){return o0(4,4,t,e)}function EZ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NZ(t,e,r){return r=r!=null?r.concat([t]):null,o0(4,4,EZ.bind(null,e,t),r)}function yR(){}function CZ(t,e){var r=Vi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&fR(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function kZ(t,e){var r=Vi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&fR(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function TZ(t,e,r){return mc&21?(fs(r,e)||(r=RJ(),Gt.lanes|=r,gc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kn=!0),t.memoizedState=r)}function Pce(t,e){var r=St;St=r!==0&&4>r?r:4,t(!0);var n=Wb.transition;Wb.transition={};try{t(!1),e()}finally{St=r,Wb.transition=n}}function OZ(){return Vi().memoizedState}function Ice(t,e,r){var n=Fa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},jZ(t))PZ(e,r);else if(r=dZ(t,e,r,n),r!==null){var i=jn();hs(r,t,n,i),IZ(r,e,n)}}function Rce(t,e,r){var n=Fa(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(jZ(t))PZ(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,fs(a,o)){var l=e.interleaved;l===null?(i.next=i,lR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=dZ(t,e,i,n),r!==null&&(i=jn(),hs(r,t,n,i),IZ(r,e,n))}}function jZ(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function PZ(t,e){xf=Ty=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function IZ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,GI(t,r)}}var Oy={readContext:zi,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},Mce={readContext:zi,useCallback:function(t,e){return Ss().memoizedState=[t,e===void 0?null:e],t},useContext:zi,useEffect:sA,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Wg(4194308,4,EZ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Wg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wg(4,2,t,e)},useMemo:function(t,e){var r=Ss();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ss();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ice.bind(null,Gt,t),[n.memoizedState,t]},useRef:function(t){var e=Ss();return t={current:t},e.memoizedState=t},useState:iA,useDebugValue:yR,useDeferredValue:function(t){return Ss().memoizedState=t},useTransition:function(){var t=iA(!1),e=t[0];return t=Pce.bind(null,t[1]),Ss().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Gt,i=Ss();if(Ut){if(r===void 0)throw Error(te(407));r=r()}else{if(r=e(),Br===null)throw Error(te(349));mc&30||gZ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,sA(vZ.bind(null,n,s,t),[t]),n.flags|=2048,sp(9,yZ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Ss(),e=Br.identifierPrefix;if(Ut){var r=fo,n=ho;r=(n&~(1<<32-ds(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=np++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=jce++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$ce={readContext:zi,useCallback:CZ,useContext:zi,useEffect:gR,useImperativeHandle:NZ,useInsertionEffect:SZ,useLayoutEffect:_Z,useMemo:kZ,useReducer:Kb,useRef:wZ,useState:function(){return Kb(ip)},useDebugValue:yR,useDeferredValue:function(t){var e=Vi();return TZ(e,Pr.memoizedState,t)},useTransition:function(){var t=Kb(ip)[0],e=Vi().memoizedState;return[t,e]},useMutableSource:pZ,useSyncExternalStore:mZ,useId:OZ,unstable_isNewReconciler:!1},Dce={readContext:zi,useCallback:CZ,useContext:zi,useEffect:gR,useImperativeHandle:NZ,useInsertionEffect:SZ,useLayoutEffect:_Z,useMemo:kZ,useReducer:Gb,useRef:wZ,useState:function(){return Gb(ip)},useDebugValue:yR,useDeferredValue:function(t){var e=Vi();return Pr===null?e.memoizedState=t:TZ(e,Pr.memoizedState,t)},useTransition:function(){var t=Gb(ip)[0],e=Vi().memoizedState;return[t,e]},useMutableSource:pZ,useSyncExternalStore:mZ,useId:OZ,unstable_isNewReconciler:!1};function Zi(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Bj(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Qt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var a0={isMounted:function(t){return(t=t._reactInternals)?qc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=jn(),i=Fa(t),s=yo(n,i);s.payload=e,r!=null&&(s.callback=r),e=Da(t,s,i),e!==null&&(hs(e,t,i,n),Ug(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=jn(),i=Fa(t),s=yo(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Da(t,s,i),e!==null&&(hs(e,t,i,n),Ug(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=jn(),n=Fa(t),i=yo(r,n);i.tag=2,e!=null&&(i.callback=e),e=Da(t,i,n),e!==null&&(hs(e,t,n,r),Ug(e,t,n))}};function oA(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xf(r,n)||!Xf(i,s):!0}function RZ(t,e,r){var n=!1,i=el,s=e.contextType;return typeof s=="object"&&s!==null?s=zi(s):(i=Qn(e)?fc:mn.current,n=e.contextTypes,s=(n=n!=null)?_d(t,i):el),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=a0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function aA(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&a0.enqueueReplaceState(e,e.state,null)}function zj(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},cR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=zi(s):(s=Qn(e)?fc:mn.current,i.context=_d(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bj(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&a0.enqueueReplaceState(i,i.state,null),Cy(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function kd(t,e){try{var r="",n=e;do r+=ule(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Yb(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Vj(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Ace=typeof WeakMap=="function"?WeakMap:Map;function MZ(t,e,r){r=yo(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Py||(Py=!0,Zj=n),Vj(t,e)},r}function $Z(t,e,r){r=yo(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Vj(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Vj(t,e),typeof n!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function lA(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Ace;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Xce.bind(null,t,e,r),e.then(t,t))}function cA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uA(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=yo(-1,1),e.tag=2,Da(r,e,1))),r.lanes|=1),t)}var Fce=Ao.ReactCurrentOwner,Kn=!1;function _n(t,e,r,n){e.child=t===null?uZ(e,null,r,n):Nd(e,t.child,r,n)}function dA(t,e,r,n,i){r=r.render;var s=e.ref;return Ju(e,i),n=pR(t,e,r,n,s,i),r=mR(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ro(t,e,i)):(Ut&&r&&rR(e),e.flags|=1,_n(t,e,n,i),e.child)}function hA(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!NR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,DZ(t,e,s,n,i)):(t=Qg(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Xf,r(o,n)&&t.ref===e.ref)return Ro(t,e,i)}return e.flags|=1,t=qa(s,n),t.ref=e.ref,t.return=e,e.child=t}function DZ(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Xf(s,n)&&t.ref===e.ref)if(Kn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Kn=!0);else return e.lanes=t.lanes,Ro(t,e,i)}return Uj(t,e,r,n,i)}function AZ(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(Lu,li),li|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$t(Lu,li),li|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,$t(Lu,li),li|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,$t(Lu,li),li|=n;return _n(t,e,i,r),e.child}function FZ(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Uj(t,e,r,n,i){var s=Qn(r)?fc:mn.current;return s=_d(e,s),Ju(e,i),r=pR(t,e,r,n,s,i),n=mR(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ro(t,e,i)):(Ut&&n&&rR(e),e.flags|=1,_n(t,e,r,i),e.child)}function fA(t,e,r,n,i){if(Qn(r)){var s=!0;wy(e)}else s=!1;if(Ju(e,i),e.stateNode===null)Kg(t,e),RZ(e,r,n),zj(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=zi(c):(c=Qn(r)?fc:mn.current,c=_d(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&aA(e,o,n,c),na=!1;var f=e.memoizedState;o.state=f,Cy(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Yn.current||na?(typeof d=="function"&&(Bj(e,r,d,n),l=e.memoizedState),(a=na||oA(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,hZ(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zi(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=zi(l):(l=Qn(r)?fc:mn.current,l=_d(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&aA(e,o,n,l),na=!1,f=e.memoizedState,o.state=f,Cy(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Yn.current||na?(typeof p=="function"&&(Bj(e,r,p,n),m=e.memoizedState),(c=na||oA(e,r,c,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Hj(t,e,r,n,s,i)}function Hj(t,e,r,n,i,s){FZ(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&JD(e,r,!1),Ro(t,e,s);n=e.stateNode,Fce.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Nd(e,t.child,null,s),e.child=Nd(e,null,a,s)):_n(t,e,a,s),e.memoizedState=n.state,i&&JD(e,r,!0),e.child}function qZ(t){var e=t.stateNode;e.pendingContext?XD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&XD(t,e.context,!1),uR(t,e.containerInfo)}function pA(t,e,r,n,i){return Ed(),iR(i),e.flags|=256,_n(t,e,r,n),e.child}var Wj={dehydrated:null,treeContext:null,retryLane:0};function Kj(t){return{baseLanes:t,cachePool:null,transitions:null}}function LZ(t,e,r){var n=e.pendingProps,i=Wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$t(Wt,i&1),t===null)return qj(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=u0(o,n,0,null),t=Zl(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Kj(r),e.memoizedState=Wj,t):vR(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return qce(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=qa(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qa(a,s):(s=Zl(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Kj(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Wj,n}return s=t.child,t=s.sibling,n=qa(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function vR(t,e){return e=u0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cg(t,e,r,n){return n!==null&&iR(n),Nd(e,t.child,null,r),t=vR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qce(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Yb(Error(te(422))),cg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=u0({mode:"visible",children:n.children},i,0,null),s=Zl(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Nd(e,t.child,null,o),e.child.memoizedState=Kj(o),e.memoizedState=Wj,s);if(!(e.mode&1))return cg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(te(419)),n=Yb(s,n,void 0),cg(t,e,o,n)}if(a=(o&t.childLanes)!==0,Kn||a){if(n=Br,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Io(t,i),hs(n,t,i,-1))}return ER(),n=Yb(Error(te(421))),cg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Jce.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,fi=$a(i.nextSibling),pi=e,Ut=!0,ns=null,t!==null&&(Ii[Ri++]=ho,Ii[Ri++]=fo,Ii[Ri++]=pc,ho=t.id,fo=t.overflow,pc=e),e=vR(e,n.children),e.flags|=4096,e)}function mA(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Lj(t.return,e,r)}function Qb(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function BZ(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(_n(t,e,n.children,r),n=Wt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mA(t,r,e);else if(t.tag===19)mA(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if($t(Wt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&ky(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Qb(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ky(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Qb(e,!0,r,null,s);break;case"together":Qb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ro(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),gc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,r=qa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=qa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Lce(t,e,r){switch(e.tag){case 3:qZ(e),Ed();break;case 5:fZ(e);break;case 1:Qn(e.type)&&wy(e);break;case 4:uR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;$t(Ey,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?($t(Wt,Wt.current&1),e.flags|=128,null):r&e.child.childLanes?LZ(t,e,r):($t(Wt,Wt.current&1),t=Ro(t,e,r),t!==null?t.sibling:null);$t(Wt,Wt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return BZ(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$t(Wt,Wt.current),n)break;return null;case 22:case 23:return e.lanes=0,AZ(t,e,r)}return Ro(t,e,r)}var zZ,Gj,VZ,UZ;zZ=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Gj=function(){};VZ=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Pl(Ds.current);var s=null;switch(r){case"input":i=gj(t,i),n=gj(t,n),s=[];break;case"select":i=Qt({},i,{value:void 0}),n=Qt({},n,{value:void 0}),s=[];break;case"textarea":i=bj(t,i),n=bj(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=by)}wj(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&At("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};UZ=function(t,e,r,n){r!==n&&(e.flags|=4)};function Vh(t,e){if(!Ut)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Bce(t,e,r){var n=e.pendingProps;switch(nR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Qn(e.type)&&xy(),un(e),null;case 3:return n=e.stateNode,Cd(),qt(Yn),qt(mn),hR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ag(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ns!==null&&(rP(ns),ns=null))),Gj(t,e),un(e),null;case 5:dR(e);var i=Pl(rp.current);if(r=e.type,t!==null&&e.stateNode!=null)VZ(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(te(166));return un(e),null}if(t=Pl(Ds.current),ag(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[js]=e,n[ep]=s,t=(e.mode&1)!==0,r){case"dialog":At("cancel",n),At("close",n);break;case"iframe":case"object":case"embed":At("load",n);break;case"video":case"audio":for(i=0;i<af.length;i++)At(af[i],n);break;case"source":At("error",n);break;case"img":case"image":case"link":At("error",n),At("load",n);break;case"details":At("toggle",n);break;case"input":ED(n,s),At("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},At("invalid",n);break;case"textarea":CD(n,s),At("invalid",n)}wj(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&og(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&og(n.textContent,a,t),i=["children",""+a]):Uf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&At("scroll",n)}switch(r){case"input":Jm(n),ND(n,s,!0);break;case"textarea":Jm(n),kD(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=by)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vJ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[js]=e,t[ep]=n,zZ(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sj(r,n),r){case"dialog":At("cancel",t),At("close",t),i=n;break;case"iframe":case"object":case"embed":At("load",t),i=n;break;case"video":case"audio":for(i=0;i<af.length;i++)At(af[i],t);i=n;break;case"source":At("error",t),i=n;break;case"img":case"image":case"link":At("error",t),At("load",t),i=n;break;case"details":At("toggle",t),i=n;break;case"input":ED(t,n),i=gj(t,n),At("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Qt({},n,{value:void 0}),At("invalid",t);break;case"textarea":CD(t,n),i=bj(t,n),At("invalid",t);break;default:i=n}wj(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?wJ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bJ(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Hf(t,l):typeof l=="number"&&Hf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&At("scroll",t):l!=null&&zI(t,s,l,o))}switch(r){case"input":Jm(t),ND(t,n,!1);break;case"textarea":Jm(t),kD(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Za(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Gu(t,!!n.multiple,s,!1):n.defaultValue!=null&&Gu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=by)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)UZ(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(te(166));if(r=Pl(rp.current),Pl(Ds.current),ag(e)){if(n=e.stateNode,r=e.memoizedProps,n[js]=e,(s=n.nodeValue!==r)&&(t=pi,t!==null))switch(t.tag){case 3:og(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&og(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[js]=e,e.stateNode=n}return un(e),null;case 13:if(qt(Wt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&fi!==null&&e.mode&1&&!(e.flags&128))lZ(),Ed(),e.flags|=98560,s=!1;else if(s=ag(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(te(317));s[js]=e}else Ed(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),s=!1}else ns!==null&&(rP(ns),ns=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Wt.current&1?Ir===0&&(Ir=3):ER())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return Cd(),Gj(t,e),t===null&&Jf(e.stateNode.containerInfo),un(e),null;case 10:return aR(e.type._context),un(e),null;case 17:return Qn(e.type)&&xy(),un(e),null;case 19:if(qt(Wt),s=e.memoizedState,s===null)return un(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Vh(s,!1);else{if(Ir!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ky(t),o!==null){for(e.flags|=128,Vh(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return $t(Wt,Wt.current&1|2),e.child}t=t.sibling}s.tail!==null&&hr()>Td&&(e.flags|=128,n=!0,Vh(s,!1),e.lanes=4194304)}else{if(!n)if(t=ky(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Vh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ut)return un(e),null}else 2*hr()-s.renderingStartTime>Td&&r!==1073741824&&(e.flags|=128,n=!0,Vh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hr(),e.sibling=null,r=Wt.current,$t(Wt,n?r&1|2:r&1),e):(un(e),null);case 22:case 23:return _R(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?li&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function zce(t,e){switch(nR(e),e.tag){case 1:return Qn(e.type)&&xy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cd(),qt(Yn),qt(mn),hR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dR(e),null;case 13:if(qt(Wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Ed()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qt(Wt),null;case 4:return Cd(),null;case 10:return aR(e.type._context),null;case 22:case 23:return _R(),null;case 24:return null;default:return null}}var ug=!1,fn=!1,Vce=typeof WeakSet=="function"?WeakSet:Set,be=null;function qu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ir(t,e,n)}else r.current=null}function Yj(t,e,r){try{r()}catch(n){ir(t,e,n)}}var gA=!1;function Uce(t,e){if(Ij=gy,t=YJ(),tR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Rj={focusedElem:t,selectionRange:r},gy=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,b=m.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Zi(e.type,g),b);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){ir(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return m=gA,gA=!1,m}function wf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Yj(e,r,s)}i=i.next}while(i!==n)}}function l0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Qj(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function HZ(t){var e=t.alternate;e!==null&&(t.alternate=null,HZ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[js],delete e[ep],delete e[Dj],delete e[Cce],delete e[kce])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WZ(t){return t.tag===5||t.tag===3||t.tag===4}function yA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xj(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=by));else if(n!==4&&(t=t.child,t!==null))for(Xj(t,e,r),t=t.sibling;t!==null;)Xj(t,e,r),t=t.sibling}function Jj(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Jj(t,e,r),t=t.sibling;t!==null;)Jj(t,e,r),t=t.sibling}var Jr=null,rs=!1;function Yo(t,e,r){for(r=r.child;r!==null;)KZ(t,e,r),r=r.sibling}function KZ(t,e,r){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(e0,r)}catch{}switch(r.tag){case 5:fn||qu(r,e);case 6:var n=Jr,i=rs;Jr=null,Yo(t,e,r),Jr=n,rs=i,Jr!==null&&(rs?(t=Jr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jr.removeChild(r.stateNode));break;case 18:Jr!==null&&(rs?(t=Jr,r=r.stateNode,t.nodeType===8?Vb(t.parentNode,r):t.nodeType===1&&Vb(t,r),Yf(t)):Vb(Jr,r.stateNode));break;case 4:n=Jr,i=rs,Jr=r.stateNode.containerInfo,rs=!0,Yo(t,e,r),Jr=n,rs=i;break;case 0:case 11:case 14:case 15:if(!fn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Yj(r,e,o),i=i.next}while(i!==n)}Yo(t,e,r);break;case 1:if(!fn&&(qu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ir(r,e,a)}Yo(t,e,r);break;case 21:Yo(t,e,r);break;case 22:r.mode&1?(fn=(n=fn)||r.memoizedState!==null,Yo(t,e,r),fn=n):Yo(t,e,r);break;default:Yo(t,e,r)}}function vA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Vce),e.forEach(function(n){var i=Zce.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Xi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jr=a.stateNode,rs=!1;break e;case 3:Jr=a.stateNode.containerInfo,rs=!0;break e;case 4:Jr=a.stateNode.containerInfo,rs=!0;break e}a=a.return}if(Jr===null)throw Error(te(160));KZ(s,o,i),Jr=null,rs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ir(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GZ(e,t),e=e.sibling}function GZ(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xi(e,t),xs(t),n&4){try{wf(3,t,t.return),l0(3,t)}catch(g){ir(t,t.return,g)}try{wf(5,t,t.return)}catch(g){ir(t,t.return,g)}}break;case 1:Xi(e,t),xs(t),n&512&&r!==null&&qu(r,r.return);break;case 5:if(Xi(e,t),xs(t),n&512&&r!==null&&qu(r,r.return),t.flags&32){var i=t.stateNode;try{Hf(i,"")}catch(g){ir(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gJ(i,s),Sj(a,o);var c=Sj(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?wJ(i,h):d==="dangerouslySetInnerHTML"?bJ(i,h):d==="children"?Hf(i,h):zI(i,d,h,c)}switch(a){case"input":yj(i,s);break;case"textarea":yJ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Gu(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Gu(i,!!s.multiple,s.defaultValue,!0):Gu(i,!!s.multiple,s.multiple?[]:"",!1))}i[ep]=s}catch(g){ir(t,t.return,g)}}break;case 6:if(Xi(e,t),xs(t),n&4){if(t.stateNode===null)throw Error(te(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){ir(t,t.return,g)}}break;case 3:if(Xi(e,t),xs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Yf(e.containerInfo)}catch(g){ir(t,t.return,g)}break;case 4:Xi(e,t),xs(t);break;case 13:Xi(e,t),xs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(wR=hr())),n&4&&vA(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(fn=(c=fn)||d,Xi(e,t),fn=c):Xi(e,t),xs(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(h=be=d;be!==null;){switch(f=be,p=f.child,f.tag){case 0:case 11:case 14:case 15:wf(4,f,f.return);break;case 1:qu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){ir(n,r,g)}}break;case 5:qu(f,f.return);break;case 22:if(f.memoizedState!==null){xA(h);continue}}p!==null?(p.return=f,be=p):xA(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xJ("display",o))}catch(g){ir(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){ir(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xi(e,t),xs(t),n&4&&vA(t);break;case 21:break;default:Xi(e,t),xs(t)}}function xs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(WZ(r)){var n=r;break e}r=r.return}throw Error(te(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Hf(i,""),n.flags&=-33);var s=yA(t);Jj(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=yA(t);Xj(t,a,o);break;default:throw Error(te(161))}}catch(l){ir(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hce(t,e,r){be=t,YZ(t)}function YZ(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var i=be,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||ug;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||fn;a=ug;var c=fn;if(ug=o,(fn=l)&&!c)for(be=i;be!==null;)o=be,l=o.child,o.tag===22&&o.memoizedState!==null?wA(i):l!==null?(l.return=o,be=l):wA(i);for(;s!==null;)be=s,YZ(s),s=s.sibling;be=i,ug=a,fn=c}bA(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,be=s):bA(t)}}function bA(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fn||l0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!fn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Zi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nA(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}nA(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Yf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}fn||e.flags&512&&Qj(e)}catch(f){ir(e,e.return,f)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function xA(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function wA(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{l0(4,e)}catch(l){ir(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){ir(e,i,l)}}var s=e.return;try{Qj(e)}catch(l){ir(e,s,l)}break;case 5:var o=e.return;try{Qj(e)}catch(l){ir(e,o,l)}}}catch(l){ir(e,e.return,l)}if(e===t){be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,be=a;break}be=e.return}}var Wce=Math.ceil,jy=Ao.ReactCurrentDispatcher,bR=Ao.ReactCurrentOwner,Ai=Ao.ReactCurrentBatchConfig,dt=0,Br=null,vr=null,rn=0,li=0,Lu=ll(0),Ir=0,op=null,gc=0,c0=0,xR=0,Sf=null,Un=null,wR=0,Td=1/0,no=null,Py=!1,Zj=null,Aa=null,dg=!1,Ca=null,Iy=0,_f=0,eP=null,Gg=-1,Yg=0;function jn(){return dt&6?hr():Gg!==-1?Gg:Gg=hr()}function Fa(t){return t.mode&1?dt&2&&rn!==0?rn&-rn:Oce.transition!==null?(Yg===0&&(Yg=RJ()),Yg):(t=St,t!==0||(t=window.event,t=t===void 0?16:LJ(t.type)),t):1}function hs(t,e,r,n){if(50<_f)throw _f=0,eP=null,Error(te(185));Up(t,r,n),(!(dt&2)||t!==Br)&&(t===Br&&(!(dt&2)&&(c0|=r),Ir===4&&da(t,rn)),Xn(t,n),r===1&&dt===0&&!(e.mode&1)&&(Td=hr()+500,s0&&cl()))}function Xn(t,e){var r=t.callbackNode;Ole(t,e);var n=my(t,t===Br?rn:0);if(n===0)r!==null&&jD(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&jD(r),e===1)t.tag===0?Tce(SA.bind(null,t)):sZ(SA.bind(null,t)),Ece(function(){!(dt&6)&&cl()}),r=null;else{switch(MJ(n)){case 1:r=KI;break;case 4:r=PJ;break;case 16:r=py;break;case 536870912:r=IJ;break;default:r=py}r=nee(r,QZ.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function QZ(t,e){if(Gg=-1,Yg=0,dt&6)throw Error(te(327));var r=t.callbackNode;if(Zu()&&t.callbackNode!==r)return null;var n=my(t,t===Br?rn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ry(t,n);else{e=n;var i=dt;dt|=2;var s=JZ();(Br!==t||rn!==e)&&(no=null,Td=hr()+500,Jl(t,e));do try{Yce();break}catch(a){XZ(t,a)}while(!0);oR(),jy.current=s,dt=i,vr!==null?e=0:(Br=null,rn=0,e=Ir)}if(e!==0){if(e===2&&(i=kj(t),i!==0&&(n=i,e=tP(t,i))),e===1)throw r=op,Jl(t,0),da(t,n),Xn(t,hr()),r;if(e===6)da(t,n);else{if(i=t.current.alternate,!(n&30)&&!Kce(i)&&(e=Ry(t,n),e===2&&(s=kj(t),s!==0&&(n=s,e=tP(t,s))),e===1))throw r=op,Jl(t,0),da(t,n),Xn(t,hr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(te(345));case 2:Cl(t,Un,no);break;case 3:if(da(t,n),(n&130023424)===n&&(e=wR+500-hr(),10<e)){if(my(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){jn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$j(Cl.bind(null,t,Un,no),e);break}Cl(t,Un,no);break;case 4:if(da(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-ds(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=hr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Wce(n/1960))-n,10<n){t.timeoutHandle=$j(Cl.bind(null,t,Un,no),n);break}Cl(t,Un,no);break;case 5:Cl(t,Un,no);break;default:throw Error(te(329))}}}return Xn(t,hr()),t.callbackNode===r?QZ.bind(null,t):null}function tP(t,e){var r=Sf;return t.current.memoizedState.isDehydrated&&(Jl(t,e).flags|=256),t=Ry(t,e),t!==2&&(e=Un,Un=r,e!==null&&rP(e)),t}function rP(t){Un===null?Un=t:Un.push.apply(Un,t)}function Kce(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!fs(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function da(t,e){for(e&=~xR,e&=~c0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ds(e),n=1<<r;t[r]=-1,e&=~n}}function SA(t){if(dt&6)throw Error(te(327));Zu();var e=my(t,0);if(!(e&1))return Xn(t,hr()),null;var r=Ry(t,e);if(t.tag!==0&&r===2){var n=kj(t);n!==0&&(e=n,r=tP(t,n))}if(r===1)throw r=op,Jl(t,0),da(t,e),Xn(t,hr()),r;if(r===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cl(t,Un,no),Xn(t,hr()),null}function SR(t,e){var r=dt;dt|=1;try{return t(e)}finally{dt=r,dt===0&&(Td=hr()+500,s0&&cl())}}function yc(t){Ca!==null&&Ca.tag===0&&!(dt&6)&&Zu();var e=dt;dt|=1;var r=Ai.transition,n=St;try{if(Ai.transition=null,St=1,t)return t()}finally{St=n,Ai.transition=r,dt=e,!(dt&6)&&cl()}}function _R(){li=Lu.current,qt(Lu)}function Jl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,_ce(r)),vr!==null)for(r=vr.return;r!==null;){var n=r;switch(nR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xy();break;case 3:Cd(),qt(Yn),qt(mn),hR();break;case 5:dR(n);break;case 4:Cd();break;case 13:qt(Wt);break;case 19:qt(Wt);break;case 10:aR(n.type._context);break;case 22:case 23:_R()}r=r.return}if(Br=t,vr=t=qa(t.current,null),rn=li=e,Ir=0,op=null,xR=c0=gc=0,Un=Sf=null,jl!==null){for(e=0;e<jl.length;e++)if(r=jl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}jl=null}return t}function XZ(t,e){do{var r=vr;try{if(oR(),Hg.current=Oy,Ty){for(var n=Gt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ty=!1}if(mc=0,Fr=Pr=Gt=null,xf=!1,np=0,bR.current=null,r===null||r.return===null){Ir=1,op=e,vr=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=rn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=cA(o);if(p!==null){p.flags&=-257,uA(p,o,a,s,e),p.mode&1&&lA(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){lA(s,c,e),ER();break e}l=Error(te(426))}}else if(Ut&&a.mode&1){var b=cA(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),uA(b,o,a,s,e),iR(kd(l,a));break e}}s=l=kd(l,a),Ir!==4&&(Ir=2),Sf===null?Sf=[s]:Sf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=MZ(s,l,e);rA(s,y);break e;case 1:a=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Aa===null||!Aa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=$Z(s,a,e);rA(s,x);break e}}s=s.return}while(s!==null)}eee(r)}catch(S){e=S,vr===r&&r!==null&&(vr=r=r.return);continue}break}while(!0)}function JZ(){var t=jy.current;return jy.current=Oy,t===null?Oy:t}function ER(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),Br===null||!(gc&268435455)&&!(c0&268435455)||da(Br,rn)}function Ry(t,e){var r=dt;dt|=2;var n=JZ();(Br!==t||rn!==e)&&(no=null,Jl(t,e));do try{Gce();break}catch(i){XZ(t,i)}while(!0);if(oR(),dt=r,jy.current=n,vr!==null)throw Error(te(261));return Br=null,rn=0,Ir}function Gce(){for(;vr!==null;)ZZ(vr)}function Yce(){for(;vr!==null&&!xle();)ZZ(vr)}function ZZ(t){var e=ree(t.alternate,t,li);t.memoizedProps=t.pendingProps,e===null?eee(t):vr=e,bR.current=null}function eee(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=zce(r,e),r!==null){r.flags&=32767,vr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ir=6,vr=null;return}}else if(r=Bce(r,e,li),r!==null){vr=r;return}if(e=e.sibling,e!==null){vr=e;return}vr=e=t}while(e!==null);Ir===0&&(Ir=5)}function Cl(t,e,r){var n=St,i=Ai.transition;try{Ai.transition=null,St=1,Qce(t,e,r,n)}finally{Ai.transition=i,St=n}return null}function Qce(t,e,r,n){do Zu();while(Ca!==null);if(dt&6)throw Error(te(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(jle(t,s),t===Br&&(vr=Br=null,rn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||dg||(dg=!0,nee(py,function(){return Zu(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Ai.transition,Ai.transition=null;var o=St;St=1;var a=dt;dt|=4,bR.current=null,Uce(t,r),GZ(r,t),gce(Rj),gy=!!Ij,Rj=Ij=null,t.current=r,Hce(r),wle(),dt=a,St=o,Ai.transition=s}else t.current=r;if(dg&&(dg=!1,Ca=t,Iy=i),s=t.pendingLanes,s===0&&(Aa=null),Ele(r.stateNode),Xn(t,hr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Py)throw Py=!1,t=Zj,Zj=null,t;return Iy&1&&t.tag!==0&&Zu(),s=t.pendingLanes,s&1?t===eP?_f++:(_f=0,eP=t):_f=0,cl(),null}function Zu(){if(Ca!==null){var t=MJ(Iy),e=Ai.transition,r=St;try{if(Ai.transition=null,St=16>t?16:t,Ca===null)var n=!1;else{if(t=Ca,Ca=null,Iy=0,dt&6)throw Error(te(331));var i=dt;for(dt|=4,be=t.current;be!==null;){var s=be,o=s.child;if(be.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(be=c;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:wf(8,d,s)}var h=d.child;if(h!==null)h.return=d,be=h;else for(;be!==null;){d=be;var f=d.sibling,p=d.return;if(HZ(d),d===c){be=null;break}if(f!==null){f.return=p,be=f;break}be=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}be=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,be=o;else e:for(;be!==null;){if(s=be,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,be=y;break e}be=s.return}}var v=t.current;for(be=v;be!==null;){o=be;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,be=w;else e:for(o=v;be!==null;){if(a=be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:l0(9,a)}}catch(S){ir(a,a.return,S)}if(a===o){be=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,be=x;break e}be=a.return}}if(dt=i,cl(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(e0,t)}catch{}n=!0}return n}finally{St=r,Ai.transition=e}}return!1}function _A(t,e,r){e=kd(r,e),e=MZ(t,e,1),t=Da(t,e,1),e=jn(),t!==null&&(Up(t,1,e),Xn(t,e))}function ir(t,e,r){if(t.tag===3)_A(t,t,r);else for(;e!==null;){if(e.tag===3){_A(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Aa===null||!Aa.has(n))){t=kd(r,t),t=$Z(e,t,1),e=Da(e,t,1),t=jn(),e!==null&&(Up(e,1,t),Xn(e,t));break}}e=e.return}}function Xce(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=jn(),t.pingedLanes|=t.suspendedLanes&r,Br===t&&(rn&r)===r&&(Ir===4||Ir===3&&(rn&130023424)===rn&&500>hr()-wR?Jl(t,0):xR|=r),Xn(t,e)}function tee(t,e){e===0&&(t.mode&1?(e=tg,tg<<=1,!(tg&130023424)&&(tg=4194304)):e=1);var r=jn();t=Io(t,e),t!==null&&(Up(t,e,r),Xn(t,r))}function Jce(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),tee(t,r)}function Zce(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(te(314))}n!==null&&n.delete(e),tee(t,r)}var ree;ree=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yn.current)Kn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Kn=!1,Lce(t,e,r);Kn=!!(t.flags&131072)}else Kn=!1,Ut&&e.flags&1048576&&oZ(e,_y,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Kg(t,e),t=e.pendingProps;var i=_d(e,mn.current);Ju(e,r),i=pR(null,e,n,t,i,r);var s=mR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(n)?(s=!0,wy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cR(e),i.updater=a0,e.stateNode=i,i._reactInternals=e,zj(e,n,t,r),e=Hj(null,e,n,!0,s,r)):(e.tag=0,Ut&&s&&rR(e),_n(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Kg(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=tue(n),t=Zi(n,t),i){case 0:e=Uj(null,e,n,t,r);break e;case 1:e=fA(null,e,n,t,r);break e;case 11:e=dA(null,e,n,t,r);break e;case 14:e=hA(null,e,n,Zi(n.type,t),r);break e}throw Error(te(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),Uj(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),fA(t,e,n,i,r);case 3:e:{if(qZ(e),t===null)throw Error(te(387));n=e.pendingProps,s=e.memoizedState,i=s.element,hZ(t,e),Cy(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=kd(Error(te(423)),e),e=pA(t,e,n,r,i);break e}else if(n!==i){i=kd(Error(te(424)),e),e=pA(t,e,n,r,i);break e}else for(fi=$a(e.stateNode.containerInfo.firstChild),pi=e,Ut=!0,ns=null,r=uZ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ed(),n===i){e=Ro(t,e,r);break e}_n(t,e,n,r)}e=e.child}return e;case 5:return fZ(e),t===null&&qj(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Mj(n,i)?o=null:s!==null&&Mj(n,s)&&(e.flags|=32),FZ(t,e),_n(t,e,o,r),e.child;case 6:return t===null&&qj(e),null;case 13:return LZ(t,e,r);case 4:return uR(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Nd(e,null,n,r):_n(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),dA(t,e,n,i,r);case 7:return _n(t,e,e.pendingProps,r),e.child;case 8:return _n(t,e,e.pendingProps.children,r),e.child;case 12:return _n(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,$t(Ey,n._currentValue),n._currentValue=o,s!==null)if(fs(s.value,o)){if(s.children===i.children&&!Yn.current){e=Ro(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=yo(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Lj(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(te(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Lj(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_n(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Ju(e,r),i=zi(i),n=n(i),e.flags|=1,_n(t,e,n,r),e.child;case 14:return n=e.type,i=Zi(n,e.pendingProps),i=Zi(n.type,i),hA(t,e,n,i,r);case 15:return DZ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),Kg(t,e),e.tag=1,Qn(n)?(t=!0,wy(e)):t=!1,Ju(e,r),RZ(e,n,i),zj(e,n,i,r),Hj(null,e,n,!0,t,r);case 19:return BZ(t,e,r);case 22:return AZ(t,e,r)}throw Error(te(156,e.tag))};function nee(t,e){return jJ(t,e)}function eue(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(t,e,r,n){return new eue(t,e,r,n)}function NR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tue(t){if(typeof t=="function")return NR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===UI)return 11;if(t===HI)return 14}return 2}function qa(t,e){var r=t.alternate;return r===null?(r=Di(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Qg(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")NR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ju:return Zl(r.children,i,s,e);case VI:o=8,i|=8;break;case hj:return t=Di(12,r,e,i|2),t.elementType=hj,t.lanes=s,t;case fj:return t=Di(13,r,e,i),t.elementType=fj,t.lanes=s,t;case pj:return t=Di(19,r,e,i),t.elementType=pj,t.lanes=s,t;case fJ:return u0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dJ:o=10;break e;case hJ:o=9;break e;case UI:o=11;break e;case HI:o=14;break e;case ra:o=16,n=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Di(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Zl(t,e,r,n){return t=Di(7,t,n,e),t.lanes=r,t}function u0(t,e,r,n){return t=Di(22,t,n,e),t.elementType=fJ,t.lanes=r,t.stateNode={isHidden:!1},t}function Xb(t,e,r){return t=Di(6,t,null,e),t.lanes=r,t}function Jb(t,e,r){return e=Di(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rue(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ib(0),this.expirationTimes=Ib(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ib(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function CR(t,e,r,n,i,s,o,a,l){return t=new rue(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Di(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cR(s),t}function nue(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ou,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function iee(t){if(!t)return el;t=t._reactInternals;e:{if(qc(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var r=t.type;if(Qn(r))return iZ(t,r,e)}return e}function see(t,e,r,n,i,s,o,a,l){return t=CR(r,n,!0,t,i,s,o,a,l),t.context=iee(null),r=t.current,n=jn(),i=Fa(r),s=yo(n,i),s.callback=e??null,Da(r,s,i),t.current.lanes=i,Up(t,i,n),Xn(t,n),t}function d0(t,e,r,n){var i=e.current,s=jn(),o=Fa(i);return r=iee(r),e.context===null?e.context=r:e.pendingContext=r,e=yo(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Da(i,e,o),t!==null&&(hs(t,i,o,s),Ug(t,i,o)),o}function My(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function EA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function kR(t,e){EA(t,e),(t=t.alternate)&&EA(t,e)}function iue(){return null}var oee=typeof reportError=="function"?reportError:function(t){console.error(t)};function TR(t){this._internalRoot=t}h0.prototype.render=TR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));d0(t,e,null,null)};h0.prototype.unmount=TR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yc(function(){d0(null,t,null,null)}),e[Po]=null}};function h0(t){this._internalRoot=t}h0.prototype.unstable_scheduleHydration=function(t){if(t){var e=AJ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ua.length&&e!==0&&e<ua[r].priority;r++);ua.splice(r,0,t),r===0&&qJ(t)}};function OR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function f0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function NA(){}function sue(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=My(o);s.call(c)}}var o=see(e,n,t,0,null,!1,!1,"",NA);return t._reactRootContainer=o,t[Po]=o.current,Jf(t.nodeType===8?t.parentNode:t),yc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=My(l);a.call(c)}}var l=CR(t,0,!1,null,null,!1,!1,"",NA);return t._reactRootContainer=l,t[Po]=l.current,Jf(t.nodeType===8?t.parentNode:t),yc(function(){d0(e,l,r,n)}),l}function p0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=My(o);a.call(l)}}d0(e,o,t,i)}else o=sue(r,e,t,i,n);return My(o)}$J=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=of(e.pendingLanes);r!==0&&(GI(e,r|1),Xn(e,hr()),!(dt&6)&&(Td=hr()+500,cl()))}break;case 13:yc(function(){var n=Io(t,1);if(n!==null){var i=jn();hs(n,t,1,i)}}),kR(t,1)}};YI=function(t){if(t.tag===13){var e=Io(t,134217728);if(e!==null){var r=jn();hs(e,t,134217728,r)}kR(t,134217728)}};DJ=function(t){if(t.tag===13){var e=Fa(t),r=Io(t,e);if(r!==null){var n=jn();hs(r,t,e,n)}kR(t,e)}};AJ=function(){return St};FJ=function(t,e){var r=St;try{return St=t,e()}finally{St=r}};Ej=function(t,e,r){switch(e){case"input":if(yj(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=i0(n);if(!i)throw Error(te(90));mJ(n),yj(n,i)}}}break;case"textarea":yJ(t,r);break;case"select":e=r.value,e!=null&&Gu(t,!!r.multiple,e,!1)}};EJ=SR;NJ=yc;var oue={usingClientEntryPoint:!1,Events:[Wp,Mu,i0,SJ,_J,SR]},Uh={findFiberByHostInstance:Ol,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aue={bundleType:Uh.bundleType,version:Uh.version,rendererPackageName:Uh.rendererPackageName,rendererConfig:Uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=TJ(t),t===null?null:t.stateNode},findFiberByHostInstance:Uh.findFiberByHostInstance||iue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hg.isDisabled&&hg.supportsFiber)try{e0=hg.inject(aue),$s=hg}catch{}}yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oue;yi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OR(e))throw Error(te(200));return nue(t,e,null,r)};yi.createRoot=function(t,e){if(!OR(t))throw Error(te(299));var r=!1,n="",i=oee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=CR(t,1,!1,null,null,r,!1,n,i),t[Po]=e.current,Jf(t.nodeType===8?t.parentNode:t),new TR(e)};yi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=TJ(e),t=t===null?null:t.stateNode,t};yi.flushSync=function(t){return yc(t)};yi.hydrate=function(t,e,r){if(!f0(e))throw Error(te(200));return p0(null,t,e,!0,r)};yi.hydrateRoot=function(t,e,r){if(!OR(t))throw Error(te(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=oee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=see(e,null,t,1,r??null,i,!1,s,o),t[Po]=e.current,Jf(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new h0(e)};yi.render=function(t,e,r){if(!f0(e))throw Error(te(200));return p0(null,t,e,!1,r)};yi.unmountComponentAtNode=function(t){if(!f0(t))throw Error(te(40));return t._reactRootContainer?(yc(function(){p0(null,null,t,!1,function(){t._reactRootContainer=null,t[Po]=null})}),!0):!1};yi.unstable_batchedUpdates=SR;yi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!f0(r))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return p0(t,e,r,!1,n)};yi.version="18.3.1-next-f1338f8080-20240426";function aee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aee)}catch(t){console.error(t)}}aee(),aJ.exports=yi;var lee=aJ.exports;const lue=YX(lee);var CA=lee;uj.createRoot=CA.createRoot,uj.hydrateRoot=CA.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ap.apply(this,arguments)}var ka;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ka||(ka={}));const kA="popstate";function cue(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return nP("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:$y(i)}return due(e,r,null,t)}function Yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jR(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uue(){return Math.random().toString(36).substr(2,8)}function TA(t,e){return{usr:t.state,key:t.key,idx:e}}function nP(t,e,r,n){return r===void 0&&(r=null),ap({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?th(e):e,{state:r,key:e&&e.key||n||uue()})}function $y(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function th(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function due(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=ka.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ap({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ka.Pop;let b=d(),y=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:y})}function f(b,y){a=ka.Push;let v=nP(g.location,b,y);c=d()+1;let w=TA(v,c),x=g.createHref(v);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(b,y){a=ka.Replace;let v=nP(g.location,b,y);c=d();let w=TA(v,c),x=g.createHref(v);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(b){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof b=="string"?b:$y(b);return v=v.replace(/ $/,"%20"),Yt(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(kA,h),l=b,()=>{i.removeEventListener(kA,h),l=null}},createHref(b){return e(i,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return o.go(b)}};return g}var OA;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(OA||(OA={}));function hue(t,e,r){return r===void 0&&(r="/"),fue(t,e,r)}function fue(t,e,r,n){let i=typeof e=="string"?th(e):e,s=Od(i.pathname||"/",r);if(s==null)return null;let o=cee(t);pue(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Nue(s);a=_ue(o[l],c)}return a}function cee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Yt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=La([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cee(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:wue(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of uee(s.path))i(s,o,l)}),e}function uee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=uee(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function pue(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Sue(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const mue=/^:[\w-]+$/,gue=3,yue=2,vue=1,bue=10,xue=-2,jA=t=>t==="*";function wue(t,e){let r=t.split("/"),n=r.length;return r.some(jA)&&(n+=xue),e&&(n+=yue),r.filter(i=>!jA(i)).reduce((i,s)=>i+(mue.test(s)?gue:s===""?vue:bue),n)}function Sue(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function _ue(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=iP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:La([s,h.pathname]),pathnameBase:jue(La([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=La([s,h.pathnameBase]))}return o}function iP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Eue(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Eue(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),jR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Nue(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Od(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Cue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kue=t=>Cue.test(t);function Tue(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?th(t):t,s;if(r)if(kue(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),jR(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=PA(r.substring(1),"/"):s=PA(r,e)}else s=e;return{pathname:s,search:Pue(n),hash:Iue(i)}}function PA(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Zb(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Oue(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function PR(t,e){let r=Oue(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function IR(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=th(t):(i=ap({},t),Yt(!i.pathname||!i.pathname.includes("?"),Zb("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),Zb("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),Zb("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Tue(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const La=t=>t.join("/").replace(/\/\/+/g,"/"),jue=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Pue=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Iue=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Rue(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dee=["post","put","patch","delete"];new Set(dee);const Mue=["get",...dee];new Set(Mue);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lp.apply(this,arguments)}const m0=T.createContext(null),hee=T.createContext(null),Fo=T.createContext(null),g0=T.createContext(null),qo=T.createContext({outlet:null,matches:[],isDataRoute:!1}),fee=T.createContext(null);function $ue(t,e){let{relative:r}=e===void 0?{}:e;rh()||Yt(!1);let{basename:n,navigator:i}=T.useContext(Fo),{hash:s,pathname:o,search:a}=y0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:La([n,o])),i.createHref({pathname:l,search:a,hash:s})}function rh(){return T.useContext(g0)!=null}function Lo(){return rh()||Yt(!1),T.useContext(g0).location}function pee(t){T.useContext(Fo).static||T.useLayoutEffect(t)}function vn(){let{isDataRoute:t}=T.useContext(qo);return t?Gue():Due()}function Due(){rh()||Yt(!1);let t=T.useContext(m0),{basename:e,future:r,navigator:n}=T.useContext(Fo),{matches:i}=T.useContext(qo),{pathname:s}=Lo(),o=JSON.stringify(PR(i,r.v7_relativeSplatPath)),a=T.useRef(!1);return pee(()=>{a.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=IR(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:La([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function Vs(){let{matches:t}=T.useContext(qo),e=t[t.length-1];return e?e.params:{}}function y0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(Fo),{matches:i}=T.useContext(qo),{pathname:s}=Lo(),o=JSON.stringify(PR(i,n.v7_relativeSplatPath));return T.useMemo(()=>IR(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function Aue(t,e){return Fue(t,e)}function Fue(t,e,r,n){rh()||Yt(!1);let{navigator:i}=T.useContext(Fo),{matches:s}=T.useContext(qo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Lo(),d;if(e){var h;let b=typeof e=="string"?th(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||Yt(!1),d=b}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=hue(t,{pathname:p}),g=Vue(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:La([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:La([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,r,n);return e&&g?T.createElement(g0.Provider,{value:{location:lp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ka.Pop}},g):g}function que(){let t=Kue(),e=Rue(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:i},r):null,null)}const Lue=T.createElement(que,null);class Bue extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(qo.Provider,{value:this.props.routeContext},T.createElement(fee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zue(t){let{routeContext:e,match:r,children:n}=t,i=T.useContext(m0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(qo.Provider,{value:e},n)}function Vue(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Yt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,b=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Lue,l&&(c<0&&f===0?(Yue("route-fallback"),m=!0,b=null):c===f&&(m=!0,b=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),v=()=>{let w;return p?w=g:m?w=b:h.route.Component?w=T.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,T.createElement(zue,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(Bue,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var mee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mee||{}),gee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gee||{});function Uue(t){let e=T.useContext(m0);return e||Yt(!1),e}function Hue(t){let e=T.useContext(hee);return e||Yt(!1),e}function Wue(t){let e=T.useContext(qo);return e||Yt(!1),e}function yee(t){let e=Wue(),r=e.matches[e.matches.length-1];return r.route.id||Yt(!1),r.route.id}function Kue(){var t;let e=T.useContext(fee),r=Hue(),n=yee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Gue(){let{router:t}=Uue(mee.UseNavigateStable),e=yee(gee.UseNavigateStable),r=T.useRef(!1);return pee(()=>{r.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lp({fromRouteId:e},s)))},[t,e])}const IA={};function Yue(t,e,r){IA[t]||(IA[t]=!0)}function Que(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vee(t){let{to:e,replace:r,state:n,relative:i}=t;rh()||Yt(!1);let{future:s,static:o}=T.useContext(Fo),{matches:a}=T.useContext(qo),{pathname:l}=Lo(),c=vn(),d=IR(e,PR(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:i}),[c,h,i,r,n]),null}function mt(t){Yt(!1)}function Xue(t){let{basename:e="/",children:r=null,location:n,navigationType:i=ka.Pop,navigator:s,static:o=!1,future:a}=t;rh()&&Yt(!1);let l=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:s,static:o,future:lp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=th(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=T.useMemo(()=>{let b=Od(d,l);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:T.createElement(Fo.Provider,{value:c},T.createElement(g0.Provider,{children:r,value:g}))}function RA(t){let{children:e,location:r}=t;return Aue(sP(e),r)}new Promise(()=>{});function sP(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,i)=>{if(!T.isValidElement(n))return;let s=[...e,i];if(n.type===T.Fragment){r.push.apply(r,sP(n.props.children,s));return}n.type!==mt&&Yt(!1),!n.props.index||!n.props.children||Yt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=sP(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dy(){return Dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dy.apply(this,arguments)}function bee(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Jue(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Zue(t,e){return t.button===0&&(!e||e==="_self")&&!Jue(t)}function oP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function ede(t,e){let r=oP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const tde=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rde=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],nde="6";try{window.__reactRouterVersion=nde}catch{}const ide=T.createContext({isTransitioning:!1}),sde="startTransition",MA=Xae[sde];function ode(t){let{basename:e,children:r,future:n,window:i}=t,s=T.useRef();s.current==null&&(s.current=cue({window:i,v5Compat:!0}));let o=s.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=T.useCallback(h=>{c&&MA?MA(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>Que(n),[n]),T.createElement(Xue,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const ade=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lde=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ce=T.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=bee(e,tde),{basename:p}=T.useContext(Fo),m,g=!1;if(typeof c=="string"&&lde.test(c)&&(m=c,ade))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=Od(x.pathname,p);x.origin===w.origin&&S!=null?c=S+x.search+x.hash:g=!0}catch{}let b=$ue(c,{relative:i}),y=dde(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function v(w){n&&n(w),w.defaultPrevented||y(w)}return T.createElement("a",Dy({},f,{href:m||b,onClick:g||s?n:v,ref:r,target:l}))}),cde=T.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=bee(e,rde),f=y0(l,{relative:h.relative}),p=Lo(),m=T.useContext(hee),{navigator:g,basename:b}=T.useContext(Fo),y=m!=null&&hde(f)&&c===!0,v=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&b&&(x=Od(x,b)||x);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let _=w===v||!o&&w.startsWith(v)&&w.charAt(S)==="/",N=x!=null&&(x===v||!o&&x.startsWith(v)&&x.charAt(v.length)==="/"),E={isActive:_,isPending:N,isTransitioning:y},k=_?n:void 0,C;typeof s=="function"?C=s(E):C=[s,_?"active":null,N?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(E):a;return T.createElement(ce,Dy({},h,{"aria-current":k,className:C,ref:r,style:O,to:l,viewTransition:c}),typeof d=="function"?d(E):d)});var aP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(aP||(aP={}));var $A;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($A||($A={}));function ude(t){let e=T.useContext(m0);return e||Yt(!1),e}function dde(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=vn(),c=Lo(),d=y0(t,{relative:o});return T.useCallback(h=>{if(Zue(h,r)){h.preventDefault();let f=n!==void 0?n:$y(c)===$y(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,n,i,r,t,s,o,a])}function RR(t){let e=T.useRef(oP(t)),r=T.useRef(!1),n=Lo(),i=T.useMemo(()=>ede(n.search,r.current?null:e.current),[n.search]),s=vn(),o=T.useCallback((a,l)=>{const c=oP(typeof a=="function"?a(i):a);r.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function hde(t,e){e===void 0&&(e={});let r=T.useContext(ide);r==null&&Yt(!1);let{basename:n}=ude(aP.useViewTransitionState),i=y0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=Od(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Od(r.nextLocation.pathname,n)||r.nextLocation.pathname;return iP(i.pathname,o)!=null||iP(i.pathname,s)!=null}var Lc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},fde={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ma,$I,AX,pde=(AX=class{constructor(){ve(this,ma,fde);ve(this,$I,!1)}setTimeoutProvider(t){ae(this,ma,t)}setTimeout(t,e){return I(this,ma).setTimeout(t,e)}clearTimeout(t){I(this,ma).clearTimeout(t)}setInterval(t,e){return I(this,ma).setInterval(t,e)}clearInterval(t){I(this,ma).clearInterval(t)}},ma=new WeakMap,$I=new WeakMap,AX),Il=new pde;function mde(t){setTimeout(t,0)}var vc=typeof window>"u"||"Deno"in globalThis;function hn(){}function gde(t,e){return typeof t=="function"?t(e):t}function lP(t){return typeof t=="number"&&t>=0&&t!==1/0}function xee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ba(t,e){return typeof t=="function"?t(e):t}function Oi(t,e){return typeof t=="function"?t(e):t}function DA(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==MR(o,e.options))return!1}else if(!cp(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function AA(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(bc(e.options.mutationKey)!==bc(s))return!1}else if(!cp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function MR(t,e){return((e==null?void 0:e.queryKeyHashFn)||bc)(t)}function bc(t){return JSON.stringify(t,(e,r)=>cP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function cp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>cp(t[r],e[r])):!1}var yde=Object.prototype.hasOwnProperty;function $R(t,e){if(t===e)return t;const r=FA(t)&&FA(e);if(!r&&!(cP(t)&&cP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=r?c:s[c],h=t[d],f=e[d];if(h===f){a[d]=h,(r?c<i:yde.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=$R(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function up(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function FA(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function cP(t){if(!qA(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!qA(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function qA(t){return Object.prototype.toString.call(t)==="[object Object]"}function vde(t){return new Promise(e=>{Il.setTimeout(e,t)})}function uP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?$R(t,e):e}function bde(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function xde(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var DR=Symbol();function wee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===DR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function AR(t,e){return typeof t=="function"?t(...e):!!t}function wde(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var Vl,ga,ad,FX,Sde=(FX=class extends Lc{constructor(){super();ve(this,Vl);ve(this,ga);ve(this,ad);ae(this,ad,e=>{if(!vc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){I(this,ga)||this.setEventListener(I(this,ad))}onUnsubscribe(){var e;this.hasListeners()||((e=I(this,ga))==null||e.call(this),ae(this,ga,void 0))}setEventListener(e){var r;ae(this,ad,e),(r=I(this,ga))==null||r.call(this),ae(this,ga,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){I(this,Vl)!==e&&(ae(this,Vl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof I(this,Vl)=="boolean"?I(this,Vl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Vl=new WeakMap,ga=new WeakMap,ad=new WeakMap,FX),FR=new Sde;function dP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var _de=mde;function Ede(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=_de;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var cr=Ede(),ld,ya,cd,qX,Nde=(qX=class extends Lc{constructor(){super();ve(this,ld,!0);ve(this,ya);ve(this,cd);ae(this,cd,e=>{if(!vc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){I(this,ya)||this.setEventListener(I(this,cd))}onUnsubscribe(){var e;this.hasListeners()||((e=I(this,ya))==null||e.call(this),ae(this,ya,void 0))}setEventListener(e){var r;ae(this,cd,e),(r=I(this,ya))==null||r.call(this),ae(this,ya,e(this.setOnline.bind(this)))}setOnline(e){I(this,ld)!==e&&(ae(this,ld,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return I(this,ld)}},ld=new WeakMap,ya=new WeakMap,cd=new WeakMap,qX),Ay=new Nde;function Cde(t){return Math.min(1e3*2**t,3e4)}function See(t){return(t??"online")==="online"?Ay.isOnline():!0}var hP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function _ee(t){let e=!1,r=0,n;const i=dP(),s=()=>i.status!=="pending",o=g=>{var b;if(!s()){const y=new hP(g);f(y),(b=t.onCancel)==null||b.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>FR.isFocused()&&(t.networkMode==="always"||Ay.isOnline())&&t.canRun(),d=()=>See(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var b;n=y=>{(s()||c())&&g(y)},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const b=r===0?t.initialPromise:void 0;try{g=b??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const v=t.retry??(vc?0:3),w=t.retryDelay??Cde,x=typeof w=="function"?w(r,y):w,S=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),vde(x).then(()=>c()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Ul,LX,Eee=(LX=class{constructor(){ve(this,Ul)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),lP(this.gcTime)&&ae(this,Ul,Il.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vc?1/0:5*60*1e3))}clearGcTimeout(){I(this,Ul)&&(Il.clearTimeout(I(this,Ul)),ae(this,Ul,void 0))}},Ul=new WeakMap,LX),Hl,ud,ki,Wl,Ar,$p,Kl,es,to,BX,kde=(BX=class extends Eee{constructor(e){super();ve(this,es);ve(this,Hl);ve(this,ud);ve(this,ki);ve(this,Wl);ve(this,Ar);ve(this,$p);ve(this,Kl);ae(this,Kl,!1),ae(this,$p,e.defaultOptions),this.setOptions(e.options),this.observers=[],ae(this,Wl,e.client),ae(this,ki,I(this,Wl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ae(this,Hl,BA(this.options)),this.state=e.state??I(this,Hl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=I(this,Ar))==null?void 0:e.promise}setOptions(e){if(this.options={...I(this,$p),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=BA(this.options);r.data!==void 0&&(this.setState(LA(r.data,r.dataUpdatedAt)),ae(this,Hl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&I(this,ki).remove(this)}setData(e,r){const n=uP(this.state.data,e,this.options);return $e(this,es,to).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){$e(this,es,to).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=I(this,Ar))==null?void 0:n.promise;return(i=I(this,Ar))==null||i.cancel(e),r?r.then(hn).catch(hn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(I(this,Hl))}isActive(){return this.observers.some(e=>Oi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===DR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ba(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!xee(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=I(this,Ar))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=I(this,Ar))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),I(this,ki).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(I(this,Ar)&&(I(this,Kl)?I(this,Ar).cancel({revert:!0}):I(this,Ar).cancelRetry()),this.scheduleGc()),I(this,ki).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$e(this,es,to).call(this,{type:"invalidate"})}async fetch(e,r){var l,c,d,h,f,p,m,g,b,y,v,w;if(this.state.fetchStatus!=="idle"&&((l=I(this,Ar))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(I(this,Ar))return I(this,Ar).continueRetry(),I(this,Ar).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(ae(this,Kl,!0),n.signal)})},s=()=>{const x=wee(this.options,r),_=(()=>{const N={client:I(this,Wl),queryKey:this.queryKey,meta:this.meta};return i(N),N})();return ae(this,Kl,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:I(this,Wl),state:this.state,fetchFn:s};return i(x),x})();(c=this.options.behavior)==null||c.onFetch(a,this),ae(this,ud,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&$e(this,es,to).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),ae(this,Ar,_ee({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof hP&&x.revert&&this.setState({...I(this,ud),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{$e(this,es,to).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{$e(this,es,to).call(this,{type:"pause"})},onContinue:()=>{$e(this,es,to).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await I(this,Ar).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=I(this,ki).config).onSuccess)==null||p.call(f,x,this),(g=(m=I(this,ki).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof hP){if(x.silent)return I(this,Ar).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw $e(this,es,to).call(this,{type:"error",error:x}),(y=(b=I(this,ki).config).onError)==null||y.call(b,x,this),(w=(v=I(this,ki).config).onSettled)==null||w.call(v,this.state.data,x,this),x}finally{this.scheduleGc()}}},Hl=new WeakMap,ud=new WeakMap,ki=new WeakMap,Wl=new WeakMap,Ar=new WeakMap,$p=new WeakMap,Kl=new WeakMap,es=new WeakSet,to=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Nee(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...LA(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ae(this,ud,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),cr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),I(this,ki).notify({query:this,type:"updated",action:e})})},BX);function Nee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:See(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function LA(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function BA(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ln,at,Dp,xn,Gl,dd,oo,va,Ap,hd,fd,Yl,Ql,ba,pd,gt,lf,fP,pP,mP,gP,yP,vP,bP,Cee,zX,qR=(zX=class extends Lc{constructor(e,r){super();ve(this,gt);ve(this,Ln);ve(this,at);ve(this,Dp);ve(this,xn);ve(this,Gl);ve(this,dd);ve(this,oo);ve(this,va);ve(this,Ap);ve(this,hd);ve(this,fd);ve(this,Yl);ve(this,Ql);ve(this,ba);ve(this,pd,new Set);this.options=r,ae(this,Ln,e),ae(this,va,null),ae(this,oo,dP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(I(this,at).addObserver(this),zA(I(this,at),this.options)?$e(this,gt,lf).call(this):this.updateResult(),$e(this,gt,gP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xP(I(this,at),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xP(I(this,at),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,$e(this,gt,yP).call(this),$e(this,gt,vP).call(this),I(this,at).removeObserver(this)}setOptions(e){const r=this.options,n=I(this,at);if(this.options=I(this,Ln).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Oi(this.options.enabled,I(this,at))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");$e(this,gt,bP).call(this),I(this,at).setOptions(this.options),r._defaulted&&!up(this.options,r)&&I(this,Ln).getQueryCache().notify({type:"observerOptionsUpdated",query:I(this,at),observer:this});const i=this.hasListeners();i&&VA(I(this,at),n,this.options,r)&&$e(this,gt,lf).call(this),this.updateResult(),i&&(I(this,at)!==n||Oi(this.options.enabled,I(this,at))!==Oi(r.enabled,I(this,at))||Ba(this.options.staleTime,I(this,at))!==Ba(r.staleTime,I(this,at)))&&$e(this,gt,fP).call(this);const s=$e(this,gt,pP).call(this);i&&(I(this,at)!==n||Oi(this.options.enabled,I(this,at))!==Oi(r.enabled,I(this,at))||s!==I(this,ba))&&$e(this,gt,mP).call(this,s)}getOptimisticResult(e){const r=I(this,Ln).getQueryCache().build(I(this,Ln),e),n=this.createResult(r,e);return Ode(this,n)&&(ae(this,xn,n),ae(this,dd,this.options),ae(this,Gl,I(this,at).state)),n}getCurrentResult(){return I(this,xn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&I(this,oo).status==="pending"&&I(this,oo).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){I(this,pd).add(e)}getCurrentQuery(){return I(this,at)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=I(this,Ln).defaultQueryOptions(e),n=I(this,Ln).getQueryCache().build(I(this,Ln),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return $e(this,gt,lf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),I(this,xn)))}createResult(e,r){var k;const n=I(this,at),i=this.options,s=I(this,xn),o=I(this,Gl),a=I(this,dd),c=e!==n?e.state:I(this,Dp),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const C=this.hasListeners(),O=!C&&zA(e,r),j=C&&VA(e,n,r,i);(O||j)&&(h={...h,...Nee(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:b}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&b==="pending"){let C;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(C=s.data,y=!0):C=typeof r.placeholderData=="function"?r.placeholderData((k=I(this,fd))==null?void 0:k.state.data,I(this,fd)):r.placeholderData,C!==void 0&&(b="success",p=uP(s==null?void 0:s.data,C,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===I(this,Ap))p=I(this,hd);else try{ae(this,Ap,r.select),p=r.select(p),p=uP(s==null?void 0:s.data,p,r),ae(this,hd,p),ae(this,va,null)}catch(C){ae(this,va,C)}I(this,va)&&(m=I(this,va),p=I(this,hd),g=Date.now(),b="error");const v=h.fetchStatus==="fetching",w=b==="pending",x=b==="error",S=w&&v,_=p!==void 0,E={status:b,fetchStatus:h.fetchStatus,isPending:w,isSuccess:b==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:LR(e,r),refetch:this.refetch,promise:I(this,oo),isEnabled:Oi(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const C=P=>{E.status==="error"?P.reject(E.error):E.data!==void 0&&P.resolve(E.data)},O=()=>{const P=ae(this,oo,E.promise=dP());C(P)},j=I(this,oo);switch(j.status){case"pending":e.queryHash===n.queryHash&&C(j);break;case"fulfilled":(E.status==="error"||E.data!==j.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==j.reason)&&O();break}}return E}updateResult(){const e=I(this,xn),r=this.createResult(I(this,at),this.options);if(ae(this,Gl,I(this,at).state),ae(this,dd,this.options),I(this,Gl).data!==void 0&&ae(this,fd,I(this,at)),up(r,e))return;ae(this,xn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!I(this,pd).size)return!0;const o=new Set(s??I(this,pd));return this.options.throwOnError&&o.add("error"),Object.keys(I(this,xn)).some(a=>{const l=a;return I(this,xn)[l]!==e[l]&&o.has(l)})};$e(this,gt,Cee).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&$e(this,gt,gP).call(this)}},Ln=new WeakMap,at=new WeakMap,Dp=new WeakMap,xn=new WeakMap,Gl=new WeakMap,dd=new WeakMap,oo=new WeakMap,va=new WeakMap,Ap=new WeakMap,hd=new WeakMap,fd=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,ba=new WeakMap,pd=new WeakMap,gt=new WeakSet,lf=function(e){$e(this,gt,bP).call(this);let r=I(this,at).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(hn)),r},fP=function(){$e(this,gt,yP).call(this);const e=Ba(this.options.staleTime,I(this,at));if(vc||I(this,xn).isStale||!lP(e))return;const n=xee(I(this,xn).dataUpdatedAt,e)+1;ae(this,Yl,Il.setTimeout(()=>{I(this,xn).isStale||this.updateResult()},n))},pP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(I(this,at)):this.options.refetchInterval)??!1},mP=function(e){$e(this,gt,vP).call(this),ae(this,ba,e),!(vc||Oi(this.options.enabled,I(this,at))===!1||!lP(I(this,ba))||I(this,ba)===0)&&ae(this,Ql,Il.setInterval(()=>{(this.options.refetchIntervalInBackground||FR.isFocused())&&$e(this,gt,lf).call(this)},I(this,ba)))},gP=function(){$e(this,gt,fP).call(this),$e(this,gt,mP).call(this,$e(this,gt,pP).call(this))},yP=function(){I(this,Yl)&&(Il.clearTimeout(I(this,Yl)),ae(this,Yl,void 0))},vP=function(){I(this,Ql)&&(Il.clearInterval(I(this,Ql)),ae(this,Ql,void 0))},bP=function(){const e=I(this,Ln).getQueryCache().build(I(this,Ln),this.options);if(e===I(this,at))return;const r=I(this,at);ae(this,at,e),ae(this,Dp,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Cee=function(e){cr.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(I(this,xn))}),I(this,Ln).getQueryCache().notify({query:I(this,at),type:"observerResultsUpdated"})})},zX);function Tde(t,e){return Oi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function zA(t,e){return Tde(t,e)||t.state.data!==void 0&&xP(t,e,e.refetchOnMount)}function xP(t,e,r){if(Oi(e.enabled,t)!==!1&&Ba(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&LR(t,e)}return!1}function VA(t,e,r,n){return(t!==e||Oi(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&LR(t,r)}function LR(t,e){return Oi(e.enabled,t)!==!1&&t.isStaleByTime(Ba(e.staleTime,t))}function Ode(t,e){return!up(t.getCurrentResult(),e)}function UA(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const b=w=>{wde(w,()=>e.signal,()=>g=!0)},y=wee(e.options,e.fetchOptions),v=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return b(O),O})(),E=await y(N),{maxPages:k}=e.options,C=S?xde:bde;return{pages:C(w.pages,E,k),pageParams:C(w.pageParams,x,k)}};if(i&&s.length){const w=i==="backward",x=w?jde:HA,S={pages:s,pageParams:o},_=x(n,S);a=await v(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:HA(n,a);if(l>0&&x==null)break;a=await v(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=c}}}function HA(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function jde(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Fp,ks,wn,Xl,Ts,ea,VX,Pde=(VX=class extends Eee{constructor(e){super();ve(this,Ts);ve(this,Fp);ve(this,ks);ve(this,wn);ve(this,Xl);ae(this,Fp,e.client),this.mutationId=e.mutationId,ae(this,wn,e.mutationCache),ae(this,ks,[]),this.state=e.state||kee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){I(this,ks).includes(e)||(I(this,ks).push(e),this.clearGcTimeout(),I(this,wn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ae(this,ks,I(this,ks).filter(r=>r!==e)),this.scheduleGc(),I(this,wn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){I(this,ks).length||(this.state.status==="pending"?this.scheduleGc():I(this,wn).remove(this))}continue(){var e;return((e=I(this,Xl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,d,h,f,p,m,g,b,y,v,w,x,S,_,N,E,k;const r=()=>{$e(this,Ts,ea).call(this,{type:"continue"})},n={client:I(this,Fp),meta:this.options.meta,mutationKey:this.options.mutationKey};ae(this,Xl,_ee({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{$e(this,Ts,ea).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{$e(this,Ts,ea).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>I(this,wn).canRun(this)}));const i=this.state.status==="pending",s=!I(this,Xl).canStart();try{if(i)r();else{$e(this,Ts,ea).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=I(this,wn).config).onMutate)==null?void 0:a.call(o,e,this,n));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,n));O!==this.state.context&&$e(this,Ts,ea).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await I(this,Xl).start();return await((h=(d=I(this,wn).config).onSuccess)==null?void 0:h.call(d,C,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,e,this.state.context,n)),await((g=(m=I(this,wn).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this,n)),await((y=(b=this.options).onSettled)==null?void 0:y.call(b,C,null,e,this.state.context,n)),$e(this,Ts,ea).call(this,{type:"success",data:C}),C}catch(C){try{await((w=(v=I(this,wn).config).onError)==null?void 0:w.call(v,C,e,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,C,e,this.state.context,n))}catch(O){Promise.reject(O)}try{await((N=(_=I(this,wn).config).onSettled)==null?void 0:N.call(_,void 0,C,this.state.variables,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((k=(E=this.options).onSettled)==null?void 0:k.call(E,void 0,C,e,this.state.context,n))}catch(O){Promise.reject(O)}throw $e(this,Ts,ea).call(this,{type:"error",error:C}),C}finally{I(this,wn).runNext(this)}}},Fp=new WeakMap,ks=new WeakMap,wn=new WeakMap,Xl=new WeakMap,Ts=new WeakSet,ea=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),cr.batch(()=>{I(this,ks).forEach(n=>{n.onMutationUpdate(e)}),I(this,wn).notify({mutation:this,type:"updated",action:e})})},VX);function kee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ao,ts,qp,UX,Ide=(UX=class extends Lc{constructor(e={}){super();ve(this,ao);ve(this,ts);ve(this,qp);this.config=e,ae(this,ao,new Set),ae(this,ts,new Map),ae(this,qp,0)}build(e,r,n){const i=new Pde({client:e,mutationCache:this,mutationId:++Ym(this,qp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){I(this,ao).add(e);const r=fg(e);if(typeof r=="string"){const n=I(this,ts).get(r);n?n.push(e):I(this,ts).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(I(this,ao).delete(e)){const r=fg(e);if(typeof r=="string"){const n=I(this,ts).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&I(this,ts).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=fg(e);if(typeof r=="string"){const n=I(this,ts).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=fg(e);if(typeof r=="string"){const i=(n=I(this,ts).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){cr.batch(()=>{I(this,ao).forEach(e=>{this.notify({type:"removed",mutation:e})}),I(this,ao).clear(),I(this,ts).clear()})}getAll(){return Array.from(I(this,ao))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>AA(r,n))}findAll(e={}){return this.getAll().filter(r=>AA(e,r))}notify(e){cr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return cr.batch(()=>Promise.all(e.map(r=>r.continue().catch(hn))))}},ao=new WeakMap,ts=new WeakMap,qp=new WeakMap,UX);function fg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var lo,xa,Bn,co,Oo,Xg,wP,HX,Rde=(HX=class extends Lc{constructor(e,r){super();ve(this,Oo);ve(this,lo);ve(this,xa);ve(this,Bn);ve(this,co);ae(this,lo,e),this.setOptions(r),this.bindMethods(),$e(this,Oo,Xg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=I(this,lo).defaultMutationOptions(e),up(this.options,r)||I(this,lo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:I(this,Bn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&bc(r.mutationKey)!==bc(this.options.mutationKey)?this.reset():((n=I(this,Bn))==null?void 0:n.state.status)==="pending"&&I(this,Bn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=I(this,Bn))==null||e.removeObserver(this)}onMutationUpdate(e){$e(this,Oo,Xg).call(this),$e(this,Oo,wP).call(this,e)}getCurrentResult(){return I(this,xa)}reset(){var e;(e=I(this,Bn))==null||e.removeObserver(this),ae(this,Bn,void 0),$e(this,Oo,Xg).call(this),$e(this,Oo,wP).call(this)}mutate(e,r){var n;return ae(this,co,r),(n=I(this,Bn))==null||n.removeObserver(this),ae(this,Bn,I(this,lo).getMutationCache().build(I(this,lo),this.options)),I(this,Bn).addObserver(this),I(this,Bn).execute(e)}},lo=new WeakMap,xa=new WeakMap,Bn=new WeakMap,co=new WeakMap,Oo=new WeakSet,Xg=function(){var r;const e=((r=I(this,Bn))==null?void 0:r.state)??kee();ae(this,xa,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},wP=function(e){cr.batch(()=>{var r,n,i,s,o,a,l,c;if(I(this,co)&&this.hasListeners()){const d=I(this,xa).variables,h=I(this,xa).context,f={client:I(this,lo),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=I(this,co)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=I(this,co)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=I(this,co)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(c=(l=I(this,co)).onSettled)==null||c.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(I(this,xa))})})},HX);function WA(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function Mde(t,e,r){const n=t.slice(0);return n[e]=r,n}var md,ai,gd,yd,Ti,wa,Lp,Bp,zp,sn,SP,_P,EP,NP,CP,WX,$de=(WX=class extends Lc{constructor(e,r,n){super();ve(this,sn);ve(this,md);ve(this,ai);ve(this,gd);ve(this,yd);ve(this,Ti);ve(this,wa);ve(this,Lp);ve(this,Bp);ve(this,zp,[]);ae(this,md,e),ae(this,yd,n),ae(this,gd,[]),ae(this,Ti,[]),ae(this,ai,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&I(this,Ti).forEach(e=>{e.subscribe(r=>{$e(this,sn,NP).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,I(this,Ti).forEach(e=>{e.destroy()})}setQueries(e,r){ae(this,gd,e),ae(this,yd,r),cr.batch(()=>{const n=I(this,Ti),i=$e(this,sn,EP).call(this,I(this,gd));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),c=a||l,d=c?!0:o.some((h,f)=>{const p=I(this,ai)[f];return!p||!up(h,p)});!c&&!d||(c&&(ae(this,zp,i),ae(this,Ti,s)),ae(this,ai,o),this.hasListeners()&&(c&&(WA(n,s).forEach(h=>{h.destroy()}),WA(s,n).forEach(h=>{h.subscribe(f=>{$e(this,sn,NP).call(this,h,f)})})),$e(this,sn,CP).call(this)))})}getCurrentResult(){return I(this,ai)}getQueries(){return I(this,Ti).map(e=>e.getCurrentQuery())}getObservers(){return I(this,Ti)}getOptimisticResult(e,r){const n=$e(this,sn,EP).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>$e(this,sn,_P).call(this,s??i,r),()=>$e(this,sn,SP).call(this,i,n)]}},md=new WeakMap,ai=new WeakMap,gd=new WeakMap,yd=new WeakMap,Ti=new WeakMap,wa=new WeakMap,Lp=new WeakMap,Bp=new WeakMap,zp=new WeakMap,sn=new WeakSet,SP=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},_P=function(e,r){return r?((!I(this,wa)||I(this,ai)!==I(this,Bp)||r!==I(this,Lp))&&(ae(this,Lp,r),ae(this,Bp,I(this,ai)),ae(this,wa,$R(I(this,wa),r(e)))),I(this,wa)):e},EP=function(e){const r=new Map;I(this,Ti).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=I(this,md).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new qR(I(this,md),s);n.push({defaultedQueryOptions:s,observer:a})}),n},NP=function(e,r){const n=I(this,Ti).indexOf(e);n!==-1&&(ae(this,ai,Mde(I(this,ai),n,r)),$e(this,sn,CP).call(this))},CP=function(){var e;if(this.hasListeners()){const r=I(this,wa),n=$e(this,sn,SP).call(this,I(this,ai),I(this,zp)),i=$e(this,sn,_P).call(this,n,(e=I(this,yd))==null?void 0:e.combine);r!==i&&cr.batch(()=>{this.listeners.forEach(s=>{s(I(this,ai))})})}},WX),Os,KX,Dde=(KX=class extends Lc{constructor(e={}){super();ve(this,Os);this.config=e,ae(this,Os,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??MR(i,r);let o=this.get(s);return o||(o=new kde({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){I(this,Os).has(e.queryHash)||(I(this,Os).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=I(this,Os).get(e.queryHash);r&&(e.destroy(),r===e&&I(this,Os).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){cr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return I(this,Os).get(e)}getAll(){return[...I(this,Os).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>DA(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>DA(e,n)):r}notify(e){cr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){cr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){cr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Os=new WeakMap,KX),rr,Sa,_a,vd,bd,Ea,xd,wd,GX,Ade=(GX=class{constructor(t={}){ve(this,rr);ve(this,Sa);ve(this,_a);ve(this,vd);ve(this,bd);ve(this,Ea);ve(this,xd);ve(this,wd);ae(this,rr,t.queryCache||new Dde),ae(this,Sa,t.mutationCache||new Ide),ae(this,_a,t.defaultOptions||{}),ae(this,vd,new Map),ae(this,bd,new Map),ae(this,Ea,0)}mount(){Ym(this,Ea)._++,I(this,Ea)===1&&(ae(this,xd,FR.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,rr).onFocus())})),ae(this,wd,Ay.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,rr).onOnline())})))}unmount(){var t,e;Ym(this,Ea)._--,I(this,Ea)===0&&((t=I(this,xd))==null||t.call(this),ae(this,xd,void 0),(e=I(this,wd))==null||e.call(this),ae(this,wd,void 0))}isFetching(t){return I(this,rr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return I(this,Sa).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=I(this,rr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=I(this,rr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Ba(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return I(this,rr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=I(this,rr).get(n.queryHash),s=i==null?void 0:i.state.data,o=gde(e,s);if(o!==void 0)return I(this,rr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return cr.batch(()=>I(this,rr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=I(this,rr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=I(this,rr);cr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=I(this,rr);return cr.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=cr.batch(()=>I(this,rr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(hn).catch(hn)}invalidateQueries(t,e={}){return cr.batch(()=>(I(this,rr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=cr.batch(()=>I(this,rr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(hn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(hn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=I(this,rr).build(this,e);return r.isStaleByTime(Ba(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hn).catch(hn)}fetchInfiniteQuery(t){return t.behavior=UA(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hn).catch(hn)}ensureInfiniteQueryData(t){return t.behavior=UA(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ay.isOnline()?I(this,Sa).resumePausedMutations():Promise.resolve()}getQueryCache(){return I(this,rr)}getMutationCache(){return I(this,Sa)}getDefaultOptions(){return I(this,_a)}setDefaultOptions(t){ae(this,_a,t)}setQueryDefaults(t,e){I(this,vd).set(bc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...I(this,vd).values()],r={};return e.forEach(n=>{cp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){I(this,bd).set(bc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...I(this,bd).values()],r={};return e.forEach(n=>{cp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...I(this,_a).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=MR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===DR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...I(this,_a).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){I(this,rr).clear(),I(this,Sa).clear()}},rr=new WeakMap,Sa=new WeakMap,_a=new WeakMap,vd=new WeakMap,bd=new WeakMap,Ea=new WeakMap,xd=new WeakMap,wd=new WeakMap,GX),Tee=T.createContext(void 0),yt=t=>{const e=T.useContext(Tee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Fde=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(Tee.Provider,{value:t,children:e})),Oee=T.createContext(!1),jee=()=>T.useContext(Oee);Oee.Provider;function qde(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Lde=T.createContext(qde()),Pee=()=>T.useContext(Lde),Iee=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?AR(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},Ree=t=>{T.useEffect(()=>{t.clearReset()},[t])},Mee=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||AR(r,[t.error,n])),$ee=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Dee=(t,e)=>t.isLoading&&t.isFetching&&!e,kP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Fy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function TP({queries:t,...e},r){const n=yt(),i=jee(),s=Pee(),o=T.useMemo(()=>t.map(g=>{const b=n.defaultQueryOptions(g);return b._optimisticResults=i?"isRestoring":"optimistic",b}),[t,n,i]);o.forEach(g=>{$ee(g);const b=n.getQueryCache().get(g.queryHash);Iee(g,s,b)}),Ree(s);const[a]=T.useState(()=>new $de(n,o,e)),[l,c,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;T.useSyncExternalStore(T.useCallback(g=>h?a.subscribe(cr.batchCalls(g)):hn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),T.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,b)=>kP(o[b],g))?l.flatMap((g,b)=>{const y=o[b];if(y){const v=new qR(n,y);if(kP(y,g))return Fy(y,v,s);Dee(g,i)&&Fy(y,v,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,b)=>{const y=o[b];return y&&Mee({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return c(d())}function Bde(t,e,r){var f,p,m,g;const n=jee(),i=Pee(),s=yt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",$ee(o),Iee(o,i,a),Ree(i);const l=!s.getQueryCache().get(o.queryHash),[c]=T.useState(()=>new e(s,o)),d=c.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(b=>{const y=h?c.subscribe(cr.batchCalls(b)):hn;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(o)},[o,c]),kP(o,d))throw Fy(o,c,i);if(Mee({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!vc&&Dee(d,n)){const b=l?Fy(o,c,i):a==null?void 0:a.promise;b==null||b.catch(hn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function ut(t,e){return Bde(t,qR)}function ht(t,e){const r=yt(),[n]=T.useState(()=>new Rde(r,t));T.useEffect(()=>{n.setOptions(t)},[n,t]);const i=T.useSyncExternalStore(T.useCallback(o=>n.subscribe(cr.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=T.useCallback((o,a)=>{n.mutate(o,a).catch(hn)},[n]);if(i.error&&AR(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function BR(){const t=window.prmConfig||{};return T.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function Aee(t,e){return function(){return t.apply(e,arguments)}}const{toString:zde}=Object.prototype,{getPrototypeOf:zR}=Object,{iterator:v0,toStringTag:Fee}=Symbol,b0=(t=>e=>{const r=zde.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),gs=t=>(t=t.toLowerCase(),e=>b0(e)===t),x0=t=>e=>typeof e===t,{isArray:nh}=Array,jd=x0("undefined");function Gp(t){return t!==null&&!jd(t)&&t.constructor!==null&&!jd(t.constructor)&&Jn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const qee=gs("ArrayBuffer");function Vde(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&qee(t.buffer),e}const Ude=x0("string"),Jn=x0("function"),Lee=x0("number"),Yp=t=>t!==null&&typeof t=="object",Hde=t=>t===!0||t===!1,Jg=t=>{if(b0(t)!=="object")return!1;const e=zR(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Fee in t)&&!(v0 in t)},Wde=t=>{if(!Yp(t)||Gp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Kde=gs("Date"),Gde=gs("File"),Yde=gs("Blob"),Qde=gs("FileList"),Xde=t=>Yp(t)&&Jn(t.pipe),Jde=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Jn(t.append)&&((e=b0(t))==="formdata"||e==="object"&&Jn(t.toString)&&t.toString()==="[object FormData]"))},Zde=gs("URLSearchParams"),[ehe,the,rhe,nhe]=["ReadableStream","Request","Response","Headers"].map(gs),ihe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qp(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),nh(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Gp(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function Bee(t,e){if(Gp(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Rl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zee=t=>!jd(t)&&t!==Rl;function OP(){const{caseless:t,skipUndefined:e}=zee(this)&&this||{},r={},n=(i,s)=>{const o=t&&Bee(r,s)||s;Jg(r[o])&&Jg(i)?r[o]=OP(r[o],i):Jg(i)?r[o]=OP({},i):nh(i)?r[o]=i.slice():(!e||!jd(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Qp(arguments[i],n);return r}const she=(t,e,r,{allOwnKeys:n}={})=>(Qp(e,(i,s)=>{r&&Jn(i)?t[s]=Aee(i,r):t[s]=i},{allOwnKeys:n}),t),ohe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ahe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},lhe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&zR(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},che=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},uhe=t=>{if(!t)return null;if(nh(t))return t;let e=t.length;if(!Lee(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},dhe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&zR(Uint8Array)),hhe=(t,e)=>{const n=(t&&t[v0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},fhe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},phe=gs("HTMLFormElement"),mhe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),KA=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),ghe=gs("RegExp"),Vee=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Qp(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},yhe=t=>{Vee(t,(e,r)=>{if(Jn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Jn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},vhe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return nh(t)?n(t):n(String(t).split(e)),r},bhe=()=>{},xhe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function whe(t){return!!(t&&Jn(t.append)&&t[Fee]==="FormData"&&t[v0])}const She=t=>{const e=new Array(10),r=(n,i)=>{if(Yp(n)){if(e.indexOf(n)>=0)return;if(Gp(n))return n;if(!("toJSON"in n)){e[i]=n;const s=nh(n)?[]:{};return Qp(n,(o,a)=>{const l=r(o,i+1);!jd(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},_he=gs("AsyncFunction"),Ehe=t=>t&&(Yp(t)||Jn(t))&&Jn(t.then)&&Jn(t.catch),Uee=((t,e)=>t?setImmediate:e?((r,n)=>(Rl.addEventListener("message",({source:i,data:s})=>{i===Rl&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Rl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Jn(Rl.postMessage)),Nhe=typeof queueMicrotask<"u"?queueMicrotask.bind(Rl):typeof process<"u"&&process.nextTick||Uee,Che=t=>t!=null&&Jn(t[v0]),B={isArray:nh,isArrayBuffer:qee,isBuffer:Gp,isFormData:Jde,isArrayBufferView:Vde,isString:Ude,isNumber:Lee,isBoolean:Hde,isObject:Yp,isPlainObject:Jg,isEmptyObject:Wde,isReadableStream:ehe,isRequest:the,isResponse:rhe,isHeaders:nhe,isUndefined:jd,isDate:Kde,isFile:Gde,isBlob:Yde,isRegExp:ghe,isFunction:Jn,isStream:Xde,isURLSearchParams:Zde,isTypedArray:dhe,isFileList:Qde,forEach:Qp,merge:OP,extend:she,trim:ihe,stripBOM:ohe,inherits:ahe,toFlatObject:lhe,kindOf:b0,kindOfTest:gs,endsWith:che,toArray:uhe,forEachEntry:hhe,matchAll:fhe,isHTMLForm:phe,hasOwnProperty:KA,hasOwnProp:KA,reduceDescriptors:Vee,freezeMethods:yhe,toObjectSet:vhe,toCamelCase:mhe,noop:bhe,toFiniteNumber:xhe,findKey:Bee,global:Rl,isContextDefined:zee,isSpecCompliantForm:whe,toJSONObject:She,isAsyncFn:_he,isThenable:Ehe,setImmediate:Uee,asap:Nhe,isIterable:Che};function He(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}B.inherits(He,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Hee=He.prototype,Wee={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Wee[t]={value:t}});Object.defineProperties(He,Wee);Object.defineProperty(Hee,"isAxiosError",{value:!0});He.from=(t,e,r,n,i,s)=>{const o=Object.create(Hee);B.toFlatObject(t,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return He.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const khe=null;function jP(t){return B.isPlainObject(t)||B.isArray(t)}function Kee(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function GA(t,e,r){return t?t.concat(e).map(function(i,s){return i=Kee(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function The(t){return B.isArray(t)&&!t.some(jP)}const Ohe=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function w0(t,e,r){if(!B.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=B.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!B.isUndefined(b[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(B.isDate(m))return m.toISOString();if(B.isBoolean(m))return m.toString();if(!l&&B.isBlob(m))throw new He("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(m)||B.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,b){let y=m;if(m&&!b&&typeof m=="object"){if(B.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(B.isArray(m)&&The(m)||(B.isFileList(m)||B.endsWith(g,"[]"))&&(y=B.toArray(m)))return g=Kee(g),y.forEach(function(w,x){!(B.isUndefined(w)||w===null)&&e.append(o===!0?GA([g],x,s):o===null?g:g+"[]",c(w))}),!1}return jP(m)?!0:(e.append(GA(b,g,s),c(m)),!1)}const h=[],f=Object.assign(Ohe,{defaultVisitor:d,convertValue:c,isVisitable:jP});function p(m,g){if(!B.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),B.forEach(m,function(y,v){(!(B.isUndefined(y)||y===null)&&i.call(e,y,B.isString(v)?v.trim():v,g,f))===!0&&p(y,g?g.concat(v):[v])}),h.pop()}}if(!B.isObject(t))throw new TypeError("data must be an object");return p(t),e}function YA(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function VR(t,e){this._pairs=[],t&&w0(t,this,e)}const Gee=VR.prototype;Gee.append=function(e,r){this._pairs.push([e,r])};Gee.toString=function(e){const r=e?function(n){return e.call(this,n,YA)}:YA;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function jhe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Yee(t,e,r){if(!e)return t;const n=r&&r.encode||jhe;B.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=B.isURLSearchParams(e)?e.toString():new VR(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class QA{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Qee={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Phe=typeof URLSearchParams<"u"?URLSearchParams:VR,Ihe=typeof FormData<"u"?FormData:null,Rhe=typeof Blob<"u"?Blob:null,Mhe={isBrowser:!0,classes:{URLSearchParams:Phe,FormData:Ihe,Blob:Rhe},protocols:["http","https","file","blob","url","data"]},UR=typeof window<"u"&&typeof document<"u",PP=typeof navigator=="object"&&navigator||void 0,$he=UR&&(!PP||["ReactNative","NativeScript","NS"].indexOf(PP.product)<0),Dhe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ahe=UR&&window.location.href||"http://localhost",Fhe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:UR,hasStandardBrowserEnv:$he,hasStandardBrowserWebWorkerEnv:Dhe,navigator:PP,origin:Ahe},Symbol.toStringTag,{value:"Module"})),pn={...Fhe,...Mhe};function qhe(t,e){return w0(t,new pn.classes.URLSearchParams,{visitor:function(r,n,i,s){return pn.isNode&&B.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Lhe(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Bhe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Xee(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&B.isArray(i)?i.length:o,l?(B.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!B.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&B.isArray(i[o])&&(i[o]=Bhe(i[o])),!a)}if(B.isFormData(t)&&B.isFunction(t.entries)){const r={};return B.forEachEntry(t,(n,i)=>{e(Lhe(n),i,r,0)}),r}return null}function zhe(t,e,r){if(B.isString(t))try{return(e||JSON.parse)(t),B.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Xp={transitional:Qee,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=B.isObject(e);if(s&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return i?JSON.stringify(Xee(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e)||B.isReadableStream(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qhe(e,this.formSerializer).toString();if((a=B.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return w0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),zhe(e)):e}],transformResponse:[function(e){const r=this.transitional||Xp.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(B.isResponse(e)||B.isReadableStream(e))return e;if(e&&B.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?He.from(a,He.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pn.classes.FormData,Blob:pn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],t=>{Xp.headers[t]={}});const Vhe=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Uhe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&Vhe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},XA=Symbol("internals");function Hh(t){return t&&String(t).trim().toLowerCase()}function Zg(t){return t===!1||t==null?t:B.isArray(t)?t.map(Zg):String(t)}function Hhe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Whe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function e1(t,e,r,n,i){if(B.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!B.isString(e)){if(B.isString(n))return e.indexOf(n)!==-1;if(B.isRegExp(n))return n.test(e)}}function Khe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Ghe(t,e){const r=B.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let Zn=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,c){const d=Hh(l);if(!d)throw new Error("header name must be a non-empty string");const h=B.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=Zg(a))}const o=(a,l)=>B.forEach(a,(c,d)=>s(c,d,l));if(B.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(B.isString(e)&&(e=e.trim())&&!Whe(e))o(Uhe(e),r);else if(B.isObject(e)&&B.isIterable(e)){let a={},l,c;for(const d of e){if(!B.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?B.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Hh(e),e){const n=B.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Hhe(i);if(B.isFunction(r))return r.call(this,i,n);if(B.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Hh(e),e){const n=B.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||e1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Hh(o),o){const a=B.findKey(n,o);a&&(!r||e1(n,n[a],a,r))&&(delete n[a],i=!0)}}return B.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||e1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return B.forEach(this,(i,s)=>{const o=B.findKey(n,s);if(o){r[o]=Zg(i),delete r[s];return}const a=e?Khe(s):String(s).trim();a!==s&&delete r[s],r[a]=Zg(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return B.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&B.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[XA]=this[XA]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Hh(o);n[a]||(Ghe(i,o),n[a]=!0)}return B.isArray(e)?e.forEach(s):s(e),this}};Zn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(Zn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});B.freezeMethods(Zn);function t1(t,e){const r=this||Xp,n=e||r,i=Zn.from(n.headers);let s=n.data;return B.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Jee(t){return!!(t&&t.__CANCEL__)}function ih(t,e,r){He.call(this,t??"canceled",He.ERR_CANCELED,e,r),this.name="CanceledError"}B.inherits(ih,He,{__CANCEL__:!0});function Zee(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new He("Request failed with status code "+r.status,[He.ERR_BAD_REQUEST,He.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Yhe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Qhe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[s];o||(o=c),r[i]=l,n[i]=c;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(f*1e3/p):void 0}}function Xhe(t,e){let r=0,n=1e3/e,i,s;const o=(c,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const d=Date.now(),h=d-r;h>=n?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const qy=(t,e,r=3)=>{let n=0;const i=Qhe(50,250);return Xhe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},JA=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},ZA=t=>(...e)=>B.asap(()=>t(...e)),Jhe=pn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,pn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(pn.origin),pn.navigator&&/(msie|trident)/i.test(pn.navigator.userAgent)):()=>!0,Zhe=pn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];B.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),B.isString(n)&&a.push(`path=${n}`),B.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),B.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function efe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function tfe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ete(t,e,r){let n=!efe(e);return t&&(n||r==!1)?tfe(t,e):e}const eF=t=>t instanceof Zn?{...t}:t;function xc(t,e){e=e||{};const r={};function n(c,d,h,f){return B.isPlainObject(c)&&B.isPlainObject(d)?B.merge.call({caseless:f},c,d):B.isPlainObject(d)?B.merge({},d):B.isArray(d)?d.slice():d}function i(c,d,h,f){if(B.isUndefined(d)){if(!B.isUndefined(c))return n(void 0,c,h,f)}else return n(c,d,h,f)}function s(c,d){if(!B.isUndefined(d))return n(void 0,d)}function o(c,d){if(B.isUndefined(d)){if(!B.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function a(c,d,h){if(h in e)return n(c,d);if(h in t)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>i(eF(c),eF(d),h,!0)};return B.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);B.isUndefined(f)&&h!==a||(r[d]=f)}),r}const tte=t=>{const e=xc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Zn.from(o),e.url=Yee(ete(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),B.isFormData(r)){if(pn.hasStandardBrowserEnv||pn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(B.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{c.includes(d.toLowerCase())&&o.set(d,h)})}}if(pn.hasStandardBrowserEnv&&(n&&B.isFunction(n)&&(n=n(e)),n||n!==!1&&Jhe(e.url))){const l=i&&s&&Zhe.read(s);l&&o.set(i,l)}return e},rfe=typeof XMLHttpRequest<"u",nfe=rfe&&function(t){return new Promise(function(r,n){const i=tte(t);let s=i.data;const o=Zn.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function y(){if(!b)return;const w=Zn.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:t,request:b};Zee(function(N){r(N),g()},function(N){n(N),g()},S),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(n(new He("Request aborted",He.ECONNABORTED,t,b)),b=null)},b.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new He(S,He.ERR_NETWORK,t,b);_.event=x||null,n(_),b=null},b.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||Qee;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new He(x,S.clarifyTimeoutError?He.ETIMEDOUT:He.ECONNABORTED,t,b)),b=null},s===void 0&&o.setContentType(null),"setRequestHeader"in b&&B.forEach(o.toJSON(),function(x,S){b.setRequestHeader(S,x)}),B.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),c&&([f,m]=qy(c,!0),b.addEventListener("progress",f)),l&&b.upload&&([h,p]=qy(l),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{b&&(n(!w||w.type?new ih(null,t,b):w),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const v=Yhe(i.url);if(v&&pn.protocols.indexOf(v)===-1){n(new He("Unsupported protocol "+v+":",He.ERR_BAD_REQUEST,t));return}b.send(s||null)})},ife=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;n.abort(d instanceof He?d:new ih(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new He(`timeout ${e} of ms exceeded`,He.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>B.asap(a),l}},sfe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},ofe=async function*(t,e){for await(const r of afe(t))yield*sfe(r,e)},afe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},tF=(t,e,r,n)=>{const i=ofe(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},rF=64*1024,{isFunction:pg}=B,lfe=(({Request:t,Response:e})=>({Request:t,Response:e}))(B.global),{ReadableStream:nF,TextEncoder:iF}=B.global,sF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},cfe=t=>{t=B.merge.call({skipUndefined:!0},lfe,t);const{fetch:e,Request:r,Response:n}=t,i=e?pg(e):typeof fetch=="function",s=pg(r),o=pg(n);if(!i)return!1;const a=i&&pg(nF),l=i&&(typeof iF=="function"?(m=>g=>m.encode(g))(new iF):async m=>new Uint8Array(await new r(m).arrayBuffer())),c=s&&a&&sF(()=>{let m=!1;const g=new r(pn.origin,{body:new nF,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&sF(()=>B.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,b)=>{let y=g&&g[m];if(y)return y.call(g);throw new He(`Response type '${m}' is not supported`,He.ERR_NOT_SUPPORT,b)})});const f=async m=>{if(m==null)return 0;if(B.isBlob(m))return m.size;if(B.isSpecCompliantForm(m))return(await new r(pn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(B.isArrayBufferView(m)||B.isArrayBuffer(m))return m.byteLength;if(B.isURLSearchParams(m)&&(m=m+""),B.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const b=B.toFiniteNumber(m.getContentLength());return b??f(g)};return async m=>{let{url:g,method:b,data:y,signal:v,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:N,headers:E,withCredentials:k="same-origin",fetchOptions:C}=tte(m),O=e||fetch;N=N?(N+"").toLowerCase():"text";let j=ife([v,w&&w.toAbortSignal()],x),P=null;const A=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let q;try{if(_&&c&&b!=="get"&&b!=="head"&&(q=await p(E,y))!==0){let H=new r(g,{method:"POST",body:y,duplex:"half"}),K;if(B.isFormData(y)&&(K=H.headers.get("content-type"))&&E.setContentType(K),H.body){const[he,xe]=JA(q,qy(ZA(_)));y=tF(H.body,rF,he,xe)}}B.isString(k)||(k=k?"include":"omit");const R=s&&"credentials"in r.prototype,L={...C,signal:j,method:b.toUpperCase(),headers:E.normalize().toJSON(),body:y,duplex:"half",credentials:R?k:void 0};P=s&&new r(g,L);let D=await(s?O(P,C):O(g,L));const W=d&&(N==="stream"||N==="response");if(d&&(S||W&&A)){const H={};["status","statusText","headers"].forEach(Be=>{H[Be]=D[Be]});const K=B.toFiniteNumber(D.headers.get("content-length")),[he,xe]=S&&JA(K,qy(ZA(S),!0))||[];D=new n(tF(D.body,rF,he,()=>{xe&&xe(),A&&A()}),H)}N=N||"text";let z=await h[B.findKey(h,N)||"text"](D,m);return!W&&A&&A(),await new Promise((H,K)=>{Zee(H,K,{data:z,headers:Zn.from(D.headers),status:D.status,statusText:D.statusText,config:m,request:P})})}catch(R){throw A&&A(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new He("Network Error",He.ERR_NETWORK,m,P),{cause:R.cause||R}):He.from(R,R&&R.code,m,P)}}},ufe=new Map,rte=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,c,d=ufe;for(;a--;)l=s[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:cfe(e)),d=c;return c};rte();const HR={http:khe,xhr:nfe,fetch:{get:rte}};B.forEach(HR,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const oF=t=>`- ${t}`,dfe=t=>B.isFunction(t)||t===null||t===!1;function hfe(t,e){t=B.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!dfe(n)&&(i=HR[(a=String(n)).toLowerCase()],i===void 0))throw new He(`Unknown adapter '${a}'`);if(i&&(B.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(oF).join(`
`):" "+oF(o[0]):"as no adapter specified";throw new He("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const nte={getAdapter:hfe,adapters:HR};function r1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ih(null,t)}function aF(t){return r1(t),t.headers=Zn.from(t.headers),t.data=t1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),nte.getAdapter(t.adapter||Xp.adapter,t)(t).then(function(n){return r1(t),n.data=t1.call(t,t.transformResponse,n),n.headers=Zn.from(n.headers),n},function(n){return Jee(n)||(r1(t),n&&n.response&&(n.response.data=t1.call(t,t.transformResponse,n.response),n.response.headers=Zn.from(n.response.headers))),Promise.reject(n)})}const ite="1.13.2",S0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{S0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const lF={};S0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+ite+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new He(i(o," has been removed"+(r?" in "+r:"")),He.ERR_DEPRECATED);return r&&!lF[o]&&(lF[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};S0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function ffe(t,e,r){if(typeof t!="object")throw new He("options must be an object",He.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new He("option "+s+" must be "+l,He.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new He("Unknown option "+s,He.ERR_BAD_OPTION)}}const ey={assertOptions:ffe,validators:S0},ws=ey.validators;let ec=class{constructor(e){this.defaults=e||{},this.interceptors={request:new QA,response:new QA}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=xc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&ey.assertOptions(n,{silentJSONParsing:ws.transitional(ws.boolean),forcedJSONParsing:ws.transitional(ws.boolean),clarifyTimeoutError:ws.transitional(ws.boolean)},!1),i!=null&&(B.isFunction(i)?r.paramsSerializer={serialize:i}:ey.assertOptions(i,{encode:ws.function,serialize:ws.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ey.assertOptions(r,{baseUrl:ws.spelling("baseURL"),withXsrfToken:ws.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&B.merge(s.common,s[r.method]);s&&B.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=Zn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[aF.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(b){g.call(this,b);break}}try{d=aF.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=xc(this.defaults,e);const r=ete(e.baseURL,e.url,e.allowAbsoluteUrls);return Yee(r,e.params,e.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(e){ec.prototype[e]=function(r,n){return this.request(xc(n||{},{method:e,url:r,data:(n||{}).data}))}});B.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(xc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ec.prototype[e]=r(),ec.prototype[e+"Form"]=r(!0)});let pfe=class ste{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new ih(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new ste(function(i){e=i}),cancel:e}}};function mfe(t){return function(r){return t.apply(null,r)}}function gfe(t){return B.isObject(t)&&t.isAxiosError===!0}const IP={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(IP).forEach(([t,e])=>{IP[e]=t});function ote(t){const e=new ec(t),r=Aee(ec.prototype.request,e);return B.extend(r,ec.prototype,e,{allOwnKeys:!0}),B.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return ote(xc(t,i))},r}const pr=ote(Xp);pr.Axios=ec;pr.CanceledError=ih;pr.CancelToken=pfe;pr.isCancel=Jee;pr.VERSION=ite;pr.toFormData=w0;pr.AxiosError=He;pr.Cancel=pr.CanceledError;pr.all=function(e){return Promise.all(e)};pr.spread=mfe;pr.isAxiosError=gfe;pr.mergeConfig=xc;pr.AxiosHeaders=Zn;pr.formToJSON=t=>Xee(B.isHTMLForm(t)?new FormData(t):t);pr.getAdapter=nte.getAdapter;pr.HttpStatusCode=IP;pr.default=pr;const{Axios:NFe,AxiosError:CFe,CanceledError:kFe,isCancel:TFe,CancelToken:OFe,VERSION:jFe,all:PFe,Cancel:IFe,isAxiosError:RFe,spread:MFe,toFormData:$Fe,AxiosHeaders:DFe,HttpStatusCode:AFe,formToJSON:FFe,getAdapter:qFe,mergeConfig:LFe}=pr,RP=window.prmConfig||{},ue=pr.create({baseURL:RP.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":RP.nonce||""}});ue.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});ue.interceptors.response.use(t=>t,t=>{var e,r;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=RP.loginUrl||"/wp-login.php"),((r=t.response)==null?void 0:r.status)===403&&console.error("Access denied:",t.response.data),Promise.reject(t)});const Ke={getPeople:t=>ue.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>ue.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>ue.post("/wp/v2/people",t),updatePerson:(t,e)=>ue.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>ue.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>ue.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>ue.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>ue.post("/wp/v2/companies",t),updateCompany:(t,e)=>ue.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>ue.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>ue.get("/wp/v2/important-dates",{params:t}),getDate:t=>ue.get(`/wp/v2/important-dates/${t}`),createDate:t=>ue.post("/wp/v2/important-dates",t),updateDate:(t,e)=>ue.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>ue.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>ue.get("/wp/v2/person_label"),getCompanyLabels:()=>ue.get("/wp/v2/company_label"),getRelationshipTypes:()=>ue.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>ue.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>ue.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>ue.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>ue.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>ue.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),ue.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},Fe={getDashboard:()=>ue.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>ue.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>ue.get("/prm/v1/user/me"),getUsers:()=>ue.get("/prm/v1/users"),approveUser:t=>ue.post(`/prm/v1/users/${t}/approve`),denyUser:t=>ue.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>ue.delete(`/prm/v1/users/${t}`),search:t=>ue.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>ue.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>ue.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>ue.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>ue.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>ue.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>ue.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>ue.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>ue.get("/prm/v1/user/slack-status"),disconnectSlack:()=>ue.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>ue.get("/prm/v1/slack/channels"),getSlackTargets:()=>ue.get("/prm/v1/slack/targets"),updateSlackTargets:t=>ue.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>ue.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>ue.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>ue.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>ue.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>ue.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>ue.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>ue.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>ue.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>ue.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>ue.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>ue.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>ue.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>ue.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>ue.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>ue.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>ue.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>ue.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>ue.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),ue.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),ue.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>ue.get("/prm/v1/carddav/urls"),getAppPasswords:t=>ue.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>ue.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>ue.delete(`/wp/v2/users/${t}/application-passwords/${e}`)};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vfe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),me=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>T.createElement("svg",{ref:d,...yfe,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${vfe(t)}`,a].join(" "),...c},[...e.map(([h,f])=>T.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bfe=me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xfe=me("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wfe=me("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sfe=me("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=me("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ate=me("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=me("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=me("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=me("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=me("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=me("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=me("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _fe=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lte=me("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Efe=me("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nfe=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=me("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=me("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=me("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cfe=me("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=me("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=me("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kfe=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tfe=me("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=me("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ofe=me("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=me("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=me("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pfe=me("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=me("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ife=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rfe=me("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mfe=me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=me("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $fe=me("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=me("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=me("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=me("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=me("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=me("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ffe=me("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pte=me("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=me("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=me("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=me("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=me("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lfe=me("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bfe=me("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=me("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=me("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=me("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=me("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Md="Caelis";function An(t){T.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Md;document.title=`${t} - ${r}`}},[t])}function Ufe(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function vte(t=null){const e=Lo();T.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=Ufe(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=Md}const n=((i=window.prmConfig)==null?void 0:i.siteName)||Md;document.title=`${r} - ${n}`},[e.pathname,t])}function Hfe(){return ut({queryKey:["dashboard"],queryFn:async()=>(await Fe.getDashboard()).data})}function Wfe(t=30){return ut({queryKey:["reminders",t],queryFn:async()=>(await Fe.getReminders(t)).data})}function bte(t=!1){return ut({queryKey:["todos",t],queryFn:async()=>(await Fe.getAllTodos(t)).data})}function xte(){const t=yt();return ht({mutationFn:({todoId:e,data:r})=>Fe.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Kfe(){const t=yt();return ht({mutationFn:e=>Fe.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Gfe(t){const e=typeof t=="string"?t:"",r=e.length>=2;return ut({queryKey:["search",e],queryFn:async()=>r?(await Fe.search(e)).data:{people:[],companies:[]},enabled:r})}function Gn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function nr(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Gn(e)}function tc(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Gn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Gn(e)}function uo(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const Mt={all:["people"],lists:()=>[...Mt.all,"list"],list:t=>[...Mt.lists(),t],details:()=>[...Mt.all,"detail"],detail:t=>[...Mt.details(),t],timeline:t=>[...Mt.detail(t),"timeline"],dates:t=>[...Mt.detail(t),"dates"]};function wte(t){var i,s,o,a,l,c,d,h,f,p,m,g,b,y,v,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(c=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:c.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((b=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:b.map(S=>S.name))||[],n=Gn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((v=t.acf)==null?void 0:v.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,thumbnail:e,labels:r}}function Bc(t={}){return ut({queryKey:Mt.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await Ke.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(wte);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function zc(t){return ut({queryKey:Mt.detail(t),queryFn:async()=>{const e=await Ke.getPerson(t,{_embed:!0});return wte(e.data)},enabled:!!t})}function Yfe(t){return ut({queryKey:Mt.timeline(t),queryFn:async()=>(await Fe.getPersonTimeline(t)).data,enabled:!!t})}function Qfe(t){return ut({queryKey:Mt.dates(t),queryFn:async()=>(await Fe.getPersonDates(t)).data,enabled:!!t})}function Xfe(){const t=yt();return ht({mutationFn:e=>Ke.createPerson(e),onSuccess:()=>{t.invalidateQueries({queryKey:Mt.lists()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function sh(){const t=yt();return ht({mutationFn:({id:e,data:r})=>Ke.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:Mt.detail(r)}),t.invalidateQueries({queryKey:Mt.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:Mt.detail(a)})})}})}function Jfe(){const t=yt();return ht({mutationFn:e=>Ke.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:Mt.lists()}),t.invalidateQueries({queryKey:Mt.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Zfe(){const t=yt();return ht({mutationFn:({personId:e,content:r})=>Fe.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Mt.timeline(r)})}})}function epe(){const t=yt();return ht({mutationFn:({noteId:e,personId:r})=>Fe.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Mt.timeline(r)})}})}function QR(){const t=yt();return ht({mutationFn:({personId:e,data:r})=>Fe.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Mt.timeline(r)})}})}function tpe(){const t=yt();return ht({mutationFn:({activityId:e,data:r,personId:n})=>Fe.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Mt.timeline(r)})}})}function rpe(){const t=yt();return ht({mutationFn:({activityId:e,personId:r})=>Fe.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Mt.timeline(r)})}})}function Ste(){const t=yt();return ht({mutationFn:({personId:e,data:r})=>Fe.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Mt.timeline(r)})}})}function npe(){const t=yt();return ht({mutationFn:({todoId:e,data:r,personId:n})=>Fe.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Mt.timeline(r)})}})}function ipe(){const t=yt();return ht({mutationFn:({todoId:e,personId:r})=>Fe.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Mt.timeline(r)})}})}function spe(){const t=yt();return ht({mutationFn:({dateId:e,personId:r})=>Ke.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:Mt.dates(r)}),t.invalidateQueries({queryKey:Mt.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function _te({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(""),[o,a]=T.useState(""),[l,c]=T.useState(!1),[d,h]=T.useState(""),{data:f=[],isLoading:p}=Bc(),m=Ste(),g=yt(),b=T.useMemo(()=>{const _=d.toLowerCase().trim();let N=f;return _&&(N=f.filter(E=>{var k,C,O;return((k=E.name)==null?void 0:k.toLowerCase().includes(_))||((C=E.first_name)==null?void 0:C.toLowerCase().includes(_))||((O=E.last_name)==null?void 0:O.toLowerCase().includes(_))})),[...N].sort((E,k)=>(E.name||"").localeCompare(k.name||""))},[f,d]),y=T.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),v=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{t&&(n(""),s(v()),a(""),h(""),c(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch(N){console.error("Failed to create todo:",N)}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),u.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:u.jsx(gn,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:w,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>c(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?u.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(tl,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:y.name})]}):u.jsx("span",{className:"text-gray-400",children:"Select a person..."}),u.jsx(Ly,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Sc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:p?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):b.length>0?b.map(_=>u.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),c(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?u.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(tl,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}const ope=[{name:"Dashboard",href:"/",icon:Tfe},{name:"People",href:"/people",icon:Fs},{name:"Organizations",href:"/companies",icon:Rr},{name:"Dates",href:"/dates",icon:vo},{name:"Todos",href:"/todos",icon:As},{name:"Settings",href:"/settings",icon:hte}];function fF({mobile:t=!1,onClose:e}){const{logoutUrl:r}=BR();return u.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[u.jsxs(ce,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[u.jsx(pte,{className:"w-5 h-5"}),Md]}),t&&u.jsx("button",{onClick:e,className:"p-2 -mr-2",children:u.jsx(gn,{className:"w-5 h-5"})})]}),u.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:ope.map(n=>u.jsxs(cde,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[u.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(Ife,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function ape(){var o;const[t,e]=T.useState(!1),r=T.useRef(null),{data:n,isLoading:i}=ut({queryKey:["current-user"],queryFn:async()=>(await Fe.getCurrentUser()).data});if(T.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return u.jsx("div",{className:"flex items-center ml-auto",children:u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return u.jsxs("div",{className:"relative ml-auto",ref:r,children:[u.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?u.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),u.jsx(Ly,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(tl,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&u.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(hte,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function lpe({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(0),o=vn(),a=T.useRef(null),l=r.trim(),{data:c,isLoading:d}=Gfe(l),h=c||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;T.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),T.useEffect(()=>{s(0)},[c]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(v=>Math.min(v+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(v=>Math.max(v-1,0));else if(y.key==="Enter"){y.preventDefault();const v=f[i];v&&b(v.type,v.id)}}},b=(y,v)=>{e(),y==="person"?o(`/people/${v}`):y==="company"&&o(`/companies/${v}`)};return t?u.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),u.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:u.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[u.jsx(Sc,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),u.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),u.jsx("span",{children:"to close"})]})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?u.jsxs("div",{className:"px-4 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),u.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?u.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,v)=>{const x=i===v;return u.jsxs("button",{onClick:()=>b("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(tl,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&u.jsxs("div",{className:"px-2 mt-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,v)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+v,x=i===w;return u.jsxs("button",{onClick:()=>b("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):u.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:u.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):u.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[u.jsx(Sc,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),u.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to navigate"})]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to select"})]})]})})]})})]}):null}function cpe({onAddTodo:t}){const[e,r]=T.useState(!1),n=T.useRef(null),i=vn();T.useEffect(()=>{const a=l=>{n.current&&!n.current.contains(l.target)&&r(!1)};if(e)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[e]);const s=a=>{r(!1),i(a)},o=()=>{r(!1),t()};return u.jsxs("div",{className:"relative",ref:n,children:[u.jsx("button",{onClick:()=>r(!e),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:u.jsx(sr,{className:"w-5 h-5"})}),e&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:()=>s("/people/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(tl,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),u.jsxs("button",{onClick:()=>s("/companies/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Rr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),u.jsxs("button",{onClick:o,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(As,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),u.jsxs("button",{onClick:()=>s("/dates/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(vo,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function upe({onMenuClick:t,onAddTodo:e,onOpenSearch:r}){const n=Lo(),i=()=>{const s=n.pathname;return s==="/"?"Dashboard":s.startsWith("/people")?"People":s.startsWith("/companies")?"Organizations":s.startsWith("/dates")?"Important Dates":s.startsWith("/todos")?"Todos":s.startsWith("/settings")?"Settings":""};return u.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:u.jsx(Mfe,{className:"w-5 h-5"})}),u.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:i()}),u.jsx("div",{className:"flex-1"}),u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[u.jsx(Sc,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),u.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[u.jsx(Efe,{className:"w-3 h-3"}),"K"]})]}),u.jsx("div",{className:"ml-2",children:u.jsx(cpe,{onAddTodo:e})}),u.jsx("div",{className:"ml-2",children:u.jsx(ape,{})})]})}function dpe({children:t}){const[e,r]=T.useState(!1),[n,i]=T.useState(!1),[s,o]=T.useState(!1);return vte(),T.useEffect(()=>{const a=l=>{(l.metaKey||l.ctrlKey)&&l.key==="k"&&(l.preventDefault(),o(!0))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]),u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[u.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:u.jsx(fF,{})}),e&&u.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:u.jsx(fF,{mobile:!0,onClose:()=>r(!1)})})]}),u.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[u.jsx(upe,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onOpenSearch:()=>o(!0)}),u.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),u.jsx(lpe,{isOpen:s,onClose:()=>o(!1)}),u.jsx(_te,{isOpen:n,onClose:()=>i(!1)})]})}function ct(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Do(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function hpe(t,e){const r=ct(t);return isNaN(e)?Do(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const Ete=6048e5,fpe=864e5,Nte=6e4,Cte=36e5,mg=43200,pF=1440;let ppe={};function Zp(){return ppe}function Ec(t,e){var a,l,c,d;const r=Zp(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=ct(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function zy(t){return Ec(t,{weekStartsOn:1})}function kte(t){const e=ct(t),r=e.getFullYear(),n=Do(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=zy(n),s=Do(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=zy(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Vy(t){const e=ct(t);return e.setHours(0,0,0,0),e}function Uy(t){const e=ct(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function mpe(t,e){const r=Vy(t),n=Vy(e),i=+r-Uy(r),s=+n-Uy(n);return Math.round((i-s)/fpe)}function gpe(t){const e=kte(t),r=Do(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),zy(r)}function ed(t,e){const r=ct(t),n=ct(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function E0(t){return Do(t,Date.now())}function Tte(t,e){const r=Vy(t),n=Vy(e);return+r==+n}function ype(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function vpe(t){if(!ype(t)&&typeof t!="number")return!1;const e=ct(t);return!isNaN(Number(e))}function bpe(t,e){const r=ct(t),n=ct(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function xpe(t,e){const r=ct(t),n=ct(e);return r.getFullYear()-n.getFullYear()}function wpe(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Spe(t,e){return+ct(t)-+ct(e)}function _pe(t){const e=ct(t);return e.setHours(23,59,59,999),e}function Epe(t){const e=ct(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Npe(t){const e=ct(t);return+_pe(e)==+Epe(e)}function Cpe(t,e){const r=ct(t),n=ct(e),i=ed(r,n),s=Math.abs(bpe(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=ed(r,n)===-i;Npe(ct(t))&&s===1&&ed(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function kpe(t,e,r){const n=Spe(t,e)/1e3;return wpe(r==null?void 0:r.roundingMethod)(n)}function i1(t,e){const r=ct(t),n=ct(e),i=ed(r,n),s=Math.abs(xpe(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=ed(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Tpe(t){const e=ct(t),r=Do(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Ope={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jpe=(t,e,r)=>{let n;const i=Ope[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function s1(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Ppe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ipe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rpe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Mpe={date:s1({formats:Ppe,defaultWidth:"full"}),time:s1({formats:Ipe,defaultWidth:"full"}),dateTime:s1({formats:Rpe,defaultWidth:"full"})},$pe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Dpe=(t,e,r,n)=>$pe[t];function Wh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Ape={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fpe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qpe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Lpe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bpe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zpe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vpe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Upe={ordinalNumber:Vpe,era:Wh({values:Ape,defaultWidth:"wide"}),quarter:Wh({values:Fpe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Wh({values:qpe,defaultWidth:"wide"}),day:Wh({values:Lpe,defaultWidth:"wide"}),dayPeriod:Wh({values:Bpe,defaultWidth:"wide",formattingValues:zpe,defaultFormattingWidth:"wide"})};function Kh(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Wpe(a,h=>h.test(o)):Hpe(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function Hpe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Wpe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Kpe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Gpe=/^(\d+)(th|st|nd|rd)?/i,Ype=/\d+/i,Qpe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xpe={any:[/^b/i,/^(a|c)/i]},Jpe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Zpe={any:[/1/i,/2/i,/3/i,/4/i]},eme={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nme={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ime={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ome={ordinalNumber:Kpe({matchPattern:Gpe,parsePattern:Ype,valueCallback:t=>parseInt(t,10)}),era:Kh({matchPatterns:Qpe,defaultMatchWidth:"wide",parsePatterns:Xpe,defaultParseWidth:"any"}),quarter:Kh({matchPatterns:Jpe,defaultMatchWidth:"wide",parsePatterns:Zpe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Kh({matchPatterns:eme,defaultMatchWidth:"wide",parsePatterns:tme,defaultParseWidth:"any"}),day:Kh({matchPatterns:rme,defaultMatchWidth:"wide",parsePatterns:nme,defaultParseWidth:"any"}),dayPeriod:Kh({matchPatterns:ime,defaultMatchWidth:"any",parsePatterns:sme,defaultParseWidth:"any"})},Ote={code:"en-US",formatDistance:jpe,formatLong:Mpe,formatRelative:Dpe,localize:Upe,match:ome,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ame(t){const e=ct(t);return mpe(e,Tpe(e))+1}function lme(t){const e=ct(t),r=+zy(e)-+gpe(e);return Math.round(r/Ete)+1}function jte(t,e){var d,h,f,p;const r=ct(t),n=r.getFullYear(),i=Zp(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Do(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Ec(o,e),l=Do(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=Ec(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function cme(t,e){var a,l,c,d;const r=Zp(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=jte(t,e),s=Do(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Ec(s,e)}function ume(t,e){const r=ct(t),n=+Ec(r,e)-+cme(r,e);return Math.round(n/Ete)+1}function xt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Qo={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return xt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):xt(r+1,2)},d(t,e){return xt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return xt(t.getHours()%12||12,e.length)},H(t,e){return xt(t.getHours(),e.length)},m(t,e){return xt(t.getMinutes(),e.length)},s(t,e){return xt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return xt(i,e.length)}},yu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},mF={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Qo.y(t,e)},Y:function(t,e,r,n){const i=jte(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return xt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):xt(s,e.length)},R:function(t,e){const r=kte(t);return xt(r,e.length)},u:function(t,e){const r=t.getFullYear();return xt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return xt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return xt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Qo.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return xt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=ume(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):xt(i,e.length)},I:function(t,e,r){const n=lme(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):xt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Qo.d(t,e)},D:function(t,e,r){const n=ame(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):xt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return xt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return xt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return xt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=yu.noon:n===0?i=yu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=yu.evening:n>=12?i=yu.afternoon:n>=4?i=yu.morning:i=yu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Qo.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Qo.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):xt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):xt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Qo.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Qo.s(t,e)},S:function(t,e){return Qo.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return yF(n);case"XXXX":case"XX":return kl(n);case"XXXXX":case"XXX":default:return kl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return yF(n);case"xxxx":case"xx":return kl(n);case"xxxxx":case"xxx":default:return kl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+gF(n,":");case"OOOO":default:return"GMT"+kl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+gF(n,":");case"zzzz":default:return"GMT"+kl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return xt(n,e.length)},T:function(t,e,r){const n=t.getTime();return xt(n,e.length)}};function gF(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+xt(s,2)}function yF(t,e){return t%60===0?(t>0?"-":"+")+xt(Math.abs(t)/60,2):kl(t,e)}function kl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=xt(Math.trunc(n/60),2),s=xt(n%60,2);return r+i+e+s}const vF=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Pte=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},dme=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return vF(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",vF(n,e)).replace("{{time}}",Pte(i,e))},hme={p:Pte,P:dme},fme=/^D+$/,pme=/^Y+$/,mme=["D","DD","YY","YYYY"];function gme(t){return fme.test(t)}function yme(t){return pme.test(t)}function vme(t,e,r){const n=bme(t,e,r);if(console.warn(n),mme.includes(t))throw new RangeError(n)}function bme(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xme=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wme=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sme=/^'([^]*?)'?$/,_me=/''/g,Eme=/[a-zA-Z]/;function Cn(t,e,r){var d,h,f,p;const n=Zp(),i=n.locale??Ote,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=ct(t);if(!vpe(a))throw new RangeError("Invalid time value");let l=e.match(wme).map(m=>{const g=m[0];if(g==="p"||g==="P"){const b=hme[g];return b(m,i.formatLong)}return m}).join("").match(xme).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Nme(m)};if(mF[g])return{isToken:!0,value:m};if(g.match(Eme))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(yme(g)||gme(g))&&vme(g,e,String(t));const b=mF[g[0]];return b(a,g,i.localize,c)}).join("")}function Nme(t){const e=t.match(Sme);return e?e[1].replace(_me,"'"):t}function Cme(t,e,r){const n=Zp(),i=(r==null?void 0:r.locale)??n.locale??Ote,s=2520,o=ed(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,c;o>0?(l=ct(e),c=ct(t)):(l=ct(t),c=ct(e));const d=kpe(c,l),h=(Uy(c)-Uy(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<pF){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<mg){const m=Math.round(f/pF);return i.formatDistance("xDays",m,a)}else if(f<mg*2)return p=Math.round(f/mg),i.formatDistance("aboutXMonths",p,a)}if(p=Cpe(c,l),p<12){const m=Math.round(f/mg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function kme(t,e){return Cme(t,E0(t),e)}function Tme(t,e){const r=ct(t),n=ct(e);return r.getTime()>n.getTime()}function Ome(t,e,r){const n=Ec(t,r),i=Ec(e,r);return+n==+i}function jme(t,e){return Ome(t,E0(t),e)}function Ite(t){return Tte(t,E0(t))}function Rte(t,e){return hpe(t,-e)}function Mte(t){return Tte(t,Rte(E0(t),1))}function dp(t,e){const n=Mme(t);let i;if(n.date){const l=$me(n.date,2);i=Dme(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=Ame(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=Fme(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const gg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Pme=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ime=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Rme=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Mme(t){const e={},r=t.split(gg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],gg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(gg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=gg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function $me(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function Dme(t,e){if(e===null)return new Date(NaN);const r=t.match(Pme);if(!r)return new Date(NaN);const n=!!r[4],i=Gh(r[1]),s=Gh(r[2])-1,o=Gh(r[3]),a=Gh(r[4]),l=Gh(r[5])-1;if(n)return Vme(e,a,l)?qme(e,a,l):new Date(NaN);{const c=new Date(0);return!Bme(e,s,o)||!zme(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Gh(t){return t?parseInt(t):1}function Ame(t){const e=t.match(Ime);if(!e)return NaN;const r=o1(e[1]),n=o1(e[2]),i=o1(e[3]);return Ume(r,n,i)?r*Cte+n*Nte+i*1e3:NaN}function o1(t){return t&&parseFloat(t.replace(",","."))||0}function Fme(t){if(t==="Z")return 0;const e=t.match(Rme);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Hme(n,i)?r*(n*Cte+i*Nte):NaN}function qme(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const Lme=[31,null,31,30,31,30,31,31,30,31,30,31];function $te(t){return t%400===0||t%4===0&&t%100!==0}function Bme(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(Lme[e]||($te(t)?29:28))}function zme(t,e){return e>=1&&e<=($te(t)?366:365)}function Vme(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Ume(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function Hme(t,e){return e>=0&&e<=59}function Wme(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}dp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=dp(n);Ite(i)?e.today.push(r):Mte(i)?e.yesterday.push(r):jme(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function Kme(t){if(!t)return"";try{const e=dp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return Ite(e)?kme(e,{addSuffix:!0}):Mte(e)?r?Cn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":Cn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function Gme(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function Yme(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function em(t){if(!t.due_date||t.is_completed)return!1;try{const e=dp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function Qme(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):em(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function XR({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:u.jsx(gn,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[u.jsx(As,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),u.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[u.jsx(_0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),u.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var Dte={exports:{}},Ate={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d=T;function Xme(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jme=typeof Object.is=="function"?Object.is:Xme,Zme=$d.useState,ege=$d.useEffect,tge=$d.useLayoutEffect,rge=$d.useDebugValue;function nge(t,e){var r=e(),n=Zme({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return tge(function(){i.value=r,i.getSnapshot=e,a1(i)&&s({inst:i})},[t,r,e]),ege(function(){return a1(i)&&s({inst:i}),t(function(){a1(i)&&s({inst:i})})},[t]),rge(r),r}function a1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Jme(t,r)}catch{return!0}}function ige(t,e){return e()}var sge=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ige:nge;Ate.useSyncExternalStore=$d.useSyncExternalStore!==void 0?$d.useSyncExternalStore:sge;Dte.exports=Ate;var JR=Dte.exports;function Zr(t){this.content=t}Zr.prototype={constructor:Zr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new Zr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Zr(r)},addToStart:function(t,e){return new Zr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new Zr(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new Zr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Zr.from(t),t.size?new Zr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Zr.from(t),t.size?new Zr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Zr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};Zr.from=function(t){if(t instanceof Zr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new Zr(e)};function Fte(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=Fte(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function qte(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=qte(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class X{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new X(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new X(n,i)}cutByIndex(e,r){return e==r?X.empty:e==0&&r==this.content.length?this:new X(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new X(i,s)}addToStart(e){return new X([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new X(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return Fte(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return qte(this,e,r,n)}findIndex(e){if(e==0)return yg(0,e);if(e==this.size)return yg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?yg(r+1,s):yg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return X.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new X(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return X.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new X(r||e,n)}static from(e){if(!e)return X.empty;if(e instanceof X)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new X([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}X.empty=new X([],0);const l1={index:0,offset:0};function yg(t,e){return l1.index=t,l1.offset=e,l1}function Hy(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Hy(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Hy(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Ct=class FP{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Hy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return FP.none;if(e instanceof FP)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Ct.none=[];class Wy extends Error{}class ge{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=Bte(this.content,e+this.openStart,r);return n&&new ge(n,this.openStart,this.openEnd)}removeBetween(e,r){return new ge(Lte(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return ge.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ge(X.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new ge(e,n,i)}}ge.empty=new ge(X.empty,0,0);function Lte(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(Lte(s.content,e-i-1,r-i-1)))}function Bte(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=Bte(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function oge(t,e,r){if(r.openStart>t.depth)throw new Wy("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Wy("Inconsistent open depths");return zte(t,e,r,0)}function zte(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=zte(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return nc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=age(r,t);return nc(s,Ute(t,o,a,e,n))}else return nc(s,Ky(t,e,n))}function Vte(t,e){if(!e.type.compatibleContent(t.type))throw new Wy("Cannot join "+e.type.name+" onto "+t.type.name)}function qP(t,e,r){let n=t.node(r);return Vte(n,e.node(r)),n}function rc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Nf(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(rc(t.nodeAfter,n),s++));for(let a=s;a<o;a++)rc(i.child(a),n);e&&e.depth==r&&e.textOffset&&rc(e.nodeBefore,n)}function nc(t,e){return t.type.checkContent(e),t.copy(e)}function Ute(t,e,r,n,i){let s=t.depth>i&&qP(t,e,i+1),o=n.depth>i&&qP(r,n,i+1),a=[];return Nf(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(Vte(s,o),rc(nc(s,Ute(t,e,r,n,i+1)),a)):(s&&rc(nc(s,Ky(t,e,i+1)),a),Nf(e,r,i,a),o&&rc(nc(o,Ky(r,n,i+1)),a)),Nf(n,null,i,a),new X(a)}function Ky(t,e,r){let n=[];if(Nf(null,t,r,n),t.depth>r){let i=qP(t,e,r+1);rc(nc(i,Ky(t,e,r+1)),n)}return Nf(e,null,r,n),new X(n)}function age(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(X.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class hp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Ct.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Gy(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new hp(r,n,s)}static resolveCached(e,r){let n=bF.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else bF.set(e,n=new lge);let i=n.elts[n.i]=hp.resolve(e,r);return n.i=(n.i+1)%cge,i}}class lge{constructor(){this.elts=[],this.i=0}}const cge=12,bF=new WeakMap;class Gy{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const uge=Object.create(null);let za=class LP{constructor(e,r,n,i=Ct.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||X.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Hy(this.attrs,r||e.defaultAttrs||uge)&&Ct.sameSet(this.marks,n||Ct.none)}copy(e=null){return e==this.content?this:new LP(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new LP(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return ge.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new ge(c,i.depth-o,s.depth-o)}replace(e,r,n){return oge(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return hp.resolveCached(this,e)}resolveNoCache(e){return hp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Hte(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=X.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ct.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Ct.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=X.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};za.prototype.text=void 0;class Yy extends za{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Hte(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Yy(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Yy(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Hte(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Nc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new dge(e,r);if(n.next==null)return Nc.empty;let i=Wte(n);n.next&&n.err("Unexpected trailing text");let s=vge(yge(i));return bge(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return X.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:h}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Nc.empty=new Nc(!0);class dge{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Wte(t){let e=[];do e.push(hge(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function hge(t){let e=[];do e.push(fge(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function fge(t){let e=gge(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=pge(t,e);else break;return e}function xF(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function pge(t,e){let r=xF(t),n=r;return t.eat(",")&&(t.next!="}"?n=xF(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function mge(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function gge(t){if(t.eat("(")){let e=Wte(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=mge(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function yge(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Kte(t,e){return e-t}function wF(t,e){let r=[];return n(e),r.sort(Kte);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function vge(t){let e=Object.create(null);return r(wF(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<i.length;d++)i[d][0]==a&&(c=i[d][1]);wF(t,l).forEach(d=>{c||i.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[n.join(",")]=new Nc(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Kte);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function bge(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Gte(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function Yte(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function Qte(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Xte(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new wge(t,n,e[n]);return r}let SF=class Jte{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Xte(e,n.attrs),this.defaultAttrs=Gte(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Nc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Yte(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new za(this,this.computeAttrs(e),X.from(r),Ct.setFrom(n))}createChecked(e=null,r,n){return r=X.from(r),this.checkContent(r),new za(this,this.computeAttrs(e),r,Ct.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=X.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(X.empty,!0);return s?new za(this,e,r.append(s),Ct.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Qte(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Ct.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new Jte(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function xge(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class wge{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?xge(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class N0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=Xte(e,i.attrs),this.excluded=null;let s=Gte(this.attrs);this.instance=s?new Ct(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ct(this,Yte(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new N0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){Qte(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Zte{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=Zr.from(e.nodes),r.marks=Zr.from(e.marks||{}),this.nodes=SF.compile(this.spec.nodes,this),this.marks=N0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Nc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?_F(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:_F(this,o.split(" "))}this.nodeFromJSON=i=>za.fromJSON(this,i),this.markFromJSON=i=>Ct.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof SF){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new Yy(n,n.defaultAttrs,e,Ct.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function _F(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function Sge(t){return t.tag!=null}function _ge(t){return t.style!=null}class Va{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(Sge(i))this.tags.push(i);else if(_ge(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new NF(this,r,!1);return n.addAll(e,Ct.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new NF(this,r,!0);return n.addAll(e,Ct.none,r.from,r.to),ge.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Cge(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=CF(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=CF(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Va(e,Va.schemaRules(e)))}}const ere={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ege={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},tre={ol:!0,ul:!0},fp=1,BP=2,Cf=4;function EF(t,e,r){return e!=null?(e?fp:0)|(e==="full"?BP:0):t&&t.whitespace=="pre"?fp|BP:r&~Cf}class vg{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Ct.none,this.match=s||(o&Cf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(X.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&fp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=X.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(X.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ere.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class NF{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=EF(null,r.preserveWhitespace,0)|(n?Cf:0);i?s=new vg(i.type,i.attrs,Ct.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new vg(null,null,Ct.none,!0,null,o):s=new vg(e.schema.topNodeType,null,Ct.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&BP?"full":this.localPreserveWS||(i.options&fp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;tre.hasOwnProperty(o)&&this.parser.normalizeLists&&Nge(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:Ege.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(ere.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,r);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Ct.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):kF(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=EF(e,s,o.options);o.options&Cf&&o.content.length==0&&(a|=Cf);let l=Ct.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):kF(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new vg(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=fp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Nge(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&tre.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function Cge(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function CF(t){let e={};for(let r in t)e[r]=t[r];return e}function kF(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Vc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=c1(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,r);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=ry(c1(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&ry(c1(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return ry(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Vc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=TF(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return TF(e.marks)}}function TF(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function c1(t){return t.document||window.document}const OF=new WeakMap;function kge(t){let e=OF.get(t);return e===void 0&&OF.set(t,e=Tge(t)),e}function Tge(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function ry(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=kge(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=ry(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const rre=65535,nre=Math.pow(2,16);function Oge(t,e){return t+e*nre}function jF(t){return t&rre}function jge(t){return(t-(t&rre))/nre}const ire=1,sre=2,ny=4,ore=8;class zP{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&ore)>0}get deletedBefore(){return(this.delInfo&(ire|ny))>0}get deletedAfter(){return(this.delInfo&(sre|ny))>0}get deletedAcross(){return(this.delInfo&ny)>0}}class di{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&di.empty)return di.empty}recover(e){let r=0,n=jF(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+jge(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:Oge(a/3,e-l),g=e==l?sre:e==h?ire:ny;return(r<0?e!=l:e!=h)&&(g|=ore),new zP(p,g,m)}i+=d-c}return n?e+i:new zP(e+i,0,null)}touches(e,r){let n=0,i=jF(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],d=this.ranges[i+n];e(a,a+c,l,l+d),s+=d-c}}invert(){return new di(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?di.empty:new di(e<0?[0,-e,0]:[0,0,e])}}di.empty=new di([]);class pp{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new pp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new pp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new zP(e,i,null)}}const u1=Object.create(null);class bn{getMap(){return di.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=u1[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in u1)throw new RangeError("Duplicate use of step JSON ID "+e);return u1[e]=r,r.prototype.jsonID=e,r}}class br{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new br(e,null)}static fail(e){return new br(null,e)}static fromReplace(e,r,n,i){try{return br.ok(e.replace(r,n,i))}catch(s){if(s instanceof Wy)return br.fail(s.message);throw s}}}function ZR(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(ZR(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return X.fromArray(n)}class Ta extends bn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new ge(ZR(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return br.fromReplace(e,this.from,this.to,s)}invert(){return new us(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Ta(r.pos,n.pos,this.mark)}merge(e){return e instanceof Ta&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ta(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ta(r.from,r.to,e.markFromJSON(r.mark))}}bn.jsonID("addMark",Ta);class us extends bn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new ge(ZR(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return br.fromReplace(e,this.from,this.to,n)}invert(){return new Ta(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new us(r.pos,n.pos,this.mark)}merge(e){return e instanceof us&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new us(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new us(r.from,r.to,e.markFromJSON(r.mark))}}bn.jsonID("removeMark",us);class Oa extends bn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return br.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return br.fromReplace(e,this.pos,this.pos+1,new ge(X.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Oa(this.pos,r.marks[i]);return new Oa(this.pos,this.mark)}}return new Cc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Oa(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Oa(r.pos,e.markFromJSON(r.mark))}}bn.jsonID("addNodeMark",Oa);class Cc extends bn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return br.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return br.fromReplace(e,this.pos,this.pos+1,new ge(X.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Oa(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Cc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Cc(r.pos,e.markFromJSON(r.mark))}}bn.jsonID("removeNodeMark",Cc);class qr extends bn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&VP(e,this.from,this.to)?br.fail("Structure replace would overwrite content"):br.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new di([this.from,this.to-this.from,this.slice.size])}invert(e){return new qr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new qr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof qr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?ge.empty:new ge(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new qr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?ge.empty:new ge(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new qr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new qr(r.from,r.to,ge.fromJSON(e,r.slice),!!r.structure)}}bn.jsonID("replace",qr);class zr extends bn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(VP(e,this.from,this.gapFrom)||VP(e,this.gapTo,this.to)))return br.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return br.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?br.fromReplace(e,this.from,this.to,n):br.fail("Content does not fit in gap")}getMap(){return new di([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new zr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new zr(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zr(r.from,r.to,r.gapFrom,r.gapTo,ge.fromJSON(e,r.slice),r.insert,!!r.structure)}}bn.jsonID("replaceAround",zr);function VP(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Pge(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,c,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new us(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new Ta(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Ige(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof N0){let c=o.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new us(o.from,o.to,o.style)))}function eM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,h=n.matchType(c.type);if(!h)o.push(new qr(a,d,ge.empty));else{n=h;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||t.step(new us(a,d,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new ge(X.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new qr(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(X.empty,!0);t.replace(a,a,new ge(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function Rge(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function oh(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!Rge(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function Mge(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,c=a,d=X.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=X.from(n.node(m).copy(d)),h++):l--;let f=X.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=X.from(i.node(m).copy(f)),p++):c++;t.step(new zr(l,c,o,a,new ge(d.append(f),h,p),d.size-h,!0))}function tM(t,e,r=null,n=t){let i=$ge(t,e),s=i&&Dge(n,e);return s?i.map(PF).concat({type:e,attrs:r}).concat(s.map(PF)):null}function PF(t){return{type:t,attrs:null}}function $ge(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function Dge(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function Age(t,e,r){let n=X.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=X.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new zr(i,s,i,s,new ge(n,0,0),r.length,!0))}function Fge(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&qge(t.doc,t.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&lre(t,o,a,s),eM(t,t.mapping.slice(s).map(a,1),n,void 0,c===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new zr(h,f,h+1,f-1,new ge(X.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&are(t,o,a,s),!1}})}function are(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function lre(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function qge(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function Lge(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new zr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ge(X.from(o),0,0),1,!0))}function bo(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>s;c--,d--){let h=i.node(c),f=i.index(c);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Bge(t,e,r=1,n){let i=t.doc.resolve(e),s=X.empty,o=X.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=X.from(i.node(a).copy(s));let d=n&&n[c];o=X.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new qr(e,e,new ge(s.append(o),r,r),!0))}function ul(t,e){let r=t.resolve(e),n=r.index();return cre(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function zge(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function cre(t,e){return!!(t&&e&&!t.isLeaf&&zge(t,e))}function C0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&cre(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function Vge(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);lre(t,d.node(),d.before(),a)}o.inlineContent&&eM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),c=l.map(e-r);if(t.step(new qr(c,l.map(e+r,-1),ge.empty,!0)),n===!0){let d=t.doc.resolve(c);are(t,d.node(),d.before(),t.steps.length)}return t}function Uge(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function ure(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),d=!1;if(s==1)d=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&c.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function k0(t,e,r=e,n=ge.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return dre(i,s,n)?new qr(e,r,n):new Hge(i,s,n).fit()}function dre(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class Hge{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=X.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=X.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ge(s,o,a);return e>-1?new zr(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new qr(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=d1(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,h=null;if(r==1&&(o?c.matchType(o.type)||(h=c.fillBefore(X.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=d1(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ge(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=d1(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new ge(cf(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new ge(cf(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),b=h.matchType(g.type);if(!b)break;c++,(c>1||l==0||g.content.size)&&(h=b,d.push(hre(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=uf(this.placed,r,X.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=a;g<p;g++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=m?e==0?ge.empty:new ge(cf(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new ge(cf(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!h1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=h1(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=h1(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=uf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=uf(this.placed,this.depth,X.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(X.empty,!0);r.childCount&&(this.placed=uf(this.placed,this.frontier.length,r))}}function cf(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(cf(t.firstChild.content,e-1,r)))}function uf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(uf(t.lastChild.content,e-1,r)))}function d1(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function hre(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,hre(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(X.empty,!0)))),t.copy(n)}function h1(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!Wge(r,s.content,o)?a:null}function Wge(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Kge(t){return t.spec.defining||t.spec.definingForContent}function Gge(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(dre(i,s,n))return t.step(new qr(e,r,n));let o=pre(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=c[f],m=Kge(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let b=o[(g+l)%o.length],y=!0;b<0&&(y=!1,b=-b);let v=i.node(b-1),w=i.index(b-1);if(v.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(b),y?s.after(b):r,new ge(fre(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function fre(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(fre(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(X.empty,!0))}return t}function Yge(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Uge(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new ge(X.from(n),0,0))}function Qge(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=pre(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function pre(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class td extends bn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return br.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return br.fromReplace(e,this.pos,this.pos+1,new ge(X.from(i),0,r.isLeaf?0:1))}getMap(){return di.empty}invert(e){return new td(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new td(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new td(r.pos,r.attr,r.value)}}bn.jsonID("attr",td);class mp extends bn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return br.ok(n)}getMap(){return di.empty}invert(e){return new mp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new mp(r.attr,r.value)}}bn.jsonID("docAttr",mp);let Dd=class extends Error{};Dd=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Dd.prototype=Object.create(Error.prototype);Dd.prototype.constructor=Dd;Dd.prototype.name="TransformError";class mre{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Dd(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=ge.empty){let i=k0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new ge(X.from(n),0,0))}delete(e,r){return this.replace(e,r,ge.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return Gge(this,e,r,n),this}replaceRangeWith(e,r,n){return Yge(this,e,r,n),this}deleteRange(e,r){return Qge(this,e,r),this}lift(e,r){return Mge(this,e,r),this}join(e,r=1){return Vge(this,e,r),this}wrap(e,r){return Age(this,e,r),this}setBlockType(e,r=e,n,i=null){return Fge(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return Lge(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new td(e,r,n)),this}setDocAttribute(e,r){return this.step(new mp(e,r)),this}addNodeMark(e,r){return this.step(new Oa(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Ct)r.isInSet(n.marks)&&this.step(new Cc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Cc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return Bge(this,e,r,n),this}addMark(e,r,n){return Pge(this,e,r,n),this}removeMark(e,r,n){return Ige(this,e,r,n),this}clearIncompatible(e,r,n){return eM(this,e,r,n),this}}const f1=Object.create(null);class Qe{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new Xge(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=ge.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?ge.empty:r),a==0&&MF(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),c=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,r),MF(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new qe(e):Eu(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?Eu(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):Eu(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new mi(e.node(0))}static atStart(e){return Eu(e,e,0,0,1)||new mi(e)}static atEnd(e){return Eu(e,e,e.content.size,e.childCount,-1)||new mi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=f1[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in f1)throw new RangeError("Duplicate use of selection JSON ID "+e);return f1[e]=r,r.prototype.jsonID=e,r}getBookmark(){return qe.between(this.$anchor,this.$head).getBookmark()}}Qe.prototype.visible=!0;class Xge{constructor(e,r){this.$from=e,this.$to=r}}let IF=!1;function RF(t){!IF&&!t.parent.inlineContent&&(IF=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class qe extends Qe{constructor(e,r=e){RF(e),RF(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Qe.near(n);let i=e.resolve(r.map(this.anchor));return new qe(i.parent.inlineContent?i:n,n)}replace(e,r=ge.empty){if(super.replace(e,r),r==ge.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof qe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new T0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new qe(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=Qe.findFrom(r,n,!0)||Qe.findFrom(r,-n,!0);if(s)r=s.$head;else return Qe.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(Qe.findFrom(e,-n,!0)||Qe.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new qe(e,r)}}Qe.jsonID("text",qe);class T0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new T0(e.map(this.anchor),e.map(this.head))}resolve(e){return qe.between(e.resolve(this.anchor),e.resolve(this.head))}}class Re extends Qe{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?Qe.near(s):new Re(s)}content(){return new ge(X.from(this.node),0,0)}eq(e){return e instanceof Re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new rM(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(e.resolve(r.anchor))}static create(e,r){return new Re(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Re.prototype.visible=!1;Qe.jsonID("node",Re);class rM{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new T0(n,n):new rM(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Re.isSelectable(n)?new Re(r):Qe.near(r)}}class mi extends Qe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=ge.empty){if(r==ge.empty){e.delete(0,e.doc.content.size);let n=Qe.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new mi(e)}map(e){return new mi(e)}eq(e){return e instanceof mi}getBookmark(){return Jge}}Qe.jsonID("all",mi);const Jge={map(){return this},resolve(t){return new mi(t)}};function Eu(t,e,r,n,i,s=!1){if(e.inlineContent)return qe.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Re.isSelectable(a))return Re.create(t,r-(i<0?a.nodeSize:0))}else{let l=Eu(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function MF(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof qr||i instanceof zr))return;let s=t.mapping.maps[n],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(Qe.near(t.doc.resolve(o),r))}const $F=1,bg=2,DF=4;class Zge extends mre{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|$F)&~bg,this.storedMarks=null,this}get selectionSet(){return(this.updated&$F)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=bg,this}ensureMarks(e){return Ct.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&bg)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~bg,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Ct.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Qe.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=DF,this}get scrolledIntoView(){return(this.updated&DF)>0}}function AF(t,e){return!e||!t?t:t.bind(e)}class df{constructor(e,r,n){this.name=e,this.init=AF(r.init,n),this.apply=AF(r.apply,n)}}const eye=[new df("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new df("selection",{init(t,e){return t.selection||Qe.atStart(e.doc)},apply(t){return t.selection}}),new df("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new df("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class p1{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=eye.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new df(n.key,n.spec.state,n))})}}class Bu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Bu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new Zge(this)}static create(e){let r=new p1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Bu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new p1(this.schema,e.plugins),n=r.fields,i=new Bu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new p1(e.schema,e.plugins),s=new Bu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=za.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=Qe.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function gre(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=gre(i,e,{})),r[n]=i}return r}class Xt{constructor(e){this.spec=e,this.props={},e.props&&gre(e.props,this,this.props),this.key=e.key?e.key.key:yre("plugin")}getState(e){return e[this.key]}}const m1=Object.create(null);function yre(t){return t in m1?t+"$"+ ++m1[t]:(m1[t]=0,t+"$")}class Mr{constructor(e="key"){this.key=yre(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const nM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function vre(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const bre=(t,e,r)=>{let n=vre(t,r);if(!n)return!1;let i=iM(n);if(!i){let o=n.blockRange(),a=o&&oh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Tre(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Ad(s,"end")||Re.isSelectable(s)))for(let o=n.depth;;o--){let a=k0(t.doc,n.before(o),n.after(o),ge.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ad(s,"end")?Qe.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Re.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},tye=(t,e,r)=>{let n=vre(t,r);if(!n)return!1;let i=iM(n);return i?xre(t,i,e):!1},rye=(t,e,r)=>{let n=Sre(t,r);if(!n)return!1;let i=sM(n);return i?xre(t,i,e):!1};function xre(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=k0(t.doc,s,l,ge.empty);if(!c||c.from!=s||c instanceof qr&&c.slice.size>=l-s)return!1;if(r){let d=t.tr.step(c);d.setSelection(qe.create(d.doc,s)),r(d.scrollIntoView())}return!0}function Ad(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const wre=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=iM(n)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function iM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Sre(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const _re=(t,e,r)=>{let n=Sre(t,r);if(!n)return!1;let i=sM(n);if(!i)return!1;let s=i.nodeAfter;if(Tre(t,i,e,1))return!0;if(n.parent.content.size==0&&(Ad(s,"start")||Re.isSelectable(s))){let o=k0(t.doc,n.before(),n.after(),ge.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ad(s,"start")?Qe.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Re.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Ere=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=sM(n)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos)).scrollIntoView()),!0)};function sM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const nye=(t,e)=>{let r=t.selection,n=r instanceof Re,i;if(n){if(r.node.isTextblock||!ul(t.doc,r.from))return!1;i=r.from}else if(i=C0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(Re.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},iye=(t,e)=>{let r=t.selection,n;if(r instanceof Re){if(r.node.isTextblock||!ul(t.doc,r.to))return!1;n=r.to}else if(n=C0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},sye=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&oh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Nre=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function oM(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const oye=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=oM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Qe.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Cre=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof mi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=oM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(qe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},kre=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(bo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&oh(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function aye(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof Re&&e.selection.node.isBlock)return!n.parentOffset||!bo(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),c=n.start(p)==n.pos-(n.depth-p),a=oM(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof qe||e.selection instanceof mi)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=bo(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=bo(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&c&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const lye=aye(),cye=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(Re.create(t.doc,i))),!0)};function uye(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||ul(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function Tre(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&uye(t,e,r))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=X.empty;for(let y=o.length-1;y>=0;y--)m=X.from(o[y].create(null,m));m=X.from(i.copy(m));let g=t.tr.step(new zr(e.pos-1,p,e.pos,p,new ge(m,1,0),o.length,!0)),b=g.doc.resolve(p+2*o.length);b.nodeAfter&&b.nodeAfter.type==i.type&&ul(g.doc,b.pos)&&g.join(b.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:Qe.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&oh(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&Ad(s,"start",!0)&&Ad(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,b=1;for(;!g.isTextblock;g=g.firstChild)b++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=X.empty;for(let w=m.length-1;w>=0;w--)y=X.from(m[w].copy(y));let v=t.tr.step(new zr(e.pos-m.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new ge(y,m.length,0),0,!0));r(v.scrollIntoView())}return!0}}return!1}function Ore(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(qe.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const dye=Ore(-1),hye=Ore(1);function fye(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&tM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function FF(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(c),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function aM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}aM(nM,bre,wre);aM(nM,_re,Ere);aM(Nre,Cre,kre,lye);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function pye(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return mye(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function mye(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Gy(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Gy(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=tM(s,r,n,e);return a?(t&&gye(t,e,a,i,r),!0):!1}function gye(t,e,r,n,i){let s=X.empty;for(let d=r.length-1;d>=0;d--)s=X.from(r[d].type.create(r[d].attrs,s));t.step(new zr(e.start-(n?2:0),e.end,e.start,e.end,new ge(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),c=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&bo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function yye(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?vye(e,r,t,s):bye(e,r,s):!0:!1}}function vye(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new zr(s-1,o,s,o,new ge(X.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Gy(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=oh(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return ul(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function bye(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?X.empty:X.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new zr(h-(a?1:0),f+(l?1:0),h+1,f-1,new ge((a?X.empty:X.from(i.copy(X.empty))).append(l?X.empty:X.from(i.copy(X.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function xye(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,d=X.from(c?t.create():null),h=new ge(X.from(t.create(null,X.from(a.type.create(null,d)))),c?3:1,0),f=s.start,p=s.end;r(e.tr.step(new zr(f-(c?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const en=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Fd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let UP=null;const io=function(t,e,r){let n=UP||(UP=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},wye=function(){UP=null},kc=function(t,e,r,n){return r&&(qF(t,e,r,n,-1)||qF(t,e,r,n,1))},Sye=/^(img|br|input|textarea|hr)$/i;function qF(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Mi(t))){let o=t.parentNode;if(!o||o.nodeType!=1||tm(t)||Sye.test(t.nodeName)||t.contentEditable=="false")return!1;e=en(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Mi(t):0}else return!1}}function Mi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function _ye(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Mi(t)}else if(t.parentNode&&!tm(t))e=en(t),t=t.parentNode;else return null}}function Eye(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!tm(t))e=en(t)+1,t=t.parentNode;else return null}}function Nye(t,e,r){for(let n=e==0,i=e==Mi(t);n||i;){if(t==r)return!0;let s=en(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Mi(t)}}function tm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const O0=function(t){return t.focusNode&&kc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Tl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Cye(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function kye(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Mi(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Mi(n.startContainer),n.startOffset)}}}const Bs=typeof navigator<"u"?navigator:null,LF=typeof document<"u"?document:null,dl=Bs&&Bs.userAgent||"",HP=/Edge\/(\d+)/.exec(dl),jre=/MSIE \d/.exec(dl),WP=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(dl),ei=!!(jre||WP||HP),Ua=jre?document.documentMode:WP?+WP[1]:HP?+HP[1]:0,Fi=!ei&&/gecko\/(\d+)/i.test(dl);Fi&&+(/Firefox\/(\d+)/.exec(dl)||[0,0])[1];const KP=!ei&&/Chrome\/(\d+)/.exec(dl),Lr=!!KP,Pre=KP?+KP[1]:0,yn=!ei&&!!Bs&&/Apple Computer/.test(Bs.vendor),qd=yn&&(/Mobile\/\w+/.test(dl)||!!Bs&&Bs.maxTouchPoints>2),ji=qd||(Bs?/Mac/.test(Bs.platform):!1),Ire=Bs?/Win/.test(Bs.platform):!1,po=/Android \d/.test(dl),rm=!!LF&&"webkitFontSmoothing"in LF.documentElement.style,Tye=rm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Oye(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Xs(t,e){return typeof t=="number"?t:t[e]}function jye(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function BF(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=Fd(o);continue}let a=o,l=a==s.body,c=l?Oye(s):jye(a),d=0,h=0;if(e.top<c.top+Xs(n,"top")?h=-(c.top-e.top+Xs(i,"top")):e.bottom>c.bottom-Xs(n,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Xs(i,"top")-c.top:e.bottom-c.bottom+Xs(i,"bottom")),e.left<c.left+Xs(n,"left")?d=-(c.left-e.left+Xs(i,"left")):e.right>c.right-Xs(n,"right")&&(d=e.right-c.right+Xs(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,b=a.scrollTop-m;e={left:e.left-g,top:e.top-b,right:e.right-g,bottom:e.bottom-b}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Fd(o)}}function Pye(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:Rre(t.dom)}}function Rre(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Fd(n));return e}function Iye({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;Mre(r,n==0?0:n-e)}function Mre(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let vu=null;function Rye(t){if(t.setActive)return t.setActive();if(vu)return t.focus(vu);let e=Rre(t);t.focus(vu==null?{get preventScroll(){return vu={preventScroll:!0},!0}}:void 0),vu||(vu=!1,Mre(e,0))}function $re(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=io(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?Mye(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:$re(r,i)}function Mye(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=ta(n,1);if(o.top!=o.bottom&&lM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function lM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function $ye(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function Dye(t,e,r){let{node:n,offset:i}=$re(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function Aye(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function Dre(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(lM(e,c))return Dre(o,e,c)}}if((s=(s+1)%n)==i)break}return t}function Fye(t,e){let r=t.dom.ownerDocument,n,i=0,s=kye(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!lM(e,c)||(o=Dre(t.dom,e,c),!o))return null}if(yn)for(let c=o;n&&c;c=Fd(c))c.draggable&&(n=void 0);if(o=$ye(o,e),n){if(Fi&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;rm&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=Aye(t,n,i,e))}a==null&&(a=Dye(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function zF(t){return t.top<t.bottom||t.left<t.right}function ta(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(zF(n))return n}return Array.prototype.find.call(r,zF)||t.getBoundingClientRect()}const qye=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Are(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=rm||Fi;if(n.nodeType==3)if(o&&(qye.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=ta(io(n,i,i),r);if(Fi&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=ta(io(n,i-1,i-1),-1);if(c.top==l.top){let d=ta(io(n,i,i+1),-1);if(d.top!=l.top)return Yh(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,Yh(ta(io(n,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Mi(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return g1(l.getBoundingClientRect(),!1)}if(s==null&&i<Mi(n)){let l=n.childNodes[i];if(l.nodeType==1)return g1(l.getBoundingClientRect(),!0)}return g1(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Mi(n))){let l=n.childNodes[i-1],c=l.nodeType==3?io(l,Mi(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Yh(ta(c,1),!1)}if(s==null&&i<Mi(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?io(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Yh(ta(c,-1),!0)}return Yh(ta(n.nodeType==3?io(n):n,-r),r>=0)}function Yh(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function g1(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function Fre(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function Lye(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return Fre(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Are(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=io(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const Bye=/[\u0590-\u08ac]/;function zye(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!Bye.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:Fre(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),b=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(d,h),l&&(l!=d||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),b}):n.pos==n.start()||n.pos==n.end()}let VF=null,UF=null,HF=!1;function Vye(t,e,r){return VF==e&&UF==r?HF:(VF=e,UF=r,HF=r=="up"||r=="down"?Lye(t,e,r):zye(t,e,r))}const qi=0,WF=1,Ml=2,zs=3;class nm{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=qi,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>en(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof Lre){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof qre&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?en(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?en(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let d=o+l.border;if(e>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=en(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=en(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],b=m+g.size;if(s>m&&o<b)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=b}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((Fi||yn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,b;g;g=g.parentNode){if(b=g.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:en(b)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Fi&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&yn)&&kc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&kc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((c.extend||e==r)&&!(h&&Fi)){c.collapse(a.node,a.offset);try{e!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?Ml:WF,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=zs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ml:zs}n=o}this.dirty=Ml}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Ml:WF;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class qre extends nm{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==qi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Uye extends nm{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Tc extends nm{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Vc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Tc(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&zs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=zs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=qi){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=qi}}slice(e,r,n){let i=Tc.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=YP(s,r,o,n)),e>0&&(s=YP(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ha extends nm{constructor(e,r,n,i,s,o,a,l,c){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,h=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=Vc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=Vre(d,n,r),c?l=new Hye(e,r,n,i,d,h||null,f,c,s,o+1):r.isText?new j0(e,r,n,i,d,f,s):new Ha(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>X.empty)}return e}matchesNode(e,r,n){return this.dirty==qi&&e.eq(this.node)&&Qy(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Kye(this,o&&o.node,e);Qye(this.node,this.innerDeco,(c,d,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Ct.none:this.node.child(d).marks,n,e),l.placeWidget(c,e,i)},(c,d,h,f)=>{l.syncToMarks(c.marks,n,e);let p;l.findNodeMatch(c,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,h,p,e)||l.updateNextNode(c,d,h,e,f,i)||l.addNode(c,d,h,e,i),i+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ml)&&(o&&this.protectLocalComposition(e,o),Bre(this.contentDOM,this.children,e),qd&&Xye(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof qe)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=Jye(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Uye(this,s,r,i);e.input.compositionNodes.push(o),this.children=YP(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==zs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=qi}updateOuterDeco(e){if(Qy(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=zre(this.dom,this.nodeDOM,GP(this.outerDeco,this.node,r),GP(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function KF(t,e,r,n,i){Vre(n,e,t);let s=new Ha(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class j0 extends Ha{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==zs||this.dirty!=qi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=qi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=qi,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new j0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=zs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Lre extends nm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==qi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Hye extends Ha{constructor(e,r,n,i,s,o,a,l,c,d){super(e,r,n,i,s,o,a,c,d),this.spec=l}update(e,r,n,i){if(this.dirty==zs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Bre(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=GF(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Tc){let l=n?n.previousSibling:t.lastChild;Bre(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=GF(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const kf=function(t){t&&(this.nodeName=t)};kf.prototype=Object.create(null);const $l=[new kf];function GP(t,e,r){if(t.length==0)return $l;let n=r?$l[0]:new kf,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new kf(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new kf(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function zre(t,e,r,n){if(r==$l&&n==$l)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=$l[0]),i=l}Wye(i,a||$l[0],o)}return i}function Wye(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function Vre(t,e,r){return zre(t,t,$l,GP(e,r,t.nodeType!=1))}function Qy(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function GF(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Kye{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Gye(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=qi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Tc.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==zs&&o.dom==o.contentDOM&&(o.dirty=Ml),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ha){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=zs&&Qy(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Ml,h.updateChildren(i,o+1),h.dirty=qi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Qy(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ha.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Ha.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new qre(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Tc;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof j0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((yn||Lr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Lre(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Gye(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof Tc)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function Yye(t,e){return t.type.side-e.type.side}function Qye(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);n(d,i,e.forChild(s,d),c),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let b=i[o++];b.widget&&(d?(h||(h=[d])).push(b):d=b)}if(d)if(h){h.sort(Yye);for(let b=0;b<h.length;b++)r(h[b],c,!!l)}else r(d,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let b=m;o<i.length&&i[o].from<b&&(b=i[o].from);for(let y=0;y<a.length;y++)a[y].to<b&&(b=a[y].to);b<m&&(l=f.cut(b-s),f=f.cut(0,b-s),m=b,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(b=>!b.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function Xye(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Jye(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=r)return a+c;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function YP(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=r||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-c,l.size,n)))}return s}function cM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(O0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Re.isSelectable(h)&&i.parent&&!(h.isInline&&Nye(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new Re(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=uM(t,d,a,h)}return c}function Ure(t){return t.editable?t.hasFocus():Wre(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function xo(t,e=!1){let r=t.state.selection;if(Hre(t,r),!!Ure(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Lr){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&kc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)eve(t);else{let{anchor:n,head:i}=r,s,o;YF&&!(r instanceof qe)&&(r.$from.parent.inlineContent||(s=QF(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=QF(t,r.to))),t.docView.setSelection(n,i,t,e),YF&&(s&&XF(s),o&&XF(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Zye(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const YF=yn||Lr&&Pre<63;function QF(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(yn&&i&&i.contentEditable=="false")return y1(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return y1(i);if(s)return y1(s)}}function y1(t){return t.contentEditable="true",yn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function XF(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Zye(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Ure(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function eve(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,en(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&ei&&Ua<=11&&(r.disabled=!0,r.disabled=!1)}function Hre(t,e){if(e instanceof Re){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(JF(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else JF(t)}function JF(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function uM(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||qe.between(e,r,n)}function ZF(t){return t.editable&&!t.hasFocus()?!1:Wre(t)}function Wre(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function tve(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return kc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function QP(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Qe.findFrom(s,e)}function sa(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function e4(t,e,r){let n=t.state.selection;if(n instanceof qe)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return sa(t,new qe(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=QP(t.state,e);return i&&i instanceof Re?sa(t,i):!1}else if(!(ji&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Re.isSelectable(s)?sa(t,new Re(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):rm?sa(t,new qe(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Re&&n.node.isInline)return sa(t,new qe(e>0?n.$to:n.$from));{let i=QP(t.state,e);return i?sa(t,i):!1}}}function Xy(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Tf(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function bu(t,e){return e<0?rve(t):nve(t)}function rve(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(Fi&&r.nodeType==1&&n<Xy(r)&&Tf(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(Tf(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(Kre(r))break;{let a=r.previousSibling;for(;a&&Tf(a,-1);)i=r.parentNode,s=en(a),a=a.previousSibling;if(a)r=a,n=Xy(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?XP(t,r,n):i&&XP(t,i,s)}function nve(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=Xy(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(Tf(a,1))s=r,o=++n;else break}else{if(Kre(r))break;{let a=r.nextSibling;for(;a&&Tf(a,1);)s=a.parentNode,o=en(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=Xy(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&XP(t,s,o)}function Kre(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function ive(t,e){for(;t&&e==t.childNodes.length&&!tm(t);)e=en(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function sve(t,e){for(;t&&!e&&!tm(t);)e=en(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function XP(t,e,r){if(e.nodeType!=3){let s,o;(o=ive(e,r))?(e=o,r=0):(s=sve(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(O0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&xo(t)},50)}function t4(t,e){let r=t.state.doc.resolve(e);if(!(Lr||Ire)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function r4(t,e,r){let n=t.state.selection;if(n instanceof qe&&!n.empty||r.indexOf("s")>-1||ji&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=QP(t.state,e);if(o&&o instanceof Re)return sa(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof mi?Qe.near(o,e):Qe.findFrom(o,e);return a?sa(t,a):!1}return!1}function n4(t,e){if(!(t.state.selection instanceof qe))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function i4(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function ove(t){if(!yn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;i4(t,n,"true"),setTimeout(()=>i4(t,n,"false"),20)}return!1}function ave(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function lve(t,e){let r=e.keyCode,n=ave(e);if(r==8||ji&&r==72&&n=="c")return n4(t,-1)||bu(t,-1);if(r==46&&!e.shiftKey||ji&&r==68&&n=="c")return n4(t,1)||bu(t,1);if(r==13||r==27)return!0;if(r==37||ji&&r==66&&n=="c"){let i=r==37?t4(t,t.state.selection.from)=="ltr"?-1:1:-1;return e4(t,i,n)||bu(t,i)}else if(r==39||ji&&r==70&&n=="c"){let i=r==39?t4(t,t.state.selection.from)=="ltr"?1:-1:1;return e4(t,i,n)||bu(t,i)}else{if(r==38||ji&&r==80&&n=="c")return r4(t,-1,n)||bu(t,-1);if(r==40||ji&&r==78&&n=="c")return ove(t)||r4(t,1,n)||bu(t,1);if(n==(ji?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function dM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Vc.fromSchema(t.state.schema),a=Zre(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,d,h=0;for(;c&&c.nodeType==1&&(d=Jre[c.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function Gre(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new ge(X.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Vc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let b=o.appendChild(document.createElement("p"));g&&b.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=hve(r),rm&&fve(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Va.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!cve.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=pve(s4(a,+d[1],+d[2]),d[4]);else if(a=ge.maxOpen(uve(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=s4(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const cve=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function uve(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&Qre(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Xre(o[o.length-1],s.length));let d=Yre(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return X.from(o)}return t}function Yre(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,X.from(t));return t}function Qre(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Qre(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(X.from(Yre(r,t,i+1))))}}function Xre(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,Xre(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(X.empty,!0);return t.copy(r.append(n))}function JP(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=JP(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(X.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function s4(t,e,r){return e<t.openStart&&(t=new ge(JP(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new ge(JP(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const Jre={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let o4=null;function Zre(){return o4||(o4=document.implementation.createHTMLDocument("title"))}let v1=null;function dve(t){let e=window.trustedTypes;return e?(v1||(v1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),v1.createHTML(t)):t}function hve(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=Zre().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&Jre[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=dve(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function fve(t){let e=t.querySelectorAll(Lr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function pve(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=X.from(l.create(n[a+1],i)),s++,o++}return new ge(i,s,o)}const Pn={},In={},mve={touchstart:!0,touchmove:!0};class gve{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function yve(t){for(let e in Pn){let r=Pn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{bve(t,n)&&!hM(t,n)&&(t.editable||!(n.type in In))&&r(t,n)},mve[e]?{passive:!0}:void 0)}yn&&t.dom.addEventListener("input",()=>null),ZP(t)}function ja(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function vve(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function ZP(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>hM(t,n))})}function hM(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function bve(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function xve(t,e){!hM(t,e)&&Pn[e.type]&&(t.editable||!(e.type in In))&&Pn[e.type](t,e)}In.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!tne(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(po&&Lr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),qd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Tl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||lve(t,r)?r.preventDefault():ja(t,"key")};In.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};In.keypress=(t,e)=>{let r=e;if(tne(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||ji&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof qe)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function P0(t){return{left:t.clientX,top:t.clientY}}function wve(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function fM(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function rd(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function Sve(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Re.isSelectable(n)?(rd(t,new Re(r)),!0):!1}function _ve(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof Re&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(rd(t,Re.create(t.state.doc,i)),!0):!1}function Eve(t,e,r,n,i){return fM(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?_ve(t,r):Sve(t,r))}function Nve(t,e,r,n){return fM(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function Cve(t,e,r,n){return fM(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||kve(t,r,n)}function kve(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(rd(t,qe.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)rd(t,qe.create(n,a+1,a+1+o.content.size));else if(Re.isSelectable(o))rd(t,Re.create(n,a));else continue;return!0}}function pM(t){return Jy(t)}const ene=ji?"metaKey":"ctrlKey";Pn.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=pM(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&wve(r,t.input.lastClick)&&!r[ene]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(P0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Tve(t,o,r,!!n)):(s=="doubleClick"?Nve:Cve)(t,o.pos,o.inside,r)?r.preventDefault():ja(t,"pointer"))};class Tve{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[ene],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Re&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Fi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ja(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>xo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(P0(e))),this.updateAllowDefault(e),this.allowDefault||!r?ja(this.view,"pointer"):Eve(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||yn&&this.mightDrag&&!this.mightDrag.node.isAtom||Lr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(rd(this.view,Qe.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):ja(this.view,"pointer")}move(e){this.updateAllowDefault(e),ja(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Pn.touchstart=t=>{t.input.lastTouch=Date.now(),pM(t),ja(t,"pointer")};Pn.touchmove=t=>{t.input.lastTouch=Date.now(),ja(t,"pointer")};Pn.contextmenu=t=>pM(t);function tne(t,e){return t.composing?!0:yn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Ove=po?5e3:-1;In.compositionstart=In.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof qe&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||Lr&&Ire&&jve(t)))t.markCursor=t.state.storedMarks||r.marks(),Jy(t,!0),t.markCursor=null;else if(Jy(t,!e.selection.empty),Fi&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}rne(t,Ove)};function jve(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}In.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,rne(t,20))};function rne(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Jy(t),e))}function nne(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Ive());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Pve(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=_ye(e.focusNode,e.focusOffset),n=Eye(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function Ive(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Jy(t,e=!1){if(!(po&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),nne(t),e||t.docView&&t.docView.dirty){let r=cM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Rve(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const gp=ei&&Ua<15||qd&&Tye<604;Pn.copy=In.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=gp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=dM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Rve(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Mve(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function $ve(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?yp(t,n.value,null,i,e):yp(t,n.textContent,n.innerHTML,i,e)},50)}function yp(t,e,r,n,i){let s=Gre(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||ge.empty)))return!0;if(!s)return!1;let o=Mve(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ine(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}In.paste=(t,e)=>{let r=e;if(t.composing&&!po)return;let n=gp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&yp(t,ine(n),n.getData("text/html"),i,r)?r.preventDefault():$ve(t,r)};class sne{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const Dve=ji?"altKey":"ctrlKey";function one(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[Dve]}Pn.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(P0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(n&&n.mightDrag)o=Re.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=Re.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:d}=dM(t,a);(!r.dataTransfer.files.length||!Lr||Pre>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(gp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",gp||r.dataTransfer.setData("text/plain",c),t.dragging=new sne(d,one(t,r),o)};Pn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};In.dragover=In.dragenter=(t,e)=>e.preventDefault();In.drop=(t,e)=>{try{Ave(t,e,t.dragging)}finally{t.dragging=null}};function Ave(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(P0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=Gre(t,ine(e.dataTransfer),gp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&one(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||ge.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?ure(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&Re.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Re(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,b,y)=>p=y),l.setSelection(uM(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Pn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&xo(t)},20))};Pn.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Pn.beforeinput=(t,e)=>{if(Lr&&po&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Tl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in In)Pn[t]=In[t];function vp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Zy{constructor(e,r){this.toDOM=e,this.spec=r||ic,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new On(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Zy&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Wa{constructor(e,r){this.attrs=e,this.spec=r||ic}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new On(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Wa&&vp(this.attrs,e.attrs)&&vp(this.spec,e.spec)}static is(e){return e.type instanceof Wa}destroy(){}}class mM{constructor(e,r){this.attrs=e,this.spec=r||ic}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new On(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof mM&&vp(this.attrs,e.attrs)&&vp(this.spec,e.spec)}destroy(){}}class On{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new On(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new On(e,e,new Zy(r,n))}static inline(e,r,n,i){return new On(e,r,new Wa(n,i))}static node(e,r,n,i){return new On(e,r,new mM(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Wa}get widget(){return this.type instanceof Zy}}const Nu=[],ic={};class Kt{constructor(e,r){this.local=e.length?e:Nu,this.children=r.length?r:Nu}static create(e,r){return r.length?ev(r,e,0,ic):dn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==dn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||ic)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Fve(this.children,o||[],e,r,n,i,s):o?new Kt(o.sort(sc),Nu):dn}add(e,r){return r.length?this==dn?Kt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let c=l+n,d;if(d=lne(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,c+1):i.splice(s,0,l,l+a.nodeSize,ev(d,a,c+1,ic)),s+=3}});let o=ane(s?cne(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Kt(o.length?this.local.concat(o).sort(sc):this.local,i||this.children)}remove(e){return e.length==0||this==dn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=dn?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Kt(i,n):dn}forChild(e,r){if(this==dn)return this;if(r.isLeaf)return Kt.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Wa){let c=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let a=new Kt(i.sort(sc),Nu);return n?new ha([a,n]):a}return n||dn}eq(e){if(this==e)return!0;if(!(e instanceof Kt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return gM(this.localsInner(e))}localsInner(e){if(this==dn)return Nu;if(e.inlineContent||!this.local.some(Wa.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Wa||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Kt.empty=new Kt([],[]);Kt.removeOverlap=gM;const dn=Kt.empty;class ha{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,ic));return ha.from(n)}forChild(e,r){if(r.isLeaf)return Kt.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=dn&&(s instanceof ha?n=n.concat(s.members):n.push(s))}return ha.from(n)}eq(e){if(!(e instanceof ha)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?gM(n?r:r.sort(sc)):Nu}static from(e){switch(e.length){case 0:return dn;case 1:return e[0];default:return new ha(e.every(r=>r instanceof Kt)?e:e.reduce((r,n)=>r.concat(n instanceof Kt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function Fve(t,e,r,n,i,s,o){let a=t.slice();for(let c=0,d=s;c<r.maps.length;c++){let h=0;r.maps[c].forEach((f,p,m,g)=>{let b=g-m-(p-f);for(let y=0;y<a.length;y+=3){let v=a[y+1];if(v<0||f>v+d-h)continue;let w=a[y]+d-h;p>=w?a[y+1]=f<=w?-2:-1:f>=d&&b&&(a[y]+=b,a[y+1]+=b)}h+=b}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=r.map(t[c]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[c+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),b=n.maybeChild(m);if(b&&g==h&&g+b.nodeSize==p){let y=a[c+2].mapInner(r,b,d+1,t[c]+s+1,o);y!=dn?(a[c]=h,a[c+1]=p,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=qve(a,t,e,r,i,s,o),d=ev(c,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Kt(e.sort(sc),a)}function ane(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new On(i.from+e,i.to+e,i.type))}return r}function qve(t,e,r,n,i,s,o){function a(l,c){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,c);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function lne(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function cne(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function ev(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let c=lne(t,a,l+r);if(c){s=!0;let d=ev(c,a,r+l+1,n);d!=dn&&i.push(l,l+a.nodeSize,d)}});let o=ane(s?cne(t):t,-r).sort(sc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Kt(o,i):dn}function sc(t,e){return t.from-e.from||t.to-e.to}function gM(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),a4(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),a4(e,i,n.copy(s.from,n.to)));break}}}return e}function a4(t,e,r){for(;e<t.length&&sc(r,t[e])>0;)e++;t.splice(e,0,r)}function b1(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=dn&&e.push(n)}),t.cursorWrapper&&e.push(Kt.create(t.state.doc,[t.cursorWrapper.deco])),ha.from(e)}const Lve={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Bve=ei&&Ua<=11;class zve{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Vve{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new zve,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);ei&&Ua<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Bve&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Lve)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ZF(this.view)){if(this.suppressingSelectionUpdates)return xo(this.view);if(ei&&Ua<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&kc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=Fd(s))r.add(s);for(let s=e.anchorNode;s;s=Fd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&ZF(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Fi&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||Wve(e,h)!=p)&&f.remove()}}}else if((Lr||yn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&O0(n)&&(c=cM(e))&&c.eq(Qe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,xo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Uve(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||xo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ei&&Ua<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?en(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?en(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let l4=new WeakMap,c4=!1;function Uve(t){if(!l4.has(t)&&(l4.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Fi,c4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),c4=!0}}function u4(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return kc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Hve(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return u4(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?u4(t,r):null}function Wve(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function Kve(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],O0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Lr&&t.input.lastKeyCode===8)for(let b=s;b>i;b--){let y=n.childNodes[b-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){s=b;break}if(!v||v.size)break}let h=t.state.doc,f=t.someProp("domParser")||Va.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Gve,context:p});if(c&&c[0].pos!=null){let b=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=b),m={anchor:b+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function Gve(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(yn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||yn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Yve=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Qve(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=cM(t,N);if(E&&!t.state.selection.eq(E)){if(Lr&&po&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",C=>C(t,Tl(13,"Enter"))))return;let k=t.state.tr.setSelection(E);N=="pointer"?k.setMeta("pointer",!0):N=="key"&&k.scrollIntoView(),s&&k.setMeta("composition",s),t.dispatch(k)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,c=Kve(t,e,r),d=t.state.doc,h=d.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=Zve(h.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(qd&&t.input.lastIOSEnter>Date.now()-225||po)&&i.some(N=>N.nodeType==1&&!Yve.test(N.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",N=>N(t,Tl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof qe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let N=d4(t,t.state.doc,c.sel);if(N&&!N.eq(t.state.selection)){let E=t.state.tr.setSelection(N);s&&E.setMeta("composition",s),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof qe&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ei&&Ua<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),b=c.doc.resolveNoCache(m.endB-c.from),y=d.resolve(m.start),v=g.sameParent(b)&&g.parent.inlineContent&&y.end()>=m.endA;if((qd&&t.input.lastIOSEnter>Date.now()-225&&(!v||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!v&&g.pos<c.doc.content.size&&(!g.sameParent(b)||!g.parent.inlineContent)&&g.pos<b.pos&&!/\S/.test(c.doc.textBetween(g.pos,b.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,Tl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Jve(d,m.start,m.endA,g,b)&&t.someProp("handleKeyDown",N=>N(t,Tl(8,"Backspace")))){po&&Lr&&t.domObserver.suppressSelectionUpdates();return}Lr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),po&&!v&&g.start()!=b.start()&&b.parentOffset==0&&g.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,b=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,Tl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=N=>{let E=N||t.state.tr.replace(w,x,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let k=d4(t,E.doc,c.sel);k&&!(Lr&&t.composing&&k.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==w||k.head==E.mapping.map(x)-1)||ei&&k.empty&&k.head==w)&&E.setSelection(k)}return s&&E.setMeta("composition",s),E.scrollIntoView()},_;if(v)if(g.pos==b.pos){ei&&Ua<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>xo(t),20));let N=S(t.state.tr.delete(w,x)),E=d.resolve(m.start).marksAcross(d.resolve(m.endA));E&&N.ensureMarks(E),t.dispatch(N)}else if(m.endA==m.endB&&(_=Xve(g.parent.content.cut(g.parentOffset,b.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let N=S(t.state.tr);_.type=="add"?N.addMark(w,x,_.mark):N.removeMark(w,x,_.mark),t.dispatch(N)}else if(g.parent.child(g.index()).isText&&g.index()==b.index()-(b.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,b.parentOffset),E=()=>S(t.state.tr.insertText(N,w,x));t.someProp("handleTextInput",k=>k(t,w,x,N,E))||t.dispatch(E())}else t.dispatch(S());else t.dispatch(S())}function d4(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:uM(t,e.resolve(r.anchor),e.resolve(r.head))}function Xve(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(X.from(c).eq(t))return{mark:a,type:o}}function Jve(t,e,r,n,i){if(r-e<=i.pos-n.pos||x1(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(x1(s,!0,!0));return!o.parent.isTextblock||o.pos>r||x1(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function x1(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Zve(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&h4(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&h4(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function h4(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class une{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new gve,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(y4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=m4(this),p4(this),this.nodeViews=g4(this),this.docView=KF(this.state.doc,f4(this),b1(this),this.dom,this),this.domObserver=new Vve(this,(n,i,s,o)=>Qve(this,n,i,s,o)),this.domObserver.start(),yve(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ZP(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(y4),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(nne(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=g4(this);t0e(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&ZP(this),this.editable=m4(this),p4(this);let l=b1(this),c=f4(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Pye(this);if(o){this.domObserver.stop();let p=h&&(ei||Lr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&e0e(i.selection,e.selection);if(h){let m=Lr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Pve(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=KF(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&tve(this))?xo(this,p):(Hre(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&Iye(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Re){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&BF(this,r.getBoundingClientRect(),e)}else BF(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new sne(e.slice,e.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(ei){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Rye(this.dom),xo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Fye(this,e)}coordsAtPos(e,r=1){return Are(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return Vye(this,r||this.state,e)}pasteHTML(e,r){return yp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return yp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return dM(this,e)}destroy(){this.docView&&(vve(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],b1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,wye())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return xve(this,e)}domSelectionRange(){let e=this.domSelection();return e?yn&&this.root.nodeType===11&&Cye(this.dom.ownerDocument)==this.dom&&Hve(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}une.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function f4(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[On.node(0,t.state.doc.content.size,e)]}function p4(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:On.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function m4(t){return!t.someProp("editable",e=>e(t.state)===!1)}function e0e(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function g4(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function t0e(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function y4(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var rl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},tv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},r0e=typeof navigator<"u"&&/Mac/.test(navigator.platform),n0e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var tn=0;tn<10;tn++)rl[48+tn]=rl[96+tn]=String(tn);for(var tn=1;tn<=24;tn++)rl[tn+111]="F"+tn;for(var tn=65;tn<=90;tn++)rl[tn]=String.fromCharCode(tn+32),tv[tn]=String.fromCharCode(tn);for(var w1 in rl)tv.hasOwnProperty(w1)||(tv[w1]=rl[w1]);function i0e(t){var e=r0e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||n0e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?tv:rl)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const s0e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),o0e=typeof navigator<"u"&&/Win/.test(navigator.platform);function a0e(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))s0e?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function l0e(t){let e=Object.create(null);for(let r in t)e[a0e(r)]=t[r];return e}function S1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function c0e(t){return new Xt({props:{handleKeyDown:dne(t)}})}function dne(t){let e=l0e(t);return function(r,n){let i=i0e(n),s,o=e[S1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[S1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(o0e&&n.ctrlKey&&n.altKey)&&(s=rl[n.keyCode])&&s!=i){let a=e[S1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var u0e=Object.defineProperty,yM=(t,e)=>{for(var r in e)u0e(t,r,{get:e[r],enumerable:!0})};function I0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var R0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),b=f(...m)(g);return o.push(b),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:I0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},hne={};yM(hne,{blur:()=>d0e,clearContent:()=>h0e,clearNodes:()=>f0e,command:()=>p0e,createParagraphNear:()=>m0e,cut:()=>g0e,deleteCurrentNode:()=>y0e,deleteNode:()=>v0e,deleteRange:()=>b0e,deleteSelection:()=>x0e,enter:()=>w0e,exitCode:()=>S0e,extendMarkRange:()=>_0e,first:()=>E0e,focus:()=>C0e,forEach:()=>k0e,insertContent:()=>T0e,insertContentAt:()=>P0e,joinBackward:()=>M0e,joinDown:()=>R0e,joinForward:()=>$0e,joinItemBackward:()=>D0e,joinItemForward:()=>A0e,joinTextblockBackward:()=>F0e,joinTextblockForward:()=>q0e,joinUp:()=>I0e,keyboardShortcut:()=>B0e,lift:()=>z0e,liftEmptyBlock:()=>V0e,liftListItem:()=>U0e,newlineInCode:()=>H0e,resetAttributes:()=>W0e,scrollIntoView:()=>K0e,selectAll:()=>G0e,selectNodeBackward:()=>Y0e,selectNodeForward:()=>Q0e,selectParentNode:()=>X0e,selectTextblockEnd:()=>J0e,selectTextblockStart:()=>Z0e,setContent:()=>ebe,setMark:()=>xbe,setMeta:()=>wbe,setNode:()=>Sbe,setNodeSelection:()=>_be,setTextDirection:()=>Ebe,setTextSelection:()=>Nbe,sinkListItem:()=>Cbe,splitBlock:()=>kbe,splitListItem:()=>Tbe,toggleList:()=>Obe,toggleMark:()=>jbe,toggleNode:()=>Pbe,toggleWrap:()=>Ibe,undoInputRule:()=>Rbe,unsetAllMarks:()=>Mbe,unsetMark:()=>$be,unsetTextDirection:()=>Dbe,updateAttributes:()=>Abe,wrapIn:()=>Fbe,wrapInList:()=>qbe});var d0e=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),h0e=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),f0e=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,h=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=oh(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},p0e=t=>e=>t(e),m0e=()=>({state:t,dispatch:e})=>Cre(t,e),g0e=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new qe(n.doc.resolve(Math.max(o-1,0)))),!0},y0e=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function Er(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var v0e=t=>({tr:e,state:r,dispatch:n})=>{const i=Er(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},b0e=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},x0e=()=>({state:t,dispatch:e})=>nM(t,e),w0e=()=>({commands:t})=>t.keyboardShortcut("Enter"),S0e=()=>({state:t,dispatch:e})=>oye(t,e);function vM(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function rv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:vM(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function fne(t,e,r={}){return t.find(n=>n.type===e&&rv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function v4(t,e,r={}){return!!fne(t,e,r)}function bM(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!fne([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&v4([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&v4([...t.parent.child(l).marks],e,r);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Bo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var _0e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=Bo(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:c,to:d}=a;if(i){const h=bM(l,s,e);if(h&&h.from<=c&&h.to>=d){const f=qe.create(o,h.from,h.to);r.setSelection(f)}}return!0},E0e=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function pne(t){return t instanceof qe}function Dl(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function mne(t,e=null){if(!e)return null;const r=Qe.atStart(t),n=Qe.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?qe.create(t,Dl(0,i,s),Dl(t.content.size,i,s)):qe.create(t,Dl(e,i,s),Dl(e,i,s))}function b4(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function nv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function N0e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var C0e=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(nv()||b4())&&n.dom.focus(),N0e()&&!nv()&&!b4()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!pne(r.state.selection))return o(),!0;const a=mne(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},k0e=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),T0e=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),gne=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&gne(n)}return t};function xg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return gne(r)}function bp(t,e,r){if(t instanceof za||t instanceof X)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return X.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),bp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new Zte({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?Va.fromSchema(l).parseSlice(xg(t),r.parseOptions):Va.fromSchema(l).parse(xg(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Va.fromSchema(e);return r.slice?s.parseSlice(xg(t),r.parseOptions).content:s.parse(xg(t),r.parseOptions)}return bp("",e,r)}function O0e(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof qr||i instanceof zr))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(Qe.near(t.doc.resolve(o),r))}var j0e=t=>!("type"in t),P0e=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=b=>{s.emit("contentError",{editor:s,error:b,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(b){l(b)}try{a=bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(b){return l(b),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((j0e(a)?a:[a]).forEach(b=>{b.check(),f=f?b.isText&&b.marks.length===0:!1,p=p?b.isBlock:!1}),d===h&&p){const{parent:b}=n.doc.resolve(d);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(b=>b.text||"").join("");else if(e instanceof X){let b="";e.forEach(y=>{y.text&&(b+=y.text)}),g=b}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const b=n.doc.resolve(d),y=b.node(),v=b.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;v&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&O0e(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},I0e=()=>({state:t,dispatch:e})=>nye(t,e),R0e=()=>({state:t,dispatch:e})=>iye(t,e),M0e=()=>({state:t,dispatch:e})=>bre(t,e),$0e=()=>({state:t,dispatch:e})=>_re(t,e),D0e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=C0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},A0e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=C0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},F0e=()=>({state:t,dispatch:e})=>tye(t,e),q0e=()=>({state:t,dispatch:e})=>rye(t,e);function yne(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function L0e(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))nv()||yne()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var B0e=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=L0e(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,a))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function nl(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?Er(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>rv(h.node.attrs,r,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}var z0e=(t,e={})=>({state:r,dispatch:n})=>{const i=Er(t,r.schema);return nl(r,i,e)?sye(r,n):!1},V0e=()=>({state:t,dispatch:e})=>kre(t,e),U0e=t=>({state:e,dispatch:r})=>{const n=Er(t,e.schema);return yye(n)(e,r)},H0e=()=>({state:t,dispatch:e})=>Nre(t,e);function M0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function x4(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var W0e=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=M0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Er(t,n.schema)),a==="mark"&&(o=Bo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,x4(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(x4(f.attrs,e))))})})}),l},K0e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),G0e=()=>({tr:t,dispatch:e})=>{if(e){const r=new mi(t.doc);t.setSelection(r)}return!0},Y0e=()=>({state:t,dispatch:e})=>wre(t,e),Q0e=()=>({state:t,dispatch:e})=>Ere(t,e),X0e=()=>({state:t,dispatch:e})=>cye(t,e),J0e=()=>({state:t,dispatch:e})=>hye(t,e),Z0e=()=>({state:t,dispatch:e})=>dye(t,e);function eI(t,e,r={},n={}){return bp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var ebe=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const c=eI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function vne(t,e){const r=Bo(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function bne(t,e){const r=new mre(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function tbe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function rbe(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function nbe(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function $0(t){return e=>nbe(e.$from,t)}function Te(t,e,r){return t.config[e]===void 0&&t.parent?Te(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Te(t.parent,e,r):null}):t.config[e]}function xM(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Te(e,"addExtensions",r);return n?[e,...xM(n())]:e}).flat(10)}function wM(t,e){const r=Vc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function xne(t){return typeof t=="function"}function bt(t,e=void 0,...r){return xne(t)?e?t.bind(e)(...r):t(...r):t}function ibe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ld(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function wne(t){const e=[],{nodeExtensions:r,markExtensions:n}=Ld(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Te(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Te(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function Nr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],c=a.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),n[i]=Array.from(c.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function xp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Nr(r,n),{})}function sbe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function w4(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):sbe(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function S4(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&ibe(r)?!1:r!=null))}function _4(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function obe(t,e){var r;const n=wne(t),{nodeExtensions:i,markExtensions:s}=Ld(t),o=(r=i.find(c=>Te(c,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(c=>{const d=n.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,v)=>{const w=Te(v,"extendNodeSchema",h);return{...y,...w?w(c):{}}},{}),p=S4({...f,content:bt(Te(c,"content",h)),marks:bt(Te(c,"marks",h)),group:bt(Te(c,"group",h)),inline:bt(Te(c,"inline",h)),atom:bt(Te(c,"atom",h)),selectable:bt(Te(c,"selectable",h)),draggable:bt(Te(c,"draggable",h)),code:bt(Te(c,"code",h)),whitespace:bt(Te(c,"whitespace",h)),linebreakReplacement:bt(Te(c,"linebreakReplacement",h)),defining:bt(Te(c,"defining",h)),isolating:bt(Te(c,"isolating",h)),attrs:Object.fromEntries(d.map(_4))}),m=bt(Te(c,"parseHTML",h));m&&(p.parseDOM=m.map(y=>w4(y,d)));const g=Te(c,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:xp(y,d)}));const b=Te(c,"renderText",h);return b&&(p.toText=b),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const d=n.filter(b=>b.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((b,y)=>{const v=Te(y,"extendMarkSchema",h);return{...b,...v?v(c):{}}},{}),p=S4({...f,inclusive:bt(Te(c,"inclusive",h)),excludes:bt(Te(c,"excludes",h)),group:bt(Te(c,"group",h)),spanning:bt(Te(c,"spanning",h)),code:bt(Te(c,"code",h)),attrs:Object.fromEntries(d.map(_4))}),m=bt(Te(c,"parseHTML",h));m&&(p.parseDOM=m.map(b=>w4(b,d)));const g=Te(c,"renderHTML",h);return g&&(p.toDOM=b=>g({mark:b,HTMLAttributes:xp(b,d)})),[c.name,p]}));return new Zte({topNode:o,nodes:a,marks:l})}function abe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function iv(t){return t.sort((r,n)=>{const i=Te(r,"priority")||100,s=Te(n,"priority")||100;return i>s?-1:i<s?1:0})}function Sne(t){const e=iv(xM(t)),r=abe(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function _ne(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,c,d,h)=>{var f;l.isBlock&&c>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:c,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,c)-c,i-c))}),a}function lbe(t,e){const r={from:0,to:t.content.size};return _ne(t,r,e)}function Ene(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function cbe(t,e){const r=Er(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function Nne(t,e){const r=M0(typeof e=="string"?e:e.name,t.schema);return r==="node"?cbe(t,e):r==="mark"?vne(t,e):{}}function ube(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function dbe(t){const e=ube(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function Cne(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(c,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:c,to:d}})})}),dbe(n)}function SM(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=bM(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var hbe=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function wg(t,e){return e.nodes[t]||e.marks[t]||null}function iy(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var fbe=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function tI(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?Bo(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>rv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,b)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,b),v=Math.min(m,b+g.nodeSize),w=v-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:v})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>rv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function pbe(t,e,r={}){if(!e)return nl(t,null,r)||tI(t,null,r);const n=M0(e,t.schema);return n==="node"?nl(t,e,r):n==="mark"?tI(t,e,r):!1}var mbe=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=$0(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},gbe=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function E4(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function N4(t,e){const{nodeExtensions:r}=Ld(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=bt(Te(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function D0(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(D0(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function kne(t){return t instanceof Re}var Tne=class One{constructor(e){this.position=e}static fromJSON(e){return new One(e.position)}toJSON(){return{position:this.position}}};function ybe(t,e){const r=e.mapping.mapResult(t.position);return{position:new Tne(r.pos),mapResult:r}}function vbe(t){return new Tne(t)}function bbe(t,e,r){var n;const{selection:i}=e;let s=null;if(pne(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(c=>c.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(c)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));c=p&&m}return!c}),c})}var xbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=Bo(t,n.schema);if(i)if(o){const c=vne(n,l);r.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return bbe(n,r,l)},wbe=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),Sbe=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=Er(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>FF(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>FF(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},_be=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Dl(t,0,n.content.size),s=Re.create(n,i);e.setSelection(s)}return!0},Ebe=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},Nbe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=qe.atStart(n).from,a=qe.atEnd(n).to,l=Dl(i,o,a),c=Dl(s,o,a),d=qe.create(n,l,c);e.setSelection(d)}return!0},Cbe=t=>({state:e,dispatch:r})=>{const n=Er(t,e.schema);return xye(n)(e,r)};function C4(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var kbe=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=iy(c,a.node().type.name,a.node().attrs);if(s instanceof Re&&s.node.isBlock)return!a.parentOffset||!bo(o,a.pos)?!1:(n&&(t&&C4(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:tbe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=bo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&bo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof qe&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&C4(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},Tbe=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=Er(t,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=X.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-v;E>=l.depth-3;E-=1)y=X.from(l.node(E).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...iy(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(X.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(v-1));r.replace(_,l.after(-w),new ge(y,4-v,0));let N=-1;r.doc.nodesBetween(_,r.doc.content.size,(E,k)=>{if(N>-1)return!1;E.isTextblock&&E.content.size===0&&(N=k+1)}),N>-1&&r.setSelection(qe.near(r.doc.resolve(N))),r.scrollIntoView()}return!0}const p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...iy(f,h.type.name,h.attrs),...e},g={...iy(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,c.pos);const b=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!bo(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:v}=n,{splittableMarks:w}=s.extensionManager,x=v||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,b).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},_1=(t,e)=>{const r=$0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&ul(t.doc,r.pos)&&t.join(r.pos),!0},E1=(t,e)=>{const r=$0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&ul(t.doc,n)&&t.join(n),!0},Obe=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=Er(t,o.schema),m=Er(e,o.schema),{selection:g,storedMarks:b}=o,{$from:y,$to:v}=g,w=y.blockRange(v),x=b||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=$0(_=>N4(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if(N4(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>_1(s,p)).command(()=>E1(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:c.clearNodes()).wrapInList(p,n).command(()=>_1(s,p)).command(()=>E1(s,p)).run():l().command(()=>{const _=d().wrapInList(p,n),N=x.filter(E=>f.includes(E.type.name));return s.ensureMarks(N),_?!0:c.clearNodes()}).wrapInList(p,n).command(()=>_1(s,p)).command(()=>E1(s,p)).run()},jbe=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=Bo(t,n.schema);return tI(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Pbe=(t,e,r={})=>({state:n,commands:i})=>{const s=Er(t,n.schema),o=Er(e,n.schema),a=nl(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},Ibe=(t,e={})=>({state:r,commands:n})=>{const i=Er(t,r.schema);return nl(r,i,e)?n.lift(i):n.wrapIn(i,e)},Rbe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Mbe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},$be=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=Bo(t,n.schema),{$from:c,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=c.marks().find(b=>b.type===l))==null?void 0:s.attrs,g=bM(c,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},Dbe=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},Abe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=M0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Er(t,n.schema)),a==="mark"&&(o=Bo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(b,y)=>{s&&s===b.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+b.nodeSize,h),f=y,p=b)}):n.doc.nodesBetween(d,h,(b,y)=>{y<d&&s&&s===b.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+b.nodeSize,h),f=y,p=b),y>=d&&y<=h&&(s&&s===b.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...b.attrs,...e})),o&&b.marks.length&&b.marks.forEach(v=>{if(o===v.type&&(l=!0,i)){const w=Math.max(y,d),x=Math.min(y+b.nodeSize,h);r.addMark(w,x,o.create({...v.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(b=>{o===b.type&&i&&r.addMark(m,g,o.create({...b.attrs,...e}))}))}),l},Fbe=(t,e={})=>({state:r,dispatch:n})=>{const i=Er(t,r.schema);return fye(i,e)(r,n)},qbe=(t,e={})=>({state:r,dispatch:n})=>{const i=Er(t,r.schema);return pye(i,e)(r,n)},Lbe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},A0=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},Bbe=(t,e)=>{if(vM(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function Sg(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=fbe(c)+s;return o.forEach(f=>{if(d)return;const p=Bbe(h,f.find);if(!p)return;const m=l.state.tr,g=I0({state:l.state,transaction:m}),b={from:n-(p[0].length-s.length),to:i},{commands:y,chain:v,can:w}=new R0({editor:r,state:g});f.handler({state:g,range:b,match:p,commands:y,chain:v,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function zbe(t){const{editor:e,rules:r}=t,n=new Xt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=wM(X.from(d),o.schema);const{from:h}=l,f=h+d.length;Sg({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Sg({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Sg({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Sg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function Vbe(t){return Object.prototype.toString.call(t).slice(8,-1)}function _g(t){return Vbe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function jne(t,e){const r={...t};return _g(t)&&_g(e)&&Object.keys(e).forEach(n=>{_g(e[n])&&_g(t[n])?r[n]=jne(t[n],e[n]):r[n]=e[n]}),r}var _M=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...bt(Te(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...bt(Te(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>jne(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Uc=class Pne extends _M{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new Pne(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Ube(t){return typeof t=="number"}var Hbe=class{constructor(t){this.find=t.find,this.handler=t.handler}},Wbe=(t,e,r)=>{if(vM(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Kbe(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new R0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,b,y,v,w;if((b=(g=p.type)==null?void 0:g.spec)!=null&&b.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(v=(y=p.content)==null?void 0:y.size)!=null?v:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const N=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");Wbe(N,s.find,o).forEach(k=>{if(k.index===void 0)return;const C=S+k.index+1,O=C+k[0].length,j={from:r.tr.mapping.map(C),to:r.tr.mapping.map(O)},P=s.handler({state:r,range:j,match:k,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});h.push(P)})}),h.every(p=>p!==null)}var Eg=null,Gbe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function Ybe(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,b=I0({state:d,transaction:g});if(!(!Kbe({editor:e,state:b,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Xt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(Eg=e)},p=()=>{Eg&&(Eg=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=Eg;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,b=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),v=!!y;if(!g&&!b&&!v)return;if(v){let{text:S}=y;typeof S=="string"?S=S:S=wM(X.from(S),p.schema);const{from:_}=y,N=_+S.length,E=Gbe(S);return l({rule:d,state:p,from:_,to:{b:N},pasteEvt:E})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!Ube(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var F0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Sne(t),this.schema=obe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:wg(e.name,this.schema)},n=Te(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return iv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:wg(n.name,this.schema)},s=[],o=Te(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&Te(n,"exitable",i)&&(a.ArrowRight=()=>Uc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=c0e(a);s.push(l);const c=Te(n,"addInputRules",i);if(E4(n,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=zbe({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=Te(n,"addPasteRules",i);if(E4(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=Ybe({editor:t,rules:f});s.push(...p)}}const h=Te(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return wne(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ld(this.extensions);return Object.fromEntries(e.filter(r=>!!Te(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Er(r.name,this.schema)},s=Te(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,d,h,f)=>{const p=xp(l,n);return o({node:l,view:c,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return iv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:wg(i.name,this.schema)},o=Te(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ld(this.extensions);return Object.fromEntries(e.filter(r=>!!Te(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Bo(r.name,this.schema)},s=Te(r,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const d=xp(a,n);return s()({mark:a,view:l,inline:c,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{c1e(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:wg(e.name,this.schema)};e.type==="mark"&&((r=bt(Te(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=Te(e,"onBeforeCreate",n),s=Te(e,"onCreate",n),o=Te(e,"onUpdate",n),a=Te(e,"onSelectionUpdate",n),l=Te(e,"onTransaction",n),c=Te(e,"onFocus",n),d=Te(e,"onBlur",n),h=Te(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};F0.resolve=Sne;F0.sort=iv;F0.flatten=xM;var Qbe={};yM(Qbe,{ClipboardTextSerializer:()=>Rne,Commands:()=>Mne,Delete:()=>$ne,Drop:()=>Dne,Editable:()=>Ane,FocusEvents:()=>qne,Keymap:()=>Lne,Paste:()=>Bne,Tabindex:()=>zne,TextDirection:()=>Vne,focusEventsPluginKey:()=>Fne});var mr=class Ine extends _M{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new Ine(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},Rne=mr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Xt({key:new Mr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=Ene(r);return _ne(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Mne=mr.create({name:"commands",addCommands(){return{...hne}}}),$ne=mr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=bne(t.before,[t,...e]);Cne(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const b=g+m.nodeSize-2,y=p.oldRange.from<=g&&b<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:b,newFrom:d.mapping.map(g),newTo:d.mapping.map(b),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,b;if(p instanceof us){const y=f.slice(m).map(p.from,-1),v=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(v),S=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(N=>N.eq(p.mark)),_=(b=d.doc.nodeAt(v))==null?void 0:b.marks.some(N=>N.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:v},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),Dne=mr.create({name:"drop",addProseMirrorPlugins(){return[new Xt({key:new Mr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),Ane=mr.create({name:"editable",addProseMirrorPlugins(){return[new Xt({key:new Mr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Fne=new Mr("focusEvents"),qne=mr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Xt({key:Fne,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),Lne=mr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,b=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?b===h.pos:Qe.atStart(c).from===f;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return nv()||yne()?s:i},addProseMirrorPlugins(){return[new Xt({key:new Mr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=Qe.atStart(e.doc).from,c=Qe.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!D0(r.doc))return;const f=r.tr,p=I0({state:r,transaction:f}),{commands:m}=new R0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),Bne=mr.create({name:"paste",addProseMirrorPlugins(){return[new Xt({key:new Mr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),zne=mr.create({name:"tabindex",addProseMirrorPlugins(){return[new Xt({key:new Mr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Vne=mr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ld(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Xt({key:new Mr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),Xbe=class Cu{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Cu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Cu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Cu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Cu(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Cu(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},Jbe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Zbe(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var e1e=class extends Lbe{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:ybe,createMappablePosition:vbe},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=mne(e,this.options.autofocus);this.editorState=Bu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Zbe(Jbe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=xne(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[Ane,Rne.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Mne,qne,Lne,zne,Dne,Bne,$ne,Vne.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new F0(n,this)}createCommandManager(){this.commandManager=new R0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=eI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=eI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new une(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return Nne(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return pbe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return wM(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return lbe(this.state.doc,{blockSeparator:e,textSerializers:{...Ene(this.schema),...r}})}get isEmpty(){return D0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Xbe(e,this)}get $doc(){return this.$pos(0)}};function Bd(t){return new A0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=bt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),c=r.from+a.indexOf(o),d=c+o.length;if(SM(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;d<r.to&&s.delete(d,r.to),c>r.from&&s.delete(r.from+l,c);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function t1e(t){return new A0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=bt(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=o+c;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function rI(t){return new A0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=bt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function zd(t){return new A0({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=bt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),c=l&&tM(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(b=>p.includes(b.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&ul(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function r1e(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Re){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var n1e={};yM(n1e,{createAtomBlockMarkdownSpec:()=>i1e,createBlockMarkdownSpec:()=>s1e,createInlineMarkdownSpec:()=>l1e,parseAttributes:()=>EM,parseIndentedBlocks:()=>nI,renderNestedMarkdownContent:()=>CM,serializeAttributes:()=>NM});function EM(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));e.class=c.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,c,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[c]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function NM(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function i1e(t){const{nodeName:e,name:r,parseAttributes:n=EM,serializeAttributes:i=NM,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,c=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",b=n(g);if(!o.find(v=>!(v in b)))return{type:e,raw:m[0],attributes:b}}},renderMarkdown:d=>{const h=c(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function s1e(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=EM,serializeAttributes:s=NM,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=h.match(g);if(!b)return;const[y,v=""]=b,w=i(v);let x=1;const S=y.length;let _="";const N=/^:::([\w-]*)(\s.*)?/gm,E=h.slice(S);for(N.lastIndex=0;;){const k=N.exec(E);if(k===null)break;const C=k.index,O=k[1];if(!((m=k[2])!=null&&m.endsWith(":::"))){if(O)x+=1;else if(x-=1,x===0){const j=E.slice(0,C);_=j.trim();const P=h.slice(0,S+C+k[0].length);let A=[];if(_)if(a==="block")for(A=p.blockTokens(j),A.forEach(q=>{q.text&&(!q.tokens||q.tokens.length===0)&&(q.tokens=p.inlineTokens(q.text))});A.length>0;){const q=A[A.length-1];if(q.type==="paragraph"&&(!q.text||q.text.trim()===""))A.pop();else break}else A=p.inlineTokens(_);return{type:e,raw:P,attributes:w,content:_,tokens:A}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",b=f.renderChildren(h.content||[],`

`);return`:::${c}${g}

${b}

:::`}}}function o1e(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function a1e(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function l1e(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=o1e,serializeAttributes:s=a1e,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,b=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(b!==void 0&&y===b)return;p[g]=y}}),p},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),b=f.match(g);if(!b)return;let y="",v="";if(a){const[,x]=b;v=x}else{const[,x,S]=b;v=x,y=S||""}const w=i(v.trim());return{type:e,raw:b[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(f.attrs||{}),g=s(m),b=g?` ${g}`:"";return a?`[${c}${b}]`:`[${c}${b}]${p}[/${c}]`}}}function nI(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let c="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:b}=m;c=`${c}${f}
`;const y=[b];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const N=a.slice(d+1).findIndex(C=>C.trim()!=="");if(N===-1)break;if((((i=(n=a[d+1+N].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),c=`${c}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),c=`${c}${S}
`,d+=1;else break}let v;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?v=e.customNestedParser(S):v=r.blockTokens(S))}const x=e.createToken(m,v);l.push(x)}if(l.length!==0)return{items:l,raw:c}}function CM(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const d=e.renderChildren([c]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function c1e(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(c,d,t.type),s.addMark(c,d,p)}}),s.docChanged&&e.view.dispatch(s)}var bi=class Une extends _M{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new Une(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Oc(t){return new Hbe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=bt(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let c=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(SM(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),c=r.from+d+a.length,o.addMark(r.from+d,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:u1e,getOwnPropertySymbols:d1e}=Object,{hasOwnProperty:h1e}=Object.prototype;function N1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function Ng(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function f1e(t){return t!=null?t[Symbol.toStringTag]:void 0}function k4(t){return u1e(t).concat(d1e(t))}const p1e=Object.hasOwn||((t,e)=>h1e.call(t,e));function Hc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const m1e="__v",g1e="__o",y1e="_owner",{getOwnPropertyDescriptor:T4,keys:O4}=Object;function v1e(t,e){return t.byteLength===e.byteLength&&sv(new Uint8Array(t),new Uint8Array(e))}function b1e(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function x1e(t,e){return t.byteLength===e.byteLength&&sv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function w1e(t,e){return Hc(t.getTime(),e.getTime())}function S1e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function _1e(t,e){return t===e}function j4(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const c=e.entries();let d=!1,h=0;for(;(a=c.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const E1e=Hc;function N1e(t,e,r){const n=O4(t);let i=n.length;if(O4(e).length!==i)return!1;for(;i-- >0;)if(!Hne(t,e,r,n[i]))return!1;return!0}function Qh(t,e,r){const n=k4(t);let i=n.length;if(k4(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!Hne(t,e,r,s)||(o=T4(t,s),a=T4(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function C1e(t,e){return Hc(t.valueOf(),e.valueOf())}function k1e(t,e){return t.source===e.source&&t.flags===e.flags}function P4(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let c=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function sv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function T1e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Hne(t,e,r,n){return(n===y1e||n===g1e||n===m1e)&&(t.$$typeof||e.$$typeof)?!0:p1e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const O1e="[object ArrayBuffer]",j1e="[object Arguments]",P1e="[object Boolean]",I1e="[object DataView]",R1e="[object Date]",M1e="[object Error]",$1e="[object Map]",D1e="[object Number]",A1e="[object Object]",F1e="[object RegExp]",q1e="[object Set]",L1e="[object String]",B1e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},z1e="[object URL]",V1e=Object.prototype.toString;function U1e({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(b,y,v){if(b===y)return!0;if(b==null||y==null)return!1;const w=typeof b;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(b,y,v):w==="function"?s(b,y,v):!1;const x=b.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(b,y,v);if(Array.isArray(b))return e(b,y,v);if(x===Date)return n(b,y,v);if(x===RegExp)return d(b,y,v);if(x===Map)return o(b,y,v);if(x===Set)return h(b,y,v);const S=V1e.call(b);if(S===R1e)return n(b,y,v);if(S===F1e)return d(b,y,v);if(S===$1e)return o(b,y,v);if(S===q1e)return h(b,y,v);if(S===A1e)return typeof b.then!="function"&&typeof y.then!="function"&&l(b,y,v);if(S===z1e)return p(b,y,v);if(S===M1e)return i(b,y,v);if(S===j1e)return l(b,y,v);if(B1e[S])return f(b,y,v);if(S===O1e)return t(b,y,v);if(S===I1e)return r(b,y,v);if(S===P1e||S===D1e||S===L1e)return c(b,y,v);if(m){let _=m[S];if(!_){const N=f1e(b);N&&(_=m[N])}if(_)return _(b,y,v)}return!1}}function H1e({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:v1e,areArraysEqual:r?Qh:b1e,areDataViewsEqual:x1e,areDatesEqual:w1e,areErrorsEqual:S1e,areFunctionsEqual:_1e,areMapsEqual:r?N1(j4,Qh):j4,areNumbersEqual:E1e,areObjectsEqual:r?Qh:N1e,arePrimitiveWrappersEqual:C1e,areRegExpsEqual:k1e,areSetsEqual:r?N1(P4,Qh):P4,areTypedArraysEqual:r?N1(sv,Qh):sv,areUrlsEqual:T1e,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=Ng(n.areArraysEqual),s=Ng(n.areMapsEqual),o=Ng(n.areObjectsEqual),a=Ng(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function W1e(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function K1e({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:c,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const G1e=hl();hl({strict:!0});hl({circular:!0});hl({circular:!0,strict:!0});hl({createInternalComparator:()=>Hc});hl({strict:!0,createInternalComparator:()=>Hc});hl({circular:!0,createInternalComparator:()=>Hc});hl({circular:!0,createInternalComparator:()=>Hc,strict:!0});function hl(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=H1e(t),o=U1e(s),a=r?r(o):W1e(o);return K1e({circular:e,comparator:o,createState:n,equals:a,strict:i})}var Wne={exports:{}},Kne={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0=T,Y1e=JR;function Q1e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var X1e=typeof Object.is=="function"?Object.is:Q1e,J1e=Y1e.useSyncExternalStore,Z1e=q0.useRef,exe=q0.useEffect,txe=q0.useMemo,rxe=q0.useDebugValue;Kne.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=Z1e(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=txe(function(){function l(p){if(!c){if(c=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,X1e(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=J1e(t,s[0],s[1]);return exe(function(){o.hasValue=!0,o.value=a},[a]),rxe(a),a};Wne.exports=Kne;var nxe=Wne.exports,ixe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},sxe=({contentComponent:t})=>{const e=JR.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(e)})};function oxe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:lue.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var axe=class extends Ae.Component{constructor(t){var e;super(t),this.editorContentRef=Ae.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=oxe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:ixe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&u.jsx(sxe,{contentComponent:t.contentComponent})]})}},lxe=T.forwardRef((t,e)=>{const r=Ae.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ae.createElement(axe,{key:r,innerRef:e,...t})}),cxe=Ae.memo(lxe),uxe=typeof window<"u"?T.useLayoutEffect:T.useEffect,dxe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function hxe(t){var e;const[r]=T.useState(()=>new dxe(t.editor)),n=nxe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:G1e);return uxe(()=>r.watch(t.editor),[t.editor,r]),T.useDebugValue(n),n}var fxe=!1,iI=typeof window>"u",pxe=iI||!!(typeof window<"u"&&window.next),mxe=class Gne{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?iI||pxe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new e1e(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Gne.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function gxe(t={},e=[]){const r=T.useRef(t);r.current=t;const[n]=T.useState(()=>new mxe(r)),i=JR.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return T.useDebugValue(i),T.useEffect(n.onRender(e)),hxe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var yxe=T.createContext({editor:null});yxe.Consumer;var vxe=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),bxe=()=>T.useContext(vxe);Ae.forwardRef((t,e)=>{const{onDragStart:r}=bxe(),n=t.as||"div";return u.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});Ae.createContext({markViewContentRef:()=>{}});var ov=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},xxe=/^\s*>\s$/,wxe=bi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return ov("blockquote",{...Nr(this.options.HTMLAttributes,t),children:ov("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[zd({find:xxe,type:this.type})]}}),Sxe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_xe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Exe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Nxe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Cxe=Uc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return ov("strong",{...Nr(this.options.HTMLAttributes,t),children:ov("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Bd({find:Sxe,type:this.type}),Bd({find:Exe,type:this.type})]},addPasteRules(){return[Oc({find:_xe,type:this.type}),Oc({find:Nxe,type:this.type})]}}),kxe=/(^|[^`])`([^`]+)`(?!`)$/,Txe=/(^|[^`])`([^`]+)`(?!`)/g,Oxe=Uc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Bd({find:kxe,type:this.type})]},addPasteRules(){return[Oc({find:Txe,type:this.type})]}}),C1=4,jxe=/^```([a-z]+)?[\s\n]$/,Pxe=/^~~~([a-z]+)?[\s\n]$/,Ixe=bi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:C1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Nr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:C1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:d}=i,p=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:C1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const b=c-d;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=b){m=_;break}g+=p[_].length+1}const v=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(v.length,r);if(w===0)return!0;let x=d;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),c-x<=w&&a.setSelection(qe.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,f=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",b=Math.min(g.length,r);return p.slice(b)}).join(`
`);return a.replaceWith(l,c,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Qe.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[rI({find:jxe,type:this.type,getAttributes:t=>({language:t[1]})}),rI({find:Pxe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Xt({key:new Mr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(qe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Rxe=bi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Mxe=bi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Nr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),$xe=bi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Nr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>rI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),Dxe=bi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Nr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!r1e(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return kne(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(qe.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Re.create(o.doc,l.pos)):o.setSelection(qe.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(c,h),o.setSelection(qe.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[t1e({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Axe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Fxe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,qxe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Lxe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Bxe=Uc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Nr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Bd({find:Axe,type:this.type}),Bd({find:qxe,type:this.type})]},addPasteRules(){return[Oc({find:Fxe,type:this.type}),Oc({find:Lxe,type:this.type})]}});const zxe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Vxe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",sI="numeric",oI="ascii",aI="alpha",Of="asciinumeric",hf="alphanumeric",lI="domain",Yne="emoji",Uxe="scheme",Hxe="slashscheme",k1="whitespace";function Wxe(t,e){return t in e||(e[t]=[]),e[t]}function Al(t,e,r){e[sI]&&(e[Of]=!0,e[hf]=!0),e[oI]&&(e[Of]=!0,e[aI]=!0),e[Of]&&(e[hf]=!0),e[aI]&&(e[hf]=!0),e[hf]&&(e[lI]=!0),e[Yne]&&(e[lI]=!0);for(const n in e){const i=Wxe(n,r);i.indexOf(t)<0&&i.push(t)}}function Kxe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Hn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Hn.groups={};Hn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Hn.groups;let i;return e&&e.j?i=e:(i=new Hn(e),r&&n&&Al(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Hn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Hn,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Hn,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(Kxe(o.t,n),r);Al(s,l,n)}else r&&Al(s,r,n);o.t=s}return i.j[t]=o,o}};const Ye=(t,e,r,n,i)=>t.ta(e,r,n,i),er=(t,e,r,n,i)=>t.tr(e,r,n,i),I4=(t,e,r,n,i)=>t.ts(e,r,n,i),ee=(t,e,r,n,i)=>t.tt(e,r,n,i),ro="WORD",cI="UWORD",Qne="ASCIINUMERICAL",Xne="ALPHANUMERICAL",wp="LOCALHOST",uI="TLD",dI="UTLD",sy="SCHEME",ku="SLASH_SCHEME",kM="NUM",hI="WS",TM="NL",jf="OPENBRACE",Pf="CLOSEBRACE",av="OPENBRACKET",lv="CLOSEBRACKET",cv="OPENPAREN",uv="CLOSEPAREN",dv="OPENANGLEBRACKET",hv="CLOSEANGLEBRACKET",fv="FULLWIDTHLEFTPAREN",pv="FULLWIDTHRIGHTPAREN",mv="LEFTCORNERBRACKET",gv="RIGHTCORNERBRACKET",yv="LEFTWHITECORNERBRACKET",vv="RIGHTWHITECORNERBRACKET",bv="FULLWIDTHLESSTHAN",xv="FULLWIDTHGREATERTHAN",wv="AMPERSAND",Sv="APOSTROPHE",_v="ASTERISK",oa="AT",Ev="BACKSLASH",Nv="BACKTICK",Cv="CARET",fa="COLON",OM="COMMA",kv="DOLLAR",_s="DOT",Tv="EQUALS",jM="EXCLAMATION",Ci="HYPHEN",If="PERCENT",Ov="PIPE",jv="PLUS",Pv="POUND",Rf="QUERY",PM="QUOTE",Jne="FULLWIDTHMIDDLEDOT",IM="SEMI",Es="SLASH",Mf="TILDE",Iv="UNDERSCORE",Zne="EMOJI",Rv="SYM";var eie=Object.freeze({__proto__:null,ALPHANUMERICAL:Xne,AMPERSAND:wv,APOSTROPHE:Sv,ASCIINUMERICAL:Qne,ASTERISK:_v,AT:oa,BACKSLASH:Ev,BACKTICK:Nv,CARET:Cv,CLOSEANGLEBRACKET:hv,CLOSEBRACE:Pf,CLOSEBRACKET:lv,CLOSEPAREN:uv,COLON:fa,COMMA:OM,DOLLAR:kv,DOT:_s,EMOJI:Zne,EQUALS:Tv,EXCLAMATION:jM,FULLWIDTHGREATERTHAN:xv,FULLWIDTHLEFTPAREN:fv,FULLWIDTHLESSTHAN:bv,FULLWIDTHMIDDLEDOT:Jne,FULLWIDTHRIGHTPAREN:pv,HYPHEN:Ci,LEFTCORNERBRACKET:mv,LEFTWHITECORNERBRACKET:yv,LOCALHOST:wp,NL:TM,NUM:kM,OPENANGLEBRACKET:dv,OPENBRACE:jf,OPENBRACKET:av,OPENPAREN:cv,PERCENT:If,PIPE:Ov,PLUS:jv,POUND:Pv,QUERY:Rf,QUOTE:PM,RIGHTCORNERBRACKET:gv,RIGHTWHITECORNERBRACKET:vv,SCHEME:sy,SEMI:IM,SLASH:Es,SLASH_SCHEME:ku,SYM:Rv,TILDE:Mf,TLD:uI,UNDERSCORE:Iv,UTLD:dI,UWORD:cI,WORD:ro,WS:hI});const Js=/[a-z]/,Xh=new RegExp("\\p{L}","u"),T1=new RegExp("\\p{Emoji}","u"),Zs=/\d/,O1=/\s/,R4="\r",j1=`
`,Gxe="",Yxe="",P1="";let Cg=null,kg=null;function Qxe(t=[]){const e={};Hn.groups=e;const r=new Hn;Cg==null&&(Cg=M4(zxe)),kg==null&&(kg=M4(Vxe)),ee(r,"'",Sv),ee(r,"{",jf),ee(r,"}",Pf),ee(r,"[",av),ee(r,"]",lv),ee(r,"(",cv),ee(r,")",uv),ee(r,"<",dv),ee(r,">",hv),ee(r,"",fv),ee(r,"",pv),ee(r,"",mv),ee(r,"",gv),ee(r,"",yv),ee(r,"",vv),ee(r,"",bv),ee(r,"",xv),ee(r,"&",wv),ee(r,"*",_v),ee(r,"@",oa),ee(r,"`",Nv),ee(r,"^",Cv),ee(r,":",fa),ee(r,",",OM),ee(r,"$",kv),ee(r,".",_s),ee(r,"=",Tv),ee(r,"!",jM),ee(r,"-",Ci),ee(r,"%",If),ee(r,"|",Ov),ee(r,"+",jv),ee(r,"#",Pv),ee(r,"?",Rf),ee(r,'"',PM),ee(r,"/",Es),ee(r,";",IM),ee(r,"~",Mf),ee(r,"_",Iv),ee(r,"\\",Ev),ee(r,"",Jne);const n=er(r,Zs,kM,{[sI]:!0});er(n,Zs,n);const i=er(n,Js,Qne,{[Of]:!0}),s=er(n,Xh,Xne,{[hf]:!0}),o=er(r,Js,ro,{[oI]:!0});er(o,Zs,i),er(o,Js,o),er(i,Zs,i),er(i,Js,i);const a=er(r,Xh,cI,{[aI]:!0});er(a,Js),er(a,Zs,s),er(a,Xh,a),er(s,Zs,s),er(s,Js),er(s,Xh,s);const l=ee(r,j1,TM,{[k1]:!0}),c=ee(r,R4,hI,{[k1]:!0}),d=er(r,O1,hI,{[k1]:!0});ee(r,P1,d),ee(c,j1,l),ee(c,P1,d),er(c,O1,d),ee(d,R4),ee(d,j1),er(d,O1,d),ee(d,P1,d);const h=er(r,T1,Zne,{[Yne]:!0});ee(h,"#"),er(h,T1,h),ee(h,Gxe,h);const f=ee(h,Yxe);ee(f,"#"),er(f,T1,h);const p=[[Js,o],[Zs,i]],m=[[Js,null],[Xh,a],[Zs,s]];for(let g=0;g<Cg.length;g++)Xo(r,Cg[g],uI,ro,p);for(let g=0;g<kg.length;g++)Xo(r,kg[g],dI,cI,m);Al(uI,{tld:!0,ascii:!0},e),Al(dI,{utld:!0,alpha:!0},e),Xo(r,"file",sy,ro,p),Xo(r,"mailto",sy,ro,p),Xo(r,"http",ku,ro,p),Xo(r,"https",ku,ro,p),Xo(r,"ftp",ku,ro,p),Xo(r,"ftps",ku,ro,p),Al(sy,{scheme:!0,ascii:!0},e),Al(ku,{slashscheme:!0,ascii:!0},e),t=t.sort((g,b)=>g[0]>b[0]?1:-1);for(let g=0;g<t.length;g++){const b=t[g][0],v=t[g][1]?{[Uxe]:!0}:{[Hxe]:!0};b.indexOf("-")>=0?v[lI]=!0:Js.test(b)?Zs.test(b)?v[Of]=!0:v[oI]=!0:v[sI]=!0,I4(r,b,b,v)}return I4(r,"localhost",wp,{ascii:!0}),r.jd=new Hn(Rv),{start:r,tokens:Object.assign({groups:e},eie)}}function tie(t,e){const r=Xxe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,c=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),c+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,c-=h,i.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function Xxe(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Xo(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Hn(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Hn(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function M4(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const Sp={defaultProtocol:"http",events:null,format:$4,formatHref:$4,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function RM(t,e=null){let r=Object.assign({},Sp);t&&(r=Object.assign(r,t instanceof RM?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}RM.prototype={o:Sp,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:Sp[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function $4(t){return t}function rie(t,e){this.t="token",this.v=t,this.tk=e}rie.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Sp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),c=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function L0(t,e){class r extends rie{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const D4=L0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),A4=L0("text"),Jxe=L0("nl"),Tg=L0("url",{isLink:!0,toHref(t=Sp.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==wp&&t[1].t===fa}}),Ni=t=>new Hn(t);function Zxe({groups:t}){const e=t.domain.concat([wv,_v,oa,Ev,Nv,Cv,kv,Tv,Ci,kM,If,Ov,jv,Pv,Es,Rv,Mf,Iv]),r=[Sv,fa,OM,_s,jM,If,Rf,PM,IM,dv,hv,jf,Pf,lv,av,cv,uv,fv,pv,mv,gv,yv,vv,bv,xv],n=[wv,Sv,_v,Ev,Nv,Cv,kv,Tv,Ci,jf,Pf,If,Ov,jv,Pv,Rf,Es,Rv,Mf,Iv],i=Ni(),s=ee(i,Mf);Ye(s,n,s),Ye(s,t.domain,s);const o=Ni(),a=Ni(),l=Ni();Ye(i,t.domain,o),Ye(i,t.scheme,a),Ye(i,t.slashscheme,l),Ye(o,n,s),Ye(o,t.domain,o);const c=ee(o,oa);ee(s,oa,c),ee(a,oa,c),ee(l,oa,c);const d=ee(s,_s);Ye(d,n,s),Ye(d,t.domain,s);const h=Ni();Ye(c,t.domain,h),Ye(h,t.domain,h);const f=ee(h,_s);Ye(f,t.domain,h);const p=Ni(D4);Ye(f,t.tld,p),Ye(f,t.utld,p),ee(c,wp,p);const m=ee(h,Ci);ee(m,Ci,m),Ye(m,t.domain,h),Ye(p,t.domain,h),ee(p,_s,f),ee(p,Ci,m);const g=ee(p,fa);Ye(g,t.numeric,D4);const b=ee(o,Ci),y=ee(o,_s);ee(b,Ci,b),Ye(b,t.domain,o),Ye(y,n,s),Ye(y,t.domain,o);const v=Ni(Tg);Ye(y,t.tld,v),Ye(y,t.utld,v),Ye(v,t.domain,o),Ye(v,n,s),ee(v,_s,y),ee(v,Ci,b),ee(v,oa,c);const w=ee(v,fa),x=Ni(Tg);Ye(w,t.numeric,x);const S=Ni(Tg),_=Ni();Ye(S,e,S),Ye(S,r,_),Ye(_,e,S),Ye(_,r,_),ee(v,Es,S),ee(x,Es,S);const N=ee(a,fa),E=ee(l,fa),k=ee(E,Es),C=ee(k,Es);Ye(a,t.domain,o),ee(a,_s,y),ee(a,Ci,b),Ye(l,t.domain,o),ee(l,_s,y),ee(l,Ci,b),Ye(N,t.domain,S),ee(N,Es,S),ee(N,Rf,S),Ye(C,t.domain,S),Ye(C,e,S),ee(C,Es,S);const O=[[jf,Pf],[av,lv],[cv,uv],[dv,hv],[fv,pv],[mv,gv],[yv,vv],[bv,xv]];for(let j=0;j<O.length;j++){const[P,A]=O[j],q=ee(S,P);ee(_,P,q),ee(q,A,S);const R=Ni(Tg);Ye(q,e,R);const L=Ni();Ye(q,r),Ye(R,e,R),Ye(R,r,L),Ye(L,e,R),Ye(L,r,L),ee(R,A,S),ee(L,A,S)}return ee(i,wp,v),ee(i,TM,Jxe),{start:i,tokens:eie}}function ewe(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,c=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(c=l||a.go(r[i].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(I1(A4,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(I1(p,e,m))}}return o.length>0&&s.push(I1(A4,e,o)),s}function I1(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const twe=typeof console<"u"&&console&&console.warn||(()=>{}),rwe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ft={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function nwe(){return Hn.groups={},Ft.scanner=null,Ft.parser=null,Ft.tokenQueue=[],Ft.pluginQueue=[],Ft.customSchemes=[],Ft.initialized=!1,Ft}function F4(t,e=!1){if(Ft.initialized&&twe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${rwe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ft.customSchemes.push([t,e])}function iwe(){Ft.scanner=Qxe(Ft.customSchemes);for(let t=0;t<Ft.tokenQueue.length;t++)Ft.tokenQueue[t][1]({scanner:Ft.scanner});Ft.parser=Zxe(Ft.scanner.tokens);for(let t=0;t<Ft.pluginQueue.length;t++)Ft.pluginQueue[t][1]({scanner:Ft.scanner,parser:Ft.parser});return Ft.initialized=!0,Ft}function MM(t){return Ft.initialized||iwe(),ewe(Ft.parser.start,t,tie(Ft.scanner.start,t))}MM.scan=tie;function nie(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new RM(r),i=MM(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var $M="[\0- -\u2029]",swe=new RegExp($M),owe=new RegExp(`${$M}$`),awe=new RegExp($M,"g");function lwe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function cwe(t){return new Xt({key:new Mr("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(c=>c.docChanged)&&!r.doc.eq(n.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=bne(r.doc,[...e]);if(Cne(a).forEach(({newRange:c})=>{const d=rbe(n.doc,c,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(c.from,c.to," "," ");if(!owe.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&f){const p=f.split(swe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const b=MM(m).map(y=>y.toObject(t.defaultProtocol));if(!lwe(b))return!1;b.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{SM(y.from,y.to,n.doc).some(v=>v.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function uwe(t){return new Xt({key:new Mr("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=Nne(e.state,t.type.name),c=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&c&&(window.open(c,d),o=!0)}return o}}})}function dwe(t){return new Xt({key:new Mr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=nie(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Sl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(awe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var iie=Uc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){F4(t);return}F4(t.scheme,t.optionalSlashes)})},onDestroy(){nwe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Sl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!Sl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Sl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Nr(this.options.HTMLAttributes,t),0]:["a",Nr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Sl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Sl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Oc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=nie(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Sl(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(cwe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!Sl(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(uwe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(dwe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),hwe=iie,fwe=Object.defineProperty,pwe=(t,e)=>{for(var r in e)fwe(t,r,{get:e[r],enumerable:!0})},mwe="listItem",q4="textStyle",L4=/^\s*([-+*])\s$/,sie=bi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(mwe,this.editor.getAttributes(q4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=zd({find:L4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=zd({find:L4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(q4),editor:this.editor})),[t]}}),oie=bi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>CM(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),gwe={};pwe(gwe,{findListItemPos:()=>im,getNextListDepth:()=>DM,handleBackspace:()=>fI,handleDelete:()=>pI,hasListBefore:()=>aie,hasListItemAfter:()=>ywe,hasListItemBefore:()=>lie,listItemHasSubList:()=>cie,nextListIsDeeper:()=>uie,nextListIsHigher:()=>die});var im=(t,e)=>{const{$from:r}=e.selection,n=Er(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},DM=(t,e)=>{const r=im(t,e);if(!r)return!1;const[,n]=hbe(e,t,r.$pos.pos+4);return n},aie=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},lie=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},cie=(t,e,r)=>{if(!r)return!1;const n=Er(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},fI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!nl(t.state,e)&&aie(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const d=c.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!nl(t.state,e)||!gbe(t.state))return!1;const n=im(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=cie(e,t.state,s);return lie(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},uie=(t,e)=>{const r=DM(t,e),n=im(t,e);return!n||!r?!1:r>n.depth},die=(t,e)=>{const r=DM(t,e),n=im(t,e);return!n||!r?!1:r<n.depth},pI=(t,e)=>{if(!nl(t.state,e)||!mbe(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:uie(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():die(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},ywe=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},hie=mr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&pI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&pI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&fI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&fI(t,r,n)&&(e=!0)}),e}}}}),B4=/^(\s*)(\d+)\.\s+(.*)$/,vwe=/^\s/;function bwe(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(B4);if(!s)break;const[,o,a,l]=s,c=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(B4))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(vwe))f.push(p),d+=`
${p.slice(c+2)}`,h+=1;else break}e.push({indent:c,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function fie(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);c.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=fie(f,p,r);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=h}else s+=1}return i}function xwe(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var wwe="listItem",z4="textStyle",V4=/^(\d+)\.\s$/,pie=bi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Nr(this.options.HTMLAttributes,r),0]:["ol",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?xwe(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=bwe(i);if(s.length===0)return;const a=fie(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wwe,this.editor.getAttributes(z4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=zd({find:V4,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=zd({find:V4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(z4)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),Swe=/^\s*(\[([( |x])?\])\s$/,_we=bi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Nr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return CM(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,c(h);const f=n.extensionManager.attributes,p=xp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(b=>{m.has(b)||(b in g?i.setAttribute(b,g[b]):i.removeAttribute(b))}),Object.entries(p).forEach(([b,y])=>{y==null?b in g?i.setAttribute(b,g[b]):i.removeAttribute(b):i.setAttribute(b,y)}),d=m,!0}}}},addInputRules(){return[zd({find:Swe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Ewe=bi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Nr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=nI(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=nI(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});mr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(sie.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(oie.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(hie.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(pie.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(_we.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Ewe.configure(this.options.taskList)),t}});var Nwe=bi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Nr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Cwe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,kwe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Twe=Uc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Bd({find:Cwe,type:this.type})]},addPasteRules(){return[Oc({find:kwe,type:this.type})]}}),Owe=bi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),jwe=Uc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Nr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Pwe(t={}){return new Xt({view(e){return new Iwe(e,t)}})}class Iwe{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;n={left:m.left,right:m.right,top:g-b,bottom:g+b}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;c=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-c)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=ure(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class lr extends Qe{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return lr.valid(n)?new lr(n):Qe.near(n)}content(){return ge.empty}eq(e){return e instanceof lr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new lr(e.resolve(r.pos))}getBookmark(){return new AM(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!Rwe(e)||!Mwe(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&lr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(lr.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(lr.valid(a))return a}return null}}}lr.prototype.visible=!1;lr.findFrom=lr.findGapCursorFrom;Qe.jsonID("gapcursor",lr);class AM{constructor(e){this.pos=e}map(e){return new AM(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return lr.valid(r)?new lr(r):Qe.near(r)}}function mie(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Rwe(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||mie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Mwe(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||mie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function $we(){return new Xt({props:{decorations:qwe,createSelectionBetween(t,e,r){return e.pos==r.pos&&lr.valid(r)?new lr(r):null},handleClick:Awe,handleKeyDown:Dwe,handleDOMEvents:{beforeinput:Fwe}}})}const Dwe=dne({ArrowLeft:Og("horiz",-1),ArrowRight:Og("horiz",1),ArrowUp:Og("vert",-1),ArrowDown:Og("vert",1)});function Og(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof qe){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=lr.findGapCursorFrom(a,e,l);return c?(i&&i(n.tr.setSelection(new lr(c))),!0):!1}}function Awe(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!lr.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&Re.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new lr(n))),!0)}function Fwe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof lr))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=X.empty;for(let o=n.length-1;o>=0;o--)i=X.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new ge(i,0,0));return s.setSelection(qe.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function qwe(t){if(!(t.selection instanceof lr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Kt.create(t.doc,[On.widget(t.selection.head,e,{key:"gapcursor"})])}var Mv=200,Vr=function(){};Vr.prototype.append=function(e){return e.length?(e=Vr.from(e),!this.length&&e||e.length<Mv&&this.leafAppend(e)||this.length<Mv&&e.leafPrepend(this)||this.appendInner(e)):this};Vr.prototype.prepend=function(e){return e.length?Vr.from(e).append(this):this};Vr.prototype.appendInner=function(e){return new Lwe(this,e)};Vr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Vr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Vr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Vr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Vr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};Vr.from=function(e){return e instanceof Vr?e:e&&e.length?new gie(e):Vr.empty};var gie=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Mv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Mv)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Vr);Vr.empty=new gie([]);var Lwe=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Vr);const Bwe=500;class as{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new Ns(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ns(m,void 0,void 0,c.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new as(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Ns(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>Vwe&&(a=zwe(a,c),o-=c),new as(a.append(s),o)}remapping(e,r){let n=new pp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new as(this.items.append(e.map(r=>new Ns(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),b=f.selection&&f.selection.map(s.slice(l+1,p));b&&a++,n.push(new Ns(m,g,b))}else n.push(new Ns(m))},i);let c=[];for(let f=r;f<o;f++)c.push(new Ns(s.maps[f]));let d=this.items.slice(0,i).append(c).append(n),h=new as(d,a);return h.emptyItemCount()>Bwe&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new Ns(c.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new as(Vr.from(i.reverse()),s)}}as.empty=new as(Vr.empty,0);function zwe(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Ns{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Ns(r.getMap().invert(),r,this.selection)}}}class aa{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const Vwe=20;function Uwe(t,e,r,n){let i=r.getMeta(oc),s;if(i)return i.historyState;r.getMeta(Kwe)&&(t=new aa(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(oc))return o.getMeta(oc).redo?new aa(t.done.addTransform(r,void 0,n,oy(e)),t.undone,U4(r.mapping.maps),t.prevTime,t.prevComposition):new aa(t.done,t.undone.addTransform(r,void 0,n,oy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!Hwe(r,t.prevRanges)),c=o?R1(t.prevRanges,r.mapping):U4(r.mapping.maps);return new aa(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,oy(e)),as.empty,c,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new aa(t.done.rebased(r,s),t.undone.rebased(r,s),R1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new aa(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),R1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function Hwe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function U4(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function R1(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function Wwe(t,e,r){let n=oy(e),i=oc.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new aa(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(oc,{redo:r,historyState:l})}let M1=!1,H4=null;function oy(t){let e=t.plugins;if(H4!=e){M1=!1,H4=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){M1=!0;break}}return M1}const oc=new Mr("history"),Kwe=new Mr("closeHistory");function Gwe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Xt({key:oc,state:{init(){return new aa(as.empty,as.empty,null,0,-1)},apply(e,r,n){return Uwe(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?vie:n=="historyRedo"?bie:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function yie(t,e){return(r,n)=>{let i=oc.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=Wwe(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const vie=yie(!1,!0),bie=yie(!0,!0);mr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Xt({key:new Mr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>n)}})]}});var Ywe=mr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Pwe(this.options)]}});mr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Xt({key:new Mr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Kt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(On.node(c,c+l.nodeSize,{class:this.options.className}))}),Kt.create(t,s)}}})]}});var Qwe=mr.create({name:"gapCursor",addProseMirrorPlugins(){return[$we()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=bt(Te(t,"allowGapCursor",r)))!=null?e:null}}}),Xwe=mr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Xt({key:new Mr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,c=!o.isLeaf&&D0(o);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=On.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Kt.create(t,i)}}})]}});mr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Xt({key:new Mr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||kne(r.selection)||t.view.dragging?null:Kt.create(r.doc,[On.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function W4({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var Jwe=mr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Mr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Xt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,d=e.getState(o),h=a.content.size,f=c.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!W4({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!W4({node:o,types:n})}}})]}}),Zwe=mr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>vie(t,e),redo:()=>({state:t,dispatch:e})=>bie(t,e)}},addProseMirrorPlugins(){return[Gwe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),eSe=mr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(Cxe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(wxe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(sie.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Oxe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Ixe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Rxe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Ywe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Qwe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Mxe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push($xe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Zwe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(Dxe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(Bxe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(oie.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(hie.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(iie.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(pie.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Nwe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Twe.configure(this.options.strike)),this.options.text!==!1&&i.push(Owe.configure(this.options.text)),this.options.underline!==!1&&i.push(jwe.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(Jwe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),tSe=eSe,rSe=Xwe;const Jo=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>u.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),nSe=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return u.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[u.jsx(Jo,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:u.jsx(Sfe,{className:"w-4 h-4"})}),u.jsx(Jo,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:u.jsx(Ofe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Jo,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:u.jsx(Pfe,{className:"w-4 h-4"})}),u.jsx(Jo,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:u.jsx(jfe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Jo,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:u.jsx(KR,{className:"w-4 h-4"})}),t.isActive("link")&&u.jsx(Jo,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:u.jsx(Lfe,{className:"w-4 h-4"})}),u.jsx("div",{className:"flex-1"}),u.jsx(Jo,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:u.jsx(qfe,{className:"w-4 h-4"})}),u.jsx(Jo,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:u.jsx(Dfe,{className:"w-4 h-4"})})]})};function xie({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=gxe({extensions:[tSe.configure({heading:!1,codeBlock:!1,blockquote:!1}),rSe.configure({placeholder:r}),hwe.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return u.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[u.jsx(nSe,{editor:o}),u.jsx(cxe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),u.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function $v(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const $1=[{id:"call",label:"Phone call",icon:YR},{id:"email",label:"Email",icon:GR},{id:"chat",label:"Chat",icon:ute},{id:"meeting",label:"Meeting",icon:Fs},{id:"coffee",label:"Coffee",icon:lte},{id:"lunch",label:"Lunch",icon:yte},{id:"note",label:"Other",icon:_0}];function FM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=T.useState("call"),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,b]=T.useState([]),[y,v]=T.useState(!1),[w,x]=T.useState(""),{data:S}=Bc(),_=!!o;if(T.useEffect(()=>{if(t){const R=new Date,L=R.toISOString().split("T")[0],D=R.toTimeString().slice(0,5);o?(d(o.activity_date||L),f(o.activity_time||""),m(o.content||""),b(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||L),f(s.activity_time||D),m(s.content||""),b(s.participants||[]),l(s.activity_type||"note")):(d(L),f(D),m(""),b([]),l("call"))}},[t,s,o]),!t)return null;const N=(S||[]).filter(R=>R.id.toString()!==(i==null?void 0:i.toString())),E=N.filter(R=>{var L;return(L=R.name)==null?void 0:L.toLowerCase().includes(w.toLowerCase())}),k=R=>{R.preventDefault(),!$v(p)&&(r({activity_type:a,activity_date:c||null,activity_time:h||null,content:p,participants:g}),m(""),b([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},C=()=>{m(""),b([]),d(""),f(""),v(!1),x(""),e()},O=R=>{b(L=>L.includes(R)?L.filter(D=>D!==R):[...L,R])},j=R=>{b(L=>L.filter(D=>D!==R))},P=()=>N.filter(R=>g.includes(R.id)),A=R=>{if(!R)return"";try{return new Date(R).toISOString().split("T")[0]}catch{return""}};return($1.find(R=>R.id===a)||$1[0]).icon,u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[u.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),u.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(gn,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:k,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:$1.map(R=>{const L=R.icon,D=a===R.id;return u.jsxs("button",{type:"button",onClick:()=>l(R.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${D?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[u.jsx(L,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs",children:R.label})]},R.id)})})]}),u.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),u.jsx("input",{id:"activity-date",type:"date",value:A(c),onChange:R=>d(R.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),u.jsx("input",{id:"activity-time",type:"time",value:h,onChange:R=>f(R.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx(xie,{value:p,onChange:m,placeholder:"What happened?",disabled:n,minHeight:"100px"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),P().length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:P().map(R=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[R.name,u.jsx("button",{type:"button",onClick:()=>j(R.id),className:"hover:text-primary-900",disabled:n,children:u.jsx(gn,{className:"w-3 h-3"})})]},R.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>v(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&u.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[u.jsx("div",{className:"p-2 border-b",children:u.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:R=>x(R.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),u.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0?u.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):E.map(R=>{var D;const L=g.includes(R.id);return u.jsxs("button",{type:"button",onClick:()=>O(R.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${L?"bg-primary-50":""}`,children:[u.jsx("input",{type:"checkbox",checked:L,onChange:()=>{},className:"mr-1"}),R.thumbnail?u.jsx("img",{src:R.thumbnail,alt:R.name,className:"w-6 h-6 rounded-full"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((D=R.first_name)==null?void 0:D[0])||"?"})}),u.jsx("span",{children:R.name})]},R.id)})})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:C,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||$v(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function Zo({title:t,value:e,icon:r,href:n}){return u.jsx(ce,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),u.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function K4({person:t,hideStar:e=!1}){var r,n;return u.jsxs(ce,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):u.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&u.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&u.jsx(Rd,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function iSe({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),u.jsx("p",{className:"text-xs text-gray-500",children:Cn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&u.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(c=>{var d;return c.thumbnail?u.jsx("img",{src:c.thumbnail,alt:c.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},c.id):u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:u.jsx("span",{className:"text-sm",children:(d=c.name)==null?void 0:d[0]})},c.id)})})]});return i&&n?u.jsx(ce,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):u.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function sSe({todo:t,onToggle:e}){var n;const r=em(t);return u.jsxs(ce,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(As,{className:"w-5 h-5 text-primary-600"}):u.jsx(Id,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),u.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&u.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[u.jsx("div",{children:Cn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&u.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function oSe(){return u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:u.jsx(pte,{className:"w-12 h-12 text-primary-600"})})}),u.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Md,"!"]}),u.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsxs(ce,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[u.jsx(sr,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),u.jsxs(ce,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(sr,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function aSe(){var k,C,O;const{data:t,isLoading:e,error:r}=Hfe(),{data:n}=bte(!1),i=xte(),s=QR(),[o,a]=T.useState(null),[l,c]=T.useState(!1),[d,h]=T.useState(!1),[f,p]=T.useState(null),m=j=>{if(!j.is_completed){a(j),c(!0);return}i.mutate({todoId:j.id,data:{content:j.content,due_date:j.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),c(!1),a(null))},b=()=>{if(!o)return;const j=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:j,activity_type:"note",participants:[]}),c(!1),h(!0)},y=async j=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:j}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch(P){console.error("Failed to create activity:",P),alert("Failed to create activity. Please try again.")}};if(e)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const j=((k=r==null?void 0:r.response)==null?void 0:k.status)>=500||!(r!=null&&r.response);return u.jsx("div",{className:"card p-8 text-center",children:u.jsx("div",{className:"text-red-600 mb-2",children:j?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),u.jsx("p",{className:"text-sm text-gray-600",children:((O=(C=r==null?void 0:r.response)==null?void 0:C.data)==null?void 0:O.message)||"An error occurred while loading your data."})]})})})}const{stats:v,recent_people:w,upcoming_reminders:x,favorites:S}=t||{};if(((v==null?void 0:v.total_people)||0)+((v==null?void 0:v.total_companies)||0)+((v==null?void 0:v.total_dates)||0)===0)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Zo,{title:"Total people",value:0,icon:Fs,href:"/people"}),u.jsx(Zo,{title:"Organizations",value:0,icon:Rr,href:"/companies"}),u.jsx(Zo,{title:"Events",value:0,icon:vo,href:"/dates"}),u.jsx(Zo,{title:"Open todos",value:0,icon:As,href:"/todos"})]}),u.jsx(oSe,{})]});const E=(n==null?void 0:n.slice(0,5))||[];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Zo,{title:"Total people",value:(v==null?void 0:v.total_people)||0,icon:Fs,href:"/people"}),u.jsx(Zo,{title:"Organizations",value:(v==null?void 0:v.total_companies)||0,icon:Rr,href:"/companies"}),u.jsx(Zo,{title:"Events",value:(v==null?void 0:v.total_dates)||0,icon:vo,href:"/dates"}),u.jsx(Zo,{title:"Open todos",value:(v==null?void 0:v.open_todos_count)||0,icon:As,href:"/todos"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(vo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),u.jsxs(ce,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",u.jsx(n1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(j=>u.jsx(iSe,{reminder:j},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(As,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),u.jsxs(ce,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",u.jsx(n1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:E.length>0?E.map(j=>u.jsx(sSe,{todo:j,onToggle:m},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Rd,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(j=>u.jsx(K4,{person:j,hideStar:!0},j.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited people"]}),u.jsxs(ce,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all people",u.jsx(n1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(j=>u.jsx(K4,{person:j},j.id)):u.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",u.jsx(ce,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),u.jsx(XR,{isOpen:l,onClose:()=>{c(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:b}),u.jsx(FM,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function G4(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function lSe({person:t,companyName:e,isDeceased:r}){var n,i;return u.jsx(ce,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&u.jsx(Rd,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>u.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function cSe(){const[t,e]=T.useState(!1),[r,n]=T.useState(!1),[i,s]=T.useState([]),[o,a]=T.useState("first_name"),[l,c]=T.useState("asc"),d=T.useRef(null),h=T.useRef(null),{data:f,isLoading:p,error:m}=Bc(),{data:g}=ut({queryKey:["person-labels"],queryFn:async()=>(await Ke.getPersonLabels()).data}),b=(g==null?void 0:g.map(k=>k.name))||[];T.useEffect(()=>{const k=C=>{h.current&&!h.current.contains(C.target)&&d.current&&!d.current.contains(C.target)&&e(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const y=T.useMemo(()=>{if(!f)return[];let k=[...f];return r&&(k=k.filter(C=>C.is_favorite)),i.length>0&&(k=k.filter(C=>{const O=C.labels||[];return i.some(j=>O.includes(j))})),k.sort((C,O)=>{var q,R,L,D,W,z,H,K;let j,P;if(o==="first_name"?(j=(((q=C.acf)==null?void 0:q.first_name)||C.first_name||"").toLowerCase(),P=(((R=O.acf)==null?void 0:R.first_name)||O.first_name||"").toLowerCase()):(j=(((L=C.acf)==null?void 0:L.last_name)||C.last_name||"").toLowerCase(),P=(((D=O.acf)==null?void 0:D.last_name)||O.last_name||"").toLowerCase()),j===P){const he=o==="first_name"?(((W=C.acf)==null?void 0:W.last_name)||C.last_name||"").toLowerCase():(((z=C.acf)==null?void 0:z.first_name)||C.first_name||"").toLowerCase(),xe=o==="first_name"?(((H=O.acf)==null?void 0:H.last_name)||O.last_name||"").toLowerCase():(((K=O.acf)==null?void 0:K.first_name)||O.first_name||"").toLowerCase(),Be=he.localeCompare(xe);return l==="asc"?Be:-Be}const A=j.localeCompare(P);return l==="asc"?A:-A})},[f,r,i,o,l]),v=r||i.length>0,w=k=>{s(C=>C.includes(k)?C.filter(O=>O!==k):[...C,k])},x=()=>{n(!1),s([])},S=T.useMemo(()=>{if(!y)return[];const k=y.map(C=>G4(C)).filter(Boolean);return[...new Set(k)]},[y]),{data:_}=ut({queryKey:["companies","batch",S.sort().join(",")],queryFn:async()=>S.length===0?[]:(await Ke.getCompanies({per_page:100,include:S.join(",")})).data,enabled:S.length>0}),N=T.useMemo(()=>{const k={};return _&&_.forEach(C=>{k[C.id]=nr(C)}),k},[_]),E=T.useMemo(()=>{const k={};return y.forEach(C=>{const O=G4(C);O&&N[O]&&(k[C.id]=N[O])}),k},[y,N]);return u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[u.jsxs("select",{value:o,onChange:k=>a(k.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[u.jsx("option",{value:"first_name",children:"First name"}),u.jsx("option",{value:"last_name",children:"Last name"})]}),u.jsx("div",{className:"h-4 w-px bg-gray-300"}),u.jsx("button",{onClick:()=>c(l==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${l==="asc"?"descending":"ascending"}`,children:l==="asc"?u.jsx(wfe,{className:"w-4 h-4 text-gray-600"}):u.jsx(xfe,{className:"w-4 h-4 text-gray-600"})})]}),u.jsxs("div",{className:"relative",ref:d,children:[u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${v?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[u.jsx(AP,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Filter"}),v&&u.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)})]}),t&&u.jsx("div",{ref:h,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:k=>n(k.target.checked),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&u.jsx(uF,{className:"w-3 h-3 text-white"})}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Rd,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),u.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),b.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:b.map(k=>u.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:i.includes(k),onChange:()=>w(k),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(k)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(k)&&u.jsx(uF,{className:"w-3 h-3 text-white"})}),u.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]}),v&&u.jsx("button",{onClick:x,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),v&&u.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[u.jsx(Rd,{className:"w-3 h-3"}),"Favorites",u.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:u.jsx(gn,{className:"w-3 h-3"})})]}),i.map(k=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[k,u.jsx("button",{onClick:()=>w(k),className:"hover:text-gray-600",children:u.jsx(gn,{className:"w-3 h-3"})})]},k))]}),u.jsxs(ce,{to:"/people/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),p&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),m&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!p&&!m&&(f==null?void 0:f.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(sr,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),u.jsxs(ce,{to:"/people/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!p&&!m&&(y==null?void 0:y.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(k=>u.jsx(lSe,{person:k,companyName:E[k.id],isDeceased:k.is_deceased},k.id))}),!p&&!m&&(f==null?void 0:f.length)>0&&(y==null?void 0:y.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(AP,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),u.jsx("button",{onClick:x,className:"btn-secondary",children:"Clear filters"})]})]})}const uSe="#0285FF",dSe=T.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=uSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),hSe="#0866FF",fSe=T.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=hSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),pSe="#FF0069",mSe=T.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=pSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),gSe="#000000",ySe=T.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=gSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),vSe="#000000",bSe=T.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=vSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),xSe={Phone:YR,Mail:GR,Users:Fs,Coffee:lte,Utensils:yte,FileText:_0,Circle:$P};function wSe({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=T.useMemo(()=>Wme(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?MP:Id;if(f.type==="activity"&&f.activity_type){const p=Gme(f.activity_type);return xSe[p]||$P}return f.type==="note"?_0:$P},c=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",b=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const v=Kme(y),w=Qme(f),x=m&&em(f);return u.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&u.jsx("div",{className:"absolute left-0 top-1",children:u.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),u.jsx("div",{className:`${w}`,children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&u.jsx("span",{className:"text-xs font-medium text-gray-600",children:Yme(f.activity_type)}),u.jsx("span",{className:"text-xs text-gray-400",children:""}),u.jsx("span",{className:"text-xs text-gray-500",children:v})]}),u.jsxs("div",{className:"flex items-start gap-2",children:[m&&u.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?u.jsx(MP,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):u.jsx(Id,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(b||g)&&((S=f.content)!=null&&S.includes("<"))?u.jsx("div",{className:`text-sm flex-1 prose prose-sm max-w-none ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):u.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&u.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const N=a(_);return N?u.jsxs(ce,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[u.jsx(KR,{className:"w-3 h-3"}),N.name]},_):null})]}),m&&f.due_date&&u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Cn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&u.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:u.jsx(ia,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&u.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(ci,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),u.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(c)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?u.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function SSe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i=""}){const[s,o]=T.useState("");if(T.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=c=>{c.preventDefault(),!$v(s)&&(r(s),o(""))},l=()=>{o(""),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),u.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(gn,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),u.jsx(xie,{value:s,onChange:o,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:l,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||$v(s),children:n?"Adding...":"Add note"})]})]})]})})}function wie({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=T.useState(""),[a,l]=T.useState(""),[c,d]=T.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:c}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(gn,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:f,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&u.jsx("div",{className:"mb-4",children:u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:c,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),u.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}function qn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function _Se(t){return t?t.replace(/[^\d+]/g,""):""}function Y4(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function ESe(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function NSe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${qn(l)}`),s.push(`N:${qn(a)};${qn(o)};;;`),i.nickname&&s.push(`NICKNAME:${qn(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=qn(h.contact_value),p=h.contact_label?qn(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",b=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=_Se(h.contact_value);y&&s.push(`${b}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let v=h.contact_value;v.match(/^https?:\/\//i)||(v=`https://${v}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${qn(v)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=qn(h.street||""),m=qn(h.city||""),g=qn(h.state||""),b=qn(h.postal_code||""),y=qn(h.country||"");(p||m||g||b||y)&&s.push(`${f}:;;${p};${m};${g};${b};${y}`)});const{title:c,org:d}=ESe(i.work_history,r);if(d&&s.push(`ORG:${qn(d)}`),c&&s.push(`TITLE:${qn(c)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=Y4(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=Y4(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function CSe(t,e={}){const{filename:r,...n}=e,i=NSe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const kSe=({className:t})=>u.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:u.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function jg(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function TSe(){var J$,Z$,eD,tD,rD,nD,iD,sD,oD,aD,lD,cD,uD,dD,hD;const{id:t}=Vs(),e=vn(),r=yt(),{data:n,isLoading:i,error:s}=zc(t),{data:o}=Yfe(t),{data:a}=Qfe(t),l=Jfe(),c=epe(),d=spe(),h=sh(),f=Zfe(),p=QR(),m=tpe(),g=Ste(),b=npe(),y=rpe(),v=ipe(),{data:w}=Bc(),{data:x=[]}=ut({queryKey:["investments",t],queryFn:async()=>(await Fe.getInvestments(t)).data,enabled:!!t}),[S,_]=T.useState(!1),[N,E]=T.useState(""),[k,C]=T.useState(!1),O=T.useRef(null),[j,P]=T.useState(!1),[A,q]=T.useState(!1),[R,L]=T.useState(!1),[D,W]=T.useState(null),[z,H]=T.useState(null),[K,he]=T.useState(null),[xe,Be]=T.useState(!1),[we,Ie]=T.useState(null),{data:ze}=ut({queryKey:["person-labels"],queryFn:async()=>(await Ke.getPersonLabels()).data}),Ze=ze||[],Nt=(n==null?void 0:n.labels)||[],ft=((tD=(eD=(Z$=(J$=n==null?void 0:n._embedded)==null?void 0:J$["wp:term"])==null?void 0:Z$.flat())==null?void 0:eD.filter($=>($==null?void 0:$.taxonomy)==="person_label"))==null?void 0:tD.map($=>$.id))||[],J=Ze.filter($=>!Nt.includes($.name));An((n==null?void 0:n.name)||((rD=n==null?void 0:n.title)==null?void 0:rD.rendered)||(n==null?void 0:n.title)||"Person");const Ne=a==null?void 0:a.find($=>{const Y=Array.isArray($.date_type)?$.date_type[0]:$.date_type;return(Y==null?void 0:Y.toLowerCase())==="birthday"}),Ue=Ne!=null&&Ne.date_value?new Date(Ne.date_value):null,et=a==null?void 0:a.find($=>{const Y=Array.isArray($.date_type)?$.date_type[0]:$.date_type;return(Y==null?void 0:Y.toLowerCase())==="died"}),Lt=et!=null&&et.date_value?new Date(et.date_value):null,Se=!!Lt,We=Ue?i1(Se?Lt:new Date,Ue):null,Dt=a?[...a].sort(($,Y)=>{const G=$.date_value?new Date($.date_value):new Date(0),Pe=Y.date_value?new Date(Y.date_value):new Date(0);return G-Pe}):[],Bt=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch($){console.error("Failed to delete person:",$),alert("Failed to delete person. Please try again.")}},M=$=>{if(!$)return"";let Y=$.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const G=Y.startsWith("+");return Y=Y.replace(/\D/g,""),G?`+${Y}`:Y},F=async $=>{var Pe;if(!window.confirm("Are you sure you want to delete this contact detail?"))return;const Y=[...((Pe=n.acf)==null?void 0:Pe.contact_info)||[]];Y.splice($,1);const G=uo(n.acf,{contact_info:Y});await h.mutateAsync({id:t,data:{acf:G}})},V=async $=>{var Pe;if(!window.confirm("Are you sure you want to delete this address?"))return;const Y=[...((Pe=n.acf)==null?void 0:Pe.addresses)||[]];Y.splice($,1);const G=uo(n.acf,{addresses:Y});await h.mutateAsync({id:t,data:{acf:G}})},oe=async $=>{var Gs,Qi,Ys,Km,fD,pD;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const Y=(Qi=(Gs=n.acf)==null?void 0:Gs.relationships)==null?void 0:Qi[$];if(!Y)return;const G=Y.related_person,Pe=Y.relationship_type;let Xe=!0;G&&Pe&&(Xe=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let pt=null;if(!Xe&&G&&Pe)try{const[bs,Gm]=await Promise.all([Ke.getPerson(G,{_embed:!0}),Ke.getRelationshipTypes()]),Nb={};Gm.data.forEach($h=>{Nb[$h.id]=$h});const Ei=Nb[Pe],wl=(Ys=Ei==null?void 0:Ei.acf)==null?void 0:Ys.inverse_relationship_type;if(wl){const Dh=(((Km=bs.data.acf)==null?void 0:Km.relationships)||[]).find(Qs=>{var mD,gD;const Rae=typeof Qs.related_person=="object"?(mD=Qs.related_person)==null?void 0:mD.ID:Qs.related_person,Mae=typeof Qs.relationship_type=="object"?(gD=Qs.relationship_type)==null?void 0:gD.term_id:Qs.relationship_type;return Rae===parseInt(t)&&Mae===wl});Dh&&(pt={related_person:parseInt(t),relationship_type:wl,relationship_label:Dh.relationship_label||""})}}catch(bs){console.error("Failed to fetch inverse relationship:",bs)}const vt=[...((fD=n.acf)==null?void 0:fD.relationships)||[]];vt.splice($,1);const Go=uo(n.acf,{relationships:vt});if(await h.mutateAsync({id:t,data:{acf:Go}}),!Xe&&pt&&G){await new Promise(bs=>setTimeout(bs,500));try{const bs=await Ke.getPerson(G,{_embed:!0}),Gm=((pD=bs.data.acf)==null?void 0:pD.relationships)||[];if(!Gm.some(Ei=>{var Dh,Qs;const wl=typeof Ei.related_person=="object"?(Dh=Ei.related_person)==null?void 0:Dh.ID:Ei.related_person,$h=typeof Ei.relationship_type=="object"?(Qs=Ei.relationship_type)==null?void 0:Qs.term_id:Ei.relationship_type;return wl===pt.related_person&&$h===pt.relationship_type})){const Ei=[...Gm,pt],wl=uo(bs.data.acf,{relationships:Ei});await Ke.updatePerson(G,{acf:wl})}}catch(bs){console.error("Failed to restore inverse relationship:",bs)}}r.invalidateQueries({queryKey:["person",t]}),G&&r.invalidateQueries({queryKey:["person",G]}),r.invalidateQueries({queryKey:["people"]})},Z=async $=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:$,personId:t})},Q=async $=>{window.confirm("Are you sure you want to delete this note?")&&await c.mutateAsync({noteId:$,personId:t})},ye=async $=>{try{await f.mutateAsync({personId:t,content:$}),P(!1)}catch(Y){console.error("Failed to create note:",Y),alert("Failed to create note. Please try again.")}},Ge=async $=>{try{z?(await m.mutateAsync({activityId:z.id,data:$,personId:t}),H(null)):(await p.mutateAsync({personId:t,data:$}),K&&(await b.mutateAsync({todoId:K.id,data:{content:K.content,due_date:K.due_date,is_completed:!0},personId:t}),he(null),Ie(null))),q(!1)}catch(Y){console.error("Failed to save activity:",Y),alert("Failed to save activity. Please try again.")}},rt=async $=>{try{await g.mutateAsync({personId:t,data:$}),L(!1),W(null)}catch(Y){console.error("Failed to create todo:",Y),alert("Failed to create todo. Please try again.")}},zt=async $=>{if(D)try{await b.mutateAsync({todoId:D.id,data:$,personId:t}),L(!1),W(null)}catch(Y){console.error("Failed to update todo:",Y),alert("Failed to update todo. Please try again.")}},_e=async $=>{if(!$.is_completed){he($),Be(!0);return}try{await b.mutateAsync({todoId:$.id,data:{content:$.content,due_date:$.due_date,is_completed:!1},personId:t})}catch(Y){console.error("Failed to toggle todo:",Y),alert("Failed to update todo. Please try again.")}},se=async()=>{if(K)try{await b.mutateAsync({todoId:K.id,data:{content:K.content,due_date:K.due_date,is_completed:!0},personId:t}),Be(!1),he(null)}catch($){console.error("Failed to complete todo:",$),alert("Failed to complete todo. Please try again.")}},fe=()=>{if(!K)return;const $=new Date().toISOString().split("T")[0];Ie({content:K.content,activity_date:$,activity_type:"note",participants:[]}),Be(!1),q(!0)},de=async $=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:$,personId:t})},Ce=async $=>{window.confirm("Are you sure you want to delete this todo?")&&await v.mutateAsync({todoId:$,personId:t})},ot=$=>{$.type==="todo"?(W($),L(!0)):$.type==="activity"&&(H($),q(!0))},_i=$=>{$.type==="note"?Q($.id):$.type==="activity"?de($.id):$.type==="todo"&&Ce($.id)},Yi=async $=>{var Pe;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const Y=[...((Pe=n.acf)==null?void 0:Pe.work_history)||[]];Y.splice($,1);const G=uo(n.acf,{work_history:Y});await h.mutateAsync({id:t,data:{acf:G}})},hu=async $=>{var Pe,Xe,pt;const Y=(pt=(Xe=(Pe=n==null?void 0:n._embedded)==null?void 0:Pe["wp:term"])==null?void 0:Xe.flat())==null?void 0:pt.find(vt=>(vt==null?void 0:vt.taxonomy)==="person_label"&&(vt==null?void 0:vt.name)===$);if(!Y)return;const G=ft.filter(vt=>vt!==Y.id);await h.mutateAsync({id:t,data:{person_label:G}})},zm=async()=>{if(!N)return;const $=Ze.find(G=>G.id.toString()===N);if(!$)return;const Y=[...ft,$.id];await h.mutateAsync({id:t,data:{person_label:Y}}),E(""),_(!1)},Vm=async $=>{var G;const Y=(G=$.target.files)==null?void 0:G[0];if(Y){if(!Y.type.startsWith("image/")){alert("Please select an image file");return}if(Y.size>5*1024*1024){alert("Image size must be less than 5MB");return}C(!0);try{await Fe.uploadPersonPhoto(t,Y),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch(Pe){console.error("Failed to upload photo:",Pe),alert("Failed to upload photo. Please try again.")}finally{C(!1),O.current&&(O.current.value="")}}},_b=()=>{if(n)try{CSe(n,{companyMap:Ot,personDates:a||[]})}catch($){console.error("Failed to export vCard:",$),alert("Failed to export vCard. Please try again.")}},fu=((iD=(nD=n==null?void 0:n.acf)==null?void 0:nD.work_history)==null?void 0:iD.map($=>$.company).filter(Boolean))||[],Eb=TP({queries:fu.map($=>({queryKey:["company",$],queryFn:async()=>(await Ke.getCompany($,{_embed:!0})).data,enabled:!!$}))}),Ks=((oD=(sD=n==null?void 0:n.acf)==null?void 0:sD.relationships)==null?void 0:oD.map($=>$.related_person).filter(Boolean))||[],pu=TP({queries:Ks.map($=>({queryKey:["person-dates",$],queryFn:async()=>(await Fe.getPersonDates($)).data,enabled:!!$}))}),ne=T.useMemo(()=>{const $={};return pu.forEach((Y,G)=>{if(Y.data&&Ks[G]){const Pe=Ks[G],Xe=Y.data.find(pt=>{const vt=Array.isArray(pt.date_type)?pt.date_type[0]:pt.date_type;return(vt==null?void 0:vt.toLowerCase())==="birthday"});if(Xe!=null&&Xe.date_value){const pt=new Date(Xe.date_value);$[Pe]=i1(new Date,pt)}else $[Pe]=-1}}),$},[pu,Ks]),je=T.useMemo(()=>{const $={};return pu.forEach((Y,G)=>{if(Y.data&&Ks[G]){const Pe=Ks[G],Xe=Y.data.some(pt=>{const vt=Array.isArray(pt.date_type)?pt.date_type[0]:pt.date_type;return(vt==null?void 0:vt.toLowerCase())==="died"});$[Pe]=Xe}}),$},[pu,Ks]),De=T.useMemo(()=>{var $;return($=n==null?void 0:n.acf)!=null&&$.relationships?[...n.acf.relationships].sort((Y,G)=>{const Pe=ne[Y.related_person]??-1,Xe=ne[G.related_person]??-1;return Pe===-1&&Xe===-1?0:Pe===-1?1:Xe===-1?-1:Xe-Pe}):[]},[(aD=n==null?void 0:n.acf)==null?void 0:aD.relationships,ne]),Ot={};Eb.forEach(($,Y)=>{var G,Pe,Xe,pt,vt,Go,Gs,Qi,Ys;if($.data){const Km=fu[Y];Ot[Km]={name:nr($.data),logo:((Xe=(Pe=(G=$.data._embedded)==null?void 0:G["wp:featuredmedia"])==null?void 0:Pe[0])==null?void 0:Xe.source_url)||((Ys=(Qi=(Gs=(Go=(vt=(pt=$.data._embedded)==null?void 0:pt["wp:featuredmedia"])==null?void 0:vt[0])==null?void 0:Go.media_details)==null?void 0:Gs.sizes)==null?void 0:Qi.thumbnail)==null?void 0:Ys.source_url)||null}}});const ln=T.useMemo(()=>{var $;return($=n==null?void 0:n.acf)!=null&&$.work_history?[...n.acf.work_history].map((Y,G)=>({...Y,originalIndex:G})).sort((Y,G)=>{if(Y.is_current&&!G.is_current)return-1;if(!Y.is_current&&G.is_current)return 1;const Pe=Y.start_date?new Date(Y.start_date):new Date(0);return(G.start_date?new Date(G.start_date):new Date(0))-Pe}):[]},[(lD=n==null?void 0:n.acf)==null?void 0:lD.work_history]),Um=T.useMemo(()=>o?o.filter(Y=>Y.type==="todo").sort((Y,G)=>{if(Y.is_completed&&!G.is_completed)return 1;if(!Y.is_completed&&G.is_completed)return-1;if(!Y.is_completed&&!G.is_completed){if(Y.due_date&&G.due_date)return new Date(Y.due_date)-new Date(G.due_date);if(Y.due_date&&!G.due_date)return-1;if(!Y.due_date&&G.due_date)return 1}return new Date(G.created)-new Date(Y.created)}):[],[o]);if(T.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const dr=n.acf||{},mu=["facebook","linkedin","instagram","twitter","bluesky","threads","website"],Hm=((cD=dr.contact_info)==null?void 0:cD.filter($=>mu.includes($.contact_type)))||[],Mh={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,website:7},Wm=[...Hm].sort(($,Y)=>{const G=Mh[$.contact_type]||99,Pe=Mh[Y.contact_type]||99;return G-Pe}),Pae=$=>{switch($){case"facebook":return fSe;case"linkedin":return kSe;case"instagram":return mSe;case"twitter":return bSe;case"bluesky":return dSe;case"threads":return ySe;case"website":return ty;default:return ty}},Iae=$=>{switch($){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"website":return"text-gray-600";default:return"text-gray-600"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(ce,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:_b,className:"btn-secondary",children:[u.jsx(DP,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),u.jsxs(ce,{to:`/people/${t}/edit`,className:"btn-secondary",children:[u.jsx(mte,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),u.jsxs("button",{onClick:Bt,className:"btn-danger",children:[u.jsx(ci,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),u.jsxs("div",{className:"card p-6 relative",children:[u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx(ce,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"})}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[n.thumbnail?u.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):u.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((uD=n.first_name)==null?void 0:uD[0])||"?"})}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var $;return($=O.current)==null?void 0:$.click()},children:k?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ef,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:Vm,className:"hidden",disabled:k})]}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,Se&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&u.jsx(Rd,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),dr.nickname&&u.jsxs("p",{className:"text-gray-500",children:['"',dr.nickname,'"']}),Se&&Lt&&We!==null&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[jg(dr.gender)&&u.jsx("span",{className:"mr-1",children:jg(dr.gender)}),"Died ",Cn(Lt,"MMMM d, yyyy")," at age ",We]}),!Se&&We!==null&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[jg(dr.gender)&&u.jsx("span",{className:"mr-1",children:jg(dr.gender)}),We," years old"]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map(($,Y)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[$,u.jsx("button",{onClick:()=>hu($),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:u.jsx(gn,{className:"w-3 h-3"})})]},Y)),S?u.jsxs("div",{className:"inline-flex items-center gap-2",children:[u.jsxs("select",{value:N,onChange:$=>E($.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:J.length===0,children:[u.jsx("option",{value:"",children:"Select a label..."}),J.map($=>u.jsx("option",{value:$.id,children:$.name},$.id))]}),u.jsx("button",{onClick:zm,disabled:!N,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),u.jsx("button",{onClick:()=>{_(!1),E("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):J.length>0&&u.jsxs("button",{onClick:()=>_(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[u.jsx(sr,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),Wm.length>0&&u.jsx("div",{className:"flex items-center gap-3 mt-4",children:Wm.map(($,Y)=>{const G=Pae($.contact_type),Pe=Iae($.contact_type);let Xe=$.contact_value;return Xe.match(/^https?:\/\//i)||(Xe=`https://${Xe}`),u.jsx("a",{href:Xe,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${Pe}`,title:`${$.contact_type.charAt(0).toUpperCase()+$.contact_type.slice(1)}: ${$.contact_value}`,children:u.jsx(G,{className:"w-5 h-5"})},Y)})})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[!Se&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Contact information"}),u.jsxs(ce,{to:`/people/${t}/contact/new`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add contact detail"})]})]}),((dD=dr.contact_info)==null?void 0:dD.filter($=>!mu.includes($.contact_type)).length)>0?u.jsx("div",{className:"space-y-2",children:(()=>{const $={email:1,phone:2,mobile:2,calendar:3,other:4};return dr.contact_info.filter(G=>!mu.includes(G.contact_type)).map((G,Pe)=>({...G,originalIndex:Pe})).sort((G,Pe)=>{const Xe=$[G.contact_type]||99,pt=$[Pe.contact_type]||99;return Xe!==pt?Xe-pt:G.originalIndex-Pe.originalIndex}).map((G,Pe)=>{dr.contact_info.indexOf(G);const Xe=G.contact_type==="email"?GR:G.contact_type==="phone"||G.contact_type==="mobile"?YR:G.contact_type==="calendar"?vo:ty,pt=G.contact_type==="email",vt=G.contact_type==="phone"||G.contact_type==="mobile",Go=G.contact_type==="mobile",Gs=G.contact_type==="calendar";let Qi=null,Ys=null;return pt?Qi=`mailto:${G.contact_value}`:vt?Qi=`tel:${M(G.contact_value)}`:Gs&&(Qi=G.contact_value,Ys="_blank"),u.jsx("div",{className:"group",children:u.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[u.jsx(Xe,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[G.contact_label||G.contact_type,": "]}),Qi?u.jsx("a",{href:Qi,target:Ys||void 0,rel:Ys==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:G.contact_value}):u.jsx("span",{children:G.contact_value}),Go&&u.jsx("a",{href:`https://wa.me/${M(G.contact_value)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 hover:opacity-80 transition-opacity",title:"Open WhatsApp",children:u.jsx(ute,{className:"w-4 h-4 text-[#25D366]"})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ce,{to:`/people/${t}/contact/${G.originalIndex}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit contact detail",children:u.jsx(ia,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>F(G.originalIndex),className:"p-1 hover:bg-red-50 rounded",title:"Delete contact detail",children:u.jsx(ci,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},G.originalIndex)})})()}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No contact information yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Events"}),u.jsxs(ce,{to:`/dates/new?person=${t}`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add Important Date"})]})]}),Dt.length>0?u.jsx("div",{className:"space-y-3",children:Dt.map($=>{const Y=Array.isArray($.date_type)?$.date_type[0]:$.date_type,G=(Y==null?void 0:Y.toLowerCase())||"",Pe=G.includes("died"),Xe=G.includes("wedding")||G.includes("marriage")?kfe:G.includes("birthday")?Cfe:vo;return u.jsxs("div",{className:"flex items-start group",children:[u.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:Pe?u.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):u.jsx(Xe,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium",children:$.title}),u.jsx("p",{className:"text-xs text-gray-500",children:$.date_value&&Cn(new Date($.date_value),"MMMM d, yyyy")}),Y&&u.jsx("p",{className:"text-xs text-gray-400 capitalize",children:Y})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx(ce,{to:`/dates/${$.id}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:u.jsx(ia,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Z($.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:u.jsx(ci,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},$.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No important dates yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Timeline"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>P(!0),className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Note"})]}),u.jsxs("button",{onClick:()=>q(!0),className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),u.jsx(wSe,{timeline:o||[],onEdit:ot,onDelete:_i,onToggleTodo:_e,personId:t,allPeople:w||[]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Work history"}),u.jsxs(ce,{to:`/people/${t}/work-history/new`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add work history"})]})]}),(ln==null?void 0:ln.length)>0?u.jsx("div",{className:"space-y-4",children:ln.map(($,Y)=>{const G=$.company?Ot[$.company]:null,Pe=$.originalIndex;return u.jsxs("div",{className:"flex items-start group",children:[G!=null&&G.logo?u.jsx("img",{src:G.logo,alt:G.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):u.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:u.jsx(Rr,{className:"w-10 h-10 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium",children:$.job_title}),$.company&&G&&u.jsx(ce,{to:`/companies/${$.company}`,className:"text-sm text-primary-600 hover:underline",children:G.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[$.start_date&&Cn(new Date($.start_date),"MMM yyyy")," - ",$.is_current?"Present":$.end_date?Cn(new Date($.end_date),"MMM yyyy"):""]}),$.description&&u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:$.description})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ce,{to:`/people/${t}/work-history/${Pe}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:u.jsx(ia,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Yi(Pe),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:u.jsx(ci,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Pe)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No work history yet."})]}),x.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(By,{className:"w-5 h-5 mr-2"}),"Investments"]}),u.jsx("div",{className:"space-y-3",children:x.map($=>u.jsxs(ce,{to:`/companies/${$.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[$.thumbnail?u.jsx("img",{src:$.thumbnail,alt:$.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Rr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:$.name}),$.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:$.industry})]})]},$.id))})]}),u.jsx(SSe,{isOpen:j,onClose:()=>P(!1),onSubmit:ye,isLoading:f.isPending}),u.jsx(FM,{isOpen:A,onClose:()=>{q(!1),H(null),he(null),Ie(null)},onSubmit:Ge,isLoading:z?m.isPending:p.isPending,personId:t,initialData:we,activity:z}),u.jsx(XR,{isOpen:xe,onClose:()=>{Be(!1),he(null)},todo:K,onComplete:se,onCompleteAsActivity:fe}),u.jsx(wie,{isOpen:R,onClose:()=>{L(!1),W(null)},onSubmit:D?zt:rt,isLoading:D?b.isPending:g.isPending,todo:D})]}),u.jsxs("div",{className:"space-y-6",children:[(dr.how_we_met||dr.met_date)&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),dr.met_date&&u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[u.jsx(vo,{className:"w-4 h-4 inline mr-1"}),Cn(new Date(dr.met_date),"MMMM d, yyyy")]}),dr.how_we_met&&u.jsx("p",{className:"text-sm",children:dr.how_we_met})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Todos"}),u.jsxs("button",{onClick:()=>{W(null),L(!0)},className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add todo"})]})]}),Um.length>0?u.jsx("div",{className:"space-y-2",children:Um.map($=>{const Y=em($);return u.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[u.jsx("button",{onClick:()=>_e($),className:"mt-0.5 mr-2 flex-shrink-0",title:$.is_completed?"Mark as incomplete":"Mark as complete",children:$.is_completed?u.jsx(MP,{className:"w-5 h-5 text-primary-600"}):u.jsx(Id,{className:`w-5 h-5 ${Y?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${$.is_completed?"line-through text-gray-400":Y?"text-red-600":""}`,children:$.content}),$.due_date&&u.jsxs("p",{className:`text-xs mt-0.5 ${Y&&!$.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Cn(new Date($.due_date),"MMM d, yyyy"),Y&&!$.is_completed&&" (overdue)"]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{W($),L(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(ia,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Ce($.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(ci,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},$.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Relationships"}),u.jsxs(ce,{to:`/people/${t}/relationship/new`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add relationship"})]})]}),(De==null?void 0:De.length)>0?u.jsx("div",{className:"space-y-2",children:De.map(($,Y)=>{var Pe,Xe,pt;const G=((Xe=(Pe=n==null?void 0:n.acf)==null?void 0:Pe.relationships)==null?void 0:Xe.findIndex(vt=>vt.related_person===$.related_person&&vt.relationship_type===$.relationship_type))??Y;return u.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[u.jsxs(ce,{to:`/people/${$.related_person}`,className:"flex items-center flex-1 min-w-0",children:[$.person_thumbnail?u.jsx("img",{src:$.person_thumbnail,alt:Gn($.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-gray-500",children:((pt=Gn($.person_name))==null?void 0:pt[0])||"?"})}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium",children:[Gn($.person_name)||`Person #${$.related_person}`,je[$.related_person]&&u.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),u.jsx("p",{className:"text-xs text-gray-500",children:Gn($.relationship_name||$.relationship_label)})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ce,{to:`/people/${t}/relationship/${G}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:u.jsx(ia,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>oe(G),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:u.jsx(ci,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Y)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No relationships yet."})]}),!Se&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Addresses"}),u.jsxs(ce,{to:`/people/${t}/address/new`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add address"})]})]}),((hD=dr.addresses)==null?void 0:hD.length)>0?u.jsx("div",{className:"space-y-4",children:dr.addresses.map(($,Y)=>{const G=[];$.street&&G.push($.street);const Pe=[$.postal_code,$.city].filter(Boolean).join(" ");Pe&&G.push(Pe);const Xe=[$.state,$.country].filter(Boolean).join(", ");Xe&&G.push(Xe);const pt=[$.street,$.postal_code,$.city,$.state,$.country].filter(Boolean).join(", "),vt=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(pt)}`;return u.jsx("div",{className:"group",children:u.jsxs("div",{className:"flex items-start rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[u.jsx(Rfe,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[$.address_label&&u.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:$.address_label}),u.jsx("a",{href:vt,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:G.map((Go,Gs)=>u.jsx("span",{className:"block",children:Go},Gs))})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ce,{to:`/people/${t}/address/${Y}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:u.jsx(ia,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>V(Y),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:u.jsx(ci,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},Y)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No addresses yet."})]})]})]})]})}var sm=t=>t.type==="checkbox",Fl=t=>t instanceof Date,zn=t=>t==null;const Sie=t=>typeof t=="object";var xr=t=>!zn(t)&&!Array.isArray(t)&&Sie(t)&&!Fl(t),_ie=t=>xr(t)&&t.target?sm(t.target)?t.target.checked:t.target.value:t,OSe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Eie=(t,e)=>t.has(OSe(e)),jSe=t=>{const e=t.constructor&&t.constructor.prototype;return xr(e)&&e.hasOwnProperty("isPrototypeOf")},qM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function jr(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(qM&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(xr(t)&&jSe(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=jr(t[i]));return n}var B0=t=>/^\w*$/.test(t),ar=t=>t===void 0,LM=t=>Array.isArray(t)?t.filter(Boolean):[],BM=t=>LM(t.replace(/["|']|\]/g,"").split(/\.|\[/)),pe=(t,e,r)=>{if(!e||!xr(t))return r;const n=(B0(e)?[e]:BM(e)).reduce((i,s)=>zn(i)?i:i[s],t);return ar(n)||n===t?ar(t[e])?r:t[e]:n},ui=t=>typeof t=="boolean",Tn=t=>typeof t=="function",jt=(t,e,r)=>{let n=-1;const i=B0(e)?[e]:BM(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const c=t[a];l=xr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Dv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ls={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},eo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Nie=Ae.createContext(null);Nie.displayName="HookFormContext";const zM=()=>Ae.useContext(Nie);var Cie=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==ls.all&&(e._proxyFormState[o]=!n||ls.all),r&&(r[o]=!0),t[o]}});return i};const VM=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;function PSe(t){const e=zM(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=Ae.useState(r._formState),l=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return VM(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:c=>{!n&&a({...r._formState,...c})}}),[i,n,s]),Ae.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),Ae.useMemo(()=>Cie(o,r,l.current,!1),[o,r])}var hi=t=>typeof t=="string",mI=(t,e,r,n,i)=>hi(t)?(n&&e.watch.add(t),pe(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),pe(r,s))):(n&&(e.watchAll=!0),r),gI=t=>zn(t)||!Sie(t);function cs(t,e,r=new WeakSet){if(gI(t)||gI(e))return Object.is(t,e);if(Fl(t)&&Fl(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Fl(o)&&Fl(a)||xr(o)&&xr(a)||Array.isArray(o)&&Array.isArray(a)?!cs(o,a,r):!Object.is(o,a))return!1}}return!0}function ISe(t){const e=zM(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=Ae.useRef(i),c=Ae.useRef(a),d=Ae.useRef(void 0),h=Ae.useRef(r),f=Ae.useRef(n);c.current=a;const[p,m]=Ae.useState(()=>{const x=r._getWatch(n,l.current);return c.current?c.current(x):x}),g=Ae.useCallback(x=>{const S=mI(n,r._names,x||r._formValues,!1,l.current);return c.current?c.current(S):S},[r._formValues,r._names,n]),b=Ae.useCallback(x=>{if(!s){const S=mI(n,r._names,x||r._formValues,!1,l.current);if(c.current){const _=c.current(S);cs(_,d.current)||(m(_),d.current=_)}else m(S)}},[r._formValues,r._names,s,n]);VM(()=>((h.current!==r||!cs(f.current,n))&&(h.current=r,f.current=n,b()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{b(x.values)}})),[r,o,n,b]),Ae.useEffect(()=>r._removeUnmounted());const y=h.current!==r,v=f.current,w=Ae.useMemo(()=>{if(s)return null;const x=!y&&!cs(v,n);return y||x?g():null},[s,y,n,v,g]);return w!==null?w:p}function RSe(t){const e=zM(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=Eie(i._names.array,r),c=Ae.useMemo(()=>pe(i._formValues,r,pe(i._defaultValues,r,o)),[i,r,o]),d=ISe({control:i,name:r,defaultValue:c,exact:a}),h=PSe({control:i,name:r,exact:a}),f=Ae.useRef(t),p=Ae.useRef(void 0),m=Ae.useRef(i.register(r,{...t.rules,value:d,...ui(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!pe(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!pe(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!pe(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!pe(h.validatingFields,r)},error:{enumerable:!0,get:()=>pe(h.errors,r)}}),[h,r]),b=Ae.useCallback(x=>m.current.onChange({target:{value:_ie(x),name:r},type:Dv.CHANGE}),[r]),y=Ae.useCallback(()=>m.current.onBlur({target:{value:pe(i._formValues,r),name:r},type:Dv.BLUR}),[r,i._formValues]),v=Ae.useCallback(x=>{const S=pe(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>Tn(x.focus)&&x.focus(),select:()=>Tn(x.select)&&x.select(),setCustomValidity:_=>Tn(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>Tn(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=Ae.useMemo(()=>({name:r,value:d,...ui(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:b,onBlur:y,ref:v}),[r,n,h.disabled,b,y,v,d]);return Ae.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...ui(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(N,E)=>{const k=pe(i._fields,N);k&&k._f&&(k._f.mount=E)};if(_(r,!0),x){const N=jr(pe(i._options.defaultValues,r,f.current.defaultValue));jt(i._defaultValues,r,N),ar(pe(i._formValues,r))&&jt(i._formValues,r,N)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),Ae.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Ae.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const Av=t=>t.render(RSe(t));var MSe=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},$f=t=>Array.isArray(t)?t:[t],Q4=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function kie(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&xr(i)&&s){const o=kie(i,s);xr(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var Sn=t=>xr(t)&&!Object.keys(t).length,UM=t=>t.type==="file",Fv=t=>{if(!qM)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Tie=t=>t.type==="select-multiple",HM=t=>t.type==="radio",$Se=t=>HM(t)||sm(t),D1=t=>Fv(t)&&t.isConnected;function DSe(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=ar(t)?n++:t[e[n++]];return t}function ASe(t){for(const e in t)if(t.hasOwnProperty(e)&&!ar(t[e]))return!1;return!0}function yr(t,e){const r=Array.isArray(e)?e:B0(e)?[e]:BM(e),n=r.length===1?t:DSe(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(xr(n)&&Sn(n)||Array.isArray(n)&&ASe(n))&&yr(t,r.slice(0,-1)),t}var FSe=t=>{for(const e in t)if(Tn(t[e]))return!0;return!1};function Oie(t){return Array.isArray(t)||xr(t)&&!FSe(t)}function yI(t,e={}){for(const r in t){const n=t[r];Oie(n)?(e[r]=Array.isArray(n)?[]:{},yI(n,e[r])):ar(n)||(e[r]=!0)}return e}function Tu(t,e,r){r||(r=yI(e));for(const n in t){const i=t[n];if(Oie(i))ar(e)||gI(r[n])?r[n]=yI(i,Array.isArray(i)?[]:{}):Tu(i,zn(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!cs(i,s)}}return r}const X4={value:!1,isValid:!1},J4={value:!0,isValid:!0};var jie=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ar(t[0].attributes.value)?ar(t[0].value)||t[0].value===""?J4:{value:t[0].value,isValid:!0}:J4:X4}return X4},Pie=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>ar(t)?t:e?t===""?NaN:t&&+t:r&&hi(t)?new Date(t):n?n(t):t;const Z4={isValid:!1,value:null};var Iie=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,Z4):Z4;function eq(t){const e=t.ref;return UM(e)?e.files:HM(e)?Iie(t.refs).value:Tie(e)?[...e.selectedOptions].map(({value:r})=>r):sm(e)?jie(t.refs).value:Pie(ar(e.value)?t.ref.value:e.value,t)}var qSe=(t,e,r,n)=>{const i={};for(const s of t){const o=pe(e,s);o&&jt(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},qv=t=>t instanceof RegExp,Jh=t=>ar(t)?t:qv(t)?t.source:xr(t)?qv(t.value)?t.value.source:t.value:t,tq=t=>({isOnSubmit:!t||t===ls.onSubmit,isOnBlur:t===ls.onBlur,isOnChange:t===ls.onChange,isOnAll:t===ls.all,isOnTouch:t===ls.onTouched});const rq="AsyncFunction";var LSe=t=>!!t&&!!t.validate&&!!(Tn(t.validate)&&t.validate.constructor.name===rq||xr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===rq)),BSe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),nq=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Df=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=pe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(Df(a,e))break}else if(xr(a)&&Df(a,e))break}}};function iq(t,e,r){const n=pe(t,r);if(n||B0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=pe(e,s),a=pe(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var zSe=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return Sn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||ls.all))},VSe=(t,e,r)=>!t||!e||t===e||$f(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),USe=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,HSe=(t,e)=>!LM(pe(t,e)).length&&yr(t,e),WSe=(t,e,r)=>{const n=$f(pe(t,r));return jt(n,"root",e[r]),jt(t,r,n),t};function sq(t,e,r="validate"){if(hi(t)||Array.isArray(t)&&t.every(hi)||ui(t)&&!t)return{type:r,message:hi(t)?t:"",ref:e}}var xu=t=>xr(t)&&!qv(t)?t:{value:t,message:""},oq=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:b,mount:y}=t._f,v=pe(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=j=>{i&&w.reportValidity&&(w.setCustomValidity(ui(j)?"":j||""),w.reportValidity())},S={},_=HM(o),N=sm(o),E=_||N,k=(b||UM(o))&&ar(o.value)&&ar(v)||Fv(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,C=MSe.bind(null,g,n,S),O=(j,P,A,q=eo.maxLength,R=eo.minLength)=>{const L=j?P:A;S[g]={type:j?q:R,message:L,ref:o,...C(j?q:R,L)}};if(s?!Array.isArray(v)||!v.length:l&&(!E&&(k||zn(v))||ui(v)&&!v||N&&!jie(a).isValid||_&&!Iie(a).isValid)){const{value:j,message:P}=hi(l)?{value:!!l,message:l}:xu(l);if(j&&(S[g]={type:eo.required,message:P,ref:w,...C(eo.required,P)},!n))return x(P),S}if(!k&&(!zn(h)||!zn(f))){let j,P;const A=xu(f),q=xu(h);if(!zn(v)&&!isNaN(v)){const R=o.valueAsNumber||v&&+v;zn(A.value)||(j=R>A.value),zn(q.value)||(P=R<q.value)}else{const R=o.valueAsDate||new Date(v),L=z=>new Date(new Date().toDateString()+" "+z),D=o.type=="time",W=o.type=="week";hi(A.value)&&v&&(j=D?L(v)>L(A.value):W?v>A.value:R>new Date(A.value)),hi(q.value)&&v&&(P=D?L(v)<L(q.value):W?v<q.value:R<new Date(q.value))}if((j||P)&&(O(!!j,A.message,q.message,eo.max,eo.min),!n))return x(S[g].message),S}if((c||d)&&!k&&(hi(v)||s&&Array.isArray(v))){const j=xu(c),P=xu(d),A=!zn(j.value)&&v.length>+j.value,q=!zn(P.value)&&v.length<+P.value;if((A||q)&&(O(A,j.message,P.message),!n))return x(S[g].message),S}if(p&&!k&&hi(v)){const{value:j,message:P}=xu(p);if(qv(j)&&!v.match(j)&&(S[g]={type:eo.pattern,message:P,ref:o,...C(eo.pattern,P)},!n))return x(P),S}if(m){if(Tn(m)){const j=await m(v,r),P=sq(j,w);if(P&&(S[g]={...P,...C(eo.validate,P.message)},!n))return x(P.message),S}else if(xr(m)){let j={};for(const P in m){if(!Sn(j)&&!n)break;const A=sq(await m[P](v,r),w,P);A&&(j={...A,...C(P,A.message)},x(A.message),n&&(S[g]=j))}if(!Sn(j)&&(S[g]={ref:w,...j},!n))return S}}return x(!0),S};const KSe={mode:ls.onSubmit,reValidateMode:ls.onChange,shouldFocusError:!0};function GSe(t={}){let e={...KSe,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Tn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=xr(e.defaultValues)||xr(e.values)?jr(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:jr(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:Q4(),state:Q4()},m=e.criteriaMode===ls.all,g=M=>F=>{clearTimeout(c),c=setTimeout(M,F)},b=async M=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||M)){let F;e.resolver?(F=Sn((await E()).errors),y()):F=await C(n,!0),F!==r.isValid&&p.state.next({isValid:F})}},y=(M,F)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((M||Array.from(a.mount)).forEach(V=>{V&&(F?jt(r.validatingFields,V,F):yr(r.validatingFields,V))}),p.state.next({validatingFields:r.validatingFields,isValidating:!Sn(r.validatingFields)}))},v=(M,F=[],V,oe,Z=!0,Q=!0)=>{if(oe&&V&&!e.disabled){if(o.action=!0,Q&&Array.isArray(pe(n,M))){const ye=V(pe(n,M),oe.argA,oe.argB);Z&&jt(n,M,ye)}if(Q&&Array.isArray(pe(r.errors,M))){const ye=V(pe(r.errors,M),oe.argA,oe.argB);Z&&jt(r.errors,M,ye),HSe(r.errors,M)}if((h.touchedFields||f.touchedFields)&&Q&&Array.isArray(pe(r.touchedFields,M))){const ye=V(pe(r.touchedFields,M),oe.argA,oe.argB);Z&&jt(r.touchedFields,M,ye)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Tu(i,s)),p.state.next({name:M,isDirty:j(M,F),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else jt(s,M,F)},w=(M,F)=>{jt(r.errors,M,F),p.state.next({errors:r.errors})},x=M=>{r.errors=M,p.state.next({errors:r.errors,isValid:!1})},S=(M,F,V,oe)=>{const Z=pe(n,M);if(Z){const Q=pe(s,M,ar(V)?pe(i,M):V);ar(Q)||oe&&oe.defaultChecked||F?jt(s,M,F?Q:eq(Z._f)):q(M,Q),o.mount&&!o.action&&b()}},_=(M,F,V,oe,Z)=>{let Q=!1,ye=!1;const Ge={name:M};if(!e.disabled){if(!V||oe){(h.isDirty||f.isDirty)&&(ye=r.isDirty,r.isDirty=Ge.isDirty=j(),Q=ye!==Ge.isDirty);const rt=cs(pe(i,M),F);ye=!!pe(r.dirtyFields,M),rt?yr(r.dirtyFields,M):jt(r.dirtyFields,M,!0),Ge.dirtyFields=r.dirtyFields,Q=Q||(h.dirtyFields||f.dirtyFields)&&ye!==!rt}if(V){const rt=pe(r.touchedFields,M);rt||(jt(r.touchedFields,M,V),Ge.touchedFields=r.touchedFields,Q=Q||(h.touchedFields||f.touchedFields)&&rt!==V)}Q&&Z&&p.state.next(Ge)}return Q?Ge:{}},N=(M,F,V,oe)=>{const Z=pe(r.errors,M),Q=(h.isValid||f.isValid)&&ui(F)&&r.isValid!==F;if(e.delayError&&V?(l=g(()=>w(M,V)),l(e.delayError)):(clearTimeout(c),l=null,V?jt(r.errors,M,V):yr(r.errors,M)),(V?!cs(Z,V):Z)||!Sn(oe)||Q){const ye={...oe,...Q&&ui(F)?{isValid:F}:{},errors:r.errors,name:M};r={...r,...ye},p.state.next(ye)}},E=async M=>(y(M,!0),await e.resolver(s,e.context,qSe(M||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),k=async M=>{const{errors:F}=await E(M);if(y(M),M)for(const V of M){const oe=pe(F,V);oe?jt(r.errors,V,oe):yr(r.errors,V)}else r.errors=F;return F},C=async(M,F,V={valid:!0})=>{for(const oe in M){const Z=M[oe];if(Z){const{_f:Q,...ye}=Z;if(Q){const Ge=a.array.has(Q.name),rt=Z._f&&LSe(Z._f);rt&&h.validatingFields&&y([Q.name],!0);const zt=await oq(Z,a.disabled,s,m,e.shouldUseNativeValidation&&!F,Ge);if(rt&&h.validatingFields&&y([Q.name]),zt[Q.name]&&(V.valid=!1,F))break;!F&&(pe(zt,Q.name)?Ge?WSe(r.errors,zt,Q.name):jt(r.errors,Q.name,zt[Q.name]):yr(r.errors,Q.name))}!Sn(ye)&&await C(ye,F,V)}}return V.valid},O=()=>{for(const M of a.unMount){const F=pe(n,M);F&&(F._f.refs?F._f.refs.every(V=>!D1(V)):!D1(F._f.ref))&&ze(M)}a.unMount=new Set},j=(M,F)=>!e.disabled&&(M&&F&&jt(s,M,F),!cs(H(),i)),P=(M,F,V)=>mI(M,a,{...o.mount?s:ar(F)?i:hi(M)?{[M]:F}:F},V,F),A=M=>LM(pe(o.mount?s:i,M,e.shouldUnregister?pe(i,M,[]):[])),q=(M,F,V={})=>{const oe=pe(n,M);let Z=F;if(oe){const Q=oe._f;Q&&(!Q.disabled&&jt(s,M,Pie(F,Q)),Z=Fv(Q.ref)&&zn(F)?"":F,Tie(Q.ref)?[...Q.ref.options].forEach(ye=>ye.selected=Z.includes(ye.value)):Q.refs?sm(Q.ref)?Q.refs.forEach(ye=>{(!ye.defaultChecked||!ye.disabled)&&(Array.isArray(Z)?ye.checked=!!Z.find(Ge=>Ge===ye.value):ye.checked=Z===ye.value||!!Z)}):Q.refs.forEach(ye=>ye.checked=ye.value===Z):UM(Q.ref)?Q.ref.value="":(Q.ref.value=Z,Q.ref.type||p.state.next({name:M,values:jr(s)})))}(V.shouldDirty||V.shouldTouch)&&_(M,Z,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&z(M)},R=(M,F,V)=>{for(const oe in F){if(!F.hasOwnProperty(oe))return;const Z=F[oe],Q=M+"."+oe,ye=pe(n,Q);(a.array.has(M)||xr(Z)||ye&&!ye._f)&&!Fl(Z)?R(Q,Z,V):q(Q,Z,V)}},L=(M,F,V={})=>{const oe=pe(n,M),Z=a.array.has(M),Q=jr(F);jt(s,M,Q),Z?(p.array.next({name:M,values:jr(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&V.shouldDirty&&p.state.next({name:M,dirtyFields:Tu(i,s),isDirty:j(M,Q)})):oe&&!oe._f&&!zn(Q)?R(M,Q,V):q(M,Q,V),nq(M,a)&&p.state.next({...r,name:M}),p.state.next({name:o.mount?M:void 0,values:jr(s)})},D=async M=>{o.mount=!0;const F=M.target;let V=F.name,oe=!0;const Z=pe(n,V),Q=rt=>{oe=Number.isNaN(rt)||Fl(rt)&&isNaN(rt.getTime())||cs(rt,pe(s,V,rt))},ye=tq(e.mode),Ge=tq(e.reValidateMode);if(Z){let rt,zt;const _e=F.type?eq(Z._f):_ie(M),se=M.type===Dv.BLUR||M.type===Dv.FOCUS_OUT,fe=!BSe(Z._f)&&!e.resolver&&!pe(r.errors,V)&&!Z._f.deps||USe(se,pe(r.touchedFields,V),r.isSubmitted,Ge,ye),de=nq(V,a,se);jt(s,V,_e),se?(!F||!F.readOnly)&&(Z._f.onBlur&&Z._f.onBlur(M),l&&l(0)):Z._f.onChange&&Z._f.onChange(M);const Ce=_(V,_e,se),ot=!Sn(Ce)||de;if(!se&&p.state.next({name:V,type:M.type,values:jr(s)}),fe)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?se&&b():se||b()),ot&&p.state.next({name:V,...de?{}:Ce});if(!se&&de&&p.state.next({...r}),e.resolver){const{errors:_i}=await E([V]);if(y([V]),Q(_e),oe){const Yi=iq(r.errors,n,V),hu=iq(_i,n,Yi.name||V);rt=hu.error,V=hu.name,zt=Sn(_i)}}else y([V],!0),rt=(await oq(Z,a.disabled,s,m,e.shouldUseNativeValidation))[V],y([V]),Q(_e),oe&&(rt?zt=!1:(h.isValid||f.isValid)&&(zt=await C(n,!0)));oe&&(Z._f.deps&&(!Array.isArray(Z._f.deps)||Z._f.deps.length>0)&&z(Z._f.deps),N(V,zt,rt,Ce))}},W=(M,F)=>{if(pe(r.errors,F)&&M.focus)return M.focus(),1},z=async(M,F={})=>{let V,oe;const Z=$f(M);if(e.resolver){const Q=await k(ar(M)?M:Z);V=Sn(Q),oe=M?!Z.some(ye=>pe(Q,ye)):V}else M?(oe=(await Promise.all(Z.map(async Q=>{const ye=pe(n,Q);return await C(ye&&ye._f?{[Q]:ye}:ye)}))).every(Boolean),!(!oe&&!r.isValid)&&b()):oe=V=await C(n);return p.state.next({...!hi(M)||(h.isValid||f.isValid)&&V!==r.isValid?{}:{name:M},...e.resolver||!M?{isValid:V}:{},errors:r.errors}),F.shouldFocus&&!oe&&Df(n,W,M?Z:a.mount),oe},H=(M,F)=>{let V={...o.mount?s:i};return F&&(V=kie(F.dirtyFields?r.dirtyFields:r.touchedFields,V)),ar(M)?V:hi(M)?pe(V,M):M.map(oe=>pe(V,oe))},K=(M,F)=>({invalid:!!pe((F||r).errors,M),isDirty:!!pe((F||r).dirtyFields,M),error:pe((F||r).errors,M),isValidating:!!pe(r.validatingFields,M),isTouched:!!pe((F||r).touchedFields,M)}),he=M=>{M&&$f(M).forEach(F=>yr(r.errors,F)),p.state.next({errors:M?r.errors:{}})},xe=(M,F,V)=>{const oe=(pe(n,M,{_f:{}})._f||{}).ref,Z=pe(r.errors,M)||{},{ref:Q,message:ye,type:Ge,...rt}=Z;jt(r.errors,M,{...rt,...F,ref:oe}),p.state.next({name:M,errors:r.errors,isValid:!1}),V&&V.shouldFocus&&oe&&oe.focus&&oe.focus()},Be=(M,F)=>Tn(M)?p.state.subscribe({next:V=>"values"in V&&M(P(void 0,F),V)}):P(M,F,!0),we=M=>p.state.subscribe({next:F=>{VSe(M.name,F.name,M.exact)&&zSe(F,M.formState||h,We,M.reRenderRoot)&&M.callback({values:{...s},...r,...F,defaultValues:i})}}).unsubscribe,Ie=M=>(o.mount=!0,f={...f,...M.formState},we({...M,formState:{...d,...M.formState}})),ze=(M,F={})=>{for(const V of M?$f(M):a.mount)a.mount.delete(V),a.array.delete(V),F.keepValue||(yr(n,V),yr(s,V)),!F.keepError&&yr(r.errors,V),!F.keepDirty&&yr(r.dirtyFields,V),!F.keepTouched&&yr(r.touchedFields,V),!F.keepIsValidating&&yr(r.validatingFields,V),!e.shouldUnregister&&!F.keepDefaultValue&&yr(i,V);p.state.next({values:jr(s)}),p.state.next({...r,...F.keepDirty?{isDirty:j()}:{}}),!F.keepIsValid&&b()},Ze=({disabled:M,name:F})=>{(ui(M)&&o.mount||M||a.disabled.has(F))&&(M?a.disabled.add(F):a.disabled.delete(F))},Nt=(M,F={})=>{let V=pe(n,M);const oe=ui(F.disabled)||ui(e.disabled);return jt(n,M,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:M}},name:M,mount:!0,...F}}),a.mount.add(M),V?Ze({disabled:ui(F.disabled)?F.disabled:e.disabled,name:M}):S(M,!0,F.value),{...oe?{disabled:F.disabled||e.disabled}:{},...e.progressive?{required:!!F.required,min:Jh(F.min),max:Jh(F.max),minLength:Jh(F.minLength),maxLength:Jh(F.maxLength),pattern:Jh(F.pattern)}:{},name:M,onChange:D,onBlur:D,ref:Z=>{if(Z){Nt(M,F),V=pe(n,M);const Q=ar(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,ye=$Se(Q),Ge=V._f.refs||[];if(ye?Ge.find(rt=>rt===Q):Q===V._f.ref)return;jt(n,M,{_f:{...V._f,...ye?{refs:[...Ge.filter(D1),Q,...Array.isArray(pe(i,M))?[{}]:[]],ref:{type:Q.type,name:M}}:{ref:Q}}}),S(M,!1,void 0,Q)}else V=pe(n,M,{}),V._f&&(V._f.mount=!1),(e.shouldUnregister||F.shouldUnregister)&&!(Eie(a.array,M)&&o.action)&&a.unMount.add(M)}}},ft=()=>e.shouldFocusError&&Df(n,W,a.mount),J=M=>{ui(M)&&(p.state.next({disabled:M}),Df(n,(F,V)=>{const oe=pe(n,V);oe&&(F.disabled=oe._f.disabled||M,Array.isArray(oe._f.refs)&&oe._f.refs.forEach(Z=>{Z.disabled=oe._f.disabled||M}))},0,!1))},Ne=(M,F)=>async V=>{let oe;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let Z=jr(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Q,values:ye}=await E();y(),r.errors=Q,Z=jr(ye)}else await C(n);if(a.disabled.size)for(const Q of a.disabled)yr(Z,Q);if(yr(r.errors,"root"),Sn(r.errors)){p.state.next({errors:{}});try{await M(Z,V)}catch(Q){oe=Q}}else F&&await F({...r.errors},V),ft(),setTimeout(ft);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Sn(r.errors)&&!oe,submitCount:r.submitCount+1,errors:r.errors}),oe)throw oe},Ue=(M,F={})=>{pe(n,M)&&(ar(F.defaultValue)?L(M,jr(pe(i,M))):(L(M,F.defaultValue),jt(i,M,jr(F.defaultValue))),F.keepTouched||yr(r.touchedFields,M),F.keepDirty||(yr(r.dirtyFields,M),r.isDirty=F.defaultValue?j(M,jr(pe(i,M))):j()),F.keepError||(yr(r.errors,M),h.isValid&&b()),p.state.next({...r}))},et=(M,F={})=>{const V=M?jr(M):i,oe=jr(V),Z=Sn(M),Q=Z?i:oe;if(F.keepDefaultValues||(i=V),!F.keepValues){if(F.keepDirtyValues){const ye=new Set([...a.mount,...Object.keys(Tu(i,s))]);for(const Ge of Array.from(ye))pe(r.dirtyFields,Ge)?jt(Q,Ge,pe(s,Ge)):L(Ge,pe(Q,Ge))}else{if(qM&&ar(M))for(const ye of a.mount){const Ge=pe(n,ye);if(Ge&&Ge._f){const rt=Array.isArray(Ge._f.refs)?Ge._f.refs[0]:Ge._f.ref;if(Fv(rt)){const zt=rt.closest("form");if(zt){zt.reset();break}}}}if(F.keepFieldsRef)for(const ye of a.mount)L(ye,pe(Q,ye));else n={}}s=e.shouldUnregister?F.keepDefaultValues?jr(i):{}:jr(Q),p.array.next({values:{...Q}}),p.state.next({values:{...Q}})}a={mount:F.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!F.keepIsValid||!!F.keepDirtyValues||!e.shouldUnregister&&!Sn(Q),o.watch=!!e.shouldUnregister,o.keepIsValid=!!F.keepIsValid,o.action=!1,F.keepErrors||(r.errors={}),p.state.next({submitCount:F.keepSubmitCount?r.submitCount:0,isDirty:Z?!1:F.keepDirty?r.isDirty:!!(F.keepDefaultValues&&!cs(M,i)),isSubmitted:F.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Z?{}:F.keepDirtyValues?F.keepDefaultValues&&s?Tu(i,s):r.dirtyFields:F.keepDefaultValues&&M?Tu(i,M):F.keepDirty?r.dirtyFields:{},touchedFields:F.keepTouched?r.touchedFields:{},errors:F.keepErrors?r.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Lt=(M,F)=>et(Tn(M)?M(s):M,{...e.resetOptions,...F}),Se=(M,F={})=>{const V=pe(n,M),oe=V&&V._f;if(oe){const Z=oe.refs?oe.refs[0]:oe.ref;Z.focus&&setTimeout(()=>{Z.focus(),F.shouldSelect&&Tn(Z.select)&&Z.select()})}},We=M=>{r={...r,...M}},Bt={control:{register:Nt,unregister:ze,getFieldState:K,handleSubmit:Ne,setError:xe,_subscribe:we,_runSchema:E,_updateIsValidating:y,_focusError:ft,_getWatch:P,_getDirty:j,_setValid:b,_setFieldArray:v,_setDisabledField:Ze,_setErrors:x,_getFieldArray:A,_reset:et,_resetDefaultValues:()=>Tn(e.defaultValues)&&e.defaultValues().then(M=>{Lt(M,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:J,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(M){o=M},get _defaultValues(){return i},get _names(){return a},set _names(M){a=M},get _formState(){return r},get _options(){return e},set _options(M){e={...e,...M}}},subscribe:Ie,trigger:z,register:Nt,handleSubmit:Ne,watch:Be,setValue:L,getValues:H,reset:Lt,resetField:Ue,clearErrors:he,unregister:ze,setError:xe,setFocus:Se,getFieldState:K};return{...Bt,formControl:Bt}}function Wc(t={}){const e=Ae.useRef(void 0),r=Ae.useRef(void 0),[n,i]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:Tn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Tn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!Tn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=GSe(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,VM(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Ae.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Ae.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Ae.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Ae.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Ae.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),Ae.useEffect(()=>{var o;t.values&&!cs(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),Ae.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=Cie(n,s),e.current}function aq(){var q;const{id:t}=Vs(),e=vn(),[r]=RR(),n=!!t,i=r.get("returnTo"),s=r.get("sourcePersonId"),{data:o,isLoading:a}=zc(t),l=Xfe(),c=sh(),{data:d=[]}=ut({queryKey:["date-types"],queryFn:async()=>(await Ke.getDateTypes()).data}),h=d.find(R=>R.slug==="birthday"||R.name.toLowerCase()==="birthday"),[f,p]=T.useState(!1),[m,g]=T.useState(null),[b,y]=T.useState(null),v=ht({mutationFn:async R=>{const L=new FormData;return L.append("file",R),(await ue.post("/prm/v1/import/vcard/parse",L,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:x,reset:S,watch:_,formState:{errors:N,isSubmitting:E}}=Wc({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",how_we_met:"",is_favorite:!1,birthday:""}});_("phone"),T.useEffect(()=>{var R,L,D,W,z,H,K,he,xe,Be;if(o){const we=(L=(R=o.acf)==null?void 0:R.contact_info)==null?void 0:L.find(ft=>ft.contact_type==="email"),Ie=(we==null?void 0:we.contact_value)||"",ze=(W=(D=o.acf)==null?void 0:D.contact_info)==null?void 0:W.find(ft=>ft.contact_type==="phone"||ft.contact_type==="mobile"),Ze=(ze==null?void 0:ze.contact_value)||"",Nt=(ze==null?void 0:ze.contact_type)||"mobile";S({first_name:((z=o.acf)==null?void 0:z.first_name)||"",last_name:((H=o.acf)==null?void 0:H.last_name)||"",nickname:((K=o.acf)==null?void 0:K.nickname)||"",gender:((he=o.acf)==null?void 0:he.gender)||"",email:Ie,phone:Ze,phone_type:Nt,how_we_met:((xe=o.acf)==null?void 0:xe.how_we_met)||"",is_favorite:((Be=o.acf)==null?void 0:Be.is_favorite)||!1,birthday:""})}},[o,S]),An(n&&o?`Edit ${((q=o.title)==null?void 0:q.rendered)||o.title||"person"}`:"New person");const k=T.useCallback(R=>{R.preventDefault(),R.stopPropagation(),R.type==="dragenter"||R.type==="dragover"?p(!0):R.type==="dragleave"&&p(!1)},[]),C=T.useCallback(R=>{R.preventDefault(),R.stopPropagation(),p(!1),y(null),R.dataTransfer.files&&R.dataTransfer.files[0]&&O(R.dataTransfer.files[0])},[]),O=R=>{const L=R.name.split(".").pop().toLowerCase();if(L!=="vcf"&&L!=="vcard"){y("Please select a vCard file (.vcf)");return}g(R),v.mutate(R,{onSuccess:D=>{S({first_name:D.first_name||"",last_name:D.last_name||"",nickname:D.nickname||"",gender:"",email:D.email||"",phone:D.phone||"",phone_type:D.phone_type||"mobile",how_we_met:D.note||"",is_favorite:!1,birthday:D.birthday||""}),D.contact_count>1&&y(`Note: File contains ${D.contact_count} contacts. Only the first contact was loaded.`)},onError:D=>{var W,z;y(((z=(W=D.response)==null?void 0:W.data)==null?void 0:z.message)||"Failed to parse vCard file"),g(null)}})},j=R=>{y(null),R.target.files&&R.target.files[0]&&O(R.target.files[0])},P=()=>{g(null),y(null),v.reset()},A=async R=>{try{const D=`${R.first_name||""} ${R.last_name||""}`.trim()||"Unnamed Person",W={title:D,status:"publish",acf:{first_name:R.first_name,last_name:R.last_name,nickname:R.nickname,gender:R.gender||null,how_we_met:R.how_we_met,is_favorite:R.is_favorite}};if(!n&&(R.email||R.phone)){const z=[];R.email&&z.push({contact_type:"email",contact_value:R.email,contact_label:""}),R.phone&&z.push({contact_type:R.phone_type||"mobile",contact_value:R.phone,contact_label:""}),W.acf.contact_info=z}if(n)W.title=D,await c.mutateAsync({id:t,data:W}),e(`/people/${t}`);else{const H=(await l.mutateAsync(W)).data.id;if(R.email)try{await Fe.sideloadGravatar(H,R.email)}catch(K){console.error("Failed to load Gravatar:",K)}if(R.birthday&&h)try{const K=R.first_name||"Person";await Ke.createDate({title:`${K}'s Birthday`,status:"publish",date_type:[h.id],acf:{date_value:R.birthday,is_recurring:!0,related_people:[H],reminder_days_before:7}})}catch(K){console.error("Failed to create birthday:",K)}e(i==="relationship"&&s?`/people/${s}/relationship/new?newPersonId=${H}`:`/people/${H}`)}}catch(L){console.error("Failed to save person:",L)}};return n&&a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:i==="relationship"&&s?u.jsxs(ce,{to:`/people/${s}/relationship/new`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to add relationship"})]}):u.jsxs(ce,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit person":"Add new person"}),!n&&u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-4 text-center transition-colors ${f?"border-primary-500 bg-primary-50":m&&!b?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:C,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:j,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),v.isPending?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):m&&!b?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(Jp,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",m.name]}),u.jsx("button",{type:"button",onClick:R=>{R.preventDefault(),R.stopPropagation(),P()},className:"ml-2 p-1 hover:bg-green-100 rounded",children:u.jsx(gn,{className:"h-4 w-4 text-green-600"})})]}):u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(_c,{className:"h-5 w-5 text-gray-400"}),u.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard file here to import, or ",u.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),b&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-sm text-amber-700 bg-amber-50 rounded-lg p-2",children:[u.jsx(Mo,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:b})]})]}),u.jsxs("form",{onSubmit:x(A),className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"First name *"}),u.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John"}),N.first_name&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.first_name.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Last name"}),u.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Nickname"}),u.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Gender"}),u.jsxs("select",{...w("gender"),className:"input",children:[u.jsx("option",{value:"",children:"Select gender..."}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"non_binary",children:"Non-binary"}),u.jsx("option",{value:"other",children:"Other"}),u.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Email"}),u.jsx("input",{type:"email",...w("email"),className:"input",placeholder:"john@example.com"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: If a Gravatar is associated with this email, it will be automatically set as the profile photo"})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Phone"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{...w("phone_type"),className:"input w-28",children:[u.jsx("option",{value:"mobile",children:"Mobile"}),u.jsx("option",{value:"phone",children:"Phone"})]}),u.jsx("input",{type:"tel",...w("phone"),className:"input flex-1",placeholder:"+1 555 123 4567"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Birthday"}),u.jsx("input",{type:"date",...w("birthday"),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set their birthday when creating a new person"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"How we met"}),u.jsx("textarea",{...w("how_we_met"),className:"input",rows:4,placeholder:"We met at..."})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i==="relationship"&&s?u.jsx(ce,{to:`/people/${s}/relationship/new`,className:"btn-secondary",children:"Cancel"}):u.jsx(ce,{to:"/people",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:E,children:[E?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx($o,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create person"]})]})]})]})]})}function YSe({value:t,onChange:e,companies:r,isLoading:n}){return u.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return u.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function lq(){var v,w;const{personId:t,index:e}=Vs(),r=vn();yt();const n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:o}=zc(t),a=sh(),{data:l=[],isLoading:c}=ut({queryKey:["companies","all"],queryFn:async()=>(await Ke.getCompanies({per_page:100,orderby:"title",order:"asc"})).data}),{register:d,handleSubmit:h,reset:f,watch:p,control:m,formState:{errors:g,isSubmitting:b}}=Wc({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});T.useEffect(()=>{var x;if(s&&i){const _=(((x=s.acf)==null?void 0:x.work_history)||[])[n];_&&f({company:_.company||null,job_title:_.job_title||"",description:_.description||"",start_date:_.start_date||"",end_date:_.end_date||"",is_current:_.is_current||!1})}},[s,n,i,f]),An(i?`Edit work history - ${((v=s==null?void 0:s.title)==null?void 0:v.rendered)||(s==null?void 0:s.title)||"person"}`:`Add work history - ${((w=s==null?void 0:s.title)==null?void 0:w.rendered)||(s==null?void 0:s.title)||"person"}`);const y=async x=>{var S;try{const _=[...((S=s.acf)==null?void 0:S.work_history)||[]],N={company:x.company||null,job_title:x.job_title||"",description:x.description||"",start_date:x.start_date||"",end_date:x.end_date||"",is_current:x.is_current||!1};i?_[n]=N:_.push(N);const E=uo(s.acf,{work_history:_});await a.mutateAsync({id:t,data:{acf:E}}),r(`/people/${t}`)}catch(_){console.error("Failed to save work history:",_)}};return p("is_current"),o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit work history":"Add work history"}),u.jsxs("form",{onSubmit:h(y),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization"}),u.jsx(Av,{name:"company",control:m,render:({field:x})=>u.jsx(YSe,{value:x.value,onChange:x.onChange,companies:l,isLoading:c})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Job title"}),u.jsx("input",{...d("job_title"),className:"input",placeholder:"e.g., Software Engineer"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Description"}),u.jsx("textarea",{...d("description"),className:"input",rows:4,placeholder:"Job description, responsibilities, achievements..."})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Start date"}),u.jsx("input",{type:"date",...d("start_date"),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"End date"}),u.jsx("input",{type:"date",...d("end_date"),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set a future end date to automatically mark as former when it passes"})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_current",...d("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:b,children:[b?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx($o,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add work history"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}const QSe=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"other",label:"Other"}];function cq(){var g,b;const{personId:t,index:e}=Vs(),r=vn(),n=yt(),i=parseInt(e,10),s=!isNaN(i),{data:o,isLoading:a}=zc(t),l=sh(),{register:c,handleSubmit:d,reset:h,formState:{errors:f,isSubmitting:p}}=Wc({defaultValues:{contact_type:"",contact_label:"",contact_value:""}});T.useEffect(()=>{var y;if(o&&s){const w=(((y=o.acf)==null?void 0:y.contact_info)||[])[i];w&&h({contact_type:w.contact_type||"",contact_label:w.contact_label||"",contact_value:w.contact_value||""})}},[o,i,s,h]),An(s?`Edit contact detail - ${((g=o==null?void 0:o.title)==null?void 0:g.rendered)||(o==null?void 0:o.title)||"person"}`:`Add contact detail - ${((b=o==null?void 0:o.title)==null?void 0:b.rendered)||(o==null?void 0:o.title)||"person"}`);const m=async y=>{var v,w,x,S;try{const _=[...((v=o.acf)==null?void 0:v.contact_info)||[]],N={contact_type:y.contact_type||"",contact_label:y.contact_label||"",contact_value:y.contact_value||""};s?_[i]=N:_.push(N);const E=uo(o.acf,{contact_info:_});if(await l.mutateAsync({id:t,data:{acf:E}}),!s&&y.contact_type==="email"&&y.contact_value&&!(o.featured_media>0||((S=(x=(w=o._embedded)==null?void 0:w["wp:featuredmedia"])==null?void 0:x[0])==null?void 0:S.source_url)||o.thumbnail))try{await Fe.sideloadGravatar(t,y.contact_value),n.invalidateQueries({queryKey:["person",t]})}catch(C){console.log("No Gravatar found or failed to load:",C)}r(`/people/${t}`)}catch(_){console.error("Failed to save contact detail:",_)}};return a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):o?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:s?"Edit contact detail":"Add contact detail"}),u.jsxs("form",{onSubmit:d(m),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Contact type *"}),u.jsxs("select",{...c("contact_type",{required:"Please select a contact type"}),className:"input",children:[u.jsx("option",{value:"",children:"Select a type..."}),QSe.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))]}),f.contact_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.contact_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...c("contact_label"),className:"input",placeholder:"e.g., Work, Personal, Home"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Add a label to distinguish multiple entries of the same type"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Value *"}),u.jsx("input",{...c("contact_value",{required:"Please enter a contact value"}),className:"input",placeholder:"e.g., john@example.com, +1 234 567 8900"}),f.contact_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.contact_value.message})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:p,children:[p?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx($o,{className:"w-4 h-4 mr-2"}),s?"Save changes":"Add contact detail"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function XSe({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=T.useState(""),[a,l]=T.useState(!1),c=T.useRef(null),d=T.useRef(null),h=T.useMemo(()=>r.filter(v=>v.id!==i).sort((v,w)=>{var _,N;const x=(v.first_name||((_=v.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((N=w.acf)==null?void 0:N.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=T.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(v=>{var _,N;const w=tc(v).toLowerCase(),x=(v.first_name||((_=v.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(v.last_name||((N=v.acf)==null?void 0:N.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=T.useMemo(()=>h.find(y=>y.id===t),[h,t]);T.useEffect(()=>{const y=v=>{d.current&&!d.current.contains(v.target)&&c.current&&!c.current.contains(v.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},b=p?tc(p):"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:p&&!a?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[u.jsx("span",{children:b}),u.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(gn,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:c,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&u.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>u.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:tc(y)},y.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function uq(){var _,N;const{personId:t,index:e}=Vs(),r=vn(),[n]=RR(),i=yt(),s=parseInt(e,10),o=!isNaN(s),{data:a,isLoading:l}=zc(t),c=sh(),{data:d=[],isLoading:h}=Bc(),{data:f=[],isLoading:p}=ut({queryKey:["relationship-types"],queryFn:async()=>(await Ke.getRelationshipTypes()).data}),{register:m,handleSubmit:g,reset:b,control:y,setValue:v,formState:{errors:w,isSubmitting:x}}=Wc({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});T.useEffect(()=>{const E=n.get("newPersonId");if(E&&!o&&!h){const k=parseInt(E,10);if(!isNaN(k))if(d.some(O=>O.id===k)){v("related_person",k);const O=new URLSearchParams(n);O.delete("newPersonId"),r({search:O.toString()},{replace:!0})}else(async()=>{try{await i.invalidateQueries({queryKey:["people"]});const{data:j=[]}=await i.refetchQueries({queryKey:["people"]});j.some(q=>q.id===k)&&v("related_person",k);const A=new URLSearchParams(n);A.delete("newPersonId"),r({search:A.toString()},{replace:!0})}catch(j){console.error("Failed to load new person:",j);const P=new URLSearchParams(n);P.delete("newPersonId"),r({search:P.toString()},{replace:!0})}})()}},[n,o,h,d,v,r,i]),T.useEffect(()=>{var E;if(a&&o){const C=(((E=a.acf)==null?void 0:E.relationships)||[])[s];C&&b({related_person:C.related_person||null,relationship_type:C.relationship_type?String(C.relationship_type):"",relationship_label:C.relationship_label||""})}},[a,s,o,b]),An(o?`Edit relationship - ${((_=a==null?void 0:a.title)==null?void 0:_.rendered)||(a==null?void 0:a.title)||"person"}`:`Add relationship - ${((N=a==null?void 0:a.title)==null?void 0:N.rendered)||(a==null?void 0:a.title)||"person"}`);const S=async E=>{var k;try{const C=[...((k=a.acf)==null?void 0:k.relationships)||[]],O={related_person:E.related_person||null,relationship_type:E.relationship_type||null,relationship_label:E.relationship_label||""};o?C[s]=O:C.push(O);const j=uo(a.acf,{relationships:C});await c.mutateAsync({id:t,data:{acf:j}}),r(`/people/${t}`)}catch(C){console.error("Failed to save relationship:",C)}};return l?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):a?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:o?"Edit relationship":"Add relationship"}),u.jsxs("form",{onSubmit:g(S),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related person *"}),u.jsx(Av,{name:"related_person",control:y,rules:{required:"Please select a person"},render:({field:E})=>u.jsx(XSe,{value:E.value,onChange:E.onChange,people:d,isLoading:h,excludePersonId:parseInt(t,10)})}),w.related_person&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:w.related_person.message}),!o&&u.jsx("div",{className:"mt-2",children:u.jsxs(ce,{to:`/people/new?returnTo=relationship&sourcePersonId=${t}`,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[u.jsx(sr,{className:"w-4 h-4"}),"Add new person"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Relationship type"}),u.jsxs("select",{...m("relationship_type",{setValueAs:E=>E?parseInt(E,10):null}),className:"input",disabled:p,children:[u.jsx("option",{value:"",children:"Select a type..."}),f.map(E=>u.jsx("option",{value:E.id,children:E.name},E.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Custom label"}),u.jsx("input",{...m("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:x,children:[x?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx($o,{className:"w-4 h-4 mr-2"}),o?"Save changes":"Add relationship"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function dq(){var m,g;const{personId:t,index:e}=Vs(),r=vn(),n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:o}=zc(t),a=sh(),{register:l,handleSubmit:c,reset:d,formState:{errors:h,isSubmitting:f}}=Wc({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});T.useEffect(()=>{var b;if(s&&i){const v=(((b=s.acf)==null?void 0:b.addresses)||[])[n];v&&d({address_label:v.address_label||"",street:v.street||"",postal_code:v.postal_code||"",city:v.city||"",state:v.state||"",country:v.country||""})}},[s,n,i,d]),An(i?`Edit address - ${((m=s==null?void 0:s.title)==null?void 0:m.rendered)||(s==null?void 0:s.title)||"person"}`:`Add address - ${((g=s==null?void 0:s.title)==null?void 0:g.rendered)||(s==null?void 0:s.title)||"person"}`);const p=async b=>{var y;try{const v=[...((y=s.acf)==null?void 0:y.addresses)||[]],w={address_label:b.address_label||"",street:b.street||"",postal_code:b.postal_code||"",city:b.city||"",state:b.state||"",country:b.country||""};i?v[n]=w:v.push(w);const x=uo(s.acf,{addresses:v});await a.mutateAsync({id:t,data:{acf:x}}),r(`/people/${t}`)}catch(v){console.error("Failed to save address:",v)}};return o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit address":"Add address"}),u.jsxs("form",{onSubmit:c(p),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...l("address_label"),className:"input",placeholder:"e.g., Home, Work"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Street"}),u.jsx("input",{...l("street"),className:"input",placeholder:"e.g., 123 Main Street"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Postal code"}),u.jsx("input",{...l("postal_code"),className:"input",placeholder:"e.g., 12345"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"City"}),u.jsx("input",{...l("city"),className:"input",placeholder:"e.g., Amsterdam"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"State/Province"}),u.jsx("input",{...l("state"),className:"input",placeholder:"e.g., North Holland"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Country"}),u.jsx("input",{...l("country"),className:"input",placeholder:"e.g., Netherlands"})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:f,children:[f?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx($o,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add address"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function JSe({company:t}){var e,r,n,i,s;return u.jsx(ce,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?u.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:nr(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Rr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:nr(t)}),((i=t.acf)==null?void 0:i.industry)&&u.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&u.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function ZSe(){const[t,e]=T.useState(""),{data:r,isLoading:n,error:i}=ut({queryKey:["companies",t],queryFn:async()=>(await Ke.getCompanies({search:t,per_page:100,_embed:!0})).data}),s=T.useMemo(()=>r?[...r].sort((o,a)=>{var d,h;const l=(((d=o.title)==null?void 0:d.rendered)||o.title||"").toLowerCase(),c=(((h=a.title)==null?void 0:h.rendered)||a.title||"").toLowerCase();return l.localeCompare(c)}):[],[r]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"relative flex-1 max-w-md",children:[u.jsx(Sc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:o=>e(o.target.value),className:"input pl-9"})]}),u.jsxs(ce,{to:"/companies/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),n&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!n&&!i&&(s==null?void 0:s.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Rr,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&u.jsxs(ce,{to:"/companies/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!n&&!i&&(s==null?void 0:s.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(o=>u.jsx(JSe,{company:o},o.id))})]})}function e_e(){var w,x,S,_,N,E,k;const{id:t}=Vs(),e=vn(),r=yt(),n=T.useRef(null),[i,s]=T.useState(!1),{data:o,isLoading:a,error:l}=ut({queryKey:["company",t],queryFn:async()=>(await Ke.getCompany(t,{_embed:!0})).data}),{data:c}=ut({queryKey:["company-people",t],queryFn:async()=>(await Fe.getCompanyPeople(t)).data}),{data:d}=ut({queryKey:["company",o==null?void 0:o.parent],queryFn:async()=>(await Ke.getCompany(o.parent,{_embed:!0})).data,enabled:!!(o!=null&&o.parent)}),{data:h=[]}=ut({queryKey:["company-children",t],queryFn:async()=>(await Ke.getCompanies({parent:t,per_page:100,_embed:!0})).data}),f=((w=o==null?void 0:o.acf)==null?void 0:w.investors)||[],{data:p=[]}=ut({queryKey:["company-investors",t,f],queryFn:async()=>{if(!f.length)return[];const[C,O]=await Promise.all([Ke.getPeople({per_page:100,include:f.join(","),_embed:!0}),Ke.getCompanies({per_page:100,include:f.join(","),_embed:!0})]),j=(C.data||[]).map(q=>{var R,L,D,W;return{id:q.id,type:"person",name:Gn(((R=q.title)==null?void 0:R.rendered)||""),thumbnail:(W=(D=(L=q._embedded)==null?void 0:L["wp:featuredmedia"])==null?void 0:D[0])==null?void 0:W.source_url}}),P=(O.data||[]).map(q=>{var R,L,D;return{id:q.id,type:"company",name:nr(q),thumbnail:(D=(L=(R=q._embedded)==null?void 0:R["wp:featuredmedia"])==null?void 0:L[0])==null?void 0:D.source_url}}),A=[...j,...P];return f.map(q=>A.find(R=>R.id===q)).filter(Boolean)},enabled:f.length>0}),{data:m=[]}=ut({queryKey:["investments",t],queryFn:async()=>(await Fe.getInvestments(t)).data,enabled:!!t}),g=ht({mutationFn:()=>Ke.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}});An(nr(o)||"Organization"),T.useEffect(()=>{(o==null?void 0:o.status)==="trash"&&e("/companies",{replace:!0})},[o,e]);const b=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await g.mutateAsync()}catch(C){console.error("Failed to delete company:",C),alert("Failed to delete organization. Please try again.")}},y=async C=>{var j;const O=(j=C.target.files)==null?void 0:j[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await Fe.uploadCompanyLogo(t,O),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch(P){console.error("Failed to upload logo:",P),alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(a)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(l||!o)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),u.jsx(ce,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(o.status==="trash")return null;const v=o.acf||{};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(ce,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(ce,{to:`/companies/${t}/edit`,className:"btn-secondary",children:[u.jsx(mte,{className:"w-4 h-4 mr-2"}),"Edit"]}),u.jsxs("button",{onClick:b,className:"btn-danger",children:[u.jsx(ci,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),u.jsx("div",{className:"card p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[(_=(S=(x=o._embedded)==null?void 0:x["wp:featuredmedia"])==null?void 0:S[0])!=null&&_.source_url?u.jsx("img",{src:o._embedded["wp:featuredmedia"][0].source_url,alt:nr(o),className:"w-24 h-24 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Rr,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var C;return(C=n.current)==null?void 0:C.click()},children:i?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ef,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:y,className:"hidden",disabled:i})]}),u.jsxs("div",{children:[d&&u.jsxs(ce,{to:`/companies/${d.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[u.jsx(dF,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",nr(d)]}),u.jsx("h1",{className:"text-2xl font-bold",children:nr(o)}),v.industry&&u.jsx("p",{className:"text-gray-500",children:v.industry}),v.website&&u.jsxs("a",{href:v.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[u.jsx(ty,{className:"w-4 h-4 mr-1"}),v.website]})]})]})}),h.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(dF,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(C=>{var O,j,P,A;return u.jsxs(ce,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(P=(j=(O=C._embedded)==null?void 0:O["wp:featuredmedia"])==null?void 0:j[0])!=null&&P.source_url?u.jsx("img",{src:C._embedded["wp:featuredmedia"][0].source_url,alt:nr(C),className:"w-10 h-10 rounded object-contain bg-white"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:nr(C)}),((A=C.acf)==null?void 0:A.industry)&&u.jsx("p",{className:"text-xs text-gray-500",children:C.acf.industry})]})]},C.id)})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((N=c==null?void 0:c.current)==null?void 0:N.length)>0?u.jsx("div",{className:"space-y-2",children:c.current.map(C=>{var O;return u.jsxs(ce,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2"}),"Former employees"]}),((E=c==null?void 0:c.former)==null?void 0:E.length)>0?u.jsx("div",{className:"space-y-2",children:c.former.map(C=>{var O;return u.jsxs(ce,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),p.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(By,{className:"w-5 h-5 mr-2"}),"Investors"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:p.map(C=>{const O=C.type==="person",j=O?`/people/${C.id}`:`/companies/${C.id}`;return u.jsxs(ce,{to:j,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:`w-10 h-10 object-cover ${O?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${O?"rounded-full":"rounded"}`,children:O?u.jsx(tl,{className:"w-5 h-5 text-gray-400"}):u.jsx(Rr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),u.jsx("p",{className:"text-xs text-gray-500",children:O?"Person":"Organization"})]})]},`${C.type}-${C.id}`)})})]}),m.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(By,{className:"w-5 h-5 mr-2"}),"Invested in"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(C=>u.jsxs(ce,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:u.jsx(Rr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:C.industry})]})]},C.id))})]}),((k=v.contact_info)==null?void 0:k.length)>0&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),u.jsx("div",{className:"space-y-3",children:v.contact_info.map((C,O)=>u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[C.contact_label||C.contact_type,":"]}),u.jsx("span",{className:"ml-2",children:C.contact_value})]},O))})]})]})}function hq(){var he,xe,Be,we,Ie,ze,Ze,Nt,ft;const{id:t}=Vs(),e=vn(),r=yt(),n=!!t,{data:i,isLoading:s}=ut({queryKey:["company",t],queryFn:async()=>(await Ke.getCompany(t,{_embed:!0})).data,enabled:n}),{data:o=[],isLoading:a}=ut({queryKey:["companies","all"],queryFn:async()=>(await Ke.getCompanies({per_page:100,_embed:!0})).data}),{data:l=[],isLoading:c}=ut({queryKey:["people","all"],queryFn:async()=>(await Ke.getPeople({per_page:100,_embed:!0})).data}),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(""),[b,y]=T.useState(""),[v,w]=T.useState(!1),[x,S]=T.useState(""),[_,N]=T.useState([]),E=T.useRef(null),k=T.useRef(null),C=T.useRef(null),O=T.useMemo(()=>{const J=m.toLowerCase().trim();let Ne=o.filter(Ue=>!(n&&Ue.id===parseInt(t)||n&&Ue.parent===parseInt(t)));return J&&(Ne=Ne.filter(Ue=>{var et;return(et=nr(Ue))==null?void 0:et.toLowerCase().includes(J)})),[...Ne].sort((Ue,et)=>(nr(Ue)||"").localeCompare(nr(et)||""))},[o,m,t,n]),j=T.useMemo(()=>o.find(J=>J.id===parseInt(b)),[o,b]),P=T.useMemo(()=>{const J=x.toLowerCase().trim(),Ne=l.map(Se=>{var We,Dt,Bt,M;return{id:Se.id,type:"person",name:Gn(((We=Se.title)==null?void 0:We.rendered)||""),thumbnail:(M=(Bt=(Dt=Se._embedded)==null?void 0:Dt["wp:featuredmedia"])==null?void 0:Bt[0])==null?void 0:M.source_url}}),Ue=o.filter(Se=>!n||Se.id!==parseInt(t)).map(Se=>{var We,Dt,Bt;return{id:Se.id,type:"company",name:nr(Se),thumbnail:(Bt=(Dt=(We=Se._embedded)==null?void 0:We["wp:featuredmedia"])==null?void 0:Dt[0])==null?void 0:Bt.source_url}});let et=[...Ne,...Ue];J&&(et=et.filter(Se=>{var We;return(We=Se.name)==null?void 0:We.toLowerCase().includes(J)}));const Lt=_.map(Se=>`${Se.type}-${Se.id}`);return et=et.filter(Se=>!Lt.includes(`${Se.type}-${Se.id}`)),et.sort((Se,We)=>(Se.name||"").localeCompare(We.name||""))},[l,o,x,_,t,n]);T.useEffect(()=>{const J=Ne=>{k.current&&!k.current.contains(Ne.target)&&p(!1)};if(f)return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[f]),T.useEffect(()=>{const J=Ne=>{C.current&&!C.current.contains(Ne.target)&&w(!1)};if(v)return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[v]);const A=ht({mutationFn:J=>Ke.createCompany(J),onSuccess:J=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${J.data.id}`)}}),q=ht({mutationFn:J=>Ke.updateCompany(t,J),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${t}`)}}),R=async J=>{var Ue;const Ne=(Ue=J.target.files)==null?void 0:Ue[0];if(Ne){if(!Ne.type.startsWith("image/")){alert("Please select an image file");return}if(Ne.size>5*1024*1024){alert("Image size must be less than 5MB");return}h(!0);try{await Fe.uploadCompanyLogo(t,Ne),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.refetchQueries({queryKey:["company",t]}),r.refetchQueries({queryKey:["companies"]}),r.refetchQueries({queryKey:["people"]})}catch(et){console.error("Failed to upload logo:",et),alert("Failed to upload logo. Please try again.")}finally{h(!1),E.current&&(E.current.value="")}}},{register:L,handleSubmit:D,reset:W,formState:{errors:z,isSubmitting:H}}=Wc();T.useEffect(()=>{var J,Ne,Ue;i&&(W({title:Gn(((J=i.title)==null?void 0:J.rendered)||""),website:((Ne=i.acf)==null?void 0:Ne.website)||"",industry:((Ue=i.acf)==null?void 0:Ue.industry)||""}),i.parent&&y(String(i.parent)))},[i,W]),T.useEffect(()=>{var J,Ne;if(((Ne=(J=i==null?void 0:i.acf)==null?void 0:J.investors)==null?void 0:Ne.length)>0&&l.length>0&&o.length>0){const et=i.acf.investors.map(Lt=>{var Dt,Bt,M,F,V,oe,Z;const Se=l.find(Q=>Q.id===Lt);if(Se)return{id:Se.id,type:"person",name:Gn(((Dt=Se.title)==null?void 0:Dt.rendered)||""),thumbnail:(F=(M=(Bt=Se._embedded)==null?void 0:Bt["wp:featuredmedia"])==null?void 0:M[0])==null?void 0:F.source_url};const We=o.find(Q=>Q.id===Lt);return We?{id:We.id,type:"company",name:nr(We),thumbnail:(Z=(oe=(V=We._embedded)==null?void 0:V["wp:featuredmedia"])==null?void 0:oe[0])==null?void 0:Z.source_url}:null}).filter(Boolean);N(et)}},[i,l,o]),An(n&&i?`Edit ${nr(i)||"organization"}`:"New organization");const K=async J=>{const Ne=_.map(et=>et.id),Ue={title:J.title,status:"publish",parent:b?parseInt(b):0,acf:{website:J.website,industry:J.industry,investors:Ne}};n?q.mutate(Ue):A.mutate(Ue)};return n&&s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit organization":"Add new organization"}),u.jsxs("form",{onSubmit:D(K),className:"space-y-6",children:[n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Logo"}),u.jsxs("div",{className:"flex items-center gap-4",children:[(Be=(xe=(he=i==null?void 0:i._embedded)==null?void 0:he["wp:featuredmedia"])==null?void 0:xe[0])!=null&&Be.source_url?u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:i._embedded["wp:featuredmedia"][0].source_url,alt:nr(i)||"Organization logo",className:"w-20 h-20 rounded-lg object-contain bg-white"}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var J;return(J=E.current)==null?void 0:J.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ef,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}):u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsx(Ef,{className:"w-8 h-8 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var J;return(J=E.current)==null?void 0:J.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ef,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),u.jsxs("div",{children:[u.jsx("button",{type:"button",onClick:()=>{var J;return(J=E.current)==null?void 0:J.click()},className:"btn-secondary text-sm",disabled:d,children:(ze=(Ie=(we=i==null?void 0:i._embedded)==null?void 0:we["wp:featuredmedia"])==null?void 0:Ie[0])!=null&&ze.source_url?"Change logo":"Upload logo"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click the logo or button to upload a new logo"})]}),u.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:R,className:"hidden",disabled:d})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization name *"}),u.jsx("input",{...L("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc."}),z.title&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:z.title.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Website"}),u.jsx("input",{...L("website"),type:"url",className:"input",placeholder:"https://example.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Industry"}),u.jsx("input",{...L("industry"),className:"input",placeholder:"Technology"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Parent organization"}),u.jsxs("div",{className:"relative",ref:k,children:[u.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a,children:[j?u.jsxs("div",{className:"flex items-center gap-2",children:[(ft=(Nt=(Ze=j._embedded)==null?void 0:Ze["wp:featuredmedia"])==null?void 0:Nt[0])!=null&&ft.source_url?u.jsx("img",{src:j._embedded["wp:featuredmedia"][0].source_url,alt:nr(j),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:nr(j)})]}):u.jsx("span",{className:"text-gray-400",children:"No parent organization"}),u.jsx(Ly,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Sc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:m,onChange:J=>g(J.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsxs("div",{className:"overflow-y-auto max-h-48",children:[u.jsx("button",{type:"button",onClick:()=>{y(""),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${b?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),a?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):O.length>0?O.map(J=>{var Ne,Ue,et;return u.jsxs("button",{type:"button",onClick:()=>{y(String(J.id)),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${b===String(J.id)?"bg-primary-50":""}`,children:[(et=(Ue=(Ne=J._embedded)==null?void 0:Ne["wp:featuredmedia"])==null?void 0:Ue[0])!=null&&et.source_url?u.jsx("img",{src:J._embedded["wp:featuredmedia"][0].source_url,alt:nr(J),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:nr(J)})]},J.id)}):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"label flex items-center",children:[u.jsx(By,{className:"w-4 h-4 mr-2"}),"Investors"]}),_.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map(J=>u.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[J.thumbnail?u.jsx("img",{src:J.thumbnail,alt:J.name,className:`w-5 h-5 object-cover ${J.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${J.type==="person"?"rounded-full":"rounded"}`,children:J.type==="person"?u.jsx(tl,{className:"w-3 h-3 text-gray-500"}):u.jsx(Rr,{className:"w-3 h-3 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-700",children:J.name}),u.jsx("button",{type:"button",onClick:()=>N(Ne=>Ne.filter(Ue=>!(Ue.id===J.id&&Ue.type===J.type))),className:"ml-1 text-gray-400 hover:text-gray-600",children:u.jsx(gn,{className:"w-3.5 h-3.5"})})]},`${J.type}-${J.id}`))}),u.jsxs("div",{className:"relative",ref:C,children:[u.jsxs("button",{type:"button",onClick:()=>w(!v),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a||c,children:[u.jsx("span",{className:"text-gray-400",children:"Add investor..."}),u.jsx(Ly,{className:`w-4 h-4 text-gray-400 transition-transform ${v?"rotate-180":""}`})]}),v&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Sc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:x,onChange:J=>S(J.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:a||c?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):P.length>0?P.map(J=>u.jsxs("button",{type:"button",onClick:()=>{N(Ne=>[...Ne,J]),S("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[J.thumbnail?u.jsx("img",{src:J.thumbnail,alt:J.name,className:`w-6 h-6 object-cover ${J.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${J.type==="person"?"rounded-full":"rounded"}`,children:J.type==="person"?u.jsx(tl,{className:"w-4 h-4 text-gray-500"}):u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-sm text-gray-900 truncate block",children:J.name}),u.jsx("span",{className:"text-xs text-gray-500",children:J.type==="person"?"Person":"Organization"})]})]},`${J.type}-${J.id}`)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:x?"No results found":"No people or organizations available"})})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:"/companies",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:H,children:[u.jsx($o,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create organization"]})]})]})]})]})}function t_e({person:t,dateType:e}){var r;return u.jsx("div",{className:"flex items-center gap-3 py-2",children:u.jsxs(ce,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),u.jsx("span",{className:"font-medium truncate",children:t.name}),u.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function r_e({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(c=>{i.push({person:c,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),u.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:u.jsx("span",{className:"text-2xl font-bold leading-none",children:Cn(new Date(e.next_occurrence),"d")})}),u.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>u.jsx(t_e,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function n_e(){const{data:t,isLoading:e,error:r}=Wfe(365),n=(t==null?void 0:t.reduce((s,o)=>{const a=Cn(new Date(o.next_occurrence),"yyyy-MM-dd");return s[a]||(s[a]=[]),s[a].push(o),s},{}))||{},i=Object.entries(n).reduce((s,[o,a])=>{const l=Cn(new Date(o),"MMMM yyyy");return s[l]||(s[l]=[]),s[l].push(a),s},{});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("p",{className:"text-gray-600",children:[(t==null?void 0:t.length)||0," upcoming dates"]}),u.jsxs(ce,{to:"/dates/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),e&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),r&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!e&&!r&&(t==null?void 0:t.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx(vo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),u.jsxs(ce,{to:"/dates/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(i).map(([s,o])=>u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:s}),u.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:o.map(a=>u.jsx(r_e,{dates:a},a[0].next_occurrence))})]},s))]})}function i_e({value:t=[],onChange:e,people:r=[],isLoading:n}){const[i,s]=T.useState(""),o=T.useMemo(()=>{if(!i)return r.slice(0,10);const d=i.toLowerCase();return r.filter(h=>tc(h).toLowerCase().includes(d)).slice(0,10)},[r,i]),a=T.useMemo(()=>t.map(d=>r.find(h=>h.id===d)).filter(Boolean),[t,r]),l=d=>{t.includes(d)||e([...t,d]),s("")},c=d=>{e(t.filter(h=>h!==d))};return u.jsxs("div",{className:"space-y-2",children:[a.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(d=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[tc(d),u.jsx("button",{type:"button",onClick:()=>c(d.id),className:"hover:text-primary-600",children:u.jsx(gn,{className:"w-3 h-3"})})]},d.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:i,onChange:d=>s(d.target.value),placeholder:"Search for people...",className:"input",disabled:n}),i&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:o.length>0?o.map(d=>u.jsx("button",{type:"button",onClick:()=>l(d.id),disabled:t.includes(d.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(d.id)?"opacity-50 cursor-not-allowed":""}`,children:tc(d)},d.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function fq(){var W;const{id:t}=Vs(),[e]=RR(),r=vn(),n=yt(),i=!!t,s=e.get("person"),o=e.get("type"),{data:a,isLoading:l}=ut({queryKey:["important-date",t],queryFn:async()=>(await Ke.getDate(t)).data,enabled:i}),c=T.useMemo(()=>{var H;if(!((H=a==null?void 0:a.acf)!=null&&H.related_people))return[];const z=a.acf.related_people;return Array.isArray(z)?z.map(K=>parseInt(typeof K=="object"&&K!==null?K.ID||K.id||K.post_id:K,10)).filter(K=>!isNaN(K)&&K>0):[]},[a]),{data:d=[],isLoading:h}=Bc({orderby:"title",order:"asc"}),{data:f=[]}=ut({queryKey:["people","specific",c],queryFn:async()=>{const z=c.map(K=>Ke.getPerson(K,{_embed:!0}).then(he=>he.data).catch(()=>null));return(await Promise.all(z)).filter(Boolean)},enabled:c.length>0}),p=T.useMemo(()=>{const z=new Map;return d.forEach(H=>z.set(H.id,H)),f.forEach(H=>{var he,xe,Be,we,Ie,ze,Ze,Nt,ft,J,Ne,Ue,et,Lt,Se,We;const K={...H,id:H.id,name:tc(H),first_name:((he=H.acf)==null?void 0:he.first_name)||"",last_name:((xe=H.acf)==null?void 0:xe.last_name)||"",is_favorite:((Be=H.acf)==null?void 0:Be.is_favorite)||!1,thumbnail:((ze=(Ie=(we=H._embedded)==null?void 0:we["wp:featuredmedia"])==null?void 0:Ie[0])==null?void 0:ze.source_url)||((Ue=(Ne=(J=(ft=(Nt=(Ze=H._embedded)==null?void 0:Ze["wp:featuredmedia"])==null?void 0:Nt[0])==null?void 0:ft.media_details)==null?void 0:J.sizes)==null?void 0:Ne.thumbnail)==null?void 0:Ue.source_url)||null,labels:((We=(Se=(Lt=(et=H._embedded)==null?void 0:et["wp:term"])==null?void 0:Lt.flat())==null?void 0:Se.filter(Dt=>(Dt==null?void 0:Dt.taxonomy)==="person_label"))==null?void 0:We.map(Dt=>Dt.name))||[]};z.set(K.id,K)}),Array.from(z.values())},[d,f]),{data:m=[]}=ut({queryKey:["date-types"],queryFn:async()=>((await Ke.getDateTypes()).data||[]).sort((K,he)=>{const xe=K.name||"",Be=he.name||"";return xe.localeCompare(Be)})}),g=ht({mutationFn:z=>Ke.createDate(z),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),r(s?`/people/${s}`:"/dates")}}),b=ht({mutationFn:z=>Ke.updateDate(t,z),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),n.invalidateQueries({queryKey:["important-date",t]}),n.invalidateQueries({queryKey:["people"]});const z=x("related_people");(z==null?void 0:z.length)>0?r(`/people/${z[0]}`):r("/dates")}}),{register:y,handleSubmit:v,reset:w,watch:x,setValue:S,control:_,formState:{errors:N,isSubmitting:E}}=Wc({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0}}),k=x("related_people"),C=x("date_type"),O=x("title");T.useEffect(()=>{var K;if((!O||["'s Birthday","Wedding of "].some(he=>O.endsWith(he)||O.startsWith(he)))&&(k==null?void 0:k.length)>0&&C){const he=m.find(Ie=>Ie.id===parseInt(C)),xe=(he==null?void 0:he.name)||"",Be=((K=he==null?void 0:he.slug)==null?void 0:K.toLowerCase())||xe.toLowerCase(),we=k.map(Ie=>{var Ze,Nt,ft;const ze=p.find(J=>J.id===Ie);return ze?Gn(((Ze=ze.acf)==null?void 0:Ze.first_name)||((ft=(Nt=ze.title)==null?void 0:Nt.rendered)==null?void 0:ft.split(" ")[0])||""):null}).filter(Boolean);if(we.length>0&&xe){let Ie;Be==="wedding"?we.length>=2?Ie=`Wedding of ${we[0]} & ${we[1]}`:Ie=`Wedding of ${we[0]}`:Ie=`${we[0]}'s ${xe}`,S("title",Ie)}}},[k,C,p,m,S,O]);const[j,P]=T.useState(!1);T.useEffect(()=>{var H,K,he,xe,Be;if(j&&!i)return;const z=c.length===0||f.length>0;if(a&&p.length>0&&z){let we=[];const Ie=(H=a.acf)==null?void 0:H.related_people;Ie&&(Array.isArray(Ie)?we=Ie.map(Ze=>parseInt(typeof Ze=="object"&&Ze!==null?Ze.ID||Ze.id||Ze.post_id:Ze,10)).filter(Ze=>!isNaN(Ze)&&Ze>0):typeof Ie=="number"&&(we=[Ie]));let ze="";((K=a.date_type)==null?void 0:K.length)>0&&(ze=a.date_type[0].toString()),w({title:Gn(((he=a.title)==null?void 0:he.rendered)||""),date_value:((xe=a.acf)==null?void 0:xe.date_value)||"",date_type:ze,related_people:we,is_recurring:((Be=a.acf)==null?void 0:Be.is_recurring)??!0}),P(!0)}else if(!i&&p.length>0&&m.length>0){const we={title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0};if(s&&(we.related_people=[parseInt(s)]),o){const Ie=m.find(ze=>ze.slug===o||ze.name.toLowerCase()===o.toLowerCase());Ie&&(we.date_type=Ie.id.toString())}w(we),P(!0)}},[a,w,i,s,o,m,p,c,f,j]),An(i&&a?`Edit ${((W=a.title)==null?void 0:W.rendered)||a.title||"date"}`:"New date");const A=async z=>{const H={title:z.title,status:"publish",date_type:z.date_type?[parseInt(z.date_type)]:[],acf:{date_value:z.date_value,related_people:z.related_people,is_recurring:z.is_recurring}};i?b.mutate(H):g.mutate(H)};if(i&&l)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const q=x("related_people"),R=i&&(q==null?void 0:q.length)>0?q[0]:s,L=R?`/people/${R}`:"/dates",D=R?"Back to person":"Back to dates";return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:L,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:D})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit date":"Add new date"}),u.jsxs("form",{onSubmit:v(A),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related people"}),u.jsx(Av,{name:"related_people",control:_,render:({field:z})=>u.jsx(i_e,{value:z.value,onChange:z.onChange,people:p,isLoading:h})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date type *"}),u.jsx(Av,{name:"date_type",control:_,rules:{required:"Please select a date type"},render:({field:z})=>{const H=z.value?String(z.value):"";return u.jsxs("select",{value:H,onChange:K=>{const he=K.target.value;z.onChange(he)},onBlur:z.onBlur,name:z.name,ref:z.ref,className:"input",children:[u.jsx("option",{value:"",children:"Select a type..."}),m.map(K=>u.jsx("option",{value:String(K.id),children:K.name},K.id))]})}}),N.date_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.date_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...y("title"),className:"input",placeholder:"e.g., Mom's Birthday, Wedding Anniversary"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date *"}),u.jsx("input",{...y("date_value",{required:"Date is required"}),type:"date",className:"input"}),N.date_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.date_value.message})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_recurring",...y("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:L,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:E,children:[u.jsx($o,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Create date"]})]})]})]})]})}function s_e(){An("Todos");const[t,e]=T.useState(!1),[r,n]=T.useState(null),[i,s]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(null),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(null),{data:b,isLoading:y}=bte(!0),v=xte(),w=Kfe(),x=QR(),S=T.useMemo(()=>Rte(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:N,olderCompletedTodos:E}=T.useMemo(()=>{if(!b)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const R=[],L=[],D=[];return b.forEach(W=>{if(!W.is_completed)R.push(W);else try{const z=dp(W.created);Tme(z,S)?L.push(W):D.push(W)}catch{D.push(W)}}),{incompleteTodos:R,recentlyCompletedTodos:L,olderCompletedTodos:D}},[b,S]),k=R=>{if(!R.is_completed){c(R),h(!0);return}v.mutate({todoId:R.id,data:{content:R.content,due_date:R.due_date,is_completed:!1}})},C=()=>{l&&(v.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),c(null))},O=()=>{if(!l)return;const R=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:R,activity_type:"note",participants:[]}),h(!1),p(!0)},j=async R=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:R}),await v.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),c(null),g(null)}catch(L){console.error("Failed to create activity:",L),alert("Failed to create activity. Please try again.")}},P=async R=>{r&&(await v.mutateAsync({todoId:r.id,data:R}),s(!1),n(null))},A=async R=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync(R)};if(y)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const q=[...N,...E];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),u.jsxs("div",{className:"flex items-center gap-2",children:[E.length>0&&u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[u.jsx(AP,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[u.jsx(sr,{className:"w-4 h-4"}),"Add todo"]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Id,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(R=>u.jsx(A1,{todo:R,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},R.id))}):u.jsxs("div",{className:"p-8 text-center",children:[u.jsx(As,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No open todos"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),N.length>0&&!t&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(_fe,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",N.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:N.map(R=>u.jsx(A1,{todo:R,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},R.id))})]}),t&&q.length>0&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(As,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",q.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:q.map(R=>u.jsx(A1,{todo:R,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},R.id))})]}),u.jsx(wie,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:P,isLoading:v.isPending,todo:r}),u.jsx(_te,{isOpen:o,onClose:()=>a(!1)}),u.jsx(XR,{isOpen:d,onClose:()=>{h(!1),c(null)},todo:l,onComplete:C,onCompleteAsActivity:O}),u.jsx(FM,{isOpen:f,onClose:()=>{p(!1),c(null),g(null)},onSubmit:j,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function A1({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=em(t);return u.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(As,{className:"w-5 h-5 text-primary-600"}):u.jsx(Id,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[u.jsxs(ce,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&u.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Cn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(ia,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(ci,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function o_e(){const t=window.prmConfig||{},e=t.isAdmin||!1,r=t.userId,[n,i]=T.useState(""),[s,o]=T.useState(""),[a,l]=T.useState(!0),[c,d]=T.useState(!1),[h,f]=T.useState(!1),[p,m]=T.useState([]),[g,b]=T.useState(!0),[y,v]=T.useState(""),[w,x]=T.useState(!1),[S,_]=T.useState(null),[N,E]=T.useState(!1),[k,C]=T.useState(null),[O,j]=T.useState([]),[P,A]=T.useState(""),[q,R]=T.useState(!1),[L,D]=T.useState(""),[W,z]=T.useState("09:00"),[H,K]=T.useState(!0),[he,xe]=T.useState(!1),[Be,we]=T.useState(!1),[Ie,ze]=T.useState(!1),[Ze,Nt]=T.useState(""),[ft,J]=T.useState(!1),[Ne,Ue]=T.useState([]),[et,Lt]=T.useState([]),[Se,We]=T.useState([]),[Dt,Bt]=T.useState(!1),[M,F]=T.useState(!1),[V,oe]=T.useState(!1),[Z,Q]=T.useState(""),[ye,Ge]=T.useState(!1),[rt,zt]=T.useState("");T.useEffect(()=>{(async()=>{try{const je=await ue.get("/prm/v1/user/ical-url");i(je.data.url),o(je.data.webcal_url)}catch(je){console.error("Failed to fetch iCal URL:",je)}finally{l(!1)}})()},[]),T.useEffect(()=>{r&&(async()=>{try{const[je,De]=await Promise.all([Fe.getAppPasswords(r),Fe.getCardDAVUrls()]);m(je.data||[]),C(De.data)}catch(je){console.error("Failed to fetch app passwords:",je)}finally{b(!1)}})()},[r]);const _e=async()=>{Bt(!0);try{const[ne,je]=await Promise.all([Fe.getSlackChannels(),Fe.getSlackTargets()]);Ue(ne.data.channels||[]),Lt(ne.data.users||[]),We(je.data.targets||[])}catch(ne){console.error("Failed to fetch Slack data:",ne),Nt("Failed to load Slack channels and users. Please try refreshing the page.")}finally{Bt(!1)}};T.useEffect(()=>{(async()=>{try{const je=await Fe.getNotificationChannels();j(je.data.channels||["email"]),A(je.data.slack_webhook||""),z(je.data.notification_time||"09:00");const De=await Fe.getSlackStatus(),Ot=De.data.connected||!1;R(Ot),D(De.data.workspace_name||""),Ot&&await _e()}catch(je){console.error("Failed to fetch notification channels:",je)}finally{K(!1)}})()},[]),T.useEffect(()=>{q&&_e()},[q]),T.useEffect(()=>{const ne=new URLSearchParams(window.location.search),je=ne.get("slack_connected"),De=ne.get("slack_error");je==="1"?(Nt("Slack connected successfully!"),Fe.getSlackStatus().then(Ot=>{R(Ot.data.connected||!1),D(Ot.data.workspace_name||"")}),window.history.replaceState({},"",window.location.pathname)):De&&(Nt(`Slack connection failed: ${De}`),window.history.replaceState({},"",window.location.pathname))},[]);const se=async()=>{var ne,je;try{const De=await ue.get("/prm/v1/slack/oauth/authorize");window.location.href=De.data.oauth_url}catch(De){console.error("Failed to get Slack OAuth URL:",De),alert(((je=(ne=De.response)==null?void 0:ne.data)==null?void 0:je.message)||"Failed to connect Slack")}},fe=async()=>{var ne,je;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){J(!0);try{await Fe.disconnectSlack(),R(!1),D(""),Ue([]),Lt([]),We([]),Nt("Slack disconnected successfully"),O.includes("slack")&&await fu("slack")}catch(De){console.error("Failed to disconnect Slack:",De),alert(((je=(ne=De.response)==null?void 0:ne.data)==null?void 0:je.message)||"Failed to disconnect Slack")}finally{J(!1)}}},de=ne=>{const je=Se.includes(ne)?Se.filter(De=>De!==ne):[...Se,ne];We(je)},Ce=async()=>{var ne,je;F(!0);try{await Fe.updateSlackTargets(Se),Nt("Notification targets saved successfully"),setTimeout(()=>Nt(""),3e3)}catch(De){console.error("Failed to save Slack targets:",De),alert(((je=(ne=De.response)==null?void 0:ne.data)==null?void 0:je.message)||"Failed to save notification targets")}finally{F(!1)}},ot=async()=>{try{await navigator.clipboard.writeText(n),d(!0),setTimeout(()=>d(!1),2e3)}catch(ne){console.error("Failed to copy:",ne)}},_i=async ne=>{var je,De;if(ne.preventDefault(),!!y.trim()){x(!0);try{const Ot=await Fe.createAppPassword(r,y.trim());_(Ot.data.password),m([...p,Ot.data]),v("")}catch(Ot){console.error("Failed to create app password:",Ot),alert(((De=(je=Ot.response)==null?void 0:je.data)==null?void 0:De.message)||"Failed to create app password")}finally{x(!1)}}},Yi=async(ne,je)=>{var De,Ot;if(confirm(`Are you sure you want to revoke the app password "${je}"? Any devices using this password will no longer be able to sync.`))try{await Fe.deleteAppPassword(r,ne),m(p.filter(ln=>ln.uuid!==ne))}catch(ln){console.error("Failed to delete app password:",ln),alert(((Ot=(De=ln.response)==null?void 0:De.data)==null?void 0:Ot.message)||"Failed to revoke app password")}},hu=async()=>{try{await navigator.clipboard.writeText(S),E(!0),setTimeout(()=>E(!1),2e3)}catch(ne){console.error("Failed to copy:",ne)}},zm=async ne=>{try{await navigator.clipboard.writeText(ne)}catch(je){console.error("Failed to copy:",je)}},Vm=ne=>{if(!ne)return"Never";const je=new Date(ne);return je.toLocaleDateString("en-US",{month:"short",day:"numeric",year:je.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},_b=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){f(!0);try{const ne=await ue.post("/prm/v1/user/regenerate-ical-token");i(ne.data.url),o(ne.data.webcal_url)}catch(ne){console.error("Failed to regenerate token:",ne)}finally{f(!1)}}},fu=async ne=>{var De,Ot;const je=O.includes(ne)?O.filter(ln=>ln!==ne):[...O,ne];xe(!0);try{await Fe.updateNotificationChannels(je),j(je)}catch(ln){console.error("Failed to update notification channels:",ln),alert(((Ot=(De=ln.response)==null?void 0:De.data)==null?void 0:Ot.message)||"Failed to update notification channels")}finally{xe(!1)}},Eb=async ne=>{var mu,Hm;const[je,De]=ne.split(":").map(Number),Ot=Math.round(De/5)*5,ln=Ot===60?(je+1)%24:je,Um=Ot===60?0:Ot,dr=`${String(ln).padStart(2,"0")}:${String(Um).padStart(2,"0")}`;z(dr),ze(!0);try{await Fe.updateNotificationTime(dr)}catch(Mh){console.error("Failed to update notification time:",Mh),alert(((Hm=(mu=Mh.response)==null?void 0:mu.data)==null?void 0:Hm.message)||"Failed to update notification time");const Wm=await Fe.getNotificationChannels();z(Wm.data.notification_time||"09:00")}finally{ze(!1)}},Ks=async()=>{var ne,je;if(confirm("This will send reminder emails for all reminders due today. Continue?")){oe(!0),Q("");try{const De=await Fe.triggerReminders();Q(De.data.message||"Reminders triggered successfully.")}catch(De){console.error("Failed to trigger reminders:",De),Q(((je=(ne=De.response)==null?void 0:ne.data)==null?void 0:je.message)||"Failed to trigger reminders. Please check server logs.")}finally{oe(!1)}}},pu=async()=>{var ne,je;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){Ge(!0),zt("");try{const De=await Fe.rescheduleCronJobs();zt(De.data.message||"Cron jobs rescheduled successfully.")}catch(De){console.error("Failed to reschedule cron jobs:",De),zt(((je=(ne=De.response)==null?void 0:ne.data)==null?void 0:je.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{Ge(!1)}}};return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar Subscription"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),a?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Your Calendar Feed URL"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:n,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:ne=>ne.target.select()}),u.jsx("button",{onClick:ot,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:c?u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("a",{href:s,className:"btn-primary",children:u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in Calendar App"]})}),u.jsx("button",{onClick:_b,disabled:h,className:"btn-secondary",children:h?"Regenerating...":"Regenerate URL"})]}),u.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV Sync"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),g?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[k&&u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[u.jsx("h3",{className:"font-medium text-sm",children:"Connection Details"}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:k.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:ne=>ne.target.select()}),u.jsx("button",{onClick:()=>zm(k.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:t.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:ne=>ne.target.select()}),u.jsx("button",{onClick:()=>zm(t.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),u.jsxs("form",{onSubmit:_i,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:y,onChange:ne=>v(ne.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:w}),u.jsx("button",{type:"submit",disabled:w||!y.trim(),className:"btn-primary whitespace-nowrap",children:w?"Creating...":"Create Password"})]}),S&&u.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:S,className:"input flex-1 font-mono text-sm bg-white",onClick:ne=>ne.target.select()}),u.jsx("button",{onClick:hu,className:"btn-primary whitespace-nowrap",children:N?"Copied!":"Copy"})]}),u.jsx("button",{onClick:()=>_(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),p.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your App Passwords"}),u.jsx("div",{className:"space-y-2",children:p.map(ne=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:ne.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",Vm(ne.created),"  Last used ",Vm(ne.last_used)]})]}),u.jsx("button",{onClick:()=>Yi(ne.uuid,ne.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},ne.uuid))})]}),p.length===0&&!S&&u.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Data"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs(ce,{to:"/settings/import",className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[u.jsx("p",{className:"font-medium",children:"Import Data"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Import contacts from Monica CRM or other sources"})]}),u.jsxs(ce,{to:"/settings/export",className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[u.jsx("p",{className:"font-medium",children:"Export Data"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Export all contacts as vCard or Google Contacts CSV"})]})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),H?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Email"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:O.includes("email"),onChange:()=>fu("email"),disabled:he,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Slack"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:O.includes("slack"),onChange:()=>fu("slack"),disabled:he||!q,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsx("div",{children:q?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),L&&u.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",L]})]}),u.jsx("button",{onClick:fe,disabled:ft,className:"btn-secondary text-sm",children:ft?"Disconnecting...":"Disconnect"})]})}),Ze&&u.jsx("p",{className:`text-sm ${Ze.includes("successfully")||Ze.includes("disconnected")?"text-green-600":"text-red-600"}`,children:Ze}),O.includes("slack")&&u.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),Dt?u.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):u.jsxs(u.Fragment,{children:[Ne.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Ne.map(ne=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:Se.includes(ne.id),onChange:()=>de(ne.id),className:"mr-2 cursor-pointer"}),u.jsx("span",{className:"text-sm",children:ne.name})]},ne.id))})]}),et.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:et.map(ne=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:Se.includes(ne.id),onChange:()=>de(ne.id),className:"mr-2 cursor-pointer"}),u.jsxs("span",{className:"text-sm",children:[ne.name,ne.is_me&&u.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},ne.id))})]}),Ne.length===0&&et.length===0&&!Dt&&u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),u.jsx("button",{onClick:Ce,disabled:M,className:"btn-primary text-sm mt-4",children:M?"Saving...":"Save targets"})]})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:se,className:"btn-primary w-full",disabled:ft,children:"Connect Slack"}),Ze&&u.jsx("p",{className:`text-sm ${Ze.includes("successfully")?"text-green-600":"text-red-600"}`,children:Ze}),u.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),P&&!q&&u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Notification Time (UTC)"}),u.jsx("input",{type:"time",value:W,onChange:ne=>Eb(ne.target.value),className:"input",disabled:Ie,step:"300"}),W&&u.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[u.jsxs("p",{className:"text-gray-700",children:[u.jsx("span",{className:"font-medium",children:"UTC:"})," ",W]}),u.jsxs("p",{className:"text-gray-700 mt-1",children:[u.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[ne,je]=W.split(":"),De=new Date;return De.setUTCHours(parseInt(ne),parseInt(je),0,0),De.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return W}})()]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]}),e&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Administration"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs(ce,{to:"/settings/relationship-types",className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[u.jsx("p",{className:"font-medium",children:"Relationship Types"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]}),u.jsxs(ce,{to:"/settings/user-approval",className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[u.jsx("p",{className:"font-medium",children:"User Approval"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]}),u.jsxs("button",{onClick:Ks,disabled:V,className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Trigger reminders"}),u.jsx("p",{className:"text-sm text-gray-500",children:V?"Sending...":"Manually send reminders for today"}),Z&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:Z})]}),u.jsxs("button",{onClick:pu,disabled:ye,className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),u.jsx("p",{className:"text-sm text-gray-500",children:ye?"Rescheduling...":"Reschedule all user reminder cron jobs"}),rt&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:rt})]})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"About"}),u.jsxs("p",{className:"text-sm text-gray-600",children:[Md," v",t.version||"1.0.0",u.jsx("br",{}),"Built with WordPress, React, and Tailwind CSS."]})]})]})}function pq({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=T.useState(""),[o,a]=T.useState(!1),l=T.useRef(null),c=T.useRef(null),d=T.useMemo(()=>r.sort((b,y)=>{const v=(b.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return v<w?-1:v>w?1:0}),[r]),h=T.useMemo(()=>{if(!i)return d.slice(0,10);const b=i.toLowerCase();return d.filter(y=>(y.name||"").toLowerCase().includes(b)).slice(0,10)},[d,i]),f=T.useMemo(()=>d.find(b=>b.id===parseInt(t,10)),[d,t]);T.useEffect(()=>{const b=y=>{c.current&&!c.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const p=b=>{e(b?b.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:f&&!o?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[u.jsx("span",{children:g}),u.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(gn,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:l,type:"text",value:i,onChange:b=>{s(b.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&u.jsx("div",{ref:c,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(b=>u.jsx("button",{type:"button",onClick:()=>p(b.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===b.id.toString()?"bg-primary-50":""}`,children:b.name},b.id))]}):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function a_e(){An("Relationship Types - Settings");const t=yt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(fte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),u.jsx(ce,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ut({queryKey:["relationship-types"],queryFn:async()=>(await Ke.getRelationshipTypes()).data}),[s,o]=T.useState(null),[a,l]=T.useState(""),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,b]=T.useState(!1),y=ht({mutationFn:async({id:O,name:j,inverseId:P})=>{const A={name:j};return P&&(A.acf={inverse_relationship_type:parseInt(P,10)}),Ke.updateRelationshipType(O,A)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),v=ht({mutationFn:async({name:O,inverseId:j})=>{const P={name:O};return j&&(P.acf={inverse_relationship_type:parseInt(j,10)}),Ke.createRelationshipType(P)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),b(!1)}}),w=ht({mutationFn:O=>Ke.deleteRelationshipType(O),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=ht({mutationFn:()=>Ke.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return u.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):u.jsx(dte,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=O=>{var P;o(O.id),l(O.name);const j=(P=O.acf)==null?void 0:P.inverse_relationship_type;d(j?j.toString():"")},N=()=>{o(null),l(""),d("")},E=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:c||null})},k=()=>{if(!h.trim()){alert("Name is required");return}v.mutate({name:h.trim(),inverseId:p||null})},C=(O,j)=>{window.confirm(`Are you sure you want to delete "${j}"? This cannot be undone.`)&&w.mutate(O)};return i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),u.jsx("div",{className:"flex gap-2",children:!g&&u.jsxs(u.Fragment,{children:[u.jsx(S,{}),u.jsxs("button",{onClick:()=>b(!0),className:"btn-primary flex items-center gap-2",children:[u.jsx(sr,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&u.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:h,onChange:O=>f(O.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(pq,{value:p,onChange:m,relationshipTypes:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:k,disabled:v.isPending,className:"btn-primary flex items-center gap-2",children:[v.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx($o,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsx("button",{onClick:()=>{b(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),u.jsx("div",{className:"space-y-2",children:n.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(O=>{var R,L;const j=s===O.id,P=(R=O.acf)==null?void 0:R.inverse_relationship_type,A=typeof P=="object"&&(P!=null&&P.ID)?P.ID:typeof P=="object"&&(P!=null&&P.id)?P.id:P,q=A?n.find(D=>D.id===A):null;return u.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:j?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:a,onChange:D=>l(D.target.value),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(pq,{value:c,onChange:d,relationshipTypes:n,currentTypeId:O.id}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:E,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx($o,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsxs("button",{onClick:N,className:"btn-secondary flex items-center gap-2",children:[u.jsx(gn,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium",children:O.name}),q&&u.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",u.jsx("span",{className:"font-medium",children:q.name})]}),!q&&((L=O.acf)==null?void 0:L.inverse_relationship_type)===null&&u.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(O),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:u.jsx($fe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>C(O.id,O.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(ci,{className:"w-4 h-4"})})]})]})},O.id)})})]})})}function l_e(){var y,v,w;const[t,e]=T.useState(null),[r,n]=T.useState(""),[i,s]=T.useState(!1),[o,a]=T.useState(null),l=yt(),c=ht({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await ue.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),d=ht({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await ue.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),c.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},b=()=>{e(null),n(""),a(null),c.reset(),d.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Pd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),u.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((y=d.data.stats.errors)==null?void 0:y.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>u.jsx("li",{children:x},S))})]})]}),u.jsx("button",{onClick:b,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(wc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Jp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(_c,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&u.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Pd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[u.jsxs("p",{children:["Export format: ",o.version]}),u.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),u.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),u.jsxs("p",{children:["Notes: ",o.summary.notes]}),u.jsxs("p",{children:["Dates: ",o.summary.reminders]}),u.jsxs("p",{children:["Photos: ",o.summary.photos]}),u.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(KR,{className:"h-4 w-4 text-gray-400"})}),u.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&u.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),u.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(wc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(_c,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:b,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(v=d.error.response)==null?void 0:v.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function c_e(){var g,b,y;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),o=yt(),a=ht({mutationFn:async v=>{const w=new FormData;return w.append("file",v),(await ue.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:v=>{s(v)},onError:v=>{var w,x;s({valid:!1,error:((x=(w=v.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=ht({mutationFn:async v=>{const w=new FormData;return w.append("file",v),(await ue.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),c=T.useCallback(v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?n(!0):v.type==="dragleave"&&n(!1)},[]),d=T.useCallback(v=>{v.preventDefault(),v.stopPropagation(),n(!1),v.dataTransfer.files&&v.dataTransfer.files[0]&&f(v.dataTransfer.files[0])},[]),h=v=>{v.target.files&&v.target.files[0]&&f(v.target.files[0])},f=v=>{const w=v.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(v),s(null),l.reset(),a.mutate(v)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Pd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((v,w)=>u.jsx("li",{children:v},w))})]})]}),u.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:d,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(wc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Jp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(_c,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Pd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Fs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(ate,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(cte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(gte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?u.jsxs(u.Fragment,{children:[u.jsx(wc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(_c,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(b=l.error.response)==null?void 0:b.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function u_e(){var x,S,_;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),[o,a]=T.useState({}),l=yt(),c=ht({mutationFn:async N=>{const E=new FormData;return E.append("file",N),(await ue.post("/prm/v1/import/google-contacts/validate",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:N=>{var E;if(s(N),((E=N.duplicates)==null?void 0:E.length)>0){const k={};N.duplicates.forEach(C=>{k[C.index]="merge"}),a(k)}},onError:N=>{var E,k;s({valid:!1,error:((k=(E=N.response)==null?void 0:E.data)==null?void 0:k.message)||"Failed to validate file"})}}),d=ht({mutationFn:async({file:N,decisions:E})=>{const k=new FormData;return k.append("file",N),k.append("decisions",JSON.stringify(E)),(await ue.post("/prm/v1/import/google-contacts",k,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?n(!0):N.type==="dragleave"&&n(!1)},[]),f=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),n(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&m(N.dataTransfer.files[0])},[]),p=N=>{N.target.files&&N.target.files[0]&&m(N.target.files[0])},m=N=>{if(!N.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(N),s(null),a({}),d.reset(),c.mutate(N)},g=(N,E)=>{a(k=>({...k,[N]:E}))},b=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),c.reset(),d.reset()},v=(i==null?void 0:i.duplicates)||[],w=v.length>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),u.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[u.jsxs("li",{children:["Go to ",u.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),u.jsx("li",{children:'Click "Export" in the left sidebar'}),u.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Pd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((N,E)=>u.jsx("li",{children:N},E))})]})]}),u.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(wc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(WR,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(_c,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Pd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Fs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(ate,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(gte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(cte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&u.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(bfe,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("h3",{className:"font-medium text-amber-900",children:[v.length," contact",v.length>1?"s":""," may already exist"]}),u.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),u.jsx("div",{className:"mt-4 space-y-4",children:v.map(N=>u.jsx(d_e,{duplicate:N,decision:o[N.index]||"merge",onDecision:E=>g(N.index,E)},N.index))})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:b,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(wc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(_c,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=d.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function d_e({duplicate:t,decision:e,onDecision:r}){var n,i;return u.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),u.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),u.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?u.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Afe,{className:"h-4 w-4"}),"Update existing"]}),u.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Bfe,{className:"h-4 w-4"}),"Create new"]}),u.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Ffe,{className:"h-4 w-4"}),"Skip"]})]})]})}const mq=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:Jp,component:c_e},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:WR,component:u_e},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:Nfe,component:l_e}];function h_e(){var n;An("Import - Settings");const[t,e]=T.useState("vcard"),r=(n=mq.find(i=>i.id===t))==null?void 0:n.component;return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ce,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(ti,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"Import Contacts"})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:mq.map(i=>{const s=i.icon,o=t===i.id;return u.jsxs("button",{onClick:()=>e(i.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${o?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.jsx(s,{className:`mr-2 h-5 w-5 ${o?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:"block",children:i.name}),u.jsx("span",{className:`block text-xs font-normal ${o?"text-primary-400":"text-gray-400"}`,children:i.description})]})]},i.id)})})}),r&&u.jsx(r,{})]})]})}function f_e(){An("Export Data - Settings");const t=e=>{e==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":e==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")};return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ce,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(ti,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"Export Data"})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>t("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(Jp,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),u.jsx(DP,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("button",{onClick:()=>t("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(WR,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),u.jsx(DP,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function p_e(){An("User Approval - Settings");const t=yt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(fte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),u.jsx(ce,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ut({queryKey:["users"],queryFn:async()=>(await Fe.getUsers()).data}),s=ht({mutationFn:p=>Fe.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=ht({mutationFn:p=>Fe.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=ht({mutationFn:p=>Fe.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},c=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(wc,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ce,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(ti,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),u.jsxs("div",{className:"space-y-6",children:[h.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),u.jsx("div",{className:"space-y-3",children:h.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:p.name}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email}),u.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[u.jsx(cF,{className:"w-4 h-4"}),"Approve"]}),u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(hF,{className:"w-4 h-4"}),"Deny"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(ci,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),u.jsx("div",{className:"space-y-3",children:f.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,u.jsx(cF,{className:"w-4 h-4 text-green-600"})]}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(hF,{className:"w-4 h-4"}),"Revoke Access"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(ci,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&u.jsx("div",{className:"card p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var gq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function it(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F1={exports:{}},yq={},Zh,vq;function Cr(){if(vq)return Zh;vq=1;var t=function(e){return e&&e.Math===Math&&e};return Zh=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof gq=="object"&&gq)||t(typeof Zh=="object"&&Zh)||function(){return this}()||Function("return this")(),Zh}var q1,bq;function _t(){return bq||(bq=1,q1=function(t){try{return!!t()}catch{return!0}}),q1}var L1,xq;function om(){if(xq)return L1;xq=1;var t=_t();return L1=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),L1}var B1,wq;function z0(){if(wq)return B1;wq=1;var t=om(),e=Function.prototype,r=e.apply,n=e.call;return B1=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),B1}var z1,Sq;function Tt(){if(Sq)return z1;Sq=1;var t=om(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return z1=t?n:function(i){return function(){return r.apply(i,arguments)}},z1}var V1,_q;function zo(){if(_q)return V1;_q=1;var t=Tt(),e=t({}.toString),r=t("".slice);return V1=function(n){return r(e(n),8,-1)},V1}var U1,Eq;function Rie(){if(Eq)return U1;Eq=1;var t=zo(),e=Tt();return U1=function(r){if(t(r)==="Function")return e(r)},U1}var H1,Nq;function Ur(){if(Nq)return H1;Nq=1;var t=typeof document=="object"&&document.all;return H1=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},H1}var W1={},K1,Cq;function kr(){if(Cq)return K1;Cq=1;var t=_t();return K1=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),K1}var G1,kq;function ii(){if(kq)return G1;kq=1;var t=om(),e=Function.prototype.call;return G1=t?e.bind(e):function(){return e.apply(e,arguments)},G1}var Y1={},Tq;function WM(){if(Tq)return Y1;Tq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return Y1.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,Y1}var Q1,Oq;function am(){return Oq||(Oq=1,Q1=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),Q1}var X1,jq;function V0(){if(jq)return X1;jq=1;var t=Tt(),e=_t(),r=zo(),n=Object,i=t("".split);return X1=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,X1}var J1,Pq;function lm(){return Pq||(Pq=1,J1=function(t){return t==null}),J1}var Z1,Iq;function Kc(){if(Iq)return Z1;Iq=1;var t=lm(),e=TypeError;return Z1=function(r){if(t(r))throw new e("Can't call method on "+r);return r},Z1}var ex,Rq;function Us(){if(Rq)return ex;Rq=1;var t=V0(),e=Kc();return ex=function(r){return t(e(r))},ex}var tx,Mq;function Fn(){if(Mq)return tx;Mq=1;var t=Ur();return tx=function(e){return typeof e=="object"?e!==null:t(e)},tx}var rx,$q;function $r(){return $q||($q=1,rx={}),rx}var nx,Dq;function xi(){if(Dq)return nx;Dq=1;var t=$r(),e=Cr(),r=Ur(),n=function(i){return r(i)?i:void 0};return nx=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},nx}var ix,Aq;function Hr(){if(Aq)return ix;Aq=1;var t=Tt();return ix=t({}.isPrototypeOf),ix}var sx,Fq;function ah(){if(Fq)return sx;Fq=1;var t=Cr(),e=t.navigator,r=e&&e.userAgent;return sx=r?String(r):"",sx}var ox,qq;function cm(){if(qq)return ox;qq=1;var t=Cr(),e=ah(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),ox=a,ox}var ax,Lq;function lh(){if(Lq)return ax;Lq=1;var t=cm(),e=_t(),r=Cr(),n=r.String;return ax=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),ax}var lx,Bq;function Mie(){if(Bq)return lx;Bq=1;var t=lh();return lx=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",lx}var cx,zq;function um(){if(zq)return cx;zq=1;var t=xi(),e=Ur(),r=Hr(),n=Mie(),i=Object;return cx=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},cx}var ux,Vq;function ch(){if(Vq)return ux;Vq=1;var t=String;return ux=function(e){try{return t(e)}catch{return"Object"}},ux}var dx,Uq;function Vo(){if(Uq)return dx;Uq=1;var t=Ur(),e=ch(),r=TypeError;return dx=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},dx}var hx,Hq;function KM(){if(Hq)return hx;Hq=1;var t=Vo(),e=lm();return hx=function(r,n){var i=r[n];return e(i)?void 0:t(i)},hx}var fx,Wq;function m_e(){if(Wq)return fx;Wq=1;var t=ii(),e=Ur(),r=Fn(),n=TypeError;return fx=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},fx}var px={exports:{}},mx,Kq;function uh(){return Kq||(Kq=1,mx=!0),mx}var gx,Gq;function g_e(){if(Gq)return gx;Gq=1;var t=Cr(),e=Object.defineProperty;return gx=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},gx}var Yq;function GM(){if(Yq)return px.exports;Yq=1;var t=uh(),e=Cr(),r=g_e(),n="__core-js_shared__",i=px.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),px.exports}var yx,Qq;function dh(){if(Qq)return yx;Qq=1;var t=GM();return yx=function(e,r){return t[e]||(t[e]=r||{})},yx}var vx,Xq;function ys(){if(Xq)return vx;Xq=1;var t=Kc(),e=Object;return vx=function(r){return e(t(r))},vx}var bx,Jq;function Wr(){if(Jq)return bx;Jq=1;var t=Tt(),e=ys(),r=t({}.hasOwnProperty);return bx=Object.hasOwn||function(i,s){return r(e(i),s)},bx}var xx,Zq;function U0(){if(Zq)return xx;Zq=1;var t=Tt(),e=0,r=Math.random(),n=t(1.1.toString);return xx=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},xx}var wx,eL;function Kr(){if(eL)return wx;eL=1;var t=Cr(),e=dh(),r=Wr(),n=U0(),i=lh(),s=Mie(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return wx=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},wx}var Sx,tL;function $ie(){if(tL)return Sx;tL=1;var t=ii(),e=Fn(),r=um(),n=KM(),i=m_e(),s=Kr(),o=TypeError,a=s("toPrimitive");return Sx=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},Sx}var _x,rL;function YM(){if(rL)return _x;rL=1;var t=$ie(),e=um();return _x=function(r){var n=t(r,"string");return e(n)?n:n+""},_x}var Ex,nL;function Die(){if(nL)return Ex;nL=1;var t=Cr(),e=Fn(),r=t.document,n=e(r)&&e(r.createElement);return Ex=function(i){return n?r.createElement(i):{}},Ex}var Nx,iL;function Aie(){if(iL)return Nx;iL=1;var t=kr(),e=_t(),r=Die();return Nx=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Nx}var sL;function H0(){if(sL)return W1;sL=1;var t=kr(),e=ii(),r=WM(),n=am(),i=Us(),s=YM(),o=Wr(),a=Aie(),l=Object.getOwnPropertyDescriptor;return W1.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},W1}var Cx,oL;function y_e(){if(oL)return Cx;oL=1;var t=_t(),e=Ur(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Cx=n,Cx}var kx,aL;function W0(){if(aL)return kx;aL=1;var t=Rie(),e=Vo(),r=om(),n=t(t.bind);return kx=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},kx}var Tx={},Ox,lL;function Fie(){if(lL)return Ox;lL=1;var t=kr(),e=_t();return Ox=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Ox}var jx,cL;function Uo(){if(cL)return jx;cL=1;var t=Fn(),e=String,r=TypeError;return jx=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},jx}var uL;function Ui(){if(uL)return Tx;uL=1;var t=kr(),e=Aie(),r=Fie(),n=Uo(),i=YM(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return Tx.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Tx}var Px,dL;function hh(){if(dL)return Px;dL=1;var t=kr(),e=Ui(),r=am();return Px=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},Px}var Ix,hL;function Ve(){if(hL)return Ix;hL=1;var t=Cr(),e=z0(),r=Rie(),n=Ur(),i=H0().f,s=y_e(),o=$r(),a=W0(),l=hh(),c=Wr(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return Ix=function(h,f){var p=h.target,m=h.global,g=h.stat,b=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,v=m?o:o[p]||l(o,p,{})[p],w=v.prototype,x,S,_,N,E,k,C,O,j;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),k=v[N],S&&(h.dontCallGetSet?(j=i(y,N),C=j&&j.value):C=y[N]),E=S&&C?C:f[N],!(!x&&!b&&typeof k==typeof E)&&(h.bind&&S?O=a(E,t):h.wrap&&S?O=d(E):b&&n(E)?O=r(E):O=E,(h.sham||E&&E.sham||k&&k.sham)&&l(O,"sham",!0),l(v,N,O),b&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},Ix}var fL;function v_e(){if(fL)return yq;fL=1;var t=Ve(),e=kr(),r=Ui().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),yq}var pL;function b_e(){if(pL)return F1.exports;pL=1,v_e();var t=$r(),e=t.Object,r=F1.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),F1.exports}var Rx,mL;function qie(){if(mL)return Rx;mL=1;var t=b_e();return Rx=t,Rx}var Mx,gL;function x_e(){if(gL)return Mx;gL=1;var t=qie();return Mx=t,Mx}var $x,yL;function w_e(){if(yL)return $x;yL=1;var t=x_e();return $x=t,$x}var Dx,vL;function S_e(){return vL||(vL=1,Dx=w_e()),Dx}var __e=S_e(),E_e=it(__e),bL={},Ax,xL;function Gc(){if(xL)return Ax;xL=1;var t=zo();return Ax=Array.isArray||function(r){return t(r)==="Array"},Ax}var Fx,wL;function N_e(){if(wL)return Fx;wL=1;var t=Math.ceil,e=Math.floor;return Fx=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},Fx}var qx,SL;function fh(){if(SL)return qx;SL=1;var t=N_e();return qx=function(e){var r=+e;return r!==r||r===0?0:t(r)},qx}var Lx,_L;function Lie(){if(_L)return Lx;_L=1;var t=fh(),e=Math.min;return Lx=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},Lx}var Bx,EL;function fl(){if(EL)return Bx;EL=1;var t=Lie();return Bx=function(e){return t(e.length)},Bx}var zx,NL;function Bie(){if(NL)return zx;NL=1;var t=TypeError,e=9007199254740991;return zx=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},zx}var Vx,CL;function K0(){if(CL)return Vx;CL=1;var t=kr(),e=Ui(),r=am();return Vx=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},Vx}var Ux,kL;function QM(){if(kL)return Ux;kL=1;var t=Kr(),e=t("toStringTag"),r={};return r[e]="z",Ux=String(r)==="[object z]",Ux}var Hx,TL;function pl(){if(TL)return Hx;TL=1;var t=QM(),e=Ur(),r=zo(),n=Kr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return Hx=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},Hx}var Wx,OL;function C_e(){if(OL)return Wx;OL=1;var t=Tt(),e=Ur(),r=GM(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),Wx=r.inspectSource,Wx}var Kx,jL;function zie(){if(jL)return Kx;jL=1;var t=Tt(),e=_t(),r=Ur(),n=pl(),i=xi(),s=C_e(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,Kx=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,Kx}var Gx,PL;function k_e(){if(PL)return Gx;PL=1;var t=Gc(),e=zie(),r=Fn(),n=Kr(),i=n("species"),s=Array;return Gx=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},Gx}var Yx,IL;function XM(){if(IL)return Yx;IL=1;var t=k_e();return Yx=function(e,r){return new(t(e))(r===0?0:r)},Yx}var Qx,RL;function dm(){if(RL)return Qx;RL=1;var t=_t(),e=Kr(),r=cm(),n=e("species");return Qx=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},Qx}var ML;function Vie(){if(ML)return bL;ML=1;var t=Ve(),e=_t(),r=Gc(),n=Fn(),i=ys(),s=fl(),o=Bie(),a=K0(),l=XM(),c=dm(),d=Kr(),h=cm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var b=[];return b[f]=!1,b.concat()[0]!==b}),m=function(b){if(!n(b))return!1;var y=b[f];return y!==void 0?!!y:r(b)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var v=i(this),w=l(v,0),x=0,S,_,N,E,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?v:arguments[S],m(k))for(E=s(k),o(x+E),_=0;_<E;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),bL}var $L={},DL={},Xx,AL;function ml(){if(AL)return Xx;AL=1;var t=pl(),e=String;return Xx=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},Xx}var Jx={},Zx,FL;function JM(){if(FL)return Zx;FL=1;var t=fh(),e=Math.max,r=Math.min;return Zx=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},Zx}var ew,qL;function T_e(){if(qL)return ew;qL=1;var t=Us(),e=JM(),r=fl(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return ew={includes:n(!0),indexOf:n(!1)},ew}var tw,LL;function hm(){return LL||(LL=1,tw={}),tw}var rw,BL;function Uie(){if(BL)return rw;BL=1;var t=Tt(),e=Wr(),r=Us(),n=T_e().indexOf,i=hm(),s=t([].push);return rw=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},rw}var nw,zL;function ZM(){return zL||(zL=1,nw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),nw}var iw,VL;function G0(){if(VL)return iw;VL=1;var t=Uie(),e=ZM();return iw=Object.keys||function(n){return t(n,e)},iw}var UL;function e$(){if(UL)return Jx;UL=1;var t=kr(),e=Fie(),r=Ui(),n=Uo(),i=Us(),s=G0();return Jx.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},Jx}var sw,HL;function O_e(){if(HL)return sw;HL=1;var t=xi();return sw=t("document","documentElement"),sw}var ow,WL;function Y0(){if(WL)return ow;WL=1;var t=dh(),e=U0(),r=t("keys");return ow=function(n){return r[n]||(r[n]=e(n))},ow}var aw,KL;function fm(){if(KL)return aw;KL=1;var t=Uo(),e=e$(),r=ZM(),n=hm(),i=O_e(),s=Die(),o=Y0(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(v){return l+d+a+v+l+"/"+d+a},m=function(v){v.write(p("")),v.close();var w=v.parentWindow.Object;return v=null,w},g=function(){var v=s("iframe"),w="java"+d+":",x;return v.style.display="none",i.appendChild(v),v.src=String(w),x=v.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},b,y=function(){try{b=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&b?m(b):g():m(b);for(var v=r.length;v--;)delete y[c][r[v]];return y()};return n[h]=!0,aw=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},aw}var lw={},GL;function Q0(){if(GL)return lw;GL=1;var t=Uie(),e=ZM(),r=e.concat("length","prototype");return lw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},lw}var cw={},uw,YL;function ph(){if(YL)return uw;YL=1;var t=Tt();return uw=t([].slice),uw}var QL;function Hie(){if(QL)return cw;QL=1;var t=zo(),e=Us(),r=Q0().f,n=ph(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return cw.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},cw}var dw={},XL;function X0(){return XL||(XL=1,dw.f=Object.getOwnPropertySymbols),dw}var hw,JL;function pm(){if(JL)return hw;JL=1;var t=hh();return hw=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},hw}var fw,ZL;function t$(){if(ZL)return fw;ZL=1;var t=Ui();return fw=function(e,r,n){return t.f(e,r,n)},fw}var pw={},e3;function J0(){if(e3)return pw;e3=1;var t=Kr();return pw.f=t,pw}var mw,t3;function Jt(){if(t3)return mw;t3=1;var t=$r(),e=Wr(),r=J0(),n=Ui().f;return mw=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},mw}var gw,r3;function Wie(){if(r3)return gw;r3=1;var t=ii(),e=xi(),r=Kr(),n=pm();return gw=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},gw}var yw,n3;function j_e(){if(n3)return yw;n3=1;var t=QM(),e=pl();return yw=t?{}.toString:function(){return"[object "+e(this)+"]"},yw}var vw,i3;function Yc(){if(i3)return vw;i3=1;var t=QM(),e=Ui().f,r=hh(),n=Wr(),i=j_e(),s=Kr(),o=s("toStringTag");return vw=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},vw}var bw,s3;function P_e(){if(s3)return bw;s3=1;var t=Cr(),e=Ur(),r=t.WeakMap;return bw=e(r)&&/native code/.test(String(r)),bw}var xw,o3;function mm(){if(o3)return xw;o3=1;var t=P_e(),e=Cr(),r=Fn(),n=hh(),i=Wr(),s=GM(),o=Y0(),a=hm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(v){return p(v)?f(v):h(v,{})},g=function(v){return function(w){var x;if(!r(w)||(x=f(w)).type!==v)throw new c("Incompatible receiver, "+v+" required");return x}};if(t||s.state){var b=s.state||(s.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,h=function(v,w){if(b.has(v))throw new c(l);return w.facade=v,b.set(v,w),w},f=function(v){return b.get(v)||{}},p=function(v){return b.has(v)}}else{var y=o("state");a[y]=!0,h=function(v,w){if(i(v,y))throw new c(l);return w.facade=v,n(v,y,w),w},f=function(v){return i(v,y)?v[y]:{}},p=function(v){return i(v,y)}}return xw={set:h,get:f,has:p,enforce:m,getterFor:g},xw}var ww,a3;function mh(){if(a3)return ww;a3=1;var t=W0(),e=Tt(),r=V0(),n=ys(),i=fl(),s=XM(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(b,y,v,w){for(var x=n(b),S=r(x),_=i(S),N=t(y,v),E=0,k=w||s,C=c?k(b,_):d||m?k(b,0):void 0,O,j;_>E;E++)if((g||E in S)&&(O=S[E],j=N(O,E,x),l))if(c)C[E]=j;else if(j)switch(l){case 3:return!0;case 5:return O;case 6:return E;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return ww={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},ww}var l3;function I_e(){if(l3)return DL;l3=1;var t=Ve(),e=Cr(),r=ii(),n=Tt(),i=uh(),s=kr(),o=lh(),a=_t(),l=Wr(),c=Hr(),d=Uo(),h=Us(),f=YM(),p=ml(),m=am(),g=fm(),b=G0(),y=Q0(),v=Hie(),w=X0(),x=H0(),S=Ui(),_=e$(),N=WM(),E=pm(),k=t$(),C=dh(),O=Y0(),j=hm(),P=U0(),A=Kr(),q=J0(),R=Jt(),L=Wie(),D=Yc(),W=mm(),z=mh().forEach,H=O("hidden"),K="Symbol",he="prototype",xe=W.set,Be=W.getterFor(K),we=Object[he],Ie=e.Symbol,ze=Ie&&Ie[he],Ze=e.RangeError,Nt=e.TypeError,ft=e.QObject,J=x.f,Ne=S.f,Ue=v.f,et=N.f,Lt=n([].push),Se=C("symbols"),We=C("op-symbols"),Dt=C("wks"),Bt=!ft||!ft[he]||!ft[he].findChild,M=function(_e,se,fe){var de=J(we,se);de&&delete we[se],Ne(_e,se,fe),de&&_e!==we&&Ne(we,se,de)},F=s&&a(function(){return g(Ne({},"a",{get:function(){return Ne(this,"a",{value:7}).a}})).a!==7})?M:Ne,V=function(_e,se){var fe=Se[_e]=g(ze);return xe(fe,{type:K,tag:_e,description:se}),s||(fe.description=se),fe},oe=function(se,fe,de){se===we&&oe(We,fe,de),d(se);var Ce=f(fe);return d(de),l(Se,Ce)?(de.enumerable?(l(se,H)&&se[H][Ce]&&(se[H][Ce]=!1),de=g(de,{enumerable:m(0,!1)})):(l(se,H)||Ne(se,H,m(1,g(null))),se[H][Ce]=!0),F(se,Ce,de)):Ne(se,Ce,de)},Z=function(se,fe){d(se);var de=h(fe),Ce=b(de).concat(zt(de));return z(Ce,function(ot){(!s||r(ye,de,ot))&&oe(se,ot,de[ot])}),se},Q=function(se,fe){return fe===void 0?g(se):Z(g(se),fe)},ye=function(se){var fe=f(se),de=r(et,this,fe);return this===we&&l(Se,fe)&&!l(We,fe)?!1:de||!l(this,fe)||!l(Se,fe)||l(this,H)&&this[H][fe]?de:!0},Ge=function(se,fe){var de=h(se),Ce=f(fe);if(!(de===we&&l(Se,Ce)&&!l(We,Ce))){var ot=J(de,Ce);return ot&&l(Se,Ce)&&!(l(de,H)&&de[H][Ce])&&(ot.enumerable=!0),ot}},rt=function(se){var fe=Ue(h(se)),de=[];return z(fe,function(Ce){!l(Se,Ce)&&!l(j,Ce)&&Lt(de,Ce)}),de},zt=function(_e){var se=_e===we,fe=Ue(se?We:h(_e)),de=[];return z(fe,function(Ce){l(Se,Ce)&&(!se||l(we,Ce))&&Lt(de,Se[Ce])}),de};return o||(Ie=function(){if(c(ze,this))throw new Nt("Symbol is not a constructor");var se=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),fe=P(se),de=function(Ce){var ot=this===void 0?e:this;ot===we&&r(de,We,Ce),l(ot,H)&&l(ot[H],fe)&&(ot[H][fe]=!1);var _i=m(1,Ce);try{F(ot,fe,_i)}catch(Yi){if(!(Yi instanceof Ze))throw Yi;M(ot,fe,_i)}};return s&&Bt&&F(we,fe,{configurable:!0,set:de}),V(fe,se)},ze=Ie[he],E(ze,"toString",function(){return Be(this).tag}),E(Ie,"withoutSetter",function(_e){return V(P(_e),_e)}),N.f=ye,S.f=oe,_.f=Z,x.f=Ge,y.f=v.f=rt,w.f=zt,q.f=function(_e){return V(A(_e),_e)},s&&(k(ze,"description",{configurable:!0,get:function(){return Be(this).description}}),i||E(we,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Ie}),z(b(Dt),function(_e){R(_e)}),t({target:K,stat:!0,forced:!o},{useSetter:function(){Bt=!0},useSimple:function(){Bt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Q,defineProperty:oe,defineProperties:Z,getOwnPropertyDescriptor:Ge}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:rt}),L(),D(Ie,K),j[H]=!0,DL}var c3={},Sw,u3;function Kie(){if(u3)return Sw;u3=1;var t=lh();return Sw=t&&!!Symbol.for&&!!Symbol.keyFor,Sw}var d3;function R_e(){if(d3)return c3;d3=1;var t=Ve(),e=xi(),r=Wr(),n=ml(),i=dh(),s=Kie(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),c3}var h3={},f3;function M_e(){if(f3)return h3;f3=1;var t=Ve(),e=Wr(),r=um(),n=ch(),i=dh(),s=Kie(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),h3}var p3={},_w,m3;function $_e(){if(m3)return _w;m3=1;var t=Tt(),e=Gc(),r=Ur(),n=zo(),i=ml(),s=t([].push);return _w=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},_w}var g3;function Gie(){if(g3)return p3;g3=1;var t=Ve(),e=xi(),r=z0(),n=ii(),i=Tt(),s=_t(),o=Ur(),a=um(),l=ph(),c=$_e(),d=lh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),b=i("".replace),y=i(1.1.toString),v=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,C){var O=l(arguments),j=c(C);if(!(!o(j)&&(k===void 0||a(k))))return O[1]=function(P,A){if(o(j)&&(A=n(j,this,h(P),A)),!a(A))return A},r(f,null,O)},E=function(k,C,O){var j=m(O,C-1),P=m(O,C+1);return p(w,k)&&!p(x,P)||p(x,k)&&!p(w,j)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,j){var P=l(arguments),A=r(S?N:f,null,P);return _&&typeof A=="string"?b(A,v,E):A}}),p3}var y3={},v3;function D_e(){if(v3)return y3;v3=1;var t=Ve(),e=lh(),r=_t(),n=X0(),i=ys(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),y3}var b3;function Yie(){return b3||(b3=1,I_e(),R_e(),M_e(),Gie(),D_e()),$L}var x3={},w3;function Qie(){if(w3)return x3;w3=1;var t=Jt();return t("asyncDispose"),x3}var S3={},_3;function A_e(){if(_3)return S3;_3=1;var t=Jt();return t("asyncIterator"),S3}var E3={},N3;function Xie(){if(N3)return E3;N3=1;var t=Jt();return t("dispose"),E3}var C3={},k3;function F_e(){if(k3)return C3;k3=1;var t=Jt();return t("hasInstance"),C3}var T3={},O3;function q_e(){if(O3)return T3;O3=1;var t=Jt();return t("isConcatSpreadable"),T3}var j3={},P3;function Jie(){if(P3)return j3;P3=1;var t=Jt();return t("iterator"),j3}var I3={},R3;function L_e(){if(R3)return I3;R3=1;var t=Jt();return t("match"),I3}var M3={},$3;function B_e(){if($3)return M3;$3=1;var t=Jt();return t("matchAll"),M3}var D3={},A3;function z_e(){if(A3)return D3;A3=1;var t=Jt();return t("replace"),D3}var F3={},q3;function V_e(){if(q3)return F3;q3=1;var t=Jt();return t("search"),F3}var L3={},B3;function U_e(){if(B3)return L3;B3=1;var t=Jt();return t("species"),L3}var z3={},V3;function H_e(){if(V3)return z3;V3=1;var t=Jt();return t("split"),z3}var U3={},H3;function Zie(){if(H3)return U3;H3=1;var t=Jt(),e=Wie();return t("toPrimitive"),e(),U3}var W3={},K3;function W_e(){if(K3)return W3;K3=1;var t=xi(),e=Jt(),r=Yc();return e("toStringTag"),r(t("Symbol"),"Symbol"),W3}var G3={},Y3;function K_e(){if(Y3)return G3;Y3=1;var t=Jt();return t("unscopables"),G3}var Q3={},X3;function G_e(){if(X3)return Q3;X3=1;var t=Cr(),e=Yc();return e(t.JSON,"JSON",!0),Q3}var Ew,J3;function Y_e(){if(J3)return Ew;J3=1,Vie(),Yie(),Qie(),A_e(),Xie(),F_e(),q_e(),Jie(),L_e(),B_e(),z_e(),V_e(),U_e(),H_e(),Zie(),W_e(),K_e(),G_e();var t=$r();return Ew=t.Symbol,Ew}var Z3={},Nw,e5;function Q_e(){return e5||(e5=1,Nw=function(){}),Nw}var Cw,t5;function gh(){return t5||(t5=1,Cw={}),Cw}var kw,r5;function X_e(){if(r5)return kw;r5=1;var t=kr(),e=Wr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return kw={EXISTS:i,PROPER:s,CONFIGURABLE:o},kw}var Tw,n5;function J_e(){if(n5)return Tw;n5=1;var t=_t();return Tw=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Tw}var Ow,i5;function ese(){if(i5)return Ow;i5=1;var t=Wr(),e=Ur(),r=ys(),n=Y0(),i=J_e(),s=n("IE_PROTO"),o=Object,a=o.prototype;return Ow=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},Ow}var jw,s5;function tse(){if(s5)return jw;s5=1;var t=_t(),e=Ur(),r=Fn(),n=fm(),i=ese(),s=pm(),o=Kr(),a=uh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),jw={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},jw}var Pw,o5;function Z_e(){if(o5)return Pw;o5=1;var t=tse().IteratorPrototype,e=fm(),r=am(),n=Yc(),i=gh(),s=function(){return this};return Pw=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},Pw}var Iw,a5;function eEe(){if(a5)return Iw;a5=1;var t=Tt(),e=Vo();return Iw=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},Iw}var Rw,l5;function tEe(){if(l5)return Rw;l5=1;var t=Fn();return Rw=function(e){return t(e)||e===null},Rw}var Mw,c5;function rEe(){if(c5)return Mw;c5=1;var t=tEe(),e=String,r=TypeError;return Mw=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},Mw}var $w,u5;function nEe(){if(u5)return $w;u5=1;var t=eEe(),e=Fn(),r=Kc(),n=rEe();return $w=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),$w}var Dw,d5;function r$(){if(d5)return Dw;d5=1;var t=Ve(),e=ii(),r=uh(),n=X_e(),i=Ur(),s=Z_e(),o=ese(),a=nEe(),l=Yc(),c=hh(),d=pm(),h=Kr(),f=gh(),p=tse(),m=n.PROPER,g=n.CONFIGURABLE,b=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,v=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return Dw=function(N,E,k,C,O,j,P){s(k,E,C);var A=function(xe){if(xe===O&&W)return W;if(!y&&xe&&xe in L)return L[xe];switch(xe){case w:return function(){return new k(this,xe)};case x:return function(){return new k(this,xe)};case S:return function(){return new k(this,xe)}}return function(){return new k(this)}},q=E+" Iterator",R=!1,L=N.prototype,D=L[v]||L["@@iterator"]||O&&L[O],W=!y&&D||A(O),z=E==="Array"&&L.entries||D,H,K,he;if(z&&(H=o(z.call(new N)),H!==Object.prototype&&H.next&&(!r&&o(H)!==b&&(a?a(H,b):i(H[v])||d(H,v,_)),l(H,q,!0,!0),r&&(f[q]=_))),m&&O===x&&D&&D.name!==x&&(!r&&g?c(L,"name",x):(R=!0,W=function(){return e(D,this)})),O)if(K={values:A(x),keys:j?W:A(w),entries:A(S)},P)for(he in K)(y||R||!(he in L))&&d(L,he,K[he]);else t({target:E,proto:!0,forced:y||R},K);return(!r||P)&&L[v]!==W&&d(L,v,W,{name:O}),f[E]=W,K},Dw}var Aw,h5;function n$(){return h5||(h5=1,Aw=function(t,e){return{value:t,done:e}}),Aw}var Fw,f5;function gl(){if(f5)return Fw;f5=1;var t=Us(),e=Q_e(),r=gh(),n=mm(),i=Ui().f,s=r$(),o=n$(),a=uh(),l=kr(),c="Array Iterator",d=n.set,h=n.getterFor(c);Fw=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return Fw}var qw,p5;function iEe(){return p5||(p5=1,qw={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),qw}var m5;function yl(){if(m5)return Z3;m5=1,gl();var t=iEe(),e=Cr(),r=Yc(),n=gh();for(var i in t)r(e[i],i),n[i]=n.Array;return Z3}var Lw,g5;function rse(){if(g5)return Lw;g5=1;var t=Y_e();return yl(),Lw=t,Lw}var y5={},v5;function sEe(){if(v5)return y5;v5=1;var t=Kr(),e=Ui().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),y5}var b5={},x5;function oEe(){return x5||(x5=1,Qie()),b5}var w5={},S5;function aEe(){return S5||(S5=1,Xie()),w5}var _5={},E5;function lEe(){if(E5)return _5;E5=1;var t=Jt();return t("metadata"),_5}var Bw,N5;function cEe(){if(N5)return Bw;N5=1;var t=rse();return sEe(),oEe(),aEe(),lEe(),Bw=t,Bw}var C5={},zw,k5;function nse(){if(k5)return zw;k5=1;var t=xi(),e=Tt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return zw=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},zw}var T5;function uEe(){if(T5)return C5;T5=1;var t=Ve(),e=nse();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),C5}var O5={},Vw,j5;function ise(){if(j5)return Vw;j5=1;for(var t=dh(),e=xi(),r=Tt(),n=um(),i=Kr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return Vw=function(g){if(o&&o(g))return!0;try{for(var b=l(g),y=0,v=a(c),w=v.length;y<w;y++)if(c[v[y]]==b)return!0}catch{}return!1},Vw}var P5;function dEe(){if(P5)return O5;P5=1;var t=Ve(),e=ise();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),O5}var I5={},R5;function hEe(){if(R5)return I5;R5=1;var t=Jt();return t("customMatcher"),I5}var M5={},$5;function fEe(){if($5)return M5;$5=1;var t=Jt();return t("observable"),M5}var D5={},A5;function pEe(){if(A5)return D5;A5=1;var t=Ve(),e=nse();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),D5}var F5={},q5;function mEe(){if(q5)return F5;q5=1;var t=Ve(),e=ise();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),F5}var L5={},B5;function gEe(){if(B5)return L5;B5=1;var t=Jt();return t("matcher"),L5}var z5={},V5;function yEe(){if(V5)return z5;V5=1;var t=Jt();return t("metadataKey"),z5}var U5={},H5;function vEe(){if(H5)return U5;H5=1;var t=Jt();return t("patternMatch"),U5}var W5={},K5;function bEe(){if(K5)return W5;K5=1;var t=Jt();return t("replaceAll"),W5}var Uw,G5;function xEe(){if(G5)return Uw;G5=1;var t=cEe();return uEe(),dEe(),hEe(),fEe(),pEe(),mEe(),gEe(),yEe(),vEe(),bEe(),Uw=t,Uw}var Hw,Y5;function wEe(){return Y5||(Y5=1,Hw=xEe()),Hw}var SEe=wEe(),Pg=it(SEe),Q5={},Ww,X5;function _Ee(){if(X5)return Ww;X5=1;var t=Tt(),e=fh(),r=ml(),n=Kc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return Ww={codeAt:a(!1),charAt:a(!0)},Ww}var J5;function Z0(){if(J5)return Q5;J5=1;var t=_Ee().charAt,e=ml(),r=mm(),n=r$(),i=n$(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),Q5}var Kw,Z5;function EEe(){if(Z5)return Kw;Z5=1,gl(),Z0(),Jie();var t=J0();return Kw=t.f("iterator"),Kw}var Gw,eB;function sse(){if(eB)return Gw;eB=1;var t=EEe();return yl(),Gw=t,Gw}var Yw,tB;function NEe(){if(tB)return Yw;tB=1;var t=sse();return Yw=t,Yw}var Qw,rB;function CEe(){if(rB)return Qw;rB=1;var t=NEe();return Qw=t,Qw}var Xw,nB;function kEe(){return nB||(nB=1,Xw=CEe()),Xw}var TEe=kEe(),OEe=it(TEe);function _p(t){"@babel/helpers - typeof";return _p=typeof Pg=="function"&&typeof OEe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Pg=="function"&&e.constructor===Pg&&e!==Pg.prototype?"symbol":typeof e},_p(t)}var Jw,iB;function jEe(){if(iB)return Jw;iB=1,Zie();var t=J0();return Jw=t.f("toPrimitive"),Jw}var Zw,sB;function PEe(){if(sB)return Zw;sB=1;var t=jEe();return Zw=t,Zw}var eS,oB;function IEe(){if(oB)return eS;oB=1;var t=PEe();return eS=t,eS}var tS,aB;function REe(){if(aB)return tS;aB=1;var t=IEe();return tS=t,tS}var rS,lB;function MEe(){return lB||(lB=1,rS=REe()),rS}var $Ee=MEe(),DEe=it($Ee);function AEe(t,e){if(_p(t)!="object"||!t)return t;var r=t[DEe];if(r!==void 0){var n=r.call(t,e);if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FEe(t){var e=AEe(t,"string");return _p(e)=="symbol"?e:e+""}function Ka(t,e,r){return(e=FEe(e))in t?E_e(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var cB={},nS,uB;function qEe(){if(uB)return nS;uB=1;var t=Tt(),e=Vo(),r=Fn(),n=Wr(),i=ph(),s=om(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return nS=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),b=function(){var v=a(g,i(arguments));return this instanceof b?d(p,v.length,v):p.apply(f,v)};return r(m)&&(b.prototype=m),b},nS}var dB;function LEe(){if(dB)return cB;dB=1;var t=Ve(),e=qEe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),cB}var iS,hB;function si(){if(hB)return iS;hB=1;var t=Cr(),e=$r();return iS=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},iS}var sS,fB;function BEe(){if(fB)return sS;fB=1,LEe();var t=si();return sS=t("Function","bind"),sS}var oS,pB;function zEe(){if(pB)return oS;pB=1;var t=Hr(),e=BEe(),r=Function.prototype;return oS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},oS}var aS,mB;function VEe(){if(mB)return aS;mB=1;var t=zEe();return aS=t,aS}var lS,gB;function UEe(){return gB||(gB=1,lS=VEe()),lS}var HEe=UEe(),ose=it(HEe),yB={},cS,vB;function WEe(){if(vB)return cS;vB=1;var t=Vo(),e=ys(),r=V0(),n=fl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,b=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=b;break}if(g+=b,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=b)g in p&&(h=c(h,p[g],g,f));return h}};return cS={left:o(!1),right:o(!0)},cS}var uS,bB;function eb(){if(bB)return uS;bB=1;var t=_t();return uS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},uS}var dS,xB;function ase(){if(xB)return dS;xB=1;var t=Cr(),e=ah(),r=zo(),n=function(i){return e.slice(0,i.length)===i};return dS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),dS}var hS,wB;function KEe(){if(wB)return hS;wB=1;var t=ase();return hS=t==="NODE",hS}var SB;function GEe(){if(SB)return yB;SB=1;var t=Ve(),e=WEe().left,r=eb(),n=cm(),i=KEe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),yB}var fS,_B;function YEe(){if(_B)return fS;_B=1,GEe();var t=si();return fS=t("Array","reduce"),fS}var pS,EB;function QEe(){if(EB)return pS;EB=1;var t=Hr(),e=YEe(),r=Array.prototype;return pS=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},pS}var mS,NB;function XEe(){if(NB)return mS;NB=1;var t=QEe();return mS=t,mS}var gS,CB;function JEe(){return CB||(CB=1,gS=XEe()),gS}var ZEe=JEe(),eNe=it(ZEe),kB={},TB;function tNe(){if(TB)return kB;TB=1;var t=Ve(),e=mh().filter,r=dm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),kB}var yS,OB;function rNe(){if(OB)return yS;OB=1,tNe();var t=si();return yS=t("Array","filter"),yS}var vS,jB;function nNe(){if(jB)return vS;jB=1;var t=Hr(),e=rNe(),r=Array.prototype;return vS=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},vS}var bS,PB;function iNe(){if(PB)return bS;PB=1;var t=nNe();return bS=t,bS}var xS,IB;function sNe(){return IB||(IB=1,xS=iNe()),xS}var oNe=sNe(),zu=it(oNe),RB={},MB;function aNe(){if(MB)return RB;MB=1;var t=Ve(),e=mh().map,r=dm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),RB}var wS,$B;function lNe(){if($B)return wS;$B=1,aNe();var t=si();return wS=t("Array","map"),wS}var SS,DB;function cNe(){if(DB)return SS;DB=1;var t=Hr(),e=lNe(),r=Array.prototype;return SS=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},SS}var _S,AB;function uNe(){if(AB)return _S;AB=1;var t=cNe();return _S=t,_S}var ES,FB;function dNe(){return FB||(FB=1,ES=uNe()),ES}var hNe=dNe(),is=it(hNe),NS,qB;function fNe(){return qB||(qB=1,NS=rse()),NS}var pNe=fNe(),mNe=it(pNe),LB={},BB;function gNe(){if(BB)return LB;BB=1;var t=Ve(),e=Gc(),r=zie(),n=Fn(),i=JM(),s=fl(),o=Us(),a=K0(),l=Kr(),c=dm(),d=ph(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(b,y){var v=o(this),w=s(v),x=i(b,w),S=i(y===void 0?w:y,w),_,N,E;if(e(v)&&(_=v.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(v,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in v&&a(N,E,v[x]);return N.length=E,N}}),LB}var CS,zB;function yNe(){if(zB)return CS;zB=1,gNe();var t=si();return CS=t("Array","slice"),CS}var kS,VB;function vNe(){if(VB)return kS;VB=1;var t=Hr(),e=yNe(),r=Array.prototype;return kS=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},kS}var TS,UB;function bNe(){if(UB)return TS;UB=1;var t=vNe();return TS=t,TS}var OS,HB;function xNe(){return HB||(HB=1,OS=bNe()),OS}var wNe=xNe(),SNe=it(wNe),WB={},jS,KB;function lse(){if(KB)return jS;KB=1;var t=xi(),e=Tt(),r=Q0(),n=X0(),i=Uo(),s=e([].concat);return jS=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},jS}var GB;function _Ne(){if(GB)return WB;GB=1;var t=Ve(),e=lse();return t({target:"Reflect",stat:!0},{ownKeys:e}),WB}var PS,YB;function ENe(){if(YB)return PS;YB=1,_Ne();var t=$r();return PS=t.Reflect.ownKeys,PS}var IS,QB;function NNe(){if(QB)return IS;QB=1;var t=ENe();return IS=t,IS}var RS,XB;function CNe(){return XB||(XB=1,RS=NNe()),RS}var kNe=CNe(),TNe=it(kNe),JB={},ZB;function ONe(){if(ZB)return JB;ZB=1;var t=Ve(),e=Gc();return t({target:"Array",stat:!0},{isArray:e}),JB}var MS,ez;function jNe(){if(ez)return MS;ez=1,ONe();var t=$r();return MS=t.Array.isArray,MS}var $S,tz;function PNe(){if(tz)return $S;tz=1;var t=jNe();return $S=t,$S}var DS,rz;function INe(){return rz||(rz=1,DS=PNe()),DS}var RNe=INe(),Cs=it(RNe),nz={},iz;function MNe(){if(iz)return nz;iz=1;var t=Ve(),e=ys(),r=G0(),n=_t(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),nz}var AS,sz;function $Ne(){if(sz)return AS;sz=1,MNe();var t=$r();return AS=t.Object.keys,AS}var FS,oz;function DNe(){if(oz)return FS;oz=1;var t=$Ne();return FS=t,FS}var qS,az;function ANe(){return az||(az=1,qS=DNe()),qS}var FNe=ANe(),i$=it(FNe),lz={},LS,cz;function qNe(){if(cz)return LS;cz=1;var t=mh().forEach,e=eb(),r=e("forEach");return LS=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},LS}var uz;function LNe(){if(uz)return lz;uz=1;var t=Ve(),e=qNe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),lz}var BS,dz;function BNe(){if(dz)return BS;dz=1,LNe();var t=si();return BS=t("Array","forEach"),BS}var zS,hz;function zNe(){if(hz)return zS;hz=1;var t=BNe();return zS=t,zS}var VS,fz;function VNe(){if(fz)return VS;fz=1;var t=pl(),e=Wr(),r=Hr(),n=zNe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return VS=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},VS}var US,pz;function UNe(){return pz||(pz=1,US=VNe()),US}var HNe=UNe(),jc=it(HNe),mz={},gz;function WNe(){if(gz)return mz;gz=1;var t=Ve(),e=Tt(),r=Gc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),mz}var HS,yz;function KNe(){if(yz)return HS;yz=1,WNe();var t=si();return HS=t("Array","reverse"),HS}var WS,vz;function GNe(){if(vz)return WS;vz=1;var t=Hr(),e=KNe(),r=Array.prototype;return WS=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},WS}var KS,bz;function YNe(){if(bz)return KS;bz=1;var t=GNe();return KS=t,KS}var GS,xz;function QNe(){return xz||(xz=1,GS=YNe()),GS}var XNe=QNe(),JNe=it(XNe),wz={},YS,Sz;function ZNe(){if(Sz)return YS;Sz=1;var t=kr(),e=Gc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return YS=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},YS}var QS,_z;function cse(){if(_z)return QS;_z=1;var t=ch(),e=TypeError;return QS=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},QS}var Ez;function eCe(){if(Ez)return wz;Ez=1;var t=Ve(),e=ys(),r=JM(),n=fh(),i=fl(),s=ZNe(),o=Bie(),a=XM(),l=K0(),c=cse(),d=dm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,b){var y=e(this),v=i(y),w=r(g,v),x=arguments.length,S,_,N,E,k,C;for(x===0?S=_=0:x===1?(S=0,_=v-w):(S=x-2,_=p(f(n(b),0),v-w)),o(v+S-_),N=a(y,_),E=0;E<_;E++)k=w+E,k in y&&l(N,E,y[k]);if(N.length=_,S<_){for(E=w;E<v-_;E++)k=E+_,C=E+S,k in y?y[C]=y[k]:c(y,C);for(E=v;E>v-_+S;E--)c(y,E-1)}else if(S>_)for(E=v-_;E>w;E--)k=E+_-1,C=E+S-1,k in y?y[C]=y[k]:c(y,C);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,v-_+S),N}}),wz}var XS,Nz;function tCe(){if(Nz)return XS;Nz=1,eCe();var t=si();return XS=t("Array","splice"),XS}var JS,Cz;function rCe(){if(Cz)return JS;Cz=1;var t=Hr(),e=tCe(),r=Array.prototype;return JS=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},JS}var ZS,kz;function nCe(){if(kz)return ZS;kz=1;var t=rCe();return ZS=t,ZS}var e_,Tz;function iCe(){return Tz||(Tz=1,e_=nCe()),e_}var sCe=iCe(),use=it(sCe),Oz={},t_,jz;function oCe(){if(jz)return t_;jz=1;var t=kr(),e=Tt(),r=ii(),n=_t(),i=G0(),s=X0(),o=WM(),a=ys(),l=V0(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return t_=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(b){p[b]=b}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),b=arguments.length,y=1,v=s.f,w=o.f;b>y;)for(var x=l(arguments[y++]),S=v?h(i(x),v(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,t_}var Pz;function aCe(){if(Pz)return Oz;Pz=1;var t=Ve(),e=oCe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),Oz}var r_,Iz;function lCe(){if(Iz)return r_;Iz=1,aCe();var t=$r();return r_=t.Object.assign,r_}var n_,Rz;function cCe(){if(Rz)return n_;Rz=1;var t=lCe();return n_=t,n_}var i_,Mz;function uCe(){return Mz||(Mz=1,i_=cCe()),i_}var dCe=uCe(),hCe=it(dCe),s_,$z;function fCe(){if($z)return s_;$z=1,Vie();var t=si();return s_=t("Array","concat"),s_}var o_,Dz;function pCe(){if(Dz)return o_;Dz=1;var t=Hr(),e=fCe(),r=Array.prototype;return o_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},o_}var a_,Az;function mCe(){if(Az)return a_;Az=1;var t=pCe();return a_=t,a_}var l_,Fz;function gCe(){return Fz||(Fz=1,l_=mCe()),l_}var yCe=gCe(),vCe=it(yCe),qz={},Lz;function bCe(){if(Lz)return qz;Lz=1;var t=Ve(),e=kr(),r=fm();return t({target:"Object",stat:!0,sham:!e},{create:r}),qz}var c_,Bz;function xCe(){if(Bz)return c_;Bz=1,bCe();var t=$r(),e=t.Object;return c_=function(n,i){return e.create(n,i)},c_}var u_,zz;function wCe(){if(zz)return u_;zz=1;var t=xCe();return u_=t,u_}var d_,Vz;function SCe(){return Vz||(Vz=1,d_=wCe()),d_}var _Ce=SCe(),ECe=it(_Ce),Uz={},h_,Hz;function NCe(){if(Hz)return h_;Hz=1;var t=fh(),e=ml(),r=Kc(),n=RangeError;return h_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},h_}var f_,Wz;function CCe(){if(Wz)return f_;Wz=1;var t=Tt(),e=Lie(),r=ml(),n=NCe(),i=Kc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,b=f===void 0?" ":r(f),y,v;return m<=g||b===""?p:(y=m-g,v=s(b,a(y/b.length)),v.length>y&&(v=o(v,0,y)),c?p+v:v+p)}};return f_={start:l(!1),end:l(!0)},f_}var p_,Kz;function kCe(){if(Kz)return p_;Kz=1;var t=Tt(),e=_t(),r=CCe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return p_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,v=d(y),w=f(y),x=v<0?"-":v>9999?"+":"";return x+r(s(v),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,p_}var Gz;function TCe(){if(Gz)return Uz;Gz=1;var t=Ve(),e=ii(),r=ys(),n=$ie(),i=kCe(),s=zo(),o=_t(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),Uz}var m_,Yz;function OCe(){if(Yz)return m_;Yz=1,TCe(),Gie();var t=$r(),e=z0();return t.JSON||(t.JSON={stringify:JSON.stringify}),m_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},m_}var g_,Qz;function jCe(){if(Qz)return g_;Qz=1;var t=OCe();return g_=t,g_}var y_,Xz;function PCe(){return Xz||(Xz=1,y_=jCe()),y_}var ICe=PCe(),RCe=it(ICe),Jz={},Zz={},v_,e6;function MCe(){if(e6)return v_;e6=1;var t=TypeError;return v_=function(e,r){if(e<r)throw new t("Not enough arguments");return e},v_}var b_,t6;function dse(){if(t6)return b_;t6=1;var t=Cr(),e=z0(),r=Ur(),n=ase(),i=ah(),s=ph(),o=MCe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return b_=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),b=m?s(arguments,h):[],y=m?function(){e(g,this,b)}:g;return d?c(y,p):c(y)}:c},b_}var r6;function $Ce(){if(r6)return Zz;r6=1;var t=Ve(),e=Cr(),r=dse(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),Zz}var n6={},i6;function DCe(){if(i6)return n6;i6=1;var t=Ve(),e=Cr(),r=dse(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),n6}var s6;function ACe(){return s6||(s6=1,$Ce(),DCe()),Jz}var x_,o6;function FCe(){if(o6)return x_;o6=1,ACe();var t=$r();return x_=t.setTimeout,x_}var w_,a6;function qCe(){return a6||(a6=1,w_=FCe()),w_}var LCe=qCe(),BCe=it(LCe),S_={exports:{}},l6;function zCe(){return l6||(l6=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(S_)),S_.exports}var VCe=zCe(),UCe=it(VCe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ps(){return ps=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ps.apply(this,arguments)}function Hi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ig(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var vI;typeof Object.assign!="function"?vI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:vI=Object.assign;var Pc=vI,c6=["","webkit","Moz","MS","ms","o"],HCe=typeof document>"u"?{style:{}}:document.createElement("div"),WCe="function",Vu=Math.round,Ic=Math.abs,s$=Date.now;function tb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<c6.length;){if(r=c6[s],n=r?r+i:e,n in t)return n;s++}}var wo;typeof window>"u"?wo={}:wo=window;var hse=tb(HCe.style,"touchAction"),fse=hse!==void 0;function KCe(){if(!fse)return!1;var t={},e=wo.CSS&&wo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?wo.CSS.supports("touch-action",r):!0}),t}var pse="compute",mse="auto",bI="manipulation",ac="none",Ep="pan-x",Np="pan-y",Rg=KCe(),GCe=/mobile|tablet|ip(ad|hone|od)|android/i,gse="ontouchstart"in wo,YCe=tb(wo,"PointerEvent")!==void 0,QCe=gse&&GCe.test(navigator.userAgent),gm="touch",XCe="pen",o$="mouse",JCe="kinect",ZCe=25,Rn=1,Qc=2,wr=4,ri=8,Lv=1,ym=2,vm=4,bm=8,Vd=16,qs=ym|vm,lc=bm|Vd,yse=qs|lc,vse=["x","y"],Bv=["clientX","clientY"];function So(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function rb(t,e){return typeof t===WCe?t.apply(e&&e[0]||void 0,e):t}function ql(t,e){return t.indexOf(e)>-1}function eke(t){if(ql(t,ac))return ac;var e=ql(t,Ep),r=ql(t,Np);return e&&r?ac:e||r?e?Ep:Np:ql(t,bI)?bI:mse}var bse=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===pse&&(n=this.compute()),fse&&this.manager.element.style&&Rg[n]&&(this.manager.element.style[hse]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return So(this.manager.recognizers,function(i){rb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),eke(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=ql(o,ac)&&!Rg[ac],l=ql(o,Np)&&!Rg[Np],c=ql(o,Ep)&&!Rg[Ep];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&qs||c&&s&lc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function a$(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function xse(t){var e=t.length;if(e===1)return{x:Vu(t[0].clientX),y:Vu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Vu(r/e),y:Vu(n/e)}}function u6(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Vu(t.pointers[r].clientX),clientY:Vu(t.pointers[r].clientY)},r++;return{timeStamp:s$(),pointers:e,center:xse(e),deltaX:t.deltaX,deltaY:t.deltaY}}function zv(t,e,r){r||(r=vse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function xI(t,e,r){r||(r=vse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function wse(t,e){return t===e?Lv:Ic(t)>=Ic(e)?t<0?ym:vm:e<0?bm:Vd}function tke(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Rn||s.eventType===wr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Sse(t,e,r){return{x:e/t||0,y:r/t||0}}function rke(t,e){return zv(e[0],e[1],Bv)/zv(t[0],t[1],Bv)}function nke(t,e){return xI(e[1],e[0],Bv)+xI(t[1],t[0],Bv)}function ike(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ri&&(n>ZCe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=Sse(n,l,c);s=d.x,o=d.y,i=Ic(d.x)>Ic(d.y)?d.x:d.y,a=wse(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function ske(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=u6(e)),i>1&&!r.firstMultiple?r.firstMultiple=u6(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=xse(n);e.timeStamp=s$(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=xI(a,l),e.distance=zv(a,l),tke(r,e),e.offsetDirection=wse(e.deltaX,e.deltaY);var c=Sse(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Ic(c.x)>Ic(c.y)?c.x:c.y,e.scale=o?rke(o.pointers,n):1,e.rotation=o?nke(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,ike(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,a$(f,d)&&(d=f),e.target=d}function oke(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Rn&&n-i===0,o=e&(wr|ri)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,ske(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Cp(t){return t.trim().split(/\s+/g)}function Af(t,e,r){So(Cp(e),function(n){t.addEventListener(n,r,!1)})}function Ff(t,e,r){So(Cp(e),function(n){t.removeEventListener(n,r,!1)})}function d6(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var yh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){rb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Af(this.element,this.evEl,this.domHandler),this.evTarget&&Af(this.target,this.evTarget,this.domHandler),this.evWin&&Af(d6(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Ff(this.element,this.evEl,this.domHandler),this.evTarget&&Ff(this.target,this.evTarget,this.domHandler),this.evWin&&Ff(d6(this.element),this.evWin,this.domHandler)},t}();function Rc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var ake={pointerdown:Rn,pointermove:Qc,pointerup:wr,pointercancel:ri,pointerout:ri},lke={2:gm,3:XCe,4:o$,5:JCe},_se="pointerdown",Ese="pointermove pointerup pointercancel";wo.MSPointerEvent&&!wo.PointerEvent&&(_se="MSPointerDown",Ese="MSPointerMove MSPointerUp MSPointerCancel");var Nse=function(t){Hi(e,t);function e(){var n,i=e.prototype;return i.evEl=_se,i.evWin=Ese,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=ake[a],c=lke[i.pointerType]||i.pointerType,d=c===gm,h=Rc(s,i.pointerId,"pointerId");l&Rn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(wr|ri)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(yh);function kp(t){return Array.prototype.slice.call(t,0)}function l$(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Rc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var cke={touchstart:Rn,touchmove:Qc,touchend:wr,touchcancel:ri},uke="touchstart touchmove touchend touchcancel",c$=function(t){Hi(e,t);function e(){var n;return e.prototype.evTarget=uke,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=cke[i.type],o=dke.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:gm,srcEvent:i})},e}(yh);function dke(t,e){var r=kp(t.touches),n=this.targetIds;if(e&(Rn|Qc)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=kp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return a$(c.target,l)}),e===Rn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(wr|ri)&&delete n[o[i].identifier],i++;if(a.length)return[l$(s.concat(a),"identifier",!0),a]}var hke={mousedown:Rn,mousemove:Qc,mouseup:wr},fke="mousedown",pke="mousemove mouseup",u$=function(t){Hi(e,t);function e(){var n,i=e.prototype;return i.evEl=fke,i.evWin=pke,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=hke[i.type];s&Rn&&i.button===0&&(this.pressed=!0),s&Qc&&i.which!==1&&(s=wr),this.pressed&&(s&wr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:o$,srcEvent:i}))},e}(yh),mke=2500,h6=25;function f6(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,mke)}}function gke(t,e){t&Rn?(this.primaryTouch=e.changedPointers[0].identifier,f6.call(this,e)):t&(wr|ri)&&f6.call(this,e)}function yke(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=h6&&o<=h6)return!0}return!1}var Cse=function(){var t=function(e){Hi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===gm,h=c.pointerType===o$;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)gke.call(Ig(Ig(o)),l,c);else if(h&&yke.call(Ig(Ig(o)),c))return;o.callback(a,l,c)}},o.touch=new c$(o.manager,o.handler),o.mouse=new u$(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(yh);return t}();function vke(t){var e,r=t.options.inputClass;return r?e=r:YCe?e=Nse:QCe?e=c$:gse?e=Cse:e=u$,new e(t,oke)}function Uu(t,e,r){return Array.isArray(t)?(So(t,r[e],r),!0):!1}var ay=1,Li=2,Ud=4,Ga=8,_o=Ga,Tp=16,Is=32,bke=1;function xke(){return bke++}function Mg(t,e){var r=e.manager;return r?r.get(t):t}function p6(t){return t&Tp?"cancel":t&Ga?"end":t&Ud?"move":t&Li?"start":""}var xm=function(){function t(r){r===void 0&&(r={}),this.options=ps({enable:!0},r),this.id=xke(),this.manager=null,this.state=ay,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Pc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Uu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Mg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Uu(n,"dropRecognizeWith",this)?this:(n=Mg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Uu(n,"requireFailure",this))return this;var i=this.requireFail;return n=Mg(n,this),Rc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Uu(n,"dropRequireFailure",this))return this;n=Mg(n,this);var i=Rc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ga&&o(i.options.event+p6(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ga&&o(i.options.event+p6(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Is},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Is|ay)))return!1;n++}return!0},e.recognize=function(n){var i=Pc({},n);if(!rb(this.options.enable,[this,i])){this.reset(),this.state=Is;return}this.state&(_o|Tp|Is)&&(this.state=ay),this.state=this.process(i),this.state&(Li|Ud|Ga|Tp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),wI=function(t){Hi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[bI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Rn&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==wr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||zv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=_o,s.tryEmit()},o.interval),Li):_o}return Is},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Is},this.options.interval),Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===_o&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(xm),Hd=function(t){Hi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Li|Ud),l=this.attrTest(i);return a&&(o&ri||!l)?s|Tp:a||l?o&wr?s|Ga:s&Li?s|Ud:Li:Is},e}(xm);function kse(t){return t===Vd?"down":t===bm?"up":t===ym?"left":t===vm?"right":""}var d$=function(t){Hi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"pan",threshold:10,pointers:1,direction:yse},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&qs&&s.push(Np),i&lc&&s.push(Ep),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&qs?(l=c===0?Lv:c<0?ym:vm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Lv:d<0?bm:Vd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Hd.prototype.attrTest.call(this,i)&&(this.state&Li||!(this.state&Li)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=kse(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Hd),Tse=function(t){Hi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"swipe",threshold:10,velocity:.3,direction:qs|lc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return d$.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(qs|lc)?o=i.overallVelocity:s&qs?o=i.overallVelocityX:s&lc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Ic(o)>this.options.velocity&&i.eventType&wr},r.emit=function(i){var s=kse(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Hd),Ose=function(t){Hi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[ac]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Li)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Hd),jse=function(t){Hi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[ac]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Li)},e}(Hd),Pse=function(t){Hi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[mse]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(wr|ri)&&!c)this.reset();else if(i.eventType&Rn)this.reset(),this._timer=setTimeout(function(){s.state=_o,s.tryEmit()},o.time);else if(i.eventType&wr)return _o;return Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===_o&&(i&&i.eventType&wr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=s$(),this.manager.emit(this.options.event,this._input)))},e}(xm),Ise={domEvents:!1,touchAction:pse,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},m6=[[jse,{enable:!1}],[Ose,{enable:!1},["rotate"]],[Tse,{direction:qs}],[d$,{direction:qs},["swipe"]],[wI],[wI,{event:"doubletap",taps:2},["tap"]],[Pse]],wke=1,g6=2;function y6(t,e){var r=t.element;if(r.style){var n;So(t.options.cssProps,function(i,s){n=tb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function Ske(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var v6=function(){function t(r,n){var i=this;this.options=Pc({},Ise,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=vke(this),this.touchAction=new bse(this,this.options.touchAction),y6(this,!0),So(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Pc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?g6:wke},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&_o)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==g6&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Li|Ud|Ga)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof xm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Uu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Uu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Rc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return So(Cp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return So(Cp(n),function(o){i?s[o]&&s[o].splice(Rc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&Ske(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&y6(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),_ke={touchstart:Rn,touchmove:Qc,touchend:wr,touchcancel:ri},Eke="touchstart",Nke="touchstart touchmove touchend touchcancel",Cke=function(t){Hi(e,t);function e(){var n,i=e.prototype;return i.evTarget=Eke,i.evWin=Nke,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=_ke[i.type];if(s===Rn&&(this.started=!0),!!this.started){var o=kke.call(this,i,s);s&(wr|ri)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:gm,srcEvent:i})}},e}(yh);function kke(t,e){var r=kp(t.touches),n=kp(t.changedTouches);return e&(wr|ri)&&(r=l$(r.concat(n),"identifier",!0)),[r,n]}function Rse(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Mse=Rse(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),Tke=Rse(function(t,e){return Mse(t,e,!0)},"merge","Use `assign`.");function Oke(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Pc(i,r)}function b6(t,e){return function(){return t.apply(e,arguments)}}var jke=function(){var t=function(r,n){return n===void 0&&(n={}),new v6(r,ps({recognizers:m6.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=yse,t.DIRECTION_DOWN=Vd,t.DIRECTION_LEFT=ym,t.DIRECTION_RIGHT=vm,t.DIRECTION_UP=bm,t.DIRECTION_HORIZONTAL=qs,t.DIRECTION_VERTICAL=lc,t.DIRECTION_NONE=Lv,t.DIRECTION_DOWN=Vd,t.INPUT_START=Rn,t.INPUT_MOVE=Qc,t.INPUT_END=wr,t.INPUT_CANCEL=ri,t.STATE_POSSIBLE=ay,t.STATE_BEGAN=Li,t.STATE_CHANGED=Ud,t.STATE_ENDED=Ga,t.STATE_RECOGNIZED=_o,t.STATE_CANCELLED=Tp,t.STATE_FAILED=Is,t.Manager=v6,t.Input=yh,t.TouchAction=bse,t.TouchInput=c$,t.MouseInput=u$,t.PointerEventInput=Nse,t.TouchMouseInput=Cse,t.SingleTouchInput=Cke,t.Recognizer=xm,t.AttrRecognizer=Hd,t.Tap=wI,t.Pan=d$,t.Swipe=Tse,t.Pinch=Ose,t.Rotate=jse,t.Press=Pse,t.on=Af,t.off=Ff,t.each=So,t.merge=Tke,t.extend=Mse,t.bindFn=b6,t.assign=Pc,t.inherit=Oke,t.bindFn=b6,t.prefixed=tb,t.toArray=kp,t.inArray=Rc,t.uniqueArray=l$,t.splitStr=Cp,t.boolOrFn=rb,t.hasParent=a$,t.addEventListeners=Af,t.removeEventListeners=Ff,t.defaults=Pc({},Ise,{preset:m6}),t}();const $se=mNe("DELETE");function Pke(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Dse({},t,...r)}function Dse(){const t=Vv(...arguments);return Fse(t),t}function Vv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return Vv(Dse(e[0],e[1]),...SNe(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of TNe(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===$se?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!Cs(n[s])&&!Cs(i[s])?n[s]=Vv(n[s],i[s]):n[s]=Ase(i[s]));return n}function Ase(t){return Cs(t)?is(t).call(t,e=>Ase(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):Vv({},t):t}function Fse(t){for(const e of i$(t))t[e]===$se?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&Fse(t[e])}function Ike(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const Rke=typeof window<"u"?window.Hammer||jke:function(){return Ike()};function mo(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=Rke(this._dom.overlay);r.on("tap",ose(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];jc(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{Mke(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}UCe(mo.prototype);mo.current=null;mo.prototype.destroy=function(){this.deactivate();for(const r of JNe(t=use(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};mo.prototype.activate=function(){mo.current&&mo.current.deactivate(),mo.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};mo.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};mo.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function Mke(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var __,x6;function $ke(){if(x6)return __;x6=1,Yie();var t=$r();return __=t.Object.getOwnPropertySymbols,__}var E_,w6;function Dke(){if(w6)return E_;w6=1;var t=$ke();return E_=t,E_}var N_,S6;function Ake(){return S6||(S6=1,N_=Dke()),N_}var Fke=Ake(),_6=it(Fke),C_={exports:{}},E6={},N6;function qke(){if(N6)return E6;N6=1;var t=Ve(),e=_t(),r=Us(),n=H0().f,i=kr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),E6}var C6;function Lke(){if(C6)return C_.exports;C6=1,qke();var t=$r(),e=t.Object,r=C_.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),C_.exports}var k_,k6;function Bke(){if(k6)return k_;k6=1;var t=Lke();return k_=t,k_}var T_,T6;function zke(){return T6||(T6=1,T_=Bke()),T_}var Vke=zke(),qse=it(Vke),O6={},j6;function Uke(){if(j6)return O6;j6=1;var t=Ve(),e=kr(),r=lse(),n=Us(),i=H0(),s=K0();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),O6}var O_,P6;function Hke(){if(P6)return O_;P6=1,Uke();var t=$r();return O_=t.Object.getOwnPropertyDescriptors,O_}var j_,I6;function Wke(){if(I6)return j_;I6=1;var t=Hke();return j_=t,j_}var P_,R6;function Kke(){return R6||(R6=1,P_=Wke()),P_}var Gke=Kke(),M6=it(Gke),I_={exports:{}},$6={},D6;function Yke(){if(D6)return $6;D6=1;var t=Ve(),e=kr(),r=e$().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),$6}var A6;function Qke(){if(A6)return I_.exports;A6=1,Yke();var t=$r(),e=t.Object,r=I_.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),I_.exports}var R_,F6;function Xke(){if(F6)return R_;F6=1;var t=Qke();return R_=t,R_}var M_,q6;function Jke(){return q6||(q6=1,M_=Xke()),M_}var Zke=Jke(),eTe=it(Zke),$_,L6;function tTe(){return L6||(L6=1,$_=qie()),$_}var rTe=tTe(),nTe=it(rTe),B6={},z6={},D_={exports:{}},A_,V6;function iTe(){if(V6)return A_;V6=1;var t=_t();return A_=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),A_}var F_,U6;function sTe(){if(U6)return F_;U6=1;var t=_t(),e=Fn(),r=zo(),n=iTe(),i=Object.isExtensible,s=t(function(){});return F_=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,F_}var q_,H6;function oTe(){if(H6)return q_;H6=1;var t=_t();return q_=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),q_}var W6;function Lse(){if(W6)return D_.exports;W6=1;var t=Ve(),e=Tt(),r=hm(),n=Fn(),i=Wr(),s=Ui().f,o=Q0(),a=Hie(),l=sTe(),c=U0(),d=oTe(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},b=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},v=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),k=0,C=E.length;k<C;k++)if(E[k]===f){S(E,k,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=D_.exports={enable:v,fastKey:g,getWeakData:b,onFreeze:y};return r[f]=!0,D_.exports}var L_,K6;function aTe(){if(K6)return L_;K6=1;var t=Kr(),e=gh(),r=t("iterator"),n=Array.prototype;return L_=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},L_}var B_,G6;function Bse(){if(G6)return B_;G6=1;var t=pl(),e=KM(),r=lm(),n=gh(),i=Kr(),s=i("iterator");return B_=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},B_}var z_,Y6;function zse(){if(Y6)return z_;Y6=1;var t=ii(),e=Vo(),r=Uo(),n=ch(),i=Bse(),s=TypeError;return z_=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},z_}var V_,Q6;function h$(){if(Q6)return V_;Q6=1;var t=ii(),e=Uo(),r=KM();return V_=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},V_}var U_,X6;function f$(){if(X6)return U_;X6=1;var t=W0(),e=ii(),r=Uo(),n=ch(),i=aTe(),s=fl(),o=Hr(),a=zse(),l=Bse(),c=h$(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return U_=function(p,m,g){var b=g&&g.that,y=!!(g&&g.AS_ENTRIES),v=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,b),_,N,E,k,C,O,j,P=function(q){return _&&c(_,"normal"),new h(!0,q)},A=function(q){return y?(r(q),x?S(q[0],q[1],P):S(q[0],q[1])):x?S(q,P):S(q)};if(v)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,k=s(p);k>E;E++)if(C=A(p[E]),C&&o(f,C))return C;return new h(!1)}_=a(p,N)}for(O=v?p.next:_.next;!(j=e(O,_)).done;){try{C=A(j.value)}catch(q){c(_,"throw",q)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},U_}var H_,J6;function Vse(){if(J6)return H_;J6=1;var t=Hr(),e=TypeError;return H_=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},H_}var W_,Z6;function Use(){if(Z6)return W_;Z6=1;var t=Ve(),e=Cr(),r=Lse(),n=_t(),i=hh(),s=f$(),o=Vse(),a=Ur(),l=Fn(),c=lm(),d=Yc(),h=Ui().f,f=mh().forEach,p=kr(),m=mm(),g=m.set,b=m.getterFor;return W_=function(y,v,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,k={},C;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))C=w.getConstructor(v,y,x,_),r.enable();else{C=v(function(P,A){g(o(P,O),{type:y,collection:new N}),c(A)||s(A,P[_],{that:P,AS_ENTRIES:x})});var O=C.prototype,j=b(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(P){var A=P==="add"||P==="set";P in E&&!(S&&P==="clear")&&i(O,P,function(q,R){var L=j(this).collection;if(!A&&S&&!l(q))return P==="get"?void 0:!1;var D=L[P](q===0?0:q,R);return A?this:D})}),S||h(O,"size",{configurable:!0,get:function(){return j(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},W_}var K_,e8;function lTe(){if(e8)return K_;e8=1;var t=pm();return K_=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},K_}var G_,t8;function cTe(){if(t8)return G_;t8=1;var t=xi(),e=t$(),r=Kr(),n=kr(),i=r("species");return G_=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},G_}var Y_,r8;function Hse(){if(r8)return Y_;r8=1;var t=fm(),e=t$(),r=lTe(),n=W0(),i=Vse(),s=lm(),o=f$(),a=r$(),l=n$(),c=cTe(),d=kr(),h=Lse().fastKey,f=mm(),p=f.set,m=f.getterFor;return Y_={getConstructor:function(g,b,y,v){var w=g(function(E,k){i(E,x),p(E,{type:b,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(k)||o(k,E[v],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(b),_=function(E,k,C){var O=S(E),j=N(E,k),P,A;return j?j.value=C:(O.last=j={index:A=h(k,!0),key:k,value:C,previous:P=O.last,next:null,removed:!1},O.first||(O.first=j),P&&(P.next=j),d?O.size++:E.size++,A!=="F"&&(O.index[A]=j)),E},N=function(E,k){var C=S(E),O=h(k),j;if(O!=="F")return C.index[O];for(j=C.first;j;j=j.next)if(j.key===k)return j};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(E){var k=this,C=S(k),O=N(k,E);if(O){var j=O.next,P=O.previous;delete C.index[O.index],O.removed=!0,P&&(P.next=j),j&&(j.previous=P),C.first===O&&(C.first=j),C.last===O&&(C.last=P),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),j;j=j?j.next:C.first;)for(O(j.value,j.key,this);j&&j.removed;)j=j.previous},has:function(k){return!!N(this,k)}}),r(x,y?{get:function(k){var C=N(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,b,y){var v=b+" Iterator",w=m(b),x=m(v);a(g,b,function(S,_){p(this,{type:v,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(b)}},Y_}var n8;function uTe(){if(n8)return z6;n8=1;var t=Use(),e=Hse();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),z6}var i8;function dTe(){return i8||(i8=1,uTe()),B6}var s8={},Q_,o8;function Wse(){return o8||(o8=1,Q_=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),Q_}var X_,a8;function hTe(){if(a8)return X_;a8=1;var t=xi(),e=Wse(),r=t("Map");return X_={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},X_}var l8;function fTe(){if(l8)return s8;l8=1;var t=Ve(),e=Tt(),r=Vo(),n=Kc(),i=f$(),s=hTe(),o=uh(),a=_t(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,b){n(g),r(b);var y=new l,v=0;return i(g,function(w){var x=b(w,v++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),s8}var J_,c8;function pTe(){if(c8)return J_;c8=1,gl(),dTe(),fTe(),Z0();var t=$r();return J_=t.Map,J_}var Z_,u8;function mTe(){if(u8)return Z_;u8=1;var t=pTe();return yl(),Z_=t,Z_}var eE,d8;function gTe(){return d8||(d8=1,eE=mTe()),eE}var yTe=gTe(),Kse=it(yTe),h8={},f8;function vTe(){if(f8)return h8;f8=1;var t=Ve(),e=mh().some,r=eb(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),h8}var tE,p8;function bTe(){if(p8)return tE;p8=1,vTe();var t=si();return tE=t("Array","some"),tE}var rE,m8;function xTe(){if(m8)return rE;m8=1;var t=Hr(),e=bTe(),r=Array.prototype;return rE=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},rE}var nE,g8;function wTe(){if(g8)return nE;g8=1;var t=xTe();return nE=t,nE}var iE,y8;function STe(){return y8||(y8=1,iE=wTe()),iE}var _Te=STe(),ETe=it(_Te),sE,v8;function NTe(){if(v8)return sE;v8=1,gl();var t=si();return sE=t("Array","keys"),sE}var oE,b8;function CTe(){if(b8)return oE;b8=1;var t=NTe();return oE=t,oE}var aE,x8;function kTe(){if(x8)return aE;x8=1,yl();var t=pl(),e=Wr(),r=Hr(),n=CTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return aE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},aE}var lE,w8;function TTe(){return w8||(w8=1,lE=kTe()),lE}var OTe=TTe(),wu=it(OTe),S8={},cE,_8;function jTe(){if(_8)return cE;_8=1;var t=ph(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return cE=r,cE}var uE,E8;function PTe(){if(E8)return uE;E8=1;var t=ah(),e=t.match(/firefox\/(\d+)/i);return uE=!!e&&+e[1],uE}var dE,N8;function ITe(){if(N8)return dE;N8=1;var t=ah();return dE=/MSIE|Trident/.test(t),dE}var hE,C8;function RTe(){if(C8)return hE;C8=1;var t=ah(),e=t.match(/AppleWebKit\/(\d+)\./);return hE=!!e&&+e[1],hE}var k8;function MTe(){if(k8)return S8;k8=1;var t=Ve(),e=Tt(),r=Vo(),n=ys(),i=fl(),s=cse(),o=ml(),a=_t(),l=jTe(),c=eb(),d=PTe(),h=ITe(),f=cm(),p=RTe(),m=[],g=e(m.sort),b=e(m.push),y=a(function(){m.sort(void 0)}),v=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,k,C,O;for(E=65;E<76;E++){switch(k=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(j,P){return P.v-j.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=y||!v||!w||!x,_=function(N){return function(E,k){return k===void 0?-1:E===void 0?1:N!==void 0?+N(E,k)||0:o(E)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var k=n(this);if(x)return E===void 0?g(k):g(k,E);var C=[],O=i(k),j,P;for(P=0;P<O;P++)P in k&&b(C,k[P]);for(l(C,_(E)),j=i(C),P=0;P<j;)k[P]=C[P++];for(;P<O;)s(k,P++);return k}}),S8}var fE,T8;function $Te(){if(T8)return fE;T8=1,MTe();var t=si();return fE=t("Array","sort"),fE}var pE,O8;function DTe(){if(O8)return pE;O8=1;var t=Hr(),e=$Te(),r=Array.prototype;return pE=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},pE}var mE,j8;function ATe(){if(j8)return mE;j8=1;var t=DTe();return mE=t,mE}var gE,P8;function FTe(){return P8||(P8=1,gE=ATe()),gE}var qTe=FTe(),SI=it(qTe),yE,I8;function LTe(){if(I8)return yE;I8=1,gl();var t=si();return yE=t("Array","values"),yE}var vE,R8;function BTe(){if(R8)return vE;R8=1;var t=LTe();return vE=t,vE}var bE,M8;function zTe(){if(M8)return bE;M8=1,yl();var t=pl(),e=Wr(),r=Hr(),n=BTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return bE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},bE}var xE,$8;function VTe(){return $8||($8=1,xE=zTe()),xE}var UTe=VTe(),D8=it(UTe),wE,A8;function HTe(){return A8||(A8=1,wE=sse()),wE}var WTe=HTe(),Hu=it(WTe),SE,F8;function KTe(){if(F8)return SE;F8=1,gl();var t=si();return SE=t("Array","entries"),SE}var _E,q8;function GTe(){if(q8)return _E;q8=1;var t=KTe();return _E=t,_E}var EE,L8;function YTe(){if(L8)return EE;L8=1,yl();var t=pl(),e=Wr(),r=Hr(),n=GTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return EE=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},EE}var NE,B8;function QTe(){return B8||(B8=1,NE=YTe()),NE}var XTe=QTe(),JTe=it(XTe);const Qr=[];for(let t=0;t<256;++t)Qr.push((t+256).toString(16).slice(1));function ZTe(t,e=0){return(Qr[t[e+0]]+Qr[t[e+1]]+Qr[t[e+2]]+Qr[t[e+3]]+"-"+Qr[t[e+4]]+Qr[t[e+5]]+"-"+Qr[t[e+6]]+Qr[t[e+7]]+"-"+Qr[t[e+8]]+Qr[t[e+9]]+"-"+Qr[t[e+10]]+Qr[t[e+11]]+Qr[t[e+12]]+Qr[t[e+13]]+Qr[t[e+14]]+Qr[t[e+15]]).toLowerCase()}let CE;const e2e=new Uint8Array(16);function t2e(){if(!CE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");CE=crypto.getRandomValues.bind(crypto)}return CE(e2e)}const r2e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var z8={randomUUID:r2e};function n2e(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??t2e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ZTe(n)}function i2e(t,e,r){return z8.randomUUID&&!t?z8.randomUUID():n2e(t)}function V8(t){return typeof t=="string"||typeof t=="number"}class p${constructor(e){Ka(this,"_queue",[]),Ka(this,"_timeout",null),Ka(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new p$(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=BCe(()=>{this.flush()},this.delay))}flush(){var e,r;jc(e=use(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class Uv{constructor(){Ka(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Ka(this,"subscribe",Uv.prototype.on),Ka(this,"unsubscribe",Uv.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");jc(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=zu(n=this._subscribers[e]).call(n,i=>i!==r)}}var U8={},H8={},W8;function s2e(){if(W8)return H8;W8=1;var t=Use(),e=Hse();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),H8}var K8;function o2e(){return K8||(K8=1,s2e()),U8}var G8={},kE,Y8;function Xc(){if(Y8)return kE;Y8=1;var t=ch(),e=TypeError;return kE=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},kE}var TE,Q8;function Jc(){if(Q8)return TE;Q8=1;var t=xi(),e=Wse(),r=t("Set"),n=r.prototype;return TE={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},TE}var OE,X8;function Zc(){if(X8)return OE;X8=1;var t=ii();return OE=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},OE}var jE,J8;function wm(){if(J8)return jE;J8=1;var t=Zc();return jE=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},jE}var PE,Z8;function m$(){if(Z8)return PE;Z8=1;var t=Jc(),e=wm(),r=t.Set,n=t.add;return PE=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},PE}var IE,eV;function Sm(){return eV||(eV=1,IE=function(t){return t.size}),IE}var RE,tV;function a2e(){return tV||(tV=1,RE=function(t){return{iterator:t,next:t.next,done:!1}}),RE}var ME,rV;function eu(){if(rV)return ME;rV=1;var t=Vo(),e=Uo(),r=ii(),n=fh(),i=a2e(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},ME=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},ME}var $E,nV;function l2e(){if(nV)return $E;nV=1;var t=Xc(),e=Jc(),r=m$(),n=Sm(),i=eu(),s=wm(),o=Zc(),a=e.has,l=e.remove;return $E=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},$E}var DE,iV;function tu(){return iV||(iV=1,DE=function(){return!1}),DE}var sV;function c2e(){if(sV)return G8;sV=1;var t=Ve(),e=l2e(),r=_t(),n=tu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),G8}var oV={},AE,aV;function u2e(){if(aV)return AE;aV=1;var t=Xc(),e=Jc(),r=Sm(),n=eu(),i=wm(),s=Zc(),o=e.Set,a=e.add,l=e.has;return AE=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},AE}var lV;function d2e(){if(lV)return oV;lV=1;var t=Ve(),e=_t(),r=u2e(),n=tu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),oV}var cV={},FE,uV;function h2e(){if(uV)return FE;uV=1;var t=Xc(),e=Jc().has,r=Sm(),n=eu(),i=wm(),s=Zc(),o=h$();return FE=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},FE}var dV;function f2e(){if(dV)return cV;dV=1;var t=Ve(),e=h2e(),r=tu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),cV}var hV={},qE,fV;function p2e(){if(fV)return qE;fV=1;var t=Xc(),e=Sm(),r=wm(),n=eu();return qE=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},qE}var pV;function m2e(){if(pV)return hV;pV=1;var t=Ve(),e=p2e(),r=tu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),hV}var mV={},LE,gV;function g2e(){if(gV)return LE;gV=1;var t=Xc(),e=Jc().has,r=Sm(),n=eu(),i=Zc(),s=h$();return LE=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},LE}var yV;function y2e(){if(yV)return mV;yV=1;var t=Ve(),e=g2e(),r=tu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),mV}var vV={},BE,bV;function v2e(){if(bV)return BE;bV=1;var t=Xc(),e=Jc(),r=m$(),n=eu(),i=Zc(),s=e.add,o=e.has,a=e.remove;return BE=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},BE}var zE,xV;function Gse(){return xV||(xV=1,zE=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),zE}var wV;function b2e(){if(wV)return vV;wV=1;var t=Ve(),e=v2e(),r=Gse(),n=tu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),vV}var SV={},VE,_V;function x2e(){if(_V)return VE;_V=1;var t=Xc(),e=Jc().add,r=m$(),n=eu(),i=Zc();return VE=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},VE}var EV;function w2e(){if(EV)return SV;EV=1;var t=Ve(),e=x2e(),r=Gse(),n=tu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),SV}var UE,NV;function S2e(){if(NV)return UE;NV=1,gl(),o2e(),c2e(),d2e(),f2e(),m2e(),y2e(),b2e(),w2e(),Z0();var t=$r();return UE=t.Set,UE}var HE,CV;function _2e(){if(CV)return HE;CV=1;var t=S2e();return yl(),HE=t,HE}var WE,kV;function E2e(){return kV||(kV=1,WE=_2e()),WE}var N2e=E2e(),KE=it(N2e),GE,TV;function C2e(){if(TV)return GE;TV=1,gl(),Z0();var t=zse();return GE=t,GE}var YE,OV;function k2e(){if(OV)return YE;OV=1;var t=C2e();return yl(),YE=t,YE}var QE,jV;function T2e(){if(jV)return QE;jV=1;var t=k2e();return QE=t,QE}var XE,PV;function O2e(){if(PV)return XE;PV=1;var t=T2e();return XE=t,XE}var JE,IV;function j2e(){return IV||(IV=1,JE=O2e()),JE}var ZE,RV;function P2e(){return RV||(RV=1,ZE=j2e()),ZE}var I2e=P2e(),eN=it(I2e);class Ll{constructor(e){this._pairs=e}*[Hu](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return is(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return is(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=ECe(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new Kse(this._pairs)}toIdSet(){return new KE(this.toIdArray())}toItemSet(){return new KE(this.toItemArray())}cache(){return new Ll([...this._pairs])}distinct(e){const r=new KE;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new Ll({*[Hu](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new Ll({*[Hu](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=eN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=eN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new Ll({[Hu]:()=>{var r;return eN(SI(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function MV(t,e){var r=i$(t);if(_6){var n=_6(t);e&&(n=zu(n).call(n,function(i){return qse(t,i).enumerable})),r.push.apply(r,n)}return r}function $V(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?jc(r=MV(Object(i),!0)).call(r,function(s){Ka(t,s,i[s])}):M6?eTe(t,M6(i)):jc(n=MV(Object(i))).call(n,function(s){nTe(t,s,qse(i,s))})}return t}function R2e(t,e){return t[e]==null&&(t[e]=i2e()),t}class Wd extends Uv{get idProp(){return this._idProp}constructor(e,r){super(),Ka(this,"_queue",null),e&&!Cs(e)&&(r=e,e=[]),this._options=r||{},this._data=new Kse,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=p$.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(Cs(e)){const s=is(e).call(e,o=>o[this._idProp]);if(ETe(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=c=>{const d=c[a];if(d!=null&&this._data.has(d)){const h=c,f=hCe({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(c);n.push(h)}};if(Cs(e))for(let c=0,d=e.length;c<d;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const c={items:i,oldData:s,data:o};this._trigger("update",c,r)}return vCe(n).call(n,i)}updateOnly(e,r){var n;Cs(e)||(e=[e]);const i=is(n=is(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=Pke(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(i.length){const s={items:is(i).call(i,o=>o.id),oldData:is(i).call(i,o=>o.oldData),data:is(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;V8(e)?(n=e,s=r):Cs(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&zu(s),l=[];let c,d,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)c=this._data.get(i[p]),c!=null&&(!a||a(c))&&l.push(c);else{var f;d=[...wu(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const b=l[m],y=b[this._idProp];p[y]=b}return p}else return n!=null?c??null:l}getIds(e){const r=this._data,n=e&&zu(e),i=e&&e.order,s=[...wu(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=this._data.get(c);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=r.get(c);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&zu(r),i=this._data,s=[...wu(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const c=o[a],d=c[this._idProp];e(c,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,r){const n=r&&zu(r),i=[],s=this._data,o=[...wu(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],d=this._data.get(c);d!=null&&(!n||n(d))&&i.push(e(d,c))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&eNe(n=Cs(r)?r:i$(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;SI(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")SI(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=Cs(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(V8(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...wu(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of D8(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of D8(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[...wu(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=R2e(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+RCe(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,$V($V({},n),e)),r}stream(e){if(e){const n=this._data;return new Ll({*[Hu](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new Ll({[Hu]:ose(r=JTe(this._data)).call(r,this._data)})}}}function M2e(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof jc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof is(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function Yse(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof jc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof is(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&M2e(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var DV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Le(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var AV={},ef,FV;function Ht(){if(FV)return ef;FV=1;var t=function(e){return e&&e.Math===Math&&e};return ef=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof DV=="object"&&DV)||t(typeof ef=="object"&&ef)||function(){return this}()||Function("return this")(),ef}var tN,qV;function st(){return qV||(qV=1,tN=function(t){try{return!!t()}catch{return!0}}),tN}var rN,LV;function _m(){if(LV)return rN;LV=1;var t=st();return rN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),rN}var nN,BV;function nb(){if(BV)return nN;BV=1;var t=_m(),e=Function.prototype,r=e.apply,n=e.call;return nN=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),nN}var iN,zV;function lt(){if(zV)return iN;zV=1;var t=_m(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return iN=t?n:function(i){return function(){return r.apply(i,arguments)}},iN}var sN,VV;function Hs(){if(VV)return sN;VV=1;var t=lt(),e=t({}.toString),r=t("".slice);return sN=function(n){return r(e(n),8,-1)},sN}var oN,UV;function g$(){if(UV)return oN;UV=1;var t=Hs(),e=lt();return oN=function(r){if(t(r)==="Function")return e(r)},oN}var aN,HV;function Gr(){if(HV)return aN;HV=1;var t=typeof document=="object"&&document.all;return aN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},aN}var lN={},cN,WV;function gr(){if(WV)return cN;WV=1;var t=st();return cN=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),cN}var uN,KV;function oi(){if(KV)return uN;KV=1;var t=_m(),e=Function.prototype.call;return uN=t?e.bind(e):function(){return e.apply(e,arguments)},uN}var dN={},GV;function ib(){if(GV)return dN;GV=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return dN.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,dN}var hN,YV;function Em(){return YV||(YV=1,hN=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),hN}var fN,QV;function sb(){if(QV)return fN;QV=1;var t=lt(),e=st(),r=Hs(),n=Object,i=t("".split);return fN=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,fN}var pN,XV;function vh(){return XV||(XV=1,pN=function(t){return t==null}),pN}var mN,JV;function Ho(){if(JV)return mN;JV=1;var t=vh(),e=TypeError;return mN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},mN}var gN,ZV;function vs(){if(ZV)return gN;ZV=1;var t=sb(),e=Ho();return gN=function(r){return t(e(r))},gN}var yN,eU;function Yr(){if(eU)return yN;eU=1;var t=Gr();return yN=function(e){return typeof e=="object"?e!==null:t(e)},yN}var vN,tU;function Et(){return tU||(tU=1,vN={}),vN}var bN,rU;function wi(){if(rU)return bN;rU=1;var t=Et(),e=Ht(),r=Gr(),n=function(i){return r(i)?i:void 0};return bN=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},bN}var xN,nU;function Tr(){if(nU)return xN;nU=1;var t=lt();return xN=t({}.isPrototypeOf),xN}var wN,iU;function bh(){if(iU)return wN;iU=1;var t=Ht(),e=t.navigator,r=e&&e.userAgent;return wN=r?String(r):"",wN}var SN,sU;function Nm(){if(sU)return SN;sU=1;var t=Ht(),e=bh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),SN=a,SN}var _N,oU;function xh(){if(oU)return _N;oU=1;var t=Nm(),e=st(),r=Ht(),n=r.String;return _N=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),_N}var EN,aU;function Qse(){if(aU)return EN;aU=1;var t=xh();return EN=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",EN}var NN,lU;function Cm(){if(lU)return NN;lU=1;var t=wi(),e=Gr(),r=Tr(),n=Qse(),i=Object;return NN=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},NN}var CN,cU;function wh(){if(cU)return CN;cU=1;var t=String;return CN=function(e){try{return t(e)}catch{return"Object"}},CN}var kN,uU;function Wo(){if(uU)return kN;uU=1;var t=Gr(),e=wh(),r=TypeError;return kN=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},kN}var TN,dU;function y$(){if(dU)return TN;dU=1;var t=Wo(),e=vh();return TN=function(r,n){var i=r[n];return e(i)?void 0:t(i)},TN}var ON,hU;function $2e(){if(hU)return ON;hU=1;var t=oi(),e=Gr(),r=Yr(),n=TypeError;return ON=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},ON}var jN={exports:{}},PN,fU;function Sh(){return fU||(fU=1,PN=!0),PN}var IN,pU;function D2e(){if(pU)return IN;pU=1;var t=Ht(),e=Object.defineProperty;return IN=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},IN}var mU;function v$(){if(mU)return jN.exports;mU=1;var t=Sh(),e=Ht(),r=D2e(),n="__core-js_shared__",i=jN.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),jN.exports}var RN,gU;function _h(){if(gU)return RN;gU=1;var t=v$();return RN=function(e,r){return t[e]||(t[e]=r||{})},RN}var MN,yU;function Si(){if(yU)return MN;yU=1;var t=Ho(),e=Object;return MN=function(r){return e(t(r))},MN}var $N,vU;function on(){if(vU)return $N;vU=1;var t=lt(),e=Si(),r=t({}.hasOwnProperty);return $N=Object.hasOwn||function(i,s){return r(e(i),s)},$N}var DN,bU;function ob(){if(bU)return DN;bU=1;var t=lt(),e=0,r=Math.random(),n=t(1.1.toString);return DN=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},DN}var AN,xU;function Or(){if(xU)return AN;xU=1;var t=Ht(),e=_h(),r=on(),n=ob(),i=xh(),s=Qse(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return AN=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},AN}var FN,wU;function Xse(){if(wU)return FN;wU=1;var t=oi(),e=Yr(),r=Cm(),n=y$(),i=$2e(),s=Or(),o=TypeError,a=s("toPrimitive");return FN=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},FN}var qN,SU;function b$(){if(SU)return qN;SU=1;var t=Xse(),e=Cm();return qN=function(r){var n=t(r,"string");return e(n)?n:n+""},qN}var LN,_U;function Jse(){if(_U)return LN;_U=1;var t=Ht(),e=Yr(),r=t.document,n=e(r)&&e(r.createElement);return LN=function(i){return n?r.createElement(i):{}},LN}var BN,EU;function Zse(){if(EU)return BN;EU=1;var t=gr(),e=st(),r=Jse();return BN=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),BN}var NU;function ab(){if(NU)return lN;NU=1;var t=gr(),e=oi(),r=ib(),n=Em(),i=vs(),s=b$(),o=on(),a=Zse(),l=Object.getOwnPropertyDescriptor;return lN.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},lN}var zN,CU;function A2e(){if(CU)return zN;CU=1;var t=st(),e=Gr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return zN=n,zN}var VN,kU;function lb(){if(kU)return VN;kU=1;var t=g$(),e=Wo(),r=_m(),n=t(t.bind);return VN=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},VN}var UN={},HN,TU;function eoe(){if(TU)return HN;TU=1;var t=gr(),e=st();return HN=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),HN}var WN,OU;function Ws(){if(OU)return WN;OU=1;var t=Yr(),e=String,r=TypeError;return WN=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},WN}var jU;function Wi(){if(jU)return UN;jU=1;var t=gr(),e=Zse(),r=eoe(),n=Ws(),i=b$(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return UN.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},UN}var KN,PU;function Eh(){if(PU)return KN;PU=1;var t=gr(),e=Wi(),r=Em();return KN=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},KN}var GN,IU;function Oe(){if(IU)return GN;IU=1;var t=Ht(),e=nb(),r=g$(),n=Gr(),i=ab().f,s=A2e(),o=Et(),a=lb(),l=Eh(),c=on(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return GN=function(h,f){var p=h.target,m=h.global,g=h.stat,b=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,v=m?o:o[p]||l(o,p,{})[p],w=v.prototype,x,S,_,N,E,k,C,O,j;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),k=v[N],S&&(h.dontCallGetSet?(j=i(y,N),C=j&&j.value):C=y[N]),E=S&&C?C:f[N],!(!x&&!b&&typeof k==typeof E)&&(h.bind&&S?O=a(E,t):h.wrap&&S?O=d(E):b&&n(E)?O=r(E):O=E,(h.sham||E&&E.sham||k&&k.sham)&&l(O,"sham",!0),l(v,N,O),b&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},GN}var YN,RU;function F2e(){if(RU)return YN;RU=1;var t=Math.ceil,e=Math.floor;return YN=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},YN}var QN,MU;function Nh(){if(MU)return QN;MU=1;var t=F2e();return QN=function(e){var r=+e;return r!==r||r===0?0:t(r)},QN}var XN,$U;function cb(){if($U)return XN;$U=1;var t=Nh(),e=Math.max,r=Math.min;return XN=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},XN}var JN,DU;function toe(){if(DU)return JN;DU=1;var t=Nh(),e=Math.min;return JN=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},JN}var ZN,AU;function Ko(){if(AU)return ZN;AU=1;var t=toe();return ZN=function(e){return t(e.length)},ZN}var eC,FU;function x$(){if(FU)return eC;FU=1;var t=vs(),e=cb(),r=Ko(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return eC={includes:n(!0),indexOf:n(!1)},eC}var tC,qU;function km(){return qU||(qU=1,tC={}),tC}var rC,LU;function roe(){if(LU)return rC;LU=1;var t=lt(),e=on(),r=vs(),n=x$().indexOf,i=km(),s=t([].push);return rC=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},rC}var nC,BU;function w$(){return BU||(BU=1,nC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),nC}var iC,zU;function Tm(){if(zU)return iC;zU=1;var t=roe(),e=w$();return iC=Object.keys||function(n){return t(n,e)},iC}var sC={},VU;function ub(){return VU||(VU=1,sC.f=Object.getOwnPropertySymbols),sC}var oC,UU;function q2e(){if(UU)return oC;UU=1;var t=gr(),e=lt(),r=oi(),n=st(),i=Tm(),s=ub(),o=ib(),a=Si(),l=sb(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return oC=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(b){p[b]=b}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),b=arguments.length,y=1,v=s.f,w=o.f;b>y;)for(var x=l(arguments[y++]),S=v?h(i(x),v(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,oC}var HU;function L2e(){if(HU)return AV;HU=1;var t=Oe(),e=q2e();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),AV}var aC,WU;function B2e(){if(WU)return aC;WU=1,L2e();var t=Et();return aC=t.Object.assign,aC}var lC,KU;function z2e(){if(KU)return lC;KU=1;var t=B2e();return lC=t,lC}var cC,GU;function V2e(){return GU||(GU=1,cC=z2e()),cC}var U2e=V2e(),Sr=Le(U2e),YU={},uC,QU;function Ch(){if(QU)return uC;QU=1;var t=lt();return uC=t([].slice),uC}var dC,XU;function H2e(){if(XU)return dC;XU=1;var t=lt(),e=Wo(),r=Yr(),n=on(),i=Ch(),s=_m(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return dC=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),b=function(){var v=a(g,i(arguments));return this instanceof b?d(p,v.length,v):p.apply(f,v)};return r(m)&&(b.prototype=m),b},dC}var JU;function W2e(){if(JU)return YU;JU=1;var t=Oe(),e=H2e();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),YU}var hC,ZU;function an(){if(ZU)return hC;ZU=1;var t=Ht(),e=Et();return hC=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},hC}var fC,eH;function K2e(){if(eH)return fC;eH=1,W2e();var t=an();return fC=t("Function","bind"),fC}var pC,tH;function G2e(){if(tH)return pC;tH=1;var t=Tr(),e=K2e(),r=Function.prototype;return pC=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},pC}var mC,rH;function Y2e(){if(rH)return mC;rH=1;var t=G2e();return mC=t,mC}var gC,nH;function Q2e(){return nH||(nH=1,gC=Y2e()),gC}var X2e=Q2e(),ie=Le(X2e);function S$(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function J2e(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function Z2e(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function eOe(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function tOe(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function rOe(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function noe(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function _I(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,c=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,c,d,c),t.bezierCurveTo(d-o,c,e,h+a,e,h),t.closePath()}function ioe(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,c=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),b=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+c,f,p,f),t.bezierCurveTo(p-c,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-c,r,p,r),t.bezierCurveTo(p+c,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+c,b,p,b),t.bezierCurveTo(p-c,b,e,g+d,e,g),t.lineTo(e,m)}function soe(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,c=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+c*c)),p=a<0?-p:p,e+=p,r+=c*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function nOe(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const iH={circle:S$,dashedLine:soe,database:ioe,diamond:rOe,ellipse:_I,ellipse_vis:_I,hexagon:nOe,roundRect:noe,square:J2e,star:tOe,triangle:Z2e,triangleDown:eOe};function iOe(t){return Object.prototype.hasOwnProperty.call(iH,t)?iH[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var yC={exports:{}},sH;function sOe(){return sH||(sH=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(yC)),yC.exports}var oOe=sOe(),ooe=Le(oOe),oH={},vC,aH;function ru(){if(aH)return vC;aH=1;var t=Hs();return vC=Array.isArray||function(r){return t(r)==="Array"},vC}var bC,lH;function aoe(){if(lH)return bC;lH=1;var t=TypeError,e=9007199254740991;return bC=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},bC}var xC,cH;function db(){if(cH)return xC;cH=1;var t=gr(),e=Wi(),r=Em();return xC=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},xC}var wC,uH;function _$(){if(uH)return wC;uH=1;var t=Or(),e=t("toStringTag"),r={};return r[e]="z",wC=String(r)==="[object z]",wC}var SC,dH;function kh(){if(dH)return SC;dH=1;var t=_$(),e=Gr(),r=Hs(),n=Or(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return SC=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},SC}var _C,hH;function aOe(){if(hH)return _C;hH=1;var t=lt(),e=Gr(),r=v$(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),_C=r.inspectSource,_C}var EC,fH;function loe(){if(fH)return EC;fH=1;var t=lt(),e=st(),r=Gr(),n=kh(),i=wi(),s=aOe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,EC=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,EC}var NC,pH;function lOe(){if(pH)return NC;pH=1;var t=ru(),e=loe(),r=Yr(),n=Or(),i=n("species"),s=Array;return NC=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},NC}var CC,mH;function E$(){if(mH)return CC;mH=1;var t=lOe();return CC=function(e,r){return new(t(e))(r===0?0:r)},CC}var kC,gH;function Om(){if(gH)return kC;gH=1;var t=st(),e=Or(),r=Nm(),n=e("species");return kC=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},kC}var yH;function coe(){if(yH)return oH;yH=1;var t=Oe(),e=st(),r=ru(),n=Yr(),i=Si(),s=Ko(),o=aoe(),a=db(),l=E$(),c=Om(),d=Or(),h=Nm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var b=[];return b[f]=!1,b.concat()[0]!==b}),m=function(b){if(!n(b))return!1;var y=b[f];return y!==void 0?!!y:r(b)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var v=i(this),w=l(v,0),x=0,S,_,N,E,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?v:arguments[S],m(k))for(E=s(k),o(x+E),_=0;_<E;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),oH}var vH={},bH={},TC,xH;function Ki(){if(xH)return TC;xH=1;var t=kh(),e=String;return TC=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},TC}var OC={},wH;function N$(){if(wH)return OC;wH=1;var t=gr(),e=eoe(),r=Wi(),n=Ws(),i=vs(),s=Tm();return OC.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},OC}var jC,SH;function cOe(){if(SH)return jC;SH=1;var t=wi();return jC=t("document","documentElement"),jC}var PC,_H;function hb(){if(_H)return PC;_H=1;var t=_h(),e=ob(),r=t("keys");return PC=function(n){return r[n]||(r[n]=e(n))},PC}var IC,EH;function jm(){if(EH)return IC;EH=1;var t=Ws(),e=N$(),r=w$(),n=km(),i=cOe(),s=Jse(),o=hb(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(v){return l+d+a+v+l+"/"+d+a},m=function(v){v.write(p("")),v.close();var w=v.parentWindow.Object;return v=null,w},g=function(){var v=s("iframe"),w="java"+d+":",x;return v.style.display="none",i.appendChild(v),v.src=String(w),x=v.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},b,y=function(){try{b=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&b?m(b):g():m(b);for(var v=r.length;v--;)delete y[c][r[v]];return y()};return n[h]=!0,IC=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},IC}var RC={},NH;function fb(){if(NH)return RC;NH=1;var t=roe(),e=w$(),r=e.concat("length","prototype");return RC.f=Object.getOwnPropertyNames||function(i){return t(i,r)},RC}var MC={},CH;function C$(){if(CH)return MC;CH=1;var t=Hs(),e=vs(),r=fb().f,n=Ch(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return MC.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},MC}var $C,kH;function Pm(){if(kH)return $C;kH=1;var t=Eh();return $C=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},$C}var DC,TH;function k$(){if(TH)return DC;TH=1;var t=Wi();return DC=function(e,r,n){return t.f(e,r,n)},DC}var AC={},OH;function pb(){if(OH)return AC;OH=1;var t=Or();return AC.f=t,AC}var FC,jH;function Zt(){if(jH)return FC;jH=1;var t=Et(),e=on(),r=pb(),n=Wi().f;return FC=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},FC}var qC,PH;function uoe(){if(PH)return qC;PH=1;var t=oi(),e=wi(),r=Or(),n=Pm();return qC=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},qC}var LC,IH;function uOe(){if(IH)return LC;IH=1;var t=_$(),e=kh();return LC=t?{}.toString:function(){return"[object "+e(this)+"]"},LC}var BC,RH;function nu(){if(RH)return BC;RH=1;var t=_$(),e=Wi().f,r=Eh(),n=on(),i=uOe(),s=Or(),o=s("toStringTag");return BC=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},BC}var zC,MH;function doe(){if(MH)return zC;MH=1;var t=Ht(),e=Gr(),r=t.WeakMap;return zC=e(r)&&/native code/.test(String(r)),zC}var VC,$H;function iu(){if($H)return VC;$H=1;var t=doe(),e=Ht(),r=Yr(),n=Eh(),i=on(),s=v$(),o=hb(),a=km(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(v){return p(v)?f(v):h(v,{})},g=function(v){return function(w){var x;if(!r(w)||(x=f(w)).type!==v)throw new c("Incompatible receiver, "+v+" required");return x}};if(t||s.state){var b=s.state||(s.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,h=function(v,w){if(b.has(v))throw new c(l);return w.facade=v,b.set(v,w),w},f=function(v){return b.get(v)||{}},p=function(v){return b.has(v)}}else{var y=o("state");a[y]=!0,h=function(v,w){if(i(v,y))throw new c(l);return w.facade=v,n(v,y,w),w},f=function(v){return i(v,y)?v[y]:{}},p=function(v){return i(v,y)}}return VC={set:h,get:f,has:p,enforce:m,getterFor:g},VC}var UC,DH;function vl(){if(DH)return UC;DH=1;var t=lb(),e=lt(),r=sb(),n=Si(),i=Ko(),s=E$(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(b,y,v,w){for(var x=n(b),S=r(x),_=i(S),N=t(y,v),E=0,k=w||s,C=c?k(b,_):d||m?k(b,0):void 0,O,j;_>E;E++)if((g||E in S)&&(O=S[E],j=N(O,E,x),l))if(c)C[E]=j;else if(j)switch(l){case 3:return!0;case 5:return O;case 6:return E;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return UC={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},UC}var AH;function dOe(){if(AH)return bH;AH=1;var t=Oe(),e=Ht(),r=oi(),n=lt(),i=Sh(),s=gr(),o=xh(),a=st(),l=on(),c=Tr(),d=Ws(),h=vs(),f=b$(),p=Ki(),m=Em(),g=jm(),b=Tm(),y=fb(),v=C$(),w=ub(),x=ab(),S=Wi(),_=N$(),N=ib(),E=Pm(),k=k$(),C=_h(),O=hb(),j=km(),P=ob(),A=Or(),q=pb(),R=Zt(),L=uoe(),D=nu(),W=iu(),z=vl().forEach,H=O("hidden"),K="Symbol",he="prototype",xe=W.set,Be=W.getterFor(K),we=Object[he],Ie=e.Symbol,ze=Ie&&Ie[he],Ze=e.RangeError,Nt=e.TypeError,ft=e.QObject,J=x.f,Ne=S.f,Ue=v.f,et=N.f,Lt=n([].push),Se=C("symbols"),We=C("op-symbols"),Dt=C("wks"),Bt=!ft||!ft[he]||!ft[he].findChild,M=function(_e,se,fe){var de=J(we,se);de&&delete we[se],Ne(_e,se,fe),de&&_e!==we&&Ne(we,se,de)},F=s&&a(function(){return g(Ne({},"a",{get:function(){return Ne(this,"a",{value:7}).a}})).a!==7})?M:Ne,V=function(_e,se){var fe=Se[_e]=g(ze);return xe(fe,{type:K,tag:_e,description:se}),s||(fe.description=se),fe},oe=function(se,fe,de){se===we&&oe(We,fe,de),d(se);var Ce=f(fe);return d(de),l(Se,Ce)?(de.enumerable?(l(se,H)&&se[H][Ce]&&(se[H][Ce]=!1),de=g(de,{enumerable:m(0,!1)})):(l(se,H)||Ne(se,H,m(1,g(null))),se[H][Ce]=!0),F(se,Ce,de)):Ne(se,Ce,de)},Z=function(se,fe){d(se);var de=h(fe),Ce=b(de).concat(zt(de));return z(Ce,function(ot){(!s||r(ye,de,ot))&&oe(se,ot,de[ot])}),se},Q=function(se,fe){return fe===void 0?g(se):Z(g(se),fe)},ye=function(se){var fe=f(se),de=r(et,this,fe);return this===we&&l(Se,fe)&&!l(We,fe)?!1:de||!l(this,fe)||!l(Se,fe)||l(this,H)&&this[H][fe]?de:!0},Ge=function(se,fe){var de=h(se),Ce=f(fe);if(!(de===we&&l(Se,Ce)&&!l(We,Ce))){var ot=J(de,Ce);return ot&&l(Se,Ce)&&!(l(de,H)&&de[H][Ce])&&(ot.enumerable=!0),ot}},rt=function(se){var fe=Ue(h(se)),de=[];return z(fe,function(Ce){!l(Se,Ce)&&!l(j,Ce)&&Lt(de,Ce)}),de},zt=function(_e){var se=_e===we,fe=Ue(se?We:h(_e)),de=[];return z(fe,function(Ce){l(Se,Ce)&&(!se||l(we,Ce))&&Lt(de,Se[Ce])}),de};return o||(Ie=function(){if(c(ze,this))throw new Nt("Symbol is not a constructor");var se=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),fe=P(se),de=function(Ce){var ot=this===void 0?e:this;ot===we&&r(de,We,Ce),l(ot,H)&&l(ot[H],fe)&&(ot[H][fe]=!1);var _i=m(1,Ce);try{F(ot,fe,_i)}catch(Yi){if(!(Yi instanceof Ze))throw Yi;M(ot,fe,_i)}};return s&&Bt&&F(we,fe,{configurable:!0,set:de}),V(fe,se)},ze=Ie[he],E(ze,"toString",function(){return Be(this).tag}),E(Ie,"withoutSetter",function(_e){return V(P(_e),_e)}),N.f=ye,S.f=oe,_.f=Z,x.f=Ge,y.f=v.f=rt,w.f=zt,q.f=function(_e){return V(A(_e),_e)},s&&(k(ze,"description",{configurable:!0,get:function(){return Be(this).description}}),i||E(we,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Ie}),z(b(Dt),function(_e){R(_e)}),t({target:K,stat:!0,forced:!o},{useSetter:function(){Bt=!0},useSimple:function(){Bt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Q,defineProperty:oe,defineProperties:Z,getOwnPropertyDescriptor:Ge}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:rt}),L(),D(Ie,K),j[H]=!0,bH}var FH={},HC,qH;function hoe(){if(qH)return HC;qH=1;var t=xh();return HC=t&&!!Symbol.for&&!!Symbol.keyFor,HC}var LH;function hOe(){if(LH)return FH;LH=1;var t=Oe(),e=wi(),r=on(),n=Ki(),i=_h(),s=hoe(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),FH}var BH={},zH;function fOe(){if(zH)return BH;zH=1;var t=Oe(),e=on(),r=Cm(),n=wh(),i=_h(),s=hoe(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),BH}var VH={},WC,UH;function pOe(){if(UH)return WC;UH=1;var t=lt(),e=ru(),r=Gr(),n=Hs(),i=Ki(),s=t([].push);return WC=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},WC}var HH;function foe(){if(HH)return VH;HH=1;var t=Oe(),e=wi(),r=nb(),n=oi(),i=lt(),s=st(),o=Gr(),a=Cm(),l=Ch(),c=pOe(),d=xh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),b=i("".replace),y=i(1.1.toString),v=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,C){var O=l(arguments),j=c(C);if(!(!o(j)&&(k===void 0||a(k))))return O[1]=function(P,A){if(o(j)&&(A=n(j,this,h(P),A)),!a(A))return A},r(f,null,O)},E=function(k,C,O){var j=m(O,C-1),P=m(O,C+1);return p(w,k)&&!p(x,P)||p(x,k)&&!p(w,j)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,j){var P=l(arguments),A=r(S?N:f,null,P);return _&&typeof A=="string"?b(A,v,E):A}}),VH}var WH={},KH;function mOe(){if(KH)return WH;KH=1;var t=Oe(),e=xh(),r=st(),n=ub(),i=Si(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),WH}var GH;function poe(){return GH||(GH=1,dOe(),hOe(),fOe(),foe(),mOe()),vH}var YH={},QH;function moe(){if(QH)return YH;QH=1;var t=Zt();return t("asyncDispose"),YH}var XH={},JH;function gOe(){if(JH)return XH;JH=1;var t=Zt();return t("asyncIterator"),XH}var ZH={},eW;function goe(){if(eW)return ZH;eW=1;var t=Zt();return t("dispose"),ZH}var tW={},rW;function yOe(){if(rW)return tW;rW=1;var t=Zt();return t("hasInstance"),tW}var nW={},iW;function vOe(){if(iW)return nW;iW=1;var t=Zt();return t("isConcatSpreadable"),nW}var sW={},oW;function yoe(){if(oW)return sW;oW=1;var t=Zt();return t("iterator"),sW}var aW={},lW;function bOe(){if(lW)return aW;lW=1;var t=Zt();return t("match"),aW}var cW={},uW;function xOe(){if(uW)return cW;uW=1;var t=Zt();return t("matchAll"),cW}var dW={},hW;function wOe(){if(hW)return dW;hW=1;var t=Zt();return t("replace"),dW}var fW={},pW;function SOe(){if(pW)return fW;pW=1;var t=Zt();return t("search"),fW}var mW={},gW;function _Oe(){if(gW)return mW;gW=1;var t=Zt();return t("species"),mW}var yW={},vW;function EOe(){if(vW)return yW;vW=1;var t=Zt();return t("split"),yW}var bW={},xW;function voe(){if(xW)return bW;xW=1;var t=Zt(),e=uoe();return t("toPrimitive"),e(),bW}var wW={},SW;function NOe(){if(SW)return wW;SW=1;var t=wi(),e=Zt(),r=nu();return e("toStringTag"),r(t("Symbol"),"Symbol"),wW}var _W={},EW;function COe(){if(EW)return _W;EW=1;var t=Zt();return t("unscopables"),_W}var NW={},CW;function kOe(){if(CW)return NW;CW=1;var t=Ht(),e=nu();return e(t.JSON,"JSON",!0),NW}var KC,kW;function TOe(){if(kW)return KC;kW=1,coe(),poe(),moe(),gOe(),goe(),yOe(),vOe(),yoe(),bOe(),xOe(),wOe(),SOe(),_Oe(),EOe(),voe(),NOe(),COe(),kOe();var t=Et();return KC=t.Symbol,KC}var TW={},GC,OW;function T$(){return OW||(OW=1,GC=function(){}),GC}var YC,jW;function Th(){return jW||(jW=1,YC={}),YC}var QC,PW;function OOe(){if(PW)return QC;PW=1;var t=gr(),e=on(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return QC={EXISTS:i,PROPER:s,CONFIGURABLE:o},QC}var XC,IW;function boe(){if(IW)return XC;IW=1;var t=st();return XC=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),XC}var JC,RW;function mb(){if(RW)return JC;RW=1;var t=on(),e=Gr(),r=Si(),n=hb(),i=boe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return JC=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},JC}var ZC,MW;function xoe(){if(MW)return ZC;MW=1;var t=st(),e=Gr(),r=Yr(),n=jm(),i=mb(),s=Pm(),o=Or(),a=Sh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),ZC={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},ZC}var ek,$W;function jOe(){if($W)return ek;$W=1;var t=xoe().IteratorPrototype,e=jm(),r=Em(),n=nu(),i=Th(),s=function(){return this};return ek=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},ek}var tk,DW;function POe(){if(DW)return tk;DW=1;var t=lt(),e=Wo();return tk=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},tk}var rk,AW;function IOe(){if(AW)return rk;AW=1;var t=Yr();return rk=function(e){return t(e)||e===null},rk}var nk,FW;function ROe(){if(FW)return nk;FW=1;var t=IOe(),e=String,r=TypeError;return nk=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},nk}var ik,qW;function MOe(){if(qW)return ik;qW=1;var t=POe(),e=Yr(),r=Ho(),n=ROe();return ik=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),ik}var sk,LW;function O$(){if(LW)return sk;LW=1;var t=Oe(),e=oi(),r=Sh(),n=OOe(),i=Gr(),s=jOe(),o=mb(),a=MOe(),l=nu(),c=Eh(),d=Pm(),h=Or(),f=Th(),p=xoe(),m=n.PROPER,g=n.CONFIGURABLE,b=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,v=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return sk=function(N,E,k,C,O,j,P){s(k,E,C);var A=function(xe){if(xe===O&&W)return W;if(!y&&xe&&xe in L)return L[xe];switch(xe){case w:return function(){return new k(this,xe)};case x:return function(){return new k(this,xe)};case S:return function(){return new k(this,xe)}}return function(){return new k(this)}},q=E+" Iterator",R=!1,L=N.prototype,D=L[v]||L["@@iterator"]||O&&L[O],W=!y&&D||A(O),z=E==="Array"&&L.entries||D,H,K,he;if(z&&(H=o(z.call(new N)),H!==Object.prototype&&H.next&&(!r&&o(H)!==b&&(a?a(H,b):i(H[v])||d(H,v,_)),l(H,q,!0,!0),r&&(f[q]=_))),m&&O===x&&D&&D.name!==x&&(!r&&g?c(L,"name",x):(R=!0,W=function(){return e(D,this)})),O)if(K={values:A(x),keys:j?W:A(w),entries:A(S)},P)for(he in K)(y||R||!(he in L))&&d(L,he,K[he]);else t({target:E,proto:!0,forced:y||R},K);return(!r||P)&&L[v]!==W&&d(L,v,W,{name:O}),f[E]=W,K},sk}var ok,BW;function j$(){return BW||(BW=1,ok=function(t,e){return{value:t,done:e}}),ok}var ak,zW;function Oh(){if(zW)return ak;zW=1;var t=vs(),e=T$(),r=Th(),n=iu(),i=Wi().f,s=O$(),o=j$(),a=Sh(),l=gr(),c="Array Iterator",d=n.set,h=n.getterFor(c);ak=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return ak}var lk,VW;function $Oe(){return VW||(VW=1,lk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),lk}var UW;function jh(){if(UW)return TW;UW=1,Oh();var t=$Oe(),e=Ht(),r=nu(),n=Th();for(var i in t)r(e[i],i),n[i]=n.Array;return TW}var ck,HW;function woe(){if(HW)return ck;HW=1;var t=TOe();return jh(),ck=t,ck}var uk,WW;function DOe(){return WW||(WW=1,uk=woe()),uk}var AOe=DOe(),FOe=Le(AOe),KW={},GW;function qOe(){if(GW)return KW;GW=1;var t=Oe(),e=ru(),r=loe(),n=Yr(),i=cb(),s=Ko(),o=vs(),a=db(),l=Or(),c=Om(),d=Ch(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(b,y){var v=o(this),w=s(v),x=i(b,w),S=i(y===void 0?w:y,w),_,N,E;if(e(v)&&(_=v.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(v,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in v&&a(N,E,v[x]);return N.length=E,N}}),KW}var dk,YW;function LOe(){if(YW)return dk;YW=1,qOe();var t=an();return dk=t("Array","slice"),dk}var hk,QW;function BOe(){if(QW)return hk;QW=1;var t=Tr(),e=LOe(),r=Array.prototype;return hk=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},hk}var fk,XW;function zOe(){if(XW)return fk;XW=1;var t=BOe();return fk=t,fk}var pk,JW;function VOe(){return JW||(JW=1,pk=zOe()),pk}var UOe=VOe(),Ps=Le(UOe),mk,ZW;function HOe(){if(ZW)return mk;ZW=1;var t=wi(),e=lt(),r=fb(),n=ub(),i=Ws(),s=e([].concat);return mk=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},mk}var e7={},t7;function WOe(){if(t7)return e7;t7=1;var t=Oe(),e=ru();return t({target:"Array",stat:!0},{isArray:e}),e7}var gk,r7;function KOe(){if(r7)return gk;r7=1,WOe();var t=Et();return gk=t.Array.isArray,gk}var yk,n7;function GOe(){if(n7)return yk;n7=1;var t=KOe();return yk=t,yk}var vk,i7;function YOe(){return i7||(i7=1,vk=GOe()),vk}var QOe=YOe(),ur=Le(QOe),s7={},o7;function XOe(){if(o7)return s7;o7=1;var t=Oe(),e=vl().map,r=Om(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),s7}var bk,a7;function JOe(){if(a7)return bk;a7=1,XOe();var t=an();return bk=t("Array","map"),bk}var xk,l7;function ZOe(){if(l7)return xk;l7=1;var t=Tr(),e=JOe(),r=Array.prototype;return xk=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},xk}var wk,c7;function eje(){if(c7)return wk;c7=1;var t=ZOe();return wk=t,wk}var Sk,u7;function tje(){return u7||(u7=1,Sk=eje()),Sk}var rje=tje(),Kd=Le(rje),d7={},h7;function nje(){if(h7)return d7;h7=1;var t=Oe(),e=Si(),r=Tm(),n=st(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),d7}var _k,f7;function ije(){if(f7)return _k;f7=1,nje();var t=Et();return _k=t.Object.keys,_k}var Ek,p7;function sje(){if(p7)return Ek;p7=1;var t=ije();return Ek=t,Ek}var Nk,m7;function oje(){return m7||(m7=1,Nk=sje()),Nk}var aje=oje(),or=Le(aje),g7={},y7;function lje(){if(y7)return g7;y7=1;var t=Oe(),e=lt(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),g7}var Ck,v7;function cje(){if(v7)return Ck;v7=1,lje();var t=Et();return Ck=t.Date.now,Ck}var kk,b7;function uje(){if(b7)return kk;b7=1;var t=cje();return kk=t,kk}var Tk,x7;function dje(){return x7||(x7=1,Tk=uje()),Tk}var hje=dje(),Hv=Le(hje),w7={},Ok,S7;function Ph(){if(S7)return Ok;S7=1;var t=st();return Ok=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},Ok}var jk,_7;function fje(){if(_7)return jk;_7=1;var t=vl().forEach,e=Ph(),r=e("forEach");return jk=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},jk}var E7;function pje(){if(E7)return w7;E7=1;var t=Oe(),e=fje();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),w7}var Pk,N7;function mje(){if(N7)return Pk;N7=1,pje();var t=an();return Pk=t("Array","forEach"),Pk}var Ik,C7;function gje(){if(C7)return Ik;C7=1;var t=mje();return Ik=t,Ik}var Rk,k7;function yje(){if(k7)return Rk;k7=1;var t=kh(),e=on(),r=Tr(),n=gje(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Rk=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},Rk}var Mk,T7;function vje(){return T7||(T7=1,Mk=yje()),Mk}var bje=vje(),kt=Le(bje),O7={},j7;function xje(){if(j7)return O7;j7=1;var t=Oe(),e=lt(),r=ru(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),O7}var $k,P7;function wje(){if(P7)return $k;P7=1,xje();var t=an();return $k=t("Array","reverse"),$k}var Dk,I7;function Sje(){if(I7)return Dk;I7=1;var t=Tr(),e=wje(),r=Array.prototype;return Dk=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},Dk}var Ak,R7;function _je(){if(R7)return Ak;R7=1;var t=Sje();return Ak=t,Ak}var Fk,M7;function Eje(){return M7||(M7=1,Fk=_je()),Fk}var Nje=Eje(),cc=Le(Nje),$7={},qk,D7;function Cje(){if(D7)return qk;D7=1;var t=gr(),e=ru(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return qk=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},qk}var Lk,A7;function Soe(){if(A7)return Lk;A7=1;var t=wh(),e=TypeError;return Lk=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},Lk}var F7;function kje(){if(F7)return $7;F7=1;var t=Oe(),e=Si(),r=cb(),n=Nh(),i=Ko(),s=Cje(),o=aoe(),a=E$(),l=db(),c=Soe(),d=Om(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,b){var y=e(this),v=i(y),w=r(g,v),x=arguments.length,S,_,N,E,k,C;for(x===0?S=_=0:x===1?(S=0,_=v-w):(S=x-2,_=p(f(n(b),0),v-w)),o(v+S-_),N=a(y,_),E=0;E<_;E++)k=w+E,k in y&&l(N,E,y[k]);if(N.length=_,S<_){for(E=w;E<v-_;E++)k=E+_,C=E+S,k in y?y[C]=y[k]:c(y,C);for(E=v;E>v-_+S;E--)c(y,E-1)}else if(S>_)for(E=v-_;E>w;E--)k=E+_-1,C=E+S-1,k in y?y[C]=y[k]:c(y,C);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,v-_+S),N}}),$7}var Bk,q7;function Tje(){if(q7)return Bk;q7=1,kje();var t=an();return Bk=t("Array","splice"),Bk}var zk,L7;function Oje(){if(L7)return zk;L7=1;var t=Tr(),e=Tje(),r=Array.prototype;return zk=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},zk}var Vk,B7;function jje(){if(B7)return Vk;B7=1;var t=Oje();return Vk=t,Vk}var Uk,z7;function Pje(){return z7||(z7=1,Uk=jje()),Uk}var Ije=Pje(),Eo=Le(Ije),V7={},U7;function Rje(){if(U7)return V7;U7=1;var t=Oe(),e=x$().includes,r=st(),n=T$(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),V7}var Hk,H7;function Mje(){if(H7)return Hk;H7=1,Rje();var t=an();return Hk=t("Array","includes"),Hk}var W7={},Wk,K7;function $je(){if(K7)return Wk;K7=1;var t=Yr(),e=Hs(),r=Or(),n=r("match");return Wk=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},Wk}var Kk,G7;function Dje(){if(G7)return Kk;G7=1;var t=$je(),e=TypeError;return Kk=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},Kk}var Gk,Y7;function Aje(){if(Y7)return Gk;Y7=1;var t=Or(),e=t("match");return Gk=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},Gk}var Q7;function Fje(){if(Q7)return W7;Q7=1;var t=Oe(),e=lt(),r=Dje(),n=Ho(),i=Ki(),s=Aje(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),W7}var Yk,X7;function qje(){if(X7)return Yk;X7=1,Fje();var t=an();return Yk=t("String","includes"),Yk}var Qk,J7;function Lje(){if(J7)return Qk;J7=1;var t=Tr(),e=Mje(),r=qje(),n=Array.prototype,i=String.prototype;return Qk=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},Qk}var Xk,Z7;function Bje(){if(Z7)return Xk;Z7=1;var t=Lje();return Xk=t,Xk}var Jk,e9;function zje(){return e9||(e9=1,Jk=Bje()),Jk}var Vje=zje(),Ya=Le(Vje),t9={},r9;function Uje(){if(r9)return t9;r9=1;var t=Oe(),e=st(),r=Si(),n=mb(),i=boe(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),t9}var Zk,n9;function Hje(){if(n9)return Zk;n9=1,Uje();var t=Et();return Zk=t.Object.getPrototypeOf,Zk}var eT,i9;function Wje(){if(i9)return eT;i9=1;var t=Hje();return eT=t,eT}var tT,s9;function Kje(){return s9||(s9=1,tT=Wje()),tT}var Gje=Kje(),o9=Le(Gje),rT,a9;function Yje(){if(a9)return rT;a9=1,coe();var t=an();return rT=t("Array","concat"),rT}var nT,l9;function Qje(){if(l9)return nT;l9=1;var t=Tr(),e=Yje(),r=Array.prototype;return nT=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},nT}var iT,c9;function Xje(){if(c9)return iT;c9=1;var t=Qje();return iT=t,iT}var sT,u9;function Jje(){return u9||(u9=1,sT=Xje()),sT}var Zje=Jje(),ePe=Le(Zje),d9={},h9;function tPe(){if(h9)return d9;h9=1;var t=Oe(),e=vl().filter,r=Om(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),d9}var oT,f9;function rPe(){if(f9)return oT;f9=1,tPe();var t=an();return oT=t("Array","filter"),oT}var aT,p9;function nPe(){if(p9)return aT;p9=1;var t=Tr(),e=rPe(),r=Array.prototype;return aT=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},aT}var lT,m9;function iPe(){if(m9)return lT;m9=1;var t=nPe();return lT=t,lT}var cT,g9;function sPe(){return g9||(g9=1,cT=iPe()),cT}var oPe=sPe(),Wn=Le(oPe),y9={},uT,v9;function aPe(){if(v9)return uT;v9=1;var t=gr(),e=st(),r=lt(),n=mb(),i=Tm(),s=vs(),o=ib().f,a=r(o),l=r([].push),c=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=c&&n(p)===null,b=m.length,y=0,v=[],w;b>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(v,h?[w,p[w]]:p[w]);return v}};return uT={entries:d(!0),values:d(!1)},uT}var b9;function lPe(){if(b9)return y9;b9=1;var t=Oe(),e=aPe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),y9}var dT,x9;function cPe(){if(x9)return dT;x9=1,lPe();var t=Et();return dT=t.Object.values,dT}var hT,w9;function uPe(){if(w9)return hT;w9=1;var t=cPe();return hT=t,hT}var fT,S9;function dPe(){return S9||(S9=1,fT=uPe()),fT}var hPe=dPe(),fPe=Le(hPe),_9={},pT,E9;function P$(){return E9||(E9=1,pT=`	
\v\f\r \u2028\u2029\uFEFF`),pT}var mT,N9;function _oe(){if(N9)return mT;N9=1;var t=lt(),e=Ho(),r=Ki(),n=P$(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(c){var d=r(e(c));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return mT={start:a(1),end:a(2),trim:a(3)},mT}var gT,C9;function pPe(){if(C9)return gT;C9=1;var t=Ht(),e=st(),r=lt(),n=Ki(),i=_oe().trim,s=P$(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,c=/^[+-]?0x/i,d=r(c.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return gT=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(c,g)?16:10))}:o,gT}var k9;function mPe(){if(k9)return _9;k9=1;var t=Oe(),e=pPe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),_9}var yT,T9;function gPe(){if(T9)return yT;T9=1,mPe();var t=Et();return yT=t.parseInt,yT}var vT,O9;function yPe(){if(O9)return vT;O9=1;var t=gPe();return vT=t,vT}var bT,j9;function vPe(){return j9||(j9=1,bT=yPe()),bT}var bPe=vPe(),ss=Le(bPe),P9={},I9;function xPe(){if(I9)return P9;I9=1;var t=Oe(),e=g$(),r=x$().indexOf,n=Ph(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var c=arguments.length>1?arguments[1]:void 0;return s?i(this,l,c)||0:r(this,l,c)}}),P9}var xT,R9;function wPe(){if(R9)return xT;R9=1,xPe();var t=an();return xT=t("Array","indexOf"),xT}var wT,M9;function SPe(){if(M9)return wT;M9=1;var t=Tr(),e=wPe(),r=Array.prototype;return wT=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},wT}var ST,$9;function _Pe(){if($9)return ST;$9=1;var t=SPe();return ST=t,ST}var _T,D9;function EPe(){return D9||(D9=1,_T=_Pe()),_T}var NPe=EPe(),wt=Le(NPe),A9={},F9;function CPe(){if(F9)return A9;F9=1;var t=Oe(),e=gr(),r=jm();return t({target:"Object",stat:!0,sham:!e},{create:r}),A9}var ET,q9;function kPe(){if(q9)return ET;q9=1,CPe();var t=Et(),e=t.Object;return ET=function(n,i){return e.create(n,i)},ET}var NT,L9;function TPe(){if(L9)return NT;L9=1;var t=kPe();return NT=t,NT}var CT,B9;function OPe(){return B9||(B9=1,CT=TPe()),CT}var jPe=OPe(),uc=Le(jPe),z9={},kT,V9;function PPe(){if(V9)return kT;V9=1;var t=Nh(),e=Ki(),r=Ho(),n=RangeError;return kT=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},kT}var TT,U9;function IPe(){if(U9)return TT;U9=1;var t=lt(),e=toe(),r=Ki(),n=PPe(),i=Ho(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,b=f===void 0?" ":r(f),y,v;return m<=g||b===""?p:(y=m-g,v=s(b,a(y/b.length)),v.length>y&&(v=o(v,0,y)),c?p+v:v+p)}};return TT={start:l(!1),end:l(!0)},TT}var OT,H9;function RPe(){if(H9)return OT;H9=1;var t=lt(),e=st(),r=IPe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return OT=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,v=d(y),w=f(y),x=v<0?"-":v>9999?"+":"";return x+r(s(v),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,OT}var W9;function MPe(){if(W9)return z9;W9=1;var t=Oe(),e=oi(),r=Si(),n=Xse(),i=RPe(),s=Hs(),o=st(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),z9}var jT,K9;function $Pe(){if(K9)return jT;K9=1,MPe(),foe();var t=Et(),e=nb();return t.JSON||(t.JSON={stringify:JSON.stringify}),jT=function(n,i,s){return e(t.JSON.stringify,null,arguments)},jT}var PT,G9;function DPe(){if(G9)return PT;G9=1;var t=$Pe();return PT=t,PT}var IT,Y9;function APe(){return Y9||(Y9=1,IT=DPe()),IT}var FPe=APe(),Im=Le(FPe),Q9={},X9={},RT,J9;function Eoe(){if(J9)return RT;J9=1;var t=Ht(),e=bh(),r=Hs(),n=function(i){return e.slice(0,i.length)===i};return RT=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),RT}var MT,Z9;function qPe(){if(Z9)return MT;Z9=1;var t=TypeError;return MT=function(e,r){if(e<r)throw new t("Not enough arguments");return e},MT}var $T,eK;function Noe(){if(eK)return $T;eK=1;var t=Ht(),e=nb(),r=Gr(),n=Eoe(),i=bh(),s=Ch(),o=qPe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return $T=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),b=m?s(arguments,h):[],y=m?function(){e(g,this,b)}:g;return d?c(y,p):c(y)}:c},$T}var tK;function LPe(){if(tK)return X9;tK=1;var t=Oe(),e=Ht(),r=Noe(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),X9}var rK={},nK;function BPe(){if(nK)return rK;nK=1;var t=Oe(),e=Ht(),r=Noe(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),rK}var iK;function Coe(){return iK||(iK=1,LPe(),BPe()),Q9}var DT,sK;function zPe(){if(sK)return DT;sK=1,Coe();var t=Et();return DT=t.setTimeout,DT}var AT,oK;function VPe(){return oK||(oK=1,AT=zPe()),AT}var UPe=VPe(),No=Le(UPe),aK={},FT,lK;function HPe(){if(lK)return FT;lK=1;var t=Si(),e=cb(),r=Ko();return FT=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,d=c===void 0?o:e(c,o);d>l;)s[l++]=i;return s},FT}var cK;function WPe(){if(cK)return aK;cK=1;var t=Oe(),e=HPe(),r=T$();return t({target:"Array",proto:!0},{fill:e}),r("fill"),aK}var qT,uK;function KPe(){if(uK)return qT;uK=1,WPe();var t=an();return qT=t("Array","fill"),qT}var LT,dK;function GPe(){if(dK)return LT;dK=1;var t=Tr(),e=KPe(),r=Array.prototype;return LT=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},LT}var BT,hK;function YPe(){if(hK)return BT;hK=1;var t=GPe();return BT=t,BT}var zT,fK;function QPe(){return fK||(fK=1,zT=YPe()),zT}var XPe=QPe(),Rm=Le(XPe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ms(){return ms=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ms.apply(this,arguments)}function Gi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function $g(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var EI;typeof Object.assign!="function"?EI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:EI=Object.assign;var Mc=EI,pK=["","webkit","Moz","MS","ms","o"],JPe=typeof document>"u"?{style:{}}:document.createElement("div"),ZPe="function",Wu=Math.round,$c=Math.abs,I$=Date.now;function gb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<pK.length;){if(r=pK[s],n=r?r+i:e,n in t)return n;s++}}var Co;typeof window>"u"?Co={}:Co=window;var koe=gb(JPe.style,"touchAction"),Toe=koe!==void 0;function eIe(){if(!Toe)return!1;var t={},e=Co.CSS&&Co.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?Co.CSS.supports("touch-action",r):!0}),t}var Ooe="compute",joe="auto",NI="manipulation",dc="none",Op="pan-x",jp="pan-y",Dg=eIe(),tIe=/mobile|tablet|ip(ad|hone|od)|android/i,Poe="ontouchstart"in Co,rIe=gb(Co,"PointerEvent")!==void 0,nIe=Poe&&tIe.test(navigator.userAgent),Mm="touch",iIe="pen",R$="mouse",sIe="kinect",oIe=25,Mn=1,su=2,_r=4,ni=8,Wv=1,$m=2,Dm=4,Am=8,Gd=16,Ls=$m|Dm,hc=Am|Gd,Ioe=Ls|hc,Roe=["x","y"],Kv=["clientX","clientY"];function ko(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function yb(t,e){return typeof t===ZPe?t.apply(e&&e[0]||void 0,e):t}function Bl(t,e){return t.indexOf(e)>-1}function aIe(t){if(Bl(t,dc))return dc;var e=Bl(t,Op),r=Bl(t,jp);return e&&r?dc:e||r?e?Op:jp:Bl(t,NI)?NI:joe}var Moe=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Ooe&&(n=this.compute()),Toe&&this.manager.element.style&&Dg[n]&&(this.manager.element.style[koe]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return ko(this.manager.recognizers,function(i){yb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),aIe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Bl(o,dc)&&!Dg[dc],l=Bl(o,jp)&&!Dg[jp],c=Bl(o,Op)&&!Dg[Op];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&Ls||c&&s&hc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function M$(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function $oe(t){var e=t.length;if(e===1)return{x:Wu(t[0].clientX),y:Wu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Wu(r/e),y:Wu(n/e)}}function mK(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Wu(t.pointers[r].clientX),clientY:Wu(t.pointers[r].clientY)},r++;return{timeStamp:I$(),pointers:e,center:$oe(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Gv(t,e,r){r||(r=Roe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function CI(t,e,r){r||(r=Roe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Doe(t,e){return t===e?Wv:$c(t)>=$c(e)?t<0?$m:Dm:e<0?Am:Gd}function lIe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Mn||s.eventType===_r)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Aoe(t,e,r){return{x:e/t||0,y:r/t||0}}function cIe(t,e){return Gv(e[0],e[1],Kv)/Gv(t[0],t[1],Kv)}function uIe(t,e){return CI(e[1],e[0],Kv)+CI(t[1],t[0],Kv)}function dIe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ni&&(n>oIe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=Aoe(n,l,c);s=d.x,o=d.y,i=$c(d.x)>$c(d.y)?d.x:d.y,a=Doe(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function hIe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=mK(e)),i>1&&!r.firstMultiple?r.firstMultiple=mK(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=$oe(n);e.timeStamp=I$(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=CI(a,l),e.distance=Gv(a,l),lIe(r,e),e.offsetDirection=Doe(e.deltaX,e.deltaY);var c=Aoe(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=$c(c.x)>$c(c.y)?c.x:c.y,e.scale=o?cIe(o.pointers,n):1,e.rotation=o?uIe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,dIe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,M$(f,d)&&(d=f),e.target=d}function fIe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Mn&&n-i===0,o=e&(_r|ni)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,hIe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Pp(t){return t.trim().split(/\s+/g)}function qf(t,e,r){ko(Pp(e),function(n){t.addEventListener(n,r,!1)})}function Lf(t,e,r){ko(Pp(e),function(n){t.removeEventListener(n,r,!1)})}function gK(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Ih=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){yb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&qf(this.element,this.evEl,this.domHandler),this.evTarget&&qf(this.target,this.evTarget,this.domHandler),this.evWin&&qf(gK(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Lf(this.element,this.evEl,this.domHandler),this.evTarget&&Lf(this.target,this.evTarget,this.domHandler),this.evWin&&Lf(gK(this.element),this.evWin,this.domHandler)},t}();function Dc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var pIe={pointerdown:Mn,pointermove:su,pointerup:_r,pointercancel:ni,pointerout:ni},mIe={2:Mm,3:iIe,4:R$,5:sIe},Foe="pointerdown",qoe="pointermove pointerup pointercancel";Co.MSPointerEvent&&!Co.PointerEvent&&(Foe="MSPointerDown",qoe="MSPointerMove MSPointerUp MSPointerCancel");var Loe=function(t){Gi(e,t);function e(){var n,i=e.prototype;return i.evEl=Foe,i.evWin=qoe,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=pIe[a],c=mIe[i.pointerType]||i.pointerType,d=c===Mm,h=Dc(s,i.pointerId,"pointerId");l&Mn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(_r|ni)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(Ih);function Ip(t){return Array.prototype.slice.call(t,0)}function $$(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Dc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var gIe={touchstart:Mn,touchmove:su,touchend:_r,touchcancel:ni},yIe="touchstart touchmove touchend touchcancel",D$=function(t){Gi(e,t);function e(){var n;return e.prototype.evTarget=yIe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=gIe[i.type],o=vIe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Mm,srcEvent:i})},e}(Ih);function vIe(t,e){var r=Ip(t.touches),n=this.targetIds;if(e&(Mn|su)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Ip(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return M$(c.target,l)}),e===Mn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(_r|ni)&&delete n[o[i].identifier],i++;if(a.length)return[$$(s.concat(a),"identifier",!0),a]}var bIe={mousedown:Mn,mousemove:su,mouseup:_r},xIe="mousedown",wIe="mousemove mouseup",A$=function(t){Gi(e,t);function e(){var n,i=e.prototype;return i.evEl=xIe,i.evWin=wIe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=bIe[i.type];s&Mn&&i.button===0&&(this.pressed=!0),s&su&&i.which!==1&&(s=_r),this.pressed&&(s&_r&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:R$,srcEvent:i}))},e}(Ih),SIe=2500,yK=25;function vK(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,SIe)}}function _Ie(t,e){t&Mn?(this.primaryTouch=e.changedPointers[0].identifier,vK.call(this,e)):t&(_r|ni)&&vK.call(this,e)}function EIe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=yK&&o<=yK)return!0}return!1}var Boe=function(){var t=function(e){Gi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===Mm,h=c.pointerType===R$;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)_Ie.call($g($g(o)),l,c);else if(h&&EIe.call($g($g(o)),c))return;o.callback(a,l,c)}},o.touch=new D$(o.manager,o.handler),o.mouse=new A$(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Ih);return t}();function NIe(t){var e,r=t.options.inputClass;return r?e=r:rIe?e=Loe:nIe?e=D$:Poe?e=Boe:e=A$,new e(t,fIe)}function Ku(t,e,r){return Array.isArray(t)?(ko(t,r[e],r),!0):!1}var ly=1,Bi=2,Yd=4,Qa=8,To=Qa,Rp=16,Rs=32,CIe=1;function kIe(){return CIe++}function Ag(t,e){var r=e.manager;return r?r.get(t):t}function bK(t){return t&Rp?"cancel":t&Qa?"end":t&Yd?"move":t&Bi?"start":""}var Fm=function(){function t(r){r===void 0&&(r={}),this.options=ms({enable:!0},r),this.id=kIe(),this.manager=null,this.state=ly,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Mc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Ku(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Ag(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Ku(n,"dropRecognizeWith",this)?this:(n=Ag(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Ku(n,"requireFailure",this))return this;var i=this.requireFail;return n=Ag(n,this),Dc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Ku(n,"dropRequireFailure",this))return this;n=Ag(n,this);var i=Dc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Qa&&o(i.options.event+bK(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Qa&&o(i.options.event+bK(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Rs},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Rs|ly)))return!1;n++}return!0},e.recognize=function(n){var i=Mc({},n);if(!yb(this.options.enable,[this,i])){this.reset(),this.state=Rs;return}this.state&(To|Rp|Rs)&&(this.state=ly),this.state=this.process(i),this.state&(Bi|Yd|Qa|Rp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),kI=function(t){Gi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[NI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Mn&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==_r)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Gv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=To,s.tryEmit()},o.interval),Bi):To}return Rs},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Rs},this.options.interval),Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===To&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Fm),Qd=function(t){Gi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Bi|Yd),l=this.attrTest(i);return a&&(o&ni||!l)?s|Rp:a||l?o&_r?s|Qa:s&Bi?s|Yd:Bi:Rs},e}(Fm);function zoe(t){return t===Gd?"down":t===Am?"up":t===$m?"left":t===Dm?"right":""}var F$=function(t){Gi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"pan",threshold:10,pointers:1,direction:Ioe},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Ls&&s.push(jp),i&hc&&s.push(Op),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Ls?(l=c===0?Wv:c<0?$m:Dm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Wv:d<0?Am:Gd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Qd.prototype.attrTest.call(this,i)&&(this.state&Bi||!(this.state&Bi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=zoe(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Qd),Voe=function(t){Gi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"swipe",threshold:10,velocity:.3,direction:Ls|hc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return F$.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Ls|hc)?o=i.overallVelocity:s&Ls?o=i.overallVelocityX:s&hc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&$c(o)>this.options.velocity&&i.eventType&_r},r.emit=function(i){var s=zoe(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Qd),Uoe=function(t){Gi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[dc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Bi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Qd),Hoe=function(t){Gi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[dc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Bi)},e}(Qd),Woe=function(t){Gi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[joe]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(_r|ni)&&!c)this.reset();else if(i.eventType&Mn)this.reset(),this._timer=setTimeout(function(){s.state=To,s.tryEmit()},o.time);else if(i.eventType&_r)return To;return Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===To&&(i&&i.eventType&_r?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=I$(),this.manager.emit(this.options.event,this._input)))},e}(Fm),Koe={domEvents:!1,touchAction:Ooe,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},xK=[[Hoe,{enable:!1}],[Uoe,{enable:!1},["rotate"]],[Voe,{direction:Ls}],[F$,{direction:Ls},["swipe"]],[kI],[kI,{event:"doubletap",taps:2},["tap"]],[Woe]],TIe=1,wK=2;function SK(t,e){var r=t.element;if(r.style){var n;ko(t.options.cssProps,function(i,s){n=gb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function OIe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var _K=function(){function t(r,n){var i=this;this.options=Mc({},Koe,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=NIe(this),this.touchAction=new Moe(this,this.options.touchAction),SK(this,!0),ko(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Mc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?wK:TIe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&To)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==wK&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Bi|Yd|Qa)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Fm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Ku(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Ku(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Dc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return ko(Pp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return ko(Pp(n),function(o){i?s[o]&&s[o].splice(Dc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&OIe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&SK(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),jIe={touchstart:Mn,touchmove:su,touchend:_r,touchcancel:ni},PIe="touchstart",IIe="touchstart touchmove touchend touchcancel",RIe=function(t){Gi(e,t);function e(){var n,i=e.prototype;return i.evTarget=PIe,i.evWin=IIe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=jIe[i.type];if(s===Mn&&(this.started=!0),!!this.started){var o=MIe.call(this,i,s);s&(_r|ni)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Mm,srcEvent:i})}},e}(Ih);function MIe(t,e){var r=Ip(t.touches),n=Ip(t.changedTouches);return e&(_r|ni)&&(r=$$(r.concat(n),"identifier",!0)),[r,n]}function Goe(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Yoe=Goe(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),$Ie=Goe(function(t,e){return Yoe(t,e,!0)},"merge","Use `assign`.");function DIe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Mc(i,r)}function EK(t,e){return function(){return t.apply(e,arguments)}}var Qoe=function(){var t=function(r,n){return n===void 0&&(n={}),new _K(r,ms({recognizers:xK.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Ioe,t.DIRECTION_DOWN=Gd,t.DIRECTION_LEFT=$m,t.DIRECTION_RIGHT=Dm,t.DIRECTION_UP=Am,t.DIRECTION_HORIZONTAL=Ls,t.DIRECTION_VERTICAL=hc,t.DIRECTION_NONE=Wv,t.DIRECTION_DOWN=Gd,t.INPUT_START=Mn,t.INPUT_MOVE=su,t.INPUT_END=_r,t.INPUT_CANCEL=ni,t.STATE_POSSIBLE=ly,t.STATE_BEGAN=Bi,t.STATE_CHANGED=Yd,t.STATE_ENDED=Qa,t.STATE_RECOGNIZED=To,t.STATE_CANCELLED=Rp,t.STATE_FAILED=Rs,t.Manager=_K,t.Input=Ih,t.TouchAction=Moe,t.TouchInput=D$,t.MouseInput=A$,t.PointerEventInput=Loe,t.TouchMouseInput=Boe,t.SingleTouchInput=RIe,t.Recognizer=Fm,t.AttrRecognizer=Qd,t.Tap=kI,t.Pan=F$,t.Swipe=Voe,t.Pinch=Uoe,t.Rotate=Hoe,t.Press=Woe,t.on=qf,t.off=Lf,t.each=ko,t.merge=$Ie,t.extend=Yoe,t.bindFn=EK,t.assign=Mc,t.inherit=DIe,t.bindFn=EK,t.prefixed=gb,t.toArray=Ip,t.inArray=Dc,t.uniqueArray=$$,t.splitStr=Pp,t.boolOrFn=yb,t.hasParent=M$,t.addEventListeners=qf,t.removeEventListeners=Lf,t.defaults=Mc({},Koe,{preset:xK}),t}();Qoe.defaults;FOe("DELETE");function vb(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return AIe(e.length?e:[Hv()])}function AIe(t){let[e,r,n]=FIe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function FIe(){const t=qIe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function qIe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function LIe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const q$=typeof window<"u"?window.Hammer||Qoe:function(){return LIe()};function Ms(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=q$(this._dom.overlay);r.on("tap",ie(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];kt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{BIe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}ooe(Ms.prototype);Ms.current=null;Ms.prototype.destroy=function(){this.deactivate();for(const r of cc(t=Eo(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Ms.prototype.activate=function(){Ms.current&&Ms.current.deactivate(),Ms.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Ms.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Ms.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function BIe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const zIe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,VIe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,UIe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,HIe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function la(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(la(e),t.removeChild(e))}}function nd(t){return t instanceof String||typeof t=="string"}function NK(t){return typeof t=="object"&&t!==null}function Ac(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function Xoe(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")Ac(t,e,n,r);else{const i=t[n],s=e[n];NK(i)&&NK(s)&&Xoe(i,s,r)}}function Rh(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ur(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?It(e[s],r[s],!1,n):Ac(e,r,s,n);else{if(ur(r[s]))throw new TypeError("Arrays are not supported by deepExtend");Ac(e,r,s,n)}}return e}function Yv(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ur(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Ya(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?It(e[i],r[i]):Ac(e,r,i,n);else if(ur(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else Ac(e,r,i,n);return e}function It(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&o9(e[s])===Object.prototype)t[s]===void 0?t[s]=It({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&o9(t[s])===Object.prototype?It(t[s],e[s],r):Ac(t,e,s,n);else if(ur(e[s])){var i;t[s]=Ps(i=e[s]).call(i)}else Ac(t,e,s,n);return t}function Qv(t,e){return[...t,e]}function WIe(t){return Ps(t).call(t)}function KIe(t){return t.getBoundingClientRect().left}function GIe(t){return t.getBoundingClientRect().top}function tt(t,e){if(ur(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function L$(t){let e;switch(t.length){case 3:case 4:return e=VIe.exec(t),e?{r:ss(e[1]+e[1],16),g:ss(e[2]+e[2],16),b:ss(e[3]+e[3],16)}:null;case 6:case 7:return e=zIe.exec(t),e?{r:ss(e[1],16),g:ss(e[2],16),b:ss(e[3],16)}:null;default:return null}}function $i(t,e){if(Ya(t).call(t,"rgba"))return t;if(Ya(t).call(t,"rgb")){const r=t.substr(wt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=L$(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function Joe(t,e,r){var n;return"#"+Ps(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function TI(t,e){if(nd(t)){let n=t;if(eae(n)){var r;const i=Kd(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return ss(s)});n=Joe(i[0],i[1],i[2])}if(Zoe(n)===!0){const i=YIe(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=OI(o.h,o.s,o.v),l=OI(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:nd(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:nd(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function ff(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function cy(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),c=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=c,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=c,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function OI(t,e,r){const n=cy(t,e,r);return Joe(n.r,n.g,n.b)}function YIe(t){const e=L$(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return ff(e.r,e.g,e.b)}function Zoe(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function eae(t){return UIe.test(t)}function QIe(t){return HIe.test(t)}function Xa(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=uc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Xa(t[r]));return e}function Pi(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const b=m[g],y=p[g];for(const v in b)Object.prototype.hasOwnProperty.call(b,v)&&(y[v]=b[v])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=uc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const XIe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function ca(t,e){let r;ur(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const JIe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let ZIe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return JIe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),nd(e)===!0){if(eae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(QIe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(Zoe(e)===!0){const s=L$(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Im(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=Sr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",No(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=Sr({},e)),this.color=e;const n=ff(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=ff(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=cy(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=ff(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Rm(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=ie(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=ie(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=ie(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=ie(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new q$(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,c=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=cy(o*c,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,c=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*d+s,f=Math.sin(c)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=c/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=ff(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const b=cy(g.h,g.s,g.v);b.a=this.color.a,this.color=b,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function jI(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(jI(...Ps(e).call(e,1))),n}}let eRe=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Sr(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new ZIe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(ur(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Wn(e)!==void 0&&(this.options.filter=Wn(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Wn(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Wn(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||wt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return kt(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(jI("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&wt(e).call(e,r)!==-1&&(s=wt(e).call(e,r));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],i.appendChild(c)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,c="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,c="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,c="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);c!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=No(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=No(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Wn(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],c=Qv(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!ur(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(c);if(ur(l))this._handleArray(l,d,c);else if(typeof l=="string")this._makeTextInput(l,d,c);else if(typeof l=="boolean")this._makeCheckbox(l,d,c);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=Qv(c,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(jI("pre","const options = "+Im(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},tRe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=ss(e),this.y=ss(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-r<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},tf=!1,CK;const PI="background: #FFeeee; color: #dd0000";let rRe=class tr{static validate(e,r,n){tf=!1,CK=r;let i=r;return n!==void 0&&(i=r[n]),tr.parse(e,i,[]),tf}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&tr.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){tr.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=tr.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),tr.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+tr.printLocation(o,e),PI)},l=tr.getType(r[e]),c=s[l];c!==void 0?tr.getType(c)==="array"&&wt(c).call(c,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+tr.print(c)+' not "'+r[e]+'". '),tf=!0):l==="object"&&i!=="__any__"&&(o=Qv(o,e),tr.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+tr.print(or(s))+". Received ["+l+'] "'+r[e]+'"'),tf=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":ur(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=tr.findInOptions(e,r,n,!1),s=tr.findInOptions(e,CK,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+tr.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+tr.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+tr.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+tr.printLocation(i.path,e):l=". Did you mean one of these: "+tr.print(or(r))+tr.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,PI),tf=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=tr.findInOptions(e,r[h],Qv(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,c=p.indexMatch)}else{var d;wt(d=h.toLowerCase()).call(d,l)!==-1&&(c=h),f=tr.levenshteinDistance(e,h),s>f&&(o=h,a=WIe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return Im(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const nRe=Ms,iRe=eRe,id=q$,sRe=tRe,tae=PI,oRe=rRe;function aRe(t){return Pa=t,dRe()}var rae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},B$=uc(rae);B$.color="color.color";B$.style="dashes";var En={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},kK={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Pa="",Xd=0,Je="",Me="",Vn=En.NULL;function lRe(){Xd=0,Je=Pa.charAt(0)}function Dr(){Xd++,Je=Pa.charAt(Xd)}function Su(){return Pa.charAt(Xd+1)}function TK(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function il(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function cRe(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function nae(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=il(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),wt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=il(i.attr,e.attr))}function uRe(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=il({},t.edge);e.attr=il(r,e.attr)}}function iae(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=il({},t.edge)),s.attr=il(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Rt(){for(Vn=En.NULL,Me="";Je===" "||Je==="	"||Je===`
`||Je==="\r";)Dr();do{var t=!1;if(Je==="#"){for(var e=Xd-1;Pa.charAt(e)===" "||Pa.charAt(e)==="	";)e--;if(Pa.charAt(e)===`
`||Pa.charAt(e)===""){for(;Je!=""&&Je!=`
`;)Dr();t=!0}}if(Je==="/"&&Su()==="/"){for(;Je!=""&&Je!=`
`;)Dr();t=!0}if(Je==="/"&&Su()==="*"){for(;Je!="";)if(Je==="*"&&Su()==="/"){Dr(),Dr();break}else Dr();t=!0}for(;Je===" "||Je==="	"||Je===`
`||Je==="\r";)Dr()}while(t);if(Je===""){Vn=En.DELIMITER;return}var r=Je+Su();if(kK[r]){Vn=En.DELIMITER,Me=r,Dr(),Dr();return}if(kK[Je]){Vn=En.DELIMITER,Me=Je,Dr();return}if(TK(Je)||Je==="-"){for(Me+=Je,Dr();TK(Je);)Me+=Je,Dr();Me==="false"?Me=!1:Me==="true"?Me=!0:isNaN(Number(Me))||(Me=Number(Me)),Vn=En.IDENTIFIER;return}if(Je==='"'){for(Dr();Je!=""&&(Je!='"'||Je==='"'&&Su()==='"');)Je==='"'?(Me+=Je,Dr()):Je==="\\"&&Su()==="n"?(Me+=`
`,Dr()):Me+=Je,Dr();if(Je!='"')throw Nn('End of string " expected');Dr(),Vn=En.IDENTIFIER;return}for(Vn=En.UNKNOWN;Je!="";)Me+=Je,Dr();throw new SyntaxError('Syntax error in part "'+lae(Me,30)+'"')}function dRe(){var t={};if(lRe(),Rt(),Me==="strict"&&(t.strict=!0,Rt()),(Me==="graph"||Me==="digraph")&&(t.type=Me,Rt()),Vn===En.IDENTIFIER&&(t.id=Me,Rt()),Me!="{")throw Nn("Angle bracket { expected");if(Rt(),sae(t),Me!="}")throw Nn("Angle bracket } expected");if(Rt(),Me!=="")throw Nn("End of file expected");return Rt(),delete t.node,delete t.edge,delete t.graph,t}function sae(t){for(;Me!==""&&Me!="}";)hRe(t),Me===";"&&Rt()}function hRe(t){var e=oae(t);if(e){aae(t,e);return}var r=fRe(t);if(!r){if(Vn!=En.IDENTIFIER)throw Nn("Identifier expected");var n=Me;if(Rt(),Me==="="){if(Rt(),Vn!=En.IDENTIFIER)throw Nn("Identifier expected");t[n]=Me,Rt()}else pRe(t,n)}}function oae(t){var e=null;if(Me==="subgraph"&&(e={},e.type="subgraph",Rt(),Vn===En.IDENTIFIER&&(e.id=Me,Rt())),Me==="{"){if(Rt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,sae(e),Me!="}")throw Nn("Angle bracket } expected");Rt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function fRe(t){return Me==="node"?(Rt(),t.node=Bf(),"node"):Me==="edge"?(Rt(),t.edge=Bf(),"edge"):Me==="graph"?(Rt(),t.graph=Bf(),"graph"):null}function pRe(t,e){var r={id:e},n=Bf();n&&(r.attr=n),nae(t,r),aae(t,e)}function aae(t,e){for(;Me==="->"||Me==="--";){var r,n=Me;Rt();var i=oae(t);if(i)r=i;else{if(Vn!=En.IDENTIFIER)throw Nn("Identifier or subgraph expected");r=Me,nae(t,{id:r}),Rt()}var s=Bf(),o=iae(t,e,r,n,s);uRe(t,o),e=r}}function Bf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Me==="[";){for(Rt(),e={};Me!==""&&Me!="]";){if(Vn!=En.IDENTIFIER)throw Nn("Attribute name expected");var o=Me;if(Rt(),Me!="=")throw Nn("Equal sign = expected");if(Rt(),Vn!=En.IDENTIFIER)throw Nn("Attribute value expected");var a=Me;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),Rt(),Me==","&&Rt()}if(Me!="]")throw Nn("Bracket ] expected");Rt()}if(Ya(s).call(s,"dir")){var c={};for(c.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)c.arrows.to=t;else if(i[t].value.from!=null)c.arrows.from=t;else throw Nn("Invalid value of arrows");else i[t].name==="dir"&&(c.dir=t);var d=i[c.dir].value;if(!Ya(s).call(s,"arrows"))if(d==="both")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1,i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[c.dir].attr,name:"arrows",value:""}),c.arrows.to=i.length-1;else throw Nn('Invalid dir type "'+d+'"');var h,f;if(d==="both")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},Eo(i).call(i,c.arrows.from,1)):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="arrow",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")c.arrows.to&&c.arrows.from?(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f="",h="arrow",c.arrows.from=c.arrows.to,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{from:{enabled:!0,type:i[c.arrows.from].value.from.type}}};else if(d==="none"){var p;c.arrows.to?p=c.arrows.to:p=c.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h="",c.arrows.to=c.arrows.from,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:i[c.arrows.to].value.to.type}}};else throw Nn('Invalid dir type "'+d+'"');Eo(i).call(i,c.dir,1)}var m;if(Ya(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)cRe(i[t].attr,i[t].name,i[t].value);return e}function Nn(t){return new SyntaxError(t+', got "'+lae(Me,30)+'" (char '+Xd+")")}function lae(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function mRe(t,e,r){ur(t)?kt(t).call(t,function(n){ur(e)?kt(e).call(e,function(i){r(n,i)}):r(n,e)}):ur(e)?kt(e).call(e,function(n){r(t,n)}):r(t,e)}function VT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function OK(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];ur(i)?kt(i).call(i,function(s){VT(r,s,t[n])}):typeof i=="string"?VT(r,i,t[n]):VT(r,n,t[n])}return r}function gRe(t){var e=aRe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;kt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};il(a,OK(o.attr,rae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return il(a,OK(o.attr,B$)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};kt(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var c;kt(c=o.from.edges).call(c,function(h){var f=s(h);r.edges.push(f)})}if(mRe(a,l,function(h,f){var p=iae(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;kt(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function yRe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=Kd(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:Kd(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const vRe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},bRe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},xRe={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},wRe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},SRe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},_Re={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},ERe={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},NRe={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},CRe={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},kRe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},TRe={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var ORe=Object.freeze({__proto__:null,cn:NRe,cs:TRe,de:bRe,en:vRe,es:xRe,fr:kRe,it:wRe,nl:SRe,pt:_Re,ru:ERe,uk:CRe});function jRe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(ePe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class PRe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),c=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,c,s],[5*c,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class IRe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new PRe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var jK={},PK={},UT={exports:{}},HT,IK;function RRe(){if(IK)return HT;IK=1;var t=st();return HT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),HT}var WT,RK;function MRe(){if(RK)return WT;RK=1;var t=st(),e=Yr(),r=Hs(),n=RRe(),i=Object.isExtensible,s=t(function(){});return WT=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,WT}var KT,MK;function cae(){if(MK)return KT;MK=1;var t=st();return KT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),KT}var $K;function bb(){if($K)return UT.exports;$K=1;var t=Oe(),e=lt(),r=km(),n=Yr(),i=on(),s=Wi().f,o=fb(),a=C$(),l=MRe(),c=ob(),d=cae(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},b=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},v=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),k=0,C=E.length;k<C;k++)if(E[k]===f){S(E,k,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=UT.exports={enable:v,fastKey:g,getWeakData:b,onFreeze:y};return r[f]=!0,UT.exports}var GT,DK;function $Re(){if(DK)return GT;DK=1;var t=Or(),e=Th(),r=t("iterator"),n=Array.prototype;return GT=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},GT}var YT,AK;function uae(){if(AK)return YT;AK=1;var t=kh(),e=y$(),r=vh(),n=Th(),i=Or(),s=i("iterator");return YT=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},YT}var QT,FK;function DRe(){if(FK)return QT;FK=1;var t=oi(),e=Wo(),r=Ws(),n=wh(),i=uae(),s=TypeError;return QT=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},QT}var XT,qK;function z$(){if(qK)return XT;qK=1;var t=oi(),e=Ws(),r=y$();return XT=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},XT}var JT,LK;function xb(){if(LK)return JT;LK=1;var t=lb(),e=oi(),r=Ws(),n=wh(),i=$Re(),s=Ko(),o=Tr(),a=DRe(),l=uae(),c=z$(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return JT=function(p,m,g){var b=g&&g.that,y=!!(g&&g.AS_ENTRIES),v=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,b),_,N,E,k,C,O,j,P=function(q){return _&&c(_,"normal"),new h(!0,q)},A=function(q){return y?(r(q),x?S(q[0],q[1],P):S(q[0],q[1])):x?S(q,P):S(q)};if(v)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,k=s(p);k>E;E++)if(C=A(p[E]),C&&o(f,C))return C;return new h(!1)}_=a(p,N)}for(O=v?p.next:_.next;!(j=e(O,_)).done;){try{C=A(j.value)}catch(q){c(_,"throw",q)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},JT}var ZT,BK;function V$(){if(BK)return ZT;BK=1;var t=Tr(),e=TypeError;return ZT=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},ZT}var e2,zK;function U$(){if(zK)return e2;zK=1;var t=Oe(),e=Ht(),r=bb(),n=st(),i=Eh(),s=xb(),o=V$(),a=Gr(),l=Yr(),c=vh(),d=nu(),h=Wi().f,f=vl().forEach,p=gr(),m=iu(),g=m.set,b=m.getterFor;return e2=function(y,v,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,k={},C;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))C=w.getConstructor(v,y,x,_),r.enable();else{C=v(function(P,A){g(o(P,O),{type:y,collection:new N}),c(A)||s(A,P[_],{that:P,AS_ENTRIES:x})});var O=C.prototype,j=b(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(P){var A=P==="add"||P==="set";P in E&&!(S&&P==="clear")&&i(O,P,function(q,R){var L=j(this).collection;if(!A&&S&&!l(q))return P==="get"?void 0:!1;var D=L[P](q===0?0:q,R);return A?this:D})}),S||h(O,"size",{configurable:!0,get:function(){return j(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},e2}var t2,VK;function H$(){if(VK)return t2;VK=1;var t=Pm();return t2=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},t2}var r2,UK;function ARe(){if(UK)return r2;UK=1;var t=wi(),e=k$(),r=Or(),n=gr(),i=r("species");return r2=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},r2}var n2,HK;function dae(){if(HK)return n2;HK=1;var t=jm(),e=k$(),r=H$(),n=lb(),i=V$(),s=vh(),o=xb(),a=O$(),l=j$(),c=ARe(),d=gr(),h=bb().fastKey,f=iu(),p=f.set,m=f.getterFor;return n2={getConstructor:function(g,b,y,v){var w=g(function(E,k){i(E,x),p(E,{type:b,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(k)||o(k,E[v],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(b),_=function(E,k,C){var O=S(E),j=N(E,k),P,A;return j?j.value=C:(O.last=j={index:A=h(k,!0),key:k,value:C,previous:P=O.last,next:null,removed:!1},O.first||(O.first=j),P&&(P.next=j),d?O.size++:E.size++,A!=="F"&&(O.index[A]=j)),E},N=function(E,k){var C=S(E),O=h(k),j;if(O!=="F")return C.index[O];for(j=C.first;j;j=j.next)if(j.key===k)return j};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(E){var k=this,C=S(k),O=N(k,E);if(O){var j=O.next,P=O.previous;delete C.index[O.index],O.removed=!0,P&&(P.next=j),j&&(j.previous=P),C.first===O&&(C.first=j),C.last===O&&(C.last=P),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),j;j=j?j.next:C.first;)for(O(j.value,j.key,this);j&&j.removed;)j=j.previous},has:function(k){return!!N(this,k)}}),r(x,y?{get:function(k){var C=N(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,b,y){var v=b+" Iterator",w=m(b),x=m(v);a(g,b,function(S,_){p(this,{type:v,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(b)}},n2}var WK;function FRe(){if(WK)return PK;WK=1;var t=U$(),e=dae();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),PK}var KK;function qRe(){return KK||(KK=1,FRe()),jK}var GK={},i2,YK;function hae(){return YK||(YK=1,i2=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),i2}var s2,QK;function LRe(){if(QK)return s2;QK=1;var t=wi(),e=hae(),r=t("Map");return s2={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},s2}var XK;function BRe(){if(XK)return GK;XK=1;var t=Oe(),e=lt(),r=Wo(),n=Ho(),i=xb(),s=LRe(),o=Sh(),a=st(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,b){n(g),r(b);var y=new l,v=0;return i(g,function(w){var x=b(w,v++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),GK}var JK={},o2,ZK;function zRe(){if(ZK)return o2;ZK=1;var t=lt(),e=Nh(),r=Ki(),n=Ho(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return o2={codeAt:a(!1),charAt:a(!0)},o2}var eG;function W$(){if(eG)return JK;eG=1;var t=zRe().charAt,e=Ki(),r=iu(),n=O$(),i=j$(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),JK}var a2,tG;function VRe(){if(tG)return a2;tG=1,Oh(),qRe(),BRe(),W$();var t=Et();return a2=t.Map,a2}var l2,rG;function URe(){if(rG)return l2;rG=1;var t=VRe();return jh(),l2=t,l2}var c2,nG;function HRe(){return nG||(nG=1,c2=URe()),c2}var WRe=HRe(),K$=Le(WRe);class KRe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Sr(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&wt(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new K$,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var iG={},sG;function GRe(){if(sG)return iG;sG=1;var t=Oe();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),iG}var u2,oG;function YRe(){if(oG)return u2;oG=1,GRe();var t=Et();return u2=t.Number.isNaN,u2}var d2,aG;function QRe(){if(aG)return d2;aG=1;var t=YRe();return d2=t,d2}var h2,lG;function XRe(){return lG||(lG=1,h2=QRe()),h2}var JRe=XRe(),II=Le(JRe),cG={},f2,uG;function ZRe(){if(uG)return f2;uG=1;var t=Ht(),e=t.isFinite;return f2=Number.isFinite||function(n){return typeof n=="number"&&e(n)},f2}var dG;function eMe(){if(dG)return cG;dG=1;var t=Oe(),e=ZRe();return t({target:"Number",stat:!0},{isFinite:e}),cG}var p2,hG;function tMe(){if(hG)return p2;hG=1,eMe();var t=Et();return p2=t.Number.isFinite,p2}var m2,fG;function rMe(){if(fG)return m2;fG=1;var t=tMe();return m2=t,m2}var g2,pG;function nMe(){return pG||(pG=1,g2=rMe()),g2}var iMe=nMe(),zl=Le(iMe),mG={},gG;function sMe(){if(gG)return mG;gG=1;var t=Oe(),e=vl().some,r=Ph(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),mG}var y2,yG;function oMe(){if(yG)return y2;yG=1,sMe();var t=an();return y2=t("Array","some"),y2}var v2,vG;function aMe(){if(vG)return v2;vG=1;var t=Tr(),e=oMe(),r=Array.prototype;return v2=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},v2}var b2,bG;function lMe(){if(bG)return b2;bG=1;var t=aMe();return b2=t,b2}var x2,xG;function cMe(){return xG||(xG=1,x2=lMe()),x2}var uMe=cMe(),dMe=Le(uMe),w2={exports:{}},wG={},SG;function hMe(){if(SG)return wG;SG=1;var t=Oe(),e=gr(),r=Wi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),wG}var _G;function fMe(){if(_G)return w2.exports;_G=1,hMe();var t=Et(),e=t.Object,r=w2.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),w2.exports}var S2,EG;function fae(){if(EG)return S2;EG=1;var t=fMe();return S2=t,S2}var _2,NG;function pMe(){if(NG)return _2;NG=1;var t=fae();return _2=t,_2}var E2,CG;function mMe(){if(CG)return E2;CG=1;var t=pMe();return E2=t,E2}var N2,kG;function gMe(){return kG||(kG=1,N2=mMe()),N2}var yMe=gMe(),vMe=Le(yMe),TG={},OG;function bMe(){if(OG)return TG;OG=1;var t=Or(),e=Wi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),TG}var jG={},PG;function xMe(){return PG||(PG=1,moe()),jG}var IG={},RG;function wMe(){return RG||(RG=1,goe()),IG}var MG={},$G;function SMe(){if($G)return MG;$G=1;var t=Zt();return t("metadata"),MG}var C2,DG;function _Me(){if(DG)return C2;DG=1;var t=woe();return bMe(),xMe(),wMe(),SMe(),C2=t,C2}var AG={},k2,FG;function pae(){if(FG)return k2;FG=1;var t=wi(),e=lt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return k2=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},k2}var qG;function EMe(){if(qG)return AG;qG=1;var t=Oe(),e=pae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),AG}var LG={},T2,BG;function mae(){if(BG)return T2;BG=1;for(var t=_h(),e=wi(),r=lt(),n=Cm(),i=Or(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return T2=function(g){if(o&&o(g))return!0;try{for(var b=l(g),y=0,v=a(c),w=v.length;y<w;y++)if(c[v[y]]==b)return!0}catch{}return!1},T2}var zG;function NMe(){if(zG)return LG;zG=1;var t=Oe(),e=mae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),LG}var VG={},UG;function CMe(){if(UG)return VG;UG=1;var t=Zt();return t("customMatcher"),VG}var HG={},WG;function kMe(){if(WG)return HG;WG=1;var t=Zt();return t("observable"),HG}var KG={},GG;function TMe(){if(GG)return KG;GG=1;var t=Oe(),e=pae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),KG}var YG={},QG;function OMe(){if(QG)return YG;QG=1;var t=Oe(),e=mae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),YG}var XG={},JG;function jMe(){if(JG)return XG;JG=1;var t=Zt();return t("matcher"),XG}var ZG={},eY;function PMe(){if(eY)return ZG;eY=1;var t=Zt();return t("metadataKey"),ZG}var tY={},rY;function IMe(){if(rY)return tY;rY=1;var t=Zt();return t("patternMatch"),tY}var nY={},iY;function RMe(){if(iY)return nY;iY=1;var t=Zt();return t("replaceAll"),nY}var O2,sY;function MMe(){if(sY)return O2;sY=1;var t=_Me();return EMe(),NMe(),CMe(),kMe(),TMe(),OMe(),jMe(),PMe(),IMe(),RMe(),O2=t,O2}var j2,oY;function $Me(){return oY||(oY=1,j2=MMe()),j2}var DMe=$Me(),Fg=Le(DMe),P2,aY;function AMe(){if(aY)return P2;aY=1,Oh(),W$(),yoe();var t=pb();return P2=t.f("iterator"),P2}var I2,lY;function FMe(){if(lY)return I2;lY=1;var t=AMe();return jh(),I2=t,I2}var R2,cY;function qMe(){if(cY)return R2;cY=1;var t=FMe();return R2=t,R2}var M2,uY;function LMe(){if(uY)return M2;uY=1;var t=qMe();return M2=t,M2}var $2,dY;function BMe(){return dY||(dY=1,$2=LMe()),$2}var zMe=BMe(),VMe=Le(zMe);function Mp(t){"@babel/helpers - typeof";return Mp=typeof Fg=="function"&&typeof VMe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Fg=="function"&&e.constructor===Fg&&e!==Fg.prototype?"symbol":typeof e},Mp(t)}var D2,hY;function UMe(){if(hY)return D2;hY=1,voe();var t=pb();return D2=t.f("toPrimitive"),D2}var A2,fY;function HMe(){if(fY)return A2;fY=1;var t=UMe();return A2=t,A2}var F2,pY;function WMe(){if(pY)return F2;pY=1;var t=HMe();return F2=t,F2}var q2,mY;function KMe(){if(mY)return q2;mY=1;var t=WMe();return q2=t,q2}var L2,gY;function GMe(){return gY||(gY=1,L2=KMe()),L2}var YMe=GMe(),QMe=Le(YMe);function XMe(t,e){if(Mp(t)!="object"||!t)return t;var r=t[QMe];if(r!==void 0){var n=r.call(t,e);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JMe(t){var e=XMe(t,"string");return Mp(e)=="symbol"?e:e+""}function go(t,e,r){return(e=JMe(e))in t?vMe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var yY={},B2,vY;function ZMe(){if(vY)return B2;vY=1;var t=Ht(),e=st(),r=lt(),n=Ki(),i=_oe().trim,s=P$(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,c=l&&l.iterator,d=1/a(s+"-0")!==-1/0||c&&!e(function(){a(Object(c))});return B2=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,B2}var bY;function e$e(){if(bY)return yY;bY=1;var t=Oe(),e=ZMe();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),yY}var z2,xY;function t$e(){if(xY)return z2;xY=1,e$e();var t=Et();return z2=t.parseFloat,z2}var V2,wY;function r$e(){if(wY)return V2;wY=1;var t=t$e();return V2=t,V2}var U2,SY;function n$e(){return SY||(SY=1,U2=r$e()),U2}var i$e=n$e(),gae=Le(i$e),_Y={},EY;function s$e(){if(EY)return _Y;EY=1;var t=Oe(),e=st(),r=C$().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),_Y}var H2,NY;function o$e(){if(NY)return H2;NY=1,s$e();var t=Et(),e=t.Object;return H2=function(n){return e.getOwnPropertyNames(n)},H2}var W2,CY;function a$e(){if(CY)return W2;CY=1;var t=o$e();return W2=t,W2}var K2,kY;function l$e(){return kY||(kY=1,K2=a$e()),K2}var c$e=l$e(),u$e=Le(c$e),G2,TY;function d$e(){if(TY)return G2;TY=1,poe();var t=Et();return G2=t.Object.getOwnPropertySymbols,G2}var Y2,OY;function h$e(){if(OY)return Y2;OY=1;var t=d$e();return Y2=t,Y2}var Q2,jY;function f$e(){return jY||(jY=1,Q2=h$e()),Q2}var p$e=f$e(),sl=Le(p$e),X2={exports:{}},PY={},IY;function m$e(){if(IY)return PY;IY=1;var t=Oe(),e=st(),r=vs(),n=ab().f,i=gr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),PY}var RY;function g$e(){if(RY)return X2.exports;RY=1,m$e();var t=Et(),e=t.Object,r=X2.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),X2.exports}var J2,MY;function y$e(){if(MY)return J2;MY=1;var t=g$e();return J2=t,J2}var Z2,$Y;function v$e(){return $Y||($Y=1,Z2=y$e()),Z2}var b$e=v$e(),bl=Le(b$e),DY={},AY;function x$e(){if(AY)return DY;AY=1;var t=Oe(),e=gr(),r=HOe(),n=vs(),i=ab(),s=db();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),DY}var eO,FY;function w$e(){if(FY)return eO;FY=1,x$e();var t=Et();return eO=t.Object.getOwnPropertyDescriptors,eO}var tO,qY;function S$e(){if(qY)return tO;qY=1;var t=w$e();return tO=t,tO}var rO,LY;function _$e(){return LY||(LY=1,rO=S$e()),rO}var E$e=_$e(),ol=Le(E$e),nO={exports:{}},BY={},zY;function N$e(){if(zY)return BY;zY=1;var t=Oe(),e=gr(),r=N$().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),BY}var VY;function C$e(){if(VY)return nO.exports;VY=1,N$e();var t=Et(),e=t.Object,r=nO.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),nO.exports}var iO,UY;function k$e(){if(UY)return iO;UY=1;var t=C$e();return iO=t,iO}var sO,HY;function T$e(){return HY||(HY=1,sO=k$e()),sO}var O$e=T$e(),wb=Le(O$e),oO,WY;function j$e(){return WY||(WY=1,oO=fae()),oO}var P$e=j$e(),Sb=Le(P$e);function G$(t,e){const r=["node","edge","label"];let n=!0;const i=ca(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(wt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=ca(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function RI(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function Xv(t){return typeof t=="string"&&t!==""}function yae(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var aO,KY;function I$e(){if(KY)return aO;KY=1,Oh();var t=an();return aO=t("Array","values"),aO}var lO,GY;function R$e(){if(GY)return lO;GY=1;var t=I$e();return lO=t,lO}var cO,YY;function M$e(){if(YY)return cO;YY=1,jh();var t=kh(),e=on(),r=Tr(),n=R$e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return cO=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},cO}var uO,QY;function $$e(){return QY||(QY=1,uO=M$e()),uO}var D$e=$$e(),vae=Le(D$e);class A$e{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=Sr({},vae(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};Sr(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const F$e={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class XY{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=F$e[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class q$e{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let c=0;return o!==""&&(c=this.ctx.measureText(o).width),{width:c,values:l}};this.lines=new A$e(s)}process(e){if(!Xv(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.splitStringIntoLines(c,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.lines.append(c,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new XY(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new XY(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Ps(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Ps(o).call(o,0,a),r),i[0]=Ps(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=Ps(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=Ps(i).call(i,o)}}}}const rf=["bold","ital","boldital","mono"];class sd{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),Xv(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(tt(rf,r=>{this.fontOptions[r]={}}),sd.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}tt(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=ca(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=ca(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=ca(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=ca(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=ca(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=ca(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),It(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=G$("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};sd.parseFontString(s,i)&&(i=s),tt(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(wt(rf).call(rf,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(sd.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<rf.length;++n){const i=rf[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);tt(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let c=0;c<a.blocks.length;c++){const d=a.blocks[c];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=$i(i,o),s=$i(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,c,d){return c==="normal"?d==="mod"?"":l[d]:l[c][d]!==void 0?l[c][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new q$e(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class ou{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Rm(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let L$e=class extends ou{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),noe(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class Y$ extends ou{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),S$(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let B$e=class extends Y${constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class z$e extends Y${constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class xl extends ou{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),iOe(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const c=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,c,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function JY(t,e){var r=or(t);if(sl){var n=sl(t);e&&(n=Wn(n).call(n,function(i){return bl(t,i).enumerable})),r.push.apply(r,n)}return r}function V$e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=JY(Object(i),!0)).call(r,function(s){go(t,s,i[s])}):ol?wb(t,ol(i)):kt(n=JY(Object(i))).call(n,function(s){Sb(t,s,bl(i,s))})}return t}class U$e extends xl{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:V$e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class H$e extends ou{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),ioe(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let W$e=class extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class K$e extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class ZY extends ou{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),_I(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class G$e extends ou{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let Y$e=class extends Y${constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const c=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:c)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=$i(f,o.opacity),p=$i(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Rm(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class Q$e extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class X$e extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class J$e extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class Z$e extends ou{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let eDe=class extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class tDe extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function eQ(t,e){var r=or(t);if(sl){var n=sl(t);e&&(n=Wn(n).call(n,function(i){return bl(t,i).enumerable})),r.push.apply(r,n)}return r}function tQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=eQ(Object(i),!0)).call(r,function(s){go(t,s,i[s])}):ol?wb(t,ol(i)):kt(n=eQ(Object(i))).call(n,function(s){Sb(t,s,bl(i,s))})}return t}class Vt{constructor(e,r,n,i,s,o){this.options=Xa(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new sd(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;wt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=wt(r=this.edges).call(r,e);if(n!=-1){var i;Eo(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");Vt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ss(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ss(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=gae(e.value)),Vt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=G$("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&Vt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(Vt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Wn(i=u$e(r)).call(i,c=>r[c]!=null);l.push("font"),Yv(l,e,a),e.color=TI(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(Yv(["color","fixed","shadow"],e,r,n),Vt.checkMass(r),e.opacity!==void 0&&(Vt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(Vt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!Vt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Pi(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=TI(r.color);Xoe(e.color,a)}else n===!0&&r.color===null&&(e.color=Xa(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Xa(i.font)),Vt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Pi(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=$i(e.borderColor,r),e.color=$i(e.color,r),e.shadowColor=$i(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),Vt.updateGroupOptions(this.options,tQ(tQ({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new L$e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new B$e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new z$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new U$e(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new H$e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new W$e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new K$e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new ZY(this.options,this.body,this.labelModule);break;case"icon":this.shape=new G$e(this.options,this.body,this.labelModule);break;case"image":this.shape=new Y$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new Q$e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new X$e(this.options,this.body,this.labelModule);break;case"star":this.shape=new J$e(this.options,this.body,this.labelModule);break;case"text":this.shape=new Z$e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new eDe(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new tDe(this.options,this.body,this.labelModule);break;default:this.shape=new ZY(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&RI(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),RI(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",tae),e.mass=1}}}class rDe{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=ie(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,c){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(c-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Xa(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",ie(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",ie(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{tt(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(Vt.parseOptions(this.options,e),e.opacity!==void 0&&(II(e.opacity)||!zl(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of or(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(Yse("id",e))this.body.data.nodes=e;else if(ur(e))this.body.data.nodes=new Wd,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Wd;else throw new TypeError("Array or DataSet expected");if(n&&tt(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;tt(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const c=r[o];l!==void 0?l.setOptions(c)&&(s=!0):(s=!0,l=this.create(c),i[a]=l)}!s&&n!==void 0&&(s=dMe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;tt(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(ur(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),No(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var rQ={},nQ;function nDe(){if(nQ)return rQ;nQ=1;var t=Oe(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,c=0,d=arguments.length,h=0,f,p;c<d;)f=r(arguments[c++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),rQ}var dO,iQ;function iDe(){if(iQ)return dO;iQ=1,nDe();var t=Et();return dO=t.Math.hypot,dO}var hO,sQ;function sDe(){if(sQ)return hO;sQ=1;var t=iDe();return hO=t,hO}var fO,oQ;function oDe(){return oQ||(oQ=1,fO=sDe()),fO}var aDe=oDe(),lDe=Le(aDe);class fr{static transform(e,r){ur(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],c=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*c,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let cDe=class extends fr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class uDe extends fr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class dDe{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class hDe{static draw(e,r){const n={x:-.4,y:0};fr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class fDe{static draw(e,r){const n={x:-.3,y:0};fr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class pDe{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class mDe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class gDe{static draw(e,r){const n={x:-.4,y:0};return fr.transform(n,r),S$(e,n.x,n.y,r.length*.4),!0}}class yDe{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class vDe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class bDe{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class xDe{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class bae{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return cDe.draw(e,r);case"circle":return gDe.draw(e,r);case"box":return vDe.draw(e,r);case"crow":return dDe.draw(e,r);case"curve":return hDe.draw(e,r);case"diamond":return bDe.draw(e,r);case"inv_curve":return fDe.draw(e,r);case"triangle":return pDe.draw(e,r);case"inv_triangle":return mDe.draw(e,r);case"bar":return yDe.draw(e,r);case"vee":return xDe.draw(e,r);case"arrow":default:return uDe.draw(e,r)}}}function aQ(t,e){var r=or(t);if(sl){var n=sl(t);e&&(n=Wn(n).call(n,function(i){return bl(t,i).enumerable})),r.push.apply(r,n)}return r}function lQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=aQ(Object(i),!0)).call(r,function(s){go(t,s,i[s])}):ol?wb(t,ol(i)):kt(n=aQ(Object(i))).call(n,function(s){Sb(t,s,bl(i,s))})}return t}class xae{constructor(e,r,n){go(this,"color",{}),go(this,"colorDirty",!0),go(this,"hoverWidth",1.5),go(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=ur(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)soe(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Ps(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=yae(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,c=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const b=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,b)+m,v=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-v;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<c);return lQ(lQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=$i(this.from.options.color.border,r.opacity),s=$i(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?$i(this.to.options.color.border,r.opacity):$i(this.from.options.color.border,r.opacity)}else return $i(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,c=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,c]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-c)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,c=a*a+l*l;let d=((s-e)*a+(o-r)*l)/c;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,c,d,h,f,p;const m=o.width;r==="from"?(c=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(c=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(c=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(c!=d){const w=lDe(c.x-d.x,c.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(c,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(c.y-d.y,c.x-d.x),l=this._findBorderPosition(c,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),N=this.getPoint(.5-S,n);a=Math.atan2(_.y-N.y,_.x-N.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:-1});a=E.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=E}else if(r==="to"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:1});a=E.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=E}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const b=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:b,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,bae.draw(e,s)&&(this.enableShadow(e,r),Rm(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=ur(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function cQ(t,e){var r=or(t);if(sl){var n=sl(t);e&&(n=Wn(n).call(n,function(i){return bl(t,i).enumerable})),r.push.apply(r,n)}return r}function uQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=cQ(Object(i),!0)).call(r,function(s){go(t,s,i[s])}):ol?wb(t,ol(i)):kt(n=cQ(Object(i))).call(n,function(s){Sb(t,s,bl(i,s))})}return t}class Q$ extends xae{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,c=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(c=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(c.y-d.y,c.x-d.x),g=c.distanceToBorder(r,m)+f,b=Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)),y=g-b;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return uQ(uQ({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,c,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(c=this._getDistanceToLine(m,g,f,p,s,o),l=c<l?c:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class dQ extends Q${constructor(e,r,n){super(e,r,n),go(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class hQ extends Q${constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class wDe extends Q${constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let c=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,b=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(d,h,g,b,s,o);c=y<c?y:c}d=g,h=b}return c}}class fQ extends wDe{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class pQ extends xae{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),c=e.distanceToBorder(r,s),d=(l-c)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class Ja{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Xa(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new sd(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;Ja.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=gae(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=G$("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Rh(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(zl(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(zl(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Xv(r.label)?e.label=r.label:Xv(e.label)||(e.label=void 0),Pi(e,r,"smooth",i),Pi(e,r,"shadow",i),Pi(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=uc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Pi(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=uc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=wt(a).call(a,"to")!=-1,e.arrows.middle.enabled=wt(a).call(a,"middle")!=-1,e.arrows.from.enabled=wt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Pi(e.arrows,r.arrows,"to",i.arrows),Pi(e.arrows,r.arrows,"middle",i.arrows),Pi(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Im(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=uc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=nd(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)It(l,i.color,!1,n);else for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&delete l[c];if(nd(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let c=!1;a.color!==void 0&&(l.color=a.color,c=!0),a.highlight!==void 0&&(l.highlight=a.highlight,c=!0),a.hover!==void 0&&(l.hover=a.hover,c=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),c===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Xa(i.color));n===!0&&r.font===null&&(e.font=Xa(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof dQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof fQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof hQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof pQ&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new dQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new fQ(this.options,this.body,this.labelModule):this.edgeType=new hQ(this.options,this.body,this.labelModule):this.edgeType=new pQ(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=yae(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();RI(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class SDe{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=ie(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const c=1/(o-s);return Math.max(0,(l-s)*c)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},It(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],c=e.body.data.edges.get(a);if(c!=null){const d=c.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",ie(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",ie(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{tt(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){Ja.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(Yse("id",e))this.body.data.edges=e;else if(ur(e))this.body.data.edges=new Wd,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Wd;else throw new TypeError("Array or DataSet expected");if(n&&tt(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){tt(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;tt(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){tt(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new Ja(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];tt(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];kt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class wae{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=vb("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let b=1;b<i;b++){const y=e[r[b]],v=y.x,w=y.y;y.options.mass>0&&(v<s&&(s=v),v>a&&(a=v),w<o&&(o=w),w>l&&(l=w))}const c=Math.abs(a-s)-Math.abs(l-o);c>0?(o-=.5*c,l+=.5*c):(s+=.5*c,a-=.5*c);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let b=0;b<i;b++)n=e[r[b]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class _De{constructor(e,r,n){this._rng=vb("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=c[d[g]];for(let b=g+1;b<d.length;b++)l=c[d[b]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class EDe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const c=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<c?m=-Math.pow(p*f,2)+Math.pow(p*c,2):m=0,f!==0&&(m=m/f);const g=d*m,b=h*m;n[o.id].x-=g,n[o.id].y-=b,n[l.id].x+=g,n[l.id].y+=b}}}}}class pO{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,c=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=c),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=c)}}class NDe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=c[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let b=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];b+=p[S].x,y+=p[S].y}const v=b/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=v,p[S].y-=w}}}class uy{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const c=o[l];i=s[c],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class CDe extends wae{constructor(e,r,n){super(e,r,n),this._rng=vb("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,c=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=c}}class kDe extends uy{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class TDe{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},Sr(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Yv(["stabilization"],this.options,e),Pi(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||II(r.x))&&(r.x=0),(typeof r.y!="number"||II(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new CDe(this.body,this.physicsBody,e),this.edgesSolver=new pO(this.body,this.physicsBody,e),this.gravitySolver=new kDe(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new _De(this.body,this.physicsBody,e),this.edgesSolver=new pO(this.body,this.physicsBody,e),this.gravitySolver=new uy(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new EDe(this.body,this.physicsBody,e),this.edgesSolver=new NDe(this.body,this.physicsBody,e),this.gravitySolver=new uy(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new wae(this.body,this.physicsBody,e),this.edgesSolver=new pO(this.body,this.physicsBody,e),this.gravitySolver=new uy(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=ie(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=Hv();this.physicsTick(),(Hv()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&No(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=or(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,No(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;No(ie(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),c=Math.min(Math.max(5,l),15),d=3*c,h=OI((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=c,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,bae.draw(e,{type:"arrow",point:f,angle:p,length:d}),Rm(e).call(e)}}}const Xr=[];for(let t=0;t<256;++t)Xr.push((t+256).toString(16).slice(1));function ODe(t,e=0){return(Xr[t[e+0]]+Xr[t[e+1]]+Xr[t[e+2]]+Xr[t[e+3]]+"-"+Xr[t[e+4]]+Xr[t[e+5]]+"-"+Xr[t[e+6]]+Xr[t[e+7]]+"-"+Xr[t[e+8]]+Xr[t[e+9]]+"-"+Xr[t[e+10]]+Xr[t[e+11]]+Xr[t[e+12]]+Xr[t[e+13]]+Xr[t[e+14]]+Xr[t[e+15]]).toLowerCase()}let mO;const jDe=new Uint8Array(16);function PDe(){if(!mO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mO=crypto.getRandomValues.bind(crypto)}return mO(jDe)}const IDe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var mQ={randomUUID:IDe};function RDe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??PDe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ODe(n)}function zf(t,e,r){return mQ.randomUUID&&!t?mQ.randomUUID():RDe(t)}class kn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(It(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):It(n,e.options,!0),n}}class MDe extends Vt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],tt(r.edges,n=>{delete this.containedEdges[n.id]}),tt(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},tt(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},tt(r.edges,n=>{tt(this.edges,i=>{var s,o;const a=wt(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(tt(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),Eo(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class $De{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Sr(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};tt(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,tt(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let c=0;c<this.body.nodeIndices.length;c++){const d={},h={},f=this.body.nodeIndices[c],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(b){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=kn.cloneOptions(b);return r.joinCondition(y)};let g=!0;for(let b=0;b<a.length;b++){o=a[b];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(or(d).length>0&&or(h).length>0&&g===!0){const y=function(){for(let v=0;v<i.length;++v)for(const w in d)if(i[v].nodes[w]!==void 0)return i[v]}();if(y!==void 0){for(const v in d)y.nodes[v]===void 0&&(y.nodes[v]=d[v]);for(const v in h)y.edges[v]===void 0&&(y.edges[v]=h[v])}else i.push({nodes:d,edges:h})}}}}for(let c=0;c<i.length;c++)this._cluster(i[c].nodes,i[c].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,c=kn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=kn.cloneOptions(this.body.nodes[p]);r.joinCondition(c,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=Kd(n=or(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];wt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,c,d;const h=or(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let b=0;b<a.edges.length;b++)s=a.edges[b],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,c=s.fromId,d=c):(l=s.toId,c=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:c,toId:l}))}const p=[],m=function(g){for(let b=0;b<p.length;b++){const y=p[b],v=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(v||w)return y}return null};for(let g=0;g<f.length;g++){const b=f[g],y=b.edge;let v=m(b);v===null?(v=this._createClusteredEdge(b.fromId,b.toId,y,i),p.push(v)):v.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=v.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(or(e).length==0||or(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=It({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=kn.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=kn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+zf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const c=this.body.functions.createNode(o,MDe);c.containedNodes=e,c.containedEdges=r,c.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=c,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=or(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=wt(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else tt(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const c=[];for(let d=0;d<i.edges.length;d++)c.push(i.edges[d]);for(let d=0;d<c.length;d++){const h=c[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],b=this.body.edges[g];if(b!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[b.id]=b,delete l[b.id];let v=b.fromId,w=b.toId;b.toId==f?w=p.clusterId:v=p.clusterId,this._createClusteredEdge(v,w,b,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(b)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),cc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return cc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const c=l.clusteringEdgeReplacingIds;if(c===void 0)i.push(a);else for(let d=0;d<c.length;++d){const h=c[d];wt(r).call(r,c)!==-1||wt(n).call(n,c)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const c=this.body.nodes[this.body.nodeIndices[l]];c.edges.length>i&&(i=c.edges.length),e+=c.edges.length,r+=Math.pow(c.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=kn.cloneOptions(n,"edge");It(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+zf(),s!==void 0&&It(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof Ja){const s=r,o={};o[s.id]=s,r=o}if(e instanceof Vt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return tt(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{tt(this.body.nodes,c=>{c.isCluster===!0&&l(c)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let c=0;c<r.length;c++)delete l.containedNodes[r[c]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];tt(this.clusteredEdges,l=>{const c=this.body.edges[l];(c===void 0||!c.endPointsValid())&&(n[l]=l)}),i(function(l){tt(l.containedEdges,(c,d)=>{!c.endPointsValid()&&!n[d]&&(n[d]=d)})}),tt(this.body.edges,(l,c)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;tt(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[c]=c)}),i(l=>{tt(n,c=>{delete l.containedEdges[c],tt(l.edges,(d,h)=>{if(d.id===c){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),tt(n,l=>{delete this.clusteredEdges[l]}),tt(n,l=>{delete this.body.edges[l]});const s=or(this.body.edges);tt(s,l=>{const c=this.body.edges[l],d=this._isClusteredNode(c.fromId)||this._isClusteredNode(c.toId);if(d!==this._isClusteredEdge(c.id))if(d){const h=this._getClusterNodeForNode(c.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[c.fromId],c,h);const f=this._getClusterNodeForNode(c.toId);f!==void 0&&this._clusterEdges(this.body.nodes[c.toId],c,f)}else delete this._clusterEdges[l],this._restoreEdge(c)});let o=!1,a=!0;for(;a;){const l=[];i(function(c){const d=or(c.containedNodes).length,h=c.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(c.id)});for(let c=0;c<l.length;++c)this.openCluster(l[c],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class DDe{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=No(()=>{var r;this.zooming=!1,ie(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",ie(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&Rh(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(ie(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,c=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:c.y,left:c.x,bottom:d.y,right:d.x},f=[];for(let b=0;b<i.length;b++)if(s=n[i[b]],s.hover)a.push(i[b]);else if(s.isSelected())o.push(i[b]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const b=s.draw(e);b.drawExternalLabel!=null&&f.push(b.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const b=s.draw(e);b.drawExternalLabel!=null&&f.push(b.drawExternalLabel)}return{drawExternalLabels:()=>{for(const b of f)b()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var gO,gQ;function ADe(){if(gQ)return gO;gQ=1,Coe();var t=Et();return gO=t.setInterval,gO}var yO,yQ;function FDe(){return yQ||(yQ=1,yO=ADe()),yO}var qDe=FDe(),LDe=Le(qDe);function Jv(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function Sae(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class BDe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",ie(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&Rh(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=LDe(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=ie(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;kt(e=cc(r=Eo(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(wt(e).call(e,"%")!==-1||wt(e).call(e,"px")!==-1)return e;if(wt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new id(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:id.DIRECTION_ALL}),Jv(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new id(this.frame),Sae(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function zDe(t,e){const r=Sr({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!ur(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class VDe{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",ie(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",ie(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=zDe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=kn.getRange(this.body.nodes,e.nodes);else if(r===!0){let c=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(c+=1);if(c>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=kn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=kn.getRange(this.body.nodes,e.nodes);const c=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/c,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:kn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!zl(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!zl(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!zl(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!zl(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=ie(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=ie(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=XIe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=ie(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function vQ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){c(d,"keydown")},l=function(d){c(d,"keyup")},c=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class UDe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new id(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;Jv(a,ie(n=this._fit).call(n,this))}else{var i;Jv(a,ie(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new id(this.canvas.frame);Sae(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=ie(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=vQ({container:window,preventDefault:!0}):this.keycharm=vQ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,c,d,h,f,p,m,g,b,y,v,w,x,S,_,N,E;ie(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),ie(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),ie(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),ie(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),ie(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ie(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ie(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ie(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ie(c=this.keycharm).call(c,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ie(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ie(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ie(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ie(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),ie(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),ie(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),ie(b=this.keycharm).call(b,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),ie(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ie(v=this.keycharm).call(v,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ie(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ie(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ie(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ie(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ie(N=this.keycharm).call(N,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ie(E=this.keycharm).call(E,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class HDe{constructor(e,r,n){var i,s,o,a,l,c,d,h,f,p,m,g,b;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new UDe(e,r),this.body.eventListeners.onTap=ie(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=ie(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=ie(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=ie(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=ie(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=ie(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=ie(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=ie(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=ie(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=ie(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=ie(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=ie(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=ie(b=this.getPointer).call(b,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(Yv(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Pi(this.options,e,"keyboard"),e.tooltip&&(Sr(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=TI(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-KIe(this.canvas.frame.canvas),y:e.y-GIe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];wt(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Sr({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;kt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Wn(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});kt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(kt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const c=this.canvas.canvasToDOM(i);this.drag.pointer.x=c.x,this.drag.pointer.y=c.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=No(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,c=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=c[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,c=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=c[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new sRe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var bQ={},xQ={},wQ;function WDe(){if(wQ)return xQ;wQ=1;var t=U$(),e=dae();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),xQ}var SQ;function KDe(){return SQ||(SQ=1,WDe()),bQ}var _Q={},vO,EQ;function au(){if(EQ)return vO;EQ=1;var t=wh(),e=TypeError;return vO=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},vO}var bO,NQ;function lu(){if(NQ)return bO;NQ=1;var t=wi(),e=hae(),r=t("Set"),n=r.prototype;return bO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},bO}var xO,CQ;function cu(){if(CQ)return xO;CQ=1;var t=oi();return xO=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},xO}var wO,kQ;function qm(){if(kQ)return wO;kQ=1;var t=cu();return wO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},wO}var SO,TQ;function X$(){if(TQ)return SO;TQ=1;var t=lu(),e=qm(),r=t.Set,n=t.add;return SO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},SO}var _O,OQ;function Lm(){return OQ||(OQ=1,_O=function(t){return t.size}),_O}var EO,jQ;function GDe(){return jQ||(jQ=1,EO=function(t){return{iterator:t,next:t.next,done:!1}}),EO}var NO,PQ;function uu(){if(PQ)return NO;PQ=1;var t=Wo(),e=Ws(),r=oi(),n=Nh(),i=GDe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},NO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},NO}var CO,IQ;function YDe(){if(IQ)return CO;IQ=1;var t=au(),e=lu(),r=X$(),n=Lm(),i=uu(),s=qm(),o=cu(),a=e.has,l=e.remove;return CO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},CO}var kO,RQ;function du(){return RQ||(RQ=1,kO=function(){return!1}),kO}var MQ;function QDe(){if(MQ)return _Q;MQ=1;var t=Oe(),e=YDe(),r=st(),n=du(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),_Q}var $Q={},TO,DQ;function XDe(){if(DQ)return TO;DQ=1;var t=au(),e=lu(),r=Lm(),n=uu(),i=qm(),s=cu(),o=e.Set,a=e.add,l=e.has;return TO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},TO}var AQ;function JDe(){if(AQ)return $Q;AQ=1;var t=Oe(),e=st(),r=XDe(),n=du(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),$Q}var FQ={},OO,qQ;function ZDe(){if(qQ)return OO;qQ=1;var t=au(),e=lu().has,r=Lm(),n=uu(),i=qm(),s=cu(),o=z$();return OO=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},OO}var LQ;function eAe(){if(LQ)return FQ;LQ=1;var t=Oe(),e=ZDe(),r=du(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),FQ}var BQ={},jO,zQ;function tAe(){if(zQ)return jO;zQ=1;var t=au(),e=Lm(),r=qm(),n=uu();return jO=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},jO}var VQ;function rAe(){if(VQ)return BQ;VQ=1;var t=Oe(),e=tAe(),r=du(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),BQ}var UQ={},PO,HQ;function nAe(){if(HQ)return PO;HQ=1;var t=au(),e=lu().has,r=Lm(),n=uu(),i=cu(),s=z$();return PO=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},PO}var WQ;function iAe(){if(WQ)return UQ;WQ=1;var t=Oe(),e=nAe(),r=du(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),UQ}var KQ={},IO,GQ;function sAe(){if(GQ)return IO;GQ=1;var t=au(),e=lu(),r=X$(),n=uu(),i=cu(),s=e.add,o=e.has,a=e.remove;return IO=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},IO}var RO,YQ;function _ae(){return YQ||(YQ=1,RO=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),RO}var QQ;function oAe(){if(QQ)return KQ;QQ=1;var t=Oe(),e=sAe(),r=_ae(),n=du(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),KQ}var XQ={},MO,JQ;function aAe(){if(JQ)return MO;JQ=1;var t=au(),e=lu().add,r=X$(),n=uu(),i=cu();return MO=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},MO}var ZQ;function lAe(){if(ZQ)return XQ;ZQ=1;var t=Oe(),e=aAe(),r=_ae(),n=du(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),XQ}var $O,eX;function cAe(){if(eX)return $O;eX=1,Oh(),KDe(),QDe(),JDe(),eAe(),rAe(),iAe(),oAe(),lAe(),W$();var t=Et();return $O=t.Set,$O}var DO,tX;function uAe(){if(tX)return DO;tX=1;var t=cAe();return jh(),DO=t,DO}var AO,rX;function dAe(){return rX||(rX=1,AO=uAe()),AO}var hAe=dAe(),pa=Le(hAe),nX={},iX={},FO,sX;function fAe(){if(sX)return FO;sX=1;var t=lt(),e=H$(),r=bb().getWeakData,n=V$(),i=Ws(),s=vh(),o=Yr(),a=xb(),l=vl(),c=on(),d=iu(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),b=0,y=function(x){return x.frozen||(x.frozen=new v)},v=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return v.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},FO={getConstructor:function(x,S,_,N){var E=x(function(j,P){n(j,k),h(j,{type:S,id:b++,frozen:null}),s(P)||a(P,j[N],{that:j,AS_ENTRIES:_})}),k=E.prototype,C=f(S),O=function(j,P,A){var q=C(j),R=r(i(P),!0);return R===!0?y(q).set(P,A):R[q.id]=A,j};return e(k,{delete:function(j){var P=C(this);if(!o(j))return!1;var A=r(j);return A===!0?y(P).delete(j):A&&c(A,P.id)&&delete A[P.id]},has:function(P){var A=C(this);if(!o(P))return!1;var q=r(P);return q===!0?y(A).has(P):q&&c(q,A.id)}}),e(k,_?{get:function(P){var A=C(this);if(o(P)){var q=r(P);if(q===!0)return y(A).get(P);if(q)return q[A.id]}},set:function(P,A){return O(this,P,A)}}:{add:function(P){return O(this,P,!0)}}),E}},FO}var oX;function pAe(){if(oX)return iX;oX=1;var t=cae(),e=Ht(),r=lt(),n=H$(),i=bb(),s=U$(),o=fAe(),a=Yr(),l=iu().enforce,c=st(),d=doe(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,b=h.freeze,y=h.seal,v=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(j){return function(){return j(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,N=r(_.set),E=function(){return t&&c(function(){var j=b([]);return N(new S,j,1),!m(j)})};if(d)if(v){w=o.getConstructor(x,"WeakMap",!0),i.enable();var k=r(_.delete),C=r(_.has),O=r(_.get);n(_,{delete:function(j){if(a(j)&&!p(j)){var P=l(this);return P.frozen||(P.frozen=new w),k(this,j)||P.frozen.delete(j)}return k(this,j)},has:function(P){if(a(P)&&!p(P)){var A=l(this);return A.frozen||(A.frozen=new w),C(this,P)||A.frozen.has(P)}return C(this,P)},get:function(P){if(a(P)&&!p(P)){var A=l(this);return A.frozen||(A.frozen=new w),C(this,P)?O(this,P):A.frozen.get(P)}return O(this,P)},set:function(P,A){if(a(P)&&!p(P)){var q=l(this);q.frozen||(q.frozen=new w),C(this,P)?N(this,P,A):q.frozen.set(P,A)}else N(this,P,A);return this}})}else E()&&n(_,{set:function(P,A){var q;return f(P)&&(m(P)?q=b:g(P)&&(q=y)),N(this,P,A),q&&q(P),this}});return iX}var aX;function mAe(){return aX||(aX=1,pAe()),nX}var qO,lX;function gAe(){if(lX)return qO;lX=1,Oh(),mAe();var t=Et();return qO=t.WeakMap,qO}var LO,cX;function yAe(){if(cX)return LO;cX=1;var t=gAe();return jh(),LO=t,LO}var BO,uX;function vAe(){return uX||(uX=1,BO=yAe()),BO}var bAe=vAe(),Bm=Le(bAe);function Vf(t,e,r){xAe(t,e),e.set(t,r)}function xAe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function MI(t,e,r){return t.set(Eae(t,e),r),r}function Pt(t,e){return t.get(Eae(t,e))}function Eae(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function dX(t,e){const r=new pa;for(const n of e)t.has(n)||r.add(n);return r}var _u=new Bm,Ji=new Bm;class hX{constructor(){Vf(this,_u,new pa),Vf(this,Ji,new pa)}get size(){return Pt(Ji,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Pt(Ji,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Pt(Ji,this).delete(i)}clear(){Pt(Ji,this).clear()}getSelection(){return[...Pt(Ji,this)]}getChanges(){return{added:[...dX(Pt(_u,this),Pt(Ji,this))],deleted:[...dX(Pt(Ji,this),Pt(_u,this))],previous:[...new pa(Pt(_u,this))],current:[...new pa(Pt(Ji,this))]}}commit(){const e=this.getChanges();MI(_u,this,Pt(Ji,this)),MI(Ji,this,new pa(Pt(_u,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var _l=new Bm,El=new Bm,zO=new Bm;class wAe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Vf(this,_l,new hX),Vf(this,El,new hX),Vf(this,zO,void 0),MI(zO,this,e)}get sizeNodes(){return Pt(_l,this).size}get sizeEdges(){return Pt(El,this).size}getNodes(){return Pt(_l,this).getSelection()}getEdges(){return Pt(El,this).getSelection()}addNodes(){Pt(_l,this).add(...arguments)}addEdges(){Pt(El,this).add(...arguments)}deleteNodes(e){Pt(_l,this).delete(e)}deleteEdges(e){Pt(El,this).delete(e)}clear(){Pt(_l,this).clear(),Pt(El,this).clear()}commit(){const e={nodes:Pt(_l,this).commit(),edges:Pt(El,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Pt(zO,this).call(this,e,...n),e}}class SAe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new wAe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Sr(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&Rh(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof Vt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],c=o[l];if(c.connected){const d=c.from.x,h=c.from.y,f=c.to.x,p=c.to.y,m=c.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof Vt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof Vt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof Vt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof Vt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof Vt&&n.id!=s||n instanceof Ja)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof Ja&&n.id!=s||n instanceof Vt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=or(this.hoverObj.edges).length,o=or(this.hoverObj.nodes).length,a=n instanceof Ja&&s===0&&o===0,l=n instanceof Vt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof Vt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return Kd(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return Kd(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var fX={},VO,pX;function _Ae(){if(pX)return VO;pX=1;var t=Ch(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return VO=r,VO}var UO,mX;function EAe(){if(mX)return UO;mX=1;var t=bh(),e=t.match(/firefox\/(\d+)/i);return UO=!!e&&+e[1],UO}var HO,gX;function NAe(){if(gX)return HO;gX=1;var t=bh();return HO=/MSIE|Trident/.test(t),HO}var WO,yX;function CAe(){if(yX)return WO;yX=1;var t=bh(),e=t.match(/AppleWebKit\/(\d+)\./);return WO=!!e&&+e[1],WO}var vX;function kAe(){if(vX)return fX;vX=1;var t=Oe(),e=lt(),r=Wo(),n=Si(),i=Ko(),s=Soe(),o=Ki(),a=st(),l=_Ae(),c=Ph(),d=EAe(),h=NAe(),f=Nm(),p=CAe(),m=[],g=e(m.sort),b=e(m.push),y=a(function(){m.sort(void 0)}),v=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,k,C,O;for(E=65;E<76;E++){switch(k=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(j,P){return P.v-j.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=y||!v||!w||!x,_=function(N){return function(E,k){return k===void 0?-1:E===void 0?1:N!==void 0?+N(E,k)||0:o(E)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var k=n(this);if(x)return E===void 0?g(k):g(k,E);var C=[],O=i(k),j,P;for(P=0;P<O;P++)P in k&&b(C,k[P]);for(l(C,_(E)),j=i(C),P=0;P<j;)k[P]=C[P++];for(;P<O;)s(k,P++);return k}}),fX}var KO,bX;function TAe(){if(bX)return KO;bX=1,kAe();var t=an();return KO=t("Array","sort"),KO}var GO,xX;function OAe(){if(xX)return GO;xX=1;var t=Tr(),e=TAe(),r=Array.prototype;return GO=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},GO}var YO,wX;function jAe(){if(wX)return YO;wX=1;var t=OAe();return YO=t,YO}var QO,SX;function PAe(){return SX||(SX=1,QO=jAe()),QO}var IAe=PAe(),od=Le(IAe),_X={},XO,EX;function RAe(){if(EX)return XO;EX=1;var t=Wo(),e=Si(),r=sb(),n=Ko(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,b=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=b;break}if(g+=b,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=b)g in p&&(h=c(h,p[g],g,f));return h}};return XO={left:o(!1),right:o(!0)},XO}var JO,NX;function MAe(){if(NX)return JO;NX=1;var t=Eoe();return JO=t==="NODE",JO}var CX;function $Ae(){if(CX)return _X;CX=1;var t=Oe(),e=RAe().left,r=Ph(),n=Nm(),i=MAe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),_X}var ZO,kX;function DAe(){if(kX)return ZO;kX=1,$Ae();var t=an();return ZO=t("Array","reduce"),ZO}var ej,TX;function AAe(){if(TX)return ej;TX=1;var t=Tr(),e=DAe(),r=Array.prototype;return ej=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},ej}var tj,OX;function FAe(){if(OX)return tj;OX=1;var t=AAe();return tj=t,tj}var rj,jX;function qAe(){return jX||(jX=1,rj=FAe()),rj}var LAe=qAe(),Nae=Le(LAe);class Cae{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class BAe extends Cae{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){od(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class zAe extends Cae{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){od(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var PX={},IX;function VAe(){if(IX)return PX;IX=1;var t=Oe(),e=vl().every,r=Ph(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),PX}var nj,RX;function UAe(){if(RX)return nj;RX=1,VAe();var t=an();return nj=t("Array","every"),nj}var ij,MX;function HAe(){if(MX)return ij;MX=1;var t=Tr(),e=UAe(),r=Array.prototype;return ij=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},ij}var sj,$X;function WAe(){if($X)return sj;$X=1;var t=HAe();return sj=t,sj}var oj,DX;function KAe(){return DX||(DX=1,oj=WAe()),oj}var GAe=KAe(),kae=Le(GAe);function YAe(t,e){const r=new pa;return kt(t).call(t,n=>{var i;kt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),kt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function QAe(t){return Tae(e=>{var r,n;return kae(r=Wn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function XAe(t){return Tae(e=>{var r,n;return kae(r=Wn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function Tae(t,e,r,n){var i;const s=uc(null),o=Nae(i=[...vae(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var c,d;if(!n.has(h))continue;const b=s[g.id]+l;if(kt(c=Wn(d=g.edges).call(d,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(c,y=>{const v=y[a],w=s[v];(w==null||e(b,w))&&(s[v]=b,p.push(y[r]))}),m>o)return YAe(n,s);++m}}return s}class JAe{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new K$;let n=0;const i=od(e=[...new pa(fPe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return or(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class ZAe{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+Hv()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(Rh(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Pi(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),It(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=vb(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const c=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(c==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const c=this.body.nodes[e[l]];c.predefinedPosition===!1&&(c.x+=(.5-this._rng())*a,c.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=kn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=kn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new JAe;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let v=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;v+=x+this.options.hierarchical.treeSpacing,s(w+1,v)}},s=(y,v)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,v)},o=()=>{const y=[];for(let v=0;v<this.hierarchical.numTrees();v++)y.push(this.direction.getTreeSize(v));return y},a=(y,v)=>{if(!v[y.id]&&(v[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],v)}},l=function(y){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const N in y)if(Object.prototype.hasOwnProperty.call(y,N)){const E=e.body.nodes[N],k=e.hierarchical.levels[E.id],C=e.direction.getPosition(E),[O,j]=e._getSpaceAroundNode(E,y);w=Math.min(O,w),x=Math.min(j,x),k<=v&&(S=Math.min(C,S),_=Math.max(C,_))}return[S,_,w,x]},c=(y,v)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(v.id);return Math.min(w,x)},d=(y,v,w)=>{const x=this.hierarchical;for(let S=0;S<v.length;S++){const _=v[S],N=x.distributionOrdering[_];if(N.length>1)for(let E=0;E<N.length-1;E++){const k=N[E],C=N[E+1];x.hasSameParent(k,C)&&x.inSameSubNetwork(k,C)&&y(k,C,w)}}},h=function(y,v){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(v),_=Math.abs(S-x),N=e.options.hierarchical.nodeSpacing;if(_>N){const E={},k={};a(y,E),a(v,k);const C=c(y,v),O=l(E,C),j=l(k,C),P=O[1],A=j[0],q=j[2];if(Math.abs(P-A)>N){let L=P-A+N;L<-q+N&&(L=-q+N),L<0&&(e._shiftBlock(v.id,L),r=!0,w===!0&&e._centerParent(v))}}},f=(y,v)=>{const w=v.id,x=v.edges,S=this.hierarchical.levels[v.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,N={},E=[];for(let q=0;q<x.length;q++){const R=x[q];if(R.toId!=R.fromId){const L=R.toId==w?R.from:R.to;N[x[q].id]=L,this.hierarchical.levels[L.id]<S&&E.push(R)}}const k=(q,R)=>{let L=0;for(let D=0;D<R.length;D++)if(N[R[D].id]!==void 0){const W=this.direction.getPosition(N[R[D].id])-q;L+=W/Math.sqrt(W*W+_)}return L},C=(q,R)=>{let L=0;for(let D=0;D<R.length;D++)if(N[R[D].id]!==void 0){const W=this.direction.getPosition(N[R[D].id])-q;L-=_*Math.pow(W*W+_,-1.5)}return L},O=(q,R)=>{let L=this.direction.getPosition(v);const D={};for(let W=0;W<q;W++){const z=k(L,R),H=C(L,R),K=40,he=Math.max(-K,Math.min(K,Math.round(z/H)));if(L=L-he,D[L]!==void 0)break;D[L]=W}return L},j=q=>{const R=this.direction.getPosition(v);if(n[v.id]===void 0){const K={};a(v,K),n[v.id]=K}const L=l(n[v.id]),D=L[2],W=L[3],z=q-R;let H=0;z>0?H=Math.min(z,W-this.options.hierarchical.nodeSpacing):z<0&&(H=-Math.min(-z,D-this.options.hierarchical.nodeSpacing)),H!=0&&(this._shiftBlock(v.id,H),r=!0)},P=q=>{const R=this.direction.getPosition(v),[L,D]=this._getSpaceAroundNode(v),W=q-R;let z=R;W>0?z=Math.min(R+(D-this.options.hierarchical.nodeSpacing),q):W<0&&(z=Math.max(R-(L-this.options.hierarchical.nodeSpacing),q)),z!==R&&(this.direction.setPosition(v,z),r=!0)};let A=O(y,E);j(A),A=O(y,x),P(A)},p=y=>{let v=this.hierarchical.getLevels();v=cc(v).call(v);for(let w=0;w<y;w++){r=!1;for(let x=0;x<v.length;x++){const S=v[x],_=this.hierarchical.distributionOrdering[S];for(let N=0;N<_.length;N++)f(1e3,_[N])}if(r!==!0)break}},m=y=>{let v=this.hierarchical.getLevels();v=cc(v).call(v);for(let w=0;w<y&&(r=!1,d(h,v,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},b=()=>{let y=this.hierarchical.getLevels();y=cc(y).call(y);for(let v=0;v<y.length;v++){const w=y[v],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&b(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,c=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);c=Math.min(c,h-o)}}return[l,c]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[c,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=or(e[n]);i=this._indexArrayToNodes(i),od(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let c=l*s;s>0&&(c=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,c,n),this._validatePositionAndContinue(a,n,c),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);od(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],c=this.hierarchical.levels[l.id];if(c>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,c),this._validatePositionAndContinue(l,c,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return tt(e.edges,n=>{var i;wt(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;tt(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return tt(e,i=>{n.push(Number(i))}),od(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;tt(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(kn.cloneOptions(i,"node"),kn.cloneOptions(s,"node"),kn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=Nae(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new K$);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=XAe(r):this.hierarchical.levels=QAe(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let c=0;c<l.length;c++){const d=l[c];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new BAe(this):this.direction=new zAe(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class eFe{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Sr(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",ie(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",ie(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,It(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,ie(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",ie(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,ie(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",ie(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=It({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,ie(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",ie(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",ie(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",ie(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",ie(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",ie(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,ie(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",ie(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",ie(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",ie(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",ie(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",c=>{const d=o.edgeType.findBorderPositions(c);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=It({},this.options.controlNodeStyle);n.id="targetNode"+zf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},la(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,ie(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(la(this.editModeDiv),la(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of Eo(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),la(this.manipulationDiv),la(this.editModeDiv),la(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ie(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ie(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ie(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ie(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,ie(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ie(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Im(or(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new id(e,{});Jv(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=wt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;Eo(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=wt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;Eo(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=Sr({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=Sr({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+zf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(wt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(wt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:zf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const le="string",re="boolean",U="number",pf="array",ke="object",Oae="dom",tFe="any",aj=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],lj={borderWidth:{number:U},borderWidthSelected:{number:U,undefined:"undefined"},brokenImage:{string:le,undefined:"undefined"},chosen:{label:{boolean:re,function:"function"},node:{boolean:re,function:"function"},__type__:{object:ke,boolean:re}},color:{border:{string:le},background:{string:le},highlight:{border:{string:le},background:{string:le},__type__:{object:ke,string:le}},hover:{border:{string:le},background:{string:le},__type__:{object:ke,string:le}},__type__:{object:ke,string:le}},opacity:{number:U,undefined:"undefined"},fixed:{x:{boolean:re},y:{boolean:re},__type__:{object:ke,boolean:re}},font:{align:{string:le},color:{string:le},size:{number:U},face:{string:le},background:{string:le},strokeWidth:{number:U},strokeColor:{string:le},vadjust:{number:U},multi:{boolean:re,string:le},bold:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},boldital:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},ital:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},mono:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},__type__:{object:ke,string:le}},group:{string:le,number:U,undefined:"undefined"},heightConstraint:{minimum:{number:U},valign:{string:le},__type__:{object:ke,boolean:re,number:U}},hidden:{boolean:re},icon:{face:{string:le},code:{string:le},size:{number:U},color:{string:le},weight:{string:le,number:U},__type__:{object:ke}},id:{string:le,number:U},image:{selected:{string:le,undefined:"undefined"},unselected:{string:le,undefined:"undefined"},__type__:{object:ke,string:le}},imagePadding:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:ke,number:U}},label:{string:le,undefined:"undefined"},labelHighlightBold:{boolean:re},level:{number:U,undefined:"undefined"},margin:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:ke,number:U}},mass:{number:U},physics:{boolean:re},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:re},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:ke,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:ke}},shadow:{enabled:{boolean:re},color:{string:le},size:{number:U},x:{number:U},y:{number:U},__type__:{object:ke,boolean:re}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:re,array:pf},borderRadius:{number:U},interpolation:{boolean:re},useImageSize:{boolean:re},useBorderWithImage:{boolean:re},coordinateOrigin:{string:["center","top-left"]},__type__:{object:ke}},size:{number:U},title:{string:le,dom:Oae,undefined:"undefined"},value:{number:U,undefined:"undefined"},widthConstraint:{minimum:{number:U},maximum:{number:U},__type__:{object:ke,boolean:re,number:U}},x:{number:U},y:{number:U},__type__:{object:ke}},rFe={configure:{enabled:{boolean:re},filter:{boolean:re,string:le,array:pf,function:"function"},container:{dom:Oae},showButton:{boolean:re},__type__:{object:ke,boolean:re,string:le,array:pf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:re},scaleFactor:{number:U},type:{string:aj},imageHeight:{number:U},imageWidth:{number:U},src:{string:le},__type__:{object:ke,boolean:re}},middle:{enabled:{boolean:re},scaleFactor:{number:U},type:{string:aj},imageWidth:{number:U},imageHeight:{number:U},src:{string:le},__type__:{object:ke,boolean:re}},from:{enabled:{boolean:re},scaleFactor:{number:U},type:{string:aj},imageWidth:{number:U},imageHeight:{number:U},src:{string:le},__type__:{object:ke,boolean:re}},__type__:{string:["from","to","middle"],object:ke}},endPointOffset:{from:{number:U},to:{number:U},__type__:{object:ke,number:U}},arrowStrikethrough:{boolean:re},background:{enabled:{boolean:re},color:{string:le},size:{number:U},dashes:{boolean:re,array:pf},__type__:{object:ke,boolean:re}},chosen:{label:{boolean:re,function:"function"},edge:{boolean:re,function:"function"},__type__:{object:ke,boolean:re}},color:{color:{string:le},highlight:{string:le},hover:{string:le},inherit:{string:["from","to","both"],boolean:re},opacity:{number:U},__type__:{object:ke,string:le}},dashes:{boolean:re,array:pf},font:{color:{string:le},size:{number:U},face:{string:le},background:{string:le},strokeWidth:{number:U},strokeColor:{string:le},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:U},multi:{boolean:re,string:le},bold:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},boldital:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},ital:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},mono:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},__type__:{object:ke,string:le}},hidden:{boolean:re},hoverWidth:{function:"function",number:U},label:{string:le,undefined:"undefined"},labelHighlightBold:{boolean:re},length:{number:U,undefined:"undefined"},physics:{boolean:re},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:re},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:ke,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:ke}},selectionWidth:{function:"function",number:U},selfReferenceSize:{number:U},selfReference:{size:{number:U},angle:{number:U},renderBehindTheNode:{boolean:re},__type__:{object:ke}},shadow:{enabled:{boolean:re},color:{string:le},size:{number:U},x:{number:U},y:{number:U},__type__:{object:ke,boolean:re}},smooth:{enabled:{boolean:re},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:U},forceDirection:{string:["horizontal","vertical","none"],boolean:re},__type__:{object:ke,boolean:re}},title:{string:le,undefined:"undefined"},width:{number:U},widthConstraint:{maximum:{number:U},__type__:{object:ke,boolean:re,number:U}},value:{number:U,undefined:"undefined"},__type__:{object:ke}},groups:{useDefaultGroups:{boolean:re},__any__:lj,__type__:{object:ke}},interaction:{dragNodes:{boolean:re},dragView:{boolean:re},hideEdgesOnDrag:{boolean:re},hideEdgesOnZoom:{boolean:re},hideNodesOnDrag:{boolean:re},hover:{boolean:re},keyboard:{enabled:{boolean:re},speed:{x:{number:U},y:{number:U},zoom:{number:U},__type__:{object:ke}},bindToWindow:{boolean:re},autoFocus:{boolean:re},__type__:{object:ke,boolean:re}},multiselect:{boolean:re},navigationButtons:{boolean:re},selectable:{boolean:re},selectConnectedEdges:{boolean:re},hoverConnectedEdges:{boolean:re},tooltipDelay:{number:U},zoomView:{boolean:re},zoomSpeed:{number:U},__type__:{object:ke}},layout:{randomSeed:{undefined:"undefined",number:U,string:le},improvedLayout:{boolean:re},clusterThreshold:{number:U},hierarchical:{enabled:{boolean:re},levelSeparation:{number:U},nodeSpacing:{number:U},treeSpacing:{number:U},blockShifting:{boolean:re},edgeMinimization:{boolean:re},parentCentralization:{boolean:re},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:ke,boolean:re}},__type__:{object:ke}},manipulation:{enabled:{boolean:re},initiallyActive:{boolean:re},addNode:{boolean:re,function:"function"},addEdge:{boolean:re,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:ke,boolean:re,function:"function"}},deleteNode:{boolean:re,function:"function"},deleteEdge:{boolean:re,function:"function"},controlNodeStyle:lj,__type__:{object:ke,boolean:re}},nodes:lj,physics:{enabled:{boolean:re},barnesHut:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:ke}},forceAtlas2Based:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:ke}},repulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},__type__:{object:ke}},hierarchicalRepulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:ke}},maxVelocity:{number:U},minVelocity:{number:U},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:re},iterations:{number:U},updateInterval:{number:U},onlyDynamicEdges:{boolean:re},fit:{boolean:re},__type__:{object:ke,boolean:re}},timestep:{number:U},adaptiveTimestep:{boolean:re},wind:{x:{number:U},y:{number:U},__type__:{object:ke}},__type__:{object:ke,boolean:re}},autoResize:{boolean:re},clickToUse:{boolean:re},locale:{string:le},locales:{__any__:{any:tFe},__type__:{object:ke}},height:{string:le},width:{string:le},__type__:{object:ke}},jae={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},nFe=(t,e,r)=>{var n;return!!(Ya(t).call(t,"physics")&&Ya(n=jae.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class iFe{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],c={};i[l]=c;for(let d=0;d<r.length;d++)c[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],c=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],b=Math.min(f[m],f[l]+c[m]);f[m]=b,g[h]=b}}}return i}}class sFe{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new iFe}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),c=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<c;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const c=r[l];if(n[c].predefinedPosition!==!0||n[c].isCluster===!0&&e===!0||n[c].options.fixed.x!==!0||n[c].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(c);i<d&&(i=d,s=c,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const c=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,N=s[S].y,E=h[S],k=f[S],C=1/((c-_)**2+(d-N)**2)**1.5;o+=E*(1-k*(d-N)**2*C),a+=E*(k*(c-_)*(d-N)*C),l+=E*(1-k*(c-_)**2*C)}}const p=o,m=a,g=r,b=l,y=n,v=(g/p+y/m)/(m/p-b/m),w=-(m*v+g)/p;s[e].x+=w,s[e].y+=v,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let c=n;c<e.length;c++){const d=e[c];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][c]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][c],a+=this.E_matrix[i][c][0],l+=this.E_matrix[i][c][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let c=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],b=n[f].x,y=n[f].y,v=1/Math.sqrt((a-b)**2+(l-y)**2),w=s[f]*(a-b-o[f]*(a-b)*v),x=s[f]*(l-y-o[f]*(l-y)*v);i[h]=[w,x],c+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[c,d]}}function Ee(t,e,r){var n,i,s,o;if(!(this instanceof Ee))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:ORe,clickToUse:!1},Sr(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:ie(n=this.on).call(n,this),off:ie(i=this.off).call(i,this),emit:ie(s=this.emit).call(s,this),once:ie(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new IRe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new KRe,this.canvas=new BDe(this.body),this.selectionHandler=new SAe(this.body,this.canvas),this.interactionHandler=new HDe(this.body,this.canvas,this.selectionHandler),this.view=new VDe(this.body,this.canvas),this.renderer=new DDe(this.body,this.canvas),this.physics=new TDe(this.body),this.layoutEngine=new ZAe(this.body),this.clustering=new $De(this.body),this.manipulation=new eFe(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new rDe(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new SDe(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new sFe(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}ooe(Ee.prototype);Ee.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(oRe.validate(t,rFe)===!0&&console.error("%cErrors have been found in the supplied options object.",tae),Rh(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=jRe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new iRe(this,this.body.container,jae,this.canvas.pixelRatio,nFe)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};It(n.nodes,this.nodesHandler.options),It(n.edges,this.edgesHandler.options),It(n.layout,this.layoutEngine.options),It(n.interaction,this.selectionHandler.options),It(n.interaction,this.renderer.options),It(n.interaction,this.interactionHandler.options),It(n.manipulation,this.manipulation.options),It(n.physics,this.physics.options),It(n.global,this.canvas.options),It(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new nRe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};Ee.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};Ee.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};Ee.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=gRe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=yRe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};Ee.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];la(this.body.container)};Ee.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};Ee.prototype.isActive=function(){return!this.activator||this.activator.active};Ee.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};Ee.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};Ee.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};Ee.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};Ee.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};Ee.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};Ee.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};Ee.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};Ee.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};Ee.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};Ee.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};Ee.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};Ee.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};Ee.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};Ee.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};Ee.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};Ee.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};Ee.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};Ee.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};Ee.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};Ee.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};Ee.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};Ee.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};Ee.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};Ee.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};Ee.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};Ee.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};Ee.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};Ee.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};Ee.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};Ee.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};Ee.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};Ee.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};Ee.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};Ee.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};Ee.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};Ee.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};Ee.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};Ee.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};Ee.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Ee.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Ee.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};Ee.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};Ee.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};Ee.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};Ee.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};Ee.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};Ee.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};Ee.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};Ee.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};Ee.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};Ee.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function oFe({graphData:t,startPersonId:e,onNodeClick:r}){const n=T.useRef(null),i=T.useRef(null),s=vn(),o=T.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);T.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new Wd(t.nodes),h=new Wd(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new Ee(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),b={},y=new Set;m.forEach(([v,w])=>{if(y.has(v)||y.has(w))return;const x=g[v],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;b[v]={x:_-60,y:x.y},b[w]={x:_+60,y:S.y},y.add(v),y.add(w)}),Object.entries(b).forEach(([v,w])=>{p.moveNode(v,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},c=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[u.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:u.jsx(zfe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:u.jsx(Vfe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:u.jsx(dte,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),u.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const aFe=["parent","child","spouse","lover","partner"];function lFe(t){return aFe.includes(t==null?void 0:t.toLowerCase())}function cFe(t){return(t==null?void 0:t.toLowerCase())==="parent"}function uFe(t){return(t==null?void 0:t.toLowerCase())==="child"}function dFe(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function hFe(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var v,w,x,S;let p=h.name||((v=h.title)==null?void 0:v.rendered)||h.title||`Person ${f}`;if(p&&typeof p=="string"&&typeof document<"u"){const _=document.createElement("textarea");_.innerHTML=p,p=_.value}let m=null,g=((w=h.acf)==null?void 0:w.birth_date)||null;if(g){const _=new Date(g);isNaN(_.getTime())||(m=Math.floor((new Date-_)/(365.25*24*60*60*1e3)))}let b="";switch((x=h.acf)==null?void 0:x.gender){case"male":b="";break;case"female":b="";break;case"non_binary":case"other":case"prefer_not_to_say":b="";break}let y="";if(g)try{const _=new Date(g);if(!isNaN(_.getTime())){const N=String(_.getDate()).padStart(2,"0"),E=String(_.getMonth()+1).padStart(2,"0"),k=_.getFullYear();y=`${N}-${E}-${k}`}}catch{}return{id:f,name:p,gender:((S=h.acf)==null?void 0:S.gender)||"",genderSymbol:b,photo:h.thumbnail||null,age:m,birthDate:g,formattedBirthDate:y}}const c=o.get(t);for(c&&n.set(t,l(c,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!lFe(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const b=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===b||`${w.from}-${w.to}`===y)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(cFe(w))i.push({from:g,to:h,type:"parent-child"});else if(uFe(w))i.push({from:h,to:g,type:"parent-child"});else if(dFe(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function fFe(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(b=>{s.set(b.id,[]),o.set(b.id,[]),a.set(b.id,[])}),i.forEach(b=>{var y,v,w,x;b.type==="parent-child"?((y=s.get(b.to))==null||y.push(b.from),(v=o.get(b.from))==null||v.push(b.to)):b.type==="spouse"&&((w=a.get(b.from))==null||w.push(b.to),(x=a.get(b.to))==null||x.push(b.from))});const l=new Map,c=new Set,d=[{id:e,generation:0}];for(l.set(e,0),c.add(e);d.length>0;){const{id:b,generation:y}=d.shift(),v=s.get(b)||[];for(const S of v)c.has(S)||(c.add(S),l.set(S,y-1),d.push({id:S,generation:y-1}));const w=o.get(b)||[];for(const S of w)c.has(S)||(c.add(S),l.set(S,y+1),d.push({id:S,generation:y+1}));const x=a.get(b)||[];for(const S of x)c.has(S)||(c.add(S),l.set(S,y),d.push({id:S,generation:y}))}n.forEach(b=>{l.has(b.id)||l.set(b.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((b,y)=>{f.set(y,b-h)});function p(b,y,v=!1){const w=b?b.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2):"?";let x,S;v?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(b=>{const y=f.get(b.id)||0,v=b.id===e,w=r[b.id]||!1;let x=b.name;w&&(x=b.name+" ");let S=[x],_="";b.genderSymbol&&(_+=b.genderSymbol+" "),b.age!==null&&(_+=b.age+" "),b.formattedBirthDate&&(_+=b.formattedBirthDate),_.trim()&&S.push(_.trim());const N=b.photo||p(b.name,v,w);let E="#d1d5db";return v?E="#f59e0b":w&&(E="#9ca3af"),{id:b.id,label:S.join(`
`),level:y,shape:"circularImage",image:N,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:E,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:v?3:2,data:{...b,isDeceased:w}}}),g=i.map((b,y)=>{const v=b.type==="spouse";return{id:`edge-${y}`,from:b.from,to:b.to,arrows:{to:{enabled:!1}},color:{color:v?"#ec4899":"#9ca3af",highlight:v?"#db2777":"#6b7280"},width:2,dashes:v?[5,5]:!1,smooth:!1,length:v?50:300}});return{nodes:m,edges:g}}function pFe(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var c,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((c=o.relationship_type)==null?void 0:c.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function mFe(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function gFe(){var p,m;const{id:t}=Vs(),e=vn(),r=parseInt(t,10),{data:n,isLoading:i}=zc(t),{data:s=[],isLoading:o}=Bc(),{data:a=[]}=ut({queryKey:["relationship-types"],queryFn:async()=>(await Ke.getRelationshipTypes()).data}),l=T.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),c=TP({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await Fe.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=T.useMemo(()=>{const g={};return c.forEach((b,y)=>{if(b.data&&l[y]){const v=l[y],w=b.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[v]=w}}),g},[c,l]);An(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=T.useMemo(()=>{if(!n||!s.length)return null;try{const g=pFe(s);a.length>0&&mFe(g,a);const b=hFe(r,s,g);return!b||b.nodes.length===0?null:fFe(b,r,d)}catch(g){return console.error("Error building family tree:",g),null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?u.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ti,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),u.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),u.jsx("div",{className:"card p-6",children:u.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?u.jsx(oFe,{graphData:h,startPersonId:r,onNodeClick:f}):u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),u.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function yFe(){const{loginUrl:t,isLoggedIn:e}=BR();return vte(),T.useEffect(()=>{e||(window.location.href=t)},[e,t]),u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function vFe({children:t}){const{data:e,isLoading:r,error:n}=ut({queryKey:["current-user"],queryFn:async()=>(await Fe.getCurrentUser()).data,retry:!1});return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Mo,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Mo,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function bFe({children:t}){const{isLoggedIn:e,isLoading:r}=BR();return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?u.jsx(vFe,{children:t}):u.jsx(vee,{to:"/login",replace:!0})}function xFe(){return u.jsxs(RA,{children:[u.jsx(mt,{path:"/login",element:u.jsx(yFe,{})}),u.jsx(mt,{path:"/*",element:u.jsx(bFe,{children:u.jsx(dpe,{children:u.jsxs(RA,{children:[u.jsx(mt,{path:"/",element:u.jsx(aSe,{})}),u.jsx(mt,{path:"/people",element:u.jsx(cSe,{})}),u.jsx(mt,{path:"/people/new",element:u.jsx(aq,{})}),u.jsx(mt,{path:"/people/:personId/contact/new",element:u.jsx(cq,{})}),u.jsx(mt,{path:"/people/:personId/contact/:index/edit",element:u.jsx(cq,{})}),u.jsx(mt,{path:"/people/:personId/address/new",element:u.jsx(dq,{})}),u.jsx(mt,{path:"/people/:personId/address/:index/edit",element:u.jsx(dq,{})}),u.jsx(mt,{path:"/people/:personId/work-history/new",element:u.jsx(lq,{})}),u.jsx(mt,{path:"/people/:personId/work-history/:index/edit",element:u.jsx(lq,{})}),u.jsx(mt,{path:"/people/:personId/relationship/new",element:u.jsx(uq,{})}),u.jsx(mt,{path:"/people/:personId/relationship/:index/edit",element:u.jsx(uq,{})}),u.jsx(mt,{path:"/people/:id/family-tree",element:u.jsx(gFe,{})}),u.jsx(mt,{path:"/people/:id/edit",element:u.jsx(aq,{})}),u.jsx(mt,{path:"/people/:id",element:u.jsx(TSe,{})}),u.jsx(mt,{path:"/companies",element:u.jsx(ZSe,{})}),u.jsx(mt,{path:"/companies/new",element:u.jsx(hq,{})}),u.jsx(mt,{path:"/companies/:id",element:u.jsx(e_e,{})}),u.jsx(mt,{path:"/companies/:id/edit",element:u.jsx(hq,{})}),u.jsx(mt,{path:"/dates",element:u.jsx(n_e,{})}),u.jsx(mt,{path:"/dates/new",element:u.jsx(fq,{})}),u.jsx(mt,{path:"/dates/:id/edit",element:u.jsx(fq,{})}),u.jsx(mt,{path:"/todos",element:u.jsx(s_e,{})}),u.jsx(mt,{path:"/settings",element:u.jsx(o_e,{})}),u.jsx(mt,{path:"/settings/relationship-types",element:u.jsx(a_e,{})}),u.jsx(mt,{path:"/settings/import",element:u.jsx(h_e,{})}),u.jsx(mt,{path:"/settings/export",element:u.jsx(f_e,{})}),u.jsx(mt,{path:"/settings/user-approval",element:u.jsx(p_e,{})}),u.jsx(mt,{path:"*",element:u.jsx(vee,{to:"/",replace:!0})})]})})})})]})}const wFe=new Ade({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),cj=document.getElementById("root");if(!cj)console.error('Root element not found! Make sure there is a <div id="root"></div> in your HTML.');else try{uj.createRoot(cj).render(u.jsx(Ae.StrictMode,{children:u.jsx(Fde,{client:wFe,children:u.jsx(ode,{children:u.jsx(xFe,{})})})}))}catch(t){console.error("Error mounting React app:",t),cj.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
