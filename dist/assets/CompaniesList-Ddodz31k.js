import{r as l,e as _e,c as oe,j as e,L as de}from"./vendor-CjdX6t1i.js";import{g as Fe,N as Oe,O as Re,Q as Ie,X as B,P as me,B as he,l as Ee,L as pe,U as G,R as De,e as ge,k as J,j as Te,w as xe}from"./main-D6r1FXj6.js";import{A as ye,a as be,T as fe,M as qe}from"./tag-CobQv4bH.js";import{F as ue}from"./filter-Bd647nZv.js";import{S as je}from"./square-CumeHu_S.js";import"./utils-D5Yy9kBW.js";function Ve({isOpen:t,onClose:b,selectedCount:h,onSubmit:y,isLoading:i}){const[d,r]=l.useState("private");if(l.useEffect(()=>{t&&r("private")},[t]),!t)return null;const f=[{value:"private",label:"Private",description:"Only you can see these organizations",icon:pe},{value:"workspace",label:"Workspace",description:"Share with workspace members",icon:G}];return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Change Visibility"}),e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",disabled:i,children:e.jsx(B,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Select visibility for ",h," ",h===1?"organization":"organizations",":"]}),e.jsx("div",{className:"space-y-2",children:f.map(m=>{const a=m.icon,c=d===m.value;return e.jsxs("button",{type:"button",onClick:()=>r(m.value),disabled:i,className:`w-full flex items-start gap-3 p-3 rounded-lg border-2 text-left transition-colors ${c?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(a,{className:`w-5 h-5 mt-0.5 ${c?"text-primary-600":"text-gray-400"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-sm font-medium ${c?"text-primary-900":"text-gray-900"}`,children:m.label}),e.jsx("div",{className:"text-xs text-gray-500",children:m.description})]}),c&&e.jsx(J,{className:"w-5 h-5 text-primary-600 mt-0.5"})]},m.value)})})]}),e.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[e.jsx("button",{type:"button",onClick:b,className:"btn-secondary",disabled:i,children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>y(d),className:"btn-primary",disabled:i,children:i?"Applying...":`Apply to ${h} ${h===1?"organization":"organizations"}`})]})]})})}function Ue({isOpen:t,onClose:b,selectedCount:h,workspaces:y,onSubmit:i,isLoading:d}){const[r,f]=l.useState([]);if(l.useEffect(()=>{t&&f([])},[t]),!t)return null;const m=a=>{f(c=>c.includes(a)?c.filter(g=>g!==a):[...c,a])};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Assign to Workspace"}),e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",disabled:d,children:e.jsx(B,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Select workspaces for ",h," ",h===1?"organization":"organizations",":"]}),y.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(G,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No workspaces available."}),e.jsx("p",{className:"text-xs",children:"Create a workspace first to use this feature."})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:y.map(a=>{const c=r.includes(a.id);return e.jsxs("button",{type:"button",onClick:()=>m(a.id),disabled:d,className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 text-left transition-colors ${c?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded ${c?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:c&&e.jsx(J,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:[a.member_count," members"]})]})]},a.id)})})]}),e.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[e.jsx("button",{type:"button",onClick:b,className:"btn-secondary",disabled:d,children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>i(r),className:"btn-primary",disabled:d||y.length===0,children:d?"Assigning...":`Assign to ${h} ${h===1?"organization":"organizations"}`})]})]})})}function Pe({isOpen:t,onClose:b,selectedCount:h,labels:y,onSubmit:i,isLoading:d}){const[r,f]=l.useState("add"),[m,a]=l.useState([]);if(l.useEffect(()=>{t&&(f("add"),a([]))},[t]),!t)return null;const c=g=>{a(u=>u.includes(g)?u.filter(C=>C!==g):[...u,g])};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Manage Labels"}),e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",disabled:d,children:e.jsx(B,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[r==="add"?"Add":"Remove"," labels for ",h," ",h===1?"organization":"organizations",":"]}),e.jsxs("div",{className:"flex rounded-lg border border-gray-200 p-1",children:[e.jsx("button",{type:"button",onClick:()=>{f("add"),a([])},className:`flex-1 px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${r==="add"?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50"}`,children:"Add Labels"}),e.jsx("button",{type:"button",onClick:()=>{f("remove"),a([])},className:`flex-1 px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${r==="remove"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-50"}`,children:"Remove Labels"})]}),!y||y.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(fe,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No labels available."}),e.jsx("p",{className:"text-xs",children:"Create labels first to use this feature."})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:y.map(g=>{const u=m.includes(g.id);return e.jsxs("button",{type:"button",onClick:()=>c(g.id),disabled:d,className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 text-left transition-colors ${u?r==="add"?"border-primary-500 bg-primary-50":"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded ${u?r==="add"?"bg-primary-600 border-primary-600":"bg-red-600 border-red-600":"border-gray-300"}`,children:u&&e.jsx(J,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:g.name})]},g.id)})})]}),e.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[e.jsx("button",{type:"button",onClick:b,className:"btn-secondary",disabled:d,children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>i(r,m),className:r==="add"?"btn-primary":"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:d||m.length===0,children:d?r==="add"?"Adding...":"Removing...":`${r==="add"?"Add":"Remove"} ${m.length} ${m.length===1?"label":"labels"}`})]})]})})}function Ke({company:t,workspaces:b,companyLabels:h,isSelected:y,onToggleSelection:i,isOdd:d}){var c,g,u,C,j,A;const f=(((c=t.acf)==null?void 0:c._assigned_workspaces)||[]).map(o=>{const w=typeof o=="string"?parseInt(o,10):o,k=b.find(S=>S.id===w);return k==null?void 0:k.title}).filter(Boolean).join(", "),a=(t.company_label||[]).map(o=>{const w=h.find(k=>k.id===o);return w==null?void 0:w.name}).filter(Boolean);return e.jsxs("tr",{className:`hover:bg-gray-100 ${d?"bg-gray-50":"bg-white"}`,children:[e.jsx("td",{className:"pl-4 pr-2 py-3 w-10",children:e.jsx("button",{onClick:o=>{o.preventDefault(),i(t.id)},className:"text-gray-400 hover:text-gray-600",children:y?e.jsx(ge,{className:"w-5 h-5 text-primary-600"}):e.jsx(je,{className:"w-5 h-5"})})}),e.jsx("td",{className:"w-10 px-2 py-3",children:e.jsx(de,{to:`/companies/${t.id}`,className:"flex items-center justify-center",children:(C=(u=(g=t._embedded)==null?void 0:g["wp:featuredmedia"])==null?void 0:u[0])!=null&&C.source_url?e.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:"",className:"w-8 h-8 rounded-lg object-contain bg-white"}):e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(he,{className:"w-4 h-4 text-gray-400"})})})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx(de,{to:`/companies/${t.id}`,className:"text-sm font-medium text-gray-900",children:Te(t)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:((j=t.acf)==null?void 0:j.industry)||"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 truncate max-w-48",children:((A=t.acf)==null?void 0:A.website)||"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:f||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.slice(0,3).map(o=>e.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:o},o)),a.length>3&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",a.length-3," more"]})]}):"-"})]})}function $({field:t,label:b,currentSortField:h,currentSortOrder:y,onSort:i}){const d=h===t;return e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:e.jsxs("button",{onClick:()=>i(t),className:"flex items-center gap-1 hover:text-gray-700 cursor-pointer",children:[b,d&&(y==="asc"?e.jsx(ye,{className:"w-3 h-3"}):e.jsx(be,{className:"w-3 h-3"}))]})})}function Qe({companies:t,workspaces:b,companyLabels:h,selectedIds:y,onToggleSelection:i,onToggleSelectAll:d,isAllSelected:r,isSomeSelected:f,sortField:m,sortOrder:a,onSort:c}){return e.jsx("div",{className:"card overflow-x-auto max-h-[calc(100vh-12rem)] overflow-y-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{className:"shadow-sm",children:[e.jsx("th",{scope:"col",className:"pl-4 pr-2 py-3 w-10 bg-gray-50",children:e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",title:r?"Deselect all":"Select all",children:r?e.jsx(ge,{className:"w-5 h-5 text-primary-600"}):f?e.jsx(qe,{className:"w-5 h-5 text-primary-600"}):e.jsx(je,{className:"w-5 h-5"})})}),e.jsx("th",{scope:"col",className:"w-10 px-2 bg-gray-50"}),e.jsx($,{field:"name",label:"Name",currentSortField:m,currentSortOrder:a,onSort:c}),e.jsx($,{field:"industry",label:"Industry",currentSortField:m,currentSortOrder:a,onSort:c}),e.jsx($,{field:"website",label:"Website",currentSortField:m,currentSortOrder:a,onSort:c}),e.jsx($,{field:"workspace",label:"Workspace",currentSortField:m,currentSortOrder:a,onSort:c}),e.jsx($,{field:"labels",label:"Labels",currentSortField:m,currentSortOrder:a,onSort:c})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map((g,u)=>e.jsx(Ke,{company:g,workspaces:b,companyLabels:h,isSelected:y.has(g.id),onToggleSelection:i,isOdd:u%2===1},g.id))})]})})}function es(){var se,te;const[t,b]=l.useState(""),[h,y]=l.useState(!1),[i,d]=l.useState("all"),[r,f]=l.useState(""),[m,a]=l.useState(!1),[c,g]=l.useState(!1),[u,C]=l.useState("name"),[j,A]=l.useState("asc"),[o,w]=l.useState(new Set),[k,S]=l.useState(!1),[Ne,D]=l.useState(!1),[we,T]=l.useState(!1),[ve,q]=l.useState(!1),[V,L]=l.useState(!1),U=l.useRef(null),P=l.useRef(null),K=l.useRef(null),ke=_e(),{data:z=[]}=Fe(),Q=Oe(),H=(se=window.prmConfig)==null?void 0:se.userId,{data:v,isLoading:_,error:F}=oe({queryKey:["companies",t],queryFn:async()=>(await xe.getCompanies({search:t,per_page:100,_embed:!0})).data}),{data:Ce}=oe({queryKey:["company-labels"],queryFn:async()=>(await xe.getCompanyLabels()).data}),O=Ce||[],Se=Re({onSuccess:s=>{a(!1),ke(`/companies/${s.id}`)}}),ze=async s=>{g(!0);try{await Se.mutateAsync(s)}finally{g(!1)}};l.useEffect(()=>{const s=n=>{P.current&&!P.current.contains(n.target)&&U.current&&!U.current.contains(n.target)&&y(!1),K.current&&!K.current.contains(n.target)&&S(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]);const R=i!=="all"||r,Y=()=>{d("all"),f("")},Ae=s=>{w(n=>{const x=new Set(n);return x.has(s)?x.delete(s):x.add(s),x})},I=()=>w(new Set),Z=s=>{var x;return(((x=s.acf)==null?void 0:x._assigned_workspaces)||[]).map(p=>{const M=typeof p=="string"?parseInt(p,10):p,W=z.find(E=>E.id===M);return W==null?void 0:W.title}).filter(Boolean).join(", ")},ee=s=>(s.company_label||[]).map(x=>{const p=O.find(M=>M.id===x);return p==null?void 0:p.name}).filter(Boolean),X=l.useMemo(()=>{if(!v)return[];let s=[...v];return i==="mine"?s=s.filter(n=>n.author===H):i==="shared"&&(s=s.filter(n=>n.author!==H)),r&&(s=s.filter(n=>{var p;return(((p=n.acf)==null?void 0:p._assigned_workspaces)||[]).includes(parseInt(r))})),s},[v,i,r,H]),N=l.useMemo(()=>X?[...X].sort((s,n)=>{var W,E,ae,re,le,ie,ne,ce;let x,p;if(u==="name")x=(((W=s.title)==null?void 0:W.rendered)||s.title||"").toLowerCase(),p=(((E=n.title)==null?void 0:E.rendered)||n.title||"").toLowerCase();else if(u==="industry")x=(((ae=s.acf)==null?void 0:ae.industry)||"").toLowerCase(),p=(((re=n.acf)==null?void 0:re.industry)||"").toLowerCase();else if(u==="website")x=(((le=s.acf)==null?void 0:le.website)||"").toLowerCase(),p=(((ie=n.acf)==null?void 0:ie.website)||"").toLowerCase();else if(u==="workspace")x=Z(s).toLowerCase(),p=Z(n).toLowerCase();else if(u==="labels"){const $e=ee(s),Be=ee(n);x=($e[0]||"").toLowerCase(),p=(Be[0]||"").toLowerCase()}else x=(((ne=s.title)==null?void 0:ne.rendered)||s.title||"").toLowerCase(),p=(((ce=n.title)==null?void 0:ce.rendered)||n.title||"").toLowerCase();if(!x&&p)return j==="asc"?1:-1;if(x&&!p)return j==="asc"?-1:1;if(!x&&!p)return 0;const M=x.localeCompare(p);return j==="asc"?M:-M}):[],[X,u,j,z,O]),Le=N.length>0&&o.size===N.length,Me=o.size>0&&o.size<N.length,We=()=>{o.size===N.length?w(new Set):w(new Set(N.map(s=>s.id)))};return l.useEffect(()=>{w(new Set)},[i,r,v]),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 min-w-48 max-w-md",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:s=>b(s.target.value),className:"input pl-9"})]}),e.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[e.jsxs("select",{value:u,onChange:s=>C(s.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"industry",children:"Industry"}),e.jsx("option",{value:"website",children:"Website"}),e.jsx("option",{value:"workspace",children:"Workspace"}),e.jsx("option",{value:"labels",children:"Labels"})]}),e.jsx("div",{className:"h-4 w-px bg-gray-300"}),e.jsx("button",{onClick:()=>A(j==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${j==="asc"?"descending":"ascending"}`,children:j==="asc"?e.jsx(ye,{className:"w-4 h-4 text-gray-600"}):e.jsx(be,{className:"w-4 h-4 text-gray-600"})})]}),e.jsxs("div",{className:"relative",ref:U,children:[e.jsxs("button",{onClick:()=>y(!h),className:`btn-secondary ${R?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[e.jsx(ue,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Filter"}),R&&e.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:(i!=="all"?1:0)+(r?1:0)})]}),h&&e.jsx("div",{ref:P,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ownership"}),e.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Organizations"},{value:"mine",label:"My Organizations"},{value:"shared",label:"Shared with Me"}].map(s=>e.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"ownership",value:s.value,checked:i===s.value,onChange:n=>d(n.target.value),className:"sr-only"}),e.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded-full mr-3 ${i===s.value?"border-primary-600":"border-gray-300"}`,children:i===s.value&&e.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})}),e.jsx("span",{className:"text-sm text-gray-700",children:s.label})]},s.value))})]}),z.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Workspace"}),e.jsxs("select",{value:r,onChange:s=>f(s.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"All Workspaces"}),z.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),R&&e.jsx("button",{onClick:Y,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),R&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[i==="mine"?"My Organizations":"Shared with Me",e.jsx("button",{onClick:()=>d("all"),className:"hover:text-primary-600",children:e.jsx(B,{className:"w-3 h-3"})})]}),r&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[((te=z.find(s=>s.id===parseInt(r)))==null?void 0:te.title)||"Workspace",e.jsx("button",{onClick:()=>f(""),className:"hover:text-blue-600",children:e.jsx(B,{className:"w-3 h-3"})})]})]}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx(me,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]})}),_&&e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),F&&e.jsx("div",{className:"card p-6 text-center",children:e.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!_&&!F&&(v==null?void 0:v.length)===0&&e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(he,{className:"w-6 h-6 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx(me,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!_&&!F&&(v==null?void 0:v.length)>0&&(N==null?void 0:N.length)===0&&e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ue,{className:"w-6 h-6 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations match your filters"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),e.jsx("button",{onClick:Y,className:"btn-secondary",children:"Clear filters"})]}),o.size>0&&e.jsxs("div",{className:"sticky top-0 z-20 flex items-center justify-between bg-primary-50 border border-primary-200 rounded-lg px-4 py-2 shadow-sm",children:[e.jsxs("span",{className:"text-sm text-primary-800 font-medium",children:[o.size," ",o.size===1?"organization":"organizations"," selected"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",ref:K,children:[e.jsxs("button",{onClick:()=>S(!k),className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-primary-700 bg-white border border-primary-300 rounded-md hover:bg-primary-50",children:["Actions",e.jsx(Ee,{className:`w-4 h-4 transition-transform ${k?"rotate-180":""}`})]}),k&&e.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{S(!1),D(!0)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx(pe,{className:"w-4 h-4"}),"Change visibility..."]}),e.jsxs("button",{onClick:()=>{S(!1),T(!0)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx(G,{className:"w-4 h-4"}),"Assign to workspace..."]}),e.jsxs("button",{onClick:()=>{S(!1),q(!0)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx(fe,{className:"w-4 h-4"}),"Manage labels..."]})]})})]}),e.jsx("button",{onClick:I,className:"text-sm text-primary-600 hover:text-primary-800 font-medium",children:"Clear selection"})]})]}),!_&&!F&&(N==null?void 0:N.length)>0&&e.jsx(Qe,{companies:N,workspaces:z,companyLabels:O,selectedIds:o,onToggleSelection:Ae,onToggleSelectAll:We,isAllSelected:Le,isSomeSelected:Me,sortField:u,sortOrder:j,onSort:s=>{s===u?A(j==="asc"?"desc":"asc"):(C(s),A("asc"))}}),e.jsx(De,{isOpen:m,onClose:()=>a(!1),onSubmit:ze,isLoading:c}),e.jsx(Ve,{isOpen:Ne,onClose:()=>D(!1),selectedCount:o.size,onSubmit:async s=>{L(!0);try{await Q.mutateAsync({ids:Array.from(o),updates:{visibility:s}}),I(),D(!1)}finally{L(!1)}},isLoading:V}),e.jsx(Ue,{isOpen:we,onClose:()=>T(!1),selectedCount:o.size,workspaces:z,onSubmit:async s=>{L(!0);try{await Q.mutateAsync({ids:Array.from(o),updates:{assigned_workspaces:s}}),I(),T(!1)}finally{L(!1)}},isLoading:V}),e.jsx(Pe,{isOpen:ve,onClose:()=>q(!1),selectedCount:o.size,labels:O,onSubmit:async(s,n)=>{L(!0);try{const x=s==="add"?{labels_add:n}:{labels_remove:n};await Q.mutateAsync({ids:Array.from(o),updates:x}),I(),q(!1)}finally{L(!1)}},isLoading:V})]})}export{es as default};
