var KD=t=>{throw TypeError(t)};var zb=(t,e,r)=>e.has(t)||KD("Cannot "+r);var M=(t,e,r)=>(zb(t,e,"read from private field"),r?r.call(t):e.get(t)),ge=(t,e,r)=>e.has(t)?KD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),se=(t,e,r,n)=>(zb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Me=(t,e,r)=>(zb(t,e,"access private method"),r);var eg=(t,e,r,n)=>({set _(i){se(t,e,i,r)},get _(){return M(t,e,n)}});function Ole(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function yJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vJ={exports:{}},s0={},bJ={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=Symbol.for("react.element"),jle=Symbol.for("react.portal"),Ple=Symbol.for("react.fragment"),Ile=Symbol.for("react.strict_mode"),Rle=Symbol.for("react.profiler"),Mle=Symbol.for("react.provider"),Ale=Symbol.for("react.context"),Dle=Symbol.for("react.forward_ref"),$le=Symbol.for("react.suspense"),Fle=Symbol.for("react.memo"),qle=Symbol.for("react.lazy"),GD=Symbol.iterator;function Lle(t){return t===null||typeof t!="object"?null:(t=GD&&t[GD]||t["@@iterator"],typeof t=="function"?t:null)}var xJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wJ=Object.assign,SJ={};function Qd(t,e,r){this.props=t,this.context=e,this.refs=SJ,this.updater=r||xJ}Qd.prototype.isReactComponent={};Qd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _J(){}_J.prototype=Qd.prototype;function cR(t,e,r){this.props=t,this.context=e,this.refs=SJ,this.updater=r||xJ}var uR=cR.prototype=new _J;uR.constructor=cR;wJ(uR,Qd.prototype);uR.isPureReactComponent=!0;var YD=Array.isArray,EJ=Object.prototype.hasOwnProperty,dR={current:null},NJ={key:!0,ref:!0,__self:!0,__source:!0};function CJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)EJ.call(e,n)&&!NJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Vp,type:t,key:s,ref:o,props:i,_owner:dR.current}}function Ble(t,e){return{$$typeof:Vp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hR(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vp}function zle(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var QD=/\/+/g;function Vb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zle(""+t.key):e.toString(36)}function Ug(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vp:case jle:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Vb(o,0):n,YD(i)?(r="",t!=null&&(r=t.replace(QD,"$&/")+"/"),Ug(i,e,r,"",function(c){return c})):i!=null&&(hR(i)&&(i=Ble(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(QD,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",YD(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Vb(s,a);o+=Ug(s,e,r,l,i)}else if(l=Lle(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Vb(s,a++),o+=Ug(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tg(t,e,r){if(t==null)return t;var n=[],i=0;return Ug(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Vle(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $n={current:null},Hg={transition:null},Ule={ReactCurrentDispatcher:$n,ReactCurrentBatchConfig:Hg,ReactCurrentOwner:dR};function kJ(){throw Error("act(...) is not supported in production builds of React.")}Ze.Children={map:tg,forEach:function(t,e,r){tg(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return tg(t,function(){e++}),e},toArray:function(t){return tg(t,function(e){return e})||[]},only:function(t){if(!hR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ze.Component=Qd;Ze.Fragment=Ple;Ze.Profiler=Rle;Ze.PureComponent=cR;Ze.StrictMode=Ile;Ze.Suspense=$le;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ule;Ze.act=kJ;Ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=wJ({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=dR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)EJ.call(e,l)&&!NJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Vp,type:t.type,key:i,ref:s,props:n,_owner:o}};Ze.createContext=function(t){return t={$$typeof:Ale,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mle,_context:t},t.Consumer=t};Ze.createElement=CJ;Ze.createFactory=function(t){var e=CJ.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:Dle,render:t}};Ze.isValidElement=hR;Ze.lazy=function(t){return{$$typeof:qle,_payload:{_status:-1,_result:t},_init:Vle}};Ze.memo=function(t,e){return{$$typeof:Fle,type:t,compare:e===void 0?null:e}};Ze.startTransition=function(t){var e=Hg.transition;Hg.transition={};try{t()}finally{Hg.transition=e}};Ze.unstable_act=kJ;Ze.useCallback=function(t,e){return $n.current.useCallback(t,e)};Ze.useContext=function(t){return $n.current.useContext(t)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(t){return $n.current.useDeferredValue(t)};Ze.useEffect=function(t,e){return $n.current.useEffect(t,e)};Ze.useId=function(){return $n.current.useId()};Ze.useImperativeHandle=function(t,e,r){return $n.current.useImperativeHandle(t,e,r)};Ze.useInsertionEffect=function(t,e){return $n.current.useInsertionEffect(t,e)};Ze.useLayoutEffect=function(t,e){return $n.current.useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return $n.current.useMemo(t,e)};Ze.useReducer=function(t,e,r){return $n.current.useReducer(t,e,r)};Ze.useRef=function(t){return $n.current.useRef(t)};Ze.useState=function(t){return $n.current.useState(t)};Ze.useSyncExternalStore=function(t,e,r){return $n.current.useSyncExternalStore(t,e,r)};Ze.useTransition=function(){return $n.current.useTransition()};Ze.version="18.3.1";bJ.exports=Ze;var T=bJ.exports;const ve=yJ(T),Hle=Ole({__proto__:null,default:ve},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wle=T,Kle=Symbol.for("react.element"),Gle=Symbol.for("react.fragment"),Yle=Object.prototype.hasOwnProperty,Qle=Wle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xle={key:!0,ref:!0,__self:!0,__source:!0};function TJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Yle.call(e,n)&&!Xle.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Kle,type:t,key:s,ref:o,props:i,_owner:Qle.current}}s0.Fragment=Gle;s0.jsx=TJ;s0.jsxs=TJ;vJ.exports=s0;var u=vJ.exports,Aj={},OJ={exports:{}},vi={},jJ={exports:{}},PJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,H){var G=F.length;F.push(H);e:for(;0<G;){var K=G-1>>>1,ue=F[K];if(0<i(ue,H))F[K]=H,F[G]=ue,G=K;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var H=F[0],G=F.pop();if(G!==H){F[0]=G;e:for(var K=0,ue=F.length,Ae=ue>>>1;K<Ae;){var Ce=2*(K+1)-1,nt=F[Ce],Oe=Ce+1,ot=F[Oe];if(0>i(nt,G))Oe<ue&&0>i(ot,nt)?(F[K]=ot,F[Oe]=G,K=Oe):(F[K]=nt,F[Ce]=G,K=Ce);else if(Oe<ue&&0>i(ot,G))F[K]=ot,F[Oe]=G,K=Oe;else break e}}return H}function i(F,H){var G=F.sortIndex-H.sortIndex;return G!==0?G:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var H=r(c);H!==null;){if(H.callback===null)n(c);else if(H.startTime<=F)n(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=r(c)}}function x(F){if(g=!1,w(F),!m)if(r(l)!==null)m=!0,I(S);else{var H=r(c);H!==null&&L(x,H.startTime-F)}}function S(F,H){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var G=f;try{for(w(H),h=r(l);h!==null&&(!(h.expirationTime>H)||F&&!O());){var K=h.callback;if(typeof K=="function"){h.callback=null,f=h.priorityLevel;var ue=K(h.expirationTime<=H);H=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===r(l)&&n(l),w(H)}else n(l);h=r(l)}if(h!==null)var Ae=!0;else{var Ce=r(c);Ce!==null&&L(x,Ce.startTime-H),Ae=!1}return Ae}finally{h=null,f=G,p=!1}}var _=!1,N=null,E=-1,k=5,C=-1;function O(){return!(t.unstable_now()-C<k)}function P(){if(N!==null){var F=t.unstable_now();C=F;var H=!0;try{H=N(!0,F)}finally{H?j():(_=!1,N=null)}}else _=!1}var j;if(typeof b=="function")j=function(){b(P)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,$=A.port2;A.port1.onmessage=P,j=function(){$.postMessage(null)}}else j=function(){v(P,0)};function I(F){N=F,_||(_=!0,j())}function L(F,H){E=v(function(){F(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var G=f;f=H;try{return F()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var G=f;f=F;try{return H()}finally{f=G}},t.unstable_scheduleCallback=function(F,H,G){var K=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?K+G:K):G=K,F){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=G+ue,F={id:d++,callback:H,priorityLevel:F,startTime:G,expirationTime:ue,sortIndex:-1},G>K?(F.sortIndex=G,e(c,F),r(l)===null&&F===r(c)&&(g?(y(E),E=-1):g=!0,L(x,G-K))):(F.sortIndex=ue,e(l,F),m||p||(m=!0,I(S))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var H=f;return function(){var G=f;f=H;try{return F.apply(this,arguments)}finally{f=G}}}})(PJ);jJ.exports=PJ;var Jle=jJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zle=T,yi=Jle;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IJ=new Set,Uf={};function Fc(t,e){wd(t,e),wd(t+"Capture",e)}function wd(t,e){for(Uf[t]=e,t=0;t<e.length;t++)IJ.add(e[t])}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dj=Object.prototype.hasOwnProperty,ece=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XD={},JD={};function tce(t){return Dj.call(JD,t)?!0:Dj.call(XD,t)?!1:ece.test(t)?JD[t]=!0:(XD[t]=!0,!1)}function rce(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nce(t,e,r,n){if(e===null||typeof e>"u"||rce(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fn(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new Fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new Fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new Fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new Fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new Fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new Fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new Fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new Fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new Fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var fR=/[\-:]([a-z])/g;function pR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fR,pR);on[e]=new Fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fR,pR);on[e]=new Fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fR,pR);on[e]=new Fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new Fn(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new Fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new Fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function mR(t,e,r,n){var i=on.hasOwnProperty(e)?on[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nce(e,r,i,n)&&(r=null),n||i===null?tce(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ro=Zle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rg=Symbol.for("react.element"),Nu=Symbol.for("react.portal"),Cu=Symbol.for("react.fragment"),gR=Symbol.for("react.strict_mode"),$j=Symbol.for("react.profiler"),RJ=Symbol.for("react.provider"),MJ=Symbol.for("react.context"),yR=Symbol.for("react.forward_ref"),Fj=Symbol.for("react.suspense"),qj=Symbol.for("react.suspense_list"),vR=Symbol.for("react.memo"),Zo=Symbol.for("react.lazy"),AJ=Symbol.for("react.offscreen"),ZD=Symbol.iterator;function qh(t){return t===null||typeof t!="object"?null:(t=ZD&&t[ZD]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,Ub;function of(t){if(Ub===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ub=e&&e[1]||""}return`
`+Ub+t}var Hb=!1;function Wb(t,e){if(!t||Hb)return"";Hb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?of(t):""}function ice(t){switch(t.tag){case 5:return of(t.type);case 16:return of("Lazy");case 13:return of("Suspense");case 19:return of("SuspenseList");case 0:case 2:case 15:return t=Wb(t.type,!1),t;case 11:return t=Wb(t.type.render,!1),t;case 1:return t=Wb(t.type,!0),t;default:return""}}function Lj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cu:return"Fragment";case Nu:return"Portal";case $j:return"Profiler";case gR:return"StrictMode";case Fj:return"Suspense";case qj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case MJ:return(t.displayName||"Context")+".Consumer";case RJ:return(t._context.displayName||"Context")+".Provider";case yR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vR:return e=t.displayName||null,e!==null?e:Lj(t.type)||"Memo";case Zo:e=t._payload,t=t._init;try{return Lj(t(e))}catch{}}return null}function sce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lj(e);case 8:return e===gR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oce(t){var e=DJ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ng(t){t._valueTracker||(t._valueTracker=oce(t))}function $J(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=DJ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function gy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bj(t,e){var r=e.checked;return Gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function e$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Qa(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function FJ(t,e){e=e.checked,e!=null&&mR(t,"checked",e,!1)}function zj(t,e){FJ(t,e);var r=Qa(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vj(t,e.type,r):e.hasOwnProperty("defaultValue")&&Vj(t,e.type,Qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function t$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Vj(t,e,r){(e!=="number"||gy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var af=Array.isArray;function Hu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Qa(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Uj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Z(92));if(af(r)){if(1<r.length)throw Error(Z(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Qa(r)}}function qJ(t,e){var r=Qa(e.value),n=Qa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function n$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ig,BJ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ig=ig||document.createElement("div"),ig.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ig.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var yf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ace=["Webkit","ms","Moz","O"];Object.keys(yf).forEach(function(t){ace.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yf[e]=yf[t]})});function zJ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||yf.hasOwnProperty(t)&&yf[t]?(""+e).trim():e+"px"}function VJ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=zJ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var lce=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wj(t,e){if(e){if(lce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Kj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gj=null;function bR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yj=null,Wu=null,Ku=null;function i$(t){if(t=Wp(t)){if(typeof Yj!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=u0(e),Yj(t.stateNode,t.type,e))}}function UJ(t){Wu?Ku?Ku.push(t):Ku=[t]:Wu=t}function HJ(){if(Wu){var t=Wu,e=Ku;if(Ku=Wu=null,i$(t),e)for(t=0;t<e.length;t++)i$(e[t])}}function WJ(t,e){return t(e)}function KJ(){}var Kb=!1;function GJ(t,e,r){if(Kb)return t(e,r);Kb=!0;try{return WJ(t,e,r)}finally{Kb=!1,(Wu!==null||Ku!==null)&&(KJ(),HJ())}}function Wf(t,e){var r=t.stateNode;if(r===null)return null;var n=u0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Z(231,e,typeof r));return r}var Qj=!1;if(ko)try{var Lh={};Object.defineProperty(Lh,"passive",{get:function(){Qj=!0}}),window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{Qj=!1}function cce(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var vf=!1,yy=null,vy=!1,Xj=null,uce={onError:function(t){vf=!0,yy=t}};function dce(t,e,r,n,i,s,o,a,l){vf=!1,yy=null,cce.apply(uce,arguments)}function hce(t,e,r,n,i,s,o,a,l){if(dce.apply(this,arguments),vf){if(vf){var c=yy;vf=!1,yy=null}else throw Error(Z(198));vy||(vy=!0,Xj=c)}}function qc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function YJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function s$(t){if(qc(t)!==t)throw Error(Z(188))}function fce(t){var e=t.alternate;if(!e){if(e=qc(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return s$(i),t;if(s===n)return s$(i),e;s=s.sibling}throw Error(Z(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(r.alternate!==n)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?t:e}function QJ(t){return t=fce(t),t!==null?XJ(t):null}function XJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=XJ(t);if(e!==null)return e;t=t.sibling}return null}var JJ=yi.unstable_scheduleCallback,o$=yi.unstable_cancelCallback,pce=yi.unstable_shouldYield,mce=yi.unstable_requestPaint,dr=yi.unstable_now,gce=yi.unstable_getCurrentPriorityLevel,xR=yi.unstable_ImmediatePriority,ZJ=yi.unstable_UserBlockingPriority,by=yi.unstable_NormalPriority,yce=yi.unstable_LowPriority,eZ=yi.unstable_IdlePriority,o0=null,As=null;function vce(t){if(As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot(o0,t,void 0,(t.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:wce,bce=Math.log,xce=Math.LN2;function wce(t){return t>>>=0,t===0?32:31-(bce(t)/xce|0)|0}var sg=64,og=4194304;function lf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xy(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=lf(a):(s&=o,s!==0&&(n=lf(s)))}else o=r&~i,o!==0?n=lf(o):s!==0&&(n=lf(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-us(e),i=1<<r,n|=t[r],e&=~i;return n}function Sce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _ce(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-us(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Sce(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Jj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tZ(){var t=sg;return sg<<=1,!(sg&4194240)&&(sg=64),t}function Gb(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Up(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-us(e),t[e]=r}function Ece(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-us(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function wR(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-us(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var bt=0;function rZ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nZ,SR,iZ,sZ,oZ,Zj=!1,ag=[],Oa=null,ja=null,Pa=null,Kf=new Map,Gf=new Map,aa=[],Nce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a$(t,e){switch(t){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":Kf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gf.delete(e.pointerId)}}function Bh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wp(e),e!==null&&SR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Cce(t,e,r,n,i){switch(e){case"focusin":return Oa=Bh(Oa,t,e,r,n,i),!0;case"dragenter":return ja=Bh(ja,t,e,r,n,i),!0;case"mouseover":return Pa=Bh(Pa,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Kf.set(s,Bh(Kf.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Gf.set(s,Bh(Gf.get(s)||null,t,e,r,n,i)),!0}return!1}function aZ(t){var e=Tl(t.target);if(e!==null){var r=qc(e);if(r!==null){if(e=r.tag,e===13){if(e=YJ(r),e!==null){t.blockedOn=e,oZ(t.priority,function(){iZ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=eP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Gj=n,r.target.dispatchEvent(n),Gj=null}else return e=Wp(r),e!==null&&SR(e),t.blockedOn=r,!1;e.shift()}return!0}function l$(t,e,r){Wg(t)&&r.delete(e)}function kce(){Zj=!1,Oa!==null&&Wg(Oa)&&(Oa=null),ja!==null&&Wg(ja)&&(ja=null),Pa!==null&&Wg(Pa)&&(Pa=null),Kf.forEach(l$),Gf.forEach(l$)}function zh(t,e){t.blockedOn===e&&(t.blockedOn=null,Zj||(Zj=!0,yi.unstable_scheduleCallback(yi.unstable_NormalPriority,kce)))}function Yf(t){function e(i){return zh(i,t)}if(0<ag.length){zh(ag[0],t);for(var r=1;r<ag.length;r++){var n=ag[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Oa!==null&&zh(Oa,t),ja!==null&&zh(ja,t),Pa!==null&&zh(Pa,t),Kf.forEach(e),Gf.forEach(e),r=0;r<aa.length;r++)n=aa[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<aa.length&&(r=aa[0],r.blockedOn===null);)aZ(r),r.blockedOn===null&&aa.shift()}var Gu=Ro.ReactCurrentBatchConfig,wy=!0;function Tce(t,e,r,n){var i=bt,s=Gu.transition;Gu.transition=null;try{bt=1,_R(t,e,r,n)}finally{bt=i,Gu.transition=s}}function Oce(t,e,r,n){var i=bt,s=Gu.transition;Gu.transition=null;try{bt=4,_R(t,e,r,n)}finally{bt=i,Gu.transition=s}}function _R(t,e,r,n){if(wy){var i=eP(t,e,r,n);if(i===null)i1(t,e,n,Sy,r),a$(t,n);else if(Cce(i,t,e,r,n))n.stopPropagation();else if(a$(t,n),e&4&&-1<Nce.indexOf(t)){for(;i!==null;){var s=Wp(i);if(s!==null&&nZ(s),s=eP(t,e,r,n),s===null&&i1(t,e,n,Sy,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else i1(t,e,n,null,r)}}var Sy=null;function eP(t,e,r,n){if(Sy=null,t=bR(n),t=Tl(t),t!==null)if(e=qc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=YJ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sy=t,null}function lZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gce()){case xR:return 1;case ZJ:return 4;case by:case yce:return 16;case eZ:return 536870912;default:return 16}default:return 16}}var Sa=null,ER=null,Kg=null;function cZ(){if(Kg)return Kg;var t,e=ER,r=e.length,n,i="value"in Sa?Sa.value:Sa.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Kg=i.slice(t,1<n?1-n:void 0)}function Gg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lg(){return!0}function c$(){return!1}function bi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lg:c$,this.isPropagationStopped=c$,this}return Gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=lg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=lg)},persist:function(){},isPersistent:lg}),e}var Xd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NR=bi(Xd),Hp=Gt({},Xd,{view:0,detail:0}),jce=bi(Hp),Yb,Qb,Vh,a0=Gt({},Hp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vh&&(Vh&&t.type==="mousemove"?(Yb=t.screenX-Vh.screenX,Qb=t.screenY-Vh.screenY):Qb=Yb=0,Vh=t),Yb)},movementY:function(t){return"movementY"in t?t.movementY:Qb}}),u$=bi(a0),Pce=Gt({},a0,{dataTransfer:0}),Ice=bi(Pce),Rce=Gt({},Hp,{relatedTarget:0}),Xb=bi(Rce),Mce=Gt({},Xd,{animationName:0,elapsedTime:0,pseudoElement:0}),Ace=bi(Mce),Dce=Gt({},Xd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$ce=bi(Dce),Fce=Gt({},Xd,{data:0}),d$=bi(Fce),qce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bce[t])?!!e[t]:!1}function CR(){return zce}var Vce=Gt({},Hp,{key:function(t){if(t.key){var e=qce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CR,charCode:function(t){return t.type==="keypress"?Gg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uce=bi(Vce),Hce=Gt({},a0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h$=bi(Hce),Wce=Gt({},Hp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CR}),Kce=bi(Wce),Gce=Gt({},Xd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yce=bi(Gce),Qce=Gt({},a0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xce=bi(Qce),Jce=[9,13,27,32],kR=ko&&"CompositionEvent"in window,bf=null;ko&&"documentMode"in document&&(bf=document.documentMode);var Zce=ko&&"TextEvent"in window&&!bf,uZ=ko&&(!kR||bf&&8<bf&&11>=bf),f$=" ",p$=!1;function dZ(t,e){switch(t){case"keyup":return Jce.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hZ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ku=!1;function eue(t,e){switch(t){case"compositionend":return hZ(e);case"keypress":return e.which!==32?null:(p$=!0,f$);case"textInput":return t=e.data,t===f$&&p$?null:t;default:return null}}function tue(t,e){if(ku)return t==="compositionend"||!kR&&dZ(t,e)?(t=cZ(),Kg=ER=Sa=null,ku=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uZ&&e.locale!=="ko"?null:e.data;default:return null}}var rue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rue[t.type]:e==="textarea"}function fZ(t,e,r,n){UJ(n),e=_y(e,"onChange"),0<e.length&&(r=new NR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var xf=null,Qf=null;function nue(t){EZ(t,0)}function l0(t){var e=ju(t);if($J(e))return t}function iue(t,e){if(t==="change")return e}var pZ=!1;if(ko){var Jb;if(ko){var Zb="oninput"in document;if(!Zb){var g$=document.createElement("div");g$.setAttribute("oninput","return;"),Zb=typeof g$.oninput=="function"}Jb=Zb}else Jb=!1;pZ=Jb&&(!document.documentMode||9<document.documentMode)}function y$(){xf&&(xf.detachEvent("onpropertychange",mZ),Qf=xf=null)}function mZ(t){if(t.propertyName==="value"&&l0(Qf)){var e=[];fZ(e,Qf,t,bR(t)),GJ(nue,e)}}function sue(t,e,r){t==="focusin"?(y$(),xf=e,Qf=r,xf.attachEvent("onpropertychange",mZ)):t==="focusout"&&y$()}function oue(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return l0(Qf)}function aue(t,e){if(t==="click")return l0(e)}function lue(t,e){if(t==="input"||t==="change")return l0(e)}function cue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hs=typeof Object.is=="function"?Object.is:cue;function Xf(t,e){if(hs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Dj.call(e,i)||!hs(t[i],e[i]))return!1}return!0}function v$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b$(t,e){var r=v$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=v$(r)}}function gZ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gZ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yZ(){for(var t=window,e=gy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=gy(t.document)}return e}function TR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uue(t){var e=yZ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&gZ(r.ownerDocument.documentElement,r)){if(n!==null&&TR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=b$(r,s);var o=b$(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var due=ko&&"documentMode"in document&&11>=document.documentMode,Tu=null,tP=null,wf=null,rP=!1;function x$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rP||Tu==null||Tu!==gy(n)||(n=Tu,"selectionStart"in n&&TR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),wf&&Xf(wf,n)||(wf=n,n=_y(tP,"onSelect"),0<n.length&&(e=new NR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Tu)))}function cg(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ou={animationend:cg("Animation","AnimationEnd"),animationiteration:cg("Animation","AnimationIteration"),animationstart:cg("Animation","AnimationStart"),transitionend:cg("Transition","TransitionEnd")},e1={},vZ={};ko&&(vZ=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function c0(t){if(e1[t])return e1[t];if(!Ou[t])return t;var e=Ou[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in vZ)return e1[t]=e[r];return t}var bZ=c0("animationend"),xZ=c0("animationiteration"),wZ=c0("animationstart"),SZ=c0("transitionend"),_Z=new Map,w$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function il(t,e){_Z.set(t,e),Fc(e,[t])}for(var t1=0;t1<w$.length;t1++){var r1=w$[t1],hue=r1.toLowerCase(),fue=r1[0].toUpperCase()+r1.slice(1);il(hue,"on"+fue)}il(bZ,"onAnimationEnd");il(xZ,"onAnimationIteration");il(wZ,"onAnimationStart");il("dblclick","onDoubleClick");il("focusin","onFocus");il("focusout","onBlur");il(SZ,"onTransitionEnd");wd("onMouseEnter",["mouseout","mouseover"]);wd("onMouseLeave",["mouseout","mouseover"]);wd("onPointerEnter",["pointerout","pointerover"]);wd("onPointerLeave",["pointerout","pointerover"]);Fc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pue=new Set("cancel close invalid load scroll toggle".split(" ").concat(cf));function S$(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,hce(n,e,void 0,t),t.currentTarget=null}function EZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;S$(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;S$(i,a,c),s=l}}}if(vy)throw t=Xj,vy=!1,Xj=null,t}function At(t,e){var r=e[aP];r===void 0&&(r=e[aP]=new Set);var n=t+"__bubble";r.has(n)||(NZ(e,t,2,!1),r.add(n))}function n1(t,e,r){var n=0;e&&(n|=4),NZ(r,t,n,e)}var ug="_reactListening"+Math.random().toString(36).slice(2);function Jf(t){if(!t[ug]){t[ug]=!0,IJ.forEach(function(r){r!=="selectionchange"&&(pue.has(r)||n1(r,!1,t),n1(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ug]||(e[ug]=!0,n1("selectionchange",!1,e))}}function NZ(t,e,r,n){switch(lZ(e)){case 1:var i=Tce;break;case 4:i=Oce;break;default:i=_R}r=i.bind(null,e,r,t),i=void 0,!Qj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function i1(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Tl(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}GJ(function(){var c=s,d=bR(r),h=[];e:{var f=_Z.get(t);if(f!==void 0){var p=NR,m=t;switch(t){case"keypress":if(Gg(r)===0)break e;case"keydown":case"keyup":p=Uce;break;case"focusin":m="focus",p=Xb;break;case"focusout":m="blur",p=Xb;break;case"beforeblur":case"afterblur":p=Xb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=u$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Ice;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Kce;break;case bZ:case xZ:case wZ:p=Ace;break;case SZ:p=Yce;break;case"scroll":p=jce;break;case"wheel":p=Xce;break;case"copy":case"cut":case"paste":p=$ce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=h$}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Wf(b,y),x!=null&&g.push(Zf(b,x,w)))),v)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Gj&&(m=r.relatedTarget||r.fromElement)&&(Tl(m)||m[To]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Tl(m):null,m!==null&&(v=qc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=u$,x="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=h$,x="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:ju(p),w=m==null?f:ju(m),f=new g(x,b+"leave",p,r,d),f.target=v,f.relatedTarget=w,x=null,Tl(d)===c&&(g=new g(y,b+"enter",m,r,d),g.target=w,g.relatedTarget=v,x=g),v=x,p&&m)t:{for(g=p,y=m,b=0,w=g;w;w=hu(w))b++;for(w=0,x=y;x;x=hu(x))w++;for(;0<b-w;)g=hu(g),b--;for(;0<w-b;)y=hu(y),w--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=hu(g),y=hu(y)}g=null}else g=null;p!==null&&_$(h,f,p,g,!1),m!==null&&v!==null&&_$(h,v,m,g,!0)}}e:{if(f=c?ju(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=iue;else if(m$(f))if(pZ)S=lue;else{S=oue;var _=sue}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=aue);if(S&&(S=S(t,c))){fZ(h,S,r,d);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Vj(f,"number",f.value)}switch(_=c?ju(c):window,t){case"focusin":(m$(_)||_.contentEditable==="true")&&(Tu=_,tP=c,wf=null);break;case"focusout":wf=tP=Tu=null;break;case"mousedown":rP=!0;break;case"contextmenu":case"mouseup":case"dragend":rP=!1,x$(h,r,d);break;case"selectionchange":if(due)break;case"keydown":case"keyup":x$(h,r,d)}var N;if(kR)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ku?dZ(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(uZ&&r.locale!=="ko"&&(ku||E!=="onCompositionStart"?E==="onCompositionEnd"&&ku&&(N=cZ()):(Sa=d,ER="value"in Sa?Sa.value:Sa.textContent,ku=!0)),_=_y(c,E),0<_.length&&(E=new d$(E,t,null,r,d),h.push({event:E,listeners:_}),N?E.data=N:(N=hZ(r),N!==null&&(E.data=N)))),(N=Zce?eue(t,r):tue(t,r))&&(c=_y(c,"onBeforeInput"),0<c.length&&(d=new d$("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=N))}EZ(h,e)})}function Zf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function _y(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Wf(t,r),s!=null&&n.unshift(Zf(t,s,i)),s=Wf(t,e),s!=null&&n.push(Zf(t,s,i))),t=t.return}return n}function hu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _$(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Wf(r,s),l!=null&&o.unshift(Zf(r,l,a))):i||(l=Wf(r,s),l!=null&&o.push(Zf(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var mue=/\r\n?/g,gue=/\u0000|\uFFFD/g;function E$(t){return(typeof t=="string"?t:""+t).replace(mue,`
`).replace(gue,"")}function dg(t,e,r){if(e=E$(e),E$(t)!==e&&r)throw Error(Z(425))}function Ey(){}var nP=null,iP=null;function sP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oP=typeof setTimeout=="function"?setTimeout:void 0,yue=typeof clearTimeout=="function"?clearTimeout:void 0,N$=typeof Promise=="function"?Promise:void 0,vue=typeof queueMicrotask=="function"?queueMicrotask:typeof N$<"u"?function(t){return N$.resolve(null).then(t).catch(bue)}:oP;function bue(t){setTimeout(function(){throw t})}function s1(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Yf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Yf(e)}function Ia(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function C$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Jd=Math.random().toString(36).slice(2),js="__reactFiber$"+Jd,ep="__reactProps$"+Jd,To="__reactContainer$"+Jd,aP="__reactEvents$"+Jd,xue="__reactListeners$"+Jd,wue="__reactHandles$"+Jd;function Tl(t){var e=t[js];if(e)return e;for(var r=t.parentNode;r;){if(e=r[To]||r[js]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=C$(t);t!==null;){if(r=t[js])return r;t=C$(t)}return e}t=r,r=t.parentNode}return null}function Wp(t){return t=t[js]||t[To],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ju(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function u0(t){return t[ep]||null}var lP=[],Pu=-1;function sl(t){return{current:t}}function Ft(t){0>Pu||(t.current=lP[Pu],lP[Pu]=null,Pu--)}function Rt(t,e){Pu++,lP[Pu]=t.current,t.current=e}var Xa={},bn=sl(Xa),Xn=sl(!1),dc=Xa;function Sd(t,e){var r=t.type.contextTypes;if(!r)return Xa;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jn(t){return t=t.childContextTypes,t!=null}function Ny(){Ft(Xn),Ft(bn)}function k$(t,e,r){if(bn.current!==Xa)throw Error(Z(168));Rt(bn,e),Rt(Xn,r)}function CZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Z(108,sce(t)||"Unknown",i));return Gt({},r,n)}function Cy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xa,dc=bn.current,Rt(bn,t),Rt(Xn,Xn.current),!0}function T$(t,e,r){var n=t.stateNode;if(!n)throw Error(Z(169));r?(t=CZ(t,e,dc),n.__reactInternalMemoizedMergedChildContext=t,Ft(Xn),Ft(bn),Rt(bn,t)):Ft(Xn),Rt(Xn,r)}var no=null,d0=!1,o1=!1;function kZ(t){no===null?no=[t]:no.push(t)}function Sue(t){d0=!0,kZ(t)}function ol(){if(!o1&&no!==null){o1=!0;var t=0,e=bt;try{var r=no;for(bt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}no=null,d0=!1}catch(i){throw no!==null&&(no=no.slice(t+1)),JJ(xR,ol),i}finally{bt=e,o1=!1}}return null}var Iu=[],Ru=0,ky=null,Ty=0,Ii=[],Ri=0,hc=null,lo=1,co="";function El(t,e){Iu[Ru++]=Ty,Iu[Ru++]=ky,ky=t,Ty=e}function TZ(t,e,r){Ii[Ri++]=lo,Ii[Ri++]=co,Ii[Ri++]=hc,hc=t;var n=lo;t=co;var i=32-us(n)-1;n&=~(1<<i),r+=1;var s=32-us(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,lo=1<<32-us(e)+i|r<<i|n,co=s+t}else lo=1<<s|r<<i|n,co=t}function OR(t){t.return!==null&&(El(t,1),TZ(t,1,0))}function jR(t){for(;t===ky;)ky=Iu[--Ru],Iu[Ru]=null,Ty=Iu[--Ru],Iu[Ru]=null;for(;t===hc;)hc=Ii[--Ri],Ii[Ri]=null,co=Ii[--Ri],Ii[Ri]=null,lo=Ii[--Ri],Ii[Ri]=null}var mi=null,pi=null,Bt=!1,ns=null;function OZ(t,e){var r=$i(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function O$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mi=t,pi=Ia(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mi=t,pi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=hc!==null?{id:lo,overflow:co}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=$i(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,mi=t,pi=null,!0):!1;default:return!1}}function cP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uP(t){if(Bt){var e=pi;if(e){var r=e;if(!O$(t,e)){if(cP(t))throw Error(Z(418));e=Ia(r.nextSibling);var n=mi;e&&O$(t,e)?OZ(n,r):(t.flags=t.flags&-4097|2,Bt=!1,mi=t)}}else{if(cP(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Bt=!1,mi=t}}}function j$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mi=t}function hg(t){if(t!==mi)return!1;if(!Bt)return j$(t),Bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sP(t.type,t.memoizedProps)),e&&(e=pi)){if(cP(t))throw jZ(),Error(Z(418));for(;e;)OZ(t,e),e=Ia(e.nextSibling)}if(j$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){pi=Ia(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}pi=null}}else pi=mi?Ia(t.stateNode.nextSibling):null;return!0}function jZ(){for(var t=pi;t;)t=Ia(t.nextSibling)}function _d(){pi=mi=null,Bt=!1}function PR(t){ns===null?ns=[t]:ns.push(t)}var _ue=Ro.ReactCurrentBatchConfig;function Uh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var n=r.stateNode}if(!n)throw Error(Z(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,t))}return t}function fg(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function P$(t){var e=t._init;return e(t._payload)}function PZ(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function r(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=Da(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,x){return b===null||b.tag!==6?(b=f1(w,y.mode,x),b.return=y,b):(b=i(b,w),b.return=y,b)}function l(y,b,w,x){var S=w.type;return S===Cu?d(y,b,w.props.children,x,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Zo&&P$(S)===b.type)?(x=i(b,w.props),x.ref=Uh(y,b,w),x.return=y,x):(x=ty(w.type,w.key,w.props,null,y.mode,x),x.ref=Uh(y,b,w),x.return=y,x)}function c(y,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=p1(w,y.mode,x),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function d(y,b,w,x,S){return b===null||b.tag!==7?(b=Jl(w,y.mode,x,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function h(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=f1(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rg:return w=ty(b.type,b.key,b.props,null,y.mode,w),w.ref=Uh(y,null,b),w.return=y,w;case Nu:return b=p1(b,y.mode,w),b.return=y,b;case Zo:var x=b._init;return h(y,x(b._payload),w)}if(af(b)||qh(b))return b=Jl(b,y.mode,w,null),b.return=y,b;fg(y,b)}return null}function f(y,b,w,x){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case rg:return w.key===S?l(y,b,w,x):null;case Nu:return w.key===S?c(y,b,w,x):null;case Zo:return S=w._init,f(y,b,S(w._payload),x)}if(af(w)||qh(w))return S!==null?null:d(y,b,w,x,null);fg(y,w)}return null}function p(y,b,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(b,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rg:return y=y.get(x.key===null?w:x.key)||null,l(b,y,x,S);case Nu:return y=y.get(x.key===null?w:x.key)||null,c(b,y,x,S);case Zo:var _=x._init;return p(y,b,w,_(x._payload),S)}if(af(x)||qh(x))return y=y.get(w)||null,d(b,y,x,S,null);fg(b,x)}return null}function m(y,b,w,x){for(var S=null,_=null,N=b,E=b=0,k=null;N!==null&&E<w.length;E++){N.index>E?(k=N,N=null):k=N.sibling;var C=f(y,N,w[E],x);if(C===null){N===null&&(N=k);break}t&&N&&C.alternate===null&&e(y,N),b=s(C,b,E),_===null?S=C:_.sibling=C,_=C,N=k}if(E===w.length)return r(y,N),Bt&&El(y,E),S;if(N===null){for(;E<w.length;E++)N=h(y,w[E],x),N!==null&&(b=s(N,b,E),_===null?S=N:_.sibling=N,_=N);return Bt&&El(y,E),S}for(N=n(y,N);E<w.length;E++)k=p(N,y,E,w[E],x),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),b=s(k,b,E),_===null?S=k:_.sibling=k,_=k);return t&&N.forEach(function(O){return e(y,O)}),Bt&&El(y,E),S}function g(y,b,w,x){var S=qh(w);if(typeof S!="function")throw Error(Z(150));if(w=S.call(w),w==null)throw Error(Z(151));for(var _=S=null,N=b,E=b=0,k=null,C=w.next();N!==null&&!C.done;E++,C=w.next()){N.index>E?(k=N,N=null):k=N.sibling;var O=f(y,N,C.value,x);if(O===null){N===null&&(N=k);break}t&&N&&O.alternate===null&&e(y,N),b=s(O,b,E),_===null?S=O:_.sibling=O,_=O,N=k}if(C.done)return r(y,N),Bt&&El(y,E),S;if(N===null){for(;!C.done;E++,C=w.next())C=h(y,C.value,x),C!==null&&(b=s(C,b,E),_===null?S=C:_.sibling=C,_=C);return Bt&&El(y,E),S}for(N=n(y,N);!C.done;E++,C=w.next())C=p(N,y,E,C.value,x),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?E:C.key),b=s(C,b,E),_===null?S=C:_.sibling=C,_=C);return t&&N.forEach(function(P){return e(y,P)}),Bt&&El(y,E),S}function v(y,b,w,x){if(typeof w=="object"&&w!==null&&w.type===Cu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case rg:e:{for(var S=w.key,_=b;_!==null;){if(_.key===S){if(S=w.type,S===Cu){if(_.tag===7){r(y,_.sibling),b=i(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Zo&&P$(S)===_.type){r(y,_.sibling),b=i(_,w.props),b.ref=Uh(y,_,w),b.return=y,y=b;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===Cu?(b=Jl(w.props.children,y.mode,x,w.key),b.return=y,y=b):(x=ty(w.type,w.key,w.props,null,y.mode,x),x.ref=Uh(y,b,w),x.return=y,y=x)}return o(y);case Nu:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else e(y,b);b=b.sibling}b=p1(w,y.mode,x),b.return=y,y=b}return o(y);case Zo:return _=w._init,v(y,b,_(w._payload),x)}if(af(w))return m(y,b,w,x);if(qh(w))return g(y,b,w,x);fg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(y,b.sibling),b=i(b,w),b.return=y,y=b):(r(y,b),b=f1(w,y.mode,x),b.return=y,y=b),o(y)):r(y,b)}return v}var Ed=PZ(!0),IZ=PZ(!1),Oy=sl(null),jy=null,Mu=null,IR=null;function RR(){IR=Mu=jy=null}function MR(t){var e=Oy.current;Ft(Oy),t._currentValue=e}function dP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yu(t,e){jy=t,IR=Mu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gn=!0),t.firstContext=null)}function Vi(t){var e=t._currentValue;if(IR!==t)if(t={context:t,memoizedValue:e,next:null},Mu===null){if(jy===null)throw Error(Z(308));Mu=t,jy.dependencies={lanes:0,firstContext:t}}else Mu=Mu.next=t;return e}var Ol=null;function AR(t){Ol===null?Ol=[t]:Ol.push(t)}function RZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,AR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Oo(t,n)}function Oo(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ea=!1;function DR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function po(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ra(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ut&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Oo(t,r)}return i=n.interleaved,i===null?(e.next=e,AR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Oo(t,r)}function Yg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,wR(t,r)}}function I$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Py(t,e,r,n){var i=t.updateQueue;ea=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Gt({},h,f);break e;case 2:ea=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pc|=o,t.lanes=o,t.memoizedState=h}}function R$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Z(191,i));i.call(n)}}}var Kp={},Ds=sl(Kp),tp=sl(Kp),rp=sl(Kp);function jl(t){if(t===Kp)throw Error(Z(174));return t}function $R(t,e){switch(Rt(rp,e),Rt(tp,t),Rt(Ds,Kp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hj(e,t)}Ft(Ds),Rt(Ds,e)}function Nd(){Ft(Ds),Ft(tp),Ft(rp)}function AZ(t){jl(rp.current);var e=jl(Ds.current),r=Hj(e,t.type);e!==r&&(Rt(tp,t),Rt(Ds,r))}function FR(t){tp.current===t&&(Ft(Ds),Ft(tp))}var Vt=sl(0);function Iy(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var a1=[];function qR(){for(var t=0;t<a1.length;t++)a1[t]._workInProgressVersionPrimary=null;a1.length=0}var Qg=Ro.ReactCurrentDispatcher,l1=Ro.ReactCurrentBatchConfig,fc=0,Wt=null,jr=null,Lr=null,Ry=!1,Sf=!1,np=0,Eue=0;function hn(){throw Error(Z(321))}function LR(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!hs(t[r],e[r]))return!1;return!0}function BR(t,e,r,n,i,s){if(fc=s,Wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qg.current=t===null||t.memoizedState===null?Tue:Oue,t=r(n,i),Sf){s=0;do{if(Sf=!1,np=0,25<=s)throw Error(Z(301));s+=1,Lr=jr=null,e.updateQueue=null,Qg.current=jue,t=r(n,i)}while(Sf)}if(Qg.current=My,e=jr!==null&&jr.next!==null,fc=0,Lr=jr=Wt=null,Ry=!1,e)throw Error(Z(300));return t}function zR(){var t=np!==0;return np=0,t}function Ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lr===null?Wt.memoizedState=Lr=t:Lr=Lr.next=t,Lr}function Ui(){if(jr===null){var t=Wt.alternate;t=t!==null?t.memoizedState:null}else t=jr.next;var e=Lr===null?Wt.memoizedState:Lr.next;if(e!==null)Lr=e,jr=t;else{if(t===null)throw Error(Z(310));jr=t,t={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Lr===null?Wt.memoizedState=Lr=t:Lr=Lr.next=t}return Lr}function ip(t,e){return typeof e=="function"?e(t):e}function c1(t){var e=Ui(),r=e.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=t;var n=jr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((fc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Wt.lanes|=d,pc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,hs(n,e.memoizedState)||(Gn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Wt.lanes|=s,pc|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function u1(t){var e=Ui(),r=e.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);hs(s,e.memoizedState)||(Gn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function DZ(){}function $Z(t,e){var r=Wt,n=Ui(),i=e(),s=!hs(n.memoizedState,i);if(s&&(n.memoizedState=i,Gn=!0),n=n.queue,VR(LZ.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Lr!==null&&Lr.memoizedState.tag&1){if(r.flags|=2048,sp(9,qZ.bind(null,r,n,i,e),void 0,null),Vr===null)throw Error(Z(349));fc&30||FZ(r,e,i)}return i}function FZ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function qZ(t,e,r,n){e.value=r,e.getSnapshot=n,BZ(e)&&zZ(t)}function LZ(t,e,r){return r(function(){BZ(e)&&zZ(t)})}function BZ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!hs(t,r)}catch{return!0}}function zZ(t){var e=Oo(t,1);e!==null&&ds(e,t,1,-1)}function M$(t){var e=Ss();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:t},e.queue=t,t=t.dispatch=kue.bind(null,Wt,t),[e.memoizedState,t]}function sp(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function VZ(){return Ui().memoizedState}function Xg(t,e,r,n){var i=Ss();Wt.flags|=t,i.memoizedState=sp(1|e,r,void 0,n===void 0?null:n)}function h0(t,e,r,n){var i=Ui();n=n===void 0?null:n;var s=void 0;if(jr!==null){var o=jr.memoizedState;if(s=o.destroy,n!==null&&LR(n,o.deps)){i.memoizedState=sp(e,r,s,n);return}}Wt.flags|=t,i.memoizedState=sp(1|e,r,s,n)}function A$(t,e){return Xg(8390656,8,t,e)}function VR(t,e){return h0(2048,8,t,e)}function UZ(t,e){return h0(4,2,t,e)}function HZ(t,e){return h0(4,4,t,e)}function WZ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function KZ(t,e,r){return r=r!=null?r.concat([t]):null,h0(4,4,WZ.bind(null,e,t),r)}function UR(){}function GZ(t,e){var r=Ui();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LR(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function YZ(t,e){var r=Ui();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LR(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function QZ(t,e,r){return fc&21?(hs(r,e)||(r=tZ(),Wt.lanes|=r,pc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gn=!0),t.memoizedState=r)}function Nue(t,e){var r=bt;bt=r!==0&&4>r?r:4,t(!0);var n=l1.transition;l1.transition={};try{t(!1),e()}finally{bt=r,l1.transition=n}}function XZ(){return Ui().memoizedState}function Cue(t,e,r){var n=Aa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},JZ(t))ZZ(e,r);else if(r=RZ(t,e,r,n),r!==null){var i=In();ds(r,t,n,i),eee(r,e,n)}}function kue(t,e,r){var n=Aa(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(JZ(t))ZZ(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,hs(a,o)){var l=e.interleaved;l===null?(i.next=i,AR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=RZ(t,e,i,n),r!==null&&(i=In(),ds(r,t,n,i),eee(r,e,n))}}function JZ(t){var e=t.alternate;return t===Wt||e!==null&&e===Wt}function ZZ(t,e){Sf=Ry=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function eee(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,wR(t,r)}}var My={readContext:Vi,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},Tue={readContext:Vi,useCallback:function(t,e){return Ss().memoizedState=[t,e===void 0?null:e],t},useContext:Vi,useEffect:A$,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Xg(4194308,4,WZ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Xg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xg(4,2,t,e)},useMemo:function(t,e){var r=Ss();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ss();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Cue.bind(null,Wt,t),[n.memoizedState,t]},useRef:function(t){var e=Ss();return t={current:t},e.memoizedState=t},useState:M$,useDebugValue:UR,useDeferredValue:function(t){return Ss().memoizedState=t},useTransition:function(){var t=M$(!1),e=t[0];return t=Nue.bind(null,t[1]),Ss().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Wt,i=Ss();if(Bt){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=e(),Vr===null)throw Error(Z(349));fc&30||FZ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,A$(LZ.bind(null,n,s,t),[t]),n.flags|=2048,sp(9,qZ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Ss(),e=Vr.identifierPrefix;if(Bt){var r=co,n=lo;r=(n&~(1<<32-us(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=np++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Eue++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Oue={readContext:Vi,useCallback:GZ,useContext:Vi,useEffect:VR,useImperativeHandle:KZ,useInsertionEffect:UZ,useLayoutEffect:HZ,useMemo:YZ,useReducer:c1,useRef:VZ,useState:function(){return c1(ip)},useDebugValue:UR,useDeferredValue:function(t){var e=Ui();return QZ(e,jr.memoizedState,t)},useTransition:function(){var t=c1(ip)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:DZ,useSyncExternalStore:$Z,useId:XZ,unstable_isNewReconciler:!1},jue={readContext:Vi,useCallback:GZ,useContext:Vi,useEffect:VR,useImperativeHandle:KZ,useInsertionEffect:UZ,useLayoutEffect:HZ,useMemo:YZ,useReducer:u1,useRef:VZ,useState:function(){return u1(ip)},useDebugValue:UR,useDeferredValue:function(t){var e=Ui();return jr===null?e.memoizedState=t:QZ(e,jr.memoizedState,t)},useTransition:function(){var t=u1(ip)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:DZ,useSyncExternalStore:$Z,useId:XZ,unstable_isNewReconciler:!1};function Zi(t,e){if(t&&t.defaultProps){e=Gt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function hP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Gt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var f0={isMounted:function(t){return(t=t._reactInternals)?qc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=In(),i=Aa(t),s=po(n,i);s.payload=e,r!=null&&(s.callback=r),e=Ra(t,s,i),e!==null&&(ds(e,t,i,n),Yg(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=In(),i=Aa(t),s=po(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Ra(t,s,i),e!==null&&(ds(e,t,i,n),Yg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=In(),n=Aa(t),i=po(r,n);i.tag=2,e!=null&&(i.callback=e),e=Ra(t,i,n),e!==null&&(ds(e,t,n,r),Yg(e,t,n))}};function D$(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xf(r,n)||!Xf(i,s):!0}function tee(t,e,r){var n=!1,i=Xa,s=e.contextType;return typeof s=="object"&&s!==null?s=Vi(s):(i=Jn(e)?dc:bn.current,n=e.contextTypes,s=(n=n!=null)?Sd(t,i):Xa),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=f0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $$(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&f0.enqueueReplaceState(e,e.state,null)}function fP(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},DR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vi(s):(s=Jn(e)?dc:bn.current,i.context=Sd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hP(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&f0.enqueueReplaceState(i,i.state,null),Py(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cd(t,e){try{var r="",n=e;do r+=ice(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function d1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Pue=typeof WeakMap=="function"?WeakMap:Map;function ree(t,e,r){r=po(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Dy||(Dy=!0,EP=n),pP(t,e)},r}function nee(t,e,r){r=po(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){pP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){pP(t,e),typeof n!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function F$(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Pue;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Hue.bind(null,t,e,r),e.then(t,t))}function q$(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L$(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=po(-1,1),e.tag=2,Ra(r,e,1))),r.lanes|=1),t)}var Iue=Ro.ReactCurrentOwner,Gn=!1;function Nn(t,e,r,n){e.child=t===null?IZ(e,null,r,n):Ed(e,t.child,r,n)}function B$(t,e,r,n,i){r=r.render;var s=e.ref;return Yu(e,i),n=BR(t,e,r,n,s,i),r=zR(),t!==null&&!Gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jo(t,e,i)):(Bt&&r&&OR(e),e.flags|=1,Nn(t,e,n,i),e.child)}function z$(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!JR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,iee(t,e,s,n,i)):(t=ty(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Xf,r(o,n)&&t.ref===e.ref)return jo(t,e,i)}return e.flags|=1,t=Da(s,n),t.ref=e.ref,t.return=e,e.child=t}function iee(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Xf(s,n)&&t.ref===e.ref)if(Gn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Gn=!0);else return e.lanes=t.lanes,jo(t,e,i)}return mP(t,e,r,n,i)}function see(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Du,ci),ci|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(Du,ci),ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Rt(Du,ci),ci|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Rt(Du,ci),ci|=n;return Nn(t,e,i,r),e.child}function oee(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function mP(t,e,r,n,i){var s=Jn(r)?dc:bn.current;return s=Sd(e,s),Yu(e,i),r=BR(t,e,r,n,s,i),n=zR(),t!==null&&!Gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jo(t,e,i)):(Bt&&n&&OR(e),e.flags|=1,Nn(t,e,r,i),e.child)}function V$(t,e,r,n,i){if(Jn(r)){var s=!0;Cy(e)}else s=!1;if(Yu(e,i),e.stateNode===null)Jg(t,e),tee(e,r,n),fP(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Vi(c):(c=Jn(r)?dc:bn.current,c=Sd(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&$$(e,o,n,c),ea=!1;var f=e.memoizedState;o.state=f,Py(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Xn.current||ea?(typeof d=="function"&&(hP(e,r,d,n),l=e.memoizedState),(a=ea||D$(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,MZ(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zi(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Vi(l):(l=Jn(r)?dc:bn.current,l=Sd(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&$$(e,o,n,l),ea=!1,f=e.memoizedState,o.state=f,Py(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Xn.current||ea?(typeof p=="function"&&(hP(e,r,p,n),m=e.memoizedState),(c=ea||D$(e,r,c,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return gP(t,e,r,n,s,i)}function gP(t,e,r,n,i,s){oee(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&T$(e,r,!1),jo(t,e,s);n=e.stateNode,Iue.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ed(e,t.child,null,s),e.child=Ed(e,null,a,s)):Nn(t,e,a,s),e.memoizedState=n.state,i&&T$(e,r,!0),e.child}function aee(t){var e=t.stateNode;e.pendingContext?k$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&k$(t,e.context,!1),$R(t,e.containerInfo)}function U$(t,e,r,n,i){return _d(),PR(i),e.flags|=256,Nn(t,e,r,n),e.child}var yP={dehydrated:null,treeContext:null,retryLane:0};function vP(t){return{baseLanes:t,cachePool:null,transitions:null}}function lee(t,e,r){var n=e.pendingProps,i=Vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Rt(Vt,i&1),t===null)return uP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=g0(o,n,0,null),t=Jl(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vP(r),e.memoizedState=yP,t):HR(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Rue(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Da(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Da(a,s):(s=Jl(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?vP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=yP,n}return s=t.child,t=s.sibling,n=Da(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function HR(t,e){return e=g0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pg(t,e,r,n){return n!==null&&PR(n),Ed(e,t.child,null,r),t=HR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rue(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=d1(Error(Z(422))),pg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=g0({mode:"visible",children:n.children},i,0,null),s=Jl(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Ed(e,t.child,null,o),e.child.memoizedState=vP(o),e.memoizedState=yP,s);if(!(e.mode&1))return pg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Z(419)),n=d1(s,n,void 0),pg(t,e,o,n)}if(a=(o&t.childLanes)!==0,Gn||a){if(n=Vr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Oo(t,i),ds(n,t,i,-1))}return XR(),n=d1(Error(Z(421))),pg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Wue.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pi=Ia(i.nextSibling),mi=e,Bt=!0,ns=null,t!==null&&(Ii[Ri++]=lo,Ii[Ri++]=co,Ii[Ri++]=hc,lo=t.id,co=t.overflow,hc=e),e=HR(e,n.children),e.flags|=4096,e)}function H$(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),dP(t.return,e,r)}function h1(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function cee(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Nn(t,e,n.children,r),n=Vt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H$(t,r,e);else if(t.tag===19)H$(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Rt(Vt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Iy(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),h1(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Iy(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}h1(e,!0,r,null,s);break;case"together":h1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jo(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),pc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,r=Da(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Da(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Mue(t,e,r){switch(e.tag){case 3:aee(e),_d();break;case 5:AZ(e);break;case 1:Jn(e.type)&&Cy(e);break;case 4:$R(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Rt(Oy,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Rt(Vt,Vt.current&1),e.flags|=128,null):r&e.child.childLanes?lee(t,e,r):(Rt(Vt,Vt.current&1),t=jo(t,e,r),t!==null?t.sibling:null);Rt(Vt,Vt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return cee(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Rt(Vt,Vt.current),n)break;return null;case 22:case 23:return e.lanes=0,see(t,e,r)}return jo(t,e,r)}var uee,bP,dee,hee;uee=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};bP=function(){};dee=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,jl(Ds.current);var s=null;switch(r){case"input":i=Bj(t,i),n=Bj(t,n),s=[];break;case"select":i=Gt({},i,{value:void 0}),n=Gt({},n,{value:void 0}),s=[];break;case"textarea":i=Uj(t,i),n=Uj(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ey)}Wj(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&At("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};hee=function(t,e,r,n){r!==n&&(e.flags|=4)};function Hh(t,e){if(!Bt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Aue(t,e,r){var n=e.pendingProps;switch(jR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return Jn(e.type)&&Ny(),fn(e),null;case 3:return n=e.stateNode,Nd(),Ft(Xn),Ft(bn),qR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(hg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ns!==null&&(kP(ns),ns=null))),bP(t,e),fn(e),null;case 5:FR(e);var i=jl(rp.current);if(r=e.type,t!==null&&e.stateNode!=null)dee(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Z(166));return fn(e),null}if(t=jl(Ds.current),hg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[js]=e,n[ep]=s,t=(e.mode&1)!==0,r){case"dialog":At("cancel",n),At("close",n);break;case"iframe":case"object":case"embed":At("load",n);break;case"video":case"audio":for(i=0;i<cf.length;i++)At(cf[i],n);break;case"source":At("error",n);break;case"img":case"image":case"link":At("error",n),At("load",n);break;case"details":At("toggle",n);break;case"input":e$(n,s),At("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},At("invalid",n);break;case"textarea":r$(n,s),At("invalid",n)}Wj(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&dg(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&dg(n.textContent,a,t),i=["children",""+a]):Uf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&At("scroll",n)}switch(r){case"input":ng(n),t$(n,s,!0);break;case"textarea":ng(n),n$(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Ey)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LJ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[js]=e,t[ep]=n,uee(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kj(r,n),r){case"dialog":At("cancel",t),At("close",t),i=n;break;case"iframe":case"object":case"embed":At("load",t),i=n;break;case"video":case"audio":for(i=0;i<cf.length;i++)At(cf[i],t);i=n;break;case"source":At("error",t),i=n;break;case"img":case"image":case"link":At("error",t),At("load",t),i=n;break;case"details":At("toggle",t),i=n;break;case"input":e$(t,n),i=Bj(t,n),At("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Gt({},n,{value:void 0}),At("invalid",t);break;case"textarea":r$(t,n),i=Uj(t,n),At("invalid",t);break;default:i=n}Wj(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?VJ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BJ(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Hf(t,l):typeof l=="number"&&Hf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&At("scroll",t):l!=null&&mR(t,s,l,o))}switch(r){case"input":ng(t),t$(t,n,!1);break;case"textarea":ng(t),n$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Qa(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Hu(t,!!n.multiple,s,!1):n.defaultValue!=null&&Hu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ey)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)hee(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Z(166));if(r=jl(rp.current),jl(Ds.current),hg(e)){if(n=e.stateNode,r=e.memoizedProps,n[js]=e,(s=n.nodeValue!==r)&&(t=mi,t!==null))switch(t.tag){case 3:dg(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dg(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[js]=e,e.stateNode=n}return fn(e),null;case 13:if(Ft(Vt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bt&&pi!==null&&e.mode&1&&!(e.flags&128))jZ(),_d(),e.flags|=98560,s=!1;else if(s=hg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[js]=e}else _d(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),s=!1}else ns!==null&&(kP(ns),ns=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Vt.current&1?Pr===0&&(Pr=3):XR())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return Nd(),bP(t,e),t===null&&Jf(e.stateNode.containerInfo),fn(e),null;case 10:return MR(e.type._context),fn(e),null;case 17:return Jn(e.type)&&Ny(),fn(e),null;case 19:if(Ft(Vt),s=e.memoizedState,s===null)return fn(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Hh(s,!1);else{if(Pr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Iy(t),o!==null){for(e.flags|=128,Hh(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Rt(Vt,Vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&dr()>kd&&(e.flags|=128,n=!0,Hh(s,!1),e.lanes=4194304)}else{if(!n)if(t=Iy(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Hh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Bt)return fn(e),null}else 2*dr()-s.renderingStartTime>kd&&r!==1073741824&&(e.flags|=128,n=!0,Hh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dr(),e.sibling=null,r=Vt.current,Rt(Vt,n?r&1|2:r&1),e):(fn(e),null);case 22:case 23:return QR(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ci&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function Due(t,e){switch(jR(e),e.tag){case 1:return Jn(e.type)&&Ny(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Nd(),Ft(Xn),Ft(bn),qR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return FR(e),null;case 13:if(Ft(Vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));_d()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Vt),null;case 4:return Nd(),null;case 10:return MR(e.type._context),null;case 22:case 23:return QR(),null;case 24:return null;default:return null}}var mg=!1,yn=!1,$ue=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Au(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ir(t,e,n)}else r.current=null}function xP(t,e,r){try{r()}catch(n){ir(t,e,n)}}var W$=!1;function Fue(t,e){if(nP=wy,t=yZ(),TR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(iP={focusedElem:t,selectionRange:r},wy=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Zi(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(x){ir(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return m=W$,W$=!1,m}function _f(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&xP(e,r,s)}i=i.next}while(i!==n)}}function p0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function wP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function fee(t){var e=t.alternate;e!==null&&(t.alternate=null,fee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[js],delete e[ep],delete e[aP],delete e[xue],delete e[wue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pee(t){return t.tag===5||t.tag===3||t.tag===4}function K$(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function SP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ey));else if(n!==4&&(t=t.child,t!==null))for(SP(t,e,r),t=t.sibling;t!==null;)SP(t,e,r),t=t.sibling}function _P(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(_P(t,e,r),t=t.sibling;t!==null;)_P(t,e,r),t=t.sibling}var en=null,rs=!1;function Uo(t,e,r){for(r=r.child;r!==null;)mee(t,e,r),r=r.sibling}function mee(t,e,r){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount(o0,r)}catch{}switch(r.tag){case 5:yn||Au(r,e);case 6:var n=en,i=rs;en=null,Uo(t,e,r),en=n,rs=i,en!==null&&(rs?(t=en,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):en.removeChild(r.stateNode));break;case 18:en!==null&&(rs?(t=en,r=r.stateNode,t.nodeType===8?s1(t.parentNode,r):t.nodeType===1&&s1(t,r),Yf(t)):s1(en,r.stateNode));break;case 4:n=en,i=rs,en=r.stateNode.containerInfo,rs=!0,Uo(t,e,r),en=n,rs=i;break;case 0:case 11:case 14:case 15:if(!yn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xP(r,e,o),i=i.next}while(i!==n)}Uo(t,e,r);break;case 1:if(!yn&&(Au(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ir(r,e,a)}Uo(t,e,r);break;case 21:Uo(t,e,r);break;case 22:r.mode&1?(yn=(n=yn)||r.memoizedState!==null,Uo(t,e,r),yn=n):Uo(t,e,r);break;default:Uo(t,e,r)}}function G$(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new $ue),e.forEach(function(n){var i=Kue.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Xi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,rs=!1;break e;case 3:en=a.stateNode.containerInfo,rs=!0;break e;case 4:en=a.stateNode.containerInfo,rs=!0;break e}a=a.return}if(en===null)throw Error(Z(160));mee(s,o,i),en=null,rs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ir(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gee(e,t),e=e.sibling}function gee(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xi(e,t),xs(t),n&4){try{_f(3,t,t.return),p0(3,t)}catch(g){ir(t,t.return,g)}try{_f(5,t,t.return)}catch(g){ir(t,t.return,g)}}break;case 1:Xi(e,t),xs(t),n&512&&r!==null&&Au(r,r.return);break;case 5:if(Xi(e,t),xs(t),n&512&&r!==null&&Au(r,r.return),t.flags&32){var i=t.stateNode;try{Hf(i,"")}catch(g){ir(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&FJ(i,s),Kj(a,o);var c=Kj(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?VJ(i,h):d==="dangerouslySetInnerHTML"?BJ(i,h):d==="children"?Hf(i,h):mR(i,d,h,c)}switch(a){case"input":zj(i,s);break;case"textarea":qJ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Hu(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Hu(i,!!s.multiple,s.defaultValue,!0):Hu(i,!!s.multiple,s.multiple?[]:"",!1))}i[ep]=s}catch(g){ir(t,t.return,g)}}break;case 6:if(Xi(e,t),xs(t),n&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){ir(t,t.return,g)}}break;case 3:if(Xi(e,t),xs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Yf(e.containerInfo)}catch(g){ir(t,t.return,g)}break;case 4:Xi(e,t),xs(t);break;case 13:Xi(e,t),xs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(GR=dr())),n&4&&G$(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(yn=(c=yn)||d,Xi(e,t),yn=c):Xi(e,t),xs(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ye=t,d=t.child;d!==null;){for(h=ye=d;ye!==null;){switch(f=ye,p=f.child,f.tag){case 0:case 11:case 14:case 15:_f(4,f,f.return);break;case 1:Au(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){ir(n,r,g)}}break;case 5:Au(f,f.return);break;case 22:if(f.memoizedState!==null){Q$(h);continue}}p!==null?(p.return=f,ye=p):Q$(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zJ("display",o))}catch(g){ir(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){ir(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xi(e,t),xs(t),n&4&&G$(t);break;case 21:break;default:Xi(e,t),xs(t)}}function xs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(pee(r)){var n=r;break e}r=r.return}throw Error(Z(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Hf(i,""),n.flags&=-33);var s=K$(t);_P(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=K$(t);SP(t,a,o);break;default:throw Error(Z(161))}}catch(l){ir(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function que(t,e,r){ye=t,yee(t)}function yee(t,e,r){for(var n=(t.mode&1)!==0;ye!==null;){var i=ye,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||mg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||yn;a=mg;var c=yn;if(mg=o,(yn=l)&&!c)for(ye=i;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?X$(i):l!==null?(l.return=o,ye=l):X$(i);for(;s!==null;)ye=s,yee(s),s=s.sibling;ye=i,mg=a,yn=c}Y$(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ye=s):Y$(t)}}function Y$(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||p0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!yn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Zi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&R$(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}R$(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Yf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}yn||e.flags&512&&wP(e)}catch(f){ir(e,e.return,f)}}if(e===t){ye=null;break}if(r=e.sibling,r!==null){r.return=e.return,ye=r;break}ye=e.return}}function Q$(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ye=r;break}ye=e.return}}function X$(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{p0(4,e)}catch(l){ir(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){ir(e,i,l)}}var s=e.return;try{wP(e)}catch(l){ir(e,s,l)}break;case 5:var o=e.return;try{wP(e)}catch(l){ir(e,o,l)}}}catch(l){ir(e,e.return,l)}if(e===t){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var Lue=Math.ceil,Ay=Ro.ReactCurrentDispatcher,WR=Ro.ReactCurrentOwner,Fi=Ro.ReactCurrentBatchConfig,ut=0,Vr=null,yr=null,sn=0,ci=0,Du=sl(0),Pr=0,op=null,pc=0,m0=0,KR=0,Ef=null,Hn=null,GR=0,kd=1/0,to=null,Dy=!1,EP=null,Ma=null,gg=!1,_a=null,$y=0,Nf=0,NP=null,Zg=-1,ey=0;function In(){return ut&6?dr():Zg!==-1?Zg:Zg=dr()}function Aa(t){return t.mode&1?ut&2&&sn!==0?sn&-sn:_ue.transition!==null?(ey===0&&(ey=tZ()),ey):(t=bt,t!==0||(t=window.event,t=t===void 0?16:lZ(t.type)),t):1}function ds(t,e,r,n){if(50<Nf)throw Nf=0,NP=null,Error(Z(185));Up(t,r,n),(!(ut&2)||t!==Vr)&&(t===Vr&&(!(ut&2)&&(m0|=r),Pr===4&&la(t,sn)),Zn(t,n),r===1&&ut===0&&!(e.mode&1)&&(kd=dr()+500,d0&&ol()))}function Zn(t,e){var r=t.callbackNode;_ce(t,e);var n=xy(t,t===Vr?sn:0);if(n===0)r!==null&&o$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&o$(r),e===1)t.tag===0?Sue(J$.bind(null,t)):kZ(J$.bind(null,t)),vue(function(){!(ut&6)&&ol()}),r=null;else{switch(rZ(n)){case 1:r=xR;break;case 4:r=ZJ;break;case 16:r=by;break;case 536870912:r=eZ;break;default:r=by}r=Nee(r,vee.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function vee(t,e){if(Zg=-1,ey=0,ut&6)throw Error(Z(327));var r=t.callbackNode;if(Qu()&&t.callbackNode!==r)return null;var n=xy(t,t===Vr?sn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Fy(t,n);else{e=n;var i=ut;ut|=2;var s=xee();(Vr!==t||sn!==e)&&(to=null,kd=dr()+500,Xl(t,e));do try{Vue();break}catch(a){bee(t,a)}while(!0);RR(),Ay.current=s,ut=i,yr!==null?e=0:(Vr=null,sn=0,e=Pr)}if(e!==0){if(e===2&&(i=Jj(t),i!==0&&(n=i,e=CP(t,i))),e===1)throw r=op,Xl(t,0),la(t,n),Zn(t,dr()),r;if(e===6)la(t,n);else{if(i=t.current.alternate,!(n&30)&&!Bue(i)&&(e=Fy(t,n),e===2&&(s=Jj(t),s!==0&&(n=s,e=CP(t,s))),e===1))throw r=op,Xl(t,0),la(t,n),Zn(t,dr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Z(345));case 2:Nl(t,Hn,to);break;case 3:if(la(t,n),(n&130023424)===n&&(e=GR+500-dr(),10<e)){if(xy(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){In(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=oP(Nl.bind(null,t,Hn,to),e);break}Nl(t,Hn,to);break;case 4:if(la(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-us(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=dr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Lue(n/1960))-n,10<n){t.timeoutHandle=oP(Nl.bind(null,t,Hn,to),n);break}Nl(t,Hn,to);break;case 5:Nl(t,Hn,to);break;default:throw Error(Z(329))}}}return Zn(t,dr()),t.callbackNode===r?vee.bind(null,t):null}function CP(t,e){var r=Ef;return t.current.memoizedState.isDehydrated&&(Xl(t,e).flags|=256),t=Fy(t,e),t!==2&&(e=Hn,Hn=r,e!==null&&kP(e)),t}function kP(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function Bue(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!hs(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function la(t,e){for(e&=~KR,e&=~m0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-us(e),n=1<<r;t[r]=-1,e&=~n}}function J$(t){if(ut&6)throw Error(Z(327));Qu();var e=xy(t,0);if(!(e&1))return Zn(t,dr()),null;var r=Fy(t,e);if(t.tag!==0&&r===2){var n=Jj(t);n!==0&&(e=n,r=CP(t,n))}if(r===1)throw r=op,Xl(t,0),la(t,e),Zn(t,dr()),r;if(r===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nl(t,Hn,to),Zn(t,dr()),null}function YR(t,e){var r=ut;ut|=1;try{return t(e)}finally{ut=r,ut===0&&(kd=dr()+500,d0&&ol())}}function mc(t){_a!==null&&_a.tag===0&&!(ut&6)&&Qu();var e=ut;ut|=1;var r=Fi.transition,n=bt;try{if(Fi.transition=null,bt=1,t)return t()}finally{bt=n,Fi.transition=r,ut=e,!(ut&6)&&ol()}}function QR(){ci=Du.current,Ft(Du)}function Xl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,yue(r)),yr!==null)for(r=yr.return;r!==null;){var n=r;switch(jR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ny();break;case 3:Nd(),Ft(Xn),Ft(bn),qR();break;case 5:FR(n);break;case 4:Nd();break;case 13:Ft(Vt);break;case 19:Ft(Vt);break;case 10:MR(n.type._context);break;case 22:case 23:QR()}r=r.return}if(Vr=t,yr=t=Da(t.current,null),sn=ci=e,Pr=0,op=null,KR=m0=pc=0,Hn=Ef=null,Ol!==null){for(e=0;e<Ol.length;e++)if(r=Ol[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Ol=null}return t}function bee(t,e){do{var r=yr;try{if(RR(),Qg.current=My,Ry){for(var n=Wt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ry=!1}if(fc=0,Lr=jr=Wt=null,Sf=!1,np=0,WR.current=null,r===null||r.return===null){Pr=1,op=e,yr=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=q$(o);if(p!==null){p.flags&=-257,L$(p,o,a,s,e),p.mode&1&&F$(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){F$(s,c,e),XR();break e}l=Error(Z(426))}}else if(Bt&&a.mode&1){var v=q$(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),L$(v,o,a,s,e),PR(Cd(l,a));break e}}s=l=Cd(l,a),Pr!==4&&(Pr=2),Ef===null?Ef=[s]:Ef.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=ree(s,l,e);I$(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ma===null||!Ma.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=nee(s,a,e);I$(s,x);break e}}s=s.return}while(s!==null)}See(r)}catch(S){e=S,yr===r&&r!==null&&(yr=r=r.return);continue}break}while(!0)}function xee(){var t=Ay.current;return Ay.current=My,t===null?My:t}function XR(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Vr===null||!(pc&268435455)&&!(m0&268435455)||la(Vr,sn)}function Fy(t,e){var r=ut;ut|=2;var n=xee();(Vr!==t||sn!==e)&&(to=null,Xl(t,e));do try{zue();break}catch(i){bee(t,i)}while(!0);if(RR(),ut=r,Ay.current=n,yr!==null)throw Error(Z(261));return Vr=null,sn=0,Pr}function zue(){for(;yr!==null;)wee(yr)}function Vue(){for(;yr!==null&&!pce();)wee(yr)}function wee(t){var e=Eee(t.alternate,t,ci);t.memoizedProps=t.pendingProps,e===null?See(t):yr=e,WR.current=null}function See(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Due(r,e),r!==null){r.flags&=32767,yr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pr=6,yr=null;return}}else if(r=Aue(r,e,ci),r!==null){yr=r;return}if(e=e.sibling,e!==null){yr=e;return}yr=e=t}while(e!==null);Pr===0&&(Pr=5)}function Nl(t,e,r){var n=bt,i=Fi.transition;try{Fi.transition=null,bt=1,Uue(t,e,r,n)}finally{Fi.transition=i,bt=n}return null}function Uue(t,e,r,n){do Qu();while(_a!==null);if(ut&6)throw Error(Z(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Ece(t,s),t===Vr&&(yr=Vr=null,sn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gg||(gg=!0,Nee(by,function(){return Qu(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Fi.transition,Fi.transition=null;var o=bt;bt=1;var a=ut;ut|=4,WR.current=null,Fue(t,r),gee(r,t),uue(iP),wy=!!nP,iP=nP=null,t.current=r,que(r),mce(),ut=a,bt=o,Fi.transition=s}else t.current=r;if(gg&&(gg=!1,_a=t,$y=i),s=t.pendingLanes,s===0&&(Ma=null),vce(r.stateNode),Zn(t,dr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Dy)throw Dy=!1,t=EP,EP=null,t;return $y&1&&t.tag!==0&&Qu(),s=t.pendingLanes,s&1?t===NP?Nf++:(Nf=0,NP=t):Nf=0,ol(),null}function Qu(){if(_a!==null){var t=rZ($y),e=Fi.transition,r=bt;try{if(Fi.transition=null,bt=16>t?16:t,_a===null)var n=!1;else{if(t=_a,_a=null,$y=0,ut&6)throw Error(Z(331));var i=ut;for(ut|=4,ye=t.current;ye!==null;){var s=ye,o=s.child;if(ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ye=c;ye!==null;){var d=ye;switch(d.tag){case 0:case 11:case 15:_f(8,d,s)}var h=d.child;if(h!==null)h.return=d,ye=h;else for(;ye!==null;){d=ye;var f=d.sibling,p=d.return;if(fee(d),d===c){ye=null;break}if(f!==null){f.return=p,ye=f;break}ye=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_f(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ye=y;break e}ye=s.return}}var b=t.current;for(ye=b;ye!==null;){o=ye;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ye=w;else e:for(o=b;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:p0(9,a)}}catch(S){ir(a,a.return,S)}if(a===o){ye=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ye=x;break e}ye=a.return}}if(ut=i,ol(),As&&typeof As.onPostCommitFiberRoot=="function")try{As.onPostCommitFiberRoot(o0,t)}catch{}n=!0}return n}finally{bt=r,Fi.transition=e}}return!1}function Z$(t,e,r){e=Cd(r,e),e=ree(t,e,1),t=Ra(t,e,1),e=In(),t!==null&&(Up(t,1,e),Zn(t,e))}function ir(t,e,r){if(t.tag===3)Z$(t,t,r);else for(;e!==null;){if(e.tag===3){Z$(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ma===null||!Ma.has(n))){t=Cd(r,t),t=nee(e,t,1),e=Ra(e,t,1),t=In(),e!==null&&(Up(e,1,t),Zn(e,t));break}}e=e.return}}function Hue(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=In(),t.pingedLanes|=t.suspendedLanes&r,Vr===t&&(sn&r)===r&&(Pr===4||Pr===3&&(sn&130023424)===sn&&500>dr()-GR?Xl(t,0):KR|=r),Zn(t,e)}function _ee(t,e){e===0&&(t.mode&1?(e=og,og<<=1,!(og&130023424)&&(og=4194304)):e=1);var r=In();t=Oo(t,e),t!==null&&(Up(t,e,r),Zn(t,r))}function Wue(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),_ee(t,r)}function Kue(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Z(314))}n!==null&&n.delete(e),_ee(t,r)}var Eee;Eee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xn.current)Gn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gn=!1,Mue(t,e,r);Gn=!!(t.flags&131072)}else Gn=!1,Bt&&e.flags&1048576&&TZ(e,Ty,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Jg(t,e),t=e.pendingProps;var i=Sd(e,bn.current);Yu(e,r),i=BR(null,e,n,t,i,r);var s=zR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(n)?(s=!0,Cy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,DR(e),i.updater=f0,e.stateNode=i,i._reactInternals=e,fP(e,n,t,r),e=gP(null,e,n,!0,s,r)):(e.tag=0,Bt&&s&&OR(e),Nn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Jg(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Yue(n),t=Zi(n,t),i){case 0:e=mP(null,e,n,t,r);break e;case 1:e=V$(null,e,n,t,r);break e;case 11:e=B$(null,e,n,t,r);break e;case 14:e=z$(null,e,n,Zi(n.type,t),r);break e}throw Error(Z(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),mP(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),V$(t,e,n,i,r);case 3:e:{if(aee(e),t===null)throw Error(Z(387));n=e.pendingProps,s=e.memoizedState,i=s.element,MZ(t,e),Py(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Cd(Error(Z(423)),e),e=U$(t,e,n,r,i);break e}else if(n!==i){i=Cd(Error(Z(424)),e),e=U$(t,e,n,r,i);break e}else for(pi=Ia(e.stateNode.containerInfo.firstChild),mi=e,Bt=!0,ns=null,r=IZ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_d(),n===i){e=jo(t,e,r);break e}Nn(t,e,n,r)}e=e.child}return e;case 5:return AZ(e),t===null&&uP(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sP(n,i)?o=null:s!==null&&sP(n,s)&&(e.flags|=32),oee(t,e),Nn(t,e,o,r),e.child;case 6:return t===null&&uP(e),null;case 13:return lee(t,e,r);case 4:return $R(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ed(e,null,n,r):Nn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),B$(t,e,n,i,r);case 7:return Nn(t,e,e.pendingProps,r),e.child;case 8:return Nn(t,e,e.pendingProps.children,r),e.child;case 12:return Nn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Rt(Oy,n._currentValue),n._currentValue=o,s!==null)if(hs(s.value,o)){if(s.children===i.children&&!Xn.current){e=jo(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=po(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),dP(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),dP(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Nn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Yu(e,r),i=Vi(i),n=n(i),e.flags|=1,Nn(t,e,n,r),e.child;case 14:return n=e.type,i=Zi(n,e.pendingProps),i=Zi(n.type,i),z$(t,e,n,i,r);case 15:return iee(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),Jg(t,e),e.tag=1,Jn(n)?(t=!0,Cy(e)):t=!1,Yu(e,r),tee(e,n,i),fP(e,n,i,r),gP(null,e,n,!0,t,r);case 19:return cee(t,e,r);case 22:return see(t,e,r)}throw Error(Z(156,e.tag))};function Nee(t,e){return JJ(t,e)}function Gue(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(t,e,r,n){return new Gue(t,e,r,n)}function JR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yue(t){if(typeof t=="function")return JR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yR)return 11;if(t===vR)return 14}return 2}function Da(t,e){var r=t.alternate;return r===null?(r=$i(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ty(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")JR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cu:return Jl(r.children,i,s,e);case gR:o=8,i|=8;break;case $j:return t=$i(12,r,e,i|2),t.elementType=$j,t.lanes=s,t;case Fj:return t=$i(13,r,e,i),t.elementType=Fj,t.lanes=s,t;case qj:return t=$i(19,r,e,i),t.elementType=qj,t.lanes=s,t;case AJ:return g0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RJ:o=10;break e;case MJ:o=9;break e;case yR:o=11;break e;case vR:o=14;break e;case Zo:o=16,n=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=$i(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Jl(t,e,r,n){return t=$i(7,t,n,e),t.lanes=r,t}function g0(t,e,r,n){return t=$i(22,t,n,e),t.elementType=AJ,t.lanes=r,t.stateNode={isHidden:!1},t}function f1(t,e,r){return t=$i(6,t,null,e),t.lanes=r,t}function p1(t,e,r){return e=$i(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Que(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gb(0),this.expirationTimes=Gb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gb(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ZR(t,e,r,n,i,s,o,a,l){return t=new Que(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$i(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},DR(s),t}function Xue(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Cee(t){if(!t)return Xa;t=t._reactInternals;e:{if(qc(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var r=t.type;if(Jn(r))return CZ(t,r,e)}return e}function kee(t,e,r,n,i,s,o,a,l){return t=ZR(r,n,!0,t,i,s,o,a,l),t.context=Cee(null),r=t.current,n=In(),i=Aa(r),s=po(n,i),s.callback=e??null,Ra(r,s,i),t.current.lanes=i,Up(t,i,n),Zn(t,n),t}function y0(t,e,r,n){var i=e.current,s=In(),o=Aa(i);return r=Cee(r),e.context===null?e.context=r:e.pendingContext=r,e=po(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ra(i,e,o),t!==null&&(ds(t,i,o,s),Yg(t,i,o)),o}function qy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function eM(t,e){eF(t,e),(t=t.alternate)&&eF(t,e)}function Jue(){return null}var Tee=typeof reportError=="function"?reportError:function(t){console.error(t)};function tM(t){this._internalRoot=t}v0.prototype.render=tM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));y0(t,e,null,null)};v0.prototype.unmount=tM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mc(function(){y0(null,t,null,null)}),e[To]=null}};function v0(t){this._internalRoot=t}v0.prototype.unstable_scheduleHydration=function(t){if(t){var e=sZ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<aa.length&&e!==0&&e<aa[r].priority;r++);aa.splice(r,0,t),r===0&&aZ(t)}};function rM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function b0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tF(){}function Zue(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=qy(o);s.call(c)}}var o=kee(e,n,t,0,null,!1,!1,"",tF);return t._reactRootContainer=o,t[To]=o.current,Jf(t.nodeType===8?t.parentNode:t),mc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=qy(l);a.call(c)}}var l=ZR(t,0,!1,null,null,!1,!1,"",tF);return t._reactRootContainer=l,t[To]=l.current,Jf(t.nodeType===8?t.parentNode:t),mc(function(){y0(e,l,r,n)}),l}function x0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=qy(o);a.call(l)}}y0(e,o,t,i)}else o=Zue(r,e,t,i,n);return qy(o)}nZ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=lf(e.pendingLanes);r!==0&&(wR(e,r|1),Zn(e,dr()),!(ut&6)&&(kd=dr()+500,ol()))}break;case 13:mc(function(){var n=Oo(t,1);if(n!==null){var i=In();ds(n,t,1,i)}}),eM(t,1)}};SR=function(t){if(t.tag===13){var e=Oo(t,134217728);if(e!==null){var r=In();ds(e,t,134217728,r)}eM(t,134217728)}};iZ=function(t){if(t.tag===13){var e=Aa(t),r=Oo(t,e);if(r!==null){var n=In();ds(r,t,e,n)}eM(t,e)}};sZ=function(){return bt};oZ=function(t,e){var r=bt;try{return bt=t,e()}finally{bt=r}};Yj=function(t,e,r){switch(e){case"input":if(zj(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=u0(n);if(!i)throw Error(Z(90));$J(n),zj(n,i)}}}break;case"textarea":qJ(t,r);break;case"select":e=r.value,e!=null&&Hu(t,!!r.multiple,e,!1)}};WJ=YR;KJ=mc;var ede={usingClientEntryPoint:!1,Events:[Wp,ju,u0,UJ,HJ,YR]},Wh={findFiberByHostInstance:Tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tde={bundleType:Wh.bundleType,version:Wh.version,rendererPackageName:Wh.rendererPackageName,rendererConfig:Wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=QJ(t),t===null?null:t.stateNode},findFiberByHostInstance:Wh.findFiberByHostInstance||Jue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yg.isDisabled&&yg.supportsFiber)try{o0=yg.inject(tde),As=yg}catch{}}vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ede;vi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rM(e))throw Error(Z(200));return Xue(t,e,null,r)};vi.createRoot=function(t,e){if(!rM(t))throw Error(Z(299));var r=!1,n="",i=Tee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ZR(t,1,!1,null,null,r,!1,n,i),t[To]=e.current,Jf(t.nodeType===8?t.parentNode:t),new tM(e)};vi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=QJ(e),t=t===null?null:t.stateNode,t};vi.flushSync=function(t){return mc(t)};vi.hydrate=function(t,e,r){if(!b0(e))throw Error(Z(200));return x0(null,t,e,!0,r)};vi.hydrateRoot=function(t,e,r){if(!rM(t))throw Error(Z(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Tee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=kee(e,null,t,1,r??null,i,!1,s,o),t[To]=e.current,Jf(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new v0(e)};vi.render=function(t,e,r){if(!b0(e))throw Error(Z(200));return x0(null,t,e,!1,r)};vi.unmountComponentAtNode=function(t){if(!b0(t))throw Error(Z(40));return t._reactRootContainer?(mc(function(){x0(null,null,t,!1,function(){t._reactRootContainer=null,t[To]=null})}),!0):!1};vi.unstable_batchedUpdates=YR;vi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!b0(r))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return x0(t,e,r,!1,n)};vi.version="18.3.1-next-f1338f8080-20240426";function Oee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Oee)}catch(t){console.error(t)}}Oee(),OJ.exports=vi;var jee=OJ.exports;const rde=yJ(jee);var rF=jee;Aj.createRoot=rF.createRoot,Aj.hydrateRoot=rF.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ap.apply(this,arguments)}var Ea;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ea||(Ea={}));const nF="popstate";function nde(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return TP("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Ly(i)}return sde(e,r,null,t)}function Kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ide(){return Math.random().toString(36).substr(2,8)}function iF(t,e){return{usr:t.state,key:t.key,idx:e}}function TP(t,e,r,n){return r===void 0&&(r=null),ap({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zd(e):e,{state:r,key:e&&e.key||n||ide()})}function Ly(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Zd(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function sde(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Ea.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ap({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ea.Pop;let v=d(),y=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=Ea.Push;let b=TP(g.location,v,y);c=d()+1;let w=iF(b,c),x=g.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(v,y){a=Ea.Replace;let b=TP(g.location,v,y);c=d();let w=iF(b,c),x=g.createHref(b);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof v=="string"?v:Ly(v);return b=b.replace(/ $/,"%20"),Kt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(nF,h),l=v,()=>{i.removeEventListener(nF,h),l=null}},createHref(v){return e(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var sF;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sF||(sF={}));function ode(t,e,r){return r===void 0&&(r="/"),ade(t,e,r)}function ade(t,e,r,n){let i=typeof e=="string"?Zd(e):e,s=Td(i.pathname||"/",r);if(s==null)return null;let o=Pee(t);lde(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=bde(s);a=yde(o[l],c)}return a}function Pee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Kt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=$a([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Pee(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:mde(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Iee(s.path))i(s,o,l)}),e}function Iee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Iee(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function lde(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:gde(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const cde=/^:[\w-]+$/,ude=3,dde=2,hde=1,fde=10,pde=-2,oF=t=>t==="*";function mde(t,e){let r=t.split("/"),n=r.length;return r.some(oF)&&(n+=pde),e&&(n+=dde),r.filter(i=>!oF(i)).reduce((i,s)=>i+(cde.test(s)?ude:s===""?hde:fde),n)}function gde(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function yde(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=OP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:$a([s,h.pathname]),pathnameBase:Ede($a([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=$a([s,h.pathnameBase]))}return o}function OP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=vde(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function vde(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),nM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function bde(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Td(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const xde=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wde=t=>xde.test(t);function Sde(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Zd(t):t,s;if(r)if(wde(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),nM(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=aF(r.substring(1),"/"):s=aF(r,e)}else s=e;return{pathname:s,search:Nde(n),hash:Cde(i)}}function aF(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function m1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _de(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function iM(t,e){let r=_de(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function sM(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Zd(t):(i=ap({},t),Kt(!i.pathname||!i.pathname.includes("?"),m1("?","pathname","search",i)),Kt(!i.pathname||!i.pathname.includes("#"),m1("#","pathname","hash",i)),Kt(!i.search||!i.search.includes("#"),m1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Sde(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const $a=t=>t.join("/").replace(/\/\/+/g,"/"),Ede=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Nde=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cde=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kde(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ree=["post","put","patch","delete"];new Set(Ree);const Tde=["get",...Ree];new Set(Tde);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lp.apply(this,arguments)}const w0=T.createContext(null),Mee=T.createContext(null),Mo=T.createContext(null),S0=T.createContext(null),Ao=T.createContext({outlet:null,matches:[],isDataRoute:!1}),Aee=T.createContext(null);function Ode(t,e){let{relative:r}=e===void 0?{}:e;eh()||Kt(!1);let{basename:n,navigator:i}=T.useContext(Mo),{hash:s,pathname:o,search:a}=_0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:$a([n,o])),i.createHref({pathname:l,search:a,hash:s})}function eh(){return T.useContext(S0)!=null}function Do(){return eh()||Kt(!1),T.useContext(S0).location}function Dee(t){T.useContext(Mo).static||T.useLayoutEffect(t)}function ms(){let{isDataRoute:t}=T.useContext(Ao);return t?zde():jde()}function jde(){eh()||Kt(!1);let t=T.useContext(w0),{basename:e,future:r,navigator:n}=T.useContext(Mo),{matches:i}=T.useContext(Ao),{pathname:s}=Do(),o=JSON.stringify(iM(i,r.v7_relativeSplatPath)),a=T.useRef(!1);return Dee(()=>{a.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=sM(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:$a([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function Gp(){let{matches:t}=T.useContext(Ao),e=t[t.length-1];return e?e.params:{}}function _0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(Mo),{matches:i}=T.useContext(Ao),{pathname:s}=Do(),o=JSON.stringify(iM(i,n.v7_relativeSplatPath));return T.useMemo(()=>sM(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function Pde(t,e){return Ide(t,e)}function Ide(t,e,r,n){eh()||Kt(!1);let{navigator:i}=T.useContext(Mo),{matches:s}=T.useContext(Ao),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Do(),d;if(e){var h;let v=typeof e=="string"?Zd(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Kt(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=ode(t,{pathname:p}),g=$de(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:$a([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:$a([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,n);return e&&g?T.createElement(S0.Provider,{value:{location:lp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ea.Pop}},g):g}function Rde(){let t=Bde(),e=kde(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:i},r):null,null)}const Mde=T.createElement(Rde,null);class Ade extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Ao.Provider,{value:this.props.routeContext},T.createElement(Aee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dde(t){let{routeContext:e,match:r,children:n}=t,i=T.useContext(w0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Ao.Provider,{value:e},n)}function $de(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Kt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,v=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Mde,l&&(c<0&&f===0?(Vde("route-fallback"),m=!0,v=null):c===f&&(m=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),b=()=>{let w;return p?w=g:m?w=v:h.route.Component?w=T.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,T.createElement(Dde,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(Ade,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var $ee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($ee||{}),Fee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Fee||{});function Fde(t){let e=T.useContext(w0);return e||Kt(!1),e}function qde(t){let e=T.useContext(Mee);return e||Kt(!1),e}function Lde(t){let e=T.useContext(Ao);return e||Kt(!1),e}function qee(t){let e=Lde(),r=e.matches[e.matches.length-1];return r.route.id||Kt(!1),r.route.id}function Bde(){var t;let e=T.useContext(Aee),r=qde(),n=qee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function zde(){let{router:t}=Fde($ee.UseNavigateStable),e=qee(Fee.UseNavigateStable),r=T.useRef(!1);return Dee(()=>{r.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lp({fromRouteId:e},s)))},[t,e])}const lF={};function Vde(t,e,r){lF[t]||(lF[t]=!0)}function Ude(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Lee(t){let{to:e,replace:r,state:n,relative:i}=t;eh()||Kt(!1);let{future:s,static:o}=T.useContext(Mo),{matches:a}=T.useContext(Ao),{pathname:l}=Do(),c=ms(),d=sM(e,iM(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:i}),[c,h,i,r,n]),null}function Or(t){Kt(!1)}function Hde(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ea.Pop,navigator:s,static:o=!1,future:a}=t;eh()&&Kt(!1);let l=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:s,static:o,future:lp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=Zd(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=T.useMemo(()=>{let v=Td(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:T.createElement(Mo.Provider,{value:c},T.createElement(S0.Provider,{children:r,value:g}))}function cF(t){let{children:e,location:r}=t;return Pde(jP(e),r)}new Promise(()=>{});function jP(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,i)=>{if(!T.isValidElement(n))return;let s=[...e,i];if(n.type===T.Fragment){r.push.apply(r,jP(n.props.children,s));return}n.type!==Or&&Kt(!1),!n.props.index||!n.props.children||Kt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=jP(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function By(){return By=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},By.apply(this,arguments)}function Bee(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Wde(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Kde(t,e){return t.button===0&&(!e||e==="_self")&&!Wde(t)}function PP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Gde(t,e){let r=PP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const Yde=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qde=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Xde="6";try{window.__reactRouterVersion=Xde}catch{}const Jde=T.createContext({isTransitioning:!1}),Zde="startTransition",uF=Hle[Zde];function ehe(t){let{basename:e,children:r,future:n,window:i}=t,s=T.useRef();s.current==null&&(s.current=nde({window:i,v5Compat:!0}));let o=s.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=T.useCallback(h=>{c&&uF?uF(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>Ude(n),[n]),T.createElement(Hde,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const the=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rhe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=T.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=Bee(e,Yde),{basename:p}=T.useContext(Mo),m,g=!1;if(typeof c=="string"&&rhe.test(c)&&(m=c,the))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=Td(x.pathname,p);x.origin===w.origin&&S!=null?c=S+x.search+x.hash:g=!0}catch{}let v=Ode(c,{relative:i}),y=she(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function b(w){n&&n(w),w.defaultPrevented||y(w)}return T.createElement("a",By({},f,{href:m||v,onClick:g||s?n:b,ref:r,target:l}))}),nhe=T.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=Bee(e,Qde),f=_0(l,{relative:h.relative}),p=Do(),m=T.useContext(Mee),{navigator:g,basename:v}=T.useContext(Mo),y=m!=null&&ohe(f)&&c===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&v&&(x=Td(x,v)||x);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=w===b||!o&&w.startsWith(b)&&w.charAt(S)==="/",N=x!=null&&(x===b||!o&&x.startsWith(b)&&x.charAt(b.length)==="/"),E={isActive:_,isPending:N,isTransitioning:y},k=_?n:void 0,C;typeof s=="function"?C=s(E):C=[s,_?"active":null,N?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(E):a;return T.createElement(Pe,By({},h,{"aria-current":k,className:C,ref:r,style:O,to:l,viewTransition:c}),typeof d=="function"?d(E):d)});var IP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(IP||(IP={}));var dF;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dF||(dF={}));function ihe(t){let e=T.useContext(w0);return e||Kt(!1),e}function she(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ms(),c=Do(),d=_0(t,{relative:o});return T.useCallback(h=>{if(Kde(h,r)){h.preventDefault();let f=n!==void 0?n:Ly(c)===Ly(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,n,i,r,t,s,o,a])}function zee(t){let e=T.useRef(PP(t)),r=T.useRef(!1),n=Do(),i=T.useMemo(()=>Gde(n.search,r.current?null:e.current),[n.search]),s=ms(),o=T.useCallback((a,l)=>{const c=PP(typeof a=="function"?a(i):a);r.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function ohe(t,e){e===void 0&&(e={});let r=T.useContext(Jde);r==null&&Kt(!1);let{basename:n}=ihe(IP.useViewTransitionState),i=_0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=Td(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Td(r.nextLocation.pathname,n)||r.nextLocation.pathname;return OP(i.pathname,o)!=null||OP(i.pathname,s)!=null}var Lc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ahe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ha,lR,sJ,lhe=(sJ=class{constructor(){ge(this,ha,ahe);ge(this,lR,!1)}setTimeoutProvider(t){se(this,ha,t)}setTimeout(t,e){return M(this,ha).setTimeout(t,e)}clearTimeout(t){M(this,ha).clearTimeout(t)}setInterval(t,e){return M(this,ha).setInterval(t,e)}clearInterval(t){M(this,ha).clearInterval(t)}},ha=new WeakMap,lR=new WeakMap,sJ),Pl=new lhe;function che(t){setTimeout(t,0)}var gc=typeof window>"u"||"Deno"in globalThis;function gn(){}function uhe(t,e){return typeof t=="function"?t(e):t}function RP(t){return typeof t=="number"&&t>=0&&t!==1/0}function Vee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Fa(t,e){return typeof t=="function"?t(e):t}function Oi(t,e){return typeof t=="function"?t(e):t}function hF(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==oM(o,e.options))return!1}else if(!cp(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function fF(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(yc(e.options.mutationKey)!==yc(s))return!1}else if(!cp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function oM(t,e){return((e==null?void 0:e.queryKeyHashFn)||yc)(t)}function yc(t){return JSON.stringify(t,(e,r)=>MP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function cp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>cp(t[r],e[r])):!1}var dhe=Object.prototype.hasOwnProperty;function aM(t,e){if(t===e)return t;const r=pF(t)&&pF(e);if(!r&&!(MP(t)&&MP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=r?c:s[c],h=t[d],f=e[d];if(h===f){a[d]=h,(r?c<i:dhe.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=aM(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function up(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function pF(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function MP(t){if(!mF(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!mF(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function mF(t){return Object.prototype.toString.call(t)==="[object Object]"}function hhe(t){return new Promise(e=>{Pl.setTimeout(e,t)})}function AP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?aM(t,e):e}function fhe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function phe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var lM=Symbol();function Uee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===lM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function cM(t,e){return typeof t=="function"?t(...e):!!t}function mhe(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var zl,fa,od,oJ,ghe=(oJ=class extends Lc{constructor(){super();ge(this,zl);ge(this,fa);ge(this,od);se(this,od,e=>{if(!gc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){M(this,fa)||this.setEventListener(M(this,od))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,fa))==null||e.call(this),se(this,fa,void 0))}setEventListener(e){var r;se(this,od,e),(r=M(this,fa))==null||r.call(this),se(this,fa,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){M(this,zl)!==e&&(se(this,zl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof M(this,zl)=="boolean"?M(this,zl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zl=new WeakMap,fa=new WeakMap,od=new WeakMap,oJ),uM=new ghe;function DP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var yhe=che;function vhe(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=yhe;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var lr=vhe(),ad,pa,ld,aJ,bhe=(aJ=class extends Lc{constructor(){super();ge(this,ad,!0);ge(this,pa);ge(this,ld);se(this,ld,e=>{if(!gc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){M(this,pa)||this.setEventListener(M(this,ld))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,pa))==null||e.call(this),se(this,pa,void 0))}setEventListener(e){var r;se(this,ld,e),(r=M(this,pa))==null||r.call(this),se(this,pa,e(this.setOnline.bind(this)))}setOnline(e){M(this,ad)!==e&&(se(this,ad,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return M(this,ad)}},ad=new WeakMap,pa=new WeakMap,ld=new WeakMap,aJ),zy=new bhe;function xhe(t){return Math.min(1e3*2**t,3e4)}function Hee(t){return(t??"online")==="online"?zy.isOnline():!0}var $P=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Wee(t){let e=!1,r=0,n;const i=DP(),s=()=>i.status!=="pending",o=g=>{var v;if(!s()){const y=new $P(g);f(y),(v=t.onCancel)==null||v.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>uM.isFocused()&&(t.networkMode==="always"||zy.isOnline())&&t.canRun(),d=()=>Hee(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var v;n=y=>{(s()||c())&&g(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const v=r===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const b=t.retry??(gc?0:3),w=t.retryDelay??xhe,x=typeof w=="function"?w(r,y):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),hhe(x).then(()=>c()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Vl,lJ,Kee=(lJ=class{constructor(){ge(this,Vl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),RP(this.gcTime)&&se(this,Vl,Pl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(gc?1/0:5*60*1e3))}clearGcTimeout(){M(this,Vl)&&(Pl.clearTimeout(M(this,Vl)),se(this,Vl,void 0))}},Vl=new WeakMap,lJ),Ul,cd,ki,Hl,qr,Ap,Wl,es,Zs,cJ,whe=(cJ=class extends Kee{constructor(e){super();ge(this,es);ge(this,Ul);ge(this,cd);ge(this,ki);ge(this,Hl);ge(this,qr);ge(this,Ap);ge(this,Wl);se(this,Wl,!1),se(this,Ap,e.defaultOptions),this.setOptions(e.options),this.observers=[],se(this,Hl,e.client),se(this,ki,M(this,Hl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,se(this,Ul,yF(this.options)),this.state=e.state??M(this,Ul),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=M(this,qr))==null?void 0:e.promise}setOptions(e){if(this.options={...M(this,Ap),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=yF(this.options);r.data!==void 0&&(this.setState(gF(r.data,r.dataUpdatedAt)),se(this,Ul,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,ki).remove(this)}setData(e,r){const n=AP(this.state.data,e,this.options);return Me(this,es,Zs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Me(this,es,Zs).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=M(this,qr))==null?void 0:n.promise;return(i=M(this,qr))==null||i.cancel(e),r?r.then(gn).catch(gn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Ul))}isActive(){return this.observers.some(e=>Oi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===lM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Fa(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Vee(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=M(this,qr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=M(this,qr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),M(this,ki).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(M(this,qr)&&(M(this,Wl)?M(this,qr).cancel({revert:!0}):M(this,qr).cancelRetry()),this.scheduleGc()),M(this,ki).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Me(this,es,Zs).call(this,{type:"invalidate"})}async fetch(e,r){var l,c,d,h,f,p,m,g,v,y,b,w;if(this.state.fetchStatus!=="idle"&&((l=M(this,qr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(M(this,qr))return M(this,qr).continueRetry(),M(this,qr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(se(this,Wl,!0),n.signal)})},s=()=>{const x=Uee(this.options,r),_=(()=>{const N={client:M(this,Hl),queryKey:this.queryKey,meta:this.meta};return i(N),N})();return se(this,Wl,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:M(this,Hl),state:this.state,fetchFn:s};return i(x),x})();(c=this.options.behavior)==null||c.onFetch(a,this),se(this,cd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Me(this,es,Zs).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),se(this,qr,Wee({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof $P&&x.revert&&this.setState({...M(this,cd),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{Me(this,es,Zs).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{Me(this,es,Zs).call(this,{type:"pause"})},onContinue:()=>{Me(this,es,Zs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await M(this,qr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=M(this,ki).config).onSuccess)==null||p.call(f,x,this),(g=(m=M(this,ki).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof $P){if(x.silent)return M(this,qr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Me(this,es,Zs).call(this,{type:"error",error:x}),(y=(v=M(this,ki).config).onError)==null||y.call(v,x,this),(w=(b=M(this,ki).config).onSettled)==null||w.call(b,this.state.data,x,this),x}finally{this.scheduleGc()}}},Ul=new WeakMap,cd=new WeakMap,ki=new WeakMap,Hl=new WeakMap,qr=new WeakMap,Ap=new WeakMap,Wl=new WeakMap,es=new WeakSet,Zs=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Gee(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...gF(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return se(this,cd,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),lr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),M(this,ki).notify({query:this,type:"updated",action:e})})},cJ);function Gee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Hee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function gF(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function yF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Bn,it,Dp,_n,Kl,ud,io,ma,$p,dd,hd,Gl,Yl,ga,fd,mt,uf,FP,qP,LP,BP,zP,VP,UP,Yee,uJ,dM=(uJ=class extends Lc{constructor(e,r){super();ge(this,mt);ge(this,Bn);ge(this,it);ge(this,Dp);ge(this,_n);ge(this,Kl);ge(this,ud);ge(this,io);ge(this,ma);ge(this,$p);ge(this,dd);ge(this,hd);ge(this,Gl);ge(this,Yl);ge(this,ga);ge(this,fd,new Set);this.options=r,se(this,Bn,e),se(this,ma,null),se(this,io,DP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,it).addObserver(this),vF(M(this,it),this.options)?Me(this,mt,uf).call(this):this.updateResult(),Me(this,mt,BP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return HP(M(this,it),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return HP(M(this,it),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Me(this,mt,zP).call(this),Me(this,mt,VP).call(this),M(this,it).removeObserver(this)}setOptions(e){const r=this.options,n=M(this,it);if(this.options=M(this,Bn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Oi(this.options.enabled,M(this,it))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Me(this,mt,UP).call(this),M(this,it).setOptions(this.options),r._defaulted&&!up(this.options,r)&&M(this,Bn).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,it),observer:this});const i=this.hasListeners();i&&bF(M(this,it),n,this.options,r)&&Me(this,mt,uf).call(this),this.updateResult(),i&&(M(this,it)!==n||Oi(this.options.enabled,M(this,it))!==Oi(r.enabled,M(this,it))||Fa(this.options.staleTime,M(this,it))!==Fa(r.staleTime,M(this,it)))&&Me(this,mt,FP).call(this);const s=Me(this,mt,qP).call(this);i&&(M(this,it)!==n||Oi(this.options.enabled,M(this,it))!==Oi(r.enabled,M(this,it))||s!==M(this,ga))&&Me(this,mt,LP).call(this,s)}getOptimisticResult(e){const r=M(this,Bn).getQueryCache().build(M(this,Bn),e),n=this.createResult(r,e);return _he(this,n)&&(se(this,_n,n),se(this,ud,this.options),se(this,Kl,M(this,it).state)),n}getCurrentResult(){return M(this,_n)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&M(this,io).status==="pending"&&M(this,io).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){M(this,fd).add(e)}getCurrentQuery(){return M(this,it)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=M(this,Bn).defaultQueryOptions(e),n=M(this,Bn).getQueryCache().build(M(this,Bn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Me(this,mt,uf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,_n)))}createResult(e,r){var k;const n=M(this,it),i=this.options,s=M(this,_n),o=M(this,Kl),a=M(this,ud),c=e!==n?e.state:M(this,Dp),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const C=this.hasListeners(),O=!C&&vF(e,r),P=C&&bF(e,n,r,i);(O||P)&&(h={...h,...Gee(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let C;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(C=s.data,y=!0):C=typeof r.placeholderData=="function"?r.placeholderData((k=M(this,hd))==null?void 0:k.state.data,M(this,hd)):r.placeholderData,C!==void 0&&(v="success",p=AP(s==null?void 0:s.data,C,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===M(this,$p))p=M(this,dd);else try{se(this,$p,r.select),p=r.select(p),p=AP(s==null?void 0:s.data,p,r),se(this,dd,p),se(this,ma,null)}catch(C){se(this,ma,C)}M(this,ma)&&(m=M(this,ma),p=M(this,dd),g=Date.now(),v="error");const b=h.fetchStatus==="fetching",w=v==="pending",x=v==="error",S=w&&b,_=p!==void 0,E={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:hM(e,r),refetch:this.refetch,promise:M(this,io),isEnabled:Oi(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const C=j=>{E.status==="error"?j.reject(E.error):E.data!==void 0&&j.resolve(E.data)},O=()=>{const j=se(this,io,E.promise=DP());C(j)},P=M(this,io);switch(P.status){case"pending":e.queryHash===n.queryHash&&C(P);break;case"fulfilled":(E.status==="error"||E.data!==P.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==P.reason)&&O();break}}return E}updateResult(){const e=M(this,_n),r=this.createResult(M(this,it),this.options);if(se(this,Kl,M(this,it).state),se(this,ud,this.options),M(this,Kl).data!==void 0&&se(this,hd,M(this,it)),up(r,e))return;se(this,_n,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!M(this,fd).size)return!0;const o=new Set(s??M(this,fd));return this.options.throwOnError&&o.add("error"),Object.keys(M(this,_n)).some(a=>{const l=a;return M(this,_n)[l]!==e[l]&&o.has(l)})};Me(this,mt,Yee).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Me(this,mt,BP).call(this)}},Bn=new WeakMap,it=new WeakMap,Dp=new WeakMap,_n=new WeakMap,Kl=new WeakMap,ud=new WeakMap,io=new WeakMap,ma=new WeakMap,$p=new WeakMap,dd=new WeakMap,hd=new WeakMap,Gl=new WeakMap,Yl=new WeakMap,ga=new WeakMap,fd=new WeakMap,mt=new WeakSet,uf=function(e){Me(this,mt,UP).call(this);let r=M(this,it).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(gn)),r},FP=function(){Me(this,mt,zP).call(this);const e=Fa(this.options.staleTime,M(this,it));if(gc||M(this,_n).isStale||!RP(e))return;const n=Vee(M(this,_n).dataUpdatedAt,e)+1;se(this,Gl,Pl.setTimeout(()=>{M(this,_n).isStale||this.updateResult()},n))},qP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,it)):this.options.refetchInterval)??!1},LP=function(e){Me(this,mt,VP).call(this),se(this,ga,e),!(gc||Oi(this.options.enabled,M(this,it))===!1||!RP(M(this,ga))||M(this,ga)===0)&&se(this,Yl,Pl.setInterval(()=>{(this.options.refetchIntervalInBackground||uM.isFocused())&&Me(this,mt,uf).call(this)},M(this,ga)))},BP=function(){Me(this,mt,FP).call(this),Me(this,mt,LP).call(this,Me(this,mt,qP).call(this))},zP=function(){M(this,Gl)&&(Pl.clearTimeout(M(this,Gl)),se(this,Gl,void 0))},VP=function(){M(this,Yl)&&(Pl.clearInterval(M(this,Yl)),se(this,Yl,void 0))},UP=function(){const e=M(this,Bn).getQueryCache().build(M(this,Bn),this.options);if(e===M(this,it))return;const r=M(this,it);se(this,it,e),se(this,Dp,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Yee=function(e){lr.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(M(this,_n))}),M(this,Bn).getQueryCache().notify({query:M(this,it),type:"observerResultsUpdated"})})},uJ);function She(t,e){return Oi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function vF(t,e){return She(t,e)||t.state.data!==void 0&&HP(t,e,e.refetchOnMount)}function HP(t,e,r){if(Oi(e.enabled,t)!==!1&&Fa(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&hM(t,e)}return!1}function bF(t,e,r,n){return(t!==e||Oi(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&hM(t,r)}function hM(t,e){return Oi(e.enabled,t)!==!1&&t.isStaleByTime(Fa(e.staleTime,t))}function _he(t,e){return!up(t.getCurrentResult(),e)}function xF(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=w=>{mhe(w,()=>e.signal,()=>g=!0)},y=Uee(e.options,e.fetchOptions),b=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return v(O),O})(),E=await y(N),{maxPages:k}=e.options,C=S?phe:fhe;return{pages:C(w.pages,E,k),pageParams:C(w.pageParams,x,k)}};if(i&&s.length){const w=i==="backward",x=w?Ehe:wF,S={pages:s,pageParams:o},_=x(n,S);a=await b(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:wF(n,a);if(l>0&&x==null)break;a=await b(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=c}}}function wF(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Ehe(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Fp,ks,En,Ql,Ts,Xo,dJ,Nhe=(dJ=class extends Kee{constructor(e){super();ge(this,Ts);ge(this,Fp);ge(this,ks);ge(this,En);ge(this,Ql);se(this,Fp,e.client),this.mutationId=e.mutationId,se(this,En,e.mutationCache),se(this,ks,[]),this.state=e.state||Qee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){M(this,ks).includes(e)||(M(this,ks).push(e),this.clearGcTimeout(),M(this,En).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){se(this,ks,M(this,ks).filter(r=>r!==e)),this.scheduleGc(),M(this,En).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){M(this,ks).length||(this.state.status==="pending"?this.scheduleGc():M(this,En).remove(this))}continue(){var e;return((e=M(this,Ql))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,d,h,f,p,m,g,v,y,b,w,x,S,_,N,E,k;const r=()=>{Me(this,Ts,Xo).call(this,{type:"continue"})},n={client:M(this,Fp),meta:this.options.meta,mutationKey:this.options.mutationKey};se(this,Ql,Wee({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{Me(this,Ts,Xo).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{Me(this,Ts,Xo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,En).canRun(this)}));const i=this.state.status==="pending",s=!M(this,Ql).canStart();try{if(i)r();else{Me(this,Ts,Xo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=M(this,En).config).onMutate)==null?void 0:a.call(o,e,this,n));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,n));O!==this.state.context&&Me(this,Ts,Xo).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await M(this,Ql).start();return await((h=(d=M(this,En).config).onSuccess)==null?void 0:h.call(d,C,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,e,this.state.context,n)),await((g=(m=M(this,En).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this,n)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,C,null,e,this.state.context,n)),Me(this,Ts,Xo).call(this,{type:"success",data:C}),C}catch(C){try{await((w=(b=M(this,En).config).onError)==null?void 0:w.call(b,C,e,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,C,e,this.state.context,n))}catch(O){Promise.reject(O)}try{await((N=(_=M(this,En).config).onSettled)==null?void 0:N.call(_,void 0,C,this.state.variables,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((k=(E=this.options).onSettled)==null?void 0:k.call(E,void 0,C,e,this.state.context,n))}catch(O){Promise.reject(O)}throw Me(this,Ts,Xo).call(this,{type:"error",error:C}),C}finally{M(this,En).runNext(this)}}},Fp=new WeakMap,ks=new WeakMap,En=new WeakMap,Ql=new WeakMap,Ts=new WeakSet,Xo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),lr.batch(()=>{M(this,ks).forEach(n=>{n.onMutationUpdate(e)}),M(this,En).notify({mutation:this,type:"updated",action:e})})},dJ);function Qee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var so,ts,qp,hJ,Che=(hJ=class extends Lc{constructor(e={}){super();ge(this,so);ge(this,ts);ge(this,qp);this.config=e,se(this,so,new Set),se(this,ts,new Map),se(this,qp,0)}build(e,r,n){const i=new Nhe({client:e,mutationCache:this,mutationId:++eg(this,qp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){M(this,so).add(e);const r=vg(e);if(typeof r=="string"){const n=M(this,ts).get(r);n?n.push(e):M(this,ts).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(M(this,so).delete(e)){const r=vg(e);if(typeof r=="string"){const n=M(this,ts).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&M(this,ts).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=vg(e);if(typeof r=="string"){const n=M(this,ts).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=vg(e);if(typeof r=="string"){const i=(n=M(this,ts).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){lr.batch(()=>{M(this,so).forEach(e=>{this.notify({type:"removed",mutation:e})}),M(this,so).clear(),M(this,ts).clear()})}getAll(){return Array.from(M(this,so))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>fF(r,n))}findAll(e={}){return this.getAll().filter(r=>fF(e,r))}notify(e){lr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return lr.batch(()=>Promise.all(e.map(r=>r.continue().catch(gn))))}},so=new WeakMap,ts=new WeakMap,qp=new WeakMap,hJ);function vg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var oo,ya,zn,ao,Co,ry,WP,fJ,khe=(fJ=class extends Lc{constructor(e,r){super();ge(this,Co);ge(this,oo);ge(this,ya);ge(this,zn);ge(this,ao);se(this,oo,e),this.setOptions(r),this.bindMethods(),Me(this,Co,ry).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=M(this,oo).defaultMutationOptions(e),up(this.options,r)||M(this,oo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,zn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&yc(r.mutationKey)!==yc(this.options.mutationKey)?this.reset():((n=M(this,zn))==null?void 0:n.state.status)==="pending"&&M(this,zn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=M(this,zn))==null||e.removeObserver(this)}onMutationUpdate(e){Me(this,Co,ry).call(this),Me(this,Co,WP).call(this,e)}getCurrentResult(){return M(this,ya)}reset(){var e;(e=M(this,zn))==null||e.removeObserver(this),se(this,zn,void 0),Me(this,Co,ry).call(this),Me(this,Co,WP).call(this)}mutate(e,r){var n;return se(this,ao,r),(n=M(this,zn))==null||n.removeObserver(this),se(this,zn,M(this,oo).getMutationCache().build(M(this,oo),this.options)),M(this,zn).addObserver(this),M(this,zn).execute(e)}},oo=new WeakMap,ya=new WeakMap,zn=new WeakMap,ao=new WeakMap,Co=new WeakSet,ry=function(){var r;const e=((r=M(this,zn))==null?void 0:r.state)??Qee();se(this,ya,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},WP=function(e){lr.batch(()=>{var r,n,i,s,o,a,l,c;if(M(this,ao)&&this.hasListeners()){const d=M(this,ya).variables,h=M(this,ya).context,f={client:M(this,oo),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=M(this,ao)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=M(this,ao)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=M(this,ao)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(c=(l=M(this,ao)).onSettled)==null||c.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(M(this,ya))})})},fJ);function SF(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function The(t,e,r){const n=t.slice(0);return n[e]=r,n}var pd,li,md,gd,Ti,va,Lp,Bp,zp,an,KP,GP,YP,QP,XP,pJ,Ohe=(pJ=class extends Lc{constructor(e,r,n){super();ge(this,an);ge(this,pd);ge(this,li);ge(this,md);ge(this,gd);ge(this,Ti);ge(this,va);ge(this,Lp);ge(this,Bp);ge(this,zp,[]);se(this,pd,e),se(this,gd,n),se(this,md,[]),se(this,Ti,[]),se(this,li,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&M(this,Ti).forEach(e=>{e.subscribe(r=>{Me(this,an,QP).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,M(this,Ti).forEach(e=>{e.destroy()})}setQueries(e,r){se(this,md,e),se(this,gd,r),lr.batch(()=>{const n=M(this,Ti),i=Me(this,an,YP).call(this,M(this,md));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),c=a||l,d=c?!0:o.some((h,f)=>{const p=M(this,li)[f];return!p||!up(h,p)});!c&&!d||(c&&(se(this,zp,i),se(this,Ti,s)),se(this,li,o),this.hasListeners()&&(c&&(SF(n,s).forEach(h=>{h.destroy()}),SF(s,n).forEach(h=>{h.subscribe(f=>{Me(this,an,QP).call(this,h,f)})})),Me(this,an,XP).call(this)))})}getCurrentResult(){return M(this,li)}getQueries(){return M(this,Ti).map(e=>e.getCurrentQuery())}getObservers(){return M(this,Ti)}getOptimisticResult(e,r){const n=Me(this,an,YP).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>Me(this,an,GP).call(this,s??i,r),()=>Me(this,an,KP).call(this,i,n)]}},pd=new WeakMap,li=new WeakMap,md=new WeakMap,gd=new WeakMap,Ti=new WeakMap,va=new WeakMap,Lp=new WeakMap,Bp=new WeakMap,zp=new WeakMap,an=new WeakSet,KP=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},GP=function(e,r){return r?((!M(this,va)||M(this,li)!==M(this,Bp)||r!==M(this,Lp))&&(se(this,Lp,r),se(this,Bp,M(this,li)),se(this,va,aM(M(this,va),r(e)))),M(this,va)):e},YP=function(e){const r=new Map;M(this,Ti).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=M(this,pd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new dM(M(this,pd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},QP=function(e,r){const n=M(this,Ti).indexOf(e);n!==-1&&(se(this,li,The(M(this,li),n,r)),Me(this,an,XP).call(this))},XP=function(){var e;if(this.hasListeners()){const r=M(this,va),n=Me(this,an,KP).call(this,M(this,li),M(this,zp)),i=Me(this,an,GP).call(this,n,(e=M(this,gd))==null?void 0:e.combine);r!==i&&lr.batch(()=>{this.listeners.forEach(s=>{s(M(this,li))})})}},pJ),Os,mJ,jhe=(mJ=class extends Lc{constructor(e={}){super();ge(this,Os);this.config=e,se(this,Os,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??oM(i,r);let o=this.get(s);return o||(o=new whe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){M(this,Os).has(e.queryHash)||(M(this,Os).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=M(this,Os).get(e.queryHash);r&&(e.destroy(),r===e&&M(this,Os).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){lr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,Os).get(e)}getAll(){return[...M(this,Os).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>hF(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>hF(e,n)):r}notify(e){lr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){lr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){lr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Os=new WeakMap,mJ),rr,ba,xa,yd,vd,wa,bd,xd,gJ,Phe=(gJ=class{constructor(t={}){ge(this,rr);ge(this,ba);ge(this,xa);ge(this,yd);ge(this,vd);ge(this,wa);ge(this,bd);ge(this,xd);se(this,rr,t.queryCache||new jhe),se(this,ba,t.mutationCache||new Che),se(this,xa,t.defaultOptions||{}),se(this,yd,new Map),se(this,vd,new Map),se(this,wa,0)}mount(){eg(this,wa)._++,M(this,wa)===1&&(se(this,bd,uM.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,rr).onFocus())})),se(this,xd,zy.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,rr).onOnline())})))}unmount(){var t,e;eg(this,wa)._--,M(this,wa)===0&&((t=M(this,bd))==null||t.call(this),se(this,bd,void 0),(e=M(this,xd))==null||e.call(this),se(this,xd,void 0))}isFetching(t){return M(this,rr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return M(this,ba).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=M(this,rr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=M(this,rr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Fa(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return M(this,rr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=M(this,rr).get(n.queryHash),s=i==null?void 0:i.state.data,o=uhe(e,s);if(o!==void 0)return M(this,rr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return lr.batch(()=>M(this,rr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=M(this,rr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=M(this,rr);lr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=M(this,rr);return lr.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=lr.batch(()=>M(this,rr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(gn).catch(gn)}invalidateQueries(t,e={}){return lr.batch(()=>(M(this,rr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=lr.batch(()=>M(this,rr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(gn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(gn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=M(this,rr).build(this,e);return r.isStaleByTime(Fa(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gn).catch(gn)}fetchInfiniteQuery(t){return t.behavior=xF(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gn).catch(gn)}ensureInfiniteQueryData(t){return t.behavior=xF(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zy.isOnline()?M(this,ba).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,rr)}getMutationCache(){return M(this,ba)}getDefaultOptions(){return M(this,xa)}setDefaultOptions(t){se(this,xa,t)}setQueryDefaults(t,e){M(this,yd).set(yc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...M(this,yd).values()],r={};return e.forEach(n=>{cp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){M(this,vd).set(yc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...M(this,vd).values()],r={};return e.forEach(n=>{cp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...M(this,xa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=oM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===lM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...M(this,xa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){M(this,rr).clear(),M(this,ba).clear()}},rr=new WeakMap,ba=new WeakMap,xa=new WeakMap,yd=new WeakMap,vd=new WeakMap,wa=new WeakMap,bd=new WeakMap,xd=new WeakMap,gJ),Xee=T.createContext(void 0),Mt=t=>{const e=T.useContext(Xee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ihe=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(Xee.Provider,{value:t,children:e})),Jee=T.createContext(!1),Zee=()=>T.useContext(Jee);Jee.Provider;function Rhe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Mhe=T.createContext(Rhe()),ete=()=>T.useContext(Mhe),tte=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?cM(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},rte=t=>{T.useEffect(()=>{t.clearReset()},[t])},nte=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||cM(r,[t.error,n])),ite=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ste=(t,e)=>t.isLoading&&t.isFetching&&!e,JP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Vy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function ZP({queries:t,...e},r){const n=Mt(),i=Zee(),s=ete(),o=T.useMemo(()=>t.map(g=>{const v=n.defaultQueryOptions(g);return v._optimisticResults=i?"isRestoring":"optimistic",v}),[t,n,i]);o.forEach(g=>{ite(g);const v=n.getQueryCache().get(g.queryHash);tte(g,s,v)}),rte(s);const[a]=T.useState(()=>new Ohe(n,o,e)),[l,c,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;T.useSyncExternalStore(T.useCallback(g=>h?a.subscribe(lr.batchCalls(g)):gn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),T.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,v)=>JP(o[v],g))?l.flatMap((g,v)=>{const y=o[v];if(y){const b=new dM(n,y);if(JP(y,g))return Vy(y,b,s);ste(g,i)&&Vy(y,b,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,v)=>{const y=o[v];return y&&nte({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return c(d())}function Ahe(t,e,r){var f,p,m,g;const n=Zee(),i=ete(),s=Mt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",ite(o),tte(o,i,a),rte(i);const l=!s.getQueryCache().get(o.queryHash),[c]=T.useState(()=>new e(s,o)),d=c.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(v=>{const y=h?c.subscribe(lr.batchCalls(v)):gn;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(o)},[o,c]),JP(o,d))throw Vy(o,c,i);if(nte({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!gc&&ste(d,n)){const v=l?Vy(o,c,i):a==null?void 0:a.promise;v==null||v.catch(gn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function ft(t,e){return Ahe(t,dM)}function pt(t,e){const r=Mt(),[n]=T.useState(()=>new khe(r,t));T.useEffect(()=>{n.setOptions(t)},[n,t]);const i=T.useSyncExternalStore(T.useCallback(o=>n.subscribe(lr.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=T.useCallback((o,a)=>{n.mutate(o,a).catch(gn)},[n]);if(i.error&&cM(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function fM(){const t=window.prmConfig||{};return T.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function ote(t,e){return function(){return t.apply(e,arguments)}}const{toString:Dhe}=Object.prototype,{getPrototypeOf:pM}=Object,{iterator:E0,toStringTag:ate}=Symbol,N0=(t=>e=>{const r=Dhe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),gs=t=>(t=t.toLowerCase(),e=>N0(e)===t),C0=t=>e=>typeof e===t,{isArray:th}=Array,Od=C0("undefined");function Yp(t){return t!==null&&!Od(t)&&t.constructor!==null&&!Od(t.constructor)&&ei(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const lte=gs("ArrayBuffer");function $he(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&lte(t.buffer),e}const Fhe=C0("string"),ei=C0("function"),cte=C0("number"),Qp=t=>t!==null&&typeof t=="object",qhe=t=>t===!0||t===!1,ny=t=>{if(N0(t)!=="object")return!1;const e=pM(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ate in t)&&!(E0 in t)},Lhe=t=>{if(!Qp(t)||Yp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Bhe=gs("Date"),zhe=gs("File"),Vhe=gs("Blob"),Uhe=gs("FileList"),Hhe=t=>Qp(t)&&ei(t.pipe),Whe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ei(t.append)&&((e=N0(t))==="formdata"||e==="object"&&ei(t.toString)&&t.toString()==="[object FormData]"))},Khe=gs("URLSearchParams"),[Ghe,Yhe,Qhe,Xhe]=["ReadableStream","Request","Response","Headers"].map(gs),Jhe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xp(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),th(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Yp(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function ute(t,e){if(Yp(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Il=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dte=t=>!Od(t)&&t!==Il;function eI(){const{caseless:t,skipUndefined:e}=dte(this)&&this||{},r={},n=(i,s)=>{const o=t&&ute(r,s)||s;ny(r[o])&&ny(i)?r[o]=eI(r[o],i):ny(i)?r[o]=eI({},i):th(i)?r[o]=i.slice():(!e||!Od(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Xp(arguments[i],n);return r}const Zhe=(t,e,r,{allOwnKeys:n}={})=>(Xp(e,(i,s)=>{r&&ei(i)?t[s]=ote(i,r):t[s]=i},{allOwnKeys:n}),t),efe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),tfe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},rfe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&pM(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},nfe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},ife=t=>{if(!t)return null;if(th(t))return t;let e=t.length;if(!cte(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},sfe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&pM(Uint8Array)),ofe=(t,e)=>{const n=(t&&t[E0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},afe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},lfe=gs("HTMLFormElement"),cfe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),_F=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),ufe=gs("RegExp"),hte=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Xp(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},dfe=t=>{hte(t,(e,r)=>{if(ei(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(ei(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},hfe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return th(t)?n(t):n(String(t).split(e)),r},ffe=()=>{},pfe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function mfe(t){return!!(t&&ei(t.append)&&t[ate]==="FormData"&&t[E0])}const gfe=t=>{const e=new Array(10),r=(n,i)=>{if(Qp(n)){if(e.indexOf(n)>=0)return;if(Yp(n))return n;if(!("toJSON"in n)){e[i]=n;const s=th(n)?[]:{};return Xp(n,(o,a)=>{const l=r(o,i+1);!Od(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},yfe=gs("AsyncFunction"),vfe=t=>t&&(Qp(t)||ei(t))&&ei(t.then)&&ei(t.catch),fte=((t,e)=>t?setImmediate:e?((r,n)=>(Il.addEventListener("message",({source:i,data:s})=>{i===Il&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Il.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ei(Il.postMessage)),bfe=typeof queueMicrotask<"u"?queueMicrotask.bind(Il):typeof process<"u"&&process.nextTick||fte,xfe=t=>t!=null&&ei(t[E0]),B={isArray:th,isArrayBuffer:lte,isBuffer:Yp,isFormData:Whe,isArrayBufferView:$he,isString:Fhe,isNumber:cte,isBoolean:qhe,isObject:Qp,isPlainObject:ny,isEmptyObject:Lhe,isReadableStream:Ghe,isRequest:Yhe,isResponse:Qhe,isHeaders:Xhe,isUndefined:Od,isDate:Bhe,isFile:zhe,isBlob:Vhe,isRegExp:ufe,isFunction:ei,isStream:Hhe,isURLSearchParams:Khe,isTypedArray:sfe,isFileList:Uhe,forEach:Xp,merge:eI,extend:Zhe,trim:Jhe,stripBOM:efe,inherits:tfe,toFlatObject:rfe,kindOf:N0,kindOfTest:gs,endsWith:nfe,toArray:ife,forEachEntry:ofe,matchAll:afe,isHTMLForm:lfe,hasOwnProperty:_F,hasOwnProp:_F,reduceDescriptors:hte,freezeMethods:dfe,toObjectSet:hfe,toCamelCase:cfe,noop:ffe,toFiniteNumber:pfe,findKey:ute,global:Il,isContextDefined:dte,isSpecCompliantForm:mfe,toJSONObject:gfe,isAsyncFn:yfe,isThenable:vfe,setImmediate:fte,asap:bfe,isIterable:xfe};function Ve(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}B.inherits(Ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const pte=Ve.prototype,mte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mte[t]={value:t}});Object.defineProperties(Ve,mte);Object.defineProperty(pte,"isAxiosError",{value:!0});Ve.from=(t,e,r,n,i,s)=>{const o=Object.create(pte);B.toFlatObject(t,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Ve.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const wfe=null;function tI(t){return B.isPlainObject(t)||B.isArray(t)}function gte(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function EF(t,e,r){return t?t.concat(e).map(function(i,s){return i=gte(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function Sfe(t){return B.isArray(t)&&!t.some(tI)}const _fe=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function k0(t,e,r){if(!B.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=B.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!B.isUndefined(v[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(B.isDate(m))return m.toISOString();if(B.isBoolean(m))return m.toString();if(!l&&B.isBlob(m))throw new Ve("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(m)||B.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,v){let y=m;if(m&&!v&&typeof m=="object"){if(B.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(B.isArray(m)&&Sfe(m)||(B.isFileList(m)||B.endsWith(g,"[]"))&&(y=B.toArray(m)))return g=gte(g),y.forEach(function(w,x){!(B.isUndefined(w)||w===null)&&e.append(o===!0?EF([g],x,s):o===null?g:g+"[]",c(w))}),!1}return tI(m)?!0:(e.append(EF(v,g,s),c(m)),!1)}const h=[],f=Object.assign(_fe,{defaultVisitor:d,convertValue:c,isVisitable:tI});function p(m,g){if(!B.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),B.forEach(m,function(y,b){(!(B.isUndefined(y)||y===null)&&i.call(e,y,B.isString(b)?b.trim():b,g,f))===!0&&p(y,g?g.concat(b):[b])}),h.pop()}}if(!B.isObject(t))throw new TypeError("data must be an object");return p(t),e}function NF(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function mM(t,e){this._pairs=[],t&&k0(t,this,e)}const yte=mM.prototype;yte.append=function(e,r){this._pairs.push([e,r])};yte.toString=function(e){const r=e?function(n){return e.call(this,n,NF)}:NF;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Efe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function vte(t,e,r){if(!e)return t;const n=r&&r.encode||Efe;B.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=B.isURLSearchParams(e)?e.toString():new mM(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class CF{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(n){n!==null&&e(n)})}}const bte={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nfe=typeof URLSearchParams<"u"?URLSearchParams:mM,Cfe=typeof FormData<"u"?FormData:null,kfe=typeof Blob<"u"?Blob:null,Tfe={isBrowser:!0,classes:{URLSearchParams:Nfe,FormData:Cfe,Blob:kfe},protocols:["http","https","file","blob","url","data"]},gM=typeof window<"u"&&typeof document<"u",rI=typeof navigator=="object"&&navigator||void 0,Ofe=gM&&(!rI||["ReactNative","NativeScript","NS"].indexOf(rI.product)<0),jfe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Pfe=gM&&window.location.href||"http://localhost",Ife=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gM,hasStandardBrowserEnv:Ofe,hasStandardBrowserWebWorkerEnv:jfe,navigator:rI,origin:Pfe},Symbol.toStringTag,{value:"Module"})),vn={...Ife,...Tfe};function Rfe(t,e){return k0(t,new vn.classes.URLSearchParams,{visitor:function(r,n,i,s){return vn.isNode&&B.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Mfe(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Afe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function xte(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&B.isArray(i)?i.length:o,l?(B.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!B.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&B.isArray(i[o])&&(i[o]=Afe(i[o])),!a)}if(B.isFormData(t)&&B.isFunction(t.entries)){const r={};return B.forEachEntry(t,(n,i)=>{e(Mfe(n),i,r,0)}),r}return null}function Dfe(t,e,r){if(B.isString(t))try{return(e||JSON.parse)(t),B.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Jp={transitional:bte,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=B.isObject(e);if(s&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return i?JSON.stringify(xte(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e)||B.isReadableStream(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Rfe(e,this.formSerializer).toString();if((a=B.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return k0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Dfe(e)):e}],transformResponse:[function(e){const r=this.transitional||Jp.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(B.isResponse(e)||B.isReadableStream(e))return e;if(e&&B.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ve.from(a,Ve.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vn.classes.FormData,Blob:vn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],t=>{Jp.headers[t]={}});const $fe=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ffe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&$fe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},kF=Symbol("internals");function Kh(t){return t&&String(t).trim().toLowerCase()}function iy(t){return t===!1||t==null?t:B.isArray(t)?t.map(iy):String(t)}function qfe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Lfe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function g1(t,e,r,n,i){if(B.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!B.isString(e)){if(B.isString(n))return e.indexOf(n)!==-1;if(B.isRegExp(n))return n.test(e)}}function Bfe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function zfe(t,e){const r=B.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let ti=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,c){const d=Kh(l);if(!d)throw new Error("header name must be a non-empty string");const h=B.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=iy(a))}const o=(a,l)=>B.forEach(a,(c,d)=>s(c,d,l));if(B.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(B.isString(e)&&(e=e.trim())&&!Lfe(e))o(Ffe(e),r);else if(B.isObject(e)&&B.isIterable(e)){let a={},l,c;for(const d of e){if(!B.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?B.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Kh(e),e){const n=B.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return qfe(i);if(B.isFunction(r))return r.call(this,i,n);if(B.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Kh(e),e){const n=B.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||g1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Kh(o),o){const a=B.findKey(n,o);a&&(!r||g1(n,n[a],a,r))&&(delete n[a],i=!0)}}return B.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||g1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return B.forEach(this,(i,s)=>{const o=B.findKey(n,s);if(o){r[o]=iy(i),delete r[s];return}const a=e?Bfe(s):String(s).trim();a!==s&&delete r[s],r[a]=iy(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return B.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&B.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[kF]=this[kF]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Kh(o);n[a]||(zfe(i,o),n[a]=!0)}return B.isArray(e)?e.forEach(s):s(e),this}};ti.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(ti.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});B.freezeMethods(ti);function y1(t,e){const r=this||Jp,n=e||r,i=ti.from(n.headers);let s=n.data;return B.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function wte(t){return!!(t&&t.__CANCEL__)}function rh(t,e,r){Ve.call(this,t??"canceled",Ve.ERR_CANCELED,e,r),this.name="CanceledError"}B.inherits(rh,Ve,{__CANCEL__:!0});function Ste(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ve("Request failed with status code "+r.status,[Ve.ERR_BAD_REQUEST,Ve.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Vfe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Ufe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[s];o||(o=c),r[i]=l,n[i]=c;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(f*1e3/p):void 0}}function Hfe(t,e){let r=0,n=1e3/e,i,s;const o=(c,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const d=Date.now(),h=d-r;h>=n?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const Uy=(t,e,r=3)=>{let n=0;const i=Ufe(50,250);return Hfe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},TF=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},OF=t=>(...e)=>B.asap(()=>t(...e)),Wfe=vn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,vn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(vn.origin),vn.navigator&&/(msie|trident)/i.test(vn.navigator.userAgent)):()=>!0,Kfe=vn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];B.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),B.isString(n)&&a.push(`path=${n}`),B.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),B.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Gfe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Yfe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function _te(t,e,r){let n=!Gfe(e);return t&&(n||r==!1)?Yfe(t,e):e}const jF=t=>t instanceof ti?{...t}:t;function vc(t,e){e=e||{};const r={};function n(c,d,h,f){return B.isPlainObject(c)&&B.isPlainObject(d)?B.merge.call({caseless:f},c,d):B.isPlainObject(d)?B.merge({},d):B.isArray(d)?d.slice():d}function i(c,d,h,f){if(B.isUndefined(d)){if(!B.isUndefined(c))return n(void 0,c,h,f)}else return n(c,d,h,f)}function s(c,d){if(!B.isUndefined(d))return n(void 0,d)}function o(c,d){if(B.isUndefined(d)){if(!B.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function a(c,d,h){if(h in e)return n(c,d);if(h in t)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>i(jF(c),jF(d),h,!0)};return B.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);B.isUndefined(f)&&h!==a||(r[d]=f)}),r}const Ete=t=>{const e=vc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=ti.from(o),e.url=vte(_te(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),B.isFormData(r)){if(vn.hasStandardBrowserEnv||vn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(B.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{c.includes(d.toLowerCase())&&o.set(d,h)})}}if(vn.hasStandardBrowserEnv&&(n&&B.isFunction(n)&&(n=n(e)),n||n!==!1&&Wfe(e.url))){const l=i&&s&&Kfe.read(s);l&&o.set(i,l)}return e},Qfe=typeof XMLHttpRequest<"u",Xfe=Qfe&&function(t){return new Promise(function(r,n){const i=Ete(t);let s=i.data;const o=ti.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function y(){if(!v)return;const w=ti.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:t,request:v};Ste(function(N){r(N),g()},function(N){n(N),g()},S),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(n(new Ve("Request aborted",Ve.ECONNABORTED,t,v)),v=null)},v.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new Ve(S,Ve.ERR_NETWORK,t,v);_.event=x||null,n(_),v=null},v.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||bte;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Ve(x,S.clarifyTimeoutError?Ve.ETIMEDOUT:Ve.ECONNABORTED,t,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&B.forEach(o.toJSON(),function(x,S){v.setRequestHeader(S,x)}),B.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),c&&([f,m]=Uy(c,!0),v.addEventListener("progress",f)),l&&v.upload&&([h,p]=Uy(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{v&&(n(!w||w.type?new rh(null,t,v):w),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=Vfe(i.url);if(b&&vn.protocols.indexOf(b)===-1){n(new Ve("Unsupported protocol "+b+":",Ve.ERR_BAD_REQUEST,t));return}v.send(s||null)})},Jfe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Ve?d:new rh(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Ve(`timeout ${e} of ms exceeded`,Ve.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>B.asap(a),l}},Zfe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},epe=async function*(t,e){for await(const r of tpe(t))yield*Zfe(r,e)},tpe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},PF=(t,e,r,n)=>{const i=epe(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},IF=64*1024,{isFunction:bg}=B,rpe=(({Request:t,Response:e})=>({Request:t,Response:e}))(B.global),{ReadableStream:RF,TextEncoder:MF}=B.global,AF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},npe=t=>{t=B.merge.call({skipUndefined:!0},rpe,t);const{fetch:e,Request:r,Response:n}=t,i=e?bg(e):typeof fetch=="function",s=bg(r),o=bg(n);if(!i)return!1;const a=i&&bg(RF),l=i&&(typeof MF=="function"?(m=>g=>m.encode(g))(new MF):async m=>new Uint8Array(await new r(m).arrayBuffer())),c=s&&a&&AF(()=>{let m=!1;const g=new r(vn.origin,{body:new RF,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&AF(()=>B.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,v)=>{let y=g&&g[m];if(y)return y.call(g);throw new Ve(`Response type '${m}' is not supported`,Ve.ERR_NOT_SUPPORT,v)})});const f=async m=>{if(m==null)return 0;if(B.isBlob(m))return m.size;if(B.isSpecCompliantForm(m))return(await new r(vn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(B.isArrayBufferView(m)||B.isArrayBuffer(m))return m.byteLength;if(B.isURLSearchParams(m)&&(m=m+""),B.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const v=B.toFiniteNumber(m.getContentLength());return v??f(g)};return async m=>{let{url:g,method:v,data:y,signal:b,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:N,headers:E,withCredentials:k="same-origin",fetchOptions:C}=Ete(m),O=e||fetch;N=N?(N+"").toLowerCase():"text";let P=Jfe([b,w&&w.toAbortSignal()],x),j=null;const A=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let $;try{if(_&&c&&v!=="get"&&v!=="head"&&($=await p(E,y))!==0){let K=new r(g,{method:"POST",body:y,duplex:"half"}),ue;if(B.isFormData(y)&&(ue=K.headers.get("content-type"))&&E.setContentType(ue),K.body){const[Ae,Ce]=TF($,Uy(OF(_)));y=PF(K.body,IF,Ae,Ce)}}B.isString(k)||(k=k?"include":"omit");const I=s&&"credentials"in r.prototype,L={...C,signal:P,method:v.toUpperCase(),headers:E.normalize().toJSON(),body:y,duplex:"half",credentials:I?k:void 0};j=s&&new r(g,L);let F=await(s?O(j,C):O(g,L));const H=d&&(N==="stream"||N==="response");if(d&&(S||H&&A)){const K={};["status","statusText","headers"].forEach(nt=>{K[nt]=F[nt]});const ue=B.toFiniteNumber(F.headers.get("content-length")),[Ae,Ce]=S&&TF(ue,Uy(OF(S),!0))||[];F=new n(PF(F.body,IF,Ae,()=>{Ce&&Ce(),A&&A()}),K)}N=N||"text";let G=await h[B.findKey(h,N)||"text"](F,m);return!H&&A&&A(),await new Promise((K,ue)=>{Ste(K,ue,{data:G,headers:ti.from(F.headers),status:F.status,statusText:F.statusText,config:m,request:j})})}catch(I){throw A&&A(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new Ve("Network Error",Ve.ERR_NETWORK,m,j),{cause:I.cause||I}):Ve.from(I,I&&I.code,m,j)}}},ipe=new Map,Nte=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,c,d=ipe;for(;a--;)l=s[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:npe(e)),d=c;return c};Nte();const yM={http:wfe,xhr:Xfe,fetch:{get:Nte}};B.forEach(yM,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const DF=t=>`- ${t}`,spe=t=>B.isFunction(t)||t===null||t===!1;function ope(t,e){t=B.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!spe(n)&&(i=yM[(a=String(n)).toLowerCase()],i===void 0))throw new Ve(`Unknown adapter '${a}'`);if(i&&(B.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(DF).join(`
`):" "+DF(o[0]):"as no adapter specified";throw new Ve("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const Cte={getAdapter:ope,adapters:yM};function v1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rh(null,t)}function $F(t){return v1(t),t.headers=ti.from(t.headers),t.data=y1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Cte.getAdapter(t.adapter||Jp.adapter,t)(t).then(function(n){return v1(t),n.data=y1.call(t,t.transformResponse,n),n.headers=ti.from(n.headers),n},function(n){return wte(n)||(v1(t),n&&n.response&&(n.response.data=y1.call(t,t.transformResponse,n.response),n.response.headers=ti.from(n.response.headers))),Promise.reject(n)})}const kte="1.13.2",T0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{T0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const FF={};T0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+kte+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Ve(i(o," has been removed"+(r?" in "+r:"")),Ve.ERR_DEPRECATED);return r&&!FF[o]&&(FF[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};T0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function ape(t,e,r){if(typeof t!="object")throw new Ve("options must be an object",Ve.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Ve("option "+s+" must be "+l,Ve.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ve("Unknown option "+s,Ve.ERR_BAD_OPTION)}}const sy={assertOptions:ape,validators:T0},ws=sy.validators;let Zl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new CF,response:new CF}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=vc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&sy.assertOptions(n,{silentJSONParsing:ws.transitional(ws.boolean),forcedJSONParsing:ws.transitional(ws.boolean),clarifyTimeoutError:ws.transitional(ws.boolean)},!1),i!=null&&(B.isFunction(i)?r.paramsSerializer={serialize:i}:sy.assertOptions(i,{encode:ws.function,serialize:ws.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),sy.assertOptions(r,{baseUrl:ws.spelling("baseURL"),withXsrfToken:ws.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&B.merge(s.common,s[r.method]);s&&B.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=ti.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[$F.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(v){g.call(this,v);break}}try{d=$F.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=vc(this.defaults,e);const r=_te(e.baseURL,e.url,e.allowAbsoluteUrls);return vte(r,e.params,e.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(e){Zl.prototype[e]=function(r,n){return this.request(vc(n||{},{method:e,url:r,data:(n||{}).data}))}});B.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(vc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Zl.prototype[e]=r(),Zl.prototype[e+"Form"]=r(!0)});let lpe=class Tte{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new rh(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Tte(function(i){e=i}),cancel:e}}};function cpe(t){return function(r){return t.apply(null,r)}}function upe(t){return B.isObject(t)&&t.isAxiosError===!0}const nI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nI).forEach(([t,e])=>{nI[e]=t});function Ote(t){const e=new Zl(t),r=ote(Zl.prototype.request,e);return B.extend(r,Zl.prototype,e,{allOwnKeys:!0}),B.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Ote(vc(t,i))},r}const fr=Ote(Jp);fr.Axios=Zl;fr.CanceledError=rh;fr.CancelToken=lpe;fr.isCancel=wte;fr.VERSION=kte;fr.toFormData=k0;fr.AxiosError=Ve;fr.Cancel=fr.CanceledError;fr.all=function(e){return Promise.all(e)};fr.spread=cpe;fr.isAxiosError=upe;fr.mergeConfig=vc;fr.AxiosHeaders=ti;fr.formToJSON=t=>xte(B.isHTMLForm(t)?new FormData(t):t);fr.getAdapter=Cte.getAdapter;fr.HttpStatusCode=nI;fr.default=fr;const{Axios:M4e,AxiosError:A4e,CanceledError:D4e,isCancel:$4e,CancelToken:F4e,VERSION:q4e,all:L4e,Cancel:B4e,isAxiosError:z4e,spread:V4e,toFormData:U4e,AxiosHeaders:H4e,HttpStatusCode:W4e,formToJSON:K4e,getAdapter:G4e,mergeConfig:Y4e}=fr,iI=window.prmConfig||{},ce=fr.create({baseURL:iI.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":iI.nonce||""}});ce.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});ce.interceptors.response.use(t=>t,t=>{var e,r;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=iI.loginUrl||"/wp-login.php"),((r=t.response)==null?void 0:r.status)===403&&console.error("Access denied:",t.response.data),Promise.reject(t)});const Ge={getPeople:t=>ce.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>ce.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>ce.post("/wp/v2/people",t),updatePerson:(t,e)=>ce.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>ce.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>ce.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>ce.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>ce.post("/wp/v2/companies",t),updateCompany:(t,e)=>ce.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>ce.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>ce.get("/wp/v2/important-dates",{params:t}),getDate:t=>ce.get(`/wp/v2/important-dates/${t}`),createDate:t=>ce.post("/wp/v2/important-dates",t),updateDate:(t,e)=>ce.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>ce.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>ce.get("/wp/v2/person_label"),getCompanyLabels:()=>ce.get("/wp/v2/company_label"),getRelationshipTypes:()=>ce.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>ce.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>ce.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>ce.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>ce.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>ce.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),ce.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},$e={getDashboard:()=>ce.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>ce.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>ce.get("/prm/v1/user/me"),getUsers:()=>ce.get("/prm/v1/users"),approveUser:t=>ce.post(`/prm/v1/users/${t}/approve`),denyUser:t=>ce.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>ce.delete(`/prm/v1/users/${t}`),search:t=>ce.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>ce.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>ce.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>ce.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>ce.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>ce.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>ce.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>ce.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>ce.get("/prm/v1/user/slack-status"),disconnectSlack:()=>ce.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>ce.get("/prm/v1/slack/channels"),getSlackTargets:()=>ce.get("/prm/v1/slack/targets"),updateSlackTargets:t=>ce.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>ce.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>ce.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>ce.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>ce.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>ce.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>ce.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>ce.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>ce.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>ce.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>ce.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>ce.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>ce.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>ce.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>ce.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>ce.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>ce.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>ce.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>ce.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),ce.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),ce.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>ce.get("/prm/v1/carddav/urls"),getAppPasswords:t=>ce.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>ce.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>ce.delete(`/wp/v2/users/${t}/application-passwords/${e}`)};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hpe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),de=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>T.createElement("svg",{ref:d,...dpe,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${hpe(t)}`,a].join(" "),...c},[...e.map(([h,f])=>T.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=de("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fpe=de("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ppe=de("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=de("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mpe=de("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gpe=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ype=de("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=de("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=de("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=de("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=de("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=de("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=de("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=de("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=de("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=de("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vpe=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=de("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bpe=de("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=de("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=de("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=de("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=de("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=de("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xpe=de("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=de("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=de("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wpe=de("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Spe=de("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=de("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _pe=de("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Epe=de("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=de("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Npe=de("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpe=de("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=de("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kpe=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tpe=de("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ope=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=de("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=de("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=de("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=de("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ppe=de("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ipe=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=de("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=de("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rpe=de("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=de("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mpe=de("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ape=de("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=de("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fte=de("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=de("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=de("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=de("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=de("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $pe=de("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fpe=de("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=de("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=de("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=de("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lpe=de("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),_c="Caelis";function al(t){T.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||_c;document.title=`${t} - ${r}`}},[t])}function Bpe(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function Bte(t=null){const e=Do();T.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=Bpe(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=_c}const n=((i=window.prmConfig)==null?void 0:i.siteName)||_c;document.title=`${r} - ${n}`},[e.pathname,t])}function zpe(){return ft({queryKey:["dashboard"],queryFn:async()=>(await $e.getDashboard()).data})}function Vpe(t=30){return ft({queryKey:["reminders",t],queryFn:async()=>(await $e.getReminders(t)).data})}function zte(t=!1){return ft({queryKey:["todos",t],queryFn:async()=>(await $e.getAllTodos(t)).data})}function Vte(){const t=Mt();return pt({mutationFn:({todoId:e,data:r})=>$e.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Upe(){const t=Mt();return pt({mutationFn:e=>$e.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Hpe(t){const e=typeof t=="string"?t:"",r=e.length>=2;return ft({queryKey:["search",e],queryFn:async()=>r?(await $e.search(e)).data:{people:[],companies:[]},enabled:r})}function Yn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function nr(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Yn(e)}function Xu(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Yn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Yn(e)}function Ho(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const It={all:["people"],lists:()=>[...It.all,"list"],list:t=>[...It.lists(),t],details:()=>[...It.all,"detail"],detail:t=>[...It.details(),t],timeline:t=>[...It.detail(t),"timeline"],dates:t=>[...It.detail(t),"dates"]};function Ute(t){var i,s,o,a,l,c,d,h,f,p,m,g,v,y,b,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(c=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:c.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((v=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:v.map(S=>S.name))||[],n=Yn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((b=t.acf)==null?void 0:b.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function em(t={}){return ft({queryKey:It.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await Ge.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(Ute);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function SM(t){return ft({queryKey:It.detail(t),queryFn:async()=>{const e=await Ge.getPerson(t,{_embed:!0});return Ute(e.data)},enabled:!!t})}function Wpe(t){return ft({queryKey:It.timeline(t),queryFn:async()=>(await $e.getPersonTimeline(t)).data,enabled:!!t})}function Kpe(t){return ft({queryKey:It.dates(t),queryFn:async()=>(await $e.getPersonDates(t)).data,enabled:!!t})}function Gpe(){const t=Mt();return pt({mutationFn:e=>Ge.createPerson(e),onSuccess:()=>{t.invalidateQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Hte(){const t=Mt();return pt({mutationFn:({id:e,data:r})=>Ge.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:It.detail(r)}),t.invalidateQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:It.detail(a)})})}})}function Ype(){const t=Mt();return pt({mutationFn:e=>Ge.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:It.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Qpe(){const t=Mt();return pt({mutationFn:({personId:e,content:r})=>$e.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function Xpe(){const t=Mt();return pt({mutationFn:({noteId:e,personId:r})=>$e.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function _M(){const t=Mt();return pt({mutationFn:({personId:e,data:r})=>$e.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function Jpe(){const t=Mt();return pt({mutationFn:({activityId:e,data:r,personId:n})=>$e.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function Zpe(){const t=Mt();return pt({mutationFn:({activityId:e,personId:r})=>$e.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function Wte(){const t=Mt();return pt({mutationFn:({personId:e,data:r})=>$e.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function eme(){const t=Mt();return pt({mutationFn:({todoId:e,data:r,personId:n})=>$e.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function tme(){const t=Mt();return pt({mutationFn:({todoId:e,personId:r})=>$e.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function rme(){const t=Mt();return pt({mutationFn:({dateId:e,personId:r})=>Ge.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:It.dates(r)}),t.invalidateQueries({queryKey:It.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function Kte({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(""),[o,a]=T.useState(""),[l,c]=T.useState(!1),[d,h]=T.useState(""),{data:f=[],isLoading:p}=em(),m=Wte(),g=Mt(),v=T.useMemo(()=>{const _=d.toLowerCase().trim();let N=f;return _&&(N=f.filter(E=>{var k,C,O;return((k=E.name)==null?void 0:k.toLowerCase().includes(_))||((C=E.first_name)==null?void 0:C.toLowerCase().includes(_))||((O=E.last_name)==null?void 0:O.toLowerCase().includes(_))})),[...N].sort((E,k)=>(E.name||"").localeCompare(k.name||""))},[f,d]),y=T.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),b=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{t&&(n(""),s(b()),a(""),h(""),c(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch(N){console.error("Failed to create todo:",N)}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),u.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:w,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>c(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?u.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(Ja,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:y.name})]}):u.jsx("span",{className:"text-gray-400",children:"Select a person..."}),u.jsx(Hy,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(wc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:p?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):v.length>0?v.map(_=>u.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),c(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?u.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(Ja,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}const nme=[{name:"Dashboard",href:"/",icon:Spe},{name:"People",href:"/people",icon:Fs},{name:"Organizations",href:"/companies",icon:Ir},{name:"Dates",href:"/dates",icon:mo},{name:"Todos",href:"/todos",icon:$s},{name:"Settings",href:"/settings",icon:Ate}];function VF({mobile:t=!1,onClose:e}){const{logoutUrl:r}=fM();return u.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[u.jsxs(Pe,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[u.jsx($te,{className:"w-5 h-5"}),_c]}),t&&u.jsx("button",{onClick:e,className:"p-2 -mr-2",children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:nme.map(n=>u.jsxs(nhe,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[u.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(kpe,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function ime(){var o;const[t,e]=T.useState(!1),r=T.useRef(null),{data:n,isLoading:i}=ft({queryKey:["current-user"],queryFn:async()=>(await $e.getCurrentUser()).data});if(T.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return u.jsx("div",{className:"flex items-center ml-auto",children:u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return u.jsxs("div",{className:"relative ml-auto",ref:r,children:[u.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?u.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),u.jsx(Hy,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(Ja,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&u.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(Ate,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function sme({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(0),o=ms(),a=T.useRef(null),l=r.trim(),{data:c,isLoading:d}=Hpe(l),h=c||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;T.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),T.useEffect(()=>{s(0)},[c]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(b=>Math.min(b+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(b=>Math.max(b-1,0));else if(y.key==="Enter"){y.preventDefault();const b=f[i];b&&v(b.type,b.id)}}},v=(y,b)=>{e(),y==="person"?o(`/people/${b}`):y==="company"&&o(`/companies/${b}`)};return t?u.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),u.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:u.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[u.jsx(wc,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),u.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),u.jsx("span",{children:"to close"})]})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?u.jsxs("div",{className:"px-4 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),u.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?u.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,b)=>{const x=i===b;return u.jsxs("button",{onClick:()=>v("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(Ja,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&u.jsxs("div",{className:"px-2 mt-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,b)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+b,x=i===w;return u.jsxs("button",{onClick:()=>v("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):u.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:u.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):u.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[u.jsx(wc,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),u.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to navigate"})]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to select"})]})]})})]})})]}):null}function ome({onAddTodo:t}){const[e,r]=T.useState(!1),n=T.useRef(null),i=ms();T.useEffect(()=>{const a=l=>{n.current&&!n.current.contains(l.target)&&r(!1)};if(e)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[e]);const s=a=>{r(!1),i(a)},o=()=>{r(!1),t()};return u.jsxs("div",{className:"relative",ref:n,children:[u.jsx("button",{onClick:()=>r(!e),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:u.jsx(or,{className:"w-5 h-5"})}),e&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:()=>s("/people/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Ja,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),u.jsxs("button",{onClick:()=>s("/companies/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Ir,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),u.jsxs("button",{onClick:o,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx($s,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),u.jsxs("button",{onClick:()=>s("/dates/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(mo,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function ame({onMenuClick:t,onAddTodo:e,onOpenSearch:r}){const n=Do(),i=()=>{const s=n.pathname;return s==="/"?"Dashboard":s.startsWith("/people")?"People":s.startsWith("/companies")?"Organizations":s.startsWith("/dates")?"Important Dates":s.startsWith("/todos")?"Todos":s.startsWith("/settings")?"Settings":""};return u.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:u.jsx(Ope,{className:"w-5 h-5"})}),u.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:i()}),u.jsx("div",{className:"flex-1"}),u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[u.jsx(wc,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),u.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[u.jsx(bpe,{className:"w-3 h-3"}),"K"]})]}),u.jsx("div",{className:"ml-2",children:u.jsx(ome,{onAddTodo:e})}),u.jsx("div",{className:"ml-2",children:u.jsx(ime,{})})]})}function lme({children:t}){const[e,r]=T.useState(!1),[n,i]=T.useState(!1),[s,o]=T.useState(!1);return Bte(),T.useEffect(()=>{const a=l=>{(l.metaKey||l.ctrlKey)&&l.key==="k"&&(l.preventDefault(),o(!0))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]),u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[u.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:u.jsx(VF,{})}),e&&u.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:u.jsx(VF,{mobile:!0,onClose:()=>r(!1)})})]}),u.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[u.jsx(ame,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onOpenSearch:()=>o(!0)}),u.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),u.jsx(sme,{isOpen:s,onClose:()=>o(!1)}),u.jsx(Kte,{isOpen:n,onClose:()=>i(!1)})]})}function ct(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Io(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function cme(t,e){const r=ct(t);return isNaN(e)?Io(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const Gte=6048e5,ume=864e5,Yte=6e4,Qte=36e5,xg=43200,UF=1440;let dme={};function tm(){return dme}function Ec(t,e){var a,l,c,d;const r=tm(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=ct(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Gy(t){return Ec(t,{weekStartsOn:1})}function Xte(t){const e=ct(t),r=e.getFullYear(),n=Io(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Gy(n),s=Io(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Gy(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Yy(t){const e=ct(t);return e.setHours(0,0,0,0),e}function Qy(t){const e=ct(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function hme(t,e){const r=Yy(t),n=Yy(e),i=+r-Qy(r),s=+n-Qy(n);return Math.round((i-s)/ume)}function fme(t){const e=Xte(t),r=Io(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Gy(r)}function Ju(t,e){const r=ct(t),n=ct(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function P0(t){return Io(t,Date.now())}function Jte(t,e){const r=Yy(t),n=Yy(e);return+r==+n}function pme(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function mme(t){if(!pme(t)&&typeof t!="number")return!1;const e=ct(t);return!isNaN(Number(e))}function gme(t,e){const r=ct(t),n=ct(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function yme(t,e){const r=ct(t),n=ct(e);return r.getFullYear()-n.getFullYear()}function vme(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function bme(t,e){return+ct(t)-+ct(e)}function xme(t){const e=ct(t);return e.setHours(23,59,59,999),e}function wme(t){const e=ct(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Sme(t){const e=ct(t);return+xme(e)==+wme(e)}function _me(t,e){const r=ct(t),n=ct(e),i=Ju(r,n),s=Math.abs(gme(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=Ju(r,n)===-i;Sme(ct(t))&&s===1&&Ju(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Eme(t,e,r){const n=bme(t,e)/1e3;return vme(r==null?void 0:r.roundingMethod)(n)}function x1(t,e){const r=ct(t),n=ct(e),i=Ju(r,n),s=Math.abs(yme(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=Ju(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Nme(t){const e=ct(t),r=Io(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Cme={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kme=(t,e,r)=>{let n;const i=Cme[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function w1(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Tme={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ome={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jme={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pme={date:w1({formats:Tme,defaultWidth:"full"}),time:w1({formats:Ome,defaultWidth:"full"}),dateTime:w1({formats:jme,defaultWidth:"full"})},Ime={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Rme=(t,e,r,n)=>Ime[t];function Gh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Mme={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ame={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Dme={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$me={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Fme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Lme=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Bme={ordinalNumber:Lme,era:Gh({values:Mme,defaultWidth:"wide"}),quarter:Gh({values:Ame,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Gh({values:Dme,defaultWidth:"wide"}),day:Gh({values:$me,defaultWidth:"wide"}),dayPeriod:Gh({values:Fme,defaultWidth:"wide",formattingValues:qme,defaultFormattingWidth:"wide"})};function Yh(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Vme(a,h=>h.test(o)):zme(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function zme(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Vme(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Ume(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Hme=/^(\d+)(th|st|nd|rd)?/i,Wme=/\d+/i,Kme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Gme={any:[/^b/i,/^(a|c)/i]},Yme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qme={any:[/1/i,/2/i,/3/i,/4/i]},Xme={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Jme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Zme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ege={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},tge={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rge={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nge={ordinalNumber:Ume({matchPattern:Hme,parsePattern:Wme,valueCallback:t=>parseInt(t,10)}),era:Yh({matchPatterns:Kme,defaultMatchWidth:"wide",parsePatterns:Gme,defaultParseWidth:"any"}),quarter:Yh({matchPatterns:Yme,defaultMatchWidth:"wide",parsePatterns:Qme,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Yh({matchPatterns:Xme,defaultMatchWidth:"wide",parsePatterns:Jme,defaultParseWidth:"any"}),day:Yh({matchPatterns:Zme,defaultMatchWidth:"wide",parsePatterns:ege,defaultParseWidth:"any"}),dayPeriod:Yh({matchPatterns:tge,defaultMatchWidth:"any",parsePatterns:rge,defaultParseWidth:"any"})},Zte={code:"en-US",formatDistance:kme,formatLong:Pme,formatRelative:Rme,localize:Bme,match:nge,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ige(t){const e=ct(t);return hme(e,Nme(e))+1}function sge(t){const e=ct(t),r=+Gy(e)-+fme(e);return Math.round(r/Gte)+1}function ere(t,e){var d,h,f,p;const r=ct(t),n=r.getFullYear(),i=tm(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Io(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Ec(o,e),l=Io(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=Ec(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function oge(t,e){var a,l,c,d;const r=tm(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=ere(t,e),s=Io(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Ec(s,e)}function age(t,e){const r=ct(t),n=+Ec(r,e)-+oge(r,e);return Math.round(n/Gte)+1}function yt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Wo={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return yt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):yt(r+1,2)},d(t,e){return yt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return yt(t.getHours()%12||12,e.length)},H(t,e){return yt(t.getHours(),e.length)},m(t,e){return yt(t.getMinutes(),e.length)},s(t,e){return yt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return yt(i,e.length)}},fu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},HF={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Wo.y(t,e)},Y:function(t,e,r,n){const i=ere(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return yt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):yt(s,e.length)},R:function(t,e){const r=Xte(t);return yt(r,e.length)},u:function(t,e){const r=t.getFullYear();return yt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return yt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return yt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Wo.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return yt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=age(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):yt(i,e.length)},I:function(t,e,r){const n=sge(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):yt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Wo.d(t,e)},D:function(t,e,r){const n=ige(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):yt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return yt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return yt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return yt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=fu.noon:n===0?i=fu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=fu.evening:n>=12?i=fu.afternoon:n>=4?i=fu.morning:i=fu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Wo.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Wo.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):yt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):yt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Wo.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Wo.s(t,e)},S:function(t,e){return Wo.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return KF(n);case"XXXX":case"XX":return Cl(n);case"XXXXX":case"XXX":default:return Cl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return KF(n);case"xxxx":case"xx":return Cl(n);case"xxxxx":case"xxx":default:return Cl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+WF(n,":");case"OOOO":default:return"GMT"+Cl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+WF(n,":");case"zzzz":default:return"GMT"+Cl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return yt(n,e.length)},T:function(t,e,r){const n=t.getTime();return yt(n,e.length)}};function WF(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+yt(s,2)}function KF(t,e){return t%60===0?(t>0?"-":"+")+yt(Math.abs(t)/60,2):Cl(t,e)}function Cl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=yt(Math.trunc(n/60),2),s=yt(n%60,2);return r+i+e+s}const GF=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tre=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},lge=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return GF(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",GF(n,e)).replace("{{time}}",tre(i,e))},cge={p:tre,P:lge},uge=/^D+$/,dge=/^Y+$/,hge=["D","DD","YY","YYYY"];function fge(t){return uge.test(t)}function pge(t){return dge.test(t)}function mge(t,e,r){const n=gge(t,e,r);if(console.warn(n),hge.includes(t))throw new RangeError(n)}function gge(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yge=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vge=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bge=/^'([^]*?)'?$/,xge=/''/g,wge=/[a-zA-Z]/;function Tn(t,e,r){var d,h,f,p;const n=tm(),i=n.locale??Zte,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=ct(t);if(!mme(a))throw new RangeError("Invalid time value");let l=e.match(vge).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=cge[g];return v(m,i.formatLong)}return m}).join("").match(yge).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Sge(m)};if(HF[g])return{isToken:!0,value:m};if(g.match(wge))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(pge(g)||fge(g))&&mge(g,e,String(t));const v=HF[g[0]];return v(a,g,i.localize,c)}).join("")}function Sge(t){const e=t.match(bge);return e?e[1].replace(xge,"'"):t}function _ge(t,e,r){const n=tm(),i=(r==null?void 0:r.locale)??n.locale??Zte,s=2520,o=Ju(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,c;o>0?(l=ct(e),c=ct(t)):(l=ct(t),c=ct(e));const d=Eme(c,l),h=(Qy(c)-Qy(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<UF){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<xg){const m=Math.round(f/UF);return i.formatDistance("xDays",m,a)}else if(f<xg*2)return p=Math.round(f/xg),i.formatDistance("aboutXMonths",p,a)}if(p=_me(c,l),p<12){const m=Math.round(f/xg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function Ege(t,e){return _ge(t,P0(t),e)}function Nge(t,e){const r=ct(t),n=ct(e);return r.getTime()>n.getTime()}function Cge(t,e,r){const n=Ec(t,r),i=Ec(e,r);return+n==+i}function kge(t,e){return Cge(t,P0(t),e)}function rre(t){return Jte(t,P0(t))}function nre(t,e){return cme(t,-e)}function ire(t){return Jte(t,nre(P0(t),1))}function dp(t,e){const n=Pge(t);let i;if(n.date){const l=Ige(n.date,2);i=Rge(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=Mge(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=Age(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const wg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Tge=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Oge=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,jge=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Pge(t){const e={},r=t.split(wg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],wg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(wg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=wg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function Ige(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function Rge(t,e){if(e===null)return new Date(NaN);const r=t.match(Tge);if(!r)return new Date(NaN);const n=!!r[4],i=Qh(r[1]),s=Qh(r[2])-1,o=Qh(r[3]),a=Qh(r[4]),l=Qh(r[5])-1;if(n)return Lge(e,a,l)?Dge(e,a,l):new Date(NaN);{const c=new Date(0);return!Fge(e,s,o)||!qge(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Qh(t){return t?parseInt(t):1}function Mge(t){const e=t.match(Oge);if(!e)return NaN;const r=S1(e[1]),n=S1(e[2]),i=S1(e[3]);return Bge(r,n,i)?r*Qte+n*Yte+i*1e3:NaN}function S1(t){return t&&parseFloat(t.replace(",","."))||0}function Age(t){if(t==="Z")return 0;const e=t.match(jge);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return zge(n,i)?r*(n*Qte+i*Yte):NaN}function Dge(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const $ge=[31,null,31,30,31,30,31,31,30,31,30,31];function sre(t){return t%400===0||t%4===0&&t%100!==0}function Fge(t,e,r){return e>=0&&e<=11&&r>=1&&r<=($ge[e]||(sre(t)?29:28))}function qge(t,e){return e>=1&&e<=(sre(t)?366:365)}function Lge(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Bge(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function zge(t,e){return e>=0&&e<=59}function Vge(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}dp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=dp(n);rre(i)?e.today.push(r):ire(i)?e.yesterday.push(r):kge(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function Uge(t){if(!t)return"";try{const e=dp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return rre(e)?Ege(e,{addSuffix:!0}):ire(e)?r?Tn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":Tn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function Hge(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function Wge(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function rm(t){if(!t.due_date||t.is_completed)return!1;try{const e=dp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function Kge(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):rm(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function EM({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[u.jsx($s,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),u.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[u.jsx(O0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),u.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var ore={exports:{}},are={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd=T;function Gge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yge=typeof Object.is=="function"?Object.is:Gge,Qge=Rd.useState,Xge=Rd.useEffect,Jge=Rd.useLayoutEffect,Zge=Rd.useDebugValue;function eye(t,e){var r=e(),n=Qge({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return Jge(function(){i.value=r,i.getSnapshot=e,_1(i)&&s({inst:i})},[t,r,e]),Xge(function(){return _1(i)&&s({inst:i}),t(function(){_1(i)&&s({inst:i})})},[t]),Zge(r),r}function _1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Yge(t,r)}catch{return!0}}function tye(t,e){return e()}var rye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tye:eye;are.useSyncExternalStore=Rd.useSyncExternalStore!==void 0?Rd.useSyncExternalStore:rye;ore.exports=are;var NM=ore.exports;function tn(t){this.content=t}tn.prototype={constructor:tn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new tn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new tn(r)},addToStart:function(t,e){return new tn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new tn(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new tn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=tn.from(t),t.size?new tn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=tn.from(t),t.size?new tn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=tn.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};tn.from=function(t){if(t instanceof tn)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new tn(e)};function lre(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=lre(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function cre(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=cre(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class Q{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Q(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new Q(n,i)}cutByIndex(e,r){return e==r?Q.empty:e==0&&r==this.content.length?this:new Q(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new Q(i,s)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return lre(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return cre(this,e,r,n)}findIndex(e){if(e==0)return Sg(0,e);if(e==this.size)return Sg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?Sg(r+1,s):Sg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return Q.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new Q(r||e,n)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const E1={index:0,offset:0};function Sg(t,e){return E1.index=t,E1.offset=e,E1}function Xy(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Xy(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Xy(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Et=class cI{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Xy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return cI.none;if(e instanceof cI)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Et.none=[];class Jy extends Error{}class pe{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=dre(this.content,e+this.openStart,r);return n&&new pe(n,this.openStart,this.openEnd)}removeBetween(e,r){return new pe(ure(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return pe.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new pe(Q.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new pe(e,n,i)}}pe.empty=new pe(Q.empty,0,0);function ure(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(ure(s.content,e-i-1,r-i-1)))}function dre(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=dre(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function nye(t,e,r){if(r.openStart>t.depth)throw new Jy("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Jy("Inconsistent open depths");return hre(t,e,r,0)}function hre(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=hre(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return tc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=iye(r,t);return tc(s,pre(t,o,a,e,n))}else return tc(s,Zy(t,e,n))}function fre(t,e){if(!e.type.compatibleContent(t.type))throw new Jy("Cannot join "+e.type.name+" onto "+t.type.name)}function uI(t,e,r){let n=t.node(r);return fre(n,e.node(r)),n}function ec(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function kf(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(ec(t.nodeAfter,n),s++));for(let a=s;a<o;a++)ec(i.child(a),n);e&&e.depth==r&&e.textOffset&&ec(e.nodeBefore,n)}function tc(t,e){return t.type.checkContent(e),t.copy(e)}function pre(t,e,r,n,i){let s=t.depth>i&&uI(t,e,i+1),o=n.depth>i&&uI(r,n,i+1),a=[];return kf(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(fre(s,o),ec(tc(s,pre(t,e,r,n,i+1)),a)):(s&&ec(tc(s,Zy(t,e,i+1)),a),kf(e,r,i,a),o&&ec(tc(o,Zy(r,n,i+1)),a)),kf(n,null,i,a),new Q(a)}function Zy(t,e,r){let n=[];if(kf(null,t,r,n),t.depth>r){let i=uI(t,e,r+1);ec(tc(i,Zy(t,e,r+1)),n)}return kf(e,null,r,n),new Q(n)}function iye(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(Q.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class hp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Et.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new ev(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new hp(r,n,s)}static resolveCached(e,r){let n=YF.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else YF.set(e,n=new sye);let i=n.elts[n.i]=hp.resolve(e,r);return n.i=(n.i+1)%oye,i}}class sye{constructor(){this.elts=[],this.i=0}}const oye=12,YF=new WeakMap;class ev{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const aye=Object.create(null);let qa=class dI{constructor(e,r,n,i=Et.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||Q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Xy(this.attrs,r||e.defaultAttrs||aye)&&Et.sameSet(this.marks,n||Et.none)}copy(e=null){return e==this.content?this:new dI(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new dI(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return pe.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new pe(c,i.depth-o,s.depth-o)}replace(e,r,n){return nye(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return hp.resolveCached(this,e)}resolveNoCache(e){return hp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),mre(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=Q.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Et.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Et.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=Q.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};qa.prototype.text=void 0;class tv extends qa{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):mre(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new tv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new tv(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function mre(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Nc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new lye(e,r);if(n.next==null)return Nc.empty;let i=gre(n);n.next&&n.err("Unexpected trailing text");let s=mye(pye(i));return gye(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return Q.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:h}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Nc.empty=new Nc(!0);class lye{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function gre(t){let e=[];do e.push(cye(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function cye(t){let e=[];do e.push(uye(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function uye(t){let e=fye(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=dye(t,e);else break;return e}function QF(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function dye(t,e){let r=QF(t),n=r;return t.eat(",")&&(t.next!="}"?n=QF(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function hye(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function fye(t){if(t.eat("(")){let e=gre(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=hye(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function pye(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function yre(t,e){return e-t}function XF(t,e){let r=[];return n(e),r.sort(yre);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function mye(t){let e=Object.create(null);return r(XF(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<i.length;d++)i[d][0]==a&&(c=i[d][1]);XF(t,l).forEach(d=>{c||i.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[n.join(",")]=new Nc(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(yre);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function gye(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function vre(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function bre(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function xre(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function wre(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new vye(t,n,e[n]);return r}let JF=class Sre{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=wre(e,n.attrs),this.defaultAttrs=vre(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Nc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:bre(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new qa(this,this.computeAttrs(e),Q.from(r),Et.setFrom(n))}createChecked(e=null,r,n){return r=Q.from(r),this.checkContent(r),new qa(this,this.computeAttrs(e),r,Et.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=Q.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(Q.empty,!0);return s?new qa(this,e,r.append(s),Et.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){xre(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Et.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new Sre(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function yye(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class vye{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?yye(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class I0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=wre(e,i.attrs),this.excluded=null;let s=vre(this.attrs);this.instance=s?new Et(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Et(this,bre(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new I0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){xre(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class _re{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=tn.from(e.nodes),r.marks=tn.from(e.marks||{}),this.nodes=JF.compile(this.spec.nodes,this),this.marks=I0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Nc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?ZF(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:ZF(this,o.split(" "))}this.nodeFromJSON=i=>qa.fromJSON(this,i),this.markFromJSON=i=>Et.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof JF){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new tv(n,n.defaultAttrs,e,Et.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function ZF(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function bye(t){return t.tag!=null}function xye(t){return t.style!=null}class La{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(bye(i))this.tags.push(i);else if(xye(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new t4(this,r,!1);return n.addAll(e,Et.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new t4(this,r,!0);return n.addAll(e,Et.none,r.from,r.to),pe.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(_ye(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=r4(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=r4(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new La(e,La.schemaRules(e)))}}const Ere={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wye={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Nre={ol:!0,ul:!0},fp=1,hI=2,Tf=4;function e4(t,e,r){return e!=null?(e?fp:0)|(e==="full"?hI:0):t&&t.whitespace=="pre"?fp|hI:r&~Tf}class _g{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Et.none,this.match=s||(o&Tf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Q.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&fp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=Q.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Ere.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class t4{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=e4(null,r.preserveWhitespace,0)|(n?Tf:0);i?s=new _g(i.type,i.attrs,Et.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new _g(null,null,Et.none,!0,null,o):s=new _g(e.schema.topNodeType,null,Et.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&hI?"full":this.localPreserveWS||(i.options&fp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;Nre.hasOwnProperty(o)&&this.parser.normalizeLists&&Sye(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:wye.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(Ere.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,r);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Et.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):n4(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=e4(e,s,o.options);o.options&Tf&&o.content.length==0&&(a|=Tf);let l=Et.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):n4(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new _g(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=fp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Sye(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&Nre.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function _ye(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function r4(t){let e={};for(let r in t)e[r]=t[r];return e}function n4(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Bc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=N1(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,r);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=ay(N1(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&ay(N1(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return ay(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Bc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=i4(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return i4(e.marks)}}function i4(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function N1(t){return t.document||window.document}const s4=new WeakMap;function Eye(t){let e=s4.get(t);return e===void 0&&s4.set(t,e=Nye(t)),e}function Nye(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function ay(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=Eye(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=ay(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const Cre=65535,kre=Math.pow(2,16);function Cye(t,e){return t+e*kre}function o4(t){return t&Cre}function kye(t){return(t-(t&Cre))/kre}const Tre=1,Ore=2,ly=4,jre=8;class fI{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&jre)>0}get deletedBefore(){return(this.delInfo&(Tre|ly))>0}get deletedAfter(){return(this.delInfo&(Ore|ly))>0}get deletedAcross(){return(this.delInfo&ly)>0}}class hi{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&hi.empty)return hi.empty}recover(e){let r=0,n=o4(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+kye(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:Cye(a/3,e-l),g=e==l?Ore:e==h?Tre:ly;return(r<0?e!=l:e!=h)&&(g|=jre),new fI(p,g,m)}i+=d-c}return n?e+i:new fI(e+i,0,null)}touches(e,r){let n=0,i=o4(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],d=this.ranges[i+n];e(a,a+c,l,l+d),s+=d-c}}invert(){return new hi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?hi.empty:new hi(e<0?[0,-e,0]:[0,0,e])}}hi.empty=new hi([]);class pp{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new pp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new pp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new fI(e,i,null)}}const C1=Object.create(null);class wn{getMap(){return hi.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=C1[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in C1)throw new RangeError("Duplicate use of step JSON ID "+e);return C1[e]=r,r.prototype.jsonID=e,r}}class vr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new vr(e,null)}static fail(e){return new vr(null,e)}static fromReplace(e,r,n,i){try{return vr.ok(e.replace(r,n,i))}catch(s){if(s instanceof Jy)return vr.fail(s.message);throw s}}}function CM(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(CM(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return Q.fromArray(n)}class Na extends wn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new pe(CM(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return vr.fromReplace(e,this.from,this.to,s)}invert(){return new cs(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Na(r.pos,n.pos,this.mark)}merge(e){return e instanceof Na&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Na(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Na(r.from,r.to,e.markFromJSON(r.mark))}}wn.jsonID("addMark",Na);class cs extends wn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new pe(CM(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return vr.fromReplace(e,this.from,this.to,n)}invert(){return new Na(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new cs(r.pos,n.pos,this.mark)}merge(e){return e instanceof cs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new cs(r.from,r.to,e.markFromJSON(r.mark))}}wn.jsonID("removeMark",cs);class Ca extends wn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return vr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return vr.fromReplace(e,this.pos,this.pos+1,new pe(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Ca(this.pos,r.marks[i]);return new Ca(this.pos,this.mark)}}return new Cc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Ca(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ca(r.pos,e.markFromJSON(r.mark))}}wn.jsonID("addNodeMark",Ca);class Cc extends wn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return vr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return vr.fromReplace(e,this.pos,this.pos+1,new pe(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Ca(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Cc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Cc(r.pos,e.markFromJSON(r.mark))}}wn.jsonID("removeNodeMark",Cc);class Br extends wn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&pI(e,this.from,this.to)?vr.fail("Structure replace would overwrite content"):vr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new hi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Br(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Br(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Br)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?pe.empty:new pe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Br(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?pe.empty:new pe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Br(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Br(r.from,r.to,pe.fromJSON(e,r.slice),!!r.structure)}}wn.jsonID("replace",Br);class Ur extends wn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(pI(e,this.from,this.gapFrom)||pI(e,this.gapTo,this.to)))return vr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return vr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?vr.fromReplace(e,this.from,this.to,n):vr.fail("Content does not fit in gap")}getMap(){return new hi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Ur(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Ur(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ur(r.from,r.to,r.gapFrom,r.gapTo,pe.fromJSON(e,r.slice),r.insert,!!r.structure)}}wn.jsonID("replaceAround",Ur);function pI(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Tye(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,c,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new cs(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new Na(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Oye(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof I0){let c=o.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new cs(o.from,o.to,o.style)))}function kM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,h=n.matchType(c.type);if(!h)o.push(new Br(a,d,pe.empty));else{n=h;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||t.step(new cs(a,d,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new pe(Q.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new Br(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(Q.empty,!0);t.replace(a,a,new pe(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function jye(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function nh(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!jye(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function Pye(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,c=a,d=Q.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=Q.from(n.node(m).copy(d)),h++):l--;let f=Q.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=Q.from(i.node(m).copy(f)),p++):c++;t.step(new Ur(l,c,o,a,new pe(d.append(f),h,p),d.size-h,!0))}function TM(t,e,r=null,n=t){let i=Iye(t,e),s=i&&Rye(n,e);return s?i.map(a4).concat({type:e,attrs:r}).concat(s.map(a4)):null}function a4(t){return{type:t,attrs:null}}function Iye(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function Rye(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function Mye(t,e,r){let n=Q.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Q.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Ur(i,s,i,s,new pe(n,0,0),r.length,!0))}function Aye(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&Dye(t.doc,t.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&Ire(t,o,a,s),kM(t,t.mapping.slice(s).map(a,1),n,void 0,c===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new Ur(h,f,h+1,f-1,new pe(Q.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&Pre(t,o,a,s),!1}})}function Pre(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Ire(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Dye(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function $ye(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Ur(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new pe(Q.from(o),0,0),1,!0))}function go(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>s;c--,d--){let h=i.node(c),f=i.index(c);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Fye(t,e,r=1,n){let i=t.doc.resolve(e),s=Q.empty,o=Q.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=Q.from(i.node(a).copy(s));let d=n&&n[c];o=Q.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new Br(e,e,new pe(s.append(o),r,r),!0))}function ll(t,e){let r=t.resolve(e),n=r.index();return Rre(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function qye(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function Rre(t,e){return!!(t&&e&&!t.isLeaf&&qye(t,e))}function R0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&Rre(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function Lye(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);Ire(t,d.node(),d.before(),a)}o.inlineContent&&kM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),c=l.map(e-r);if(t.step(new Br(c,l.map(e+r,-1),pe.empty,!0)),n===!0){let d=t.doc.resolve(c);Pre(t,d.node(),d.before(),t.steps.length)}return t}function Bye(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function Mre(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),d=!1;if(s==1)d=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&c.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function M0(t,e,r=e,n=pe.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return Are(i,s,n)?new Br(e,r,n):new zye(i,s,n).fit()}function Are(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class zye{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=Q.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new pe(s,o,a);return e>-1?new Ur(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Br(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=k1(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,h=null;if(r==1&&(o?c.matchType(o.type)||(h=c.fillBefore(Q.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=k1(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new pe(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=k1(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new pe(df(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new pe(df(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),v=h.matchType(g.type);if(!v)break;c++,(c>1||l==0||g.content.size)&&(h=v,d.push(Dre(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=hf(this.placed,r,Q.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<p;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?pe.empty:new pe(df(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new pe(df(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!T1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=T1(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=T1(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=hf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=hf(this.placed,this.depth,Q.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Q.empty,!0);r.childCount&&(this.placed=hf(this.placed,this.frontier.length,r))}}function df(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(df(t.firstChild.content,e-1,r)))}function hf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(hf(t.lastChild.content,e-1,r)))}function k1(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function Dre(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,Dre(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(Q.empty,!0)))),t.copy(n)}function T1(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!Vye(r,s.content,o)?a:null}function Vye(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Uye(t){return t.spec.defining||t.spec.definingForContent}function Hye(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(Are(i,s,n))return t.step(new Br(e,r,n));let o=Fre(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=c[f],m=Uye(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let v=o[(g+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let b=i.node(v-1),w=i.index(v-1);if(b.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(v),y?s.after(v):r,new pe($re(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function $re(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy($re(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Q.empty,!0))}return t}function Wye(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Bye(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new pe(Q.from(n),0,0))}function Kye(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=Fre(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function Fre(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class Zu extends wn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return vr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return vr.fromReplace(e,this.pos,this.pos+1,new pe(Q.from(i),0,r.isLeaf?0:1))}getMap(){return hi.empty}invert(e){return new Zu(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Zu(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Zu(r.pos,r.attr,r.value)}}wn.jsonID("attr",Zu);class mp extends wn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return vr.ok(n)}getMap(){return hi.empty}invert(e){return new mp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new mp(r.attr,r.value)}}wn.jsonID("docAttr",mp);let Md=class extends Error{};Md=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Md.prototype=Object.create(Error.prototype);Md.prototype.constructor=Md;Md.prototype.name="TransformError";class qre{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Md(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=pe.empty){let i=M0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new pe(Q.from(n),0,0))}delete(e,r){return this.replace(e,r,pe.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return Hye(this,e,r,n),this}replaceRangeWith(e,r,n){return Wye(this,e,r,n),this}deleteRange(e,r){return Kye(this,e,r),this}lift(e,r){return Pye(this,e,r),this}join(e,r=1){return Lye(this,e,r),this}wrap(e,r){return Mye(this,e,r),this}setBlockType(e,r=e,n,i=null){return Aye(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return $ye(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new Zu(e,r,n)),this}setDocAttribute(e,r){return this.step(new mp(e,r)),this}addNodeMark(e,r){return this.step(new Ca(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Et)r.isInSet(n.marks)&&this.step(new Cc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Cc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return Fye(this,e,r,n),this}addMark(e,r,n){return Tye(this,e,r,n),this}removeMark(e,r,n){return Oye(this,e,r,n),this}clearIncompatible(e,r,n){return kM(this,e,r,n),this}}const O1=Object.create(null);class He{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new Gye(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=pe.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?pe.empty:r),a==0&&u4(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),c=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,r),u4(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new Fe(e):xu(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?xu(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):xu(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new gi(e.node(0))}static atStart(e){return xu(e,e,0,0,1)||new gi(e)}static atEnd(e){return xu(e,e,e.content.size,e.childCount,-1)||new gi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=O1[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in O1)throw new RangeError("Duplicate use of selection JSON ID "+e);return O1[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Fe.between(this.$anchor,this.$head).getBookmark()}}He.prototype.visible=!0;class Gye{constructor(e,r){this.$from=e,this.$to=r}}let l4=!1;function c4(t){!l4&&!t.parent.inlineContent&&(l4=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Fe extends He{constructor(e,r=e){c4(e),c4(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return He.near(n);let i=e.resolve(r.map(this.anchor));return new Fe(i.parent.inlineContent?i:n,n)}replace(e,r=pe.empty){if(super.replace(e,r),r==pe.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Fe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new A0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Fe(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=He.findFrom(r,n,!0)||He.findFrom(r,-n,!0);if(s)r=s.$head;else return He.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(He.findFrom(e,-n,!0)||He.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new Fe(e,r)}}He.jsonID("text",Fe);class A0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new A0(e.map(this.anchor),e.map(this.head))}resolve(e){return Fe.between(e.resolve(this.anchor),e.resolve(this.head))}}class je extends He{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?He.near(s):new je(s)}content(){return new pe(Q.from(this.node),0,0)}eq(e){return e instanceof je&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new OM(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new je(e.resolve(r.anchor))}static create(e,r){return new je(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}je.prototype.visible=!1;He.jsonID("node",je);class OM{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new A0(n,n):new OM(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&je.isSelectable(n)?new je(r):He.near(r)}}class gi extends He{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=pe.empty){if(r==pe.empty){e.delete(0,e.doc.content.size);let n=He.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new gi(e)}map(e){return new gi(e)}eq(e){return e instanceof gi}getBookmark(){return Yye}}He.jsonID("all",gi);const Yye={map(){return this},resolve(t){return new gi(t)}};function xu(t,e,r,n,i,s=!1){if(e.inlineContent)return Fe.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&je.isSelectable(a))return je.create(t,r-(i<0?a.nodeSize:0))}else{let l=xu(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function u4(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof Br||i instanceof Ur))return;let s=t.mapping.maps[n],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(He.near(t.doc.resolve(o),r))}const d4=1,Eg=2,h4=4;class Qye extends qre{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|d4)&~Eg,this.storedMarks=null,this}get selectionSet(){return(this.updated&d4)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Eg,this}ensureMarks(e){return Et.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Eg)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~Eg,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Et.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(He.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=h4,this}get scrolledIntoView(){return(this.updated&h4)>0}}function f4(t,e){return!e||!t?t:t.bind(e)}class ff{constructor(e,r,n){this.name=e,this.init=f4(r.init,n),this.apply=f4(r.apply,n)}}const Xye=[new ff("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new ff("selection",{init(t,e){return t.selection||He.atStart(e.doc)},apply(t){return t.selection}}),new ff("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new ff("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class j1{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Xye.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new ff(n.key,n.spec.state,n))})}}class $u{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new $u(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new Qye(this)}static create(e){let r=new j1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new $u(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new j1(this.schema,e.plugins),n=r.fields,i=new $u(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new j1(e.schema,e.plugins),s=new $u(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=qa.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=He.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Lre(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=Lre(i,e,{})),r[n]=i}return r}class Yt{constructor(e){this.spec=e,this.props={},e.props&&Lre(e.props,this,this.props),this.key=e.key?e.key.key:Bre("plugin")}getState(e){return e[this.key]}}const P1=Object.create(null);function Bre(t){return t in P1?t+"$"+ ++P1[t]:(P1[t]=0,t+"$")}class Rr{constructor(e="key"){this.key=Bre(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const jM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function zre(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const Vre=(t,e,r)=>{let n=zre(t,r);if(!n)return!1;let i=PM(n);if(!i){let o=n.blockRange(),a=o&&nh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Jre(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Ad(s,"end")||je.isSelectable(s)))for(let o=n.depth;;o--){let a=M0(t.doc,n.before(o),n.after(o),pe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ad(s,"end")?He.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):je.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Jye=(t,e,r)=>{let n=zre(t,r);if(!n)return!1;let i=PM(n);return i?Ure(t,i,e):!1},Zye=(t,e,r)=>{let n=Wre(t,r);if(!n)return!1;let i=IM(n);return i?Ure(t,i,e):!1};function Ure(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=M0(t.doc,s,l,pe.empty);if(!c||c.from!=s||c instanceof Br&&c.slice.size>=l-s)return!1;if(r){let d=t.tr.step(c);d.setSelection(Fe.create(d.doc,s)),r(d.scrollIntoView())}return!0}function Ad(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const Hre=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=PM(n)}let o=s&&s.nodeBefore;return!o||!je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(je.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function PM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Wre(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const Kre=(t,e,r)=>{let n=Wre(t,r);if(!n)return!1;let i=IM(n);if(!i)return!1;let s=i.nodeAfter;if(Jre(t,i,e,1))return!0;if(n.parent.content.size==0&&(Ad(s,"start")||je.isSelectable(s))){let o=M0(t.doc,n.before(),n.after(),pe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ad(s,"start")?He.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):je.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Gre=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=IM(n)}let o=s&&s.nodeAfter;return!o||!je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(je.create(t.doc,s.pos)).scrollIntoView()),!0)};function IM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const eve=(t,e)=>{let r=t.selection,n=r instanceof je,i;if(n){if(r.node.isTextblock||!ll(t.doc,r.from))return!1;i=r.from}else if(i=R0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(je.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},tve=(t,e)=>{let r=t.selection,n;if(r instanceof je){if(r.node.isTextblock||!ll(t.doc,r.to))return!1;n=r.to}else if(n=R0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},rve=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&nh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Yre=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function RM(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const nve=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=RM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(He.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Qre=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof gi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=RM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Fe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Xre=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(go(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&nh(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function ive(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof je&&e.selection.node.isBlock)return!n.parentOffset||!go(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),c=n.start(p)==n.pos-(n.depth-p),a=RM(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof Fe||e.selection instanceof gi)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=go(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=go(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&c&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const sve=ive(),ove=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(je.create(t.doc,i))),!0)};function ave(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||ll(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function Jre(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&ave(t,e,r))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=Q.empty;for(let y=o.length-1;y>=0;y--)m=Q.from(o[y].create(null,m));m=Q.from(i.copy(m));let g=t.tr.step(new Ur(e.pos-1,p,e.pos,p,new pe(m,1,0),o.length,!0)),v=g.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&ll(g.doc,v.pos)&&g.join(v.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:He.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&nh(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&Ad(s,"start",!0)&&Ad(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=Q.empty;for(let w=m.length-1;w>=0;w--)y=Q.from(m[w].copy(y));let b=t.tr.step(new Ur(e.pos-m.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new pe(y,m.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function Zre(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(Fe.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const lve=Zre(-1),cve=Zre(1);function uve(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&TM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function p4(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(c),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function MM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}MM(jM,Vre,Hre);MM(jM,Kre,Gre);MM(Yre,Qre,Xre,sve);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function dve(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return hve(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function hve(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new ev(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new ev(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=TM(s,r,n,e);return a?(t&&fve(t,e,a,i,r),!0):!1}function fve(t,e,r,n,i){let s=Q.empty;for(let d=r.length-1;d>=0;d--)s=Q.from(r[d].type.create(r[d].attrs,s));t.step(new Ur(e.start-(n?2:0),e.end,e.start,e.end,new pe(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),c=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&go(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function pve(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?mve(e,r,t,s):gve(e,r,s):!0:!1}}function mve(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Ur(s-1,o,s,o,new pe(Q.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new ev(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=nh(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return ll(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function gve(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?Q.empty:Q.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new Ur(h-(a?1:0),f+(l?1:0),h+1,f-1,new pe((a?Q.empty:Q.from(i.copy(Q.empty))).append(l?Q.empty:Q.from(i.copy(Q.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function yve(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,d=Q.from(c?t.create():null),h=new pe(Q.from(t.create(null,Q.from(a.type.create(null,d)))),c?3:1,0),f=s.start,p=s.end;r(e.tr.step(new Ur(f-(c?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const rn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Dd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let mI=null;const ro=function(t,e,r){let n=mI||(mI=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},vve=function(){mI=null},kc=function(t,e,r,n){return r&&(m4(t,e,r,n,-1)||m4(t,e,r,n,1))},bve=/^(img|br|input|textarea|hr)$/i;function m4(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Mi(t))){let o=t.parentNode;if(!o||o.nodeType!=1||nm(t)||bve.test(t.nodeName)||t.contentEditable=="false")return!1;e=rn(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Mi(t):0}else return!1}}function Mi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function xve(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Mi(t)}else if(t.parentNode&&!nm(t))e=rn(t),t=t.parentNode;else return null}}function wve(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!nm(t))e=rn(t)+1,t=t.parentNode;else return null}}function Sve(t,e,r){for(let n=e==0,i=e==Mi(t);n||i;){if(t==r)return!0;let s=rn(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Mi(t)}}function nm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const D0=function(t){return t.focusNode&&kc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function kl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function _ve(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Eve(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Mi(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Mi(n.startContainer),n.startOffset)}}}const Bs=typeof navigator<"u"?navigator:null,g4=typeof document<"u"?document:null,cl=Bs&&Bs.userAgent||"",gI=/Edge\/(\d+)/.exec(cl),ene=/MSIE \d/.exec(cl),yI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(cl),ri=!!(ene||yI||gI),Ba=ene?document.documentMode:yI?+yI[1]:gI?+gI[1]:0,qi=!ri&&/gecko\/(\d+)/i.test(cl);qi&&+(/Firefox\/(\d+)/.exec(cl)||[0,0])[1];const vI=!ri&&/Chrome\/(\d+)/.exec(cl),zr=!!vI,tne=vI?+vI[1]:0,xn=!ri&&!!Bs&&/Apple Computer/.test(Bs.vendor),$d=xn&&(/Mobile\/\w+/.test(cl)||!!Bs&&Bs.maxTouchPoints>2),ji=$d||(Bs?/Mac/.test(Bs.platform):!1),rne=Bs?/Win/.test(Bs.platform):!1,uo=/Android \d/.test(cl),im=!!g4&&"webkitFontSmoothing"in g4.documentElement.style,Nve=im?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Cve(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ys(t,e){return typeof t=="number"?t:t[e]}function kve(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function y4(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=Dd(o);continue}let a=o,l=a==s.body,c=l?Cve(s):kve(a),d=0,h=0;if(e.top<c.top+Ys(n,"top")?h=-(c.top-e.top+Ys(i,"top")):e.bottom>c.bottom-Ys(n,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Ys(i,"top")-c.top:e.bottom-c.bottom+Ys(i,"bottom")),e.left<c.left+Ys(n,"left")?d=-(c.left-e.left+Ys(i,"left")):e.right>c.right-Ys(n,"right")&&(d=e.right-c.right+Ys(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Dd(o)}}function Tve(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:nne(t.dom)}}function nne(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Dd(n));return e}function Ove({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;ine(r,n==0?0:n-e)}function ine(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let pu=null;function jve(t){if(t.setActive)return t.setActive();if(pu)return t.focus(pu);let e=nne(t);t.focus(pu==null?{get preventScroll(){return pu={preventScroll:!0},!0}}:void 0),pu||(pu=!1,ine(e,0))}function sne(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=ro(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?Pve(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:sne(r,i)}function Pve(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=Jo(n,1);if(o.top!=o.bottom&&AM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function AM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Ive(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function Rve(t,e,r){let{node:n,offset:i}=sne(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function Mve(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function one(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(AM(e,c))return one(o,e,c)}}if((s=(s+1)%n)==i)break}return t}function Ave(t,e){let r=t.dom.ownerDocument,n,i=0,s=Eve(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!AM(e,c)||(o=one(t.dom,e,c),!o))return null}if(xn)for(let c=o;n&&c;c=Dd(c))c.draggable&&(n=void 0);if(o=Ive(o,e),n){if(qi&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;im&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=Mve(t,n,i,e))}a==null&&(a=Rve(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function v4(t){return t.top<t.bottom||t.left<t.right}function Jo(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(v4(n))return n}return Array.prototype.find.call(r,v4)||t.getBoundingClientRect()}const Dve=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ane(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=im||qi;if(n.nodeType==3)if(o&&(Dve.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=Jo(ro(n,i,i),r);if(qi&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=Jo(ro(n,i-1,i-1),-1);if(c.top==l.top){let d=Jo(ro(n,i,i+1),-1);if(d.top!=l.top)return Xh(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,Xh(Jo(ro(n,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Mi(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return I1(l.getBoundingClientRect(),!1)}if(s==null&&i<Mi(n)){let l=n.childNodes[i];if(l.nodeType==1)return I1(l.getBoundingClientRect(),!0)}return I1(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Mi(n))){let l=n.childNodes[i-1],c=l.nodeType==3?ro(l,Mi(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Xh(Jo(c,1),!1)}if(s==null&&i<Mi(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?ro(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Xh(Jo(c,-1),!0)}return Xh(Jo(n.nodeType==3?ro(n):n,-r),r>=0)}function Xh(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function I1(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function lne(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function $ve(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return lne(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=ane(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=ro(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const Fve=/[\u0590-\u08ac]/;function qve(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!Fve.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:lne(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(d,h),l&&(l!=d||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),v}):n.pos==n.start()||n.pos==n.end()}let b4=null,x4=null,w4=!1;function Lve(t,e,r){return b4==e&&x4==r?w4:(b4=e,x4=r,w4=r=="up"||r=="down"?$ve(t,e,r):qve(t,e,r))}const Li=0,S4=1,Rl=2,zs=3;class sm{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Li,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>rn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof une){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof cne&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?rn(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?rn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let d=o+l.border;if(e>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=rn(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=rn(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(s>m&&o<v)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=v}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((qi||xn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:rn(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(qi&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&xn)&&kc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&kc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((c.extend||e==r)&&!(h&&qi)){c.collapse(a.node,a.offset);try{e!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?Rl:S4,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=zs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Rl:zs}n=o}this.dirty=Rl}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Rl:S4;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class cne extends sm{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Li&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Bve extends sm{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Tc extends sm{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Bc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Tc(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&zs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=zs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Li){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Li}}slice(e,r,n){let i=Tc.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=xI(s,r,o,n)),e>0&&(s=xI(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class za extends sm{constructor(e,r,n,i,s,o,a,l,c){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,h=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=Bc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=fne(d,n,r),c?l=new zve(e,r,n,i,d,h||null,f,c,s,o+1):r.isText?new $0(e,r,n,i,d,f,s):new za(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,r,n){return this.dirty==Li&&e.eq(this.node)&&rv(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Uve(this,o&&o.node,e);Kve(this.node,this.innerDeco,(c,d,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Et.none:this.node.child(d).marks,n,e),l.placeWidget(c,e,i)},(c,d,h,f)=>{l.syncToMarks(c.marks,n,e);let p;l.findNodeMatch(c,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,h,p,e)||l.updateNextNode(c,d,h,e,f,i)||l.addNode(c,d,h,e,i),i+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Rl)&&(o&&this.protectLocalComposition(e,o),dne(this.contentDOM,this.children,e),$d&&Gve(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof Fe)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=Yve(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Bve(this,s,r,i);e.input.compositionNodes.push(o),this.children=xI(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==zs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Li}updateOuterDeco(e){if(rv(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=hne(this.dom,this.nodeDOM,bI(this.outerDeco,this.node,r),bI(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function _4(t,e,r,n,i){fne(n,e,t);let s=new za(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class $0 extends za{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==zs||this.dirty!=Li&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Li||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Li,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new $0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=zs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class une extends sm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Li&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class zve extends za{constructor(e,r,n,i,s,o,a,l,c,d){super(e,r,n,i,s,o,a,c,d),this.spec=l}update(e,r,n,i){if(this.dirty==zs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function dne(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=E4(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Tc){let l=n?n.previousSibling:t.lastChild;dne(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=E4(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const Of=function(t){t&&(this.nodeName=t)};Of.prototype=Object.create(null);const Ml=[new Of];function bI(t,e,r){if(t.length==0)return Ml;let n=r?Ml[0]:new Of,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new Of(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new Of(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function hne(t,e,r,n){if(r==Ml&&n==Ml)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Ml[0]),i=l}Vve(i,a||Ml[0],o)}return i}function Vve(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function fne(t,e,r){return hne(t,t,Ml,bI(e,r,t.nodeType!=1))}function rv(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function E4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Uve{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Hve(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Li,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Tc.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==zs&&o.dom==o.contentDOM&&(o.dirty=Rl),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof za){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=zs&&rv(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Rl,h.updateChildren(i,o+1),h.dirty=Li),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!rv(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=za.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=za.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new cne(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Tc;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof $0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((xn||zr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new une(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Hve(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof Tc)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function Wve(t,e){return t.type.side-e.type.side}function Kve(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);n(d,i,e.forChild(s,d),c),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(d?(h||(h=[d])).push(v):d=v)}if(d)if(h){h.sort(Wve);for(let v=0;v<h.length;v++)r(h[v],c,!!l)}else r(d,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let v=m;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<m&&(l=f.cut(v-s),f=f.cut(0,v-s),m=v,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function Gve(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Yve(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=r)return a+c;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function xI(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=r||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-c,l.size,n)))}return s}function DM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(D0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&je.isSelectable(h)&&i.parent&&!(h.isInline&&Sve(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new je(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=$M(t,d,a,h)}return c}function pne(t){return t.editable?t.hasFocus():gne(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function yo(t,e=!1){let r=t.state.selection;if(mne(t,r),!!pne(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&zr){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&kc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Xve(t);else{let{anchor:n,head:i}=r,s,o;N4&&!(r instanceof Fe)&&(r.$from.parent.inlineContent||(s=C4(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=C4(t,r.to))),t.docView.setSelection(n,i,t,e),N4&&(s&&k4(s),o&&k4(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Qve(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const N4=xn||zr&&tne<63;function C4(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(xn&&i&&i.contentEditable=="false")return R1(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return R1(i);if(s)return R1(s)}}function R1(t){return t.contentEditable="true",xn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function k4(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Qve(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!pne(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Xve(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,rn(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&ri&&Ba<=11&&(r.disabled=!0,r.disabled=!1)}function mne(t,e){if(e instanceof je){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(T4(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else T4(t)}function T4(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function $M(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||Fe.between(e,r,n)}function O4(t){return t.editable&&!t.hasFocus()?!1:gne(t)}function gne(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Jve(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return kc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function wI(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&He.findFrom(s,e)}function ra(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function j4(t,e,r){let n=t.state.selection;if(n instanceof Fe)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ra(t,new Fe(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=wI(t.state,e);return i&&i instanceof je?ra(t,i):!1}else if(!(ji&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?je.isSelectable(s)?ra(t,new je(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):im?ra(t,new Fe(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof je&&n.node.isInline)return ra(t,new Fe(e>0?n.$to:n.$from));{let i=wI(t.state,e);return i?ra(t,i):!1}}}function nv(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function jf(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function mu(t,e){return e<0?Zve(t):e0e(t)}function Zve(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(qi&&r.nodeType==1&&n<nv(r)&&jf(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(jf(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(yne(r))break;{let a=r.previousSibling;for(;a&&jf(a,-1);)i=r.parentNode,s=rn(a),a=a.previousSibling;if(a)r=a,n=nv(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?SI(t,r,n):i&&SI(t,i,s)}function e0e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=nv(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(jf(a,1))s=r,o=++n;else break}else{if(yne(r))break;{let a=r.nextSibling;for(;a&&jf(a,1);)s=a.parentNode,o=rn(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=nv(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&SI(t,s,o)}function yne(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function t0e(t,e){for(;t&&e==t.childNodes.length&&!nm(t);)e=rn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function r0e(t,e){for(;t&&!e&&!nm(t);)e=rn(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function SI(t,e,r){if(e.nodeType!=3){let s,o;(o=t0e(e,r))?(e=o,r=0):(s=r0e(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(D0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&yo(t)},50)}function P4(t,e){let r=t.state.doc.resolve(e);if(!(zr||rne)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function I4(t,e,r){let n=t.state.selection;if(n instanceof Fe&&!n.empty||r.indexOf("s")>-1||ji&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=wI(t.state,e);if(o&&o instanceof je)return ra(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof gi?He.near(o,e):He.findFrom(o,e);return a?ra(t,a):!1}return!1}function R4(t,e){if(!(t.state.selection instanceof Fe))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function M4(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function n0e(t){if(!xn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;M4(t,n,"true"),setTimeout(()=>M4(t,n,"false"),20)}return!1}function i0e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function s0e(t,e){let r=e.keyCode,n=i0e(e);if(r==8||ji&&r==72&&n=="c")return R4(t,-1)||mu(t,-1);if(r==46&&!e.shiftKey||ji&&r==68&&n=="c")return R4(t,1)||mu(t,1);if(r==13||r==27)return!0;if(r==37||ji&&r==66&&n=="c"){let i=r==37?P4(t,t.state.selection.from)=="ltr"?-1:1:-1;return j4(t,i,n)||mu(t,i)}else if(r==39||ji&&r==70&&n=="c"){let i=r==39?P4(t,t.state.selection.from)=="ltr"?1:-1:1;return j4(t,i,n)||mu(t,i)}else{if(r==38||ji&&r==80&&n=="c")return I4(t,-1,n)||mu(t,-1);if(r==40||ji&&r==78&&n=="c")return n0e(t)||I4(t,1,n)||mu(t,1);if(n==(ji?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function FM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Bc.fromSchema(t.state.schema),a=_ne(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,d,h=0;for(;c&&c.nodeType==1&&(d=Sne[c.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function vne(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new pe(Q.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Bc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=c0e(r),im&&u0e(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||La.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!o0e.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=d0e(A4(a,+d[1],+d[2]),d[4]);else if(a=pe.maxOpen(a0e(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=A4(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const o0e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function a0e(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&xne(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=wne(o[o.length-1],s.length));let d=bne(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return Q.from(o)}return t}function bne(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,Q.from(t));return t}function xne(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=xne(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(Q.from(bne(r,t,i+1))))}}function wne(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,wne(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(Q.empty,!0);return t.copy(r.append(n))}function _I(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=_I(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Q.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function A4(t,e,r){return e<t.openStart&&(t=new pe(_I(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new pe(_I(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const Sne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let D4=null;function _ne(){return D4||(D4=document.implementation.createHTMLDocument("title"))}let M1=null;function l0e(t){let e=window.trustedTypes;return e?(M1||(M1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),M1.createHTML(t)):t}function c0e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=_ne().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&Sne[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=l0e(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function u0e(t){let e=t.querySelectorAll(zr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function d0e(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=Q.from(l.create(n[a+1],i)),s++,o++}return new pe(i,s,o)}const Rn={},Mn={},h0e={touchstart:!0,touchmove:!0};class f0e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function p0e(t){for(let e in Rn){let r=Rn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{g0e(t,n)&&!qM(t,n)&&(t.editable||!(n.type in Mn))&&r(t,n)},h0e[e]?{passive:!0}:void 0)}xn&&t.dom.addEventListener("input",()=>null),EI(t)}function ka(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function m0e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function EI(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>qM(t,n))})}function qM(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function g0e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function y0e(t,e){!qM(t,e)&&Rn[e.type]&&(t.editable||!(e.type in Mn))&&Rn[e.type](t,e)}Mn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!Nne(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(uo&&zr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),$d&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,kl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||s0e(t,r)?r.preventDefault():ka(t,"key")};Mn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Mn.keypress=(t,e)=>{let r=e;if(Nne(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||ji&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Fe)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function F0(t){return{left:t.clientX,top:t.clientY}}function v0e(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function LM(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function ed(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function b0e(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&je.isSelectable(n)?(ed(t,new je(r)),!0):!1}function x0e(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof je&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(je.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(ed(t,je.create(t.state.doc,i)),!0):!1}function w0e(t,e,r,n,i){return LM(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?x0e(t,r):b0e(t,r))}function S0e(t,e,r,n){return LM(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function _0e(t,e,r,n){return LM(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||E0e(t,r,n)}function E0e(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(ed(t,Fe.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)ed(t,Fe.create(n,a+1,a+1+o.content.size));else if(je.isSelectable(o))ed(t,je.create(n,a));else continue;return!0}}function BM(t){return iv(t)}const Ene=ji?"metaKey":"ctrlKey";Rn.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=BM(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&v0e(r,t.input.lastClick)&&!r[Ene]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(F0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new N0e(t,o,r,!!n)):(s=="doubleClick"?S0e:_0e)(t,o.pos,o.inside,r)?r.preventDefault():ka(t,"pointer"))};class N0e{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Ene],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof je&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ka(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>yo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(F0(e))),this.updateAllowDefault(e),this.allowDefault||!r?ka(this.view,"pointer"):w0e(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||xn&&this.mightDrag&&!this.mightDrag.node.isAtom||zr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(ed(this.view,He.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):ka(this.view,"pointer")}move(e){this.updateAllowDefault(e),ka(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Rn.touchstart=t=>{t.input.lastTouch=Date.now(),BM(t),ka(t,"pointer")};Rn.touchmove=t=>{t.input.lastTouch=Date.now(),ka(t,"pointer")};Rn.contextmenu=t=>BM(t);function Nne(t,e){return t.composing?!0:xn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const C0e=uo?5e3:-1;Mn.compositionstart=Mn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Fe&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||zr&&rne&&k0e(t)))t.markCursor=t.state.storedMarks||r.marks(),iv(t,!0),t.markCursor=null;else if(iv(t,!e.selection.empty),qi&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}Cne(t,C0e)};function k0e(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Mn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Cne(t,20))};function Cne(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>iv(t),e))}function kne(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=O0e());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function T0e(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=xve(e.focusNode,e.focusOffset),n=wve(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function O0e(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function iv(t,e=!1){if(!(uo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),kne(t),e||t.docView&&t.docView.dirty){let r=DM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function j0e(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const gp=ri&&Ba<15||$d&&Nve<604;Rn.copy=Mn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=gp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=FM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):j0e(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function P0e(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function I0e(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?yp(t,n.value,null,i,e):yp(t,n.textContent,n.innerHTML,i,e)},50)}function yp(t,e,r,n,i){let s=vne(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||pe.empty)))return!0;if(!s)return!1;let o=P0e(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Tne(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Mn.paste=(t,e)=>{let r=e;if(t.composing&&!uo)return;let n=gp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&yp(t,Tne(n),n.getData("text/html"),i,r)?r.preventDefault():I0e(t,r)};class One{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const R0e=ji?"altKey":"ctrlKey";function jne(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[R0e]}Rn.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(F0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof je?i.to-1:i.to))){if(n&&n.mightDrag)o=je.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=je.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:d}=FM(t,a);(!r.dataTransfer.files.length||!zr||tne>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(gp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",gp||r.dataTransfer.setData("text/plain",c),t.dragging=new One(d,jne(t,r),o)};Rn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Mn.dragover=Mn.dragenter=(t,e)=>e.preventDefault();Mn.drop=(t,e)=>{try{M0e(t,e,t.dragging)}finally{t.dragging=null}};function M0e(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(F0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=vne(t,Tne(e.dataTransfer),gp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&jne(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||pe.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?Mre(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&je.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new je(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,v,y)=>p=y),l.setSelection($M(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Rn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&yo(t)},20))};Rn.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Rn.beforeinput=(t,e)=>{if(zr&&uo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,kl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Mn)Rn[t]=Mn[t];function vp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class sv{constructor(e,r){this.toDOM=e,this.spec=r||rc,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new Pn(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof sv&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Va{constructor(e,r){this.attrs=e,this.spec=r||rc}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new Pn(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Va&&vp(this.attrs,e.attrs)&&vp(this.spec,e.spec)}static is(e){return e.type instanceof Va}destroy(){}}class zM{constructor(e,r){this.attrs=e,this.spec=r||rc}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Pn(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof zM&&vp(this.attrs,e.attrs)&&vp(this.spec,e.spec)}destroy(){}}class Pn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new Pn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new Pn(e,e,new sv(r,n))}static inline(e,r,n,i){return new Pn(e,r,new Va(n,i))}static node(e,r,n,i){return new Pn(e,r,new zM(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Va}get widget(){return this.type instanceof sv}}const wu=[],rc={};class Ut{constructor(e,r){this.local=e.length?e:wu,this.children=r.length?r:wu}static create(e,r){return r.length?ov(r,e,0,rc):mn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==mn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||rc)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?A0e(this.children,o||[],e,r,n,i,s):o?new Ut(o.sort(nc),wu):mn}add(e,r){return r.length?this==mn?Ut.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let c=l+n,d;if(d=Ine(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,c+1):i.splice(s,0,l,l+a.nodeSize,ov(d,a,c+1,rc)),s+=3}});let o=Pne(s?Rne(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ut(o.length?this.local.concat(o).sort(nc):this.local,i||this.children)}remove(e){return e.length==0||this==mn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=mn?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Ut(i,n):mn}forChild(e,r){if(this==mn)return this;if(r.isLeaf)return Ut.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Va){let c=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let a=new Ut(i.sort(nc),wu);return n?new ca([a,n]):a}return n||mn}eq(e){if(this==e)return!0;if(!(e instanceof Ut)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return VM(this.localsInner(e))}localsInner(e){if(this==mn)return wu;if(e.inlineContent||!this.local.some(Va.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Va||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Ut.empty=new Ut([],[]);Ut.removeOverlap=VM;const mn=Ut.empty;class ca{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,rc));return ca.from(n)}forChild(e,r){if(r.isLeaf)return Ut.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=mn&&(s instanceof ca?n=n.concat(s.members):n.push(s))}return ca.from(n)}eq(e){if(!(e instanceof ca)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?VM(n?r:r.sort(nc)):wu}static from(e){switch(e.length){case 0:return mn;case 1:return e[0];default:return new ca(e.every(r=>r instanceof Ut)?e:e.reduce((r,n)=>r.concat(n instanceof Ut?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function A0e(t,e,r,n,i,s,o){let a=t.slice();for(let c=0,d=s;c<r.maps.length;c++){let h=0;r.maps[c].forEach((f,p,m,g)=>{let v=g-m-(p-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+d-h)continue;let w=a[y]+d-h;p>=w?a[y+1]=f<=w?-2:-1:f>=d&&v&&(a[y]+=v,a[y+1]+=v)}h+=v}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=r.map(t[c]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[c+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),v=n.maybeChild(m);if(v&&g==h&&g+v.nodeSize==p){let y=a[c+2].mapInner(r,v,d+1,t[c]+s+1,o);y!=mn?(a[c]=h,a[c+1]=p,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=D0e(a,t,e,r,i,s,o),d=ov(c,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Ut(e.sort(nc),a)}function Pne(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new Pn(i.from+e,i.to+e,i.type))}return r}function D0e(t,e,r,n,i,s,o){function a(l,c){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,c);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function Ine(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function Rne(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function ov(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let c=Ine(t,a,l+r);if(c){s=!0;let d=ov(c,a,r+l+1,n);d!=mn&&i.push(l,l+a.nodeSize,d)}});let o=Pne(s?Rne(t):t,-r).sort(nc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Ut(o,i):mn}function nc(t,e){return t.from-e.from||t.to-e.to}function VM(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),$4(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),$4(e,i,n.copy(s.from,n.to)));break}}}return e}function $4(t,e,r){for(;e<t.length&&nc(r,t[e])>0;)e++;t.splice(e,0,r)}function A1(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=mn&&e.push(n)}),t.cursorWrapper&&e.push(Ut.create(t.state.doc,[t.cursorWrapper.deco])),ca.from(e)}const $0e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},F0e=ri&&Ba<=11;class q0e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class L0e{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new q0e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);ri&&Ba<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),F0e&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,$0e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(O4(this.view)){if(this.suppressingSelectionUpdates)return yo(this.view);if(ri&&Ba<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&kc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=Dd(s))r.add(s);for(let s=e.anchorNode;s;s=Dd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&O4(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(qi&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||V0e(e,h)!=p)&&f.remove()}}}else if((zr||xn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&D0(n)&&(c=DM(e))&&c.eq(He.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,yo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),B0e(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||yo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ri&&Ba<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?rn(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?rn(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let F4=new WeakMap,q4=!1;function B0e(t){if(!F4.has(t)&&(F4.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=qi,q4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),q4=!0}}function L4(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return kc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function z0e(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return L4(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?L4(t,r):null}function V0e(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function U0e(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],D0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),zr&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=n.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=v;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||La.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:H0e,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function H0e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(xn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||xn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const W0e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function K0e(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=DM(t,N);if(E&&!t.state.selection.eq(E)){if(zr&&uo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",C=>C(t,kl(13,"Enter"))))return;let k=t.state.tr.setSelection(E);N=="pointer"?k.setMeta("pointer",!0):N=="key"&&k.scrollIntoView(),s&&k.setMeta("composition",s),t.dispatch(k)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,c=U0e(t,e,r),d=t.state.doc,h=d.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=Q0e(h.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,($d&&t.input.lastIOSEnter>Date.now()-225||uo)&&i.some(N=>N.nodeType==1&&!W0e.test(N.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",N=>N(t,kl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof Fe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let N=B4(t,t.state.doc,c.sel);if(N&&!N.eq(t.state.selection)){let E=t.state.tr.setSelection(N);s&&E.setMeta("composition",s),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Fe&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ri&&Ba<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),y=d.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if(($d&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!b&&g.pos<c.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(c.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,kl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Y0e(d,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",N=>N(t,kl(8,"Backspace")))){uo&&zr&&t.domObserver.suppressSelectionUpdates();return}zr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),uo&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,kl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=N=>{let E=N||t.state.tr.replace(w,x,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let k=B4(t,E.doc,c.sel);k&&!(zr&&t.composing&&k.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==w||k.head==E.mapping.map(x)-1)||ri&&k.empty&&k.head==w)&&E.setSelection(k)}return s&&E.setMeta("composition",s),E.scrollIntoView()},_;if(b)if(g.pos==v.pos){ri&&Ba<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>yo(t),20));let N=S(t.state.tr.delete(w,x)),E=d.resolve(m.start).marksAcross(d.resolve(m.endA));E&&N.ensureMarks(E),t.dispatch(N)}else if(m.endA==m.endB&&(_=G0e(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let N=S(t.state.tr);_.type=="add"?N.addMark(w,x,_.mark):N.removeMark(w,x,_.mark),t.dispatch(N)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,v.parentOffset),E=()=>S(t.state.tr.insertText(N,w,x));t.someProp("handleTextInput",k=>k(t,w,x,N,E))||t.dispatch(E())}else t.dispatch(S());else t.dispatch(S())}function B4(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:$M(t,e.resolve(r.anchor),e.resolve(r.head))}function G0e(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(Q.from(c).eq(t))return{mark:a,type:o}}function Y0e(t,e,r,n,i){if(r-e<=i.pos-n.pos||D1(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(D1(s,!0,!0));return!o.parent.isTextblock||o.pos>r||D1(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function D1(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Q0e(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&z4(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&z4(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function z4(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class Mne{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new f0e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(K4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=H4(this),U4(this),this.nodeViews=W4(this),this.docView=_4(this.state.doc,V4(this),A1(this),this.dom,this),this.domObserver=new L0e(this,(n,i,s,o)=>K0e(this,n,i,s,o)),this.domObserver.start(),p0e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&EI(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(K4),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(kne(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=W4(this);J0e(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&EI(this),this.editable=H4(this),U4(this);let l=A1(this),c=V4(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Tve(this);if(o){this.domObserver.stop();let p=h&&(ri||zr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&X0e(i.selection,e.selection);if(h){let m=zr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=T0e(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=_4(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Jve(this))?yo(this,p):(mne(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&Ove(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof je){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&y4(this,r.getBoundingClientRect(),e)}else y4(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new One(e.slice,e.move,i<0?void 0:je.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(ri){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&jve(this.dom),yo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Ave(this,e)}coordsAtPos(e,r=1){return ane(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return Lve(this,r||this.state,e)}pasteHTML(e,r){return yp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return yp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return FM(this,e)}destroy(){this.docView&&(m0e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],A1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,vve())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return y0e(this,e)}domSelectionRange(){let e=this.domSelection();return e?xn&&this.root.nodeType===11&&_ve(this.dom.ownerDocument)==this.dom&&z0e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Mne.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function V4(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[Pn.node(0,t.state.doc.content.size,e)]}function U4(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Pn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function H4(t){return!t.someProp("editable",e=>e(t.state)===!1)}function X0e(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function W4(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function J0e(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function K4(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Za={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},av={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Z0e=typeof navigator<"u"&&/Mac/.test(navigator.platform),ebe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var nn=0;nn<10;nn++)Za[48+nn]=Za[96+nn]=String(nn);for(var nn=1;nn<=24;nn++)Za[nn+111]="F"+nn;for(var nn=65;nn<=90;nn++)Za[nn]=String.fromCharCode(nn+32),av[nn]=String.fromCharCode(nn);for(var $1 in Za)av.hasOwnProperty($1)||(av[$1]=Za[$1]);function tbe(t){var e=Z0e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ebe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?av:Za)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const rbe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),nbe=typeof navigator<"u"&&/Win/.test(navigator.platform);function ibe(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))rbe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function sbe(t){let e=Object.create(null);for(let r in t)e[ibe(r)]=t[r];return e}function F1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function obe(t){return new Yt({props:{handleKeyDown:Ane(t)}})}function Ane(t){let e=sbe(t);return function(r,n){let i=tbe(n),s,o=e[F1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[F1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(nbe&&n.ctrlKey&&n.altKey)&&(s=Za[n.keyCode])&&s!=i){let a=e[F1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var abe=Object.defineProperty,UM=(t,e)=>{for(var r in e)abe(t,r,{get:e[r],enumerable:!0})};function q0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var L0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),v=f(...m)(g);return o.push(v),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:q0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},Dne={};UM(Dne,{blur:()=>lbe,clearContent:()=>cbe,clearNodes:()=>ube,command:()=>dbe,createParagraphNear:()=>hbe,cut:()=>fbe,deleteCurrentNode:()=>pbe,deleteNode:()=>mbe,deleteRange:()=>gbe,deleteSelection:()=>ybe,enter:()=>vbe,exitCode:()=>bbe,extendMarkRange:()=>xbe,first:()=>wbe,focus:()=>_be,forEach:()=>Ebe,insertContent:()=>Nbe,insertContentAt:()=>Tbe,joinBackward:()=>Pbe,joinDown:()=>jbe,joinForward:()=>Ibe,joinItemBackward:()=>Rbe,joinItemForward:()=>Mbe,joinTextblockBackward:()=>Abe,joinTextblockForward:()=>Dbe,joinUp:()=>Obe,keyboardShortcut:()=>Fbe,lift:()=>qbe,liftEmptyBlock:()=>Lbe,liftListItem:()=>Bbe,newlineInCode:()=>zbe,resetAttributes:()=>Vbe,scrollIntoView:()=>Ube,selectAll:()=>Hbe,selectNodeBackward:()=>Wbe,selectNodeForward:()=>Kbe,selectParentNode:()=>Gbe,selectTextblockEnd:()=>Ybe,selectTextblockStart:()=>Qbe,setContent:()=>Xbe,setMark:()=>y1e,setMeta:()=>v1e,setNode:()=>b1e,setNodeSelection:()=>x1e,setTextDirection:()=>w1e,setTextSelection:()=>S1e,sinkListItem:()=>_1e,splitBlock:()=>E1e,splitListItem:()=>N1e,toggleList:()=>C1e,toggleMark:()=>k1e,toggleNode:()=>T1e,toggleWrap:()=>O1e,undoInputRule:()=>j1e,unsetAllMarks:()=>P1e,unsetMark:()=>I1e,unsetTextDirection:()=>R1e,updateAttributes:()=>M1e,wrapIn:()=>A1e,wrapInList:()=>D1e});var lbe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),cbe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),ube=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,h=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=nh(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},dbe=t=>e=>t(e),hbe=()=>({state:t,dispatch:e})=>Qre(t,e),fbe=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new Fe(n.doc.resolve(Math.max(o-1,0)))),!0},pbe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function _r(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var mbe=t=>({tr:e,state:r,dispatch:n})=>{const i=_r(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},gbe=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},ybe=()=>({state:t,dispatch:e})=>jM(t,e),vbe=()=>({commands:t})=>t.keyboardShortcut("Enter"),bbe=()=>({state:t,dispatch:e})=>nve(t,e);function HM(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function lv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:HM(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function $ne(t,e,r={}){return t.find(n=>n.type===e&&lv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function G4(t,e,r={}){return!!$ne(t,e,r)}function WM(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!$ne([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&G4([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&G4([...t.parent.child(l).marks],e,r);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function $o(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var xbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=$o(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:c,to:d}=a;if(i){const h=WM(l,s,e);if(h&&h.from<=c&&h.to>=d){const f=Fe.create(o,h.from,h.to);r.setSelection(f)}}return!0},wbe=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function Fne(t){return t instanceof Fe}function Al(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function qne(t,e=null){if(!e)return null;const r=He.atStart(t),n=He.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?Fe.create(t,Al(0,i,s),Al(t.content.size,i,s)):Fe.create(t,Al(e,i,s),Al(e,i,s))}function Y4(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function cv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Sbe(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var _be=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(cv()||Y4())&&n.dom.focus(),Sbe()&&!cv()&&!Y4()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!Fne(r.state.selection))return o(),!0;const a=qne(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Ebe=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),Nbe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),Lne=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&Lne(n)}return t};function Ng(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return Lne(r)}function bp(t,e,r){if(t instanceof qa||t instanceof Q)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return Q.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),bp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new _re({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?La.fromSchema(l).parseSlice(Ng(t),r.parseOptions):La.fromSchema(l).parse(Ng(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=La.fromSchema(e);return r.slice?s.parseSlice(Ng(t),r.parseOptions).content:s.parse(Ng(t),r.parseOptions)}return bp("",e,r)}function Cbe(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof Br||i instanceof Ur))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(He.near(t.doc.resolve(o),r))}var kbe=t=>!("type"in t),Tbe=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((kbe(a)?a:[a]).forEach(v=>{v.check(),f=f?v.isText&&v.marks.length===0:!1,p=p?v.isBlock:!1}),d===h&&p){const{parent:v}=n.doc.resolve(d);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof Q){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const v=n.doc.resolve(d),y=v.node(),b=v.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;b&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&Cbe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},Obe=()=>({state:t,dispatch:e})=>eve(t,e),jbe=()=>({state:t,dispatch:e})=>tve(t,e),Pbe=()=>({state:t,dispatch:e})=>Vre(t,e),Ibe=()=>({state:t,dispatch:e})=>Kre(t,e),Rbe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=R0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},Mbe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=R0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},Abe=()=>({state:t,dispatch:e})=>Jye(t,e),Dbe=()=>({state:t,dispatch:e})=>Zye(t,e);function Bne(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function $be(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))cv()||Bne()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var Fbe=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=$be(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,a))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function el(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?_r(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>lv(h.node.attrs,r,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}var qbe=(t,e={})=>({state:r,dispatch:n})=>{const i=_r(t,r.schema);return el(r,i,e)?rve(r,n):!1},Lbe=()=>({state:t,dispatch:e})=>Xre(t,e),Bbe=t=>({state:e,dispatch:r})=>{const n=_r(t,e.schema);return pve(n)(e,r)},zbe=()=>({state:t,dispatch:e})=>Yre(t,e);function B0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Q4(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var Vbe=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=B0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=_r(t,n.schema)),a==="mark"&&(o=$o(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,Q4(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(Q4(f.attrs,e))))})})}),l},Ube=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Hbe=()=>({tr:t,dispatch:e})=>{if(e){const r=new gi(t.doc);t.setSelection(r)}return!0},Wbe=()=>({state:t,dispatch:e})=>Hre(t,e),Kbe=()=>({state:t,dispatch:e})=>Gre(t,e),Gbe=()=>({state:t,dispatch:e})=>ove(t,e),Ybe=()=>({state:t,dispatch:e})=>cve(t,e),Qbe=()=>({state:t,dispatch:e})=>lve(t,e);function NI(t,e,r={},n={}){return bp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var Xbe=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const c=NI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function zne(t,e){const r=$o(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function Vne(t,e){const r=new qre(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function Jbe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Zbe(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function e1e(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function z0(t){return e=>e1e(e.$from,t)}function ke(t,e,r){return t.config[e]===void 0&&t.parent?ke(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?ke(t.parent,e,r):null}):t.config[e]}function KM(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=ke(e,"addExtensions",r);return n?[e,...KM(n())]:e}).flat(10)}function GM(t,e){const r=Bc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function Une(t){return typeof t=="function"}function gt(t,e=void 0,...r){return Une(t)?e?t.bind(e)(...r):t(...r):t}function t1e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Fd(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function Hne(t){const e=[],{nodeExtensions:r,markExtensions:n}=Fd(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=ke(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=ke(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function Er(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],c=a.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),n[i]=Array.from(c.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function xp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Er(r,n),{})}function r1e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function X4(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):r1e(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function J4(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&t1e(r)?!1:r!=null))}function Z4(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function n1e(t,e){var r;const n=Hne(t),{nodeExtensions:i,markExtensions:s}=Fd(t),o=(r=i.find(c=>ke(c,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(c=>{const d=n.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,b)=>{const w=ke(b,"extendNodeSchema",h);return{...y,...w?w(c):{}}},{}),p=J4({...f,content:gt(ke(c,"content",h)),marks:gt(ke(c,"marks",h)),group:gt(ke(c,"group",h)),inline:gt(ke(c,"inline",h)),atom:gt(ke(c,"atom",h)),selectable:gt(ke(c,"selectable",h)),draggable:gt(ke(c,"draggable",h)),code:gt(ke(c,"code",h)),whitespace:gt(ke(c,"whitespace",h)),linebreakReplacement:gt(ke(c,"linebreakReplacement",h)),defining:gt(ke(c,"defining",h)),isolating:gt(ke(c,"isolating",h)),attrs:Object.fromEntries(d.map(Z4))}),m=gt(ke(c,"parseHTML",h));m&&(p.parseDOM=m.map(y=>X4(y,d)));const g=ke(c,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:xp(y,d)}));const v=ke(c,"renderText",h);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const d=n.filter(v=>v.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,y)=>{const b=ke(y,"extendMarkSchema",h);return{...v,...b?b(c):{}}},{}),p=J4({...f,inclusive:gt(ke(c,"inclusive",h)),excludes:gt(ke(c,"excludes",h)),group:gt(ke(c,"group",h)),spanning:gt(ke(c,"spanning",h)),code:gt(ke(c,"code",h)),attrs:Object.fromEntries(d.map(Z4))}),m=gt(ke(c,"parseHTML",h));m&&(p.parseDOM=m.map(v=>X4(v,d)));const g=ke(c,"renderHTML",h);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:xp(v,d)})),[c.name,p]}));return new _re({topNode:o,nodes:a,marks:l})}function i1e(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function uv(t){return t.sort((r,n)=>{const i=ke(r,"priority")||100,s=ke(n,"priority")||100;return i>s?-1:i<s?1:0})}function Wne(t){const e=uv(KM(t)),r=i1e(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function Kne(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,c,d,h)=>{var f;l.isBlock&&c>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:c,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,c)-c,i-c))}),a}function s1e(t,e){const r={from:0,to:t.content.size};return Kne(t,r,e)}function Gne(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function o1e(t,e){const r=_r(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function Yne(t,e){const r=B0(typeof e=="string"?e:e.name,t.schema);return r==="node"?o1e(t,e):r==="mark"?zne(t,e):{}}function a1e(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function l1e(t){const e=a1e(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function Qne(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(c,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:c,to:d}})})}),l1e(n)}function YM(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=WM(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var c1e=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function Cg(t,e){return e.nodes[t]||e.marks[t]||null}function cy(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var u1e=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function CI(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?$o(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>lv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,v),b=Math.min(m,v+g.nodeSize),w=b-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:b})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>lv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function d1e(t,e,r={}){if(!e)return el(t,null,r)||CI(t,null,r);const n=B0(e,t.schema);return n==="node"?el(t,e,r):n==="mark"?CI(t,e,r):!1}var h1e=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=z0(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},f1e=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function eq(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function tq(t,e){const{nodeExtensions:r}=Fd(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=gt(ke(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function V0(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(V0(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function Xne(t){return t instanceof je}var Jne=class Zne{constructor(e){this.position=e}static fromJSON(e){return new Zne(e.position)}toJSON(){return{position:this.position}}};function p1e(t,e){const r=e.mapping.mapResult(t.position);return{position:new Jne(r.pos),mapResult:r}}function m1e(t){return new Jne(t)}function g1e(t,e,r){var n;const{selection:i}=e;let s=null;if(Fne(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(c=>c.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(c)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));c=p&&m}return!c}),c})}var y1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=$o(t,n.schema);if(i)if(o){const c=zne(n,l);r.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return g1e(n,r,l)},v1e=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),b1e=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=_r(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>p4(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>p4(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},x1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Al(t,0,n.content.size),s=je.create(n,i);e.setSelection(s)}return!0},w1e=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},S1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Fe.atStart(n).from,a=Fe.atEnd(n).to,l=Al(i,o,a),c=Al(s,o,a),d=Fe.create(n,l,c);e.setSelection(d)}return!0},_1e=t=>({state:e,dispatch:r})=>{const n=_r(t,e.schema);return yve(n)(e,r)};function rq(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var E1e=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=cy(c,a.node().type.name,a.node().attrs);if(s instanceof je&&s.node.isBlock)return!a.parentOffset||!go(o,a.pos)?!1:(n&&(t&&rq(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:Jbe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=go(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&go(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof Fe&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),v=e.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&rq(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},N1e=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=_r(t,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=Q.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-b;E>=l.depth-3;E-=1)y=Q.from(l.node(E).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...cy(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(Q.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(b-1));r.replace(_,l.after(-w),new pe(y,4-b,0));let N=-1;r.doc.nodesBetween(_,r.doc.content.size,(E,k)=>{if(N>-1)return!1;E.isTextblock&&E.content.size===0&&(N=k+1)}),N>-1&&r.setSelection(Fe.near(r.doc.resolve(N))),r.scrollIntoView()}return!0}const p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...cy(f,h.type.name,h.attrs),...e},g={...cy(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,c.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!go(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=n,{splittableMarks:w}=s.extensionManager,x=b||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,v).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},q1=(t,e)=>{const r=z0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&ll(t.doc,r.pos)&&t.join(r.pos),!0},L1=(t,e)=>{const r=z0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&ll(t.doc,n)&&t.join(n),!0},C1e=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=_r(t,o.schema),m=_r(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:b}=g,w=y.blockRange(b),x=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=z0(_=>tq(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if(tq(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>q1(s,p)).command(()=>L1(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:c.clearNodes()).wrapInList(p,n).command(()=>q1(s,p)).command(()=>L1(s,p)).run():l().command(()=>{const _=d().wrapInList(p,n),N=x.filter(E=>f.includes(E.type.name));return s.ensureMarks(N),_?!0:c.clearNodes()}).wrapInList(p,n).command(()=>q1(s,p)).command(()=>L1(s,p)).run()},k1e=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=$o(t,n.schema);return CI(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},T1e=(t,e,r={})=>({state:n,commands:i})=>{const s=_r(t,n.schema),o=_r(e,n.schema),a=el(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},O1e=(t,e={})=>({state:r,commands:n})=>{const i=_r(t,r.schema);return el(r,i,e)?n.lift(i):n.wrapIn(i,e)},j1e=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},P1e=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},I1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=$o(t,n.schema),{$from:c,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=c.marks().find(v=>v.type===l))==null?void 0:s.attrs,g=WM(c,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},R1e=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},M1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=B0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=_r(t,n.schema)),a==="mark"&&(o=$o(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(v,y)=>{s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v)}):n.doc.nodesBetween(d,h,(v,y)=>{y<d&&s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v),y>=d&&y<=h&&(s&&s===v.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...v.attrs,...e})),o&&v.marks.length&&v.marks.forEach(b=>{if(o===b.type&&(l=!0,i)){const w=Math.max(y,d),x=Math.min(y+v.nodeSize,h);r.addMark(w,x,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(v=>{o===v.type&&i&&r.addMark(m,g,o.create({...v.attrs,...e}))}))}),l},A1e=(t,e={})=>({state:r,dispatch:n})=>{const i=_r(t,r.schema);return uve(i,e)(r,n)},D1e=(t,e={})=>({state:r,dispatch:n})=>{const i=_r(t,r.schema);return dve(i,e)(r,n)},$1e=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},U0=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},F1e=(t,e)=>{if(HM(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function kg(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=u1e(c)+s;return o.forEach(f=>{if(d)return;const p=F1e(h,f.find);if(!p)return;const m=l.state.tr,g=q0({state:l.state,transaction:m}),v={from:n-(p[0].length-s.length),to:i},{commands:y,chain:b,can:w}=new L0({editor:r,state:g});f.handler({state:g,range:v,match:p,commands:y,chain:b,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function q1e(t){const{editor:e,rules:r}=t,n=new Yt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=GM(Q.from(d),o.schema);const{from:h}=l,f=h+d.length;kg({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return kg({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&kg({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?kg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function L1e(t){return Object.prototype.toString.call(t).slice(8,-1)}function Tg(t){return L1e(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function eie(t,e){const r={...t};return Tg(t)&&Tg(e)&&Object.keys(e).forEach(n=>{Tg(e[n])&&Tg(t[n])?r[n]=eie(t[n],e[n]):r[n]=e[n]}),r}var QM=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...gt(ke(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...gt(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>eie(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},zc=class tie extends QM{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new tie(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function B1e(t){return typeof t=="number"}var z1e=class{constructor(t){this.find=t.find,this.handler=t.handler}},V1e=(t,e,r)=>{if(HM(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function U1e(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new L0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,v,y,b,w;if((v=(g=p.type)==null?void 0:g.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(b=(y=p.content)==null?void 0:y.size)!=null?b:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const N=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");V1e(N,s.find,o).forEach(k=>{if(k.index===void 0)return;const C=S+k.index+1,O=C+k[0].length,P={from:r.tr.mapping.map(C),to:r.tr.mapping.map(O)},j=s.handler({state:r,range:P,match:k,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});h.push(j)})}),h.every(p=>p!==null)}var Og=null,H1e=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function W1e(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,v=q0({state:d,transaction:g});if(!(!U1e({editor:e,state:v,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Yt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(Og=e)},p=()=>{Og&&(Og=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=Og;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:S}=y;typeof S=="string"?S=S:S=GM(Q.from(S),p.schema);const{from:_}=y,N=_+S.length,E=H1e(S);return l({rule:d,state:p,from:_,to:{b:N},pasteEvt:E})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!B1e(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var H0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Wne(t),this.schema=n1e(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Cg(e.name,this.schema)},n=ke(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return uv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Cg(n.name,this.schema)},s=[],o=ke(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&ke(n,"exitable",i)&&(a.ArrowRight=()=>zc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=obe(a);s.push(l);const c=ke(n,"addInputRules",i);if(eq(n,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=q1e({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=ke(n,"addPasteRules",i);if(eq(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=W1e({editor:t,rules:f});s.push(...p)}}const h=ke(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return Hne(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Fd(this.extensions);return Object.fromEntries(e.filter(r=>!!ke(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:_r(r.name,this.schema)},s=ke(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,d,h,f)=>{const p=xp(l,n);return o({node:l,view:c,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return uv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Cg(i.name,this.schema)},o=ke(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Fd(this.extensions);return Object.fromEntries(e.filter(r=>!!ke(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:$o(r.name,this.schema)},s=ke(r,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const d=xp(a,n);return s()({mark:a,view:l,inline:c,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{oxe(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Cg(e.name,this.schema)};e.type==="mark"&&((r=gt(ke(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=ke(e,"onBeforeCreate",n),s=ke(e,"onCreate",n),o=ke(e,"onUpdate",n),a=ke(e,"onSelectionUpdate",n),l=ke(e,"onTransaction",n),c=ke(e,"onFocus",n),d=ke(e,"onBlur",n),h=ke(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};H0.resolve=Wne;H0.sort=uv;H0.flatten=KM;var K1e={};UM(K1e,{ClipboardTextSerializer:()=>nie,Commands:()=>iie,Delete:()=>sie,Drop:()=>oie,Editable:()=>aie,FocusEvents:()=>cie,Keymap:()=>uie,Paste:()=>die,Tabindex:()=>hie,TextDirection:()=>fie,focusEventsPluginKey:()=>lie});var pr=class rie extends QM{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new rie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},nie=pr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Yt({key:new Rr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=Gne(r);return Kne(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),iie=pr.create({name:"commands",addCommands(){return{...Dne}}}),sie=pr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=Vne(t.before,[t,...e]);Qne(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=p.oldRange.from<=g&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:d.mapping.map(g),newTo:d.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,v;if(p instanceof cs){const y=f.slice(m).map(p.from,-1),b=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(b),S=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(N=>N.eq(p.mark)),_=(v=d.doc.nodeAt(b))==null?void 0:v.marks.some(N=>N.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:b},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),oie=pr.create({name:"drop",addProseMirrorPlugins(){return[new Yt({key:new Rr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),aie=pr.create({name:"editable",addProseMirrorPlugins(){return[new Yt({key:new Rr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),lie=new Rr("focusEvents"),cie=pr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Yt({key:lie,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),uie=pr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,v=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?v===h.pos:He.atStart(c).from===f;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return cv()||Bne()?s:i},addProseMirrorPlugins(){return[new Yt({key:new Rr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=He.atStart(e.doc).from,c=He.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!V0(r.doc))return;const f=r.tr,p=q0({state:r,transaction:f}),{commands:m}=new L0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),die=pr.create({name:"paste",addProseMirrorPlugins(){return[new Yt({key:new Rr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),hie=pr.create({name:"tabindex",addProseMirrorPlugins(){return[new Yt({key:new Rr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),fie=pr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Fd(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Yt({key:new Rr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),G1e=class Su{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Su(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Su(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Su(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Su(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Su(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},Y1e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Q1e(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var X1e=class extends $1e{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:p1e,createMappablePosition:m1e},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=qne(e,this.options.autofocus);this.editorState=$u.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Q1e(Y1e,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=Une(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[aie,nie.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),iie,cie,uie,hie,oie,die,sie,fie.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new H0(n,this)}createCommandManager(){this.commandManager=new L0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=NI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=NI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new Mne(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return Yne(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return d1e(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return GM(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return s1e(this.state.doc,{blockSeparator:e,textSerializers:{...Gne(this.schema),...r}})}get isEmpty(){return V0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new G1e(e,this)}get $doc(){return this.$pos(0)}};function qd(t){return new U0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=gt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),c=r.from+a.indexOf(o),d=c+o.length;if(YM(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;d<r.to&&s.delete(d,r.to),c>r.from&&s.delete(r.from+l,c);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function J1e(t){return new U0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=gt(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=o+c;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function kI(t){return new U0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=gt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function Ld(t){return new U0({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=gt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),c=l&&TM(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&ll(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function Z1e(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof je){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var exe={};UM(exe,{createAtomBlockMarkdownSpec:()=>txe,createBlockMarkdownSpec:()=>rxe,createInlineMarkdownSpec:()=>sxe,parseAttributes:()=>XM,parseIndentedBlocks:()=>TI,renderNestedMarkdownContent:()=>ZM,serializeAttributes:()=>JM});function XM(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));e.class=c.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,c,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[c]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function JM(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function txe(t){const{nodeName:e,name:r,parseAttributes:n=XM,serializeAttributes:i=JM,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,c=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",v=n(g);if(!o.find(b=>!(b in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:d=>{const h=c(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function rxe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=XM,serializeAttributes:s=JM,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=h.match(g);if(!v)return;const[y,b=""]=v,w=i(b);let x=1;const S=y.length;let _="";const N=/^:::([\w-]*)(\s.*)?/gm,E=h.slice(S);for(N.lastIndex=0;;){const k=N.exec(E);if(k===null)break;const C=k.index,O=k[1];if(!((m=k[2])!=null&&m.endsWith(":::"))){if(O)x+=1;else if(x-=1,x===0){const P=E.slice(0,C);_=P.trim();const j=h.slice(0,S+C+k[0].length);let A=[];if(_)if(a==="block")for(A=p.blockTokens(P),A.forEach($=>{$.text&&(!$.tokens||$.tokens.length===0)&&($.tokens=p.inlineTokens($.text))});A.length>0;){const $=A[A.length-1];if($.type==="paragraph"&&(!$.text||$.text.trim()===""))A.pop();else break}else A=p.inlineTokens(_);return{type:e,raw:j,attributes:w,content:_,tokens:A}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",v=f.renderChildren(h.content||[],`

`);return`:::${c}${g}

${v}

:::`}}}function nxe(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function ixe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function sxe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=nxe,serializeAttributes:s=ixe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,v=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(v!==void 0&&y===v)return;p[g]=y}}),p},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),v=f.match(g);if(!v)return;let y="",b="";if(a){const[,x]=v;b=x}else{const[,x,S]=v;b=x,y=S||""}const w=i(b.trim());return{type:e,raw:v[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(f.attrs||{}),g=s(m),v=g?` ${g}`:"";return a?`[${c}${v}]`:`[${c}${v}]${p}[/${c}]`}}}function TI(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let c="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:v}=m;c=`${c}${f}
`;const y=[v];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const N=a.slice(d+1).findIndex(C=>C.trim()!=="");if(N===-1)break;if((((i=(n=a[d+1+N].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),c=`${c}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),c=`${c}${S}
`,d+=1;else break}let b;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?b=e.customNestedParser(S):b=r.blockTokens(S))}const x=e.createToken(m,b);l.push(x)}if(l.length!==0)return{items:l,raw:c}}function ZM(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const d=e.renderChildren([c]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function oxe(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(c,d,t.type),s.addMark(c,d,p)}}),s.docChanged&&e.view.dispatch(s)}var xi=class pie extends QM{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new pie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Oc(t){return new z1e({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=gt(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let c=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(YM(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),c=r.from+d+a.length,o.addMark(r.from+d,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:axe,getOwnPropertySymbols:lxe}=Object,{hasOwnProperty:cxe}=Object.prototype;function B1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function jg(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function uxe(t){return t!=null?t[Symbol.toStringTag]:void 0}function nq(t){return axe(t).concat(lxe(t))}const dxe=Object.hasOwn||((t,e)=>cxe.call(t,e));function Vc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const hxe="__v",fxe="__o",pxe="_owner",{getOwnPropertyDescriptor:iq,keys:sq}=Object;function mxe(t,e){return t.byteLength===e.byteLength&&dv(new Uint8Array(t),new Uint8Array(e))}function gxe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function yxe(t,e){return t.byteLength===e.byteLength&&dv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function vxe(t,e){return Vc(t.getTime(),e.getTime())}function bxe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function xxe(t,e){return t===e}function oq(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const c=e.entries();let d=!1,h=0;for(;(a=c.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const wxe=Vc;function Sxe(t,e,r){const n=sq(t);let i=n.length;if(sq(e).length!==i)return!1;for(;i-- >0;)if(!mie(t,e,r,n[i]))return!1;return!0}function Jh(t,e,r){const n=nq(t);let i=n.length;if(nq(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!mie(t,e,r,s)||(o=iq(t,s),a=iq(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function _xe(t,e){return Vc(t.valueOf(),e.valueOf())}function Exe(t,e){return t.source===e.source&&t.flags===e.flags}function aq(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let c=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function dv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Nxe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function mie(t,e,r,n){return(n===pxe||n===fxe||n===hxe)&&(t.$$typeof||e.$$typeof)?!0:dxe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Cxe="[object ArrayBuffer]",kxe="[object Arguments]",Txe="[object Boolean]",Oxe="[object DataView]",jxe="[object Date]",Pxe="[object Error]",Ixe="[object Map]",Rxe="[object Number]",Mxe="[object Object]",Axe="[object RegExp]",Dxe="[object Set]",$xe="[object String]",Fxe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},qxe="[object URL]",Lxe=Object.prototype.toString;function Bxe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(v,y,b){if(v===y)return!0;if(v==null||y==null)return!1;const w=typeof v;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(v,y,b):w==="function"?s(v,y,b):!1;const x=v.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(v,y,b);if(Array.isArray(v))return e(v,y,b);if(x===Date)return n(v,y,b);if(x===RegExp)return d(v,y,b);if(x===Map)return o(v,y,b);if(x===Set)return h(v,y,b);const S=Lxe.call(v);if(S===jxe)return n(v,y,b);if(S===Axe)return d(v,y,b);if(S===Ixe)return o(v,y,b);if(S===Dxe)return h(v,y,b);if(S===Mxe)return typeof v.then!="function"&&typeof y.then!="function"&&l(v,y,b);if(S===qxe)return p(v,y,b);if(S===Pxe)return i(v,y,b);if(S===kxe)return l(v,y,b);if(Fxe[S])return f(v,y,b);if(S===Cxe)return t(v,y,b);if(S===Oxe)return r(v,y,b);if(S===Txe||S===Rxe||S===$xe)return c(v,y,b);if(m){let _=m[S];if(!_){const N=uxe(v);N&&(_=m[N])}if(_)return _(v,y,b)}return!1}}function zxe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:mxe,areArraysEqual:r?Jh:gxe,areDataViewsEqual:yxe,areDatesEqual:vxe,areErrorsEqual:bxe,areFunctionsEqual:xxe,areMapsEqual:r?B1(oq,Jh):oq,areNumbersEqual:wxe,areObjectsEqual:r?Jh:Sxe,arePrimitiveWrappersEqual:_xe,areRegExpsEqual:Exe,areSetsEqual:r?B1(aq,Jh):aq,areTypedArraysEqual:r?B1(dv,Jh):dv,areUrlsEqual:Nxe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=jg(n.areArraysEqual),s=jg(n.areMapsEqual),o=jg(n.areObjectsEqual),a=jg(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function Vxe(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function Uxe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:c,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const Hxe=ul();ul({strict:!0});ul({circular:!0});ul({circular:!0,strict:!0});ul({createInternalComparator:()=>Vc});ul({strict:!0,createInternalComparator:()=>Vc});ul({circular:!0,createInternalComparator:()=>Vc});ul({circular:!0,createInternalComparator:()=>Vc,strict:!0});function ul(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=zxe(t),o=Bxe(s),a=r?r(o):Vxe(o);return Uxe({circular:e,comparator:o,createState:n,equals:a,strict:i})}var gie={exports:{}},yie={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=T,Wxe=NM;function Kxe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gxe=typeof Object.is=="function"?Object.is:Kxe,Yxe=Wxe.useSyncExternalStore,Qxe=W0.useRef,Xxe=W0.useEffect,Jxe=W0.useMemo,Zxe=W0.useDebugValue;yie.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=Qxe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Jxe(function(){function l(p){if(!c){if(c=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,Gxe(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=Yxe(t,s[0],s[1]);return Xxe(function(){o.hasValue=!0,o.value=a},[a]),Zxe(a),a};gie.exports=yie;var ewe=gie.exports,twe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},rwe=({contentComponent:t})=>{const e=NM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(e)})};function nwe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:rde.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var iwe=class extends ve.Component{constructor(t){var e;super(t),this.editorContentRef=ve.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=nwe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:twe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&u.jsx(rwe,{contentComponent:t.contentComponent})]})}},swe=T.forwardRef((t,e)=>{const r=ve.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ve.createElement(iwe,{key:r,innerRef:e,...t})}),owe=ve.memo(swe),awe=typeof window<"u"?T.useLayoutEffect:T.useEffect,lwe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function cwe(t){var e;const[r]=T.useState(()=>new lwe(t.editor)),n=ewe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:Hxe);return awe(()=>r.watch(t.editor),[t.editor,r]),T.useDebugValue(n),n}var uwe=!1,OI=typeof window>"u",dwe=OI||!!(typeof window<"u"&&window.next),hwe=class vie{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?OI||dwe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new X1e(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?vie.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function fwe(t={},e=[]){const r=T.useRef(t);r.current=t;const[n]=T.useState(()=>new hwe(r)),i=NM.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return T.useDebugValue(i),T.useEffect(n.onRender(e)),cwe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var pwe=T.createContext({editor:null});pwe.Consumer;var mwe=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),gwe=()=>T.useContext(mwe);ve.forwardRef((t,e)=>{const{onDragStart:r}=gwe(),n=t.as||"div";return u.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});ve.createContext({markViewContentRef:()=>{}});var hv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},ywe=/^\s*>\s$/,vwe=xi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return hv("blockquote",{...Er(this.options.HTMLAttributes,t),children:hv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ld({find:ywe,type:this.type})]}}),bwe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,xwe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,wwe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Swe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,_we=zc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return hv("strong",{...Er(this.options.HTMLAttributes,t),children:hv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[qd({find:bwe,type:this.type}),qd({find:wwe,type:this.type})]},addPasteRules(){return[Oc({find:xwe,type:this.type}),Oc({find:Swe,type:this.type})]}}),Ewe=/(^|[^`])`([^`]+)`(?!`)$/,Nwe=/(^|[^`])`([^`]+)`(?!`)/g,Cwe=zc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[qd({find:Ewe,type:this.type})]},addPasteRules(){return[Oc({find:Nwe,type:this.type})]}}),z1=4,kwe=/^```([a-z]+)?[\s\n]$/,Twe=/^~~~([a-z]+)?[\s\n]$/,Owe=xi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:z1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Er(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:z1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:d}=i,p=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:z1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const v=c-d;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=v){m=_;break}g+=p[_].length+1}const b=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(b.length,r);if(w===0)return!0;let x=d;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),c-x<=w&&a.setSelection(Fe.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,f=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",v=Math.min(g.length,r);return p.slice(v)}).join(`
`);return a.replaceWith(l,c,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(He.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[kI({find:kwe,type:this.type,getAttributes:t=>({language:t[1]})}),kI({find:Twe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Yt({key:new Rr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Fe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),jwe=xi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Pwe=xi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Er(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Iwe=xi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Er(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>kI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),Rwe=xi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Er(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!Z1e(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return Xne(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Fe.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(je.create(o.doc,l.pos)):o.setSelection(Fe.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(c,h),o.setSelection(Fe.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[J1e({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Mwe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Awe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Dwe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,$we=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Fwe=zc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Er(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[qd({find:Mwe,type:this.type}),qd({find:Dwe,type:this.type})]},addPasteRules(){return[Oc({find:Awe,type:this.type}),Oc({find:$we,type:this.type})]}});const qwe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Lwe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",jI="numeric",PI="ascii",II="alpha",Pf="asciinumeric",pf="alphanumeric",RI="domain",bie="emoji",Bwe="scheme",zwe="slashscheme",V1="whitespace";function Vwe(t,e){return t in e||(e[t]=[]),e[t]}function Dl(t,e,r){e[jI]&&(e[Pf]=!0,e[pf]=!0),e[PI]&&(e[Pf]=!0,e[II]=!0),e[Pf]&&(e[pf]=!0),e[II]&&(e[pf]=!0),e[pf]&&(e[RI]=!0),e[bie]&&(e[RI]=!0);for(const n in e){const i=Vwe(n,r);i.indexOf(t)<0&&i.push(t)}}function Uwe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Wn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Wn.groups={};Wn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Wn.groups;let i;return e&&e.j?i=e:(i=new Wn(e),r&&n&&Dl(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Wn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Wn,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Wn,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(Uwe(o.t,n),r);Dl(s,l,n)}else r&&Dl(s,r,n);o.t=s}return i.j[t]=o,o}};const Ue=(t,e,r,n,i)=>t.ta(e,r,n,i),er=(t,e,r,n,i)=>t.tr(e,r,n,i),lq=(t,e,r,n,i)=>t.ts(e,r,n,i),J=(t,e,r,n,i)=>t.tt(e,r,n,i),eo="WORD",MI="UWORD",xie="ASCIINUMERICAL",wie="ALPHANUMERICAL",wp="LOCALHOST",AI="TLD",DI="UTLD",uy="SCHEME",_u="SLASH_SCHEME",eA="NUM",$I="WS",tA="NL",If="OPENBRACE",Rf="CLOSEBRACE",fv="OPENBRACKET",pv="CLOSEBRACKET",mv="OPENPAREN",gv="CLOSEPAREN",yv="OPENANGLEBRACKET",vv="CLOSEANGLEBRACKET",bv="FULLWIDTHLEFTPAREN",xv="FULLWIDTHRIGHTPAREN",wv="LEFTCORNERBRACKET",Sv="RIGHTCORNERBRACKET",_v="LEFTWHITECORNERBRACKET",Ev="RIGHTWHITECORNERBRACKET",Nv="FULLWIDTHLESSTHAN",Cv="FULLWIDTHGREATERTHAN",kv="AMPERSAND",Tv="APOSTROPHE",Ov="ASTERISK",na="AT",jv="BACKSLASH",Pv="BACKTICK",Iv="CARET",ua="COLON",rA="COMMA",Rv="DOLLAR",_s="DOT",Mv="EQUALS",nA="EXCLAMATION",Ci="HYPHEN",Mf="PERCENT",Av="PIPE",Dv="PLUS",$v="POUND",Af="QUERY",iA="QUOTE",Sie="FULLWIDTHMIDDLEDOT",sA="SEMI",Es="SLASH",Df="TILDE",Fv="UNDERSCORE",_ie="EMOJI",qv="SYM";var Eie=Object.freeze({__proto__:null,ALPHANUMERICAL:wie,AMPERSAND:kv,APOSTROPHE:Tv,ASCIINUMERICAL:xie,ASTERISK:Ov,AT:na,BACKSLASH:jv,BACKTICK:Pv,CARET:Iv,CLOSEANGLEBRACKET:vv,CLOSEBRACE:Rf,CLOSEBRACKET:pv,CLOSEPAREN:gv,COLON:ua,COMMA:rA,DOLLAR:Rv,DOT:_s,EMOJI:_ie,EQUALS:Mv,EXCLAMATION:nA,FULLWIDTHGREATERTHAN:Cv,FULLWIDTHLEFTPAREN:bv,FULLWIDTHLESSTHAN:Nv,FULLWIDTHMIDDLEDOT:Sie,FULLWIDTHRIGHTPAREN:xv,HYPHEN:Ci,LEFTCORNERBRACKET:wv,LEFTWHITECORNERBRACKET:_v,LOCALHOST:wp,NL:tA,NUM:eA,OPENANGLEBRACKET:yv,OPENBRACE:If,OPENBRACKET:fv,OPENPAREN:mv,PERCENT:Mf,PIPE:Av,PLUS:Dv,POUND:$v,QUERY:Af,QUOTE:iA,RIGHTCORNERBRACKET:Sv,RIGHTWHITECORNERBRACKET:Ev,SCHEME:uy,SEMI:sA,SLASH:Es,SLASH_SCHEME:_u,SYM:qv,TILDE:Df,TLD:AI,UNDERSCORE:Fv,UTLD:DI,UWORD:MI,WORD:eo,WS:$I});const Qs=/[a-z]/,Zh=new RegExp("\\p{L}","u"),U1=new RegExp("\\p{Emoji}","u"),Xs=/\d/,H1=/\s/,cq="\r",W1=`
`,Hwe="",Wwe="",K1="";let Pg=null,Ig=null;function Kwe(t=[]){const e={};Wn.groups=e;const r=new Wn;Pg==null&&(Pg=uq(qwe)),Ig==null&&(Ig=uq(Lwe)),J(r,"'",Tv),J(r,"{",If),J(r,"}",Rf),J(r,"[",fv),J(r,"]",pv),J(r,"(",mv),J(r,")",gv),J(r,"<",yv),J(r,">",vv),J(r,"",bv),J(r,"",xv),J(r,"",wv),J(r,"",Sv),J(r,"",_v),J(r,"",Ev),J(r,"",Nv),J(r,"",Cv),J(r,"&",kv),J(r,"*",Ov),J(r,"@",na),J(r,"`",Pv),J(r,"^",Iv),J(r,":",ua),J(r,",",rA),J(r,"$",Rv),J(r,".",_s),J(r,"=",Mv),J(r,"!",nA),J(r,"-",Ci),J(r,"%",Mf),J(r,"|",Av),J(r,"+",Dv),J(r,"#",$v),J(r,"?",Af),J(r,'"',iA),J(r,"/",Es),J(r,";",sA),J(r,"~",Df),J(r,"_",Fv),J(r,"\\",jv),J(r,"",Sie);const n=er(r,Xs,eA,{[jI]:!0});er(n,Xs,n);const i=er(n,Qs,xie,{[Pf]:!0}),s=er(n,Zh,wie,{[pf]:!0}),o=er(r,Qs,eo,{[PI]:!0});er(o,Xs,i),er(o,Qs,o),er(i,Xs,i),er(i,Qs,i);const a=er(r,Zh,MI,{[II]:!0});er(a,Qs),er(a,Xs,s),er(a,Zh,a),er(s,Xs,s),er(s,Qs),er(s,Zh,s);const l=J(r,W1,tA,{[V1]:!0}),c=J(r,cq,$I,{[V1]:!0}),d=er(r,H1,$I,{[V1]:!0});J(r,K1,d),J(c,W1,l),J(c,K1,d),er(c,H1,d),J(d,cq),J(d,W1),er(d,H1,d),J(d,K1,d);const h=er(r,U1,_ie,{[bie]:!0});J(h,"#"),er(h,U1,h),J(h,Hwe,h);const f=J(h,Wwe);J(f,"#"),er(f,U1,h);const p=[[Qs,o],[Xs,i]],m=[[Qs,null],[Zh,a],[Xs,s]];for(let g=0;g<Pg.length;g++)Ko(r,Pg[g],AI,eo,p);for(let g=0;g<Ig.length;g++)Ko(r,Ig[g],DI,MI,m);Dl(AI,{tld:!0,ascii:!0},e),Dl(DI,{utld:!0,alpha:!0},e),Ko(r,"file",uy,eo,p),Ko(r,"mailto",uy,eo,p),Ko(r,"http",_u,eo,p),Ko(r,"https",_u,eo,p),Ko(r,"ftp",_u,eo,p),Ko(r,"ftps",_u,eo,p),Dl(uy,{scheme:!0,ascii:!0},e),Dl(_u,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],b=t[g][1]?{[Bwe]:!0}:{[zwe]:!0};v.indexOf("-")>=0?b[RI]=!0:Qs.test(v)?Xs.test(v)?b[Pf]=!0:b[PI]=!0:b[jI]=!0,lq(r,v,v,b)}return lq(r,"localhost",wp,{ascii:!0}),r.jd=new Wn(qv),{start:r,tokens:Object.assign({groups:e},Eie)}}function Nie(t,e){const r=Gwe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,c=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),c+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,c-=h,i.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function Gwe(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Ko(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Wn(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Wn(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function uq(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const Sp={defaultProtocol:"http",events:null,format:dq,formatHref:dq,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function oA(t,e=null){let r=Object.assign({},Sp);t&&(r=Object.assign(r,t instanceof oA?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}oA.prototype={o:Sp,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:Sp[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function dq(t){return t}function Cie(t,e){this.t="token",this.v=t,this.tk=e}Cie.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Sp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),c=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function K0(t,e){class r extends Cie{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const hq=K0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),fq=K0("text"),Ywe=K0("nl"),Rg=K0("url",{isLink:!0,toHref(t=Sp.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==wp&&t[1].t===ua}}),Ni=t=>new Wn(t);function Qwe({groups:t}){const e=t.domain.concat([kv,Ov,na,jv,Pv,Iv,Rv,Mv,Ci,eA,Mf,Av,Dv,$v,Es,qv,Df,Fv]),r=[Tv,ua,rA,_s,nA,Mf,Af,iA,sA,yv,vv,If,Rf,pv,fv,mv,gv,bv,xv,wv,Sv,_v,Ev,Nv,Cv],n=[kv,Tv,Ov,jv,Pv,Iv,Rv,Mv,Ci,If,Rf,Mf,Av,Dv,$v,Af,Es,qv,Df,Fv],i=Ni(),s=J(i,Df);Ue(s,n,s),Ue(s,t.domain,s);const o=Ni(),a=Ni(),l=Ni();Ue(i,t.domain,o),Ue(i,t.scheme,a),Ue(i,t.slashscheme,l),Ue(o,n,s),Ue(o,t.domain,o);const c=J(o,na);J(s,na,c),J(a,na,c),J(l,na,c);const d=J(s,_s);Ue(d,n,s),Ue(d,t.domain,s);const h=Ni();Ue(c,t.domain,h),Ue(h,t.domain,h);const f=J(h,_s);Ue(f,t.domain,h);const p=Ni(hq);Ue(f,t.tld,p),Ue(f,t.utld,p),J(c,wp,p);const m=J(h,Ci);J(m,Ci,m),Ue(m,t.domain,h),Ue(p,t.domain,h),J(p,_s,f),J(p,Ci,m);const g=J(p,ua);Ue(g,t.numeric,hq);const v=J(o,Ci),y=J(o,_s);J(v,Ci,v),Ue(v,t.domain,o),Ue(y,n,s),Ue(y,t.domain,o);const b=Ni(Rg);Ue(y,t.tld,b),Ue(y,t.utld,b),Ue(b,t.domain,o),Ue(b,n,s),J(b,_s,y),J(b,Ci,v),J(b,na,c);const w=J(b,ua),x=Ni(Rg);Ue(w,t.numeric,x);const S=Ni(Rg),_=Ni();Ue(S,e,S),Ue(S,r,_),Ue(_,e,S),Ue(_,r,_),J(b,Es,S),J(x,Es,S);const N=J(a,ua),E=J(l,ua),k=J(E,Es),C=J(k,Es);Ue(a,t.domain,o),J(a,_s,y),J(a,Ci,v),Ue(l,t.domain,o),J(l,_s,y),J(l,Ci,v),Ue(N,t.domain,S),J(N,Es,S),J(N,Af,S),Ue(C,t.domain,S),Ue(C,e,S),J(C,Es,S);const O=[[If,Rf],[fv,pv],[mv,gv],[yv,vv],[bv,xv],[wv,Sv],[_v,Ev],[Nv,Cv]];for(let P=0;P<O.length;P++){const[j,A]=O[P],$=J(S,j);J(_,j,$),J($,A,S);const I=Ni(Rg);Ue($,e,I);const L=Ni();Ue($,r),Ue(I,e,I),Ue(I,r,L),Ue(L,e,I),Ue(L,r,L),J(I,A,S),J(L,A,S)}return J(i,wp,b),J(i,tA,Ywe),{start:i,tokens:Eie}}function Xwe(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,c=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(c=l||a.go(r[i].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(G1(fq,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(G1(p,e,m))}}return o.length>0&&s.push(G1(fq,e,o)),s}function G1(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const Jwe=typeof console<"u"&&console&&console.warn||(()=>{}),Zwe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",$t={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function eSe(){return Wn.groups={},$t.scanner=null,$t.parser=null,$t.tokenQueue=[],$t.pluginQueue=[],$t.customSchemes=[],$t.initialized=!1,$t}function pq(t,e=!1){if($t.initialized&&Jwe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Zwe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);$t.customSchemes.push([t,e])}function tSe(){$t.scanner=Kwe($t.customSchemes);for(let t=0;t<$t.tokenQueue.length;t++)$t.tokenQueue[t][1]({scanner:$t.scanner});$t.parser=Qwe($t.scanner.tokens);for(let t=0;t<$t.pluginQueue.length;t++)$t.pluginQueue[t][1]({scanner:$t.scanner,parser:$t.parser});return $t.initialized=!0,$t}function aA(t){return $t.initialized||tSe(),Xwe($t.parser.start,t,Nie($t.scanner.start,t))}aA.scan=Nie;function kie(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new oA(r),i=aA(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var lA="[\0- -\u2029]",rSe=new RegExp(lA),nSe=new RegExp(`${lA}$`),iSe=new RegExp(lA,"g");function sSe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function oSe(t){return new Yt({key:new Rr("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(c=>c.docChanged)&&!r.doc.eq(n.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=Vne(r.doc,[...e]);if(Qne(a).forEach(({newRange:c})=>{const d=Zbe(n.doc,c,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(c.from,c.to," "," ");if(!nSe.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&f){const p=f.split(rSe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const v=aA(m).map(y=>y.toObject(t.defaultProtocol));if(!sSe(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{YM(y.from,y.to,n.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function aSe(t){return new Yt({key:new Rr("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=Yne(e.state,t.type.name),c=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&c&&(window.open(c,d),o=!0)}return o}}})}function lSe(t){return new Yt({key:new Rr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=kie(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function wl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(iSe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Tie=zc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){pq(t);return}pq(t.scheme,t.optionalSlashes)})},onDestroy(){eSe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!wl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!wl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!wl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Er(this.options.HTMLAttributes,t),0]:["a",Er(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!wl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!wl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Oc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=kie(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!wl(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(oSe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!wl(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(aSe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(lSe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),cSe=Tie,uSe=Object.defineProperty,dSe=(t,e)=>{for(var r in e)uSe(t,r,{get:e[r],enumerable:!0})},hSe="listItem",mq="textStyle",gq=/^\s*([-+*])\s$/,Oie=xi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hSe,this.editor.getAttributes(mq)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ld({find:gq,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ld({find:gq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mq),editor:this.editor})),[t]}}),jie=xi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>ZM(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),fSe={};dSe(fSe,{findListItemPos:()=>om,getNextListDepth:()=>cA,handleBackspace:()=>FI,handleDelete:()=>qI,hasListBefore:()=>Pie,hasListItemAfter:()=>pSe,hasListItemBefore:()=>Iie,listItemHasSubList:()=>Rie,nextListIsDeeper:()=>Mie,nextListIsHigher:()=>Aie});var om=(t,e)=>{const{$from:r}=e.selection,n=_r(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},cA=(t,e)=>{const r=om(t,e);if(!r)return!1;const[,n]=c1e(e,t,r.$pos.pos+4);return n},Pie=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},Iie=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},Rie=(t,e,r)=>{if(!r)return!1;const n=_r(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},FI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!el(t.state,e)&&Pie(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const d=c.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!el(t.state,e)||!f1e(t.state))return!1;const n=om(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=Rie(e,t.state,s);return Iie(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Mie=(t,e)=>{const r=cA(t,e),n=om(t,e);return!n||!r?!1:r>n.depth},Aie=(t,e)=>{const r=cA(t,e),n=om(t,e);return!n||!r?!1:r<n.depth},qI=(t,e)=>{if(!el(t.state,e)||!h1e(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:Mie(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Aie(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},pSe=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},Die=pr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&qI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&qI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&FI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&FI(t,r,n)&&(e=!0)}),e}}}}),yq=/^(\s*)(\d+)\.\s+(.*)$/,mSe=/^\s/;function gSe(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(yq);if(!s)break;const[,o,a,l]=s,c=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(yq))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(mSe))f.push(p),d+=`
${p.slice(c+2)}`,h+=1;else break}e.push({indent:c,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function $ie(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);c.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=$ie(f,p,r);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=h}else s+=1}return i}function ySe(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var vSe="listItem",vq="textStyle",bq=/^(\d+)\.\s$/,Fie=xi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Er(this.options.HTMLAttributes,r),0]:["ol",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?ySe(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=gSe(i);if(s.length===0)return;const a=$ie(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(vSe,this.editor.getAttributes(vq)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ld({find:bq,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ld({find:bq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(vq)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),bSe=/^\s*(\[([( |x])?\])\s$/,xSe=xi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Er(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return ZM(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,c(h);const f=n.extensionManager.attributes,p=xp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(v=>{m.has(v)||(v in g?i.setAttribute(v,g[v]):i.removeAttribute(v))}),Object.entries(p).forEach(([v,y])=>{y==null?v in g?i.setAttribute(v,g[v]):i.removeAttribute(v):i.setAttribute(v,y)}),d=m,!0}}}},addInputRules(){return[Ld({find:bSe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),wSe=xi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Er(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=TI(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=TI(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});pr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Oie.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(jie.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Die.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(Fie.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(xSe.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(wSe.configure(this.options.taskList)),t}});var SSe=xi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Er(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),_Se=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,ESe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,NSe=zc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[qd({find:_Se,type:this.type})]},addPasteRules(){return[Oc({find:ESe,type:this.type})]}}),CSe=xi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),kSe=zc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Er(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function TSe(t={}){return new Yt({view(e){return new OSe(e,t)}})}class OSe{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;n={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;c=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-c)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Mre(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class ar extends He{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return ar.valid(n)?new ar(n):He.near(n)}content(){return pe.empty}eq(e){return e instanceof ar&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ar(e.resolve(r.pos))}getBookmark(){return new uA(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!jSe(e)||!PSe(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&ar.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(ar.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!je.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(ar.valid(a))return a}return null}}}ar.prototype.visible=!1;ar.findFrom=ar.findGapCursorFrom;He.jsonID("gapcursor",ar);class uA{constructor(e){this.pos=e}map(e){return new uA(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return ar.valid(r)?new ar(r):He.near(r)}}function qie(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function jSe(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||qie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function PSe(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||qie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function ISe(){return new Yt({props:{decorations:DSe,createSelectionBetween(t,e,r){return e.pos==r.pos&&ar.valid(r)?new ar(r):null},handleClick:MSe,handleKeyDown:RSe,handleDOMEvents:{beforeinput:ASe}}})}const RSe=Ane({ArrowLeft:Mg("horiz",-1),ArrowRight:Mg("horiz",1),ArrowUp:Mg("vert",-1),ArrowDown:Mg("vert",1)});function Mg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Fe){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=ar.findGapCursorFrom(a,e,l);return c?(i&&i(n.tr.setSelection(new ar(c))),!0):!1}}function MSe(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!ar.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&je.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ar(n))),!0)}function ASe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ar))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=Q.empty;for(let o=n.length-1;o>=0;o--)i=Q.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new pe(i,0,0));return s.setSelection(Fe.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function DSe(t){if(!(t.selection instanceof ar))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ut.create(t.doc,[Pn.widget(t.selection.head,e,{key:"gapcursor"})])}var Lv=200,Hr=function(){};Hr.prototype.append=function(e){return e.length?(e=Hr.from(e),!this.length&&e||e.length<Lv&&this.leafAppend(e)||this.length<Lv&&e.leafPrepend(this)||this.appendInner(e)):this};Hr.prototype.prepend=function(e){return e.length?Hr.from(e).append(this):this};Hr.prototype.appendInner=function(e){return new $Se(this,e)};Hr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Hr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Hr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Hr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Hr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};Hr.from=function(e){return e instanceof Hr?e:e&&e.length?new Lie(e):Hr.empty};var Lie=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Lv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Lv)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Hr);Hr.empty=new Lie([]);var $Se=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Hr);const FSe=500;class as{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new Ns(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ns(m,void 0,void 0,c.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new as(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Ns(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>LSe&&(a=qSe(a,c),o-=c),new as(a.append(s),o)}remapping(e,r){let n=new pp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new as(this.items.append(e.map(r=>new Ns(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),v=f.selection&&f.selection.map(s.slice(l+1,p));v&&a++,n.push(new Ns(m,g,v))}else n.push(new Ns(m))},i);let c=[];for(let f=r;f<o;f++)c.push(new Ns(s.maps[f]));let d=this.items.slice(0,i).append(c).append(n),h=new as(d,a);return h.emptyItemCount()>FSe&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new Ns(c.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new as(Hr.from(i.reverse()),s)}}as.empty=new as(Hr.empty,0);function qSe(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Ns{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Ns(r.getMap().invert(),r,this.selection)}}}class ia{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const LSe=20;function BSe(t,e,r,n){let i=r.getMeta(ic),s;if(i)return i.historyState;r.getMeta(USe)&&(t=new ia(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(ic))return o.getMeta(ic).redo?new ia(t.done.addTransform(r,void 0,n,dy(e)),t.undone,xq(r.mapping.maps),t.prevTime,t.prevComposition):new ia(t.done,t.undone.addTransform(r,void 0,n,dy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!zSe(r,t.prevRanges)),c=o?Y1(t.prevRanges,r.mapping):xq(r.mapping.maps);return new ia(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,dy(e)),as.empty,c,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new ia(t.done.rebased(r,s),t.undone.rebased(r,s),Y1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new ia(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),Y1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function zSe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function xq(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function Y1(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function VSe(t,e,r){let n=dy(e),i=ic.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new ia(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(ic,{redo:r,historyState:l})}let Q1=!1,wq=null;function dy(t){let e=t.plugins;if(wq!=e){Q1=!1,wq=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){Q1=!0;break}}return Q1}const ic=new Rr("history"),USe=new Rr("closeHistory");function HSe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Yt({key:ic,state:{init(){return new ia(as.empty,as.empty,null,0,-1)},apply(e,r,n){return BSe(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?zie:n=="historyRedo"?Vie:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function Bie(t,e){return(r,n)=>{let i=ic.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=VSe(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const zie=Bie(!1,!0),Vie=Bie(!0,!0);pr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Yt({key:new Rr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>n)}})]}});var WSe=pr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[TSe(this.options)]}});pr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Yt({key:new Rr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Ut.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(Pn.node(c,c+l.nodeSize,{class:this.options.className}))}),Ut.create(t,s)}}})]}});var KSe=pr.create({name:"gapCursor",addProseMirrorPlugins(){return[ISe()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=gt(ke(t,"allowGapCursor",r)))!=null?e:null}}}),GSe=pr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Yt({key:new Rr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,c=!o.isLeaf&&V0(o);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=Pn.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Ut.create(t,i)}}})]}});pr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Yt({key:new Rr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||Xne(r.selection)||t.view.dragging?null:Ut.create(r.doc,[Pn.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function Sq({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var YSe=pr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Rr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Yt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,d=e.getState(o),h=a.content.size,f=c.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!Sq({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!Sq({node:o,types:n})}}})]}}),QSe=pr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>zie(t,e),redo:()=>({state:t,dispatch:e})=>Vie(t,e)}},addProseMirrorPlugins(){return[HSe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),XSe=pr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(_we.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(vwe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Oie.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Cwe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Owe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(jwe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(WSe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(KSe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Pwe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Iwe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(QSe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(Rwe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(Fwe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(jie.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Die.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(Tie.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(Fie.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(SSe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(NSe.configure(this.options.strike)),this.options.text!==!1&&i.push(CSe.configure(this.options.text)),this.options.underline!==!1&&i.push(kSe.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(YSe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),JSe=XSe,ZSe=GSe;const Go=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>u.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),e_e=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return u.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[u.jsx(Go,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:u.jsx(ype,{className:"w-4 h-4"})}),u.jsx(Go,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:u.jsx(Epe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Go,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:u.jsx(Cpe,{className:"w-4 h-4"})}),u.jsx(Go,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:u.jsx(Npe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Go,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:u.jsx(bM,{className:"w-4 h-4"})}),t.isActive("link")&&u.jsx(Go,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:u.jsx($pe,{className:"w-4 h-4"})}),u.jsx("div",{className:"flex-1"}),u.jsx(Go,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:u.jsx(Dpe,{className:"w-4 h-4"})}),u.jsx(Go,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:u.jsx(Ppe,{className:"w-4 h-4"})})]})};function Uie({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=fwe({extensions:[JSe.configure({heading:!1,codeBlock:!1,blockquote:!1}),ZSe.configure({placeholder:r}),cSe.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return u.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[u.jsx(e_e,{editor:o}),u.jsx(owe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),u.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function Bv(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const X1=[{id:"call",label:"Phone call",icon:wM},{id:"email",label:"Email",icon:xM},{id:"chat",label:"Chat",icon:j0},{id:"meeting",label:"Meeting",icon:Fs},{id:"coffee",label:"Coffee",icon:Pte},{id:"lunch",label:"Lunch",icon:Lte},{id:"note",label:"Other",icon:O0}];function dA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=T.useState("call"),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,v]=T.useState([]),[y,b]=T.useState(!1),[w,x]=T.useState(""),{data:S}=em(),_=!!o;if(T.useEffect(()=>{if(t){const I=new Date,L=I.toISOString().split("T")[0],F=I.toTimeString().slice(0,5);o?(d(o.activity_date||L),f(o.activity_time||""),m(o.content||""),v(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||L),f(s.activity_time||F),m(s.content||""),v(s.participants||[]),l(s.activity_type||"note")):(d(L),f(F),m(""),v([]),l("call"))}},[t,s,o]),!t)return null;const N=(S||[]).filter(I=>I.id.toString()!==(i==null?void 0:i.toString())),E=N.filter(I=>{var L;return(L=I.name)==null?void 0:L.toLowerCase().includes(w.toLowerCase())}),k=I=>{I.preventDefault(),!Bv(p)&&(r({activity_type:a,activity_date:c||null,activity_time:h||null,content:p,participants:g}),m(""),v([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},C=()=>{m(""),v([]),d(""),f(""),b(!1),x(""),e()},O=I=>{v(L=>L.includes(I)?L.filter(F=>F!==I):[...L,I])},P=I=>{v(L=>L.filter(F=>F!==I))},j=()=>N.filter(I=>g.includes(I.id)),A=I=>{if(!I)return"";try{return new Date(I).toISOString().split("T")[0]}catch{return""}};return(X1.find(I=>I.id===a)||X1[0]).icon,u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[u.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),u.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:k,className:"p-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-4 md:col-span-1",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:X1.map(I=>{const L=I.icon,F=a===I.id;return u.jsxs("button",{type:"button",onClick:()=>l(I.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${F?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[u.jsx(L,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs",children:I.label})]},I.id)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),u.jsx("input",{id:"activity-date",type:"date",value:A(c),onChange:I=>d(I.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),u.jsx("input",{id:"activity-time",type:"time",value:h,onChange:I=>f(I.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),j().length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:j().map(I=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[I.name,u.jsx("button",{type:"button",onClick:()=>P(I.id),className:"hover:text-primary-900",disabled:n,children:u.jsx(Ht,{className:"w-3 h-3"})})]},I.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>b(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&u.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[u.jsx("div",{className:"p-2 border-b",children:u.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:I=>x(I.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),u.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0?u.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):E.map(I=>{var F;const L=g.includes(I.id);return u.jsxs("button",{type:"button",onClick:()=>O(I.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${L?"bg-primary-50":""}`,children:[u.jsx("input",{type:"checkbox",checked:L,onChange:()=>{},className:"mr-1"}),I.thumbnail?u.jsx("img",{src:I.thumbnail,alt:I.name,className:"w-6 h-6 rounded-full"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((F=I.first_name)==null?void 0:F[0])||"?"})}),u.jsx("span",{children:I.name})]},I.id)})})]})]})]})]}),u.jsxs("div",{className:"flex flex-col md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("div",{className:"flex-1",children:u.jsx(Uie,{value:p,onChange:m,placeholder:"What happened? Add your call notes, chat summary, meeting notes...",disabled:n,minHeight:"280px"})})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:[u.jsx("button",{type:"button",onClick:C,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Bv(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function Yo({title:t,value:e,icon:r,href:n}){return u.jsx(Pe,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),u.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function J1({person:t,hideStar:e=!1}){var r,n;return u.jsxs(Pe,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):u.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&u.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&u.jsx(Id,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function t_e({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),u.jsx("p",{className:"text-xs text-gray-500",children:Tn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&u.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(c=>{var d;return c.thumbnail?u.jsx("img",{src:c.thumbnail,alt:c.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},c.id):u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:u.jsx("span",{className:"text-sm",children:(d=c.name)==null?void 0:d[0]})},c.id)})})]});return i&&n?u.jsx(Pe,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):u.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function r_e({todo:t,onToggle:e}){var n;const r=rm(t);return u.jsxs(Pe,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx($s,{className:"w-5 h-5 text-primary-600"}):u.jsx(Pd,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),u.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&u.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[u.jsx("div",{children:Tn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&u.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function n_e(){return u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:u.jsx($te,{className:"w-12 h-12 text-primary-600"})})}),u.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",_c,"!"]}),u.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsxs(Pe,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[u.jsx(or,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),u.jsxs(Pe,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(or,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function i_e(){var C,O,P;const{data:t,isLoading:e,error:r}=zpe(),{data:n}=zte(!1),i=Vte(),s=_M(),[o,a]=T.useState(null),[l,c]=T.useState(!1),[d,h]=T.useState(!1),[f,p]=T.useState(null),m=j=>{if(!j.is_completed){a(j),c(!0);return}i.mutate({todoId:j.id,data:{content:j.content,due_date:j.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),c(!1),a(null))},v=()=>{if(!o)return;const j=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:j,activity_type:"note",participants:[]}),c(!1),h(!0)},y=async j=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:j}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch(A){console.error("Failed to create activity:",A),alert("Failed to create activity. Please try again.")}};if(e)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const j=((C=r==null?void 0:r.response)==null?void 0:C.status)>=500||!(r!=null&&r.response);return u.jsx("div",{className:"card p-8 text-center",children:u.jsx("div",{className:"text-red-600 mb-2",children:j?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),u.jsx("p",{className:"text-sm text-gray-600",children:((P=(O=r==null?void 0:r.response)==null?void 0:O.data)==null?void 0:P.message)||"An error occurred while loading your data."})]})})})}const{stats:b,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:_}=t||{};if(((b==null?void 0:b.total_people)||0)+((b==null?void 0:b.total_companies)||0)+((b==null?void 0:b.total_dates)||0)===0)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Yo,{title:"Total people",value:0,icon:Fs,href:"/people"}),u.jsx(Yo,{title:"Organizations",value:0,icon:Ir,href:"/companies"}),u.jsx(Yo,{title:"Events",value:0,icon:mo,href:"/dates"}),u.jsx(Yo,{title:"Open todos",value:0,icon:$s,href:"/todos"})]}),u.jsx(n_e,{})]});const k=(n==null?void 0:n.slice(0,5))||[];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Yo,{title:"Total people",value:(b==null?void 0:b.total_people)||0,icon:Fs,href:"/people"}),u.jsx(Yo,{title:"Organizations",value:(b==null?void 0:b.total_companies)||0,icon:Ir,href:"/companies"}),u.jsx(Yo,{title:"Events",value:(b==null?void 0:b.total_dates)||0,icon:mo,href:"/dates"}),u.jsx(Yo,{title:"Open todos",value:(b==null?void 0:b.open_todos_count)||0,icon:$s,href:"/todos"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(mo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),u.jsxs(Pe,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",u.jsx(b1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(j=>u.jsx(t_e,{reminder:j},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx($s,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),u.jsxs(Pe,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",u.jsx(b1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:k.length>0?k.map(j=>u.jsx(r_e,{todo:j,onToggle:m},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Id,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(j=>u.jsx(J1,{person:j,hideStar:!0},j.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(j0,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(_==null?void 0:_.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(j=>u.jsx(J1,{person:j},j.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),u.jsxs(Pe,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",u.jsx(b1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(j=>u.jsx(J1,{person:j},j.id)):u.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",u.jsx(Pe,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),u.jsx(EM,{isOpen:l,onClose:()=>{c(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:v}),u.jsx(dA,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function _q(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function s_e({person:t,companyName:e,isDeceased:r}){var n,i;return u.jsx(Pe,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&u.jsx(Id,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>u.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function o_e(){const[t,e]=T.useState(!1),[r,n]=T.useState(!1),[i,s]=T.useState([]),[o,a]=T.useState(""),[l,c]=T.useState(""),[d,h]=T.useState("first_name"),[f,p]=T.useState("asc"),m=T.useRef(null),g=T.useRef(null),{data:v,isLoading:y,error:b}=em(),{data:w}=ft({queryKey:["person-labels"],queryFn:async()=>(await Ge.getPersonLabels()).data}),x=(w==null?void 0:w.map(A=>A.name))||[],S=T.useMemo(()=>{if(!v)return[];const A=v.map($=>$.birth_year).filter($=>$!=null);return[...new Set(A)].sort(($,I)=>I-$)},[v]);T.useEffect(()=>{const A=$=>{g.current&&!g.current.contains($.target)&&m.current&&!m.current.contains($.target)&&e(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]);const _=T.useMemo(()=>{if(!v)return[];let A=[...v];if(r&&(A=A.filter($=>$.is_favorite)),i.length>0&&(A=A.filter($=>{const I=$.labels||[];return i.some(L=>I.includes(L))})),o){const $=parseInt(o,10);A=A.filter(I=>I.birth_year===$)}if(l){const $=new Date;let I;switch(l){case"7":I=new Date($.setDate($.getDate()-7));break;case"30":I=new Date($.setDate($.getDate()-30));break;case"90":I=new Date($.setDate($.getDate()-90));break;case"365":I=new Date($.setDate($.getDate()-365));break;default:I=null}I&&(A=A.filter(L=>L.modified?new Date(L.modified)>=I:!1))}return A.sort(($,I)=>{var G,K,ue,Ae,Ce,nt,Oe,ot;let L,F;if(d==="modified"){L=$.modified?new Date($.modified).getTime():0,F=I.modified?new Date(I.modified).getTime():0;const Ye=L-F;return f==="asc"?Ye:-Ye}if(d==="first_name"?(L=(((G=$.acf)==null?void 0:G.first_name)||$.first_name||"").toLowerCase(),F=(((K=I.acf)==null?void 0:K.first_name)||I.first_name||"").toLowerCase()):(L=(((ue=$.acf)==null?void 0:ue.last_name)||$.last_name||"").toLowerCase(),F=(((Ae=I.acf)==null?void 0:Ae.last_name)||I.last_name||"").toLowerCase()),L===F){const Ye=d==="first_name"?(((Ce=$.acf)==null?void 0:Ce.last_name)||$.last_name||"").toLowerCase():(((nt=$.acf)==null?void 0:nt.first_name)||$.first_name||"").toLowerCase(),Ar=d==="first_name"?(((Oe=I.acf)==null?void 0:Oe.last_name)||I.last_name||"").toLowerCase():(((ot=I.acf)==null?void 0:ot.first_name)||I.first_name||"").toLowerCase(),gr=Ye.localeCompare(Ar);return f==="asc"?gr:-gr}const H=L.localeCompare(F);return f==="asc"?H:-H})},[v,r,i,o,l,d,f]),N=r||i.length>0||o||l,E=A=>{s($=>$.includes(A)?$.filter(I=>I!==A):[...$,A])},k=()=>{n(!1),s([]),a(""),c("")},C=T.useMemo(()=>{if(!_)return[];const A=_.map($=>_q($)).filter(Boolean);return[...new Set(A)]},[_]),{data:O}=ft({queryKey:["companies","batch",C.sort().join(",")],queryFn:async()=>C.length===0?[]:(await Ge.getCompanies({per_page:100,include:C.join(",")})).data,enabled:C.length>0}),P=T.useMemo(()=>{const A={};return O&&O.forEach($=>{A[$.id]=nr($)}),A},[O]),j=T.useMemo(()=>{const A={};return _.forEach($=>{const I=_q($);I&&P[I]&&(A[$.id]=P[I])}),A},[_,P]);return u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[u.jsxs("select",{value:d,onChange:A=>h(A.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[u.jsx("option",{value:"first_name",children:"First name"}),u.jsx("option",{value:"last_name",children:"Last name"}),u.jsx("option",{value:"modified",children:"Last modified"})]}),u.jsx("div",{className:"h-4 w-px bg-gray-300"}),u.jsx("button",{onClick:()=>p(f==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${f==="asc"?"descending":"ascending"}`,children:f==="asc"?u.jsx(mpe,{className:"w-4 h-4 text-gray-600"}):u.jsx(ppe,{className:"w-4 h-4 text-gray-600"})})]}),u.jsxs("div",{className:"relative",ref:m,children:[u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${N?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[u.jsx(lI,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Filter"}),N&&u.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&u.jsx("div",{ref:g,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:A=>n(A.target.checked),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&u.jsx(LF,{className:"w-3 h-3 text-white"})}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Id,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),u.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),x.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:x.map(A=>u.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:i.includes(A),onChange:()=>E(A),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(A)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(A)&&u.jsx(LF,{className:"w-3 h-3 text-white"})}),u.jsx("span",{className:"text-sm text-gray-700",children:A})]},A))})]}),S.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),u.jsxs("select",{value:o,onChange:A=>a(A.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"All years"}),S.map(A=>u.jsx("option",{value:A,children:A},A))]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),u.jsxs("select",{value:l,onChange:A=>c(A.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"Any time"}),u.jsx("option",{value:"7",children:"Last 7 days"}),u.jsx("option",{value:"30",children:"Last 30 days"}),u.jsx("option",{value:"90",children:"Last 90 days"}),u.jsx("option",{value:"365",children:"Last year"})]})]}),N&&u.jsx("button",{onClick:k,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),N&&u.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[u.jsx(Id,{className:"w-3 h-3"}),"Favorites",u.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:u.jsx(Ht,{className:"w-3 h-3"})})]}),i.map(A=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[A,u.jsx("button",{onClick:()=>E(A),className:"hover:text-gray-600",children:u.jsx(Ht,{className:"w-3 h-3"})})]},A)),o&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,u.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:u.jsx(Ht,{className:"w-3 h-3"})})]}),l&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",u.jsx("button",{onClick:()=>c(""),className:"hover:text-gray-600",children:u.jsx(Ht,{className:"w-3 h-3"})})]})]}),u.jsxs(Pe,{to:"/people/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),y&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),b&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!y&&!b&&(v==null?void 0:v.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(or,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),u.jsxs(Pe,{to:"/people/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!y&&!b&&(_==null?void 0:_.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(A=>u.jsx(s_e,{person:A,companyName:j[A.id],isDeceased:A.is_deceased},A.id))}),!y&&!b&&(v==null?void 0:v.length)>0&&(_==null?void 0:_.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(lI,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),u.jsx("button",{onClick:k,className:"btn-secondary",children:"Clear filters"})]})]})}const a_e="#0285FF",l_e=T.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=a_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),c_e="#0866FF",u_e=T.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=c_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),d_e="#FF0069",h_e=T.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=d_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),f_e="#4A154B",p_e=T.forwardRef(function({title:e="Slack",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=f_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})]})}),m_e="#000000",g_e=T.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=m_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),y_e="#000000",v_e=T.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=y_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),b_e={Phone:wM,Mail:xM,Users:Fs,Coffee:Pte,Utensils:Lte,FileText:O0,Circle:oI,MessageCircle:j0};function x_e({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=T.useMemo(()=>Vge(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?sI:Pd;if(f.type==="activity"&&f.activity_type){const p=Hge(f.activity_type);return b_e[p]||oI}return f.type==="note"?O0:oI},c=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",v=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const b=Uge(y),w=Kge(f),x=m&&rm(f);return u.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&u.jsx("div",{className:"absolute left-0 top-1",children:u.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),u.jsx("div",{className:`${w}`,children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&u.jsx("span",{className:"text-xs font-medium text-gray-600",children:Wge(f.activity_type)}),u.jsx("span",{className:"text-xs text-gray-400",children:""}),u.jsx("span",{className:"text-xs text-gray-500",children:b})]}),u.jsxs("div",{className:"flex items-start gap-2",children:[m&&u.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?u.jsx(sI,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):u.jsx(Pd,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(v||g)&&((S=f.content)!=null&&S.includes("<"))?u.jsx("div",{className:`text-sm flex-1 prose prose-sm max-w-none ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):u.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&u.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const N=a(_);return N?u.jsxs(Pe,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[u.jsx(bM,{className:"w-3 h-3"}),N.name]},_):null})]}),m&&f.due_date&&u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Tn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&u.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:u.jsx(ta,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&u.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),u.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(c)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?u.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function w_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i=""}){const[s,o]=T.useState("");if(T.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=c=>{c.preventDefault(),!Bv(s)&&(r(s),o(""))},l=()=>{o(""),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),u.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),u.jsx(Uie,{value:s,onChange:o,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:l,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Bv(s),children:n?"Adding...":"Add note"})]})]})]})})}function Hie({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=T.useState(""),[a,l]=T.useState(""),[c,d]=T.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:c}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:f,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&u.jsx("div",{className:"mb-4",children:u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:c,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),u.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}var am=t=>t.type==="checkbox",$l=t=>t instanceof Date,Vn=t=>t==null;const Wie=t=>typeof t=="object";var br=t=>!Vn(t)&&!Array.isArray(t)&&Wie(t)&&!$l(t),Kie=t=>br(t)&&t.target?am(t.target)?t.target.checked:t.target.value:t,S_e=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Gie=(t,e)=>t.has(S_e(e)),__e=t=>{const e=t.constructor&&t.constructor.prototype;return br(e)&&e.hasOwnProperty("isPrototypeOf")},hA=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dt(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(hA&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(br(t)&&__e(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Dt(t[i]));return n}var G0=t=>/^\w*$/.test(t),jt=t=>t===void 0,Y0=t=>Array.isArray(t)?t.filter(Boolean):[],fA=t=>Y0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),le=(t,e,r)=>{if(!e||!br(t))return r;const n=(G0(e)?[e]:fA(e)).reduce((i,s)=>Vn(i)?i:i[s],t);return jt(n)||n===t?jt(t[e])?r:t[e]:n},ui=t=>typeof t=="boolean",jn=t=>typeof t=="function",_t=(t,e,r)=>{let n=-1;const i=G0(e)?[e]:fA(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const c=t[a];l=br(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const zv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ai={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Js={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Yie=ve.createContext(null);Yie.displayName="HookFormContext";const Q0=()=>ve.useContext(Yie);var Qie=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Ai.all&&(e._proxyFormState[o]=!n||Ai.all),r&&(r[o]=!0),t[o]}});return i};const X0=typeof window<"u"?ve.useLayoutEffect:ve.useEffect;function E_e(t){const e=Q0(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=ve.useState(r._formState),l=ve.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return X0(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:c=>{!n&&a({...r._formState,...c})}}),[i,n,s]),ve.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),ve.useMemo(()=>Qie(o,r,l.current,!1),[o,r])}var fi=t=>typeof t=="string",LI=(t,e,r,n,i)=>fi(t)?(n&&e.watch.add(t),le(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),le(r,s))):(n&&(e.watchAll=!0),r),BI=t=>Vn(t)||!Wie(t);function ls(t,e,r=new WeakSet){if(BI(t)||BI(e))return Object.is(t,e);if($l(t)&&$l(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if($l(o)&&$l(a)||br(o)&&br(a)||Array.isArray(o)&&Array.isArray(a)?!ls(o,a,r):!Object.is(o,a))return!1}}return!0}function N_e(t){const e=Q0(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=ve.useRef(i),c=ve.useRef(a),d=ve.useRef(void 0),h=ve.useRef(r),f=ve.useRef(n);c.current=a;const[p,m]=ve.useState(()=>{const x=r._getWatch(n,l.current);return c.current?c.current(x):x}),g=ve.useCallback(x=>{const S=LI(n,r._names,x||r._formValues,!1,l.current);return c.current?c.current(S):S},[r._formValues,r._names,n]),v=ve.useCallback(x=>{if(!s){const S=LI(n,r._names,x||r._formValues,!1,l.current);if(c.current){const _=c.current(S);ls(_,d.current)||(m(_),d.current=_)}else m(S)}},[r._formValues,r._names,s,n]);X0(()=>((h.current!==r||!ls(f.current,n))&&(h.current=r,f.current=n,v()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{v(x.values)}})),[r,o,n,v]),ve.useEffect(()=>r._removeUnmounted());const y=h.current!==r,b=f.current,w=ve.useMemo(()=>{if(s)return null;const x=!y&&!ls(b,n);return y||x?g():null},[s,y,n,b,g]);return w!==null?w:p}function C_e(t){const e=Q0(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=Gie(i._names.array,r),c=ve.useMemo(()=>le(i._formValues,r,le(i._defaultValues,r,o)),[i,r,o]),d=N_e({control:i,name:r,defaultValue:c,exact:a}),h=E_e({control:i,name:r,exact:a}),f=ve.useRef(t),p=ve.useRef(void 0),m=ve.useRef(i.register(r,{...t.rules,value:d,...ui(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=ve.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!le(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!le(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!le(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!le(h.validatingFields,r)},error:{enumerable:!0,get:()=>le(h.errors,r)}}),[h,r]),v=ve.useCallback(x=>m.current.onChange({target:{value:Kie(x),name:r},type:zv.CHANGE}),[r]),y=ve.useCallback(()=>m.current.onBlur({target:{value:le(i._formValues,r),name:r},type:zv.BLUR}),[r,i._formValues]),b=ve.useCallback(x=>{const S=le(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>jn(x.focus)&&x.focus(),select:()=>jn(x.select)&&x.select(),setCustomValidity:_=>jn(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>jn(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=ve.useMemo(()=>({name:r,value:d,...ui(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:v,onBlur:y,ref:b}),[r,n,h.disabled,v,y,b,d]);return ve.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...ui(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(N,E)=>{const k=le(i._fields,N);k&&k._f&&(k._f.mount=E)};if(_(r,!0),x){const N=Dt(le(i._options.defaultValues,r,f.current.defaultValue));_t(i._defaultValues,r,N),jt(le(i._formValues,r))&&_t(i._formValues,r,N)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),ve.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),ve.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const Vv=t=>t.render(C_e(t));var k_e=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},Qn=t=>Array.isArray(t)?t:[t],Eq=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function Xie(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&br(i)&&s){const o=Xie(i,s);br(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var pn=t=>br(t)&&!Object.keys(t).length,pA=t=>t.type==="file",Uv=t=>{if(!hA)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Jie=t=>t.type==="select-multiple",mA=t=>t.type==="radio",T_e=t=>mA(t)||am(t),Z1=t=>Uv(t)&&t.isConnected;function O_e(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=jt(t)?n++:t[e[n++]];return t}function j_e(t){for(const e in t)if(t.hasOwnProperty(e)&&!jt(t[e]))return!1;return!0}function ur(t,e){const r=Array.isArray(e)?e:G0(e)?[e]:fA(e),n=r.length===1?t:O_e(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(br(n)&&pn(n)||Array.isArray(n)&&j_e(n))&&ur(t,r.slice(0,-1)),t}var P_e=t=>{for(const e in t)if(jn(t[e]))return!0;return!1};function Zie(t){return Array.isArray(t)||br(t)&&!P_e(t)}function zI(t,e={}){for(const r in t){const n=t[r];Zie(n)?(e[r]=Array.isArray(n)?[]:{},zI(n,e[r])):jt(n)||(e[r]=!0)}return e}function Eu(t,e,r){r||(r=zI(e));for(const n in t){const i=t[n];if(Zie(i))jt(e)||BI(r[n])?r[n]=zI(i,Array.isArray(i)?[]:{}):Eu(i,Vn(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!ls(i,s)}}return r}const Nq={value:!1,isValid:!1},Cq={value:!0,isValid:!0};var ese=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!jt(t[0].attributes.value)?jt(t[0].value)||t[0].value===""?Cq:{value:t[0].value,isValid:!0}:Cq:Nq}return Nq},tse=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>jt(t)?t:e?t===""?NaN:t&&+t:r&&fi(t)?new Date(t):n?n(t):t;const kq={isValid:!1,value:null};var rse=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,kq):kq;function Tq(t){const e=t.ref;return pA(e)?e.files:mA(e)?rse(t.refs).value:Jie(e)?[...e.selectedOptions].map(({value:r})=>r):am(e)?ese(t.refs).value:tse(jt(e.value)?t.ref.value:e.value,t)}var I_e=(t,e,r,n)=>{const i={};for(const s of t){const o=le(e,s);o&&_t(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Hv=t=>t instanceof RegExp,ef=t=>jt(t)?t:Hv(t)?t.source:br(t)?Hv(t.value)?t.value.source:t.value:t,Fu=t=>({isOnSubmit:!t||t===Ai.onSubmit,isOnBlur:t===Ai.onBlur,isOnChange:t===Ai.onChange,isOnAll:t===Ai.all,isOnTouch:t===Ai.onTouched});const Oq="AsyncFunction";var R_e=t=>!!t&&!!t.validate&&!!(jn(t.validate)&&t.validate.constructor.name===Oq||br(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Oq)),M_e=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),VI=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const td=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=le(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(td(a,e))break}else if(br(a)&&td(a,e))break}}};function jq(t,e,r){const n=le(t,r);if(n||G0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=le(e,s),a=le(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var A_e=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return pn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||Ai.all))},D_e=(t,e,r)=>!t||!e||t===e||Qn(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),$_e=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,F_e=(t,e)=>!Y0(le(t,e)).length&&ur(t,e),nse=(t,e,r)=>{const n=Qn(le(t,r));return _t(n,"root",e[r]),_t(t,r,n),t};function Pq(t,e,r="validate"){if(fi(t)||Array.isArray(t)&&t.every(fi)||ui(t)&&!t)return{type:r,message:fi(t)?t:"",ref:e}}var gu=t=>br(t)&&!Hv(t)?t:{value:t,message:""},UI=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:v,mount:y}=t._f,b=le(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=P=>{i&&w.reportValidity&&(w.setCustomValidity(ui(P)?"":P||""),w.reportValidity())},S={},_=mA(o),N=am(o),E=_||N,k=(v||pA(o))&&jt(o.value)&&jt(b)||Uv(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,C=k_e.bind(null,g,n,S),O=(P,j,A,$=Js.maxLength,I=Js.minLength)=>{const L=P?j:A;S[g]={type:P?$:I,message:L,ref:o,...C(P?$:I,L)}};if(s?!Array.isArray(b)||!b.length:l&&(!E&&(k||Vn(b))||ui(b)&&!b||N&&!ese(a).isValid||_&&!rse(a).isValid)){const{value:P,message:j}=fi(l)?{value:!!l,message:l}:gu(l);if(P&&(S[g]={type:Js.required,message:j,ref:w,...C(Js.required,j)},!n))return x(j),S}if(!k&&(!Vn(h)||!Vn(f))){let P,j;const A=gu(f),$=gu(h);if(!Vn(b)&&!isNaN(b)){const I=o.valueAsNumber||b&&+b;Vn(A.value)||(P=I>A.value),Vn($.value)||(j=I<$.value)}else{const I=o.valueAsDate||new Date(b),L=G=>new Date(new Date().toDateString()+" "+G),F=o.type=="time",H=o.type=="week";fi(A.value)&&b&&(P=F?L(b)>L(A.value):H?b>A.value:I>new Date(A.value)),fi($.value)&&b&&(j=F?L(b)<L($.value):H?b<$.value:I<new Date($.value))}if((P||j)&&(O(!!P,A.message,$.message,Js.max,Js.min),!n))return x(S[g].message),S}if((c||d)&&!k&&(fi(b)||s&&Array.isArray(b))){const P=gu(c),j=gu(d),A=!Vn(P.value)&&b.length>+P.value,$=!Vn(j.value)&&b.length<+j.value;if((A||$)&&(O(A,P.message,j.message),!n))return x(S[g].message),S}if(p&&!k&&fi(b)){const{value:P,message:j}=gu(p);if(Hv(P)&&!b.match(P)&&(S[g]={type:Js.pattern,message:j,ref:o,...C(Js.pattern,j)},!n))return x(j),S}if(m){if(jn(m)){const P=await m(b,r),j=Pq(P,w);if(j&&(S[g]={...j,...C(Js.validate,j.message)},!n))return x(j.message),S}else if(br(m)){let P={};for(const j in m){if(!pn(P)&&!n)break;const A=Pq(await m[j](b,r),w,j);A&&(P={...A,...C(j,A.message)},x(A.message),n&&(S[g]=P))}if(!pn(P)&&(S[g]={ref:w,...P},!n))return S}}return x(!0),S};const q_e={mode:Ai.onSubmit,reValidateMode:Ai.onChange,shouldFocusError:!0};function L_e(t={}){let e={...q_e,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:jn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=br(e.defaultValues)||br(e.values)?Dt(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Dt(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:Eq(),state:Eq()},m=e.criteriaMode===Ai.all,g=D=>q=>{clearTimeout(c),c=setTimeout(D,q)},v=async D=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||D)){let q;e.resolver?(q=pn((await E()).errors),y()):q=await C(n,!0),q!==r.isValid&&p.state.next({isValid:q})}},y=(D,q)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((D||Array.from(a.mount)).forEach(z=>{z&&(q?_t(r.validatingFields,z,q):ur(r.validatingFields,z))}),p.state.next({validatingFields:r.validatingFields,isValidating:!pn(r.validatingFields)}))},b=(D,q=[],z,ie,X=!0,Y=!0)=>{if(ie&&z&&!e.disabled){if(o.action=!0,Y&&Array.isArray(le(n,D))){const me=z(le(n,D),ie.argA,ie.argB);X&&_t(n,D,me)}if(Y&&Array.isArray(le(r.errors,D))){const me=z(le(r.errors,D),ie.argA,ie.argB);X&&_t(r.errors,D,me),F_e(r.errors,D)}if((h.touchedFields||f.touchedFields)&&Y&&Array.isArray(le(r.touchedFields,D))){const me=z(le(r.touchedFields,D),ie.argA,ie.argB);X&&_t(r.touchedFields,D,me)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Eu(i,s)),p.state.next({name:D,isDirty:P(D,q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else _t(s,D,q)},w=(D,q)=>{_t(r.errors,D,q),p.state.next({errors:r.errors})},x=D=>{r.errors=D,p.state.next({errors:r.errors,isValid:!1})},S=(D,q,z,ie)=>{const X=le(n,D);if(X){const Y=le(s,D,jt(z)?le(i,D):z);jt(Y)||ie&&ie.defaultChecked||q?_t(s,D,q?Y:Tq(X._f)):$(D,Y),o.mount&&!o.action&&v()}},_=(D,q,z,ie,X)=>{let Y=!1,me=!1;const Be={name:D};if(!e.disabled){if(!z||ie){(h.isDirty||f.isDirty)&&(me=r.isDirty,r.isDirty=Be.isDirty=P(),Y=me!==Be.isDirty);const Qe=ls(le(i,D),q);me=!!le(r.dirtyFields,D),Qe?ur(r.dirtyFields,D):_t(r.dirtyFields,D,!0),Be.dirtyFields=r.dirtyFields,Y=Y||(h.dirtyFields||f.dirtyFields)&&me!==!Qe}if(z){const Qe=le(r.touchedFields,D);Qe||(_t(r.touchedFields,D,z),Be.touchedFields=r.touchedFields,Y=Y||(h.touchedFields||f.touchedFields)&&Qe!==z)}Y&&X&&p.state.next(Be)}return Y?Be:{}},N=(D,q,z,ie)=>{const X=le(r.errors,D),Y=(h.isValid||f.isValid)&&ui(q)&&r.isValid!==q;if(e.delayError&&z?(l=g(()=>w(D,z)),l(e.delayError)):(clearTimeout(c),l=null,z?_t(r.errors,D,z):ur(r.errors,D)),(z?!ls(X,z):X)||!pn(ie)||Y){const me={...ie,...Y&&ui(q)?{isValid:q}:{},errors:r.errors,name:D};r={...r,...me},p.state.next(me)}},E=async D=>(y(D,!0),await e.resolver(s,e.context,I_e(D||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),k=async D=>{const{errors:q}=await E(D);if(y(D),D)for(const z of D){const ie=le(q,z);ie?_t(r.errors,z,ie):ur(r.errors,z)}else r.errors=q;return q},C=async(D,q,z={valid:!0})=>{for(const ie in D){const X=D[ie];if(X){const{_f:Y,...me}=X;if(Y){const Be=a.array.has(Y.name),Qe=X._f&&R_e(X._f);Qe&&h.validatingFields&&y([Y.name],!0);const kt=await UI(X,a.disabled,s,m,e.shouldUseNativeValidation&&!q,Be);if(Qe&&h.validatingFields&&y([Y.name]),kt[Y.name]&&(z.valid=!1,q))break;!q&&(le(kt,Y.name)?Be?nse(r.errors,kt,Y.name):_t(r.errors,Y.name,kt[Y.name]):ur(r.errors,Y.name))}!pn(me)&&await C(me,q,z)}}return z.valid},O=()=>{for(const D of a.unMount){const q=le(n,D);q&&(q._f.refs?q._f.refs.every(z=>!Z1(z)):!Z1(q._f.ref))&&Ye(D)}a.unMount=new Set},P=(D,q)=>!e.disabled&&(D&&q&&_t(s,D,q),!ls(K(),i)),j=(D,q,z)=>LI(D,a,{...o.mount?s:jt(q)?i:fi(D)?{[D]:q}:q},z,q),A=D=>Y0(le(o.mount?s:i,D,e.shouldUnregister?le(i,D,[]):[])),$=(D,q,z={})=>{const ie=le(n,D);let X=q;if(ie){const Y=ie._f;Y&&(!Y.disabled&&_t(s,D,tse(q,Y)),X=Uv(Y.ref)&&Vn(q)?"":q,Jie(Y.ref)?[...Y.ref.options].forEach(me=>me.selected=X.includes(me.value)):Y.refs?am(Y.ref)?Y.refs.forEach(me=>{(!me.defaultChecked||!me.disabled)&&(Array.isArray(X)?me.checked=!!X.find(Be=>Be===me.value):me.checked=X===me.value||!!X)}):Y.refs.forEach(me=>me.checked=me.value===X):pA(Y.ref)?Y.ref.value="":(Y.ref.value=X,Y.ref.type||p.state.next({name:D,values:Dt(s)})))}(z.shouldDirty||z.shouldTouch)&&_(D,X,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&G(D)},I=(D,q,z)=>{for(const ie in q){if(!q.hasOwnProperty(ie))return;const X=q[ie],Y=D+"."+ie,me=le(n,Y);(a.array.has(D)||br(X)||me&&!me._f)&&!$l(X)?I(Y,X,z):$(Y,X,z)}},L=(D,q,z={})=>{const ie=le(n,D),X=a.array.has(D),Y=Dt(q);_t(s,D,Y),X?(p.array.next({name:D,values:Dt(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&z.shouldDirty&&p.state.next({name:D,dirtyFields:Eu(i,s),isDirty:P(D,Y)})):ie&&!ie._f&&!Vn(Y)?I(D,Y,z):$(D,Y,z),VI(D,a)&&p.state.next({...r,name:D}),p.state.next({name:o.mount?D:void 0,values:Dt(s)})},F=async D=>{o.mount=!0;const q=D.target;let z=q.name,ie=!0;const X=le(n,z),Y=Qe=>{ie=Number.isNaN(Qe)||$l(Qe)&&isNaN(Qe.getTime())||ls(Qe,le(s,z,Qe))},me=Fu(e.mode),Be=Fu(e.reValidateMode);if(X){let Qe,kt;const xe=q.type?Tq(X._f):Kie(D),te=D.type===zv.BLUR||D.type===zv.FOCUS_OUT,he=!M_e(X._f)&&!e.resolver&&!le(r.errors,z)&&!X._f.deps||$_e(te,le(r.touchedFields,z),r.isSubmitted,Be,me),ae=VI(z,a,te);_t(s,z,xe),te?(!q||!q.readOnly)&&(X._f.onBlur&&X._f.onBlur(D),l&&l(0)):X._f.onChange&&X._f.onChange(D);const Se=_(z,xe,te),We=!pn(Se)||ae;if(!te&&p.state.next({name:z,type:D.type,values:Dt(s)}),he)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?te&&v():te||v()),We&&p.state.next({name:z,...ae?{}:Se});if(!te&&ae&&p.state.next({...r}),e.resolver){const{errors:Zt}=await E([z]);if(y([z]),Y(xe),ie){const Sn=jq(r.errors,n,z),uu=jq(Zt,n,Sn.name||z);Qe=uu.error,z=uu.name,kt=pn(Zt)}}else y([z],!0),Qe=(await UI(X,a.disabled,s,m,e.shouldUseNativeValidation))[z],y([z]),Y(xe),ie&&(Qe?kt=!1:(h.isValid||f.isValid)&&(kt=await C(n,!0)));ie&&(X._f.deps&&(!Array.isArray(X._f.deps)||X._f.deps.length>0)&&G(X._f.deps),N(z,kt,Qe,Se))}},H=(D,q)=>{if(le(r.errors,q)&&D.focus)return D.focus(),1},G=async(D,q={})=>{let z,ie;const X=Qn(D);if(e.resolver){const Y=await k(jt(D)?D:X);z=pn(Y),ie=D?!X.some(me=>le(Y,me)):z}else D?(ie=(await Promise.all(X.map(async Y=>{const me=le(n,Y);return await C(me&&me._f?{[Y]:me}:me)}))).every(Boolean),!(!ie&&!r.isValid)&&v()):ie=z=await C(n);return p.state.next({...!fi(D)||(h.isValid||f.isValid)&&z!==r.isValid?{}:{name:D},...e.resolver||!D?{isValid:z}:{},errors:r.errors}),q.shouldFocus&&!ie&&td(n,H,D?X:a.mount),ie},K=(D,q)=>{let z={...o.mount?s:i};return q&&(z=Xie(q.dirtyFields?r.dirtyFields:r.touchedFields,z)),jt(D)?z:fi(D)?le(z,D):D.map(ie=>le(z,ie))},ue=(D,q)=>({invalid:!!le((q||r).errors,D),isDirty:!!le((q||r).dirtyFields,D),error:le((q||r).errors,D),isValidating:!!le(r.validatingFields,D),isTouched:!!le((q||r).touchedFields,D)}),Ae=D=>{D&&Qn(D).forEach(q=>ur(r.errors,q)),p.state.next({errors:D?r.errors:{}})},Ce=(D,q,z)=>{const ie=(le(n,D,{_f:{}})._f||{}).ref,X=le(r.errors,D)||{},{ref:Y,message:me,type:Be,...Qe}=X;_t(r.errors,D,{...Qe,...q,ref:ie}),p.state.next({name:D,errors:r.errors,isValid:!1}),z&&z.shouldFocus&&ie&&ie.focus&&ie.focus()},nt=(D,q)=>jn(D)?p.state.subscribe({next:z=>"values"in z&&D(j(void 0,q),z)}):j(D,q,!0),Oe=D=>p.state.subscribe({next:q=>{D_e(D.name,q.name,D.exact)&&A_e(q,D.formState||h,at,D.reRenderRoot)&&D.callback({values:{...s},...r,...q,defaultValues:i})}}).unsubscribe,ot=D=>(o.mount=!0,f={...f,...D.formState},Oe({...D,formState:{...d,...D.formState}})),Ye=(D,q={})=>{for(const z of D?Qn(D):a.mount)a.mount.delete(z),a.array.delete(z),q.keepValue||(ur(n,z),ur(s,z)),!q.keepError&&ur(r.errors,z),!q.keepDirty&&ur(r.dirtyFields,z),!q.keepTouched&&ur(r.touchedFields,z),!q.keepIsValidating&&ur(r.validatingFields,z),!e.shouldUnregister&&!q.keepDefaultValue&&ur(i,z);p.state.next({values:Dt(s)}),p.state.next({...r,...q.keepDirty?{isDirty:P()}:{}}),!q.keepIsValid&&v()},Ar=({disabled:D,name:q})=>{(ui(D)&&o.mount||D||a.disabled.has(q))&&(D?a.disabled.add(q):a.disabled.delete(q))},gr=(D,q={})=>{let z=le(n,D);const ie=ui(q.disabled)||ui(e.disabled);return _t(n,D,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:D}},name:D,mount:!0,...q}}),a.mount.add(D),z?Ar({disabled:ui(q.disabled)?q.disabled:e.disabled,name:D}):S(D,!0,q.value),{...ie?{disabled:q.disabled||e.disabled}:{},...e.progressive?{required:!!q.required,min:ef(q.min),max:ef(q.max),minLength:ef(q.minLength),maxLength:ef(q.maxLength),pattern:ef(q.pattern)}:{},name:D,onChange:F,onBlur:F,ref:X=>{if(X){gr(D,q),z=le(n,D);const Y=jt(X.value)&&X.querySelectorAll&&X.querySelectorAll("input,select,textarea")[0]||X,me=T_e(Y),Be=z._f.refs||[];if(me?Be.find(Qe=>Qe===Y):Y===z._f.ref)return;_t(n,D,{_f:{...z._f,...me?{refs:[...Be.filter(Z1),Y,...Array.isArray(le(i,D))?[{}]:[]],ref:{type:Y.type,name:D}}:{ref:Y}}}),S(D,!1,void 0,Y)}else z=le(n,D,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||q.shouldUnregister)&&!(Gie(a.array,D)&&o.action)&&a.unMount.add(D)}}},qt=()=>e.shouldFocusError&&td(n,H,a.mount),ee=D=>{ui(D)&&(p.state.next({disabled:D}),td(n,(q,z)=>{const ie=le(n,z);ie&&(q.disabled=ie._f.disabled||D,Array.isArray(ie._f.refs)&&ie._f.refs.forEach(X=>{X.disabled=ie._f.disabled||D}))},0,!1))},Ne=(D,q)=>async z=>{let ie;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let X=Dt(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Y,values:me}=await E();y(),r.errors=Y,X=Dt(me)}else await C(n);if(a.disabled.size)for(const Y of a.disabled)ur(X,Y);if(ur(r.errors,"root"),pn(r.errors)){p.state.next({errors:{}});try{await D(X,z)}catch(Y){ie=Y}}else q&&await q({...r.errors},z),qt(),setTimeout(qt);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:pn(r.errors)&&!ie,submitCount:r.submitCount+1,errors:r.errors}),ie)throw ie},Je=(D,q={})=>{le(n,D)&&(jt(q.defaultValue)?L(D,Dt(le(i,D))):(L(D,q.defaultValue),_t(i,D,Dt(q.defaultValue))),q.keepTouched||ur(r.touchedFields,D),q.keepDirty||(ur(r.dirtyFields,D),r.isDirty=q.defaultValue?P(D,Dt(le(i,D))):P()),q.keepError||(ur(r.errors,D),h.isValid&&v()),p.state.next({...r}))},ht=(D,q={})=>{const z=D?Dt(D):i,ie=Dt(z),X=pn(D),Y=X?i:ie;if(q.keepDefaultValues||(i=z),!q.keepValues){if(q.keepDirtyValues){const me=new Set([...a.mount,...Object.keys(Eu(i,s))]);for(const Be of Array.from(me))le(r.dirtyFields,Be)?_t(Y,Be,le(s,Be)):L(Be,le(Y,Be))}else{if(hA&&jt(D))for(const me of a.mount){const Be=le(n,me);if(Be&&Be._f){const Qe=Array.isArray(Be._f.refs)?Be._f.refs[0]:Be._f.ref;if(Uv(Qe)){const kt=Qe.closest("form");if(kt){kt.reset();break}}}}if(q.keepFieldsRef)for(const me of a.mount)L(me,le(Y,me));else n={}}s=e.shouldUnregister?q.keepDefaultValues?Dt(i):{}:Dt(Y),p.array.next({values:{...Y}}),p.state.next({values:{...Y}})}a={mount:q.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!q.keepIsValid||!!q.keepDirtyValues||!e.shouldUnregister&&!pn(Y),o.watch=!!e.shouldUnregister,o.keepIsValid=!!q.keepIsValid,o.action=!1,q.keepErrors||(r.errors={}),p.state.next({submitCount:q.keepSubmitCount?r.submitCount:0,isDirty:X?!1:q.keepDirty?r.isDirty:!!(q.keepDefaultValues&&!ls(D,i)),isSubmitted:q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:X?{}:q.keepDirtyValues?q.keepDefaultValues&&s?Eu(i,s):r.dirtyFields:q.keepDefaultValues&&D?Eu(i,D):q.keepDirty?r.dirtyFields:{},touchedFields:q.keepTouched?r.touchedFields:{},errors:q.keepErrors?r.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Dr=(D,q)=>ht(jn(D)?D(s):D,{...e.resetOptions,...q}),Ie=(D,q={})=>{const z=le(n,D),ie=z&&z._f;if(ie){const X=ie.refs?ie.refs[0]:ie.ref;X.focus&&setTimeout(()=>{X.focus(),q.shouldSelect&&jn(X.select)&&X.select()})}},at=D=>{r={...r,...D}},dt={control:{register:gr,unregister:Ye,getFieldState:ue,handleSubmit:Ne,setError:Ce,_subscribe:Oe,_runSchema:E,_updateIsValidating:y,_focusError:qt,_getWatch:j,_getDirty:P,_setValid:v,_setFieldArray:b,_setDisabledField:Ar,_setErrors:x,_getFieldArray:A,_reset:ht,_resetDefaultValues:()=>jn(e.defaultValues)&&e.defaultValues().then(D=>{Dr(D,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:ee,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(D){o=D},get _defaultValues(){return i},get _names(){return a},set _names(D){a=D},get _formState(){return r},get _options(){return e},set _options(D){e={...e,...D}}},subscribe:ot,trigger:G,register:gr,handleSubmit:Ne,watch:nt,setValue:L,getValues:K,reset:Dr,resetField:Je,clearErrors:Ae,unregister:Ye,setError:Ce,setFocus:Ie,getFieldState:ue};return{...dt,formControl:dt}}var Qo=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},ex=(t,e,r={})=>r.shouldFocus||jt(r.shouldFocus)?r.focusName||`${t}.${jt(r.focusIndex)?e:r.focusIndex}.`:"",tx=(t,e)=>[...t,...Qn(e)],rx=t=>Array.isArray(t)?t.map(()=>{}):void 0;function nx(t,e,r){return[...t.slice(0,e),...Qn(r),...t.slice(e)]}var ix=(t,e,r)=>Array.isArray(t)?(jt(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],sx=(t,e)=>[...Qn(e),...Qn(t)];function B_e(t,e){let r=0;const n=[...t];for(const i of e)n.splice(i-r,1),r++;return Y0(n).length?n:[]}var ox=(t,e)=>jt(e)?[]:B_e(t,Qn(e).sort((r,n)=>r-n)),ax=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},Iq=(t,e,r)=>(t[e]=r,t);function z_e(t){const e=Q0(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:s,rules:o}=t,[a,l]=ve.useState(r._getFieldArray(n)),c=ve.useRef(r._getFieldArray(n).map(Qo)),d=ve.useRef(!1);r._names.array.add(n),ve.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),X0(()=>r._subjects.array.subscribe({next:({values:x,name:S})=>{if(S===n||!S){const _=le(x,n);Array.isArray(_)&&(l(_),c.current=_.map(Qo))}}}).unsubscribe,[r,n]);const h=ve.useCallback(x=>{d.current=!0,r._setFieldArray(n,x)},[r,n]),f=(x,S)=>{const _=Qn(Dt(x)),N=tx(r._getFieldArray(n),_);r._names.focus=ex(n,N.length-1,S),c.current=tx(c.current,_.map(Qo)),h(N),l(N),r._setFieldArray(n,N,tx,{argA:rx(x)})},p=(x,S)=>{const _=Qn(Dt(x)),N=sx(r._getFieldArray(n),_);r._names.focus=ex(n,0,S),c.current=sx(c.current,_.map(Qo)),h(N),l(N),r._setFieldArray(n,N,sx,{argA:rx(x)})},m=x=>{const S=ox(r._getFieldArray(n),x);c.current=ox(c.current,x),h(S),l(S),!Array.isArray(le(r._fields,n))&&_t(r._fields,n,void 0),r._setFieldArray(n,S,ox,{argA:x})},g=(x,S,_)=>{const N=Qn(Dt(S)),E=nx(r._getFieldArray(n),x,N);r._names.focus=ex(n,x,_),c.current=nx(c.current,x,N.map(Qo)),h(E),l(E),r._setFieldArray(n,E,nx,{argA:x,argB:rx(S)})},v=(x,S)=>{const _=r._getFieldArray(n);ax(_,x,S),ax(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,ax,{argA:x,argB:S},!1)},y=(x,S)=>{const _=r._getFieldArray(n);ix(_,x,S),ix(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,ix,{argA:x,argB:S},!1)},b=(x,S)=>{const _=Dt(S),N=Iq(r._getFieldArray(n),x,_);c.current=[...N].map((E,k)=>!E||k===x?Qo():c.current[k]),h(N),l([...N]),r._setFieldArray(n,N,Iq,{argA:x,argB:_},!0,!1)},w=x=>{const S=Qn(Dt(x));c.current=S.map(Qo),h([...S]),l([...S]),r._setFieldArray(n,[...S],_=>_,{},!0,!1)};return ve.useEffect(()=>{if(r._state.action=!1,VI(n,r._names)&&r._subjects.state.next({...r._formState}),d.current&&(!Fu(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Fu(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(x=>{r._updateIsValidating([n]);const S=le(x.errors,n),_=le(r._formState.errors,n);(_?!S&&_.type||S&&(_.type!==S.type||_.message!==S.message):S&&S.type)&&(S?_t(r._formState.errors,n,S):ur(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const x=le(r._fields,n);x&&x._f&&!(Fu(r._options.reValidateMode).isOnSubmit&&Fu(r._options.mode).isOnSubmit)&&UI(x,r._names.disabled,r._formValues,r._options.criteriaMode===Ai.all,r._options.shouldUseNativeValidation,!0).then(S=>!pn(S)&&r._subjects.state.next({errors:nse(r._formState.errors,S,n)}))}r._subjects.state.next({name:n,values:Dt(r._formValues)}),r._names.focus&&td(r._fields,(x,S)=>{if(r._names.focus&&S.startsWith(r._names.focus)&&x.focus)return x.focus(),1}),r._names.focus="",r._setValid(),d.current=!1},[a,n,r]),ve.useEffect(()=>(!le(r._formValues,n)&&r._setFieldArray(n),()=>{const x=(S,_)=>{const N=le(r._fields,S);N&&N._f&&(N._f.mount=_)};r._options.shouldUnregister||s?r.unregister(n):x(n,!1)}),[n,r,i,s]),{swap:ve.useCallback(v,[h,n,r]),move:ve.useCallback(y,[h,n,r]),prepend:ve.useCallback(p,[h,n,r]),append:ve.useCallback(f,[h,n,r]),remove:ve.useCallback(m,[h,n,r]),insert:ve.useCallback(g,[h,n,r]),update:ve.useCallback(b,[h,n,r]),replace:ve.useCallback(w,[h,n,r]),fields:ve.useMemo(()=>a.map((x,S)=>({...x,[i]:c.current[S]||Qo()})),[a,i])}}function Uc(t={}){const e=ve.useRef(void 0),r=ve.useRef(void 0),[n,i]=ve.useState({isDirty:!1,isValidating:!1,isLoading:jn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:jn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!jn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=L_e(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,X0(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),ve.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),ve.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),ve.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),ve.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),ve.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),ve.useEffect(()=>{var o;t.values&&!ls(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),ve.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=Qie(n,s),e.current}const V_e=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"slack",label:"Slack"},{value:"other",label:"Other"}];function U_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,contactInfo:i=[]}){const{register:s,control:o,handleSubmit:a,reset:l,formState:{errors:c}}=Uc({defaultValues:{contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]}}),{fields:d,append:h,remove:f}=z_e({control:o,name:"contacts"});if(T.useEffect(()=>{t&&l({contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]})},[t,i,l]),!t)return null;const p=g=>{const v=g.contacts.filter(y=>y.contact_type&&y.contact_value);r(v)},m=()=>{h({contact_type:"",contact_label:"",contact_value:""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Edit contact details"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a(p),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[d.length===0?u.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:'No contact details yet. Click "Add contact detail" to add one.'}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-2 text-xs font-medium text-gray-500 px-1",children:[u.jsx("div",{className:"col-span-3",children:"Type"}),u.jsx("div",{className:"col-span-3",children:"Label"}),u.jsx("div",{className:"col-span-5",children:"Value"}),u.jsx("div",{className:"col-span-1"})]}),d.map((g,v)=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 p-3 md:p-2 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Type"}),u.jsxs("select",{...s(`contacts.${v}.contact_type`,{required:!0}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n,children:[u.jsx("option",{value:"",children:"Select type..."}),V_e.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))]})]}),u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Label"}),u.jsx("input",{...s(`contacts.${v}.contact_label`),placeholder:"e.g., Work",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{className:"md:col-span-5",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Value"}),u.jsx("input",{...s(`contacts.${v}.contact_value`,{required:!0}),placeholder:"e.g., john@example.com",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsx("div",{className:"md:col-span-1 flex items-center justify-end md:justify-center",children:u.jsx("button",{type:"button",onClick:()=>f(v),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",disabled:n,children:u.jsx(di,{className:"w-4 h-4"})})})]},g.id))]}),u.jsxs("button",{type:"button",onClick:m,className:"mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",disabled:n,children:[u.jsx(or,{className:"w-4 h-4"}),"Add contact detail"]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":"Save changes"})]})]})]})})}function H_e({value:t=[],onChange:e,people:r=[],isLoading:n,currentPersonId:i}){const[s,o]=T.useState(""),a=T.useMemo(()=>{if(!s)return r.slice(0,10);const h=s.toLowerCase();return r.filter(f=>Xu(f).toLowerCase().includes(h)).slice(0,10)},[r,s]),l=T.useMemo(()=>t.map(h=>r.find(f=>f.id===h)).filter(Boolean),[t,r]),c=h=>{t.includes(h)||e([...t,h]),o("")},d=h=>{h!==i&&e(t.filter(f=>f!==h))};return u.jsxs("div",{className:"space-y-2",children:[l.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[Xu(h),h.id!==i&&u.jsx("button",{type:"button",onClick:()=>d(h.id),className:"hover:text-primary-600",children:u.jsx(Ht,{className:"w-3 h-3"})})]},h.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:s,onChange:h=>o(h.target.value),placeholder:"Search for people to add...",className:"input",disabled:n}),s&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:a.length>0?a.map(h=>u.jsx("button",{type:"button",onClick:()=>c(h.id),disabled:t.includes(h.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(h.id)?"opacity-50 cursor-not-allowed":""}`,children:Xu(h)},h.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function W_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,dateItem:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1}){const l=!!i,{data:c=[]}=ft({queryKey:["date-types"],queryFn:async()=>((await Ge.getDateTypes()).data||[]).sort((N,E)=>{const k=N.name||"",C=E.name||"";return k.localeCompare(C)})}),{register:d,handleSubmit:h,reset:f,watch:p,setValue:m,control:g,formState:{errors:v}}=Uc({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),y=p("related_people"),b=p("date_type"),w=p("title");if(T.useEffect(()=>{var N;if((!w||["'s Birthday","Wedding of "].some(E=>w.endsWith(E)||w.startsWith(E)))&&(y==null?void 0:y.length)>0&&b){const E=c.find(P=>P.id===parseInt(b)),k=(E==null?void 0:E.name)||"",C=((N=E==null?void 0:E.slug)==null?void 0:N.toLowerCase())||k.toLowerCase(),O=y.map(P=>{var A,$,I;const j=o.find(L=>L.id===P);return j?Yn(((A=j.acf)==null?void 0:A.first_name)||j.first_name||((I=($=j.title)==null?void 0:$.rendered)==null?void 0:I.split(" ")[0])||""):null}).filter(Boolean);if(O.length>0&&k){let P;C==="wedding"?P=O.length>=2?`Wedding of ${O[0]} & ${O[1]}`:`Wedding of ${O[0]}`:P=`${O[0]}'s ${k}`,m("title",P)}}},[y,b,o,c,m,w]),T.useEffect(()=>{var S,_,N,E,k,C;if(t)if(i){let O=[];const P=(S=i.acf)==null?void 0:S.related_people;P&&(Array.isArray(P)?O=P.map(A=>parseInt(typeof A=="object"&&A!==null?A.ID||A.id||A.post_id:A,10)).filter(A=>!isNaN(A)&&A>0):typeof P=="number"&&(O=[P]));let j="";((_=i.date_type)==null?void 0:_.length)>0&&(j=i.date_type[0].toString()),f({title:Yn(((N=i.title)==null?void 0:N.rendered)||i.title||""),date_value:((E=i.acf)==null?void 0:E.date_value)||i.date_value||"",date_type:j,related_people:O,is_recurring:((k=i.acf)==null?void 0:k.is_recurring)??i.is_recurring??!0,year_unknown:((C=i.acf)==null?void 0:C.year_unknown)??i.year_unknown??!1})}else f({title:"",date_value:"",date_type:"",related_people:s?[parseInt(s)]:[],is_recurring:!0,year_unknown:!1})},[t,i,s,f]),!t)return null;const x=S=>{r({title:S.title,date_type:S.date_type?[parseInt(S.date_type)]:[],date_value:S.date_value,related_people:S.related_people,is_recurring:S.is_recurring,year_unknown:S.year_unknown})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:l?"Edit date":"Add date"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:h(x),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related people"}),u.jsx(Vv,{name:"related_people",control:g,render:({field:S})=>u.jsx(H_e,{value:S.value,onChange:S.onChange,people:o,isLoading:a,currentPersonId:parseInt(s)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date type *"}),u.jsx(Vv,{name:"date_type",control:g,rules:{required:"Please select a date type"},render:({field:S})=>u.jsxs("select",{value:S.value?String(S.value):"",onChange:_=>S.onChange(_.target.value),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select a type..."}),c.map(_=>u.jsx("option",{value:String(_.id),children:_.name},_.id))]})}),v.date_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...d("title"),className:"input",placeholder:"e.g., Mom's Birthday",disabled:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date *"}),u.jsx("input",{...d("date_value",{required:"Date is required"}),type:"date",className:"input",disabled:n}),v.date_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_value.message})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"year_unknown",...d("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_recurring",...d("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":l?"Save changes":"Add date"})]})]})]})})}function K_e({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=T.useState(""),[a,l]=T.useState(!1),c=T.useRef(null),d=T.useRef(null),h=T.useMemo(()=>r.filter(b=>b.id!==i).sort((b,w)=>{var _,N;const x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((N=w.acf)==null?void 0:N.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=T.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(b=>{var _,N;const w=Xu(b).toLowerCase(),x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(b.last_name||((N=b.acf)==null?void 0:N.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=T.useMemo(()=>h.find(y=>y.id===t),[h,t]);T.useEffect(()=>{const y=b=>{d.current&&!d.current.contains(b.target)&&c.current&&!c.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},v=p?Xu(p):"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:p&&!a?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[u.jsx("span",{children:v}),u.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Ht,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:c,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&u.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>u.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:Xu(y)},y.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function G_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,relationship:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1,onCreatePerson:l}){const c=!!i,{data:d=[],isLoading:h}=ft({queryKey:["relationship-types"],queryFn:async()=>(await Ge.getRelationshipTypes()).data}),{register:f,handleSubmit:p,reset:m,control:g,formState:{errors:v}}=Uc({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});if(T.useEffect(()=>{t&&m(i?{related_person:i.related_person||null,relationship_type:i.relationship_type?String(i.relationship_type):"",relationship_label:i.relationship_label||""}:{related_person:null,relationship_type:"",relationship_label:""})},[t,i,m]),!t)return null;const y=b=>{r({related_person:b.related_person||null,relationship_type:b.relationship_type?parseInt(b.relationship_type,10):null,relationship_label:b.relationship_label||""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:c?"Edit relationship":"Add relationship"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:p(y),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related person *"}),u.jsx(Vv,{name:"related_person",control:g,rules:{required:"Please select a person"},render:({field:b})=>u.jsx(K_e,{value:b.value,onChange:b.onChange,people:o,isLoading:a,excludePersonId:parseInt(s,10)})}),v.related_person&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.related_person.message}),!c&&l&&u.jsx("div",{className:"mt-2",children:u.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[u.jsx(or,{className:"w-4 h-4"}),"Add new person"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Relationship type"}),u.jsxs("select",{...f("relationship_type"),className:"input",disabled:h||n,children:[u.jsx("option",{value:"",children:"Select a type..."}),d.map(b=>u.jsx("option",{value:b.id,children:b.name},b.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Custom label"}),u.jsx("input",{...f("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law",disabled:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":c?"Save changes":"Add relationship"})]})]})]})})}function Y_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,address:i=null}){const s=!!i,{register:o,handleSubmit:a,reset:l,formState:{errors:c}}=Uc({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});if(T.useEffect(()=>{t&&l(i?{address_label:i.address_label||"",street:i.street||"",postal_code:i.postal_code||"",city:i.city||"",state:i.state||"",country:i.country||""}:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""})},[t,i,l]),!t)return null;const d=h=>{r({address_label:h.address_label||"",street:h.street||"",postal_code:h.postal_code||"",city:h.city||"",state:h.state||"",country:h.country||""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit address":"Add address"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a(d),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...o("address_label"),className:"input",placeholder:"e.g., Home, Work",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Street"}),u.jsx("input",{...o("street"),className:"input",placeholder:"e.g., 123 Main Street",disabled:n})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Postal code"}),u.jsx("input",{...o("postal_code"),className:"input",placeholder:"e.g., 12345",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"City"}),u.jsx("input",{...o("city"),className:"input",placeholder:"e.g., Amsterdam",disabled:n})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"State/Province"}),u.jsx("input",{...o("state"),className:"input",placeholder:"e.g., North Holland",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Country"}),u.jsx("input",{...o("country"),className:"input",placeholder:"e.g., Netherlands",disabled:n})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add address"})]})]})]})})}function Q_e({value:t,onChange:e,companies:r,isLoading:n}){return u.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return u.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function X_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,workHistoryItem:i=null}){const s=!!i,{data:o=[],isLoading:a}=ft({queryKey:["companies","all"],queryFn:async()=>(await Ge.getCompanies({per_page:100})).data}),l=T.useMemo(()=>[...o].sort((v,y)=>{var x,S;const b=(((x=v.title)==null?void 0:x.rendered)||v.title||"").toLowerCase(),w=(((S=y.title)==null?void 0:S.rendered)||y.title||"").toLowerCase();return b.localeCompare(w)}),[o]),{register:c,handleSubmit:d,reset:h,watch:f,control:p,formState:{errors:m}}=Uc({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});if(f("is_current"),T.useEffect(()=>{t&&h(i?{company:i.company||null,job_title:i.job_title||"",description:i.description||"",start_date:i.start_date||"",end_date:i.end_date||"",is_current:i.is_current||!1}:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1})},[t,i,h]),!t)return null;const g=v=>{r({company:v.company||null,job_title:v.job_title||"",description:v.description||"",start_date:v.start_date||"",end_date:v.end_date||"",is_current:v.is_current||!1})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit work history":"Add work history"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:d(g),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization"}),u.jsx(Vv,{name:"company",control:p,render:({field:v})=>u.jsx(Q_e,{value:v.value,onChange:v.onChange,companies:l,isLoading:a||n})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Job title"}),u.jsx("input",{...c("job_title"),className:"input",placeholder:"e.g., Software Engineer",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Description"}),u.jsx("textarea",{...c("description"),className:"input",rows:3,placeholder:"Job description, responsibilities, achievements...",disabled:n})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Start date"}),u.jsx("input",{type:"date",...c("start_date"),className:"input",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"End date"}),u.jsx("input",{type:"date",...c("end_date"),className:"input",disabled:n})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_current",...c("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add work history"})]})]})]})})}function Ln(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function J_e(t){return t?t.replace(/[^\d+]/g,""):""}function Rq(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function Z_e(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function eEe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${Ln(l)}`),s.push(`N:${Ln(a)};${Ln(o)};;;`),i.nickname&&s.push(`NICKNAME:${Ln(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=Ln(h.contact_value),p=h.contact_label?Ln(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",v=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=J_e(h.contact_value);y&&s.push(`${v}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let b=h.contact_value;b.match(/^https?:\/\//i)||(b=`https://${b}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${Ln(b)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=Ln(h.street||""),m=Ln(h.city||""),g=Ln(h.state||""),v=Ln(h.postal_code||""),y=Ln(h.country||"");(p||m||g||v||y)&&s.push(`${f}:;;${p};${m};${g};${v};${y}`)});const{title:c,org:d}=Z_e(i.work_history,r);if(d&&s.push(`ORG:${Ln(d)}`),c&&s.push(`TITLE:${Ln(c)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=Rq(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=Rq(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function tEe(t,e={}){const{filename:r,...n}=e,i=eEe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const rEe=({className:t})=>u.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:u.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function Ag(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function nEe(){var TD,OD,jD,PD,ID,RD,MD,AD,DD,$D,FD,qD,LD,BD,zD;const{id:t}=Gp(),e=ms(),r=Mt(),{data:n,isLoading:i,error:s}=SM(t),{data:o}=Wpe(t),{data:a}=Kpe(t),l=Ype(),c=Xpe(),d=rme(),h=Hte(),f=Qpe(),p=_M(),m=Jpe(),g=Wte(),v=eme(),y=Zpe(),b=tme(),{data:w,isLoading:x}=em(),{data:S=[]}=ft({queryKey:["investments",t],queryFn:async()=>(await $e.getInvestments(t)).data,enabled:!!t}),[_,N]=T.useState(!1),[E,k]=T.useState(""),[C,O]=T.useState(!1),P=T.useRef(null),[j,A]=T.useState(!1),[$,I]=T.useState(!1),[L,F]=T.useState(!1),[H,G]=T.useState(!1),[K,ue]=T.useState(!1),[Ae,Ce]=T.useState(!1),[nt,Oe]=T.useState(!1),[ot,Ye]=T.useState(!1),[Ar,gr]=T.useState(!1),[qt,ee]=T.useState(!1),[Ne,Je]=T.useState(!1),[ht,Dr]=T.useState(!1),[Ie,at]=T.useState(!1),[Jt,dt]=T.useState(null),[D,q]=T.useState(null),[z,ie]=T.useState(null),[X,Y]=T.useState(null),[me,Be]=T.useState(null),[Qe,kt]=T.useState(null),[xe,te]=T.useState(null),[he,ae]=T.useState(null),[Se,We]=T.useState(null),[Zt,Sn]=T.useState(null),[uu,du]=T.useState(!1),[Rb,Ph]=T.useState(null),{data:Mb}=ft({queryKey:["person-labels"],queryFn:async()=>(await Ge.getPersonLabels()).data}),Um=Mb||[],Ab=(n==null?void 0:n.labels)||[],Ih=((PD=(jD=(OD=(TD=n==null?void 0:n._embedded)==null?void 0:TD["wp:term"])==null?void 0:OD.flat())==null?void 0:jD.filter(R=>(R==null?void 0:R.taxonomy)==="person_label"))==null?void 0:PD.map(R=>R.id))||[],Rh=Um.filter(R=>!Ab.includes(R.name));al((n==null?void 0:n.name)||((ID=n==null?void 0:n.title)==null?void 0:ID.rendered)||(n==null?void 0:n.title)||"Person");const Ws=a==null?void 0:a.find(R=>{const W=Array.isArray(R.date_type)?R.date_type[0]:R.date_type;return(W==null?void 0:W.toLowerCase())==="birthday"}),Mh=Ws!=null&&Ws.date_value?new Date(Ws.date_value):null,Db=(Ws==null?void 0:Ws.year_unknown)??!1,fe=a==null?void 0:a.find(R=>{const W=Array.isArray(R.date_type)?R.date_type[0]:R.date_type;return(W==null?void 0:W.toLowerCase())==="died"}),Ee=fe!=null&&fe.date_value?new Date(fe.date_value):null,Le=(fe==null?void 0:fe.year_unknown)??!1,St=!!Ee,un=Mh&&!Db?x1(St?Ee:new Date,Mh):null,Hm=a?[...a].sort((R,W)=>{const U=R.date_value?new Date(R.date_value):new Date(0),be=W.date_value?new Date(W.date_value):new Date(0);return U-be}):[],Wm=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch(R){console.error("Failed to delete person:",R),alert("Failed to delete person. Please try again.")}},Ah=R=>{if(!R)return"";let W=R.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const U=W.startsWith("+");return W=W.replace(/\D/g,""),U?`+${W}`:W},Km=async R=>{gr(!0);try{const W=Ho(n.acf,{contact_info:R});await h.mutateAsync({id:t,data:{acf:W}}),G(!1)}catch(W){console.error("Failed to save contacts:",W),alert("Failed to save contacts. Please try again.")}finally{gr(!1)}},Gm=async R=>{ee(!0);try{z?await Ge.updateDate(z.id,{title:R.title,date_type:R.date_type,acf:{date_value:R.date_value,related_people:R.related_people,is_recurring:R.is_recurring,year_unknown:R.year_unknown}}):await Ge.createDate({title:R.title,status:"publish",date_type:R.date_type,acf:{date_value:R.date_value,related_people:R.related_people,is_recurring:R.is_recurring,year_unknown:R.year_unknown}}),r.invalidateQueries({queryKey:["person-dates",t]}),r.invalidateQueries({queryKey:["reminders"]}),ue(!1),ie(null)}catch(W){console.error("Failed to save date:",W),alert("Failed to save date. Please try again.")}finally{ee(!1)}},$b=async R=>{var W;Je(!0);try{const U=[...((W=n.acf)==null?void 0:W.relationships)||[]],be={related_person:R.related_person||null,relationship_type:R.relationship_type||null,relationship_label:R.relationship_label||""};me!==null?U[me]=be:U.push(be);const De=Ho(n.acf,{relationships:U});await h.mutateAsync({id:t,data:{acf:De}}),r.invalidateQueries({queryKey:["person",t]}),Ce(!1),Y(null),Be(null)}catch(U){console.error("Failed to save relationship:",U),alert("Failed to save relationship. Please try again.")}finally{Je(!1)}},rle=async R=>{var W;Dr(!0);try{const U=[...((W=n.acf)==null?void 0:W.addresses)||[]],be={address_label:R.address_label||"",street:R.street||"",postal_code:R.postal_code||"",city:R.city||"",state:R.state||"",country:R.country||""};xe!==null?U[xe]=be:U.push(be);const De=Ho(n.acf,{addresses:U});await h.mutateAsync({id:t,data:{acf:De}}),Oe(!1),kt(null),te(null)}catch(U){console.error("Failed to save address:",U),alert("Failed to save address. Please try again.")}finally{Dr(!1)}},nle=async R=>{var W;at(!0);try{const U=[...((W=n.acf)==null?void 0:W.work_history)||[]],be={company:R.company||null,job_title:R.job_title||"",description:R.description||"",start_date:R.start_date||"",end_date:R.end_date||"",is_current:R.is_current||!1};Se!==null?U[Se]=be:U.push(be);const De=Ho(n.acf,{work_history:U});await h.mutateAsync({id:t,data:{acf:De}}),Ye(!1),ae(null),We(null)}catch(U){console.error("Failed to save work history:",U),alert("Failed to save work history. Please try again.")}finally{at(!1)}},ile=async R=>{var be;if(!window.confirm("Are you sure you want to delete this address?"))return;const W=[...((be=n.acf)==null?void 0:be.addresses)||[]];W.splice(R,1);const U=Ho(n.acf,{addresses:W});await h.mutateAsync({id:t,data:{acf:U}})},sle=async R=>{var dn,Ks,Dh,Jm,VD,UD;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const W=(Ks=(dn=n.acf)==null?void 0:dn.relationships)==null?void 0:Ks[R];if(!W)return;const U=W.related_person,be=W.relationship_type;let De=!0;U&&be&&(De=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let et=null;if(!De&&U&&be)try{const[bs,Zm]=await Promise.all([Ge.getPerson(U,{_embed:!0}),Ge.getRelationshipTypes()]),Bb={};Zm.data.forEach($h=>{Bb[$h.id]=$h});const Ei=Bb[be],xl=(Dh=Ei==null?void 0:Ei.acf)==null?void 0:Dh.inverse_relationship_type;if(xl){const Fh=(((Jm=bs.data.acf)==null?void 0:Jm.relationships)||[]).find(Gs=>{var HD,WD;const kle=typeof Gs.related_person=="object"?(HD=Gs.related_person)==null?void 0:HD.ID:Gs.related_person,Tle=typeof Gs.relationship_type=="object"?(WD=Gs.relationship_type)==null?void 0:WD.term_id:Gs.relationship_type;return kle===parseInt(t)&&Tle===xl});Fh&&(et={related_person:parseInt(t),relationship_type:xl,relationship_label:Fh.relationship_label||""})}}catch(bs){console.error("Failed to fetch inverse relationship:",bs)}const lt=[...((VD=n.acf)==null?void 0:VD.relationships)||[]];lt.splice(R,1);const Qi=Ho(n.acf,{relationships:lt});if(await h.mutateAsync({id:t,data:{acf:Qi}}),!De&&et&&U){await new Promise(bs=>setTimeout(bs,500));try{const bs=await Ge.getPerson(U,{_embed:!0}),Zm=((UD=bs.data.acf)==null?void 0:UD.relationships)||[];if(!Zm.some(Ei=>{var Fh,Gs;const xl=typeof Ei.related_person=="object"?(Fh=Ei.related_person)==null?void 0:Fh.ID:Ei.related_person,$h=typeof Ei.relationship_type=="object"?(Gs=Ei.relationship_type)==null?void 0:Gs.term_id:Ei.relationship_type;return xl===et.related_person&&$h===et.relationship_type})){const Ei=[...Zm,et],xl=Ho(bs.data.acf,{relationships:Ei});await Ge.updatePerson(U,{acf:xl})}}catch(bs){console.error("Failed to restore inverse relationship:",bs)}}r.invalidateQueries({queryKey:["person",t]}),U&&r.invalidateQueries({queryKey:["person",U]}),r.invalidateQueries({queryKey:["people"]})},ole=async R=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:R,personId:t})},ale=async R=>{window.confirm("Are you sure you want to delete this note?")&&await c.mutateAsync({noteId:R,personId:t})},lle=async R=>{try{await f.mutateAsync({personId:t,content:R}),A(!1)}catch(W){console.error("Failed to create note:",W),alert("Failed to create note. Please try again.")}},cle=async R=>{try{D?(await m.mutateAsync({activityId:D.id,data:R,personId:t}),q(null)):(await p.mutateAsync({personId:t,data:R}),Zt&&(await v.mutateAsync({todoId:Zt.id,data:{content:Zt.content,due_date:Zt.due_date,is_completed:!0},personId:t}),Sn(null),Ph(null))),I(!1)}catch(W){console.error("Failed to save activity:",W),alert("Failed to save activity. Please try again.")}},ule=async R=>{try{await g.mutateAsync({personId:t,data:R}),F(!1),dt(null)}catch(W){console.error("Failed to create todo:",W),alert("Failed to create todo. Please try again.")}},dle=async R=>{if(Jt)try{await v.mutateAsync({todoId:Jt.id,data:R,personId:t}),F(!1),dt(null)}catch(W){console.error("Failed to update todo:",W),alert("Failed to update todo. Please try again.")}},SD=async R=>{if(!R.is_completed){Sn(R),du(!0);return}try{await v.mutateAsync({todoId:R.id,data:{content:R.content,due_date:R.due_date,is_completed:!1},personId:t})}catch(W){console.error("Failed to toggle todo:",W),alert("Failed to update todo. Please try again.")}},hle=async()=>{if(Zt)try{await v.mutateAsync({todoId:Zt.id,data:{content:Zt.content,due_date:Zt.due_date,is_completed:!0},personId:t}),du(!1),Sn(null)}catch(R){console.error("Failed to complete todo:",R),alert("Failed to complete todo. Please try again.")}},fle=()=>{if(!Zt)return;const R=new Date().toISOString().split("T")[0];Ph({content:Zt.content,activity_date:R,activity_type:"note",participants:[]}),du(!1),I(!0)},ple=async R=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:R,personId:t})},_D=async R=>{window.confirm("Are you sure you want to delete this todo?")&&await b.mutateAsync({todoId:R,personId:t})},mle=R=>{R.type==="todo"?(dt(R),F(!0)):R.type==="activity"&&(q(R),I(!0))},gle=R=>{R.type==="note"?ale(R.id):R.type==="activity"?ple(R.id):R.type==="todo"&&_D(R.id)},yle=async R=>{var be;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const W=[...((be=n.acf)==null?void 0:be.work_history)||[]];W.splice(R,1);const U=Ho(n.acf,{work_history:W});await h.mutateAsync({id:t,data:{acf:U}})},vle=async R=>{var be,De,et;const W=(et=(De=(be=n==null?void 0:n._embedded)==null?void 0:be["wp:term"])==null?void 0:De.flat())==null?void 0:et.find(lt=>(lt==null?void 0:lt.taxonomy)==="person_label"&&(lt==null?void 0:lt.name)===R);if(!W)return;const U=Ih.filter(lt=>lt!==W.id);await h.mutateAsync({id:t,data:{person_label:U}})},ble=async()=>{if(!E)return;const R=Um.find(U=>U.id.toString()===E);if(!R)return;const W=[...Ih,R.id];await h.mutateAsync({id:t,data:{person_label:W}}),k(""),N(!1)},xle=async R=>{var U;const W=(U=R.target.files)==null?void 0:U[0];if(W){if(!W.type.startsWith("image/")){alert("Please select an image file");return}if(W.size>5*1024*1024){alert("Image size must be less than 5MB");return}O(!0);try{await $e.uploadPersonPhoto(t,W),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch(be){console.error("Failed to upload photo:",be),alert("Failed to upload photo. Please try again.")}finally{O(!1),P.current&&(P.current.value="")}}},wle=()=>{if(n)try{tEe(n,{companyMap:qb,personDates:a||[]})}catch(R){console.error("Failed to export vCard:",R),alert("Failed to export vCard. Please try again.")}},ED=((MD=(RD=n==null?void 0:n.acf)==null?void 0:RD.work_history)==null?void 0:MD.map(R=>R.company).filter(Boolean))||[],Sle=ZP({queries:ED.map(R=>({queryKey:["company",R],queryFn:async()=>(await Ge.getCompany(R,{_embed:!0})).data,enabled:!!R}))}),bl=((DD=(AD=n==null?void 0:n.acf)==null?void 0:AD.relationships)==null?void 0:DD.map(R=>R.related_person).filter(Boolean))||[],Ym=ZP({queries:bl.map(R=>({queryKey:["person-dates",R],queryFn:async()=>(await $e.getPersonDates(R)).data,enabled:!!R}))}),Fb=T.useMemo(()=>{const R={};return Ym.forEach((W,U)=>{if(W.data&&bl[U]){const be=bl[U],De=W.data.find(et=>{const lt=Array.isArray(et.date_type)?et.date_type[0]:et.date_type;return(lt==null?void 0:lt.toLowerCase())==="birthday"});if(De!=null&&De.date_value){const et=new Date(De.date_value);R[be]=x1(new Date,et)}else R[be]=-1}}),R},[Ym,bl]),_le=T.useMemo(()=>{const R={};return Ym.forEach((W,U)=>{if(W.data&&bl[U]){const be=bl[U],De=W.data.some(et=>{const lt=Array.isArray(et.date_type)?et.date_type[0]:et.date_type;return(lt==null?void 0:lt.toLowerCase())==="died"});R[be]=De}}),R},[Ym,bl]),Qm=T.useMemo(()=>{var R;return(R=n==null?void 0:n.acf)!=null&&R.relationships?[...n.acf.relationships].sort((W,U)=>{const be=Fb[W.related_person]??-1,De=Fb[U.related_person]??-1;return be===-1&&De===-1?0:be===-1?1:De===-1?-1:De-be}):[]},[($D=n==null?void 0:n.acf)==null?void 0:$D.relationships,Fb]),qb={};Sle.forEach((R,W)=>{var U,be,De,et,lt,Qi,dn,Ks,Dh;if(R.data){const Jm=ED[W];qb[Jm]={name:nr(R.data),logo:((De=(be=(U=R.data._embedded)==null?void 0:U["wp:featuredmedia"])==null?void 0:be[0])==null?void 0:De.source_url)||((Dh=(Ks=(dn=(Qi=(lt=(et=R.data._embedded)==null?void 0:et["wp:featuredmedia"])==null?void 0:lt[0])==null?void 0:Qi.media_details)==null?void 0:dn.sizes)==null?void 0:Ks.thumbnail)==null?void 0:Dh.source_url)||null}}});const Xm=T.useMemo(()=>{var R;return(R=n==null?void 0:n.acf)!=null&&R.work_history?[...n.acf.work_history].map((W,U)=>({...W,originalIndex:U})).sort((W,U)=>{if(W.is_current&&!U.is_current)return-1;if(!W.is_current&&U.is_current)return 1;const be=W.start_date?new Date(W.start_date):new Date(0);return(U.start_date?new Date(U.start_date):new Date(0))-be}):[]},[(FD=n==null?void 0:n.acf)==null?void 0:FD.work_history]),ND=T.useMemo(()=>o?o.filter(W=>W.type==="todo").sort((W,U)=>{if(W.is_completed&&!U.is_completed)return 1;if(!W.is_completed&&U.is_completed)return-1;if(!W.is_completed&&!U.is_completed){if(W.due_date&&U.due_date)return new Date(W.due_date)-new Date(U.due_date);if(W.due_date&&!U.due_date)return-1;if(!W.due_date&&U.due_date)return 1}return new Date(U.created)-new Date(W.created)}):[],[o]);if(T.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(Pe,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const $r=n.acf||{},Lb=["facebook","linkedin","instagram","twitter","bluesky","threads","slack","website"],Ele=((qD=$r.contact_info)==null?void 0:qD.filter(R=>Lb.includes(R.contact_type)))||[],CD={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,slack:7,website:8},kD=[...Ele].sort((R,W)=>{const U=CD[R.contact_type]||99,be=CD[W.contact_type]||99;return U-be}),Nle=R=>{switch(R){case"facebook":return u_e;case"linkedin":return rEe;case"instagram":return h_e;case"twitter":return v_e;case"bluesky":return l_e;case"threads":return g_e;case"slack":return p_e;case"website":return oy;default:return oy}},Cle=R=>{switch(R){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"slack":return"text-[#4A154B]";case"website":return"text-gray-600";default:return"text-gray-600"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(Pe,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(bc,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:wle,className:"btn-secondary",children:[u.jsx(aI,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),u.jsxs(Pe,{to:`/people/${t}/edit`,className:"btn-secondary",children:[u.jsx(Fte,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),u.jsxs("button",{onClick:Wm,className:"btn-danger",children:[u.jsx(di,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),u.jsxs("div",{className:"card p-6 relative",children:[u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx(Pe,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"})}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[n.thumbnail?u.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):u.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((LD=n.first_name)==null?void 0:LD[0])||"?"})}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var R;return(R=P.current)==null?void 0:R.click()},children:C?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Cf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:xle,className:"hidden",disabled:C})]}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,St&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&u.jsx(Id,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),$r.nickname&&u.jsxs("p",{className:"text-gray-500",children:['"',$r.nickname,'"']}),St&&Ee&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Ag($r.gender)&&u.jsx("span",{className:"mr-1",children:Ag($r.gender)}),"Died ",Tn(Ee,Le?"MMMM d":"MMMM d, yyyy"),un!==null&&` at age ${un}`]}),!St&&un!==null&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Ag($r.gender)&&u.jsx("span",{className:"mr-1",children:Ag($r.gender)}),un," years old"]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map((R,W)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[R,u.jsx("button",{onClick:()=>vle(R),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:u.jsx(Ht,{className:"w-3 h-3"})})]},W)),_?u.jsxs("div",{className:"inline-flex items-center gap-2",children:[u.jsxs("select",{value:E,onChange:R=>k(R.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:Rh.length===0,children:[u.jsx("option",{value:"",children:"Select a label..."}),Rh.map(R=>u.jsx("option",{value:R.id,children:R.name},R.id))]}),u.jsx("button",{onClick:ble,disabled:!E,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),u.jsx("button",{onClick:()=>{N(!1),k("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):Rh.length>0&&u.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[u.jsx(or,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),kD.length>0&&u.jsx("div",{className:"flex items-center gap-3 mt-4",children:kD.map((R,W)=>{const U=Nle(R.contact_type),be=Cle(R.contact_type);let De=R.contact_value;return De.match(/^https?:\/\//i)||(De=`https://${De}`),u.jsx("a",{href:De,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${be}`,title:`${R.contact_type.charAt(0).toUpperCase()+R.contact_type.slice(1)}: ${R.contact_value}`,children:u.jsx(U,{className:"w-5 h-5"})},W)})})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[!St&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Contact information"}),u.jsxs("button",{onClick:()=>G(!0),className:"btn-secondary text-sm",children:[u.jsx(ta,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]}),((BD=$r.contact_info)==null?void 0:BD.filter(R=>!Lb.includes(R.contact_type)).length)>0?u.jsx("div",{className:"space-y-2",children:(()=>{const R={email:1,phone:2,mobile:2,calendar:3,other:4};return $r.contact_info.filter(U=>!Lb.includes(U.contact_type)).map((U,be)=>({...U,originalIndex:be})).sort((U,be)=>{const De=R[U.contact_type]||99,et=R[be.contact_type]||99;return De!==et?De-et:U.originalIndex-be.originalIndex}).map(U=>{const be=U.contact_type==="email"?xM:U.contact_type==="phone"||U.contact_type==="mobile"?wM:U.contact_type==="calendar"?mo:oy,De=U.contact_type==="email",et=U.contact_type==="phone"||U.contact_type==="mobile",lt=U.contact_type==="mobile",Qi=U.contact_type==="calendar";let dn=null,Ks=null;return De?dn=`mailto:${U.contact_value}`:et?dn=`tel:${Ah(U.contact_value)}`:Qi&&(dn=U.contact_value,Ks="_blank"),u.jsx("div",{children:u.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5",children:[u.jsx(be,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[U.contact_label||U.contact_type,": "]}),dn?u.jsx("a",{href:dn,target:Ks||void 0,rel:Ks==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:U.contact_value}):u.jsx("span",{children:U.contact_value}),lt&&u.jsx("a",{href:`https://wa.me/${Ah(U.contact_value)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 hover:opacity-80 transition-opacity",title:"Open WhatsApp",children:u.jsx(j0,{className:"w-4 h-4 text-[#25D366]"})})]})]})},U.originalIndex)})})()}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No contact information yet. ",u.jsx("button",{onClick:()=>G(!0),className:"text-primary-600 hover:underline",children:"Add some"})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Events"}),u.jsxs("button",{onClick:()=>{ie(null),ue(!0)},className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add Important Date"})]})]}),Hm.length>0?u.jsx("div",{className:"space-y-3",children:Hm.map(R=>{const W=Array.isArray(R.date_type)?R.date_type[0]:R.date_type,U=(W==null?void 0:W.toLowerCase())||"",be=U.includes("died"),De=U.includes("wedding")||U.includes("marriage")?wpe:U.includes("birthday")?xpe:mo,et=R.year_unknown?"MMMM d":"MMMM d, yyyy";return u.jsxs("div",{className:"flex items-start group",children:[u.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:be?u.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):u.jsx(De,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium",children:R.title}),u.jsx("p",{className:"text-xs text-gray-500",children:R.date_value&&Tn(new Date(R.date_value),et)}),W&&u.jsx("p",{className:"text-xs text-gray-400 capitalize",children:W})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>{ie(R),ue(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:u.jsx(ta,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>ole(R.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},R.id)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No important dates yet. ",u.jsx("button",{onClick:()=>{ie(null),ue(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Timeline"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>A(!0),className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Note"})]}),u.jsxs("button",{onClick:()=>I(!0),className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),u.jsx(x_e,{timeline:o||[],onEdit:mle,onDelete:gle,onToggleTodo:SD,personId:t,allPeople:w||[]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Work history"}),u.jsxs("button",{onClick:()=>{ae(null),We(null),Ye(!0)},className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add work history"})]})]}),(Xm==null?void 0:Xm.length)>0?u.jsx("div",{className:"space-y-4",children:Xm.map((R,W)=>{const U=R.company?qb[R.company]:null,be=R.originalIndex;return u.jsxs("div",{className:"flex items-start group",children:[U!=null&&U.logo?u.jsx("img",{src:U.logo,alt:U.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):u.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:u.jsx(Ir,{className:"w-10 h-10 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium",children:R.job_title}),R.company&&U&&u.jsx(Pe,{to:`/companies/${R.company}`,className:"text-sm text-primary-600 hover:underline",children:U.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[R.start_date&&Tn(new Date(R.start_date),"MMM yyyy")," - ",R.is_current?"Present":R.end_date?Tn(new Date(R.end_date),"MMM yyyy"):""]}),R.description&&u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:R.description})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{var et,lt;const De=(lt=(et=n==null?void 0:n.acf)==null?void 0:et.work_history)==null?void 0:lt[be];ae(De),We(be),Ye(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:u.jsx(ta,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>yle(be),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},be)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No work history yet. ",u.jsx("button",{onClick:()=>{ae(null),We(null),Ye(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),S.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Ky,{className:"w-5 h-5 mr-2"}),"Investments"]}),u.jsx("div",{className:"space-y-3",children:S.map(R=>u.jsxs(Pe,{to:`/companies/${R.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[R.thumbnail?u.jsx("img",{src:R.thumbnail,alt:R.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Ir,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:R.name}),R.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:R.industry})]})]},R.id))})]}),u.jsx(w_e,{isOpen:j,onClose:()=>A(!1),onSubmit:lle,isLoading:f.isPending}),u.jsx(dA,{isOpen:$,onClose:()=>{I(!1),q(null),Sn(null),Ph(null)},onSubmit:cle,isLoading:D?m.isPending:p.isPending,personId:t,initialData:Rb,activity:D}),u.jsx(EM,{isOpen:uu,onClose:()=>{du(!1),Sn(null)},todo:Zt,onComplete:hle,onCompleteAsActivity:fle}),u.jsx(Hie,{isOpen:L,onClose:()=>{F(!1),dt(null)},onSubmit:Jt?dle:ule,isLoading:Jt?v.isPending:g.isPending,todo:Jt}),u.jsx(U_e,{isOpen:H,onClose:()=>G(!1),onSubmit:Km,isLoading:Ar,contactInfo:$r.contact_info||[]}),u.jsx(W_e,{isOpen:K,onClose:()=>{ue(!1),ie(null)},onSubmit:Gm,isLoading:qt,dateItem:z,personId:t,allPeople:w||[],isPeopleLoading:x}),u.jsx(G_e,{isOpen:Ae,onClose:()=>{Ce(!1),Y(null),Be(null)},onSubmit:$b,isLoading:Ne,relationship:X,personId:t,allPeople:w||[],isPeopleLoading:x}),u.jsx(Y_e,{isOpen:nt,onClose:()=>{Oe(!1),kt(null),te(null)},onSubmit:rle,isLoading:ht,address:Qe}),u.jsx(X_e,{isOpen:ot,onClose:()=>{Ye(!1),ae(null),We(null)},onSubmit:nle,isLoading:Ie,workHistoryItem:he})]}),u.jsxs("div",{className:"space-y-6",children:[($r.how_we_met||$r.met_date)&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),$r.met_date&&u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[u.jsx(mo,{className:"w-4 h-4 inline mr-1"}),Tn(new Date($r.met_date),"MMMM d, yyyy")]}),$r.how_we_met&&u.jsx("p",{className:"text-sm",children:$r.how_we_met})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Todos"}),u.jsxs("button",{onClick:()=>{dt(null),F(!0)},className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add todo"})]})]}),ND.length>0?u.jsx("div",{className:"space-y-2",children:ND.map(R=>{const W=rm(R);return u.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[u.jsx("button",{onClick:()=>SD(R),className:"mt-0.5 mr-2 flex-shrink-0",title:R.is_completed?"Mark as incomplete":"Mark as complete",children:R.is_completed?u.jsx(sI,{className:"w-5 h-5 text-primary-600"}):u.jsx(Pd,{className:`w-5 h-5 ${W?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${R.is_completed?"line-through text-gray-400":W?"text-red-600":""}`,children:R.content}),R.due_date&&u.jsxs("p",{className:`text-xs mt-0.5 ${W&&!R.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Tn(new Date(R.due_date),"MMM d, yyyy"),W&&!R.is_completed&&" (overdue)"]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{dt(R),F(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(ta,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>_D(R.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},R.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Relationships"}),u.jsxs("button",{onClick:()=>{Y(null),Be(null),Ce(!0)},className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add relationship"})]})]}),(Qm==null?void 0:Qm.length)>0?u.jsx("div",{className:"space-y-2",children:Qm.map((R,W)=>{var be,De,et;const U=((De=(be=n==null?void 0:n.acf)==null?void 0:be.relationships)==null?void 0:De.findIndex(lt=>lt.related_person===R.related_person&&lt.relationship_type===R.relationship_type))??W;return u.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[u.jsxs(Pe,{to:`/people/${R.related_person}`,className:"flex items-center flex-1 min-w-0",children:[R.person_thumbnail?u.jsx("img",{src:R.person_thumbnail,alt:Yn(R.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-gray-500",children:((et=Yn(R.person_name))==null?void 0:et[0])||"?"})}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium",children:[Yn(R.person_name)||`Person #${R.related_person}`,_le[R.related_person]&&u.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),u.jsx("p",{className:"text-xs text-gray-500",children:Yn(R.relationship_name||R.relationship_label)})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{var Qi,dn;const lt=(dn=(Qi=n==null?void 0:n.acf)==null?void 0:Qi.relationships)==null?void 0:dn[U];Y(lt),Be(U),Ce(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:u.jsx(ta,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>sle(U),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},W)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No relationships yet. ",u.jsx("button",{onClick:()=>{Y(null),Be(null),Ce(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),!St&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Addresses"}),u.jsxs("button",{onClick:()=>{kt(null),te(null),Oe(!0)},className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add address"})]})]}),((zD=$r.addresses)==null?void 0:zD.length)>0?u.jsx("div",{className:"space-y-4",children:$r.addresses.map((R,W)=>{const U=[];R.street&&U.push(R.street);const be=[R.postal_code,R.city].filter(Boolean).join(" ");be&&U.push(be);const De=[R.state,R.country].filter(Boolean).join(", ");De&&U.push(De);const et=[R.street,R.postal_code,R.city,R.state,R.country].filter(Boolean).join(", "),lt=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(et)}`;return u.jsx("div",{className:"group",children:u.jsxs("div",{className:"flex items-start rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[u.jsx(Tpe,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[R.address_label&&u.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:R.address_label}),u.jsx("a",{href:lt,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:U.map((Qi,dn)=>u.jsx("span",{className:"block",children:Qi},dn))})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{kt(R),te(W),Oe(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:u.jsx(ta,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>ile(W),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},W)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No addresses yet. ",u.jsx("button",{onClick:()=>{kt(null),te(null),Oe(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]})]})]})]})}function Mq(){var $;const{id:t}=Gp(),e=ms(),[r]=zee(),n=!!t,i=r.get("returnTo"),s=r.get("sourcePersonId"),{data:o,isLoading:a}=SM(t),l=Gpe(),c=Hte(),{data:d=[]}=ft({queryKey:["date-types"],queryFn:async()=>(await Ge.getDateTypes()).data}),h=d.find(I=>I.slug==="birthday"||I.name.toLowerCase()==="birthday"),[f,p]=T.useState(!1),[m,g]=T.useState(null),[v,y]=T.useState(null),b=pt({mutationFn:async I=>{const L=new FormData;return L.append("file",I),(await ce.post("/prm/v1/import/vcard/parse",L,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:x,reset:S,watch:_,formState:{errors:N,isSubmitting:E}}=Uc({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",how_we_met:"",is_favorite:!1,birthday:""}});_("phone"),T.useEffect(()=>{var I,L,F,H,G,K,ue,Ae,Ce,nt;if(o){const Oe=(L=(I=o.acf)==null?void 0:I.contact_info)==null?void 0:L.find(qt=>qt.contact_type==="email"),ot=(Oe==null?void 0:Oe.contact_value)||"",Ye=(H=(F=o.acf)==null?void 0:F.contact_info)==null?void 0:H.find(qt=>qt.contact_type==="phone"||qt.contact_type==="mobile"),Ar=(Ye==null?void 0:Ye.contact_value)||"",gr=(Ye==null?void 0:Ye.contact_type)||"mobile";S({first_name:((G=o.acf)==null?void 0:G.first_name)||"",last_name:((K=o.acf)==null?void 0:K.last_name)||"",nickname:((ue=o.acf)==null?void 0:ue.nickname)||"",gender:((Ae=o.acf)==null?void 0:Ae.gender)||"",email:ot,phone:Ar,phone_type:gr,how_we_met:((Ce=o.acf)==null?void 0:Ce.how_we_met)||"",is_favorite:((nt=o.acf)==null?void 0:nt.is_favorite)||!1,birthday:""})}},[o,S]),al(n&&o?`Edit ${(($=o.title)==null?void 0:$.rendered)||o.title||"person"}`:"New person");const k=T.useCallback(I=>{I.preventDefault(),I.stopPropagation(),I.type==="dragenter"||I.type==="dragover"?p(!0):I.type==="dragleave"&&p(!1)},[]),C=T.useCallback(I=>{I.preventDefault(),I.stopPropagation(),p(!1),y(null),I.dataTransfer.files&&I.dataTransfer.files[0]&&O(I.dataTransfer.files[0])},[]),O=I=>{const L=I.name.split(".").pop().toLowerCase();if(L!=="vcf"&&L!=="vcard"){y("Please select a vCard file (.vcf)");return}g(I),b.mutate(I,{onSuccess:F=>{S({first_name:F.first_name||"",last_name:F.last_name||"",nickname:F.nickname||"",gender:"",email:F.email||"",phone:F.phone||"",phone_type:F.phone_type||"mobile",how_we_met:F.note||"",is_favorite:!1,birthday:F.birthday||""}),F.contact_count>1&&y(`Note: File contains ${F.contact_count} contacts. Only the first contact was loaded.`)},onError:F=>{var H,G;y(((G=(H=F.response)==null?void 0:H.data)==null?void 0:G.message)||"Failed to parse vCard file"),g(null)}})},P=I=>{y(null),I.target.files&&I.target.files[0]&&O(I.target.files[0])},j=()=>{g(null),y(null),b.reset()},A=async I=>{try{const F=`${I.first_name||""} ${I.last_name||""}`.trim()||"Unnamed Person",H={title:F,status:"publish",acf:{first_name:I.first_name,last_name:I.last_name,nickname:I.nickname,gender:I.gender||null,how_we_met:I.how_we_met,is_favorite:I.is_favorite}};if(!n&&(I.email||I.phone)){const G=[];I.email&&G.push({contact_type:"email",contact_value:I.email,contact_label:""}),I.phone&&G.push({contact_type:I.phone_type||"mobile",contact_value:I.phone,contact_label:""}),H.acf.contact_info=G}if(n)H.title=F,await c.mutateAsync({id:t,data:H}),e(`/people/${t}`);else{const K=(await l.mutateAsync(H)).data.id;if(I.email)try{await $e.sideloadGravatar(K,I.email)}catch(ue){console.error("Failed to load Gravatar:",ue)}if(I.birthday&&h)try{const ue=I.first_name||"Person";await Ge.createDate({title:`${ue}'s Birthday`,status:"publish",date_type:[h.id],acf:{date_value:I.birthday,is_recurring:!0,related_people:[K],reminder_days_before:7}})}catch(ue){console.error("Failed to create birthday:",ue)}e(i==="relationship"&&s?`/people/${s}/relationship/new?newPersonId=${K}`:`/people/${K}`)}}catch(L){console.error("Failed to save person:",L)}};return n&&a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:i==="relationship"&&s?u.jsxs(Pe,{to:`/people/${s}/relationship/new`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(bc,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to add relationship"})]}):u.jsxs(Pe,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(bc,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit person":"Add new person"}),!n&&u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-4 text-center transition-colors ${f?"border-primary-500 bg-primary-50":m&&!v?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:C,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:P,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),b.isPending?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):m&&!v?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(Zp,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",m.name]}),u.jsx("button",{type:"button",onClick:I=>{I.preventDefault(),I.stopPropagation(),j()},className:"ml-2 p-1 hover:bg-green-100 rounded",children:u.jsx(Ht,{className:"h-4 w-4 text-green-600"})})]}):u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(Sc,{className:"h-5 w-5 text-gray-400"}),u.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard file here to import, or ",u.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),v&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-sm text-amber-700 bg-amber-50 rounded-lg p-2",children:[u.jsx(Po,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:v})]})]}),u.jsxs("form",{onSubmit:x(A),className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"First name *"}),u.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John"}),N.first_name&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.first_name.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Last name"}),u.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Nickname"}),u.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Gender"}),u.jsxs("select",{...w("gender"),className:"input",children:[u.jsx("option",{value:"",children:"Select gender..."}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"non_binary",children:"Non-binary"}),u.jsx("option",{value:"other",children:"Other"}),u.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Email"}),u.jsx("input",{type:"email",...w("email"),className:"input",placeholder:"john@example.com"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: If a Gravatar is associated with this email, it will be automatically set as the profile photo"})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Phone"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{...w("phone_type"),className:"input w-28",children:[u.jsx("option",{value:"mobile",children:"Mobile"}),u.jsx("option",{value:"phone",children:"Phone"})]}),u.jsx("input",{type:"tel",...w("phone"),className:"input flex-1",placeholder:"+1 555 123 4567"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Birthday"}),u.jsx("input",{type:"date",...w("birthday"),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set their birthday when creating a new person"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"How we met"}),u.jsx("textarea",{...w("how_we_met"),className:"input",rows:4,placeholder:"We met at..."})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i==="relationship"&&s?u.jsx(Pe,{to:`/people/${s}/relationship/new`,className:"btn-secondary",children:"Cancel"}):u.jsx(Pe,{to:"/people",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:E,children:[E?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Wy,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create person"]})]})]})]})]})}function iEe({company:t}){var e,r,n,i,s;return u.jsx(Pe,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?u.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:nr(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Ir,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:nr(t)}),((i=t.acf)==null?void 0:i.industry)&&u.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&u.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function sEe(){const[t,e]=T.useState(""),{data:r,isLoading:n,error:i}=ft({queryKey:["companies",t],queryFn:async()=>(await Ge.getCompanies({search:t,per_page:100,_embed:!0})).data}),s=T.useMemo(()=>r?[...r].sort((o,a)=>{var d,h;const l=(((d=o.title)==null?void 0:d.rendered)||o.title||"").toLowerCase(),c=(((h=a.title)==null?void 0:h.rendered)||a.title||"").toLowerCase();return l.localeCompare(c)}):[],[r]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"relative flex-1 max-w-md",children:[u.jsx(wc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:o=>e(o.target.value),className:"input pl-9"})]}),u.jsxs(Pe,{to:"/companies/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),n&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!n&&!i&&(s==null?void 0:s.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Ir,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&u.jsxs(Pe,{to:"/companies/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!n&&!i&&(s==null?void 0:s.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(o=>u.jsx(iEe,{company:o},o.id))})]})}function oEe(){var w,x,S,_,N,E,k;const{id:t}=Gp(),e=ms(),r=Mt(),n=T.useRef(null),[i,s]=T.useState(!1),{data:o,isLoading:a,error:l}=ft({queryKey:["company",t],queryFn:async()=>(await Ge.getCompany(t,{_embed:!0})).data}),{data:c}=ft({queryKey:["company-people",t],queryFn:async()=>(await $e.getCompanyPeople(t)).data}),{data:d}=ft({queryKey:["company",o==null?void 0:o.parent],queryFn:async()=>(await Ge.getCompany(o.parent,{_embed:!0})).data,enabled:!!(o!=null&&o.parent)}),{data:h=[]}=ft({queryKey:["company-children",t],queryFn:async()=>(await Ge.getCompanies({parent:t,per_page:100,_embed:!0})).data}),f=((w=o==null?void 0:o.acf)==null?void 0:w.investors)||[],{data:p=[]}=ft({queryKey:["company-investors",t,f],queryFn:async()=>{if(!f.length)return[];const[C,O]=await Promise.all([Ge.getPeople({per_page:100,include:f.join(","),_embed:!0}),Ge.getCompanies({per_page:100,include:f.join(","),_embed:!0})]),P=(C.data||[]).map($=>{var I,L,F,H;return{id:$.id,type:"person",name:Yn(((I=$.title)==null?void 0:I.rendered)||""),thumbnail:(H=(F=(L=$._embedded)==null?void 0:L["wp:featuredmedia"])==null?void 0:F[0])==null?void 0:H.source_url}}),j=(O.data||[]).map($=>{var I,L,F;return{id:$.id,type:"company",name:nr($),thumbnail:(F=(L=(I=$._embedded)==null?void 0:I["wp:featuredmedia"])==null?void 0:L[0])==null?void 0:F.source_url}}),A=[...P,...j];return f.map($=>A.find(I=>I.id===$)).filter(Boolean)},enabled:f.length>0}),{data:m=[]}=ft({queryKey:["investments",t],queryFn:async()=>(await $e.getInvestments(t)).data,enabled:!!t}),g=pt({mutationFn:()=>Ge.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}});al(nr(o)||"Organization"),T.useEffect(()=>{(o==null?void 0:o.status)==="trash"&&e("/companies",{replace:!0})},[o,e]);const v=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await g.mutateAsync()}catch(C){console.error("Failed to delete company:",C),alert("Failed to delete organization. Please try again.")}},y=async C=>{var P;const O=(P=C.target.files)==null?void 0:P[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await $e.uploadCompanyLogo(t,O),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch(j){console.error("Failed to upload logo:",j),alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(a)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(l||!o)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),u.jsx(Pe,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(o.status==="trash")return null;const b=o.acf||{};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(Pe,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(bc,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(Pe,{to:`/companies/${t}/edit`,className:"btn-secondary",children:[u.jsx(Fte,{className:"w-4 h-4 mr-2"}),"Edit"]}),u.jsxs("button",{onClick:v,className:"btn-danger",children:[u.jsx(di,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),u.jsx("div",{className:"card p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[(_=(S=(x=o._embedded)==null?void 0:x["wp:featuredmedia"])==null?void 0:S[0])!=null&&_.source_url?u.jsx("img",{src:o._embedded["wp:featuredmedia"][0].source_url,alt:nr(o),className:"w-24 h-24 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Ir,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var C;return(C=n.current)==null?void 0:C.click()},children:i?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Cf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:y,className:"hidden",disabled:i})]}),u.jsxs("div",{children:[d&&u.jsxs(Pe,{to:`/companies/${d.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[u.jsx(BF,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",nr(d)]}),u.jsx("h1",{className:"text-2xl font-bold",children:nr(o)}),b.industry&&u.jsx("p",{className:"text-gray-500",children:b.industry}),b.website&&u.jsxs("a",{href:b.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[u.jsx(oy,{className:"w-4 h-4 mr-1"}),b.website]})]})]})}),h.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(BF,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(C=>{var O,P,j,A;return u.jsxs(Pe,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(j=(P=(O=C._embedded)==null?void 0:O["wp:featuredmedia"])==null?void 0:P[0])!=null&&j.source_url?u.jsx("img",{src:C._embedded["wp:featuredmedia"][0].source_url,alt:nr(C),className:"w-10 h-10 rounded object-contain bg-white"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:u.jsx(Ir,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:nr(C)}),((A=C.acf)==null?void 0:A.industry)&&u.jsx("p",{className:"text-xs text-gray-500",children:C.acf.industry})]})]},C.id)})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((N=c==null?void 0:c.current)==null?void 0:N.length)>0?u.jsx("div",{className:"space-y-2",children:c.current.map(C=>{var O;return u.jsxs(Pe,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2"}),"Former employees"]}),((E=c==null?void 0:c.former)==null?void 0:E.length)>0?u.jsx("div",{className:"space-y-2",children:c.former.map(C=>{var O;return u.jsxs(Pe,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),p.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Ky,{className:"w-5 h-5 mr-2"}),"Investors"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:p.map(C=>{const O=C.type==="person",P=O?`/people/${C.id}`:`/companies/${C.id}`;return u.jsxs(Pe,{to:P,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:`w-10 h-10 object-cover ${O?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${O?"rounded-full":"rounded"}`,children:O?u.jsx(Ja,{className:"w-5 h-5 text-gray-400"}):u.jsx(Ir,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),u.jsx("p",{className:"text-xs text-gray-500",children:O?"Person":"Organization"})]})]},`${C.type}-${C.id}`)})})]}),m.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Ky,{className:"w-5 h-5 mr-2"}),"Invested in"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(C=>u.jsxs(Pe,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:u.jsx(Ir,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:C.industry})]})]},C.id))})]}),((k=b.contact_info)==null?void 0:k.length)>0&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),u.jsx("div",{className:"space-y-3",children:b.contact_info.map((C,O)=>u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[C.contact_label||C.contact_type,":"]}),u.jsx("span",{className:"ml-2",children:C.contact_value})]},O))})]})]})}function Aq(){var Ae,Ce,nt,Oe,ot,Ye,Ar,gr,qt;const{id:t}=Gp(),e=ms(),r=Mt(),n=!!t,{data:i,isLoading:s}=ft({queryKey:["company",t],queryFn:async()=>(await Ge.getCompany(t,{_embed:!0})).data,enabled:n}),{data:o=[],isLoading:a}=ft({queryKey:["companies","all"],queryFn:async()=>(await Ge.getCompanies({per_page:100,_embed:!0})).data}),{data:l=[],isLoading:c}=ft({queryKey:["people","all"],queryFn:async()=>(await Ge.getPeople({per_page:100,_embed:!0})).data}),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(""),[v,y]=T.useState(""),[b,w]=T.useState(!1),[x,S]=T.useState(""),[_,N]=T.useState([]),E=T.useRef(null),k=T.useRef(null),C=T.useRef(null),O=T.useMemo(()=>{const ee=m.toLowerCase().trim();let Ne=o.filter(Je=>!(n&&Je.id===parseInt(t)||n&&Je.parent===parseInt(t)));return ee&&(Ne=Ne.filter(Je=>{var ht;return(ht=nr(Je))==null?void 0:ht.toLowerCase().includes(ee)})),[...Ne].sort((Je,ht)=>(nr(Je)||"").localeCompare(nr(ht)||""))},[o,m,t,n]),P=T.useMemo(()=>o.find(ee=>ee.id===parseInt(v)),[o,v]),j=T.useMemo(()=>{const ee=x.toLowerCase().trim(),Ne=l.map(Ie=>{var at,Jt,dt,D;return{id:Ie.id,type:"person",name:Yn(((at=Ie.title)==null?void 0:at.rendered)||""),thumbnail:(D=(dt=(Jt=Ie._embedded)==null?void 0:Jt["wp:featuredmedia"])==null?void 0:dt[0])==null?void 0:D.source_url}}),Je=o.filter(Ie=>!n||Ie.id!==parseInt(t)).map(Ie=>{var at,Jt,dt;return{id:Ie.id,type:"company",name:nr(Ie),thumbnail:(dt=(Jt=(at=Ie._embedded)==null?void 0:at["wp:featuredmedia"])==null?void 0:Jt[0])==null?void 0:dt.source_url}});let ht=[...Ne,...Je];ee&&(ht=ht.filter(Ie=>{var at;return(at=Ie.name)==null?void 0:at.toLowerCase().includes(ee)}));const Dr=_.map(Ie=>`${Ie.type}-${Ie.id}`);return ht=ht.filter(Ie=>!Dr.includes(`${Ie.type}-${Ie.id}`)),ht.sort((Ie,at)=>(Ie.name||"").localeCompare(at.name||""))},[l,o,x,_,t,n]);T.useEffect(()=>{const ee=Ne=>{k.current&&!k.current.contains(Ne.target)&&p(!1)};if(f)return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[f]),T.useEffect(()=>{const ee=Ne=>{C.current&&!C.current.contains(Ne.target)&&w(!1)};if(b)return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[b]);const A=pt({mutationFn:ee=>Ge.createCompany(ee),onSuccess:ee=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${ee.data.id}`)}}),$=pt({mutationFn:ee=>Ge.updateCompany(t,ee),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${t}`)}}),I=async ee=>{var Je;const Ne=(Je=ee.target.files)==null?void 0:Je[0];if(Ne){if(!Ne.type.startsWith("image/")){alert("Please select an image file");return}if(Ne.size>5*1024*1024){alert("Image size must be less than 5MB");return}h(!0);try{await $e.uploadCompanyLogo(t,Ne),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.refetchQueries({queryKey:["company",t]}),r.refetchQueries({queryKey:["companies"]}),r.refetchQueries({queryKey:["people"]})}catch(ht){console.error("Failed to upload logo:",ht),alert("Failed to upload logo. Please try again.")}finally{h(!1),E.current&&(E.current.value="")}}},{register:L,handleSubmit:F,reset:H,formState:{errors:G,isSubmitting:K}}=Uc();T.useEffect(()=>{var ee,Ne,Je;i&&(H({title:Yn(((ee=i.title)==null?void 0:ee.rendered)||""),website:((Ne=i.acf)==null?void 0:Ne.website)||"",industry:((Je=i.acf)==null?void 0:Je.industry)||""}),i.parent&&y(String(i.parent)))},[i,H]),T.useEffect(()=>{var ee,Ne;if(((Ne=(ee=i==null?void 0:i.acf)==null?void 0:ee.investors)==null?void 0:Ne.length)>0&&l.length>0&&o.length>0){const ht=i.acf.investors.map(Dr=>{var Jt,dt,D,q,z,ie,X;const Ie=l.find(Y=>Y.id===Dr);if(Ie)return{id:Ie.id,type:"person",name:Yn(((Jt=Ie.title)==null?void 0:Jt.rendered)||""),thumbnail:(q=(D=(dt=Ie._embedded)==null?void 0:dt["wp:featuredmedia"])==null?void 0:D[0])==null?void 0:q.source_url};const at=o.find(Y=>Y.id===Dr);return at?{id:at.id,type:"company",name:nr(at),thumbnail:(X=(ie=(z=at._embedded)==null?void 0:z["wp:featuredmedia"])==null?void 0:ie[0])==null?void 0:X.source_url}:null}).filter(Boolean);N(ht)}},[i,l,o]),al(n&&i?`Edit ${nr(i)||"organization"}`:"New organization");const ue=async ee=>{const Ne=_.map(ht=>ht.id),Je={title:ee.title,status:"publish",parent:v?parseInt(v):0,acf:{website:ee.website,industry:ee.industry,investors:Ne}};n?$.mutate(Je):A.mutate(Je)};return n&&s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(Pe,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(bc,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit organization":"Add new organization"}),u.jsxs("form",{onSubmit:F(ue),className:"space-y-6",children:[n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Logo"}),u.jsxs("div",{className:"flex items-center gap-4",children:[(nt=(Ce=(Ae=i==null?void 0:i._embedded)==null?void 0:Ae["wp:featuredmedia"])==null?void 0:Ce[0])!=null&&nt.source_url?u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:i._embedded["wp:featuredmedia"][0].source_url,alt:nr(i)||"Organization logo",className:"w-20 h-20 rounded-lg object-contain bg-white"}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var ee;return(ee=E.current)==null?void 0:ee.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Cf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}):u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsx(Cf,{className:"w-8 h-8 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var ee;return(ee=E.current)==null?void 0:ee.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Cf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),u.jsxs("div",{children:[u.jsx("button",{type:"button",onClick:()=>{var ee;return(ee=E.current)==null?void 0:ee.click()},className:"btn-secondary text-sm",disabled:d,children:(Ye=(ot=(Oe=i==null?void 0:i._embedded)==null?void 0:Oe["wp:featuredmedia"])==null?void 0:ot[0])!=null&&Ye.source_url?"Change logo":"Upload logo"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click the logo or button to upload a new logo"})]}),u.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:I,className:"hidden",disabled:d})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization name *"}),u.jsx("input",{...L("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc."}),G.title&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:G.title.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Website"}),u.jsx("input",{...L("website"),type:"url",className:"input",placeholder:"https://example.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Industry"}),u.jsx("input",{...L("industry"),className:"input",placeholder:"Technology"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Parent organization"}),u.jsxs("div",{className:"relative",ref:k,children:[u.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a,children:[P?u.jsxs("div",{className:"flex items-center gap-2",children:[(qt=(gr=(Ar=P._embedded)==null?void 0:Ar["wp:featuredmedia"])==null?void 0:gr[0])!=null&&qt.source_url?u.jsx("img",{src:P._embedded["wp:featuredmedia"][0].source_url,alt:nr(P),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:nr(P)})]}):u.jsx("span",{className:"text-gray-400",children:"No parent organization"}),u.jsx(Hy,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(wc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:m,onChange:ee=>g(ee.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsxs("div",{className:"overflow-y-auto max-h-48",children:[u.jsx("button",{type:"button",onClick:()=>{y(""),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${v?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),a?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):O.length>0?O.map(ee=>{var Ne,Je,ht;return u.jsxs("button",{type:"button",onClick:()=>{y(String(ee.id)),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${v===String(ee.id)?"bg-primary-50":""}`,children:[(ht=(Je=(Ne=ee._embedded)==null?void 0:Ne["wp:featuredmedia"])==null?void 0:Je[0])!=null&&ht.source_url?u.jsx("img",{src:ee._embedded["wp:featuredmedia"][0].source_url,alt:nr(ee),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:nr(ee)})]},ee.id)}):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"label flex items-center",children:[u.jsx(Ky,{className:"w-4 h-4 mr-2"}),"Investors"]}),_.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map(ee=>u.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[ee.thumbnail?u.jsx("img",{src:ee.thumbnail,alt:ee.name,className:`w-5 h-5 object-cover ${ee.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${ee.type==="person"?"rounded-full":"rounded"}`,children:ee.type==="person"?u.jsx(Ja,{className:"w-3 h-3 text-gray-500"}):u.jsx(Ir,{className:"w-3 h-3 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-700",children:ee.name}),u.jsx("button",{type:"button",onClick:()=>N(Ne=>Ne.filter(Je=>!(Je.id===ee.id&&Je.type===ee.type))),className:"ml-1 text-gray-400 hover:text-gray-600",children:u.jsx(Ht,{className:"w-3.5 h-3.5"})})]},`${ee.type}-${ee.id}`))}),u.jsxs("div",{className:"relative",ref:C,children:[u.jsxs("button",{type:"button",onClick:()=>w(!b),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a||c,children:[u.jsx("span",{className:"text-gray-400",children:"Add investor..."}),u.jsx(Hy,{className:`w-4 h-4 text-gray-400 transition-transform ${b?"rotate-180":""}`})]}),b&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(wc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:x,onChange:ee=>S(ee.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:a||c?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):j.length>0?j.map(ee=>u.jsxs("button",{type:"button",onClick:()=>{N(Ne=>[...Ne,ee]),S("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[ee.thumbnail?u.jsx("img",{src:ee.thumbnail,alt:ee.name,className:`w-6 h-6 object-cover ${ee.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${ee.type==="person"?"rounded-full":"rounded"}`,children:ee.type==="person"?u.jsx(Ja,{className:"w-4 h-4 text-gray-500"}):u.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-sm text-gray-900 truncate block",children:ee.name}),u.jsx("span",{className:"text-xs text-gray-500",children:ee.type==="person"?"Person":"Organization"})]})]},`${ee.type}-${ee.id}`)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:x?"No results found":"No people or organizations available"})})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(Pe,{to:"/companies",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:K,children:[u.jsx(Wy,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create organization"]})]})]})]})]})}function aEe({person:t,dateType:e}){var r;return u.jsx("div",{className:"flex items-center gap-3 py-2",children:u.jsxs(Pe,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),u.jsx("span",{className:"font-medium truncate",children:t.name}),u.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function lEe({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(c=>{i.push({person:c,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),u.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:u.jsx("span",{className:"text-2xl font-bold leading-none",children:Tn(new Date(e.next_occurrence),"d")})}),u.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>u.jsx(aEe,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function cEe(){const{data:t,isLoading:e,error:r}=Vpe(365),n=(t==null?void 0:t.reduce((s,o)=>{const a=Tn(new Date(o.next_occurrence),"yyyy-MM-dd");return s[a]||(s[a]=[]),s[a].push(o),s},{}))||{},i=Object.entries(n).reduce((s,[o,a])=>{const l=Tn(new Date(o),"MMMM yyyy");return s[l]||(s[l]=[]),s[l].push(a),s},{});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("p",{className:"text-gray-600",children:[(t==null?void 0:t.length)||0," upcoming dates"]}),u.jsxs(Pe,{to:"/dates/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),e&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),r&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!e&&!r&&(t==null?void 0:t.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx(mo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),u.jsxs(Pe,{to:"/dates/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(i).map(([s,o])=>u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:s}),u.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:o.map(a=>u.jsx(lEe,{dates:a},a[0].next_occurrence))})]},s))]})}function uEe(){al("Todos");const[t,e]=T.useState(!1),[r,n]=T.useState(null),[i,s]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(null),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(null),{data:v,isLoading:y}=zte(!0),b=Vte(),w=Upe(),x=_M(),S=T.useMemo(()=>nre(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:N,olderCompletedTodos:E}=T.useMemo(()=>{if(!v)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const I=[],L=[],F=[];return v.forEach(H=>{if(!H.is_completed)I.push(H);else try{const G=dp(H.created);Nge(G,S)?L.push(H):F.push(H)}catch{F.push(H)}}),{incompleteTodos:I,recentlyCompletedTodos:L,olderCompletedTodos:F}},[v,S]),k=I=>{if(!I.is_completed){c(I),h(!0);return}b.mutate({todoId:I.id,data:{content:I.content,due_date:I.due_date,is_completed:!1}})},C=()=>{l&&(b.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),c(null))},O=()=>{if(!l)return;const I=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:I,activity_type:"note",participants:[]}),h(!1),p(!0)},P=async I=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:I}),await b.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),c(null),g(null)}catch(L){console.error("Failed to create activity:",L),alert("Failed to create activity. Please try again.")}},j=async I=>{r&&(await b.mutateAsync({todoId:r.id,data:I}),s(!1),n(null))},A=async I=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync(I)};if(y)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const $=[...N,...E];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),u.jsxs("div",{className:"flex items-center gap-2",children:[E.length>0&&u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[u.jsx(lI,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[u.jsx(or,{className:"w-4 h-4"}),"Add todo"]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Pd,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(I=>u.jsx(lx,{todo:I,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},I.id))}):u.jsxs("div",{className:"p-8 text-center",children:[u.jsx($s,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No open todos"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),N.length>0&&!t&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(vpe,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",N.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:N.map(I=>u.jsx(lx,{todo:I,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},I.id))})]}),t&&$.length>0&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx($s,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",$.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:$.map(I=>u.jsx(lx,{todo:I,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},I.id))})]}),u.jsx(Hie,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:j,isLoading:b.isPending,todo:r}),u.jsx(Kte,{isOpen:o,onClose:()=>a(!1)}),u.jsx(EM,{isOpen:d,onClose:()=>{h(!1),c(null)},todo:l,onComplete:C,onCompleteAsActivity:O}),u.jsx(dA,{isOpen:f,onClose:()=>{p(!1),c(null),g(null)},onSubmit:P,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function lx({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=rm(t);return u.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx($s,{className:"w-5 h-5 text-primary-600"}):u.jsx(Pd,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[u.jsxs(Pe,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&u.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Tn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(ta,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function dEe(){var y,b,w;const[t,e]=T.useState(null),[r,n]=T.useState(""),[i,s]=T.useState(!1),[o,a]=T.useState(null),l=Mt(),c=pt({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await ce.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),d=pt({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await ce.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),c.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},v=()=>{e(null),n(""),a(null),c.reset(),d.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),u.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((y=d.data.stats.errors)==null?void 0:y.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>u.jsx("li",{children:x},S))})]})]}),u.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(xc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Zp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Sc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&u.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[u.jsxs("p",{children:["Export format: ",o.version]}),u.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),u.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),u.jsxs("p",{children:["Notes: ",o.summary.notes]}),u.jsxs("p",{children:["Dates: ",o.summary.reminders]}),u.jsxs("p",{children:["Photos: ",o.summary.photos]}),u.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(bM,{className:"h-4 w-4 text-gray-400"})}),u.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&u.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),u.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(xc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Sc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(b=d.error.response)==null?void 0:b.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function hEe(){var g,v,y;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),o=Mt(),a=pt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await ce.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{s(b)},onError:b=>{var w,x;s({valid:!1,error:((x=(w=b.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=pt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await ce.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),c=T.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?n(!0):b.type==="dragleave"&&n(!1)},[]),d=T.useCallback(b=>{b.preventDefault(),b.stopPropagation(),n(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&f(b.dataTransfer.files[0])},[]),h=b=>{b.target.files&&b.target.files[0]&&f(b.target.files[0])},f=b=>{const w=b.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(b),s(null),l.reset(),a.mutate(b)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((b,w)=>u.jsx("li",{children:b},w))})]})]}),u.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:d,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(xc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Zp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Sc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Fs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Ir,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(jte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(qte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?u.jsxs(u.Fragment,{children:[u.jsx(xc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Sc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(v=l.error.response)==null?void 0:v.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function fEe(){var x,S,_;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),[o,a]=T.useState({}),l=Mt(),c=pt({mutationFn:async N=>{const E=new FormData;return E.append("file",N),(await ce.post("/prm/v1/import/google-contacts/validate",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:N=>{var E;if(s(N),((E=N.duplicates)==null?void 0:E.length)>0){const k={};N.duplicates.forEach(C=>{k[C.index]="merge"}),a(k)}},onError:N=>{var E,k;s({valid:!1,error:((k=(E=N.response)==null?void 0:E.data)==null?void 0:k.message)||"Failed to validate file"})}}),d=pt({mutationFn:async({file:N,decisions:E})=>{const k=new FormData;return k.append("file",N),k.append("decisions",JSON.stringify(E)),(await ce.post("/prm/v1/import/google-contacts",k,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?n(!0):N.type==="dragleave"&&n(!1)},[]),f=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),n(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&m(N.dataTransfer.files[0])},[]),p=N=>{N.target.files&&N.target.files[0]&&m(N.target.files[0])},m=N=>{if(!N.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(N),s(null),a({}),d.reset(),c.mutate(N)},g=(N,E)=>{a(k=>({...k,[N]:E}))},v=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),c.reset(),d.reset()},b=(i==null?void 0:i.duplicates)||[],w=b.length>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),u.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[u.jsxs("li",{children:["Go to ",u.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),u.jsx("li",{children:'Click "Export" in the left sidebar'}),u.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((N,E)=>u.jsx("li",{children:N},E))})]})]}),u.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(xc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(vM,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Sc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Fs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Ir,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(jte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(qte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&u.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(fpe,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("h3",{className:"font-medium text-amber-900",children:[b.length," contact",b.length>1?"s":""," may already exist"]}),u.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),u.jsx("div",{className:"mt-4 space-y-4",children:b.map(N=>u.jsx(pEe,{duplicate:N,decision:o[N.index]||"merge",onDecision:E=>g(N.index,E)},N.index))})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(xc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Sc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=d.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function pEe({duplicate:t,decision:e,onDecision:r}){var n,i;return u.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),u.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),u.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?u.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Ipe,{className:"h-4 w-4"}),"Update existing"]}),u.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Fpe,{className:"h-4 w-4"}),"Create new"]}),u.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Ape,{className:"h-4 w-4"}),"Skip"]})]})]})}const mEe=[{id:"sync",label:"Sync",icon:Rpe},{id:"notifications",label:"Notifications",icon:gpe},{id:"data",label:"Data",icon:Ite},{id:"admin",label:"Admin",icon:Mpe,adminOnly:!0},{id:"about",label:"About",icon:_pe}];function gEe(){const[t,e]=zee(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=fe=>{e({tab:fe})},a=mEe.filter(fe=>!fe.adminOnly||n),[l,c]=T.useState(""),[d,h]=T.useState(""),[f,p]=T.useState(!0),[m,g]=T.useState(!1),[v,y]=T.useState(!1),[b,w]=T.useState([]),[x,S]=T.useState(!0),[_,N]=T.useState(""),[E,k]=T.useState(!1),[C,O]=T.useState(null),[P,j]=T.useState(!1),[A,$]=T.useState(null),[I,L]=T.useState([]),[F,H]=T.useState(""),[G,K]=T.useState(!1),[ue,Ae]=T.useState(""),[Ce,nt]=T.useState("09:00"),[Oe,ot]=T.useState(!0),[Ye,Ar]=T.useState(!1),[gr,qt]=T.useState(!1),[ee,Ne]=T.useState(""),[Je,ht]=T.useState(!1),[Dr,Ie]=T.useState([]),[at,Jt]=T.useState([]),[dt,D]=T.useState([]),[q,z]=T.useState(!1),[ie,X]=T.useState(!1),[Y,me]=T.useState(!1),[Be,Qe]=T.useState(""),[kt,xe]=T.useState(!1),[te,he]=T.useState("");T.useEffect(()=>{(async()=>{try{const Ee=await ce.get("/prm/v1/user/ical-url");c(Ee.data.url),h(Ee.data.webcal_url)}catch(Ee){console.error("Failed to fetch iCal URL:",Ee)}finally{p(!1)}})()},[]),T.useEffect(()=>{i&&(async()=>{try{const[Ee,Le]=await Promise.all([$e.getAppPasswords(i),$e.getCardDAVUrls()]);w(Ee.data||[]),$(Le.data)}catch(Ee){console.error("Failed to fetch app passwords:",Ee)}finally{S(!1)}})()},[i]);const ae=async()=>{z(!0);try{const[fe,Ee]=await Promise.all([$e.getSlackChannels(),$e.getSlackTargets()]);Ie(fe.data.channels||[]),Jt(fe.data.users||[]),D(Ee.data.targets||[])}catch(fe){console.error("Failed to fetch Slack data:",fe),Ne("Failed to load Slack channels and users. Please try refreshing the page.")}finally{z(!1)}};T.useEffect(()=>{(async()=>{try{const Ee=await $e.getNotificationChannels();L(Ee.data.channels||["email"]),H(Ee.data.slack_webhook||""),nt(Ee.data.notification_time||"09:00");const Le=await $e.getSlackStatus(),St=Le.data.connected||!1;K(St),Ae(Le.data.workspace_name||""),St&&await ae()}catch(Ee){console.error("Failed to fetch notification channels:",Ee)}finally{ot(!1)}})()},[]),T.useEffect(()=>{G&&ae()},[G]),T.useEffect(()=>{const fe=new URLSearchParams(window.location.search),Ee=fe.get("slack_connected"),Le=fe.get("slack_error");Ee==="1"?(Ne("Slack connected successfully!"),o("notifications"),$e.getSlackStatus().then(St=>{K(St.data.connected||!1),Ae(St.data.workspace_name||"")}),e({tab:"notifications"})):Le&&(Ne(`Slack connection failed: ${Le}`),o("notifications"),e({tab:"notifications"}))},[]);const Se=async()=>{var fe,Ee;try{const Le=await ce.get("/prm/v1/slack/oauth/authorize");window.location.href=Le.data.oauth_url}catch(Le){console.error("Failed to get Slack OAuth URL:",Le),alert(((Ee=(fe=Le.response)==null?void 0:fe.data)==null?void 0:Ee.message)||"Failed to connect Slack")}},We=async()=>{var fe,Ee;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){ht(!0);try{await $e.disconnectSlack(),K(!1),Ae(""),Ie([]),Jt([]),D([]),Ne("Slack disconnected successfully"),I.includes("slack")&&await Ih("slack")}catch(Le){console.error("Failed to disconnect Slack:",Le),alert(((Ee=(fe=Le.response)==null?void 0:fe.data)==null?void 0:Ee.message)||"Failed to disconnect Slack")}finally{ht(!1)}}},Zt=fe=>{const Ee=dt.includes(fe)?dt.filter(Le=>Le!==fe):[...dt,fe];D(Ee)},Sn=async()=>{var fe,Ee;X(!0);try{await $e.updateSlackTargets(dt),Ne("Notification targets saved successfully"),setTimeout(()=>Ne(""),3e3)}catch(Le){console.error("Failed to save Slack targets:",Le),alert(((Ee=(fe=Le.response)==null?void 0:fe.data)==null?void 0:Ee.message)||"Failed to save notification targets")}finally{X(!1)}},uu=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch(fe){console.error("Failed to copy:",fe)}},du=async fe=>{var Ee,Le;if(fe.preventDefault(),!!_.trim()){k(!0);try{const St=await $e.createAppPassword(i,_.trim());O(St.data.password),w([...b,St.data]),N("")}catch(St){console.error("Failed to create app password:",St),alert(((Le=(Ee=St.response)==null?void 0:Ee.data)==null?void 0:Le.message)||"Failed to create app password")}finally{k(!1)}}},Rb=async(fe,Ee)=>{var Le,St;if(confirm(`Are you sure you want to revoke the app password "${Ee}"? Any devices using this password will no longer be able to sync.`))try{await $e.deleteAppPassword(i,fe),w(b.filter(un=>un.uuid!==fe))}catch(un){console.error("Failed to delete app password:",un),alert(((St=(Le=un.response)==null?void 0:Le.data)==null?void 0:St.message)||"Failed to revoke app password")}},Ph=async()=>{try{await navigator.clipboard.writeText(C),j(!0),setTimeout(()=>j(!1),2e3)}catch(fe){console.error("Failed to copy:",fe)}},Mb=async fe=>{try{await navigator.clipboard.writeText(fe)}catch(Ee){console.error("Failed to copy:",Ee)}},Um=fe=>{if(!fe)return"Never";const Ee=new Date(fe);return Ee.toLocaleDateString("en-US",{month:"short",day:"numeric",year:Ee.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Ab=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){y(!0);try{const fe=await ce.post("/prm/v1/user/regenerate-ical-token");c(fe.data.url),h(fe.data.webcal_url)}catch(fe){console.error("Failed to regenerate token:",fe)}finally{y(!1)}}},Ih=async fe=>{var Le,St;const Ee=I.includes(fe)?I.filter(un=>un!==fe):[...I,fe];Ar(!0);try{await $e.updateNotificationChannels(Ee),L(Ee)}catch(un){console.error("Failed to update notification channels:",un),alert(((St=(Le=un.response)==null?void 0:Le.data)==null?void 0:St.message)||"Failed to update notification channels")}finally{Ar(!1)}},Rh=async fe=>{var Ah,Km;const[Ee,Le]=fe.split(":").map(Number),St=Math.round(Le/5)*5,un=St===60?(Ee+1)%24:Ee,Hm=St===60?0:St,Wm=`${String(un).padStart(2,"0")}:${String(Hm).padStart(2,"0")}`;nt(Wm),qt(!0);try{await $e.updateNotificationTime(Wm)}catch(Gm){console.error("Failed to update notification time:",Gm),alert(((Km=(Ah=Gm.response)==null?void 0:Ah.data)==null?void 0:Km.message)||"Failed to update notification time");const $b=await $e.getNotificationChannels();nt($b.data.notification_time||"09:00")}finally{qt(!1)}},Ws=async()=>{var fe,Ee;if(confirm("This will send reminder emails for all reminders due today. Continue?")){me(!0),Qe("");try{const Le=await $e.triggerReminders();Qe(Le.data.message||"Reminders triggered successfully.")}catch(Le){console.error("Failed to trigger reminders:",Le),Qe(((Ee=(fe=Le.response)==null?void 0:fe.data)==null?void 0:Ee.message)||"Failed to trigger reminders. Please check server logs.")}finally{me(!1)}}},Mh=async()=>{var fe,Ee;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){xe(!0),he("");try{const Le=await $e.rescheduleCronJobs();he(Le.data.message||"Cron jobs rescheduled successfully.")}catch(Le){console.error("Failed to reschedule cron jobs:",Le),he(((Ee=(fe=Le.response)==null?void 0:fe.data)==null?void 0:Ee.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{xe(!1)}}},Db=()=>{switch(s){case"sync":return u.jsx(yEe,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:uu,regenerateIcalToken:Ab,regenerating:v,appPasswords:b,appPasswordsLoading:x,carddavUrls:A,config:r,newPasswordName:_,setNewPasswordName:N,handleCreateAppPassword:du,creatingPassword:E,newPassword:C,setNewPassword:O,copyNewPassword:Ph,passwordCopied:P,handleDeleteAppPassword:Rb,formatDate:Um,copyCarddavUrl:Mb});case"notifications":return u.jsx(vEe,{notificationsLoading:Oe,notificationChannels:I,toggleChannel:Ih,savingChannels:Ye,slackConnected:G,slackWorkspaceName:ue,handleConnectSlack:Se,handleDisconnectSlack:We,disconnectingSlack:Je,webhookTestMessage:ee,slackChannels:Dr,slackUsers:at,slackTargets:dt,loadingSlackData:q,handleToggleSlackTarget:Zt,handleSaveSlackTargets:Sn,savingSlackTargets:ie,slackWebhook:F,notificationTime:Ce,handleNotificationTimeChange:Rh,savingTime:gr});case"data":return u.jsx(bEe,{});case"admin":return n?u.jsx(xEe,{handleTriggerReminders:Ws,triggeringReminders:Y,reminderMessage:Be,handleRescheduleCron:Mh,reschedulingCron:kt,cronMessage:te}):null;case"about":return u.jsx(wEe,{config:r});default:return null}};return u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(fe=>{const Ee=fe.icon,Le=s===fe.id;return u.jsxs("button",{onClick:()=>o(fe.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${Le?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[u.jsx(Ee,{className:"w-4 h-4"}),fe.label]},fe.id)})})}),u.jsx("div",{className:"space-y-6",children:Db()})]})}function yEe({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:c,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:v,copyNewPassword:y,passwordCopied:b,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:_=>_.target.select()}),u.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("a",{href:e,className:"btn-primary",children:u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),u.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),u.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[c&&u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[u.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:c.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(c.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),u.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),u.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&u.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:y,className:"btn-primary whitespace-nowrap",children:b?"Copied!":"Copy"})]}),u.jsx("button",{onClick:()=>v(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),u.jsx("div",{className:"space-y-2",children:a.map(_=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:_.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(_.created),"  Last used ",x(_.last_used)]})]}),u.jsx("button",{onClick:()=>w(_.uuid,_.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},_.uuid))})]}),a.length===0&&!g&&u.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function vEe({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:c,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:v,slackWebhook:y,notificationTime:b,handleNotificationTimeChange:w,savingTime:x}){return u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Email"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Slack"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsx("div",{children:i?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&u.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),u.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")||c.includes("disconnected")?"text-green-600":"text-red-600"}`,children:c}),e.includes("slack")&&u.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?u.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):u.jsxs(u.Fragment,{children:[d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsx("span",{className:"text-sm",children:S.name})]},S.id))})]}),h.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsxs("span",{className:"text-sm",children:[S.name,S.is_me&&u.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},S.id))})]}),d.length===0&&h.length===0&&!p&&u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),u.jsx("button",{onClick:g,disabled:v,className:"btn-primary text-sm mt-4",children:v?"Saving...":"Save targets"})]})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")?"text-green-600":"text-red-600"}`,children:c}),u.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),y&&!i&&u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),u.jsx("input",{type:"time",value:b,onChange:S=>w(S.target.value),className:"input",disabled:x,step:"300"}),b&&u.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[u.jsxs("p",{className:"text-gray-700",children:[u.jsx("span",{className:"font-medium",children:"UTC:"})," ",b]}),u.jsxs("p",{className:"text-gray-700 mt-1",children:[u.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[S,_]=b.split(":"),N=new Date;return N.setUTCHours(parseInt(S),parseInt(_),0,0),N.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}})()]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]})}const Dq=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:Zp,component:hEe},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:vM,component:fEe},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:Ite,component:dEe}];function bEe(){var i;const[t,e]=T.useState("vcard"),r=s=>{s==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":s==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(i=Dq.find(s=>s.id===t))==null?void 0:i.component;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:Dq.map(s=>{const o=s.icon,a=t===s.id;return u.jsxs("button",{onClick:()=>e(s.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:"block",children:s.name}),u.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:s.description})]})]},s.id)})})}),n&&u.jsx(n,{})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(Zp,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),u.jsx(aI,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(vM,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),u.jsx(aI,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function xEe({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(Pe,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"User approval"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(Pe,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"Relationship types"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Trigger reminders"}),u.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),u.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),u.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function wEe({config:t}){return u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",_c]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsxs("p",{className:"text-sm text-gray-600",children:[_c," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function $q({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=T.useState(""),[o,a]=T.useState(!1),l=T.useRef(null),c=T.useRef(null),d=T.useMemo(()=>r.sort((v,y)=>{const b=(v.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return b<w?-1:b>w?1:0}),[r]),h=T.useMemo(()=>{if(!i)return d.slice(0,10);const v=i.toLowerCase();return d.filter(y=>(y.name||"").toLowerCase().includes(v)).slice(0,10)},[d,i]),f=T.useMemo(()=>d.find(v=>v.id===parseInt(t,10)),[d,t]);T.useEffect(()=>{const v=y=>{c.current&&!c.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const p=v=>{e(v?v.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:f&&!o?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[u.jsx("span",{children:g}),u.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Ht,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:l,type:"text",value:i,onChange:v=>{s(v.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&u.jsx("div",{ref:c,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(v=>u.jsx("button",{type:"button",onClick:()=>p(v.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===v.id.toString()?"bg-primary-50":""}`,children:v.name},v.id))]}):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function SEe(){al("Relationship Types - Settings");const t=Mt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(Dte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),u.jsx(Pe,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ft({queryKey:["relationship-types"],queryFn:async()=>(await Ge.getRelationshipTypes()).data}),[s,o]=T.useState(null),[a,l]=T.useState(""),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,v]=T.useState(!1),y=pt({mutationFn:async({id:O,name:P,inverseId:j})=>{const A={name:P};return j&&(A.acf={inverse_relationship_type:parseInt(j,10)}),Ge.updateRelationshipType(O,A)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),b=pt({mutationFn:async({name:O,inverseId:P})=>{const j={name:O};return P&&(j.acf={inverse_relationship_type:parseInt(P,10)}),Ge.createRelationshipType(j)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),v(!1)}}),w=pt({mutationFn:O=>Ge.deleteRelationshipType(O),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=pt({mutationFn:()=>Ge.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return u.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):u.jsx(Mte,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=O=>{var j;o(O.id),l(O.name);const P=(j=O.acf)==null?void 0:j.inverse_relationship_type;d(P?P.toString():"")},N=()=>{o(null),l(""),d("")},E=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:c||null})},k=()=>{if(!h.trim()){alert("Name is required");return}b.mutate({name:h.trim(),inverseId:p||null})},C=(O,P)=>{window.confirm(`Are you sure you want to delete "${P}"? This cannot be undone.`)&&w.mutate(O)};return i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),u.jsx("div",{className:"flex gap-2",children:!g&&u.jsxs(u.Fragment,{children:[u.jsx(S,{}),u.jsxs("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[u.jsx(or,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&u.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:h,onChange:O=>f(O.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx($q,{value:p,onChange:m,relationshipTypes:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:k,disabled:b.isPending,className:"btn-primary flex items-center gap-2",children:[b.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(Wy,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsx("button",{onClick:()=>{v(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),u.jsx("div",{className:"space-y-2",children:n.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(O=>{var I,L;const P=s===O.id,j=(I=O.acf)==null?void 0:I.inverse_relationship_type,A=typeof j=="object"&&(j!=null&&j.ID)?j.ID:typeof j=="object"&&(j!=null&&j.id)?j.id:j,$=A?n.find(F=>F.id===A):null;return u.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:P?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:a,onChange:F=>l(F.target.value),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx($q,{value:c,onChange:d,relationshipTypes:n,currentTypeId:O.id}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:E,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(Wy,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsxs("button",{onClick:N,className:"btn-secondary flex items-center gap-2",children:[u.jsx(Ht,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium",children:O.name}),$&&u.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",u.jsx("span",{className:"font-medium",children:$.name})]}),!$&&((L=O.acf)==null?void 0:L.inverse_relationship_type)===null&&u.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(O),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:u.jsx(jpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>C(O.id,O.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(di,{className:"w-4 h-4"})})]})]})},O.id)})})]})})}function _Ee(){al("User Approval - Settings");const t=Mt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(Dte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),u.jsx(Pe,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ft({queryKey:["users"],queryFn:async()=>(await $e.getUsers()).data}),s=pt({mutationFn:p=>$e.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=pt({mutationFn:p=>$e.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=pt({mutationFn:p=>$e.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},c=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(xc,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(Pe,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(bc,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),u.jsxs("div",{className:"space-y-6",children:[h.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),u.jsx("div",{className:"space-y-3",children:h.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:p.name}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email}),u.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[u.jsx(qF,{className:"w-4 h-4"}),"Approve"]}),u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(zF,{className:"w-4 h-4"}),"Deny"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(di,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),u.jsx("div",{className:"space-y-3",children:f.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,u.jsx(qF,{className:"w-4 h-4 text-green-600"})]}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(zF,{className:"w-4 h-4"}),"Revoke Access"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(di,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&u.jsx("div",{className:"card p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var Fq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cx={exports:{}},qq={},tf,Lq;function Nr(){if(Lq)return tf;Lq=1;var t=function(e){return e&&e.Math===Math&&e};return tf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof Fq=="object"&&Fq)||t(typeof tf=="object"&&tf)||function(){return this}()||Function("return this")(),tf}var ux,Bq;function xt(){return Bq||(Bq=1,ux=function(t){try{return!!t()}catch{return!0}}),ux}var dx,zq;function lm(){if(zq)return dx;zq=1;var t=xt();return dx=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),dx}var hx,Vq;function J0(){if(Vq)return hx;Vq=1;var t=lm(),e=Function.prototype,r=e.apply,n=e.call;return hx=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),hx}var fx,Uq;function Ct(){if(Uq)return fx;Uq=1;var t=lm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return fx=t?n:function(i){return function(){return r.apply(i,arguments)}},fx}var px,Hq;function Fo(){if(Hq)return px;Hq=1;var t=Ct(),e=t({}.toString),r=t("".slice);return px=function(n){return r(e(n),8,-1)},px}var mx,Wq;function ise(){if(Wq)return mx;Wq=1;var t=Fo(),e=Ct();return mx=function(r){if(t(r)==="Function")return e(r)},mx}var gx,Kq;function Wr(){if(Kq)return gx;Kq=1;var t=typeof document=="object"&&document.all;return gx=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},gx}var yx={},vx,Gq;function Cr(){if(Gq)return vx;Gq=1;var t=xt();return vx=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),vx}var bx,Yq;function si(){if(Yq)return bx;Yq=1;var t=lm(),e=Function.prototype.call;return bx=t?e.bind(e):function(){return e.apply(e,arguments)},bx}var xx={},Qq;function gA(){if(Qq)return xx;Qq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return xx.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,xx}var wx,Xq;function cm(){return Xq||(Xq=1,wx=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),wx}var Sx,Jq;function Z0(){if(Jq)return Sx;Jq=1;var t=Ct(),e=xt(),r=Fo(),n=Object,i=t("".split);return Sx=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,Sx}var _x,Zq;function um(){return Zq||(Zq=1,_x=function(t){return t==null}),_x}var Ex,e5;function Hc(){if(e5)return Ex;e5=1;var t=um(),e=TypeError;return Ex=function(r){if(t(r))throw new e("Can't call method on "+r);return r},Ex}var Nx,t5;function Vs(){if(t5)return Nx;t5=1;var t=Z0(),e=Hc();return Nx=function(r){return t(e(r))},Nx}var Cx,r5;function qn(){if(r5)return Cx;r5=1;var t=Wr();return Cx=function(e){return typeof e=="object"?e!==null:t(e)},Cx}var kx,n5;function Mr(){return n5||(n5=1,kx={}),kx}var Tx,i5;function wi(){if(i5)return Tx;i5=1;var t=Mr(),e=Nr(),r=Wr(),n=function(i){return r(i)?i:void 0};return Tx=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},Tx}var Ox,s5;function Kr(){if(s5)return Ox;s5=1;var t=Ct();return Ox=t({}.isPrototypeOf),Ox}var jx,o5;function ih(){if(o5)return jx;o5=1;var t=Nr(),e=t.navigator,r=e&&e.userAgent;return jx=r?String(r):"",jx}var Px,a5;function dm(){if(a5)return Px;a5=1;var t=Nr(),e=ih(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),Px=a,Px}var Ix,l5;function sh(){if(l5)return Ix;l5=1;var t=dm(),e=xt(),r=Nr(),n=r.String;return Ix=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),Ix}var Rx,c5;function sse(){if(c5)return Rx;c5=1;var t=sh();return Rx=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Rx}var Mx,u5;function hm(){if(u5)return Mx;u5=1;var t=wi(),e=Wr(),r=Kr(),n=sse(),i=Object;return Mx=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},Mx}var Ax,d5;function oh(){if(d5)return Ax;d5=1;var t=String;return Ax=function(e){try{return t(e)}catch{return"Object"}},Ax}var Dx,h5;function qo(){if(h5)return Dx;h5=1;var t=Wr(),e=oh(),r=TypeError;return Dx=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},Dx}var $x,f5;function yA(){if(f5)return $x;f5=1;var t=qo(),e=um();return $x=function(r,n){var i=r[n];return e(i)?void 0:t(i)},$x}var Fx,p5;function EEe(){if(p5)return Fx;p5=1;var t=si(),e=Wr(),r=qn(),n=TypeError;return Fx=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},Fx}var qx={exports:{}},Lx,m5;function ah(){return m5||(m5=1,Lx=!0),Lx}var Bx,g5;function NEe(){if(g5)return Bx;g5=1;var t=Nr(),e=Object.defineProperty;return Bx=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},Bx}var y5;function vA(){if(y5)return qx.exports;y5=1;var t=ah(),e=Nr(),r=NEe(),n="__core-js_shared__",i=qx.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),qx.exports}var zx,v5;function lh(){if(v5)return zx;v5=1;var t=vA();return zx=function(e,r){return t[e]||(t[e]=r||{})},zx}var Vx,b5;function ys(){if(b5)return Vx;b5=1;var t=Hc(),e=Object;return Vx=function(r){return e(t(r))},Vx}var Ux,x5;function Gr(){if(x5)return Ux;x5=1;var t=Ct(),e=ys(),r=t({}.hasOwnProperty);return Ux=Object.hasOwn||function(i,s){return r(e(i),s)},Ux}var Hx,w5;function eb(){if(w5)return Hx;w5=1;var t=Ct(),e=0,r=Math.random(),n=t(1.1.toString);return Hx=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},Hx}var Wx,S5;function Yr(){if(S5)return Wx;S5=1;var t=Nr(),e=lh(),r=Gr(),n=eb(),i=sh(),s=sse(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Wx=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},Wx}var Kx,_5;function ose(){if(_5)return Kx;_5=1;var t=si(),e=qn(),r=hm(),n=yA(),i=EEe(),s=Yr(),o=TypeError,a=s("toPrimitive");return Kx=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},Kx}var Gx,E5;function bA(){if(E5)return Gx;E5=1;var t=ose(),e=hm();return Gx=function(r){var n=t(r,"string");return e(n)?n:n+""},Gx}var Yx,N5;function ase(){if(N5)return Yx;N5=1;var t=Nr(),e=qn(),r=t.document,n=e(r)&&e(r.createElement);return Yx=function(i){return n?r.createElement(i):{}},Yx}var Qx,C5;function lse(){if(C5)return Qx;C5=1;var t=Cr(),e=xt(),r=ase();return Qx=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Qx}var k5;function tb(){if(k5)return yx;k5=1;var t=Cr(),e=si(),r=gA(),n=cm(),i=Vs(),s=bA(),o=Gr(),a=lse(),l=Object.getOwnPropertyDescriptor;return yx.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},yx}var Xx,T5;function CEe(){if(T5)return Xx;T5=1;var t=xt(),e=Wr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Xx=n,Xx}var Jx,O5;function rb(){if(O5)return Jx;O5=1;var t=ise(),e=qo(),r=lm(),n=t(t.bind);return Jx=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},Jx}var Zx={},ew,j5;function cse(){if(j5)return ew;j5=1;var t=Cr(),e=xt();return ew=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),ew}var tw,P5;function Lo(){if(P5)return tw;P5=1;var t=qn(),e=String,r=TypeError;return tw=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},tw}var I5;function Hi(){if(I5)return Zx;I5=1;var t=Cr(),e=lse(),r=cse(),n=Lo(),i=bA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return Zx.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Zx}var rw,R5;function ch(){if(R5)return rw;R5=1;var t=Cr(),e=Hi(),r=cm();return rw=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},rw}var nw,M5;function ze(){if(M5)return nw;M5=1;var t=Nr(),e=J0(),r=ise(),n=Wr(),i=tb().f,s=CEe(),o=Mr(),a=rb(),l=ch(),c=Gr(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return nw=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,N,E,k,C,O,P;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),k=b[N],S&&(h.dontCallGetSet?(P=i(y,N),C=P&&P.value):C=y[N]),E=S&&C?C:f[N],!(!x&&!v&&typeof k==typeof E)&&(h.bind&&S?O=a(E,t):h.wrap&&S?O=d(E):v&&n(E)?O=r(E):O=E,(h.sham||E&&E.sham||k&&k.sham)&&l(O,"sham",!0),l(b,N,O),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},nw}var A5;function kEe(){if(A5)return qq;A5=1;var t=ze(),e=Cr(),r=Hi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),qq}var D5;function TEe(){if(D5)return cx.exports;D5=1,kEe();var t=Mr(),e=t.Object,r=cx.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),cx.exports}var iw,$5;function use(){if($5)return iw;$5=1;var t=TEe();return iw=t,iw}var sw,F5;function OEe(){if(F5)return sw;F5=1;var t=use();return sw=t,sw}var ow,q5;function jEe(){if(q5)return ow;q5=1;var t=OEe();return ow=t,ow}var aw,L5;function PEe(){return L5||(L5=1,aw=jEe()),aw}var IEe=PEe(),REe=tt(IEe),B5={},lw,z5;function Wc(){if(z5)return lw;z5=1;var t=Fo();return lw=Array.isArray||function(r){return t(r)==="Array"},lw}var cw,V5;function MEe(){if(V5)return cw;V5=1;var t=Math.ceil,e=Math.floor;return cw=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},cw}var uw,U5;function uh(){if(U5)return uw;U5=1;var t=MEe();return uw=function(e){var r=+e;return r!==r||r===0?0:t(r)},uw}var dw,H5;function dse(){if(H5)return dw;H5=1;var t=uh(),e=Math.min;return dw=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},dw}var hw,W5;function dl(){if(W5)return hw;W5=1;var t=dse();return hw=function(e){return t(e.length)},hw}var fw,K5;function hse(){if(K5)return fw;K5=1;var t=TypeError,e=9007199254740991;return fw=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},fw}var pw,G5;function nb(){if(G5)return pw;G5=1;var t=Cr(),e=Hi(),r=cm();return pw=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},pw}var mw,Y5;function xA(){if(Y5)return mw;Y5=1;var t=Yr(),e=t("toStringTag"),r={};return r[e]="z",mw=String(r)==="[object z]",mw}var gw,Q5;function hl(){if(Q5)return gw;Q5=1;var t=xA(),e=Wr(),r=Fo(),n=Yr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return gw=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},gw}var yw,X5;function AEe(){if(X5)return yw;X5=1;var t=Ct(),e=Wr(),r=vA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),yw=r.inspectSource,yw}var vw,J5;function fse(){if(J5)return vw;J5=1;var t=Ct(),e=xt(),r=Wr(),n=hl(),i=wi(),s=AEe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,vw=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,vw}var bw,Z5;function DEe(){if(Z5)return bw;Z5=1;var t=Wc(),e=fse(),r=qn(),n=Yr(),i=n("species"),s=Array;return bw=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},bw}var xw,e3;function wA(){if(e3)return xw;e3=1;var t=DEe();return xw=function(e,r){return new(t(e))(r===0?0:r)},xw}var ww,t3;function fm(){if(t3)return ww;t3=1;var t=xt(),e=Yr(),r=dm(),n=e("species");return ww=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},ww}var r3;function pse(){if(r3)return B5;r3=1;var t=ze(),e=xt(),r=Wc(),n=qn(),i=ys(),s=dl(),o=hse(),a=nb(),l=wA(),c=fm(),d=Yr(),h=dm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,N,E,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?b:arguments[S],m(k))for(E=s(k),o(x+E),_=0;_<E;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),B5}var n3={},i3={},Sw,s3;function fl(){if(s3)return Sw;s3=1;var t=hl(),e=String;return Sw=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},Sw}var _w={},Ew,o3;function SA(){if(o3)return Ew;o3=1;var t=uh(),e=Math.max,r=Math.min;return Ew=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},Ew}var Nw,a3;function $Ee(){if(a3)return Nw;a3=1;var t=Vs(),e=SA(),r=dl(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return Nw={includes:n(!0),indexOf:n(!1)},Nw}var Cw,l3;function pm(){return l3||(l3=1,Cw={}),Cw}var kw,c3;function mse(){if(c3)return kw;c3=1;var t=Ct(),e=Gr(),r=Vs(),n=$Ee().indexOf,i=pm(),s=t([].push);return kw=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},kw}var Tw,u3;function _A(){return u3||(u3=1,Tw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Tw}var Ow,d3;function ib(){if(d3)return Ow;d3=1;var t=mse(),e=_A();return Ow=Object.keys||function(n){return t(n,e)},Ow}var h3;function EA(){if(h3)return _w;h3=1;var t=Cr(),e=cse(),r=Hi(),n=Lo(),i=Vs(),s=ib();return _w.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},_w}var jw,f3;function FEe(){if(f3)return jw;f3=1;var t=wi();return jw=t("document","documentElement"),jw}var Pw,p3;function sb(){if(p3)return Pw;p3=1;var t=lh(),e=eb(),r=t("keys");return Pw=function(n){return r[n]||(r[n]=e(n))},Pw}var Iw,m3;function mm(){if(m3)return Iw;m3=1;var t=Lo(),e=EA(),r=_A(),n=pm(),i=FEe(),s=ase(),o=sb(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,Iw=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},Iw}var Rw={},g3;function ob(){if(g3)return Rw;g3=1;var t=mse(),e=_A(),r=e.concat("length","prototype");return Rw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},Rw}var Mw={},Aw,y3;function dh(){if(y3)return Aw;y3=1;var t=Ct();return Aw=t([].slice),Aw}var v3;function gse(){if(v3)return Mw;v3=1;var t=Fo(),e=Vs(),r=ob().f,n=dh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return Mw.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},Mw}var Dw={},b3;function ab(){return b3||(b3=1,Dw.f=Object.getOwnPropertySymbols),Dw}var $w,x3;function gm(){if(x3)return $w;x3=1;var t=ch();return $w=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},$w}var Fw,w3;function NA(){if(w3)return Fw;w3=1;var t=Hi();return Fw=function(e,r,n){return t.f(e,r,n)},Fw}var qw={},S3;function lb(){if(S3)return qw;S3=1;var t=Yr();return qw.f=t,qw}var Lw,_3;function Qt(){if(_3)return Lw;_3=1;var t=Mr(),e=Gr(),r=lb(),n=Hi().f;return Lw=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},Lw}var Bw,E3;function yse(){if(E3)return Bw;E3=1;var t=si(),e=wi(),r=Yr(),n=gm();return Bw=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},Bw}var zw,N3;function qEe(){if(N3)return zw;N3=1;var t=xA(),e=hl();return zw=t?{}.toString:function(){return"[object "+e(this)+"]"},zw}var Vw,C3;function Kc(){if(C3)return Vw;C3=1;var t=xA(),e=Hi().f,r=ch(),n=Gr(),i=qEe(),s=Yr(),o=s("toStringTag");return Vw=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},Vw}var Uw,k3;function LEe(){if(k3)return Uw;k3=1;var t=Nr(),e=Wr(),r=t.WeakMap;return Uw=e(r)&&/native code/.test(String(r)),Uw}var Hw,T3;function ym(){if(T3)return Hw;T3=1;var t=LEe(),e=Nr(),r=qn(),n=ch(),i=Gr(),s=vA(),o=sb(),a=pm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return Hw={set:h,get:f,has:p,enforce:m,getterFor:g},Hw}var Ww,O3;function hh(){if(O3)return Ww;O3=1;var t=rb(),e=Ct(),r=Z0(),n=ys(),i=dl(),s=wA(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),N=t(y,b),E=0,k=w||s,C=c?k(v,_):d||m?k(v,0):void 0,O,P;_>E;E++)if((g||E in S)&&(O=S[E],P=N(O,E,x),l))if(c)C[E]=P;else if(P)switch(l){case 3:return!0;case 5:return O;case 6:return E;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return Ww={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},Ww}var j3;function BEe(){if(j3)return i3;j3=1;var t=ze(),e=Nr(),r=si(),n=Ct(),i=ah(),s=Cr(),o=sh(),a=xt(),l=Gr(),c=Kr(),d=Lo(),h=Vs(),f=bA(),p=fl(),m=cm(),g=mm(),v=ib(),y=ob(),b=gse(),w=ab(),x=tb(),S=Hi(),_=EA(),N=gA(),E=gm(),k=NA(),C=lh(),O=sb(),P=pm(),j=eb(),A=Yr(),$=lb(),I=Qt(),L=yse(),F=Kc(),H=ym(),G=hh().forEach,K=O("hidden"),ue="Symbol",Ae="prototype",Ce=H.set,nt=H.getterFor(ue),Oe=Object[Ae],ot=e.Symbol,Ye=ot&&ot[Ae],Ar=e.RangeError,gr=e.TypeError,qt=e.QObject,ee=x.f,Ne=S.f,Je=b.f,ht=N.f,Dr=n([].push),Ie=C("symbols"),at=C("op-symbols"),Jt=C("wks"),dt=!qt||!qt[Ae]||!qt[Ae].findChild,D=function(xe,te,he){var ae=ee(Oe,te);ae&&delete Oe[te],Ne(xe,te,he),ae&&xe!==Oe&&Ne(Oe,te,ae)},q=s&&a(function(){return g(Ne({},"a",{get:function(){return Ne(this,"a",{value:7}).a}})).a!==7})?D:Ne,z=function(xe,te){var he=Ie[xe]=g(Ye);return Ce(he,{type:ue,tag:xe,description:te}),s||(he.description=te),he},ie=function(te,he,ae){te===Oe&&ie(at,he,ae),d(te);var Se=f(he);return d(ae),l(Ie,Se)?(ae.enumerable?(l(te,K)&&te[K][Se]&&(te[K][Se]=!1),ae=g(ae,{enumerable:m(0,!1)})):(l(te,K)||Ne(te,K,m(1,g(null))),te[K][Se]=!0),q(te,Se,ae)):Ne(te,Se,ae)},X=function(te,he){d(te);var ae=h(he),Se=v(ae).concat(kt(ae));return G(Se,function(We){(!s||r(me,ae,We))&&ie(te,We,ae[We])}),te},Y=function(te,he){return he===void 0?g(te):X(g(te),he)},me=function(te){var he=f(te),ae=r(ht,this,he);return this===Oe&&l(Ie,he)&&!l(at,he)?!1:ae||!l(this,he)||!l(Ie,he)||l(this,K)&&this[K][he]?ae:!0},Be=function(te,he){var ae=h(te),Se=f(he);if(!(ae===Oe&&l(Ie,Se)&&!l(at,Se))){var We=ee(ae,Se);return We&&l(Ie,Se)&&!(l(ae,K)&&ae[K][Se])&&(We.enumerable=!0),We}},Qe=function(te){var he=Je(h(te)),ae=[];return G(he,function(Se){!l(Ie,Se)&&!l(P,Se)&&Dr(ae,Se)}),ae},kt=function(xe){var te=xe===Oe,he=Je(te?at:h(xe)),ae=[];return G(he,function(Se){l(Ie,Se)&&(!te||l(Oe,Se))&&Dr(ae,Ie[Se])}),ae};return o||(ot=function(){if(c(Ye,this))throw new gr("Symbol is not a constructor");var te=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),he=j(te),ae=function(Se){var We=this===void 0?e:this;We===Oe&&r(ae,at,Se),l(We,K)&&l(We[K],he)&&(We[K][he]=!1);var Zt=m(1,Se);try{q(We,he,Zt)}catch(Sn){if(!(Sn instanceof Ar))throw Sn;D(We,he,Zt)}};return s&&dt&&q(Oe,he,{configurable:!0,set:ae}),z(he,te)},Ye=ot[Ae],E(Ye,"toString",function(){return nt(this).tag}),E(ot,"withoutSetter",function(xe){return z(j(xe),xe)}),N.f=me,S.f=ie,_.f=X,x.f=Be,y.f=b.f=Qe,w.f=kt,$.f=function(xe){return z(A(xe),xe)},s&&(k(Ye,"description",{configurable:!0,get:function(){return nt(this).description}}),i||E(Oe,"propertyIsEnumerable",me,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:ot}),G(v(Jt),function(xe){I(xe)}),t({target:ue,stat:!0,forced:!o},{useSetter:function(){dt=!0},useSimple:function(){dt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Y,defineProperty:ie,defineProperties:X,getOwnPropertyDescriptor:Be}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Qe}),L(),F(ot,ue),P[K]=!0,i3}var P3={},Kw,I3;function vse(){if(I3)return Kw;I3=1;var t=sh();return Kw=t&&!!Symbol.for&&!!Symbol.keyFor,Kw}var R3;function zEe(){if(R3)return P3;R3=1;var t=ze(),e=wi(),r=Gr(),n=fl(),i=lh(),s=vse(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),P3}var M3={},A3;function VEe(){if(A3)return M3;A3=1;var t=ze(),e=Gr(),r=hm(),n=oh(),i=lh(),s=vse(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),M3}var D3={},Gw,$3;function UEe(){if($3)return Gw;$3=1;var t=Ct(),e=Wc(),r=Wr(),n=Fo(),i=fl(),s=t([].push);return Gw=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},Gw}var F3;function bse(){if(F3)return D3;F3=1;var t=ze(),e=wi(),r=J0(),n=si(),i=Ct(),s=xt(),o=Wr(),a=hm(),l=dh(),c=UEe(),d=sh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,C){var O=l(arguments),P=c(C);if(!(!o(P)&&(k===void 0||a(k))))return O[1]=function(j,A){if(o(P)&&(A=n(P,this,h(j),A)),!a(A))return A},r(f,null,O)},E=function(k,C,O){var P=m(O,C-1),j=m(O,C+1);return p(w,k)&&!p(x,j)||p(x,k)&&!p(w,P)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,P){var j=l(arguments),A=r(S?N:f,null,j);return _&&typeof A=="string"?v(A,b,E):A}}),D3}var q3={},L3;function HEe(){if(L3)return q3;L3=1;var t=ze(),e=sh(),r=xt(),n=ab(),i=ys(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),q3}var B3;function xse(){return B3||(B3=1,BEe(),zEe(),VEe(),bse(),HEe()),n3}var z3={},V3;function wse(){if(V3)return z3;V3=1;var t=Qt();return t("asyncDispose"),z3}var U3={},H3;function WEe(){if(H3)return U3;H3=1;var t=Qt();return t("asyncIterator"),U3}var W3={},K3;function Sse(){if(K3)return W3;K3=1;var t=Qt();return t("dispose"),W3}var G3={},Y3;function KEe(){if(Y3)return G3;Y3=1;var t=Qt();return t("hasInstance"),G3}var Q3={},X3;function GEe(){if(X3)return Q3;X3=1;var t=Qt();return t("isConcatSpreadable"),Q3}var J3={},Z3;function _se(){if(Z3)return J3;Z3=1;var t=Qt();return t("iterator"),J3}var eL={},tL;function YEe(){if(tL)return eL;tL=1;var t=Qt();return t("match"),eL}var rL={},nL;function QEe(){if(nL)return rL;nL=1;var t=Qt();return t("matchAll"),rL}var iL={},sL;function XEe(){if(sL)return iL;sL=1;var t=Qt();return t("replace"),iL}var oL={},aL;function JEe(){if(aL)return oL;aL=1;var t=Qt();return t("search"),oL}var lL={},cL;function ZEe(){if(cL)return lL;cL=1;var t=Qt();return t("species"),lL}var uL={},dL;function eNe(){if(dL)return uL;dL=1;var t=Qt();return t("split"),uL}var hL={},fL;function Ese(){if(fL)return hL;fL=1;var t=Qt(),e=yse();return t("toPrimitive"),e(),hL}var pL={},mL;function tNe(){if(mL)return pL;mL=1;var t=wi(),e=Qt(),r=Kc();return e("toStringTag"),r(t("Symbol"),"Symbol"),pL}var gL={},yL;function rNe(){if(yL)return gL;yL=1;var t=Qt();return t("unscopables"),gL}var vL={},bL;function nNe(){if(bL)return vL;bL=1;var t=Nr(),e=Kc();return e(t.JSON,"JSON",!0),vL}var Yw,xL;function iNe(){if(xL)return Yw;xL=1,pse(),xse(),wse(),WEe(),Sse(),KEe(),GEe(),_se(),YEe(),QEe(),XEe(),JEe(),ZEe(),eNe(),Ese(),tNe(),rNe(),nNe();var t=Mr();return Yw=t.Symbol,Yw}var wL={},Qw,SL;function sNe(){return SL||(SL=1,Qw=function(){}),Qw}var Xw,_L;function fh(){return _L||(_L=1,Xw={}),Xw}var Jw,EL;function oNe(){if(EL)return Jw;EL=1;var t=Cr(),e=Gr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return Jw={EXISTS:i,PROPER:s,CONFIGURABLE:o},Jw}var Zw,NL;function aNe(){if(NL)return Zw;NL=1;var t=xt();return Zw=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Zw}var eS,CL;function Nse(){if(CL)return eS;CL=1;var t=Gr(),e=Wr(),r=ys(),n=sb(),i=aNe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return eS=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},eS}var tS,kL;function Cse(){if(kL)return tS;kL=1;var t=xt(),e=Wr(),r=qn(),n=mm(),i=Nse(),s=gm(),o=Yr(),a=ah(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),tS={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},tS}var rS,TL;function lNe(){if(TL)return rS;TL=1;var t=Cse().IteratorPrototype,e=mm(),r=cm(),n=Kc(),i=fh(),s=function(){return this};return rS=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},rS}var nS,OL;function cNe(){if(OL)return nS;OL=1;var t=Ct(),e=qo();return nS=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},nS}var iS,jL;function uNe(){if(jL)return iS;jL=1;var t=qn();return iS=function(e){return t(e)||e===null},iS}var sS,PL;function dNe(){if(PL)return sS;PL=1;var t=uNe(),e=String,r=TypeError;return sS=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},sS}var oS,IL;function hNe(){if(IL)return oS;IL=1;var t=cNe(),e=qn(),r=Hc(),n=dNe();return oS=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),oS}var aS,RL;function CA(){if(RL)return aS;RL=1;var t=ze(),e=si(),r=ah(),n=oNe(),i=Wr(),s=lNe(),o=Nse(),a=hNe(),l=Kc(),c=ch(),d=gm(),h=Yr(),f=fh(),p=Cse(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return aS=function(N,E,k,C,O,P,j){s(k,E,C);var A=function(Ce){if(Ce===O&&H)return H;if(!y&&Ce&&Ce in L)return L[Ce];switch(Ce){case w:return function(){return new k(this,Ce)};case x:return function(){return new k(this,Ce)};case S:return function(){return new k(this,Ce)}}return function(){return new k(this)}},$=E+" Iterator",I=!1,L=N.prototype,F=L[b]||L["@@iterator"]||O&&L[O],H=!y&&F||A(O),G=E==="Array"&&L.entries||F,K,ue,Ae;if(G&&(K=o(G.call(new N)),K!==Object.prototype&&K.next&&(!r&&o(K)!==v&&(a?a(K,v):i(K[b])||d(K,b,_)),l(K,$,!0,!0),r&&(f[$]=_))),m&&O===x&&F&&F.name!==x&&(!r&&g?c(L,"name",x):(I=!0,H=function(){return e(F,this)})),O)if(ue={values:A(x),keys:P?H:A(w),entries:A(S)},j)for(Ae in ue)(y||I||!(Ae in L))&&d(L,Ae,ue[Ae]);else t({target:E,proto:!0,forced:y||I},ue);return(!r||j)&&L[b]!==H&&d(L,b,H,{name:O}),f[E]=H,ue},aS}var lS,ML;function kA(){return ML||(ML=1,lS=function(t,e){return{value:t,done:e}}),lS}var cS,AL;function pl(){if(AL)return cS;AL=1;var t=Vs(),e=sNe(),r=fh(),n=ym(),i=Hi().f,s=CA(),o=kA(),a=ah(),l=Cr(),c="Array Iterator",d=n.set,h=n.getterFor(c);cS=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return cS}var uS,DL;function fNe(){return DL||(DL=1,uS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),uS}var $L;function ml(){if($L)return wL;$L=1,pl();var t=fNe(),e=Nr(),r=Kc(),n=fh();for(var i in t)r(e[i],i),n[i]=n.Array;return wL}var dS,FL;function kse(){if(FL)return dS;FL=1;var t=iNe();return ml(),dS=t,dS}var qL={},LL;function pNe(){if(LL)return qL;LL=1;var t=Yr(),e=Hi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),qL}var BL={},zL;function mNe(){return zL||(zL=1,wse()),BL}var VL={},UL;function gNe(){return UL||(UL=1,Sse()),VL}var HL={},WL;function yNe(){if(WL)return HL;WL=1;var t=Qt();return t("metadata"),HL}var hS,KL;function vNe(){if(KL)return hS;KL=1;var t=kse();return pNe(),mNe(),gNe(),yNe(),hS=t,hS}var GL={},fS,YL;function Tse(){if(YL)return fS;YL=1;var t=wi(),e=Ct(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return fS=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},fS}var QL;function bNe(){if(QL)return GL;QL=1;var t=ze(),e=Tse();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),GL}var XL={},pS,JL;function Ose(){if(JL)return pS;JL=1;for(var t=lh(),e=wi(),r=Ct(),n=hm(),i=Yr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return pS=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},pS}var ZL;function xNe(){if(ZL)return XL;ZL=1;var t=ze(),e=Ose();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),XL}var eB={},tB;function wNe(){if(tB)return eB;tB=1;var t=Qt();return t("customMatcher"),eB}var rB={},nB;function SNe(){if(nB)return rB;nB=1;var t=Qt();return t("observable"),rB}var iB={},sB;function _Ne(){if(sB)return iB;sB=1;var t=ze(),e=Tse();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),iB}var oB={},aB;function ENe(){if(aB)return oB;aB=1;var t=ze(),e=Ose();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),oB}var lB={},cB;function NNe(){if(cB)return lB;cB=1;var t=Qt();return t("matcher"),lB}var uB={},dB;function CNe(){if(dB)return uB;dB=1;var t=Qt();return t("metadataKey"),uB}var hB={},fB;function kNe(){if(fB)return hB;fB=1;var t=Qt();return t("patternMatch"),hB}var pB={},mB;function TNe(){if(mB)return pB;mB=1;var t=Qt();return t("replaceAll"),pB}var mS,gB;function ONe(){if(gB)return mS;gB=1;var t=vNe();return bNe(),xNe(),wNe(),SNe(),_Ne(),ENe(),NNe(),CNe(),kNe(),TNe(),mS=t,mS}var gS,yB;function jNe(){return yB||(yB=1,gS=ONe()),gS}var PNe=jNe(),Dg=tt(PNe),vB={},yS,bB;function INe(){if(bB)return yS;bB=1;var t=Ct(),e=uh(),r=fl(),n=Hc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return yS={codeAt:a(!1),charAt:a(!0)},yS}var xB;function cb(){if(xB)return vB;xB=1;var t=INe().charAt,e=fl(),r=ym(),n=CA(),i=kA(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),vB}var vS,wB;function RNe(){if(wB)return vS;wB=1,pl(),cb(),_se();var t=lb();return vS=t.f("iterator"),vS}var bS,SB;function jse(){if(SB)return bS;SB=1;var t=RNe();return ml(),bS=t,bS}var xS,_B;function MNe(){if(_B)return xS;_B=1;var t=jse();return xS=t,xS}var wS,EB;function ANe(){if(EB)return wS;EB=1;var t=MNe();return wS=t,wS}var SS,NB;function DNe(){return NB||(NB=1,SS=ANe()),SS}var $Ne=DNe(),FNe=tt($Ne);function _p(t){"@babel/helpers - typeof";return _p=typeof Dg=="function"&&typeof FNe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Dg=="function"&&e.constructor===Dg&&e!==Dg.prototype?"symbol":typeof e},_p(t)}var _S,CB;function qNe(){if(CB)return _S;CB=1,Ese();var t=lb();return _S=t.f("toPrimitive"),_S}var ES,kB;function LNe(){if(kB)return ES;kB=1;var t=qNe();return ES=t,ES}var NS,TB;function BNe(){if(TB)return NS;TB=1;var t=LNe();return NS=t,NS}var CS,OB;function zNe(){if(OB)return CS;OB=1;var t=BNe();return CS=t,CS}var kS,jB;function VNe(){return jB||(jB=1,kS=zNe()),kS}var UNe=VNe(),HNe=tt(UNe);function WNe(t,e){if(_p(t)!="object"||!t)return t;var r=t[HNe];if(r!==void 0){var n=r.call(t,e);if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KNe(t){var e=WNe(t,"string");return _p(e)=="symbol"?e:e+""}function Ua(t,e,r){return(e=KNe(e))in t?REe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var PB={},TS,IB;function GNe(){if(IB)return TS;IB=1;var t=Ct(),e=qo(),r=qn(),n=Gr(),i=dh(),s=lm(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return TS=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},TS}var RB;function YNe(){if(RB)return PB;RB=1;var t=ze(),e=GNe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),PB}var OS,MB;function oi(){if(MB)return OS;MB=1;var t=Nr(),e=Mr();return OS=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},OS}var jS,AB;function QNe(){if(AB)return jS;AB=1,YNe();var t=oi();return jS=t("Function","bind"),jS}var PS,DB;function XNe(){if(DB)return PS;DB=1;var t=Kr(),e=QNe(),r=Function.prototype;return PS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},PS}var IS,$B;function JNe(){if($B)return IS;$B=1;var t=XNe();return IS=t,IS}var RS,FB;function ZNe(){return FB||(FB=1,RS=JNe()),RS}var eCe=ZNe(),Pse=tt(eCe),qB={},MS,LB;function tCe(){if(LB)return MS;LB=1;var t=qo(),e=ys(),r=Z0(),n=dl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return MS={left:o(!1),right:o(!0)},MS}var AS,BB;function ub(){if(BB)return AS;BB=1;var t=xt();return AS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},AS}var DS,zB;function Ise(){if(zB)return DS;zB=1;var t=Nr(),e=ih(),r=Fo(),n=function(i){return e.slice(0,i.length)===i};return DS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),DS}var $S,VB;function rCe(){if(VB)return $S;VB=1;var t=Ise();return $S=t==="NODE",$S}var UB;function nCe(){if(UB)return qB;UB=1;var t=ze(),e=tCe().left,r=ub(),n=dm(),i=rCe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),qB}var FS,HB;function iCe(){if(HB)return FS;HB=1,nCe();var t=oi();return FS=t("Array","reduce"),FS}var qS,WB;function sCe(){if(WB)return qS;WB=1;var t=Kr(),e=iCe(),r=Array.prototype;return qS=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},qS}var LS,KB;function oCe(){if(KB)return LS;KB=1;var t=sCe();return LS=t,LS}var BS,GB;function aCe(){return GB||(GB=1,BS=oCe()),BS}var lCe=aCe(),cCe=tt(lCe),YB={},QB;function uCe(){if(QB)return YB;QB=1;var t=ze(),e=hh().filter,r=fm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),YB}var zS,XB;function dCe(){if(XB)return zS;XB=1,uCe();var t=oi();return zS=t("Array","filter"),zS}var VS,JB;function hCe(){if(JB)return VS;JB=1;var t=Kr(),e=dCe(),r=Array.prototype;return VS=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},VS}var US,ZB;function fCe(){if(ZB)return US;ZB=1;var t=hCe();return US=t,US}var HS,ez;function pCe(){return ez||(ez=1,HS=fCe()),HS}var mCe=pCe(),qu=tt(mCe),tz={},rz;function gCe(){if(rz)return tz;rz=1;var t=ze(),e=hh().map,r=fm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),tz}var WS,nz;function yCe(){if(nz)return WS;nz=1,gCe();var t=oi();return WS=t("Array","map"),WS}var KS,iz;function vCe(){if(iz)return KS;iz=1;var t=Kr(),e=yCe(),r=Array.prototype;return KS=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},KS}var GS,sz;function bCe(){if(sz)return GS;sz=1;var t=vCe();return GS=t,GS}var YS,oz;function xCe(){return oz||(oz=1,YS=bCe()),YS}var wCe=xCe(),is=tt(wCe),QS,az;function SCe(){return az||(az=1,QS=kse()),QS}var _Ce=SCe(),ECe=tt(_Ce),lz={},cz;function NCe(){if(cz)return lz;cz=1;var t=ze(),e=Wc(),r=fse(),n=qn(),i=SA(),s=dl(),o=Vs(),a=nb(),l=Yr(),c=fm(),d=dh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,N,E;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in b&&a(N,E,b[x]);return N.length=E,N}}),lz}var XS,uz;function CCe(){if(uz)return XS;uz=1,NCe();var t=oi();return XS=t("Array","slice"),XS}var JS,dz;function kCe(){if(dz)return JS;dz=1;var t=Kr(),e=CCe(),r=Array.prototype;return JS=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},JS}var ZS,hz;function TCe(){if(hz)return ZS;hz=1;var t=kCe();return ZS=t,ZS}var e_,fz;function OCe(){return fz||(fz=1,e_=TCe()),e_}var jCe=OCe(),PCe=tt(jCe),pz={},t_,mz;function Rse(){if(mz)return t_;mz=1;var t=wi(),e=Ct(),r=ob(),n=ab(),i=Lo(),s=e([].concat);return t_=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},t_}var gz;function ICe(){if(gz)return pz;gz=1;var t=ze(),e=Rse();return t({target:"Reflect",stat:!0},{ownKeys:e}),pz}var r_,yz;function RCe(){if(yz)return r_;yz=1,ICe();var t=Mr();return r_=t.Reflect.ownKeys,r_}var n_,vz;function MCe(){if(vz)return n_;vz=1;var t=RCe();return n_=t,n_}var i_,bz;function ACe(){return bz||(bz=1,i_=MCe()),i_}var DCe=ACe(),$Ce=tt(DCe),xz={},wz;function FCe(){if(wz)return xz;wz=1;var t=ze(),e=Wc();return t({target:"Array",stat:!0},{isArray:e}),xz}var s_,Sz;function qCe(){if(Sz)return s_;Sz=1,FCe();var t=Mr();return s_=t.Array.isArray,s_}var o_,_z;function LCe(){if(_z)return o_;_z=1;var t=qCe();return o_=t,o_}var a_,Ez;function BCe(){return Ez||(Ez=1,a_=LCe()),a_}var zCe=BCe(),Cs=tt(zCe),Nz={},Cz;function VCe(){if(Cz)return Nz;Cz=1;var t=ze(),e=ys(),r=ib(),n=xt(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),Nz}var l_,kz;function UCe(){if(kz)return l_;kz=1,VCe();var t=Mr();return l_=t.Object.keys,l_}var c_,Tz;function HCe(){if(Tz)return c_;Tz=1;var t=UCe();return c_=t,c_}var u_,Oz;function WCe(){return Oz||(Oz=1,u_=HCe()),u_}var KCe=WCe(),TA=tt(KCe),jz={},d_,Pz;function GCe(){if(Pz)return d_;Pz=1;var t=hh().forEach,e=ub(),r=e("forEach");return d_=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},d_}var Iz;function YCe(){if(Iz)return jz;Iz=1;var t=ze(),e=GCe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),jz}var h_,Rz;function QCe(){if(Rz)return h_;Rz=1,YCe();var t=oi();return h_=t("Array","forEach"),h_}var f_,Mz;function XCe(){if(Mz)return f_;Mz=1;var t=QCe();return f_=t,f_}var p_,Az;function JCe(){if(Az)return p_;Az=1;var t=hl(),e=Gr(),r=Kr(),n=XCe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return p_=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},p_}var m_,Dz;function ZCe(){return Dz||(Dz=1,m_=JCe()),m_}var eke=ZCe(),jc=tt(eke),$z={},Fz;function tke(){if(Fz)return $z;Fz=1;var t=ze(),e=Ct(),r=Wc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),$z}var g_,qz;function rke(){if(qz)return g_;qz=1,tke();var t=oi();return g_=t("Array","reverse"),g_}var y_,Lz;function nke(){if(Lz)return y_;Lz=1;var t=Kr(),e=rke(),r=Array.prototype;return y_=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},y_}var v_,Bz;function ike(){if(Bz)return v_;Bz=1;var t=nke();return v_=t,v_}var b_,zz;function ske(){return zz||(zz=1,b_=ike()),b_}var oke=ske(),ake=tt(oke),Vz={},x_,Uz;function lke(){if(Uz)return x_;Uz=1;var t=Cr(),e=Wc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return x_=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},x_}var w_,Hz;function Mse(){if(Hz)return w_;Hz=1;var t=oh(),e=TypeError;return w_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},w_}var Wz;function cke(){if(Wz)return Vz;Wz=1;var t=ze(),e=ys(),r=SA(),n=uh(),i=dl(),s=lke(),o=hse(),a=wA(),l=nb(),c=Mse(),d=fm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,N,E,k,C;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),N=a(y,_),E=0;E<_;E++)k=w+E,k in y&&l(N,E,y[k]);if(N.length=_,S<_){for(E=w;E<b-_;E++)k=E+_,C=E+S,k in y?y[C]=y[k]:c(y,C);for(E=b;E>b-_+S;E--)c(y,E-1)}else if(S>_)for(E=b-_;E>w;E--)k=E+_-1,C=E+S-1,k in y?y[C]=y[k]:c(y,C);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,b-_+S),N}}),Vz}var S_,Kz;function uke(){if(Kz)return S_;Kz=1,cke();var t=oi();return S_=t("Array","splice"),S_}var __,Gz;function dke(){if(Gz)return __;Gz=1;var t=Kr(),e=uke(),r=Array.prototype;return __=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},__}var E_,Yz;function hke(){if(Yz)return E_;Yz=1;var t=dke();return E_=t,E_}var N_,Qz;function fke(){return Qz||(Qz=1,N_=hke()),N_}var pke=fke(),Ase=tt(pke),Xz={},C_,Jz;function mke(){if(Jz)return C_;Jz=1;var t=Cr(),e=Ct(),r=si(),n=xt(),i=ib(),s=ab(),o=gA(),a=ys(),l=Z0(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return C_=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,C_}var Zz;function gke(){if(Zz)return Xz;Zz=1;var t=ze(),e=mke();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),Xz}var k_,e6;function yke(){if(e6)return k_;e6=1,gke();var t=Mr();return k_=t.Object.assign,k_}var T_,t6;function vke(){if(t6)return T_;t6=1;var t=yke();return T_=t,T_}var O_,r6;function bke(){return r6||(r6=1,O_=vke()),O_}var xke=bke(),wke=tt(xke),j_,n6;function Ske(){if(n6)return j_;n6=1,pse();var t=oi();return j_=t("Array","concat"),j_}var P_,i6;function _ke(){if(i6)return P_;i6=1;var t=Kr(),e=Ske(),r=Array.prototype;return P_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},P_}var I_,s6;function Eke(){if(s6)return I_;s6=1;var t=_ke();return I_=t,I_}var R_,o6;function Nke(){return o6||(o6=1,R_=Eke()),R_}var Cke=Nke(),kke=tt(Cke),a6={},l6;function Tke(){if(l6)return a6;l6=1;var t=ze(),e=Cr(),r=mm();return t({target:"Object",stat:!0,sham:!e},{create:r}),a6}var M_,c6;function Oke(){if(c6)return M_;c6=1,Tke();var t=Mr(),e=t.Object;return M_=function(n,i){return e.create(n,i)},M_}var A_,u6;function jke(){if(u6)return A_;u6=1;var t=Oke();return A_=t,A_}var D_,d6;function Pke(){return d6||(d6=1,D_=jke()),D_}var Ike=Pke(),Rke=tt(Ike),h6={},$_,f6;function Mke(){if(f6)return $_;f6=1;var t=uh(),e=fl(),r=Hc(),n=RangeError;return $_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},$_}var F_,p6;function Ake(){if(p6)return F_;p6=1;var t=Ct(),e=dse(),r=fl(),n=Mke(),i=Hc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return F_={start:l(!1),end:l(!0)},F_}var q_,m6;function Dke(){if(m6)return q_;m6=1;var t=Ct(),e=xt(),r=Ake().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return q_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,q_}var g6;function $ke(){if(g6)return h6;g6=1;var t=ze(),e=si(),r=ys(),n=ose(),i=Dke(),s=Fo(),o=xt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),h6}var L_,y6;function Fke(){if(y6)return L_;y6=1,$ke(),bse();var t=Mr(),e=J0();return t.JSON||(t.JSON={stringify:JSON.stringify}),L_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},L_}var B_,v6;function qke(){if(v6)return B_;v6=1;var t=Fke();return B_=t,B_}var z_,b6;function Lke(){return b6||(b6=1,z_=qke()),z_}var Bke=Lke(),zke=tt(Bke),x6={},w6={},V_,S6;function Vke(){if(S6)return V_;S6=1;var t=TypeError;return V_=function(e,r){if(e<r)throw new t("Not enough arguments");return e},V_}var U_,_6;function Dse(){if(_6)return U_;_6=1;var t=Nr(),e=J0(),r=Wr(),n=Ise(),i=ih(),s=dh(),o=Vke(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return U_=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?c(y,p):c(y)}:c},U_}var E6;function Uke(){if(E6)return w6;E6=1;var t=ze(),e=Nr(),r=Dse(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),w6}var N6={},C6;function Hke(){if(C6)return N6;C6=1;var t=ze(),e=Nr(),r=Dse(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),N6}var k6;function Wke(){return k6||(k6=1,Uke(),Hke()),x6}var H_,T6;function Kke(){if(T6)return H_;T6=1,Wke();var t=Mr();return H_=t.setTimeout,H_}var W_,O6;function Gke(){return O6||(O6=1,W_=Kke()),W_}var Yke=Gke(),Qke=tt(Yke),K_={exports:{}},j6;function Xke(){return j6||(j6=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(K_)),K_.exports}var Jke=Xke(),Zke=tt(Jke);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function fs(){return fs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fs.apply(this,arguments)}function Wi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function $g(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var HI;typeof Object.assign!="function"?HI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:HI=Object.assign;var Pc=HI,P6=["","webkit","Moz","MS","ms","o"],e2e=typeof document>"u"?{style:{}}:document.createElement("div"),t2e="function",Lu=Math.round,Ic=Math.abs,OA=Date.now;function db(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<P6.length;){if(r=P6[s],n=r?r+i:e,n in t)return n;s++}}var vo;typeof window>"u"?vo={}:vo=window;var $se=db(e2e.style,"touchAction"),Fse=$se!==void 0;function r2e(){if(!Fse)return!1;var t={},e=vo.CSS&&vo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?vo.CSS.supports("touch-action",r):!0}),t}var qse="compute",Lse="auto",WI="manipulation",sc="none",Ep="pan-x",Np="pan-y",Fg=r2e(),n2e=/mobile|tablet|ip(ad|hone|od)|android/i,Bse="ontouchstart"in vo,i2e=db(vo,"PointerEvent")!==void 0,s2e=Bse&&n2e.test(navigator.userAgent),vm="touch",o2e="pen",jA="mouse",a2e="kinect",l2e=25,An=1,Gc=2,xr=4,ni=8,Wv=1,bm=2,xm=4,wm=8,Bd=16,qs=bm|xm,oc=wm|Bd,zse=qs|oc,Vse=["x","y"],Kv=["clientX","clientY"];function bo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function hb(t,e){return typeof t===t2e?t.apply(e&&e[0]||void 0,e):t}function Fl(t,e){return t.indexOf(e)>-1}function c2e(t){if(Fl(t,sc))return sc;var e=Fl(t,Ep),r=Fl(t,Np);return e&&r?sc:e||r?e?Ep:Np:Fl(t,WI)?WI:Lse}var Use=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===qse&&(n=this.compute()),Fse&&this.manager.element.style&&Fg[n]&&(this.manager.element.style[$se]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return bo(this.manager.recognizers,function(i){hb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),c2e(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Fl(o,sc)&&!Fg[sc],l=Fl(o,Np)&&!Fg[Np],c=Fl(o,Ep)&&!Fg[Ep];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&qs||c&&s&oc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function PA(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Hse(t){var e=t.length;if(e===1)return{x:Lu(t[0].clientX),y:Lu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Lu(r/e),y:Lu(n/e)}}function I6(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Lu(t.pointers[r].clientX),clientY:Lu(t.pointers[r].clientY)},r++;return{timeStamp:OA(),pointers:e,center:Hse(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Gv(t,e,r){r||(r=Vse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function KI(t,e,r){r||(r=Vse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Wse(t,e){return t===e?Wv:Ic(t)>=Ic(e)?t<0?bm:xm:e<0?wm:Bd}function u2e(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===An||s.eventType===xr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Kse(t,e,r){return{x:e/t||0,y:r/t||0}}function d2e(t,e){return Gv(e[0],e[1],Kv)/Gv(t[0],t[1],Kv)}function h2e(t,e){return KI(e[1],e[0],Kv)+KI(t[1],t[0],Kv)}function f2e(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ni&&(n>l2e||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=Kse(n,l,c);s=d.x,o=d.y,i=Ic(d.x)>Ic(d.y)?d.x:d.y,a=Wse(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function p2e(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=I6(e)),i>1&&!r.firstMultiple?r.firstMultiple=I6(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Hse(n);e.timeStamp=OA(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=KI(a,l),e.distance=Gv(a,l),u2e(r,e),e.offsetDirection=Wse(e.deltaX,e.deltaY);var c=Kse(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Ic(c.x)>Ic(c.y)?c.x:c.y,e.scale=o?d2e(o.pointers,n):1,e.rotation=o?h2e(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,f2e(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,PA(f,d)&&(d=f),e.target=d}function m2e(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&An&&n-i===0,o=e&(xr|ni)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,p2e(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Cp(t){return t.trim().split(/\s+/g)}function $f(t,e,r){bo(Cp(e),function(n){t.addEventListener(n,r,!1)})}function Ff(t,e,r){bo(Cp(e),function(n){t.removeEventListener(n,r,!1)})}function R6(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var ph=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){hb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&$f(this.element,this.evEl,this.domHandler),this.evTarget&&$f(this.target,this.evTarget,this.domHandler),this.evWin&&$f(R6(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Ff(this.element,this.evEl,this.domHandler),this.evTarget&&Ff(this.target,this.evTarget,this.domHandler),this.evWin&&Ff(R6(this.element),this.evWin,this.domHandler)},t}();function Rc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var g2e={pointerdown:An,pointermove:Gc,pointerup:xr,pointercancel:ni,pointerout:ni},y2e={2:vm,3:o2e,4:jA,5:a2e},Gse="pointerdown",Yse="pointermove pointerup pointercancel";vo.MSPointerEvent&&!vo.PointerEvent&&(Gse="MSPointerDown",Yse="MSPointerMove MSPointerUp MSPointerCancel");var Qse=function(t){Wi(e,t);function e(){var n,i=e.prototype;return i.evEl=Gse,i.evWin=Yse,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=g2e[a],c=y2e[i.pointerType]||i.pointerType,d=c===vm,h=Rc(s,i.pointerId,"pointerId");l&An&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(xr|ni)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(ph);function kp(t){return Array.prototype.slice.call(t,0)}function IA(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Rc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var v2e={touchstart:An,touchmove:Gc,touchend:xr,touchcancel:ni},b2e="touchstart touchmove touchend touchcancel",RA=function(t){Wi(e,t);function e(){var n;return e.prototype.evTarget=b2e,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=v2e[i.type],o=x2e.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:vm,srcEvent:i})},e}(ph);function x2e(t,e){var r=kp(t.touches),n=this.targetIds;if(e&(An|Gc)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=kp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return PA(c.target,l)}),e===An)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(xr|ni)&&delete n[o[i].identifier],i++;if(a.length)return[IA(s.concat(a),"identifier",!0),a]}var w2e={mousedown:An,mousemove:Gc,mouseup:xr},S2e="mousedown",_2e="mousemove mouseup",MA=function(t){Wi(e,t);function e(){var n,i=e.prototype;return i.evEl=S2e,i.evWin=_2e,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=w2e[i.type];s&An&&i.button===0&&(this.pressed=!0),s&Gc&&i.which!==1&&(s=xr),this.pressed&&(s&xr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:jA,srcEvent:i}))},e}(ph),E2e=2500,M6=25;function A6(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,E2e)}}function N2e(t,e){t&An?(this.primaryTouch=e.changedPointers[0].identifier,A6.call(this,e)):t&(xr|ni)&&A6.call(this,e)}function C2e(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=M6&&o<=M6)return!0}return!1}var Xse=function(){var t=function(e){Wi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===vm,h=c.pointerType===jA;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)N2e.call($g($g(o)),l,c);else if(h&&C2e.call($g($g(o)),c))return;o.callback(a,l,c)}},o.touch=new RA(o.manager,o.handler),o.mouse=new MA(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(ph);return t}();function k2e(t){var e,r=t.options.inputClass;return r?e=r:i2e?e=Qse:s2e?e=RA:Bse?e=Xse:e=MA,new e(t,m2e)}function Bu(t,e,r){return Array.isArray(t)?(bo(t,r[e],r),!0):!1}var hy=1,Bi=2,zd=4,Ha=8,xo=Ha,Tp=16,Is=32,T2e=1;function O2e(){return T2e++}function qg(t,e){var r=e.manager;return r?r.get(t):t}function D6(t){return t&Tp?"cancel":t&Ha?"end":t&zd?"move":t&Bi?"start":""}var Sm=function(){function t(r){r===void 0&&(r={}),this.options=fs({enable:!0},r),this.id=O2e(),this.manager=null,this.state=hy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Pc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Bu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=qg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Bu(n,"dropRecognizeWith",this)?this:(n=qg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Bu(n,"requireFailure",this))return this;var i=this.requireFail;return n=qg(n,this),Rc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Bu(n,"dropRequireFailure",this))return this;n=qg(n,this);var i=Rc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ha&&o(i.options.event+D6(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ha&&o(i.options.event+D6(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Is},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Is|hy)))return!1;n++}return!0},e.recognize=function(n){var i=Pc({},n);if(!hb(this.options.enable,[this,i])){this.reset(),this.state=Is;return}this.state&(xo|Tp|Is)&&(this.state=hy),this.state=this.process(i),this.state&(Bi|zd|Ha|Tp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),GI=function(t){Wi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[WI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&An&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==xr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Gv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=xo,s.tryEmit()},o.interval),Bi):xo}return Is},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Is},this.options.interval),Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===xo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Sm),Vd=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Bi|zd),l=this.attrTest(i);return a&&(o&ni||!l)?s|Tp:a||l?o&xr?s|Ha:s&Bi?s|zd:Bi:Is},e}(Sm);function Jse(t){return t===Bd?"down":t===wm?"up":t===bm?"left":t===xm?"right":""}var AA=function(t){Wi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"pan",threshold:10,pointers:1,direction:zse},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&qs&&s.push(Np),i&oc&&s.push(Ep),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&qs?(l=c===0?Wv:c<0?bm:xm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Wv:d<0?wm:Bd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Vd.prototype.attrTest.call(this,i)&&(this.state&Bi||!(this.state&Bi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Jse(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Vd),Zse=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"swipe",threshold:10,velocity:.3,direction:qs|oc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return AA.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(qs|oc)?o=i.overallVelocity:s&qs?o=i.overallVelocityX:s&oc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Ic(o)>this.options.velocity&&i.eventType&xr},r.emit=function(i){var s=Jse(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Vd),eoe=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[sc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Bi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Vd),toe=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[sc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Bi)},e}(Vd),roe=function(t){Wi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Lse]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(xr|ni)&&!c)this.reset();else if(i.eventType&An)this.reset(),this._timer=setTimeout(function(){s.state=xo,s.tryEmit()},o.time);else if(i.eventType&xr)return xo;return Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===xo&&(i&&i.eventType&xr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=OA(),this.manager.emit(this.options.event,this._input)))},e}(Sm),noe={domEvents:!1,touchAction:qse,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},$6=[[toe,{enable:!1}],[eoe,{enable:!1},["rotate"]],[Zse,{direction:qs}],[AA,{direction:qs},["swipe"]],[GI],[GI,{event:"doubletap",taps:2},["tap"]],[roe]],j2e=1,F6=2;function q6(t,e){var r=t.element;if(r.style){var n;bo(t.options.cssProps,function(i,s){n=db(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function P2e(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var L6=function(){function t(r,n){var i=this;this.options=Pc({},noe,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=k2e(this),this.touchAction=new Use(this,this.options.touchAction),q6(this,!0),bo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Pc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?F6:j2e},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&xo)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==F6&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Bi|zd|Ha)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Sm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Bu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Bu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Rc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return bo(Cp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return bo(Cp(n),function(o){i?s[o]&&s[o].splice(Rc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&P2e(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&q6(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),I2e={touchstart:An,touchmove:Gc,touchend:xr,touchcancel:ni},R2e="touchstart",M2e="touchstart touchmove touchend touchcancel",A2e=function(t){Wi(e,t);function e(){var n,i=e.prototype;return i.evTarget=R2e,i.evWin=M2e,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=I2e[i.type];if(s===An&&(this.started=!0),!!this.started){var o=D2e.call(this,i,s);s&(xr|ni)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:vm,srcEvent:i})}},e}(ph);function D2e(t,e){var r=kp(t.touches),n=kp(t.changedTouches);return e&(xr|ni)&&(r=IA(r.concat(n),"identifier",!0)),[r,n]}function ioe(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var soe=ioe(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),$2e=ioe(function(t,e){return soe(t,e,!0)},"merge","Use `assign`.");function F2e(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Pc(i,r)}function B6(t,e){return function(){return t.apply(e,arguments)}}var q2e=function(){var t=function(r,n){return n===void 0&&(n={}),new L6(r,fs({recognizers:$6.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=zse,t.DIRECTION_DOWN=Bd,t.DIRECTION_LEFT=bm,t.DIRECTION_RIGHT=xm,t.DIRECTION_UP=wm,t.DIRECTION_HORIZONTAL=qs,t.DIRECTION_VERTICAL=oc,t.DIRECTION_NONE=Wv,t.DIRECTION_DOWN=Bd,t.INPUT_START=An,t.INPUT_MOVE=Gc,t.INPUT_END=xr,t.INPUT_CANCEL=ni,t.STATE_POSSIBLE=hy,t.STATE_BEGAN=Bi,t.STATE_CHANGED=zd,t.STATE_ENDED=Ha,t.STATE_RECOGNIZED=xo,t.STATE_CANCELLED=Tp,t.STATE_FAILED=Is,t.Manager=L6,t.Input=ph,t.TouchAction=Use,t.TouchInput=RA,t.MouseInput=MA,t.PointerEventInput=Qse,t.TouchMouseInput=Xse,t.SingleTouchInput=A2e,t.Recognizer=Sm,t.AttrRecognizer=Vd,t.Tap=GI,t.Pan=AA,t.Swipe=Zse,t.Pinch=eoe,t.Rotate=toe,t.Press=roe,t.on=$f,t.off=Ff,t.each=bo,t.merge=$2e,t.extend=soe,t.bindFn=B6,t.assign=Pc,t.inherit=F2e,t.bindFn=B6,t.prefixed=db,t.toArray=kp,t.inArray=Rc,t.uniqueArray=IA,t.splitStr=Cp,t.boolOrFn=hb,t.hasParent=PA,t.addEventListeners=$f,t.removeEventListeners=Ff,t.defaults=Pc({},noe,{preset:$6}),t}();const ooe=ECe("DELETE");function L2e(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return aoe({},t,...r)}function aoe(){const t=Yv(...arguments);return coe(t),t}function Yv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return Yv(aoe(e[0],e[1]),...PCe(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of $Ce(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===ooe?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!Cs(n[s])&&!Cs(i[s])?n[s]=Yv(n[s],i[s]):n[s]=loe(i[s]));return n}function loe(t){return Cs(t)?is(t).call(t,e=>loe(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):Yv({},t):t}function coe(t){for(const e of TA(t))t[e]===ooe?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&coe(t[e])}function B2e(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const z2e=typeof window<"u"?window.Hammer||q2e:function(){return B2e()};function ho(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=z2e(this._dom.overlay);r.on("tap",Pse(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];jc(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{V2e(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}Zke(ho.prototype);ho.current=null;ho.prototype.destroy=function(){this.deactivate();for(const r of ake(t=Ase(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};ho.prototype.activate=function(){ho.current&&ho.current.deactivate(),ho.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};ho.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};ho.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function V2e(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var G_,z6;function U2e(){if(z6)return G_;z6=1,xse();var t=Mr();return G_=t.Object.getOwnPropertySymbols,G_}var Y_,V6;function H2e(){if(V6)return Y_;V6=1;var t=U2e();return Y_=t,Y_}var Q_,U6;function W2e(){return U6||(U6=1,Q_=H2e()),Q_}var K2e=W2e(),H6=tt(K2e),X_={exports:{}},W6={},K6;function G2e(){if(K6)return W6;K6=1;var t=ze(),e=xt(),r=Vs(),n=tb().f,i=Cr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),W6}var G6;function Y2e(){if(G6)return X_.exports;G6=1,G2e();var t=Mr(),e=t.Object,r=X_.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),X_.exports}var J_,Y6;function Q2e(){if(Y6)return J_;Y6=1;var t=Y2e();return J_=t,J_}var Z_,Q6;function X2e(){return Q6||(Q6=1,Z_=Q2e()),Z_}var J2e=X2e(),uoe=tt(J2e),X6={},J6;function Z2e(){if(J6)return X6;J6=1;var t=ze(),e=Cr(),r=Rse(),n=Vs(),i=tb(),s=nb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),X6}var eE,Z6;function eTe(){if(Z6)return eE;Z6=1,Z2e();var t=Mr();return eE=t.Object.getOwnPropertyDescriptors,eE}var tE,e8;function tTe(){if(e8)return tE;e8=1;var t=eTe();return tE=t,tE}var rE,t8;function rTe(){return t8||(t8=1,rE=tTe()),rE}var nTe=rTe(),r8=tt(nTe),nE={exports:{}},n8={},i8;function iTe(){if(i8)return n8;i8=1;var t=ze(),e=Cr(),r=EA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),n8}var s8;function sTe(){if(s8)return nE.exports;s8=1,iTe();var t=Mr(),e=t.Object,r=nE.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),nE.exports}var iE,o8;function oTe(){if(o8)return iE;o8=1;var t=sTe();return iE=t,iE}var sE,a8;function aTe(){return a8||(a8=1,sE=oTe()),sE}var lTe=aTe(),cTe=tt(lTe),oE,l8;function uTe(){return l8||(l8=1,oE=use()),oE}var dTe=uTe(),hTe=tt(dTe),c8={},u8={},aE={exports:{}},lE,d8;function fTe(){if(d8)return lE;d8=1;var t=xt();return lE=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),lE}var cE,h8;function pTe(){if(h8)return cE;h8=1;var t=xt(),e=qn(),r=Fo(),n=fTe(),i=Object.isExtensible,s=t(function(){});return cE=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,cE}var uE,f8;function mTe(){if(f8)return uE;f8=1;var t=xt();return uE=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),uE}var p8;function doe(){if(p8)return aE.exports;p8=1;var t=ze(),e=Ct(),r=pm(),n=qn(),i=Gr(),s=Hi().f,o=ob(),a=gse(),l=pTe(),c=eb(),d=mTe(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),k=0,C=E.length;k<C;k++)if(E[k]===f){S(E,k,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=aE.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,aE.exports}var dE,m8;function gTe(){if(m8)return dE;m8=1;var t=Yr(),e=fh(),r=t("iterator"),n=Array.prototype;return dE=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},dE}var hE,g8;function hoe(){if(g8)return hE;g8=1;var t=hl(),e=yA(),r=um(),n=fh(),i=Yr(),s=i("iterator");return hE=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},hE}var fE,y8;function foe(){if(y8)return fE;y8=1;var t=si(),e=qo(),r=Lo(),n=oh(),i=hoe(),s=TypeError;return fE=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},fE}var pE,v8;function DA(){if(v8)return pE;v8=1;var t=si(),e=Lo(),r=yA();return pE=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},pE}var mE,b8;function $A(){if(b8)return mE;b8=1;var t=rb(),e=si(),r=Lo(),n=oh(),i=gTe(),s=dl(),o=Kr(),a=foe(),l=hoe(),c=DA(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return mE=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,N,E,k,C,O,P,j=function($){return _&&c(_,"normal"),new h(!0,$)},A=function($){return y?(r($),x?S($[0],$[1],j):S($[0],$[1])):x?S($,j):S($)};if(b)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,k=s(p);k>E;E++)if(C=A(p[E]),C&&o(f,C))return C;return new h(!1)}_=a(p,N)}for(O=b?p.next:_.next;!(P=e(O,_)).done;){try{C=A(P.value)}catch($){c(_,"throw",$)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},mE}var gE,x8;function poe(){if(x8)return gE;x8=1;var t=Kr(),e=TypeError;return gE=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},gE}var yE,w8;function moe(){if(w8)return yE;w8=1;var t=ze(),e=Nr(),r=doe(),n=xt(),i=ch(),s=$A(),o=poe(),a=Wr(),l=qn(),c=um(),d=Kc(),h=Hi().f,f=hh().forEach,p=Cr(),m=ym(),g=m.set,v=m.getterFor;return yE=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,k={},C;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))C=w.getConstructor(b,y,x,_),r.enable();else{C=b(function(j,A){g(o(j,O),{type:y,collection:new N}),c(A)||s(A,j[_],{that:j,AS_ENTRIES:x})});var O=C.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(j){var A=j==="add"||j==="set";j in E&&!(S&&j==="clear")&&i(O,j,function($,I){var L=P(this).collection;if(!A&&S&&!l($))return j==="get"?void 0:!1;var F=L[j]($===0?0:$,I);return A?this:F})}),S||h(O,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},yE}var vE,S8;function yTe(){if(S8)return vE;S8=1;var t=gm();return vE=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},vE}var bE,_8;function vTe(){if(_8)return bE;_8=1;var t=wi(),e=NA(),r=Yr(),n=Cr(),i=r("species");return bE=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},bE}var xE,E8;function goe(){if(E8)return xE;E8=1;var t=mm(),e=NA(),r=yTe(),n=rb(),i=poe(),s=um(),o=$A(),a=CA(),l=kA(),c=vTe(),d=Cr(),h=doe().fastKey,f=ym(),p=f.set,m=f.getterFor;return xE={getConstructor:function(g,v,y,b){var w=g(function(E,k){i(E,x),p(E,{type:v,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(k)||o(k,E[b],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(E,k,C){var O=S(E),P=N(E,k),j,A;return P?P.value=C:(O.last=P={index:A=h(k,!0),key:k,value:C,previous:j=O.last,next:null,removed:!1},O.first||(O.first=P),j&&(j.next=P),d?O.size++:E.size++,A!=="F"&&(O.index[A]=P)),E},N=function(E,k){var C=S(E),O=h(k),P;if(O!=="F")return C.index[O];for(P=C.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(E){var k=this,C=S(k),O=N(k,E);if(O){var P=O.next,j=O.previous;delete C.index[O.index],O.removed=!0,j&&(j.next=P),P&&(P.previous=j),C.first===O&&(C.first=P),C.last===O&&(C.last=j),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:C.first;)for(O(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!N(this,k)}}),r(x,y?{get:function(k){var C=N(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(v)}},xE}var N8;function bTe(){if(N8)return u8;N8=1;var t=moe(),e=goe();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),u8}var C8;function xTe(){return C8||(C8=1,bTe()),c8}var k8={},wE,T8;function yoe(){return T8||(T8=1,wE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),wE}var SE,O8;function wTe(){if(O8)return SE;O8=1;var t=wi(),e=yoe(),r=t("Map");return SE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},SE}var j8;function STe(){if(j8)return k8;j8=1;var t=ze(),e=Ct(),r=qo(),n=Hc(),i=$A(),s=wTe(),o=ah(),a=xt(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),k8}var _E,P8;function _Te(){if(P8)return _E;P8=1,pl(),xTe(),STe(),cb();var t=Mr();return _E=t.Map,_E}var EE,I8;function ETe(){if(I8)return EE;I8=1;var t=_Te();return ml(),EE=t,EE}var NE,R8;function NTe(){return R8||(R8=1,NE=ETe()),NE}var CTe=NTe(),voe=tt(CTe),M8={},A8;function kTe(){if(A8)return M8;A8=1;var t=ze(),e=hh().some,r=ub(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),M8}var CE,D8;function TTe(){if(D8)return CE;D8=1,kTe();var t=oi();return CE=t("Array","some"),CE}var kE,$8;function OTe(){if($8)return kE;$8=1;var t=Kr(),e=TTe(),r=Array.prototype;return kE=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},kE}var TE,F8;function jTe(){if(F8)return TE;F8=1;var t=OTe();return TE=t,TE}var OE,q8;function PTe(){return q8||(q8=1,OE=jTe()),OE}var ITe=PTe(),RTe=tt(ITe),jE,L8;function MTe(){if(L8)return jE;L8=1,pl();var t=oi();return jE=t("Array","keys"),jE}var PE,B8;function ATe(){if(B8)return PE;B8=1;var t=MTe();return PE=t,PE}var IE,z8;function DTe(){if(z8)return IE;z8=1,ml();var t=hl(),e=Gr(),r=Kr(),n=ATe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return IE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},IE}var RE,V8;function $Te(){return V8||(V8=1,RE=DTe()),RE}var FTe=$Te(),yu=tt(FTe),U8={},ME,H8;function qTe(){if(H8)return ME;H8=1;var t=dh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return ME=r,ME}var AE,W8;function LTe(){if(W8)return AE;W8=1;var t=ih(),e=t.match(/firefox\/(\d+)/i);return AE=!!e&&+e[1],AE}var DE,K8;function BTe(){if(K8)return DE;K8=1;var t=ih();return DE=/MSIE|Trident/.test(t),DE}var $E,G8;function zTe(){if(G8)return $E;G8=1;var t=ih(),e=t.match(/AppleWebKit\/(\d+)\./);return $E=!!e&&+e[1],$E}var Y8;function VTe(){if(Y8)return U8;Y8=1;var t=ze(),e=Ct(),r=qo(),n=ys(),i=dl(),s=Mse(),o=fl(),a=xt(),l=qTe(),c=ub(),d=LTe(),h=BTe(),f=dm(),p=zTe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,k,C,O;for(E=65;E<76;E++){switch(k=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(P,j){return j.v-P.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(N){return function(E,k){return k===void 0?-1:E===void 0?1:N!==void 0?+N(E,k)||0:o(E)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var k=n(this);if(x)return E===void 0?g(k):g(k,E);var C=[],O=i(k),P,j;for(j=0;j<O;j++)j in k&&v(C,k[j]);for(l(C,_(E)),P=i(C),j=0;j<P;)k[j]=C[j++];for(;j<O;)s(k,j++);return k}}),U8}var FE,Q8;function UTe(){if(Q8)return FE;Q8=1,VTe();var t=oi();return FE=t("Array","sort"),FE}var qE,X8;function HTe(){if(X8)return qE;X8=1;var t=Kr(),e=UTe(),r=Array.prototype;return qE=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},qE}var LE,J8;function WTe(){if(J8)return LE;J8=1;var t=HTe();return LE=t,LE}var BE,Z8;function KTe(){return Z8||(Z8=1,BE=WTe()),BE}var GTe=KTe(),YI=tt(GTe),zE,eV;function YTe(){if(eV)return zE;eV=1,pl();var t=oi();return zE=t("Array","values"),zE}var VE,tV;function QTe(){if(tV)return VE;tV=1;var t=YTe();return VE=t,VE}var UE,rV;function XTe(){if(rV)return UE;rV=1,ml();var t=hl(),e=Gr(),r=Kr(),n=QTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return UE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},UE}var HE,nV;function JTe(){return nV||(nV=1,HE=XTe()),HE}var ZTe=JTe(),iV=tt(ZTe),WE,sV;function eOe(){return sV||(sV=1,WE=jse()),WE}var tOe=eOe(),zu=tt(tOe),KE,oV;function rOe(){if(oV)return KE;oV=1,pl();var t=oi();return KE=t("Array","entries"),KE}var GE,aV;function nOe(){if(aV)return GE;aV=1;var t=rOe();return GE=t,GE}var YE,lV;function iOe(){if(lV)return YE;lV=1,ml();var t=hl(),e=Gr(),r=Kr(),n=nOe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return YE=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},YE}var QE,cV;function sOe(){return cV||(cV=1,QE=iOe()),QE}var oOe=sOe(),aOe=tt(oOe);const Jr=[];for(let t=0;t<256;++t)Jr.push((t+256).toString(16).slice(1));function lOe(t,e=0){return(Jr[t[e+0]]+Jr[t[e+1]]+Jr[t[e+2]]+Jr[t[e+3]]+"-"+Jr[t[e+4]]+Jr[t[e+5]]+"-"+Jr[t[e+6]]+Jr[t[e+7]]+"-"+Jr[t[e+8]]+Jr[t[e+9]]+"-"+Jr[t[e+10]]+Jr[t[e+11]]+Jr[t[e+12]]+Jr[t[e+13]]+Jr[t[e+14]]+Jr[t[e+15]]).toLowerCase()}let XE;const cOe=new Uint8Array(16);function uOe(){if(!XE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");XE=crypto.getRandomValues.bind(crypto)}return XE(cOe)}const dOe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var uV={randomUUID:dOe};function hOe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??uOe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,lOe(n)}function fOe(t,e,r){return uV.randomUUID&&!t?uV.randomUUID():hOe(t)}function dV(t){return typeof t=="string"||typeof t=="number"}class FA{constructor(e){Ua(this,"_queue",[]),Ua(this,"_timeout",null),Ua(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new FA(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=Qke(()=>{this.flush()},this.delay))}flush(){var e,r;jc(e=Ase(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class Qv{constructor(){Ua(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Ua(this,"subscribe",Qv.prototype.on),Ua(this,"unsubscribe",Qv.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");jc(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=qu(n=this._subscribers[e]).call(n,i=>i!==r)}}var hV={},fV={},pV;function pOe(){if(pV)return fV;pV=1;var t=moe(),e=goe();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),fV}var mV;function mOe(){return mV||(mV=1,pOe()),hV}var gV={},JE,yV;function Yc(){if(yV)return JE;yV=1;var t=oh(),e=TypeError;return JE=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},JE}var ZE,vV;function Qc(){if(vV)return ZE;vV=1;var t=wi(),e=yoe(),r=t("Set"),n=r.prototype;return ZE={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},ZE}var eN,bV;function Xc(){if(bV)return eN;bV=1;var t=si();return eN=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},eN}var tN,xV;function _m(){if(xV)return tN;xV=1;var t=Xc();return tN=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},tN}var rN,wV;function qA(){if(wV)return rN;wV=1;var t=Qc(),e=_m(),r=t.Set,n=t.add;return rN=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},rN}var nN,SV;function Em(){return SV||(SV=1,nN=function(t){return t.size}),nN}var iN,_V;function gOe(){return _V||(_V=1,iN=function(t){return{iterator:t,next:t.next,done:!1}}),iN}var sN,EV;function Jc(){if(EV)return sN;EV=1;var t=qo(),e=Lo(),r=si(),n=uh(),i=gOe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},sN=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},sN}var oN,NV;function yOe(){if(NV)return oN;NV=1;var t=Yc(),e=Qc(),r=qA(),n=Em(),i=Jc(),s=_m(),o=Xc(),a=e.has,l=e.remove;return oN=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},oN}var aN,CV;function Zc(){return CV||(CV=1,aN=function(){return!1}),aN}var kV;function vOe(){if(kV)return gV;kV=1;var t=ze(),e=yOe(),r=xt(),n=Zc(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),gV}var TV={},lN,OV;function bOe(){if(OV)return lN;OV=1;var t=Yc(),e=Qc(),r=Em(),n=Jc(),i=_m(),s=Xc(),o=e.Set,a=e.add,l=e.has;return lN=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},lN}var jV;function xOe(){if(jV)return TV;jV=1;var t=ze(),e=xt(),r=bOe(),n=Zc(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),TV}var PV={},cN,IV;function wOe(){if(IV)return cN;IV=1;var t=Yc(),e=Qc().has,r=Em(),n=Jc(),i=_m(),s=Xc(),o=DA();return cN=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},cN}var RV;function SOe(){if(RV)return PV;RV=1;var t=ze(),e=wOe(),r=Zc(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),PV}var MV={},uN,AV;function _Oe(){if(AV)return uN;AV=1;var t=Yc(),e=Em(),r=_m(),n=Jc();return uN=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},uN}var DV;function EOe(){if(DV)return MV;DV=1;var t=ze(),e=_Oe(),r=Zc(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),MV}var $V={},dN,FV;function NOe(){if(FV)return dN;FV=1;var t=Yc(),e=Qc().has,r=Em(),n=Jc(),i=Xc(),s=DA();return dN=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},dN}var qV;function COe(){if(qV)return $V;qV=1;var t=ze(),e=NOe(),r=Zc(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),$V}var LV={},hN,BV;function kOe(){if(BV)return hN;BV=1;var t=Yc(),e=Qc(),r=qA(),n=Jc(),i=Xc(),s=e.add,o=e.has,a=e.remove;return hN=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},hN}var fN,zV;function boe(){return zV||(zV=1,fN=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),fN}var VV;function TOe(){if(VV)return LV;VV=1;var t=ze(),e=kOe(),r=boe(),n=Zc(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),LV}var UV={},pN,HV;function OOe(){if(HV)return pN;HV=1;var t=Yc(),e=Qc().add,r=qA(),n=Jc(),i=Xc();return pN=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},pN}var WV;function jOe(){if(WV)return UV;WV=1;var t=ze(),e=OOe(),r=boe(),n=Zc(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),UV}var mN,KV;function POe(){if(KV)return mN;KV=1,pl(),mOe(),vOe(),xOe(),SOe(),EOe(),COe(),TOe(),jOe(),cb();var t=Mr();return mN=t.Set,mN}var gN,GV;function IOe(){if(GV)return gN;GV=1;var t=POe();return ml(),gN=t,gN}var yN,YV;function ROe(){return YV||(YV=1,yN=IOe()),yN}var MOe=ROe(),vN=tt(MOe),bN,QV;function AOe(){if(QV)return bN;QV=1,pl(),cb();var t=foe();return bN=t,bN}var xN,XV;function DOe(){if(XV)return xN;XV=1;var t=AOe();return ml(),xN=t,xN}var wN,JV;function $Oe(){if(JV)return wN;JV=1;var t=DOe();return wN=t,wN}var SN,ZV;function FOe(){if(ZV)return SN;ZV=1;var t=$Oe();return SN=t,SN}var _N,eU;function qOe(){return eU||(eU=1,_N=FOe()),_N}var EN,tU;function LOe(){return tU||(tU=1,EN=qOe()),EN}var BOe=LOe(),NN=tt(BOe);class ql{constructor(e){this._pairs=e}*[zu](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return is(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return is(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=Rke(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new voe(this._pairs)}toIdSet(){return new vN(this.toIdArray())}toItemSet(){return new vN(this.toItemArray())}cache(){return new ql([...this._pairs])}distinct(e){const r=new vN;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new ql({*[zu](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new ql({*[zu](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=NN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=NN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new ql({[zu]:()=>{var r;return NN(YI(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function rU(t,e){var r=TA(t);if(H6){var n=H6(t);e&&(n=qu(n).call(n,function(i){return uoe(t,i).enumerable})),r.push.apply(r,n)}return r}function nU(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?jc(r=rU(Object(i),!0)).call(r,function(s){Ua(t,s,i[s])}):r8?cTe(t,r8(i)):jc(n=rU(Object(i))).call(n,function(s){hTe(t,s,uoe(i,s))})}return t}function zOe(t,e){return t[e]==null&&(t[e]=fOe()),t}class Ud extends Qv{get idProp(){return this._idProp}constructor(e,r){super(),Ua(this,"_queue",null),e&&!Cs(e)&&(r=e,e=[]),this._options=r||{},this._data=new voe,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=FA.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(Cs(e)){const s=is(e).call(e,o=>o[this._idProp]);if(RTe(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=c=>{const d=c[a];if(d!=null&&this._data.has(d)){const h=c,f=wke({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(c);n.push(h)}};if(Cs(e))for(let c=0,d=e.length;c<d;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const c={items:i,oldData:s,data:o};this._trigger("update",c,r)}return kke(n).call(n,i)}updateOnly(e,r){var n;Cs(e)||(e=[e]);const i=is(n=is(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=L2e(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(i.length){const s={items:is(i).call(i,o=>o.id),oldData:is(i).call(i,o=>o.oldData),data:is(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;dV(e)?(n=e,s=r):Cs(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&qu(s),l=[];let c,d,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)c=this._data.get(i[p]),c!=null&&(!a||a(c))&&l.push(c);else{var f;d=[...yu(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const v=l[m],y=v[this._idProp];p[y]=v}return p}else return n!=null?c??null:l}getIds(e){const r=this._data,n=e&&qu(e),i=e&&e.order,s=[...yu(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=this._data.get(c);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=r.get(c);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&qu(r),i=this._data,s=[...yu(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const c=o[a],d=c[this._idProp];e(c,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,r){const n=r&&qu(r),i=[],s=this._data,o=[...yu(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],d=this._data.get(c);d!=null&&(!n||n(d))&&i.push(e(d,c))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&cCe(n=Cs(r)?r:TA(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;YI(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")YI(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=Cs(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(dV(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...yu(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of iV(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of iV(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[...yu(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=zOe(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+zke(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,nU(nU({},n),e)),r}stream(e){if(e){const n=this._data;return new ql({*[zu](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new ql({[zu]:Pse(r=aOe(this._data)).call(r,this._data)})}}}function VOe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof jc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof is(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function xoe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof jc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof is(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&VOe(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var iU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sU={},rf,oU;function zt(){if(oU)return rf;oU=1;var t=function(e){return e&&e.Math===Math&&e};return rf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof iU=="object"&&iU)||t(typeof rf=="object"&&rf)||function(){return this}()||Function("return this")(),rf}var CN,aU;function rt(){return aU||(aU=1,CN=function(t){try{return!!t()}catch{return!0}}),CN}var kN,lU;function Nm(){if(lU)return kN;lU=1;var t=rt();return kN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),kN}var TN,cU;function fb(){if(cU)return TN;cU=1;var t=Nm(),e=Function.prototype,r=e.apply,n=e.call;return TN=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),TN}var ON,uU;function st(){if(uU)return ON;uU=1;var t=Nm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return ON=t?n:function(i){return function(){return r.apply(i,arguments)}},ON}var jN,dU;function Us(){if(dU)return jN;dU=1;var t=st(),e=t({}.toString),r=t("".slice);return jN=function(n){return r(e(n),8,-1)},jN}var PN,hU;function LA(){if(hU)return PN;hU=1;var t=Us(),e=st();return PN=function(r){if(t(r)==="Function")return e(r)},PN}var IN,fU;function Qr(){if(fU)return IN;fU=1;var t=typeof document=="object"&&document.all;return IN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},IN}var RN={},MN,pU;function mr(){if(pU)return MN;pU=1;var t=rt();return MN=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),MN}var AN,mU;function ai(){if(mU)return AN;mU=1;var t=Nm(),e=Function.prototype.call;return AN=t?e.bind(e):function(){return e.apply(e,arguments)},AN}var DN={},gU;function pb(){if(gU)return DN;gU=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return DN.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,DN}var $N,yU;function Cm(){return yU||(yU=1,$N=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),$N}var FN,vU;function mb(){if(vU)return FN;vU=1;var t=st(),e=rt(),r=Us(),n=Object,i=t("".split);return FN=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,FN}var qN,bU;function mh(){return bU||(bU=1,qN=function(t){return t==null}),qN}var LN,xU;function Bo(){if(xU)return LN;xU=1;var t=mh(),e=TypeError;return LN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},LN}var BN,wU;function vs(){if(wU)return BN;wU=1;var t=mb(),e=Bo();return BN=function(r){return t(e(r))},BN}var zN,SU;function Xr(){if(SU)return zN;SU=1;var t=Qr();return zN=function(e){return typeof e=="object"?e!==null:t(e)},zN}var VN,_U;function wt(){return _U||(_U=1,VN={}),VN}var UN,EU;function Si(){if(EU)return UN;EU=1;var t=wt(),e=zt(),r=Qr(),n=function(i){return r(i)?i:void 0};return UN=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},UN}var HN,NU;function kr(){if(NU)return HN;NU=1;var t=st();return HN=t({}.isPrototypeOf),HN}var WN,CU;function gh(){if(CU)return WN;CU=1;var t=zt(),e=t.navigator,r=e&&e.userAgent;return WN=r?String(r):"",WN}var KN,kU;function km(){if(kU)return KN;kU=1;var t=zt(),e=gh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),KN=a,KN}var GN,TU;function yh(){if(TU)return GN;TU=1;var t=km(),e=rt(),r=zt(),n=r.String;return GN=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),GN}var YN,OU;function woe(){if(OU)return YN;OU=1;var t=yh();return YN=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",YN}var QN,jU;function Tm(){if(jU)return QN;jU=1;var t=Si(),e=Qr(),r=kr(),n=woe(),i=Object;return QN=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},QN}var XN,PU;function vh(){if(PU)return XN;PU=1;var t=String;return XN=function(e){try{return t(e)}catch{return"Object"}},XN}var JN,IU;function zo(){if(IU)return JN;IU=1;var t=Qr(),e=vh(),r=TypeError;return JN=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},JN}var ZN,RU;function BA(){if(RU)return ZN;RU=1;var t=zo(),e=mh();return ZN=function(r,n){var i=r[n];return e(i)?void 0:t(i)},ZN}var eC,MU;function UOe(){if(MU)return eC;MU=1;var t=ai(),e=Qr(),r=Xr(),n=TypeError;return eC=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},eC}var tC={exports:{}},rC,AU;function bh(){return AU||(AU=1,rC=!0),rC}var nC,DU;function HOe(){if(DU)return nC;DU=1;var t=zt(),e=Object.defineProperty;return nC=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},nC}var $U;function zA(){if($U)return tC.exports;$U=1;var t=bh(),e=zt(),r=HOe(),n="__core-js_shared__",i=tC.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),tC.exports}var iC,FU;function xh(){if(FU)return iC;FU=1;var t=zA();return iC=function(e,r){return t[e]||(t[e]=r||{})},iC}var sC,qU;function _i(){if(qU)return sC;qU=1;var t=Bo(),e=Object;return sC=function(r){return e(t(r))},sC}var oC,LU;function ln(){if(LU)return oC;LU=1;var t=st(),e=_i(),r=t({}.hasOwnProperty);return oC=Object.hasOwn||function(i,s){return r(e(i),s)},oC}var aC,BU;function gb(){if(BU)return aC;BU=1;var t=st(),e=0,r=Math.random(),n=t(1.1.toString);return aC=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},aC}var lC,zU;function Tr(){if(zU)return lC;zU=1;var t=zt(),e=xh(),r=ln(),n=gb(),i=yh(),s=woe(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return lC=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},lC}var cC,VU;function Soe(){if(VU)return cC;VU=1;var t=ai(),e=Xr(),r=Tm(),n=BA(),i=UOe(),s=Tr(),o=TypeError,a=s("toPrimitive");return cC=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},cC}var uC,UU;function VA(){if(UU)return uC;UU=1;var t=Soe(),e=Tm();return uC=function(r){var n=t(r,"string");return e(n)?n:n+""},uC}var dC,HU;function _oe(){if(HU)return dC;HU=1;var t=zt(),e=Xr(),r=t.document,n=e(r)&&e(r.createElement);return dC=function(i){return n?r.createElement(i):{}},dC}var hC,WU;function Eoe(){if(WU)return hC;WU=1;var t=mr(),e=rt(),r=_oe();return hC=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),hC}var KU;function yb(){if(KU)return RN;KU=1;var t=mr(),e=ai(),r=pb(),n=Cm(),i=vs(),s=VA(),o=ln(),a=Eoe(),l=Object.getOwnPropertyDescriptor;return RN.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},RN}var fC,GU;function WOe(){if(GU)return fC;GU=1;var t=rt(),e=Qr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return fC=n,fC}var pC,YU;function vb(){if(YU)return pC;YU=1;var t=LA(),e=zo(),r=Nm(),n=t(t.bind);return pC=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},pC}var mC={},gC,QU;function Noe(){if(QU)return gC;QU=1;var t=mr(),e=rt();return gC=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),gC}var yC,XU;function Hs(){if(XU)return yC;XU=1;var t=Xr(),e=String,r=TypeError;return yC=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},yC}var JU;function Ki(){if(JU)return mC;JU=1;var t=mr(),e=Eoe(),r=Noe(),n=Hs(),i=VA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return mC.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},mC}var vC,ZU;function wh(){if(ZU)return vC;ZU=1;var t=mr(),e=Ki(),r=Cm();return vC=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},vC}var bC,eH;function Te(){if(eH)return bC;eH=1;var t=zt(),e=fb(),r=LA(),n=Qr(),i=yb().f,s=WOe(),o=wt(),a=vb(),l=wh(),c=ln(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return bC=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,N,E,k,C,O,P;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),k=b[N],S&&(h.dontCallGetSet?(P=i(y,N),C=P&&P.value):C=y[N]),E=S&&C?C:f[N],!(!x&&!v&&typeof k==typeof E)&&(h.bind&&S?O=a(E,t):h.wrap&&S?O=d(E):v&&n(E)?O=r(E):O=E,(h.sham||E&&E.sham||k&&k.sham)&&l(O,"sham",!0),l(b,N,O),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},bC}var xC,tH;function KOe(){if(tH)return xC;tH=1;var t=Math.ceil,e=Math.floor;return xC=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},xC}var wC,rH;function Sh(){if(rH)return wC;rH=1;var t=KOe();return wC=function(e){var r=+e;return r!==r||r===0?0:t(r)},wC}var SC,nH;function bb(){if(nH)return SC;nH=1;var t=Sh(),e=Math.max,r=Math.min;return SC=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},SC}var _C,iH;function Coe(){if(iH)return _C;iH=1;var t=Sh(),e=Math.min;return _C=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},_C}var EC,sH;function Vo(){if(sH)return EC;sH=1;var t=Coe();return EC=function(e){return t(e.length)},EC}var NC,oH;function UA(){if(oH)return NC;oH=1;var t=vs(),e=bb(),r=Vo(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return NC={includes:n(!0),indexOf:n(!1)},NC}var CC,aH;function Om(){return aH||(aH=1,CC={}),CC}var kC,lH;function koe(){if(lH)return kC;lH=1;var t=st(),e=ln(),r=vs(),n=UA().indexOf,i=Om(),s=t([].push);return kC=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},kC}var TC,cH;function HA(){return cH||(cH=1,TC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),TC}var OC,uH;function jm(){if(uH)return OC;uH=1;var t=koe(),e=HA();return OC=Object.keys||function(n){return t(n,e)},OC}var jC={},dH;function xb(){return dH||(dH=1,jC.f=Object.getOwnPropertySymbols),jC}var PC,hH;function GOe(){if(hH)return PC;hH=1;var t=mr(),e=st(),r=ai(),n=rt(),i=jm(),s=xb(),o=pb(),a=_i(),l=mb(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return PC=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,PC}var fH;function YOe(){if(fH)return sU;fH=1;var t=Te(),e=GOe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),sU}var IC,pH;function QOe(){if(pH)return IC;pH=1,YOe();var t=wt();return IC=t.Object.assign,IC}var RC,mH;function XOe(){if(mH)return RC;mH=1;var t=QOe();return RC=t,RC}var MC,gH;function JOe(){return gH||(gH=1,MC=XOe()),MC}var ZOe=JOe(),wr=qe(ZOe),yH={},AC,vH;function _h(){if(vH)return AC;vH=1;var t=st();return AC=t([].slice),AC}var DC,bH;function eje(){if(bH)return DC;bH=1;var t=st(),e=zo(),r=Xr(),n=ln(),i=_h(),s=Nm(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return DC=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},DC}var xH;function tje(){if(xH)return yH;xH=1;var t=Te(),e=eje();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),yH}var $C,wH;function cn(){if(wH)return $C;wH=1;var t=zt(),e=wt();return $C=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},$C}var FC,SH;function rje(){if(SH)return FC;SH=1,tje();var t=cn();return FC=t("Function","bind"),FC}var qC,_H;function nje(){if(_H)return qC;_H=1;var t=kr(),e=rje(),r=Function.prototype;return qC=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},qC}var LC,EH;function ije(){if(EH)return LC;EH=1;var t=nje();return LC=t,LC}var BC,NH;function sje(){return NH||(NH=1,BC=ije()),BC}var oje=sje(),ne=qe(oje);function WA(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function aje(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function lje(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function cje(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function uje(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function dje(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function Toe(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function QI(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,c=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,c,d,c),t.bezierCurveTo(d-o,c,e,h+a,e,h),t.closePath()}function Ooe(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,c=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),v=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+c,f,p,f),t.bezierCurveTo(p-c,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-c,r,p,r),t.bezierCurveTo(p+c,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+c,v,p,v),t.bezierCurveTo(p-c,v,e,g+d,e,g),t.lineTo(e,m)}function joe(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,c=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+c*c)),p=a<0?-p:p,e+=p,r+=c*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function hje(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const CH={circle:WA,dashedLine:joe,database:Ooe,diamond:dje,ellipse:QI,ellipse_vis:QI,hexagon:hje,roundRect:Toe,square:aje,star:uje,triangle:lje,triangleDown:cje};function fje(t){return Object.prototype.hasOwnProperty.call(CH,t)?CH[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var zC={exports:{}},kH;function pje(){return kH||(kH=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(zC)),zC.exports}var mje=pje(),Poe=qe(mje),TH={},VC,OH;function eu(){if(OH)return VC;OH=1;var t=Us();return VC=Array.isArray||function(r){return t(r)==="Array"},VC}var UC,jH;function Ioe(){if(jH)return UC;jH=1;var t=TypeError,e=9007199254740991;return UC=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},UC}var HC,PH;function wb(){if(PH)return HC;PH=1;var t=mr(),e=Ki(),r=Cm();return HC=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},HC}var WC,IH;function KA(){if(IH)return WC;IH=1;var t=Tr(),e=t("toStringTag"),r={};return r[e]="z",WC=String(r)==="[object z]",WC}var KC,RH;function Eh(){if(RH)return KC;RH=1;var t=KA(),e=Qr(),r=Us(),n=Tr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return KC=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},KC}var GC,MH;function gje(){if(MH)return GC;MH=1;var t=st(),e=Qr(),r=zA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),GC=r.inspectSource,GC}var YC,AH;function Roe(){if(AH)return YC;AH=1;var t=st(),e=rt(),r=Qr(),n=Eh(),i=Si(),s=gje(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,YC=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,YC}var QC,DH;function yje(){if(DH)return QC;DH=1;var t=eu(),e=Roe(),r=Xr(),n=Tr(),i=n("species"),s=Array;return QC=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},QC}var XC,$H;function GA(){if($H)return XC;$H=1;var t=yje();return XC=function(e,r){return new(t(e))(r===0?0:r)},XC}var JC,FH;function Pm(){if(FH)return JC;FH=1;var t=rt(),e=Tr(),r=km(),n=e("species");return JC=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},JC}var qH;function Moe(){if(qH)return TH;qH=1;var t=Te(),e=rt(),r=eu(),n=Xr(),i=_i(),s=Vo(),o=Ioe(),a=wb(),l=GA(),c=Pm(),d=Tr(),h=km(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,N,E,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?b:arguments[S],m(k))for(E=s(k),o(x+E),_=0;_<E;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),TH}var LH={},BH={},ZC,zH;function Gi(){if(zH)return ZC;zH=1;var t=Eh(),e=String;return ZC=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},ZC}var ek={},VH;function YA(){if(VH)return ek;VH=1;var t=mr(),e=Noe(),r=Ki(),n=Hs(),i=vs(),s=jm();return ek.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},ek}var tk,UH;function vje(){if(UH)return tk;UH=1;var t=Si();return tk=t("document","documentElement"),tk}var rk,HH;function Sb(){if(HH)return rk;HH=1;var t=xh(),e=gb(),r=t("keys");return rk=function(n){return r[n]||(r[n]=e(n))},rk}var nk,WH;function Im(){if(WH)return nk;WH=1;var t=Hs(),e=YA(),r=HA(),n=Om(),i=vje(),s=_oe(),o=Sb(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,nk=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},nk}var ik={},KH;function _b(){if(KH)return ik;KH=1;var t=koe(),e=HA(),r=e.concat("length","prototype");return ik.f=Object.getOwnPropertyNames||function(i){return t(i,r)},ik}var sk={},GH;function QA(){if(GH)return sk;GH=1;var t=Us(),e=vs(),r=_b().f,n=_h(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return sk.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},sk}var ok,YH;function Rm(){if(YH)return ok;YH=1;var t=wh();return ok=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},ok}var ak,QH;function XA(){if(QH)return ak;QH=1;var t=Ki();return ak=function(e,r,n){return t.f(e,r,n)},ak}var lk={},XH;function Eb(){if(XH)return lk;XH=1;var t=Tr();return lk.f=t,lk}var ck,JH;function Xt(){if(JH)return ck;JH=1;var t=wt(),e=ln(),r=Eb(),n=Ki().f;return ck=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},ck}var uk,ZH;function Aoe(){if(ZH)return uk;ZH=1;var t=ai(),e=Si(),r=Tr(),n=Rm();return uk=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},uk}var dk,e7;function bje(){if(e7)return dk;e7=1;var t=KA(),e=Eh();return dk=t?{}.toString:function(){return"[object "+e(this)+"]"},dk}var hk,t7;function tu(){if(t7)return hk;t7=1;var t=KA(),e=Ki().f,r=wh(),n=ln(),i=bje(),s=Tr(),o=s("toStringTag");return hk=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},hk}var fk,r7;function Doe(){if(r7)return fk;r7=1;var t=zt(),e=Qr(),r=t.WeakMap;return fk=e(r)&&/native code/.test(String(r)),fk}var pk,n7;function ru(){if(n7)return pk;n7=1;var t=Doe(),e=zt(),r=Xr(),n=wh(),i=ln(),s=zA(),o=Sb(),a=Om(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return pk={set:h,get:f,has:p,enforce:m,getterFor:g},pk}var mk,i7;function gl(){if(i7)return mk;i7=1;var t=vb(),e=st(),r=mb(),n=_i(),i=Vo(),s=GA(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),N=t(y,b),E=0,k=w||s,C=c?k(v,_):d||m?k(v,0):void 0,O,P;_>E;E++)if((g||E in S)&&(O=S[E],P=N(O,E,x),l))if(c)C[E]=P;else if(P)switch(l){case 3:return!0;case 5:return O;case 6:return E;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return mk={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},mk}var s7;function xje(){if(s7)return BH;s7=1;var t=Te(),e=zt(),r=ai(),n=st(),i=bh(),s=mr(),o=yh(),a=rt(),l=ln(),c=kr(),d=Hs(),h=vs(),f=VA(),p=Gi(),m=Cm(),g=Im(),v=jm(),y=_b(),b=QA(),w=xb(),x=yb(),S=Ki(),_=YA(),N=pb(),E=Rm(),k=XA(),C=xh(),O=Sb(),P=Om(),j=gb(),A=Tr(),$=Eb(),I=Xt(),L=Aoe(),F=tu(),H=ru(),G=gl().forEach,K=O("hidden"),ue="Symbol",Ae="prototype",Ce=H.set,nt=H.getterFor(ue),Oe=Object[Ae],ot=e.Symbol,Ye=ot&&ot[Ae],Ar=e.RangeError,gr=e.TypeError,qt=e.QObject,ee=x.f,Ne=S.f,Je=b.f,ht=N.f,Dr=n([].push),Ie=C("symbols"),at=C("op-symbols"),Jt=C("wks"),dt=!qt||!qt[Ae]||!qt[Ae].findChild,D=function(xe,te,he){var ae=ee(Oe,te);ae&&delete Oe[te],Ne(xe,te,he),ae&&xe!==Oe&&Ne(Oe,te,ae)},q=s&&a(function(){return g(Ne({},"a",{get:function(){return Ne(this,"a",{value:7}).a}})).a!==7})?D:Ne,z=function(xe,te){var he=Ie[xe]=g(Ye);return Ce(he,{type:ue,tag:xe,description:te}),s||(he.description=te),he},ie=function(te,he,ae){te===Oe&&ie(at,he,ae),d(te);var Se=f(he);return d(ae),l(Ie,Se)?(ae.enumerable?(l(te,K)&&te[K][Se]&&(te[K][Se]=!1),ae=g(ae,{enumerable:m(0,!1)})):(l(te,K)||Ne(te,K,m(1,g(null))),te[K][Se]=!0),q(te,Se,ae)):Ne(te,Se,ae)},X=function(te,he){d(te);var ae=h(he),Se=v(ae).concat(kt(ae));return G(Se,function(We){(!s||r(me,ae,We))&&ie(te,We,ae[We])}),te},Y=function(te,he){return he===void 0?g(te):X(g(te),he)},me=function(te){var he=f(te),ae=r(ht,this,he);return this===Oe&&l(Ie,he)&&!l(at,he)?!1:ae||!l(this,he)||!l(Ie,he)||l(this,K)&&this[K][he]?ae:!0},Be=function(te,he){var ae=h(te),Se=f(he);if(!(ae===Oe&&l(Ie,Se)&&!l(at,Se))){var We=ee(ae,Se);return We&&l(Ie,Se)&&!(l(ae,K)&&ae[K][Se])&&(We.enumerable=!0),We}},Qe=function(te){var he=Je(h(te)),ae=[];return G(he,function(Se){!l(Ie,Se)&&!l(P,Se)&&Dr(ae,Se)}),ae},kt=function(xe){var te=xe===Oe,he=Je(te?at:h(xe)),ae=[];return G(he,function(Se){l(Ie,Se)&&(!te||l(Oe,Se))&&Dr(ae,Ie[Se])}),ae};return o||(ot=function(){if(c(Ye,this))throw new gr("Symbol is not a constructor");var te=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),he=j(te),ae=function(Se){var We=this===void 0?e:this;We===Oe&&r(ae,at,Se),l(We,K)&&l(We[K],he)&&(We[K][he]=!1);var Zt=m(1,Se);try{q(We,he,Zt)}catch(Sn){if(!(Sn instanceof Ar))throw Sn;D(We,he,Zt)}};return s&&dt&&q(Oe,he,{configurable:!0,set:ae}),z(he,te)},Ye=ot[Ae],E(Ye,"toString",function(){return nt(this).tag}),E(ot,"withoutSetter",function(xe){return z(j(xe),xe)}),N.f=me,S.f=ie,_.f=X,x.f=Be,y.f=b.f=Qe,w.f=kt,$.f=function(xe){return z(A(xe),xe)},s&&(k(Ye,"description",{configurable:!0,get:function(){return nt(this).description}}),i||E(Oe,"propertyIsEnumerable",me,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:ot}),G(v(Jt),function(xe){I(xe)}),t({target:ue,stat:!0,forced:!o},{useSetter:function(){dt=!0},useSimple:function(){dt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Y,defineProperty:ie,defineProperties:X,getOwnPropertyDescriptor:Be}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Qe}),L(),F(ot,ue),P[K]=!0,BH}var o7={},gk,a7;function $oe(){if(a7)return gk;a7=1;var t=yh();return gk=t&&!!Symbol.for&&!!Symbol.keyFor,gk}var l7;function wje(){if(l7)return o7;l7=1;var t=Te(),e=Si(),r=ln(),n=Gi(),i=xh(),s=$oe(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),o7}var c7={},u7;function Sje(){if(u7)return c7;u7=1;var t=Te(),e=ln(),r=Tm(),n=vh(),i=xh(),s=$oe(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),c7}var d7={},yk,h7;function _je(){if(h7)return yk;h7=1;var t=st(),e=eu(),r=Qr(),n=Us(),i=Gi(),s=t([].push);return yk=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},yk}var f7;function Foe(){if(f7)return d7;f7=1;var t=Te(),e=Si(),r=fb(),n=ai(),i=st(),s=rt(),o=Qr(),a=Tm(),l=_h(),c=_je(),d=yh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,C){var O=l(arguments),P=c(C);if(!(!o(P)&&(k===void 0||a(k))))return O[1]=function(j,A){if(o(P)&&(A=n(P,this,h(j),A)),!a(A))return A},r(f,null,O)},E=function(k,C,O){var P=m(O,C-1),j=m(O,C+1);return p(w,k)&&!p(x,j)||p(x,k)&&!p(w,P)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,P){var j=l(arguments),A=r(S?N:f,null,j);return _&&typeof A=="string"?v(A,b,E):A}}),d7}var p7={},m7;function Eje(){if(m7)return p7;m7=1;var t=Te(),e=yh(),r=rt(),n=xb(),i=_i(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),p7}var g7;function qoe(){return g7||(g7=1,xje(),wje(),Sje(),Foe(),Eje()),LH}var y7={},v7;function Loe(){if(v7)return y7;v7=1;var t=Xt();return t("asyncDispose"),y7}var b7={},x7;function Nje(){if(x7)return b7;x7=1;var t=Xt();return t("asyncIterator"),b7}var w7={},S7;function Boe(){if(S7)return w7;S7=1;var t=Xt();return t("dispose"),w7}var _7={},E7;function Cje(){if(E7)return _7;E7=1;var t=Xt();return t("hasInstance"),_7}var N7={},C7;function kje(){if(C7)return N7;C7=1;var t=Xt();return t("isConcatSpreadable"),N7}var k7={},T7;function zoe(){if(T7)return k7;T7=1;var t=Xt();return t("iterator"),k7}var O7={},j7;function Tje(){if(j7)return O7;j7=1;var t=Xt();return t("match"),O7}var P7={},I7;function Oje(){if(I7)return P7;I7=1;var t=Xt();return t("matchAll"),P7}var R7={},M7;function jje(){if(M7)return R7;M7=1;var t=Xt();return t("replace"),R7}var A7={},D7;function Pje(){if(D7)return A7;D7=1;var t=Xt();return t("search"),A7}var $7={},F7;function Ije(){if(F7)return $7;F7=1;var t=Xt();return t("species"),$7}var q7={},L7;function Rje(){if(L7)return q7;L7=1;var t=Xt();return t("split"),q7}var B7={},z7;function Voe(){if(z7)return B7;z7=1;var t=Xt(),e=Aoe();return t("toPrimitive"),e(),B7}var V7={},U7;function Mje(){if(U7)return V7;U7=1;var t=Si(),e=Xt(),r=tu();return e("toStringTag"),r(t("Symbol"),"Symbol"),V7}var H7={},W7;function Aje(){if(W7)return H7;W7=1;var t=Xt();return t("unscopables"),H7}var K7={},G7;function Dje(){if(G7)return K7;G7=1;var t=zt(),e=tu();return e(t.JSON,"JSON",!0),K7}var vk,Y7;function $je(){if(Y7)return vk;Y7=1,Moe(),qoe(),Loe(),Nje(),Boe(),Cje(),kje(),zoe(),Tje(),Oje(),jje(),Pje(),Ije(),Rje(),Voe(),Mje(),Aje(),Dje();var t=wt();return vk=t.Symbol,vk}var Q7={},bk,X7;function JA(){return X7||(X7=1,bk=function(){}),bk}var xk,J7;function Nh(){return J7||(J7=1,xk={}),xk}var wk,Z7;function Fje(){if(Z7)return wk;Z7=1;var t=mr(),e=ln(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return wk={EXISTS:i,PROPER:s,CONFIGURABLE:o},wk}var Sk,eW;function Uoe(){if(eW)return Sk;eW=1;var t=rt();return Sk=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Sk}var _k,tW;function Nb(){if(tW)return _k;tW=1;var t=ln(),e=Qr(),r=_i(),n=Sb(),i=Uoe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return _k=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},_k}var Ek,rW;function Hoe(){if(rW)return Ek;rW=1;var t=rt(),e=Qr(),r=Xr(),n=Im(),i=Nb(),s=Rm(),o=Tr(),a=bh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),Ek={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},Ek}var Nk,nW;function qje(){if(nW)return Nk;nW=1;var t=Hoe().IteratorPrototype,e=Im(),r=Cm(),n=tu(),i=Nh(),s=function(){return this};return Nk=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},Nk}var Ck,iW;function Lje(){if(iW)return Ck;iW=1;var t=st(),e=zo();return Ck=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},Ck}var kk,sW;function Bje(){if(sW)return kk;sW=1;var t=Xr();return kk=function(e){return t(e)||e===null},kk}var Tk,oW;function zje(){if(oW)return Tk;oW=1;var t=Bje(),e=String,r=TypeError;return Tk=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},Tk}var Ok,aW;function Vje(){if(aW)return Ok;aW=1;var t=Lje(),e=Xr(),r=Bo(),n=zje();return Ok=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),Ok}var jk,lW;function ZA(){if(lW)return jk;lW=1;var t=Te(),e=ai(),r=bh(),n=Fje(),i=Qr(),s=qje(),o=Nb(),a=Vje(),l=tu(),c=wh(),d=Rm(),h=Tr(),f=Nh(),p=Hoe(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return jk=function(N,E,k,C,O,P,j){s(k,E,C);var A=function(Ce){if(Ce===O&&H)return H;if(!y&&Ce&&Ce in L)return L[Ce];switch(Ce){case w:return function(){return new k(this,Ce)};case x:return function(){return new k(this,Ce)};case S:return function(){return new k(this,Ce)}}return function(){return new k(this)}},$=E+" Iterator",I=!1,L=N.prototype,F=L[b]||L["@@iterator"]||O&&L[O],H=!y&&F||A(O),G=E==="Array"&&L.entries||F,K,ue,Ae;if(G&&(K=o(G.call(new N)),K!==Object.prototype&&K.next&&(!r&&o(K)!==v&&(a?a(K,v):i(K[b])||d(K,b,_)),l(K,$,!0,!0),r&&(f[$]=_))),m&&O===x&&F&&F.name!==x&&(!r&&g?c(L,"name",x):(I=!0,H=function(){return e(F,this)})),O)if(ue={values:A(x),keys:P?H:A(w),entries:A(S)},j)for(Ae in ue)(y||I||!(Ae in L))&&d(L,Ae,ue[Ae]);else t({target:E,proto:!0,forced:y||I},ue);return(!r||j)&&L[b]!==H&&d(L,b,H,{name:O}),f[E]=H,ue},jk}var Pk,cW;function eD(){return cW||(cW=1,Pk=function(t,e){return{value:t,done:e}}),Pk}var Ik,uW;function Ch(){if(uW)return Ik;uW=1;var t=vs(),e=JA(),r=Nh(),n=ru(),i=Ki().f,s=ZA(),o=eD(),a=bh(),l=mr(),c="Array Iterator",d=n.set,h=n.getterFor(c);Ik=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return Ik}var Rk,dW;function Uje(){return dW||(dW=1,Rk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Rk}var hW;function kh(){if(hW)return Q7;hW=1,Ch();var t=Uje(),e=zt(),r=tu(),n=Nh();for(var i in t)r(e[i],i),n[i]=n.Array;return Q7}var Mk,fW;function Woe(){if(fW)return Mk;fW=1;var t=$je();return kh(),Mk=t,Mk}var Ak,pW;function Hje(){return pW||(pW=1,Ak=Woe()),Ak}var Wje=Hje(),Kje=qe(Wje),mW={},gW;function Gje(){if(gW)return mW;gW=1;var t=Te(),e=eu(),r=Roe(),n=Xr(),i=bb(),s=Vo(),o=vs(),a=wb(),l=Tr(),c=Pm(),d=_h(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,N,E;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in b&&a(N,E,b[x]);return N.length=E,N}}),mW}var Dk,yW;function Yje(){if(yW)return Dk;yW=1,Gje();var t=cn();return Dk=t("Array","slice"),Dk}var $k,vW;function Qje(){if(vW)return $k;vW=1;var t=kr(),e=Yje(),r=Array.prototype;return $k=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},$k}var Fk,bW;function Xje(){if(bW)return Fk;bW=1;var t=Qje();return Fk=t,Fk}var qk,xW;function Jje(){return xW||(xW=1,qk=Xje()),qk}var Zje=Jje(),Ps=qe(Zje),Lk,wW;function ePe(){if(wW)return Lk;wW=1;var t=Si(),e=st(),r=_b(),n=xb(),i=Hs(),s=e([].concat);return Lk=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},Lk}var SW={},_W;function tPe(){if(_W)return SW;_W=1;var t=Te(),e=eu();return t({target:"Array",stat:!0},{isArray:e}),SW}var Bk,EW;function rPe(){if(EW)return Bk;EW=1,tPe();var t=wt();return Bk=t.Array.isArray,Bk}var zk,NW;function nPe(){if(NW)return zk;NW=1;var t=rPe();return zk=t,zk}var Vk,CW;function iPe(){return CW||(CW=1,Vk=nPe()),Vk}var sPe=iPe(),cr=qe(sPe),kW={},TW;function oPe(){if(TW)return kW;TW=1;var t=Te(),e=gl().map,r=Pm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),kW}var Uk,OW;function aPe(){if(OW)return Uk;OW=1,oPe();var t=cn();return Uk=t("Array","map"),Uk}var Hk,jW;function lPe(){if(jW)return Hk;jW=1;var t=kr(),e=aPe(),r=Array.prototype;return Hk=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},Hk}var Wk,PW;function cPe(){if(PW)return Wk;PW=1;var t=lPe();return Wk=t,Wk}var Kk,IW;function uPe(){return IW||(IW=1,Kk=cPe()),Kk}var dPe=uPe(),Hd=qe(dPe),RW={},MW;function hPe(){if(MW)return RW;MW=1;var t=Te(),e=_i(),r=jm(),n=rt(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),RW}var Gk,AW;function fPe(){if(AW)return Gk;AW=1,hPe();var t=wt();return Gk=t.Object.keys,Gk}var Yk,DW;function pPe(){if(DW)return Yk;DW=1;var t=fPe();return Yk=t,Yk}var Qk,$W;function mPe(){return $W||($W=1,Qk=pPe()),Qk}var gPe=mPe(),sr=qe(gPe),FW={},qW;function yPe(){if(qW)return FW;qW=1;var t=Te(),e=st(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),FW}var Xk,LW;function vPe(){if(LW)return Xk;LW=1,yPe();var t=wt();return Xk=t.Date.now,Xk}var Jk,BW;function bPe(){if(BW)return Jk;BW=1;var t=vPe();return Jk=t,Jk}var Zk,zW;function xPe(){return zW||(zW=1,Zk=bPe()),Zk}var wPe=xPe(),Xv=qe(wPe),VW={},e2,UW;function Th(){if(UW)return e2;UW=1;var t=rt();return e2=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},e2}var t2,HW;function SPe(){if(HW)return t2;HW=1;var t=gl().forEach,e=Th(),r=e("forEach");return t2=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},t2}var WW;function _Pe(){if(WW)return VW;WW=1;var t=Te(),e=SPe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),VW}var r2,KW;function EPe(){if(KW)return r2;KW=1,_Pe();var t=cn();return r2=t("Array","forEach"),r2}var n2,GW;function NPe(){if(GW)return n2;GW=1;var t=EPe();return n2=t,n2}var i2,YW;function CPe(){if(YW)return i2;YW=1;var t=Eh(),e=ln(),r=kr(),n=NPe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return i2=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},i2}var s2,QW;function kPe(){return QW||(QW=1,s2=CPe()),s2}var TPe=kPe(),Nt=qe(TPe),XW={},JW;function OPe(){if(JW)return XW;JW=1;var t=Te(),e=st(),r=eu(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),XW}var o2,ZW;function jPe(){if(ZW)return o2;ZW=1,OPe();var t=cn();return o2=t("Array","reverse"),o2}var a2,e9;function PPe(){if(e9)return a2;e9=1;var t=kr(),e=jPe(),r=Array.prototype;return a2=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},a2}var l2,t9;function IPe(){if(t9)return l2;t9=1;var t=PPe();return l2=t,l2}var c2,r9;function RPe(){return r9||(r9=1,c2=IPe()),c2}var MPe=RPe(),ac=qe(MPe),n9={},u2,i9;function APe(){if(i9)return u2;i9=1;var t=mr(),e=eu(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return u2=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},u2}var d2,s9;function Koe(){if(s9)return d2;s9=1;var t=vh(),e=TypeError;return d2=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},d2}var o9;function DPe(){if(o9)return n9;o9=1;var t=Te(),e=_i(),r=bb(),n=Sh(),i=Vo(),s=APe(),o=Ioe(),a=GA(),l=wb(),c=Koe(),d=Pm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,N,E,k,C;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),N=a(y,_),E=0;E<_;E++)k=w+E,k in y&&l(N,E,y[k]);if(N.length=_,S<_){for(E=w;E<b-_;E++)k=E+_,C=E+S,k in y?y[C]=y[k]:c(y,C);for(E=b;E>b-_+S;E--)c(y,E-1)}else if(S>_)for(E=b-_;E>w;E--)k=E+_-1,C=E+S-1,k in y?y[C]=y[k]:c(y,C);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,b-_+S),N}}),n9}var h2,a9;function $Pe(){if(a9)return h2;a9=1,DPe();var t=cn();return h2=t("Array","splice"),h2}var f2,l9;function FPe(){if(l9)return f2;l9=1;var t=kr(),e=$Pe(),r=Array.prototype;return f2=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},f2}var p2,c9;function qPe(){if(c9)return p2;c9=1;var t=FPe();return p2=t,p2}var m2,u9;function LPe(){return u9||(u9=1,m2=qPe()),m2}var BPe=LPe(),wo=qe(BPe),d9={},h9;function zPe(){if(h9)return d9;h9=1;var t=Te(),e=UA().includes,r=rt(),n=JA(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),d9}var g2,f9;function VPe(){if(f9)return g2;f9=1,zPe();var t=cn();return g2=t("Array","includes"),g2}var p9={},y2,m9;function UPe(){if(m9)return y2;m9=1;var t=Xr(),e=Us(),r=Tr(),n=r("match");return y2=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},y2}var v2,g9;function HPe(){if(g9)return v2;g9=1;var t=UPe(),e=TypeError;return v2=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},v2}var b2,y9;function WPe(){if(y9)return b2;y9=1;var t=Tr(),e=t("match");return b2=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},b2}var v9;function KPe(){if(v9)return p9;v9=1;var t=Te(),e=st(),r=HPe(),n=Bo(),i=Gi(),s=WPe(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),p9}var x2,b9;function GPe(){if(b9)return x2;b9=1,KPe();var t=cn();return x2=t("String","includes"),x2}var w2,x9;function YPe(){if(x9)return w2;x9=1;var t=kr(),e=VPe(),r=GPe(),n=Array.prototype,i=String.prototype;return w2=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},w2}var S2,w9;function QPe(){if(w9)return S2;w9=1;var t=YPe();return S2=t,S2}var _2,S9;function XPe(){return S9||(S9=1,_2=QPe()),_2}var JPe=XPe(),Wa=qe(JPe),_9={},E9;function ZPe(){if(E9)return _9;E9=1;var t=Te(),e=rt(),r=_i(),n=Nb(),i=Uoe(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),_9}var E2,N9;function eIe(){if(N9)return E2;N9=1,ZPe();var t=wt();return E2=t.Object.getPrototypeOf,E2}var N2,C9;function tIe(){if(C9)return N2;C9=1;var t=eIe();return N2=t,N2}var C2,k9;function rIe(){return k9||(k9=1,C2=tIe()),C2}var nIe=rIe(),T9=qe(nIe),k2,O9;function iIe(){if(O9)return k2;O9=1,Moe();var t=cn();return k2=t("Array","concat"),k2}var T2,j9;function sIe(){if(j9)return T2;j9=1;var t=kr(),e=iIe(),r=Array.prototype;return T2=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},T2}var O2,P9;function oIe(){if(P9)return O2;P9=1;var t=sIe();return O2=t,O2}var j2,I9;function aIe(){return I9||(I9=1,j2=oIe()),j2}var lIe=aIe(),cIe=qe(lIe),R9={},M9;function uIe(){if(M9)return R9;M9=1;var t=Te(),e=gl().filter,r=Pm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),R9}var P2,A9;function dIe(){if(A9)return P2;A9=1,uIe();var t=cn();return P2=t("Array","filter"),P2}var I2,D9;function hIe(){if(D9)return I2;D9=1;var t=kr(),e=dIe(),r=Array.prototype;return I2=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},I2}var R2,$9;function fIe(){if($9)return R2;$9=1;var t=hIe();return R2=t,R2}var M2,F9;function pIe(){return F9||(F9=1,M2=fIe()),M2}var mIe=pIe(),Kn=qe(mIe),q9={},A2,L9;function gIe(){if(L9)return A2;L9=1;var t=mr(),e=rt(),r=st(),n=Nb(),i=jm(),s=vs(),o=pb().f,a=r(o),l=r([].push),c=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=c&&n(p)===null,v=m.length,y=0,b=[],w;v>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(b,h?[w,p[w]]:p[w]);return b}};return A2={entries:d(!0),values:d(!1)},A2}var B9;function yIe(){if(B9)return q9;B9=1;var t=Te(),e=gIe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),q9}var D2,z9;function vIe(){if(z9)return D2;z9=1,yIe();var t=wt();return D2=t.Object.values,D2}var $2,V9;function bIe(){if(V9)return $2;V9=1;var t=vIe();return $2=t,$2}var F2,U9;function xIe(){return U9||(U9=1,F2=bIe()),F2}var wIe=xIe(),SIe=qe(wIe),H9={},q2,W9;function tD(){return W9||(W9=1,q2=`	
\v\f\r \u2028\u2029\uFEFF`),q2}var L2,K9;function Goe(){if(K9)return L2;K9=1;var t=st(),e=Bo(),r=Gi(),n=tD(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(c){var d=r(e(c));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return L2={start:a(1),end:a(2),trim:a(3)},L2}var B2,G9;function _Ie(){if(G9)return B2;G9=1;var t=zt(),e=rt(),r=st(),n=Gi(),i=Goe().trim,s=tD(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,c=/^[+-]?0x/i,d=r(c.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return B2=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(c,g)?16:10))}:o,B2}var Y9;function EIe(){if(Y9)return H9;Y9=1;var t=Te(),e=_Ie();return t({global:!0,forced:parseInt!==e},{parseInt:e}),H9}var z2,Q9;function NIe(){if(Q9)return z2;Q9=1,EIe();var t=wt();return z2=t.parseInt,z2}var V2,X9;function CIe(){if(X9)return V2;X9=1;var t=NIe();return V2=t,V2}var U2,J9;function kIe(){return J9||(J9=1,U2=CIe()),U2}var TIe=kIe(),ss=qe(TIe),Z9={},eK;function OIe(){if(eK)return Z9;eK=1;var t=Te(),e=LA(),r=UA().indexOf,n=Th(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var c=arguments.length>1?arguments[1]:void 0;return s?i(this,l,c)||0:r(this,l,c)}}),Z9}var H2,tK;function jIe(){if(tK)return H2;tK=1,OIe();var t=cn();return H2=t("Array","indexOf"),H2}var W2,rK;function PIe(){if(rK)return W2;rK=1;var t=kr(),e=jIe(),r=Array.prototype;return W2=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},W2}var K2,nK;function IIe(){if(nK)return K2;nK=1;var t=PIe();return K2=t,K2}var G2,iK;function RIe(){return iK||(iK=1,G2=IIe()),G2}var MIe=RIe(),vt=qe(MIe),sK={},oK;function AIe(){if(oK)return sK;oK=1;var t=Te(),e=mr(),r=Im();return t({target:"Object",stat:!0,sham:!e},{create:r}),sK}var Y2,aK;function DIe(){if(aK)return Y2;aK=1,AIe();var t=wt(),e=t.Object;return Y2=function(n,i){return e.create(n,i)},Y2}var Q2,lK;function $Ie(){if(lK)return Q2;lK=1;var t=DIe();return Q2=t,Q2}var X2,cK;function FIe(){return cK||(cK=1,X2=$Ie()),X2}var qIe=FIe(),lc=qe(qIe),uK={},J2,dK;function LIe(){if(dK)return J2;dK=1;var t=Sh(),e=Gi(),r=Bo(),n=RangeError;return J2=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},J2}var Z2,hK;function BIe(){if(hK)return Z2;hK=1;var t=st(),e=Coe(),r=Gi(),n=LIe(),i=Bo(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return Z2={start:l(!1),end:l(!0)},Z2}var eT,fK;function zIe(){if(fK)return eT;fK=1;var t=st(),e=rt(),r=BIe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return eT=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,eT}var pK;function VIe(){if(pK)return uK;pK=1;var t=Te(),e=ai(),r=_i(),n=Soe(),i=zIe(),s=Us(),o=rt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),uK}var tT,mK;function UIe(){if(mK)return tT;mK=1,VIe(),Foe();var t=wt(),e=fb();return t.JSON||(t.JSON={stringify:JSON.stringify}),tT=function(n,i,s){return e(t.JSON.stringify,null,arguments)},tT}var rT,gK;function HIe(){if(gK)return rT;gK=1;var t=UIe();return rT=t,rT}var nT,yK;function WIe(){return yK||(yK=1,nT=HIe()),nT}var KIe=WIe(),Mm=qe(KIe),vK={},bK={},iT,xK;function Yoe(){if(xK)return iT;xK=1;var t=zt(),e=gh(),r=Us(),n=function(i){return e.slice(0,i.length)===i};return iT=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),iT}var sT,wK;function GIe(){if(wK)return sT;wK=1;var t=TypeError;return sT=function(e,r){if(e<r)throw new t("Not enough arguments");return e},sT}var oT,SK;function Qoe(){if(SK)return oT;SK=1;var t=zt(),e=fb(),r=Qr(),n=Yoe(),i=gh(),s=_h(),o=GIe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return oT=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?c(y,p):c(y)}:c},oT}var _K;function YIe(){if(_K)return bK;_K=1;var t=Te(),e=zt(),r=Qoe(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),bK}var EK={},NK;function QIe(){if(NK)return EK;NK=1;var t=Te(),e=zt(),r=Qoe(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),EK}var CK;function Xoe(){return CK||(CK=1,YIe(),QIe()),vK}var aT,kK;function XIe(){if(kK)return aT;kK=1,Xoe();var t=wt();return aT=t.setTimeout,aT}var lT,TK;function JIe(){return TK||(TK=1,lT=XIe()),lT}var ZIe=JIe(),So=qe(ZIe),OK={},cT,jK;function eRe(){if(jK)return cT;jK=1;var t=_i(),e=bb(),r=Vo();return cT=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,d=c===void 0?o:e(c,o);d>l;)s[l++]=i;return s},cT}var PK;function tRe(){if(PK)return OK;PK=1;var t=Te(),e=eRe(),r=JA();return t({target:"Array",proto:!0},{fill:e}),r("fill"),OK}var uT,IK;function rRe(){if(IK)return uT;IK=1,tRe();var t=cn();return uT=t("Array","fill"),uT}var dT,RK;function nRe(){if(RK)return dT;RK=1;var t=kr(),e=rRe(),r=Array.prototype;return dT=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},dT}var hT,MK;function iRe(){if(MK)return hT;MK=1;var t=nRe();return hT=t,hT}var fT,AK;function sRe(){return AK||(AK=1,fT=iRe()),fT}var oRe=sRe(),Am=qe(oRe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ps(){return ps=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ps.apply(this,arguments)}function Yi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Lg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var XI;typeof Object.assign!="function"?XI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:XI=Object.assign;var Mc=XI,DK=["","webkit","Moz","MS","ms","o"],aRe=typeof document>"u"?{style:{}}:document.createElement("div"),lRe="function",Vu=Math.round,Ac=Math.abs,rD=Date.now;function Cb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<DK.length;){if(r=DK[s],n=r?r+i:e,n in t)return n;s++}}var _o;typeof window>"u"?_o={}:_o=window;var Joe=Cb(aRe.style,"touchAction"),Zoe=Joe!==void 0;function cRe(){if(!Zoe)return!1;var t={},e=_o.CSS&&_o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?_o.CSS.supports("touch-action",r):!0}),t}var eae="compute",tae="auto",JI="manipulation",cc="none",Op="pan-x",jp="pan-y",Bg=cRe(),uRe=/mobile|tablet|ip(ad|hone|od)|android/i,rae="ontouchstart"in _o,dRe=Cb(_o,"PointerEvent")!==void 0,hRe=rae&&uRe.test(navigator.userAgent),Dm="touch",fRe="pen",nD="mouse",pRe="kinect",mRe=25,Dn=1,nu=2,Sr=4,ii=8,Jv=1,$m=2,Fm=4,qm=8,Wd=16,Ls=$m|Fm,uc=qm|Wd,nae=Ls|uc,iae=["x","y"],Zv=["clientX","clientY"];function Eo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function kb(t,e){return typeof t===lRe?t.apply(e&&e[0]||void 0,e):t}function Ll(t,e){return t.indexOf(e)>-1}function gRe(t){if(Ll(t,cc))return cc;var e=Ll(t,Op),r=Ll(t,jp);return e&&r?cc:e||r?e?Op:jp:Ll(t,JI)?JI:tae}var sae=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===eae&&(n=this.compute()),Zoe&&this.manager.element.style&&Bg[n]&&(this.manager.element.style[Joe]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Eo(this.manager.recognizers,function(i){kb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),gRe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Ll(o,cc)&&!Bg[cc],l=Ll(o,jp)&&!Bg[jp],c=Ll(o,Op)&&!Bg[Op];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&Ls||c&&s&uc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function iD(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function oae(t){var e=t.length;if(e===1)return{x:Vu(t[0].clientX),y:Vu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Vu(r/e),y:Vu(n/e)}}function $K(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Vu(t.pointers[r].clientX),clientY:Vu(t.pointers[r].clientY)},r++;return{timeStamp:rD(),pointers:e,center:oae(e),deltaX:t.deltaX,deltaY:t.deltaY}}function e0(t,e,r){r||(r=iae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function ZI(t,e,r){r||(r=iae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function aae(t,e){return t===e?Jv:Ac(t)>=Ac(e)?t<0?$m:Fm:e<0?qm:Wd}function yRe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Dn||s.eventType===Sr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function lae(t,e,r){return{x:e/t||0,y:r/t||0}}function vRe(t,e){return e0(e[0],e[1],Zv)/e0(t[0],t[1],Zv)}function bRe(t,e){return ZI(e[1],e[0],Zv)+ZI(t[1],t[0],Zv)}function xRe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ii&&(n>mRe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=lae(n,l,c);s=d.x,o=d.y,i=Ac(d.x)>Ac(d.y)?d.x:d.y,a=aae(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function wRe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=$K(e)),i>1&&!r.firstMultiple?r.firstMultiple=$K(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=oae(n);e.timeStamp=rD(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=ZI(a,l),e.distance=e0(a,l),yRe(r,e),e.offsetDirection=aae(e.deltaX,e.deltaY);var c=lae(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Ac(c.x)>Ac(c.y)?c.x:c.y,e.scale=o?vRe(o.pointers,n):1,e.rotation=o?bRe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,xRe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,iD(f,d)&&(d=f),e.target=d}function SRe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Dn&&n-i===0,o=e&(Sr|ii)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,wRe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Pp(t){return t.trim().split(/\s+/g)}function qf(t,e,r){Eo(Pp(e),function(n){t.addEventListener(n,r,!1)})}function Lf(t,e,r){Eo(Pp(e),function(n){t.removeEventListener(n,r,!1)})}function FK(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Oh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){kb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&qf(this.element,this.evEl,this.domHandler),this.evTarget&&qf(this.target,this.evTarget,this.domHandler),this.evWin&&qf(FK(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Lf(this.element,this.evEl,this.domHandler),this.evTarget&&Lf(this.target,this.evTarget,this.domHandler),this.evWin&&Lf(FK(this.element),this.evWin,this.domHandler)},t}();function Dc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var _Re={pointerdown:Dn,pointermove:nu,pointerup:Sr,pointercancel:ii,pointerout:ii},ERe={2:Dm,3:fRe,4:nD,5:pRe},cae="pointerdown",uae="pointermove pointerup pointercancel";_o.MSPointerEvent&&!_o.PointerEvent&&(cae="MSPointerDown",uae="MSPointerMove MSPointerUp MSPointerCancel");var dae=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=cae,i.evWin=uae,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=_Re[a],c=ERe[i.pointerType]||i.pointerType,d=c===Dm,h=Dc(s,i.pointerId,"pointerId");l&Dn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(Sr|ii)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(Oh);function Ip(t){return Array.prototype.slice.call(t,0)}function sD(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Dc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var NRe={touchstart:Dn,touchmove:nu,touchend:Sr,touchcancel:ii},CRe="touchstart touchmove touchend touchcancel",oD=function(t){Yi(e,t);function e(){var n;return e.prototype.evTarget=CRe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=NRe[i.type],o=kRe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Dm,srcEvent:i})},e}(Oh);function kRe(t,e){var r=Ip(t.touches),n=this.targetIds;if(e&(Dn|nu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Ip(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return iD(c.target,l)}),e===Dn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(Sr|ii)&&delete n[o[i].identifier],i++;if(a.length)return[sD(s.concat(a),"identifier",!0),a]}var TRe={mousedown:Dn,mousemove:nu,mouseup:Sr},ORe="mousedown",jRe="mousemove mouseup",aD=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=ORe,i.evWin=jRe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=TRe[i.type];s&Dn&&i.button===0&&(this.pressed=!0),s&nu&&i.which!==1&&(s=Sr),this.pressed&&(s&Sr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:nD,srcEvent:i}))},e}(Oh),PRe=2500,qK=25;function LK(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,PRe)}}function IRe(t,e){t&Dn?(this.primaryTouch=e.changedPointers[0].identifier,LK.call(this,e)):t&(Sr|ii)&&LK.call(this,e)}function RRe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=qK&&o<=qK)return!0}return!1}var hae=function(){var t=function(e){Yi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===Dm,h=c.pointerType===nD;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)IRe.call(Lg(Lg(o)),l,c);else if(h&&RRe.call(Lg(Lg(o)),c))return;o.callback(a,l,c)}},o.touch=new oD(o.manager,o.handler),o.mouse=new aD(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Oh);return t}();function MRe(t){var e,r=t.options.inputClass;return r?e=r:dRe?e=dae:hRe?e=oD:rae?e=hae:e=aD,new e(t,SRe)}function Uu(t,e,r){return Array.isArray(t)?(Eo(t,r[e],r),!0):!1}var fy=1,zi=2,Kd=4,Ka=8,No=Ka,Rp=16,Rs=32,ARe=1;function DRe(){return ARe++}function zg(t,e){var r=e.manager;return r?r.get(t):t}function BK(t){return t&Rp?"cancel":t&Ka?"end":t&Kd?"move":t&zi?"start":""}var Lm=function(){function t(r){r===void 0&&(r={}),this.options=ps({enable:!0},r),this.id=DRe(),this.manager=null,this.state=fy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Mc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Uu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=zg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Uu(n,"dropRecognizeWith",this)?this:(n=zg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Uu(n,"requireFailure",this))return this;var i=this.requireFail;return n=zg(n,this),Dc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Uu(n,"dropRequireFailure",this))return this;n=zg(n,this);var i=Dc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ka&&o(i.options.event+BK(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ka&&o(i.options.event+BK(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Rs},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Rs|fy)))return!1;n++}return!0},e.recognize=function(n){var i=Mc({},n);if(!kb(this.options.enable,[this,i])){this.reset(),this.state=Rs;return}this.state&(No|Rp|Rs)&&(this.state=fy),this.state=this.process(i),this.state&(zi|Kd|Ka|Rp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),eR=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[JI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Dn&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==Sr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||e0(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=No,s.tryEmit()},o.interval),zi):No}return Rs},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Rs},this.options.interval),Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===No&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Lm),Gd=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(zi|Kd),l=this.attrTest(i);return a&&(o&ii||!l)?s|Rp:a||l?o&Sr?s|Ka:s&zi?s|Kd:zi:Rs},e}(Lm);function fae(t){return t===Wd?"down":t===qm?"up":t===$m?"left":t===Fm?"right":""}var lD=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"pan",threshold:10,pointers:1,direction:nae},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Ls&&s.push(jp),i&uc&&s.push(Op),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Ls?(l=c===0?Jv:c<0?$m:Fm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Jv:d<0?qm:Wd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Gd.prototype.attrTest.call(this,i)&&(this.state&zi||!(this.state&zi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=fae(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Gd),pae=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"swipe",threshold:10,velocity:.3,direction:Ls|uc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return lD.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Ls|uc)?o=i.overallVelocity:s&Ls?o=i.overallVelocityX:s&uc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Ac(o)>this.options.velocity&&i.eventType&Sr},r.emit=function(i){var s=fae(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Gd),mae=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[cc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&zi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Gd),gae=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[cc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&zi)},e}(Gd),yae=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[tae]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Sr|ii)&&!c)this.reset();else if(i.eventType&Dn)this.reset(),this._timer=setTimeout(function(){s.state=No,s.tryEmit()},o.time);else if(i.eventType&Sr)return No;return Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===No&&(i&&i.eventType&Sr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=rD(),this.manager.emit(this.options.event,this._input)))},e}(Lm),vae={domEvents:!1,touchAction:eae,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},zK=[[gae,{enable:!1}],[mae,{enable:!1},["rotate"]],[pae,{direction:Ls}],[lD,{direction:Ls},["swipe"]],[eR],[eR,{event:"doubletap",taps:2},["tap"]],[yae]],$Re=1,VK=2;function UK(t,e){var r=t.element;if(r.style){var n;Eo(t.options.cssProps,function(i,s){n=Cb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function FRe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var HK=function(){function t(r,n){var i=this;this.options=Mc({},vae,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=MRe(this),this.touchAction=new sae(this,this.options.touchAction),UK(this,!0),Eo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Mc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?VK:$Re},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&No)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==VK&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(zi|Kd|Ka)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Lm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Uu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Uu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Dc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return Eo(Pp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return Eo(Pp(n),function(o){i?s[o]&&s[o].splice(Dc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&FRe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&UK(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),qRe={touchstart:Dn,touchmove:nu,touchend:Sr,touchcancel:ii},LRe="touchstart",BRe="touchstart touchmove touchend touchcancel",zRe=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evTarget=LRe,i.evWin=BRe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=qRe[i.type];if(s===Dn&&(this.started=!0),!!this.started){var o=VRe.call(this,i,s);s&(Sr|ii)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Dm,srcEvent:i})}},e}(Oh);function VRe(t,e){var r=Ip(t.touches),n=Ip(t.changedTouches);return e&(Sr|ii)&&(r=sD(r.concat(n),"identifier",!0)),[r,n]}function bae(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var xae=bae(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),URe=bae(function(t,e){return xae(t,e,!0)},"merge","Use `assign`.");function HRe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Mc(i,r)}function WK(t,e){return function(){return t.apply(e,arguments)}}var wae=function(){var t=function(r,n){return n===void 0&&(n={}),new HK(r,ps({recognizers:zK.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=nae,t.DIRECTION_DOWN=Wd,t.DIRECTION_LEFT=$m,t.DIRECTION_RIGHT=Fm,t.DIRECTION_UP=qm,t.DIRECTION_HORIZONTAL=Ls,t.DIRECTION_VERTICAL=uc,t.DIRECTION_NONE=Jv,t.DIRECTION_DOWN=Wd,t.INPUT_START=Dn,t.INPUT_MOVE=nu,t.INPUT_END=Sr,t.INPUT_CANCEL=ii,t.STATE_POSSIBLE=fy,t.STATE_BEGAN=zi,t.STATE_CHANGED=Kd,t.STATE_ENDED=Ka,t.STATE_RECOGNIZED=No,t.STATE_CANCELLED=Rp,t.STATE_FAILED=Rs,t.Manager=HK,t.Input=Oh,t.TouchAction=sae,t.TouchInput=oD,t.MouseInput=aD,t.PointerEventInput=dae,t.TouchMouseInput=hae,t.SingleTouchInput=zRe,t.Recognizer=Lm,t.AttrRecognizer=Gd,t.Tap=eR,t.Pan=lD,t.Swipe=pae,t.Pinch=mae,t.Rotate=gae,t.Press=yae,t.on=qf,t.off=Lf,t.each=Eo,t.merge=URe,t.extend=xae,t.bindFn=WK,t.assign=Mc,t.inherit=HRe,t.bindFn=WK,t.prefixed=Cb,t.toArray=Ip,t.inArray=Dc,t.uniqueArray=sD,t.splitStr=Pp,t.boolOrFn=kb,t.hasParent=iD,t.addEventListeners=qf,t.removeEventListeners=Lf,t.defaults=Mc({},vae,{preset:zK}),t}();wae.defaults;Kje("DELETE");function Tb(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return WRe(e.length?e:[Xv()])}function WRe(t){let[e,r,n]=KRe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function KRe(){const t=GRe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function GRe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function YRe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const cD=typeof window<"u"?window.Hammer||wae:function(){return YRe()};function Ms(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=cD(this._dom.overlay);r.on("tap",ne(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Nt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{QRe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}Poe(Ms.prototype);Ms.current=null;Ms.prototype.destroy=function(){this.deactivate();for(const r of ac(t=wo(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Ms.prototype.activate=function(){Ms.current&&Ms.current.deactivate(),Ms.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Ms.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Ms.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function QRe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const XRe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,JRe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ZRe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,eMe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function sa(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(sa(e),t.removeChild(e))}}function rd(t){return t instanceof String||typeof t=="string"}function KK(t){return typeof t=="object"&&t!==null}function $c(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function Sae(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")$c(t,e,n,r);else{const i=t[n],s=e[n];KK(i)&&KK(s)&&Sae(i,s,r)}}function jh(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(cr(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Ot(e[s],r[s],!1,n):$c(e,r,s,n);else{if(cr(r[s]))throw new TypeError("Arrays are not supported by deepExtend");$c(e,r,s,n)}}return e}function t0(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(cr(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Wa(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?Ot(e[i],r[i]):$c(e,r,i,n);else if(cr(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else $c(e,r,i,n);return e}function Ot(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&T9(e[s])===Object.prototype)t[s]===void 0?t[s]=Ot({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&T9(t[s])===Object.prototype?Ot(t[s],e[s],r):$c(t,e,s,n);else if(cr(e[s])){var i;t[s]=Ps(i=e[s]).call(i)}else $c(t,e,s,n);return t}function r0(t,e){return[...t,e]}function tMe(t){return Ps(t).call(t)}function rMe(t){return t.getBoundingClientRect().left}function nMe(t){return t.getBoundingClientRect().top}function Xe(t,e){if(cr(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function uD(t){let e;switch(t.length){case 3:case 4:return e=JRe.exec(t),e?{r:ss(e[1]+e[1],16),g:ss(e[2]+e[2],16),b:ss(e[3]+e[3],16)}:null;case 6:case 7:return e=XRe.exec(t),e?{r:ss(e[1],16),g:ss(e[2],16),b:ss(e[3],16)}:null;default:return null}}function Di(t,e){if(Wa(t).call(t,"rgba"))return t;if(Wa(t).call(t,"rgb")){const r=t.substr(vt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=uD(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function _ae(t,e,r){var n;return"#"+Ps(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function tR(t,e){if(rd(t)){let n=t;if(Nae(n)){var r;const i=Hd(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return ss(s)});n=_ae(i[0],i[1],i[2])}if(Eae(n)===!0){const i=iMe(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=rR(o.h,o.s,o.v),l=rR(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:rd(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:rd(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function mf(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function py(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),c=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=c,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=c,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function rR(t,e,r){const n=py(t,e,r);return _ae(n.r,n.g,n.b)}function iMe(t){const e=uD(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return mf(e.r,e.g,e.b)}function Eae(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function Nae(t){return ZRe.test(t)}function sMe(t){return eMe.test(t)}function Ga(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=lc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Ga(t[r]));return e}function Pi(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const v=m[g],y=p[g];for(const b in v)Object.prototype.hasOwnProperty.call(v,b)&&(y[b]=v[b])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=lc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const oMe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function oa(t,e){let r;cr(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const aMe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let lMe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return aMe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),rd(e)===!0){if(Nae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(sMe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(Eae(e)===!0){const s=uD(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Mm(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=wr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",So(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=wr({},e)),this.color=e;const n=mf(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=mf(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=py(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=mf(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Am(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=ne(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=ne(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=ne(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=ne(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new cD(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,c=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=py(o*c,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,c=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*d+s,f=Math.sin(c)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=c/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=mf(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const v=py(g.h,g.s,g.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function nR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(nR(...Ps(e).call(e,1))),n}}let cMe=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},wr(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new lMe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(cr(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Kn(e)!==void 0&&(this.options.filter=Kn(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Kn(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Kn(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||vt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Nt(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(nR("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&vt(e).call(e,r)!==-1&&(s=vt(e).call(e,r));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],i.appendChild(c)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,c="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,c="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,c="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);c!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=So(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=So(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Kn(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],c=r0(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!cr(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(c);if(cr(l))this._handleArray(l,d,c);else if(typeof l=="string")this._makeTextInput(l,d,c);else if(typeof l=="boolean")this._makeCheckbox(l,d,c);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=r0(c,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(nR("pre","const options = "+Mm(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},uMe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=ss(e),this.y=ss(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-r<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},nf=!1,GK;const iR="background: #FFeeee; color: #dd0000";let dMe=class tr{static validate(e,r,n){nf=!1,GK=r;let i=r;return n!==void 0&&(i=r[n]),tr.parse(e,i,[]),nf}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&tr.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){tr.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=tr.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),tr.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+tr.printLocation(o,e),iR)},l=tr.getType(r[e]),c=s[l];c!==void 0?tr.getType(c)==="array"&&vt(c).call(c,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+tr.print(c)+' not "'+r[e]+'". '),nf=!0):l==="object"&&i!=="__any__"&&(o=r0(o,e),tr.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+tr.print(sr(s))+". Received ["+l+'] "'+r[e]+'"'),nf=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":cr(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=tr.findInOptions(e,r,n,!1),s=tr.findInOptions(e,GK,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+tr.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+tr.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+tr.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+tr.printLocation(i.path,e):l=". Did you mean one of these: "+tr.print(sr(r))+tr.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,iR),nf=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=tr.findInOptions(e,r[h],r0(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,c=p.indexMatch)}else{var d;vt(d=h.toLowerCase()).call(d,l)!==-1&&(c=h),f=tr.levenshteinDistance(e,h),s>f&&(o=h,a=tMe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return Mm(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const hMe=Ms,fMe=cMe,nd=cD,pMe=uMe,Cae=iR,mMe=dMe;function gMe(t){return Ta=t,xMe()}var kae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},dD=lc(kae);dD.color="color.color";dD.style="dashes";var Cn={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},YK={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Ta="",Yd=0,Ke="",Re="",Un=Cn.NULL;function yMe(){Yd=0,Ke=Ta.charAt(0)}function Fr(){Yd++,Ke=Ta.charAt(Yd)}function vu(){return Ta.charAt(Yd+1)}function QK(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function tl(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function vMe(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function Tae(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=tl(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),vt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=tl(i.attr,e.attr))}function bMe(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=tl({},t.edge);e.attr=tl(r,e.attr)}}function Oae(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=tl({},t.edge)),s.attr=tl(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Pt(){for(Un=Cn.NULL,Re="";Ke===" "||Ke==="	"||Ke===`
`||Ke==="\r";)Fr();do{var t=!1;if(Ke==="#"){for(var e=Yd-1;Ta.charAt(e)===" "||Ta.charAt(e)==="	";)e--;if(Ta.charAt(e)===`
`||Ta.charAt(e)===""){for(;Ke!=""&&Ke!=`
`;)Fr();t=!0}}if(Ke==="/"&&vu()==="/"){for(;Ke!=""&&Ke!=`
`;)Fr();t=!0}if(Ke==="/"&&vu()==="*"){for(;Ke!="";)if(Ke==="*"&&vu()==="/"){Fr(),Fr();break}else Fr();t=!0}for(;Ke===" "||Ke==="	"||Ke===`
`||Ke==="\r";)Fr()}while(t);if(Ke===""){Un=Cn.DELIMITER;return}var r=Ke+vu();if(YK[r]){Un=Cn.DELIMITER,Re=r,Fr(),Fr();return}if(YK[Ke]){Un=Cn.DELIMITER,Re=Ke,Fr();return}if(QK(Ke)||Ke==="-"){for(Re+=Ke,Fr();QK(Ke);)Re+=Ke,Fr();Re==="false"?Re=!1:Re==="true"?Re=!0:isNaN(Number(Re))||(Re=Number(Re)),Un=Cn.IDENTIFIER;return}if(Ke==='"'){for(Fr();Ke!=""&&(Ke!='"'||Ke==='"'&&vu()==='"');)Ke==='"'?(Re+=Ke,Fr()):Ke==="\\"&&vu()==="n"?(Re+=`
`,Fr()):Re+=Ke,Fr();if(Ke!='"')throw kn('End of string " expected');Fr(),Un=Cn.IDENTIFIER;return}for(Un=Cn.UNKNOWN;Ke!="";)Re+=Ke,Fr();throw new SyntaxError('Syntax error in part "'+Rae(Re,30)+'"')}function xMe(){var t={};if(yMe(),Pt(),Re==="strict"&&(t.strict=!0,Pt()),(Re==="graph"||Re==="digraph")&&(t.type=Re,Pt()),Un===Cn.IDENTIFIER&&(t.id=Re,Pt()),Re!="{")throw kn("Angle bracket { expected");if(Pt(),jae(t),Re!="}")throw kn("Angle bracket } expected");if(Pt(),Re!=="")throw kn("End of file expected");return Pt(),delete t.node,delete t.edge,delete t.graph,t}function jae(t){for(;Re!==""&&Re!="}";)wMe(t),Re===";"&&Pt()}function wMe(t){var e=Pae(t);if(e){Iae(t,e);return}var r=SMe(t);if(!r){if(Un!=Cn.IDENTIFIER)throw kn("Identifier expected");var n=Re;if(Pt(),Re==="="){if(Pt(),Un!=Cn.IDENTIFIER)throw kn("Identifier expected");t[n]=Re,Pt()}else _Me(t,n)}}function Pae(t){var e=null;if(Re==="subgraph"&&(e={},e.type="subgraph",Pt(),Un===Cn.IDENTIFIER&&(e.id=Re,Pt())),Re==="{"){if(Pt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,jae(e),Re!="}")throw kn("Angle bracket } expected");Pt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function SMe(t){return Re==="node"?(Pt(),t.node=Bf(),"node"):Re==="edge"?(Pt(),t.edge=Bf(),"edge"):Re==="graph"?(Pt(),t.graph=Bf(),"graph"):null}function _Me(t,e){var r={id:e},n=Bf();n&&(r.attr=n),Tae(t,r),Iae(t,e)}function Iae(t,e){for(;Re==="->"||Re==="--";){var r,n=Re;Pt();var i=Pae(t);if(i)r=i;else{if(Un!=Cn.IDENTIFIER)throw kn("Identifier or subgraph expected");r=Re,Tae(t,{id:r}),Pt()}var s=Bf(),o=Oae(t,e,r,n,s);bMe(t,o),e=r}}function Bf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Re==="[";){for(Pt(),e={};Re!==""&&Re!="]";){if(Un!=Cn.IDENTIFIER)throw kn("Attribute name expected");var o=Re;if(Pt(),Re!="=")throw kn("Equal sign = expected");if(Pt(),Un!=Cn.IDENTIFIER)throw kn("Attribute value expected");var a=Re;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),Pt(),Re==","&&Pt()}if(Re!="]")throw kn("Bracket ] expected");Pt()}if(Wa(s).call(s,"dir")){var c={};for(c.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)c.arrows.to=t;else if(i[t].value.from!=null)c.arrows.from=t;else throw kn("Invalid value of arrows");else i[t].name==="dir"&&(c.dir=t);var d=i[c.dir].value;if(!Wa(s).call(s,"arrows"))if(d==="both")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1,i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[c.dir].attr,name:"arrows",value:""}),c.arrows.to=i.length-1;else throw kn('Invalid dir type "'+d+'"');var h,f;if(d==="both")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},wo(i).call(i,c.arrows.from,1)):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="arrow",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")c.arrows.to&&c.arrows.from?(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f="",h="arrow",c.arrows.from=c.arrows.to,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{from:{enabled:!0,type:i[c.arrows.from].value.from.type}}};else if(d==="none"){var p;c.arrows.to?p=c.arrows.to:p=c.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h="",c.arrows.to=c.arrows.from,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:i[c.arrows.to].value.to.type}}};else throw kn('Invalid dir type "'+d+'"');wo(i).call(i,c.dir,1)}var m;if(Wa(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)vMe(i[t].attr,i[t].name,i[t].value);return e}function kn(t){return new SyntaxError(t+', got "'+Rae(Re,30)+'" (char '+Yd+")")}function Rae(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function EMe(t,e,r){cr(t)?Nt(t).call(t,function(n){cr(e)?Nt(e).call(e,function(i){r(n,i)}):r(n,e)}):cr(e)?Nt(e).call(e,function(n){r(t,n)}):r(t,e)}function pT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function XK(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];cr(i)?Nt(i).call(i,function(s){pT(r,s,t[n])}):typeof i=="string"?pT(r,i,t[n]):pT(r,n,t[n])}return r}function NMe(t){var e=gMe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;Nt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};tl(a,XK(o.attr,kae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return tl(a,XK(o.attr,dD)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};Nt(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var c;Nt(c=o.from.edges).call(c,function(h){var f=s(h);r.edges.push(f)})}if(EMe(a,l,function(h,f){var p=Oae(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;Nt(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function CMe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=Hd(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:Hd(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const kMe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},TMe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},OMe={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},jMe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},PMe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},IMe={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},RMe={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},MMe={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},AMe={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},DMe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},$Me={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var FMe=Object.freeze({__proto__:null,cn:MMe,cs:$Me,de:TMe,en:kMe,es:OMe,fr:DMe,it:jMe,nl:PMe,pt:IMe,ru:RMe,uk:AMe});function qMe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(cIe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class LMe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),c=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,c,s],[5*c,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class BMe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new LMe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var JK={},ZK={},mT={exports:{}},gT,eG;function zMe(){if(eG)return gT;eG=1;var t=rt();return gT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),gT}var yT,tG;function VMe(){if(tG)return yT;tG=1;var t=rt(),e=Xr(),r=Us(),n=zMe(),i=Object.isExtensible,s=t(function(){});return yT=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,yT}var vT,rG;function Mae(){if(rG)return vT;rG=1;var t=rt();return vT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),vT}var nG;function Ob(){if(nG)return mT.exports;nG=1;var t=Te(),e=st(),r=Om(),n=Xr(),i=ln(),s=Ki().f,o=_b(),a=QA(),l=VMe(),c=gb(),d=Mae(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),k=0,C=E.length;k<C;k++)if(E[k]===f){S(E,k,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=mT.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,mT.exports}var bT,iG;function UMe(){if(iG)return bT;iG=1;var t=Tr(),e=Nh(),r=t("iterator"),n=Array.prototype;return bT=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},bT}var xT,sG;function Aae(){if(sG)return xT;sG=1;var t=Eh(),e=BA(),r=mh(),n=Nh(),i=Tr(),s=i("iterator");return xT=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},xT}var wT,oG;function HMe(){if(oG)return wT;oG=1;var t=ai(),e=zo(),r=Hs(),n=vh(),i=Aae(),s=TypeError;return wT=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},wT}var ST,aG;function hD(){if(aG)return ST;aG=1;var t=ai(),e=Hs(),r=BA();return ST=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},ST}var _T,lG;function jb(){if(lG)return _T;lG=1;var t=vb(),e=ai(),r=Hs(),n=vh(),i=UMe(),s=Vo(),o=kr(),a=HMe(),l=Aae(),c=hD(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return _T=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,N,E,k,C,O,P,j=function($){return _&&c(_,"normal"),new h(!0,$)},A=function($){return y?(r($),x?S($[0],$[1],j):S($[0],$[1])):x?S($,j):S($)};if(b)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,k=s(p);k>E;E++)if(C=A(p[E]),C&&o(f,C))return C;return new h(!1)}_=a(p,N)}for(O=b?p.next:_.next;!(P=e(O,_)).done;){try{C=A(P.value)}catch($){c(_,"throw",$)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},_T}var ET,cG;function fD(){if(cG)return ET;cG=1;var t=kr(),e=TypeError;return ET=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},ET}var NT,uG;function pD(){if(uG)return NT;uG=1;var t=Te(),e=zt(),r=Ob(),n=rt(),i=wh(),s=jb(),o=fD(),a=Qr(),l=Xr(),c=mh(),d=tu(),h=Ki().f,f=gl().forEach,p=mr(),m=ru(),g=m.set,v=m.getterFor;return NT=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,k={},C;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))C=w.getConstructor(b,y,x,_),r.enable();else{C=b(function(j,A){g(o(j,O),{type:y,collection:new N}),c(A)||s(A,j[_],{that:j,AS_ENTRIES:x})});var O=C.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(j){var A=j==="add"||j==="set";j in E&&!(S&&j==="clear")&&i(O,j,function($,I){var L=P(this).collection;if(!A&&S&&!l($))return j==="get"?void 0:!1;var F=L[j]($===0?0:$,I);return A?this:F})}),S||h(O,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},NT}var CT,dG;function mD(){if(dG)return CT;dG=1;var t=Rm();return CT=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},CT}var kT,hG;function WMe(){if(hG)return kT;hG=1;var t=Si(),e=XA(),r=Tr(),n=mr(),i=r("species");return kT=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},kT}var TT,fG;function Dae(){if(fG)return TT;fG=1;var t=Im(),e=XA(),r=mD(),n=vb(),i=fD(),s=mh(),o=jb(),a=ZA(),l=eD(),c=WMe(),d=mr(),h=Ob().fastKey,f=ru(),p=f.set,m=f.getterFor;return TT={getConstructor:function(g,v,y,b){var w=g(function(E,k){i(E,x),p(E,{type:v,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(k)||o(k,E[b],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(E,k,C){var O=S(E),P=N(E,k),j,A;return P?P.value=C:(O.last=P={index:A=h(k,!0),key:k,value:C,previous:j=O.last,next:null,removed:!1},O.first||(O.first=P),j&&(j.next=P),d?O.size++:E.size++,A!=="F"&&(O.index[A]=P)),E},N=function(E,k){var C=S(E),O=h(k),P;if(O!=="F")return C.index[O];for(P=C.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(E){var k=this,C=S(k),O=N(k,E);if(O){var P=O.next,j=O.previous;delete C.index[O.index],O.removed=!0,j&&(j.next=P),P&&(P.previous=j),C.first===O&&(C.first=P),C.last===O&&(C.last=j),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:C.first;)for(O(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!N(this,k)}}),r(x,y?{get:function(k){var C=N(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(v)}},TT}var pG;function KMe(){if(pG)return ZK;pG=1;var t=pD(),e=Dae();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),ZK}var mG;function GMe(){return mG||(mG=1,KMe()),JK}var gG={},OT,yG;function $ae(){return yG||(yG=1,OT=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),OT}var jT,vG;function YMe(){if(vG)return jT;vG=1;var t=Si(),e=$ae(),r=t("Map");return jT={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},jT}var bG;function QMe(){if(bG)return gG;bG=1;var t=Te(),e=st(),r=zo(),n=Bo(),i=jb(),s=YMe(),o=bh(),a=rt(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),gG}var xG={},PT,wG;function XMe(){if(wG)return PT;wG=1;var t=st(),e=Sh(),r=Gi(),n=Bo(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return PT={codeAt:a(!1),charAt:a(!0)},PT}var SG;function gD(){if(SG)return xG;SG=1;var t=XMe().charAt,e=Gi(),r=ru(),n=ZA(),i=eD(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),xG}var IT,_G;function JMe(){if(_G)return IT;_G=1,Ch(),GMe(),QMe(),gD();var t=wt();return IT=t.Map,IT}var RT,EG;function ZMe(){if(EG)return RT;EG=1;var t=JMe();return kh(),RT=t,RT}var MT,NG;function eAe(){return NG||(NG=1,MT=ZMe()),MT}var tAe=eAe(),yD=qe(tAe);class rAe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},wr(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&vt(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new yD,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var CG={},kG;function nAe(){if(kG)return CG;kG=1;var t=Te();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),CG}var AT,TG;function iAe(){if(TG)return AT;TG=1,nAe();var t=wt();return AT=t.Number.isNaN,AT}var DT,OG;function sAe(){if(OG)return DT;OG=1;var t=iAe();return DT=t,DT}var $T,jG;function oAe(){return jG||(jG=1,$T=sAe()),$T}var aAe=oAe(),sR=qe(aAe),PG={},FT,IG;function lAe(){if(IG)return FT;IG=1;var t=zt(),e=t.isFinite;return FT=Number.isFinite||function(n){return typeof n=="number"&&e(n)},FT}var RG;function cAe(){if(RG)return PG;RG=1;var t=Te(),e=lAe();return t({target:"Number",stat:!0},{isFinite:e}),PG}var qT,MG;function uAe(){if(MG)return qT;MG=1,cAe();var t=wt();return qT=t.Number.isFinite,qT}var LT,AG;function dAe(){if(AG)return LT;AG=1;var t=uAe();return LT=t,LT}var BT,DG;function hAe(){return DG||(DG=1,BT=dAe()),BT}var fAe=hAe(),Bl=qe(fAe),$G={},FG;function pAe(){if(FG)return $G;FG=1;var t=Te(),e=gl().some,r=Th(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),$G}var zT,qG;function mAe(){if(qG)return zT;qG=1,pAe();var t=cn();return zT=t("Array","some"),zT}var VT,LG;function gAe(){if(LG)return VT;LG=1;var t=kr(),e=mAe(),r=Array.prototype;return VT=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},VT}var UT,BG;function yAe(){if(BG)return UT;BG=1;var t=gAe();return UT=t,UT}var HT,zG;function vAe(){return zG||(zG=1,HT=yAe()),HT}var bAe=vAe(),xAe=qe(bAe),WT={exports:{}},VG={},UG;function wAe(){if(UG)return VG;UG=1;var t=Te(),e=mr(),r=Ki().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),VG}var HG;function SAe(){if(HG)return WT.exports;HG=1,wAe();var t=wt(),e=t.Object,r=WT.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),WT.exports}var KT,WG;function Fae(){if(WG)return KT;WG=1;var t=SAe();return KT=t,KT}var GT,KG;function _Ae(){if(KG)return GT;KG=1;var t=Fae();return GT=t,GT}var YT,GG;function EAe(){if(GG)return YT;GG=1;var t=_Ae();return YT=t,YT}var QT,YG;function NAe(){return YG||(YG=1,QT=EAe()),QT}var CAe=NAe(),kAe=qe(CAe),QG={},XG;function TAe(){if(XG)return QG;XG=1;var t=Tr(),e=Ki().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),QG}var JG={},ZG;function OAe(){return ZG||(ZG=1,Loe()),JG}var eY={},tY;function jAe(){return tY||(tY=1,Boe()),eY}var rY={},nY;function PAe(){if(nY)return rY;nY=1;var t=Xt();return t("metadata"),rY}var XT,iY;function IAe(){if(iY)return XT;iY=1;var t=Woe();return TAe(),OAe(),jAe(),PAe(),XT=t,XT}var sY={},JT,oY;function qae(){if(oY)return JT;oY=1;var t=Si(),e=st(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return JT=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},JT}var aY;function RAe(){if(aY)return sY;aY=1;var t=Te(),e=qae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),sY}var lY={},ZT,cY;function Lae(){if(cY)return ZT;cY=1;for(var t=xh(),e=Si(),r=st(),n=Tm(),i=Tr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return ZT=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},ZT}var uY;function MAe(){if(uY)return lY;uY=1;var t=Te(),e=Lae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),lY}var dY={},hY;function AAe(){if(hY)return dY;hY=1;var t=Xt();return t("customMatcher"),dY}var fY={},pY;function DAe(){if(pY)return fY;pY=1;var t=Xt();return t("observable"),fY}var mY={},gY;function $Ae(){if(gY)return mY;gY=1;var t=Te(),e=qae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),mY}var yY={},vY;function FAe(){if(vY)return yY;vY=1;var t=Te(),e=Lae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),yY}var bY={},xY;function qAe(){if(xY)return bY;xY=1;var t=Xt();return t("matcher"),bY}var wY={},SY;function LAe(){if(SY)return wY;SY=1;var t=Xt();return t("metadataKey"),wY}var _Y={},EY;function BAe(){if(EY)return _Y;EY=1;var t=Xt();return t("patternMatch"),_Y}var NY={},CY;function zAe(){if(CY)return NY;CY=1;var t=Xt();return t("replaceAll"),NY}var eO,kY;function VAe(){if(kY)return eO;kY=1;var t=IAe();return RAe(),MAe(),AAe(),DAe(),$Ae(),FAe(),qAe(),LAe(),BAe(),zAe(),eO=t,eO}var tO,TY;function UAe(){return TY||(TY=1,tO=VAe()),tO}var HAe=UAe(),Vg=qe(HAe),rO,OY;function WAe(){if(OY)return rO;OY=1,Ch(),gD(),zoe();var t=Eb();return rO=t.f("iterator"),rO}var nO,jY;function KAe(){if(jY)return nO;jY=1;var t=WAe();return kh(),nO=t,nO}var iO,PY;function GAe(){if(PY)return iO;PY=1;var t=KAe();return iO=t,iO}var sO,IY;function YAe(){if(IY)return sO;IY=1;var t=GAe();return sO=t,sO}var oO,RY;function QAe(){return RY||(RY=1,oO=YAe()),oO}var XAe=QAe(),JAe=qe(XAe);function Mp(t){"@babel/helpers - typeof";return Mp=typeof Vg=="function"&&typeof JAe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Vg=="function"&&e.constructor===Vg&&e!==Vg.prototype?"symbol":typeof e},Mp(t)}var aO,MY;function ZAe(){if(MY)return aO;MY=1,Voe();var t=Eb();return aO=t.f("toPrimitive"),aO}var lO,AY;function eDe(){if(AY)return lO;AY=1;var t=ZAe();return lO=t,lO}var cO,DY;function tDe(){if(DY)return cO;DY=1;var t=eDe();return cO=t,cO}var uO,$Y;function rDe(){if($Y)return uO;$Y=1;var t=tDe();return uO=t,uO}var dO,FY;function nDe(){return FY||(FY=1,dO=rDe()),dO}var iDe=nDe(),sDe=qe(iDe);function oDe(t,e){if(Mp(t)!="object"||!t)return t;var r=t[sDe];if(r!==void 0){var n=r.call(t,e);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aDe(t){var e=oDe(t,"string");return Mp(e)=="symbol"?e:e+""}function fo(t,e,r){return(e=aDe(e))in t?kAe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var qY={},hO,LY;function lDe(){if(LY)return hO;LY=1;var t=zt(),e=rt(),r=st(),n=Gi(),i=Goe().trim,s=tD(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,c=l&&l.iterator,d=1/a(s+"-0")!==-1/0||c&&!e(function(){a(Object(c))});return hO=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,hO}var BY;function cDe(){if(BY)return qY;BY=1;var t=Te(),e=lDe();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),qY}var fO,zY;function uDe(){if(zY)return fO;zY=1,cDe();var t=wt();return fO=t.parseFloat,fO}var pO,VY;function dDe(){if(VY)return pO;VY=1;var t=uDe();return pO=t,pO}var mO,UY;function hDe(){return UY||(UY=1,mO=dDe()),mO}var fDe=hDe(),Bae=qe(fDe),HY={},WY;function pDe(){if(WY)return HY;WY=1;var t=Te(),e=rt(),r=QA().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),HY}var gO,KY;function mDe(){if(KY)return gO;KY=1,pDe();var t=wt(),e=t.Object;return gO=function(n){return e.getOwnPropertyNames(n)},gO}var yO,GY;function gDe(){if(GY)return yO;GY=1;var t=mDe();return yO=t,yO}var vO,YY;function yDe(){return YY||(YY=1,vO=gDe()),vO}var vDe=yDe(),bDe=qe(vDe),bO,QY;function xDe(){if(QY)return bO;QY=1,qoe();var t=wt();return bO=t.Object.getOwnPropertySymbols,bO}var xO,XY;function wDe(){if(XY)return xO;XY=1;var t=xDe();return xO=t,xO}var wO,JY;function SDe(){return JY||(JY=1,wO=wDe()),wO}var _De=SDe(),rl=qe(_De),SO={exports:{}},ZY={},eQ;function EDe(){if(eQ)return ZY;eQ=1;var t=Te(),e=rt(),r=vs(),n=yb().f,i=mr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),ZY}var tQ;function NDe(){if(tQ)return SO.exports;tQ=1,EDe();var t=wt(),e=t.Object,r=SO.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),SO.exports}var _O,rQ;function CDe(){if(rQ)return _O;rQ=1;var t=NDe();return _O=t,_O}var EO,nQ;function kDe(){return nQ||(nQ=1,EO=CDe()),EO}var TDe=kDe(),yl=qe(TDe),iQ={},sQ;function ODe(){if(sQ)return iQ;sQ=1;var t=Te(),e=mr(),r=ePe(),n=vs(),i=yb(),s=wb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),iQ}var NO,oQ;function jDe(){if(oQ)return NO;oQ=1,ODe();var t=wt();return NO=t.Object.getOwnPropertyDescriptors,NO}var CO,aQ;function PDe(){if(aQ)return CO;aQ=1;var t=jDe();return CO=t,CO}var kO,lQ;function IDe(){return lQ||(lQ=1,kO=PDe()),kO}var RDe=IDe(),nl=qe(RDe),TO={exports:{}},cQ={},uQ;function MDe(){if(uQ)return cQ;uQ=1;var t=Te(),e=mr(),r=YA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),cQ}var dQ;function ADe(){if(dQ)return TO.exports;dQ=1,MDe();var t=wt(),e=t.Object,r=TO.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),TO.exports}var OO,hQ;function DDe(){if(hQ)return OO;hQ=1;var t=ADe();return OO=t,OO}var jO,fQ;function $De(){return fQ||(fQ=1,jO=DDe()),jO}var FDe=$De(),Pb=qe(FDe),PO,pQ;function qDe(){return pQ||(pQ=1,PO=Fae()),PO}var LDe=qDe(),Ib=qe(LDe);function vD(t,e){const r=["node","edge","label"];let n=!0;const i=oa(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(vt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=oa(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function oR(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function n0(t){return typeof t=="string"&&t!==""}function zae(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var IO,mQ;function BDe(){if(mQ)return IO;mQ=1,Ch();var t=cn();return IO=t("Array","values"),IO}var RO,gQ;function zDe(){if(gQ)return RO;gQ=1;var t=BDe();return RO=t,RO}var MO,yQ;function VDe(){if(yQ)return MO;yQ=1,kh();var t=Eh(),e=ln(),r=kr(),n=zDe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return MO=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},MO}var AO,vQ;function UDe(){return vQ||(vQ=1,AO=VDe()),AO}var HDe=UDe(),Vae=qe(HDe);class WDe{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=wr({},Vae(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};wr(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const KDe={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class bQ{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=KDe[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class GDe{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let c=0;return o!==""&&(c=this.ctx.measureText(o).width),{width:c,values:l}};this.lines=new WDe(s)}process(e){if(!n0(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.splitStringIntoLines(c,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.lines.append(c,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new bQ(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new bQ(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Ps(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Ps(o).call(o,0,a),r),i[0]=Ps(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=Ps(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=Ps(i).call(i,o)}}}}const sf=["bold","ital","boldital","mono"];class id{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),n0(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(Xe(sf,r=>{this.fontOptions[r]={}}),id.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}Xe(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=oa(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=oa(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=oa(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=oa(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=oa(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=oa(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),Ot(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=vD("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};id.parseFontString(s,i)&&(i=s),Xe(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(vt(sf).call(sf,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(id.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<sf.length;++n){const i=sf[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);Xe(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let c=0;c<a.blocks.length;c++){const d=a.blocks[c];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=Di(i,o),s=Di(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,c,d){return c==="normal"?d==="mod"?"":l[d]:l[c][d]!==void 0?l[c][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new GDe(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class iu{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Am(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let YDe=class extends iu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Toe(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class bD extends iu{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),WA(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let QDe=class extends bD{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class XDe extends bD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class vl extends iu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),fje(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const c=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,c,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function xQ(t,e){var r=sr(t);if(rl){var n=rl(t);e&&(n=Kn(n).call(n,function(i){return yl(t,i).enumerable})),r.push.apply(r,n)}return r}function JDe(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Nt(r=xQ(Object(i),!0)).call(r,function(s){fo(t,s,i[s])}):nl?Pb(t,nl(i)):Nt(n=xQ(Object(i))).call(n,function(s){Ib(t,s,yl(i,s))})}return t}class ZDe extends vl{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:JDe({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class e$e extends iu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Ooe(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let t$e=class extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class r$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class wQ extends iu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),QI(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class n$e extends iu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let i$e=class extends bD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const c=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:c)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=Di(f,o.opacity),p=Di(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Am(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class s$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class o$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class a$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class l$e extends iu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let c$e=class extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class u$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function SQ(t,e){var r=sr(t);if(rl){var n=rl(t);e&&(n=Kn(n).call(n,function(i){return yl(t,i).enumerable})),r.push.apply(r,n)}return r}function _Q(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Nt(r=SQ(Object(i),!0)).call(r,function(s){fo(t,s,i[s])}):nl?Pb(t,nl(i)):Nt(n=SQ(Object(i))).call(n,function(s){Ib(t,s,yl(i,s))})}return t}class Lt{constructor(e,r,n,i,s,o){this.options=Ga(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new id(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;vt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=vt(r=this.edges).call(r,e);if(n!=-1){var i;wo(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");Lt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ss(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ss(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=Bae(e.value)),Lt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=vD("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&Lt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(Lt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Kn(i=bDe(r)).call(i,c=>r[c]!=null);l.push("font"),t0(l,e,a),e.color=tR(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(t0(["color","fixed","shadow"],e,r,n),Lt.checkMass(r),e.opacity!==void 0&&(Lt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(Lt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!Lt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Pi(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=tR(r.color);Sae(e.color,a)}else n===!0&&r.color===null&&(e.color=Ga(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Ga(i.font)),Lt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Pi(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=Di(e.borderColor,r),e.color=Di(e.color,r),e.shadowColor=Di(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),Lt.updateGroupOptions(this.options,_Q(_Q({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new YDe(this.options,this.body,this.labelModule);break;case"circle":this.shape=new QDe(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new XDe(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new ZDe(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new e$e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new t$e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new r$e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new wQ(this.options,this.body,this.labelModule);break;case"icon":this.shape=new n$e(this.options,this.body,this.labelModule);break;case"image":this.shape=new i$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new s$e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new o$e(this.options,this.body,this.labelModule);break;case"star":this.shape=new a$e(this.options,this.body,this.labelModule);break;case"text":this.shape=new l$e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new c$e(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new u$e(this.options,this.body,this.labelModule);break;default:this.shape=new wQ(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&oR(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),oR(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",Cae),e.mass=1}}}class d$e{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=ne(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,c){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(c-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Ga(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",ne(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",ne(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{Xe(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(Lt.parseOptions(this.options,e),e.opacity!==void 0&&(sR(e.opacity)||!Bl(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of sr(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(xoe("id",e))this.body.data.nodes=e;else if(cr(e))this.body.data.nodes=new Ud,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Ud;else throw new TypeError("Array or DataSet expected");if(n&&Xe(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;Xe(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const c=r[o];l!==void 0?l.setOptions(c)&&(s=!0):(s=!0,l=this.create(c),i[a]=l)}!s&&n!==void 0&&(s=xAe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Xe(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(cr(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),So(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var EQ={},NQ;function h$e(){if(NQ)return EQ;NQ=1;var t=Te(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,c=0,d=arguments.length,h=0,f,p;c<d;)f=r(arguments[c++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),EQ}var DO,CQ;function f$e(){if(CQ)return DO;CQ=1,h$e();var t=wt();return DO=t.Math.hypot,DO}var $O,kQ;function p$e(){if(kQ)return $O;kQ=1;var t=f$e();return $O=t,$O}var FO,TQ;function m$e(){return TQ||(TQ=1,FO=p$e()),FO}var g$e=m$e(),y$e=qe(g$e);class hr{static transform(e,r){cr(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],c=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*c,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let v$e=class extends hr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class b$e extends hr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class x$e{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class w$e{static draw(e,r){const n={x:-.4,y:0};hr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class S$e{static draw(e,r){const n={x:-.3,y:0};hr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class _$e{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class E$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class N$e{static draw(e,r){const n={x:-.4,y:0};return hr.transform(n,r),WA(e,n.x,n.y,r.length*.4),!0}}class C$e{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class k$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class T$e{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class O$e{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class Uae{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return v$e.draw(e,r);case"circle":return N$e.draw(e,r);case"box":return k$e.draw(e,r);case"crow":return x$e.draw(e,r);case"curve":return w$e.draw(e,r);case"diamond":return T$e.draw(e,r);case"inv_curve":return S$e.draw(e,r);case"triangle":return _$e.draw(e,r);case"inv_triangle":return E$e.draw(e,r);case"bar":return C$e.draw(e,r);case"vee":return O$e.draw(e,r);case"arrow":default:return b$e.draw(e,r)}}}function OQ(t,e){var r=sr(t);if(rl){var n=rl(t);e&&(n=Kn(n).call(n,function(i){return yl(t,i).enumerable})),r.push.apply(r,n)}return r}function jQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Nt(r=OQ(Object(i),!0)).call(r,function(s){fo(t,s,i[s])}):nl?Pb(t,nl(i)):Nt(n=OQ(Object(i))).call(n,function(s){Ib(t,s,yl(i,s))})}return t}class Hae{constructor(e,r,n){fo(this,"color",{}),fo(this,"colorDirty",!0),fo(this,"hoverWidth",1.5),fo(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=cr(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)joe(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Ps(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=zae(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,c=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const v=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,v)+m,b=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-b;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<c);return jQ(jQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=Di(this.from.options.color.border,r.opacity),s=Di(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?Di(this.to.options.color.border,r.opacity):Di(this.from.options.color.border,r.opacity)}else return Di(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,c=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,c]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-c)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,c=a*a+l*l;let d=((s-e)*a+(o-r)*l)/c;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,c,d,h,f,p;const m=o.width;r==="from"?(c=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(c=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(c=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(c!=d){const w=y$e(c.x-d.x,c.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(c,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(c.y-d.y,c.x-d.x),l=this._findBorderPosition(c,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),N=this.getPoint(.5-S,n);a=Math.atan2(_.y-N.y,_.x-N.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:-1});a=E.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=E}else if(r==="to"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:1});a=E.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=E}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const v=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:v,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,Uae.draw(e,s)&&(this.enableShadow(e,r),Am(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=cr(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function PQ(t,e){var r=sr(t);if(rl){var n=rl(t);e&&(n=Kn(n).call(n,function(i){return yl(t,i).enumerable})),r.push.apply(r,n)}return r}function IQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Nt(r=PQ(Object(i),!0)).call(r,function(s){fo(t,s,i[s])}):nl?Pb(t,nl(i)):Nt(n=PQ(Object(i))).call(n,function(s){Ib(t,s,yl(i,s))})}return t}class xD extends Hae{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,c=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(c=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(c.y-d.y,c.x-d.x),g=c.distanceToBorder(r,m)+f,v=Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)),y=g-v;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return IQ(IQ({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,c,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(c=this._getDistanceToLine(m,g,f,p,s,o),l=c<l?c:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class RQ extends xD{constructor(e,r,n){super(e,r,n),fo(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class MQ extends xD{constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class j$e extends xD{constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let c=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,v=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(d,h,g,v,s,o);c=y<c?y:c}d=g,h=v}return c}}class AQ extends j$e{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class DQ extends Hae{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),c=e.distanceToBorder(r,s),d=(l-c)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class Ya{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Ga(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new id(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;Ya.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=Bae(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=vD("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(jh(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(Bl(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(Bl(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),n0(r.label)?e.label=r.label:n0(e.label)||(e.label=void 0),Pi(e,r,"smooth",i),Pi(e,r,"shadow",i),Pi(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=lc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Pi(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=lc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=vt(a).call(a,"to")!=-1,e.arrows.middle.enabled=vt(a).call(a,"middle")!=-1,e.arrows.from.enabled=vt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Pi(e.arrows,r.arrows,"to",i.arrows),Pi(e.arrows,r.arrows,"middle",i.arrows),Pi(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Mm(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=lc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=rd(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)Ot(l,i.color,!1,n);else for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&delete l[c];if(rd(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let c=!1;a.color!==void 0&&(l.color=a.color,c=!0),a.highlight!==void 0&&(l.highlight=a.highlight,c=!0),a.hover!==void 0&&(l.hover=a.hover,c=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),c===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Ga(i.color));n===!0&&r.font===null&&(e.font=Ga(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof RQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof AQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof MQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof DQ&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new RQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new AQ(this.options,this.body,this.labelModule):this.edgeType=new MQ(this.options,this.body,this.labelModule):this.edgeType=new DQ(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=zae(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();oR(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class P$e{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=ne(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const c=1/(o-s);return Math.max(0,(l-s)*c)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Ot(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],c=e.body.data.edges.get(a);if(c!=null){const d=c.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",ne(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",ne(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{Xe(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){Ya.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(xoe("id",e))this.body.data.edges=e;else if(cr(e))this.body.data.edges=new Ud,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Ud;else throw new TypeError("Array or DataSet expected");if(n&&Xe(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){Xe(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;Xe(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){Xe(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new Ya(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];Xe(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];Nt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class Wae{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=Tb("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let v=1;v<i;v++){const y=e[r[v]],b=y.x,w=y.y;y.options.mass>0&&(b<s&&(s=b),b>a&&(a=b),w<o&&(o=w),w>l&&(l=w))}const c=Math.abs(a-s)-Math.abs(l-o);c>0?(o-=.5*c,l+=.5*c):(s+=.5*c,a-=.5*c);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let v=0;v<i;v++)n=e[r[v]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class I$e{constructor(e,r,n){this._rng=Tb("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=c[d[g]];for(let v=g+1;v<d.length;v++)l=c[d[v]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class R$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const c=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<c?m=-Math.pow(p*f,2)+Math.pow(p*c,2):m=0,f!==0&&(m=m/f);const g=d*m,v=h*m;n[o.id].x-=g,n[o.id].y-=v,n[l.id].x+=g,n[l.id].y+=v}}}}}class qO{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,c=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=c),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=c)}}class M$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=c[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let v=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];v+=p[S].x,y+=p[S].y}const b=v/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=b,p[S].y-=w}}}class my{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const c=o[l];i=s[c],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class A$e extends Wae{constructor(e,r,n){super(e,r,n),this._rng=Tb("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,c=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=c}}class D$e extends my{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class $$e{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},wr(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,t0(["stabilization"],this.options,e),Pi(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||sR(r.x))&&(r.x=0),(typeof r.y!="number"||sR(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new A$e(this.body,this.physicsBody,e),this.edgesSolver=new qO(this.body,this.physicsBody,e),this.gravitySolver=new D$e(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new I$e(this.body,this.physicsBody,e),this.edgesSolver=new qO(this.body,this.physicsBody,e),this.gravitySolver=new my(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new R$e(this.body,this.physicsBody,e),this.edgesSolver=new M$e(this.body,this.physicsBody,e),this.gravitySolver=new my(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new Wae(this.body,this.physicsBody,e),this.edgesSolver=new qO(this.body,this.physicsBody,e),this.gravitySolver=new my(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=ne(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=Xv();this.physicsTick(),(Xv()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&So(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=sr(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,So(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;So(ne(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),c=Math.min(Math.max(5,l),15),d=3*c,h=rR((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=c,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,Uae.draw(e,{type:"arrow",point:f,angle:p,length:d}),Am(e).call(e)}}}const Zr=[];for(let t=0;t<256;++t)Zr.push((t+256).toString(16).slice(1));function F$e(t,e=0){return(Zr[t[e+0]]+Zr[t[e+1]]+Zr[t[e+2]]+Zr[t[e+3]]+"-"+Zr[t[e+4]]+Zr[t[e+5]]+"-"+Zr[t[e+6]]+Zr[t[e+7]]+"-"+Zr[t[e+8]]+Zr[t[e+9]]+"-"+Zr[t[e+10]]+Zr[t[e+11]]+Zr[t[e+12]]+Zr[t[e+13]]+Zr[t[e+14]]+Zr[t[e+15]]).toLowerCase()}let LO;const q$e=new Uint8Array(16);function L$e(){if(!LO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");LO=crypto.getRandomValues.bind(crypto)}return LO(q$e)}const B$e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var $Q={randomUUID:B$e};function z$e(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??L$e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,F$e(n)}function zf(t,e,r){return $Q.randomUUID&&!t?$Q.randomUUID():z$e(t)}class On{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(Ot(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):Ot(n,e.options,!0),n}}class V$e extends Lt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],Xe(r.edges,n=>{delete this.containedEdges[n.id]}),Xe(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},Xe(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},Xe(r.edges,n=>{Xe(this.edges,i=>{var s,o;const a=vt(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(Xe(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),wo(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class U$e{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},wr(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};Xe(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,Xe(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let c=0;c<this.body.nodeIndices.length;c++){const d={},h={},f=this.body.nodeIndices[c],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(v){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=On.cloneOptions(v);return r.joinCondition(y)};let g=!0;for(let v=0;v<a.length;v++){o=a[v];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(sr(d).length>0&&sr(h).length>0&&g===!0){const y=function(){for(let b=0;b<i.length;++b)for(const w in d)if(i[b].nodes[w]!==void 0)return i[b]}();if(y!==void 0){for(const b in d)y.nodes[b]===void 0&&(y.nodes[b]=d[b]);for(const b in h)y.edges[b]===void 0&&(y.edges[b]=h[b])}else i.push({nodes:d,edges:h})}}}}for(let c=0;c<i.length;c++)this._cluster(i[c].nodes,i[c].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,c=On.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=On.cloneOptions(this.body.nodes[p]);r.joinCondition(c,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=Hd(n=sr(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];vt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,c,d;const h=sr(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let v=0;v<a.edges.length;v++)s=a.edges[v],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,c=s.fromId,d=c):(l=s.toId,c=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:c,toId:l}))}const p=[],m=function(g){for(let v=0;v<p.length;v++){const y=p[v],b=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(b||w)return y}return null};for(let g=0;g<f.length;g++){const v=f[g],y=v.edge;let b=m(v);b===null?(b=this._createClusteredEdge(v.fromId,v.toId,y,i),p.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(sr(e).length==0||sr(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=Ot({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=On.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=On.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+zf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const c=this.body.functions.createNode(o,V$e);c.containedNodes=e,c.containedEdges=r,c.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=c,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=sr(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=vt(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else Xe(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const c=[];for(let d=0;d<i.edges.length;d++)c.push(i.edges[d]);for(let d=0;d<c.length;d++){const h=c[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],v=this.body.edges[g];if(v!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[v.id]=v,delete l[v.id];let b=v.fromId,w=v.toId;v.toId==f?w=p.clusterId:b=p.clusterId,this._createClusteredEdge(b,w,v,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(v)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),ac(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return ac(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const c=l.clusteringEdgeReplacingIds;if(c===void 0)i.push(a);else for(let d=0;d<c.length;++d){const h=c[d];vt(r).call(r,c)!==-1||vt(n).call(n,c)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const c=this.body.nodes[this.body.nodeIndices[l]];c.edges.length>i&&(i=c.edges.length),e+=c.edges.length,r+=Math.pow(c.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=On.cloneOptions(n,"edge");Ot(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+zf(),s!==void 0&&Ot(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof Ya){const s=r,o={};o[s.id]=s,r=o}if(e instanceof Lt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return Xe(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{Xe(this.body.nodes,c=>{c.isCluster===!0&&l(c)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let c=0;c<r.length;c++)delete l.containedNodes[r[c]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];Xe(this.clusteredEdges,l=>{const c=this.body.edges[l];(c===void 0||!c.endPointsValid())&&(n[l]=l)}),i(function(l){Xe(l.containedEdges,(c,d)=>{!c.endPointsValid()&&!n[d]&&(n[d]=d)})}),Xe(this.body.edges,(l,c)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;Xe(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[c]=c)}),i(l=>{Xe(n,c=>{delete l.containedEdges[c],Xe(l.edges,(d,h)=>{if(d.id===c){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),Xe(n,l=>{delete this.clusteredEdges[l]}),Xe(n,l=>{delete this.body.edges[l]});const s=sr(this.body.edges);Xe(s,l=>{const c=this.body.edges[l],d=this._isClusteredNode(c.fromId)||this._isClusteredNode(c.toId);if(d!==this._isClusteredEdge(c.id))if(d){const h=this._getClusterNodeForNode(c.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[c.fromId],c,h);const f=this._getClusterNodeForNode(c.toId);f!==void 0&&this._clusterEdges(this.body.nodes[c.toId],c,f)}else delete this._clusterEdges[l],this._restoreEdge(c)});let o=!1,a=!0;for(;a;){const l=[];i(function(c){const d=sr(c.containedNodes).length,h=c.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(c.id)});for(let c=0;c<l.length;++c)this.openCluster(l[c],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class H$e{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},wr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=So(()=>{var r;this.zooming=!1,ne(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",ne(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&jh(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(ne(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,c=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:c.y,left:c.x,bottom:d.y,right:d.x},f=[];for(let v=0;v<i.length;v++)if(s=n[i[v]],s.hover)a.push(i[v]);else if(s.isSelected())o.push(i[v]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}return{drawExternalLabels:()=>{for(const v of f)v()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var BO,FQ;function W$e(){if(FQ)return BO;FQ=1,Xoe();var t=wt();return BO=t.setInterval,BO}var zO,qQ;function K$e(){return qQ||(qQ=1,zO=W$e()),zO}var G$e=K$e(),Y$e=qe(G$e);function i0(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function Kae(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class Q$e{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},wr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",ne(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&jh(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=Y$e(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=ne(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;Nt(e=ac(r=wo(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(vt(e).call(e,"%")!==-1||vt(e).call(e,"px")!==-1)return e;if(vt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new nd(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:nd.DIRECTION_ALL}),i0(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new nd(this.frame),Kae(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function X$e(t,e){const r=wr({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!cr(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class J$e{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",ne(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",ne(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=X$e(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=On.getRange(this.body.nodes,e.nodes);else if(r===!0){let c=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(c+=1);if(c>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=On.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=On.getRange(this.body.nodes,e.nodes);const c=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/c,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:On.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!Bl(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!Bl(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!Bl(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!Bl(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=ne(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=ne(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=oMe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=ne(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function LQ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){c(d,"keydown")},l=function(d){c(d,"keyup")},c=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class Z$e{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new nd(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;i0(a,ne(n=this._fit).call(n,this))}else{var i;i0(a,ne(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new nd(this.canvas.frame);Kae(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=ne(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=LQ({container:window,preventDefault:!0}):this.keycharm=LQ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,c,d,h,f,p,m,g,v,y,b,w,x,S,_,N,E;ne(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),ne(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),ne(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),ne(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),ne(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(c=this.keycharm).call(c,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),ne(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),ne(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),ne(v=this.keycharm).call(v,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),ne(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(b=this.keycharm).call(b,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(N=this.keycharm).call(N,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(E=this.keycharm).call(E,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class eFe{constructor(e,r,n){var i,s,o,a,l,c,d,h,f,p,m,g,v;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new Z$e(e,r),this.body.eventListeners.onTap=ne(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=ne(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=ne(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=ne(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=ne(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=ne(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=ne(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=ne(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=ne(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=ne(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=ne(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=ne(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=ne(v=this.getPointer).call(v,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},wr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(t0(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Pi(this.options,e,"keyboard"),e.tooltip&&(wr(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=tR(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-rMe(this.canvas.frame.canvas),y:e.y-nMe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];vt(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=wr({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;Nt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Kn(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});Nt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(Nt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const c=this.canvas.canvasToDOM(i);this.drag.pointer.x=c.x,this.drag.pointer.y=c.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=So(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,c=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=c[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,c=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=c[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new pMe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var BQ={},zQ={},VQ;function tFe(){if(VQ)return zQ;VQ=1;var t=pD(),e=Dae();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),zQ}var UQ;function rFe(){return UQ||(UQ=1,tFe()),BQ}var HQ={},VO,WQ;function su(){if(WQ)return VO;WQ=1;var t=vh(),e=TypeError;return VO=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},VO}var UO,KQ;function ou(){if(KQ)return UO;KQ=1;var t=Si(),e=$ae(),r=t("Set"),n=r.prototype;return UO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},UO}var HO,GQ;function au(){if(GQ)return HO;GQ=1;var t=ai();return HO=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},HO}var WO,YQ;function Bm(){if(YQ)return WO;YQ=1;var t=au();return WO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},WO}var KO,QQ;function wD(){if(QQ)return KO;QQ=1;var t=ou(),e=Bm(),r=t.Set,n=t.add;return KO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},KO}var GO,XQ;function zm(){return XQ||(XQ=1,GO=function(t){return t.size}),GO}var YO,JQ;function nFe(){return JQ||(JQ=1,YO=function(t){return{iterator:t,next:t.next,done:!1}}),YO}var QO,ZQ;function lu(){if(ZQ)return QO;ZQ=1;var t=zo(),e=Hs(),r=ai(),n=Sh(),i=nFe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},QO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},QO}var XO,eX;function iFe(){if(eX)return XO;eX=1;var t=su(),e=ou(),r=wD(),n=zm(),i=lu(),s=Bm(),o=au(),a=e.has,l=e.remove;return XO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},XO}var JO,tX;function cu(){return tX||(tX=1,JO=function(){return!1}),JO}var rX;function sFe(){if(rX)return HQ;rX=1;var t=Te(),e=iFe(),r=rt(),n=cu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),HQ}var nX={},ZO,iX;function oFe(){if(iX)return ZO;iX=1;var t=su(),e=ou(),r=zm(),n=lu(),i=Bm(),s=au(),o=e.Set,a=e.add,l=e.has;return ZO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},ZO}var sX;function aFe(){if(sX)return nX;sX=1;var t=Te(),e=rt(),r=oFe(),n=cu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),nX}var oX={},ej,aX;function lFe(){if(aX)return ej;aX=1;var t=su(),e=ou().has,r=zm(),n=lu(),i=Bm(),s=au(),o=hD();return ej=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},ej}var lX;function cFe(){if(lX)return oX;lX=1;var t=Te(),e=lFe(),r=cu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),oX}var cX={},tj,uX;function uFe(){if(uX)return tj;uX=1;var t=su(),e=zm(),r=Bm(),n=lu();return tj=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},tj}var dX;function dFe(){if(dX)return cX;dX=1;var t=Te(),e=uFe(),r=cu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),cX}var hX={},rj,fX;function hFe(){if(fX)return rj;fX=1;var t=su(),e=ou().has,r=zm(),n=lu(),i=au(),s=hD();return rj=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},rj}var pX;function fFe(){if(pX)return hX;pX=1;var t=Te(),e=hFe(),r=cu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),hX}var mX={},nj,gX;function pFe(){if(gX)return nj;gX=1;var t=su(),e=ou(),r=wD(),n=lu(),i=au(),s=e.add,o=e.has,a=e.remove;return nj=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},nj}var ij,yX;function Gae(){return yX||(yX=1,ij=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),ij}var vX;function mFe(){if(vX)return mX;vX=1;var t=Te(),e=pFe(),r=Gae(),n=cu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),mX}var bX={},sj,xX;function gFe(){if(xX)return sj;xX=1;var t=su(),e=ou().add,r=wD(),n=lu(),i=au();return sj=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},sj}var wX;function yFe(){if(wX)return bX;wX=1;var t=Te(),e=gFe(),r=Gae(),n=cu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),bX}var oj,SX;function vFe(){if(SX)return oj;SX=1,Ch(),rFe(),sFe(),aFe(),cFe(),dFe(),fFe(),mFe(),yFe(),gD();var t=wt();return oj=t.Set,oj}var aj,_X;function bFe(){if(_X)return aj;_X=1;var t=vFe();return kh(),aj=t,aj}var lj,EX;function xFe(){return EX||(EX=1,lj=bFe()),lj}var wFe=xFe(),da=qe(wFe),NX={},CX={},cj,kX;function SFe(){if(kX)return cj;kX=1;var t=st(),e=mD(),r=Ob().getWeakData,n=fD(),i=Hs(),s=mh(),o=Xr(),a=jb(),l=gl(),c=ln(),d=ru(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),v=0,y=function(x){return x.frozen||(x.frozen=new b)},b=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return b.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},cj={getConstructor:function(x,S,_,N){var E=x(function(P,j){n(P,k),h(P,{type:S,id:v++,frozen:null}),s(j)||a(j,P[N],{that:P,AS_ENTRIES:_})}),k=E.prototype,C=f(S),O=function(P,j,A){var $=C(P),I=r(i(j),!0);return I===!0?y($).set(j,A):I[$.id]=A,P};return e(k,{delete:function(P){var j=C(this);if(!o(P))return!1;var A=r(P);return A===!0?y(j).delete(P):A&&c(A,j.id)&&delete A[j.id]},has:function(j){var A=C(this);if(!o(j))return!1;var $=r(j);return $===!0?y(A).has(j):$&&c($,A.id)}}),e(k,_?{get:function(j){var A=C(this);if(o(j)){var $=r(j);if($===!0)return y(A).get(j);if($)return $[A.id]}},set:function(j,A){return O(this,j,A)}}:{add:function(j){return O(this,j,!0)}}),E}},cj}var TX;function _Fe(){if(TX)return CX;TX=1;var t=Mae(),e=zt(),r=st(),n=mD(),i=Ob(),s=pD(),o=SFe(),a=Xr(),l=ru().enforce,c=rt(),d=Doe(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,v=h.freeze,y=h.seal,b=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,N=r(_.set),E=function(){return t&&c(function(){var P=v([]);return N(new S,P,1),!m(P)})};if(d)if(b){w=o.getConstructor(x,"WeakMap",!0),i.enable();var k=r(_.delete),C=r(_.has),O=r(_.get);n(_,{delete:function(P){if(a(P)&&!p(P)){var j=l(this);return j.frozen||(j.frozen=new w),k(this,P)||j.frozen.delete(P)}return k(this,P)},has:function(j){if(a(j)&&!p(j)){var A=l(this);return A.frozen||(A.frozen=new w),C(this,j)||A.frozen.has(j)}return C(this,j)},get:function(j){if(a(j)&&!p(j)){var A=l(this);return A.frozen||(A.frozen=new w),C(this,j)?O(this,j):A.frozen.get(j)}return O(this,j)},set:function(j,A){if(a(j)&&!p(j)){var $=l(this);$.frozen||($.frozen=new w),C(this,j)?N(this,j,A):$.frozen.set(j,A)}else N(this,j,A);return this}})}else E()&&n(_,{set:function(j,A){var $;return f(j)&&(m(j)?$=v:g(j)&&($=y)),N(this,j,A),$&&$(j),this}});return CX}var OX;function EFe(){return OX||(OX=1,_Fe()),NX}var uj,jX;function NFe(){if(jX)return uj;jX=1,Ch(),EFe();var t=wt();return uj=t.WeakMap,uj}var dj,PX;function CFe(){if(PX)return dj;PX=1;var t=NFe();return kh(),dj=t,dj}var hj,IX;function kFe(){return IX||(IX=1,hj=CFe()),hj}var TFe=kFe(),Vm=qe(TFe);function Vf(t,e,r){OFe(t,e),e.set(t,r)}function OFe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function aR(t,e,r){return t.set(Yae(t,e),r),r}function Tt(t,e){return t.get(Yae(t,e))}function Yae(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function RX(t,e){const r=new da;for(const n of e)t.has(n)||r.add(n);return r}var bu=new Vm,Ji=new Vm;class MX{constructor(){Vf(this,bu,new da),Vf(this,Ji,new da)}get size(){return Tt(Ji,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Tt(Ji,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Tt(Ji,this).delete(i)}clear(){Tt(Ji,this).clear()}getSelection(){return[...Tt(Ji,this)]}getChanges(){return{added:[...RX(Tt(bu,this),Tt(Ji,this))],deleted:[...RX(Tt(Ji,this),Tt(bu,this))],previous:[...new da(Tt(bu,this))],current:[...new da(Tt(Ji,this))]}}commit(){const e=this.getChanges();aR(bu,this,Tt(Ji,this)),aR(Ji,this,new da(Tt(bu,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var Sl=new Vm,_l=new Vm,fj=new Vm;class jFe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Vf(this,Sl,new MX),Vf(this,_l,new MX),Vf(this,fj,void 0),aR(fj,this,e)}get sizeNodes(){return Tt(Sl,this).size}get sizeEdges(){return Tt(_l,this).size}getNodes(){return Tt(Sl,this).getSelection()}getEdges(){return Tt(_l,this).getSelection()}addNodes(){Tt(Sl,this).add(...arguments)}addEdges(){Tt(_l,this).add(...arguments)}deleteNodes(e){Tt(Sl,this).delete(e)}deleteEdges(e){Tt(_l,this).delete(e)}clear(){Tt(Sl,this).clear(),Tt(_l,this).clear()}commit(){const e={nodes:Tt(Sl,this).commit(),edges:Tt(_l,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Tt(fj,this).call(this,e,...n),e}}class PFe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new jFe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},wr(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&jh(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof Lt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],c=o[l];if(c.connected){const d=c.from.x,h=c.from.y,f=c.to.x,p=c.to.y,m=c.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof Lt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof Lt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof Lt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof Lt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof Lt&&n.id!=s||n instanceof Ya)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof Ya&&n.id!=s||n instanceof Lt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=sr(this.hoverObj.edges).length,o=sr(this.hoverObj.nodes).length,a=n instanceof Ya&&s===0&&o===0,l=n instanceof Lt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof Lt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return Hd(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return Hd(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var AX={},pj,DX;function IFe(){if(DX)return pj;DX=1;var t=_h(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return pj=r,pj}var mj,$X;function RFe(){if($X)return mj;$X=1;var t=gh(),e=t.match(/firefox\/(\d+)/i);return mj=!!e&&+e[1],mj}var gj,FX;function MFe(){if(FX)return gj;FX=1;var t=gh();return gj=/MSIE|Trident/.test(t),gj}var yj,qX;function AFe(){if(qX)return yj;qX=1;var t=gh(),e=t.match(/AppleWebKit\/(\d+)\./);return yj=!!e&&+e[1],yj}var LX;function DFe(){if(LX)return AX;LX=1;var t=Te(),e=st(),r=zo(),n=_i(),i=Vo(),s=Koe(),o=Gi(),a=rt(),l=IFe(),c=Th(),d=RFe(),h=MFe(),f=km(),p=AFe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,k,C,O;for(E=65;E<76;E++){switch(k=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(P,j){return j.v-P.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(N){return function(E,k){return k===void 0?-1:E===void 0?1:N!==void 0?+N(E,k)||0:o(E)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var k=n(this);if(x)return E===void 0?g(k):g(k,E);var C=[],O=i(k),P,j;for(j=0;j<O;j++)j in k&&v(C,k[j]);for(l(C,_(E)),P=i(C),j=0;j<P;)k[j]=C[j++];for(;j<O;)s(k,j++);return k}}),AX}var vj,BX;function $Fe(){if(BX)return vj;BX=1,DFe();var t=cn();return vj=t("Array","sort"),vj}var bj,zX;function FFe(){if(zX)return bj;zX=1;var t=kr(),e=$Fe(),r=Array.prototype;return bj=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},bj}var xj,VX;function qFe(){if(VX)return xj;VX=1;var t=FFe();return xj=t,xj}var wj,UX;function LFe(){return UX||(UX=1,wj=qFe()),wj}var BFe=LFe(),sd=qe(BFe),HX={},Sj,WX;function zFe(){if(WX)return Sj;WX=1;var t=zo(),e=_i(),r=mb(),n=Vo(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return Sj={left:o(!1),right:o(!0)},Sj}var _j,KX;function VFe(){if(KX)return _j;KX=1;var t=Yoe();return _j=t==="NODE",_j}var GX;function UFe(){if(GX)return HX;GX=1;var t=Te(),e=zFe().left,r=Th(),n=km(),i=VFe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),HX}var Ej,YX;function HFe(){if(YX)return Ej;YX=1,UFe();var t=cn();return Ej=t("Array","reduce"),Ej}var Nj,QX;function WFe(){if(QX)return Nj;QX=1;var t=kr(),e=HFe(),r=Array.prototype;return Nj=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},Nj}var Cj,XX;function KFe(){if(XX)return Cj;XX=1;var t=WFe();return Cj=t,Cj}var kj,JX;function GFe(){return JX||(JX=1,kj=KFe()),kj}var YFe=GFe(),Qae=qe(YFe);class Xae{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class QFe extends Xae{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){sd(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class XFe extends Xae{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){sd(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var ZX={},eJ;function JFe(){if(eJ)return ZX;eJ=1;var t=Te(),e=gl().every,r=Th(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),ZX}var Tj,tJ;function ZFe(){if(tJ)return Tj;tJ=1,JFe();var t=cn();return Tj=t("Array","every"),Tj}var Oj,rJ;function e4e(){if(rJ)return Oj;rJ=1;var t=kr(),e=ZFe(),r=Array.prototype;return Oj=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},Oj}var jj,nJ;function t4e(){if(nJ)return jj;nJ=1;var t=e4e();return jj=t,jj}var Pj,iJ;function r4e(){return iJ||(iJ=1,Pj=t4e()),Pj}var n4e=r4e(),Jae=qe(n4e);function i4e(t,e){const r=new da;return Nt(t).call(t,n=>{var i;Nt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),Nt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function s4e(t){return Zae(e=>{var r,n;return Jae(r=Kn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function o4e(t){return Zae(e=>{var r,n;return Jae(r=Kn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function Zae(t,e,r,n){var i;const s=lc(null),o=Qae(i=[...Vae(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var c,d;if(!n.has(h))continue;const v=s[g.id]+l;if(Nt(c=Kn(d=g.edges).call(d,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(c,y=>{const b=y[a],w=s[b];(w==null||e(v,w))&&(s[b]=v,p.push(y[r]))}),m>o)return i4e(n,s);++m}}return s}class a4e{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new yD;let n=0;const i=sd(e=[...new da(SIe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return sr(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class l4e{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+Xv()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},wr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(jh(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Pi(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),Ot(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=Tb(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const c=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(c==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const c=this.body.nodes[e[l]];c.predefinedPosition===!1&&(c.x+=(.5-this._rng())*a,c.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=On.getRangeCore(this.body.nodes,this.body.nodeIndices),r=On.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new a4e;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let b=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;b+=x+this.options.hierarchical.treeSpacing,s(w+1,b)}},s=(y,b)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,b)},o=()=>{const y=[];for(let b=0;b<this.hierarchical.numTrees();b++)y.push(this.direction.getTreeSize(b));return y},a=(y,b)=>{if(!b[y.id]&&(b[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],b)}},l=function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const N in y)if(Object.prototype.hasOwnProperty.call(y,N)){const E=e.body.nodes[N],k=e.hierarchical.levels[E.id],C=e.direction.getPosition(E),[O,P]=e._getSpaceAroundNode(E,y);w=Math.min(O,w),x=Math.min(P,x),k<=b&&(S=Math.min(C,S),_=Math.max(C,_))}return[S,_,w,x]},c=(y,b)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(b.id);return Math.min(w,x)},d=(y,b,w)=>{const x=this.hierarchical;for(let S=0;S<b.length;S++){const _=b[S],N=x.distributionOrdering[_];if(N.length>1)for(let E=0;E<N.length-1;E++){const k=N[E],C=N[E+1];x.hasSameParent(k,C)&&x.inSameSubNetwork(k,C)&&y(k,C,w)}}},h=function(y,b){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(b),_=Math.abs(S-x),N=e.options.hierarchical.nodeSpacing;if(_>N){const E={},k={};a(y,E),a(b,k);const C=c(y,b),O=l(E,C),P=l(k,C),j=O[1],A=P[0],$=P[2];if(Math.abs(j-A)>N){let L=j-A+N;L<-$+N&&(L=-$+N),L<0&&(e._shiftBlock(b.id,L),r=!0,w===!0&&e._centerParent(b))}}},f=(y,b)=>{const w=b.id,x=b.edges,S=this.hierarchical.levels[b.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,N={},E=[];for(let $=0;$<x.length;$++){const I=x[$];if(I.toId!=I.fromId){const L=I.toId==w?I.from:I.to;N[x[$].id]=L,this.hierarchical.levels[L.id]<S&&E.push(I)}}const k=($,I)=>{let L=0;for(let F=0;F<I.length;F++)if(N[I[F].id]!==void 0){const H=this.direction.getPosition(N[I[F].id])-$;L+=H/Math.sqrt(H*H+_)}return L},C=($,I)=>{let L=0;for(let F=0;F<I.length;F++)if(N[I[F].id]!==void 0){const H=this.direction.getPosition(N[I[F].id])-$;L-=_*Math.pow(H*H+_,-1.5)}return L},O=($,I)=>{let L=this.direction.getPosition(b);const F={};for(let H=0;H<$;H++){const G=k(L,I),K=C(L,I),ue=40,Ae=Math.max(-ue,Math.min(ue,Math.round(G/K)));if(L=L-Ae,F[L]!==void 0)break;F[L]=H}return L},P=$=>{const I=this.direction.getPosition(b);if(n[b.id]===void 0){const ue={};a(b,ue),n[b.id]=ue}const L=l(n[b.id]),F=L[2],H=L[3],G=$-I;let K=0;G>0?K=Math.min(G,H-this.options.hierarchical.nodeSpacing):G<0&&(K=-Math.min(-G,F-this.options.hierarchical.nodeSpacing)),K!=0&&(this._shiftBlock(b.id,K),r=!0)},j=$=>{const I=this.direction.getPosition(b),[L,F]=this._getSpaceAroundNode(b),H=$-I;let G=I;H>0?G=Math.min(I+(F-this.options.hierarchical.nodeSpacing),$):H<0&&(G=Math.max(I-(L-this.options.hierarchical.nodeSpacing),$)),G!==I&&(this.direction.setPosition(b,G),r=!0)};let A=O(y,E);P(A),A=O(y,x),j(A)},p=y=>{let b=this.hierarchical.getLevels();b=ac(b).call(b);for(let w=0;w<y;w++){r=!1;for(let x=0;x<b.length;x++){const S=b[x],_=this.hierarchical.distributionOrdering[S];for(let N=0;N<_.length;N++)f(1e3,_[N])}if(r!==!0)break}},m=y=>{let b=this.hierarchical.getLevels();b=ac(b).call(b);for(let w=0;w<y&&(r=!1,d(h,b,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},v=()=>{let y=this.hierarchical.getLevels();y=ac(y).call(y);for(let b=0;b<y.length;b++){const w=y[b],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&v(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,c=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);c=Math.min(c,h-o)}}return[l,c]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[c,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=sr(e[n]);i=this._indexArrayToNodes(i),sd(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let c=l*s;s>0&&(c=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,c,n),this._validatePositionAndContinue(a,n,c),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);sd(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],c=this.hierarchical.levels[l.id];if(c>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,c),this._validatePositionAndContinue(l,c,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return Xe(e.edges,n=>{var i;vt(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;Xe(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return Xe(e,i=>{n.push(Number(i))}),sd(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;Xe(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(On.cloneOptions(i,"node"),On.cloneOptions(s,"node"),On.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=Qae(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new yD);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=o4e(r):this.hierarchical.levels=s4e(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let c=0;c<l.length;c++){const d=l[c];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new QFe(this):this.direction=new XFe(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class c4e{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},wr(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",ne(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",ne(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,Ot(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,ne(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",ne(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,ne(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",ne(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=Ot({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,ne(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",ne(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",ne(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",ne(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",ne(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",ne(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,ne(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",ne(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",ne(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",ne(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",ne(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",c=>{const d=o.edgeType.findBorderPositions(c);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=Ot({},this.options.controlNodeStyle);n.id="targetNode"+zf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},sa(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,ne(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(sa(this.editModeDiv),sa(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of wo(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),sa(this.manipulationDiv),sa(this.editModeDiv),sa(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,ne(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Mm(sr(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new nd(e,{});i0(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=vt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;wo(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=vt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;wo(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=wr({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=wr({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+zf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(vt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(vt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:zf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const oe="string",re="boolean",V="number",gf="array",_e="object",ele="dom",u4e="any",Ij=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],Rj={borderWidth:{number:V},borderWidthSelected:{number:V,undefined:"undefined"},brokenImage:{string:oe,undefined:"undefined"},chosen:{label:{boolean:re,function:"function"},node:{boolean:re,function:"function"},__type__:{object:_e,boolean:re}},color:{border:{string:oe},background:{string:oe},highlight:{border:{string:oe},background:{string:oe},__type__:{object:_e,string:oe}},hover:{border:{string:oe},background:{string:oe},__type__:{object:_e,string:oe}},__type__:{object:_e,string:oe}},opacity:{number:V,undefined:"undefined"},fixed:{x:{boolean:re},y:{boolean:re},__type__:{object:_e,boolean:re}},font:{align:{string:oe},color:{string:oe},size:{number:V},face:{string:oe},background:{string:oe},strokeWidth:{number:V},strokeColor:{string:oe},vadjust:{number:V},multi:{boolean:re,string:oe},bold:{color:{string:oe},size:{number:V},face:{string:oe},mod:{string:oe},vadjust:{number:V},__type__:{object:_e,string:oe}},boldital:{color:{string:oe},size:{number:V},face:{string:oe},mod:{string:oe},vadjust:{number:V},__type__:{object:_e,string:oe}},ital:{color:{string:oe},size:{number:V},face:{string:oe},mod:{string:oe},vadjust:{number:V},__type__:{object:_e,string:oe}},mono:{color:{string:oe},size:{number:V},face:{string:oe},mod:{string:oe},vadjust:{number:V},__type__:{object:_e,string:oe}},__type__:{object:_e,string:oe}},group:{string:oe,number:V,undefined:"undefined"},heightConstraint:{minimum:{number:V},valign:{string:oe},__type__:{object:_e,boolean:re,number:V}},hidden:{boolean:re},icon:{face:{string:oe},code:{string:oe},size:{number:V},color:{string:oe},weight:{string:oe,number:V},__type__:{object:_e}},id:{string:oe,number:V},image:{selected:{string:oe,undefined:"undefined"},unselected:{string:oe,undefined:"undefined"},__type__:{object:_e,string:oe}},imagePadding:{top:{number:V},right:{number:V},bottom:{number:V},left:{number:V},__type__:{object:_e,number:V}},label:{string:oe,undefined:"undefined"},labelHighlightBold:{boolean:re},level:{number:V,undefined:"undefined"},margin:{top:{number:V},right:{number:V},bottom:{number:V},left:{number:V},__type__:{object:_e,number:V}},mass:{number:V},physics:{boolean:re},scaling:{min:{number:V},max:{number:V},label:{enabled:{boolean:re},min:{number:V},max:{number:V},maxVisible:{number:V},drawThreshold:{number:V},__type__:{object:_e,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:_e}},shadow:{enabled:{boolean:re},color:{string:oe},size:{number:V},x:{number:V},y:{number:V},__type__:{object:_e,boolean:re}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:re,array:gf},borderRadius:{number:V},interpolation:{boolean:re},useImageSize:{boolean:re},useBorderWithImage:{boolean:re},coordinateOrigin:{string:["center","top-left"]},__type__:{object:_e}},size:{number:V},title:{string:oe,dom:ele,undefined:"undefined"},value:{number:V,undefined:"undefined"},widthConstraint:{minimum:{number:V},maximum:{number:V},__type__:{object:_e,boolean:re,number:V}},x:{number:V},y:{number:V},__type__:{object:_e}},d4e={configure:{enabled:{boolean:re},filter:{boolean:re,string:oe,array:gf,function:"function"},container:{dom:ele},showButton:{boolean:re},__type__:{object:_e,boolean:re,string:oe,array:gf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:re},scaleFactor:{number:V},type:{string:Ij},imageHeight:{number:V},imageWidth:{number:V},src:{string:oe},__type__:{object:_e,boolean:re}},middle:{enabled:{boolean:re},scaleFactor:{number:V},type:{string:Ij},imageWidth:{number:V},imageHeight:{number:V},src:{string:oe},__type__:{object:_e,boolean:re}},from:{enabled:{boolean:re},scaleFactor:{number:V},type:{string:Ij},imageWidth:{number:V},imageHeight:{number:V},src:{string:oe},__type__:{object:_e,boolean:re}},__type__:{string:["from","to","middle"],object:_e}},endPointOffset:{from:{number:V},to:{number:V},__type__:{object:_e,number:V}},arrowStrikethrough:{boolean:re},background:{enabled:{boolean:re},color:{string:oe},size:{number:V},dashes:{boolean:re,array:gf},__type__:{object:_e,boolean:re}},chosen:{label:{boolean:re,function:"function"},edge:{boolean:re,function:"function"},__type__:{object:_e,boolean:re}},color:{color:{string:oe},highlight:{string:oe},hover:{string:oe},inherit:{string:["from","to","both"],boolean:re},opacity:{number:V},__type__:{object:_e,string:oe}},dashes:{boolean:re,array:gf},font:{color:{string:oe},size:{number:V},face:{string:oe},background:{string:oe},strokeWidth:{number:V},strokeColor:{string:oe},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:V},multi:{boolean:re,string:oe},bold:{color:{string:oe},size:{number:V},face:{string:oe},mod:{string:oe},vadjust:{number:V},__type__:{object:_e,string:oe}},boldital:{color:{string:oe},size:{number:V},face:{string:oe},mod:{string:oe},vadjust:{number:V},__type__:{object:_e,string:oe}},ital:{color:{string:oe},size:{number:V},face:{string:oe},mod:{string:oe},vadjust:{number:V},__type__:{object:_e,string:oe}},mono:{color:{string:oe},size:{number:V},face:{string:oe},mod:{string:oe},vadjust:{number:V},__type__:{object:_e,string:oe}},__type__:{object:_e,string:oe}},hidden:{boolean:re},hoverWidth:{function:"function",number:V},label:{string:oe,undefined:"undefined"},labelHighlightBold:{boolean:re},length:{number:V,undefined:"undefined"},physics:{boolean:re},scaling:{min:{number:V},max:{number:V},label:{enabled:{boolean:re},min:{number:V},max:{number:V},maxVisible:{number:V},drawThreshold:{number:V},__type__:{object:_e,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:_e}},selectionWidth:{function:"function",number:V},selfReferenceSize:{number:V},selfReference:{size:{number:V},angle:{number:V},renderBehindTheNode:{boolean:re},__type__:{object:_e}},shadow:{enabled:{boolean:re},color:{string:oe},size:{number:V},x:{number:V},y:{number:V},__type__:{object:_e,boolean:re}},smooth:{enabled:{boolean:re},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:V},forceDirection:{string:["horizontal","vertical","none"],boolean:re},__type__:{object:_e,boolean:re}},title:{string:oe,undefined:"undefined"},width:{number:V},widthConstraint:{maximum:{number:V},__type__:{object:_e,boolean:re,number:V}},value:{number:V,undefined:"undefined"},__type__:{object:_e}},groups:{useDefaultGroups:{boolean:re},__any__:Rj,__type__:{object:_e}},interaction:{dragNodes:{boolean:re},dragView:{boolean:re},hideEdgesOnDrag:{boolean:re},hideEdgesOnZoom:{boolean:re},hideNodesOnDrag:{boolean:re},hover:{boolean:re},keyboard:{enabled:{boolean:re},speed:{x:{number:V},y:{number:V},zoom:{number:V},__type__:{object:_e}},bindToWindow:{boolean:re},autoFocus:{boolean:re},__type__:{object:_e,boolean:re}},multiselect:{boolean:re},navigationButtons:{boolean:re},selectable:{boolean:re},selectConnectedEdges:{boolean:re},hoverConnectedEdges:{boolean:re},tooltipDelay:{number:V},zoomView:{boolean:re},zoomSpeed:{number:V},__type__:{object:_e}},layout:{randomSeed:{undefined:"undefined",number:V,string:oe},improvedLayout:{boolean:re},clusterThreshold:{number:V},hierarchical:{enabled:{boolean:re},levelSeparation:{number:V},nodeSpacing:{number:V},treeSpacing:{number:V},blockShifting:{boolean:re},edgeMinimization:{boolean:re},parentCentralization:{boolean:re},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:_e,boolean:re}},__type__:{object:_e}},manipulation:{enabled:{boolean:re},initiallyActive:{boolean:re},addNode:{boolean:re,function:"function"},addEdge:{boolean:re,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:_e,boolean:re,function:"function"}},deleteNode:{boolean:re,function:"function"},deleteEdge:{boolean:re,function:"function"},controlNodeStyle:Rj,__type__:{object:_e,boolean:re}},nodes:Rj,physics:{enabled:{boolean:re},barnesHut:{theta:{number:V},gravitationalConstant:{number:V},centralGravity:{number:V},springLength:{number:V},springConstant:{number:V},damping:{number:V},avoidOverlap:{number:V},__type__:{object:_e}},forceAtlas2Based:{theta:{number:V},gravitationalConstant:{number:V},centralGravity:{number:V},springLength:{number:V},springConstant:{number:V},damping:{number:V},avoidOverlap:{number:V},__type__:{object:_e}},repulsion:{centralGravity:{number:V},springLength:{number:V},springConstant:{number:V},nodeDistance:{number:V},damping:{number:V},__type__:{object:_e}},hierarchicalRepulsion:{centralGravity:{number:V},springLength:{number:V},springConstant:{number:V},nodeDistance:{number:V},damping:{number:V},avoidOverlap:{number:V},__type__:{object:_e}},maxVelocity:{number:V},minVelocity:{number:V},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:re},iterations:{number:V},updateInterval:{number:V},onlyDynamicEdges:{boolean:re},fit:{boolean:re},__type__:{object:_e,boolean:re}},timestep:{number:V},adaptiveTimestep:{boolean:re},wind:{x:{number:V},y:{number:V},__type__:{object:_e}},__type__:{object:_e,boolean:re}},autoResize:{boolean:re},clickToUse:{boolean:re},locale:{string:oe},locales:{__any__:{any:u4e},__type__:{object:_e}},height:{string:oe},width:{string:oe},__type__:{object:_e}},tle={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},h4e=(t,e,r)=>{var n;return!!(Wa(t).call(t,"physics")&&Wa(n=tle.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class f4e{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],c={};i[l]=c;for(let d=0;d<r.length;d++)c[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],c=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],v=Math.min(f[m],f[l]+c[m]);f[m]=v,g[h]=v}}}return i}}class p4e{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new f4e}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),c=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<c;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const c=r[l];if(n[c].predefinedPosition!==!0||n[c].isCluster===!0&&e===!0||n[c].options.fixed.x!==!0||n[c].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(c);i<d&&(i=d,s=c,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const c=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,N=s[S].y,E=h[S],k=f[S],C=1/((c-_)**2+(d-N)**2)**1.5;o+=E*(1-k*(d-N)**2*C),a+=E*(k*(c-_)*(d-N)*C),l+=E*(1-k*(c-_)**2*C)}}const p=o,m=a,g=r,v=l,y=n,b=(g/p+y/m)/(m/p-v/m),w=-(m*b+g)/p;s[e].x+=w,s[e].y+=b,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let c=n;c<e.length;c++){const d=e[c];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][c]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][c],a+=this.E_matrix[i][c][0],l+=this.E_matrix[i][c][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let c=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],v=n[f].x,y=n[f].y,b=1/Math.sqrt((a-v)**2+(l-y)**2),w=s[f]*(a-v-o[f]*(a-v)*b),x=s[f]*(l-y-o[f]*(l-y)*b);i[h]=[w,x],c+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[c,d]}}function we(t,e,r){var n,i,s,o;if(!(this instanceof we))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:FMe,clickToUse:!1},wr(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:ne(n=this.on).call(n,this),off:ne(i=this.off).call(i,this),emit:ne(s=this.emit).call(s,this),once:ne(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new BMe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new rAe,this.canvas=new Q$e(this.body),this.selectionHandler=new PFe(this.body,this.canvas),this.interactionHandler=new eFe(this.body,this.canvas,this.selectionHandler),this.view=new J$e(this.body,this.canvas),this.renderer=new H$e(this.body,this.canvas),this.physics=new $$e(this.body),this.layoutEngine=new l4e(this.body),this.clustering=new U$e(this.body),this.manipulation=new c4e(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new d$e(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new P$e(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new p4e(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}Poe(we.prototype);we.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(mMe.validate(t,d4e)===!0&&console.error("%cErrors have been found in the supplied options object.",Cae),jh(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=qMe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new fMe(this,this.body.container,tle,this.canvas.pixelRatio,h4e)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Ot(n.nodes,this.nodesHandler.options),Ot(n.edges,this.edgesHandler.options),Ot(n.layout,this.layoutEngine.options),Ot(n.interaction,this.selectionHandler.options),Ot(n.interaction,this.renderer.options),Ot(n.interaction,this.interactionHandler.options),Ot(n.manipulation,this.manipulation.options),Ot(n.physics,this.physics.options),Ot(n.global,this.canvas.options),Ot(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new hMe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};we.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};we.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};we.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=NMe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=CMe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};we.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];sa(this.body.container)};we.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};we.prototype.isActive=function(){return!this.activator||this.activator.active};we.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};we.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};we.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};we.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};we.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};we.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};we.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};we.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};we.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};we.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};we.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};we.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};we.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};we.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};we.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};we.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};we.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};we.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};we.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};we.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};we.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};we.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};we.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};we.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};we.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};we.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};we.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};we.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};we.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};we.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};we.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};we.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};we.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};we.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};we.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};we.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};we.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};we.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};we.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};we.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};we.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};we.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};we.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};we.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};we.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};we.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};we.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};we.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};we.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};we.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};we.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};we.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function m4e({graphData:t,startPersonId:e,onNodeClick:r}){const n=T.useRef(null),i=T.useRef(null),s=ms(),o=T.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);T.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new Ud(t.nodes),h=new Ud(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new we(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),v={},y=new Set;m.forEach(([b,w])=>{if(y.has(b)||y.has(w))return;const x=g[b],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;v[b]={x:_-60,y:x.y},v[w]={x:_+60,y:S.y},y.add(b),y.add(w)}),Object.entries(v).forEach(([b,w])=>{p.moveNode(b,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},c=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[u.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:u.jsx(qpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:u.jsx(Lpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:u.jsx(Mte,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),u.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const g4e=["parent","child","spouse","lover","partner"];function y4e(t){return g4e.includes(t==null?void 0:t.toLowerCase())}function v4e(t){return(t==null?void 0:t.toLowerCase())==="parent"}function b4e(t){return(t==null?void 0:t.toLowerCase())==="child"}function x4e(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function w4e(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var b,w,x,S;let p=h.name||((b=h.title)==null?void 0:b.rendered)||h.title||`Person ${f}`;if(p&&typeof p=="string"&&typeof document<"u"){const _=document.createElement("textarea");_.innerHTML=p,p=_.value}let m=null,g=((w=h.acf)==null?void 0:w.birth_date)||null;if(g){const _=new Date(g);isNaN(_.getTime())||(m=Math.floor((new Date-_)/(365.25*24*60*60*1e3)))}let v="";switch((x=h.acf)==null?void 0:x.gender){case"male":v="";break;case"female":v="";break;case"non_binary":case"other":case"prefer_not_to_say":v="";break}let y="";if(g)try{const _=new Date(g);if(!isNaN(_.getTime())){const N=String(_.getDate()).padStart(2,"0"),E=String(_.getMonth()+1).padStart(2,"0"),k=_.getFullYear();y=`${N}-${E}-${k}`}}catch{}return{id:f,name:p,gender:((S=h.acf)==null?void 0:S.gender)||"",genderSymbol:v,photo:h.thumbnail||null,age:m,birthDate:g,formattedBirthDate:y}}const c=o.get(t);for(c&&n.set(t,l(c,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!y4e(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const v=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===v||`${w.from}-${w.to}`===y)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(v4e(w))i.push({from:g,to:h,type:"parent-child"});else if(b4e(w))i.push({from:h,to:g,type:"parent-child"});else if(x4e(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function S4e(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(v=>{s.set(v.id,[]),o.set(v.id,[]),a.set(v.id,[])}),i.forEach(v=>{var y,b,w,x;v.type==="parent-child"?((y=s.get(v.to))==null||y.push(v.from),(b=o.get(v.from))==null||b.push(v.to)):v.type==="spouse"&&((w=a.get(v.from))==null||w.push(v.to),(x=a.get(v.to))==null||x.push(v.from))});const l=new Map,c=new Set,d=[{id:e,generation:0}];for(l.set(e,0),c.add(e);d.length>0;){const{id:v,generation:y}=d.shift(),b=s.get(v)||[];for(const S of b)c.has(S)||(c.add(S),l.set(S,y-1),d.push({id:S,generation:y-1}));const w=o.get(v)||[];for(const S of w)c.has(S)||(c.add(S),l.set(S,y+1),d.push({id:S,generation:y+1}));const x=a.get(v)||[];for(const S of x)c.has(S)||(c.add(S),l.set(S,y),d.push({id:S,generation:y}))}n.forEach(v=>{l.has(v.id)||l.set(v.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((v,y)=>{f.set(y,v-h)});function p(v,y,b=!1){const w=v?v.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2):"?";let x,S;b?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(v=>{const y=f.get(v.id)||0,b=v.id===e,w=r[v.id]||!1;let x=v.name;w&&(x=v.name+" ");let S=[x],_="";v.genderSymbol&&(_+=v.genderSymbol+" "),v.age!==null&&(_+=v.age+" "),v.formattedBirthDate&&(_+=v.formattedBirthDate),_.trim()&&S.push(_.trim());const N=v.photo||p(v.name,b,w);let E="#d1d5db";return b?E="#f59e0b":w&&(E="#9ca3af"),{id:v.id,label:S.join(`
`),level:y,shape:"circularImage",image:N,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:E,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:b?3:2,data:{...v,isDeceased:w}}}),g=i.map((v,y)=>{const b=v.type==="spouse";return{id:`edge-${y}`,from:v.from,to:v.to,arrows:{to:{enabled:!1}},color:{color:b?"#ec4899":"#9ca3af",highlight:b?"#db2777":"#6b7280"},width:2,dashes:b?[5,5]:!1,smooth:!1,length:b?50:300}});return{nodes:m,edges:g}}function _4e(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var c,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((c=o.relationship_type)==null?void 0:c.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function E4e(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function N4e(){var p,m;const{id:t}=Gp(),e=ms(),r=parseInt(t,10),{data:n,isLoading:i}=SM(t),{data:s=[],isLoading:o}=em(),{data:a=[]}=ft({queryKey:["relationship-types"],queryFn:async()=>(await Ge.getRelationshipTypes()).data}),l=T.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),c=ZP({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await $e.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=T.useMemo(()=>{const g={};return c.forEach((v,y)=>{if(v.data&&l[y]){const b=l[y],w=v.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[b]=w}}),g},[c,l]);al(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=T.useMemo(()=>{if(!n||!s.length)return null;try{const g=_4e(s);a.length>0&&E4e(g,a);const v=w4e(r,s,g);return!v||v.nodes.length===0?null:S4e(v,r,d)}catch(g){return console.error("Error building family tree:",g),null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?u.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(Pe,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(bc,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),u.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),u.jsx("div",{className:"card p-6",children:u.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?u.jsx(m4e,{graphData:h,startPersonId:r,onNodeClick:f}):u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),u.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),u.jsx(Pe,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function C4e(){const{loginUrl:t,isLoggedIn:e}=fM();return Bte(),T.useEffect(()=>{e||(window.location.href=t)},[e,t]),u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function k4e({children:t}){const{data:e,isLoading:r,error:n}=ft({queryKey:["current-user"],queryFn:async()=>(await $e.getCurrentUser()).data,retry:!1});return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Po,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Po,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function T4e({children:t}){const{isLoggedIn:e,isLoading:r}=fM();return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?u.jsx(k4e,{children:t}):u.jsx(Lee,{to:"/login",replace:!0})}function O4e(){return u.jsxs(cF,{children:[u.jsx(Or,{path:"/login",element:u.jsx(C4e,{})}),u.jsx(Or,{path:"/*",element:u.jsx(T4e,{children:u.jsx(lme,{children:u.jsxs(cF,{children:[u.jsx(Or,{path:"/",element:u.jsx(i_e,{})}),u.jsx(Or,{path:"/people",element:u.jsx(o_e,{})}),u.jsx(Or,{path:"/people/new",element:u.jsx(Mq,{})}),u.jsx(Or,{path:"/people/:id/family-tree",element:u.jsx(N4e,{})}),u.jsx(Or,{path:"/people/:id/edit",element:u.jsx(Mq,{})}),u.jsx(Or,{path:"/people/:id",element:u.jsx(nEe,{})}),u.jsx(Or,{path:"/companies",element:u.jsx(sEe,{})}),u.jsx(Or,{path:"/companies/new",element:u.jsx(Aq,{})}),u.jsx(Or,{path:"/companies/:id",element:u.jsx(oEe,{})}),u.jsx(Or,{path:"/companies/:id/edit",element:u.jsx(Aq,{})}),u.jsx(Or,{path:"/dates",element:u.jsx(cEe,{})}),u.jsx(Or,{path:"/todos",element:u.jsx(uEe,{})}),u.jsx(Or,{path:"/settings",element:u.jsx(gEe,{})}),u.jsx(Or,{path:"/settings/relationship-types",element:u.jsx(SEe,{})}),u.jsx(Or,{path:"/settings/user-approval",element:u.jsx(_Ee,{})}),u.jsx(Or,{path:"*",element:u.jsx(Lee,{to:"/",replace:!0})})]})})})})]})}const j4e=new Phe({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),Mj=document.getElementById("root");if(!Mj)console.error('Root element not found! Make sure there is a <div id="root"></div> in your HTML.');else try{Aj.createRoot(Mj).render(u.jsx(ve.StrictMode,{children:u.jsx(Ihe,{client:j4e,children:u.jsx(ehe,{children:u.jsx(O4e,{})})})}))}catch(t){console.error("Error mounting React app:",t),Mj.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
