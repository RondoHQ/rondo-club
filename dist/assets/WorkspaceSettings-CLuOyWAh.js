import{m as w,e as v,r as n,j as e,L as h}from"./vendor-CjdX6t1i.js";import{u as C}from"./utils-D5Yy9kBW.js";import{a6 as D,ac as S,ad as W}from"./main-D6r1FXj6.js";import{A as T}from"./arrow-left-C9KexAZo.js";import{A}from"./alert-triangle-CTx-MD4S.js";import{T as P}from"./trash-2-GMOh3z4B.js";function M(){var u;const{id:r}=w(),c=v(),[b,d]=n.useState(!1),[a,o]=n.useState(""),{data:s,isLoading:g,error:f}=D(r),i=S(),l=W(),{register:m,handleSubmit:j,reset:x,formState:{errors:p,isDirty:y}}=C();n.useEffect(()=>{s&&x({title:s.title,description:s.description||""})},[s,x]);const N=async t=>{await i.mutateAsync({id:parseInt(r),data:{title:t.title,content:t.description}})},k=async()=>{a===s.title&&(await l.mutateAsync(parseInt(r)),c("/workspaces"))};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):f||!s?e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("p",{className:"text-red-600",children:"Failed to load workspace."}),e.jsx(h,{to:"/workspaces",className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspaces"})]}):((u=s.current_user)==null?void 0:u.is_owner)?e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>c(`/workspaces/${r}`),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Back to Workspace"]}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspace Settings"}),e.jsx("p",{className:"text-gray-500 mt-1",children:s.title})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"General"})}),e.jsxs("form",{onSubmit:j(N),className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),e.jsx("input",{type:"text",...m("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),p.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{...m("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:!y||i.isPending,className:"btn-primary disabled:opacity-50",children:i.isPending?"Saving...":"Save Changes"})})]})]}),e.jsxs("div",{className:"card border-red-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-red-200 bg-red-50",children:e.jsxs("h2",{className:"text-lg font-medium text-red-900 flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),"Danger Zone"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(P,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Delete Workspace"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will permanently delete the workspace and remove all member access. Contacts will remain but will no longer be shared via this workspace."}),b?e.jsxs("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-red-800 mb-3",children:["Type ",e.jsx("strong",{children:s.title})," to confirm deletion:"]}),e.jsx("input",{type:"text",value:a,onChange:t=>o(t.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 mb-3",placeholder:"Type workspace name..."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{d(!1),o("")},className:"btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:k,disabled:a!==s.title||l.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l.isPending?"Deleting...":"Delete Forever"})]})]}):e.jsx("button",{onClick:()=>d(!0),className:"mt-4 px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:"Delete Workspace"})]})]})})]})]}):e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Only workspace owners can access settings."}),e.jsx(h,{to:`/workspaces/${r}`,className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspace"})]})}export{M as default};
