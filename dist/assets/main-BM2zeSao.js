var YD=t=>{throw TypeError(t)};var Bb=(t,e,r)=>e.has(t)||YD("Cannot "+r);var R=(t,e,r)=>(Bb(t,e,"read from private field"),r?r.call(t):e.get(t)),ve=(t,e,r)=>e.has(t)?YD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ae=(t,e,r,n)=>(Bb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Me=(t,e,r)=>(Bb(t,e,"access private method"),r);var Zm=(t,e,r,n)=>({set _(i){ae(t,e,i,r)},get _(){return R(t,e,n)}});function Mle(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function vJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bJ={exports:{}},n0={},xJ={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=Symbol.for("react.element"),Ale=Symbol.for("react.portal"),Dle=Symbol.for("react.fragment"),$le=Symbol.for("react.strict_mode"),Fle=Symbol.for("react.profiler"),qle=Symbol.for("react.provider"),Lle=Symbol.for("react.context"),Ble=Symbol.for("react.forward_ref"),zle=Symbol.for("react.suspense"),Vle=Symbol.for("react.memo"),Ule=Symbol.for("react.lazy"),QD=Symbol.iterator;function Hle(t){return t===null||typeof t!="object"?null:(t=QD&&t[QD]||t["@@iterator"],typeof t=="function"?t:null)}var wJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SJ=Object.assign,_J={};function rh(t,e,r){this.props=t,this.context=e,this.refs=_J,this.updater=r||wJ}rh.prototype.isReactComponent={};rh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EJ(){}EJ.prototype=rh.prototype;function cR(t,e,r){this.props=t,this.context=e,this.refs=_J,this.updater=r||wJ}var uR=cR.prototype=new EJ;uR.constructor=cR;SJ(uR,rh.prototype);uR.isPureReactComponent=!0;var XD=Array.isArray,NJ=Object.prototype.hasOwnProperty,dR={current:null},CJ={key:!0,ref:!0,__self:!0,__source:!0};function kJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)NJ.call(e,n)&&!CJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Hp,type:t,key:s,ref:o,props:i,_owner:dR.current}}function Wle(t,e){return{$$typeof:Hp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hR(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hp}function Kle(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var JD=/\/+/g;function zb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kle(""+t.key):e.toString(36)}function Vg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hp:case Ale:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+zb(o,0):n,XD(i)?(r="",t!=null&&(r=t.replace(JD,"$&/")+"/"),Vg(i,e,r,"",function(c){return c})):i!=null&&(hR(i)&&(i=Wle(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(JD,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",XD(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+zb(s,a);o+=Vg(s,e,r,l,i)}else if(l=Hle(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+zb(s,a++),o+=Vg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function eg(t,e,r){if(t==null)return t;var n=[],i=0;return Vg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Gle(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dn={current:null},Ug={transition:null},Yle={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:Ug,ReactCurrentOwner:dR};function TJ(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:eg,forEach:function(t,e,r){eg(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return eg(t,function(){e++}),e},toArray:function(t){return eg(t,function(e){return e})||[]},only:function(t){if(!hR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=rh;et.Fragment=Dle;et.Profiler=Fle;et.PureComponent=cR;et.StrictMode=$le;et.Suspense=zle;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yle;et.act=TJ;et.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=SJ({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=dR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)NJ.call(e,l)&&!CJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Hp,type:t.type,key:i,ref:s,props:n,_owner:o}};et.createContext=function(t){return t={$$typeof:Lle,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qle,_context:t},t.Consumer=t};et.createElement=kJ;et.createFactory=function(t){var e=kJ.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:Ble,render:t}};et.isValidElement=hR;et.lazy=function(t){return{$$typeof:Ule,_payload:{_status:-1,_result:t},_init:Gle}};et.memo=function(t,e){return{$$typeof:Vle,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=Ug.transition;Ug.transition={};try{t()}finally{Ug.transition=e}};et.unstable_act=TJ;et.useCallback=function(t,e){return Dn.current.useCallback(t,e)};et.useContext=function(t){return Dn.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return Dn.current.useDeferredValue(t)};et.useEffect=function(t,e){return Dn.current.useEffect(t,e)};et.useId=function(){return Dn.current.useId()};et.useImperativeHandle=function(t,e,r){return Dn.current.useImperativeHandle(t,e,r)};et.useInsertionEffect=function(t,e){return Dn.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return Dn.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return Dn.current.useMemo(t,e)};et.useReducer=function(t,e,r){return Dn.current.useReducer(t,e,r)};et.useRef=function(t){return Dn.current.useRef(t)};et.useState=function(t){return Dn.current.useState(t)};et.useSyncExternalStore=function(t,e,r){return Dn.current.useSyncExternalStore(t,e,r)};et.useTransition=function(){return Dn.current.useTransition()};et.version="18.3.1";xJ.exports=et;var T=xJ.exports;const xe=vJ(T),Qle=Mle({__proto__:null,default:xe},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xle=T,Jle=Symbol.for("react.element"),Zle=Symbol.for("react.fragment"),ece=Object.prototype.hasOwnProperty,tce=Xle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rce={key:!0,ref:!0,__self:!0,__source:!0};function OJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)ece.call(e,n)&&!rce.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Jle,type:t,key:s,ref:o,props:i,_owner:tce.current}}n0.Fragment=Zle;n0.jsx=OJ;n0.jsxs=OJ;bJ.exports=n0;var u=bJ.exports,Mj={},jJ={exports:{}},vi={},PJ={exports:{}},IJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,K){var X=F.length;F.push(K);e:for(;0<X;){var G=X-1>>>1,L=F[G];if(0<i(L,K))F[G]=K,F[X]=L,X=G;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var K=F[0],X=F.pop();if(X!==K){F[0]=X;e:for(var G=0,L=F.length,Z=L>>>1;G<Z;){var ce=2*(G+1)-1,Be=F[ce],Te=ce+1,tt=F[Te];if(0>i(Be,X))Te<L&&0>i(tt,Be)?(F[G]=tt,F[Te]=X,G=Te):(F[G]=Be,F[ce]=X,G=ce);else if(Te<L&&0>i(tt,X))F[G]=tt,F[Te]=X,G=Te;else break e}}return K}function i(F,K){var X=F.sortIndex-K.sortIndex;return X!==0?X:F.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var K=r(c);K!==null;){if(K.callback===null)n(c);else if(K.startTime<=F)n(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=r(c)}}function x(F){if(g=!1,w(F),!m)if(r(l)!==null)m=!0,D(S);else{var K=r(c);K!==null&&B(x,K.startTime-F)}}function S(F,K){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var X=f;try{for(w(K),h=r(l);h!==null&&(!(h.expirationTime>K)||F&&!j());){var G=h.callback;if(typeof G=="function"){h.callback=null,f=h.priorityLevel;var L=G(h.expirationTime<=K);K=t.unstable_now(),typeof L=="function"?h.callback=L:h===r(l)&&n(l),w(K)}else n(l);h=r(l)}if(h!==null)var Z=!0;else{var ce=r(c);ce!==null&&B(x,ce.startTime-K),Z=!1}return Z}finally{h=null,f=X,p=!1}}var _=!1,N=null,E=-1,C=5,k=-1;function j(){return!(t.unstable_now()-k<C)}function P(){if(N!==null){var F=t.unstable_now();k=F;var K=!0;try{K=N(!0,F)}finally{K?O():(_=!1,N=null)}}else _=!1}var O;if(typeof b=="function")O=function(){b(P)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,q=A.port2;A.port1.onmessage=P,O=function(){q.postMessage(null)}}else O=function(){v(P,0)};function D(F){N=F,_||(_=!0,O())}function B(F,K){E=v(function(){F(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var X=f;f=K;try{return F()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=f;f=F;try{return K()}finally{f=X}},t.unstable_scheduleCallback=function(F,K,X){var G=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?G+X:G):X=G,F){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=X+L,F={id:d++,callback:K,priorityLevel:F,startTime:X,expirationTime:L,sortIndex:-1},X>G?(F.sortIndex=X,e(c,F),r(l)===null&&F===r(c)&&(g?(y(E),E=-1):g=!0,B(x,X-G))):(F.sortIndex=L,e(l,F),m||p||(m=!0,D(S))),F},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(F){var K=f;return function(){var X=f;f=K;try{return F.apply(this,arguments)}finally{f=X}}}})(IJ);PJ.exports=IJ;var nce=PJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ice=T,yi=nce;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RJ=new Set,Wf={};function zc(t,e){kd(t,e),kd(t+"Capture",e)}function kd(t,e){for(Wf[t]=e,t=0;t<e.length;t++)RJ.add(e[t])}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Aj=Object.prototype.hasOwnProperty,sce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZD={},e$={};function oce(t){return Aj.call(e$,t)?!0:Aj.call(ZD,t)?!1:sce.test(t)?e$[t]=!0:(ZD[t]=!0,!1)}function ace(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lce(t,e,r,n){if(e===null||typeof e>"u"||ace(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $n(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new $n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new $n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new $n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new $n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new $n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new $n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new $n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new $n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new $n(t,5,!1,t.toLowerCase(),null,!1,!1)});var fR=/[\-:]([a-z])/g;function pR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fR,pR);on[e]=new $n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fR,pR);on[e]=new $n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fR,pR);on[e]=new $n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new $n(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new $n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new $n(t,1,!1,t.toLowerCase(),null,!0,!0)});function mR(t,e,r,n){var i=on.hasOwnProperty(e)?on[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lce(e,r,i,n)&&(r=null),n||i===null?oce(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ao=ice.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tg=Symbol.for("react.element"),Pu=Symbol.for("react.portal"),Iu=Symbol.for("react.fragment"),gR=Symbol.for("react.strict_mode"),Dj=Symbol.for("react.profiler"),MJ=Symbol.for("react.provider"),AJ=Symbol.for("react.context"),yR=Symbol.for("react.forward_ref"),$j=Symbol.for("react.suspense"),Fj=Symbol.for("react.suspense_list"),vR=Symbol.for("react.memo"),ea=Symbol.for("react.lazy"),DJ=Symbol.for("react.offscreen"),t$=Symbol.iterator;function Bh(t){return t===null||typeof t!="object"?null:(t=t$&&t[t$]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,Vb;function lf(t){if(Vb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Vb=e&&e[1]||""}return`
`+Vb+t}var Ub=!1;function Hb(t,e){if(!t||Ub)return"";Ub=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ub=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?lf(t):""}function cce(t){switch(t.tag){case 5:return lf(t.type);case 16:return lf("Lazy");case 13:return lf("Suspense");case 19:return lf("SuspenseList");case 0:case 2:case 15:return t=Hb(t.type,!1),t;case 11:return t=Hb(t.type.render,!1),t;case 1:return t=Hb(t.type,!0),t;default:return""}}function qj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Iu:return"Fragment";case Pu:return"Portal";case Dj:return"Profiler";case gR:return"StrictMode";case $j:return"Suspense";case Fj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case AJ:return(t.displayName||"Context")+".Consumer";case MJ:return(t._context.displayName||"Context")+".Provider";case yR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vR:return e=t.displayName||null,e!==null?e:qj(t.type)||"Memo";case ea:e=t._payload,t=t._init;try{return qj(t(e))}catch{}}return null}function uce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qj(e);case 8:return e===gR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $J(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dce(t){var e=$J(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rg(t){t._valueTracker||(t._valueTracker=dce(t))}function FJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=$J(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function my(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lj(t,e){var r=e.checked;return Gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function r$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Xa(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qJ(t,e){e=e.checked,e!=null&&mR(t,"checked",e,!1)}function Bj(t,e){qJ(t,e);var r=Xa(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zj(t,e.type,r):e.hasOwnProperty("defaultValue")&&zj(t,e.type,Xa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zj(t,e,r){(e!=="number"||my(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var cf=Array.isArray;function Xu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Xa(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function i$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(re(92));if(cf(r)){if(1<r.length)throw Error(re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Xa(r)}}function LJ(t,e){var r=Xa(e.value),n=Xa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function s$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function BJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?BJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ng,zJ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ng=ng||document.createElement("div"),ng.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ng.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var bf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hce=["Webkit","ms","Moz","O"];Object.keys(bf).forEach(function(t){hce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bf[e]=bf[t]})});function VJ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||bf.hasOwnProperty(t)&&bf[t]?(""+e).trim():e+"px"}function UJ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=VJ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var fce=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hj(t,e){if(e){if(fce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Wj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kj=null;function bR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gj=null,Ju=null,Zu=null;function o$(t){if(t=Gp(t)){if(typeof Gj!="function")throw Error(re(280));var e=t.stateNode;e&&(e=l0(e),Gj(t.stateNode,t.type,e))}}function HJ(t){Ju?Zu?Zu.push(t):Zu=[t]:Ju=t}function WJ(){if(Ju){var t=Ju,e=Zu;if(Zu=Ju=null,o$(t),e)for(t=0;t<e.length;t++)o$(e[t])}}function KJ(t,e){return t(e)}function GJ(){}var Wb=!1;function YJ(t,e,r){if(Wb)return t(e,r);Wb=!0;try{return KJ(t,e,r)}finally{Wb=!1,(Ju!==null||Zu!==null)&&(GJ(),WJ())}}function Gf(t,e){var r=t.stateNode;if(r===null)return null;var n=l0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(re(231,e,typeof r));return r}var Yj=!1;if(Oo)try{var zh={};Object.defineProperty(zh,"passive",{get:function(){Yj=!0}}),window.addEventListener("test",zh,zh),window.removeEventListener("test",zh,zh)}catch{Yj=!1}function pce(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var xf=!1,gy=null,yy=!1,Qj=null,mce={onError:function(t){xf=!0,gy=t}};function gce(t,e,r,n,i,s,o,a,l){xf=!1,gy=null,pce.apply(mce,arguments)}function yce(t,e,r,n,i,s,o,a,l){if(gce.apply(this,arguments),xf){if(xf){var c=gy;xf=!1,gy=null}else throw Error(re(198));yy||(yy=!0,Qj=c)}}function Vc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function QJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function a$(t){if(Vc(t)!==t)throw Error(re(188))}function vce(t){var e=t.alternate;if(!e){if(e=Vc(t),e===null)throw Error(re(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return a$(i),t;if(s===n)return a$(i),e;s=s.sibling}throw Error(re(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(re(189))}}if(r.alternate!==n)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?t:e}function XJ(t){return t=vce(t),t!==null?JJ(t):null}function JJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=JJ(t);if(e!==null)return e;t=t.sibling}return null}var ZJ=yi.unstable_scheduleCallback,l$=yi.unstable_cancelCallback,bce=yi.unstable_shouldYield,xce=yi.unstable_requestPaint,ur=yi.unstable_now,wce=yi.unstable_getCurrentPriorityLevel,xR=yi.unstable_ImmediatePriority,eZ=yi.unstable_UserBlockingPriority,vy=yi.unstable_NormalPriority,Sce=yi.unstable_LowPriority,tZ=yi.unstable_IdlePriority,i0=null,Ds=null;function _ce(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(i0,t,void 0,(t.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:Cce,Ece=Math.log,Nce=Math.LN2;function Cce(t){return t>>>=0,t===0?32:31-(Ece(t)/Nce|0)|0}var ig=64,sg=4194304;function uf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function by(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=uf(a):(s&=o,s!==0&&(n=uf(s)))}else o=r&~i,o!==0?n=uf(o):s!==0&&(n=uf(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-hs(e),i=1<<r,n|=t[r],e&=~i;return n}function kce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tce(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-hs(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=kce(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Xj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rZ(){var t=ig;return ig<<=1,!(ig&4194240)&&(ig=64),t}function Kb(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Wp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hs(e),t[e]=r}function Oce(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-hs(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function wR(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-hs(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var vt=0;function nZ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var iZ,SR,sZ,oZ,aZ,Jj=!1,og=[],ja=null,Pa=null,Ia=null,Yf=new Map,Qf=new Map,la=[],jce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c$(t,e){switch(t){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Yf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qf.delete(e.pointerId)}}function Vh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gp(e),e!==null&&SR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Pce(t,e,r,n,i){switch(e){case"focusin":return ja=Vh(ja,t,e,r,n,i),!0;case"dragenter":return Pa=Vh(Pa,t,e,r,n,i),!0;case"mouseover":return Ia=Vh(Ia,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Yf.set(s,Vh(Yf.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Qf.set(s,Vh(Qf.get(s)||null,t,e,r,n,i)),!0}return!1}function lZ(t){var e=Rl(t.target);if(e!==null){var r=Vc(e);if(r!==null){if(e=r.tag,e===13){if(e=QJ(r),e!==null){t.blockedOn=e,aZ(t.priority,function(){sZ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Zj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Kj=n,r.target.dispatchEvent(n),Kj=null}else return e=Gp(r),e!==null&&SR(e),t.blockedOn=r,!1;e.shift()}return!0}function u$(t,e,r){Hg(t)&&r.delete(e)}function Ice(){Jj=!1,ja!==null&&Hg(ja)&&(ja=null),Pa!==null&&Hg(Pa)&&(Pa=null),Ia!==null&&Hg(Ia)&&(Ia=null),Yf.forEach(u$),Qf.forEach(u$)}function Uh(t,e){t.blockedOn===e&&(t.blockedOn=null,Jj||(Jj=!0,yi.unstable_scheduleCallback(yi.unstable_NormalPriority,Ice)))}function Xf(t){function e(i){return Uh(i,t)}if(0<og.length){Uh(og[0],t);for(var r=1;r<og.length;r++){var n=og[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ja!==null&&Uh(ja,t),Pa!==null&&Uh(Pa,t),Ia!==null&&Uh(Ia,t),Yf.forEach(e),Qf.forEach(e),r=0;r<la.length;r++)n=la[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<la.length&&(r=la[0],r.blockedOn===null);)lZ(r),r.blockedOn===null&&la.shift()}var ed=Ao.ReactCurrentBatchConfig,xy=!0;function Rce(t,e,r,n){var i=vt,s=ed.transition;ed.transition=null;try{vt=1,_R(t,e,r,n)}finally{vt=i,ed.transition=s}}function Mce(t,e,r,n){var i=vt,s=ed.transition;ed.transition=null;try{vt=4,_R(t,e,r,n)}finally{vt=i,ed.transition=s}}function _R(t,e,r,n){if(xy){var i=Zj(t,e,r,n);if(i===null)n1(t,e,n,wy,r),c$(t,n);else if(Pce(i,t,e,r,n))n.stopPropagation();else if(c$(t,n),e&4&&-1<jce.indexOf(t)){for(;i!==null;){var s=Gp(i);if(s!==null&&iZ(s),s=Zj(t,e,r,n),s===null&&n1(t,e,n,wy,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else n1(t,e,n,null,r)}}var wy=null;function Zj(t,e,r,n){if(wy=null,t=bR(n),t=Rl(t),t!==null)if(e=Vc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=QJ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wy=t,null}function cZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wce()){case xR:return 1;case eZ:return 4;case vy:case Sce:return 16;case tZ:return 536870912;default:return 16}default:return 16}}var _a=null,ER=null,Wg=null;function uZ(){if(Wg)return Wg;var t,e=ER,r=e.length,n,i="value"in _a?_a.value:_a.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Wg=i.slice(t,1<n?1-n:void 0)}function Kg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ag(){return!0}function d$(){return!1}function bi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ag:d$,this.isPropagationStopped=d$,this}return Gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ag)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ag)},persist:function(){},isPersistent:ag}),e}var nh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NR=bi(nh),Kp=Gt({},nh,{view:0,detail:0}),Ace=bi(Kp),Gb,Yb,Hh,s0=Gt({},Kp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hh&&(Hh&&t.type==="mousemove"?(Gb=t.screenX-Hh.screenX,Yb=t.screenY-Hh.screenY):Yb=Gb=0,Hh=t),Gb)},movementY:function(t){return"movementY"in t?t.movementY:Yb}}),h$=bi(s0),Dce=Gt({},s0,{dataTransfer:0}),$ce=bi(Dce),Fce=Gt({},Kp,{relatedTarget:0}),Qb=bi(Fce),qce=Gt({},nh,{animationName:0,elapsedTime:0,pseudoElement:0}),Lce=bi(qce),Bce=Gt({},nh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zce=bi(Bce),Vce=Gt({},nh,{data:0}),f$=bi(Vce),Uce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wce[t])?!!e[t]:!1}function CR(){return Kce}var Gce=Gt({},Kp,{key:function(t){if(t.key){var e=Uce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CR,charCode:function(t){return t.type==="keypress"?Kg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yce=bi(Gce),Qce=Gt({},s0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p$=bi(Qce),Xce=Gt({},Kp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CR}),Jce=bi(Xce),Zce=Gt({},nh,{propertyName:0,elapsedTime:0,pseudoElement:0}),eue=bi(Zce),tue=Gt({},s0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rue=bi(tue),nue=[9,13,27,32],kR=Oo&&"CompositionEvent"in window,wf=null;Oo&&"documentMode"in document&&(wf=document.documentMode);var iue=Oo&&"TextEvent"in window&&!wf,dZ=Oo&&(!kR||wf&&8<wf&&11>=wf),m$=" ",g$=!1;function hZ(t,e){switch(t){case"keyup":return nue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fZ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ru=!1;function sue(t,e){switch(t){case"compositionend":return fZ(e);case"keypress":return e.which!==32?null:(g$=!0,m$);case"textInput":return t=e.data,t===m$&&g$?null:t;default:return null}}function oue(t,e){if(Ru)return t==="compositionend"||!kR&&hZ(t,e)?(t=uZ(),Wg=ER=_a=null,Ru=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dZ&&e.locale!=="ko"?null:e.data;default:return null}}var aue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aue[t.type]:e==="textarea"}function pZ(t,e,r,n){HJ(n),e=Sy(e,"onChange"),0<e.length&&(r=new NR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Sf=null,Jf=null;function lue(t){NZ(t,0)}function o0(t){var e=Du(t);if(FJ(e))return t}function cue(t,e){if(t==="change")return e}var mZ=!1;if(Oo){var Xb;if(Oo){var Jb="oninput"in document;if(!Jb){var v$=document.createElement("div");v$.setAttribute("oninput","return;"),Jb=typeof v$.oninput=="function"}Xb=Jb}else Xb=!1;mZ=Xb&&(!document.documentMode||9<document.documentMode)}function b$(){Sf&&(Sf.detachEvent("onpropertychange",gZ),Jf=Sf=null)}function gZ(t){if(t.propertyName==="value"&&o0(Jf)){var e=[];pZ(e,Jf,t,bR(t)),YJ(lue,e)}}function uue(t,e,r){t==="focusin"?(b$(),Sf=e,Jf=r,Sf.attachEvent("onpropertychange",gZ)):t==="focusout"&&b$()}function due(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return o0(Jf)}function hue(t,e){if(t==="click")return o0(e)}function fue(t,e){if(t==="input"||t==="change")return o0(e)}function pue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ps=typeof Object.is=="function"?Object.is:pue;function Zf(t,e){if(ps(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Aj.call(e,i)||!ps(t[i],e[i]))return!1}return!0}function x$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function w$(t,e){var r=x$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=x$(r)}}function yZ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yZ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vZ(){for(var t=window,e=my();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=my(t.document)}return e}function TR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mue(t){var e=vZ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&yZ(r.ownerDocument.documentElement,r)){if(n!==null&&TR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=w$(r,s);var o=w$(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gue=Oo&&"documentMode"in document&&11>=document.documentMode,Mu=null,eP=null,_f=null,tP=!1;function S$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tP||Mu==null||Mu!==my(n)||(n=Mu,"selectionStart"in n&&TR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_f&&Zf(_f,n)||(_f=n,n=Sy(eP,"onSelect"),0<n.length&&(e=new NR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Mu)))}function lg(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Au={animationend:lg("Animation","AnimationEnd"),animationiteration:lg("Animation","AnimationIteration"),animationstart:lg("Animation","AnimationStart"),transitionend:lg("Transition","TransitionEnd")},Zb={},bZ={};Oo&&(bZ=document.createElement("div").style,"AnimationEvent"in window||(delete Au.animationend.animation,delete Au.animationiteration.animation,delete Au.animationstart.animation),"TransitionEvent"in window||delete Au.transitionend.transition);function a0(t){if(Zb[t])return Zb[t];if(!Au[t])return t;var e=Au[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in bZ)return Zb[t]=e[r];return t}var xZ=a0("animationend"),wZ=a0("animationiteration"),SZ=a0("animationstart"),_Z=a0("transitionend"),EZ=new Map,_$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sl(t,e){EZ.set(t,e),zc(e,[t])}for(var e1=0;e1<_$.length;e1++){var t1=_$[e1],yue=t1.toLowerCase(),vue=t1[0].toUpperCase()+t1.slice(1);sl(yue,"on"+vue)}sl(xZ,"onAnimationEnd");sl(wZ,"onAnimationIteration");sl(SZ,"onAnimationStart");sl("dblclick","onDoubleClick");sl("focusin","onFocus");sl("focusout","onBlur");sl(_Z,"onTransitionEnd");kd("onMouseEnter",["mouseout","mouseover"]);kd("onMouseLeave",["mouseout","mouseover"]);kd("onPointerEnter",["pointerout","pointerover"]);kd("onPointerLeave",["pointerout","pointerover"]);zc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zc("onBeforeInput",["compositionend","keypress","textInput","paste"]);zc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bue=new Set("cancel close invalid load scroll toggle".split(" ").concat(df));function E$(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,yce(n,e,void 0,t),t.currentTarget=null}function NZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;E$(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;E$(i,a,c),s=l}}}if(yy)throw t=Qj,yy=!1,Qj=null,t}function Rt(t,e){var r=e[oP];r===void 0&&(r=e[oP]=new Set);var n=t+"__bubble";r.has(n)||(CZ(e,t,2,!1),r.add(n))}function r1(t,e,r){var n=0;e&&(n|=4),CZ(r,t,n,e)}var cg="_reactListening"+Math.random().toString(36).slice(2);function ep(t){if(!t[cg]){t[cg]=!0,RJ.forEach(function(r){r!=="selectionchange"&&(bue.has(r)||r1(r,!1,t),r1(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cg]||(e[cg]=!0,r1("selectionchange",!1,e))}}function CZ(t,e,r,n){switch(cZ(e)){case 1:var i=Rce;break;case 4:i=Mce;break;default:i=_R}r=i.bind(null,e,r,t),i=void 0,!Yj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function n1(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Rl(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}YJ(function(){var c=s,d=bR(r),h=[];e:{var f=EZ.get(t);if(f!==void 0){var p=NR,m=t;switch(t){case"keypress":if(Kg(r)===0)break e;case"keydown":case"keyup":p=Yce;break;case"focusin":m="focus",p=Qb;break;case"focusout":m="blur",p=Qb;break;case"beforeblur":case"afterblur":p=Qb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=h$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=$ce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Jce;break;case xZ:case wZ:case SZ:p=Lce;break;case _Z:p=eue;break;case"scroll":p=Ace;break;case"wheel":p=rue;break;case"copy":case"cut":case"paste":p=zce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=p$}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Gf(b,y),x!=null&&g.push(tp(b,x,w)))),v)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Kj&&(m=r.relatedTarget||r.fromElement)&&(Rl(m)||m[jo]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Rl(m):null,m!==null&&(v=Vc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=h$,x="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=p$,x="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:Du(p),w=m==null?f:Du(m),f=new g(x,b+"leave",p,r,d),f.target=v,f.relatedTarget=w,x=null,Rl(d)===c&&(g=new g(y,b+"enter",m,r,d),g.target=w,g.relatedTarget=v,x=g),v=x,p&&m)t:{for(g=p,y=m,b=0,w=g;w;w=vu(w))b++;for(w=0,x=y;x;x=vu(x))w++;for(;0<b-w;)g=vu(g),b--;for(;0<w-b;)y=vu(y),w--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=vu(g),y=vu(y)}g=null}else g=null;p!==null&&N$(h,f,p,g,!1),m!==null&&v!==null&&N$(h,v,m,g,!0)}}e:{if(f=c?Du(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=cue;else if(y$(f))if(mZ)S=fue;else{S=due;var _=uue}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=hue);if(S&&(S=S(t,c))){pZ(h,S,r,d);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&zj(f,"number",f.value)}switch(_=c?Du(c):window,t){case"focusin":(y$(_)||_.contentEditable==="true")&&(Mu=_,eP=c,_f=null);break;case"focusout":_f=eP=Mu=null;break;case"mousedown":tP=!0;break;case"contextmenu":case"mouseup":case"dragend":tP=!1,S$(h,r,d);break;case"selectionchange":if(gue)break;case"keydown":case"keyup":S$(h,r,d)}var N;if(kR)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ru?hZ(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(dZ&&r.locale!=="ko"&&(Ru||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ru&&(N=uZ()):(_a=d,ER="value"in _a?_a.value:_a.textContent,Ru=!0)),_=Sy(c,E),0<_.length&&(E=new f$(E,t,null,r,d),h.push({event:E,listeners:_}),N?E.data=N:(N=fZ(r),N!==null&&(E.data=N)))),(N=iue?sue(t,r):oue(t,r))&&(c=Sy(c,"onBeforeInput"),0<c.length&&(d=new f$("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=N))}NZ(h,e)})}function tp(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Sy(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gf(t,r),s!=null&&n.unshift(tp(t,s,i)),s=Gf(t,e),s!=null&&n.push(tp(t,s,i))),t=t.return}return n}function vu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function N$(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Gf(r,s),l!=null&&o.unshift(tp(r,l,a))):i||(l=Gf(r,s),l!=null&&o.push(tp(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var xue=/\r\n?/g,wue=/\u0000|\uFFFD/g;function C$(t){return(typeof t=="string"?t:""+t).replace(xue,`
`).replace(wue,"")}function ug(t,e,r){if(e=C$(e),C$(t)!==e&&r)throw Error(re(425))}function _y(){}var rP=null,nP=null;function iP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sP=typeof setTimeout=="function"?setTimeout:void 0,Sue=typeof clearTimeout=="function"?clearTimeout:void 0,k$=typeof Promise=="function"?Promise:void 0,_ue=typeof queueMicrotask=="function"?queueMicrotask:typeof k$<"u"?function(t){return k$.resolve(null).then(t).catch(Eue)}:sP;function Eue(t){setTimeout(function(){throw t})}function i1(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Xf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Xf(e)}function Ra(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function T$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ih=Math.random().toString(36).slice(2),Ps="__reactFiber$"+ih,rp="__reactProps$"+ih,jo="__reactContainer$"+ih,oP="__reactEvents$"+ih,Nue="__reactListeners$"+ih,Cue="__reactHandles$"+ih;function Rl(t){var e=t[Ps];if(e)return e;for(var r=t.parentNode;r;){if(e=r[jo]||r[Ps]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=T$(t);t!==null;){if(r=t[Ps])return r;t=T$(t)}return e}t=r,r=t.parentNode}return null}function Gp(t){return t=t[Ps]||t[jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Du(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function l0(t){return t[rp]||null}var aP=[],$u=-1;function ol(t){return{current:t}}function $t(t){0>$u||(t.current=aP[$u],aP[$u]=null,$u--)}function It(t,e){$u++,aP[$u]=t.current,t.current=e}var Ja={},vn=ol(Ja),Qn=ol(!1),gc=Ja;function Td(t,e){var r=t.type.contextTypes;if(!r)return Ja;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xn(t){return t=t.childContextTypes,t!=null}function Ey(){$t(Qn),$t(vn)}function O$(t,e,r){if(vn.current!==Ja)throw Error(re(168));It(vn,e),It(Qn,r)}function kZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(re(108,uce(t)||"Unknown",i));return Gt({},r,n)}function Ny(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ja,gc=vn.current,It(vn,t),It(Qn,Qn.current),!0}function j$(t,e,r){var n=t.stateNode;if(!n)throw Error(re(169));r?(t=kZ(t,e,gc),n.__reactInternalMemoizedMergedChildContext=t,$t(Qn),$t(vn),It(vn,t)):$t(Qn),It(Qn,r)}var so=null,c0=!1,s1=!1;function TZ(t){so===null?so=[t]:so.push(t)}function kue(t){c0=!0,TZ(t)}function al(){if(!s1&&so!==null){s1=!0;var t=0,e=vt;try{var r=so;for(vt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}so=null,c0=!1}catch(i){throw so!==null&&(so=so.slice(t+1)),ZJ(xR,al),i}finally{vt=e,s1=!1}}return null}var Fu=[],qu=0,Cy=null,ky=0,Ri=[],Mi=0,yc=null,uo=1,ho="";function Ol(t,e){Fu[qu++]=ky,Fu[qu++]=Cy,Cy=t,ky=e}function OZ(t,e,r){Ri[Mi++]=uo,Ri[Mi++]=ho,Ri[Mi++]=yc,yc=t;var n=uo;t=ho;var i=32-hs(n)-1;n&=~(1<<i),r+=1;var s=32-hs(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,uo=1<<32-hs(e)+i|r<<i|n,ho=s+t}else uo=1<<s|r<<i|n,ho=t}function OR(t){t.return!==null&&(Ol(t,1),OZ(t,1,0))}function jR(t){for(;t===Cy;)Cy=Fu[--qu],Fu[qu]=null,ky=Fu[--qu],Fu[qu]=null;for(;t===yc;)yc=Ri[--Mi],Ri[Mi]=null,ho=Ri[--Mi],Ri[Mi]=null,uo=Ri[--Mi],Ri[Mi]=null}var mi=null,pi=null,Lt=!1,ss=null;function jZ(t,e){var r=Fi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function P$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mi=t,pi=Ra(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mi=t,pi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=yc!==null?{id:uo,overflow:ho}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Fi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,mi=t,pi=null,!0):!1;default:return!1}}function lP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cP(t){if(Lt){var e=pi;if(e){var r=e;if(!P$(t,e)){if(lP(t))throw Error(re(418));e=Ra(r.nextSibling);var n=mi;e&&P$(t,e)?jZ(n,r):(t.flags=t.flags&-4097|2,Lt=!1,mi=t)}}else{if(lP(t))throw Error(re(418));t.flags=t.flags&-4097|2,Lt=!1,mi=t}}}function I$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mi=t}function dg(t){if(t!==mi)return!1;if(!Lt)return I$(t),Lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!iP(t.type,t.memoizedProps)),e&&(e=pi)){if(lP(t))throw PZ(),Error(re(418));for(;e;)jZ(t,e),e=Ra(e.nextSibling)}if(I$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){pi=Ra(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}pi=null}}else pi=mi?Ra(t.stateNode.nextSibling):null;return!0}function PZ(){for(var t=pi;t;)t=Ra(t.nextSibling)}function Od(){pi=mi=null,Lt=!1}function PR(t){ss===null?ss=[t]:ss.push(t)}var Tue=Ao.ReactCurrentBatchConfig;function Wh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var n=r.stateNode}if(!n)throw Error(re(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,t))}return t}function hg(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function R$(t){var e=t._init;return e(t._payload)}function IZ(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function r(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=$a(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,x){return b===null||b.tag!==6?(b=h1(w,y.mode,x),b.return=y,b):(b=i(b,w),b.return=y,b)}function l(y,b,w,x){var S=w.type;return S===Iu?d(y,b,w.props.children,x,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ea&&R$(S)===b.type)?(x=i(b,w.props),x.ref=Wh(y,b,w),x.return=y,x):(x=ey(w.type,w.key,w.props,null,y.mode,x),x.ref=Wh(y,b,w),x.return=y,x)}function c(y,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=f1(w,y.mode,x),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function d(y,b,w,x,S){return b===null||b.tag!==7?(b=nc(w,y.mode,x,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function h(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=h1(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tg:return w=ey(b.type,b.key,b.props,null,y.mode,w),w.ref=Wh(y,null,b),w.return=y,w;case Pu:return b=f1(b,y.mode,w),b.return=y,b;case ea:var x=b._init;return h(y,x(b._payload),w)}if(cf(b)||Bh(b))return b=nc(b,y.mode,w,null),b.return=y,b;hg(y,b)}return null}function f(y,b,w,x){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case tg:return w.key===S?l(y,b,w,x):null;case Pu:return w.key===S?c(y,b,w,x):null;case ea:return S=w._init,f(y,b,S(w._payload),x)}if(cf(w)||Bh(w))return S!==null?null:d(y,b,w,x,null);hg(y,w)}return null}function p(y,b,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(b,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tg:return y=y.get(x.key===null?w:x.key)||null,l(b,y,x,S);case Pu:return y=y.get(x.key===null?w:x.key)||null,c(b,y,x,S);case ea:var _=x._init;return p(y,b,w,_(x._payload),S)}if(cf(x)||Bh(x))return y=y.get(w)||null,d(b,y,x,S,null);hg(b,x)}return null}function m(y,b,w,x){for(var S=null,_=null,N=b,E=b=0,C=null;N!==null&&E<w.length;E++){N.index>E?(C=N,N=null):C=N.sibling;var k=f(y,N,w[E],x);if(k===null){N===null&&(N=C);break}t&&N&&k.alternate===null&&e(y,N),b=s(k,b,E),_===null?S=k:_.sibling=k,_=k,N=C}if(E===w.length)return r(y,N),Lt&&Ol(y,E),S;if(N===null){for(;E<w.length;E++)N=h(y,w[E],x),N!==null&&(b=s(N,b,E),_===null?S=N:_.sibling=N,_=N);return Lt&&Ol(y,E),S}for(N=n(y,N);E<w.length;E++)C=p(N,y,E,w[E],x),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?E:C.key),b=s(C,b,E),_===null?S=C:_.sibling=C,_=C);return t&&N.forEach(function(j){return e(y,j)}),Lt&&Ol(y,E),S}function g(y,b,w,x){var S=Bh(w);if(typeof S!="function")throw Error(re(150));if(w=S.call(w),w==null)throw Error(re(151));for(var _=S=null,N=b,E=b=0,C=null,k=w.next();N!==null&&!k.done;E++,k=w.next()){N.index>E?(C=N,N=null):C=N.sibling;var j=f(y,N,k.value,x);if(j===null){N===null&&(N=C);break}t&&N&&j.alternate===null&&e(y,N),b=s(j,b,E),_===null?S=j:_.sibling=j,_=j,N=C}if(k.done)return r(y,N),Lt&&Ol(y,E),S;if(N===null){for(;!k.done;E++,k=w.next())k=h(y,k.value,x),k!==null&&(b=s(k,b,E),_===null?S=k:_.sibling=k,_=k);return Lt&&Ol(y,E),S}for(N=n(y,N);!k.done;E++,k=w.next())k=p(N,y,E,k.value,x),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),b=s(k,b,E),_===null?S=k:_.sibling=k,_=k);return t&&N.forEach(function(P){return e(y,P)}),Lt&&Ol(y,E),S}function v(y,b,w,x){if(typeof w=="object"&&w!==null&&w.type===Iu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case tg:e:{for(var S=w.key,_=b;_!==null;){if(_.key===S){if(S=w.type,S===Iu){if(_.tag===7){r(y,_.sibling),b=i(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ea&&R$(S)===_.type){r(y,_.sibling),b=i(_,w.props),b.ref=Wh(y,_,w),b.return=y,y=b;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===Iu?(b=nc(w.props.children,y.mode,x,w.key),b.return=y,y=b):(x=ey(w.type,w.key,w.props,null,y.mode,x),x.ref=Wh(y,b,w),x.return=y,y=x)}return o(y);case Pu:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else e(y,b);b=b.sibling}b=f1(w,y.mode,x),b.return=y,y=b}return o(y);case ea:return _=w._init,v(y,b,_(w._payload),x)}if(cf(w))return m(y,b,w,x);if(Bh(w))return g(y,b,w,x);hg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(y,b.sibling),b=i(b,w),b.return=y,y=b):(r(y,b),b=h1(w,y.mode,x),b.return=y,y=b),o(y)):r(y,b)}return v}var jd=IZ(!0),RZ=IZ(!1),Ty=ol(null),Oy=null,Lu=null,IR=null;function RR(){IR=Lu=Oy=null}function MR(t){var e=Ty.current;$t(Ty),t._currentValue=e}function uP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function td(t,e){Oy=t,IR=Lu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kn=!0),t.firstContext=null)}function Ui(t){var e=t._currentValue;if(IR!==t)if(t={context:t,memoizedValue:e,next:null},Lu===null){if(Oy===null)throw Error(re(308));Lu=t,Oy.dependencies={lanes:0,firstContext:t}}else Lu=Lu.next=t;return e}var Ml=null;function AR(t){Ml===null?Ml=[t]:Ml.push(t)}function MZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,AR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Po(t,n)}function Po(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ta=!1;function DR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ma(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,dt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Po(t,r)}return i=n.interleaved,i===null?(e.next=e,AR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Po(t,r)}function Gg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,wR(t,r)}}function M$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function jy(t,e,r,n){var i=t.updateQueue;ta=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Gt({},h,f);break e;case 2:ta=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bc|=o,t.lanes=o,t.memoizedState=h}}function A$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(re(191,i));i.call(n)}}}var Yp={},$s=ol(Yp),np=ol(Yp),ip=ol(Yp);function Al(t){if(t===Yp)throw Error(re(174));return t}function $R(t,e){switch(It(ip,e),It(np,t),It($s,Yp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uj(e,t)}$t($s),It($s,e)}function Pd(){$t($s),$t(np),$t(ip)}function DZ(t){Al(ip.current);var e=Al($s.current),r=Uj(e,t.type);e!==r&&(It(np,t),It($s,r))}function FR(t){np.current===t&&($t($s),$t(np))}var Ut=ol(0);function Py(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var o1=[];function qR(){for(var t=0;t<o1.length;t++)o1[t]._workInProgressVersionPrimary=null;o1.length=0}var Yg=Ao.ReactCurrentDispatcher,a1=Ao.ReactCurrentBatchConfig,vc=0,Wt=null,Or=null,Fr=null,Iy=!1,Ef=!1,sp=0,Oue=0;function dn(){throw Error(re(321))}function LR(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ps(t[r],e[r]))return!1;return!0}function BR(t,e,r,n,i,s){if(vc=s,Wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yg.current=t===null||t.memoizedState===null?Rue:Mue,t=r(n,i),Ef){s=0;do{if(Ef=!1,sp=0,25<=s)throw Error(re(301));s+=1,Fr=Or=null,e.updateQueue=null,Yg.current=Aue,t=r(n,i)}while(Ef)}if(Yg.current=Ry,e=Or!==null&&Or.next!==null,vc=0,Fr=Or=Wt=null,Iy=!1,e)throw Error(re(300));return t}function zR(){var t=sp!==0;return sp=0,t}function _s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Wt.memoizedState=Fr=t:Fr=Fr.next=t,Fr}function Hi(){if(Or===null){var t=Wt.alternate;t=t!==null?t.memoizedState:null}else t=Or.next;var e=Fr===null?Wt.memoizedState:Fr.next;if(e!==null)Fr=e,Or=t;else{if(t===null)throw Error(re(310));Or=t,t={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},Fr===null?Wt.memoizedState=Fr=t:Fr=Fr.next=t}return Fr}function op(t,e){return typeof e=="function"?e(t):e}function l1(t){var e=Hi(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=Or,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((vc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Wt.lanes|=d,bc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,ps(n,e.memoizedState)||(Kn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Wt.lanes|=s,bc|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function c1(t){var e=Hi(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ps(s,e.memoizedState)||(Kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function $Z(){}function FZ(t,e){var r=Wt,n=Hi(),i=e(),s=!ps(n.memoizedState,i);if(s&&(n.memoizedState=i,Kn=!0),n=n.queue,VR(BZ.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Fr!==null&&Fr.memoizedState.tag&1){if(r.flags|=2048,ap(9,LZ.bind(null,r,n,i,e),void 0,null),Br===null)throw Error(re(349));vc&30||qZ(r,e,i)}return i}function qZ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function LZ(t,e,r,n){e.value=r,e.getSnapshot=n,zZ(e)&&VZ(t)}function BZ(t,e,r){return r(function(){zZ(e)&&VZ(t)})}function zZ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ps(t,r)}catch{return!0}}function VZ(t){var e=Po(t,1);e!==null&&fs(e,t,1,-1)}function D$(t){var e=_s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:op,lastRenderedState:t},e.queue=t,t=t.dispatch=Iue.bind(null,Wt,t),[e.memoizedState,t]}function ap(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function UZ(){return Hi().memoizedState}function Qg(t,e,r,n){var i=_s();Wt.flags|=t,i.memoizedState=ap(1|e,r,void 0,n===void 0?null:n)}function u0(t,e,r,n){var i=Hi();n=n===void 0?null:n;var s=void 0;if(Or!==null){var o=Or.memoizedState;if(s=o.destroy,n!==null&&LR(n,o.deps)){i.memoizedState=ap(e,r,s,n);return}}Wt.flags|=t,i.memoizedState=ap(1|e,r,s,n)}function $$(t,e){return Qg(8390656,8,t,e)}function VR(t,e){return u0(2048,8,t,e)}function HZ(t,e){return u0(4,2,t,e)}function WZ(t,e){return u0(4,4,t,e)}function KZ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function GZ(t,e,r){return r=r!=null?r.concat([t]):null,u0(4,4,KZ.bind(null,e,t),r)}function UR(){}function YZ(t,e){var r=Hi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LR(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function QZ(t,e){var r=Hi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LR(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function XZ(t,e,r){return vc&21?(ps(r,e)||(r=rZ(),Wt.lanes|=r,bc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kn=!0),t.memoizedState=r)}function jue(t,e){var r=vt;vt=r!==0&&4>r?r:4,t(!0);var n=a1.transition;a1.transition={};try{t(!1),e()}finally{vt=r,a1.transition=n}}function JZ(){return Hi().memoizedState}function Pue(t,e,r){var n=Da(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ZZ(t))eee(e,r);else if(r=MZ(t,e,r,n),r!==null){var i=Pn();fs(r,t,n,i),tee(r,e,n)}}function Iue(t,e,r){var n=Da(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ZZ(t))eee(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,ps(a,o)){var l=e.interleaved;l===null?(i.next=i,AR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=MZ(t,e,i,n),r!==null&&(i=Pn(),fs(r,t,n,i),tee(r,e,n))}}function ZZ(t){var e=t.alternate;return t===Wt||e!==null&&e===Wt}function eee(t,e){Ef=Iy=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function tee(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,wR(t,r)}}var Ry={readContext:Ui,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},Rue={readContext:Ui,useCallback:function(t,e){return _s().memoizedState=[t,e===void 0?null:e],t},useContext:Ui,useEffect:$$,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Qg(4194308,4,KZ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Qg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qg(4,2,t,e)},useMemo:function(t,e){var r=_s();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_s();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Pue.bind(null,Wt,t),[n.memoizedState,t]},useRef:function(t){var e=_s();return t={current:t},e.memoizedState=t},useState:D$,useDebugValue:UR,useDeferredValue:function(t){return _s().memoizedState=t},useTransition:function(){var t=D$(!1),e=t[0];return t=jue.bind(null,t[1]),_s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Wt,i=_s();if(Lt){if(r===void 0)throw Error(re(407));r=r()}else{if(r=e(),Br===null)throw Error(re(349));vc&30||qZ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,$$(BZ.bind(null,n,s,t),[t]),n.flags|=2048,ap(9,LZ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=_s(),e=Br.identifierPrefix;if(Lt){var r=ho,n=uo;r=(n&~(1<<32-hs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=sp++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Oue++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mue={readContext:Ui,useCallback:YZ,useContext:Ui,useEffect:VR,useImperativeHandle:GZ,useInsertionEffect:HZ,useLayoutEffect:WZ,useMemo:QZ,useReducer:l1,useRef:UZ,useState:function(){return l1(op)},useDebugValue:UR,useDeferredValue:function(t){var e=Hi();return XZ(e,Or.memoizedState,t)},useTransition:function(){var t=l1(op)[0],e=Hi().memoizedState;return[t,e]},useMutableSource:$Z,useSyncExternalStore:FZ,useId:JZ,unstable_isNewReconciler:!1},Aue={readContext:Ui,useCallback:YZ,useContext:Ui,useEffect:VR,useImperativeHandle:GZ,useInsertionEffect:HZ,useLayoutEffect:WZ,useMemo:QZ,useReducer:c1,useRef:UZ,useState:function(){return c1(op)},useDebugValue:UR,useDeferredValue:function(t){var e=Hi();return Or===null?e.memoizedState=t:XZ(e,Or.memoizedState,t)},useTransition:function(){var t=c1(op)[0],e=Hi().memoizedState;return[t,e]},useMutableSource:$Z,useSyncExternalStore:FZ,useId:JZ,unstable_isNewReconciler:!1};function ts(t,e){if(t&&t.defaultProps){e=Gt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function dP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Gt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var d0={isMounted:function(t){return(t=t._reactInternals)?Vc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Pn(),i=Da(t),s=go(n,i);s.payload=e,r!=null&&(s.callback=r),e=Ma(t,s,i),e!==null&&(fs(e,t,i,n),Gg(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Pn(),i=Da(t),s=go(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Ma(t,s,i),e!==null&&(fs(e,t,i,n),Gg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Pn(),n=Da(t),i=go(r,n);i.tag=2,e!=null&&(i.callback=e),e=Ma(t,i,n),e!==null&&(fs(e,t,n,r),Gg(e,t,n))}};function F$(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zf(r,n)||!Zf(i,s):!0}function ree(t,e,r){var n=!1,i=Ja,s=e.contextType;return typeof s=="object"&&s!==null?s=Ui(s):(i=Xn(e)?gc:vn.current,n=e.contextTypes,s=(n=n!=null)?Td(t,i):Ja),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=d0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function q$(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&d0.enqueueReplaceState(e,e.state,null)}function hP(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},DR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ui(s):(s=Xn(e)?gc:vn.current,i.context=Td(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(dP(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&d0.enqueueReplaceState(i,i.state,null),jy(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Id(t,e){try{var r="",n=e;do r+=cce(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function u1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function fP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Due=typeof WeakMap=="function"?WeakMap:Map;function nee(t,e,r){r=go(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ay||(Ay=!0,_P=n),fP(t,e)},r}function iee(t,e,r){r=go(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){fP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){fP(t,e),typeof n!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function L$(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Due;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Que.bind(null,t,e,r),e.then(t,t))}function B$(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function z$(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=go(-1,1),e.tag=2,Ma(r,e,1))),r.lanes|=1),t)}var $ue=Ao.ReactCurrentOwner,Kn=!1;function En(t,e,r,n){e.child=t===null?RZ(e,null,r,n):jd(e,t.child,r,n)}function V$(t,e,r,n,i){r=r.render;var s=e.ref;return td(e,i),n=BR(t,e,r,n,s,i),r=zR(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(Lt&&r&&OR(e),e.flags|=1,En(t,e,n,i),e.child)}function U$(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!JR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,see(t,e,s,n,i)):(t=ey(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Zf,r(o,n)&&t.ref===e.ref)return Io(t,e,i)}return e.flags|=1,t=$a(s,n),t.ref=e.ref,t.return=e,e.child=t}function see(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Zf(s,n)&&t.ref===e.ref)if(Kn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Kn=!0);else return e.lanes=t.lanes,Io(t,e,i)}return pP(t,e,r,n,i)}function oee(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(zu,ci),ci|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,It(zu,ci),ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,It(zu,ci),ci|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,It(zu,ci),ci|=n;return En(t,e,i,r),e.child}function aee(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function pP(t,e,r,n,i){var s=Xn(r)?gc:vn.current;return s=Td(e,s),td(e,i),r=BR(t,e,r,n,s,i),n=zR(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(Lt&&n&&OR(e),e.flags|=1,En(t,e,r,i),e.child)}function H$(t,e,r,n,i){if(Xn(r)){var s=!0;Ny(e)}else s=!1;if(td(e,i),e.stateNode===null)Xg(t,e),ree(e,r,n),hP(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ui(c):(c=Xn(r)?gc:vn.current,c=Td(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&q$(e,o,n,c),ta=!1;var f=e.memoizedState;o.state=f,jy(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Qn.current||ta?(typeof d=="function"&&(dP(e,r,d,n),l=e.memoizedState),(a=ta||F$(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,AZ(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ts(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ui(l):(l=Xn(r)?gc:vn.current,l=Td(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&q$(e,o,n,l),ta=!1,f=e.memoizedState,o.state=f,jy(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Qn.current||ta?(typeof p=="function"&&(dP(e,r,p,n),m=e.memoizedState),(c=ta||F$(e,r,c,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return mP(t,e,r,n,s,i)}function mP(t,e,r,n,i,s){aee(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&j$(e,r,!1),Io(t,e,s);n=e.stateNode,$ue.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=jd(e,t.child,null,s),e.child=jd(e,null,a,s)):En(t,e,a,s),e.memoizedState=n.state,i&&j$(e,r,!0),e.child}function lee(t){var e=t.stateNode;e.pendingContext?O$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&O$(t,e.context,!1),$R(t,e.containerInfo)}function W$(t,e,r,n,i){return Od(),PR(i),e.flags|=256,En(t,e,r,n),e.child}var gP={dehydrated:null,treeContext:null,retryLane:0};function yP(t){return{baseLanes:t,cachePool:null,transitions:null}}function cee(t,e,r){var n=e.pendingProps,i=Ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),It(Ut,i&1),t===null)return cP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=p0(o,n,0,null),t=nc(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=yP(r),e.memoizedState=gP,t):HR(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Fue(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=$a(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$a(a,s):(s=nc(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?yP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=gP,n}return s=t.child,t=s.sibling,n=$a(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function HR(t,e){return e=p0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fg(t,e,r,n){return n!==null&&PR(n),jd(e,t.child,null,r),t=HR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Fue(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=u1(Error(re(422))),fg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=p0({mode:"visible",children:n.children},i,0,null),s=nc(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&jd(e,t.child,null,o),e.child.memoizedState=yP(o),e.memoizedState=gP,s);if(!(e.mode&1))return fg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(re(419)),n=u1(s,n,void 0),fg(t,e,o,n)}if(a=(o&t.childLanes)!==0,Kn||a){if(n=Br,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Po(t,i),fs(n,t,i,-1))}return XR(),n=u1(Error(re(421))),fg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Xue.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pi=Ra(i.nextSibling),mi=e,Lt=!0,ss=null,t!==null&&(Ri[Mi++]=uo,Ri[Mi++]=ho,Ri[Mi++]=yc,uo=t.id,ho=t.overflow,yc=e),e=HR(e,n.children),e.flags|=4096,e)}function K$(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),uP(t.return,e,r)}function d1(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function uee(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(En(t,e,n.children,r),n=Ut.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K$(t,r,e);else if(t.tag===19)K$(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(It(Ut,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Py(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),d1(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Py(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}d1(e,!0,r,null,s);break;case"together":d1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Io(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),bc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,r=$a(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=$a(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function que(t,e,r){switch(e.tag){case 3:lee(e),Od();break;case 5:DZ(e);break;case 1:Xn(e.type)&&Ny(e);break;case 4:$R(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;It(Ty,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(It(Ut,Ut.current&1),e.flags|=128,null):r&e.child.childLanes?cee(t,e,r):(It(Ut,Ut.current&1),t=Io(t,e,r),t!==null?t.sibling:null);It(Ut,Ut.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return uee(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),It(Ut,Ut.current),n)break;return null;case 22:case 23:return e.lanes=0,oee(t,e,r)}return Io(t,e,r)}var dee,vP,hee,fee;dee=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};vP=function(){};hee=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Al($s.current);var s=null;switch(r){case"input":i=Lj(t,i),n=Lj(t,n),s=[];break;case"select":i=Gt({},i,{value:void 0}),n=Gt({},n,{value:void 0}),s=[];break;case"textarea":i=Vj(t,i),n=Vj(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=_y)}Hj(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Rt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};fee=function(t,e,r,n){r!==n&&(e.flags|=4)};function Kh(t,e){if(!Lt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function hn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Lue(t,e,r){var n=e.pendingProps;switch(jR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(e),null;case 1:return Xn(e.type)&&Ey(),hn(e),null;case 3:return n=e.stateNode,Pd(),$t(Qn),$t(vn),qR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(dg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ss!==null&&(CP(ss),ss=null))),vP(t,e),hn(e),null;case 5:FR(e);var i=Al(ip.current);if(r=e.type,t!==null&&e.stateNode!=null)hee(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(re(166));return hn(e),null}if(t=Al($s.current),dg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ps]=e,n[rp]=s,t=(e.mode&1)!==0,r){case"dialog":Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":case"embed":Rt("load",n);break;case"video":case"audio":for(i=0;i<df.length;i++)Rt(df[i],n);break;case"source":Rt("error",n);break;case"img":case"image":case"link":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"input":r$(n,s),Rt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Rt("invalid",n);break;case"textarea":i$(n,s),Rt("invalid",n)}Hj(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&ug(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ug(n.textContent,a,t),i=["children",""+a]):Wf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rt("scroll",n)}switch(r){case"input":rg(n),n$(n,s,!0);break;case"textarea":rg(n),s$(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=_y)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=BJ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ps]=e,t[rp]=n,dee(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wj(r,n),r){case"dialog":Rt("cancel",t),Rt("close",t),i=n;break;case"iframe":case"object":case"embed":Rt("load",t),i=n;break;case"video":case"audio":for(i=0;i<df.length;i++)Rt(df[i],t);i=n;break;case"source":Rt("error",t),i=n;break;case"img":case"image":case"link":Rt("error",t),Rt("load",t),i=n;break;case"details":Rt("toggle",t),i=n;break;case"input":r$(t,n),i=Lj(t,n),Rt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Gt({},n,{value:void 0}),Rt("invalid",t);break;case"textarea":i$(t,n),i=Vj(t,n),Rt("invalid",t);break;default:i=n}Hj(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?UJ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zJ(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Kf(t,l):typeof l=="number"&&Kf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Rt("scroll",t):l!=null&&mR(t,s,l,o))}switch(r){case"input":rg(t),n$(t,n,!1);break;case"textarea":rg(t),s$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Xa(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Xu(t,!!n.multiple,s,!1):n.defaultValue!=null&&Xu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=_y)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hn(e),null;case 6:if(t&&e.stateNode!=null)fee(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(re(166));if(r=Al(ip.current),Al($s.current),dg(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ps]=e,(s=n.nodeValue!==r)&&(t=mi,t!==null))switch(t.tag){case 3:ug(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ug(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ps]=e,e.stateNode=n}return hn(e),null;case 13:if($t(Ut),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lt&&pi!==null&&e.mode&1&&!(e.flags&128))PZ(),Od(),e.flags|=98560,s=!1;else if(s=dg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(re(317));s[Ps]=e}else Od(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hn(e),s=!1}else ss!==null&&(CP(ss),ss=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ut.current&1?jr===0&&(jr=3):XR())),e.updateQueue!==null&&(e.flags|=4),hn(e),null);case 4:return Pd(),vP(t,e),t===null&&ep(e.stateNode.containerInfo),hn(e),null;case 10:return MR(e.type._context),hn(e),null;case 17:return Xn(e.type)&&Ey(),hn(e),null;case 19:if($t(Ut),s=e.memoizedState,s===null)return hn(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Kh(s,!1);else{if(jr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Py(t),o!==null){for(e.flags|=128,Kh(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return It(Ut,Ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&ur()>Rd&&(e.flags|=128,n=!0,Kh(s,!1),e.lanes=4194304)}else{if(!n)if(t=Py(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Kh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Lt)return hn(e),null}else 2*ur()-s.renderingStartTime>Rd&&r!==1073741824&&(e.flags|=128,n=!0,Kh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ur(),e.sibling=null,r=Ut.current,It(Ut,n?r&1|2:r&1),e):(hn(e),null);case 22:case 23:return QR(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ci&1073741824&&(hn(e),e.subtreeFlags&6&&(e.flags|=8192)):hn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function Bue(t,e){switch(jR(e),e.tag){case 1:return Xn(e.type)&&Ey(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pd(),$t(Qn),$t(vn),qR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return FR(e),null;case 13:if($t(Ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Od()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(Ut),null;case 4:return Pd(),null;case 10:return MR(e.type._context),null;case 22:case 23:return QR(),null;case 24:return null;default:return null}}var pg=!1,gn=!1,zue=typeof WeakSet=="function"?WeakSet:Set,be=null;function Bu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){nr(t,e,n)}else r.current=null}function bP(t,e,r){try{r()}catch(n){nr(t,e,n)}}var G$=!1;function Vue(t,e){if(rP=xy,t=vZ(),TR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(nP={focusedElem:t,selectionRange:r},xy=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:ts(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(x){nr(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return m=G$,G$=!1,m}function Nf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bP(e,r,s)}i=i.next}while(i!==n)}}function h0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function xP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function pee(t){var e=t.alternate;e!==null&&(t.alternate=null,pee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ps],delete e[rp],delete e[oP],delete e[Nue],delete e[Cue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mee(t){return t.tag===5||t.tag===3||t.tag===4}function Y$(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=_y));else if(n!==4&&(t=t.child,t!==null))for(wP(t,e,r),t=t.sibling;t!==null;)wP(t,e,r),t=t.sibling}function SP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(SP(t,e,r),t=t.sibling;t!==null;)SP(t,e,r),t=t.sibling}var en=null,is=!1;function Wo(t,e,r){for(r=r.child;r!==null;)gee(t,e,r),r=r.sibling}function gee(t,e,r){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(i0,r)}catch{}switch(r.tag){case 5:gn||Bu(r,e);case 6:var n=en,i=is;en=null,Wo(t,e,r),en=n,is=i,en!==null&&(is?(t=en,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):en.removeChild(r.stateNode));break;case 18:en!==null&&(is?(t=en,r=r.stateNode,t.nodeType===8?i1(t.parentNode,r):t.nodeType===1&&i1(t,r),Xf(t)):i1(en,r.stateNode));break;case 4:n=en,i=is,en=r.stateNode.containerInfo,is=!0,Wo(t,e,r),en=n,is=i;break;case 0:case 11:case 14:case 15:if(!gn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bP(r,e,o),i=i.next}while(i!==n)}Wo(t,e,r);break;case 1:if(!gn&&(Bu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){nr(r,e,a)}Wo(t,e,r);break;case 21:Wo(t,e,r);break;case 22:r.mode&1?(gn=(n=gn)||r.memoizedState!==null,Wo(t,e,r),gn=n):Wo(t,e,r);break;default:Wo(t,e,r)}}function Q$(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new zue),e.forEach(function(n){var i=Jue.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Zi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,is=!1;break e;case 3:en=a.stateNode.containerInfo,is=!0;break e;case 4:en=a.stateNode.containerInfo,is=!0;break e}a=a.return}if(en===null)throw Error(re(160));gee(s,o,i),en=null,is=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){nr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yee(e,t),e=e.sibling}function yee(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zi(e,t),ws(t),n&4){try{Nf(3,t,t.return),h0(3,t)}catch(g){nr(t,t.return,g)}try{Nf(5,t,t.return)}catch(g){nr(t,t.return,g)}}break;case 1:Zi(e,t),ws(t),n&512&&r!==null&&Bu(r,r.return);break;case 5:if(Zi(e,t),ws(t),n&512&&r!==null&&Bu(r,r.return),t.flags&32){var i=t.stateNode;try{Kf(i,"")}catch(g){nr(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qJ(i,s),Wj(a,o);var c=Wj(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?UJ(i,h):d==="dangerouslySetInnerHTML"?zJ(i,h):d==="children"?Kf(i,h):mR(i,d,h,c)}switch(a){case"input":Bj(i,s);break;case"textarea":LJ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Xu(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Xu(i,!!s.multiple,s.defaultValue,!0):Xu(i,!!s.multiple,s.multiple?[]:"",!1))}i[rp]=s}catch(g){nr(t,t.return,g)}}break;case 6:if(Zi(e,t),ws(t),n&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){nr(t,t.return,g)}}break;case 3:if(Zi(e,t),ws(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Xf(e.containerInfo)}catch(g){nr(t,t.return,g)}break;case 4:Zi(e,t),ws(t);break;case 13:Zi(e,t),ws(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(GR=ur())),n&4&&Q$(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(gn=(c=gn)||d,Zi(e,t),gn=c):Zi(e,t),ws(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(h=be=d;be!==null;){switch(f=be,p=f.child,f.tag){case 0:case 11:case 14:case 15:Nf(4,f,f.return);break;case 1:Bu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){nr(n,r,g)}}break;case 5:Bu(f,f.return);break;case 22:if(f.memoizedState!==null){J$(h);continue}}p!==null?(p.return=f,be=p):J$(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=VJ("display",o))}catch(g){nr(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){nr(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zi(e,t),ws(t),n&4&&Q$(t);break;case 21:break;default:Zi(e,t),ws(t)}}function ws(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(mee(r)){var n=r;break e}r=r.return}throw Error(re(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Kf(i,""),n.flags&=-33);var s=Y$(t);SP(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Y$(t);wP(t,a,o);break;default:throw Error(re(161))}}catch(l){nr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Uue(t,e,r){be=t,vee(t)}function vee(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var i=be,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||pg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||gn;a=pg;var c=gn;if(pg=o,(gn=l)&&!c)for(be=i;be!==null;)o=be,l=o.child,o.tag===22&&o.memoizedState!==null?Z$(i):l!==null?(l.return=o,be=l):Z$(i);for(;s!==null;)be=s,vee(s),s=s.sibling;be=i,pg=a,gn=c}X$(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,be=s):X$(t)}}function X$(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gn||h0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!gn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ts(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&A$(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}A$(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Xf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}gn||e.flags&512&&xP(e)}catch(f){nr(e,e.return,f)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function J$(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function Z$(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{h0(4,e)}catch(l){nr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){nr(e,i,l)}}var s=e.return;try{xP(e)}catch(l){nr(e,s,l)}break;case 5:var o=e.return;try{xP(e)}catch(l){nr(e,o,l)}}}catch(l){nr(e,e.return,l)}if(e===t){be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,be=a;break}be=e.return}}var Hue=Math.ceil,My=Ao.ReactCurrentDispatcher,WR=Ao.ReactCurrentOwner,qi=Ao.ReactCurrentBatchConfig,dt=0,Br=null,mr=null,sn=0,ci=0,zu=ol(0),jr=0,lp=null,bc=0,f0=0,KR=0,Cf=null,Un=null,GR=0,Rd=1/0,no=null,Ay=!1,_P=null,Aa=null,mg=!1,Ea=null,Dy=0,kf=0,EP=null,Jg=-1,Zg=0;function Pn(){return dt&6?ur():Jg!==-1?Jg:Jg=ur()}function Da(t){return t.mode&1?dt&2&&sn!==0?sn&-sn:Tue.transition!==null?(Zg===0&&(Zg=rZ()),Zg):(t=vt,t!==0||(t=window.event,t=t===void 0?16:cZ(t.type)),t):1}function fs(t,e,r,n){if(50<kf)throw kf=0,EP=null,Error(re(185));Wp(t,r,n),(!(dt&2)||t!==Br)&&(t===Br&&(!(dt&2)&&(f0|=r),jr===4&&ca(t,sn)),Jn(t,n),r===1&&dt===0&&!(e.mode&1)&&(Rd=ur()+500,c0&&al()))}function Jn(t,e){var r=t.callbackNode;Tce(t,e);var n=by(t,t===Br?sn:0);if(n===0)r!==null&&l$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&l$(r),e===1)t.tag===0?kue(eF.bind(null,t)):TZ(eF.bind(null,t)),_ue(function(){!(dt&6)&&al()}),r=null;else{switch(nZ(n)){case 1:r=xR;break;case 4:r=eZ;break;case 16:r=vy;break;case 536870912:r=tZ;break;default:r=vy}r=Cee(r,bee.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function bee(t,e){if(Jg=-1,Zg=0,dt&6)throw Error(re(327));var r=t.callbackNode;if(rd()&&t.callbackNode!==r)return null;var n=by(t,t===Br?sn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=$y(t,n);else{e=n;var i=dt;dt|=2;var s=wee();(Br!==t||sn!==e)&&(no=null,Rd=ur()+500,rc(t,e));do try{Gue();break}catch(a){xee(t,a)}while(!0);RR(),My.current=s,dt=i,mr!==null?e=0:(Br=null,sn=0,e=jr)}if(e!==0){if(e===2&&(i=Xj(t),i!==0&&(n=i,e=NP(t,i))),e===1)throw r=lp,rc(t,0),ca(t,n),Jn(t,ur()),r;if(e===6)ca(t,n);else{if(i=t.current.alternate,!(n&30)&&!Wue(i)&&(e=$y(t,n),e===2&&(s=Xj(t),s!==0&&(n=s,e=NP(t,s))),e===1))throw r=lp,rc(t,0),ca(t,n),Jn(t,ur()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(re(345));case 2:jl(t,Un,no);break;case 3:if(ca(t,n),(n&130023424)===n&&(e=GR+500-ur(),10<e)){if(by(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Pn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sP(jl.bind(null,t,Un,no),e);break}jl(t,Un,no);break;case 4:if(ca(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-hs(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=ur()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Hue(n/1960))-n,10<n){t.timeoutHandle=sP(jl.bind(null,t,Un,no),n);break}jl(t,Un,no);break;case 5:jl(t,Un,no);break;default:throw Error(re(329))}}}return Jn(t,ur()),t.callbackNode===r?bee.bind(null,t):null}function NP(t,e){var r=Cf;return t.current.memoizedState.isDehydrated&&(rc(t,e).flags|=256),t=$y(t,e),t!==2&&(e=Un,Un=r,e!==null&&CP(e)),t}function CP(t){Un===null?Un=t:Un.push.apply(Un,t)}function Wue(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!ps(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ca(t,e){for(e&=~KR,e&=~f0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-hs(e),n=1<<r;t[r]=-1,e&=~n}}function eF(t){if(dt&6)throw Error(re(327));rd();var e=by(t,0);if(!(e&1))return Jn(t,ur()),null;var r=$y(t,e);if(t.tag!==0&&r===2){var n=Xj(t);n!==0&&(e=n,r=NP(t,n))}if(r===1)throw r=lp,rc(t,0),ca(t,e),Jn(t,ur()),r;if(r===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jl(t,Un,no),Jn(t,ur()),null}function YR(t,e){var r=dt;dt|=1;try{return t(e)}finally{dt=r,dt===0&&(Rd=ur()+500,c0&&al())}}function xc(t){Ea!==null&&Ea.tag===0&&!(dt&6)&&rd();var e=dt;dt|=1;var r=qi.transition,n=vt;try{if(qi.transition=null,vt=1,t)return t()}finally{vt=n,qi.transition=r,dt=e,!(dt&6)&&al()}}function QR(){ci=zu.current,$t(zu)}function rc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Sue(r)),mr!==null)for(r=mr.return;r!==null;){var n=r;switch(jR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ey();break;case 3:Pd(),$t(Qn),$t(vn),qR();break;case 5:FR(n);break;case 4:Pd();break;case 13:$t(Ut);break;case 19:$t(Ut);break;case 10:MR(n.type._context);break;case 22:case 23:QR()}r=r.return}if(Br=t,mr=t=$a(t.current,null),sn=ci=e,jr=0,lp=null,KR=f0=bc=0,Un=Cf=null,Ml!==null){for(e=0;e<Ml.length;e++)if(r=Ml[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Ml=null}return t}function xee(t,e){do{var r=mr;try{if(RR(),Yg.current=Ry,Iy){for(var n=Wt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Iy=!1}if(vc=0,Fr=Or=Wt=null,Ef=!1,sp=0,WR.current=null,r===null||r.return===null){jr=1,lp=e,mr=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=B$(o);if(p!==null){p.flags&=-257,z$(p,o,a,s,e),p.mode&1&&L$(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){L$(s,c,e),XR();break e}l=Error(re(426))}}else if(Lt&&a.mode&1){var v=B$(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),z$(v,o,a,s,e),PR(Id(l,a));break e}}s=l=Id(l,a),jr!==4&&(jr=2),Cf===null?Cf=[s]:Cf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=nee(s,l,e);M$(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Aa===null||!Aa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=iee(s,a,e);M$(s,x);break e}}s=s.return}while(s!==null)}_ee(r)}catch(S){e=S,mr===r&&r!==null&&(mr=r=r.return);continue}break}while(!0)}function wee(){var t=My.current;return My.current=Ry,t===null?Ry:t}function XR(){(jr===0||jr===3||jr===2)&&(jr=4),Br===null||!(bc&268435455)&&!(f0&268435455)||ca(Br,sn)}function $y(t,e){var r=dt;dt|=2;var n=wee();(Br!==t||sn!==e)&&(no=null,rc(t,e));do try{Kue();break}catch(i){xee(t,i)}while(!0);if(RR(),dt=r,My.current=n,mr!==null)throw Error(re(261));return Br=null,sn=0,jr}function Kue(){for(;mr!==null;)See(mr)}function Gue(){for(;mr!==null&&!bce();)See(mr)}function See(t){var e=Nee(t.alternate,t,ci);t.memoizedProps=t.pendingProps,e===null?_ee(t):mr=e,WR.current=null}function _ee(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Bue(r,e),r!==null){r.flags&=32767,mr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jr=6,mr=null;return}}else if(r=Lue(r,e,ci),r!==null){mr=r;return}if(e=e.sibling,e!==null){mr=e;return}mr=e=t}while(e!==null);jr===0&&(jr=5)}function jl(t,e,r){var n=vt,i=qi.transition;try{qi.transition=null,vt=1,Yue(t,e,r,n)}finally{qi.transition=i,vt=n}return null}function Yue(t,e,r,n){do rd();while(Ea!==null);if(dt&6)throw Error(re(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Oce(t,s),t===Br&&(mr=Br=null,sn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||mg||(mg=!0,Cee(vy,function(){return rd(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=qi.transition,qi.transition=null;var o=vt;vt=1;var a=dt;dt|=4,WR.current=null,Vue(t,r),yee(r,t),mue(nP),xy=!!rP,nP=rP=null,t.current=r,Uue(r),xce(),dt=a,vt=o,qi.transition=s}else t.current=r;if(mg&&(mg=!1,Ea=t,Dy=i),s=t.pendingLanes,s===0&&(Aa=null),_ce(r.stateNode),Jn(t,ur()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ay)throw Ay=!1,t=_P,_P=null,t;return Dy&1&&t.tag!==0&&rd(),s=t.pendingLanes,s&1?t===EP?kf++:(kf=0,EP=t):kf=0,al(),null}function rd(){if(Ea!==null){var t=nZ(Dy),e=qi.transition,r=vt;try{if(qi.transition=null,vt=16>t?16:t,Ea===null)var n=!1;else{if(t=Ea,Ea=null,Dy=0,dt&6)throw Error(re(331));var i=dt;for(dt|=4,be=t.current;be!==null;){var s=be,o=s.child;if(be.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(be=c;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:Nf(8,d,s)}var h=d.child;if(h!==null)h.return=d,be=h;else for(;be!==null;){d=be;var f=d.sibling,p=d.return;if(pee(d),d===c){be=null;break}if(f!==null){f.return=p,be=f;break}be=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}be=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,be=o;else e:for(;be!==null;){if(s=be,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,be=y;break e}be=s.return}}var b=t.current;for(be=b;be!==null;){o=be;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,be=w;else e:for(o=b;be!==null;){if(a=be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:h0(9,a)}}catch(S){nr(a,a.return,S)}if(a===o){be=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,be=x;break e}be=a.return}}if(dt=i,al(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(i0,t)}catch{}n=!0}return n}finally{vt=r,qi.transition=e}}return!1}function tF(t,e,r){e=Id(r,e),e=nee(t,e,1),t=Ma(t,e,1),e=Pn(),t!==null&&(Wp(t,1,e),Jn(t,e))}function nr(t,e,r){if(t.tag===3)tF(t,t,r);else for(;e!==null;){if(e.tag===3){tF(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Aa===null||!Aa.has(n))){t=Id(r,t),t=iee(e,t,1),e=Ma(e,t,1),t=Pn(),e!==null&&(Wp(e,1,t),Jn(e,t));break}}e=e.return}}function Que(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Pn(),t.pingedLanes|=t.suspendedLanes&r,Br===t&&(sn&r)===r&&(jr===4||jr===3&&(sn&130023424)===sn&&500>ur()-GR?rc(t,0):KR|=r),Jn(t,e)}function Eee(t,e){e===0&&(t.mode&1?(e=sg,sg<<=1,!(sg&130023424)&&(sg=4194304)):e=1);var r=Pn();t=Po(t,e),t!==null&&(Wp(t,e,r),Jn(t,r))}function Xue(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Eee(t,r)}function Jue(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(re(314))}n!==null&&n.delete(e),Eee(t,r)}var Nee;Nee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qn.current)Kn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Kn=!1,que(t,e,r);Kn=!!(t.flags&131072)}else Kn=!1,Lt&&e.flags&1048576&&OZ(e,ky,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Xg(t,e),t=e.pendingProps;var i=Td(e,vn.current);td(e,r),i=BR(null,e,n,t,i,r);var s=zR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xn(n)?(s=!0,Ny(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,DR(e),i.updater=d0,e.stateNode=i,i._reactInternals=e,hP(e,n,t,r),e=mP(null,e,n,!0,s,r)):(e.tag=0,Lt&&s&&OR(e),En(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Xg(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=ede(n),t=ts(n,t),i){case 0:e=pP(null,e,n,t,r);break e;case 1:e=H$(null,e,n,t,r);break e;case 11:e=V$(null,e,n,t,r);break e;case 14:e=U$(null,e,n,ts(n.type,t),r);break e}throw Error(re(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),pP(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),H$(t,e,n,i,r);case 3:e:{if(lee(e),t===null)throw Error(re(387));n=e.pendingProps,s=e.memoizedState,i=s.element,AZ(t,e),jy(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Id(Error(re(423)),e),e=W$(t,e,n,r,i);break e}else if(n!==i){i=Id(Error(re(424)),e),e=W$(t,e,n,r,i);break e}else for(pi=Ra(e.stateNode.containerInfo.firstChild),mi=e,Lt=!0,ss=null,r=RZ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Od(),n===i){e=Io(t,e,r);break e}En(t,e,n,r)}e=e.child}return e;case 5:return DZ(e),t===null&&cP(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,iP(n,i)?o=null:s!==null&&iP(n,s)&&(e.flags|=32),aee(t,e),En(t,e,o,r),e.child;case 6:return t===null&&cP(e),null;case 13:return cee(t,e,r);case 4:return $R(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=jd(e,null,n,r):En(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),V$(t,e,n,i,r);case 7:return En(t,e,e.pendingProps,r),e.child;case 8:return En(t,e,e.pendingProps.children,r),e.child;case 12:return En(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,It(Ty,n._currentValue),n._currentValue=o,s!==null)if(ps(s.value,o)){if(s.children===i.children&&!Qn.current){e=Io(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=go(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),uP(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(re(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),uP(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}En(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,td(e,r),i=Ui(i),n=n(i),e.flags|=1,En(t,e,n,r),e.child;case 14:return n=e.type,i=ts(n,e.pendingProps),i=ts(n.type,i),U$(t,e,n,i,r);case 15:return see(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),Xg(t,e),e.tag=1,Xn(n)?(t=!0,Ny(e)):t=!1,td(e,r),ree(e,n,i),hP(e,n,i,r),mP(null,e,n,!0,t,r);case 19:return uee(t,e,r);case 22:return oee(t,e,r)}throw Error(re(156,e.tag))};function Cee(t,e){return ZJ(t,e)}function Zue(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(t,e,r,n){return new Zue(t,e,r,n)}function JR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ede(t){if(typeof t=="function")return JR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yR)return 11;if(t===vR)return 14}return 2}function $a(t,e){var r=t.alternate;return r===null?(r=Fi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ey(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")JR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Iu:return nc(r.children,i,s,e);case gR:o=8,i|=8;break;case Dj:return t=Fi(12,r,e,i|2),t.elementType=Dj,t.lanes=s,t;case $j:return t=Fi(13,r,e,i),t.elementType=$j,t.lanes=s,t;case Fj:return t=Fi(19,r,e,i),t.elementType=Fj,t.lanes=s,t;case DJ:return p0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case MJ:o=10;break e;case AJ:o=9;break e;case yR:o=11;break e;case vR:o=14;break e;case ea:o=16,n=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Fi(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function nc(t,e,r,n){return t=Fi(7,t,n,e),t.lanes=r,t}function p0(t,e,r,n){return t=Fi(22,t,n,e),t.elementType=DJ,t.lanes=r,t.stateNode={isHidden:!1},t}function h1(t,e,r){return t=Fi(6,t,null,e),t.lanes=r,t}function f1(t,e,r){return e=Fi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tde(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kb(0),this.expirationTimes=Kb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kb(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ZR(t,e,r,n,i,s,o,a,l){return t=new tde(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},DR(s),t}function rde(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function kee(t){if(!t)return Ja;t=t._reactInternals;e:{if(Vc(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var r=t.type;if(Xn(r))return kZ(t,r,e)}return e}function Tee(t,e,r,n,i,s,o,a,l){return t=ZR(r,n,!0,t,i,s,o,a,l),t.context=kee(null),r=t.current,n=Pn(),i=Da(r),s=go(n,i),s.callback=e??null,Ma(r,s,i),t.current.lanes=i,Wp(t,i,n),Jn(t,n),t}function m0(t,e,r,n){var i=e.current,s=Pn(),o=Da(i);return r=kee(r),e.context===null?e.context=r:e.pendingContext=r,e=go(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ma(i,e,o),t!==null&&(fs(t,i,o,s),Gg(t,i,o)),o}function Fy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function eM(t,e){rF(t,e),(t=t.alternate)&&rF(t,e)}function nde(){return null}var Oee=typeof reportError=="function"?reportError:function(t){console.error(t)};function tM(t){this._internalRoot=t}g0.prototype.render=tM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));m0(t,e,null,null)};g0.prototype.unmount=tM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xc(function(){m0(null,t,null,null)}),e[jo]=null}};function g0(t){this._internalRoot=t}g0.prototype.unstable_scheduleHydration=function(t){if(t){var e=oZ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<la.length&&e!==0&&e<la[r].priority;r++);la.splice(r,0,t),r===0&&lZ(t)}};function rM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function y0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nF(){}function ide(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Fy(o);s.call(c)}}var o=Tee(e,n,t,0,null,!1,!1,"",nF);return t._reactRootContainer=o,t[jo]=o.current,ep(t.nodeType===8?t.parentNode:t),xc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Fy(l);a.call(c)}}var l=ZR(t,0,!1,null,null,!1,!1,"",nF);return t._reactRootContainer=l,t[jo]=l.current,ep(t.nodeType===8?t.parentNode:t),xc(function(){m0(e,l,r,n)}),l}function v0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Fy(o);a.call(l)}}m0(e,o,t,i)}else o=ide(r,e,t,i,n);return Fy(o)}iZ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=uf(e.pendingLanes);r!==0&&(wR(e,r|1),Jn(e,ur()),!(dt&6)&&(Rd=ur()+500,al()))}break;case 13:xc(function(){var n=Po(t,1);if(n!==null){var i=Pn();fs(n,t,1,i)}}),eM(t,1)}};SR=function(t){if(t.tag===13){var e=Po(t,134217728);if(e!==null){var r=Pn();fs(e,t,134217728,r)}eM(t,134217728)}};sZ=function(t){if(t.tag===13){var e=Da(t),r=Po(t,e);if(r!==null){var n=Pn();fs(r,t,e,n)}eM(t,e)}};oZ=function(){return vt};aZ=function(t,e){var r=vt;try{return vt=t,e()}finally{vt=r}};Gj=function(t,e,r){switch(e){case"input":if(Bj(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=l0(n);if(!i)throw Error(re(90));FJ(n),Bj(n,i)}}}break;case"textarea":LJ(t,r);break;case"select":e=r.value,e!=null&&Xu(t,!!r.multiple,e,!1)}};KJ=YR;GJ=xc;var sde={usingClientEntryPoint:!1,Events:[Gp,Du,l0,HJ,WJ,YR]},Gh={findFiberByHostInstance:Rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ode={bundleType:Gh.bundleType,version:Gh.version,rendererPackageName:Gh.rendererPackageName,rendererConfig:Gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=XJ(t),t===null?null:t.stateNode},findFiberByHostInstance:Gh.findFiberByHostInstance||nde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gg.isDisabled&&gg.supportsFiber)try{i0=gg.inject(ode),Ds=gg}catch{}}vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sde;vi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rM(e))throw Error(re(200));return rde(t,e,null,r)};vi.createRoot=function(t,e){if(!rM(t))throw Error(re(299));var r=!1,n="",i=Oee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ZR(t,1,!1,null,null,r,!1,n,i),t[jo]=e.current,ep(t.nodeType===8?t.parentNode:t),new tM(e)};vi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=XJ(e),t=t===null?null:t.stateNode,t};vi.flushSync=function(t){return xc(t)};vi.hydrate=function(t,e,r){if(!y0(e))throw Error(re(200));return v0(null,t,e,!0,r)};vi.hydrateRoot=function(t,e,r){if(!rM(t))throw Error(re(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Oee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Tee(e,null,t,1,r??null,i,!1,s,o),t[jo]=e.current,ep(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new g0(e)};vi.render=function(t,e,r){if(!y0(e))throw Error(re(200));return v0(null,t,e,!1,r)};vi.unmountComponentAtNode=function(t){if(!y0(t))throw Error(re(40));return t._reactRootContainer?(xc(function(){v0(null,null,t,!1,function(){t._reactRootContainer=null,t[jo]=null})}),!0):!1};vi.unstable_batchedUpdates=YR;vi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!y0(r))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return v0(t,e,r,!1,n)};vi.version="18.3.1-next-f1338f8080-20240426";function jee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jee)}catch(t){console.error(t)}}jee(),jJ.exports=vi;var Pee=jJ.exports;const ade=vJ(Pee);var iF=Pee;Mj.createRoot=iF.createRoot,Mj.hydrateRoot=iF.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cp.apply(this,arguments)}var Na;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Na||(Na={}));const sF="popstate";function lde(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return kP("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:qy(i)}return ude(e,r,null,t)}function Kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cde(){return Math.random().toString(36).substr(2,8)}function oF(t,e){return{usr:t.state,key:t.key,idx:e}}function kP(t,e,r,n){return r===void 0&&(r=null),cp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?sh(e):e,{state:r,key:e&&e.key||n||cde()})}function qy(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function sh(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function ude(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Na.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(cp({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Na.Pop;let v=d(),y=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=Na.Push;let b=kP(g.location,v,y);c=d()+1;let w=oF(b,c),x=g.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(v,y){a=Na.Replace;let b=kP(g.location,v,y);c=d();let w=oF(b,c),x=g.createHref(b);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof v=="string"?v:qy(v);return b=b.replace(/ $/,"%20"),Kt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(sF,h),l=v,()=>{i.removeEventListener(sF,h),l=null}},createHref(v){return e(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var aF;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(aF||(aF={}));function dde(t,e,r){return r===void 0&&(r="/"),hde(t,e,r)}function hde(t,e,r,n){let i=typeof e=="string"?sh(e):e,s=Md(i.pathname||"/",r);if(s==null)return null;let o=Iee(t);fde(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Ede(s);a=Sde(o[l],c)}return a}function Iee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Kt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Fa([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Iee(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:xde(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Ree(s.path))i(s,o,l)}),e}function Ree(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Ree(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function fde(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:wde(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const pde=/^:[\w-]+$/,mde=3,gde=2,yde=1,vde=10,bde=-2,lF=t=>t==="*";function xde(t,e){let r=t.split("/"),n=r.length;return r.some(lF)&&(n+=bde),e&&(n+=gde),r.filter(i=>!lF(i)).reduce((i,s)=>i+(pde.test(s)?mde:s===""?yde:vde),n)}function wde(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Sde(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=TP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Fa([s,h.pathname]),pathnameBase:Ode(Fa([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Fa([s,h.pathnameBase]))}return o}function TP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=_de(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function _de(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),nM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Ede(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Md(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Nde=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cde=t=>Nde.test(t);function kde(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?sh(t):t,s;if(r)if(Cde(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),nM(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=cF(r.substring(1),"/"):s=cF(r,e)}else s=e;return{pathname:s,search:jde(n),hash:Pde(i)}}function cF(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function p1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Tde(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function iM(t,e){let r=Tde(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function sM(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=sh(t):(i=cp({},t),Kt(!i.pathname||!i.pathname.includes("?"),p1("?","pathname","search",i)),Kt(!i.pathname||!i.pathname.includes("#"),p1("#","pathname","hash",i)),Kt(!i.search||!i.search.includes("#"),p1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=kde(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Fa=t=>t.join("/").replace(/\/\/+/g,"/"),Ode=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jde=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Pde=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ide(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Mee=["post","put","patch","delete"];new Set(Mee);const Rde=["get",...Mee];new Set(Rde);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},up.apply(this,arguments)}const b0=T.createContext(null),Aee=T.createContext(null),Do=T.createContext(null),x0=T.createContext(null),$o=T.createContext({outlet:null,matches:[],isDataRoute:!1}),Dee=T.createContext(null);function Mde(t,e){let{relative:r}=e===void 0?{}:e;oh()||Kt(!1);let{basename:n,navigator:i}=T.useContext(Do),{hash:s,pathname:o,search:a}=S0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:Fa([n,o])),i.createHref({pathname:l,search:a,hash:s})}function oh(){return T.useContext(x0)!=null}function Fo(){return oh()||Kt(!1),T.useContext(x0).location}function $ee(t){T.useContext(Do).static||T.useLayoutEffect(t)}function Wi(){let{isDataRoute:t}=T.useContext($o);return t?Kde():Ade()}function Ade(){oh()||Kt(!1);let t=T.useContext(b0),{basename:e,future:r,navigator:n}=T.useContext(Do),{matches:i}=T.useContext($o),{pathname:s}=Fo(),o=JSON.stringify(iM(i,r.v7_relativeSplatPath)),a=T.useRef(!1);return $ee(()=>{a.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=sM(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Fa([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function w0(){let{matches:t}=T.useContext($o),e=t[t.length-1];return e?e.params:{}}function S0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(Do),{matches:i}=T.useContext($o),{pathname:s}=Fo(),o=JSON.stringify(iM(i,n.v7_relativeSplatPath));return T.useMemo(()=>sM(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function Dde(t,e){return $de(t,e)}function $de(t,e,r,n){oh()||Kt(!1);let{navigator:i}=T.useContext(Do),{matches:s}=T.useContext($o),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Fo(),d;if(e){var h;let v=typeof e=="string"?sh(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Kt(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=dde(t,{pathname:p}),g=zde(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Fa([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Fa([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,n);return e&&g?T.createElement(x0.Provider,{value:{location:up({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Na.Pop}},g):g}function Fde(){let t=Wde(),e=Ide(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:i},r):null,null)}const qde=T.createElement(Fde,null);class Lde extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement($o.Provider,{value:this.props.routeContext},T.createElement(Dee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bde(t){let{routeContext:e,match:r,children:n}=t,i=T.useContext(b0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement($o.Provider,{value:e},n)}function zde(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Kt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,v=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||qde,l&&(c<0&&f===0?(Gde("route-fallback"),m=!0,v=null):c===f&&(m=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),b=()=>{let w;return p?w=g:m?w=v:h.route.Component?w=T.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,T.createElement(Bde,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(Lde,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Fee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Fee||{}),qee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qee||{});function Vde(t){let e=T.useContext(b0);return e||Kt(!1),e}function Ude(t){let e=T.useContext(Aee);return e||Kt(!1),e}function Hde(t){let e=T.useContext($o);return e||Kt(!1),e}function Lee(t){let e=Hde(),r=e.matches[e.matches.length-1];return r.route.id||Kt(!1),r.route.id}function Wde(){var t;let e=T.useContext(Dee),r=Ude(),n=Lee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Kde(){let{router:t}=Vde(Fee.UseNavigateStable),e=Lee(qee.UseNavigateStable),r=T.useRef(!1);return $ee(()=>{r.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,up({fromRouteId:e},s)))},[t,e])}const uF={};function Gde(t,e,r){uF[t]||(uF[t]=!0)}function Yde(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Bee(t){let{to:e,replace:r,state:n,relative:i}=t;oh()||Kt(!1);let{future:s,static:o}=T.useContext(Do),{matches:a}=T.useContext($o),{pathname:l}=Fo(),c=Wi(),d=sM(e,iM(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:i}),[c,h,i,r,n]),null}function Xr(t){Kt(!1)}function Qde(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Na.Pop,navigator:s,static:o=!1,future:a}=t;oh()&&Kt(!1);let l=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:s,static:o,future:up({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=sh(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=T.useMemo(()=>{let v=Md(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:T.createElement(Do.Provider,{value:c},T.createElement(x0.Provider,{children:r,value:g}))}function dF(t){let{children:e,location:r}=t;return Dde(OP(e),r)}new Promise(()=>{});function OP(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,i)=>{if(!T.isValidElement(n))return;let s=[...e,i];if(n.type===T.Fragment){r.push.apply(r,OP(n.props.children,s));return}n.type!==Xr&&Kt(!1),!n.props.index||!n.props.children||Kt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=OP(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ly(){return Ly=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ly.apply(this,arguments)}function zee(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Xde(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Jde(t,e){return t.button===0&&(!e||e==="_self")&&!Xde(t)}function jP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Zde(t,e){let r=jP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const ehe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],the=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],rhe="6";try{window.__reactRouterVersion=rhe}catch{}const nhe=T.createContext({isTransitioning:!1}),ihe="startTransition",hF=Qle[ihe];function she(t){let{basename:e,children:r,future:n,window:i}=t,s=T.useRef();s.current==null&&(s.current=lde({window:i,v5Compat:!0}));let o=s.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=T.useCallback(h=>{c&&hF?hF(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>Yde(n),[n]),T.createElement(Qde,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const ohe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ahe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,He=T.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=zee(e,ehe),{basename:p}=T.useContext(Do),m,g=!1;if(typeof c=="string"&&ahe.test(c)&&(m=c,ohe))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=Md(x.pathname,p);x.origin===w.origin&&S!=null?c=S+x.search+x.hash:g=!0}catch{}let v=Mde(c,{relative:i}),y=uhe(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function b(w){n&&n(w),w.defaultPrevented||y(w)}return T.createElement("a",Ly({},f,{href:m||v,onClick:g||s?n:b,ref:r,target:l}))}),lhe=T.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=zee(e,the),f=S0(l,{relative:h.relative}),p=Fo(),m=T.useContext(Aee),{navigator:g,basename:v}=T.useContext(Do),y=m!=null&&hhe(f)&&c===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&v&&(x=Md(x,v)||x);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=w===b||!o&&w.startsWith(b)&&w.charAt(S)==="/",N=x!=null&&(x===b||!o&&x.startsWith(b)&&x.charAt(b.length)==="/"),E={isActive:_,isPending:N,isTransitioning:y},C=_?n:void 0,k;typeof s=="function"?k=s(E):k=[s,_?"active":null,N?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(E):a;return T.createElement(He,Ly({},h,{"aria-current":C,className:k,ref:r,style:j,to:l,viewTransition:c}),typeof d=="function"?d(E):d)});var PP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(PP||(PP={}));var fF;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fF||(fF={}));function che(t){let e=T.useContext(b0);return e||Kt(!1),e}function uhe(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Wi(),c=Fo(),d=S0(t,{relative:o});return T.useCallback(h=>{if(Jde(h,r)){h.preventDefault();let f=n!==void 0?n:qy(c)===qy(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,n,i,r,t,s,o,a])}function dhe(t){let e=T.useRef(jP(t)),r=T.useRef(!1),n=Fo(),i=T.useMemo(()=>Zde(n.search,r.current?null:e.current),[n.search]),s=Wi(),o=T.useCallback((a,l)=>{const c=jP(typeof a=="function"?a(i):a);r.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function hhe(t,e){e===void 0&&(e={});let r=T.useContext(nhe);r==null&&Kt(!1);let{basename:n}=che(PP.useViewTransitionState),i=S0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=Md(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Md(r.nextLocation.pathname,n)||r.nextLocation.pathname;return TP(i.pathname,o)!=null||TP(i.pathname,s)!=null}var Uc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},fhe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},fa,lR,oJ,phe=(oJ=class{constructor(){ve(this,fa,fhe);ve(this,lR,!1)}setTimeoutProvider(t){ae(this,fa,t)}setTimeout(t,e){return R(this,fa).setTimeout(t,e)}clearTimeout(t){R(this,fa).clearTimeout(t)}setInterval(t,e){return R(this,fa).setInterval(t,e)}clearInterval(t){R(this,fa).clearInterval(t)}},fa=new WeakMap,lR=new WeakMap,oJ),Dl=new phe;function mhe(t){setTimeout(t,0)}var wc=typeof window>"u"||"Deno"in globalThis;function mn(){}function ghe(t,e){return typeof t=="function"?t(e):t}function IP(t){return typeof t=="number"&&t>=0&&t!==1/0}function Vee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function qa(t,e){return typeof t=="function"?t(e):t}function ji(t,e){return typeof t=="function"?t(e):t}function pF(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==oM(o,e.options))return!1}else if(!dp(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function mF(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(Sc(e.options.mutationKey)!==Sc(s))return!1}else if(!dp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function oM(t,e){return((e==null?void 0:e.queryKeyHashFn)||Sc)(t)}function Sc(t){return JSON.stringify(t,(e,r)=>RP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function dp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>dp(t[r],e[r])):!1}var yhe=Object.prototype.hasOwnProperty;function aM(t,e){if(t===e)return t;const r=gF(t)&&gF(e);if(!r&&!(RP(t)&&RP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=r?c:s[c],h=t[d],f=e[d];if(h===f){a[d]=h,(r?c<i:yhe.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=aM(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function hp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function gF(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function RP(t){if(!yF(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!yF(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yF(t){return Object.prototype.toString.call(t)==="[object Object]"}function vhe(t){return new Promise(e=>{Dl.setTimeout(e,t)})}function MP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?aM(t,e):e}function bhe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function xhe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var lM=Symbol();function Uee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===lM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function cM(t,e){return typeof t=="function"?t(...e):!!t}function whe(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var Kl,pa,hd,aJ,She=(aJ=class extends Uc{constructor(){super();ve(this,Kl);ve(this,pa);ve(this,hd);ae(this,hd,e=>{if(!wc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,pa)||this.setEventListener(R(this,hd))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,pa))==null||e.call(this),ae(this,pa,void 0))}setEventListener(e){var r;ae(this,hd,e),(r=R(this,pa))==null||r.call(this),ae(this,pa,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,Kl)!==e&&(ae(this,Kl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof R(this,Kl)=="boolean"?R(this,Kl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Kl=new WeakMap,pa=new WeakMap,hd=new WeakMap,aJ),uM=new She;function AP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var _he=mhe;function Ehe(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=_he;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var ar=Ehe(),fd,ma,pd,lJ,Nhe=(lJ=class extends Uc{constructor(){super();ve(this,fd,!0);ve(this,ma);ve(this,pd);ae(this,pd,e=>{if(!wc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,ma)||this.setEventListener(R(this,pd))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ma))==null||e.call(this),ae(this,ma,void 0))}setEventListener(e){var r;ae(this,pd,e),(r=R(this,ma))==null||r.call(this),ae(this,ma,e(this.setOnline.bind(this)))}setOnline(e){R(this,fd)!==e&&(ae(this,fd,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,fd)}},fd=new WeakMap,ma=new WeakMap,pd=new WeakMap,lJ),By=new Nhe;function Che(t){return Math.min(1e3*2**t,3e4)}function Hee(t){return(t??"online")==="online"?By.isOnline():!0}var DP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Wee(t){let e=!1,r=0,n;const i=AP(),s=()=>i.status!=="pending",o=g=>{var v;if(!s()){const y=new DP(g);f(y),(v=t.onCancel)==null||v.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>uM.isFocused()&&(t.networkMode==="always"||By.isOnline())&&t.canRun(),d=()=>Hee(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var v;n=y=>{(s()||c())&&g(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const v=r===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const b=t.retry??(wc?0:3),w=t.retryDelay??Che,x=typeof w=="function"?w(r,y):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),vhe(x).then(()=>c()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Gl,cJ,Kee=(cJ=class{constructor(){ve(this,Gl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),IP(this.gcTime)&&ae(this,Gl,Dl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(wc?1/0:5*60*1e3))}clearGcTimeout(){R(this,Gl)&&(Dl.clearTimeout(R(this,Gl)),ae(this,Gl,void 0))}},Gl=new WeakMap,cJ),Yl,md,Ti,Ql,$r,$p,Xl,rs,to,uJ,khe=(uJ=class extends Kee{constructor(e){super();ve(this,rs);ve(this,Yl);ve(this,md);ve(this,Ti);ve(this,Ql);ve(this,$r);ve(this,$p);ve(this,Xl);ae(this,Xl,!1),ae(this,$p,e.defaultOptions),this.setOptions(e.options),this.observers=[],ae(this,Ql,e.client),ae(this,Ti,R(this,Ql).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ae(this,Yl,bF(this.options)),this.state=e.state??R(this,Yl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,$r))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,$p),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=bF(this.options);r.data!==void 0&&(this.setState(vF(r.data,r.dataUpdatedAt)),ae(this,Yl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Ti).remove(this)}setData(e,r){const n=MP(this.state.data,e,this.options);return Me(this,rs,to).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Me(this,rs,to).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=R(this,$r))==null?void 0:n.promise;return(i=R(this,$r))==null||i.cancel(e),r?r.then(mn).catch(mn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Yl))}isActive(){return this.observers.some(e=>ji(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===lM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qa(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Vee(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,$r))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,$r))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,Ti).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(R(this,$r)&&(R(this,Xl)?R(this,$r).cancel({revert:!0}):R(this,$r).cancelRetry()),this.scheduleGc()),R(this,Ti).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Me(this,rs,to).call(this,{type:"invalidate"})}async fetch(e,r){var l,c,d,h,f,p,m,g,v,y,b,w;if(this.state.fetchStatus!=="idle"&&((l=R(this,$r))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,$r))return R(this,$r).continueRetry(),R(this,$r).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(ae(this,Xl,!0),n.signal)})},s=()=>{const x=Uee(this.options,r),_=(()=>{const N={client:R(this,Ql),queryKey:this.queryKey,meta:this.meta};return i(N),N})();return ae(this,Xl,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,Ql),state:this.state,fetchFn:s};return i(x),x})();(c=this.options.behavior)==null||c.onFetch(a,this),ae(this,md,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Me(this,rs,to).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),ae(this,$r,Wee({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof DP&&x.revert&&this.setState({...R(this,md),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{Me(this,rs,to).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{Me(this,rs,to).call(this,{type:"pause"})},onContinue:()=>{Me(this,rs,to).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await R(this,$r).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=R(this,Ti).config).onSuccess)==null||p.call(f,x,this),(g=(m=R(this,Ti).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof DP){if(x.silent)return R(this,$r).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Me(this,rs,to).call(this,{type:"error",error:x}),(y=(v=R(this,Ti).config).onError)==null||y.call(v,x,this),(w=(b=R(this,Ti).config).onSettled)==null||w.call(b,this.state.data,x,this),x}finally{this.scheduleGc()}}},Yl=new WeakMap,md=new WeakMap,Ti=new WeakMap,Ql=new WeakMap,$r=new WeakMap,$p=new WeakMap,Xl=new WeakMap,rs=new WeakSet,to=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Gee(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...vF(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ae(this,md,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),ar.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Ti).notify({query:this,type:"updated",action:e})})},uJ);function Gee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Hee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function vF(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function bF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ln,ot,Fp,Sn,Jl,gd,oo,ga,qp,yd,vd,Zl,ec,ya,bd,ft,hf,$P,FP,qP,LP,BP,zP,VP,Yee,dJ,dM=(dJ=class extends Uc{constructor(e,r){super();ve(this,ft);ve(this,Ln);ve(this,ot);ve(this,Fp);ve(this,Sn);ve(this,Jl);ve(this,gd);ve(this,oo);ve(this,ga);ve(this,qp);ve(this,yd);ve(this,vd);ve(this,Zl);ve(this,ec);ve(this,ya);ve(this,bd,new Set);this.options=r,ae(this,Ln,e),ae(this,ga,null),ae(this,oo,AP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,ot).addObserver(this),xF(R(this,ot),this.options)?Me(this,ft,hf).call(this):this.updateResult(),Me(this,ft,LP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return UP(R(this,ot),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return UP(R(this,ot),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Me(this,ft,BP).call(this),Me(this,ft,zP).call(this),R(this,ot).removeObserver(this)}setOptions(e){const r=this.options,n=R(this,ot);if(this.options=R(this,Ln).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ji(this.options.enabled,R(this,ot))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Me(this,ft,VP).call(this),R(this,ot).setOptions(this.options),r._defaulted&&!hp(this.options,r)&&R(this,Ln).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,ot),observer:this});const i=this.hasListeners();i&&wF(R(this,ot),n,this.options,r)&&Me(this,ft,hf).call(this),this.updateResult(),i&&(R(this,ot)!==n||ji(this.options.enabled,R(this,ot))!==ji(r.enabled,R(this,ot))||qa(this.options.staleTime,R(this,ot))!==qa(r.staleTime,R(this,ot)))&&Me(this,ft,$P).call(this);const s=Me(this,ft,FP).call(this);i&&(R(this,ot)!==n||ji(this.options.enabled,R(this,ot))!==ji(r.enabled,R(this,ot))||s!==R(this,ya))&&Me(this,ft,qP).call(this,s)}getOptimisticResult(e){const r=R(this,Ln).getQueryCache().build(R(this,Ln),e),n=this.createResult(r,e);return Ohe(this,n)&&(ae(this,Sn,n),ae(this,gd,this.options),ae(this,Jl,R(this,ot).state)),n}getCurrentResult(){return R(this,Sn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,oo).status==="pending"&&R(this,oo).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){R(this,bd).add(e)}getCurrentQuery(){return R(this,ot)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=R(this,Ln).defaultQueryOptions(e),n=R(this,Ln).getQueryCache().build(R(this,Ln),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Me(this,ft,hf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,Sn)))}createResult(e,r){var C;const n=R(this,ot),i=this.options,s=R(this,Sn),o=R(this,Jl),a=R(this,gd),c=e!==n?e.state:R(this,Fp),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const k=this.hasListeners(),j=!k&&xF(e,r),P=k&&wF(e,n,r,i);(j||P)&&(h={...h,...Gee(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let k;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(k=s.data,y=!0):k=typeof r.placeholderData=="function"?r.placeholderData((C=R(this,vd))==null?void 0:C.state.data,R(this,vd)):r.placeholderData,k!==void 0&&(v="success",p=MP(s==null?void 0:s.data,k,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===R(this,qp))p=R(this,yd);else try{ae(this,qp,r.select),p=r.select(p),p=MP(s==null?void 0:s.data,p,r),ae(this,yd,p),ae(this,ga,null)}catch(k){ae(this,ga,k)}R(this,ga)&&(m=R(this,ga),p=R(this,yd),g=Date.now(),v="error");const b=h.fetchStatus==="fetching",w=v==="pending",x=v==="error",S=w&&b,_=p!==void 0,E={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:hM(e,r),refetch:this.refetch,promise:R(this,oo),isEnabled:ji(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=O=>{E.status==="error"?O.reject(E.error):E.data!==void 0&&O.resolve(E.data)},j=()=>{const O=ae(this,oo,E.promise=AP());k(O)},P=R(this,oo);switch(P.status){case"pending":e.queryHash===n.queryHash&&k(P);break;case"fulfilled":(E.status==="error"||E.data!==P.value)&&j();break;case"rejected":(E.status!=="error"||E.error!==P.reason)&&j();break}}return E}updateResult(){const e=R(this,Sn),r=this.createResult(R(this,ot),this.options);if(ae(this,Jl,R(this,ot).state),ae(this,gd,this.options),R(this,Jl).data!==void 0&&ae(this,vd,R(this,ot)),hp(r,e))return;ae(this,Sn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!R(this,bd).size)return!0;const o=new Set(s??R(this,bd));return this.options.throwOnError&&o.add("error"),Object.keys(R(this,Sn)).some(a=>{const l=a;return R(this,Sn)[l]!==e[l]&&o.has(l)})};Me(this,ft,Yee).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Me(this,ft,LP).call(this)}},Ln=new WeakMap,ot=new WeakMap,Fp=new WeakMap,Sn=new WeakMap,Jl=new WeakMap,gd=new WeakMap,oo=new WeakMap,ga=new WeakMap,qp=new WeakMap,yd=new WeakMap,vd=new WeakMap,Zl=new WeakMap,ec=new WeakMap,ya=new WeakMap,bd=new WeakMap,ft=new WeakSet,hf=function(e){Me(this,ft,VP).call(this);let r=R(this,ot).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(mn)),r},$P=function(){Me(this,ft,BP).call(this);const e=qa(this.options.staleTime,R(this,ot));if(wc||R(this,Sn).isStale||!IP(e))return;const n=Vee(R(this,Sn).dataUpdatedAt,e)+1;ae(this,Zl,Dl.setTimeout(()=>{R(this,Sn).isStale||this.updateResult()},n))},FP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,ot)):this.options.refetchInterval)??!1},qP=function(e){Me(this,ft,zP).call(this),ae(this,ya,e),!(wc||ji(this.options.enabled,R(this,ot))===!1||!IP(R(this,ya))||R(this,ya)===0)&&ae(this,ec,Dl.setInterval(()=>{(this.options.refetchIntervalInBackground||uM.isFocused())&&Me(this,ft,hf).call(this)},R(this,ya)))},LP=function(){Me(this,ft,$P).call(this),Me(this,ft,qP).call(this,Me(this,ft,FP).call(this))},BP=function(){R(this,Zl)&&(Dl.clearTimeout(R(this,Zl)),ae(this,Zl,void 0))},zP=function(){R(this,ec)&&(Dl.clearInterval(R(this,ec)),ae(this,ec,void 0))},VP=function(){const e=R(this,Ln).getQueryCache().build(R(this,Ln),this.options);if(e===R(this,ot))return;const r=R(this,ot);ae(this,ot,e),ae(this,Fp,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Yee=function(e){ar.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(R(this,Sn))}),R(this,Ln).getQueryCache().notify({query:R(this,ot),type:"observerResultsUpdated"})})},dJ);function The(t,e){return ji(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function xF(t,e){return The(t,e)||t.state.data!==void 0&&UP(t,e,e.refetchOnMount)}function UP(t,e,r){if(ji(e.enabled,t)!==!1&&qa(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&hM(t,e)}return!1}function wF(t,e,r,n){return(t!==e||ji(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&hM(t,r)}function hM(t,e){return ji(e.enabled,t)!==!1&&t.isStaleByTime(qa(e.staleTime,t))}function Ohe(t,e){return!hp(t.getCurrentResult(),e)}function SF(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=w=>{whe(w,()=>e.signal,()=>g=!0)},y=Uee(e.options,e.fetchOptions),b=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return v(j),j})(),E=await y(N),{maxPages:C}=e.options,k=S?xhe:bhe;return{pages:k(w.pages,E,C),pageParams:k(w.pageParams,x,C)}};if(i&&s.length){const w=i==="backward",x=w?jhe:_F,S={pages:s,pageParams:o},_=x(n,S);a=await b(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:_F(n,a);if(l>0&&x==null)break;a=await b(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=c}}}function _F(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function jhe(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Lp,Ts,_n,tc,Os,Jo,hJ,Phe=(hJ=class extends Kee{constructor(e){super();ve(this,Os);ve(this,Lp);ve(this,Ts);ve(this,_n);ve(this,tc);ae(this,Lp,e.client),this.mutationId=e.mutationId,ae(this,_n,e.mutationCache),ae(this,Ts,[]),this.state=e.state||Qee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,Ts).includes(e)||(R(this,Ts).push(e),this.clearGcTimeout(),R(this,_n).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ae(this,Ts,R(this,Ts).filter(r=>r!==e)),this.scheduleGc(),R(this,_n).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,Ts).length||(this.state.status==="pending"?this.scheduleGc():R(this,_n).remove(this))}continue(){var e;return((e=R(this,tc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,d,h,f,p,m,g,v,y,b,w,x,S,_,N,E,C;const r=()=>{Me(this,Os,Jo).call(this,{type:"continue"})},n={client:R(this,Lp),meta:this.options.meta,mutationKey:this.options.mutationKey};ae(this,tc,Wee({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(k,j)=>{Me(this,Os,Jo).call(this,{type:"failed",failureCount:k,error:j})},onPause:()=>{Me(this,Os,Jo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,_n).canRun(this)}));const i=this.state.status==="pending",s=!R(this,tc).canStart();try{if(i)r();else{Me(this,Os,Jo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=R(this,_n).config).onMutate)==null?void 0:a.call(o,e,this,n));const j=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,n));j!==this.state.context&&Me(this,Os,Jo).call(this,{type:"pending",context:j,variables:e,isPaused:s})}const k=await R(this,tc).start();return await((h=(d=R(this,_n).config).onSuccess)==null?void 0:h.call(d,k,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,k,e,this.state.context,n)),await((g=(m=R(this,_n).config).onSettled)==null?void 0:g.call(m,k,null,this.state.variables,this.state.context,this,n)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,k,null,e,this.state.context,n)),Me(this,Os,Jo).call(this,{type:"success",data:k}),k}catch(k){try{await((w=(b=R(this,_n).config).onError)==null?void 0:w.call(b,k,e,this.state.context,this,n))}catch(j){Promise.reject(j)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,k,e,this.state.context,n))}catch(j){Promise.reject(j)}try{await((N=(_=R(this,_n).config).onSettled)==null?void 0:N.call(_,void 0,k,this.state.variables,this.state.context,this,n))}catch(j){Promise.reject(j)}try{await((C=(E=this.options).onSettled)==null?void 0:C.call(E,void 0,k,e,this.state.context,n))}catch(j){Promise.reject(j)}throw Me(this,Os,Jo).call(this,{type:"error",error:k}),k}finally{R(this,_n).runNext(this)}}},Lp=new WeakMap,Ts=new WeakMap,_n=new WeakMap,tc=new WeakMap,Os=new WeakSet,Jo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ar.batch(()=>{R(this,Ts).forEach(n=>{n.onMutationUpdate(e)}),R(this,_n).notify({mutation:this,type:"updated",action:e})})},hJ);function Qee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ao,ns,Bp,fJ,Ihe=(fJ=class extends Uc{constructor(e={}){super();ve(this,ao);ve(this,ns);ve(this,Bp);this.config=e,ae(this,ao,new Set),ae(this,ns,new Map),ae(this,Bp,0)}build(e,r,n){const i=new Phe({client:e,mutationCache:this,mutationId:++Zm(this,Bp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){R(this,ao).add(e);const r=yg(e);if(typeof r=="string"){const n=R(this,ns).get(r);n?n.push(e):R(this,ns).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,ao).delete(e)){const r=yg(e);if(typeof r=="string"){const n=R(this,ns).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&R(this,ns).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=yg(e);if(typeof r=="string"){const n=R(this,ns).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=yg(e);if(typeof r=="string"){const i=(n=R(this,ns).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ar.batch(()=>{R(this,ao).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,ao).clear(),R(this,ns).clear()})}getAll(){return Array.from(R(this,ao))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>mF(r,n))}findAll(e={}){return this.getAll().filter(r=>mF(e,r))}notify(e){ar.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return ar.batch(()=>Promise.all(e.map(r=>r.continue().catch(mn))))}},ao=new WeakMap,ns=new WeakMap,Bp=new WeakMap,fJ);function yg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var lo,va,Bn,co,To,ty,HP,pJ,Rhe=(pJ=class extends Uc{constructor(e,r){super();ve(this,To);ve(this,lo);ve(this,va);ve(this,Bn);ve(this,co);ae(this,lo,e),this.setOptions(r),this.bindMethods(),Me(this,To,ty).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=R(this,lo).defaultMutationOptions(e),hp(this.options,r)||R(this,lo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Bn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Sc(r.mutationKey)!==Sc(this.options.mutationKey)?this.reset():((n=R(this,Bn))==null?void 0:n.state.status)==="pending"&&R(this,Bn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=R(this,Bn))==null||e.removeObserver(this)}onMutationUpdate(e){Me(this,To,ty).call(this),Me(this,To,HP).call(this,e)}getCurrentResult(){return R(this,va)}reset(){var e;(e=R(this,Bn))==null||e.removeObserver(this),ae(this,Bn,void 0),Me(this,To,ty).call(this),Me(this,To,HP).call(this)}mutate(e,r){var n;return ae(this,co,r),(n=R(this,Bn))==null||n.removeObserver(this),ae(this,Bn,R(this,lo).getMutationCache().build(R(this,lo),this.options)),R(this,Bn).addObserver(this),R(this,Bn).execute(e)}},lo=new WeakMap,va=new WeakMap,Bn=new WeakMap,co=new WeakMap,To=new WeakSet,ty=function(){var r;const e=((r=R(this,Bn))==null?void 0:r.state)??Qee();ae(this,va,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},HP=function(e){ar.batch(()=>{var r,n,i,s,o,a,l,c;if(R(this,co)&&this.hasListeners()){const d=R(this,va).variables,h=R(this,va).context,f={client:R(this,lo),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=R(this,co)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=R(this,co)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=R(this,co)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(c=(l=R(this,co)).onSettled)==null||c.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(R(this,va))})})},pJ);function EF(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function Mhe(t,e,r){const n=t.slice(0);return n[e]=r,n}var xd,li,wd,Sd,Oi,ba,zp,Vp,Up,an,WP,KP,GP,YP,QP,mJ,Ahe=(mJ=class extends Uc{constructor(e,r,n){super();ve(this,an);ve(this,xd);ve(this,li);ve(this,wd);ve(this,Sd);ve(this,Oi);ve(this,ba);ve(this,zp);ve(this,Vp);ve(this,Up,[]);ae(this,xd,e),ae(this,Sd,n),ae(this,wd,[]),ae(this,Oi,[]),ae(this,li,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&R(this,Oi).forEach(e=>{e.subscribe(r=>{Me(this,an,YP).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,R(this,Oi).forEach(e=>{e.destroy()})}setQueries(e,r){ae(this,wd,e),ae(this,Sd,r),ar.batch(()=>{const n=R(this,Oi),i=Me(this,an,GP).call(this,R(this,wd));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),c=a||l,d=c?!0:o.some((h,f)=>{const p=R(this,li)[f];return!p||!hp(h,p)});!c&&!d||(c&&(ae(this,Up,i),ae(this,Oi,s)),ae(this,li,o),this.hasListeners()&&(c&&(EF(n,s).forEach(h=>{h.destroy()}),EF(s,n).forEach(h=>{h.subscribe(f=>{Me(this,an,YP).call(this,h,f)})})),Me(this,an,QP).call(this)))})}getCurrentResult(){return R(this,li)}getQueries(){return R(this,Oi).map(e=>e.getCurrentQuery())}getObservers(){return R(this,Oi)}getOptimisticResult(e,r){const n=Me(this,an,GP).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>Me(this,an,KP).call(this,s??i,r),()=>Me(this,an,WP).call(this,i,n)]}},xd=new WeakMap,li=new WeakMap,wd=new WeakMap,Sd=new WeakMap,Oi=new WeakMap,ba=new WeakMap,zp=new WeakMap,Vp=new WeakMap,Up=new WeakMap,an=new WeakSet,WP=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},KP=function(e,r){return r?((!R(this,ba)||R(this,li)!==R(this,Vp)||r!==R(this,zp))&&(ae(this,zp,r),ae(this,Vp,R(this,li)),ae(this,ba,aM(R(this,ba),r(e)))),R(this,ba)):e},GP=function(e){const r=new Map;R(this,Oi).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=R(this,xd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new dM(R(this,xd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},YP=function(e,r){const n=R(this,Oi).indexOf(e);n!==-1&&(ae(this,li,Mhe(R(this,li),n,r)),Me(this,an,QP).call(this))},QP=function(){var e;if(this.hasListeners()){const r=R(this,ba),n=Me(this,an,WP).call(this,R(this,li),R(this,Up)),i=Me(this,an,KP).call(this,n,(e=R(this,Sd))==null?void 0:e.combine);r!==i&&ar.batch(()=>{this.listeners.forEach(s=>{s(R(this,li))})})}},mJ),js,gJ,Dhe=(gJ=class extends Uc{constructor(e={}){super();ve(this,js);this.config=e,ae(this,js,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??oM(i,r);let o=this.get(s);return o||(o=new khe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){R(this,js).has(e.queryHash)||(R(this,js).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=R(this,js).get(e.queryHash);r&&(e.destroy(),r===e&&R(this,js).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ar.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,js).get(e)}getAll(){return[...R(this,js).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>pF(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>pF(e,n)):r}notify(e){ar.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){ar.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ar.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},js=new WeakMap,gJ),tr,xa,wa,_d,Ed,Sa,Nd,Cd,yJ,$he=(yJ=class{constructor(t={}){ve(this,tr);ve(this,xa);ve(this,wa);ve(this,_d);ve(this,Ed);ve(this,Sa);ve(this,Nd);ve(this,Cd);ae(this,tr,t.queryCache||new Dhe),ae(this,xa,t.mutationCache||new Ihe),ae(this,wa,t.defaultOptions||{}),ae(this,_d,new Map),ae(this,Ed,new Map),ae(this,Sa,0)}mount(){Zm(this,Sa)._++,R(this,Sa)===1&&(ae(this,Nd,uM.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,tr).onFocus())})),ae(this,Cd,By.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,tr).onOnline())})))}unmount(){var t,e;Zm(this,Sa)._--,R(this,Sa)===0&&((t=R(this,Nd))==null||t.call(this),ae(this,Nd,void 0),(e=R(this,Cd))==null||e.call(this),ae(this,Cd,void 0))}isFetching(t){return R(this,tr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,xa).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,tr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=R(this,tr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(qa(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return R(this,tr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=R(this,tr).get(n.queryHash),s=i==null?void 0:i.state.data,o=ghe(e,s);if(o!==void 0)return R(this,tr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return ar.batch(()=>R(this,tr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,tr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=R(this,tr);ar.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=R(this,tr);return ar.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=ar.batch(()=>R(this,tr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(mn).catch(mn)}invalidateQueries(t,e={}){return ar.batch(()=>(R(this,tr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=ar.batch(()=>R(this,tr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(mn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(mn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=R(this,tr).build(this,e);return r.isStaleByTime(qa(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(mn).catch(mn)}fetchInfiniteQuery(t){return t.behavior=SF(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(mn).catch(mn)}ensureInfiniteQueryData(t){return t.behavior=SF(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return By.isOnline()?R(this,xa).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,tr)}getMutationCache(){return R(this,xa)}getDefaultOptions(){return R(this,wa)}setDefaultOptions(t){ae(this,wa,t)}setQueryDefaults(t,e){R(this,_d).set(Sc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,_d).values()],r={};return e.forEach(n=>{dp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){R(this,Ed).set(Sc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,Ed).values()],r={};return e.forEach(n=>{dp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,wa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=oM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===lM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,wa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,tr).clear(),R(this,xa).clear()}},tr=new WeakMap,xa=new WeakMap,wa=new WeakMap,_d=new WeakMap,Ed=new WeakMap,Sa=new WeakMap,Nd=new WeakMap,Cd=new WeakMap,yJ),Xee=T.createContext(void 0),bt=t=>{const e=T.useContext(Xee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Fhe=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(Xee.Provider,{value:t,children:e})),Jee=T.createContext(!1),Zee=()=>T.useContext(Jee);Jee.Provider;function qhe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Lhe=T.createContext(qhe()),ete=()=>T.useContext(Lhe),tte=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?cM(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},rte=t=>{T.useEffect(()=>{t.clearReset()},[t])},nte=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||cM(r,[t.error,n])),ite=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ste=(t,e)=>t.isLoading&&t.isFetching&&!e,XP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,zy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function JP({queries:t,...e},r){const n=bt(),i=Zee(),s=ete(),o=T.useMemo(()=>t.map(g=>{const v=n.defaultQueryOptions(g);return v._optimisticResults=i?"isRestoring":"optimistic",v}),[t,n,i]);o.forEach(g=>{ite(g);const v=n.getQueryCache().get(g.queryHash);tte(g,s,v)}),rte(s);const[a]=T.useState(()=>new Ahe(n,o,e)),[l,c,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;T.useSyncExternalStore(T.useCallback(g=>h?a.subscribe(ar.batchCalls(g)):mn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),T.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,v)=>XP(o[v],g))?l.flatMap((g,v)=>{const y=o[v];if(y){const b=new dM(n,y);if(XP(y,g))return zy(y,b,s);ste(g,i)&&zy(y,b,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,v)=>{const y=o[v];return y&&nte({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return c(d())}function Bhe(t,e,r){var f,p,m,g;const n=Zee(),i=ete(),s=bt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",ite(o),tte(o,i,a),rte(i);const l=!s.getQueryCache().get(o.queryHash),[c]=T.useState(()=>new e(s,o)),d=c.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(v=>{const y=h?c.subscribe(ar.batchCalls(v)):mn;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(o)},[o,c]),XP(o,d))throw zy(o,c,i);if(nte({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!wc&&ste(d,n)){const v=l?zy(o,c,i):a==null?void 0:a.promise;v==null||v.catch(mn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function ht(t,e){return Bhe(t,dM)}function nt(t,e){const r=bt(),[n]=T.useState(()=>new Rhe(r,t));T.useEffect(()=>{n.setOptions(t)},[n,t]);const i=T.useSyncExternalStore(T.useCallback(o=>n.subscribe(ar.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=T.useCallback((o,a)=>{n.mutate(o,a).catch(mn)},[n]);if(i.error&&cM(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function fM(){const t=window.prmConfig||{};return T.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function ote(t,e){return function(){return t.apply(e,arguments)}}const{toString:zhe}=Object.prototype,{getPrototypeOf:pM}=Object,{iterator:_0,toStringTag:ate}=Symbol,E0=(t=>e=>{const r=zhe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ys=t=>(t=t.toLowerCase(),e=>E0(e)===t),N0=t=>e=>typeof e===t,{isArray:ah}=Array,Ad=N0("undefined");function Qp(t){return t!==null&&!Ad(t)&&t.constructor!==null&&!Ad(t.constructor)&&Zn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const lte=ys("ArrayBuffer");function Vhe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&lte(t.buffer),e}const Uhe=N0("string"),Zn=N0("function"),cte=N0("number"),Xp=t=>t!==null&&typeof t=="object",Hhe=t=>t===!0||t===!1,ry=t=>{if(E0(t)!=="object")return!1;const e=pM(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ate in t)&&!(_0 in t)},Whe=t=>{if(!Xp(t)||Qp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Khe=ys("Date"),Ghe=ys("File"),Yhe=ys("Blob"),Qhe=ys("FileList"),Xhe=t=>Xp(t)&&Zn(t.pipe),Jhe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Zn(t.append)&&((e=E0(t))==="formdata"||e==="object"&&Zn(t.toString)&&t.toString()==="[object FormData]"))},Zhe=ys("URLSearchParams"),[efe,tfe,rfe,nfe]=["ReadableStream","Request","Response","Headers"].map(ys),ife=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jp(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),ah(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Qp(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function ute(t,e){if(Qp(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const $l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dte=t=>!Ad(t)&&t!==$l;function ZP(){const{caseless:t,skipUndefined:e}=dte(this)&&this||{},r={},n=(i,s)=>{const o=t&&ute(r,s)||s;ry(r[o])&&ry(i)?r[o]=ZP(r[o],i):ry(i)?r[o]=ZP({},i):ah(i)?r[o]=i.slice():(!e||!Ad(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Jp(arguments[i],n);return r}const sfe=(t,e,r,{allOwnKeys:n}={})=>(Jp(e,(i,s)=>{r&&Zn(i)?t[s]=ote(i,r):t[s]=i},{allOwnKeys:n}),t),ofe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),afe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},lfe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&pM(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},cfe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},ufe=t=>{if(!t)return null;if(ah(t))return t;let e=t.length;if(!cte(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},dfe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&pM(Uint8Array)),hfe=(t,e)=>{const n=(t&&t[_0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},ffe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},pfe=ys("HTMLFormElement"),mfe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),NF=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),gfe=ys("RegExp"),hte=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Jp(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},yfe=t=>{hte(t,(e,r)=>{if(Zn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Zn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},vfe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return ah(t)?n(t):n(String(t).split(e)),r},bfe=()=>{},xfe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function wfe(t){return!!(t&&Zn(t.append)&&t[ate]==="FormData"&&t[_0])}const Sfe=t=>{const e=new Array(10),r=(n,i)=>{if(Xp(n)){if(e.indexOf(n)>=0)return;if(Qp(n))return n;if(!("toJSON"in n)){e[i]=n;const s=ah(n)?[]:{};return Jp(n,(o,a)=>{const l=r(o,i+1);!Ad(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},_fe=ys("AsyncFunction"),Efe=t=>t&&(Xp(t)||Zn(t))&&Zn(t.then)&&Zn(t.catch),fte=((t,e)=>t?setImmediate:e?((r,n)=>($l.addEventListener("message",({source:i,data:s})=>{i===$l&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),$l.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Zn($l.postMessage)),Nfe=typeof queueMicrotask<"u"?queueMicrotask.bind($l):typeof process<"u"&&process.nextTick||fte,Cfe=t=>t!=null&&Zn(t[_0]),V={isArray:ah,isArrayBuffer:lte,isBuffer:Qp,isFormData:Jhe,isArrayBufferView:Vhe,isString:Uhe,isNumber:cte,isBoolean:Hhe,isObject:Xp,isPlainObject:ry,isEmptyObject:Whe,isReadableStream:efe,isRequest:tfe,isResponse:rfe,isHeaders:nfe,isUndefined:Ad,isDate:Khe,isFile:Ghe,isBlob:Yhe,isRegExp:gfe,isFunction:Zn,isStream:Xhe,isURLSearchParams:Zhe,isTypedArray:dfe,isFileList:Qhe,forEach:Jp,merge:ZP,extend:sfe,trim:ife,stripBOM:ofe,inherits:afe,toFlatObject:lfe,kindOf:E0,kindOfTest:ys,endsWith:cfe,toArray:ufe,forEachEntry:hfe,matchAll:ffe,isHTMLForm:pfe,hasOwnProperty:NF,hasOwnProp:NF,reduceDescriptors:hte,freezeMethods:yfe,toObjectSet:vfe,toCamelCase:mfe,noop:bfe,toFiniteNumber:xfe,findKey:ute,global:$l,isContextDefined:dte,isSpecCompliantForm:wfe,toJSONObject:Sfe,isAsyncFn:_fe,isThenable:Efe,setImmediate:fte,asap:Nfe,isIterable:Cfe};function Ue(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}V.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const pte=Ue.prototype,mte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mte[t]={value:t}});Object.defineProperties(Ue,mte);Object.defineProperty(pte,"isAxiosError",{value:!0});Ue.from=(t,e,r,n,i,s)=>{const o=Object.create(pte);V.toFlatObject(t,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Ue.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const kfe=null;function eI(t){return V.isPlainObject(t)||V.isArray(t)}function gte(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function CF(t,e,r){return t?t.concat(e).map(function(i,s){return i=gte(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function Tfe(t){return V.isArray(t)&&!t.some(eI)}const Ofe=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function C0(t,e,r){if(!V.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=V.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!V.isUndefined(v[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(V.isDate(m))return m.toISOString();if(V.isBoolean(m))return m.toString();if(!l&&V.isBlob(m))throw new Ue("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(m)||V.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,v){let y=m;if(m&&!v&&typeof m=="object"){if(V.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(V.isArray(m)&&Tfe(m)||(V.isFileList(m)||V.endsWith(g,"[]"))&&(y=V.toArray(m)))return g=gte(g),y.forEach(function(w,x){!(V.isUndefined(w)||w===null)&&e.append(o===!0?CF([g],x,s):o===null?g:g+"[]",c(w))}),!1}return eI(m)?!0:(e.append(CF(v,g,s),c(m)),!1)}const h=[],f=Object.assign(Ofe,{defaultVisitor:d,convertValue:c,isVisitable:eI});function p(m,g){if(!V.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),V.forEach(m,function(y,b){(!(V.isUndefined(y)||y===null)&&i.call(e,y,V.isString(b)?b.trim():b,g,f))===!0&&p(y,g?g.concat(b):[b])}),h.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return p(t),e}function kF(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function mM(t,e){this._pairs=[],t&&C0(t,this,e)}const yte=mM.prototype;yte.append=function(e,r){this._pairs.push([e,r])};yte.toString=function(e){const r=e?function(n){return e.call(this,n,kF)}:kF;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function jfe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function vte(t,e,r){if(!e)return t;const n=r&&r.encode||jfe;V.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=V.isURLSearchParams(e)?e.toString():new mM(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class TF{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(n){n!==null&&e(n)})}}const bte={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Pfe=typeof URLSearchParams<"u"?URLSearchParams:mM,Ife=typeof FormData<"u"?FormData:null,Rfe=typeof Blob<"u"?Blob:null,Mfe={isBrowser:!0,classes:{URLSearchParams:Pfe,FormData:Ife,Blob:Rfe},protocols:["http","https","file","blob","url","data"]},gM=typeof window<"u"&&typeof document<"u",tI=typeof navigator=="object"&&navigator||void 0,Afe=gM&&(!tI||["ReactNative","NativeScript","NS"].indexOf(tI.product)<0),Dfe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$fe=gM&&window.location.href||"http://localhost",Ffe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gM,hasStandardBrowserEnv:Afe,hasStandardBrowserWebWorkerEnv:Dfe,navigator:tI,origin:$fe},Symbol.toStringTag,{value:"Module"})),yn={...Ffe,...Mfe};function qfe(t,e){return C0(t,new yn.classes.URLSearchParams,{visitor:function(r,n,i,s){return yn.isNode&&V.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Lfe(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Bfe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function xte(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&V.isArray(i)?i.length:o,l?(V.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!V.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&V.isArray(i[o])&&(i[o]=Bfe(i[o])),!a)}if(V.isFormData(t)&&V.isFunction(t.entries)){const r={};return V.forEachEntry(t,(n,i)=>{e(Lfe(n),i,r,0)}),r}return null}function zfe(t,e,r){if(V.isString(t))try{return(e||JSON.parse)(t),V.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Zp={transitional:bte,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=V.isObject(e);if(s&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return i?JSON.stringify(xte(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qfe(e,this.formSerializer).toString();if((a=V.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return C0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),zfe(e)):e}],transformResponse:[function(e){const r=this.transitional||Zp.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ue.from(a,Ue.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yn.classes.FormData,Blob:yn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Zp.headers[t]={}});const Vfe=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ufe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&Vfe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},OF=Symbol("internals");function Yh(t){return t&&String(t).trim().toLowerCase()}function ny(t){return t===!1||t==null?t:V.isArray(t)?t.map(ny):String(t)}function Hfe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Wfe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function m1(t,e,r,n,i){if(V.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!V.isString(e)){if(V.isString(n))return e.indexOf(n)!==-1;if(V.isRegExp(n))return n.test(e)}}function Kfe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Gfe(t,e){const r=V.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let ei=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,c){const d=Yh(l);if(!d)throw new Error("header name must be a non-empty string");const h=V.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=ny(a))}const o=(a,l)=>V.forEach(a,(c,d)=>s(c,d,l));if(V.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(V.isString(e)&&(e=e.trim())&&!Wfe(e))o(Ufe(e),r);else if(V.isObject(e)&&V.isIterable(e)){let a={},l,c;for(const d of e){if(!V.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?V.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Yh(e),e){const n=V.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Hfe(i);if(V.isFunction(r))return r.call(this,i,n);if(V.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Yh(e),e){const n=V.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||m1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Yh(o),o){const a=V.findKey(n,o);a&&(!r||m1(n,n[a],a,r))&&(delete n[a],i=!0)}}return V.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||m1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return V.forEach(this,(i,s)=>{const o=V.findKey(n,s);if(o){r[o]=ny(i),delete r[s];return}const a=e?Kfe(s):String(s).trim();a!==s&&delete r[s],r[a]=ny(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return V.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&V.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[OF]=this[OF]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Yh(o);n[a]||(Gfe(i,o),n[a]=!0)}return V.isArray(e)?e.forEach(s):s(e),this}};ei.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(ei.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});V.freezeMethods(ei);function g1(t,e){const r=this||Zp,n=e||r,i=ei.from(n.headers);let s=n.data;return V.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function wte(t){return!!(t&&t.__CANCEL__)}function lh(t,e,r){Ue.call(this,t??"canceled",Ue.ERR_CANCELED,e,r),this.name="CanceledError"}V.inherits(lh,Ue,{__CANCEL__:!0});function Ste(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ue("Request failed with status code "+r.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Yfe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Qfe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[s];o||(o=c),r[i]=l,n[i]=c;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(f*1e3/p):void 0}}function Xfe(t,e){let r=0,n=1e3/e,i,s;const o=(c,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const d=Date.now(),h=d-r;h>=n?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const Vy=(t,e,r=3)=>{let n=0;const i=Qfe(50,250);return Xfe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},jF=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},PF=t=>(...e)=>V.asap(()=>t(...e)),Jfe=yn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,yn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(yn.origin),yn.navigator&&/(msie|trident)/i.test(yn.navigator.userAgent)):()=>!0,Zfe=yn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];V.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),V.isString(n)&&a.push(`path=${n}`),V.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),V.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function epe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function tpe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function _te(t,e,r){let n=!epe(e);return t&&(n||r==!1)?tpe(t,e):e}const IF=t=>t instanceof ei?{...t}:t;function _c(t,e){e=e||{};const r={};function n(c,d,h,f){return V.isPlainObject(c)&&V.isPlainObject(d)?V.merge.call({caseless:f},c,d):V.isPlainObject(d)?V.merge({},d):V.isArray(d)?d.slice():d}function i(c,d,h,f){if(V.isUndefined(d)){if(!V.isUndefined(c))return n(void 0,c,h,f)}else return n(c,d,h,f)}function s(c,d){if(!V.isUndefined(d))return n(void 0,d)}function o(c,d){if(V.isUndefined(d)){if(!V.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function a(c,d,h){if(h in e)return n(c,d);if(h in t)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>i(IF(c),IF(d),h,!0)};return V.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);V.isUndefined(f)&&h!==a||(r[d]=f)}),r}const Ete=t=>{const e=_c({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=ei.from(o),e.url=vte(_te(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),V.isFormData(r)){if(yn.hasStandardBrowserEnv||yn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(V.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{c.includes(d.toLowerCase())&&o.set(d,h)})}}if(yn.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(e)),n||n!==!1&&Jfe(e.url))){const l=i&&s&&Zfe.read(s);l&&o.set(i,l)}return e},rpe=typeof XMLHttpRequest<"u",npe=rpe&&function(t){return new Promise(function(r,n){const i=Ete(t);let s=i.data;const o=ei.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function y(){if(!v)return;const w=ei.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:t,request:v};Ste(function(N){r(N),g()},function(N){n(N),g()},S),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(n(new Ue("Request aborted",Ue.ECONNABORTED,t,v)),v=null)},v.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new Ue(S,Ue.ERR_NETWORK,t,v);_.event=x||null,n(_),v=null},v.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||bte;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Ue(x,S.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,t,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&V.forEach(o.toJSON(),function(x,S){v.setRequestHeader(S,x)}),V.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),c&&([f,m]=Vy(c,!0),v.addEventListener("progress",f)),l&&v.upload&&([h,p]=Vy(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{v&&(n(!w||w.type?new lh(null,t,v):w),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=Yfe(i.url);if(b&&yn.protocols.indexOf(b)===-1){n(new Ue("Unsupported protocol "+b+":",Ue.ERR_BAD_REQUEST,t));return}v.send(s||null)})},ipe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Ue?d:new lh(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Ue(`timeout ${e} of ms exceeded`,Ue.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>V.asap(a),l}},spe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},ope=async function*(t,e){for await(const r of ape(t))yield*spe(r,e)},ape=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},RF=(t,e,r,n)=>{const i=ope(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},MF=64*1024,{isFunction:vg}=V,lpe=(({Request:t,Response:e})=>({Request:t,Response:e}))(V.global),{ReadableStream:AF,TextEncoder:DF}=V.global,$F=(t,...e)=>{try{return!!t(...e)}catch{return!1}},cpe=t=>{t=V.merge.call({skipUndefined:!0},lpe,t);const{fetch:e,Request:r,Response:n}=t,i=e?vg(e):typeof fetch=="function",s=vg(r),o=vg(n);if(!i)return!1;const a=i&&vg(AF),l=i&&(typeof DF=="function"?(m=>g=>m.encode(g))(new DF):async m=>new Uint8Array(await new r(m).arrayBuffer())),c=s&&a&&$F(()=>{let m=!1;const g=new r(yn.origin,{body:new AF,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&$F(()=>V.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,v)=>{let y=g&&g[m];if(y)return y.call(g);throw new Ue(`Response type '${m}' is not supported`,Ue.ERR_NOT_SUPPORT,v)})});const f=async m=>{if(m==null)return 0;if(V.isBlob(m))return m.size;if(V.isSpecCompliantForm(m))return(await new r(yn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(V.isArrayBufferView(m)||V.isArrayBuffer(m))return m.byteLength;if(V.isURLSearchParams(m)&&(m=m+""),V.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const v=V.toFiniteNumber(m.getContentLength());return v??f(g)};return async m=>{let{url:g,method:v,data:y,signal:b,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:N,headers:E,withCredentials:C="same-origin",fetchOptions:k}=Ete(m),j=e||fetch;N=N?(N+"").toLowerCase():"text";let P=ipe([b,w&&w.toAbortSignal()],x),O=null;const A=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let q;try{if(_&&c&&v!=="get"&&v!=="head"&&(q=await p(E,y))!==0){let G=new r(g,{method:"POST",body:y,duplex:"half"}),L;if(V.isFormData(y)&&(L=G.headers.get("content-type"))&&E.setContentType(L),G.body){const[Z,ce]=jF(q,Vy(PF(_)));y=RF(G.body,MF,Z,ce)}}V.isString(C)||(C=C?"include":"omit");const D=s&&"credentials"in r.prototype,B={...k,signal:P,method:v.toUpperCase(),headers:E.normalize().toJSON(),body:y,duplex:"half",credentials:D?C:void 0};O=s&&new r(g,B);let F=await(s?j(O,k):j(g,B));const K=d&&(N==="stream"||N==="response");if(d&&(S||K&&A)){const G={};["status","statusText","headers"].forEach(Be=>{G[Be]=F[Be]});const L=V.toFiniteNumber(F.headers.get("content-length")),[Z,ce]=S&&jF(L,Vy(PF(S),!0))||[];F=new n(RF(F.body,MF,Z,()=>{ce&&ce(),A&&A()}),G)}N=N||"text";let X=await h[V.findKey(h,N)||"text"](F,m);return!K&&A&&A(),await new Promise((G,L)=>{Ste(G,L,{data:X,headers:ei.from(F.headers),status:F.status,statusText:F.statusText,config:m,request:O})})}catch(D){throw A&&A(),D&&D.name==="TypeError"&&/Load failed|fetch/i.test(D.message)?Object.assign(new Ue("Network Error",Ue.ERR_NETWORK,m,O),{cause:D.cause||D}):Ue.from(D,D&&D.code,m,O)}}},upe=new Map,Nte=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,c,d=upe;for(;a--;)l=s[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:cpe(e)),d=c;return c};Nte();const yM={http:kfe,xhr:npe,fetch:{get:Nte}};V.forEach(yM,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const FF=t=>`- ${t}`,dpe=t=>V.isFunction(t)||t===null||t===!1;function hpe(t,e){t=V.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!dpe(n)&&(i=yM[(a=String(n)).toLowerCase()],i===void 0))throw new Ue(`Unknown adapter '${a}'`);if(i&&(V.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(FF).join(`
`):" "+FF(o[0]):"as no adapter specified";throw new Ue("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const Cte={getAdapter:hpe,adapters:yM};function y1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new lh(null,t)}function qF(t){return y1(t),t.headers=ei.from(t.headers),t.data=g1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Cte.getAdapter(t.adapter||Zp.adapter,t)(t).then(function(n){return y1(t),n.data=g1.call(t,t.transformResponse,n),n.headers=ei.from(n.headers),n},function(n){return wte(n)||(y1(t),n&&n.response&&(n.response.data=g1.call(t,t.transformResponse,n.response),n.response.headers=ei.from(n.response.headers))),Promise.reject(n)})}const kte="1.13.2",k0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{k0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const LF={};k0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+kte+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Ue(i(o," has been removed"+(r?" in "+r:"")),Ue.ERR_DEPRECATED);return r&&!LF[o]&&(LF[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};k0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function fpe(t,e,r){if(typeof t!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Ue("option "+s+" must be "+l,Ue.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ue("Unknown option "+s,Ue.ERR_BAD_OPTION)}}const iy={assertOptions:fpe,validators:k0},Ss=iy.validators;let ic=class{constructor(e){this.defaults=e||{},this.interceptors={request:new TF,response:new TF}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=_c(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&iy.assertOptions(n,{silentJSONParsing:Ss.transitional(Ss.boolean),forcedJSONParsing:Ss.transitional(Ss.boolean),clarifyTimeoutError:Ss.transitional(Ss.boolean)},!1),i!=null&&(V.isFunction(i)?r.paramsSerializer={serialize:i}:iy.assertOptions(i,{encode:Ss.function,serialize:Ss.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),iy.assertOptions(r,{baseUrl:Ss.spelling("baseURL"),withXsrfToken:Ss.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&V.merge(s.common,s[r.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=ei.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[qF.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(v){g.call(this,v);break}}try{d=qF.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=_c(this.defaults,e);const r=_te(e.baseURL,e.url,e.allowAbsoluteUrls);return vte(r,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){ic.prototype[e]=function(r,n){return this.request(_c(n||{},{method:e,url:r,data:(n||{}).data}))}});V.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(_c(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ic.prototype[e]=r(),ic.prototype[e+"Form"]=r(!0)});let ppe=class Tte{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new lh(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Tte(function(i){e=i}),cancel:e}}};function mpe(t){return function(r){return t.apply(null,r)}}function gpe(t){return V.isObject(t)&&t.isAxiosError===!0}const rI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(rI).forEach(([t,e])=>{rI[e]=t});function Ote(t){const e=new ic(t),r=ote(ic.prototype.request,e);return V.extend(r,ic.prototype,e,{allOwnKeys:!0}),V.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Ote(_c(t,i))},r}const hr=Ote(Zp);hr.Axios=ic;hr.CanceledError=lh;hr.CancelToken=ppe;hr.isCancel=wte;hr.VERSION=kte;hr.toFormData=C0;hr.AxiosError=Ue;hr.Cancel=hr.CanceledError;hr.all=function(e){return Promise.all(e)};hr.spread=mpe;hr.isAxiosError=gpe;hr.mergeConfig=_c;hr.AxiosHeaders=ei;hr.formToJSON=t=>xte(V.isHTMLForm(t)?new FormData(t):t);hr.getAdapter=Cte.getAdapter;hr.HttpStatusCode=rI;hr.default=hr;const{Axios:q4e,AxiosError:L4e,CanceledError:B4e,isCancel:z4e,CancelToken:V4e,VERSION:U4e,all:H4e,Cancel:W4e,isAxiosError:K4e,spread:G4e,toFormData:Y4e,AxiosHeaders:Q4e,HttpStatusCode:X4e,formToJSON:J4e,getAdapter:Z4e,mergeConfig:eqe}=hr,nI=window.prmConfig||{},he=hr.create({baseURL:nI.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":nI.nonce||""}});he.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});he.interceptors.response.use(t=>t,t=>{var e,r;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=nI.loginUrl||"/wp-login.php"),((r=t.response)==null?void 0:r.status)===403&&console.error("Access denied:",t.response.data),Promise.reject(t)});const Le={getPeople:t=>he.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>he.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>he.post("/wp/v2/people",t),updatePerson:(t,e)=>he.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>he.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>he.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>he.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>he.post("/wp/v2/companies",t),updateCompany:(t,e)=>he.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>he.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>he.get("/wp/v2/important-dates",{params:t}),getDate:t=>he.get(`/wp/v2/important-dates/${t}`),createDate:t=>he.post("/wp/v2/important-dates",t),updateDate:(t,e)=>he.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>he.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>he.get("/wp/v2/person_label"),getCompanyLabels:()=>he.get("/wp/v2/company_label"),getRelationshipTypes:()=>he.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>he.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>he.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>he.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>he.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>he.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),he.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},Ae={getDashboard:()=>he.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>he.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>he.get("/prm/v1/user/me"),getUsers:()=>he.get("/prm/v1/users"),approveUser:t=>he.post(`/prm/v1/users/${t}/approve`),denyUser:t=>he.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>he.delete(`/prm/v1/users/${t}`),search:t=>he.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>he.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>he.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>he.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>he.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>he.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>he.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>he.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>he.get("/prm/v1/user/slack-status"),disconnectSlack:()=>he.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>he.get("/prm/v1/slack/channels"),getSlackTargets:()=>he.get("/prm/v1/slack/targets"),updateSlackTargets:t=>he.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>he.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>he.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>he.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>he.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>he.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>he.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>he.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>he.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>he.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>he.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>he.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>he.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>he.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>he.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>he.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>he.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>he.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>he.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),he.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),he.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>he.get("/prm/v1/carddav/urls"),getAppPasswords:t=>he.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>he.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>he.delete(`/wp/v2/users/${t}/application-passwords/${e}`)};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ype={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vpe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>T.createElement("svg",{ref:d,...ype,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${vpe(t)}`,a].join(" "),...c},[...e.map(([h,f])=>T.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bpe=fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xpe=fe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wpe=fe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Spe=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _pe=fe("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=fe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=fe("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=fe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=fe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=fe("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=fe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Epe=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=fe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Npe=fe("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=fe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=fe("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=fe("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=fe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpe=fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=fe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=fe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kpe=fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tpe=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ope=fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=fe("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=fe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ppe=fe("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ipe=fe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rpe=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mpe=fe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ape=fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=fe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=fe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=fe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $pe=fe("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fpe=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=fe("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lpe=fe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bpe=fe("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=fe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fte=fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=fe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=fe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=fe("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=fe("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vpe=fe("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upe=fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=fe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=fe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hpe=fe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wpe=fe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),kc="Caelis";function Hc(t){T.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||kc;document.title=`${t} - ${r}`}},[t])}function Kpe(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function Bte(t=null){const e=Fo();T.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=Kpe(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=kc}const n=((i=window.prmConfig)==null?void 0:i.siteName)||kc;document.title=`${r} - ${n}`},[e.pathname,t])}function Gpe(){return ht({queryKey:["dashboard"],queryFn:async()=>(await Ae.getDashboard()).data})}function Ype(t=30){return ht({queryKey:["reminders",t],queryFn:async()=>(await Ae.getReminders(t)).data})}function zte(t=!1){return ht({queryKey:["todos",t],queryFn:async()=>(await Ae.getAllTodos(t)).data})}function Vte(){const t=bt();return nt({mutationFn:({todoId:e,data:r})=>Ae.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Qpe(){const t=bt();return nt({mutationFn:e=>Ae.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Xpe(t){const e=typeof t=="string"?t:"",r=e.length>=2;return ht({queryKey:["search",e],queryFn:async()=>r?(await Ae.search(e)).data:{people:[],companies:[]},enabled:r})}function Gn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function rr(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Gn(e)}function nd(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Gn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Gn(e)}function Qs(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const Dt={all:["people"],lists:()=>[...Dt.all,"list"],list:t=>[...Dt.lists(),t],details:()=>[...Dt.all,"detail"],detail:t=>[...Dt.details(),t],timeline:t=>[...Dt.detail(t),"timeline"],dates:t=>[...Dt.detail(t),"dates"]};function Ute(t){var i,s,o,a,l,c,d,h,f,p,m,g,v,y,b,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(c=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:c.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((v=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:v.map(S=>S.name))||[],n=Gn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((b=t.acf)==null?void 0:b.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function Wc(t={}){return ht({queryKey:Dt.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await Le.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(Ute);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function Hte(t){return ht({queryKey:Dt.detail(t),queryFn:async()=>{const e=await Le.getPerson(t,{_embed:!0});return Ute(e.data)},enabled:!!t})}function Jpe(t){return ht({queryKey:Dt.timeline(t),queryFn:async()=>(await Ae.getPersonTimeline(t)).data,enabled:!!t})}function Zpe(t){return ht({queryKey:Dt.dates(t),queryFn:async()=>(await Ae.getPersonDates(t)).data,enabled:!!t})}function eme(){const t=bt();return nt({mutationFn:({id:e,data:r})=>Le.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:Dt.detail(r)}),t.invalidateQueries({queryKey:Dt.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:Dt.detail(a)})})}})}function tme(){const t=bt();return nt({mutationFn:e=>Le.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:Dt.lists()}),t.invalidateQueries({queryKey:Dt.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function rme(){const t=bt();return nt({mutationFn:({personId:e,content:r})=>Ae.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Dt.timeline(r)})}})}function nme(){const t=bt();return nt({mutationFn:({noteId:e,personId:r})=>Ae.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Dt.timeline(r)})}})}function SM(){const t=bt();return nt({mutationFn:({personId:e,data:r})=>Ae.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Dt.timeline(r)})}})}function ime(){const t=bt();return nt({mutationFn:({activityId:e,data:r,personId:n})=>Ae.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Dt.timeline(r)})}})}function sme(){const t=bt();return nt({mutationFn:({activityId:e,personId:r})=>Ae.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Dt.timeline(r)})}})}function Wte(){const t=bt();return nt({mutationFn:({personId:e,data:r})=>Ae.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Dt.timeline(r)})}})}function ome(){const t=bt();return nt({mutationFn:({todoId:e,data:r,personId:n})=>Ae.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Dt.timeline(r)})}})}function ame(){const t=bt();return nt({mutationFn:({todoId:e,personId:r})=>Ae.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Dt.timeline(r)})}})}function lme(){const t=bt();return nt({mutationFn:({dateId:e,personId:r})=>Le.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:Dt.dates(r)}),t.invalidateQueries({queryKey:Dt.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function Kte({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(""),[o,a]=T.useState(""),[l,c]=T.useState(!1),[d,h]=T.useState(""),{data:f=[],isLoading:p}=Wc(),m=Wte(),g=bt(),v=T.useMemo(()=>{const _=d.toLowerCase().trim();let N=f;return _&&(N=f.filter(E=>{var C,k,j;return((C=E.name)==null?void 0:C.toLowerCase().includes(_))||((k=E.first_name)==null?void 0:k.toLowerCase().includes(_))||((j=E.last_name)==null?void 0:j.toLowerCase().includes(_))})),[...N].sort((E,C)=>(E.name||"").localeCompare(C.name||""))},[f,d]),y=T.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),b=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{t&&(n(""),s(b()),a(""),h(""),c(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch(N){console.error("Failed to create todo:",N)}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),u.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:w,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>c(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?u.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(Za,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:y.name})]}):u.jsx("span",{className:"text-gray-400",children:"Select a person..."}),u.jsx(Uy,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Nc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:p?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):v.length>0?v.map(_=>u.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),c(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?u.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(Za,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}var rm=t=>t.type==="checkbox",Fl=t=>t instanceof Date,zn=t=>t==null;const Gte=t=>typeof t=="object";var yr=t=>!zn(t)&&!Array.isArray(t)&&Gte(t)&&!Fl(t),Yte=t=>yr(t)&&t.target?rm(t.target)?t.target.checked:t.target.value:t,cme=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Qte=(t,e)=>t.has(cme(e)),ume=t=>{const e=t.constructor&&t.constructor.prototype;return yr(e)&&e.hasOwnProperty("isPrototypeOf")},_M=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mt(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(_M&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(yr(t)&&ume(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Mt(t[i]));return n}var j0=t=>/^\w*$/.test(t),jt=t=>t===void 0,P0=t=>Array.isArray(t)?t.filter(Boolean):[],EM=t=>P0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),de=(t,e,r)=>{if(!e||!yr(t))return r;const n=(j0(e)?[e]:EM(e)).reduce((i,s)=>zn(i)?i:i[s],t);return jt(n)||n===t?jt(t[e])?r:t[e]:n},ui=t=>typeof t=="boolean",On=t=>typeof t=="function",_t=(t,e,r)=>{let n=-1;const i=j0(e)?[e]:EM(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const c=t[a];l=yr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Wy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ai={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Xs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Xte=xe.createContext(null);Xte.displayName="HookFormContext";const I0=()=>xe.useContext(Xte);var Jte=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Ai.all&&(e._proxyFormState[o]=!n||Ai.all),r&&(r[o]=!0),t[o]}});return i};const R0=typeof window<"u"?xe.useLayoutEffect:xe.useEffect;function dme(t){const e=I0(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=xe.useState(r._formState),l=xe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return R0(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:c=>{!n&&a({...r._formState,...c})}}),[i,n,s]),xe.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),xe.useMemo(()=>Jte(o,r,l.current,!1),[o,r])}var hi=t=>typeof t=="string",cI=(t,e,r,n,i)=>hi(t)?(n&&e.watch.add(t),de(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),de(r,s))):(n&&(e.watchAll=!0),r),uI=t=>zn(t)||!Gte(t);function cs(t,e,r=new WeakSet){if(uI(t)||uI(e))return Object.is(t,e);if(Fl(t)&&Fl(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Fl(o)&&Fl(a)||yr(o)&&yr(a)||Array.isArray(o)&&Array.isArray(a)?!cs(o,a,r):!Object.is(o,a))return!1}}return!0}function hme(t){const e=I0(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=xe.useRef(i),c=xe.useRef(a),d=xe.useRef(void 0),h=xe.useRef(r),f=xe.useRef(n);c.current=a;const[p,m]=xe.useState(()=>{const x=r._getWatch(n,l.current);return c.current?c.current(x):x}),g=xe.useCallback(x=>{const S=cI(n,r._names,x||r._formValues,!1,l.current);return c.current?c.current(S):S},[r._formValues,r._names,n]),v=xe.useCallback(x=>{if(!s){const S=cI(n,r._names,x||r._formValues,!1,l.current);if(c.current){const _=c.current(S);cs(_,d.current)||(m(_),d.current=_)}else m(S)}},[r._formValues,r._names,s,n]);R0(()=>((h.current!==r||!cs(f.current,n))&&(h.current=r,f.current=n,v()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{v(x.values)}})),[r,o,n,v]),xe.useEffect(()=>r._removeUnmounted());const y=h.current!==r,b=f.current,w=xe.useMemo(()=>{if(s)return null;const x=!y&&!cs(b,n);return y||x?g():null},[s,y,n,b,g]);return w!==null?w:p}function fme(t){const e=I0(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=Qte(i._names.array,r),c=xe.useMemo(()=>de(i._formValues,r,de(i._defaultValues,r,o)),[i,r,o]),d=hme({control:i,name:r,defaultValue:c,exact:a}),h=dme({control:i,name:r,exact:a}),f=xe.useRef(t),p=xe.useRef(void 0),m=xe.useRef(i.register(r,{...t.rules,value:d,...ui(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=xe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!de(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!de(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!de(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!de(h.validatingFields,r)},error:{enumerable:!0,get:()=>de(h.errors,r)}}),[h,r]),v=xe.useCallback(x=>m.current.onChange({target:{value:Yte(x),name:r},type:Wy.CHANGE}),[r]),y=xe.useCallback(()=>m.current.onBlur({target:{value:de(i._formValues,r),name:r},type:Wy.BLUR}),[r,i._formValues]),b=xe.useCallback(x=>{const S=de(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>On(x.focus)&&x.focus(),select:()=>On(x.select)&&x.select(),setCustomValidity:_=>On(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>On(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=xe.useMemo(()=>({name:r,value:d,...ui(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:v,onBlur:y,ref:b}),[r,n,h.disabled,v,y,b,d]);return xe.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...ui(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(N,E)=>{const C=de(i._fields,N);C&&C._f&&(C._f.mount=E)};if(_(r,!0),x){const N=Mt(de(i._options.defaultValues,r,f.current.defaultValue));_t(i._defaultValues,r,N),jt(de(i._formValues,r))&&_t(i._formValues,r,N)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),xe.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),xe.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const Ky=t=>t.render(fme(t));var pme=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},Yn=t=>Array.isArray(t)?t:[t],HF=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function Zte(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&yr(i)&&s){const o=Zte(i,s);yr(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var fn=t=>yr(t)&&!Object.keys(t).length,NM=t=>t.type==="file",Gy=t=>{if(!_M)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},ere=t=>t.type==="select-multiple",CM=t=>t.type==="radio",mme=t=>CM(t)||rm(t),b1=t=>Gy(t)&&t.isConnected;function gme(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=jt(t)?n++:t[e[n++]];return t}function yme(t){for(const e in t)if(t.hasOwnProperty(e)&&!jt(t[e]))return!1;return!0}function cr(t,e){const r=Array.isArray(e)?e:j0(e)?[e]:EM(e),n=r.length===1?t:gme(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(yr(n)&&fn(n)||Array.isArray(n)&&yme(n))&&cr(t,r.slice(0,-1)),t}var vme=t=>{for(const e in t)if(On(t[e]))return!0;return!1};function tre(t){return Array.isArray(t)||yr(t)&&!vme(t)}function dI(t,e={}){for(const r in t){const n=t[r];tre(n)?(e[r]=Array.isArray(n)?[]:{},dI(n,e[r])):jt(n)||(e[r]=!0)}return e}function Cu(t,e,r){r||(r=dI(e));for(const n in t){const i=t[n];if(tre(i))jt(e)||uI(r[n])?r[n]=dI(i,Array.isArray(i)?[]:{}):Cu(i,zn(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!cs(i,s)}}return r}const WF={value:!1,isValid:!1},KF={value:!0,isValid:!0};var rre=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!jt(t[0].attributes.value)?jt(t[0].value)||t[0].value===""?KF:{value:t[0].value,isValid:!0}:KF:WF}return WF},nre=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>jt(t)?t:e?t===""?NaN:t&&+t:r&&hi(t)?new Date(t):n?n(t):t;const GF={isValid:!1,value:null};var ire=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,GF):GF;function YF(t){const e=t.ref;return NM(e)?e.files:CM(e)?ire(t.refs).value:ere(e)?[...e.selectedOptions].map(({value:r})=>r):rm(e)?rre(t.refs).value:nre(jt(e.value)?t.ref.value:e.value,t)}var bme=(t,e,r,n)=>{const i={};for(const s of t){const o=de(e,s);o&&_t(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Yy=t=>t instanceof RegExp,Qh=t=>jt(t)?t:Yy(t)?t.source:yr(t)?Yy(t.value)?t.value.source:t.value:t,Vu=t=>({isOnSubmit:!t||t===Ai.onSubmit,isOnBlur:t===Ai.onBlur,isOnChange:t===Ai.onChange,isOnAll:t===Ai.all,isOnTouch:t===Ai.onTouched});const QF="AsyncFunction";var xme=t=>!!t&&!!t.validate&&!!(On(t.validate)&&t.validate.constructor.name===QF||yr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===QF)),wme=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),hI=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const id=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=de(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(id(a,e))break}else if(yr(a)&&id(a,e))break}}};function XF(t,e,r){const n=de(t,r);if(n||j0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=de(e,s),a=de(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var Sme=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return fn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||Ai.all))},_me=(t,e,r)=>!t||!e||t===e||Yn(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),Eme=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,Nme=(t,e)=>!P0(de(t,e)).length&&cr(t,e),sre=(t,e,r)=>{const n=Yn(de(t,r));return _t(n,"root",e[r]),_t(t,r,n),t};function JF(t,e,r="validate"){if(hi(t)||Array.isArray(t)&&t.every(hi)||ui(t)&&!t)return{type:r,message:hi(t)?t:"",ref:e}}var bu=t=>yr(t)&&!Yy(t)?t:{value:t,message:""},fI=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:v,mount:y}=t._f,b=de(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=P=>{i&&w.reportValidity&&(w.setCustomValidity(ui(P)?"":P||""),w.reportValidity())},S={},_=CM(o),N=rm(o),E=_||N,C=(v||NM(o))&&jt(o.value)&&jt(b)||Gy(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,k=pme.bind(null,g,n,S),j=(P,O,A,q=Xs.maxLength,D=Xs.minLength)=>{const B=P?O:A;S[g]={type:P?q:D,message:B,ref:o,...k(P?q:D,B)}};if(s?!Array.isArray(b)||!b.length:l&&(!E&&(C||zn(b))||ui(b)&&!b||N&&!rre(a).isValid||_&&!ire(a).isValid)){const{value:P,message:O}=hi(l)?{value:!!l,message:l}:bu(l);if(P&&(S[g]={type:Xs.required,message:O,ref:w,...k(Xs.required,O)},!n))return x(O),S}if(!C&&(!zn(h)||!zn(f))){let P,O;const A=bu(f),q=bu(h);if(!zn(b)&&!isNaN(b)){const D=o.valueAsNumber||b&&+b;zn(A.value)||(P=D>A.value),zn(q.value)||(O=D<q.value)}else{const D=o.valueAsDate||new Date(b),B=X=>new Date(new Date().toDateString()+" "+X),F=o.type=="time",K=o.type=="week";hi(A.value)&&b&&(P=F?B(b)>B(A.value):K?b>A.value:D>new Date(A.value)),hi(q.value)&&b&&(O=F?B(b)<B(q.value):K?b<q.value:D<new Date(q.value))}if((P||O)&&(j(!!P,A.message,q.message,Xs.max,Xs.min),!n))return x(S[g].message),S}if((c||d)&&!C&&(hi(b)||s&&Array.isArray(b))){const P=bu(c),O=bu(d),A=!zn(P.value)&&b.length>+P.value,q=!zn(O.value)&&b.length<+O.value;if((A||q)&&(j(A,P.message,O.message),!n))return x(S[g].message),S}if(p&&!C&&hi(b)){const{value:P,message:O}=bu(p);if(Yy(P)&&!b.match(P)&&(S[g]={type:Xs.pattern,message:O,ref:o,...k(Xs.pattern,O)},!n))return x(O),S}if(m){if(On(m)){const P=await m(b,r),O=JF(P,w);if(O&&(S[g]={...O,...k(Xs.validate,O.message)},!n))return x(O.message),S}else if(yr(m)){let P={};for(const O in m){if(!fn(P)&&!n)break;const A=JF(await m[O](b,r),w,O);A&&(P={...A,...k(O,A.message)},x(A.message),n&&(S[g]=P))}if(!fn(P)&&(S[g]={ref:w,...P},!n))return S}}return x(!0),S};const Cme={mode:Ai.onSubmit,reValidateMode:Ai.onChange,shouldFocusError:!0};function kme(t={}){let e={...Cme,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:On(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=yr(e.defaultValues)||yr(e.values)?Mt(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Mt(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:HF(),state:HF()},m=e.criteriaMode===Ai.all,g=M=>$=>{clearTimeout(c),c=setTimeout(M,$)},v=async M=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||M)){let $;e.resolver?($=fn((await E()).errors),y()):$=await k(n,!0),$!==r.isValid&&p.state.next({isValid:$})}},y=(M,$)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((M||Array.from(a.mount)).forEach(z=>{z&&($?_t(r.validatingFields,z,$):cr(r.validatingFields,z))}),p.state.next({validatingFields:r.validatingFields,isValidating:!fn(r.validatingFields)}))},b=(M,$=[],z,se,J=!0,Y=!0)=>{if(se&&z&&!e.disabled){if(o.action=!0,Y&&Array.isArray(de(n,M))){const ge=z(de(n,M),se.argA,se.argB);J&&_t(n,M,ge)}if(Y&&Array.isArray(de(r.errors,M))){const ge=z(de(r.errors,M),se.argA,se.argB);J&&_t(r.errors,M,ge),Nme(r.errors,M)}if((h.touchedFields||f.touchedFields)&&Y&&Array.isArray(de(r.touchedFields,M))){const ge=z(de(r.touchedFields,M),se.argA,se.argB);J&&_t(r.touchedFields,M,ge)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Cu(i,s)),p.state.next({name:M,isDirty:P(M,$),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else _t(s,M,$)},w=(M,$)=>{_t(r.errors,M,$),p.state.next({errors:r.errors})},x=M=>{r.errors=M,p.state.next({errors:r.errors,isValid:!1})},S=(M,$,z,se)=>{const J=de(n,M);if(J){const Y=de(s,M,jt(z)?de(i,M):z);jt(Y)||se&&se.defaultChecked||$?_t(s,M,$?Y:YF(J._f)):q(M,Y),o.mount&&!o.action&&v()}},_=(M,$,z,se,J)=>{let Y=!1,ge=!1;const ze={name:M};if(!e.disabled){if(!z||se){(h.isDirty||f.isDirty)&&(ge=r.isDirty,r.isDirty=ze.isDirty=P(),Y=ge!==ze.isDirty);const Xe=cs(de(i,M),$);ge=!!de(r.dirtyFields,M),Xe?cr(r.dirtyFields,M):_t(r.dirtyFields,M,!0),ze.dirtyFields=r.dirtyFields,Y=Y||(h.dirtyFields||f.dirtyFields)&&ge!==!Xe}if(z){const Xe=de(r.touchedFields,M);Xe||(_t(r.touchedFields,M,z),ze.touchedFields=r.touchedFields,Y=Y||(h.touchedFields||f.touchedFields)&&Xe!==z)}Y&&J&&p.state.next(ze)}return Y?ze:{}},N=(M,$,z,se)=>{const J=de(r.errors,M),Y=(h.isValid||f.isValid)&&ui($)&&r.isValid!==$;if(e.delayError&&z?(l=g(()=>w(M,z)),l(e.delayError)):(clearTimeout(c),l=null,z?_t(r.errors,M,z):cr(r.errors,M)),(z?!cs(J,z):J)||!fn(se)||Y){const ge={...se,...Y&&ui($)?{isValid:$}:{},errors:r.errors,name:M};r={...r,...ge},p.state.next(ge)}},E=async M=>(y(M,!0),await e.resolver(s,e.context,bme(M||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),C=async M=>{const{errors:$}=await E(M);if(y(M),M)for(const z of M){const se=de($,z);se?_t(r.errors,z,se):cr(r.errors,z)}else r.errors=$;return $},k=async(M,$,z={valid:!0})=>{for(const se in M){const J=M[se];if(J){const{_f:Y,...ge}=J;if(Y){const ze=a.array.has(Y.name),Xe=J._f&&xme(J._f);Xe&&h.validatingFields&&y([Y.name],!0);const kt=await fI(J,a.disabled,s,m,e.shouldUseNativeValidation&&!$,ze);if(Xe&&h.validatingFields&&y([Y.name]),kt[Y.name]&&(z.valid=!1,$))break;!$&&(de(kt,Y.name)?ze?sre(r.errors,kt,Y.name):_t(r.errors,Y.name,kt[Y.name]):cr(r.errors,Y.name))}!fn(ge)&&await k(ge,$,z)}}return z.valid},j=()=>{for(const M of a.unMount){const $=de(n,M);$&&($._f.refs?$._f.refs.every(z=>!b1(z)):!b1($._f.ref))&&pt(M)}a.unMount=new Set},P=(M,$)=>!e.disabled&&(M&&$&&_t(s,M,$),!cs(G(),i)),O=(M,$,z)=>cI(M,a,{...o.mount?s:jt($)?i:hi(M)?{[M]:$}:$},z,$),A=M=>P0(de(o.mount?s:i,M,e.shouldUnregister?de(i,M,[]):[])),q=(M,$,z={})=>{const se=de(n,M);let J=$;if(se){const Y=se._f;Y&&(!Y.disabled&&_t(s,M,nre($,Y)),J=Gy(Y.ref)&&zn($)?"":$,ere(Y.ref)?[...Y.ref.options].forEach(ge=>ge.selected=J.includes(ge.value)):Y.refs?rm(Y.ref)?Y.refs.forEach(ge=>{(!ge.defaultChecked||!ge.disabled)&&(Array.isArray(J)?ge.checked=!!J.find(ze=>ze===ge.value):ge.checked=J===ge.value||!!J)}):Y.refs.forEach(ge=>ge.checked=ge.value===J):NM(Y.ref)?Y.ref.value="":(Y.ref.value=J,Y.ref.type||p.state.next({name:M,values:Mt(s)})))}(z.shouldDirty||z.shouldTouch)&&_(M,J,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&X(M)},D=(M,$,z)=>{for(const se in $){if(!$.hasOwnProperty(se))return;const J=$[se],Y=M+"."+se,ge=de(n,Y);(a.array.has(M)||yr(J)||ge&&!ge._f)&&!Fl(J)?D(Y,J,z):q(Y,J,z)}},B=(M,$,z={})=>{const se=de(n,M),J=a.array.has(M),Y=Mt($);_t(s,M,Y),J?(p.array.next({name:M,values:Mt(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&z.shouldDirty&&p.state.next({name:M,dirtyFields:Cu(i,s),isDirty:P(M,Y)})):se&&!se._f&&!zn(Y)?D(M,Y,z):q(M,Y,z),hI(M,a)&&p.state.next({...r,name:M}),p.state.next({name:o.mount?M:void 0,values:Mt(s)})},F=async M=>{o.mount=!0;const $=M.target;let z=$.name,se=!0;const J=de(n,z),Y=Xe=>{se=Number.isNaN(Xe)||Fl(Xe)&&isNaN(Xe.getTime())||cs(Xe,de(s,z,Xe))},ge=Vu(e.mode),ze=Vu(e.reValidateMode);if(J){let Xe,kt;const Se=$.type?YF(J._f):Yte(M),ne=M.type===Wy.BLUR||M.type===Wy.FOCUS_OUT,pe=!wme(J._f)&&!e.resolver&&!de(r.errors,z)&&!J._f.deps||Eme(ne,de(r.touchedFields,z),r.isSubmitted,ze,ge),ue=hI(z,a,ne);_t(s,z,Se),ne?(!$||!$.readOnly)&&(J._f.onBlur&&J._f.onBlur(M),l&&l(0)):J._f.onChange&&J._f.onChange(M);const Ce=_(z,Se,ne),Ye=!fn(Ce)||ue;if(!ne&&p.state.next({name:z,type:M.type,values:Mt(s)}),pe)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?ne&&v():ne||v()),Ye&&p.state.next({name:z,...ue?{}:Ce});if(!ne&&ue&&p.state.next({...r}),e.resolver){const{errors:Ei}=await E([z]);if(y([z]),Y(Se),se){const wn=XF(r.errors,n,z),xl=XF(Ei,n,wn.name||z);Xe=xl.error,z=xl.name,kt=fn(Ei)}}else y([z],!0),Xe=(await fI(J,a.disabled,s,m,e.shouldUseNativeValidation))[z],y([z]),Y(Se),se&&(Xe?kt=!1:(h.isValid||f.isValid)&&(kt=await k(n,!0)));se&&(J._f.deps&&(!Array.isArray(J._f.deps)||J._f.deps.length>0)&&X(J._f.deps),N(z,kt,Xe,Ce))}},K=(M,$)=>{if(de(r.errors,$)&&M.focus)return M.focus(),1},X=async(M,$={})=>{let z,se;const J=Yn(M);if(e.resolver){const Y=await C(jt(M)?M:J);z=fn(Y),se=M?!J.some(ge=>de(Y,ge)):z}else M?(se=(await Promise.all(J.map(async Y=>{const ge=de(n,Y);return await k(ge&&ge._f?{[Y]:ge}:ge)}))).every(Boolean),!(!se&&!r.isValid)&&v()):se=z=await k(n);return p.state.next({...!hi(M)||(h.isValid||f.isValid)&&z!==r.isValid?{}:{name:M},...e.resolver||!M?{isValid:z}:{},errors:r.errors}),$.shouldFocus&&!se&&id(n,K,M?J:a.mount),se},G=(M,$)=>{let z={...o.mount?s:i};return $&&(z=Zte($.dirtyFields?r.dirtyFields:r.touchedFields,z)),jt(M)?z:hi(M)?de(z,M):M.map(se=>de(z,se))},L=(M,$)=>({invalid:!!de(($||r).errors,M),isDirty:!!de(($||r).dirtyFields,M),error:de(($||r).errors,M),isValidating:!!de(r.validatingFields,M),isTouched:!!de(($||r).touchedFields,M)}),Z=M=>{M&&Yn(M).forEach($=>cr(r.errors,$)),p.state.next({errors:M?r.errors:{}})},ce=(M,$,z)=>{const se=(de(n,M,{_f:{}})._f||{}).ref,J=de(r.errors,M)||{},{ref:Y,message:ge,type:ze,...Xe}=J;_t(r.errors,M,{...Xe,...$,ref:se}),p.state.next({name:M,errors:r.errors,isValid:!1}),z&&z.shouldFocus&&se&&se.focus&&se.focus()},Be=(M,$)=>On(M)?p.state.subscribe({next:z=>"values"in z&&M(O(void 0,$),z)}):O(M,$,!0),Te=M=>p.state.subscribe({next:$=>{_me(M.name,$.name,M.exact)&&Sme($,M.formState||h,Ze,M.reRenderRoot)&&M.callback({values:{...s},...r,...$,defaultValues:i})}}).unsubscribe,tt=M=>(o.mount=!0,f={...f,...M.formState},Te({...M,formState:{...d,...M.formState}})),pt=(M,$={})=>{for(const z of M?Yn(M):a.mount)a.mount.delete(z),a.array.delete(z),$.keepValue||(cr(n,z),cr(s,z)),!$.keepError&&cr(r.errors,z),!$.keepDirty&&cr(r.dirtyFields,z),!$.keepTouched&&cr(r.touchedFields,z),!$.keepIsValidating&&cr(r.validatingFields,z),!e.shouldUnregister&&!$.keepDefaultValue&&cr(i,z);p.state.next({values:Mt(s)}),p.state.next({...r,...$.keepDirty?{isDirty:P()}:{}}),!$.keepIsValid&&v()},Qr=({disabled:M,name:$})=>{(ui(M)&&o.mount||M||a.disabled.has($))&&(M?a.disabled.add($):a.disabled.delete($))},kr=(M,$={})=>{let z=de(n,M);const se=ui($.disabled)||ui(e.disabled);return _t(n,M,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:M}},name:M,mount:!0,...$}}),a.mount.add(M),z?Qr({disabled:ui($.disabled)?$.disabled:e.disabled,name:M}):S(M,!0,$.value),{...se?{disabled:$.disabled||e.disabled}:{},...e.progressive?{required:!!$.required,min:Qh($.min),max:Qh($.max),minLength:Qh($.minLength),maxLength:Qh($.maxLength),pattern:Qh($.pattern)}:{},name:M,onChange:F,onBlur:F,ref:J=>{if(J){kr(M,$),z=de(n,M);const Y=jt(J.value)&&J.querySelectorAll&&J.querySelectorAll("input,select,textarea")[0]||J,ge=mme(Y),ze=z._f.refs||[];if(ge?ze.find(Xe=>Xe===Y):Y===z._f.ref)return;_t(n,M,{_f:{...z._f,...ge?{refs:[...ze.filter(b1),Y,...Array.isArray(de(i,M))?[{}]:[]],ref:{type:Y.type,name:M}}:{ref:Y}}}),S(M,!1,void 0,Y)}else z=de(n,M,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||$.shouldUnregister)&&!(Qte(a.array,M)&&o.action)&&a.unMount.add(M)}}},Jt=()=>e.shouldFocusError&&id(n,K,a.mount),ee=M=>{ui(M)&&(p.state.next({disabled:M}),id(n,($,z)=>{const se=de(n,z);se&&($.disabled=se._f.disabled||M,Array.isArray(se._f.refs)&&se._f.refs.forEach(J=>{J.disabled=se._f.disabled||M}))},0,!1))},Ne=(M,$)=>async z=>{let se;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let J=Mt(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Y,values:ge}=await E();y(),r.errors=Y,J=Mt(ge)}else await k(n);if(a.disabled.size)for(const Y of a.disabled)cr(J,Y);if(cr(r.errors,"root"),fn(r.errors)){p.state.next({errors:{}});try{await M(J,z)}catch(Y){se=Y}}else $&&await $({...r.errors},z),Jt(),setTimeout(Jt);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:fn(r.errors)&&!se,submitCount:r.submitCount+1,errors:r.errors}),se)throw se},We=(M,$={})=>{de(n,M)&&(jt($.defaultValue)?B(M,Mt(de(i,M))):(B(M,$.defaultValue),_t(i,M,Mt($.defaultValue))),$.keepTouched||cr(r.touchedFields,M),$.keepDirty||(cr(r.dirtyFields,M),r.isDirty=$.defaultValue?P(M,Mt(de(i,M))):P()),$.keepError||(cr(r.errors,M),h.isValid&&v()),p.state.next({...r}))},lt=(M,$={})=>{const z=M?Mt(M):i,se=Mt(z),J=fn(M),Y=J?i:se;if($.keepDefaultValues||(i=z),!$.keepValues){if($.keepDirtyValues){const ge=new Set([...a.mount,...Object.keys(Cu(i,s))]);for(const ze of Array.from(ge))de(r.dirtyFields,ze)?_t(Y,ze,de(s,ze)):B(ze,de(Y,ze))}else{if(_M&&jt(M))for(const ge of a.mount){const ze=de(n,ge);if(ze&&ze._f){const Xe=Array.isArray(ze._f.refs)?ze._f.refs[0]:ze._f.ref;if(Gy(Xe)){const kt=Xe.closest("form");if(kt){kt.reset();break}}}}if($.keepFieldsRef)for(const ge of a.mount)B(ge,de(Y,ge));else n={}}s=e.shouldUnregister?$.keepDefaultValues?Mt(i):{}:Mt(Y),p.array.next({values:{...Y}}),p.state.next({values:{...Y}})}a={mount:$.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!$.keepIsValid||!!$.keepDirtyValues||!e.shouldUnregister&&!fn(Y),o.watch=!!e.shouldUnregister,o.keepIsValid=!!$.keepIsValid,o.action=!1,$.keepErrors||(r.errors={}),p.state.next({submitCount:$.keepSubmitCount?r.submitCount:0,isDirty:J?!1:$.keepDirty?r.isDirty:!!($.keepDefaultValues&&!cs(M,i)),isSubmitted:$.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:J?{}:$.keepDirtyValues?$.keepDefaultValues&&s?Cu(i,s):r.dirtyFields:$.keepDefaultValues&&M?Cu(i,M):$.keepDirty?r.dirtyFields:{},touchedFields:$.keepTouched?r.touchedFields:{},errors:$.keepErrors?r.errors:{},isSubmitSuccessful:$.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},zt=(M,$)=>lt(On(M)?M(s):M,{...e.resetOptions,...$}),Ie=(M,$={})=>{const z=de(n,M),se=z&&z._f;if(se){const J=se.refs?se.refs[0]:se.ref;J.focus&&setTimeout(()=>{J.focus(),$.shouldSelect&&On(J.select)&&J.select()})}},Ze=M=>{r={...r,...M}},St={control:{register:kr,unregister:pt,getFieldState:L,handleSubmit:Ne,setError:ce,_subscribe:Te,_runSchema:E,_updateIsValidating:y,_focusError:Jt,_getWatch:O,_getDirty:P,_setValid:v,_setFieldArray:b,_setDisabledField:Qr,_setErrors:x,_getFieldArray:A,_reset:lt,_resetDefaultValues:()=>On(e.defaultValues)&&e.defaultValues().then(M=>{zt(M,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:ee,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(M){o=M},get _defaultValues(){return i},get _names(){return a},set _names(M){a=M},get _formState(){return r},get _options(){return e},set _options(M){e={...e,...M}}},subscribe:tt,trigger:X,register:kr,handleSubmit:Ne,watch:Be,setValue:B,getValues:G,reset:zt,resetField:We,clearErrors:Z,unregister:pt,setError:ce,setFocus:Ie,getFieldState:L};return{...St,formControl:St}}var Ko=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},x1=(t,e,r={})=>r.shouldFocus||jt(r.shouldFocus)?r.focusName||`${t}.${jt(r.focusIndex)?e:r.focusIndex}.`:"",w1=(t,e)=>[...t,...Yn(e)],S1=t=>Array.isArray(t)?t.map(()=>{}):void 0;function _1(t,e,r){return[...t.slice(0,e),...Yn(r),...t.slice(e)]}var E1=(t,e,r)=>Array.isArray(t)?(jt(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],N1=(t,e)=>[...Yn(e),...Yn(t)];function Tme(t,e){let r=0;const n=[...t];for(const i of e)n.splice(i-r,1),r++;return P0(n).length?n:[]}var C1=(t,e)=>jt(e)?[]:Tme(t,Yn(e).sort((r,n)=>r-n)),k1=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},ZF=(t,e,r)=>(t[e]=r,t);function Ome(t){const e=I0(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:s,rules:o}=t,[a,l]=xe.useState(r._getFieldArray(n)),c=xe.useRef(r._getFieldArray(n).map(Ko)),d=xe.useRef(!1);r._names.array.add(n),xe.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),R0(()=>r._subjects.array.subscribe({next:({values:x,name:S})=>{if(S===n||!S){const _=de(x,n);Array.isArray(_)&&(l(_),c.current=_.map(Ko))}}}).unsubscribe,[r,n]);const h=xe.useCallback(x=>{d.current=!0,r._setFieldArray(n,x)},[r,n]),f=(x,S)=>{const _=Yn(Mt(x)),N=w1(r._getFieldArray(n),_);r._names.focus=x1(n,N.length-1,S),c.current=w1(c.current,_.map(Ko)),h(N),l(N),r._setFieldArray(n,N,w1,{argA:S1(x)})},p=(x,S)=>{const _=Yn(Mt(x)),N=N1(r._getFieldArray(n),_);r._names.focus=x1(n,0,S),c.current=N1(c.current,_.map(Ko)),h(N),l(N),r._setFieldArray(n,N,N1,{argA:S1(x)})},m=x=>{const S=C1(r._getFieldArray(n),x);c.current=C1(c.current,x),h(S),l(S),!Array.isArray(de(r._fields,n))&&_t(r._fields,n,void 0),r._setFieldArray(n,S,C1,{argA:x})},g=(x,S,_)=>{const N=Yn(Mt(S)),E=_1(r._getFieldArray(n),x,N);r._names.focus=x1(n,x,_),c.current=_1(c.current,x,N.map(Ko)),h(E),l(E),r._setFieldArray(n,E,_1,{argA:x,argB:S1(S)})},v=(x,S)=>{const _=r._getFieldArray(n);k1(_,x,S),k1(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,k1,{argA:x,argB:S},!1)},y=(x,S)=>{const _=r._getFieldArray(n);E1(_,x,S),E1(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,E1,{argA:x,argB:S},!1)},b=(x,S)=>{const _=Mt(S),N=ZF(r._getFieldArray(n),x,_);c.current=[...N].map((E,C)=>!E||C===x?Ko():c.current[C]),h(N),l([...N]),r._setFieldArray(n,N,ZF,{argA:x,argB:_},!0,!1)},w=x=>{const S=Yn(Mt(x));c.current=S.map(Ko),h([...S]),l([...S]),r._setFieldArray(n,[...S],_=>_,{},!0,!1)};return xe.useEffect(()=>{if(r._state.action=!1,hI(n,r._names)&&r._subjects.state.next({...r._formState}),d.current&&(!Vu(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Vu(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(x=>{r._updateIsValidating([n]);const S=de(x.errors,n),_=de(r._formState.errors,n);(_?!S&&_.type||S&&(_.type!==S.type||_.message!==S.message):S&&S.type)&&(S?_t(r._formState.errors,n,S):cr(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const x=de(r._fields,n);x&&x._f&&!(Vu(r._options.reValidateMode).isOnSubmit&&Vu(r._options.mode).isOnSubmit)&&fI(x,r._names.disabled,r._formValues,r._options.criteriaMode===Ai.all,r._options.shouldUseNativeValidation,!0).then(S=>!fn(S)&&r._subjects.state.next({errors:sre(r._formState.errors,S,n)}))}r._subjects.state.next({name:n,values:Mt(r._formValues)}),r._names.focus&&id(r._fields,(x,S)=>{if(r._names.focus&&S.startsWith(r._names.focus)&&x.focus)return x.focus(),1}),r._names.focus="",r._setValid(),d.current=!1},[a,n,r]),xe.useEffect(()=>(!de(r._formValues,n)&&r._setFieldArray(n),()=>{const x=(S,_)=>{const N=de(r._fields,S);N&&N._f&&(N._f.mount=_)};r._options.shouldUnregister||s?r.unregister(n):x(n,!1)}),[n,r,i,s]),{swap:xe.useCallback(v,[h,n,r]),move:xe.useCallback(y,[h,n,r]),prepend:xe.useCallback(p,[h,n,r]),append:xe.useCallback(f,[h,n,r]),remove:xe.useCallback(m,[h,n,r]),insert:xe.useCallback(g,[h,n,r]),update:xe.useCallback(b,[h,n,r]),replace:xe.useCallback(w,[h,n,r]),fields:xe.useMemo(()=>a.map((x,S)=>({...x,[i]:c.current[S]||Ko()})),[a,i])}}function ll(t={}){const e=xe.useRef(void 0),r=xe.useRef(void 0),[n,i]=xe.useState({isDirty:!1,isValidating:!1,isLoading:On(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:On(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!On(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=kme(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,R0(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),xe.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),xe.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),xe.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),xe.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),xe.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),xe.useEffect(()=>{var o;t.values&&!cs(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),xe.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=Jte(n,s),e.current}function kM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,person:i=null}){const s=!!i,[o,a]=T.useState(!1),[l,c]=T.useState(null),[d,h]=T.useState(null),{data:f=[]}=ht({queryKey:["date-types"],queryFn:async()=>(await Le.getDateTypes()).data,enabled:t&&!s}),p=f.find(C=>C.slug==="birthday"||C.name.toLowerCase()==="birthday"),m=nt({mutationFn:async C=>{const k=new FormData;return k.append("file",C),(await he.post("/prm/v1/import/vcard/parse",k,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:g,handleSubmit:v,reset:y,formState:{errors:b}}=ll({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}});T.useEffect(()=>{var C,k,j,P,O,A,q,D,B,F;if(t)if(c(null),h(null),m.reset(),i){const K=(k=(C=i.acf)==null?void 0:C.contact_info)==null?void 0:k.find(G=>G.contact_type==="email"),X=(P=(j=i.acf)==null?void 0:j.contact_info)==null?void 0:P.find(G=>G.contact_type==="phone"||G.contact_type==="mobile");y({first_name:((O=i.acf)==null?void 0:O.first_name)||"",last_name:((A=i.acf)==null?void 0:A.last_name)||"",nickname:((q=i.acf)==null?void 0:q.nickname)||"",gender:((D=i.acf)==null?void 0:D.gender)||"",email:(K==null?void 0:K.contact_value)||"",phone:(X==null?void 0:X.contact_value)||"",phone_type:(X==null?void 0:X.contact_type)||"mobile",birthday:"",how_we_met:((B=i.acf)==null?void 0:B.how_we_met)||"",is_favorite:((F=i.acf)==null?void 0:F.is_favorite)||!1})}else y({first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1})},[t,i,y]);const w=T.useCallback(C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?a(!0):C.type==="dragleave"&&a(!1)},[]),x=T.useCallback(C=>{C.preventDefault(),C.stopPropagation(),a(!1),h(null),C.dataTransfer.files&&C.dataTransfer.files[0]&&S(C.dataTransfer.files[0])},[]),S=C=>{const k=C.name.split(".").pop().toLowerCase();if(k!=="vcf"&&k!=="vcard"){h("Please select a vCard file (.vcf)");return}c(C),m.mutate(C,{onSuccess:j=>{y({first_name:j.first_name||"",last_name:j.last_name||"",nickname:j.nickname||"",gender:"",email:j.email||"",phone:j.phone||"",phone_type:j.phone_type||"mobile",birthday:j.birthday||"",how_we_met:j.note||"",is_favorite:!1}),j.contact_count>1&&h(`Note: File contains ${j.contact_count} contacts. Only the first contact was loaded.`)},onError:j=>{var P,O;h(((O=(P=j.response)==null?void 0:P.data)==null?void 0:O.message)||"Failed to parse vCard file"),c(null)}})},_=C=>{h(null),C.target.files&&C.target.files[0]&&S(C.target.files[0])},N=()=>{c(null),h(null),m.reset()};if(!t)return null;const E=C=>{r({...C,birthdayType:p})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit person":"Add person"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:v(E),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!s&&u.jsxs("div",{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-3 text-center transition-colors ${o?"border-primary-500 bg-primary-50":l&&!d?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:x,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:n}),m.isPending?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):l&&!d?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[u.jsx(tm,{className:"h-4 w-4 text-green-600"}),u.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",l.name]}),u.jsx("button",{type:"button",onClick:C=>{C.preventDefault(),C.stopPropagation(),N()},className:"ml-1 p-0.5 hover:bg-green-100 rounded",children:u.jsx(Ft,{className:"h-3 w-3 text-green-600"})})]}):u.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[u.jsx(Cc,{className:"h-4 w-4 text-gray-400"}),u.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard or ",u.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),d&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-xs text-amber-700 bg-amber-50 rounded-lg p-2",children:[u.jsx(Ro,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:d})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"First name *"}),u.jsx("input",{...g("first_name",{required:"First name is required"}),className:"input",placeholder:"John",disabled:n,autoFocus:!0}),b.first_name&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:b.first_name.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Last name"}),u.jsx("input",{...g("last_name"),className:"input",placeholder:"Doe",disabled:n})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Nickname"}),u.jsx("input",{...g("nickname"),className:"input",placeholder:"Johnny",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Gender"}),u.jsxs("select",{...g("gender"),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select..."}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"non_binary",children:"Non-binary"}),u.jsx("option",{value:"other",children:"Other"}),u.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),!s&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Email"}),u.jsx("input",{...g("email"),type:"email",className:"input",placeholder:"john@example.com",disabled:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gravatar will be auto-fetched if available"})]}),!s&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Phone"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{...g("phone_type"),className:"input w-24",disabled:n,children:[u.jsx("option",{value:"mobile",children:"Mobile"}),u.jsx("option",{value:"phone",children:"Phone"})]}),u.jsx("input",{...g("phone"),type:"tel",className:"input flex-1",placeholder:"+1 234 567 890",disabled:n})]})]}),!s&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Birthday"}),u.jsx("input",{...g("birthday"),type:"date",className:"input",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"How we met"}),u.jsx("textarea",{...g("how_we_met"),className:"input",rows:3,placeholder:"We met at...",disabled:n})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_favorite",...g("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create person"})]})]})]})})}function ore({isOpen:t,onClose:e,onSubmit:r,isLoading:n}){const{register:i,handleSubmit:s,reset:o,formState:{errors:a}}=ll({defaultValues:{title:"",website:"",industry:""}});if(T.useEffect(()=>{t&&o({title:"",website:"",industry:""})},[t,o]),!t)return null;const l=c=>{r(c)};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add organization"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:s(l),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization name *"}),u.jsx("input",{...i("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc.",disabled:n,autoFocus:!0}),a.title&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.title.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Website"}),u.jsx("input",{...i("website"),type:"url",className:"input",placeholder:"https://example.com",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Industry"}),u.jsx("input",{...i("industry"),className:"input",placeholder:"Technology",disabled:n})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Creating...":"Create organization"})]})]})]})})}function jme({value:t=[],onChange:e,people:r=[],isLoading:n,currentPersonId:i}){const[s,o]=T.useState(""),a=T.useMemo(()=>{if(!s)return r.slice(0,10);const h=s.toLowerCase();return r.filter(f=>nd(f).toLowerCase().includes(h)).slice(0,10)},[r,s]),l=T.useMemo(()=>t.map(h=>r.find(f=>f.id===h)).filter(Boolean),[t,r]),c=h=>{t.includes(h)||e([...t,h]),o("")},d=h=>{h!==i&&e(t.filter(f=>f!==h))};return u.jsxs("div",{className:"space-y-2",children:[l.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[nd(h),h.id!==i&&u.jsx("button",{type:"button",onClick:()=>d(h.id),className:"hover:text-primary-600",children:u.jsx(Ft,{className:"w-3 h-3"})})]},h.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:s,onChange:h=>o(h.target.value),placeholder:"Search for people to add...",className:"input",disabled:n}),s&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:a.length>0?a.map(h=>u.jsx("button",{type:"button",onClick:()=>c(h.id),disabled:t.includes(h.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(h.id)?"opacity-50 cursor-not-allowed":""}`,children:nd(h)},h.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function TM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,dateItem:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1}){const l=!!i,{data:c=[]}=ht({queryKey:["date-types"],queryFn:async()=>((await Le.getDateTypes()).data||[]).sort((N,E)=>{const C=N.name||"",k=E.name||"";return C.localeCompare(k)})}),{register:d,handleSubmit:h,reset:f,watch:p,setValue:m,control:g,formState:{errors:v}}=ll({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),y=p("related_people"),b=p("date_type"),w=p("title");if(T.useEffect(()=>{var N;if((!w||["'s Birthday","Wedding of "].some(E=>w.endsWith(E)||w.startsWith(E)))&&(y==null?void 0:y.length)>0&&b){const E=c.find(P=>P.id===parseInt(b)),C=(E==null?void 0:E.name)||"",k=((N=E==null?void 0:E.slug)==null?void 0:N.toLowerCase())||C.toLowerCase(),j=y.map(P=>{var A,q,D;const O=o.find(B=>B.id===P);return O?Gn(((A=O.acf)==null?void 0:A.first_name)||O.first_name||((D=(q=O.title)==null?void 0:q.rendered)==null?void 0:D.split(" ")[0])||""):null}).filter(Boolean);if(j.length>0&&C){let P;k==="wedding"?P=j.length>=2?`Wedding of ${j[0]} & ${j[1]}`:`Wedding of ${j[0]}`:P=`${j[0]}'s ${C}`,m("title",P)}}},[y,b,o,c,m,w]),T.useEffect(()=>{var S,_,N,E,C,k;if(t)if(i){let j=[];const P=(S=i.acf)==null?void 0:S.related_people;P&&(Array.isArray(P)?j=P.map(A=>parseInt(typeof A=="object"&&A!==null?A.ID||A.id||A.post_id:A,10)).filter(A=>!isNaN(A)&&A>0):typeof P=="number"&&(j=[P]));let O="";((_=i.date_type)==null?void 0:_.length)>0&&(O=i.date_type[0].toString()),f({title:Gn(((N=i.title)==null?void 0:N.rendered)||i.title||""),date_value:((E=i.acf)==null?void 0:E.date_value)||i.date_value||"",date_type:O,related_people:j,is_recurring:((C=i.acf)==null?void 0:C.is_recurring)??i.is_recurring??!0,year_unknown:((k=i.acf)==null?void 0:k.year_unknown)??i.year_unknown??!1})}else f({title:"",date_value:"",date_type:"",related_people:s?[parseInt(s)]:[],is_recurring:!0,year_unknown:!1})},[t,i,s,f]),!t)return null;const x=S=>{r({title:S.title,date_type:S.date_type?[parseInt(S.date_type)]:[],date_value:S.date_value,related_people:S.related_people,is_recurring:S.is_recurring,year_unknown:S.year_unknown})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:l?"Edit date":"Add date"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:h(x),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related people"}),u.jsx(Ky,{name:"related_people",control:g,render:({field:S})=>u.jsx(jme,{value:S.value,onChange:S.onChange,people:o,isLoading:a,currentPersonId:parseInt(s)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date type *"}),u.jsx(Ky,{name:"date_type",control:g,rules:{required:"Please select a date type"},render:({field:S})=>u.jsxs("select",{value:S.value?String(S.value):"",onChange:_=>S.onChange(_.target.value),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select a type..."}),c.map(_=>u.jsx("option",{value:String(_.id),children:_.name},_.id))]})}),v.date_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...d("title"),className:"input",placeholder:"e.g., Mom's Birthday",disabled:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date *"}),u.jsx("input",{...d("date_value",{required:"Date is required"}),type:"date",className:"input",disabled:n}),v.date_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_value.message})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"year_unknown",...d("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_recurring",...d("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":l?"Save changes":"Add date"})]})]})]})})}const Pme=[{name:"Dashboard",href:"/",icon:Tpe},{name:"People",href:"/people",icon:qs},{name:"Organizations",href:"/companies",icon:Pr},{name:"Dates",href:"/dates",icon:yo},{name:"Todos",href:"/todos",icon:Fs},{name:"Settings",href:"/settings",icon:Ate}];function e4({mobile:t=!1,onClose:e}){const{logoutUrl:r}=fM();return u.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[u.jsxs(He,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[u.jsx($te,{className:"w-5 h-5"}),kc]}),t&&u.jsx("button",{onClick:e,className:"p-2 -mr-2",children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:Pme.map(n=>u.jsxs(lhe,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[u.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(Rpe,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function Ime(){var o;const[t,e]=T.useState(!1),r=T.useRef(null),{data:n,isLoading:i}=ht({queryKey:["current-user"],queryFn:async()=>(await Ae.getCurrentUser()).data});if(T.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return u.jsx("div",{className:"flex items-center ml-auto",children:u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return u.jsxs("div",{className:"relative ml-auto",ref:r,children:[u.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?u.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),u.jsx(Uy,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(Za,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&u.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(Ate,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function Rme({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(0),o=Wi(),a=T.useRef(null),l=r.trim(),{data:c,isLoading:d}=Xpe(l),h=c||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;T.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),T.useEffect(()=>{s(0)},[c]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(b=>Math.min(b+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(b=>Math.max(b-1,0));else if(y.key==="Enter"){y.preventDefault();const b=f[i];b&&v(b.type,b.id)}}},v=(y,b)=>{e(),y==="person"?o(`/people/${b}`):y==="company"&&o(`/companies/${b}`)};return t?u.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),u.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:u.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[u.jsx(Nc,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),u.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),u.jsx("span",{children:"to close"})]})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?u.jsxs("div",{className:"px-4 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),u.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?u.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,b)=>{const x=i===b;return u.jsxs("button",{onClick:()=>v("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(Za,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&u.jsxs("div",{className:"px-2 mt-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,b)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+b,x=i===w;return u.jsxs("button",{onClick:()=>v("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Pr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):u.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:u.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):u.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[u.jsx(Nc,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),u.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to navigate"})]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to select"})]})]})})]})})]}):null}function Mme({onAddTodo:t,onAddPerson:e,onAddCompany:r,onAddDate:n}){const[i,s]=T.useState(!1),o=T.useRef(null);T.useEffect(()=>{const h=f=>{o.current&&!o.current.contains(f.target)&&s(!1)};if(i)return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[i]);const a=()=>{s(!1),t()},l=()=>{s(!1),e()},c=()=>{s(!1),r()},d=()=>{s(!1),n()};return u.jsxs("div",{className:"relative",ref:o,children:[u.jsx("button",{onClick:()=>s(!i),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:u.jsx(sr,{className:"w-5 h-5"})}),i&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:l,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Za,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),u.jsxs("button",{onClick:c,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Pr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),u.jsxs("button",{onClick:a,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Fs,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),u.jsxs("button",{onClick:d,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(yo,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function Ame({onMenuClick:t,onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i,onOpenSearch:s}){const o=Fo(),a=()=>{const l=o.pathname;return l==="/"?"Dashboard":l.startsWith("/people")?"People":l.startsWith("/companies")?"Organizations":l.startsWith("/dates")?"Important Dates":l.startsWith("/todos")?"Todos":l.startsWith("/settings")?"Settings":""};return u.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:u.jsx(Ape,{className:"w-5 h-5"})}),u.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:a()}),u.jsx("div",{className:"flex-1"}),u.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[u.jsx(Nc,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),u.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[u.jsx(Npe,{className:"w-3 h-3"}),"K"]})]}),u.jsx("div",{className:"ml-2",children:u.jsx(Mme,{onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i})}),u.jsx("div",{className:"ml-2",children:u.jsx(Ime,{})})]})}function Dme({children:t}){const[e,r]=T.useState(!1),[n,i]=T.useState(!1),[s,o]=T.useState(!1),[a,l]=T.useState(!1),[c,d]=T.useState(!1),[h,f]=T.useState(!1),[p,m]=T.useState(!1),[g,v]=T.useState(!1),[y,b]=T.useState(!1),w=Wi(),x=bt(),{data:S=[],isLoading:_}=Wc();Bte();const N=nt({mutationFn:async O=>{const A=[];O.email&&A.push({contact_type:"email",contact_value:O.email,contact_label:"Email"}),O.phone&&A.push({contact_type:O.phone_type||"mobile",contact_value:O.phone,contact_label:O.phone_type==="mobile"?"Mobile":"Phone"});const q={title:`${O.first_name} ${O.last_name}`.trim(),status:"publish",acf:{first_name:O.first_name,last_name:O.last_name,nickname:O.nickname,gender:O.gender||null,how_we_met:O.how_we_met,is_favorite:O.is_favorite,contact_info:A}},D=await Le.createPerson(q),B=D.data.id;if(O.email)try{await Ae.sideloadGravatar(B,O.email)}catch(F){console.error("Failed to load Gravatar:",F)}if(O.birthday&&O.birthdayType)try{await Le.createDate({title:`${O.first_name}'s Birthday`,status:"publish",date_type:[O.birthdayType.id],acf:{date_value:O.birthday,is_recurring:!0,related_people:[B]}})}catch(F){console.error("Failed to create birthday:",F)}return D.data},onSuccess:O=>{x.invalidateQueries({queryKey:["people"]}),x.invalidateQueries({queryKey:["dashboard"]}),x.invalidateQueries({queryKey:["reminders"]}),l(!1),w(`/people/${O.id}`)}}),E=nt({mutationFn:async O=>{const A={title:O.title,status:"publish",acf:{website:O.website,industry:O.industry}};return(await Le.createCompany(A)).data},onSuccess:O=>{x.invalidateQueries({queryKey:["companies"]}),x.invalidateQueries({queryKey:["dashboard"]}),d(!1),w(`/companies/${O.id}`)}}),C=nt({mutationFn:async O=>{const A={title:O.title,status:"publish",date_type:O.date_type,acf:{date_value:O.date_value,related_people:O.related_people,is_recurring:O.is_recurring,year_unknown:O.year_unknown}};return(await Le.createDate(A)).data},onSuccess:()=>{x.invalidateQueries({queryKey:["reminders"]}),f(!1)}}),k=async O=>{m(!0);try{await N.mutateAsync(O)}finally{m(!1)}},j=async O=>{v(!0);try{await E.mutateAsync(O)}finally{v(!1)}},P=async O=>{b(!0);try{await C.mutateAsync(O)}finally{b(!1)}};return T.useEffect(()=>{const O=A=>{(A.metaKey||A.ctrlKey)&&A.key==="k"&&(A.preventDefault(),o(!0))};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[]),u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[u.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:u.jsx(e4,{})}),e&&u.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:u.jsx(e4,{mobile:!0,onClose:()=>r(!1)})})]}),u.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[u.jsx(Ame,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onAddPerson:()=>l(!0),onAddCompany:()=>d(!0),onAddDate:()=>f(!0),onOpenSearch:()=>o(!0)}),u.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),u.jsx(Rme,{isOpen:s,onClose:()=>o(!1)}),u.jsx(Kte,{isOpen:n,onClose:()=>i(!1)}),u.jsx(kM,{isOpen:a,onClose:()=>l(!1),onSubmit:k,isLoading:p}),u.jsx(ore,{isOpen:c,onClose:()=>d(!1),onSubmit:j,isLoading:g}),u.jsx(TM,{isOpen:h,onClose:()=>f(!1),onSubmit:P,isLoading:y,allPeople:S,isPeopleLoading:_})]})}function ut(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Mo(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function $me(t,e){const r=ut(t);return isNaN(e)?Mo(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const are=6048e5,Fme=864e5,lre=6e4,cre=36e5,bg=43200,t4=1440;let qme={};function nm(){return qme}function Tc(t,e){var a,l,c,d;const r=nm(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=ut(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Qy(t){return Tc(t,{weekStartsOn:1})}function ure(t){const e=ut(t),r=e.getFullYear(),n=Mo(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Qy(n),s=Mo(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Qy(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Xy(t){const e=ut(t);return e.setHours(0,0,0,0),e}function Jy(t){const e=ut(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Lme(t,e){const r=Xy(t),n=Xy(e),i=+r-Jy(r),s=+n-Jy(n);return Math.round((i-s)/Fme)}function Bme(t){const e=ure(t),r=Mo(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Qy(r)}function sd(t,e){const r=ut(t),n=ut(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function M0(t){return Mo(t,Date.now())}function dre(t,e){const r=Xy(t),n=Xy(e);return+r==+n}function zme(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Vme(t){if(!zme(t)&&typeof t!="number")return!1;const e=ut(t);return!isNaN(Number(e))}function Ume(t,e){const r=ut(t),n=ut(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function Hme(t,e){const r=ut(t),n=ut(e);return r.getFullYear()-n.getFullYear()}function Wme(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Kme(t,e){return+ut(t)-+ut(e)}function Gme(t){const e=ut(t);return e.setHours(23,59,59,999),e}function Yme(t){const e=ut(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Qme(t){const e=ut(t);return+Gme(e)==+Yme(e)}function Xme(t,e){const r=ut(t),n=ut(e),i=sd(r,n),s=Math.abs(Ume(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=sd(r,n)===-i;Qme(ut(t))&&s===1&&sd(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Jme(t,e,r){const n=Kme(t,e)/1e3;return Wme(r==null?void 0:r.roundingMethod)(n)}function T1(t,e){const r=ut(t),n=ut(e),i=sd(r,n),s=Math.abs(Hme(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=sd(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Zme(t){const e=ut(t),r=Mo(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const ege={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tge=(t,e,r)=>{let n;const i=ege[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function O1(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const rge={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nge={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ige={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sge={date:O1({formats:rge,defaultWidth:"full"}),time:O1({formats:nge,defaultWidth:"full"}),dateTime:O1({formats:ige,defaultWidth:"full"})},oge={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},age=(t,e,r,n)=>oge[t];function Xh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const lge={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uge={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dge={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pge=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},mge={ordinalNumber:pge,era:Xh({values:lge,defaultWidth:"wide"}),quarter:Xh({values:cge,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Xh({values:uge,defaultWidth:"wide"}),day:Xh({values:dge,defaultWidth:"wide"}),dayPeriod:Xh({values:hge,defaultWidth:"wide",formattingValues:fge,defaultFormattingWidth:"wide"})};function Jh(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?yge(a,h=>h.test(o)):gge(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function gge(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function yge(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function vge(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const bge=/^(\d+)(th|st|nd|rd)?/i,xge=/\d+/i,wge={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sge={any:[/^b/i,/^(a|c)/i]},_ge={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ege={any:[/1/i,/2/i,/3/i,/4/i]},Nge={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cge={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kge={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tge={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Oge={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jge={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pge={ordinalNumber:vge({matchPattern:bge,parsePattern:xge,valueCallback:t=>parseInt(t,10)}),era:Jh({matchPatterns:wge,defaultMatchWidth:"wide",parsePatterns:Sge,defaultParseWidth:"any"}),quarter:Jh({matchPatterns:_ge,defaultMatchWidth:"wide",parsePatterns:Ege,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Jh({matchPatterns:Nge,defaultMatchWidth:"wide",parsePatterns:Cge,defaultParseWidth:"any"}),day:Jh({matchPatterns:kge,defaultMatchWidth:"wide",parsePatterns:Tge,defaultParseWidth:"any"}),dayPeriod:Jh({matchPatterns:Oge,defaultMatchWidth:"any",parsePatterns:jge,defaultParseWidth:"any"})},hre={code:"en-US",formatDistance:tge,formatLong:sge,formatRelative:age,localize:mge,match:Pge,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ige(t){const e=ut(t);return Lme(e,Zme(e))+1}function Rge(t){const e=ut(t),r=+Qy(e)-+Bme(e);return Math.round(r/are)+1}function fre(t,e){var d,h,f,p;const r=ut(t),n=r.getFullYear(),i=nm(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Mo(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Tc(o,e),l=Mo(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=Tc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function Mge(t,e){var a,l,c,d;const r=nm(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=fre(t,e),s=Mo(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Tc(s,e)}function Age(t,e){const r=ut(t),n=+Tc(r,e)-+Mge(r,e);return Math.round(n/are)+1}function gt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Go={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return gt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):gt(r+1,2)},d(t,e){return gt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return gt(t.getHours()%12||12,e.length)},H(t,e){return gt(t.getHours(),e.length)},m(t,e){return gt(t.getMinutes(),e.length)},s(t,e){return gt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return gt(i,e.length)}},xu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},r4={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Go.y(t,e)},Y:function(t,e,r,n){const i=fre(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return gt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):gt(s,e.length)},R:function(t,e){const r=ure(t);return gt(r,e.length)},u:function(t,e){const r=t.getFullYear();return gt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return gt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return gt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Go.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return gt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=Age(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):gt(i,e.length)},I:function(t,e,r){const n=Rge(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):gt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Go.d(t,e)},D:function(t,e,r){const n=Ige(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):gt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return gt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return gt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return gt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=xu.noon:n===0?i=xu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=xu.evening:n>=12?i=xu.afternoon:n>=4?i=xu.morning:i=xu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Go.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Go.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):gt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):gt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Go.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Go.s(t,e)},S:function(t,e){return Go.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return i4(n);case"XXXX":case"XX":return Pl(n);case"XXXXX":case"XXX":default:return Pl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return i4(n);case"xxxx":case"xx":return Pl(n);case"xxxxx":case"xxx":default:return Pl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+n4(n,":");case"OOOO":default:return"GMT"+Pl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+n4(n,":");case"zzzz":default:return"GMT"+Pl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return gt(n,e.length)},T:function(t,e,r){const n=t.getTime();return gt(n,e.length)}};function n4(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+gt(s,2)}function i4(t,e){return t%60===0?(t>0?"-":"+")+gt(Math.abs(t)/60,2):Pl(t,e)}function Pl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=gt(Math.trunc(n/60),2),s=gt(n%60,2);return r+i+e+s}const s4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},pre=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Dge=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return s4(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",s4(n,e)).replace("{{time}}",pre(i,e))},$ge={p:pre,P:Dge},Fge=/^D+$/,qge=/^Y+$/,Lge=["D","DD","YY","YYYY"];function Bge(t){return Fge.test(t)}function zge(t){return qge.test(t)}function Vge(t,e,r){const n=Uge(t,e,r);if(console.warn(n),Lge.includes(t))throw new RangeError(n)}function Uge(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Hge=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wge=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kge=/^'([^]*?)'?$/,Gge=/''/g,Yge=/[a-zA-Z]/;function kn(t,e,r){var d,h,f,p;const n=nm(),i=n.locale??hre,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=ut(t);if(!Vme(a))throw new RangeError("Invalid time value");let l=e.match(Wge).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=$ge[g];return v(m,i.formatLong)}return m}).join("").match(Hge).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Qge(m)};if(r4[g])return{isToken:!0,value:m};if(g.match(Yge))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(zge(g)||Bge(g))&&Vge(g,e,String(t));const v=r4[g[0]];return v(a,g,i.localize,c)}).join("")}function Qge(t){const e=t.match(Kge);return e?e[1].replace(Gge,"'"):t}function Xge(t,e,r){const n=nm(),i=(r==null?void 0:r.locale)??n.locale??hre,s=2520,o=sd(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,c;o>0?(l=ut(e),c=ut(t)):(l=ut(t),c=ut(e));const d=Jme(c,l),h=(Jy(c)-Jy(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<t4){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<bg){const m=Math.round(f/t4);return i.formatDistance("xDays",m,a)}else if(f<bg*2)return p=Math.round(f/bg),i.formatDistance("aboutXMonths",p,a)}if(p=Xme(c,l),p<12){const m=Math.round(f/bg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function Jge(t,e){return Xge(t,M0(t),e)}function Zge(t,e){const r=ut(t),n=ut(e);return r.getTime()>n.getTime()}function eye(t,e,r){const n=Tc(t,r),i=Tc(e,r);return+n==+i}function tye(t,e){return eye(t,M0(t),e)}function mre(t){return dre(t,M0(t))}function gre(t,e){return $me(t,-e)}function yre(t){return dre(t,gre(M0(t),1))}function fp(t,e){const n=sye(t);let i;if(n.date){const l=oye(n.date,2);i=aye(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=lye(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=cye(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const xg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},rye=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,nye=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,iye=/^([+-])(\d{2})(?::?(\d{2}))?$/;function sye(t){const e={},r=t.split(xg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],xg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(xg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=xg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function oye(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function aye(t,e){if(e===null)return new Date(NaN);const r=t.match(rye);if(!r)return new Date(NaN);const n=!!r[4],i=Zh(r[1]),s=Zh(r[2])-1,o=Zh(r[3]),a=Zh(r[4]),l=Zh(r[5])-1;if(n)return pye(e,a,l)?uye(e,a,l):new Date(NaN);{const c=new Date(0);return!hye(e,s,o)||!fye(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Zh(t){return t?parseInt(t):1}function lye(t){const e=t.match(nye);if(!e)return NaN;const r=j1(e[1]),n=j1(e[2]),i=j1(e[3]);return mye(r,n,i)?r*cre+n*lre+i*1e3:NaN}function j1(t){return t&&parseFloat(t.replace(",","."))||0}function cye(t){if(t==="Z")return 0;const e=t.match(iye);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return gye(n,i)?r*(n*cre+i*lre):NaN}function uye(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const dye=[31,null,31,30,31,30,31,31,30,31,30,31];function vre(t){return t%400===0||t%4===0&&t%100!==0}function hye(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(dye[e]||(vre(t)?29:28))}function fye(t,e){return e>=1&&e<=(vre(t)?366:365)}function pye(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function mye(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function gye(t,e){return e>=0&&e<=59}function yye(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}fp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=fp(n);mre(i)?e.today.push(r):yre(i)?e.yesterday.push(r):tye(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function vye(t){if(!t)return"";try{const e=fp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return mre(e)?Jge(e,{addSuffix:!0}):yre(e)?r?kn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":kn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function bye(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function xye(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function im(t){if(!t.due_date||t.is_completed)return!1;try{const e=fp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function wye(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):im(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function OM({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[u.jsx(Fs,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),u.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[u.jsx(T0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),u.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var bre={exports:{}},xre={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=T;function Sye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _ye=typeof Object.is=="function"?Object.is:Sye,Eye=qd.useState,Nye=qd.useEffect,Cye=qd.useLayoutEffect,kye=qd.useDebugValue;function Tye(t,e){var r=e(),n=Eye({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return Cye(function(){i.value=r,i.getSnapshot=e,P1(i)&&s({inst:i})},[t,r,e]),Nye(function(){return P1(i)&&s({inst:i}),t(function(){P1(i)&&s({inst:i})})},[t]),kye(r),r}function P1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_ye(t,r)}catch{return!0}}function Oye(t,e){return e()}var jye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Oye:Tye;xre.useSyncExternalStore=qd.useSyncExternalStore!==void 0?qd.useSyncExternalStore:jye;bre.exports=xre;var jM=bre.exports;function tn(t){this.content=t}tn.prototype={constructor:tn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new tn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new tn(r)},addToStart:function(t,e){return new tn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new tn(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new tn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=tn.from(t),t.size?new tn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=tn.from(t),t.size?new tn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=tn.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};tn.from=function(t){if(t instanceof tn)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new tn(e)};function wre(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=wre(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function Sre(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=Sre(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class Q{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Q(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new Q(n,i)}cutByIndex(e,r){return e==r?Q.empty:e==0&&r==this.content.length?this:new Q(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new Q(i,s)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return wre(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return Sre(this,e,r,n)}findIndex(e){if(e==0)return wg(0,e);if(e==this.size)return wg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?wg(r+1,s):wg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return Q.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new Q(r||e,n)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const I1={index:0,offset:0};function wg(t,e){return I1.index=t,I1.offset=e,I1}function Zy(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Zy(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Zy(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Et=class pI{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Zy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return pI.none;if(e instanceof pI)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Et.none=[];class ev extends Error{}class me{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=Ere(this.content,e+this.openStart,r);return n&&new me(n,this.openStart,this.openEnd)}removeBetween(e,r){return new me(_re(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return me.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new me(Q.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new me(e,n,i)}}me.empty=new me(Q.empty,0,0);function _re(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(_re(s.content,e-i-1,r-i-1)))}function Ere(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=Ere(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function Pye(t,e,r){if(r.openStart>t.depth)throw new ev("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new ev("Inconsistent open depths");return Nre(t,e,r,0)}function Nre(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=Nre(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return oc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Iye(r,t);return oc(s,kre(t,o,a,e,n))}else return oc(s,tv(t,e,n))}function Cre(t,e){if(!e.type.compatibleContent(t.type))throw new ev("Cannot join "+e.type.name+" onto "+t.type.name)}function mI(t,e,r){let n=t.node(r);return Cre(n,e.node(r)),n}function sc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Of(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(sc(t.nodeAfter,n),s++));for(let a=s;a<o;a++)sc(i.child(a),n);e&&e.depth==r&&e.textOffset&&sc(e.nodeBefore,n)}function oc(t,e){return t.type.checkContent(e),t.copy(e)}function kre(t,e,r,n,i){let s=t.depth>i&&mI(t,e,i+1),o=n.depth>i&&mI(r,n,i+1),a=[];return Of(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(Cre(s,o),sc(oc(s,kre(t,e,r,n,i+1)),a)):(s&&sc(oc(s,tv(t,e,i+1)),a),Of(e,r,i,a),o&&sc(oc(o,tv(r,n,i+1)),a)),Of(n,null,i,a),new Q(a)}function tv(t,e,r){let n=[];if(Of(null,t,r,n),t.depth>r){let i=mI(t,e,r+1);sc(oc(i,tv(t,e,r+1)),n)}return Of(e,null,r,n),new Q(n)}function Iye(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(Q.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class pp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Et.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new rv(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new pp(r,n,s)}static resolveCached(e,r){let n=o4.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else o4.set(e,n=new Rye);let i=n.elts[n.i]=pp.resolve(e,r);return n.i=(n.i+1)%Mye,i}}class Rye{constructor(){this.elts=[],this.i=0}}const Mye=12,o4=new WeakMap;class rv{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Aye=Object.create(null);let La=class gI{constructor(e,r,n,i=Et.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||Q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Zy(this.attrs,r||e.defaultAttrs||Aye)&&Et.sameSet(this.marks,n||Et.none)}copy(e=null){return e==this.content?this:new gI(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new gI(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return me.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new me(c,i.depth-o,s.depth-o)}replace(e,r,n){return Pye(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return pp.resolveCached(this,e)}resolveNoCache(e){return pp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Tre(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=Q.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Et.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Et.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=Q.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};La.prototype.text=void 0;class nv extends La{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Tre(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new nv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new nv(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Tre(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Oc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new Dye(e,r);if(n.next==null)return Oc.empty;let i=Ore(n);n.next&&n.err("Unexpected trailing text");let s=Vye(zye(i));return Uye(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return Q.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:h}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Oc.empty=new Oc(!0);class Dye{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Ore(t){let e=[];do e.push($ye(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function $ye(t){let e=[];do e.push(Fye(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Fye(t){let e=Bye(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=qye(t,e);else break;return e}function a4(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function qye(t,e){let r=a4(t),n=r;return t.eat(",")&&(t.next!="}"?n=a4(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function Lye(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Bye(t){if(t.eat("(")){let e=Ore(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Lye(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function zye(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function jre(t,e){return e-t}function l4(t,e){let r=[];return n(e),r.sort(jre);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function Vye(t){let e=Object.create(null);return r(l4(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<i.length;d++)i[d][0]==a&&(c=i[d][1]);l4(t,l).forEach(d=>{c||i.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[n.join(",")]=new Oc(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(jre);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function Uye(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Pre(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function Ire(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function Rre(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Mre(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new Wye(t,n,e[n]);return r}let c4=class Are{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Mre(e,n.attrs),this.defaultAttrs=Pre(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Oc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ire(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new La(this,this.computeAttrs(e),Q.from(r),Et.setFrom(n))}createChecked(e=null,r,n){return r=Q.from(r),this.checkContent(r),new La(this,this.computeAttrs(e),r,Et.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=Q.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(Q.empty,!0);return s?new La(this,e,r.append(s),Et.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Rre(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Et.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new Are(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function Hye(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class Wye{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?Hye(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class A0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=Mre(e,i.attrs),this.excluded=null;let s=Pre(this.attrs);this.instance=s?new Et(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Et(this,Ire(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new A0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){Rre(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Dre{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=tn.from(e.nodes),r.marks=tn.from(e.marks||{}),this.nodes=c4.compile(this.spec.nodes,this),this.marks=A0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Oc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?u4(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:u4(this,o.split(" "))}this.nodeFromJSON=i=>La.fromJSON(this,i),this.markFromJSON=i=>Et.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof c4){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new nv(n,n.defaultAttrs,e,Et.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function u4(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function Kye(t){return t.tag!=null}function Gye(t){return t.style!=null}class Ba{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(Kye(i))this.tags.push(i);else if(Gye(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new h4(this,r,!1);return n.addAll(e,Et.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new h4(this,r,!0);return n.addAll(e,Et.none,r.from,r.to),me.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Xye(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=f4(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=f4(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ba(e,Ba.schemaRules(e)))}}const $re={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Yye={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Fre={ol:!0,ul:!0},mp=1,yI=2,jf=4;function d4(t,e,r){return e!=null?(e?mp:0)|(e==="full"?yI:0):t&&t.whitespace=="pre"?mp|yI:r&~jf}class Sg{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Et.none,this.match=s||(o&jf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Q.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&mp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=Q.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!$re.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class h4{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=d4(null,r.preserveWhitespace,0)|(n?jf:0);i?s=new Sg(i.type,i.attrs,Et.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new Sg(null,null,Et.none,!0,null,o):s=new Sg(e.schema.topNodeType,null,Et.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&yI?"full":this.localPreserveWS||(i.options&mp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;Fre.hasOwnProperty(o)&&this.parser.normalizeLists&&Qye(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:Yye.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if($re.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,r);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Et.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):p4(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=d4(e,s,o.options);o.options&jf&&o.content.length==0&&(a|=jf);let l=Et.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):p4(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Sg(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=mp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Qye(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&Fre.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function Xye(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function f4(t){let e={};for(let r in t)e[r]=t[r];return e}function p4(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Kc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=R1(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,r);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=oy(R1(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&oy(R1(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return oy(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Kc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=m4(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return m4(e.marks)}}function m4(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function R1(t){return t.document||window.document}const g4=new WeakMap;function Jye(t){let e=g4.get(t);return e===void 0&&g4.set(t,e=Zye(t)),e}function Zye(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function oy(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=Jye(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=oy(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const qre=65535,Lre=Math.pow(2,16);function eve(t,e){return t+e*Lre}function y4(t){return t&qre}function tve(t){return(t-(t&qre))/Lre}const Bre=1,zre=2,ay=4,Vre=8;class vI{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&Vre)>0}get deletedBefore(){return(this.delInfo&(Bre|ay))>0}get deletedAfter(){return(this.delInfo&(zre|ay))>0}get deletedAcross(){return(this.delInfo&ay)>0}}class fi{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&fi.empty)return fi.empty}recover(e){let r=0,n=y4(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+tve(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:eve(a/3,e-l),g=e==l?zre:e==h?Bre:ay;return(r<0?e!=l:e!=h)&&(g|=Vre),new vI(p,g,m)}i+=d-c}return n?e+i:new vI(e+i,0,null)}touches(e,r){let n=0,i=y4(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],d=this.ranges[i+n];e(a,a+c,l,l+d),s+=d-c}}invert(){return new fi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?fi.empty:new fi(e<0?[0,-e,0]:[0,0,e])}}fi.empty=new fi([]);class gp{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new gp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new gp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new vI(e,i,null)}}const M1=Object.create(null);class xn{getMap(){return fi.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=M1[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in M1)throw new RangeError("Duplicate use of step JSON ID "+e);return M1[e]=r,r.prototype.jsonID=e,r}}class gr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new gr(e,null)}static fail(e){return new gr(null,e)}static fromReplace(e,r,n,i){try{return gr.ok(e.replace(r,n,i))}catch(s){if(s instanceof ev)return gr.fail(s.message);throw s}}}function PM(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(PM(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return Q.fromArray(n)}class Ca extends xn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new me(PM(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return gr.fromReplace(e,this.from,this.to,s)}invert(){return new ds(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Ca(r.pos,n.pos,this.mark)}merge(e){return e instanceof Ca&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ca(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ca(r.from,r.to,e.markFromJSON(r.mark))}}xn.jsonID("addMark",Ca);class ds extends xn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new me(PM(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return gr.fromReplace(e,this.from,this.to,n)}invert(){return new Ca(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ds(r.pos,n.pos,this.mark)}merge(e){return e instanceof ds&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ds(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ds(r.from,r.to,e.markFromJSON(r.mark))}}xn.jsonID("removeMark",ds);class ka extends xn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return gr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return gr.fromReplace(e,this.pos,this.pos+1,new me(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new ka(this.pos,r.marks[i]);return new ka(this.pos,this.mark)}}return new jc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new ka(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ka(r.pos,e.markFromJSON(r.mark))}}xn.jsonID("addNodeMark",ka);class jc extends xn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return gr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return gr.fromReplace(e,this.pos,this.pos+1,new me(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new ka(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new jc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new jc(r.pos,e.markFromJSON(r.mark))}}xn.jsonID("removeNodeMark",jc);class qr extends xn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&bI(e,this.from,this.to)?gr.fail("Structure replace would overwrite content"):gr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new fi([this.from,this.to-this.from,this.slice.size])}invert(e){return new qr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new qr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof qr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?me.empty:new me(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new qr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?me.empty:new me(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new qr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new qr(r.from,r.to,me.fromJSON(e,r.slice),!!r.structure)}}xn.jsonID("replace",qr);class zr extends xn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(bI(e,this.from,this.gapFrom)||bI(e,this.gapTo,this.to)))return gr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return gr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?gr.fromReplace(e,this.from,this.to,n):gr.fail("Content does not fit in gap")}getMap(){return new fi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new zr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new zr(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zr(r.from,r.to,r.gapFrom,r.gapTo,me.fromJSON(e,r.slice),r.insert,!!r.structure)}}xn.jsonID("replaceAround",zr);function bI(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function rve(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,c,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new ds(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new Ca(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function nve(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof A0){let c=o.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new ds(o.from,o.to,o.style)))}function IM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,h=n.matchType(c.type);if(!h)o.push(new qr(a,d,me.empty));else{n=h;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||t.step(new ds(a,d,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new me(Q.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new qr(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(Q.empty,!0);t.replace(a,a,new me(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function ive(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function ch(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!ive(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function sve(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,c=a,d=Q.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=Q.from(n.node(m).copy(d)),h++):l--;let f=Q.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=Q.from(i.node(m).copy(f)),p++):c++;t.step(new zr(l,c,o,a,new me(d.append(f),h,p),d.size-h,!0))}function RM(t,e,r=null,n=t){let i=ove(t,e),s=i&&ave(n,e);return s?i.map(v4).concat({type:e,attrs:r}).concat(s.map(v4)):null}function v4(t){return{type:t,attrs:null}}function ove(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function ave(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function lve(t,e,r){let n=Q.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Q.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new zr(i,s,i,s,new me(n,0,0),r.length,!0))}function cve(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&uve(t.doc,t.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&Hre(t,o,a,s),IM(t,t.mapping.slice(s).map(a,1),n,void 0,c===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new zr(h,f,h+1,f-1,new me(Q.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&Ure(t,o,a,s),!1}})}function Ure(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Hre(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function uve(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function dve(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new zr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new me(Q.from(o),0,0),1,!0))}function vo(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>s;c--,d--){let h=i.node(c),f=i.index(c);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function hve(t,e,r=1,n){let i=t.doc.resolve(e),s=Q.empty,o=Q.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=Q.from(i.node(a).copy(s));let d=n&&n[c];o=Q.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new qr(e,e,new me(s.append(o),r,r),!0))}function cl(t,e){let r=t.resolve(e),n=r.index();return Wre(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function fve(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function Wre(t,e){return!!(t&&e&&!t.isLeaf&&fve(t,e))}function D0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&Wre(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function pve(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);Hre(t,d.node(),d.before(),a)}o.inlineContent&&IM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),c=l.map(e-r);if(t.step(new qr(c,l.map(e+r,-1),me.empty,!0)),n===!0){let d=t.doc.resolve(c);Ure(t,d.node(),d.before(),t.steps.length)}return t}function mve(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function Kre(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),d=!1;if(s==1)d=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&c.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function $0(t,e,r=e,n=me.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return Gre(i,s,n)?new qr(e,r,n):new gve(i,s,n).fit()}function Gre(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class gve{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=Q.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new me(s,o,a);return e>-1?new zr(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new qr(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=A1(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,h=null;if(r==1&&(o?c.matchType(o.type)||(h=c.fillBefore(Q.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=A1(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new me(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=A1(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new me(ff(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new me(ff(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),v=h.matchType(g.type);if(!v)break;c++,(c>1||l==0||g.content.size)&&(h=v,d.push(Yre(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=pf(this.placed,r,Q.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<p;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?me.empty:new me(ff(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new me(ff(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!D1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=D1(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=D1(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=pf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=pf(this.placed,this.depth,Q.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Q.empty,!0);r.childCount&&(this.placed=pf(this.placed,this.frontier.length,r))}}function ff(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(ff(t.firstChild.content,e-1,r)))}function pf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(pf(t.lastChild.content,e-1,r)))}function A1(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function Yre(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,Yre(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(Q.empty,!0)))),t.copy(n)}function D1(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!yve(r,s.content,o)?a:null}function yve(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function vve(t){return t.spec.defining||t.spec.definingForContent}function bve(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(Gre(i,s,n))return t.step(new qr(e,r,n));let o=Xre(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=c[f],m=vve(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let v=o[(g+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let b=i.node(v-1),w=i.index(v-1);if(b.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(v),y?s.after(v):r,new me(Qre(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function Qre(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(Qre(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Q.empty,!0))}return t}function xve(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=mve(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new me(Q.from(n),0,0))}function wve(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=Xre(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function Xre(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class od extends xn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return gr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return gr.fromReplace(e,this.pos,this.pos+1,new me(Q.from(i),0,r.isLeaf?0:1))}getMap(){return fi.empty}invert(e){return new od(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new od(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new od(r.pos,r.attr,r.value)}}xn.jsonID("attr",od);class yp extends xn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return gr.ok(n)}getMap(){return fi.empty}invert(e){return new yp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new yp(r.attr,r.value)}}xn.jsonID("docAttr",yp);let Ld=class extends Error{};Ld=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Ld.prototype=Object.create(Error.prototype);Ld.prototype.constructor=Ld;Ld.prototype.name="TransformError";class Jre{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new gp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Ld(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=me.empty){let i=$0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new me(Q.from(n),0,0))}delete(e,r){return this.replace(e,r,me.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return bve(this,e,r,n),this}replaceRangeWith(e,r,n){return xve(this,e,r,n),this}deleteRange(e,r){return wve(this,e,r),this}lift(e,r){return sve(this,e,r),this}join(e,r=1){return pve(this,e,r),this}wrap(e,r){return lve(this,e,r),this}setBlockType(e,r=e,n,i=null){return cve(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return dve(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new od(e,r,n)),this}setDocAttribute(e,r){return this.step(new yp(e,r)),this}addNodeMark(e,r){return this.step(new ka(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Et)r.isInSet(n.marks)&&this.step(new jc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new jc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return hve(this,e,r,n),this}addMark(e,r,n){return rve(this,e,r,n),this}removeMark(e,r,n){return nve(this,e,r,n),this}clearIncompatible(e,r,n){return IM(this,e,r,n),this}}const $1=Object.create(null);class Ge{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new Sve(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=me.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?me.empty:r),a==0&&w4(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),c=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,r),w4(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new Fe(e):ku(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?ku(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):ku(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new gi(e.node(0))}static atStart(e){return ku(e,e,0,0,1)||new gi(e)}static atEnd(e){return ku(e,e,e.content.size,e.childCount,-1)||new gi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=$1[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in $1)throw new RangeError("Duplicate use of selection JSON ID "+e);return $1[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Fe.between(this.$anchor,this.$head).getBookmark()}}Ge.prototype.visible=!0;class Sve{constructor(e,r){this.$from=e,this.$to=r}}let b4=!1;function x4(t){!b4&&!t.parent.inlineContent&&(b4=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Fe extends Ge{constructor(e,r=e){x4(e),x4(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Ge.near(n);let i=e.resolve(r.map(this.anchor));return new Fe(i.parent.inlineContent?i:n,n)}replace(e,r=me.empty){if(super.replace(e,r),r==me.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Fe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new F0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Fe(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=Ge.findFrom(r,n,!0)||Ge.findFrom(r,-n,!0);if(s)r=s.$head;else return Ge.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(Ge.findFrom(e,-n,!0)||Ge.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new Fe(e,r)}}Ge.jsonID("text",Fe);class F0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new F0(e.map(this.anchor),e.map(this.head))}resolve(e){return Fe.between(e.resolve(this.anchor),e.resolve(this.head))}}class Pe extends Ge{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?Ge.near(s):new Pe(s)}content(){return new me(Q.from(this.node),0,0)}eq(e){return e instanceof Pe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new MM(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Pe(e.resolve(r.anchor))}static create(e,r){return new Pe(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Pe.prototype.visible=!1;Ge.jsonID("node",Pe);class MM{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new F0(n,n):new MM(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Pe.isSelectable(n)?new Pe(r):Ge.near(r)}}class gi extends Ge{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=me.empty){if(r==me.empty){e.delete(0,e.doc.content.size);let n=Ge.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new gi(e)}map(e){return new gi(e)}eq(e){return e instanceof gi}getBookmark(){return _ve}}Ge.jsonID("all",gi);const _ve={map(){return this},resolve(t){return new gi(t)}};function ku(t,e,r,n,i,s=!1){if(e.inlineContent)return Fe.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Pe.isSelectable(a))return Pe.create(t,r-(i<0?a.nodeSize:0))}else{let l=ku(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function w4(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof qr||i instanceof zr))return;let s=t.mapping.maps[n],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(Ge.near(t.doc.resolve(o),r))}const S4=1,_g=2,_4=4;class Eve extends Jre{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|S4)&~_g,this.storedMarks=null,this}get selectionSet(){return(this.updated&S4)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=_g,this}ensureMarks(e){return Et.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&_g)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~_g,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Et.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Ge.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_4,this}get scrolledIntoView(){return(this.updated&_4)>0}}function E4(t,e){return!e||!t?t:t.bind(e)}class mf{constructor(e,r,n){this.name=e,this.init=E4(r.init,n),this.apply=E4(r.apply,n)}}const Nve=[new mf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new mf("selection",{init(t,e){return t.selection||Ge.atStart(e.doc)},apply(t){return t.selection}}),new mf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new mf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class F1{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Nve.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new mf(n.key,n.spec.state,n))})}}class Uu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Uu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new Eve(this)}static create(e){let r=new F1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Uu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new F1(this.schema,e.plugins),n=r.fields,i=new Uu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new F1(e.schema,e.plugins),s=new Uu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=La.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=Ge.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Zre(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=Zre(i,e,{})),r[n]=i}return r}class Yt{constructor(e){this.spec=e,this.props={},e.props&&Zre(e.props,this,this.props),this.key=e.key?e.key.key:ene("plugin")}getState(e){return e[this.key]}}const q1=Object.create(null);function ene(t){return t in q1?t+"$"+ ++q1[t]:(q1[t]=0,t+"$")}class Ir{constructor(e="key"){this.key=ene(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const AM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function tne(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const rne=(t,e,r)=>{let n=tne(t,r);if(!n)return!1;let i=DM(n);if(!i){let o=n.blockRange(),a=o&&ch(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(dne(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Bd(s,"end")||Pe.isSelectable(s)))for(let o=n.depth;;o--){let a=$0(t.doc,n.before(o),n.after(o),me.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Bd(s,"end")?Ge.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Pe.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Cve=(t,e,r)=>{let n=tne(t,r);if(!n)return!1;let i=DM(n);return i?nne(t,i,e):!1},kve=(t,e,r)=>{let n=sne(t,r);if(!n)return!1;let i=$M(n);return i?nne(t,i,e):!1};function nne(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=$0(t.doc,s,l,me.empty);if(!c||c.from!=s||c instanceof qr&&c.slice.size>=l-s)return!1;if(r){let d=t.tr.step(c);d.setSelection(Fe.create(d.doc,s)),r(d.scrollIntoView())}return!0}function Bd(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const ine=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=DM(n)}let o=s&&s.nodeBefore;return!o||!Pe.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Pe.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function DM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function sne(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const one=(t,e,r)=>{let n=sne(t,r);if(!n)return!1;let i=$M(n);if(!i)return!1;let s=i.nodeAfter;if(dne(t,i,e,1))return!0;if(n.parent.content.size==0&&(Bd(s,"start")||Pe.isSelectable(s))){let o=$0(t.doc,n.before(),n.after(),me.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Bd(s,"start")?Ge.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Pe.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},ane=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=$M(n)}let o=s&&s.nodeAfter;return!o||!Pe.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Pe.create(t.doc,s.pos)).scrollIntoView()),!0)};function $M(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const Tve=(t,e)=>{let r=t.selection,n=r instanceof Pe,i;if(n){if(r.node.isTextblock||!cl(t.doc,r.from))return!1;i=r.from}else if(i=D0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(Pe.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Ove=(t,e)=>{let r=t.selection,n;if(r instanceof Pe){if(r.node.isTextblock||!cl(t.doc,r.to))return!1;n=r.to}else if(n=D0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},jve=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&ch(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},lne=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function FM(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const Pve=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=FM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ge.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},cne=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof gi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=FM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Fe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},une=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(vo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&ch(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function Ive(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof Pe&&e.selection.node.isBlock)return!n.parentOffset||!vo(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),c=n.start(p)==n.pos-(n.depth-p),a=FM(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof Fe||e.selection instanceof gi)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=vo(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=vo(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&c&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const Rve=Ive(),Mve=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(Pe.create(t.doc,i))),!0)};function Ave(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||cl(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function dne(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&Ave(t,e,r))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=Q.empty;for(let y=o.length-1;y>=0;y--)m=Q.from(o[y].create(null,m));m=Q.from(i.copy(m));let g=t.tr.step(new zr(e.pos-1,p,e.pos,p,new me(m,1,0),o.length,!0)),v=g.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&cl(g.doc,v.pos)&&g.join(v.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:Ge.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&ch(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&Bd(s,"start",!0)&&Bd(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=Q.empty;for(let w=m.length-1;w>=0;w--)y=Q.from(m[w].copy(y));let b=t.tr.step(new zr(e.pos-m.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new me(y,m.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function hne(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(Fe.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Dve=hne(-1),$ve=hne(1);function Fve(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&RM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function N4(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(c),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function qM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}qM(AM,rne,ine);qM(AM,one,ane);qM(lne,cne,une,Rve);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function qve(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return Lve(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function Lve(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new rv(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new rv(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=RM(s,r,n,e);return a?(t&&Bve(t,e,a,i,r),!0):!1}function Bve(t,e,r,n,i){let s=Q.empty;for(let d=r.length-1;d>=0;d--)s=Q.from(r[d].type.create(r[d].attrs,s));t.step(new zr(e.start-(n?2:0),e.end,e.start,e.end,new me(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),c=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&vo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function zve(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?Vve(e,r,t,s):Uve(e,r,s):!0:!1}}function Vve(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new zr(s-1,o,s,o,new me(Q.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new rv(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=ch(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return cl(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function Uve(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?Q.empty:Q.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new zr(h-(a?1:0),f+(l?1:0),h+1,f-1,new me((a?Q.empty:Q.from(i.copy(Q.empty))).append(l?Q.empty:Q.from(i.copy(Q.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function Hve(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,d=Q.from(c?t.create():null),h=new me(Q.from(t.create(null,Q.from(a.type.create(null,d)))),c?3:1,0),f=s.start,p=s.end;r(e.tr.step(new zr(f-(c?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const rn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},zd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let xI=null;const io=function(t,e,r){let n=xI||(xI=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},Wve=function(){xI=null},Pc=function(t,e,r,n){return r&&(C4(t,e,r,n,-1)||C4(t,e,r,n,1))},Kve=/^(img|br|input|textarea|hr)$/i;function C4(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Di(t))){let o=t.parentNode;if(!o||o.nodeType!=1||sm(t)||Kve.test(t.nodeName)||t.contentEditable=="false")return!1;e=rn(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Di(t):0}else return!1}}function Di(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Gve(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Di(t)}else if(t.parentNode&&!sm(t))e=rn(t),t=t.parentNode;else return null}}function Yve(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!sm(t))e=rn(t)+1,t=t.parentNode;else return null}}function Qve(t,e,r){for(let n=e==0,i=e==Di(t);n||i;){if(t==r)return!0;let s=rn(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Di(t)}}function sm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const q0=function(t){return t.focusNode&&Pc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Il(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Xve(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Jve(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Di(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Di(n.startContainer),n.startOffset)}}}const zs=typeof navigator<"u"?navigator:null,k4=typeof document<"u"?document:null,ul=zs&&zs.userAgent||"",wI=/Edge\/(\d+)/.exec(ul),fne=/MSIE \d/.exec(ul),SI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ul),ti=!!(fne||SI||wI),za=fne?document.documentMode:SI?+SI[1]:wI?+wI[1]:0,Li=!ti&&/gecko\/(\d+)/i.test(ul);Li&&+(/Firefox\/(\d+)/.exec(ul)||[0,0])[1];const _I=!ti&&/Chrome\/(\d+)/.exec(ul),Lr=!!_I,pne=_I?+_I[1]:0,bn=!ti&&!!zs&&/Apple Computer/.test(zs.vendor),Vd=bn&&(/Mobile\/\w+/.test(ul)||!!zs&&zs.maxTouchPoints>2),Pi=Vd||(zs?/Mac/.test(zs.platform):!1),mne=zs?/Win/.test(zs.platform):!1,fo=/Android \d/.test(ul),om=!!k4&&"webkitFontSmoothing"in k4.documentElement.style,Zve=om?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function e0e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Js(t,e){return typeof t=="number"?t:t[e]}function t0e(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function T4(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=zd(o);continue}let a=o,l=a==s.body,c=l?e0e(s):t0e(a),d=0,h=0;if(e.top<c.top+Js(n,"top")?h=-(c.top-e.top+Js(i,"top")):e.bottom>c.bottom-Js(n,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Js(i,"top")-c.top:e.bottom-c.bottom+Js(i,"bottom")),e.left<c.left+Js(n,"left")?d=-(c.left-e.left+Js(i,"left")):e.right>c.right-Js(n,"right")&&(d=e.right-c.right+Js(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:zd(o)}}function r0e(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:gne(t.dom)}}function gne(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=zd(n));return e}function n0e({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;yne(r,n==0?0:n-e)}function yne(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let wu=null;function i0e(t){if(t.setActive)return t.setActive();if(wu)return t.focus(wu);let e=gne(t);t.focus(wu==null?{get preventScroll(){return wu={preventScroll:!0},!0}}:void 0),wu||(wu=!1,yne(e,0))}function vne(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=io(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?s0e(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:vne(r,i)}function s0e(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=Zo(n,1);if(o.top!=o.bottom&&LM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function LM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function o0e(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function a0e(t,e,r){let{node:n,offset:i}=vne(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function l0e(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function bne(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(LM(e,c))return bne(o,e,c)}}if((s=(s+1)%n)==i)break}return t}function c0e(t,e){let r=t.dom.ownerDocument,n,i=0,s=Jve(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!LM(e,c)||(o=bne(t.dom,e,c),!o))return null}if(bn)for(let c=o;n&&c;c=zd(c))c.draggable&&(n=void 0);if(o=o0e(o,e),n){if(Li&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;om&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=l0e(t,n,i,e))}a==null&&(a=a0e(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function O4(t){return t.top<t.bottom||t.left<t.right}function Zo(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(O4(n))return n}return Array.prototype.find.call(r,O4)||t.getBoundingClientRect()}const u0e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function xne(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=om||Li;if(n.nodeType==3)if(o&&(u0e.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=Zo(io(n,i,i),r);if(Li&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=Zo(io(n,i-1,i-1),-1);if(c.top==l.top){let d=Zo(io(n,i,i+1),-1);if(d.top!=l.top)return ef(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,ef(Zo(io(n,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Di(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return L1(l.getBoundingClientRect(),!1)}if(s==null&&i<Di(n)){let l=n.childNodes[i];if(l.nodeType==1)return L1(l.getBoundingClientRect(),!0)}return L1(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Di(n))){let l=n.childNodes[i-1],c=l.nodeType==3?io(l,Di(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return ef(Zo(c,1),!1)}if(s==null&&i<Di(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?io(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return ef(Zo(c,-1),!0)}return ef(Zo(n.nodeType==3?io(n):n,-r),r>=0)}function ef(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function L1(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function wne(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function d0e(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return wne(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=xne(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=io(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const h0e=/[\u0590-\u08ac]/;function f0e(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!h0e.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:wne(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(d,h),l&&(l!=d||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),v}):n.pos==n.start()||n.pos==n.end()}let j4=null,P4=null,I4=!1;function p0e(t,e,r){return j4==e&&P4==r?I4:(j4=e,P4=r,I4=r=="up"||r=="down"?d0e(t,e,r):f0e(t,e,r))}const Bi=0,R4=1,ql=2,Vs=3;class am{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Bi,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>rn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof _ne){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof Sne&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?rn(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?rn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let d=o+l.border;if(e>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=rn(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=rn(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(s>m&&o<v)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=v}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((Li||bn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:rn(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Li&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&bn)&&Pc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Pc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((c.extend||e==r)&&!(h&&Li)){c.collapse(a.node,a.offset);try{e!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?ql:R4,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Vs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ql:Vs}n=o}this.dirty=ql}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?ql:R4;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Sne extends am{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Bi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class m0e extends am{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ic extends am{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Kc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Ic(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Vs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Vs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Bi){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Bi}}slice(e,r,n){let i=Ic.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=NI(s,r,o,n)),e>0&&(s=NI(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Va extends am{constructor(e,r,n,i,s,o,a,l,c){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,h=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=Kc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=Cne(d,n,r),c?l=new g0e(e,r,n,i,d,h||null,f,c,s,o+1):r.isText?new L0(e,r,n,i,d,f,s):new Va(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,r,n){return this.dirty==Bi&&e.eq(this.node)&&iv(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new v0e(this,o&&o.node,e);w0e(this.node,this.innerDeco,(c,d,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Et.none:this.node.child(d).marks,n,e),l.placeWidget(c,e,i)},(c,d,h,f)=>{l.syncToMarks(c.marks,n,e);let p;l.findNodeMatch(c,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,h,p,e)||l.updateNextNode(c,d,h,e,f,i)||l.addNode(c,d,h,e,i),i+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ql)&&(o&&this.protectLocalComposition(e,o),Ene(this.contentDOM,this.children,e),Vd&&S0e(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof Fe)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=_0e(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new m0e(this,s,r,i);e.input.compositionNodes.push(o),this.children=NI(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==Vs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Bi}updateOuterDeco(e){if(iv(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Nne(this.dom,this.nodeDOM,EI(this.outerDeco,this.node,r),EI(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function M4(t,e,r,n,i){Cne(n,e,t);let s=new Va(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class L0 extends Va{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==Vs||this.dirty!=Bi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Bi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Bi,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new L0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Vs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class _ne extends am{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Bi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class g0e extends Va{constructor(e,r,n,i,s,o,a,l,c,d){super(e,r,n,i,s,o,a,c,d),this.spec=l}update(e,r,n,i){if(this.dirty==Vs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Ene(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=A4(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Ic){let l=n?n.previousSibling:t.lastChild;Ene(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=A4(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const Pf=function(t){t&&(this.nodeName=t)};Pf.prototype=Object.create(null);const Ll=[new Pf];function EI(t,e,r){if(t.length==0)return Ll;let n=r?Ll[0]:new Pf,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new Pf(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new Pf(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function Nne(t,e,r,n){if(r==Ll&&n==Ll)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Ll[0]),i=l}y0e(i,a||Ll[0],o)}return i}function y0e(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function Cne(t,e,r){return Nne(t,t,Ll,EI(e,r,t.nodeType!=1))}function iv(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function A4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class v0e{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=b0e(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Bi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ic.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==Vs&&o.dom==o.contentDOM&&(o.dirty=ql),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Va){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Vs&&iv(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=ql,h.updateChildren(i,o+1),h.dirty=Bi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!iv(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Va.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Va.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Sne(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Ic;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof L0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((bn||Lr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new _ne(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function b0e(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof Ic)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function x0e(t,e){return t.type.side-e.type.side}function w0e(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);n(d,i,e.forChild(s,d),c),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(d?(h||(h=[d])).push(v):d=v)}if(d)if(h){h.sort(x0e);for(let v=0;v<h.length;v++)r(h[v],c,!!l)}else r(d,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let v=m;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<m&&(l=f.cut(v-s),f=f.cut(0,v-s),m=v,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function S0e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function _0e(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=r)return a+c;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function NI(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=r||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-c,l.size,n)))}return s}function BM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(q0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Pe.isSelectable(h)&&i.parent&&!(h.isInline&&Qve(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new Pe(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=zM(t,d,a,h)}return c}function kne(t){return t.editable?t.hasFocus():One(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function bo(t,e=!1){let r=t.state.selection;if(Tne(t,r),!!kne(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Lr){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Pc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)N0e(t);else{let{anchor:n,head:i}=r,s,o;D4&&!(r instanceof Fe)&&(r.$from.parent.inlineContent||(s=$4(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=$4(t,r.to))),t.docView.setSelection(n,i,t,e),D4&&(s&&F4(s),o&&F4(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&E0e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const D4=bn||Lr&&pne<63;function $4(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(bn&&i&&i.contentEditable=="false")return B1(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return B1(i);if(s)return B1(s)}}function B1(t){return t.contentEditable="true",bn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function F4(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function E0e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!kne(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function N0e(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,rn(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&ti&&za<=11&&(r.disabled=!0,r.disabled=!1)}function Tne(t,e){if(e instanceof Pe){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(q4(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else q4(t)}function q4(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function zM(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||Fe.between(e,r,n)}function L4(t){return t.editable&&!t.hasFocus()?!1:One(t)}function One(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function C0e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Pc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function CI(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ge.findFrom(s,e)}function na(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function B4(t,e,r){let n=t.state.selection;if(n instanceof Fe)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return na(t,new Fe(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=CI(t.state,e);return i&&i instanceof Pe?na(t,i):!1}else if(!(Pi&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Pe.isSelectable(s)?na(t,new Pe(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):om?na(t,new Fe(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Pe&&n.node.isInline)return na(t,new Fe(e>0?n.$to:n.$from));{let i=CI(t.state,e);return i?na(t,i):!1}}}function sv(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function If(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Su(t,e){return e<0?k0e(t):T0e(t)}function k0e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(Li&&r.nodeType==1&&n<sv(r)&&If(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(If(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(jne(r))break;{let a=r.previousSibling;for(;a&&If(a,-1);)i=r.parentNode,s=rn(a),a=a.previousSibling;if(a)r=a,n=sv(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?kI(t,r,n):i&&kI(t,i,s)}function T0e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=sv(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(If(a,1))s=r,o=++n;else break}else{if(jne(r))break;{let a=r.nextSibling;for(;a&&If(a,1);)s=a.parentNode,o=rn(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=sv(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&kI(t,s,o)}function jne(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function O0e(t,e){for(;t&&e==t.childNodes.length&&!sm(t);)e=rn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function j0e(t,e){for(;t&&!e&&!sm(t);)e=rn(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function kI(t,e,r){if(e.nodeType!=3){let s,o;(o=O0e(e,r))?(e=o,r=0):(s=j0e(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(q0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&bo(t)},50)}function z4(t,e){let r=t.state.doc.resolve(e);if(!(Lr||mne)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function V4(t,e,r){let n=t.state.selection;if(n instanceof Fe&&!n.empty||r.indexOf("s")>-1||Pi&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=CI(t.state,e);if(o&&o instanceof Pe)return na(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof gi?Ge.near(o,e):Ge.findFrom(o,e);return a?na(t,a):!1}return!1}function U4(t,e){if(!(t.state.selection instanceof Fe))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function H4(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function P0e(t){if(!bn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;H4(t,n,"true"),setTimeout(()=>H4(t,n,"false"),20)}return!1}function I0e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function R0e(t,e){let r=e.keyCode,n=I0e(e);if(r==8||Pi&&r==72&&n=="c")return U4(t,-1)||Su(t,-1);if(r==46&&!e.shiftKey||Pi&&r==68&&n=="c")return U4(t,1)||Su(t,1);if(r==13||r==27)return!0;if(r==37||Pi&&r==66&&n=="c"){let i=r==37?z4(t,t.state.selection.from)=="ltr"?-1:1:-1;return B4(t,i,n)||Su(t,i)}else if(r==39||Pi&&r==70&&n=="c"){let i=r==39?z4(t,t.state.selection.from)=="ltr"?1:-1:1;return B4(t,i,n)||Su(t,i)}else{if(r==38||Pi&&r==80&&n=="c")return V4(t,-1,n)||Su(t,-1);if(r==40||Pi&&r==78&&n=="c")return P0e(t)||V4(t,1,n)||Su(t,1);if(n==(Pi?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function VM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Kc.fromSchema(t.state.schema),a=Dne(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,d,h=0;for(;c&&c.nodeType==1&&(d=Ane[c.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function Pne(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new me(Q.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Kc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=$0e(r),om&&F0e(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ba.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!M0e.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=q0e(W4(a,+d[1],+d[2]),d[4]);else if(a=me.maxOpen(A0e(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=W4(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const M0e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function A0e(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&Rne(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Mne(o[o.length-1],s.length));let d=Ine(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return Q.from(o)}return t}function Ine(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,Q.from(t));return t}function Rne(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Rne(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(Q.from(Ine(r,t,i+1))))}}function Mne(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,Mne(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(Q.empty,!0);return t.copy(r.append(n))}function TI(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=TI(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Q.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function W4(t,e,r){return e<t.openStart&&(t=new me(TI(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new me(TI(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const Ane={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let K4=null;function Dne(){return K4||(K4=document.implementation.createHTMLDocument("title"))}let z1=null;function D0e(t){let e=window.trustedTypes;return e?(z1||(z1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),z1.createHTML(t)):t}function $0e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=Dne().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&Ane[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=D0e(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function F0e(t){let e=t.querySelectorAll(Lr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function q0e(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=Q.from(l.create(n[a+1],i)),s++,o++}return new me(i,s,o)}const In={},Rn={},L0e={touchstart:!0,touchmove:!0};class B0e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function z0e(t){for(let e in In){let r=In[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{U0e(t,n)&&!UM(t,n)&&(t.editable||!(n.type in Rn))&&r(t,n)},L0e[e]?{passive:!0}:void 0)}bn&&t.dom.addEventListener("input",()=>null),OI(t)}function Ta(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function V0e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function OI(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>UM(t,n))})}function UM(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function U0e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function H0e(t,e){!UM(t,e)&&In[e.type]&&(t.editable||!(e.type in Rn))&&In[e.type](t,e)}Rn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!Fne(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(fo&&Lr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Vd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Il(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||R0e(t,r)?r.preventDefault():Ta(t,"key")};Rn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Rn.keypress=(t,e)=>{let r=e;if(Fne(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||Pi&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Fe)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function B0(t){return{left:t.clientX,top:t.clientY}}function W0e(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function HM(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function ad(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function K0e(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Pe.isSelectable(n)?(ad(t,new Pe(r)),!0):!1}function G0e(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof Pe&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Pe.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(ad(t,Pe.create(t.state.doc,i)),!0):!1}function Y0e(t,e,r,n,i){return HM(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?G0e(t,r):K0e(t,r))}function Q0e(t,e,r,n){return HM(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function X0e(t,e,r,n){return HM(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||J0e(t,r,n)}function J0e(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(ad(t,Fe.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)ad(t,Fe.create(n,a+1,a+1+o.content.size));else if(Pe.isSelectable(o))ad(t,Pe.create(n,a));else continue;return!0}}function WM(t){return ov(t)}const $ne=Pi?"metaKey":"ctrlKey";In.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=WM(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&W0e(r,t.input.lastClick)&&!r[$ne]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(B0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Z0e(t,o,r,!!n)):(s=="doubleClick"?Q0e:X0e)(t,o.pos,o.inside,r)?r.preventDefault():Ta(t,"pointer"))};class Z0e{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[$ne],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Pe&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Li&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ta(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>bo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(B0(e))),this.updateAllowDefault(e),this.allowDefault||!r?Ta(this.view,"pointer"):Y0e(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||bn&&this.mightDrag&&!this.mightDrag.node.isAtom||Lr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(ad(this.view,Ge.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Ta(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ta(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}In.touchstart=t=>{t.input.lastTouch=Date.now(),WM(t),Ta(t,"pointer")};In.touchmove=t=>{t.input.lastTouch=Date.now(),Ta(t,"pointer")};In.contextmenu=t=>WM(t);function Fne(t,e){return t.composing?!0:bn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const ebe=fo?5e3:-1;Rn.compositionstart=Rn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Fe&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||Lr&&mne&&tbe(t)))t.markCursor=t.state.storedMarks||r.marks(),ov(t,!0),t.markCursor=null;else if(ov(t,!e.selection.empty),Li&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}qne(t,ebe)};function tbe(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Rn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,qne(t,20))};function qne(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>ov(t),e))}function Lne(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=nbe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function rbe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=Gve(e.focusNode,e.focusOffset),n=Yve(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function nbe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function ov(t,e=!1){if(!(fo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Lne(t),e||t.docView&&t.docView.dirty){let r=BM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function ibe(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const vp=ti&&za<15||Vd&&Zve<604;In.copy=Rn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=vp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=VM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):ibe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sbe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function obe(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?bp(t,n.value,null,i,e):bp(t,n.textContent,n.innerHTML,i,e)},50)}function bp(t,e,r,n,i){let s=Pne(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||me.empty)))return!0;if(!s)return!1;let o=sbe(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Bne(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Rn.paste=(t,e)=>{let r=e;if(t.composing&&!fo)return;let n=vp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&bp(t,Bne(n),n.getData("text/html"),i,r)?r.preventDefault():obe(t,r)};class zne{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const abe=Pi?"altKey":"ctrlKey";function Vne(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[abe]}In.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(B0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Pe?i.to-1:i.to))){if(n&&n.mightDrag)o=Pe.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=Pe.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:d}=VM(t,a);(!r.dataTransfer.files.length||!Lr||pne>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(vp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",vp||r.dataTransfer.setData("text/plain",c),t.dragging=new zne(d,Vne(t,r),o)};In.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Rn.dragover=Rn.dragenter=(t,e)=>e.preventDefault();Rn.drop=(t,e)=>{try{lbe(t,e,t.dragging)}finally{t.dragging=null}};function lbe(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(B0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=Pne(t,Bne(e.dataTransfer),vp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&Vne(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||me.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?Kre(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&Pe.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Pe(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,v,y)=>p=y),l.setSelection(zM(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}In.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&bo(t)},20))};In.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};In.beforeinput=(t,e)=>{if(Lr&&fo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Il(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Rn)In[t]=Rn[t];function xp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class av{constructor(e,r){this.toDOM=e,this.spec=r||ac,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new jn(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof av&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&xp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ua{constructor(e,r){this.attrs=e,this.spec=r||ac}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new jn(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Ua&&xp(this.attrs,e.attrs)&&xp(this.spec,e.spec)}static is(e){return e.type instanceof Ua}destroy(){}}class KM{constructor(e,r){this.attrs=e,this.spec=r||ac}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new jn(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof KM&&xp(this.attrs,e.attrs)&&xp(this.spec,e.spec)}destroy(){}}class jn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new jn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new jn(e,e,new av(r,n))}static inline(e,r,n,i){return new jn(e,r,new Ua(n,i))}static node(e,r,n,i){return new jn(e,r,new KM(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ua}get widget(){return this.type instanceof av}}const Tu=[],ac={};class Ht{constructor(e,r){this.local=e.length?e:Tu,this.children=r.length?r:Tu}static create(e,r){return r.length?lv(r,e,0,ac):pn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==pn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||ac)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?cbe(this.children,o||[],e,r,n,i,s):o?new Ht(o.sort(lc),Tu):pn}add(e,r){return r.length?this==pn?Ht.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let c=l+n,d;if(d=Hne(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,c+1):i.splice(s,0,l,l+a.nodeSize,lv(d,a,c+1,ac)),s+=3}});let o=Une(s?Wne(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ht(o.length?this.local.concat(o).sort(lc):this.local,i||this.children)}remove(e){return e.length==0||this==pn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=pn?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Ht(i,n):pn}forChild(e,r){if(this==pn)return this;if(r.isLeaf)return Ht.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ua){let c=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let a=new Ht(i.sort(lc),Tu);return n?new ua([a,n]):a}return n||pn}eq(e){if(this==e)return!0;if(!(e instanceof Ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return GM(this.localsInner(e))}localsInner(e){if(this==pn)return Tu;if(e.inlineContent||!this.local.some(Ua.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ua||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Ht.empty=new Ht([],[]);Ht.removeOverlap=GM;const pn=Ht.empty;class ua{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,ac));return ua.from(n)}forChild(e,r){if(r.isLeaf)return Ht.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=pn&&(s instanceof ua?n=n.concat(s.members):n.push(s))}return ua.from(n)}eq(e){if(!(e instanceof ua)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?GM(n?r:r.sort(lc)):Tu}static from(e){switch(e.length){case 0:return pn;case 1:return e[0];default:return new ua(e.every(r=>r instanceof Ht)?e:e.reduce((r,n)=>r.concat(n instanceof Ht?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function cbe(t,e,r,n,i,s,o){let a=t.slice();for(let c=0,d=s;c<r.maps.length;c++){let h=0;r.maps[c].forEach((f,p,m,g)=>{let v=g-m-(p-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+d-h)continue;let w=a[y]+d-h;p>=w?a[y+1]=f<=w?-2:-1:f>=d&&v&&(a[y]+=v,a[y+1]+=v)}h+=v}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=r.map(t[c]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[c+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),v=n.maybeChild(m);if(v&&g==h&&g+v.nodeSize==p){let y=a[c+2].mapInner(r,v,d+1,t[c]+s+1,o);y!=pn?(a[c]=h,a[c+1]=p,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=ube(a,t,e,r,i,s,o),d=lv(c,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Ht(e.sort(lc),a)}function Une(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new jn(i.from+e,i.to+e,i.type))}return r}function ube(t,e,r,n,i,s,o){function a(l,c){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,c);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function Hne(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function Wne(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function lv(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let c=Hne(t,a,l+r);if(c){s=!0;let d=lv(c,a,r+l+1,n);d!=pn&&i.push(l,l+a.nodeSize,d)}});let o=Une(s?Wne(t):t,-r).sort(lc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Ht(o,i):pn}function lc(t,e){return t.from-e.from||t.to-e.to}function GM(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),G4(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),G4(e,i,n.copy(s.from,n.to)));break}}}return e}function G4(t,e,r){for(;e<t.length&&lc(r,t[e])>0;)e++;t.splice(e,0,r)}function V1(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=pn&&e.push(n)}),t.cursorWrapper&&e.push(Ht.create(t.state.doc,[t.cursorWrapper.deco])),ua.from(e)}const dbe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},hbe=ti&&za<=11;class fbe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class pbe{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new fbe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);ti&&za<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),hbe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,dbe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(L4(this.view)){if(this.suppressingSelectionUpdates)return bo(this.view);if(ti&&za<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Pc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=zd(s))r.add(s);for(let s=e.anchorNode;s;s=zd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&L4(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Li&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||ybe(e,h)!=p)&&f.remove()}}}else if((Lr||bn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&q0(n)&&(c=BM(e))&&c.eq(Ge.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,bo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),mbe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||bo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ti&&za<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?rn(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?rn(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Y4=new WeakMap,Q4=!1;function mbe(t){if(!Y4.has(t)&&(Y4.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Li,Q4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Q4=!0}}function X4(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Pc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function gbe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return X4(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?X4(t,r):null}function ybe(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function vbe(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],q0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Lr&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=n.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=v;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||Ba.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:bbe,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function bbe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(bn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||bn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const xbe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function wbe(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=BM(t,N);if(E&&!t.state.selection.eq(E)){if(Lr&&fo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",k=>k(t,Il(13,"Enter"))))return;let C=t.state.tr.setSelection(E);N=="pointer"?C.setMeta("pointer",!0):N=="key"&&C.scrollIntoView(),s&&C.setMeta("composition",s),t.dispatch(C)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,c=vbe(t,e,r),d=t.state.doc,h=d.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=Ebe(h.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(Vd&&t.input.lastIOSEnter>Date.now()-225||fo)&&i.some(N=>N.nodeType==1&&!xbe.test(N.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",N=>N(t,Il(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof Fe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let N=J4(t,t.state.doc,c.sel);if(N&&!N.eq(t.state.selection)){let E=t.state.tr.setSelection(N);s&&E.setMeta("composition",s),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Fe&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ti&&za<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),y=d.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if((Vd&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!b&&g.pos<c.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(c.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,Il(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&_be(d,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",N=>N(t,Il(8,"Backspace")))){fo&&Lr&&t.domObserver.suppressSelectionUpdates();return}Lr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),fo&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,Il(13,"Enter"))})},20));let w=m.start,x=m.endA,S=N=>{let E=N||t.state.tr.replace(w,x,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let C=J4(t,E.doc,c.sel);C&&!(Lr&&t.composing&&C.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(C.head==w||C.head==E.mapping.map(x)-1)||ti&&C.empty&&C.head==w)&&E.setSelection(C)}return s&&E.setMeta("composition",s),E.scrollIntoView()},_;if(b)if(g.pos==v.pos){ti&&za<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>bo(t),20));let N=S(t.state.tr.delete(w,x)),E=d.resolve(m.start).marksAcross(d.resolve(m.endA));E&&N.ensureMarks(E),t.dispatch(N)}else if(m.endA==m.endB&&(_=Sbe(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let N=S(t.state.tr);_.type=="add"?N.addMark(w,x,_.mark):N.removeMark(w,x,_.mark),t.dispatch(N)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,v.parentOffset),E=()=>S(t.state.tr.insertText(N,w,x));t.someProp("handleTextInput",C=>C(t,w,x,N,E))||t.dispatch(E())}else t.dispatch(S());else t.dispatch(S())}function J4(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:zM(t,e.resolve(r.anchor),e.resolve(r.head))}function Sbe(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(Q.from(c).eq(t))return{mark:a,type:o}}function _be(t,e,r,n,i){if(r-e<=i.pos-n.pos||U1(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(U1(s,!0,!0));return!o.parent.isTextblock||o.pos>r||U1(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function U1(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Ebe(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&Z4(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&Z4(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function Z4(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class Kne{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new B0e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(iq),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=rq(this),tq(this),this.nodeViews=nq(this),this.docView=M4(this.state.doc,eq(this),V1(this),this.dom,this),this.domObserver=new pbe(this,(n,i,s,o)=>wbe(this,n,i,s,o)),this.domObserver.start(),z0e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&OI(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(iq),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Lne(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=nq(this);Cbe(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&OI(this),this.editable=rq(this),tq(this);let l=V1(this),c=eq(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&r0e(this);if(o){this.domObserver.stop();let p=h&&(ti||Lr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Nbe(i.selection,e.selection);if(h){let m=Lr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=rbe(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=M4(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&C0e(this))?bo(this,p):(Tne(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&n0e(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Pe){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&T4(this,r.getBoundingClientRect(),e)}else T4(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new zne(e.slice,e.move,i<0?void 0:Pe.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(ti){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&i0e(this.dom),bo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return c0e(this,e)}coordsAtPos(e,r=1){return xne(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return p0e(this,r||this.state,e)}pasteHTML(e,r){return bp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return bp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return VM(this,e)}destroy(){this.docView&&(V0e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],V1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Wve())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return H0e(this,e)}domSelectionRange(){let e=this.domSelection();return e?bn&&this.root.nodeType===11&&Xve(this.dom.ownerDocument)==this.dom&&gbe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Kne.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function eq(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[jn.node(0,t.state.doc.content.size,e)]}function tq(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:jn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function rq(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Nbe(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function nq(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function Cbe(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function iq(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var el={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},cv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},kbe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Tbe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var nn=0;nn<10;nn++)el[48+nn]=el[96+nn]=String(nn);for(var nn=1;nn<=24;nn++)el[nn+111]="F"+nn;for(var nn=65;nn<=90;nn++)el[nn]=String.fromCharCode(nn+32),cv[nn]=String.fromCharCode(nn);for(var H1 in el)cv.hasOwnProperty(H1)||(cv[H1]=el[H1]);function Obe(t){var e=kbe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Tbe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?cv:el)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const jbe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Pbe=typeof navigator<"u"&&/Win/.test(navigator.platform);function Ibe(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))jbe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Rbe(t){let e=Object.create(null);for(let r in t)e[Ibe(r)]=t[r];return e}function W1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function Mbe(t){return new Yt({props:{handleKeyDown:Gne(t)}})}function Gne(t){let e=Rbe(t);return function(r,n){let i=Obe(n),s,o=e[W1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[W1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(Pbe&&n.ctrlKey&&n.altKey)&&(s=el[n.keyCode])&&s!=i){let a=e[W1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var Abe=Object.defineProperty,YM=(t,e)=>{for(var r in e)Abe(t,r,{get:e[r],enumerable:!0})};function z0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var V0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),v=f(...m)(g);return o.push(v),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:z0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},Yne={};YM(Yne,{blur:()=>Dbe,clearContent:()=>$be,clearNodes:()=>Fbe,command:()=>qbe,createParagraphNear:()=>Lbe,cut:()=>Bbe,deleteCurrentNode:()=>zbe,deleteNode:()=>Vbe,deleteRange:()=>Ube,deleteSelection:()=>Hbe,enter:()=>Wbe,exitCode:()=>Kbe,extendMarkRange:()=>Gbe,first:()=>Ybe,focus:()=>Xbe,forEach:()=>Jbe,insertContent:()=>Zbe,insertContentAt:()=>r1e,joinBackward:()=>s1e,joinDown:()=>i1e,joinForward:()=>o1e,joinItemBackward:()=>a1e,joinItemForward:()=>l1e,joinTextblockBackward:()=>c1e,joinTextblockForward:()=>u1e,joinUp:()=>n1e,keyboardShortcut:()=>h1e,lift:()=>f1e,liftEmptyBlock:()=>p1e,liftListItem:()=>m1e,newlineInCode:()=>g1e,resetAttributes:()=>y1e,scrollIntoView:()=>v1e,selectAll:()=>b1e,selectNodeBackward:()=>x1e,selectNodeForward:()=>w1e,selectParentNode:()=>S1e,selectTextblockEnd:()=>_1e,selectTextblockStart:()=>E1e,setContent:()=>N1e,setMark:()=>H1e,setMeta:()=>W1e,setNode:()=>K1e,setNodeSelection:()=>G1e,setTextDirection:()=>Y1e,setTextSelection:()=>Q1e,sinkListItem:()=>X1e,splitBlock:()=>J1e,splitListItem:()=>Z1e,toggleList:()=>exe,toggleMark:()=>txe,toggleNode:()=>rxe,toggleWrap:()=>nxe,undoInputRule:()=>ixe,unsetAllMarks:()=>sxe,unsetMark:()=>oxe,unsetTextDirection:()=>axe,updateAttributes:()=>lxe,wrapIn:()=>cxe,wrapInList:()=>uxe});var Dbe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),$be=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Fbe=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,h=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=ch(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},qbe=t=>e=>t(e),Lbe=()=>({state:t,dispatch:e})=>cne(t,e),Bbe=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new Fe(n.doc.resolve(Math.max(o-1,0)))),!0},zbe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function wr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Vbe=t=>({tr:e,state:r,dispatch:n})=>{const i=wr(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Ube=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},Hbe=()=>({state:t,dispatch:e})=>AM(t,e),Wbe=()=>({commands:t})=>t.keyboardShortcut("Enter"),Kbe=()=>({state:t,dispatch:e})=>Pve(t,e);function QM(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function uv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:QM(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Qne(t,e,r={}){return t.find(n=>n.type===e&&uv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function sq(t,e,r={}){return!!Qne(t,e,r)}function XM(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!Qne([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&sq([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&sq([...t.parent.child(l).marks],e,r);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function qo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Gbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=qo(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:c,to:d}=a;if(i){const h=XM(l,s,e);if(h&&h.from<=c&&h.to>=d){const f=Fe.create(o,h.from,h.to);r.setSelection(f)}}return!0},Ybe=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function Xne(t){return t instanceof Fe}function Bl(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function Jne(t,e=null){if(!e)return null;const r=Ge.atStart(t),n=Ge.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?Fe.create(t,Bl(0,i,s),Bl(t.content.size,i,s)):Fe.create(t,Bl(e,i,s),Bl(e,i,s))}function oq(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function dv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Qbe(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Xbe=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(dv()||oq())&&n.dom.focus(),Qbe()&&!dv()&&!oq()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!Xne(r.state.selection))return o(),!0;const a=Jne(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Jbe=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),Zbe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),Zne=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&Zne(n)}return t};function Eg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return Zne(r)}function wp(t,e,r){if(t instanceof La||t instanceof Q)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return Q.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),wp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new Dre({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?Ba.fromSchema(l).parseSlice(Eg(t),r.parseOptions):Ba.fromSchema(l).parse(Eg(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Ba.fromSchema(e);return r.slice?s.parseSlice(Eg(t),r.parseOptions).content:s.parse(Eg(t),r.parseOptions)}return wp("",e,r)}function e1e(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof qr||i instanceof zr))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(Ge.near(t.doc.resolve(o),r))}var t1e=t=>!("type"in t),r1e=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{wp(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=wp(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((t1e(a)?a:[a]).forEach(v=>{v.check(),f=f?v.isText&&v.marks.length===0:!1,p=p?v.isBlock:!1}),d===h&&p){const{parent:v}=n.doc.resolve(d);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof Q){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const v=n.doc.resolve(d),y=v.node(),b=v.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;b&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&e1e(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},n1e=()=>({state:t,dispatch:e})=>Tve(t,e),i1e=()=>({state:t,dispatch:e})=>Ove(t,e),s1e=()=>({state:t,dispatch:e})=>rne(t,e),o1e=()=>({state:t,dispatch:e})=>one(t,e),a1e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=D0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},l1e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=D0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},c1e=()=>({state:t,dispatch:e})=>Cve(t,e),u1e=()=>({state:t,dispatch:e})=>kve(t,e);function eie(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function d1e(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))dv()||eie()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var h1e=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=d1e(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,a))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function tl(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?wr(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>uv(h.node.attrs,r,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}var f1e=(t,e={})=>({state:r,dispatch:n})=>{const i=wr(t,r.schema);return tl(r,i,e)?jve(r,n):!1},p1e=()=>({state:t,dispatch:e})=>une(t,e),m1e=t=>({state:e,dispatch:r})=>{const n=wr(t,e.schema);return zve(n)(e,r)},g1e=()=>({state:t,dispatch:e})=>lne(t,e);function U0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function aq(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var y1e=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=U0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=wr(t,n.schema)),a==="mark"&&(o=qo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,aq(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(aq(f.attrs,e))))})})}),l},v1e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),b1e=()=>({tr:t,dispatch:e})=>{if(e){const r=new gi(t.doc);t.setSelection(r)}return!0},x1e=()=>({state:t,dispatch:e})=>ine(t,e),w1e=()=>({state:t,dispatch:e})=>ane(t,e),S1e=()=>({state:t,dispatch:e})=>Mve(t,e),_1e=()=>({state:t,dispatch:e})=>$ve(t,e),E1e=()=>({state:t,dispatch:e})=>Dve(t,e);function jI(t,e,r={},n={}){return wp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var N1e=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const c=jI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function tie(t,e){const r=qo(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function rie(t,e){const r=new Jre(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function C1e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function k1e(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function T1e(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function H0(t){return e=>T1e(e.$from,t)}function Oe(t,e,r){return t.config[e]===void 0&&t.parent?Oe(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Oe(t.parent,e,r):null}):t.config[e]}function JM(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Oe(e,"addExtensions",r);return n?[e,...JM(n())]:e}).flat(10)}function ZM(t,e){const r=Kc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function nie(t){return typeof t=="function"}function mt(t,e=void 0,...r){return nie(t)?e?t.bind(e)(...r):t(...r):t}function O1e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ud(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function iie(t){const e=[],{nodeExtensions:r,markExtensions:n}=Ud(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Oe(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Oe(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function Sr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],c=a.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),n[i]=Array.from(c.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function Sp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Sr(r,n),{})}function j1e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function lq(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):j1e(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function cq(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&O1e(r)?!1:r!=null))}function uq(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function P1e(t,e){var r;const n=iie(t),{nodeExtensions:i,markExtensions:s}=Ud(t),o=(r=i.find(c=>Oe(c,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(c=>{const d=n.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,b)=>{const w=Oe(b,"extendNodeSchema",h);return{...y,...w?w(c):{}}},{}),p=cq({...f,content:mt(Oe(c,"content",h)),marks:mt(Oe(c,"marks",h)),group:mt(Oe(c,"group",h)),inline:mt(Oe(c,"inline",h)),atom:mt(Oe(c,"atom",h)),selectable:mt(Oe(c,"selectable",h)),draggable:mt(Oe(c,"draggable",h)),code:mt(Oe(c,"code",h)),whitespace:mt(Oe(c,"whitespace",h)),linebreakReplacement:mt(Oe(c,"linebreakReplacement",h)),defining:mt(Oe(c,"defining",h)),isolating:mt(Oe(c,"isolating",h)),attrs:Object.fromEntries(d.map(uq))}),m=mt(Oe(c,"parseHTML",h));m&&(p.parseDOM=m.map(y=>lq(y,d)));const g=Oe(c,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:Sp(y,d)}));const v=Oe(c,"renderText",h);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const d=n.filter(v=>v.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,y)=>{const b=Oe(y,"extendMarkSchema",h);return{...v,...b?b(c):{}}},{}),p=cq({...f,inclusive:mt(Oe(c,"inclusive",h)),excludes:mt(Oe(c,"excludes",h)),group:mt(Oe(c,"group",h)),spanning:mt(Oe(c,"spanning",h)),code:mt(Oe(c,"code",h)),attrs:Object.fromEntries(d.map(uq))}),m=mt(Oe(c,"parseHTML",h));m&&(p.parseDOM=m.map(v=>lq(v,d)));const g=Oe(c,"renderHTML",h);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:Sp(v,d)})),[c.name,p]}));return new Dre({topNode:o,nodes:a,marks:l})}function I1e(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function hv(t){return t.sort((r,n)=>{const i=Oe(r,"priority")||100,s=Oe(n,"priority")||100;return i>s?-1:i<s?1:0})}function sie(t){const e=hv(JM(t)),r=I1e(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function oie(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,c,d,h)=>{var f;l.isBlock&&c>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:c,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,c)-c,i-c))}),a}function R1e(t,e){const r={from:0,to:t.content.size};return oie(t,r,e)}function aie(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function M1e(t,e){const r=wr(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function lie(t,e){const r=U0(typeof e=="string"?e:e.name,t.schema);return r==="node"?M1e(t,e):r==="mark"?tie(t,e):{}}function A1e(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function D1e(t){const e=A1e(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function cie(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(c,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:c,to:d}})})}),D1e(n)}function eA(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=XM(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var $1e=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function Ng(t,e){return e.nodes[t]||e.marks[t]||null}function ly(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var F1e=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function PI(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?qo(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>uv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,v),b=Math.min(m,v+g.nodeSize),w=b-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:b})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>uv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function q1e(t,e,r={}){if(!e)return tl(t,null,r)||PI(t,null,r);const n=U0(e,t.schema);return n==="node"?tl(t,e,r):n==="mark"?PI(t,e,r):!1}var L1e=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=H0(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},B1e=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function dq(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function hq(t,e){const{nodeExtensions:r}=Ud(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=mt(Oe(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function W0(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(W0(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function uie(t){return t instanceof Pe}var die=class hie{constructor(e){this.position=e}static fromJSON(e){return new hie(e.position)}toJSON(){return{position:this.position}}};function z1e(t,e){const r=e.mapping.mapResult(t.position);return{position:new die(r.pos),mapResult:r}}function V1e(t){return new die(t)}function U1e(t,e,r){var n;const{selection:i}=e;let s=null;if(Xne(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(c=>c.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(c)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));c=p&&m}return!c}),c})}var H1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=qo(t,n.schema);if(i)if(o){const c=tie(n,l);r.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return U1e(n,r,l)},W1e=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),K1e=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=wr(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>N4(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>N4(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},G1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Bl(t,0,n.content.size),s=Pe.create(n,i);e.setSelection(s)}return!0},Y1e=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},Q1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Fe.atStart(n).from,a=Fe.atEnd(n).to,l=Bl(i,o,a),c=Bl(s,o,a),d=Fe.create(n,l,c);e.setSelection(d)}return!0},X1e=t=>({state:e,dispatch:r})=>{const n=wr(t,e.schema);return Hve(n)(e,r)};function fq(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var J1e=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=ly(c,a.node().type.name,a.node().attrs);if(s instanceof Pe&&s.node.isBlock)return!a.parentOffset||!vo(o,a.pos)?!1:(n&&(t&&fq(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:C1e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=vo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&vo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof Fe&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),v=e.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&fq(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},Z1e=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=wr(t,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=Q.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-b;E>=l.depth-3;E-=1)y=Q.from(l.node(E).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...ly(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(Q.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(b-1));r.replace(_,l.after(-w),new me(y,4-b,0));let N=-1;r.doc.nodesBetween(_,r.doc.content.size,(E,C)=>{if(N>-1)return!1;E.isTextblock&&E.content.size===0&&(N=C+1)}),N>-1&&r.setSelection(Fe.near(r.doc.resolve(N))),r.scrollIntoView()}return!0}const p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...ly(f,h.type.name,h.attrs),...e},g={...ly(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,c.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!vo(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=n,{splittableMarks:w}=s.extensionManager,x=b||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,v).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},K1=(t,e)=>{const r=H0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&cl(t.doc,r.pos)&&t.join(r.pos),!0},G1=(t,e)=>{const r=H0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&cl(t.doc,n)&&t.join(n),!0},exe=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=wr(t,o.schema),m=wr(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:b}=g,w=y.blockRange(b),x=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=H0(_=>hq(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if(hq(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>K1(s,p)).command(()=>G1(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:c.clearNodes()).wrapInList(p,n).command(()=>K1(s,p)).command(()=>G1(s,p)).run():l().command(()=>{const _=d().wrapInList(p,n),N=x.filter(E=>f.includes(E.type.name));return s.ensureMarks(N),_?!0:c.clearNodes()}).wrapInList(p,n).command(()=>K1(s,p)).command(()=>G1(s,p)).run()},txe=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=qo(t,n.schema);return PI(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},rxe=(t,e,r={})=>({state:n,commands:i})=>{const s=wr(t,n.schema),o=wr(e,n.schema),a=tl(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},nxe=(t,e={})=>({state:r,commands:n})=>{const i=wr(t,r.schema);return tl(r,i,e)?n.lift(i):n.wrapIn(i,e)},ixe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},sxe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},oxe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=qo(t,n.schema),{$from:c,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=c.marks().find(v=>v.type===l))==null?void 0:s.attrs,g=XM(c,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},axe=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},lxe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=U0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=wr(t,n.schema)),a==="mark"&&(o=qo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(v,y)=>{s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v)}):n.doc.nodesBetween(d,h,(v,y)=>{y<d&&s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v),y>=d&&y<=h&&(s&&s===v.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...v.attrs,...e})),o&&v.marks.length&&v.marks.forEach(b=>{if(o===b.type&&(l=!0,i)){const w=Math.max(y,d),x=Math.min(y+v.nodeSize,h);r.addMark(w,x,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(v=>{o===v.type&&i&&r.addMark(m,g,o.create({...v.attrs,...e}))}))}),l},cxe=(t,e={})=>({state:r,dispatch:n})=>{const i=wr(t,r.schema);return Fve(i,e)(r,n)},uxe=(t,e={})=>({state:r,dispatch:n})=>{const i=wr(t,r.schema);return qve(i,e)(r,n)},dxe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},K0=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},hxe=(t,e)=>{if(QM(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function Cg(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=F1e(c)+s;return o.forEach(f=>{if(d)return;const p=hxe(h,f.find);if(!p)return;const m=l.state.tr,g=z0({state:l.state,transaction:m}),v={from:n-(p[0].length-s.length),to:i},{commands:y,chain:b,can:w}=new V0({editor:r,state:g});f.handler({state:g,range:v,match:p,commands:y,chain:b,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function fxe(t){const{editor:e,rules:r}=t,n=new Yt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=ZM(Q.from(d),o.schema);const{from:h}=l,f=h+d.length;Cg({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Cg({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Cg({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Cg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function pxe(t){return Object.prototype.toString.call(t).slice(8,-1)}function kg(t){return pxe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function fie(t,e){const r={...t};return kg(t)&&kg(e)&&Object.keys(e).forEach(n=>{kg(e[n])&&kg(t[n])?r[n]=fie(t[n],e[n]):r[n]=e[n]}),r}var tA=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...mt(Oe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...mt(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>fie(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Gc=class pie extends tA{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new pie(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function mxe(t){return typeof t=="number"}var gxe=class{constructor(t){this.find=t.find,this.handler=t.handler}},yxe=(t,e,r)=>{if(QM(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function vxe(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new V0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,v,y,b,w;if((v=(g=p.type)==null?void 0:g.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(b=(y=p.content)==null?void 0:y.size)!=null?b:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const N=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");yxe(N,s.find,o).forEach(C=>{if(C.index===void 0)return;const k=S+C.index+1,j=k+C[0].length,P={from:r.tr.mapping.map(k),to:r.tr.mapping.map(j)},O=s.handler({state:r,range:P,match:C,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});h.push(O)})}),h.every(p=>p!==null)}var Tg=null,bxe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function xxe(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,v=z0({state:d,transaction:g});if(!(!vxe({editor:e,state:v,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Yt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(Tg=e)},p=()=>{Tg&&(Tg=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=Tg;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:S}=y;typeof S=="string"?S=S:S=ZM(Q.from(S),p.schema);const{from:_}=y,N=_+S.length,E=bxe(S);return l({rule:d,state:p,from:_,to:{b:N},pasteEvt:E})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!mxe(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var G0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=sie(t),this.schema=P1e(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ng(e.name,this.schema)},n=Oe(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return hv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ng(n.name,this.schema)},s=[],o=Oe(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&Oe(n,"exitable",i)&&(a.ArrowRight=()=>Gc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=Mbe(a);s.push(l);const c=Oe(n,"addInputRules",i);if(dq(n,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=fxe({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=Oe(n,"addPasteRules",i);if(dq(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=xxe({editor:t,rules:f});s.push(...p)}}const h=Oe(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return iie(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ud(this.extensions);return Object.fromEntries(e.filter(r=>!!Oe(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:wr(r.name,this.schema)},s=Oe(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,d,h,f)=>{const p=Sp(l,n);return o({node:l,view:c,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return hv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Ng(i.name,this.schema)},o=Oe(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ud(this.extensions);return Object.fromEntries(e.filter(r=>!!Oe(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:qo(r.name,this.schema)},s=Oe(r,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const d=Sp(a,n);return s()({mark:a,view:l,inline:c,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{Mxe(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ng(e.name,this.schema)};e.type==="mark"&&((r=mt(Oe(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=Oe(e,"onBeforeCreate",n),s=Oe(e,"onCreate",n),o=Oe(e,"onUpdate",n),a=Oe(e,"onSelectionUpdate",n),l=Oe(e,"onTransaction",n),c=Oe(e,"onFocus",n),d=Oe(e,"onBlur",n),h=Oe(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};G0.resolve=sie;G0.sort=hv;G0.flatten=JM;var wxe={};YM(wxe,{ClipboardTextSerializer:()=>gie,Commands:()=>yie,Delete:()=>vie,Drop:()=>bie,Editable:()=>xie,FocusEvents:()=>Sie,Keymap:()=>_ie,Paste:()=>Eie,Tabindex:()=>Nie,TextDirection:()=>Cie,focusEventsPluginKey:()=>wie});var fr=class mie extends tA{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new mie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},gie=fr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Yt({key:new Ir("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=aie(r);return oie(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),yie=fr.create({name:"commands",addCommands(){return{...Yne}}}),vie=fr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=rie(t.before,[t,...e]);cie(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=p.oldRange.from<=g&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:d.mapping.map(g),newTo:d.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,v;if(p instanceof ds){const y=f.slice(m).map(p.from,-1),b=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(b),S=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(N=>N.eq(p.mark)),_=(v=d.doc.nodeAt(b))==null?void 0:v.marks.some(N=>N.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:b},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),bie=fr.create({name:"drop",addProseMirrorPlugins(){return[new Yt({key:new Ir("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),xie=fr.create({name:"editable",addProseMirrorPlugins(){return[new Yt({key:new Ir("editable"),props:{editable:()=>this.editor.options.editable}})]}}),wie=new Ir("focusEvents"),Sie=fr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Yt({key:wie,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),_ie=fr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,v=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?v===h.pos:Ge.atStart(c).from===f;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return dv()||eie()?s:i},addProseMirrorPlugins(){return[new Yt({key:new Ir("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=Ge.atStart(e.doc).from,c=Ge.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!W0(r.doc))return;const f=r.tr,p=z0({state:r,transaction:f}),{commands:m}=new V0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),Eie=fr.create({name:"paste",addProseMirrorPlugins(){return[new Yt({key:new Ir("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),Nie=fr.create({name:"tabindex",addProseMirrorPlugins(){return[new Yt({key:new Ir("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Cie=fr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ud(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Yt({key:new Ir("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),Sxe=class Ou{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Ou(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ou(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ou(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Ou(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Ou(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},_xe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Exe(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var Nxe=class extends dxe{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:z1e,createMappablePosition:V1e},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=Jne(e,this.options.autofocus);this.editorState=Uu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Exe(_xe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=nie(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[xie,gie.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),yie,Sie,_ie,Nie,bie,Eie,vie,Cie.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new G0(n,this)}createCommandManager(){this.commandManager=new V0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=jI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=jI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new Kne(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return lie(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return q1e(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ZM(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return R1e(this.state.doc,{blockSeparator:e,textSerializers:{...aie(this.schema),...r}})}get isEmpty(){return W0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Sxe(e,this)}get $doc(){return this.$pos(0)}};function Hd(t){return new K0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=mt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),c=r.from+a.indexOf(o),d=c+o.length;if(eA(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;d<r.to&&s.delete(d,r.to),c>r.from&&s.delete(r.from+l,c);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function Cxe(t){return new K0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=mt(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=o+c;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function II(t){return new K0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=mt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function Wd(t){return new K0({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=mt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),c=l&&RM(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&cl(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function kxe(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Pe){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var Txe={};YM(Txe,{createAtomBlockMarkdownSpec:()=>Oxe,createBlockMarkdownSpec:()=>jxe,createInlineMarkdownSpec:()=>Rxe,parseAttributes:()=>rA,parseIndentedBlocks:()=>RI,renderNestedMarkdownContent:()=>iA,serializeAttributes:()=>nA});function rA(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));e.class=c.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,c,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[c]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function nA(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function Oxe(t){const{nodeName:e,name:r,parseAttributes:n=rA,serializeAttributes:i=nA,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,c=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",v=n(g);if(!o.find(b=>!(b in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:d=>{const h=c(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function jxe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=rA,serializeAttributes:s=nA,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=h.match(g);if(!v)return;const[y,b=""]=v,w=i(b);let x=1;const S=y.length;let _="";const N=/^:::([\w-]*)(\s.*)?/gm,E=h.slice(S);for(N.lastIndex=0;;){const C=N.exec(E);if(C===null)break;const k=C.index,j=C[1];if(!((m=C[2])!=null&&m.endsWith(":::"))){if(j)x+=1;else if(x-=1,x===0){const P=E.slice(0,k);_=P.trim();const O=h.slice(0,S+k+C[0].length);let A=[];if(_)if(a==="block")for(A=p.blockTokens(P),A.forEach(q=>{q.text&&(!q.tokens||q.tokens.length===0)&&(q.tokens=p.inlineTokens(q.text))});A.length>0;){const q=A[A.length-1];if(q.type==="paragraph"&&(!q.text||q.text.trim()===""))A.pop();else break}else A=p.inlineTokens(_);return{type:e,raw:O,attributes:w,content:_,tokens:A}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",v=f.renderChildren(h.content||[],`

`);return`:::${c}${g}

${v}

:::`}}}function Pxe(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function Ixe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function Rxe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=Pxe,serializeAttributes:s=Ixe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,v=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(v!==void 0&&y===v)return;p[g]=y}}),p},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),v=f.match(g);if(!v)return;let y="",b="";if(a){const[,x]=v;b=x}else{const[,x,S]=v;b=x,y=S||""}const w=i(b.trim());return{type:e,raw:v[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(f.attrs||{}),g=s(m),v=g?` ${g}`:"";return a?`[${c}${v}]`:`[${c}${v}]${p}[/${c}]`}}}function RI(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let c="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:v}=m;c=`${c}${f}
`;const y=[v];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const N=a.slice(d+1).findIndex(k=>k.trim()!=="");if(N===-1)break;if((((i=(n=a[d+1+N].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),c=`${c}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),c=`${c}${S}
`,d+=1;else break}let b;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?b=e.customNestedParser(S):b=r.blockTokens(S))}const x=e.createToken(m,b);l.push(x)}if(l.length!==0)return{items:l,raw:c}}function iA(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const d=e.renderChildren([c]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function Mxe(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(c,d,t.type),s.addMark(c,d,p)}}),s.docChanged&&e.view.dispatch(s)}var xi=class kie extends tA{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new kie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Rc(t){return new gxe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=mt(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let c=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(eA(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),c=r.from+d+a.length,o.addMark(r.from+d,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:Axe,getOwnPropertySymbols:Dxe}=Object,{hasOwnProperty:$xe}=Object.prototype;function Y1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function Og(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function Fxe(t){return t!=null?t[Symbol.toStringTag]:void 0}function pq(t){return Axe(t).concat(Dxe(t))}const qxe=Object.hasOwn||((t,e)=>$xe.call(t,e));function Yc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Lxe="__v",Bxe="__o",zxe="_owner",{getOwnPropertyDescriptor:mq,keys:gq}=Object;function Vxe(t,e){return t.byteLength===e.byteLength&&fv(new Uint8Array(t),new Uint8Array(e))}function Uxe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Hxe(t,e){return t.byteLength===e.byteLength&&fv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Wxe(t,e){return Yc(t.getTime(),e.getTime())}function Kxe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Gxe(t,e){return t===e}function yq(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const c=e.entries();let d=!1,h=0;for(;(a=c.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const Yxe=Yc;function Qxe(t,e,r){const n=gq(t);let i=n.length;if(gq(e).length!==i)return!1;for(;i-- >0;)if(!Tie(t,e,r,n[i]))return!1;return!0}function tf(t,e,r){const n=pq(t);let i=n.length;if(pq(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!Tie(t,e,r,s)||(o=mq(t,s),a=mq(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Xxe(t,e){return Yc(t.valueOf(),e.valueOf())}function Jxe(t,e){return t.source===e.source&&t.flags===e.flags}function vq(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let c=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function fv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Zxe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Tie(t,e,r,n){return(n===zxe||n===Bxe||n===Lxe)&&(t.$$typeof||e.$$typeof)?!0:qxe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const ewe="[object ArrayBuffer]",twe="[object Arguments]",rwe="[object Boolean]",nwe="[object DataView]",iwe="[object Date]",swe="[object Error]",owe="[object Map]",awe="[object Number]",lwe="[object Object]",cwe="[object RegExp]",uwe="[object Set]",dwe="[object String]",hwe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},fwe="[object URL]",pwe=Object.prototype.toString;function mwe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(v,y,b){if(v===y)return!0;if(v==null||y==null)return!1;const w=typeof v;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(v,y,b):w==="function"?s(v,y,b):!1;const x=v.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(v,y,b);if(Array.isArray(v))return e(v,y,b);if(x===Date)return n(v,y,b);if(x===RegExp)return d(v,y,b);if(x===Map)return o(v,y,b);if(x===Set)return h(v,y,b);const S=pwe.call(v);if(S===iwe)return n(v,y,b);if(S===cwe)return d(v,y,b);if(S===owe)return o(v,y,b);if(S===uwe)return h(v,y,b);if(S===lwe)return typeof v.then!="function"&&typeof y.then!="function"&&l(v,y,b);if(S===fwe)return p(v,y,b);if(S===swe)return i(v,y,b);if(S===twe)return l(v,y,b);if(hwe[S])return f(v,y,b);if(S===ewe)return t(v,y,b);if(S===nwe)return r(v,y,b);if(S===rwe||S===awe||S===dwe)return c(v,y,b);if(m){let _=m[S];if(!_){const N=Fxe(v);N&&(_=m[N])}if(_)return _(v,y,b)}return!1}}function gwe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:Vxe,areArraysEqual:r?tf:Uxe,areDataViewsEqual:Hxe,areDatesEqual:Wxe,areErrorsEqual:Kxe,areFunctionsEqual:Gxe,areMapsEqual:r?Y1(yq,tf):yq,areNumbersEqual:Yxe,areObjectsEqual:r?tf:Qxe,arePrimitiveWrappersEqual:Xxe,areRegExpsEqual:Jxe,areSetsEqual:r?Y1(vq,tf):vq,areTypedArraysEqual:r?Y1(fv,tf):fv,areUrlsEqual:Zxe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=Og(n.areArraysEqual),s=Og(n.areMapsEqual),o=Og(n.areObjectsEqual),a=Og(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function ywe(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function vwe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:c,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const bwe=dl();dl({strict:!0});dl({circular:!0});dl({circular:!0,strict:!0});dl({createInternalComparator:()=>Yc});dl({strict:!0,createInternalComparator:()=>Yc});dl({circular:!0,createInternalComparator:()=>Yc});dl({circular:!0,createInternalComparator:()=>Yc,strict:!0});function dl(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=gwe(t),o=mwe(s),a=r?r(o):ywe(o);return vwe({circular:e,comparator:o,createState:n,equals:a,strict:i})}var Oie={exports:{}},jie={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0=T,xwe=jM;function wwe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Swe=typeof Object.is=="function"?Object.is:wwe,_we=xwe.useSyncExternalStore,Ewe=Y0.useRef,Nwe=Y0.useEffect,Cwe=Y0.useMemo,kwe=Y0.useDebugValue;jie.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=Ewe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Cwe(function(){function l(p){if(!c){if(c=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,Swe(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=_we(t,s[0],s[1]);return Nwe(function(){o.hasValue=!0,o.value=a},[a]),kwe(a),a};Oie.exports=jie;var Twe=Oie.exports,Owe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},jwe=({contentComponent:t})=>{const e=jM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(e)})};function Pwe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:ade.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var Iwe=class extends xe.Component{constructor(t){var e;super(t),this.editorContentRef=xe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=Pwe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:Owe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&u.jsx(jwe,{contentComponent:t.contentComponent})]})}},Rwe=T.forwardRef((t,e)=>{const r=xe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return xe.createElement(Iwe,{key:r,innerRef:e,...t})}),Mwe=xe.memo(Rwe),Awe=typeof window<"u"?T.useLayoutEffect:T.useEffect,Dwe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function $we(t){var e;const[r]=T.useState(()=>new Dwe(t.editor)),n=Twe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:bwe);return Awe(()=>r.watch(t.editor),[t.editor,r]),T.useDebugValue(n),n}var Fwe=!1,MI=typeof window>"u",qwe=MI||!!(typeof window<"u"&&window.next),Lwe=class Pie{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?MI||qwe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new Nxe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Pie.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Bwe(t={},e=[]){const r=T.useRef(t);r.current=t;const[n]=T.useState(()=>new Lwe(r)),i=jM.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return T.useDebugValue(i),T.useEffect(n.onRender(e)),$we({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var zwe=T.createContext({editor:null});zwe.Consumer;var Vwe=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Uwe=()=>T.useContext(Vwe);xe.forwardRef((t,e)=>{const{onDragStart:r}=Uwe(),n=t.as||"div";return u.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});xe.createContext({markViewContentRef:()=>{}});var pv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},Hwe=/^\s*>\s$/,Wwe=xi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return pv("blockquote",{...Sr(this.options.HTMLAttributes,t),children:pv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Wd({find:Hwe,type:this.type})]}}),Kwe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Gwe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Ywe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Qwe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Xwe=Gc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return pv("strong",{...Sr(this.options.HTMLAttributes,t),children:pv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Hd({find:Kwe,type:this.type}),Hd({find:Ywe,type:this.type})]},addPasteRules(){return[Rc({find:Gwe,type:this.type}),Rc({find:Qwe,type:this.type})]}}),Jwe=/(^|[^`])`([^`]+)`(?!`)$/,Zwe=/(^|[^`])`([^`]+)`(?!`)/g,eSe=Gc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Hd({find:Jwe,type:this.type})]},addPasteRules(){return[Rc({find:Zwe,type:this.type})]}}),Q1=4,tSe=/^```([a-z]+)?[\s\n]$/,rSe=/^~~~([a-z]+)?[\s\n]$/,nSe=xi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Q1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Sr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Q1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:d}=i,p=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Q1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const v=c-d;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=v){m=_;break}g+=p[_].length+1}const b=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(b.length,r);if(w===0)return!0;let x=d;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),c-x<=w&&a.setSelection(Fe.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,f=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",v=Math.min(g.length,r);return p.slice(v)}).join(`
`);return a.replaceWith(l,c,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Ge.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[II({find:tSe,type:this.type,getAttributes:t=>({language:t[1]})}),II({find:rSe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Yt({key:new Ir("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Fe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),iSe=xi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),sSe=xi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Sr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),oSe=xi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Sr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>II({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),aSe=xi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Sr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!kxe(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return uie(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Fe.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Pe.create(o.doc,l.pos)):o.setSelection(Fe.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(c,h),o.setSelection(Fe.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Cxe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),lSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,cSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,uSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,dSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,hSe=Gc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Sr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Hd({find:lSe,type:this.type}),Hd({find:uSe,type:this.type})]},addPasteRules(){return[Rc({find:cSe,type:this.type}),Rc({find:dSe,type:this.type})]}});const fSe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",pSe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",AI="numeric",DI="ascii",$I="alpha",Rf="asciinumeric",gf="alphanumeric",FI="domain",Iie="emoji",mSe="scheme",gSe="slashscheme",X1="whitespace";function ySe(t,e){return t in e||(e[t]=[]),e[t]}function zl(t,e,r){e[AI]&&(e[Rf]=!0,e[gf]=!0),e[DI]&&(e[Rf]=!0,e[$I]=!0),e[Rf]&&(e[gf]=!0),e[$I]&&(e[gf]=!0),e[gf]&&(e[FI]=!0),e[Iie]&&(e[FI]=!0);for(const n in e){const i=ySe(n,r);i.indexOf(t)<0&&i.push(t)}}function vSe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Hn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Hn.groups={};Hn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Hn.groups;let i;return e&&e.j?i=e:(i=new Hn(e),r&&n&&zl(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Hn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Hn,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Hn,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(vSe(o.t,n),r);zl(s,l,n)}else r&&zl(s,r,n);o.t=s}return i.j[t]=o,o}};const Ke=(t,e,r,n,i)=>t.ta(e,r,n,i),Zt=(t,e,r,n,i)=>t.tr(e,r,n,i),bq=(t,e,r,n,i)=>t.ts(e,r,n,i),te=(t,e,r,n,i)=>t.tt(e,r,n,i),ro="WORD",qI="UWORD",Rie="ASCIINUMERICAL",Mie="ALPHANUMERICAL",_p="LOCALHOST",LI="TLD",BI="UTLD",cy="SCHEME",ju="SLASH_SCHEME",sA="NUM",zI="WS",oA="NL",Mf="OPENBRACE",Af="CLOSEBRACE",mv="OPENBRACKET",gv="CLOSEBRACKET",yv="OPENPAREN",vv="CLOSEPAREN",bv="OPENANGLEBRACKET",xv="CLOSEANGLEBRACKET",wv="FULLWIDTHLEFTPAREN",Sv="FULLWIDTHRIGHTPAREN",_v="LEFTCORNERBRACKET",Ev="RIGHTCORNERBRACKET",Nv="LEFTWHITECORNERBRACKET",Cv="RIGHTWHITECORNERBRACKET",kv="FULLWIDTHLESSTHAN",Tv="FULLWIDTHGREATERTHAN",Ov="AMPERSAND",jv="APOSTROPHE",Pv="ASTERISK",ia="AT",Iv="BACKSLASH",Rv="BACKTICK",Mv="CARET",da="COLON",aA="COMMA",Av="DOLLAR",Es="DOT",Dv="EQUALS",lA="EXCLAMATION",ki="HYPHEN",Df="PERCENT",$v="PIPE",Fv="PLUS",qv="POUND",$f="QUERY",cA="QUOTE",Aie="FULLWIDTHMIDDLEDOT",uA="SEMI",Ns="SLASH",Ff="TILDE",Lv="UNDERSCORE",Die="EMOJI",Bv="SYM";var $ie=Object.freeze({__proto__:null,ALPHANUMERICAL:Mie,AMPERSAND:Ov,APOSTROPHE:jv,ASCIINUMERICAL:Rie,ASTERISK:Pv,AT:ia,BACKSLASH:Iv,BACKTICK:Rv,CARET:Mv,CLOSEANGLEBRACKET:xv,CLOSEBRACE:Af,CLOSEBRACKET:gv,CLOSEPAREN:vv,COLON:da,COMMA:aA,DOLLAR:Av,DOT:Es,EMOJI:Die,EQUALS:Dv,EXCLAMATION:lA,FULLWIDTHGREATERTHAN:Tv,FULLWIDTHLEFTPAREN:wv,FULLWIDTHLESSTHAN:kv,FULLWIDTHMIDDLEDOT:Aie,FULLWIDTHRIGHTPAREN:Sv,HYPHEN:ki,LEFTCORNERBRACKET:_v,LEFTWHITECORNERBRACKET:Nv,LOCALHOST:_p,NL:oA,NUM:sA,OPENANGLEBRACKET:bv,OPENBRACE:Mf,OPENBRACKET:mv,OPENPAREN:yv,PERCENT:Df,PIPE:$v,PLUS:Fv,POUND:qv,QUERY:$f,QUOTE:cA,RIGHTCORNERBRACKET:Ev,RIGHTWHITECORNERBRACKET:Cv,SCHEME:cy,SEMI:uA,SLASH:Ns,SLASH_SCHEME:ju,SYM:Bv,TILDE:Ff,TLD:LI,UNDERSCORE:Lv,UTLD:BI,UWORD:qI,WORD:ro,WS:zI});const Zs=/[a-z]/,rf=new RegExp("\\p{L}","u"),J1=new RegExp("\\p{Emoji}","u"),eo=/\d/,Z1=/\s/,xq="\r",ex=`
`,bSe="",xSe="",tx="";let jg=null,Pg=null;function wSe(t=[]){const e={};Hn.groups=e;const r=new Hn;jg==null&&(jg=wq(fSe)),Pg==null&&(Pg=wq(pSe)),te(r,"'",jv),te(r,"{",Mf),te(r,"}",Af),te(r,"[",mv),te(r,"]",gv),te(r,"(",yv),te(r,")",vv),te(r,"<",bv),te(r,">",xv),te(r,"",wv),te(r,"",Sv),te(r,"",_v),te(r,"",Ev),te(r,"",Nv),te(r,"",Cv),te(r,"",kv),te(r,"",Tv),te(r,"&",Ov),te(r,"*",Pv),te(r,"@",ia),te(r,"`",Rv),te(r,"^",Mv),te(r,":",da),te(r,",",aA),te(r,"$",Av),te(r,".",Es),te(r,"=",Dv),te(r,"!",lA),te(r,"-",ki),te(r,"%",Df),te(r,"|",$v),te(r,"+",Fv),te(r,"#",qv),te(r,"?",$f),te(r,'"',cA),te(r,"/",Ns),te(r,";",uA),te(r,"~",Ff),te(r,"_",Lv),te(r,"\\",Iv),te(r,"",Aie);const n=Zt(r,eo,sA,{[AI]:!0});Zt(n,eo,n);const i=Zt(n,Zs,Rie,{[Rf]:!0}),s=Zt(n,rf,Mie,{[gf]:!0}),o=Zt(r,Zs,ro,{[DI]:!0});Zt(o,eo,i),Zt(o,Zs,o),Zt(i,eo,i),Zt(i,Zs,i);const a=Zt(r,rf,qI,{[$I]:!0});Zt(a,Zs),Zt(a,eo,s),Zt(a,rf,a),Zt(s,eo,s),Zt(s,Zs),Zt(s,rf,s);const l=te(r,ex,oA,{[X1]:!0}),c=te(r,xq,zI,{[X1]:!0}),d=Zt(r,Z1,zI,{[X1]:!0});te(r,tx,d),te(c,ex,l),te(c,tx,d),Zt(c,Z1,d),te(d,xq),te(d,ex),Zt(d,Z1,d),te(d,tx,d);const h=Zt(r,J1,Die,{[Iie]:!0});te(h,"#"),Zt(h,J1,h),te(h,bSe,h);const f=te(h,xSe);te(f,"#"),Zt(f,J1,h);const p=[[Zs,o],[eo,i]],m=[[Zs,null],[rf,a],[eo,s]];for(let g=0;g<jg.length;g++)Yo(r,jg[g],LI,ro,p);for(let g=0;g<Pg.length;g++)Yo(r,Pg[g],BI,qI,m);zl(LI,{tld:!0,ascii:!0},e),zl(BI,{utld:!0,alpha:!0},e),Yo(r,"file",cy,ro,p),Yo(r,"mailto",cy,ro,p),Yo(r,"http",ju,ro,p),Yo(r,"https",ju,ro,p),Yo(r,"ftp",ju,ro,p),Yo(r,"ftps",ju,ro,p),zl(cy,{scheme:!0,ascii:!0},e),zl(ju,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],b=t[g][1]?{[mSe]:!0}:{[gSe]:!0};v.indexOf("-")>=0?b[FI]=!0:Zs.test(v)?eo.test(v)?b[Rf]=!0:b[DI]=!0:b[AI]=!0,bq(r,v,v,b)}return bq(r,"localhost",_p,{ascii:!0}),r.jd=new Hn(Bv),{start:r,tokens:Object.assign({groups:e},$ie)}}function Fie(t,e){const r=SSe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,c=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),c+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,c-=h,i.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function SSe(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Yo(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Hn(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Hn(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function wq(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const Ep={defaultProtocol:"http",events:null,format:Sq,formatHref:Sq,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function dA(t,e=null){let r=Object.assign({},Ep);t&&(r=Object.assign(r,t instanceof dA?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}dA.prototype={o:Ep,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:Ep[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Sq(t){return t}function qie(t,e){this.t="token",this.v=t,this.tk=e}qie.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Ep.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),c=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function Q0(t,e){class r extends qie{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const _q=Q0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Eq=Q0("text"),_Se=Q0("nl"),Ig=Q0("url",{isLink:!0,toHref(t=Ep.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==_p&&t[1].t===da}}),Ci=t=>new Hn(t);function ESe({groups:t}){const e=t.domain.concat([Ov,Pv,ia,Iv,Rv,Mv,Av,Dv,ki,sA,Df,$v,Fv,qv,Ns,Bv,Ff,Lv]),r=[jv,da,aA,Es,lA,Df,$f,cA,uA,bv,xv,Mf,Af,gv,mv,yv,vv,wv,Sv,_v,Ev,Nv,Cv,kv,Tv],n=[Ov,jv,Pv,Iv,Rv,Mv,Av,Dv,ki,Mf,Af,Df,$v,Fv,qv,$f,Ns,Bv,Ff,Lv],i=Ci(),s=te(i,Ff);Ke(s,n,s),Ke(s,t.domain,s);const o=Ci(),a=Ci(),l=Ci();Ke(i,t.domain,o),Ke(i,t.scheme,a),Ke(i,t.slashscheme,l),Ke(o,n,s),Ke(o,t.domain,o);const c=te(o,ia);te(s,ia,c),te(a,ia,c),te(l,ia,c);const d=te(s,Es);Ke(d,n,s),Ke(d,t.domain,s);const h=Ci();Ke(c,t.domain,h),Ke(h,t.domain,h);const f=te(h,Es);Ke(f,t.domain,h);const p=Ci(_q);Ke(f,t.tld,p),Ke(f,t.utld,p),te(c,_p,p);const m=te(h,ki);te(m,ki,m),Ke(m,t.domain,h),Ke(p,t.domain,h),te(p,Es,f),te(p,ki,m);const g=te(p,da);Ke(g,t.numeric,_q);const v=te(o,ki),y=te(o,Es);te(v,ki,v),Ke(v,t.domain,o),Ke(y,n,s),Ke(y,t.domain,o);const b=Ci(Ig);Ke(y,t.tld,b),Ke(y,t.utld,b),Ke(b,t.domain,o),Ke(b,n,s),te(b,Es,y),te(b,ki,v),te(b,ia,c);const w=te(b,da),x=Ci(Ig);Ke(w,t.numeric,x);const S=Ci(Ig),_=Ci();Ke(S,e,S),Ke(S,r,_),Ke(_,e,S),Ke(_,r,_),te(b,Ns,S),te(x,Ns,S);const N=te(a,da),E=te(l,da),C=te(E,Ns),k=te(C,Ns);Ke(a,t.domain,o),te(a,Es,y),te(a,ki,v),Ke(l,t.domain,o),te(l,Es,y),te(l,ki,v),Ke(N,t.domain,S),te(N,Ns,S),te(N,$f,S),Ke(k,t.domain,S),Ke(k,e,S),te(k,Ns,S);const j=[[Mf,Af],[mv,gv],[yv,vv],[bv,xv],[wv,Sv],[_v,Ev],[Nv,Cv],[kv,Tv]];for(let P=0;P<j.length;P++){const[O,A]=j[P],q=te(S,O);te(_,O,q),te(q,A,S);const D=Ci(Ig);Ke(q,e,D);const B=Ci();Ke(q,r),Ke(D,e,D),Ke(D,r,B),Ke(B,e,D),Ke(B,r,B),te(D,A,S),te(B,A,S)}return te(i,_p,b),te(i,oA,_Se),{start:i,tokens:$ie}}function NSe(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,c=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(c=l||a.go(r[i].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(rx(Eq,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(rx(p,e,m))}}return o.length>0&&s.push(rx(Eq,e,o)),s}function rx(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const CSe=typeof console<"u"&&console&&console.warn||(()=>{}),kSe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",At={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function TSe(){return Hn.groups={},At.scanner=null,At.parser=null,At.tokenQueue=[],At.pluginQueue=[],At.customSchemes=[],At.initialized=!1,At}function Nq(t,e=!1){if(At.initialized&&CSe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${kSe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);At.customSchemes.push([t,e])}function OSe(){At.scanner=wSe(At.customSchemes);for(let t=0;t<At.tokenQueue.length;t++)At.tokenQueue[t][1]({scanner:At.scanner});At.parser=ESe(At.scanner.tokens);for(let t=0;t<At.pluginQueue.length;t++)At.pluginQueue[t][1]({scanner:At.scanner,parser:At.parser});return At.initialized=!0,At}function hA(t){return At.initialized||OSe(),NSe(At.parser.start,t,Fie(At.scanner.start,t))}hA.scan=Fie;function Lie(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new dA(r),i=hA(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var fA="[\0- -\u2029]",jSe=new RegExp(fA),PSe=new RegExp(`${fA}$`),ISe=new RegExp(fA,"g");function RSe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function MSe(t){return new Yt({key:new Ir("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(c=>c.docChanged)&&!r.doc.eq(n.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=rie(r.doc,[...e]);if(cie(a).forEach(({newRange:c})=>{const d=k1e(n.doc,c,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(c.from,c.to," "," ");if(!PSe.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&f){const p=f.split(jSe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const v=hA(m).map(y=>y.toObject(t.defaultProtocol));if(!RSe(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{eA(y.from,y.to,n.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function ASe(t){return new Yt({key:new Ir("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=lie(e.state,t.type.name),c=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&c&&(window.open(c,d),o=!0)}return o}}})}function DSe(t){return new Yt({key:new Ir("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=Lie(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Cl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(ISe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Bie=Gc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Nq(t);return}Nq(t.scheme,t.optionalSlashes)})},onDestroy(){TSe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Cl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!Cl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Cl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Sr(this.options.HTMLAttributes,t),0]:["a",Sr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Cl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Cl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Rc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=Lie(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Cl(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(MSe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!Cl(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(ASe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(DSe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),$Se=Bie,FSe=Object.defineProperty,qSe=(t,e)=>{for(var r in e)FSe(t,r,{get:e[r],enumerable:!0})},LSe="listItem",Cq="textStyle",kq=/^\s*([-+*])\s$/,zie=xi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(LSe,this.editor.getAttributes(Cq)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Wd({find:kq,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wd({find:kq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Cq),editor:this.editor})),[t]}}),Vie=xi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>iA(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),BSe={};qSe(BSe,{findListItemPos:()=>lm,getNextListDepth:()=>pA,handleBackspace:()=>VI,handleDelete:()=>UI,hasListBefore:()=>Uie,hasListItemAfter:()=>zSe,hasListItemBefore:()=>Hie,listItemHasSubList:()=>Wie,nextListIsDeeper:()=>Kie,nextListIsHigher:()=>Gie});var lm=(t,e)=>{const{$from:r}=e.selection,n=wr(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},pA=(t,e)=>{const r=lm(t,e);if(!r)return!1;const[,n]=$1e(e,t,r.$pos.pos+4);return n},Uie=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},Hie=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},Wie=(t,e,r)=>{if(!r)return!1;const n=wr(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},VI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!tl(t.state,e)&&Uie(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const d=c.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!tl(t.state,e)||!B1e(t.state))return!1;const n=lm(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=Wie(e,t.state,s);return Hie(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Kie=(t,e)=>{const r=pA(t,e),n=lm(t,e);return!n||!r?!1:r>n.depth},Gie=(t,e)=>{const r=pA(t,e),n=lm(t,e);return!n||!r?!1:r<n.depth},UI=(t,e)=>{if(!tl(t.state,e)||!L1e(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:Kie(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Gie(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},zSe=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},Yie=fr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&UI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&UI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&VI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&VI(t,r,n)&&(e=!0)}),e}}}}),Tq=/^(\s*)(\d+)\.\s+(.*)$/,VSe=/^\s/;function USe(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(Tq);if(!s)break;const[,o,a,l]=s,c=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(Tq))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(VSe))f.push(p),d+=`
${p.slice(c+2)}`,h+=1;else break}e.push({indent:c,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function Qie(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);c.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=Qie(f,p,r);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=h}else s+=1}return i}function HSe(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var WSe="listItem",Oq="textStyle",jq=/^(\d+)\.\s$/,Xie=xi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Sr(this.options.HTMLAttributes,r),0]:["ol",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?HSe(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=USe(i);if(s.length===0)return;const a=Qie(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(WSe,this.editor.getAttributes(Oq)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Wd({find:jq,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wd({find:jq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Oq)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),KSe=/^\s*(\[([( |x])?\])\s$/,GSe=xi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Sr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return iA(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,c(h);const f=n.extensionManager.attributes,p=Sp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(v=>{m.has(v)||(v in g?i.setAttribute(v,g[v]):i.removeAttribute(v))}),Object.entries(p).forEach(([v,y])=>{y==null?v in g?i.setAttribute(v,g[v]):i.removeAttribute(v):i.setAttribute(v,y)}),d=m,!0}}}},addInputRules(){return[Wd({find:KSe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),YSe=xi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Sr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=RI(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=RI(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});fr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(zie.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Vie.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Yie.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(Xie.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(GSe.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(YSe.configure(this.options.taskList)),t}});var QSe=xi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Sr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),XSe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,JSe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,ZSe=Gc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Sr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Hd({find:XSe,type:this.type})]},addPasteRules(){return[Rc({find:JSe,type:this.type})]}}),e_e=xi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),t_e=Gc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Sr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function r_e(t={}){return new Yt({view(e){return new n_e(e,t)}})}class n_e{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;n={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;c=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-c)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Kre(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class or extends Ge{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return or.valid(n)?new or(n):Ge.near(n)}content(){return me.empty}eq(e){return e instanceof or&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new or(e.resolve(r.pos))}getBookmark(){return new mA(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!i_e(e)||!s_e(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&or.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(or.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Pe.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(or.valid(a))return a}return null}}}or.prototype.visible=!1;or.findFrom=or.findGapCursorFrom;Ge.jsonID("gapcursor",or);class mA{constructor(e){this.pos=e}map(e){return new mA(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return or.valid(r)?new or(r):Ge.near(r)}}function Jie(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function i_e(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Jie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function s_e(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Jie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function o_e(){return new Yt({props:{decorations:u_e,createSelectionBetween(t,e,r){return e.pos==r.pos&&or.valid(r)?new or(r):null},handleClick:l_e,handleKeyDown:a_e,handleDOMEvents:{beforeinput:c_e}}})}const a_e=Gne({ArrowLeft:Rg("horiz",-1),ArrowRight:Rg("horiz",1),ArrowUp:Rg("vert",-1),ArrowDown:Rg("vert",1)});function Rg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Fe){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=or.findGapCursorFrom(a,e,l);return c?(i&&i(n.tr.setSelection(new or(c))),!0):!1}}function l_e(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!or.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&Pe.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new or(n))),!0)}function c_e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof or))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=Q.empty;for(let o=n.length-1;o>=0;o--)i=Q.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new me(i,0,0));return s.setSelection(Fe.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function u_e(t){if(!(t.selection instanceof or))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ht.create(t.doc,[jn.widget(t.selection.head,e,{key:"gapcursor"})])}var zv=200,Vr=function(){};Vr.prototype.append=function(e){return e.length?(e=Vr.from(e),!this.length&&e||e.length<zv&&this.leafAppend(e)||this.length<zv&&e.leafPrepend(this)||this.appendInner(e)):this};Vr.prototype.prepend=function(e){return e.length?Vr.from(e).append(this):this};Vr.prototype.appendInner=function(e){return new d_e(this,e)};Vr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Vr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Vr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Vr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Vr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};Vr.from=function(e){return e instanceof Vr?e:e&&e.length?new Zie(e):Vr.empty};var Zie=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=zv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=zv)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Vr);Vr.empty=new Zie([]);var d_e=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Vr);const h_e=500;class us{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new Cs(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Cs(m,void 0,void 0,c.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new us(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Cs(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>p_e&&(a=f_e(a,c),o-=c),new us(a.append(s),o)}remapping(e,r){let n=new gp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new us(this.items.append(e.map(r=>new Cs(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),v=f.selection&&f.selection.map(s.slice(l+1,p));v&&a++,n.push(new Cs(m,g,v))}else n.push(new Cs(m))},i);let c=[];for(let f=r;f<o;f++)c.push(new Cs(s.maps[f]));let d=this.items.slice(0,i).append(c).append(n),h=new us(d,a);return h.emptyItemCount()>h_e&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new Cs(c.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new us(Vr.from(i.reverse()),s)}}us.empty=new us(Vr.empty,0);function f_e(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Cs{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Cs(r.getMap().invert(),r,this.selection)}}}class sa{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const p_e=20;function m_e(t,e,r,n){let i=r.getMeta(cc),s;if(i)return i.historyState;r.getMeta(v_e)&&(t=new sa(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(cc))return o.getMeta(cc).redo?new sa(t.done.addTransform(r,void 0,n,uy(e)),t.undone,Pq(r.mapping.maps),t.prevTime,t.prevComposition):new sa(t.done,t.undone.addTransform(r,void 0,n,uy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!g_e(r,t.prevRanges)),c=o?nx(t.prevRanges,r.mapping):Pq(r.mapping.maps);return new sa(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,uy(e)),us.empty,c,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new sa(t.done.rebased(r,s),t.undone.rebased(r,s),nx(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new sa(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),nx(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function g_e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function Pq(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function nx(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function y_e(t,e,r){let n=uy(e),i=cc.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new sa(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(cc,{redo:r,historyState:l})}let ix=!1,Iq=null;function uy(t){let e=t.plugins;if(Iq!=e){ix=!1,Iq=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){ix=!0;break}}return ix}const cc=new Ir("history"),v_e=new Ir("closeHistory");function b_e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Yt({key:cc,state:{init(){return new sa(us.empty,us.empty,null,0,-1)},apply(e,r,n){return m_e(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?tse:n=="historyRedo"?rse:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function ese(t,e){return(r,n)=>{let i=cc.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=y_e(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const tse=ese(!1,!0),rse=ese(!0,!0);fr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Yt({key:new Ir("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>n)}})]}});var x_e=fr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[r_e(this.options)]}});fr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Yt({key:new Ir("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Ht.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(jn.node(c,c+l.nodeSize,{class:this.options.className}))}),Ht.create(t,s)}}})]}});var w_e=fr.create({name:"gapCursor",addProseMirrorPlugins(){return[o_e()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=mt(Oe(t,"allowGapCursor",r)))!=null?e:null}}}),S_e=fr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Yt({key:new Ir("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,c=!o.isLeaf&&W0(o);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=jn.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Ht.create(t,i)}}})]}});fr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Yt({key:new Ir("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||uie(r.selection)||t.view.dragging?null:Ht.create(r.doc,[jn.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function Rq({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var __e=fr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Ir(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Yt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,d=e.getState(o),h=a.content.size,f=c.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!Rq({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!Rq({node:o,types:n})}}})]}}),E_e=fr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>tse(t,e),redo:()=>({state:t,dispatch:e})=>rse(t,e)}},addProseMirrorPlugins(){return[b_e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),N_e=fr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(Xwe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Wwe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(zie.configure(this.options.bulletList)),this.options.code!==!1&&i.push(eSe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(nSe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(iSe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(x_e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(w_e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(sSe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(oSe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(E_e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(aSe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(hSe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Vie.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Yie.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(Bie.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(Xie.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(QSe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(ZSe.configure(this.options.strike)),this.options.text!==!1&&i.push(e_e.configure(this.options.text)),this.options.underline!==!1&&i.push(t_e.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(__e.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),C_e=N_e,k_e=S_e;const Qo=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>u.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),T_e=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return u.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[u.jsx(Qo,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:u.jsx(_pe,{className:"w-4 h-4"})}),u.jsx(Qo,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:u.jsx(jpe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Qo,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:u.jsx(Ipe,{className:"w-4 h-4"})}),u.jsx(Qo,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:u.jsx(Ppe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Qo,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:u.jsx(bM,{className:"w-4 h-4"})}),t.isActive("link")&&u.jsx(Qo,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:u.jsx(Vpe,{className:"w-4 h-4"})}),u.jsx("div",{className:"flex-1"}),u.jsx(Qo,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:u.jsx(zpe,{className:"w-4 h-4"})}),u.jsx(Qo,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:u.jsx($pe,{className:"w-4 h-4"})})]})};function nse({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=Bwe({extensions:[C_e.configure({heading:!1,codeBlock:!1,blockquote:!1}),k_e.configure({placeholder:r}),$Se.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return u.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[u.jsx(T_e,{editor:o}),u.jsx(Mwe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),u.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function Vv(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const sx=[{id:"call",label:"Phone call",icon:wM},{id:"email",label:"Email",icon:xM},{id:"chat",label:"Chat",icon:O0},{id:"meeting",label:"Meeting",icon:qs},{id:"coffee",label:"Coffee",icon:Pte},{id:"lunch",label:"Lunch",icon:Lte},{id:"note",label:"Other",icon:T0}];function gA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=T.useState("call"),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,v]=T.useState([]),[y,b]=T.useState(!1),[w,x]=T.useState(""),{data:S}=Wc(),_=!!o;if(T.useEffect(()=>{if(t){const D=new Date,B=D.toISOString().split("T")[0],F=D.toTimeString().slice(0,5);o?(d(o.activity_date||B),f(o.activity_time||""),m(o.content||""),v(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||B),f(s.activity_time||F),m(s.content||""),v(s.participants||[]),l(s.activity_type||"note")):(d(B),f(F),m(""),v([]),l("call"))}},[t,s,o]),!t)return null;const N=(S||[]).filter(D=>D.id.toString()!==(i==null?void 0:i.toString())),E=N.filter(D=>{var B;return(B=D.name)==null?void 0:B.toLowerCase().includes(w.toLowerCase())}),C=D=>{D.preventDefault(),!Vv(p)&&(r({activity_type:a,activity_date:c||null,activity_time:h||null,content:p,participants:g}),m(""),v([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},k=()=>{m(""),v([]),d(""),f(""),b(!1),x(""),e()},j=D=>{v(B=>B.includes(D)?B.filter(F=>F!==D):[...B,D])},P=D=>{v(B=>B.filter(F=>F!==D))},O=()=>N.filter(D=>g.includes(D.id)),A=D=>{if(!D)return"";try{return new Date(D).toISOString().split("T")[0]}catch{return""}};return(sx.find(D=>D.id===a)||sx[0]).icon,u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[u.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),u.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:C,className:"p-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-4 md:col-span-1",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:sx.map(D=>{const B=D.icon,F=a===D.id;return u.jsxs("button",{type:"button",onClick:()=>l(D.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${F?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[u.jsx(B,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs",children:D.label})]},D.id)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),u.jsx("input",{id:"activity-date",type:"date",value:A(c),onChange:D=>d(D.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),u.jsx("input",{id:"activity-time",type:"time",value:h,onChange:D=>f(D.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),O().length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:O().map(D=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[D.name,u.jsx("button",{type:"button",onClick:()=>P(D.id),className:"hover:text-primary-900",disabled:n,children:u.jsx(Ft,{className:"w-3 h-3"})})]},D.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>b(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&u.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[u.jsx("div",{className:"p-2 border-b",children:u.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:D=>x(D.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),u.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0?u.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):E.map(D=>{var F;const B=g.includes(D.id);return u.jsxs("button",{type:"button",onClick:()=>j(D.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${B?"bg-primary-50":""}`,children:[u.jsx("input",{type:"checkbox",checked:B,onChange:()=>{},className:"mr-1"}),D.thumbnail?u.jsx("img",{src:D.thumbnail,alt:D.name,className:"w-6 h-6 rounded-full"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((F=D.first_name)==null?void 0:F[0])||"?"})}),u.jsx("span",{children:D.name})]},D.id)})})]})]})]})]}),u.jsxs("div",{className:"flex flex-col md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("div",{className:"flex-1",children:u.jsx(nse,{value:p,onChange:m,placeholder:"What happened? Add your call notes, chat summary, meeting notes...",disabled:n,minHeight:"280px"})})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:[u.jsx("button",{type:"button",onClick:k,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Vv(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function Xo({title:t,value:e,icon:r,href:n}){return u.jsx(He,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),u.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function ox({person:t,hideStar:e=!1}){var r,n;return u.jsxs(He,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):u.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&u.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&u.jsx(Fd,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function O_e({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),u.jsx("p",{className:"text-xs text-gray-500",children:kn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&u.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(c=>{var d;return c.thumbnail?u.jsx("img",{src:c.thumbnail,alt:c.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},c.id):u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:u.jsx("span",{className:"text-sm",children:(d=c.name)==null?void 0:d[0]})},c.id)})})]});return i&&n?u.jsx(He,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):u.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function j_e({todo:t,onToggle:e}){var n;const r=im(t);return u.jsxs(He,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(Fs,{className:"w-5 h-5 text-primary-600"}):u.jsx($d,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),u.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&u.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[u.jsx("div",{children:kn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&u.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function P_e(){return u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:u.jsx($te,{className:"w-12 h-12 text-primary-600"})})}),u.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",kc,"!"]}),u.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsxs(He,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[u.jsx(sr,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),u.jsxs(He,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(sr,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function I_e(){var k,j,P;const{data:t,isLoading:e,error:r}=Gpe(),{data:n}=zte(!1),i=Vte(),s=SM(),[o,a]=T.useState(null),[l,c]=T.useState(!1),[d,h]=T.useState(!1),[f,p]=T.useState(null),m=O=>{if(!O.is_completed){a(O),c(!0);return}i.mutate({todoId:O.id,data:{content:O.content,due_date:O.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),c(!1),a(null))},v=()=>{if(!o)return;const O=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:O,activity_type:"note",participants:[]}),c(!1),h(!0)},y=async O=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:O}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch(A){console.error("Failed to create activity:",A),alert("Failed to create activity. Please try again.")}};if(e)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const O=((k=r==null?void 0:r.response)==null?void 0:k.status)>=500||!(r!=null&&r.response);return u.jsx("div",{className:"card p-8 text-center",children:u.jsx("div",{className:"text-red-600 mb-2",children:O?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),u.jsx("p",{className:"text-sm text-gray-600",children:((P=(j=r==null?void 0:r.response)==null?void 0:j.data)==null?void 0:P.message)||"An error occurred while loading your data."})]})})})}const{stats:b,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:_}=t||{};if(((b==null?void 0:b.total_people)||0)+((b==null?void 0:b.total_companies)||0)+((b==null?void 0:b.total_dates)||0)===0)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Xo,{title:"Total people",value:0,icon:qs,href:"/people"}),u.jsx(Xo,{title:"Organizations",value:0,icon:Pr,href:"/companies"}),u.jsx(Xo,{title:"Events",value:0,icon:yo,href:"/dates"}),u.jsx(Xo,{title:"Open todos",value:0,icon:Fs,href:"/todos"})]}),u.jsx(P_e,{})]});const C=(n==null?void 0:n.slice(0,5))||[];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Xo,{title:"Total people",value:(b==null?void 0:b.total_people)||0,icon:qs,href:"/people"}),u.jsx(Xo,{title:"Organizations",value:(b==null?void 0:b.total_companies)||0,icon:Pr,href:"/companies"}),u.jsx(Xo,{title:"Events",value:(b==null?void 0:b.total_dates)||0,icon:yo,href:"/dates"}),u.jsx(Xo,{title:"Open todos",value:(b==null?void 0:b.open_todos_count)||0,icon:Fs,href:"/todos"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(yo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),u.jsxs(He,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",u.jsx(v1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(O=>u.jsx(O_e,{reminder:O},O.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),u.jsxs(He,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",u.jsx(v1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:C.length>0?C.map(O=>u.jsx(j_e,{todo:O,onToggle:m},O.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Fd,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(O=>u.jsx(ox,{person:O,hideStar:!0},O.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(O0,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(_==null?void 0:_.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(O=>u.jsx(ox,{person:O},O.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(qs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),u.jsxs(He,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",u.jsx(v1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(O=>u.jsx(ox,{person:O},O.id)):u.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",u.jsx(He,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),u.jsx(OM,{isOpen:l,onClose:()=>{c(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:v}),u.jsx(gA,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function Mq(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function R_e({person:t,companyName:e,isDeceased:r}){var n,i;return u.jsx(He,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&u.jsx(Fd,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>u.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function M_e(){const[t,e]=T.useState(!1),[r,n]=T.useState(!1),[i,s]=T.useState([]),[o,a]=T.useState(""),[l,c]=T.useState(""),[d,h]=T.useState("first_name"),[f,p]=T.useState("asc"),[m,g]=T.useState(!1),[v,y]=T.useState(!1),b=T.useRef(null),w=T.useRef(null),x=Wi(),S=bt(),{data:_,isLoading:N,error:E}=Wc(),C=nt({mutationFn:async L=>{const Z=[];L.email&&Z.push({contact_type:"email",contact_value:L.email,contact_label:"Email"}),L.phone&&Z.push({contact_type:L.phone_type||"mobile",contact_value:L.phone,contact_label:L.phone_type==="mobile"?"Mobile":"Phone"});const ce={title:`${L.first_name} ${L.last_name}`.trim(),status:"publish",acf:{first_name:L.first_name,last_name:L.last_name,nickname:L.nickname,gender:L.gender||null,how_we_met:L.how_we_met,is_favorite:L.is_favorite,contact_info:Z}},Be=await Le.createPerson(ce),Te=Be.data.id;if(L.email)try{await Ae.sideloadGravatar(Te,L.email)}catch(tt){console.error("Failed to load Gravatar:",tt)}if(L.birthday&&L.birthdayType)try{await Le.createDate({title:`${L.first_name}'s Birthday`,status:"publish",date_type:[L.birthdayType.id],acf:{date_value:L.birthday,is_recurring:!0,related_people:[Te]}})}catch(tt){console.error("Failed to create birthday:",tt)}return Be.data},onSuccess:L=>{S.invalidateQueries({queryKey:["people"]}),S.invalidateQueries({queryKey:["dashboard"]}),S.invalidateQueries({queryKey:["reminders"]}),g(!1),x(`/people/${L.id}`)}}),k=async L=>{y(!0);try{await C.mutateAsync(L)}finally{y(!1)}},{data:j}=ht({queryKey:["person-labels"],queryFn:async()=>(await Le.getPersonLabels()).data}),P=(j==null?void 0:j.map(L=>L.name))||[],O=T.useMemo(()=>{if(!_)return[];const L=_.map(Z=>Z.birth_year).filter(Z=>Z!=null);return[...new Set(L)].sort((Z,ce)=>ce-Z)},[_]);T.useEffect(()=>{const L=Z=>{w.current&&!w.current.contains(Z.target)&&b.current&&!b.current.contains(Z.target)&&e(!1)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[]);const A=T.useMemo(()=>{if(!_)return[];let L=[..._];if(r&&(L=L.filter(Z=>Z.is_favorite)),i.length>0&&(L=L.filter(Z=>{const ce=Z.labels||[];return i.some(Be=>ce.includes(Be))})),o){const Z=parseInt(o,10);L=L.filter(ce=>ce.birth_year===Z)}if(l){const Z=new Date;let ce;switch(l){case"7":ce=new Date(Z.setDate(Z.getDate()-7));break;case"30":ce=new Date(Z.setDate(Z.getDate()-30));break;case"90":ce=new Date(Z.setDate(Z.getDate()-90));break;case"365":ce=new Date(Z.setDate(Z.getDate()-365));break;default:ce=null}ce&&(L=L.filter(Be=>Be.modified?new Date(Be.modified)>=ce:!1))}return L.sort((Z,ce)=>{var pt,Qr,kr,Jt,ee,Ne,We,lt;let Be,Te;if(d==="modified"){Be=Z.modified?new Date(Z.modified).getTime():0,Te=ce.modified?new Date(ce.modified).getTime():0;const zt=Be-Te;return f==="asc"?zt:-zt}if(d==="first_name"?(Be=(((pt=Z.acf)==null?void 0:pt.first_name)||Z.first_name||"").toLowerCase(),Te=(((Qr=ce.acf)==null?void 0:Qr.first_name)||ce.first_name||"").toLowerCase()):(Be=(((kr=Z.acf)==null?void 0:kr.last_name)||Z.last_name||"").toLowerCase(),Te=(((Jt=ce.acf)==null?void 0:Jt.last_name)||ce.last_name||"").toLowerCase()),Be===Te){const zt=d==="first_name"?(((ee=Z.acf)==null?void 0:ee.last_name)||Z.last_name||"").toLowerCase():(((Ne=Z.acf)==null?void 0:Ne.first_name)||Z.first_name||"").toLowerCase(),Ie=d==="first_name"?(((We=ce.acf)==null?void 0:We.last_name)||ce.last_name||"").toLowerCase():(((lt=ce.acf)==null?void 0:lt.first_name)||ce.first_name||"").toLowerCase(),Ze=zt.localeCompare(Ie);return f==="asc"?Ze:-Ze}const tt=Be.localeCompare(Te);return f==="asc"?tt:-tt})},[_,r,i,o,l,d,f]),q=r||i.length>0||o||l,D=L=>{s(Z=>Z.includes(L)?Z.filter(ce=>ce!==L):[...Z,L])},B=()=>{n(!1),s([]),a(""),c("")},F=T.useMemo(()=>{if(!A)return[];const L=A.map(Z=>Mq(Z)).filter(Boolean);return[...new Set(L)]},[A]),{data:K}=ht({queryKey:["companies","batch",F.sort().join(",")],queryFn:async()=>F.length===0?[]:(await Le.getCompanies({per_page:100,include:F.join(",")})).data,enabled:F.length>0}),X=T.useMemo(()=>{const L={};return K&&K.forEach(Z=>{L[Z.id]=rr(Z)}),L},[K]),G=T.useMemo(()=>{const L={};return A.forEach(Z=>{const ce=Mq(Z);ce&&X[ce]&&(L[Z.id]=X[ce])}),L},[A,X]);return u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[u.jsxs("select",{value:d,onChange:L=>h(L.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[u.jsx("option",{value:"first_name",children:"First name"}),u.jsx("option",{value:"last_name",children:"Last name"}),u.jsx("option",{value:"modified",children:"Last modified"})]}),u.jsx("div",{className:"h-4 w-px bg-gray-300"}),u.jsx("button",{onClick:()=>p(f==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${f==="asc"?"descending":"ascending"}`,children:f==="asc"?u.jsx(wpe,{className:"w-4 h-4 text-gray-600"}):u.jsx(xpe,{className:"w-4 h-4 text-gray-600"})})]}),u.jsxs("div",{className:"relative",ref:b,children:[u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${q?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[u.jsx(aI,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Filter"}),q&&u.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&u.jsx("div",{ref:w,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:L=>n(L.target.checked),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&u.jsx(zF,{className:"w-3 h-3 text-white"})}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Fd,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),u.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),P.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:P.map(L=>u.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:i.includes(L),onChange:()=>D(L),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(L)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(L)&&u.jsx(zF,{className:"w-3 h-3 text-white"})}),u.jsx("span",{className:"text-sm text-gray-700",children:L})]},L))})]}),O.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),u.jsxs("select",{value:o,onChange:L=>a(L.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"All years"}),O.map(L=>u.jsx("option",{value:L,children:L},L))]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),u.jsxs("select",{value:l,onChange:L=>c(L.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"Any time"}),u.jsx("option",{value:"7",children:"Last 7 days"}),u.jsx("option",{value:"30",children:"Last 30 days"}),u.jsx("option",{value:"90",children:"Last 90 days"}),u.jsx("option",{value:"365",children:"Last year"})]})]}),q&&u.jsx("button",{onClick:B,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),q&&u.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[u.jsx(Fd,{className:"w-3 h-3"}),"Favorites",u.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:u.jsx(Ft,{className:"w-3 h-3"})})]}),i.map(L=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[L,u.jsx("button",{onClick:()=>D(L),className:"hover:text-gray-600",children:u.jsx(Ft,{className:"w-3 h-3"})})]},L)),o&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,u.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:u.jsx(Ft,{className:"w-3 h-3"})})]}),l&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",u.jsx("button",{onClick:()=>c(""),className:"hover:text-gray-600",children:u.jsx(Ft,{className:"w-3 h-3"})})]})]}),u.jsxs("button",{onClick:()=>g(!0),className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),N&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),E&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!N&&!E&&(_==null?void 0:_.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(sr,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),u.jsxs("button",{onClick:()=>g(!0),className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!N&&!E&&(A==null?void 0:A.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(L=>u.jsx(R_e,{person:L,companyName:G[L.id],isDeceased:L.is_deceased},L.id))}),!N&&!E&&(_==null?void 0:_.length)>0&&(A==null?void 0:A.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(aI,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),u.jsx("button",{onClick:B,className:"btn-secondary",children:"Clear filters"})]}),u.jsx(kM,{isOpen:m,onClose:()=>g(!1),onSubmit:k,isLoading:v})]})}const A_e="#0285FF",D_e=T.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=A_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),$_e="#0866FF",F_e=T.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=$_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),q_e="#FF0069",L_e=T.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=q_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),B_e="#4A154B",z_e=T.forwardRef(function({title:e="Slack",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=B_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})]})}),V_e="#000000",U_e=T.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=V_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),H_e="#000000",W_e=T.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=H_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),K_e={Phone:wM,Mail:xM,Users:qs,Coffee:Pte,Utensils:Lte,FileText:T0,Circle:sI,MessageCircle:O0};function G_e({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=T.useMemo(()=>yye(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?iI:$d;if(f.type==="activity"&&f.activity_type){const p=bye(f.activity_type);return K_e[p]||sI}return f.type==="note"?T0:sI},c=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",v=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const b=vye(y),w=wye(f),x=m&&im(f);return u.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&u.jsx("div",{className:"absolute left-0 top-1",children:u.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),u.jsx("div",{className:`${w}`,children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&u.jsx("span",{className:"text-xs font-medium text-gray-600",children:xye(f.activity_type)}),u.jsx("span",{className:"text-xs text-gray-400",children:""}),u.jsx("span",{className:"text-xs text-gray-500",children:b})]}),u.jsxs("div",{className:"flex items-start gap-2",children:[m&&u.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?u.jsx(iI,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):u.jsx($d,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(v||g)&&((S=f.content)!=null&&S.includes("<"))?u.jsx("div",{className:`text-sm flex-1 prose prose-sm max-w-none ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):u.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&u.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const N=a(_);return N?u.jsxs(He,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[u.jsx(bM,{className:"w-3 h-3"}),N.name]},_):null})]}),m&&f.due_date&&u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",kn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&u.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&u.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),u.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(c)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?u.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function Y_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i=""}){const[s,o]=T.useState("");if(T.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=c=>{c.preventDefault(),!Vv(s)&&(r(s),o(""))},l=()=>{o(""),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),u.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),u.jsx(nse,{value:s,onChange:o,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:l,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Vv(s),children:n?"Adding...":"Add note"})]})]})]})})}function ise({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=T.useState(""),[a,l]=T.useState(""),[c,d]=T.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:c}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:f,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&u.jsx("div",{className:"mb-4",children:u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:c,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),u.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}const Q_e=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"slack",label:"Slack"},{value:"other",label:"Other"}];function X_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,contactInfo:i=[]}){const{register:s,control:o,handleSubmit:a,reset:l,formState:{errors:c}}=ll({defaultValues:{contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]}}),{fields:d,append:h,remove:f}=Ome({control:o,name:"contacts"});if(T.useEffect(()=>{t&&l({contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]})},[t,i,l]),!t)return null;const p=g=>{const v=g.contacts.filter(y=>y.contact_type&&y.contact_value);r(v)},m=()=>{h({contact_type:"",contact_label:"",contact_value:""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Edit contact details"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a(p),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[d.length===0?u.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:'No contact details yet. Click "Add contact detail" to add one.'}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-2 text-xs font-medium text-gray-500 px-1",children:[u.jsx("div",{className:"col-span-3",children:"Type"}),u.jsx("div",{className:"col-span-3",children:"Label"}),u.jsx("div",{className:"col-span-5",children:"Value"}),u.jsx("div",{className:"col-span-1"})]}),d.map((g,v)=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 p-3 md:p-2 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Type"}),u.jsxs("select",{...s(`contacts.${v}.contact_type`,{required:!0}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n,children:[u.jsx("option",{value:"",children:"Select type..."}),Q_e.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))]})]}),u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Label"}),u.jsx("input",{...s(`contacts.${v}.contact_label`),placeholder:"e.g., Work",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{className:"md:col-span-5",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Value"}),u.jsx("input",{...s(`contacts.${v}.contact_value`,{required:!0}),placeholder:"e.g., john@example.com",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsx("div",{className:"md:col-span-1 flex items-center justify-end md:justify-center",children:u.jsx("button",{type:"button",onClick:()=>f(v),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",disabled:n,children:u.jsx(di,{className:"w-4 h-4"})})})]},g.id))]}),u.jsxs("button",{type:"button",onClick:m,className:"mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",disabled:n,children:[u.jsx(sr,{className:"w-4 h-4"}),"Add contact detail"]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":"Save changes"})]})]})]})})}function J_e({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=T.useState(""),[a,l]=T.useState(!1),c=T.useRef(null),d=T.useRef(null),h=T.useMemo(()=>r.filter(b=>b.id!==i).sort((b,w)=>{var _,N;const x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((N=w.acf)==null?void 0:N.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=T.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(b=>{var _,N;const w=nd(b).toLowerCase(),x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(b.last_name||((N=b.acf)==null?void 0:N.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=T.useMemo(()=>h.find(y=>y.id===t),[h,t]);T.useEffect(()=>{const y=b=>{d.current&&!d.current.contains(b.target)&&c.current&&!c.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},v=p?nd(p):"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:p&&!a?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[u.jsx("span",{children:v}),u.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Ft,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:c,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&u.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>u.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:nd(y)},y.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function Z_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,relationship:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1,onCreatePerson:l}){const c=!!i,{data:d=[],isLoading:h}=ht({queryKey:["relationship-types"],queryFn:async()=>(await Le.getRelationshipTypes()).data}),{register:f,handleSubmit:p,reset:m,control:g,formState:{errors:v}}=ll({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});if(T.useEffect(()=>{t&&m(i?{related_person:i.related_person||null,relationship_type:i.relationship_type?String(i.relationship_type):"",relationship_label:i.relationship_label||""}:{related_person:null,relationship_type:"",relationship_label:""})},[t,i,m]),!t)return null;const y=b=>{r({related_person:b.related_person||null,relationship_type:b.relationship_type?parseInt(b.relationship_type,10):null,relationship_label:b.relationship_label||""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:c?"Edit relationship":"Add relationship"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:p(y),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related person *"}),u.jsx(Ky,{name:"related_person",control:g,rules:{required:"Please select a person"},render:({field:b})=>u.jsx(J_e,{value:b.value,onChange:b.onChange,people:o,isLoading:a,excludePersonId:parseInt(s,10)})}),v.related_person&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.related_person.message}),!c&&l&&u.jsx("div",{className:"mt-2",children:u.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[u.jsx(sr,{className:"w-4 h-4"}),"Add new person"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Relationship type"}),u.jsxs("select",{...f("relationship_type"),className:"input",disabled:h||n,children:[u.jsx("option",{value:"",children:"Select a type..."}),d.map(b=>u.jsx("option",{value:b.id,children:b.name},b.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Custom label"}),u.jsx("input",{...f("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law",disabled:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":c?"Save changes":"Add relationship"})]})]})]})})}function eEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,address:i=null}){const s=!!i,{register:o,handleSubmit:a,reset:l,formState:{errors:c}}=ll({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});if(T.useEffect(()=>{t&&l(i?{address_label:i.address_label||"",street:i.street||"",postal_code:i.postal_code||"",city:i.city||"",state:i.state||"",country:i.country||""}:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""})},[t,i,l]),!t)return null;const d=h=>{r({address_label:h.address_label||"",street:h.street||"",postal_code:h.postal_code||"",city:h.city||"",state:h.state||"",country:h.country||""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit address":"Add address"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a(d),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...o("address_label"),className:"input",placeholder:"e.g., Home, Work",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Street"}),u.jsx("input",{...o("street"),className:"input",placeholder:"e.g., 123 Main Street",disabled:n})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Postal code"}),u.jsx("input",{...o("postal_code"),className:"input",placeholder:"e.g., 12345",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"City"}),u.jsx("input",{...o("city"),className:"input",placeholder:"e.g., Amsterdam",disabled:n})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"State/Province"}),u.jsx("input",{...o("state"),className:"input",placeholder:"e.g., North Holland",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Country"}),u.jsx("input",{...o("country"),className:"input",placeholder:"e.g., Netherlands",disabled:n})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add address"})]})]})]})})}function tEe({value:t,onChange:e,companies:r,isLoading:n}){return u.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return u.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function rEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,workHistoryItem:i=null}){const s=!!i,{data:o=[],isLoading:a}=ht({queryKey:["companies","all"],queryFn:async()=>(await Le.getCompanies({per_page:100})).data}),l=T.useMemo(()=>[...o].sort((v,y)=>{var x,S;const b=(((x=v.title)==null?void 0:x.rendered)||v.title||"").toLowerCase(),w=(((S=y.title)==null?void 0:S.rendered)||y.title||"").toLowerCase();return b.localeCompare(w)}),[o]),{register:c,handleSubmit:d,reset:h,watch:f,control:p,formState:{errors:m}}=ll({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});if(f("is_current"),T.useEffect(()=>{t&&h(i?{company:i.company||null,job_title:i.job_title||"",description:i.description||"",start_date:i.start_date||"",end_date:i.end_date||"",is_current:i.is_current||!1}:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1})},[t,i,h]),!t)return null;const g=v=>{r({company:v.company||null,job_title:v.job_title||"",description:v.description||"",start_date:v.start_date||"",end_date:v.end_date||"",is_current:v.is_current||!1})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit work history":"Add work history"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Ft,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:d(g),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization"}),u.jsx(Ky,{name:"company",control:p,render:({field:v})=>u.jsx(tEe,{value:v.value,onChange:v.onChange,companies:l,isLoading:a||n})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Job title"}),u.jsx("input",{...c("job_title"),className:"input",placeholder:"e.g., Software Engineer",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Description"}),u.jsx("textarea",{...c("description"),className:"input",rows:3,placeholder:"Job description, responsibilities, achievements...",disabled:n})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Start date"}),u.jsx("input",{type:"date",...c("start_date"),className:"input",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"End date"}),u.jsx("input",{type:"date",...c("end_date"),className:"input",disabled:n})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_current",...c("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add work history"})]})]})]})})}function qn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function nEe(t){return t?t.replace(/[^\d+]/g,""):""}function Aq(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function iEe(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function sEe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${qn(l)}`),s.push(`N:${qn(a)};${qn(o)};;;`),i.nickname&&s.push(`NICKNAME:${qn(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=qn(h.contact_value),p=h.contact_label?qn(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",v=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=nEe(h.contact_value);y&&s.push(`${v}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let b=h.contact_value;b.match(/^https?:\/\//i)||(b=`https://${b}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${qn(b)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=qn(h.street||""),m=qn(h.city||""),g=qn(h.state||""),v=qn(h.postal_code||""),y=qn(h.country||"");(p||m||g||v||y)&&s.push(`${f}:;;${p};${m};${g};${v};${y}`)});const{title:c,org:d}=iEe(i.work_history,r);if(d&&s.push(`ORG:${qn(d)}`),c&&s.push(`TITLE:${qn(c)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=Aq(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=Aq(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function oEe(t,e={}){const{filename:r,...n}=e,i=sEe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const aEe=({className:t})=>u.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:u.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function Mg(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function lEe(){var jD,PD,ID,RD,MD,AD,DD,$D,FD,qD,LD,BD,zD,VD,UD;const{id:t}=w0(),e=Wi(),r=bt(),{data:n,isLoading:i,error:s}=Hte(t),{data:o}=Jpe(t),{data:a}=Zpe(t),l=tme(),c=nme(),d=lme(),h=eme(),f=rme(),p=SM(),m=ime(),g=Wte(),v=ome(),y=sme(),b=ame(),{data:w,isLoading:x}=Wc(),{data:S=[]}=ht({queryKey:["investments",t],queryFn:async()=>(await Ae.getInvestments(t)).data,enabled:!!t}),[_,N]=T.useState(!1),[E,C]=T.useState(""),[k,j]=T.useState(!1),P=T.useRef(null),[O,A]=T.useState(!1),[q,D]=T.useState(!1),[B,F]=T.useState(!1),[K,X]=T.useState(!1),[G,L]=T.useState(!1),[Z,ce]=T.useState(!1),[Be,Te]=T.useState(!1),[tt,pt]=T.useState(!1),[Qr,kr]=T.useState(!1),[Jt,ee]=T.useState(!1),[Ne,We]=T.useState(!1),[lt,zt]=T.useState(!1),[Ie,Ze]=T.useState(!1),[Mr,St]=T.useState(!1),[M,$]=T.useState(!1),[z,se]=T.useState(null),[J,Y]=T.useState(null),[ge,ze]=T.useState(null),[Xe,kt]=T.useState(null),[Se,ne]=T.useState(null),[pe,ue]=T.useState(null),[Ce,Ye]=T.useState(null),[Ei,wn]=T.useState(null),[xl,wl]=T.useState(null),[ai,Sl]=T.useState(null),[Ib,mu]=T.useState(!1),[Rb,gu]=T.useState(null),{data:Mb}=ht({queryKey:["person-labels"],queryFn:async()=>(await Le.getPersonLabels()).data}),Hm=Mb||[],Ab=(n==null?void 0:n.labels)||[],Wm=((RD=(ID=(PD=(jD=n==null?void 0:n._embedded)==null?void 0:jD["wp:term"])==null?void 0:PD.flat())==null?void 0:ID.filter(I=>(I==null?void 0:I.taxonomy)==="person_label"))==null?void 0:RD.map(I=>I.id))||[],ye=Hm.filter(I=>!Ab.includes(I.name));Hc((n==null?void 0:n.name)||((MD=n==null?void 0:n.title)==null?void 0:MD.rendered)||(n==null?void 0:n.title)||"Person");const Ee=a==null?void 0:a.find(I=>{const H=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(H==null?void 0:H.toLowerCase())==="birthday"}),De=Ee!=null&&Ee.date_value?new Date(Ee.date_value):null,Vt=(Ee==null?void 0:Ee.year_unknown)??!1,Tr=a==null?void 0:a.find(I=>{const H=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(H==null?void 0:H.toLowerCase())==="died"}),yu=Tr!=null&&Tr.date_value?new Date(Tr.date_value):null,Km=(Tr==null?void 0:Tr.year_unknown)??!1,Ks=!!yu,_l=De&&!Vt?T1(Ks?yu:new Date,De):null,$h=a?[...a].sort((I,H)=>{const W=I.date_value?new Date(I.date_value):new Date(0),we=H.date_value?new Date(H.date_value):new Date(0);return W-we}):[],Db=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch(I){console.error("Failed to delete person:",I),alert("Failed to delete person. Please try again.")}},_D=I=>{if(!I)return"";let H=I.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const W=H.startsWith("+");return H=H.replace(/\D/g,""),W?`+${H}`:H},nle=async I=>{ee(!0);try{const H=Qs(n.acf,{contact_info:I});await h.mutateAsync({id:t,data:{acf:H}}),X(!1)}catch(H){console.error("Failed to save contacts:",H),alert("Failed to save contacts. Please try again.")}finally{ee(!1)}},ile=async I=>{We(!0);try{ge?await Le.updateDate(ge.id,{title:I.title,date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown}}):await Le.createDate({title:I.title,status:"publish",date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown}}),r.invalidateQueries({queryKey:["person-dates",t]}),r.invalidateQueries({queryKey:["reminders"]}),L(!1),ze(null)}catch(H){console.error("Failed to save date:",H),alert("Failed to save date. Please try again.")}finally{We(!1)}},sle=async I=>{var H;zt(!0);try{const W=[...((H=n.acf)==null?void 0:H.relationships)||[]],we={related_person:I.related_person||null,relationship_type:I.relationship_type||null,relationship_label:I.relationship_label||""};Se!==null?W[Se]=we:W.push(we);const $e=Qs(n.acf,{relationships:W});await h.mutateAsync({id:t,data:{acf:$e}}),r.invalidateQueries({queryKey:["person",t]}),ce(!1),kt(null),ne(null)}catch(W){console.error("Failed to save relationship:",W),alert("Failed to save relationship. Please try again.")}finally{zt(!1)}},ole=async I=>{var H;Ze(!0);try{const W=[...((H=n.acf)==null?void 0:H.addresses)||[]],we={address_label:I.address_label||"",street:I.street||"",postal_code:I.postal_code||"",city:I.city||"",state:I.state||"",country:I.country||""};Ce!==null?W[Ce]=we:W.push(we);const $e=Qs(n.acf,{addresses:W});await h.mutateAsync({id:t,data:{acf:$e}}),Te(!1),ue(null),Ye(null)}catch(W){console.error("Failed to save address:",W),alert("Failed to save address. Please try again.")}finally{Ze(!1)}},ale=async I=>{var H;St(!0);try{const W=[...((H=n.acf)==null?void 0:H.work_history)||[]],we={company:I.company||null,job_title:I.job_title||"",description:I.description||"",start_date:I.start_date||"",end_date:I.end_date||"",is_current:I.is_current||!1};xl!==null?W[xl]=we:W.push(we);const $e=Qs(n.acf,{work_history:W});await h.mutateAsync({id:t,data:{acf:$e}}),pt(!1),wn(null),wl(null)}catch(W){console.error("Failed to save work history:",W),alert("Failed to save work history. Please try again.")}finally{St(!1)}},lle=async I=>{$(!0);try{const H=Qs(n.acf,{first_name:I.first_name,last_name:I.last_name,nickname:I.nickname,gender:I.gender||null,how_we_met:I.how_we_met,is_favorite:I.is_favorite});await h.mutateAsync({id:t,data:{title:`${I.first_name} ${I.last_name}`.trim(),acf:H}}),kr(!1)}catch(H){console.error("Failed to save person:",H),alert("Failed to save person. Please try again.")}finally{$(!1)}},cle=async I=>{var we;if(!window.confirm("Are you sure you want to delete this address?"))return;const H=[...((we=n.acf)==null?void 0:we.addresses)||[]];H.splice(I,1);const W=Qs(n.acf,{addresses:H});await h.mutateAsync({id:t,data:{acf:W}})},ule=async I=>{var un,Gs,Fh,Xm,HD,WD;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const H=(Gs=(un=n.acf)==null?void 0:un.relationships)==null?void 0:Gs[I];if(!H)return;const W=H.related_person,we=H.relationship_type;let $e=!0;W&&we&&($e=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let rt=null;if(!$e&&W&&we)try{const[xs,Jm]=await Promise.all([Le.getPerson(W,{_embed:!0}),Le.getRelationshipTypes()]),Lb={};Jm.data.forEach(qh=>{Lb[qh.id]=qh});const Ni=Lb[we],Nl=(Fh=Ni==null?void 0:Ni.acf)==null?void 0:Fh.inverse_relationship_type;if(Nl){const Lh=(((Xm=xs.data.acf)==null?void 0:Xm.relationships)||[]).find(Ys=>{var KD,GD;const Ile=typeof Ys.related_person=="object"?(KD=Ys.related_person)==null?void 0:KD.ID:Ys.related_person,Rle=typeof Ys.relationship_type=="object"?(GD=Ys.relationship_type)==null?void 0:GD.term_id:Ys.relationship_type;return Ile===parseInt(t)&&Rle===Nl});Lh&&(rt={related_person:parseInt(t),relationship_type:Nl,relationship_label:Lh.relationship_label||""})}}catch(xs){console.error("Failed to fetch inverse relationship:",xs)}const ct=[...((HD=n.acf)==null?void 0:HD.relationships)||[]];ct.splice(I,1);const Ji=Qs(n.acf,{relationships:ct});if(await h.mutateAsync({id:t,data:{acf:Ji}}),!$e&&rt&&W){await new Promise(xs=>setTimeout(xs,500));try{const xs=await Le.getPerson(W,{_embed:!0}),Jm=((WD=xs.data.acf)==null?void 0:WD.relationships)||[];if(!Jm.some(Ni=>{var Lh,Ys;const Nl=typeof Ni.related_person=="object"?(Lh=Ni.related_person)==null?void 0:Lh.ID:Ni.related_person,qh=typeof Ni.relationship_type=="object"?(Ys=Ni.relationship_type)==null?void 0:Ys.term_id:Ni.relationship_type;return Nl===rt.related_person&&qh===rt.relationship_type})){const Ni=[...Jm,rt],Nl=Qs(xs.data.acf,{relationships:Ni});await Le.updatePerson(W,{acf:Nl})}}catch(xs){console.error("Failed to restore inverse relationship:",xs)}}r.invalidateQueries({queryKey:["person",t]}),W&&r.invalidateQueries({queryKey:["person",W]}),r.invalidateQueries({queryKey:["people"]})},dle=async I=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:I,personId:t})},hle=async I=>{window.confirm("Are you sure you want to delete this note?")&&await c.mutateAsync({noteId:I,personId:t})},fle=async I=>{try{await f.mutateAsync({personId:t,content:I}),A(!1)}catch(H){console.error("Failed to create note:",H),alert("Failed to create note. Please try again.")}},ple=async I=>{try{J?(await m.mutateAsync({activityId:J.id,data:I,personId:t}),Y(null)):(await p.mutateAsync({personId:t,data:I}),ai&&(await v.mutateAsync({todoId:ai.id,data:{content:ai.content,due_date:ai.due_date,is_completed:!0},personId:t}),Sl(null),gu(null))),D(!1)}catch(H){console.error("Failed to save activity:",H),alert("Failed to save activity. Please try again.")}},mle=async I=>{try{await g.mutateAsync({personId:t,data:I}),F(!1),se(null)}catch(H){console.error("Failed to create todo:",H),alert("Failed to create todo. Please try again.")}},gle=async I=>{if(z)try{await v.mutateAsync({todoId:z.id,data:I,personId:t}),F(!1),se(null)}catch(H){console.error("Failed to update todo:",H),alert("Failed to update todo. Please try again.")}},ED=async I=>{if(!I.is_completed){Sl(I),mu(!0);return}try{await v.mutateAsync({todoId:I.id,data:{content:I.content,due_date:I.due_date,is_completed:!1},personId:t})}catch(H){console.error("Failed to toggle todo:",H),alert("Failed to update todo. Please try again.")}},yle=async()=>{if(ai)try{await v.mutateAsync({todoId:ai.id,data:{content:ai.content,due_date:ai.due_date,is_completed:!0},personId:t}),mu(!1),Sl(null)}catch(I){console.error("Failed to complete todo:",I),alert("Failed to complete todo. Please try again.")}},vle=()=>{if(!ai)return;const I=new Date().toISOString().split("T")[0];gu({content:ai.content,activity_date:I,activity_type:"note",participants:[]}),mu(!1),D(!0)},ble=async I=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:I,personId:t})},ND=async I=>{window.confirm("Are you sure you want to delete this todo?")&&await b.mutateAsync({todoId:I,personId:t})},xle=I=>{I.type==="todo"?(se(I),F(!0)):I.type==="activity"&&(Y(I),D(!0))},wle=I=>{I.type==="note"?hle(I.id):I.type==="activity"?ble(I.id):I.type==="todo"&&ND(I.id)},Sle=async I=>{var we;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const H=[...((we=n.acf)==null?void 0:we.work_history)||[]];H.splice(I,1);const W=Qs(n.acf,{work_history:H});await h.mutateAsync({id:t,data:{acf:W}})},_le=async I=>{var we,$e,rt;const H=(rt=($e=(we=n==null?void 0:n._embedded)==null?void 0:we["wp:term"])==null?void 0:$e.flat())==null?void 0:rt.find(ct=>(ct==null?void 0:ct.taxonomy)==="person_label"&&(ct==null?void 0:ct.name)===I);if(!H)return;const W=Wm.filter(ct=>ct!==H.id);await h.mutateAsync({id:t,data:{person_label:W}})},Ele=async()=>{if(!E)return;const I=Hm.find(W=>W.id.toString()===E);if(!I)return;const H=[...Wm,I.id];await h.mutateAsync({id:t,data:{person_label:H}}),C(""),N(!1)},Nle=async I=>{var W;const H=(W=I.target.files)==null?void 0:W[0];if(H){if(!H.type.startsWith("image/")){alert("Please select an image file");return}if(H.size>5*1024*1024){alert("Image size must be less than 5MB");return}j(!0);try{await Ae.uploadPersonPhoto(t,H),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch(we){console.error("Failed to upload photo:",we),alert("Failed to upload photo. Please try again.")}finally{j(!1),P.current&&(P.current.value="")}}},Cle=()=>{if(n)try{oEe(n,{companyMap:Fb,personDates:a||[]})}catch(I){console.error("Failed to export vCard:",I),alert("Failed to export vCard. Please try again.")}},CD=((DD=(AD=n==null?void 0:n.acf)==null?void 0:AD.work_history)==null?void 0:DD.map(I=>I.company).filter(Boolean))||[],kle=JP({queries:CD.map(I=>({queryKey:["company",I],queryFn:async()=>(await Le.getCompany(I,{_embed:!0})).data,enabled:!!I}))}),El=((FD=($D=n==null?void 0:n.acf)==null?void 0:$D.relationships)==null?void 0:FD.map(I=>I.related_person).filter(Boolean))||[],Gm=JP({queries:El.map(I=>({queryKey:["person-dates",I],queryFn:async()=>(await Ae.getPersonDates(I)).data,enabled:!!I}))}),$b=T.useMemo(()=>{const I={};return Gm.forEach((H,W)=>{if(H.data&&El[W]){const we=El[W],$e=H.data.find(rt=>{const ct=Array.isArray(rt.date_type)?rt.date_type[0]:rt.date_type;return(ct==null?void 0:ct.toLowerCase())==="birthday"});if($e!=null&&$e.date_value){const rt=new Date($e.date_value);I[we]=T1(new Date,rt)}else I[we]=-1}}),I},[Gm,El]),Tle=T.useMemo(()=>{const I={};return Gm.forEach((H,W)=>{if(H.data&&El[W]){const we=El[W],$e=H.data.some(rt=>{const ct=Array.isArray(rt.date_type)?rt.date_type[0]:rt.date_type;return(ct==null?void 0:ct.toLowerCase())==="died"});I[we]=$e}}),I},[Gm,El]),Ym=T.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.relationships?[...n.acf.relationships].sort((H,W)=>{const we=$b[H.related_person]??-1,$e=$b[W.related_person]??-1;return we===-1&&$e===-1?0:we===-1?1:$e===-1?-1:$e-we}):[]},[(qD=n==null?void 0:n.acf)==null?void 0:qD.relationships,$b]),Fb={};kle.forEach((I,H)=>{var W,we,$e,rt,ct,Ji,un,Gs,Fh;if(I.data){const Xm=CD[H];Fb[Xm]={name:rr(I.data),logo:(($e=(we=(W=I.data._embedded)==null?void 0:W["wp:featuredmedia"])==null?void 0:we[0])==null?void 0:$e.source_url)||((Fh=(Gs=(un=(Ji=(ct=(rt=I.data._embedded)==null?void 0:rt["wp:featuredmedia"])==null?void 0:ct[0])==null?void 0:Ji.media_details)==null?void 0:un.sizes)==null?void 0:Gs.thumbnail)==null?void 0:Fh.source_url)||null}}});const Qm=T.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?[...n.acf.work_history].map((H,W)=>({...H,originalIndex:W})).sort((H,W)=>{if(H.is_current&&!W.is_current)return-1;if(!H.is_current&&W.is_current)return 1;const we=H.start_date?new Date(H.start_date):new Date(0);return(W.start_date?new Date(W.start_date):new Date(0))-we}):[]},[(LD=n==null?void 0:n.acf)==null?void 0:LD.work_history]),kD=T.useMemo(()=>o?o.filter(H=>H.type==="todo").sort((H,W)=>{if(H.is_completed&&!W.is_completed)return 1;if(!H.is_completed&&W.is_completed)return-1;if(!H.is_completed&&!W.is_completed){if(H.due_date&&W.due_date)return new Date(H.due_date)-new Date(W.due_date);if(H.due_date&&!W.due_date)return-1;if(!H.due_date&&W.due_date)return 1}return new Date(W.created)-new Date(H.created)}):[],[o]);if(T.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(He,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const Ar=n.acf||{},qb=["facebook","linkedin","instagram","twitter","bluesky","threads","slack","website"],Ole=((BD=Ar.contact_info)==null?void 0:BD.filter(I=>qb.includes(I.contact_type)))||[],TD={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,slack:7,website:8},OD=[...Ole].sort((I,H)=>{const W=TD[I.contact_type]||99,we=TD[H.contact_type]||99;return W-we}),jle=I=>{switch(I){case"facebook":return F_e;case"linkedin":return aEe;case"instagram":return L_e;case"twitter":return W_e;case"bluesky":return D_e;case"threads":return U_e;case"slack":return z_e;case"website":return sy;default:return sy}},Ple=I=>{switch(I){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"slack":return"text-[#4A154B]";case"website":return"text-gray-600";default:return"text-gray-600"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(He,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(em,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Cle,className:"btn-secondary",children:[u.jsx(oI,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),u.jsxs("button",{onClick:()=>kr(!0),className:"btn-secondary",children:[u.jsx(Fte,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),u.jsxs("button",{onClick:Db,className:"btn-danger",children:[u.jsx(di,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),u.jsxs("div",{className:"card p-6 relative",children:[u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx(He,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"})}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[n.thumbnail?u.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):u.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((zD=n.first_name)==null?void 0:zD[0])||"?"})}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var I;return(I=P.current)==null?void 0:I.click()},children:k?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Tf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:Nle,className:"hidden",disabled:k})]}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,Ks&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&u.jsx(Fd,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),Ar.nickname&&u.jsxs("p",{className:"text-gray-500",children:['"',Ar.nickname,'"']}),Ks&&yu&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Mg(Ar.gender)&&u.jsx("span",{className:"mr-1",children:Mg(Ar.gender)}),"Died ",kn(yu,Km?"MMMM d":"MMMM d, yyyy"),_l!==null&&` at age ${_l}`]}),!Ks&&_l!==null&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Mg(Ar.gender)&&u.jsx("span",{className:"mr-1",children:Mg(Ar.gender)}),_l," years old"]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map((I,H)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[I,u.jsx("button",{onClick:()=>_le(I),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:u.jsx(Ft,{className:"w-3 h-3"})})]},H)),_?u.jsxs("div",{className:"inline-flex items-center gap-2",children:[u.jsxs("select",{value:E,onChange:I=>C(I.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:ye.length===0,children:[u.jsx("option",{value:"",children:"Select a label..."}),ye.map(I=>u.jsx("option",{value:I.id,children:I.name},I.id))]}),u.jsx("button",{onClick:Ele,disabled:!E,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),u.jsx("button",{onClick:()=>{N(!1),C("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):ye.length>0&&u.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[u.jsx(sr,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),OD.length>0&&u.jsx("div",{className:"flex items-center gap-3 mt-4",children:OD.map((I,H)=>{const W=jle(I.contact_type),we=Ple(I.contact_type);let $e=I.contact_value;return $e.match(/^https?:\/\//i)||($e=`https://${$e}`),u.jsx("a",{href:$e,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${we}`,title:`${I.contact_type.charAt(0).toUpperCase()+I.contact_type.slice(1)}: ${I.contact_value}`,children:u.jsx(W,{className:"w-5 h-5"})},H)})})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[!Ks&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Contact information"}),u.jsxs("button",{onClick:()=>X(!0),className:"btn-secondary text-sm",children:[u.jsx(ra,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]}),((VD=Ar.contact_info)==null?void 0:VD.filter(I=>!qb.includes(I.contact_type)).length)>0?u.jsx("div",{className:"space-y-2",children:(()=>{const I={email:1,phone:2,mobile:2,calendar:3,other:4};return Ar.contact_info.filter(W=>!qb.includes(W.contact_type)).map((W,we)=>({...W,originalIndex:we})).sort((W,we)=>{const $e=I[W.contact_type]||99,rt=I[we.contact_type]||99;return $e!==rt?$e-rt:W.originalIndex-we.originalIndex}).map(W=>{const we=W.contact_type==="email"?xM:W.contact_type==="phone"||W.contact_type==="mobile"?wM:W.contact_type==="calendar"?yo:sy,$e=W.contact_type==="email",rt=W.contact_type==="phone"||W.contact_type==="mobile",ct=W.contact_type==="mobile",Ji=W.contact_type==="calendar";let un=null,Gs=null;return $e?un=`mailto:${W.contact_value}`:rt?un=`tel:${_D(W.contact_value)}`:Ji&&(un=W.contact_value,Gs="_blank"),u.jsx("div",{children:u.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5",children:[u.jsx(we,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[W.contact_label||W.contact_type,": "]}),un?u.jsx("a",{href:un,target:Gs||void 0,rel:Gs==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:W.contact_value}):u.jsx("span",{children:W.contact_value}),ct&&u.jsx("a",{href:`https://wa.me/${_D(W.contact_value)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 hover:opacity-80 transition-opacity",title:"Open WhatsApp",children:u.jsx(O0,{className:"w-4 h-4 text-[#25D366]"})})]})]})},W.originalIndex)})})()}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No contact information yet. ",u.jsx("button",{onClick:()=>X(!0),className:"text-primary-600 hover:underline",children:"Add some"})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Events"}),u.jsxs("button",{onClick:()=>{ze(null),L(!0)},className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add Important Date"})]})]}),$h.length>0?u.jsx("div",{className:"space-y-3",children:$h.map(I=>{const H=Array.isArray(I.date_type)?I.date_type[0]:I.date_type,W=(H==null?void 0:H.toLowerCase())||"",we=W.includes("died"),$e=W.includes("wedding")||W.includes("marriage")?kpe:W.includes("birthday")?Cpe:yo,rt=I.year_unknown?"MMMM d":"MMMM d, yyyy";return u.jsxs("div",{className:"flex items-start group",children:[u.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:we?u.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):u.jsx($e,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium",children:I.title}),u.jsx("p",{className:"text-xs text-gray-500",children:I.date_value&&kn(new Date(I.date_value),rt)}),H&&u.jsx("p",{className:"text-xs text-gray-400 capitalize",children:H})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>{ze(I),L(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>dle(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No important dates yet. ",u.jsx("button",{onClick:()=>{ze(null),L(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Timeline"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>A(!0),className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Note"})]}),u.jsxs("button",{onClick:()=>D(!0),className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),u.jsx(G_e,{timeline:o||[],onEdit:xle,onDelete:wle,onToggleTodo:ED,personId:t,allPeople:w||[]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Work history"}),u.jsxs("button",{onClick:()=>{wn(null),wl(null),pt(!0)},className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add work history"})]})]}),(Qm==null?void 0:Qm.length)>0?u.jsx("div",{className:"space-y-4",children:Qm.map((I,H)=>{const W=I.company?Fb[I.company]:null,we=I.originalIndex;return u.jsxs("div",{className:"flex items-start group",children:[W!=null&&W.logo?u.jsx("img",{src:W.logo,alt:W.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):u.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:u.jsx(Pr,{className:"w-10 h-10 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium",children:I.job_title}),I.company&&W&&u.jsx(He,{to:`/companies/${I.company}`,className:"text-sm text-primary-600 hover:underline",children:W.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[I.start_date&&kn(new Date(I.start_date),"MMM yyyy")," - ",I.is_current?"Present":I.end_date?kn(new Date(I.end_date),"MMM yyyy"):""]}),I.description&&u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.description})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{var rt,ct;const $e=(ct=(rt=n==null?void 0:n.acf)==null?void 0:rt.work_history)==null?void 0:ct[we];wn($e),wl(we),pt(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Sle(we),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},we)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No work history yet. ",u.jsx("button",{onClick:()=>{wn(null),wl(null),pt(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),S.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Hy,{className:"w-5 h-5 mr-2"}),"Investments"]}),u.jsx("div",{className:"space-y-3",children:S.map(I=>u.jsxs(He,{to:`/companies/${I.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[I.thumbnail?u.jsx("img",{src:I.thumbnail,alt:I.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Pr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:I.name}),I.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:I.industry})]})]},I.id))})]}),u.jsx(Y_e,{isOpen:O,onClose:()=>A(!1),onSubmit:fle,isLoading:f.isPending}),u.jsx(gA,{isOpen:q,onClose:()=>{D(!1),Y(null),Sl(null),gu(null)},onSubmit:ple,isLoading:J?m.isPending:p.isPending,personId:t,initialData:Rb,activity:J}),u.jsx(OM,{isOpen:Ib,onClose:()=>{mu(!1),Sl(null)},todo:ai,onComplete:yle,onCompleteAsActivity:vle}),u.jsx(ise,{isOpen:B,onClose:()=>{F(!1),se(null)},onSubmit:z?gle:mle,isLoading:z?v.isPending:g.isPending,todo:z}),u.jsx(X_e,{isOpen:K,onClose:()=>X(!1),onSubmit:nle,isLoading:Jt,contactInfo:Ar.contact_info||[]}),u.jsx(TM,{isOpen:G,onClose:()=>{L(!1),ze(null)},onSubmit:ile,isLoading:Ne,dateItem:ge,personId:t,allPeople:w||[],isPeopleLoading:x}),u.jsx(Z_e,{isOpen:Z,onClose:()=>{ce(!1),kt(null),ne(null)},onSubmit:sle,isLoading:lt,relationship:Xe,personId:t,allPeople:w||[],isPeopleLoading:x}),u.jsx(eEe,{isOpen:Be,onClose:()=>{Te(!1),ue(null),Ye(null)},onSubmit:ole,isLoading:Ie,address:pe}),u.jsx(rEe,{isOpen:tt,onClose:()=>{pt(!1),wn(null),wl(null)},onSubmit:ale,isLoading:Mr,workHistoryItem:Ei}),u.jsx(kM,{isOpen:Qr,onClose:()=>kr(!1),onSubmit:lle,isLoading:M,person:n})]}),u.jsxs("div",{className:"space-y-6",children:[(Ar.how_we_met||Ar.met_date)&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),Ar.met_date&&u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[u.jsx(yo,{className:"w-4 h-4 inline mr-1"}),kn(new Date(Ar.met_date),"MMMM d, yyyy")]}),Ar.how_we_met&&u.jsx("p",{className:"text-sm",children:Ar.how_we_met})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Todos"}),u.jsxs("button",{onClick:()=>{se(null),F(!0)},className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add todo"})]})]}),kD.length>0?u.jsx("div",{className:"space-y-2",children:kD.map(I=>{const H=im(I);return u.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[u.jsx("button",{onClick:()=>ED(I),className:"mt-0.5 mr-2 flex-shrink-0",title:I.is_completed?"Mark as incomplete":"Mark as complete",children:I.is_completed?u.jsx(iI,{className:"w-5 h-5 text-primary-600"}):u.jsx($d,{className:`w-5 h-5 ${H?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${I.is_completed?"line-through text-gray-400":H?"text-red-600":""}`,children:I.content}),I.due_date&&u.jsxs("p",{className:`text-xs mt-0.5 ${H&&!I.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",kn(new Date(I.due_date),"MMM d, yyyy"),H&&!I.is_completed&&" (overdue)"]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{se(I),F(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>ND(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Relationships"}),u.jsxs("button",{onClick:()=>{kt(null),ne(null),ce(!0)},className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add relationship"})]})]}),(Ym==null?void 0:Ym.length)>0?u.jsx("div",{className:"space-y-2",children:Ym.map((I,H)=>{var we,$e,rt;const W=(($e=(we=n==null?void 0:n.acf)==null?void 0:we.relationships)==null?void 0:$e.findIndex(ct=>ct.related_person===I.related_person&&ct.relationship_type===I.relationship_type))??H;return u.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[u.jsxs(He,{to:`/people/${I.related_person}`,className:"flex items-center flex-1 min-w-0",children:[I.person_thumbnail?u.jsx("img",{src:I.person_thumbnail,alt:Gn(I.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-gray-500",children:((rt=Gn(I.person_name))==null?void 0:rt[0])||"?"})}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium",children:[Gn(I.person_name)||`Person #${I.related_person}`,Tle[I.related_person]&&u.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),u.jsx("p",{className:"text-xs text-gray-500",children:Gn(I.relationship_name||I.relationship_label)})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{var Ji,un;const ct=(un=(Ji=n==null?void 0:n.acf)==null?void 0:Ji.relationships)==null?void 0:un[W];kt(ct),ne(W),ce(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>ule(W),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},H)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No relationships yet. ",u.jsx("button",{onClick:()=>{kt(null),ne(null),ce(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),!Ks&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Addresses"}),u.jsxs("button",{onClick:()=>{ue(null),Ye(null),Te(!0)},className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add address"})]})]}),((UD=Ar.addresses)==null?void 0:UD.length)>0?u.jsx("div",{className:"space-y-4",children:Ar.addresses.map((I,H)=>{const W=[];I.street&&W.push(I.street);const we=[I.postal_code,I.city].filter(Boolean).join(" ");we&&W.push(we);const $e=[I.state,I.country].filter(Boolean).join(", ");$e&&W.push($e);const rt=[I.street,I.postal_code,I.city,I.state,I.country].filter(Boolean).join(", "),ct=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(rt)}`;return u.jsx("div",{className:"group",children:u.jsxs("div",{className:"flex items-start rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[u.jsx(Mpe,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[I.address_label&&u.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:I.address_label}),u.jsx("a",{href:ct,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:W.map((Ji,un)=>u.jsx("span",{className:"block",children:Ji},un))})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{ue(I),Ye(H),Te(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>cle(H),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},H)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No addresses yet. ",u.jsx("button",{onClick:()=>{ue(null),Ye(null),Te(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]})]})]})]})}function cEe({company:t}){var e,r,n,i,s;return u.jsx(He,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?u.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:rr(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Pr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:rr(t)}),((i=t.acf)==null?void 0:i.industry)&&u.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&u.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function uEe(){const[t,e]=T.useState(""),[r,n]=T.useState(!1),[i,s]=T.useState(!1),o=Wi(),a=bt(),{data:l,isLoading:c,error:d}=ht({queryKey:["companies",t],queryFn:async()=>(await Le.getCompanies({search:t,per_page:100,_embed:!0})).data}),h=nt({mutationFn:async m=>{const g={title:m.title,status:"publish",acf:{website:m.website,industry:m.industry}};return(await Le.createCompany(g)).data},onSuccess:m=>{a.invalidateQueries({queryKey:["companies"]}),a.invalidateQueries({queryKey:["dashboard"]}),n(!1),o(`/companies/${m.id}`)}}),f=async m=>{s(!0);try{await h.mutateAsync(m)}finally{s(!1)}},p=T.useMemo(()=>l?[...l].sort((m,g)=>{var b,w;const v=(((b=m.title)==null?void 0:b.rendered)||m.title||"").toLowerCase(),y=(((w=g.title)==null?void 0:w.rendered)||g.title||"").toLowerCase();return v.localeCompare(y)}):[],[l]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"relative flex-1 max-w-md",children:[u.jsx(Nc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:m=>e(m.target.value),className:"input pl-9"})]}),u.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),c&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),d&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!c&&!d&&(p==null?void 0:p.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Pr,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&u.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!c&&!d&&(p==null?void 0:p.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(m=>u.jsx(cEe,{company:m},m.id))}),u.jsx(ore,{isOpen:r,onClose:()=>n(!1),onSubmit:f,isLoading:i})]})}function dEe(){var w,x,S,_,N,E,C;const{id:t}=w0(),e=Wi(),r=bt(),n=T.useRef(null),[i,s]=T.useState(!1),{data:o,isLoading:a,error:l}=ht({queryKey:["company",t],queryFn:async()=>(await Le.getCompany(t,{_embed:!0})).data}),{data:c}=ht({queryKey:["company-people",t],queryFn:async()=>(await Ae.getCompanyPeople(t)).data}),{data:d}=ht({queryKey:["company",o==null?void 0:o.parent],queryFn:async()=>(await Le.getCompany(o.parent,{_embed:!0})).data,enabled:!!(o!=null&&o.parent)}),{data:h=[]}=ht({queryKey:["company-children",t],queryFn:async()=>(await Le.getCompanies({parent:t,per_page:100,_embed:!0})).data}),f=((w=o==null?void 0:o.acf)==null?void 0:w.investors)||[],{data:p=[]}=ht({queryKey:["company-investors",t,f],queryFn:async()=>{if(!f.length)return[];const[k,j]=await Promise.all([Le.getPeople({per_page:100,include:f.join(","),_embed:!0}),Le.getCompanies({per_page:100,include:f.join(","),_embed:!0})]),P=(k.data||[]).map(q=>{var D,B,F,K;return{id:q.id,type:"person",name:Gn(((D=q.title)==null?void 0:D.rendered)||""),thumbnail:(K=(F=(B=q._embedded)==null?void 0:B["wp:featuredmedia"])==null?void 0:F[0])==null?void 0:K.source_url}}),O=(j.data||[]).map(q=>{var D,B,F;return{id:q.id,type:"company",name:rr(q),thumbnail:(F=(B=(D=q._embedded)==null?void 0:D["wp:featuredmedia"])==null?void 0:B[0])==null?void 0:F.source_url}}),A=[...P,...O];return f.map(q=>A.find(D=>D.id===q)).filter(Boolean)},enabled:f.length>0}),{data:m=[]}=ht({queryKey:["investments",t],queryFn:async()=>(await Ae.getInvestments(t)).data,enabled:!!t}),g=nt({mutationFn:()=>Le.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}});Hc(rr(o)||"Organization"),T.useEffect(()=>{(o==null?void 0:o.status)==="trash"&&e("/companies",{replace:!0})},[o,e]);const v=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await g.mutateAsync()}catch(k){console.error("Failed to delete company:",k),alert("Failed to delete organization. Please try again.")}},y=async k=>{var P;const j=(P=k.target.files)==null?void 0:P[0];if(j){if(!j.type.startsWith("image/")){alert("Please select an image file");return}if(j.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await Ae.uploadCompanyLogo(t,j),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch(O){console.error("Failed to upload logo:",O),alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(a)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(l||!o)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),u.jsx(He,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(o.status==="trash")return null;const b=o.acf||{};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(He,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(em,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(He,{to:`/companies/${t}/edit`,className:"btn-secondary",children:[u.jsx(Fte,{className:"w-4 h-4 mr-2"}),"Edit"]}),u.jsxs("button",{onClick:v,className:"btn-danger",children:[u.jsx(di,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),u.jsx("div",{className:"card p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[(_=(S=(x=o._embedded)==null?void 0:x["wp:featuredmedia"])==null?void 0:S[0])!=null&&_.source_url?u.jsx("img",{src:o._embedded["wp:featuredmedia"][0].source_url,alt:rr(o),className:"w-24 h-24 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Pr,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var k;return(k=n.current)==null?void 0:k.click()},children:i?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Tf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:y,className:"hidden",disabled:i})]}),u.jsxs("div",{children:[d&&u.jsxs(He,{to:`/companies/${d.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[u.jsx(VF,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",rr(d)]}),u.jsx("h1",{className:"text-2xl font-bold",children:rr(o)}),b.industry&&u.jsx("p",{className:"text-gray-500",children:b.industry}),b.website&&u.jsxs("a",{href:b.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[u.jsx(sy,{className:"w-4 h-4 mr-1"}),b.website]})]})]})}),h.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(VF,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(k=>{var j,P,O,A;return u.jsxs(He,{to:`/companies/${k.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(O=(P=(j=k._embedded)==null?void 0:j["wp:featuredmedia"])==null?void 0:P[0])!=null&&O.source_url?u.jsx("img",{src:k._embedded["wp:featuredmedia"][0].source_url,alt:rr(k),className:"w-10 h-10 rounded object-contain bg-white"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:u.jsx(Pr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:rr(k)}),((A=k.acf)==null?void 0:A.industry)&&u.jsx("p",{className:"text-xs text-gray-500",children:k.acf.industry})]})]},k.id)})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(qs,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((N=c==null?void 0:c.current)==null?void 0:N.length)>0?u.jsx("div",{className:"space-y-2",children:c.current.map(k=>{var j;return u.jsxs(He,{to:`/people/${k.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[k.thumbnail?u.jsx("img",{src:k.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((j=k.name)==null?void 0:j[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium",children:k.name}),k.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:k.job_title})]})]},k.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(qs,{className:"w-5 h-5 mr-2"}),"Former employees"]}),((E=c==null?void 0:c.former)==null?void 0:E.length)>0?u.jsx("div",{className:"space-y-2",children:c.former.map(k=>{var j;return u.jsxs(He,{to:`/people/${k.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[k.thumbnail?u.jsx("img",{src:k.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:u.jsx("span",{className:"text-xs text-gray-500",children:((j=k.name)==null?void 0:j[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:k.name}),k.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:k.job_title})]})]},k.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),p.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Hy,{className:"w-5 h-5 mr-2"}),"Investors"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:p.map(k=>{const j=k.type==="person",P=j?`/people/${k.id}`:`/companies/${k.id}`;return u.jsxs(He,{to:P,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[k.thumbnail?u.jsx("img",{src:k.thumbnail,alt:k.name,loading:"lazy",className:`w-10 h-10 object-cover ${j?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${j?"rounded-full":"rounded"}`,children:j?u.jsx(Za,{className:"w-5 h-5 text-gray-400"}):u.jsx(Pr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:k.name}),u.jsx("p",{className:"text-xs text-gray-500",children:j?"Person":"Organization"})]})]},`${k.type}-${k.id}`)})})]}),m.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Hy,{className:"w-5 h-5 mr-2"}),"Invested in"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(k=>u.jsxs(He,{to:`/companies/${k.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[k.thumbnail?u.jsx("img",{src:k.thumbnail,alt:k.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:u.jsx(Pr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:k.name}),k.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:k.industry})]})]},k.id))})]}),((C=b.contact_info)==null?void 0:C.length)>0&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),u.jsx("div",{className:"space-y-3",children:b.contact_info.map((k,j)=>u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[k.contact_label||k.contact_type,":"]}),u.jsx("span",{className:"ml-2",children:k.contact_value})]},j))})]})]})}function Dq(){var Z,ce,Be,Te,tt,pt,Qr,kr,Jt;const{id:t}=w0(),e=Wi(),r=bt(),n=!!t,{data:i,isLoading:s}=ht({queryKey:["company",t],queryFn:async()=>(await Le.getCompany(t,{_embed:!0})).data,enabled:n}),{data:o=[],isLoading:a}=ht({queryKey:["companies","all"],queryFn:async()=>(await Le.getCompanies({per_page:100,_embed:!0})).data}),{data:l=[],isLoading:c}=ht({queryKey:["people","all"],queryFn:async()=>(await Le.getPeople({per_page:100,_embed:!0})).data}),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(""),[v,y]=T.useState(""),[b,w]=T.useState(!1),[x,S]=T.useState(""),[_,N]=T.useState([]),E=T.useRef(null),C=T.useRef(null),k=T.useRef(null),j=T.useMemo(()=>{const ee=m.toLowerCase().trim();let Ne=o.filter(We=>!(n&&We.id===parseInt(t)||n&&We.parent===parseInt(t)));return ee&&(Ne=Ne.filter(We=>{var lt;return(lt=rr(We))==null?void 0:lt.toLowerCase().includes(ee)})),[...Ne].sort((We,lt)=>(rr(We)||"").localeCompare(rr(lt)||""))},[o,m,t,n]),P=T.useMemo(()=>o.find(ee=>ee.id===parseInt(v)),[o,v]),O=T.useMemo(()=>{const ee=x.toLowerCase().trim(),Ne=l.map(Ie=>{var Ze,Mr,St,M;return{id:Ie.id,type:"person",name:Gn(((Ze=Ie.title)==null?void 0:Ze.rendered)||""),thumbnail:(M=(St=(Mr=Ie._embedded)==null?void 0:Mr["wp:featuredmedia"])==null?void 0:St[0])==null?void 0:M.source_url}}),We=o.filter(Ie=>!n||Ie.id!==parseInt(t)).map(Ie=>{var Ze,Mr,St;return{id:Ie.id,type:"company",name:rr(Ie),thumbnail:(St=(Mr=(Ze=Ie._embedded)==null?void 0:Ze["wp:featuredmedia"])==null?void 0:Mr[0])==null?void 0:St.source_url}});let lt=[...Ne,...We];ee&&(lt=lt.filter(Ie=>{var Ze;return(Ze=Ie.name)==null?void 0:Ze.toLowerCase().includes(ee)}));const zt=_.map(Ie=>`${Ie.type}-${Ie.id}`);return lt=lt.filter(Ie=>!zt.includes(`${Ie.type}-${Ie.id}`)),lt.sort((Ie,Ze)=>(Ie.name||"").localeCompare(Ze.name||""))},[l,o,x,_,t,n]);T.useEffect(()=>{const ee=Ne=>{C.current&&!C.current.contains(Ne.target)&&p(!1)};if(f)return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[f]),T.useEffect(()=>{const ee=Ne=>{k.current&&!k.current.contains(Ne.target)&&w(!1)};if(b)return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[b]);const A=nt({mutationFn:ee=>Le.createCompany(ee),onSuccess:ee=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${ee.data.id}`)}}),q=nt({mutationFn:ee=>Le.updateCompany(t,ee),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${t}`)}}),D=async ee=>{var We;const Ne=(We=ee.target.files)==null?void 0:We[0];if(Ne){if(!Ne.type.startsWith("image/")){alert("Please select an image file");return}if(Ne.size>5*1024*1024){alert("Image size must be less than 5MB");return}h(!0);try{await Ae.uploadCompanyLogo(t,Ne),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.refetchQueries({queryKey:["company",t]}),r.refetchQueries({queryKey:["companies"]}),r.refetchQueries({queryKey:["people"]})}catch(lt){console.error("Failed to upload logo:",lt),alert("Failed to upload logo. Please try again.")}finally{h(!1),E.current&&(E.current.value="")}}},{register:B,handleSubmit:F,reset:K,formState:{errors:X,isSubmitting:G}}=ll();T.useEffect(()=>{var ee,Ne,We;i&&(K({title:Gn(((ee=i.title)==null?void 0:ee.rendered)||""),website:((Ne=i.acf)==null?void 0:Ne.website)||"",industry:((We=i.acf)==null?void 0:We.industry)||""}),i.parent&&y(String(i.parent)))},[i,K]),T.useEffect(()=>{var ee,Ne;if(((Ne=(ee=i==null?void 0:i.acf)==null?void 0:ee.investors)==null?void 0:Ne.length)>0&&l.length>0&&o.length>0){const lt=i.acf.investors.map(zt=>{var Mr,St,M,$,z,se,J;const Ie=l.find(Y=>Y.id===zt);if(Ie)return{id:Ie.id,type:"person",name:Gn(((Mr=Ie.title)==null?void 0:Mr.rendered)||""),thumbnail:($=(M=(St=Ie._embedded)==null?void 0:St["wp:featuredmedia"])==null?void 0:M[0])==null?void 0:$.source_url};const Ze=o.find(Y=>Y.id===zt);return Ze?{id:Ze.id,type:"company",name:rr(Ze),thumbnail:(J=(se=(z=Ze._embedded)==null?void 0:z["wp:featuredmedia"])==null?void 0:se[0])==null?void 0:J.source_url}:null}).filter(Boolean);N(lt)}},[i,l,o]),Hc(n&&i?`Edit ${rr(i)||"organization"}`:"New organization");const L=async ee=>{const Ne=_.map(lt=>lt.id),We={title:ee.title,status:"publish",parent:v?parseInt(v):0,acf:{website:ee.website,industry:ee.industry,investors:Ne}};n?q.mutate(We):A.mutate(We)};return n&&s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(He,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(em,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit organization":"Add new organization"}),u.jsxs("form",{onSubmit:F(L),className:"space-y-6",children:[n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Logo"}),u.jsxs("div",{className:"flex items-center gap-4",children:[(Be=(ce=(Z=i==null?void 0:i._embedded)==null?void 0:Z["wp:featuredmedia"])==null?void 0:ce[0])!=null&&Be.source_url?u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:i._embedded["wp:featuredmedia"][0].source_url,alt:rr(i)||"Organization logo",className:"w-20 h-20 rounded-lg object-contain bg-white"}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var ee;return(ee=E.current)==null?void 0:ee.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Tf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}):u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsx(Tf,{className:"w-8 h-8 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var ee;return(ee=E.current)==null?void 0:ee.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Tf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),u.jsxs("div",{children:[u.jsx("button",{type:"button",onClick:()=>{var ee;return(ee=E.current)==null?void 0:ee.click()},className:"btn-secondary text-sm",disabled:d,children:(pt=(tt=(Te=i==null?void 0:i._embedded)==null?void 0:Te["wp:featuredmedia"])==null?void 0:tt[0])!=null&&pt.source_url?"Change logo":"Upload logo"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click the logo or button to upload a new logo"})]}),u.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:D,className:"hidden",disabled:d})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization name *"}),u.jsx("input",{...B("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc."}),X.title&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:X.title.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Website"}),u.jsx("input",{...B("website"),type:"url",className:"input",placeholder:"https://example.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Industry"}),u.jsx("input",{...B("industry"),className:"input",placeholder:"Technology"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Parent organization"}),u.jsxs("div",{className:"relative",ref:C,children:[u.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a,children:[P?u.jsxs("div",{className:"flex items-center gap-2",children:[(Jt=(kr=(Qr=P._embedded)==null?void 0:Qr["wp:featuredmedia"])==null?void 0:kr[0])!=null&&Jt.source_url?u.jsx("img",{src:P._embedded["wp:featuredmedia"][0].source_url,alt:rr(P),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Pr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:rr(P)})]}):u.jsx("span",{className:"text-gray-400",children:"No parent organization"}),u.jsx(Uy,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Nc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:m,onChange:ee=>g(ee.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsxs("div",{className:"overflow-y-auto max-h-48",children:[u.jsx("button",{type:"button",onClick:()=>{y(""),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${v?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),a?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):j.length>0?j.map(ee=>{var Ne,We,lt;return u.jsxs("button",{type:"button",onClick:()=>{y(String(ee.id)),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${v===String(ee.id)?"bg-primary-50":""}`,children:[(lt=(We=(Ne=ee._embedded)==null?void 0:Ne["wp:featuredmedia"])==null?void 0:We[0])!=null&&lt.source_url?u.jsx("img",{src:ee._embedded["wp:featuredmedia"][0].source_url,alt:rr(ee),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Pr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:rr(ee)})]},ee.id)}):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"label flex items-center",children:[u.jsx(Hy,{className:"w-4 h-4 mr-2"}),"Investors"]}),_.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map(ee=>u.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[ee.thumbnail?u.jsx("img",{src:ee.thumbnail,alt:ee.name,className:`w-5 h-5 object-cover ${ee.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${ee.type==="person"?"rounded-full":"rounded"}`,children:ee.type==="person"?u.jsx(Za,{className:"w-3 h-3 text-gray-500"}):u.jsx(Pr,{className:"w-3 h-3 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-700",children:ee.name}),u.jsx("button",{type:"button",onClick:()=>N(Ne=>Ne.filter(We=>!(We.id===ee.id&&We.type===ee.type))),className:"ml-1 text-gray-400 hover:text-gray-600",children:u.jsx(Ft,{className:"w-3.5 h-3.5"})})]},`${ee.type}-${ee.id}`))}),u.jsxs("div",{className:"relative",ref:k,children:[u.jsxs("button",{type:"button",onClick:()=>w(!b),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a||c,children:[u.jsx("span",{className:"text-gray-400",children:"Add investor..."}),u.jsx(Uy,{className:`w-4 h-4 text-gray-400 transition-transform ${b?"rotate-180":""}`})]}),b&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Nc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:x,onChange:ee=>S(ee.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:a||c?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):O.length>0?O.map(ee=>u.jsxs("button",{type:"button",onClick:()=>{N(Ne=>[...Ne,ee]),S("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[ee.thumbnail?u.jsx("img",{src:ee.thumbnail,alt:ee.name,className:`w-6 h-6 object-cover ${ee.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${ee.type==="person"?"rounded-full":"rounded"}`,children:ee.type==="person"?u.jsx(Za,{className:"w-4 h-4 text-gray-500"}):u.jsx(Pr,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-sm text-gray-900 truncate block",children:ee.name}),u.jsx("span",{className:"text-xs text-gray-500",children:ee.type==="person"?"Person":"Organization"})]})]},`${ee.type}-${ee.id}`)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:x?"No results found":"No people or organizations available"})})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(He,{to:"/companies",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:G,children:[u.jsx(lI,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create organization"]})]})]})]})]})}function hEe({person:t,dateType:e}){var r;return u.jsx("div",{className:"flex items-center gap-3 py-2",children:u.jsxs(He,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),u.jsx("span",{className:"font-medium truncate",children:t.name}),u.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function fEe({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(c=>{i.push({person:c,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),u.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:u.jsx("span",{className:"text-2xl font-bold leading-none",children:kn(new Date(e.next_occurrence),"d")})}),u.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>u.jsx(hEe,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function pEe(){const[t,e]=T.useState(!1),[r,n]=T.useState(!1),i=bt(),{data:s,isLoading:o,error:a}=Ype(365),{data:l=[],isLoading:c}=Wc(),d=nt({mutationFn:async m=>{const g={title:m.title,status:"publish",date_type:m.date_type,acf:{date_value:m.date_value,related_people:m.related_people,is_recurring:m.is_recurring,year_unknown:m.year_unknown}};return(await Le.createDate(g)).data},onSuccess:()=>{i.invalidateQueries({queryKey:["reminders"]}),e(!1)}}),h=async m=>{n(!0);try{await d.mutateAsync(m)}finally{n(!1)}},f=(s==null?void 0:s.reduce((m,g)=>{const v=kn(new Date(g.next_occurrence),"yyyy-MM-dd");return m[v]||(m[v]=[]),m[v].push(g),m},{}))||{},p=Object.entries(f).reduce((m,[g,v])=>{const y=kn(new Date(g),"MMMM yyyy");return m[y]||(m[y]=[]),m[y].push(v),m},{});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("p",{className:"text-gray-600",children:[(s==null?void 0:s.length)||0," upcoming dates"]}),u.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),o&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),a&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!o&&!a&&(s==null?void 0:s.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx(yo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),u.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(p).map(([m,g])=>u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:m}),u.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:g.map(v=>u.jsx(fEe,{dates:v},v[0].next_occurrence))})]},m)),u.jsx(TM,{isOpen:t,onClose:()=>e(!1),onSubmit:h,isLoading:r,allPeople:l,isPeopleLoading:c})]})}function mEe(){Hc("Todos");const[t,e]=T.useState(!1),[r,n]=T.useState(null),[i,s]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(null),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(null),{data:v,isLoading:y}=zte(!0),b=Vte(),w=Qpe(),x=SM(),S=T.useMemo(()=>gre(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:N,olderCompletedTodos:E}=T.useMemo(()=>{if(!v)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const D=[],B=[],F=[];return v.forEach(K=>{if(!K.is_completed)D.push(K);else try{const X=fp(K.created);Zge(X,S)?B.push(K):F.push(K)}catch{F.push(K)}}),{incompleteTodos:D,recentlyCompletedTodos:B,olderCompletedTodos:F}},[v,S]),C=D=>{if(!D.is_completed){c(D),h(!0);return}b.mutate({todoId:D.id,data:{content:D.content,due_date:D.due_date,is_completed:!1}})},k=()=>{l&&(b.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),c(null))},j=()=>{if(!l)return;const D=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:D,activity_type:"note",participants:[]}),h(!1),p(!0)},P=async D=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:D}),await b.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),c(null),g(null)}catch(B){console.error("Failed to create activity:",B),alert("Failed to create activity. Please try again.")}},O=async D=>{r&&(await b.mutateAsync({todoId:r.id,data:D}),s(!1),n(null))},A=async D=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync(D)};if(y)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const q=[...N,...E];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),u.jsxs("div",{className:"flex items-center gap-2",children:[E.length>0&&u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[u.jsx(aI,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[u.jsx(sr,{className:"w-4 h-4"}),"Add todo"]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx($d,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(D=>u.jsx(ax,{todo:D,onToggle:C,onEdit:B=>{n(B),s(!0)},onDelete:A},D.id))}):u.jsxs("div",{className:"p-8 text-center",children:[u.jsx(Fs,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No open todos"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),N.length>0&&!t&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Epe,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",N.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:N.map(D=>u.jsx(ax,{todo:D,onToggle:C,onEdit:B=>{n(B),s(!0)},onDelete:A},D.id))})]}),t&&q.length>0&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",q.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:q.map(D=>u.jsx(ax,{todo:D,onToggle:C,onEdit:B=>{n(B),s(!0)},onDelete:A},D.id))})]}),u.jsx(ise,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:O,isLoading:b.isPending,todo:r}),u.jsx(Kte,{isOpen:o,onClose:()=>a(!1)}),u.jsx(OM,{isOpen:d,onClose:()=>{h(!1),c(null)},todo:l,onComplete:k,onCompleteAsActivity:j}),u.jsx(gA,{isOpen:f,onClose:()=>{p(!1),c(null),g(null)},onSubmit:P,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function ax({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=im(t);return u.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(Fs,{className:"w-5 h-5 text-primary-600"}):u.jsx($d,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[u.jsxs(He,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&u.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",kn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function gEe(){var y,b,w;const[t,e]=T.useState(null),[r,n]=T.useState(""),[i,s]=T.useState(!1),[o,a]=T.useState(null),l=bt(),c=nt({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await he.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),d=nt({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await he.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),c.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},v=()=>{e(null),n(""),a(null),c.reset(),d.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),u.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((y=d.data.stats.errors)==null?void 0:y.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>u.jsx("li",{children:x},S))})]})]}),u.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Ec,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(tm,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Cc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&u.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[u.jsxs("p",{children:["Export format: ",o.version]}),u.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),u.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),u.jsxs("p",{children:["Notes: ",o.summary.notes]}),u.jsxs("p",{children:["Dates: ",o.summary.reminders]}),u.jsxs("p",{children:["Photos: ",o.summary.photos]}),u.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(bM,{className:"h-4 w-4 text-gray-400"})}),u.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&u.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),u.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(Ec,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Cc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(b=d.error.response)==null?void 0:b.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function yEe(){var g,v,y;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),o=bt(),a=nt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await he.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{s(b)},onError:b=>{var w,x;s({valid:!1,error:((x=(w=b.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=nt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await he.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),c=T.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?n(!0):b.type==="dragleave"&&n(!1)},[]),d=T.useCallback(b=>{b.preventDefault(),b.stopPropagation(),n(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&f(b.dataTransfer.files[0])},[]),h=b=>{b.target.files&&b.target.files[0]&&f(b.target.files[0])},f=b=>{const w=b.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(b),s(null),l.reset(),a.mutate(b)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((b,w)=>u.jsx("li",{children:b},w))})]})]}),u.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:d,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Ec,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(tm,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Cc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(qs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Pr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(jte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(qte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?u.jsxs(u.Fragment,{children:[u.jsx(Ec,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Cc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(v=l.error.response)==null?void 0:v.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function vEe(){var x,S,_;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),[o,a]=T.useState({}),l=bt(),c=nt({mutationFn:async N=>{const E=new FormData;return E.append("file",N),(await he.post("/prm/v1/import/google-contacts/validate",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:N=>{var E;if(s(N),((E=N.duplicates)==null?void 0:E.length)>0){const C={};N.duplicates.forEach(k=>{C[k.index]="merge"}),a(C)}},onError:N=>{var E,C;s({valid:!1,error:((C=(E=N.response)==null?void 0:E.data)==null?void 0:C.message)||"Failed to validate file"})}}),d=nt({mutationFn:async({file:N,decisions:E})=>{const C=new FormData;return C.append("file",N),C.append("decisions",JSON.stringify(E)),(await he.post("/prm/v1/import/google-contacts",C,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?n(!0):N.type==="dragleave"&&n(!1)},[]),f=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),n(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&m(N.dataTransfer.files[0])},[]),p=N=>{N.target.files&&N.target.files[0]&&m(N.target.files[0])},m=N=>{if(!N.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(N),s(null),a({}),d.reset(),c.mutate(N)},g=(N,E)=>{a(C=>({...C,[N]:E}))},v=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),c.reset(),d.reset()},b=(i==null?void 0:i.duplicates)||[],w=b.length>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),u.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[u.jsxs("li",{children:["Go to ",u.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),u.jsx("li",{children:'Click "Export" in the left sidebar'}),u.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((N,E)=>u.jsx("li",{children:N},E))})]})]}),u.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Ec,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(vM,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Cc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(qs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Pr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(jte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(qte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&u.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(bpe,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("h3",{className:"font-medium text-amber-900",children:[b.length," contact",b.length>1?"s":""," may already exist"]}),u.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),u.jsx("div",{className:"mt-4 space-y-4",children:b.map(N=>u.jsx(bEe,{duplicate:N,decision:o[N.index]||"merge",onDecision:E=>g(N.index,E)},N.index))})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(Ec,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Cc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=d.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function bEe({duplicate:t,decision:e,onDecision:r}){var n,i;return u.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),u.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),u.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?u.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Fpe,{className:"h-4 w-4"}),"Update existing"]}),u.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Upe,{className:"h-4 w-4"}),"Create new"]}),u.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Bpe,{className:"h-4 w-4"}),"Skip"]})]})]})}const xEe=[{id:"sync",label:"Sync",icon:qpe},{id:"notifications",label:"Notifications",icon:Spe},{id:"data",label:"Data",icon:Ite},{id:"admin",label:"Admin",icon:Lpe,adminOnly:!0},{id:"about",label:"About",icon:Ope}];function wEe(){const[t,e]=dhe(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=ye=>{e({tab:ye})},a=xEe.filter(ye=>!ye.adminOnly||n),[l,c]=T.useState(""),[d,h]=T.useState(""),[f,p]=T.useState(!0),[m,g]=T.useState(!1),[v,y]=T.useState(!1),[b,w]=T.useState([]),[x,S]=T.useState(!0),[_,N]=T.useState(""),[E,C]=T.useState(!1),[k,j]=T.useState(null),[P,O]=T.useState(!1),[A,q]=T.useState(null),[D,B]=T.useState([]),[F,K]=T.useState(""),[X,G]=T.useState(!1),[L,Z]=T.useState(""),[ce,Be]=T.useState("09:00"),[Te,tt]=T.useState(!0),[pt,Qr]=T.useState(!1),[kr,Jt]=T.useState(!1),[ee,Ne]=T.useState(""),[We,lt]=T.useState(!1),[zt,Ie]=T.useState([]),[Ze,Mr]=T.useState([]),[St,M]=T.useState([]),[$,z]=T.useState(!1),[se,J]=T.useState(!1),[Y,ge]=T.useState(!1),[ze,Xe]=T.useState(""),[kt,Se]=T.useState(!1),[ne,pe]=T.useState("");T.useEffect(()=>{(async()=>{try{const Ee=await he.get("/prm/v1/user/ical-url");c(Ee.data.url),h(Ee.data.webcal_url)}catch(Ee){console.error("Failed to fetch iCal URL:",Ee)}finally{p(!1)}})()},[]),T.useEffect(()=>{i&&(async()=>{try{const[Ee,De]=await Promise.all([Ae.getAppPasswords(i),Ae.getCardDAVUrls()]);w(Ee.data||[]),q(De.data)}catch(Ee){console.error("Failed to fetch app passwords:",Ee)}finally{S(!1)}})()},[i]);const ue=async()=>{z(!0);try{const[ye,Ee]=await Promise.all([Ae.getSlackChannels(),Ae.getSlackTargets()]);Ie(ye.data.channels||[]),Mr(ye.data.users||[]),M(Ee.data.targets||[])}catch(ye){console.error("Failed to fetch Slack data:",ye),Ne("Failed to load Slack channels and users. Please try refreshing the page.")}finally{z(!1)}};T.useEffect(()=>{(async()=>{try{const Ee=await Ae.getNotificationChannels();B(Ee.data.channels||["email"]),K(Ee.data.slack_webhook||""),Be(Ee.data.notification_time||"09:00");const De=await Ae.getSlackStatus(),Vt=De.data.connected||!1;G(Vt),Z(De.data.workspace_name||""),Vt&&await ue()}catch(Ee){console.error("Failed to fetch notification channels:",Ee)}finally{tt(!1)}})()},[]),T.useEffect(()=>{X&&ue()},[X]),T.useEffect(()=>{const ye=new URLSearchParams(window.location.search),Ee=ye.get("slack_connected"),De=ye.get("slack_error");Ee==="1"?(Ne("Slack connected successfully!"),o("notifications"),Ae.getSlackStatus().then(Vt=>{G(Vt.data.connected||!1),Z(Vt.data.workspace_name||"")}),e({tab:"notifications"})):De&&(Ne(`Slack connection failed: ${De}`),o("notifications"),e({tab:"notifications"}))},[]);const Ce=async()=>{var ye,Ee;try{const De=await he.get("/prm/v1/slack/oauth/authorize");window.location.href=De.data.oauth_url}catch(De){console.error("Failed to get Slack OAuth URL:",De),alert(((Ee=(ye=De.response)==null?void 0:ye.data)==null?void 0:Ee.message)||"Failed to connect Slack")}},Ye=async()=>{var ye,Ee;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){lt(!0);try{await Ae.disconnectSlack(),G(!1),Z(""),Ie([]),Mr([]),M([]),Ne("Slack disconnected successfully"),D.includes("slack")&&await gu("slack")}catch(De){console.error("Failed to disconnect Slack:",De),alert(((Ee=(ye=De.response)==null?void 0:ye.data)==null?void 0:Ee.message)||"Failed to disconnect Slack")}finally{lt(!1)}}},Ei=ye=>{const Ee=St.includes(ye)?St.filter(De=>De!==ye):[...St,ye];M(Ee)},wn=async()=>{var ye,Ee;J(!0);try{await Ae.updateSlackTargets(St),Ne("Notification targets saved successfully"),setTimeout(()=>Ne(""),3e3)}catch(De){console.error("Failed to save Slack targets:",De),alert(((Ee=(ye=De.response)==null?void 0:ye.data)==null?void 0:Ee.message)||"Failed to save notification targets")}finally{J(!1)}},xl=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch(ye){console.error("Failed to copy:",ye)}},wl=async ye=>{var Ee,De;if(ye.preventDefault(),!!_.trim()){C(!0);try{const Vt=await Ae.createAppPassword(i,_.trim());j(Vt.data.password),w([...b,Vt.data]),N("")}catch(Vt){console.error("Failed to create app password:",Vt),alert(((De=(Ee=Vt.response)==null?void 0:Ee.data)==null?void 0:De.message)||"Failed to create app password")}finally{C(!1)}}},ai=async(ye,Ee)=>{var De,Vt;if(confirm(`Are you sure you want to revoke the app password "${Ee}"? Any devices using this password will no longer be able to sync.`))try{await Ae.deleteAppPassword(i,ye),w(b.filter(Tr=>Tr.uuid!==ye))}catch(Tr){console.error("Failed to delete app password:",Tr),alert(((Vt=(De=Tr.response)==null?void 0:De.data)==null?void 0:Vt.message)||"Failed to revoke app password")}},Sl=async()=>{try{await navigator.clipboard.writeText(k),O(!0),setTimeout(()=>O(!1),2e3)}catch(ye){console.error("Failed to copy:",ye)}},Ib=async ye=>{try{await navigator.clipboard.writeText(ye)}catch(Ee){console.error("Failed to copy:",Ee)}},mu=ye=>{if(!ye)return"Never";const Ee=new Date(ye);return Ee.toLocaleDateString("en-US",{month:"short",day:"numeric",year:Ee.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Rb=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){y(!0);try{const ye=await he.post("/prm/v1/user/regenerate-ical-token");c(ye.data.url),h(ye.data.webcal_url)}catch(ye){console.error("Failed to regenerate token:",ye)}finally{y(!1)}}},gu=async ye=>{var De,Vt;const Ee=D.includes(ye)?D.filter(Tr=>Tr!==ye):[...D,ye];Qr(!0);try{await Ae.updateNotificationChannels(Ee),B(Ee)}catch(Tr){console.error("Failed to update notification channels:",Tr),alert(((Vt=(De=Tr.response)==null?void 0:De.data)==null?void 0:Vt.message)||"Failed to update notification channels")}finally{Qr(!1)}},Mb=async ye=>{var Ks,_l;const[Ee,De]=ye.split(":").map(Number),Vt=Math.round(De/5)*5,Tr=Vt===60?(Ee+1)%24:Ee,yu=Vt===60?0:Vt,Km=`${String(Tr).padStart(2,"0")}:${String(yu).padStart(2,"0")}`;Be(Km),Jt(!0);try{await Ae.updateNotificationTime(Km)}catch($h){console.error("Failed to update notification time:",$h),alert(((_l=(Ks=$h.response)==null?void 0:Ks.data)==null?void 0:_l.message)||"Failed to update notification time");const Db=await Ae.getNotificationChannels();Be(Db.data.notification_time||"09:00")}finally{Jt(!1)}},Hm=async()=>{var ye,Ee;if(confirm("This will send reminder emails for all reminders due today. Continue?")){ge(!0),Xe("");try{const De=await Ae.triggerReminders();Xe(De.data.message||"Reminders triggered successfully.")}catch(De){console.error("Failed to trigger reminders:",De),Xe(((Ee=(ye=De.response)==null?void 0:ye.data)==null?void 0:Ee.message)||"Failed to trigger reminders. Please check server logs.")}finally{ge(!1)}}},Ab=async()=>{var ye,Ee;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){Se(!0),pe("");try{const De=await Ae.rescheduleCronJobs();pe(De.data.message||"Cron jobs rescheduled successfully.")}catch(De){console.error("Failed to reschedule cron jobs:",De),pe(((Ee=(ye=De.response)==null?void 0:ye.data)==null?void 0:Ee.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{Se(!1)}}},Wm=()=>{switch(s){case"sync":return u.jsx(SEe,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:xl,regenerateIcalToken:Rb,regenerating:v,appPasswords:b,appPasswordsLoading:x,carddavUrls:A,config:r,newPasswordName:_,setNewPasswordName:N,handleCreateAppPassword:wl,creatingPassword:E,newPassword:k,setNewPassword:j,copyNewPassword:Sl,passwordCopied:P,handleDeleteAppPassword:ai,formatDate:mu,copyCarddavUrl:Ib});case"notifications":return u.jsx(_Ee,{notificationsLoading:Te,notificationChannels:D,toggleChannel:gu,savingChannels:pt,slackConnected:X,slackWorkspaceName:L,handleConnectSlack:Ce,handleDisconnectSlack:Ye,disconnectingSlack:We,webhookTestMessage:ee,slackChannels:zt,slackUsers:Ze,slackTargets:St,loadingSlackData:$,handleToggleSlackTarget:Ei,handleSaveSlackTargets:wn,savingSlackTargets:se,slackWebhook:F,notificationTime:ce,handleNotificationTimeChange:Mb,savingTime:kr});case"data":return u.jsx(EEe,{});case"admin":return n?u.jsx(NEe,{handleTriggerReminders:Hm,triggeringReminders:Y,reminderMessage:ze,handleRescheduleCron:Ab,reschedulingCron:kt,cronMessage:ne}):null;case"about":return u.jsx(CEe,{config:r});default:return null}};return u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(ye=>{const Ee=ye.icon,De=s===ye.id;return u.jsxs("button",{onClick:()=>o(ye.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${De?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[u.jsx(Ee,{className:"w-4 h-4"}),ye.label]},ye.id)})})}),u.jsx("div",{className:"space-y-6",children:Wm()})]})}function SEe({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:c,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:v,copyNewPassword:y,passwordCopied:b,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:_=>_.target.select()}),u.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("a",{href:e,className:"btn-primary",children:u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),u.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),u.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[c&&u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[u.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:c.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(c.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),u.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),u.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&u.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:y,className:"btn-primary whitespace-nowrap",children:b?"Copied!":"Copy"})]}),u.jsx("button",{onClick:()=>v(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),u.jsx("div",{className:"space-y-2",children:a.map(_=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:_.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(_.created),"  Last used ",x(_.last_used)]})]}),u.jsx("button",{onClick:()=>w(_.uuid,_.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},_.uuid))})]}),a.length===0&&!g&&u.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function _Ee({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:c,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:v,slackWebhook:y,notificationTime:b,handleNotificationTimeChange:w,savingTime:x}){return u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Email"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Slack"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsx("div",{children:i?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&u.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),u.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")||c.includes("disconnected")?"text-green-600":"text-red-600"}`,children:c}),e.includes("slack")&&u.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?u.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):u.jsxs(u.Fragment,{children:[d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsx("span",{className:"text-sm",children:S.name})]},S.id))})]}),h.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsxs("span",{className:"text-sm",children:[S.name,S.is_me&&u.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},S.id))})]}),d.length===0&&h.length===0&&!p&&u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),u.jsx("button",{onClick:g,disabled:v,className:"btn-primary text-sm mt-4",children:v?"Saving...":"Save targets"})]})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")?"text-green-600":"text-red-600"}`,children:c}),u.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),y&&!i&&u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),u.jsx("input",{type:"time",value:b,onChange:S=>w(S.target.value),className:"input",disabled:x,step:"300"}),b&&u.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[u.jsxs("p",{className:"text-gray-700",children:[u.jsx("span",{className:"font-medium",children:"UTC:"})," ",b]}),u.jsxs("p",{className:"text-gray-700 mt-1",children:[u.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[S,_]=b.split(":"),N=new Date;return N.setUTCHours(parseInt(S),parseInt(_),0,0),N.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}})()]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]})}const $q=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:tm,component:yEe},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:vM,component:vEe},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:Ite,component:gEe}];function EEe(){var i;const[t,e]=T.useState("vcard"),r=s=>{s==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":s==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(i=$q.find(s=>s.id===t))==null?void 0:i.component;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:$q.map(s=>{const o=s.icon,a=t===s.id;return u.jsxs("button",{onClick:()=>e(s.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:"block",children:s.name}),u.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:s.description})]})]},s.id)})})}),n&&u.jsx(n,{})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(tm,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),u.jsx(oI,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(vM,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),u.jsx(oI,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function NEe({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(He,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"User approval"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(He,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"Relationship types"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Trigger reminders"}),u.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),u.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),u.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function CEe({config:t}){return u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",kc]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsxs("p",{className:"text-sm text-gray-600",children:[kc," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function Fq({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=T.useState(""),[o,a]=T.useState(!1),l=T.useRef(null),c=T.useRef(null),d=T.useMemo(()=>r.sort((v,y)=>{const b=(v.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return b<w?-1:b>w?1:0}),[r]),h=T.useMemo(()=>{if(!i)return d.slice(0,10);const v=i.toLowerCase();return d.filter(y=>(y.name||"").toLowerCase().includes(v)).slice(0,10)},[d,i]),f=T.useMemo(()=>d.find(v=>v.id===parseInt(t,10)),[d,t]);T.useEffect(()=>{const v=y=>{c.current&&!c.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const p=v=>{e(v?v.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:f&&!o?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[u.jsx("span",{children:g}),u.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Ft,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:l,type:"text",value:i,onChange:v=>{s(v.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&u.jsx("div",{ref:c,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(v=>u.jsx("button",{type:"button",onClick:()=>p(v.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===v.id.toString()?"bg-primary-50":""}`,children:v.name},v.id))]}):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function kEe(){Hc("Relationship Types - Settings");const t=bt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(Dte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),u.jsx(He,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ht({queryKey:["relationship-types"],queryFn:async()=>(await Le.getRelationshipTypes()).data}),[s,o]=T.useState(null),[a,l]=T.useState(""),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,v]=T.useState(!1),y=nt({mutationFn:async({id:j,name:P,inverseId:O})=>{const A={name:P};return O&&(A.acf={inverse_relationship_type:parseInt(O,10)}),Le.updateRelationshipType(j,A)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),b=nt({mutationFn:async({name:j,inverseId:P})=>{const O={name:j};return P&&(O.acf={inverse_relationship_type:parseInt(P,10)}),Le.createRelationshipType(O)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),v(!1)}}),w=nt({mutationFn:j=>Le.deleteRelationshipType(j),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=nt({mutationFn:()=>Le.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return u.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):u.jsx(Mte,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=j=>{var O;o(j.id),l(j.name);const P=(O=j.acf)==null?void 0:O.inverse_relationship_type;d(P?P.toString():"")},N=()=>{o(null),l(""),d("")},E=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:c||null})},C=()=>{if(!h.trim()){alert("Name is required");return}b.mutate({name:h.trim(),inverseId:p||null})},k=(j,P)=>{window.confirm(`Are you sure you want to delete "${P}"? This cannot be undone.`)&&w.mutate(j)};return i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),u.jsx("div",{className:"flex gap-2",children:!g&&u.jsxs(u.Fragment,{children:[u.jsx(S,{}),u.jsxs("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[u.jsx(sr,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&u.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:h,onChange:j=>f(j.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(Fq,{value:p,onChange:m,relationshipTypes:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:C,disabled:b.isPending,className:"btn-primary flex items-center gap-2",children:[b.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(lI,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsx("button",{onClick:()=>{v(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),u.jsx("div",{className:"space-y-2",children:n.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(j=>{var D,B;const P=s===j.id,O=(D=j.acf)==null?void 0:D.inverse_relationship_type,A=typeof O=="object"&&(O!=null&&O.ID)?O.ID:typeof O=="object"&&(O!=null&&O.id)?O.id:O,q=A?n.find(F=>F.id===A):null;return u.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:P?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:a,onChange:F=>l(F.target.value),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(Fq,{value:c,onChange:d,relationshipTypes:n,currentTypeId:j.id}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:E,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(lI,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsxs("button",{onClick:N,className:"btn-secondary flex items-center gap-2",children:[u.jsx(Ft,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium",children:j.name}),q&&u.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",u.jsx("span",{className:"font-medium",children:q.name})]}),!q&&((B=j.acf)==null?void 0:B.inverse_relationship_type)===null&&u.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(j),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:u.jsx(Dpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>k(j.id,j.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(di,{className:"w-4 h-4"})})]})]})},j.id)})})]})})}function TEe(){Hc("User Approval - Settings");const t=bt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(Dte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),u.jsx(He,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ht({queryKey:["users"],queryFn:async()=>(await Ae.getUsers()).data}),s=nt({mutationFn:p=>Ae.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=nt({mutationFn:p=>Ae.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=nt({mutationFn:p=>Ae.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},c=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(Ec,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(He,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(em,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),u.jsxs("div",{className:"space-y-6",children:[h.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),u.jsx("div",{className:"space-y-3",children:h.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:p.name}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email}),u.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[u.jsx(BF,{className:"w-4 h-4"}),"Approve"]}),u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(UF,{className:"w-4 h-4"}),"Deny"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(di,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),u.jsx("div",{className:"space-y-3",children:f.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,u.jsx(BF,{className:"w-4 h-4 text-green-600"})]}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(UF,{className:"w-4 h-4"}),"Revoke Access"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(di,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&u.jsx("div",{className:"card p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var qq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function it(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lx={exports:{}},Lq={},nf,Bq;function _r(){if(Bq)return nf;Bq=1;var t=function(e){return e&&e.Math===Math&&e};return nf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof qq=="object"&&qq)||t(typeof nf=="object"&&nf)||function(){return this}()||Function("return this")(),nf}var cx,zq;function xt(){return zq||(zq=1,cx=function(t){try{return!!t()}catch{return!0}}),cx}var ux,Vq;function cm(){if(Vq)return ux;Vq=1;var t=xt();return ux=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),ux}var dx,Uq;function X0(){if(Uq)return dx;Uq=1;var t=cm(),e=Function.prototype,r=e.apply,n=e.call;return dx=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),dx}var hx,Hq;function Ct(){if(Hq)return hx;Hq=1;var t=cm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return hx=t?n:function(i){return function(){return r.apply(i,arguments)}},hx}var fx,Wq;function Lo(){if(Wq)return fx;Wq=1;var t=Ct(),e=t({}.toString),r=t("".slice);return fx=function(n){return r(e(n),8,-1)},fx}var px,Kq;function sse(){if(Kq)return px;Kq=1;var t=Lo(),e=Ct();return px=function(r){if(t(r)==="Function")return e(r)},px}var mx,Gq;function Ur(){if(Gq)return mx;Gq=1;var t=typeof document=="object"&&document.all;return mx=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},mx}var gx={},yx,Yq;function Er(){if(Yq)return yx;Yq=1;var t=xt();return yx=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),yx}var vx,Qq;function ii(){if(Qq)return vx;Qq=1;var t=cm(),e=Function.prototype.call;return vx=t?e.bind(e):function(){return e.apply(e,arguments)},vx}var bx={},Xq;function yA(){if(Xq)return bx;Xq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return bx.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,bx}var xx,Jq;function um(){return Jq||(Jq=1,xx=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),xx}var wx,Zq;function J0(){if(Zq)return wx;Zq=1;var t=Ct(),e=xt(),r=Lo(),n=Object,i=t("".split);return wx=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,wx}var Sx,e5;function dm(){return e5||(e5=1,Sx=function(t){return t==null}),Sx}var _x,t5;function Qc(){if(t5)return _x;t5=1;var t=dm(),e=TypeError;return _x=function(r){if(t(r))throw new e("Can't call method on "+r);return r},_x}var Ex,r5;function Us(){if(r5)return Ex;r5=1;var t=J0(),e=Qc();return Ex=function(r){return t(e(r))},Ex}var Nx,n5;function Fn(){if(n5)return Nx;n5=1;var t=Ur();return Nx=function(e){return typeof e=="object"?e!==null:t(e)},Nx}var Cx,i5;function Rr(){return i5||(i5=1,Cx={}),Cx}var kx,s5;function wi(){if(s5)return kx;s5=1;var t=Rr(),e=_r(),r=Ur(),n=function(i){return r(i)?i:void 0};return kx=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},kx}var Tx,o5;function Hr(){if(o5)return Tx;o5=1;var t=Ct();return Tx=t({}.isPrototypeOf),Tx}var Ox,a5;function uh(){if(a5)return Ox;a5=1;var t=_r(),e=t.navigator,r=e&&e.userAgent;return Ox=r?String(r):"",Ox}var jx,l5;function hm(){if(l5)return jx;l5=1;var t=_r(),e=uh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),jx=a,jx}var Px,c5;function dh(){if(c5)return Px;c5=1;var t=hm(),e=xt(),r=_r(),n=r.String;return Px=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),Px}var Ix,u5;function ose(){if(u5)return Ix;u5=1;var t=dh();return Ix=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ix}var Rx,d5;function fm(){if(d5)return Rx;d5=1;var t=wi(),e=Ur(),r=Hr(),n=ose(),i=Object;return Rx=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},Rx}var Mx,h5;function hh(){if(h5)return Mx;h5=1;var t=String;return Mx=function(e){try{return t(e)}catch{return"Object"}},Mx}var Ax,f5;function Bo(){if(f5)return Ax;f5=1;var t=Ur(),e=hh(),r=TypeError;return Ax=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},Ax}var Dx,p5;function vA(){if(p5)return Dx;p5=1;var t=Bo(),e=dm();return Dx=function(r,n){var i=r[n];return e(i)?void 0:t(i)},Dx}var $x,m5;function OEe(){if(m5)return $x;m5=1;var t=ii(),e=Ur(),r=Fn(),n=TypeError;return $x=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},$x}var Fx={exports:{}},qx,g5;function fh(){return g5||(g5=1,qx=!0),qx}var Lx,y5;function jEe(){if(y5)return Lx;y5=1;var t=_r(),e=Object.defineProperty;return Lx=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},Lx}var v5;function bA(){if(v5)return Fx.exports;v5=1;var t=fh(),e=_r(),r=jEe(),n="__core-js_shared__",i=Fx.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Fx.exports}var Bx,b5;function ph(){if(b5)return Bx;b5=1;var t=bA();return Bx=function(e,r){return t[e]||(t[e]=r||{})},Bx}var zx,x5;function vs(){if(x5)return zx;x5=1;var t=Qc(),e=Object;return zx=function(r){return e(t(r))},zx}var Vx,w5;function Wr(){if(w5)return Vx;w5=1;var t=Ct(),e=vs(),r=t({}.hasOwnProperty);return Vx=Object.hasOwn||function(i,s){return r(e(i),s)},Vx}var Ux,S5;function Z0(){if(S5)return Ux;S5=1;var t=Ct(),e=0,r=Math.random(),n=t(1.1.toString);return Ux=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},Ux}var Hx,_5;function Kr(){if(_5)return Hx;_5=1;var t=_r(),e=ph(),r=Wr(),n=Z0(),i=dh(),s=ose(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Hx=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},Hx}var Wx,E5;function ase(){if(E5)return Wx;E5=1;var t=ii(),e=Fn(),r=fm(),n=vA(),i=OEe(),s=Kr(),o=TypeError,a=s("toPrimitive");return Wx=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},Wx}var Kx,N5;function xA(){if(N5)return Kx;N5=1;var t=ase(),e=fm();return Kx=function(r){var n=t(r,"string");return e(n)?n:n+""},Kx}var Gx,C5;function lse(){if(C5)return Gx;C5=1;var t=_r(),e=Fn(),r=t.document,n=e(r)&&e(r.createElement);return Gx=function(i){return n?r.createElement(i):{}},Gx}var Yx,k5;function cse(){if(k5)return Yx;k5=1;var t=Er(),e=xt(),r=lse();return Yx=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Yx}var T5;function eb(){if(T5)return gx;T5=1;var t=Er(),e=ii(),r=yA(),n=um(),i=Us(),s=xA(),o=Wr(),a=cse(),l=Object.getOwnPropertyDescriptor;return gx.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},gx}var Qx,O5;function PEe(){if(O5)return Qx;O5=1;var t=xt(),e=Ur(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Qx=n,Qx}var Xx,j5;function tb(){if(j5)return Xx;j5=1;var t=sse(),e=Bo(),r=cm(),n=t(t.bind);return Xx=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},Xx}var Jx={},Zx,P5;function use(){if(P5)return Zx;P5=1;var t=Er(),e=xt();return Zx=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Zx}var ew,I5;function zo(){if(I5)return ew;I5=1;var t=Fn(),e=String,r=TypeError;return ew=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},ew}var R5;function Ki(){if(R5)return Jx;R5=1;var t=Er(),e=cse(),r=use(),n=zo(),i=xA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return Jx.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Jx}var tw,M5;function mh(){if(M5)return tw;M5=1;var t=Er(),e=Ki(),r=um();return tw=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},tw}var rw,A5;function Ve(){if(A5)return rw;A5=1;var t=_r(),e=X0(),r=sse(),n=Ur(),i=eb().f,s=PEe(),o=Rr(),a=tb(),l=mh(),c=Wr(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return rw=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,N,E,C,k,j,P;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),C=b[N],S&&(h.dontCallGetSet?(P=i(y,N),k=P&&P.value):k=y[N]),E=S&&k?k:f[N],!(!x&&!v&&typeof C==typeof E)&&(h.bind&&S?j=a(E,t):h.wrap&&S?j=d(E):v&&n(E)?j=r(E):j=E,(h.sham||E&&E.sham||C&&C.sham)&&l(j,"sham",!0),l(b,N,j),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},rw}var D5;function IEe(){if(D5)return Lq;D5=1;var t=Ve(),e=Er(),r=Ki().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),Lq}var $5;function REe(){if($5)return lx.exports;$5=1,IEe();var t=Rr(),e=t.Object,r=lx.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),lx.exports}var nw,F5;function dse(){if(F5)return nw;F5=1;var t=REe();return nw=t,nw}var iw,q5;function MEe(){if(q5)return iw;q5=1;var t=dse();return iw=t,iw}var sw,L5;function AEe(){if(L5)return sw;L5=1;var t=MEe();return sw=t,sw}var ow,B5;function DEe(){return B5||(B5=1,ow=AEe()),ow}var $Ee=DEe(),FEe=it($Ee),z5={},aw,V5;function Xc(){if(V5)return aw;V5=1;var t=Lo();return aw=Array.isArray||function(r){return t(r)==="Array"},aw}var lw,U5;function qEe(){if(U5)return lw;U5=1;var t=Math.ceil,e=Math.floor;return lw=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},lw}var cw,H5;function gh(){if(H5)return cw;H5=1;var t=qEe();return cw=function(e){var r=+e;return r!==r||r===0?0:t(r)},cw}var uw,W5;function hse(){if(W5)return uw;W5=1;var t=gh(),e=Math.min;return uw=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},uw}var dw,K5;function hl(){if(K5)return dw;K5=1;var t=hse();return dw=function(e){return t(e.length)},dw}var hw,G5;function fse(){if(G5)return hw;G5=1;var t=TypeError,e=9007199254740991;return hw=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},hw}var fw,Y5;function rb(){if(Y5)return fw;Y5=1;var t=Er(),e=Ki(),r=um();return fw=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},fw}var pw,Q5;function wA(){if(Q5)return pw;Q5=1;var t=Kr(),e=t("toStringTag"),r={};return r[e]="z",pw=String(r)==="[object z]",pw}var mw,X5;function fl(){if(X5)return mw;X5=1;var t=wA(),e=Ur(),r=Lo(),n=Kr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return mw=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},mw}var gw,J5;function LEe(){if(J5)return gw;J5=1;var t=Ct(),e=Ur(),r=bA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),gw=r.inspectSource,gw}var yw,Z5;function pse(){if(Z5)return yw;Z5=1;var t=Ct(),e=xt(),r=Ur(),n=fl(),i=wi(),s=LEe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,yw=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,yw}var vw,e3;function BEe(){if(e3)return vw;e3=1;var t=Xc(),e=pse(),r=Fn(),n=Kr(),i=n("species"),s=Array;return vw=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},vw}var bw,t3;function SA(){if(t3)return bw;t3=1;var t=BEe();return bw=function(e,r){return new(t(e))(r===0?0:r)},bw}var xw,r3;function pm(){if(r3)return xw;r3=1;var t=xt(),e=Kr(),r=hm(),n=e("species");return xw=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},xw}var n3;function mse(){if(n3)return z5;n3=1;var t=Ve(),e=xt(),r=Xc(),n=Fn(),i=vs(),s=hl(),o=fse(),a=rb(),l=SA(),c=pm(),d=Kr(),h=hm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,N,E,C;for(S=-1,N=arguments.length;S<N;S++)if(C=S===-1?b:arguments[S],m(C))for(E=s(C),o(x+E),_=0;_<E;_++,x++)_ in C&&a(w,x,C[_]);else o(x+1),a(w,x++,C);return w.length=x,w}}),z5}var i3={},s3={},ww,o3;function pl(){if(o3)return ww;o3=1;var t=fl(),e=String;return ww=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},ww}var Sw={},_w,a3;function _A(){if(a3)return _w;a3=1;var t=gh(),e=Math.max,r=Math.min;return _w=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},_w}var Ew,l3;function zEe(){if(l3)return Ew;l3=1;var t=Us(),e=_A(),r=hl(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return Ew={includes:n(!0),indexOf:n(!1)},Ew}var Nw,c3;function mm(){return c3||(c3=1,Nw={}),Nw}var Cw,u3;function gse(){if(u3)return Cw;u3=1;var t=Ct(),e=Wr(),r=Us(),n=zEe().indexOf,i=mm(),s=t([].push);return Cw=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},Cw}var kw,d3;function EA(){return d3||(d3=1,kw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),kw}var Tw,h3;function nb(){if(h3)return Tw;h3=1;var t=gse(),e=EA();return Tw=Object.keys||function(n){return t(n,e)},Tw}var f3;function NA(){if(f3)return Sw;f3=1;var t=Er(),e=use(),r=Ki(),n=zo(),i=Us(),s=nb();return Sw.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},Sw}var Ow,p3;function VEe(){if(p3)return Ow;p3=1;var t=wi();return Ow=t("document","documentElement"),Ow}var jw,m3;function ib(){if(m3)return jw;m3=1;var t=ph(),e=Z0(),r=t("keys");return jw=function(n){return r[n]||(r[n]=e(n))},jw}var Pw,g3;function gm(){if(g3)return Pw;g3=1;var t=zo(),e=NA(),r=EA(),n=mm(),i=VEe(),s=lse(),o=ib(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,Pw=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},Pw}var Iw={},y3;function sb(){if(y3)return Iw;y3=1;var t=gse(),e=EA(),r=e.concat("length","prototype");return Iw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},Iw}var Rw={},Mw,v3;function yh(){if(v3)return Mw;v3=1;var t=Ct();return Mw=t([].slice),Mw}var b3;function yse(){if(b3)return Rw;b3=1;var t=Lo(),e=Us(),r=sb().f,n=yh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return Rw.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},Rw}var Aw={},x3;function ob(){return x3||(x3=1,Aw.f=Object.getOwnPropertySymbols),Aw}var Dw,w3;function ym(){if(w3)return Dw;w3=1;var t=mh();return Dw=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},Dw}var $w,S3;function CA(){if(S3)return $w;S3=1;var t=Ki();return $w=function(e,r,n){return t.f(e,r,n)},$w}var Fw={},_3;function ab(){if(_3)return Fw;_3=1;var t=Kr();return Fw.f=t,Fw}var qw,E3;function Qt(){if(E3)return qw;E3=1;var t=Rr(),e=Wr(),r=ab(),n=Ki().f;return qw=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},qw}var Lw,N3;function vse(){if(N3)return Lw;N3=1;var t=ii(),e=wi(),r=Kr(),n=ym();return Lw=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},Lw}var Bw,C3;function UEe(){if(C3)return Bw;C3=1;var t=wA(),e=fl();return Bw=t?{}.toString:function(){return"[object "+e(this)+"]"},Bw}var zw,k3;function Jc(){if(k3)return zw;k3=1;var t=wA(),e=Ki().f,r=mh(),n=Wr(),i=UEe(),s=Kr(),o=s("toStringTag");return zw=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},zw}var Vw,T3;function HEe(){if(T3)return Vw;T3=1;var t=_r(),e=Ur(),r=t.WeakMap;return Vw=e(r)&&/native code/.test(String(r)),Vw}var Uw,O3;function vm(){if(O3)return Uw;O3=1;var t=HEe(),e=_r(),r=Fn(),n=mh(),i=Wr(),s=bA(),o=ib(),a=mm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return Uw={set:h,get:f,has:p,enforce:m,getterFor:g},Uw}var Hw,j3;function vh(){if(j3)return Hw;j3=1;var t=tb(),e=Ct(),r=J0(),n=vs(),i=hl(),s=SA(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),N=t(y,b),E=0,C=w||s,k=c?C(v,_):d||m?C(v,0):void 0,j,P;_>E;E++)if((g||E in S)&&(j=S[E],P=N(j,E,x),l))if(c)k[E]=P;else if(P)switch(l){case 3:return!0;case 5:return j;case 6:return E;case 2:o(k,j)}else switch(l){case 4:return!1;case 7:o(k,j)}return p?-1:h||f?f:k}};return Hw={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},Hw}var P3;function WEe(){if(P3)return s3;P3=1;var t=Ve(),e=_r(),r=ii(),n=Ct(),i=fh(),s=Er(),o=dh(),a=xt(),l=Wr(),c=Hr(),d=zo(),h=Us(),f=xA(),p=pl(),m=um(),g=gm(),v=nb(),y=sb(),b=yse(),w=ob(),x=eb(),S=Ki(),_=NA(),N=yA(),E=ym(),C=CA(),k=ph(),j=ib(),P=mm(),O=Z0(),A=Kr(),q=ab(),D=Qt(),B=vse(),F=Jc(),K=vm(),X=vh().forEach,G=j("hidden"),L="Symbol",Z="prototype",ce=K.set,Be=K.getterFor(L),Te=Object[Z],tt=e.Symbol,pt=tt&&tt[Z],Qr=e.RangeError,kr=e.TypeError,Jt=e.QObject,ee=x.f,Ne=S.f,We=b.f,lt=N.f,zt=n([].push),Ie=k("symbols"),Ze=k("op-symbols"),Mr=k("wks"),St=!Jt||!Jt[Z]||!Jt[Z].findChild,M=function(Se,ne,pe){var ue=ee(Te,ne);ue&&delete Te[ne],Ne(Se,ne,pe),ue&&Se!==Te&&Ne(Te,ne,ue)},$=s&&a(function(){return g(Ne({},"a",{get:function(){return Ne(this,"a",{value:7}).a}})).a!==7})?M:Ne,z=function(Se,ne){var pe=Ie[Se]=g(pt);return ce(pe,{type:L,tag:Se,description:ne}),s||(pe.description=ne),pe},se=function(ne,pe,ue){ne===Te&&se(Ze,pe,ue),d(ne);var Ce=f(pe);return d(ue),l(Ie,Ce)?(ue.enumerable?(l(ne,G)&&ne[G][Ce]&&(ne[G][Ce]=!1),ue=g(ue,{enumerable:m(0,!1)})):(l(ne,G)||Ne(ne,G,m(1,g(null))),ne[G][Ce]=!0),$(ne,Ce,ue)):Ne(ne,Ce,ue)},J=function(ne,pe){d(ne);var ue=h(pe),Ce=v(ue).concat(kt(ue));return X(Ce,function(Ye){(!s||r(ge,ue,Ye))&&se(ne,Ye,ue[Ye])}),ne},Y=function(ne,pe){return pe===void 0?g(ne):J(g(ne),pe)},ge=function(ne){var pe=f(ne),ue=r(lt,this,pe);return this===Te&&l(Ie,pe)&&!l(Ze,pe)?!1:ue||!l(this,pe)||!l(Ie,pe)||l(this,G)&&this[G][pe]?ue:!0},ze=function(ne,pe){var ue=h(ne),Ce=f(pe);if(!(ue===Te&&l(Ie,Ce)&&!l(Ze,Ce))){var Ye=ee(ue,Ce);return Ye&&l(Ie,Ce)&&!(l(ue,G)&&ue[G][Ce])&&(Ye.enumerable=!0),Ye}},Xe=function(ne){var pe=We(h(ne)),ue=[];return X(pe,function(Ce){!l(Ie,Ce)&&!l(P,Ce)&&zt(ue,Ce)}),ue},kt=function(Se){var ne=Se===Te,pe=We(ne?Ze:h(Se)),ue=[];return X(pe,function(Ce){l(Ie,Ce)&&(!ne||l(Te,Ce))&&zt(ue,Ie[Ce])}),ue};return o||(tt=function(){if(c(pt,this))throw new kr("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),pe=O(ne),ue=function(Ce){var Ye=this===void 0?e:this;Ye===Te&&r(ue,Ze,Ce),l(Ye,G)&&l(Ye[G],pe)&&(Ye[G][pe]=!1);var Ei=m(1,Ce);try{$(Ye,pe,Ei)}catch(wn){if(!(wn instanceof Qr))throw wn;M(Ye,pe,Ei)}};return s&&St&&$(Te,pe,{configurable:!0,set:ue}),z(pe,ne)},pt=tt[Z],E(pt,"toString",function(){return Be(this).tag}),E(tt,"withoutSetter",function(Se){return z(O(Se),Se)}),N.f=ge,S.f=se,_.f=J,x.f=ze,y.f=b.f=Xe,w.f=kt,q.f=function(Se){return z(A(Se),Se)},s&&(C(pt,"description",{configurable:!0,get:function(){return Be(this).description}}),i||E(Te,"propertyIsEnumerable",ge,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:tt}),X(v(Mr),function(Se){D(Se)}),t({target:L,stat:!0,forced:!o},{useSetter:function(){St=!0},useSimple:function(){St=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Y,defineProperty:se,defineProperties:J,getOwnPropertyDescriptor:ze}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Xe}),B(),F(tt,L),P[G]=!0,s3}var I3={},Ww,R3;function bse(){if(R3)return Ww;R3=1;var t=dh();return Ww=t&&!!Symbol.for&&!!Symbol.keyFor,Ww}var M3;function KEe(){if(M3)return I3;M3=1;var t=Ve(),e=wi(),r=Wr(),n=pl(),i=ph(),s=bse(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),I3}var A3={},D3;function GEe(){if(D3)return A3;D3=1;var t=Ve(),e=Wr(),r=fm(),n=hh(),i=ph(),s=bse(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),A3}var $3={},Kw,F3;function YEe(){if(F3)return Kw;F3=1;var t=Ct(),e=Xc(),r=Ur(),n=Lo(),i=pl(),s=t([].push);return Kw=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},Kw}var q3;function xse(){if(q3)return $3;q3=1;var t=Ve(),e=wi(),r=X0(),n=ii(),i=Ct(),s=xt(),o=Ur(),a=fm(),l=yh(),c=YEe(),d=dh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var C=e("Symbol")("stringify detection");return f([C])!=="[null]"||f({a:C})!=="{}"||f(Object(C))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(C,k){var j=l(arguments),P=c(k);if(!(!o(P)&&(C===void 0||a(C))))return j[1]=function(O,A){if(o(P)&&(A=n(P,this,h(O),A)),!a(A))return A},r(f,null,j)},E=function(C,k,j){var P=m(j,k-1),O=m(j,k+1);return p(w,C)&&!p(x,O)||p(x,C)&&!p(w,P)?"\\u"+y(g(C,0),16):C};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(k,j,P){var O=l(arguments),A=r(S?N:f,null,O);return _&&typeof A=="string"?v(A,b,E):A}}),$3}var L3={},B3;function QEe(){if(B3)return L3;B3=1;var t=Ve(),e=dh(),r=xt(),n=ob(),i=vs(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),L3}var z3;function wse(){return z3||(z3=1,WEe(),KEe(),GEe(),xse(),QEe()),i3}var V3={},U3;function Sse(){if(U3)return V3;U3=1;var t=Qt();return t("asyncDispose"),V3}var H3={},W3;function XEe(){if(W3)return H3;W3=1;var t=Qt();return t("asyncIterator"),H3}var K3={},G3;function _se(){if(G3)return K3;G3=1;var t=Qt();return t("dispose"),K3}var Y3={},Q3;function JEe(){if(Q3)return Y3;Q3=1;var t=Qt();return t("hasInstance"),Y3}var X3={},J3;function ZEe(){if(J3)return X3;J3=1;var t=Qt();return t("isConcatSpreadable"),X3}var Z3={},eL;function Ese(){if(eL)return Z3;eL=1;var t=Qt();return t("iterator"),Z3}var tL={},rL;function eNe(){if(rL)return tL;rL=1;var t=Qt();return t("match"),tL}var nL={},iL;function tNe(){if(iL)return nL;iL=1;var t=Qt();return t("matchAll"),nL}var sL={},oL;function rNe(){if(oL)return sL;oL=1;var t=Qt();return t("replace"),sL}var aL={},lL;function nNe(){if(lL)return aL;lL=1;var t=Qt();return t("search"),aL}var cL={},uL;function iNe(){if(uL)return cL;uL=1;var t=Qt();return t("species"),cL}var dL={},hL;function sNe(){if(hL)return dL;hL=1;var t=Qt();return t("split"),dL}var fL={},pL;function Nse(){if(pL)return fL;pL=1;var t=Qt(),e=vse();return t("toPrimitive"),e(),fL}var mL={},gL;function oNe(){if(gL)return mL;gL=1;var t=wi(),e=Qt(),r=Jc();return e("toStringTag"),r(t("Symbol"),"Symbol"),mL}var yL={},vL;function aNe(){if(vL)return yL;vL=1;var t=Qt();return t("unscopables"),yL}var bL={},xL;function lNe(){if(xL)return bL;xL=1;var t=_r(),e=Jc();return e(t.JSON,"JSON",!0),bL}var Gw,wL;function cNe(){if(wL)return Gw;wL=1,mse(),wse(),Sse(),XEe(),_se(),JEe(),ZEe(),Ese(),eNe(),tNe(),rNe(),nNe(),iNe(),sNe(),Nse(),oNe(),aNe(),lNe();var t=Rr();return Gw=t.Symbol,Gw}var SL={},Yw,_L;function uNe(){return _L||(_L=1,Yw=function(){}),Yw}var Qw,EL;function bh(){return EL||(EL=1,Qw={}),Qw}var Xw,NL;function dNe(){if(NL)return Xw;NL=1;var t=Er(),e=Wr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return Xw={EXISTS:i,PROPER:s,CONFIGURABLE:o},Xw}var Jw,CL;function hNe(){if(CL)return Jw;CL=1;var t=xt();return Jw=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Jw}var Zw,kL;function Cse(){if(kL)return Zw;kL=1;var t=Wr(),e=Ur(),r=vs(),n=ib(),i=hNe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return Zw=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},Zw}var eS,TL;function kse(){if(TL)return eS;TL=1;var t=xt(),e=Ur(),r=Fn(),n=gm(),i=Cse(),s=ym(),o=Kr(),a=fh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),eS={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},eS}var tS,OL;function fNe(){if(OL)return tS;OL=1;var t=kse().IteratorPrototype,e=gm(),r=um(),n=Jc(),i=bh(),s=function(){return this};return tS=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},tS}var rS,jL;function pNe(){if(jL)return rS;jL=1;var t=Ct(),e=Bo();return rS=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},rS}var nS,PL;function mNe(){if(PL)return nS;PL=1;var t=Fn();return nS=function(e){return t(e)||e===null},nS}var iS,IL;function gNe(){if(IL)return iS;IL=1;var t=mNe(),e=String,r=TypeError;return iS=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},iS}var sS,RL;function yNe(){if(RL)return sS;RL=1;var t=pNe(),e=Fn(),r=Qc(),n=gNe();return sS=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),sS}var oS,ML;function kA(){if(ML)return oS;ML=1;var t=Ve(),e=ii(),r=fh(),n=dNe(),i=Ur(),s=fNe(),o=Cse(),a=yNe(),l=Jc(),c=mh(),d=ym(),h=Kr(),f=bh(),p=kse(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return oS=function(N,E,C,k,j,P,O){s(C,E,k);var A=function(ce){if(ce===j&&K)return K;if(!y&&ce&&ce in B)return B[ce];switch(ce){case w:return function(){return new C(this,ce)};case x:return function(){return new C(this,ce)};case S:return function(){return new C(this,ce)}}return function(){return new C(this)}},q=E+" Iterator",D=!1,B=N.prototype,F=B[b]||B["@@iterator"]||j&&B[j],K=!y&&F||A(j),X=E==="Array"&&B.entries||F,G,L,Z;if(X&&(G=o(X.call(new N)),G!==Object.prototype&&G.next&&(!r&&o(G)!==v&&(a?a(G,v):i(G[b])||d(G,b,_)),l(G,q,!0,!0),r&&(f[q]=_))),m&&j===x&&F&&F.name!==x&&(!r&&g?c(B,"name",x):(D=!0,K=function(){return e(F,this)})),j)if(L={values:A(x),keys:P?K:A(w),entries:A(S)},O)for(Z in L)(y||D||!(Z in B))&&d(B,Z,L[Z]);else t({target:E,proto:!0,forced:y||D},L);return(!r||O)&&B[b]!==K&&d(B,b,K,{name:j}),f[E]=K,L},oS}var aS,AL;function TA(){return AL||(AL=1,aS=function(t,e){return{value:t,done:e}}),aS}var lS,DL;function ml(){if(DL)return lS;DL=1;var t=Us(),e=uNe(),r=bh(),n=vm(),i=Ki().f,s=kA(),o=TA(),a=fh(),l=Er(),c="Array Iterator",d=n.set,h=n.getterFor(c);lS=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return lS}var cS,$L;function vNe(){return $L||($L=1,cS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),cS}var FL;function gl(){if(FL)return SL;FL=1,ml();var t=vNe(),e=_r(),r=Jc(),n=bh();for(var i in t)r(e[i],i),n[i]=n.Array;return SL}var uS,qL;function Tse(){if(qL)return uS;qL=1;var t=cNe();return gl(),uS=t,uS}var LL={},BL;function bNe(){if(BL)return LL;BL=1;var t=Kr(),e=Ki().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),LL}var zL={},VL;function xNe(){return VL||(VL=1,Sse()),zL}var UL={},HL;function wNe(){return HL||(HL=1,_se()),UL}var WL={},KL;function SNe(){if(KL)return WL;KL=1;var t=Qt();return t("metadata"),WL}var dS,GL;function _Ne(){if(GL)return dS;GL=1;var t=Tse();return bNe(),xNe(),wNe(),SNe(),dS=t,dS}var YL={},hS,QL;function Ose(){if(QL)return hS;QL=1;var t=wi(),e=Ct(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return hS=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},hS}var XL;function ENe(){if(XL)return YL;XL=1;var t=Ve(),e=Ose();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),YL}var JL={},fS,ZL;function jse(){if(ZL)return fS;ZL=1;for(var t=ph(),e=wi(),r=Ct(),n=fm(),i=Kr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return fS=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},fS}var eB;function NNe(){if(eB)return JL;eB=1;var t=Ve(),e=jse();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),JL}var tB={},rB;function CNe(){if(rB)return tB;rB=1;var t=Qt();return t("customMatcher"),tB}var nB={},iB;function kNe(){if(iB)return nB;iB=1;var t=Qt();return t("observable"),nB}var sB={},oB;function TNe(){if(oB)return sB;oB=1;var t=Ve(),e=Ose();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),sB}var aB={},lB;function ONe(){if(lB)return aB;lB=1;var t=Ve(),e=jse();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),aB}var cB={},uB;function jNe(){if(uB)return cB;uB=1;var t=Qt();return t("matcher"),cB}var dB={},hB;function PNe(){if(hB)return dB;hB=1;var t=Qt();return t("metadataKey"),dB}var fB={},pB;function INe(){if(pB)return fB;pB=1;var t=Qt();return t("patternMatch"),fB}var mB={},gB;function RNe(){if(gB)return mB;gB=1;var t=Qt();return t("replaceAll"),mB}var pS,yB;function MNe(){if(yB)return pS;yB=1;var t=_Ne();return ENe(),NNe(),CNe(),kNe(),TNe(),ONe(),jNe(),PNe(),INe(),RNe(),pS=t,pS}var mS,vB;function ANe(){return vB||(vB=1,mS=MNe()),mS}var DNe=ANe(),Ag=it(DNe),bB={},gS,xB;function $Ne(){if(xB)return gS;xB=1;var t=Ct(),e=gh(),r=pl(),n=Qc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return gS={codeAt:a(!1),charAt:a(!0)},gS}var wB;function lb(){if(wB)return bB;wB=1;var t=$Ne().charAt,e=pl(),r=vm(),n=kA(),i=TA(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),bB}var yS,SB;function FNe(){if(SB)return yS;SB=1,ml(),lb(),Ese();var t=ab();return yS=t.f("iterator"),yS}var vS,_B;function Pse(){if(_B)return vS;_B=1;var t=FNe();return gl(),vS=t,vS}var bS,EB;function qNe(){if(EB)return bS;EB=1;var t=Pse();return bS=t,bS}var xS,NB;function LNe(){if(NB)return xS;NB=1;var t=qNe();return xS=t,xS}var wS,CB;function BNe(){return CB||(CB=1,wS=LNe()),wS}var zNe=BNe(),VNe=it(zNe);function Np(t){"@babel/helpers - typeof";return Np=typeof Ag=="function"&&typeof VNe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Ag=="function"&&e.constructor===Ag&&e!==Ag.prototype?"symbol":typeof e},Np(t)}var SS,kB;function UNe(){if(kB)return SS;kB=1,Nse();var t=ab();return SS=t.f("toPrimitive"),SS}var _S,TB;function HNe(){if(TB)return _S;TB=1;var t=UNe();return _S=t,_S}var ES,OB;function WNe(){if(OB)return ES;OB=1;var t=HNe();return ES=t,ES}var NS,jB;function KNe(){if(jB)return NS;jB=1;var t=WNe();return NS=t,NS}var CS,PB;function GNe(){return PB||(PB=1,CS=KNe()),CS}var YNe=GNe(),QNe=it(YNe);function XNe(t,e){if(Np(t)!="object"||!t)return t;var r=t[QNe];if(r!==void 0){var n=r.call(t,e);if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JNe(t){var e=XNe(t,"string");return Np(e)=="symbol"?e:e+""}function Ha(t,e,r){return(e=JNe(e))in t?FEe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var IB={},kS,RB;function ZNe(){if(RB)return kS;RB=1;var t=Ct(),e=Bo(),r=Fn(),n=Wr(),i=yh(),s=cm(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return kS=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},kS}var MB;function eCe(){if(MB)return IB;MB=1;var t=Ve(),e=ZNe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),IB}var TS,AB;function si(){if(AB)return TS;AB=1;var t=_r(),e=Rr();return TS=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},TS}var OS,DB;function tCe(){if(DB)return OS;DB=1,eCe();var t=si();return OS=t("Function","bind"),OS}var jS,$B;function rCe(){if($B)return jS;$B=1;var t=Hr(),e=tCe(),r=Function.prototype;return jS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},jS}var PS,FB;function nCe(){if(FB)return PS;FB=1;var t=rCe();return PS=t,PS}var IS,qB;function iCe(){return qB||(qB=1,IS=nCe()),IS}var sCe=iCe(),Ise=it(sCe),LB={},RS,BB;function oCe(){if(BB)return RS;BB=1;var t=Bo(),e=vs(),r=J0(),n=hl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return RS={left:o(!1),right:o(!0)},RS}var MS,zB;function cb(){if(zB)return MS;zB=1;var t=xt();return MS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},MS}var AS,VB;function Rse(){if(VB)return AS;VB=1;var t=_r(),e=uh(),r=Lo(),n=function(i){return e.slice(0,i.length)===i};return AS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),AS}var DS,UB;function aCe(){if(UB)return DS;UB=1;var t=Rse();return DS=t==="NODE",DS}var HB;function lCe(){if(HB)return LB;HB=1;var t=Ve(),e=oCe().left,r=cb(),n=hm(),i=aCe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),LB}var $S,WB;function cCe(){if(WB)return $S;WB=1,lCe();var t=si();return $S=t("Array","reduce"),$S}var FS,KB;function uCe(){if(KB)return FS;KB=1;var t=Hr(),e=cCe(),r=Array.prototype;return FS=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},FS}var qS,GB;function dCe(){if(GB)return qS;GB=1;var t=uCe();return qS=t,qS}var LS,YB;function hCe(){return YB||(YB=1,LS=dCe()),LS}var fCe=hCe(),pCe=it(fCe),QB={},XB;function mCe(){if(XB)return QB;XB=1;var t=Ve(),e=vh().filter,r=pm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),QB}var BS,JB;function gCe(){if(JB)return BS;JB=1,mCe();var t=si();return BS=t("Array","filter"),BS}var zS,ZB;function yCe(){if(ZB)return zS;ZB=1;var t=Hr(),e=gCe(),r=Array.prototype;return zS=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},zS}var VS,ez;function vCe(){if(ez)return VS;ez=1;var t=yCe();return VS=t,VS}var US,tz;function bCe(){return tz||(tz=1,US=vCe()),US}var xCe=bCe(),Hu=it(xCe),rz={},nz;function wCe(){if(nz)return rz;nz=1;var t=Ve(),e=vh().map,r=pm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),rz}var HS,iz;function SCe(){if(iz)return HS;iz=1,wCe();var t=si();return HS=t("Array","map"),HS}var WS,sz;function _Ce(){if(sz)return WS;sz=1;var t=Hr(),e=SCe(),r=Array.prototype;return WS=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},WS}var KS,oz;function ECe(){if(oz)return KS;oz=1;var t=_Ce();return KS=t,KS}var GS,az;function NCe(){return az||(az=1,GS=ECe()),GS}var CCe=NCe(),as=it(CCe),YS,lz;function kCe(){return lz||(lz=1,YS=Tse()),YS}var TCe=kCe(),OCe=it(TCe),cz={},uz;function jCe(){if(uz)return cz;uz=1;var t=Ve(),e=Xc(),r=pse(),n=Fn(),i=_A(),s=hl(),o=Us(),a=rb(),l=Kr(),c=pm(),d=yh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,N,E;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in b&&a(N,E,b[x]);return N.length=E,N}}),cz}var QS,dz;function PCe(){if(dz)return QS;dz=1,jCe();var t=si();return QS=t("Array","slice"),QS}var XS,hz;function ICe(){if(hz)return XS;hz=1;var t=Hr(),e=PCe(),r=Array.prototype;return XS=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},XS}var JS,fz;function RCe(){if(fz)return JS;fz=1;var t=ICe();return JS=t,JS}var ZS,pz;function MCe(){return pz||(pz=1,ZS=RCe()),ZS}var ACe=MCe(),DCe=it(ACe),mz={},e_,gz;function Mse(){if(gz)return e_;gz=1;var t=wi(),e=Ct(),r=sb(),n=ob(),i=zo(),s=e([].concat);return e_=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},e_}var yz;function $Ce(){if(yz)return mz;yz=1;var t=Ve(),e=Mse();return t({target:"Reflect",stat:!0},{ownKeys:e}),mz}var t_,vz;function FCe(){if(vz)return t_;vz=1,$Ce();var t=Rr();return t_=t.Reflect.ownKeys,t_}var r_,bz;function qCe(){if(bz)return r_;bz=1;var t=FCe();return r_=t,r_}var n_,xz;function LCe(){return xz||(xz=1,n_=qCe()),n_}var BCe=LCe(),zCe=it(BCe),wz={},Sz;function VCe(){if(Sz)return wz;Sz=1;var t=Ve(),e=Xc();return t({target:"Array",stat:!0},{isArray:e}),wz}var i_,_z;function UCe(){if(_z)return i_;_z=1,VCe();var t=Rr();return i_=t.Array.isArray,i_}var s_,Ez;function HCe(){if(Ez)return s_;Ez=1;var t=UCe();return s_=t,s_}var o_,Nz;function WCe(){return Nz||(Nz=1,o_=HCe()),o_}var KCe=WCe(),ks=it(KCe),Cz={},kz;function GCe(){if(kz)return Cz;kz=1;var t=Ve(),e=vs(),r=nb(),n=xt(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),Cz}var a_,Tz;function YCe(){if(Tz)return a_;Tz=1,GCe();var t=Rr();return a_=t.Object.keys,a_}var l_,Oz;function QCe(){if(Oz)return l_;Oz=1;var t=YCe();return l_=t,l_}var c_,jz;function XCe(){return jz||(jz=1,c_=QCe()),c_}var JCe=XCe(),OA=it(JCe),Pz={},u_,Iz;function ZCe(){if(Iz)return u_;Iz=1;var t=vh().forEach,e=cb(),r=e("forEach");return u_=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},u_}var Rz;function eke(){if(Rz)return Pz;Rz=1;var t=Ve(),e=ZCe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),Pz}var d_,Mz;function tke(){if(Mz)return d_;Mz=1,eke();var t=si();return d_=t("Array","forEach"),d_}var h_,Az;function rke(){if(Az)return h_;Az=1;var t=tke();return h_=t,h_}var f_,Dz;function nke(){if(Dz)return f_;Dz=1;var t=fl(),e=Wr(),r=Hr(),n=rke(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return f_=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},f_}var p_,$z;function ike(){return $z||($z=1,p_=nke()),p_}var ske=ike(),Mc=it(ske),Fz={},qz;function oke(){if(qz)return Fz;qz=1;var t=Ve(),e=Ct(),r=Xc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),Fz}var m_,Lz;function ake(){if(Lz)return m_;Lz=1,oke();var t=si();return m_=t("Array","reverse"),m_}var g_,Bz;function lke(){if(Bz)return g_;Bz=1;var t=Hr(),e=ake(),r=Array.prototype;return g_=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},g_}var y_,zz;function cke(){if(zz)return y_;zz=1;var t=lke();return y_=t,y_}var v_,Vz;function uke(){return Vz||(Vz=1,v_=cke()),v_}var dke=uke(),hke=it(dke),Uz={},b_,Hz;function fke(){if(Hz)return b_;Hz=1;var t=Er(),e=Xc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return b_=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},b_}var x_,Wz;function Ase(){if(Wz)return x_;Wz=1;var t=hh(),e=TypeError;return x_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},x_}var Kz;function pke(){if(Kz)return Uz;Kz=1;var t=Ve(),e=vs(),r=_A(),n=gh(),i=hl(),s=fke(),o=fse(),a=SA(),l=rb(),c=Ase(),d=pm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,N,E,C,k;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),N=a(y,_),E=0;E<_;E++)C=w+E,C in y&&l(N,E,y[C]);if(N.length=_,S<_){for(E=w;E<b-_;E++)C=E+_,k=E+S,C in y?y[k]=y[C]:c(y,k);for(E=b;E>b-_+S;E--)c(y,E-1)}else if(S>_)for(E=b-_;E>w;E--)C=E+_-1,k=E+S-1,C in y?y[k]=y[C]:c(y,k);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,b-_+S),N}}),Uz}var w_,Gz;function mke(){if(Gz)return w_;Gz=1,pke();var t=si();return w_=t("Array","splice"),w_}var S_,Yz;function gke(){if(Yz)return S_;Yz=1;var t=Hr(),e=mke(),r=Array.prototype;return S_=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},S_}var __,Qz;function yke(){if(Qz)return __;Qz=1;var t=gke();return __=t,__}var E_,Xz;function vke(){return Xz||(Xz=1,E_=yke()),E_}var bke=vke(),Dse=it(bke),Jz={},N_,Zz;function xke(){if(Zz)return N_;Zz=1;var t=Er(),e=Ct(),r=ii(),n=xt(),i=nb(),s=ob(),o=yA(),a=vs(),l=J0(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return N_=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,N_}var e6;function wke(){if(e6)return Jz;e6=1;var t=Ve(),e=xke();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),Jz}var C_,t6;function Ske(){if(t6)return C_;t6=1,wke();var t=Rr();return C_=t.Object.assign,C_}var k_,r6;function _ke(){if(r6)return k_;r6=1;var t=Ske();return k_=t,k_}var T_,n6;function Eke(){return n6||(n6=1,T_=_ke()),T_}var Nke=Eke(),Cke=it(Nke),O_,i6;function kke(){if(i6)return O_;i6=1,mse();var t=si();return O_=t("Array","concat"),O_}var j_,s6;function Tke(){if(s6)return j_;s6=1;var t=Hr(),e=kke(),r=Array.prototype;return j_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},j_}var P_,o6;function Oke(){if(o6)return P_;o6=1;var t=Tke();return P_=t,P_}var I_,a6;function jke(){return a6||(a6=1,I_=Oke()),I_}var Pke=jke(),Ike=it(Pke),l6={},c6;function Rke(){if(c6)return l6;c6=1;var t=Ve(),e=Er(),r=gm();return t({target:"Object",stat:!0,sham:!e},{create:r}),l6}var R_,u6;function Mke(){if(u6)return R_;u6=1,Rke();var t=Rr(),e=t.Object;return R_=function(n,i){return e.create(n,i)},R_}var M_,d6;function Ake(){if(d6)return M_;d6=1;var t=Mke();return M_=t,M_}var A_,h6;function Dke(){return h6||(h6=1,A_=Ake()),A_}var $ke=Dke(),Fke=it($ke),f6={},D_,p6;function qke(){if(p6)return D_;p6=1;var t=gh(),e=pl(),r=Qc(),n=RangeError;return D_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},D_}var $_,m6;function Lke(){if(m6)return $_;m6=1;var t=Ct(),e=hse(),r=pl(),n=qke(),i=Qc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return $_={start:l(!1),end:l(!0)},$_}var F_,g6;function Bke(){if(g6)return F_;g6=1;var t=Ct(),e=xt(),r=Lke().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return F_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,F_}var y6;function zke(){if(y6)return f6;y6=1;var t=Ve(),e=ii(),r=vs(),n=ase(),i=Bke(),s=Lo(),o=xt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),f6}var q_,v6;function Vke(){if(v6)return q_;v6=1,zke(),xse();var t=Rr(),e=X0();return t.JSON||(t.JSON={stringify:JSON.stringify}),q_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},q_}var L_,b6;function Uke(){if(b6)return L_;b6=1;var t=Vke();return L_=t,L_}var B_,x6;function Hke(){return x6||(x6=1,B_=Uke()),B_}var Wke=Hke(),Kke=it(Wke),w6={},S6={},z_,_6;function Gke(){if(_6)return z_;_6=1;var t=TypeError;return z_=function(e,r){if(e<r)throw new t("Not enough arguments");return e},z_}var V_,E6;function $se(){if(E6)return V_;E6=1;var t=_r(),e=X0(),r=Ur(),n=Rse(),i=uh(),s=yh(),o=Gke(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return V_=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?c(y,p):c(y)}:c},V_}var N6;function Yke(){if(N6)return S6;N6=1;var t=Ve(),e=_r(),r=$se(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),S6}var C6={},k6;function Qke(){if(k6)return C6;k6=1;var t=Ve(),e=_r(),r=$se(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),C6}var T6;function Xke(){return T6||(T6=1,Yke(),Qke()),w6}var U_,O6;function Jke(){if(O6)return U_;O6=1,Xke();var t=Rr();return U_=t.setTimeout,U_}var H_,j6;function Zke(){return j6||(j6=1,H_=Jke()),H_}var e2e=Zke(),t2e=it(e2e),W_={exports:{}},P6;function r2e(){return P6||(P6=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(W_)),W_.exports}var n2e=r2e(),i2e=it(n2e);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ms(){return ms=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ms.apply(this,arguments)}function Gi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Dg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var HI;typeof Object.assign!="function"?HI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:HI=Object.assign;var Ac=HI,I6=["","webkit","Moz","MS","ms","o"],s2e=typeof document>"u"?{style:{}}:document.createElement("div"),o2e="function",Wu=Math.round,Dc=Math.abs,jA=Date.now;function ub(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<I6.length;){if(r=I6[s],n=r?r+i:e,n in t)return n;s++}}var xo;typeof window>"u"?xo={}:xo=window;var Fse=ub(s2e.style,"touchAction"),qse=Fse!==void 0;function a2e(){if(!qse)return!1;var t={},e=xo.CSS&&xo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?xo.CSS.supports("touch-action",r):!0}),t}var Lse="compute",Bse="auto",WI="manipulation",uc="none",Cp="pan-x",kp="pan-y",$g=a2e(),l2e=/mobile|tablet|ip(ad|hone|od)|android/i,zse="ontouchstart"in xo,c2e=ub(xo,"PointerEvent")!==void 0,u2e=zse&&l2e.test(navigator.userAgent),bm="touch",d2e="pen",PA="mouse",h2e="kinect",f2e=25,Mn=1,Zc=2,vr=4,ri=8,Uv=1,xm=2,wm=4,Sm=8,Kd=16,Ls=xm|wm,dc=Sm|Kd,Vse=Ls|dc,Use=["x","y"],Hv=["clientX","clientY"];function wo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function db(t,e){return typeof t===o2e?t.apply(e&&e[0]||void 0,e):t}function Vl(t,e){return t.indexOf(e)>-1}function p2e(t){if(Vl(t,uc))return uc;var e=Vl(t,Cp),r=Vl(t,kp);return e&&r?uc:e||r?e?Cp:kp:Vl(t,WI)?WI:Bse}var Hse=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Lse&&(n=this.compute()),qse&&this.manager.element.style&&$g[n]&&(this.manager.element.style[Fse]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return wo(this.manager.recognizers,function(i){db(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),p2e(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Vl(o,uc)&&!$g[uc],l=Vl(o,kp)&&!$g[kp],c=Vl(o,Cp)&&!$g[Cp];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&Ls||c&&s&dc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function IA(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Wse(t){var e=t.length;if(e===1)return{x:Wu(t[0].clientX),y:Wu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Wu(r/e),y:Wu(n/e)}}function R6(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Wu(t.pointers[r].clientX),clientY:Wu(t.pointers[r].clientY)},r++;return{timeStamp:jA(),pointers:e,center:Wse(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Wv(t,e,r){r||(r=Use);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function KI(t,e,r){r||(r=Use);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Kse(t,e){return t===e?Uv:Dc(t)>=Dc(e)?t<0?xm:wm:e<0?Sm:Kd}function m2e(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Mn||s.eventType===vr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Gse(t,e,r){return{x:e/t||0,y:r/t||0}}function g2e(t,e){return Wv(e[0],e[1],Hv)/Wv(t[0],t[1],Hv)}function y2e(t,e){return KI(e[1],e[0],Hv)+KI(t[1],t[0],Hv)}function v2e(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ri&&(n>f2e||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=Gse(n,l,c);s=d.x,o=d.y,i=Dc(d.x)>Dc(d.y)?d.x:d.y,a=Kse(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function b2e(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=R6(e)),i>1&&!r.firstMultiple?r.firstMultiple=R6(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Wse(n);e.timeStamp=jA(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=KI(a,l),e.distance=Wv(a,l),m2e(r,e),e.offsetDirection=Kse(e.deltaX,e.deltaY);var c=Gse(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Dc(c.x)>Dc(c.y)?c.x:c.y,e.scale=o?g2e(o.pointers,n):1,e.rotation=o?y2e(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,v2e(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,IA(f,d)&&(d=f),e.target=d}function x2e(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Mn&&n-i===0,o=e&(vr|ri)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,b2e(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Tp(t){return t.trim().split(/\s+/g)}function qf(t,e,r){wo(Tp(e),function(n){t.addEventListener(n,r,!1)})}function Lf(t,e,r){wo(Tp(e),function(n){t.removeEventListener(n,r,!1)})}function M6(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var xh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){db(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&qf(this.element,this.evEl,this.domHandler),this.evTarget&&qf(this.target,this.evTarget,this.domHandler),this.evWin&&qf(M6(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Lf(this.element,this.evEl,this.domHandler),this.evTarget&&Lf(this.target,this.evTarget,this.domHandler),this.evWin&&Lf(M6(this.element),this.evWin,this.domHandler)},t}();function $c(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var w2e={pointerdown:Mn,pointermove:Zc,pointerup:vr,pointercancel:ri,pointerout:ri},S2e={2:bm,3:d2e,4:PA,5:h2e},Yse="pointerdown",Qse="pointermove pointerup pointercancel";xo.MSPointerEvent&&!xo.PointerEvent&&(Yse="MSPointerDown",Qse="MSPointerMove MSPointerUp MSPointerCancel");var Xse=function(t){Gi(e,t);function e(){var n,i=e.prototype;return i.evEl=Yse,i.evWin=Qse,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=w2e[a],c=S2e[i.pointerType]||i.pointerType,d=c===bm,h=$c(s,i.pointerId,"pointerId");l&Mn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(vr|ri)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(xh);function Op(t){return Array.prototype.slice.call(t,0)}function RA(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];$c(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var _2e={touchstart:Mn,touchmove:Zc,touchend:vr,touchcancel:ri},E2e="touchstart touchmove touchend touchcancel",MA=function(t){Gi(e,t);function e(){var n;return e.prototype.evTarget=E2e,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=_2e[i.type],o=N2e.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:bm,srcEvent:i})},e}(xh);function N2e(t,e){var r=Op(t.touches),n=this.targetIds;if(e&(Mn|Zc)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Op(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return IA(c.target,l)}),e===Mn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(vr|ri)&&delete n[o[i].identifier],i++;if(a.length)return[RA(s.concat(a),"identifier",!0),a]}var C2e={mousedown:Mn,mousemove:Zc,mouseup:vr},k2e="mousedown",T2e="mousemove mouseup",AA=function(t){Gi(e,t);function e(){var n,i=e.prototype;return i.evEl=k2e,i.evWin=T2e,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=C2e[i.type];s&Mn&&i.button===0&&(this.pressed=!0),s&Zc&&i.which!==1&&(s=vr),this.pressed&&(s&vr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:PA,srcEvent:i}))},e}(xh),O2e=2500,A6=25;function D6(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,O2e)}}function j2e(t,e){t&Mn?(this.primaryTouch=e.changedPointers[0].identifier,D6.call(this,e)):t&(vr|ri)&&D6.call(this,e)}function P2e(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=A6&&o<=A6)return!0}return!1}var Jse=function(){var t=function(e){Gi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===bm,h=c.pointerType===PA;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)j2e.call(Dg(Dg(o)),l,c);else if(h&&P2e.call(Dg(Dg(o)),c))return;o.callback(a,l,c)}},o.touch=new MA(o.manager,o.handler),o.mouse=new AA(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(xh);return t}();function I2e(t){var e,r=t.options.inputClass;return r?e=r:c2e?e=Xse:u2e?e=MA:zse?e=Jse:e=AA,new e(t,x2e)}function Ku(t,e,r){return Array.isArray(t)?(wo(t,r[e],r),!0):!1}var dy=1,zi=2,Gd=4,Wa=8,So=Wa,jp=16,Rs=32,R2e=1;function M2e(){return R2e++}function Fg(t,e){var r=e.manager;return r?r.get(t):t}function $6(t){return t&jp?"cancel":t&Wa?"end":t&Gd?"move":t&zi?"start":""}var _m=function(){function t(r){r===void 0&&(r={}),this.options=ms({enable:!0},r),this.id=M2e(),this.manager=null,this.state=dy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Ac(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Ku(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Fg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Ku(n,"dropRecognizeWith",this)?this:(n=Fg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Ku(n,"requireFailure",this))return this;var i=this.requireFail;return n=Fg(n,this),$c(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Ku(n,"dropRequireFailure",this))return this;n=Fg(n,this);var i=$c(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Wa&&o(i.options.event+$6(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Wa&&o(i.options.event+$6(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Rs},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Rs|dy)))return!1;n++}return!0},e.recognize=function(n){var i=Ac({},n);if(!db(this.options.enable,[this,i])){this.reset(),this.state=Rs;return}this.state&(So|jp|Rs)&&(this.state=dy),this.state=this.process(i),this.state&(zi|Gd|Wa|jp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),GI=function(t){Gi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[WI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Mn&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==vr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Wv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=So,s.tryEmit()},o.interval),zi):So}return Rs},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Rs},this.options.interval),Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===So&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(_m),Yd=function(t){Gi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(zi|Gd),l=this.attrTest(i);return a&&(o&ri||!l)?s|jp:a||l?o&vr?s|Wa:s&zi?s|Gd:zi:Rs},e}(_m);function Zse(t){return t===Kd?"down":t===Sm?"up":t===xm?"left":t===wm?"right":""}var DA=function(t){Gi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"pan",threshold:10,pointers:1,direction:Vse},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Ls&&s.push(kp),i&dc&&s.push(Cp),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Ls?(l=c===0?Uv:c<0?xm:wm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Uv:d<0?Sm:Kd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Yd.prototype.attrTest.call(this,i)&&(this.state&zi||!(this.state&zi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Zse(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Yd),eoe=function(t){Gi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"swipe",threshold:10,velocity:.3,direction:Ls|dc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return DA.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Ls|dc)?o=i.overallVelocity:s&Ls?o=i.overallVelocityX:s&dc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Dc(o)>this.options.velocity&&i.eventType&vr},r.emit=function(i){var s=Zse(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Yd),toe=function(t){Gi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[uc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&zi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Yd),roe=function(t){Gi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[uc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&zi)},e}(Yd),noe=function(t){Gi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Bse]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(vr|ri)&&!c)this.reset();else if(i.eventType&Mn)this.reset(),this._timer=setTimeout(function(){s.state=So,s.tryEmit()},o.time);else if(i.eventType&vr)return So;return Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===So&&(i&&i.eventType&vr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=jA(),this.manager.emit(this.options.event,this._input)))},e}(_m),ioe={domEvents:!1,touchAction:Lse,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},F6=[[roe,{enable:!1}],[toe,{enable:!1},["rotate"]],[eoe,{direction:Ls}],[DA,{direction:Ls},["swipe"]],[GI],[GI,{event:"doubletap",taps:2},["tap"]],[noe]],A2e=1,q6=2;function L6(t,e){var r=t.element;if(r.style){var n;wo(t.options.cssProps,function(i,s){n=ub(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function D2e(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var B6=function(){function t(r,n){var i=this;this.options=Ac({},ioe,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=I2e(this),this.touchAction=new Hse(this,this.options.touchAction),L6(this,!0),wo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Ac(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?q6:A2e},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&So)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==q6&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(zi|Gd|Wa)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof _m)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Ku(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Ku(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=$c(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return wo(Tp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return wo(Tp(n),function(o){i?s[o]&&s[o].splice($c(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&D2e(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&L6(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),$2e={touchstart:Mn,touchmove:Zc,touchend:vr,touchcancel:ri},F2e="touchstart",q2e="touchstart touchmove touchend touchcancel",L2e=function(t){Gi(e,t);function e(){var n,i=e.prototype;return i.evTarget=F2e,i.evWin=q2e,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=$2e[i.type];if(s===Mn&&(this.started=!0),!!this.started){var o=B2e.call(this,i,s);s&(vr|ri)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:bm,srcEvent:i})}},e}(xh);function B2e(t,e){var r=Op(t.touches),n=Op(t.changedTouches);return e&(vr|ri)&&(r=RA(r.concat(n),"identifier",!0)),[r,n]}function soe(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var ooe=soe(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),z2e=soe(function(t,e){return ooe(t,e,!0)},"merge","Use `assign`.");function V2e(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Ac(i,r)}function z6(t,e){return function(){return t.apply(e,arguments)}}var U2e=function(){var t=function(r,n){return n===void 0&&(n={}),new B6(r,ms({recognizers:F6.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Vse,t.DIRECTION_DOWN=Kd,t.DIRECTION_LEFT=xm,t.DIRECTION_RIGHT=wm,t.DIRECTION_UP=Sm,t.DIRECTION_HORIZONTAL=Ls,t.DIRECTION_VERTICAL=dc,t.DIRECTION_NONE=Uv,t.DIRECTION_DOWN=Kd,t.INPUT_START=Mn,t.INPUT_MOVE=Zc,t.INPUT_END=vr,t.INPUT_CANCEL=ri,t.STATE_POSSIBLE=dy,t.STATE_BEGAN=zi,t.STATE_CHANGED=Gd,t.STATE_ENDED=Wa,t.STATE_RECOGNIZED=So,t.STATE_CANCELLED=jp,t.STATE_FAILED=Rs,t.Manager=B6,t.Input=xh,t.TouchAction=Hse,t.TouchInput=MA,t.MouseInput=AA,t.PointerEventInput=Xse,t.TouchMouseInput=Jse,t.SingleTouchInput=L2e,t.Recognizer=_m,t.AttrRecognizer=Yd,t.Tap=GI,t.Pan=DA,t.Swipe=eoe,t.Pinch=toe,t.Rotate=roe,t.Press=noe,t.on=qf,t.off=Lf,t.each=wo,t.merge=z2e,t.extend=ooe,t.bindFn=z6,t.assign=Ac,t.inherit=V2e,t.bindFn=z6,t.prefixed=ub,t.toArray=Op,t.inArray=$c,t.uniqueArray=RA,t.splitStr=Tp,t.boolOrFn=db,t.hasParent=IA,t.addEventListeners=qf,t.removeEventListeners=Lf,t.defaults=Ac({},ioe,{preset:F6}),t}();const aoe=OCe("DELETE");function H2e(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return loe({},t,...r)}function loe(){const t=Kv(...arguments);return uoe(t),t}function Kv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return Kv(loe(e[0],e[1]),...DCe(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of zCe(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===aoe?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!ks(n[s])&&!ks(i[s])?n[s]=Kv(n[s],i[s]):n[s]=coe(i[s]));return n}function coe(t){return ks(t)?as(t).call(t,e=>coe(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):Kv({},t):t}function uoe(t){for(const e of OA(t))t[e]===aoe?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&uoe(t[e])}function W2e(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const K2e=typeof window<"u"?window.Hammer||U2e:function(){return W2e()};function po(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=K2e(this._dom.overlay);r.on("tap",Ise(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Mc(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{G2e(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}i2e(po.prototype);po.current=null;po.prototype.destroy=function(){this.deactivate();for(const r of hke(t=Dse(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};po.prototype.activate=function(){po.current&&po.current.deactivate(),po.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};po.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};po.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function G2e(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var K_,V6;function Y2e(){if(V6)return K_;V6=1,wse();var t=Rr();return K_=t.Object.getOwnPropertySymbols,K_}var G_,U6;function Q2e(){if(U6)return G_;U6=1;var t=Y2e();return G_=t,G_}var Y_,H6;function X2e(){return H6||(H6=1,Y_=Q2e()),Y_}var J2e=X2e(),W6=it(J2e),Q_={exports:{}},K6={},G6;function Z2e(){if(G6)return K6;G6=1;var t=Ve(),e=xt(),r=Us(),n=eb().f,i=Er(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),K6}var Y6;function eTe(){if(Y6)return Q_.exports;Y6=1,Z2e();var t=Rr(),e=t.Object,r=Q_.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),Q_.exports}var X_,Q6;function tTe(){if(Q6)return X_;Q6=1;var t=eTe();return X_=t,X_}var J_,X6;function rTe(){return X6||(X6=1,J_=tTe()),J_}var nTe=rTe(),doe=it(nTe),J6={},Z6;function iTe(){if(Z6)return J6;Z6=1;var t=Ve(),e=Er(),r=Mse(),n=Us(),i=eb(),s=rb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),J6}var Z_,e8;function sTe(){if(e8)return Z_;e8=1,iTe();var t=Rr();return Z_=t.Object.getOwnPropertyDescriptors,Z_}var eE,t8;function oTe(){if(t8)return eE;t8=1;var t=sTe();return eE=t,eE}var tE,r8;function aTe(){return r8||(r8=1,tE=oTe()),tE}var lTe=aTe(),n8=it(lTe),rE={exports:{}},i8={},s8;function cTe(){if(s8)return i8;s8=1;var t=Ve(),e=Er(),r=NA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),i8}var o8;function uTe(){if(o8)return rE.exports;o8=1,cTe();var t=Rr(),e=t.Object,r=rE.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),rE.exports}var nE,a8;function dTe(){if(a8)return nE;a8=1;var t=uTe();return nE=t,nE}var iE,l8;function hTe(){return l8||(l8=1,iE=dTe()),iE}var fTe=hTe(),pTe=it(fTe),sE,c8;function mTe(){return c8||(c8=1,sE=dse()),sE}var gTe=mTe(),yTe=it(gTe),u8={},d8={},oE={exports:{}},aE,h8;function vTe(){if(h8)return aE;h8=1;var t=xt();return aE=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),aE}var lE,f8;function bTe(){if(f8)return lE;f8=1;var t=xt(),e=Fn(),r=Lo(),n=vTe(),i=Object.isExtensible,s=t(function(){});return lE=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,lE}var cE,p8;function xTe(){if(p8)return cE;p8=1;var t=xt();return cE=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),cE}var m8;function hoe(){if(m8)return oE.exports;m8=1;var t=Ve(),e=Ct(),r=mm(),n=Fn(),i=Wr(),s=Ki().f,o=sb(),a=yse(),l=bTe(),c=Z0(),d=xTe(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),C=0,k=E.length;C<k;C++)if(E[C]===f){S(E,C,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=oE.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,oE.exports}var uE,g8;function wTe(){if(g8)return uE;g8=1;var t=Kr(),e=bh(),r=t("iterator"),n=Array.prototype;return uE=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},uE}var dE,y8;function foe(){if(y8)return dE;y8=1;var t=fl(),e=vA(),r=dm(),n=bh(),i=Kr(),s=i("iterator");return dE=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},dE}var hE,v8;function poe(){if(v8)return hE;v8=1;var t=ii(),e=Bo(),r=zo(),n=hh(),i=foe(),s=TypeError;return hE=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},hE}var fE,b8;function $A(){if(b8)return fE;b8=1;var t=ii(),e=zo(),r=vA();return fE=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},fE}var pE,x8;function FA(){if(x8)return pE;x8=1;var t=tb(),e=ii(),r=zo(),n=hh(),i=wTe(),s=hl(),o=Hr(),a=poe(),l=foe(),c=$A(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return pE=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,N,E,C,k,j,P,O=function(q){return _&&c(_,"normal"),new h(!0,q)},A=function(q){return y?(r(q),x?S(q[0],q[1],O):S(q[0],q[1])):x?S(q,O):S(q)};if(b)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,C=s(p);C>E;E++)if(k=A(p[E]),k&&o(f,k))return k;return new h(!1)}_=a(p,N)}for(j=b?p.next:_.next;!(P=e(j,_)).done;){try{k=A(P.value)}catch(q){c(_,"throw",q)}if(typeof k=="object"&&k&&o(f,k))return k}return new h(!1)},pE}var mE,w8;function moe(){if(w8)return mE;w8=1;var t=Hr(),e=TypeError;return mE=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},mE}var gE,S8;function goe(){if(S8)return gE;S8=1;var t=Ve(),e=_r(),r=hoe(),n=xt(),i=mh(),s=FA(),o=moe(),a=Ur(),l=Fn(),c=dm(),d=Jc(),h=Ki().f,f=vh().forEach,p=Er(),m=vm(),g=m.set,v=m.getterFor;return gE=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,C={},k;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))k=w.getConstructor(b,y,x,_),r.enable();else{k=b(function(O,A){g(o(O,j),{type:y,collection:new N}),c(A)||s(A,O[_],{that:O,AS_ENTRIES:x})});var j=k.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var A=O==="add"||O==="set";O in E&&!(S&&O==="clear")&&i(j,O,function(q,D){var B=P(this).collection;if(!A&&S&&!l(q))return O==="get"?void 0:!1;var F=B[O](q===0?0:q,D);return A?this:F})}),S||h(j,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(k,y,!1,!0),C[y]=k,t({global:!0,forced:!0},C),S||w.setStrong(k,y,x),k},gE}var yE,_8;function STe(){if(_8)return yE;_8=1;var t=ym();return yE=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},yE}var vE,E8;function _Te(){if(E8)return vE;E8=1;var t=wi(),e=CA(),r=Kr(),n=Er(),i=r("species");return vE=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},vE}var bE,N8;function yoe(){if(N8)return bE;N8=1;var t=gm(),e=CA(),r=STe(),n=tb(),i=moe(),s=dm(),o=FA(),a=kA(),l=TA(),c=_Te(),d=Er(),h=hoe().fastKey,f=vm(),p=f.set,m=f.getterFor;return bE={getConstructor:function(g,v,y,b){var w=g(function(E,C){i(E,x),p(E,{type:v,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(C)||o(C,E[b],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(E,C,k){var j=S(E),P=N(E,C),O,A;return P?P.value=k:(j.last=P={index:A=h(C,!0),key:C,value:k,previous:O=j.last,next:null,removed:!1},j.first||(j.first=P),O&&(O.next=P),d?j.size++:E.size++,A!=="F"&&(j.index[A]=P)),E},N=function(E,C){var k=S(E),j=h(C),P;if(j!=="F")return k.index[j];for(P=k.first;P;P=P.next)if(P.key===C)return P};return r(x,{clear:function(){for(var C=this,k=S(C),j=k.first;j;)j.removed=!0,j.previous&&(j.previous=j.previous.next=null),j=j.next;k.first=k.last=null,k.index=t(null),d?k.size=0:C.size=0},delete:function(E){var C=this,k=S(C),j=N(C,E);if(j){var P=j.next,O=j.previous;delete k.index[j.index],j.removed=!0,O&&(O.next=P),P&&(P.previous=O),k.first===j&&(k.first=P),k.last===j&&(k.last=O),d?k.size--:C.size--}return!!j},forEach:function(C){for(var k=S(this),j=n(C,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:k.first;)for(j(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(C){return!!N(this,C)}}),r(x,y?{get:function(C){var k=N(this,C);return k&&k.value},set:function(C,k){return _(this,C===0?0:C,k)}}:{add:function(C){return _(this,C=C===0?0:C,C)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(v)}},bE}var C8;function ETe(){if(C8)return d8;C8=1;var t=goe(),e=yoe();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),d8}var k8;function NTe(){return k8||(k8=1,ETe()),u8}var T8={},xE,O8;function voe(){return O8||(O8=1,xE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),xE}var wE,j8;function CTe(){if(j8)return wE;j8=1;var t=wi(),e=voe(),r=t("Map");return wE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},wE}var P8;function kTe(){if(P8)return T8;P8=1;var t=Ve(),e=Ct(),r=Bo(),n=Qc(),i=FA(),s=CTe(),o=fh(),a=xt(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),T8}var SE,I8;function TTe(){if(I8)return SE;I8=1,ml(),NTe(),kTe(),lb();var t=Rr();return SE=t.Map,SE}var _E,R8;function OTe(){if(R8)return _E;R8=1;var t=TTe();return gl(),_E=t,_E}var EE,M8;function jTe(){return M8||(M8=1,EE=OTe()),EE}var PTe=jTe(),boe=it(PTe),A8={},D8;function ITe(){if(D8)return A8;D8=1;var t=Ve(),e=vh().some,r=cb(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),A8}var NE,$8;function RTe(){if($8)return NE;$8=1,ITe();var t=si();return NE=t("Array","some"),NE}var CE,F8;function MTe(){if(F8)return CE;F8=1;var t=Hr(),e=RTe(),r=Array.prototype;return CE=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},CE}var kE,q8;function ATe(){if(q8)return kE;q8=1;var t=MTe();return kE=t,kE}var TE,L8;function DTe(){return L8||(L8=1,TE=ATe()),TE}var $Te=DTe(),FTe=it($Te),OE,B8;function qTe(){if(B8)return OE;B8=1,ml();var t=si();return OE=t("Array","keys"),OE}var jE,z8;function LTe(){if(z8)return jE;z8=1;var t=qTe();return jE=t,jE}var PE,V8;function BTe(){if(V8)return PE;V8=1,gl();var t=fl(),e=Wr(),r=Hr(),n=LTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return PE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},PE}var IE,U8;function zTe(){return U8||(U8=1,IE=BTe()),IE}var VTe=zTe(),_u=it(VTe),H8={},RE,W8;function UTe(){if(W8)return RE;W8=1;var t=yh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return RE=r,RE}var ME,K8;function HTe(){if(K8)return ME;K8=1;var t=uh(),e=t.match(/firefox\/(\d+)/i);return ME=!!e&&+e[1],ME}var AE,G8;function WTe(){if(G8)return AE;G8=1;var t=uh();return AE=/MSIE|Trident/.test(t),AE}var DE,Y8;function KTe(){if(Y8)return DE;Y8=1;var t=uh(),e=t.match(/AppleWebKit\/(\d+)\./);return DE=!!e&&+e[1],DE}var Q8;function GTe(){if(Q8)return H8;Q8=1;var t=Ve(),e=Ct(),r=Bo(),n=vs(),i=hl(),s=Ase(),o=pl(),a=xt(),l=UTe(),c=cb(),d=HTe(),h=WTe(),f=hm(),p=KTe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,C,k,j;for(E=65;E<76;E++){switch(C=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:k=3;break;case 68:case 71:k=4;break;default:k=2}for(j=0;j<47;j++)m.push({k:C+j,v:k})}for(m.sort(function(P,O){return O.v-P.v}),j=0;j<m.length;j++)C=m[j].k.charAt(0),N.charAt(N.length-1)!==C&&(N+=C);return N!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(N){return function(E,C){return C===void 0?-1:E===void 0?1:N!==void 0?+N(E,C)||0:o(E)>o(C)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var C=n(this);if(x)return E===void 0?g(C):g(C,E);var k=[],j=i(C),P,O;for(O=0;O<j;O++)O in C&&v(k,C[O]);for(l(k,_(E)),P=i(k),O=0;O<P;)C[O]=k[O++];for(;O<j;)s(C,O++);return C}}),H8}var $E,X8;function YTe(){if(X8)return $E;X8=1,GTe();var t=si();return $E=t("Array","sort"),$E}var FE,J8;function QTe(){if(J8)return FE;J8=1;var t=Hr(),e=YTe(),r=Array.prototype;return FE=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},FE}var qE,Z8;function XTe(){if(Z8)return qE;Z8=1;var t=QTe();return qE=t,qE}var LE,eV;function JTe(){return eV||(eV=1,LE=XTe()),LE}var ZTe=JTe(),YI=it(ZTe),BE,tV;function eOe(){if(tV)return BE;tV=1,ml();var t=si();return BE=t("Array","values"),BE}var zE,rV;function tOe(){if(rV)return zE;rV=1;var t=eOe();return zE=t,zE}var VE,nV;function rOe(){if(nV)return VE;nV=1,gl();var t=fl(),e=Wr(),r=Hr(),n=tOe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return VE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},VE}var UE,iV;function nOe(){return iV||(iV=1,UE=rOe()),UE}var iOe=nOe(),sV=it(iOe),HE,oV;function sOe(){return oV||(oV=1,HE=Pse()),HE}var oOe=sOe(),Gu=it(oOe),WE,aV;function aOe(){if(aV)return WE;aV=1,ml();var t=si();return WE=t("Array","entries"),WE}var KE,lV;function lOe(){if(lV)return KE;lV=1;var t=aOe();return KE=t,KE}var GE,cV;function cOe(){if(cV)return GE;cV=1,gl();var t=fl(),e=Wr(),r=Hr(),n=lOe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return GE=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},GE}var YE,uV;function uOe(){return uV||(uV=1,YE=cOe()),YE}var dOe=uOe(),hOe=it(dOe);const Jr=[];for(let t=0;t<256;++t)Jr.push((t+256).toString(16).slice(1));function fOe(t,e=0){return(Jr[t[e+0]]+Jr[t[e+1]]+Jr[t[e+2]]+Jr[t[e+3]]+"-"+Jr[t[e+4]]+Jr[t[e+5]]+"-"+Jr[t[e+6]]+Jr[t[e+7]]+"-"+Jr[t[e+8]]+Jr[t[e+9]]+"-"+Jr[t[e+10]]+Jr[t[e+11]]+Jr[t[e+12]]+Jr[t[e+13]]+Jr[t[e+14]]+Jr[t[e+15]]).toLowerCase()}let QE;const pOe=new Uint8Array(16);function mOe(){if(!QE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");QE=crypto.getRandomValues.bind(crypto)}return QE(pOe)}const gOe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var dV={randomUUID:gOe};function yOe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??mOe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,fOe(n)}function vOe(t,e,r){return dV.randomUUID&&!t?dV.randomUUID():yOe(t)}function hV(t){return typeof t=="string"||typeof t=="number"}class qA{constructor(e){Ha(this,"_queue",[]),Ha(this,"_timeout",null),Ha(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new qA(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=t2e(()=>{this.flush()},this.delay))}flush(){var e,r;Mc(e=Dse(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class Gv{constructor(){Ha(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Ha(this,"subscribe",Gv.prototype.on),Ha(this,"unsubscribe",Gv.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");Mc(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=Hu(n=this._subscribers[e]).call(n,i=>i!==r)}}var fV={},pV={},mV;function bOe(){if(mV)return pV;mV=1;var t=goe(),e=yoe();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),pV}var gV;function xOe(){return gV||(gV=1,bOe()),fV}var yV={},XE,vV;function eu(){if(vV)return XE;vV=1;var t=hh(),e=TypeError;return XE=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},XE}var JE,bV;function tu(){if(bV)return JE;bV=1;var t=wi(),e=voe(),r=t("Set"),n=r.prototype;return JE={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},JE}var ZE,xV;function ru(){if(xV)return ZE;xV=1;var t=ii();return ZE=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},ZE}var eN,wV;function Em(){if(wV)return eN;wV=1;var t=ru();return eN=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},eN}var tN,SV;function LA(){if(SV)return tN;SV=1;var t=tu(),e=Em(),r=t.Set,n=t.add;return tN=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},tN}var rN,_V;function Nm(){return _V||(_V=1,rN=function(t){return t.size}),rN}var nN,EV;function wOe(){return EV||(EV=1,nN=function(t){return{iterator:t,next:t.next,done:!1}}),nN}var iN,NV;function nu(){if(NV)return iN;NV=1;var t=Bo(),e=zo(),r=ii(),n=gh(),i=wOe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},iN=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},iN}var sN,CV;function SOe(){if(CV)return sN;CV=1;var t=eu(),e=tu(),r=LA(),n=Nm(),i=nu(),s=Em(),o=ru(),a=e.has,l=e.remove;return sN=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},sN}var oN,kV;function iu(){return kV||(kV=1,oN=function(){return!1}),oN}var TV;function _Oe(){if(TV)return yV;TV=1;var t=Ve(),e=SOe(),r=xt(),n=iu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),yV}var OV={},aN,jV;function EOe(){if(jV)return aN;jV=1;var t=eu(),e=tu(),r=Nm(),n=nu(),i=Em(),s=ru(),o=e.Set,a=e.add,l=e.has;return aN=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},aN}var PV;function NOe(){if(PV)return OV;PV=1;var t=Ve(),e=xt(),r=EOe(),n=iu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),OV}var IV={},lN,RV;function COe(){if(RV)return lN;RV=1;var t=eu(),e=tu().has,r=Nm(),n=nu(),i=Em(),s=ru(),o=$A();return lN=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},lN}var MV;function kOe(){if(MV)return IV;MV=1;var t=Ve(),e=COe(),r=iu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),IV}var AV={},cN,DV;function TOe(){if(DV)return cN;DV=1;var t=eu(),e=Nm(),r=Em(),n=nu();return cN=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},cN}var $V;function OOe(){if($V)return AV;$V=1;var t=Ve(),e=TOe(),r=iu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),AV}var FV={},uN,qV;function jOe(){if(qV)return uN;qV=1;var t=eu(),e=tu().has,r=Nm(),n=nu(),i=ru(),s=$A();return uN=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},uN}var LV;function POe(){if(LV)return FV;LV=1;var t=Ve(),e=jOe(),r=iu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),FV}var BV={},dN,zV;function IOe(){if(zV)return dN;zV=1;var t=eu(),e=tu(),r=LA(),n=nu(),i=ru(),s=e.add,o=e.has,a=e.remove;return dN=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},dN}var hN,VV;function xoe(){return VV||(VV=1,hN=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),hN}var UV;function ROe(){if(UV)return BV;UV=1;var t=Ve(),e=IOe(),r=xoe(),n=iu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),BV}var HV={},fN,WV;function MOe(){if(WV)return fN;WV=1;var t=eu(),e=tu().add,r=LA(),n=nu(),i=ru();return fN=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},fN}var KV;function AOe(){if(KV)return HV;KV=1;var t=Ve(),e=MOe(),r=xoe(),n=iu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),HV}var pN,GV;function DOe(){if(GV)return pN;GV=1,ml(),xOe(),_Oe(),NOe(),kOe(),OOe(),POe(),ROe(),AOe(),lb();var t=Rr();return pN=t.Set,pN}var mN,YV;function $Oe(){if(YV)return mN;YV=1;var t=DOe();return gl(),mN=t,mN}var gN,QV;function FOe(){return QV||(QV=1,gN=$Oe()),gN}var qOe=FOe(),yN=it(qOe),vN,XV;function LOe(){if(XV)return vN;XV=1,ml(),lb();var t=poe();return vN=t,vN}var bN,JV;function BOe(){if(JV)return bN;JV=1;var t=LOe();return gl(),bN=t,bN}var xN,ZV;function zOe(){if(ZV)return xN;ZV=1;var t=BOe();return xN=t,xN}var wN,eU;function VOe(){if(eU)return wN;eU=1;var t=zOe();return wN=t,wN}var SN,tU;function UOe(){return tU||(tU=1,SN=VOe()),SN}var _N,rU;function HOe(){return rU||(rU=1,_N=UOe()),_N}var WOe=HOe(),EN=it(WOe);class Ul{constructor(e){this._pairs=e}*[Gu](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return as(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return as(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=Fke(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new boe(this._pairs)}toIdSet(){return new yN(this.toIdArray())}toItemSet(){return new yN(this.toItemArray())}cache(){return new Ul([...this._pairs])}distinct(e){const r=new yN;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new Ul({*[Gu](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new Ul({*[Gu](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=EN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=EN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new Ul({[Gu]:()=>{var r;return EN(YI(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function nU(t,e){var r=OA(t);if(W6){var n=W6(t);e&&(n=Hu(n).call(n,function(i){return doe(t,i).enumerable})),r.push.apply(r,n)}return r}function iU(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Mc(r=nU(Object(i),!0)).call(r,function(s){Ha(t,s,i[s])}):n8?pTe(t,n8(i)):Mc(n=nU(Object(i))).call(n,function(s){yTe(t,s,doe(i,s))})}return t}function KOe(t,e){return t[e]==null&&(t[e]=vOe()),t}class Qd extends Gv{get idProp(){return this._idProp}constructor(e,r){super(),Ha(this,"_queue",null),e&&!ks(e)&&(r=e,e=[]),this._options=r||{},this._data=new boe,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=qA.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(ks(e)){const s=as(e).call(e,o=>o[this._idProp]);if(FTe(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=c=>{const d=c[a];if(d!=null&&this._data.has(d)){const h=c,f=Cke({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(c);n.push(h)}};if(ks(e))for(let c=0,d=e.length;c<d;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const c={items:i,oldData:s,data:o};this._trigger("update",c,r)}return Ike(n).call(n,i)}updateOnly(e,r){var n;ks(e)||(e=[e]);const i=as(n=as(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=H2e(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(i.length){const s={items:as(i).call(i,o=>o.id),oldData:as(i).call(i,o=>o.oldData),data:as(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;hV(e)?(n=e,s=r):ks(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&Hu(s),l=[];let c,d,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)c=this._data.get(i[p]),c!=null&&(!a||a(c))&&l.push(c);else{var f;d=[..._u(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const v=l[m],y=v[this._idProp];p[y]=v}return p}else return n!=null?c??null:l}getIds(e){const r=this._data,n=e&&Hu(e),i=e&&e.order,s=[..._u(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=this._data.get(c);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=r.get(c);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&Hu(r),i=this._data,s=[..._u(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const c=o[a],d=c[this._idProp];e(c,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,r){const n=r&&Hu(r),i=[],s=this._data,o=[..._u(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],d=this._data.get(c);d!=null&&(!n||n(d))&&i.push(e(d,c))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&pCe(n=ks(r)?r:OA(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;YI(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")YI(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=ks(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(hV(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[..._u(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of sV(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of sV(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[..._u(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=KOe(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+Kke(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,iU(iU({},n),e)),r}stream(e){if(e){const n=this._data;return new Ul({*[Gu](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new Ul({[Gu]:Ise(r=hOe(this._data)).call(r,this._data)})}}}function GOe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof Mc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof as(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function woe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof Mc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof as(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&GOe(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var sU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oU={},sf,aU;function Bt(){if(aU)return sf;aU=1;var t=function(e){return e&&e.Math===Math&&e};return sf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof sU=="object"&&sU)||t(typeof sf=="object"&&sf)||function(){return this}()||Function("return this")(),sf}var NN,lU;function st(){return lU||(lU=1,NN=function(t){try{return!!t()}catch{return!0}}),NN}var CN,cU;function Cm(){if(cU)return CN;cU=1;var t=st();return CN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),CN}var kN,uU;function hb(){if(uU)return kN;uU=1;var t=Cm(),e=Function.prototype,r=e.apply,n=e.call;return kN=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),kN}var TN,dU;function at(){if(dU)return TN;dU=1;var t=Cm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return TN=t?n:function(i){return function(){return r.apply(i,arguments)}},TN}var ON,hU;function Hs(){if(hU)return ON;hU=1;var t=at(),e=t({}.toString),r=t("".slice);return ON=function(n){return r(e(n),8,-1)},ON}var jN,fU;function BA(){if(fU)return jN;fU=1;var t=Hs(),e=at();return jN=function(r){if(t(r)==="Function")return e(r)},jN}var PN,pU;function Gr(){if(pU)return PN;pU=1;var t=typeof document=="object"&&document.all;return PN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},PN}var IN={},RN,mU;function pr(){if(mU)return RN;mU=1;var t=st();return RN=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),RN}var MN,gU;function oi(){if(gU)return MN;gU=1;var t=Cm(),e=Function.prototype.call;return MN=t?e.bind(e):function(){return e.apply(e,arguments)},MN}var AN={},yU;function fb(){if(yU)return AN;yU=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return AN.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,AN}var DN,vU;function km(){return vU||(vU=1,DN=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),DN}var $N,bU;function pb(){if(bU)return $N;bU=1;var t=at(),e=st(),r=Hs(),n=Object,i=t("".split);return $N=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,$N}var FN,xU;function wh(){return xU||(xU=1,FN=function(t){return t==null}),FN}var qN,wU;function Vo(){if(wU)return qN;wU=1;var t=wh(),e=TypeError;return qN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},qN}var LN,SU;function bs(){if(SU)return LN;SU=1;var t=pb(),e=Vo();return LN=function(r){return t(e(r))},LN}var BN,_U;function Yr(){if(_U)return BN;_U=1;var t=Gr();return BN=function(e){return typeof e=="object"?e!==null:t(e)},BN}var zN,EU;function wt(){return EU||(EU=1,zN={}),zN}var VN,NU;function Si(){if(NU)return VN;NU=1;var t=wt(),e=Bt(),r=Gr(),n=function(i){return r(i)?i:void 0};return VN=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},VN}var UN,CU;function Nr(){if(CU)return UN;CU=1;var t=at();return UN=t({}.isPrototypeOf),UN}var HN,kU;function Sh(){if(kU)return HN;kU=1;var t=Bt(),e=t.navigator,r=e&&e.userAgent;return HN=r?String(r):"",HN}var WN,TU;function Tm(){if(TU)return WN;TU=1;var t=Bt(),e=Sh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),WN=a,WN}var KN,OU;function _h(){if(OU)return KN;OU=1;var t=Tm(),e=st(),r=Bt(),n=r.String;return KN=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),KN}var GN,jU;function Soe(){if(jU)return GN;jU=1;var t=_h();return GN=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",GN}var YN,PU;function Om(){if(PU)return YN;PU=1;var t=Si(),e=Gr(),r=Nr(),n=Soe(),i=Object;return YN=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},YN}var QN,IU;function Eh(){if(IU)return QN;IU=1;var t=String;return QN=function(e){try{return t(e)}catch{return"Object"}},QN}var XN,RU;function Uo(){if(RU)return XN;RU=1;var t=Gr(),e=Eh(),r=TypeError;return XN=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},XN}var JN,MU;function zA(){if(MU)return JN;MU=1;var t=Uo(),e=wh();return JN=function(r,n){var i=r[n];return e(i)?void 0:t(i)},JN}var ZN,AU;function YOe(){if(AU)return ZN;AU=1;var t=oi(),e=Gr(),r=Yr(),n=TypeError;return ZN=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},ZN}var eC={exports:{}},tC,DU;function Nh(){return DU||(DU=1,tC=!0),tC}var rC,$U;function QOe(){if($U)return rC;$U=1;var t=Bt(),e=Object.defineProperty;return rC=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},rC}var FU;function VA(){if(FU)return eC.exports;FU=1;var t=Nh(),e=Bt(),r=QOe(),n="__core-js_shared__",i=eC.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),eC.exports}var nC,qU;function Ch(){if(qU)return nC;qU=1;var t=VA();return nC=function(e,r){return t[e]||(t[e]=r||{})},nC}var iC,LU;function _i(){if(LU)return iC;LU=1;var t=Vo(),e=Object;return iC=function(r){return e(t(r))},iC}var sC,BU;function ln(){if(BU)return sC;BU=1;var t=at(),e=_i(),r=t({}.hasOwnProperty);return sC=Object.hasOwn||function(i,s){return r(e(i),s)},sC}var oC,zU;function mb(){if(zU)return oC;zU=1;var t=at(),e=0,r=Math.random(),n=t(1.1.toString);return oC=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},oC}var aC,VU;function Cr(){if(VU)return aC;VU=1;var t=Bt(),e=Ch(),r=ln(),n=mb(),i=_h(),s=Soe(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return aC=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},aC}var lC,UU;function _oe(){if(UU)return lC;UU=1;var t=oi(),e=Yr(),r=Om(),n=zA(),i=YOe(),s=Cr(),o=TypeError,a=s("toPrimitive");return lC=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},lC}var cC,HU;function UA(){if(HU)return cC;HU=1;var t=_oe(),e=Om();return cC=function(r){var n=t(r,"string");return e(n)?n:n+""},cC}var uC,WU;function Eoe(){if(WU)return uC;WU=1;var t=Bt(),e=Yr(),r=t.document,n=e(r)&&e(r.createElement);return uC=function(i){return n?r.createElement(i):{}},uC}var dC,KU;function Noe(){if(KU)return dC;KU=1;var t=pr(),e=st(),r=Eoe();return dC=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),dC}var GU;function gb(){if(GU)return IN;GU=1;var t=pr(),e=oi(),r=fb(),n=km(),i=bs(),s=UA(),o=ln(),a=Noe(),l=Object.getOwnPropertyDescriptor;return IN.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},IN}var hC,YU;function XOe(){if(YU)return hC;YU=1;var t=st(),e=Gr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return hC=n,hC}var fC,QU;function yb(){if(QU)return fC;QU=1;var t=BA(),e=Uo(),r=Cm(),n=t(t.bind);return fC=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},fC}var pC={},mC,XU;function Coe(){if(XU)return mC;XU=1;var t=pr(),e=st();return mC=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),mC}var gC,JU;function Ws(){if(JU)return gC;JU=1;var t=Yr(),e=String,r=TypeError;return gC=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},gC}var ZU;function Yi(){if(ZU)return pC;ZU=1;var t=pr(),e=Noe(),r=Coe(),n=Ws(),i=UA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return pC.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},pC}var yC,eH;function kh(){if(eH)return yC;eH=1;var t=pr(),e=Yi(),r=km();return yC=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},yC}var vC,tH;function je(){if(tH)return vC;tH=1;var t=Bt(),e=hb(),r=BA(),n=Gr(),i=gb().f,s=XOe(),o=wt(),a=yb(),l=kh(),c=ln(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return vC=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,N,E,C,k,j,P;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),C=b[N],S&&(h.dontCallGetSet?(P=i(y,N),k=P&&P.value):k=y[N]),E=S&&k?k:f[N],!(!x&&!v&&typeof C==typeof E)&&(h.bind&&S?j=a(E,t):h.wrap&&S?j=d(E):v&&n(E)?j=r(E):j=E,(h.sham||E&&E.sham||C&&C.sham)&&l(j,"sham",!0),l(b,N,j),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},vC}var bC,rH;function JOe(){if(rH)return bC;rH=1;var t=Math.ceil,e=Math.floor;return bC=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},bC}var xC,nH;function Th(){if(nH)return xC;nH=1;var t=JOe();return xC=function(e){var r=+e;return r!==r||r===0?0:t(r)},xC}var wC,iH;function vb(){if(iH)return wC;iH=1;var t=Th(),e=Math.max,r=Math.min;return wC=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},wC}var SC,sH;function koe(){if(sH)return SC;sH=1;var t=Th(),e=Math.min;return SC=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},SC}var _C,oH;function Ho(){if(oH)return _C;oH=1;var t=koe();return _C=function(e){return t(e.length)},_C}var EC,aH;function HA(){if(aH)return EC;aH=1;var t=bs(),e=vb(),r=Ho(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return EC={includes:n(!0),indexOf:n(!1)},EC}var NC,lH;function jm(){return lH||(lH=1,NC={}),NC}var CC,cH;function Toe(){if(cH)return CC;cH=1;var t=at(),e=ln(),r=bs(),n=HA().indexOf,i=jm(),s=t([].push);return CC=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},CC}var kC,uH;function WA(){return uH||(uH=1,kC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),kC}var TC,dH;function Pm(){if(dH)return TC;dH=1;var t=Toe(),e=WA();return TC=Object.keys||function(n){return t(n,e)},TC}var OC={},hH;function bb(){return hH||(hH=1,OC.f=Object.getOwnPropertySymbols),OC}var jC,fH;function ZOe(){if(fH)return jC;fH=1;var t=pr(),e=at(),r=oi(),n=st(),i=Pm(),s=bb(),o=fb(),a=_i(),l=pb(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return jC=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,jC}var pH;function eje(){if(pH)return oU;pH=1;var t=je(),e=ZOe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),oU}var PC,mH;function tje(){if(mH)return PC;mH=1,eje();var t=wt();return PC=t.Object.assign,PC}var IC,gH;function rje(){if(gH)return IC;gH=1;var t=tje();return IC=t,IC}var RC,yH;function nje(){return yH||(yH=1,RC=rje()),RC}var ije=nje(),br=qe(ije),vH={},MC,bH;function Oh(){if(bH)return MC;bH=1;var t=at();return MC=t([].slice),MC}var AC,xH;function sje(){if(xH)return AC;xH=1;var t=at(),e=Uo(),r=Yr(),n=ln(),i=Oh(),s=Cm(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return AC=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},AC}var wH;function oje(){if(wH)return vH;wH=1;var t=je(),e=sje();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),vH}var DC,SH;function cn(){if(SH)return DC;SH=1;var t=Bt(),e=wt();return DC=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},DC}var $C,_H;function aje(){if(_H)return $C;_H=1,oje();var t=cn();return $C=t("Function","bind"),$C}var FC,EH;function lje(){if(EH)return FC;EH=1;var t=Nr(),e=aje(),r=Function.prototype;return FC=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},FC}var qC,NH;function cje(){if(NH)return qC;NH=1;var t=lje();return qC=t,qC}var LC,CH;function uje(){return CH||(CH=1,LC=cje()),LC}var dje=uje(),oe=qe(dje);function KA(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function hje(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function fje(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function pje(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function mje(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function gje(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function Ooe(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function QI(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,c=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,c,d,c),t.bezierCurveTo(d-o,c,e,h+a,e,h),t.closePath()}function joe(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,c=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),v=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+c,f,p,f),t.bezierCurveTo(p-c,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-c,r,p,r),t.bezierCurveTo(p+c,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+c,v,p,v),t.bezierCurveTo(p-c,v,e,g+d,e,g),t.lineTo(e,m)}function Poe(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,c=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+c*c)),p=a<0?-p:p,e+=p,r+=c*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function yje(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const kH={circle:KA,dashedLine:Poe,database:joe,diamond:gje,ellipse:QI,ellipse_vis:QI,hexagon:yje,roundRect:Ooe,square:hje,star:mje,triangle:fje,triangleDown:pje};function vje(t){return Object.prototype.hasOwnProperty.call(kH,t)?kH[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var BC={exports:{}},TH;function bje(){return TH||(TH=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(BC)),BC.exports}var xje=bje(),Ioe=qe(xje),OH={},zC,jH;function su(){if(jH)return zC;jH=1;var t=Hs();return zC=Array.isArray||function(r){return t(r)==="Array"},zC}var VC,PH;function Roe(){if(PH)return VC;PH=1;var t=TypeError,e=9007199254740991;return VC=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},VC}var UC,IH;function xb(){if(IH)return UC;IH=1;var t=pr(),e=Yi(),r=km();return UC=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},UC}var HC,RH;function GA(){if(RH)return HC;RH=1;var t=Cr(),e=t("toStringTag"),r={};return r[e]="z",HC=String(r)==="[object z]",HC}var WC,MH;function jh(){if(MH)return WC;MH=1;var t=GA(),e=Gr(),r=Hs(),n=Cr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return WC=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},WC}var KC,AH;function wje(){if(AH)return KC;AH=1;var t=at(),e=Gr(),r=VA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),KC=r.inspectSource,KC}var GC,DH;function Moe(){if(DH)return GC;DH=1;var t=at(),e=st(),r=Gr(),n=jh(),i=Si(),s=wje(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,GC=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,GC}var YC,$H;function Sje(){if($H)return YC;$H=1;var t=su(),e=Moe(),r=Yr(),n=Cr(),i=n("species"),s=Array;return YC=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},YC}var QC,FH;function YA(){if(FH)return QC;FH=1;var t=Sje();return QC=function(e,r){return new(t(e))(r===0?0:r)},QC}var XC,qH;function Im(){if(qH)return XC;qH=1;var t=st(),e=Cr(),r=Tm(),n=e("species");return XC=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},XC}var LH;function Aoe(){if(LH)return OH;LH=1;var t=je(),e=st(),r=su(),n=Yr(),i=_i(),s=Ho(),o=Roe(),a=xb(),l=YA(),c=Im(),d=Cr(),h=Tm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,N,E,C;for(S=-1,N=arguments.length;S<N;S++)if(C=S===-1?b:arguments[S],m(C))for(E=s(C),o(x+E),_=0;_<E;_++,x++)_ in C&&a(w,x,C[_]);else o(x+1),a(w,x++,C);return w.length=x,w}}),OH}var BH={},zH={},JC,VH;function Qi(){if(VH)return JC;VH=1;var t=jh(),e=String;return JC=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},JC}var ZC={},UH;function QA(){if(UH)return ZC;UH=1;var t=pr(),e=Coe(),r=Yi(),n=Ws(),i=bs(),s=Pm();return ZC.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},ZC}var ek,HH;function _je(){if(HH)return ek;HH=1;var t=Si();return ek=t("document","documentElement"),ek}var tk,WH;function wb(){if(WH)return tk;WH=1;var t=Ch(),e=mb(),r=t("keys");return tk=function(n){return r[n]||(r[n]=e(n))},tk}var rk,KH;function Rm(){if(KH)return rk;KH=1;var t=Ws(),e=QA(),r=WA(),n=jm(),i=_je(),s=Eoe(),o=wb(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,rk=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},rk}var nk={},GH;function Sb(){if(GH)return nk;GH=1;var t=Toe(),e=WA(),r=e.concat("length","prototype");return nk.f=Object.getOwnPropertyNames||function(i){return t(i,r)},nk}var ik={},YH;function XA(){if(YH)return ik;YH=1;var t=Hs(),e=bs(),r=Sb().f,n=Oh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return ik.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},ik}var sk,QH;function Mm(){if(QH)return sk;QH=1;var t=kh();return sk=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},sk}var ok,XH;function JA(){if(XH)return ok;XH=1;var t=Yi();return ok=function(e,r,n){return t.f(e,r,n)},ok}var ak={},JH;function _b(){if(JH)return ak;JH=1;var t=Cr();return ak.f=t,ak}var lk,ZH;function Xt(){if(ZH)return lk;ZH=1;var t=wt(),e=ln(),r=_b(),n=Yi().f;return lk=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},lk}var ck,e7;function Doe(){if(e7)return ck;e7=1;var t=oi(),e=Si(),r=Cr(),n=Mm();return ck=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},ck}var uk,t7;function Eje(){if(t7)return uk;t7=1;var t=GA(),e=jh();return uk=t?{}.toString:function(){return"[object "+e(this)+"]"},uk}var dk,r7;function ou(){if(r7)return dk;r7=1;var t=GA(),e=Yi().f,r=kh(),n=ln(),i=Eje(),s=Cr(),o=s("toStringTag");return dk=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},dk}var hk,n7;function $oe(){if(n7)return hk;n7=1;var t=Bt(),e=Gr(),r=t.WeakMap;return hk=e(r)&&/native code/.test(String(r)),hk}var fk,i7;function au(){if(i7)return fk;i7=1;var t=$oe(),e=Bt(),r=Yr(),n=kh(),i=ln(),s=VA(),o=wb(),a=jm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return fk={set:h,get:f,has:p,enforce:m,getterFor:g},fk}var pk,s7;function yl(){if(s7)return pk;s7=1;var t=yb(),e=at(),r=pb(),n=_i(),i=Ho(),s=YA(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),N=t(y,b),E=0,C=w||s,k=c?C(v,_):d||m?C(v,0):void 0,j,P;_>E;E++)if((g||E in S)&&(j=S[E],P=N(j,E,x),l))if(c)k[E]=P;else if(P)switch(l){case 3:return!0;case 5:return j;case 6:return E;case 2:o(k,j)}else switch(l){case 4:return!1;case 7:o(k,j)}return p?-1:h||f?f:k}};return pk={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},pk}var o7;function Nje(){if(o7)return zH;o7=1;var t=je(),e=Bt(),r=oi(),n=at(),i=Nh(),s=pr(),o=_h(),a=st(),l=ln(),c=Nr(),d=Ws(),h=bs(),f=UA(),p=Qi(),m=km(),g=Rm(),v=Pm(),y=Sb(),b=XA(),w=bb(),x=gb(),S=Yi(),_=QA(),N=fb(),E=Mm(),C=JA(),k=Ch(),j=wb(),P=jm(),O=mb(),A=Cr(),q=_b(),D=Xt(),B=Doe(),F=ou(),K=au(),X=yl().forEach,G=j("hidden"),L="Symbol",Z="prototype",ce=K.set,Be=K.getterFor(L),Te=Object[Z],tt=e.Symbol,pt=tt&&tt[Z],Qr=e.RangeError,kr=e.TypeError,Jt=e.QObject,ee=x.f,Ne=S.f,We=b.f,lt=N.f,zt=n([].push),Ie=k("symbols"),Ze=k("op-symbols"),Mr=k("wks"),St=!Jt||!Jt[Z]||!Jt[Z].findChild,M=function(Se,ne,pe){var ue=ee(Te,ne);ue&&delete Te[ne],Ne(Se,ne,pe),ue&&Se!==Te&&Ne(Te,ne,ue)},$=s&&a(function(){return g(Ne({},"a",{get:function(){return Ne(this,"a",{value:7}).a}})).a!==7})?M:Ne,z=function(Se,ne){var pe=Ie[Se]=g(pt);return ce(pe,{type:L,tag:Se,description:ne}),s||(pe.description=ne),pe},se=function(ne,pe,ue){ne===Te&&se(Ze,pe,ue),d(ne);var Ce=f(pe);return d(ue),l(Ie,Ce)?(ue.enumerable?(l(ne,G)&&ne[G][Ce]&&(ne[G][Ce]=!1),ue=g(ue,{enumerable:m(0,!1)})):(l(ne,G)||Ne(ne,G,m(1,g(null))),ne[G][Ce]=!0),$(ne,Ce,ue)):Ne(ne,Ce,ue)},J=function(ne,pe){d(ne);var ue=h(pe),Ce=v(ue).concat(kt(ue));return X(Ce,function(Ye){(!s||r(ge,ue,Ye))&&se(ne,Ye,ue[Ye])}),ne},Y=function(ne,pe){return pe===void 0?g(ne):J(g(ne),pe)},ge=function(ne){var pe=f(ne),ue=r(lt,this,pe);return this===Te&&l(Ie,pe)&&!l(Ze,pe)?!1:ue||!l(this,pe)||!l(Ie,pe)||l(this,G)&&this[G][pe]?ue:!0},ze=function(ne,pe){var ue=h(ne),Ce=f(pe);if(!(ue===Te&&l(Ie,Ce)&&!l(Ze,Ce))){var Ye=ee(ue,Ce);return Ye&&l(Ie,Ce)&&!(l(ue,G)&&ue[G][Ce])&&(Ye.enumerable=!0),Ye}},Xe=function(ne){var pe=We(h(ne)),ue=[];return X(pe,function(Ce){!l(Ie,Ce)&&!l(P,Ce)&&zt(ue,Ce)}),ue},kt=function(Se){var ne=Se===Te,pe=We(ne?Ze:h(Se)),ue=[];return X(pe,function(Ce){l(Ie,Ce)&&(!ne||l(Te,Ce))&&zt(ue,Ie[Ce])}),ue};return o||(tt=function(){if(c(pt,this))throw new kr("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),pe=O(ne),ue=function(Ce){var Ye=this===void 0?e:this;Ye===Te&&r(ue,Ze,Ce),l(Ye,G)&&l(Ye[G],pe)&&(Ye[G][pe]=!1);var Ei=m(1,Ce);try{$(Ye,pe,Ei)}catch(wn){if(!(wn instanceof Qr))throw wn;M(Ye,pe,Ei)}};return s&&St&&$(Te,pe,{configurable:!0,set:ue}),z(pe,ne)},pt=tt[Z],E(pt,"toString",function(){return Be(this).tag}),E(tt,"withoutSetter",function(Se){return z(O(Se),Se)}),N.f=ge,S.f=se,_.f=J,x.f=ze,y.f=b.f=Xe,w.f=kt,q.f=function(Se){return z(A(Se),Se)},s&&(C(pt,"description",{configurable:!0,get:function(){return Be(this).description}}),i||E(Te,"propertyIsEnumerable",ge,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:tt}),X(v(Mr),function(Se){D(Se)}),t({target:L,stat:!0,forced:!o},{useSetter:function(){St=!0},useSimple:function(){St=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Y,defineProperty:se,defineProperties:J,getOwnPropertyDescriptor:ze}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Xe}),B(),F(tt,L),P[G]=!0,zH}var a7={},mk,l7;function Foe(){if(l7)return mk;l7=1;var t=_h();return mk=t&&!!Symbol.for&&!!Symbol.keyFor,mk}var c7;function Cje(){if(c7)return a7;c7=1;var t=je(),e=Si(),r=ln(),n=Qi(),i=Ch(),s=Foe(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),a7}var u7={},d7;function kje(){if(d7)return u7;d7=1;var t=je(),e=ln(),r=Om(),n=Eh(),i=Ch(),s=Foe(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),u7}var h7={},gk,f7;function Tje(){if(f7)return gk;f7=1;var t=at(),e=su(),r=Gr(),n=Hs(),i=Qi(),s=t([].push);return gk=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},gk}var p7;function qoe(){if(p7)return h7;p7=1;var t=je(),e=Si(),r=hb(),n=oi(),i=at(),s=st(),o=Gr(),a=Om(),l=Oh(),c=Tje(),d=_h(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var C=e("Symbol")("stringify detection");return f([C])!=="[null]"||f({a:C})!=="{}"||f(Object(C))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(C,k){var j=l(arguments),P=c(k);if(!(!o(P)&&(C===void 0||a(C))))return j[1]=function(O,A){if(o(P)&&(A=n(P,this,h(O),A)),!a(A))return A},r(f,null,j)},E=function(C,k,j){var P=m(j,k-1),O=m(j,k+1);return p(w,C)&&!p(x,O)||p(x,C)&&!p(w,P)?"\\u"+y(g(C,0),16):C};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(k,j,P){var O=l(arguments),A=r(S?N:f,null,O);return _&&typeof A=="string"?v(A,b,E):A}}),h7}var m7={},g7;function Oje(){if(g7)return m7;g7=1;var t=je(),e=_h(),r=st(),n=bb(),i=_i(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),m7}var y7;function Loe(){return y7||(y7=1,Nje(),Cje(),kje(),qoe(),Oje()),BH}var v7={},b7;function Boe(){if(b7)return v7;b7=1;var t=Xt();return t("asyncDispose"),v7}var x7={},w7;function jje(){if(w7)return x7;w7=1;var t=Xt();return t("asyncIterator"),x7}var S7={},_7;function zoe(){if(_7)return S7;_7=1;var t=Xt();return t("dispose"),S7}var E7={},N7;function Pje(){if(N7)return E7;N7=1;var t=Xt();return t("hasInstance"),E7}var C7={},k7;function Ije(){if(k7)return C7;k7=1;var t=Xt();return t("isConcatSpreadable"),C7}var T7={},O7;function Voe(){if(O7)return T7;O7=1;var t=Xt();return t("iterator"),T7}var j7={},P7;function Rje(){if(P7)return j7;P7=1;var t=Xt();return t("match"),j7}var I7={},R7;function Mje(){if(R7)return I7;R7=1;var t=Xt();return t("matchAll"),I7}var M7={},A7;function Aje(){if(A7)return M7;A7=1;var t=Xt();return t("replace"),M7}var D7={},$7;function Dje(){if($7)return D7;$7=1;var t=Xt();return t("search"),D7}var F7={},q7;function $je(){if(q7)return F7;q7=1;var t=Xt();return t("species"),F7}var L7={},B7;function Fje(){if(B7)return L7;B7=1;var t=Xt();return t("split"),L7}var z7={},V7;function Uoe(){if(V7)return z7;V7=1;var t=Xt(),e=Doe();return t("toPrimitive"),e(),z7}var U7={},H7;function qje(){if(H7)return U7;H7=1;var t=Si(),e=Xt(),r=ou();return e("toStringTag"),r(t("Symbol"),"Symbol"),U7}var W7={},K7;function Lje(){if(K7)return W7;K7=1;var t=Xt();return t("unscopables"),W7}var G7={},Y7;function Bje(){if(Y7)return G7;Y7=1;var t=Bt(),e=ou();return e(t.JSON,"JSON",!0),G7}var yk,Q7;function zje(){if(Q7)return yk;Q7=1,Aoe(),Loe(),Boe(),jje(),zoe(),Pje(),Ije(),Voe(),Rje(),Mje(),Aje(),Dje(),$je(),Fje(),Uoe(),qje(),Lje(),Bje();var t=wt();return yk=t.Symbol,yk}var X7={},vk,J7;function ZA(){return J7||(J7=1,vk=function(){}),vk}var bk,Z7;function Ph(){return Z7||(Z7=1,bk={}),bk}var xk,eW;function Vje(){if(eW)return xk;eW=1;var t=pr(),e=ln(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return xk={EXISTS:i,PROPER:s,CONFIGURABLE:o},xk}var wk,tW;function Hoe(){if(tW)return wk;tW=1;var t=st();return wk=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),wk}var Sk,rW;function Eb(){if(rW)return Sk;rW=1;var t=ln(),e=Gr(),r=_i(),n=wb(),i=Hoe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return Sk=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},Sk}var _k,nW;function Woe(){if(nW)return _k;nW=1;var t=st(),e=Gr(),r=Yr(),n=Rm(),i=Eb(),s=Mm(),o=Cr(),a=Nh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),_k={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},_k}var Ek,iW;function Uje(){if(iW)return Ek;iW=1;var t=Woe().IteratorPrototype,e=Rm(),r=km(),n=ou(),i=Ph(),s=function(){return this};return Ek=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},Ek}var Nk,sW;function Hje(){if(sW)return Nk;sW=1;var t=at(),e=Uo();return Nk=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},Nk}var Ck,oW;function Wje(){if(oW)return Ck;oW=1;var t=Yr();return Ck=function(e){return t(e)||e===null},Ck}var kk,aW;function Kje(){if(aW)return kk;aW=1;var t=Wje(),e=String,r=TypeError;return kk=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},kk}var Tk,lW;function Gje(){if(lW)return Tk;lW=1;var t=Hje(),e=Yr(),r=Vo(),n=Kje();return Tk=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),Tk}var Ok,cW;function eD(){if(cW)return Ok;cW=1;var t=je(),e=oi(),r=Nh(),n=Vje(),i=Gr(),s=Uje(),o=Eb(),a=Gje(),l=ou(),c=kh(),d=Mm(),h=Cr(),f=Ph(),p=Woe(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return Ok=function(N,E,C,k,j,P,O){s(C,E,k);var A=function(ce){if(ce===j&&K)return K;if(!y&&ce&&ce in B)return B[ce];switch(ce){case w:return function(){return new C(this,ce)};case x:return function(){return new C(this,ce)};case S:return function(){return new C(this,ce)}}return function(){return new C(this)}},q=E+" Iterator",D=!1,B=N.prototype,F=B[b]||B["@@iterator"]||j&&B[j],K=!y&&F||A(j),X=E==="Array"&&B.entries||F,G,L,Z;if(X&&(G=o(X.call(new N)),G!==Object.prototype&&G.next&&(!r&&o(G)!==v&&(a?a(G,v):i(G[b])||d(G,b,_)),l(G,q,!0,!0),r&&(f[q]=_))),m&&j===x&&F&&F.name!==x&&(!r&&g?c(B,"name",x):(D=!0,K=function(){return e(F,this)})),j)if(L={values:A(x),keys:P?K:A(w),entries:A(S)},O)for(Z in L)(y||D||!(Z in B))&&d(B,Z,L[Z]);else t({target:E,proto:!0,forced:y||D},L);return(!r||O)&&B[b]!==K&&d(B,b,K,{name:j}),f[E]=K,L},Ok}var jk,uW;function tD(){return uW||(uW=1,jk=function(t,e){return{value:t,done:e}}),jk}var Pk,dW;function Ih(){if(dW)return Pk;dW=1;var t=bs(),e=ZA(),r=Ph(),n=au(),i=Yi().f,s=eD(),o=tD(),a=Nh(),l=pr(),c="Array Iterator",d=n.set,h=n.getterFor(c);Pk=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return Pk}var Ik,hW;function Yje(){return hW||(hW=1,Ik={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Ik}var fW;function Rh(){if(fW)return X7;fW=1,Ih();var t=Yje(),e=Bt(),r=ou(),n=Ph();for(var i in t)r(e[i],i),n[i]=n.Array;return X7}var Rk,pW;function Koe(){if(pW)return Rk;pW=1;var t=zje();return Rh(),Rk=t,Rk}var Mk,mW;function Qje(){return mW||(mW=1,Mk=Koe()),Mk}var Xje=Qje(),Jje=qe(Xje),gW={},yW;function Zje(){if(yW)return gW;yW=1;var t=je(),e=su(),r=Moe(),n=Yr(),i=vb(),s=Ho(),o=bs(),a=xb(),l=Cr(),c=Im(),d=Oh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,N,E;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in b&&a(N,E,b[x]);return N.length=E,N}}),gW}var Ak,vW;function ePe(){if(vW)return Ak;vW=1,Zje();var t=cn();return Ak=t("Array","slice"),Ak}var Dk,bW;function tPe(){if(bW)return Dk;bW=1;var t=Nr(),e=ePe(),r=Array.prototype;return Dk=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},Dk}var $k,xW;function rPe(){if(xW)return $k;xW=1;var t=tPe();return $k=t,$k}var Fk,wW;function nPe(){return wW||(wW=1,Fk=rPe()),Fk}var iPe=nPe(),Is=qe(iPe),qk,SW;function sPe(){if(SW)return qk;SW=1;var t=Si(),e=at(),r=Sb(),n=bb(),i=Ws(),s=e([].concat);return qk=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},qk}var _W={},EW;function oPe(){if(EW)return _W;EW=1;var t=je(),e=su();return t({target:"Array",stat:!0},{isArray:e}),_W}var Lk,NW;function aPe(){if(NW)return Lk;NW=1,oPe();var t=wt();return Lk=t.Array.isArray,Lk}var Bk,CW;function lPe(){if(CW)return Bk;CW=1;var t=aPe();return Bk=t,Bk}var zk,kW;function cPe(){return kW||(kW=1,zk=lPe()),zk}var uPe=cPe(),lr=qe(uPe),TW={},OW;function dPe(){if(OW)return TW;OW=1;var t=je(),e=yl().map,r=Im(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),TW}var Vk,jW;function hPe(){if(jW)return Vk;jW=1,dPe();var t=cn();return Vk=t("Array","map"),Vk}var Uk,PW;function fPe(){if(PW)return Uk;PW=1;var t=Nr(),e=hPe(),r=Array.prototype;return Uk=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},Uk}var Hk,IW;function pPe(){if(IW)return Hk;IW=1;var t=fPe();return Hk=t,Hk}var Wk,RW;function mPe(){return RW||(RW=1,Wk=pPe()),Wk}var gPe=mPe(),Xd=qe(gPe),MW={},AW;function yPe(){if(AW)return MW;AW=1;var t=je(),e=_i(),r=Pm(),n=st(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),MW}var Kk,DW;function vPe(){if(DW)return Kk;DW=1,yPe();var t=wt();return Kk=t.Object.keys,Kk}var Gk,$W;function bPe(){if($W)return Gk;$W=1;var t=vPe();return Gk=t,Gk}var Yk,FW;function xPe(){return FW||(FW=1,Yk=bPe()),Yk}var wPe=xPe(),ir=qe(wPe),qW={},LW;function SPe(){if(LW)return qW;LW=1;var t=je(),e=at(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),qW}var Qk,BW;function _Pe(){if(BW)return Qk;BW=1,SPe();var t=wt();return Qk=t.Date.now,Qk}var Xk,zW;function EPe(){if(zW)return Xk;zW=1;var t=_Pe();return Xk=t,Xk}var Jk,VW;function NPe(){return VW||(VW=1,Jk=EPe()),Jk}var CPe=NPe(),Yv=qe(CPe),UW={},Zk,HW;function Mh(){if(HW)return Zk;HW=1;var t=st();return Zk=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},Zk}var e2,WW;function kPe(){if(WW)return e2;WW=1;var t=yl().forEach,e=Mh(),r=e("forEach");return e2=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},e2}var KW;function TPe(){if(KW)return UW;KW=1;var t=je(),e=kPe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),UW}var t2,GW;function OPe(){if(GW)return t2;GW=1,TPe();var t=cn();return t2=t("Array","forEach"),t2}var r2,YW;function jPe(){if(YW)return r2;YW=1;var t=OPe();return r2=t,r2}var n2,QW;function PPe(){if(QW)return n2;QW=1;var t=jh(),e=ln(),r=Nr(),n=jPe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return n2=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},n2}var i2,XW;function IPe(){return XW||(XW=1,i2=PPe()),i2}var RPe=IPe(),Nt=qe(RPe),JW={},ZW;function MPe(){if(ZW)return JW;ZW=1;var t=je(),e=at(),r=su(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),JW}var s2,e9;function APe(){if(e9)return s2;e9=1,MPe();var t=cn();return s2=t("Array","reverse"),s2}var o2,t9;function DPe(){if(t9)return o2;t9=1;var t=Nr(),e=APe(),r=Array.prototype;return o2=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},o2}var a2,r9;function $Pe(){if(r9)return a2;r9=1;var t=DPe();return a2=t,a2}var l2,n9;function FPe(){return n9||(n9=1,l2=$Pe()),l2}var qPe=FPe(),hc=qe(qPe),i9={},c2,s9;function LPe(){if(s9)return c2;s9=1;var t=pr(),e=su(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return c2=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},c2}var u2,o9;function Goe(){if(o9)return u2;o9=1;var t=Eh(),e=TypeError;return u2=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},u2}var a9;function BPe(){if(a9)return i9;a9=1;var t=je(),e=_i(),r=vb(),n=Th(),i=Ho(),s=LPe(),o=Roe(),a=YA(),l=xb(),c=Goe(),d=Im(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,N,E,C,k;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),N=a(y,_),E=0;E<_;E++)C=w+E,C in y&&l(N,E,y[C]);if(N.length=_,S<_){for(E=w;E<b-_;E++)C=E+_,k=E+S,C in y?y[k]=y[C]:c(y,k);for(E=b;E>b-_+S;E--)c(y,E-1)}else if(S>_)for(E=b-_;E>w;E--)C=E+_-1,k=E+S-1,C in y?y[k]=y[C]:c(y,k);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,b-_+S),N}}),i9}var d2,l9;function zPe(){if(l9)return d2;l9=1,BPe();var t=cn();return d2=t("Array","splice"),d2}var h2,c9;function VPe(){if(c9)return h2;c9=1;var t=Nr(),e=zPe(),r=Array.prototype;return h2=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},h2}var f2,u9;function UPe(){if(u9)return f2;u9=1;var t=VPe();return f2=t,f2}var p2,d9;function HPe(){return d9||(d9=1,p2=UPe()),p2}var WPe=HPe(),_o=qe(WPe),h9={},f9;function KPe(){if(f9)return h9;f9=1;var t=je(),e=HA().includes,r=st(),n=ZA(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),h9}var m2,p9;function GPe(){if(p9)return m2;p9=1,KPe();var t=cn();return m2=t("Array","includes"),m2}var m9={},g2,g9;function YPe(){if(g9)return g2;g9=1;var t=Yr(),e=Hs(),r=Cr(),n=r("match");return g2=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},g2}var y2,y9;function QPe(){if(y9)return y2;y9=1;var t=YPe(),e=TypeError;return y2=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},y2}var v2,v9;function XPe(){if(v9)return v2;v9=1;var t=Cr(),e=t("match");return v2=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},v2}var b9;function JPe(){if(b9)return m9;b9=1;var t=je(),e=at(),r=QPe(),n=Vo(),i=Qi(),s=XPe(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),m9}var b2,x9;function ZPe(){if(x9)return b2;x9=1,JPe();var t=cn();return b2=t("String","includes"),b2}var x2,w9;function eIe(){if(w9)return x2;w9=1;var t=Nr(),e=GPe(),r=ZPe(),n=Array.prototype,i=String.prototype;return x2=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},x2}var w2,S9;function tIe(){if(S9)return w2;S9=1;var t=eIe();return w2=t,w2}var S2,_9;function rIe(){return _9||(_9=1,S2=tIe()),S2}var nIe=rIe(),Ka=qe(nIe),E9={},N9;function iIe(){if(N9)return E9;N9=1;var t=je(),e=st(),r=_i(),n=Eb(),i=Hoe(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),E9}var _2,C9;function sIe(){if(C9)return _2;C9=1,iIe();var t=wt();return _2=t.Object.getPrototypeOf,_2}var E2,k9;function oIe(){if(k9)return E2;k9=1;var t=sIe();return E2=t,E2}var N2,T9;function aIe(){return T9||(T9=1,N2=oIe()),N2}var lIe=aIe(),O9=qe(lIe),C2,j9;function cIe(){if(j9)return C2;j9=1,Aoe();var t=cn();return C2=t("Array","concat"),C2}var k2,P9;function uIe(){if(P9)return k2;P9=1;var t=Nr(),e=cIe(),r=Array.prototype;return k2=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},k2}var T2,I9;function dIe(){if(I9)return T2;I9=1;var t=uIe();return T2=t,T2}var O2,R9;function hIe(){return R9||(R9=1,O2=dIe()),O2}var fIe=hIe(),pIe=qe(fIe),M9={},A9;function mIe(){if(A9)return M9;A9=1;var t=je(),e=yl().filter,r=Im(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),M9}var j2,D9;function gIe(){if(D9)return j2;D9=1,mIe();var t=cn();return j2=t("Array","filter"),j2}var P2,$9;function yIe(){if($9)return P2;$9=1;var t=Nr(),e=gIe(),r=Array.prototype;return P2=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},P2}var I2,F9;function vIe(){if(F9)return I2;F9=1;var t=yIe();return I2=t,I2}var R2,q9;function bIe(){return q9||(q9=1,R2=vIe()),R2}var xIe=bIe(),Wn=qe(xIe),L9={},M2,B9;function wIe(){if(B9)return M2;B9=1;var t=pr(),e=st(),r=at(),n=Eb(),i=Pm(),s=bs(),o=fb().f,a=r(o),l=r([].push),c=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=c&&n(p)===null,v=m.length,y=0,b=[],w;v>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(b,h?[w,p[w]]:p[w]);return b}};return M2={entries:d(!0),values:d(!1)},M2}var z9;function SIe(){if(z9)return L9;z9=1;var t=je(),e=wIe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),L9}var A2,V9;function _Ie(){if(V9)return A2;V9=1,SIe();var t=wt();return A2=t.Object.values,A2}var D2,U9;function EIe(){if(U9)return D2;U9=1;var t=_Ie();return D2=t,D2}var $2,H9;function NIe(){return H9||(H9=1,$2=EIe()),$2}var CIe=NIe(),kIe=qe(CIe),W9={},F2,K9;function rD(){return K9||(K9=1,F2=`	
\v\f\r \u2028\u2029\uFEFF`),F2}var q2,G9;function Yoe(){if(G9)return q2;G9=1;var t=at(),e=Vo(),r=Qi(),n=rD(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(c){var d=r(e(c));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return q2={start:a(1),end:a(2),trim:a(3)},q2}var L2,Y9;function TIe(){if(Y9)return L2;Y9=1;var t=Bt(),e=st(),r=at(),n=Qi(),i=Yoe().trim,s=rD(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,c=/^[+-]?0x/i,d=r(c.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return L2=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(c,g)?16:10))}:o,L2}var Q9;function OIe(){if(Q9)return W9;Q9=1;var t=je(),e=TIe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),W9}var B2,X9;function jIe(){if(X9)return B2;X9=1,OIe();var t=wt();return B2=t.parseInt,B2}var z2,J9;function PIe(){if(J9)return z2;J9=1;var t=jIe();return z2=t,z2}var V2,Z9;function IIe(){return Z9||(Z9=1,V2=PIe()),V2}var RIe=IIe(),ls=qe(RIe),eK={},tK;function MIe(){if(tK)return eK;tK=1;var t=je(),e=BA(),r=HA().indexOf,n=Mh(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var c=arguments.length>1?arguments[1]:void 0;return s?i(this,l,c)||0:r(this,l,c)}}),eK}var U2,rK;function AIe(){if(rK)return U2;rK=1,MIe();var t=cn();return U2=t("Array","indexOf"),U2}var H2,nK;function DIe(){if(nK)return H2;nK=1;var t=Nr(),e=AIe(),r=Array.prototype;return H2=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},H2}var W2,iK;function $Ie(){if(iK)return W2;iK=1;var t=DIe();return W2=t,W2}var K2,sK;function FIe(){return sK||(sK=1,K2=$Ie()),K2}var qIe=FIe(),yt=qe(qIe),oK={},aK;function LIe(){if(aK)return oK;aK=1;var t=je(),e=pr(),r=Rm();return t({target:"Object",stat:!0,sham:!e},{create:r}),oK}var G2,lK;function BIe(){if(lK)return G2;lK=1,LIe();var t=wt(),e=t.Object;return G2=function(n,i){return e.create(n,i)},G2}var Y2,cK;function zIe(){if(cK)return Y2;cK=1;var t=BIe();return Y2=t,Y2}var Q2,uK;function VIe(){return uK||(uK=1,Q2=zIe()),Q2}var UIe=VIe(),fc=qe(UIe),dK={},X2,hK;function HIe(){if(hK)return X2;hK=1;var t=Th(),e=Qi(),r=Vo(),n=RangeError;return X2=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},X2}var J2,fK;function WIe(){if(fK)return J2;fK=1;var t=at(),e=koe(),r=Qi(),n=HIe(),i=Vo(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return J2={start:l(!1),end:l(!0)},J2}var Z2,pK;function KIe(){if(pK)return Z2;pK=1;var t=at(),e=st(),r=WIe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return Z2=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,Z2}var mK;function GIe(){if(mK)return dK;mK=1;var t=je(),e=oi(),r=_i(),n=_oe(),i=KIe(),s=Hs(),o=st(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),dK}var eT,gK;function YIe(){if(gK)return eT;gK=1,GIe(),qoe();var t=wt(),e=hb();return t.JSON||(t.JSON={stringify:JSON.stringify}),eT=function(n,i,s){return e(t.JSON.stringify,null,arguments)},eT}var tT,yK;function QIe(){if(yK)return tT;yK=1;var t=YIe();return tT=t,tT}var rT,vK;function XIe(){return vK||(vK=1,rT=QIe()),rT}var JIe=XIe(),Am=qe(JIe),bK={},xK={},nT,wK;function Qoe(){if(wK)return nT;wK=1;var t=Bt(),e=Sh(),r=Hs(),n=function(i){return e.slice(0,i.length)===i};return nT=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),nT}var iT,SK;function ZIe(){if(SK)return iT;SK=1;var t=TypeError;return iT=function(e,r){if(e<r)throw new t("Not enough arguments");return e},iT}var sT,_K;function Xoe(){if(_K)return sT;_K=1;var t=Bt(),e=hb(),r=Gr(),n=Qoe(),i=Sh(),s=Oh(),o=ZIe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return sT=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?c(y,p):c(y)}:c},sT}var EK;function eRe(){if(EK)return xK;EK=1;var t=je(),e=Bt(),r=Xoe(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),xK}var NK={},CK;function tRe(){if(CK)return NK;CK=1;var t=je(),e=Bt(),r=Xoe(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),NK}var kK;function Joe(){return kK||(kK=1,eRe(),tRe()),bK}var oT,TK;function rRe(){if(TK)return oT;TK=1,Joe();var t=wt();return oT=t.setTimeout,oT}var aT,OK;function nRe(){return OK||(OK=1,aT=rRe()),aT}var iRe=nRe(),Eo=qe(iRe),jK={},lT,PK;function sRe(){if(PK)return lT;PK=1;var t=_i(),e=vb(),r=Ho();return lT=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,d=c===void 0?o:e(c,o);d>l;)s[l++]=i;return s},lT}var IK;function oRe(){if(IK)return jK;IK=1;var t=je(),e=sRe(),r=ZA();return t({target:"Array",proto:!0},{fill:e}),r("fill"),jK}var cT,RK;function aRe(){if(RK)return cT;RK=1,oRe();var t=cn();return cT=t("Array","fill"),cT}var uT,MK;function lRe(){if(MK)return uT;MK=1;var t=Nr(),e=aRe(),r=Array.prototype;return uT=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},uT}var dT,AK;function cRe(){if(AK)return dT;AK=1;var t=lRe();return dT=t,dT}var hT,DK;function uRe(){return DK||(DK=1,hT=cRe()),hT}var dRe=uRe(),Dm=qe(dRe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function gs(){return gs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gs.apply(this,arguments)}function Xi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function qg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var XI;typeof Object.assign!="function"?XI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:XI=Object.assign;var Fc=XI,$K=["","webkit","Moz","MS","ms","o"],hRe=typeof document>"u"?{style:{}}:document.createElement("div"),fRe="function",Yu=Math.round,qc=Math.abs,nD=Date.now;function Nb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<$K.length;){if(r=$K[s],n=r?r+i:e,n in t)return n;s++}}var No;typeof window>"u"?No={}:No=window;var Zoe=Nb(hRe.style,"touchAction"),eae=Zoe!==void 0;function pRe(){if(!eae)return!1;var t={},e=No.CSS&&No.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?No.CSS.supports("touch-action",r):!0}),t}var tae="compute",rae="auto",JI="manipulation",pc="none",Pp="pan-x",Ip="pan-y",Lg=pRe(),mRe=/mobile|tablet|ip(ad|hone|od)|android/i,nae="ontouchstart"in No,gRe=Nb(No,"PointerEvent")!==void 0,yRe=nae&&mRe.test(navigator.userAgent),$m="touch",vRe="pen",iD="mouse",bRe="kinect",xRe=25,An=1,lu=2,xr=4,ni=8,Qv=1,Fm=2,qm=4,Lm=8,Jd=16,Bs=Fm|qm,mc=Lm|Jd,iae=Bs|mc,sae=["x","y"],Xv=["clientX","clientY"];function Co(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function Cb(t,e){return typeof t===fRe?t.apply(e&&e[0]||void 0,e):t}function Hl(t,e){return t.indexOf(e)>-1}function wRe(t){if(Hl(t,pc))return pc;var e=Hl(t,Pp),r=Hl(t,Ip);return e&&r?pc:e||r?e?Pp:Ip:Hl(t,JI)?JI:rae}var oae=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===tae&&(n=this.compute()),eae&&this.manager.element.style&&Lg[n]&&(this.manager.element.style[Zoe]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Co(this.manager.recognizers,function(i){Cb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),wRe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Hl(o,pc)&&!Lg[pc],l=Hl(o,Ip)&&!Lg[Ip],c=Hl(o,Pp)&&!Lg[Pp];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&Bs||c&&s&mc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function sD(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function aae(t){var e=t.length;if(e===1)return{x:Yu(t[0].clientX),y:Yu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Yu(r/e),y:Yu(n/e)}}function FK(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Yu(t.pointers[r].clientX),clientY:Yu(t.pointers[r].clientY)},r++;return{timeStamp:nD(),pointers:e,center:aae(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Jv(t,e,r){r||(r=sae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function ZI(t,e,r){r||(r=sae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function lae(t,e){return t===e?Qv:qc(t)>=qc(e)?t<0?Fm:qm:e<0?Lm:Jd}function SRe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===An||s.eventType===xr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function cae(t,e,r){return{x:e/t||0,y:r/t||0}}function _Re(t,e){return Jv(e[0],e[1],Xv)/Jv(t[0],t[1],Xv)}function ERe(t,e){return ZI(e[1],e[0],Xv)+ZI(t[1],t[0],Xv)}function NRe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ni&&(n>xRe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=cae(n,l,c);s=d.x,o=d.y,i=qc(d.x)>qc(d.y)?d.x:d.y,a=lae(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function CRe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=FK(e)),i>1&&!r.firstMultiple?r.firstMultiple=FK(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=aae(n);e.timeStamp=nD(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=ZI(a,l),e.distance=Jv(a,l),SRe(r,e),e.offsetDirection=lae(e.deltaX,e.deltaY);var c=cae(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=qc(c.x)>qc(c.y)?c.x:c.y,e.scale=o?_Re(o.pointers,n):1,e.rotation=o?ERe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,NRe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,sD(f,d)&&(d=f),e.target=d}function kRe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&An&&n-i===0,o=e&(xr|ni)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,CRe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Rp(t){return t.trim().split(/\s+/g)}function Bf(t,e,r){Co(Rp(e),function(n){t.addEventListener(n,r,!1)})}function zf(t,e,r){Co(Rp(e),function(n){t.removeEventListener(n,r,!1)})}function qK(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Ah=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){Cb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Bf(this.element,this.evEl,this.domHandler),this.evTarget&&Bf(this.target,this.evTarget,this.domHandler),this.evWin&&Bf(qK(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&zf(this.element,this.evEl,this.domHandler),this.evTarget&&zf(this.target,this.evTarget,this.domHandler),this.evWin&&zf(qK(this.element),this.evWin,this.domHandler)},t}();function Lc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var TRe={pointerdown:An,pointermove:lu,pointerup:xr,pointercancel:ni,pointerout:ni},ORe={2:$m,3:vRe,4:iD,5:bRe},uae="pointerdown",dae="pointermove pointerup pointercancel";No.MSPointerEvent&&!No.PointerEvent&&(uae="MSPointerDown",dae="MSPointerMove MSPointerUp MSPointerCancel");var hae=function(t){Xi(e,t);function e(){var n,i=e.prototype;return i.evEl=uae,i.evWin=dae,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=TRe[a],c=ORe[i.pointerType]||i.pointerType,d=c===$m,h=Lc(s,i.pointerId,"pointerId");l&An&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(xr|ni)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(Ah);function Mp(t){return Array.prototype.slice.call(t,0)}function oD(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Lc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var jRe={touchstart:An,touchmove:lu,touchend:xr,touchcancel:ni},PRe="touchstart touchmove touchend touchcancel",aD=function(t){Xi(e,t);function e(){var n;return e.prototype.evTarget=PRe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=jRe[i.type],o=IRe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:$m,srcEvent:i})},e}(Ah);function IRe(t,e){var r=Mp(t.touches),n=this.targetIds;if(e&(An|lu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Mp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return sD(c.target,l)}),e===An)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(xr|ni)&&delete n[o[i].identifier],i++;if(a.length)return[oD(s.concat(a),"identifier",!0),a]}var RRe={mousedown:An,mousemove:lu,mouseup:xr},MRe="mousedown",ARe="mousemove mouseup",lD=function(t){Xi(e,t);function e(){var n,i=e.prototype;return i.evEl=MRe,i.evWin=ARe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=RRe[i.type];s&An&&i.button===0&&(this.pressed=!0),s&lu&&i.which!==1&&(s=xr),this.pressed&&(s&xr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:iD,srcEvent:i}))},e}(Ah),DRe=2500,LK=25;function BK(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,DRe)}}function $Re(t,e){t&An?(this.primaryTouch=e.changedPointers[0].identifier,BK.call(this,e)):t&(xr|ni)&&BK.call(this,e)}function FRe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=LK&&o<=LK)return!0}return!1}var fae=function(){var t=function(e){Xi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===$m,h=c.pointerType===iD;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)$Re.call(qg(qg(o)),l,c);else if(h&&FRe.call(qg(qg(o)),c))return;o.callback(a,l,c)}},o.touch=new aD(o.manager,o.handler),o.mouse=new lD(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Ah);return t}();function qRe(t){var e,r=t.options.inputClass;return r?e=r:gRe?e=hae:yRe?e=aD:nae?e=fae:e=lD,new e(t,kRe)}function Qu(t,e,r){return Array.isArray(t)?(Co(t,r[e],r),!0):!1}var hy=1,Vi=2,Zd=4,Ga=8,ko=Ga,Ap=16,Ms=32,LRe=1;function BRe(){return LRe++}function Bg(t,e){var r=e.manager;return r?r.get(t):t}function zK(t){return t&Ap?"cancel":t&Ga?"end":t&Zd?"move":t&Vi?"start":""}var Bm=function(){function t(r){r===void 0&&(r={}),this.options=gs({enable:!0},r),this.id=BRe(),this.manager=null,this.state=hy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Fc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Qu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Bg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Qu(n,"dropRecognizeWith",this)?this:(n=Bg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Qu(n,"requireFailure",this))return this;var i=this.requireFail;return n=Bg(n,this),Lc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Qu(n,"dropRequireFailure",this))return this;n=Bg(n,this);var i=Lc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ga&&o(i.options.event+zK(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ga&&o(i.options.event+zK(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Ms},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Ms|hy)))return!1;n++}return!0},e.recognize=function(n){var i=Fc({},n);if(!Cb(this.options.enable,[this,i])){this.reset(),this.state=Ms;return}this.state&(ko|Ap|Ms)&&(this.state=hy),this.state=this.process(i),this.state&(Vi|Zd|Ga|Ap)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),eR=function(t){Xi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[JI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&An&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==xr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Jv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=ko,s.tryEmit()},o.interval),Vi):ko}return Ms},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Ms},this.options.interval),Ms},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===ko&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Bm),eh=function(t){Xi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Vi|Zd),l=this.attrTest(i);return a&&(o&ni||!l)?s|Ap:a||l?o&xr?s|Ga:s&Vi?s|Zd:Vi:Ms},e}(Bm);function pae(t){return t===Jd?"down":t===Lm?"up":t===Fm?"left":t===qm?"right":""}var cD=function(t){Xi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"pan",threshold:10,pointers:1,direction:iae},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Bs&&s.push(Ip),i&mc&&s.push(Pp),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Bs?(l=c===0?Qv:c<0?Fm:qm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Qv:d<0?Lm:Jd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return eh.prototype.attrTest.call(this,i)&&(this.state&Vi||!(this.state&Vi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=pae(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(eh),mae=function(t){Xi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"swipe",threshold:10,velocity:.3,direction:Bs|mc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return cD.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Bs|mc)?o=i.overallVelocity:s&Bs?o=i.overallVelocityX:s&mc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&qc(o)>this.options.velocity&&i.eventType&xr},r.emit=function(i){var s=pae(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(eh),gae=function(t){Xi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[pc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Vi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(eh),yae=function(t){Xi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[pc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Vi)},e}(eh),vae=function(t){Xi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[rae]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(xr|ni)&&!c)this.reset();else if(i.eventType&An)this.reset(),this._timer=setTimeout(function(){s.state=ko,s.tryEmit()},o.time);else if(i.eventType&xr)return ko;return Ms},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===ko&&(i&&i.eventType&xr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=nD(),this.manager.emit(this.options.event,this._input)))},e}(Bm),bae={domEvents:!1,touchAction:tae,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},VK=[[yae,{enable:!1}],[gae,{enable:!1},["rotate"]],[mae,{direction:Bs}],[cD,{direction:Bs},["swipe"]],[eR],[eR,{event:"doubletap",taps:2},["tap"]],[vae]],zRe=1,UK=2;function HK(t,e){var r=t.element;if(r.style){var n;Co(t.options.cssProps,function(i,s){n=Nb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function VRe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var WK=function(){function t(r,n){var i=this;this.options=Fc({},bae,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=qRe(this),this.touchAction=new oae(this,this.options.touchAction),HK(this,!0),Co(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Fc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?UK:zRe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&ko)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==UK&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Vi|Zd|Ga)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Bm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Qu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Qu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Lc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return Co(Rp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return Co(Rp(n),function(o){i?s[o]&&s[o].splice(Lc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&VRe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&HK(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),URe={touchstart:An,touchmove:lu,touchend:xr,touchcancel:ni},HRe="touchstart",WRe="touchstart touchmove touchend touchcancel",KRe=function(t){Xi(e,t);function e(){var n,i=e.prototype;return i.evTarget=HRe,i.evWin=WRe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=URe[i.type];if(s===An&&(this.started=!0),!!this.started){var o=GRe.call(this,i,s);s&(xr|ni)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:$m,srcEvent:i})}},e}(Ah);function GRe(t,e){var r=Mp(t.touches),n=Mp(t.changedTouches);return e&(xr|ni)&&(r=oD(r.concat(n),"identifier",!0)),[r,n]}function xae(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var wae=xae(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),YRe=xae(function(t,e){return wae(t,e,!0)},"merge","Use `assign`.");function QRe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Fc(i,r)}function KK(t,e){return function(){return t.apply(e,arguments)}}var Sae=function(){var t=function(r,n){return n===void 0&&(n={}),new WK(r,gs({recognizers:VK.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=iae,t.DIRECTION_DOWN=Jd,t.DIRECTION_LEFT=Fm,t.DIRECTION_RIGHT=qm,t.DIRECTION_UP=Lm,t.DIRECTION_HORIZONTAL=Bs,t.DIRECTION_VERTICAL=mc,t.DIRECTION_NONE=Qv,t.DIRECTION_DOWN=Jd,t.INPUT_START=An,t.INPUT_MOVE=lu,t.INPUT_END=xr,t.INPUT_CANCEL=ni,t.STATE_POSSIBLE=hy,t.STATE_BEGAN=Vi,t.STATE_CHANGED=Zd,t.STATE_ENDED=Ga,t.STATE_RECOGNIZED=ko,t.STATE_CANCELLED=Ap,t.STATE_FAILED=Ms,t.Manager=WK,t.Input=Ah,t.TouchAction=oae,t.TouchInput=aD,t.MouseInput=lD,t.PointerEventInput=hae,t.TouchMouseInput=fae,t.SingleTouchInput=KRe,t.Recognizer=Bm,t.AttrRecognizer=eh,t.Tap=eR,t.Pan=cD,t.Swipe=mae,t.Pinch=gae,t.Rotate=yae,t.Press=vae,t.on=Bf,t.off=zf,t.each=Co,t.merge=YRe,t.extend=wae,t.bindFn=KK,t.assign=Fc,t.inherit=QRe,t.bindFn=KK,t.prefixed=Nb,t.toArray=Mp,t.inArray=Lc,t.uniqueArray=oD,t.splitStr=Rp,t.boolOrFn=Cb,t.hasParent=sD,t.addEventListeners=Bf,t.removeEventListeners=zf,t.defaults=Fc({},bae,{preset:VK}),t}();Sae.defaults;Jje("DELETE");function kb(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return XRe(e.length?e:[Yv()])}function XRe(t){let[e,r,n]=JRe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function JRe(){const t=ZRe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function ZRe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function eMe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const uD=typeof window<"u"?window.Hammer||Sae:function(){return eMe()};function As(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=uD(this._dom.overlay);r.on("tap",oe(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Nt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{tMe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}Ioe(As.prototype);As.current=null;As.prototype.destroy=function(){this.deactivate();for(const r of hc(t=_o(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};As.prototype.activate=function(){As.current&&As.current.deactivate(),As.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};As.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};As.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function tMe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const rMe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,nMe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,iMe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,sMe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function oa(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(oa(e),t.removeChild(e))}}function ld(t){return t instanceof String||typeof t=="string"}function GK(t){return typeof t=="object"&&t!==null}function Bc(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function _ae(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")Bc(t,e,n,r);else{const i=t[n],s=e[n];GK(i)&&GK(s)&&_ae(i,s,r)}}function Dh(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(lr(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Ot(e[s],r[s],!1,n):Bc(e,r,s,n);else{if(lr(r[s]))throw new TypeError("Arrays are not supported by deepExtend");Bc(e,r,s,n)}}return e}function Zv(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(lr(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Ka(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?Ot(e[i],r[i]):Bc(e,r,i,n);else if(lr(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else Bc(e,r,i,n);return e}function Ot(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&O9(e[s])===Object.prototype)t[s]===void 0?t[s]=Ot({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&O9(t[s])===Object.prototype?Ot(t[s],e[s],r):Bc(t,e,s,n);else if(lr(e[s])){var i;t[s]=Is(i=e[s]).call(i)}else Bc(t,e,s,n);return t}function e0(t,e){return[...t,e]}function oMe(t){return Is(t).call(t)}function aMe(t){return t.getBoundingClientRect().left}function lMe(t){return t.getBoundingClientRect().top}function Je(t,e){if(lr(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function dD(t){let e;switch(t.length){case 3:case 4:return e=nMe.exec(t),e?{r:ls(e[1]+e[1],16),g:ls(e[2]+e[2],16),b:ls(e[3]+e[3],16)}:null;case 6:case 7:return e=rMe.exec(t),e?{r:ls(e[1],16),g:ls(e[2],16),b:ls(e[3],16)}:null;default:return null}}function $i(t,e){if(Ka(t).call(t,"rgba"))return t;if(Ka(t).call(t,"rgb")){const r=t.substr(yt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=dD(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function Eae(t,e,r){var n;return"#"+Is(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function tR(t,e){if(ld(t)){let n=t;if(Cae(n)){var r;const i=Xd(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return ls(s)});n=Eae(i[0],i[1],i[2])}if(Nae(n)===!0){const i=cMe(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=rR(o.h,o.s,o.v),l=rR(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:ld(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:ld(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function yf(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function fy(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),c=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=c,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=c,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function rR(t,e,r){const n=fy(t,e,r);return Eae(n.r,n.g,n.b)}function cMe(t){const e=dD(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return yf(e.r,e.g,e.b)}function Nae(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function Cae(t){return iMe.test(t)}function uMe(t){return sMe.test(t)}function Ya(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=fc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Ya(t[r]));return e}function Ii(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const v=m[g],y=p[g];for(const b in v)Object.prototype.hasOwnProperty.call(v,b)&&(y[b]=v[b])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=fc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const dMe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function aa(t,e){let r;lr(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const hMe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let fMe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return hMe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),ld(e)===!0){if(Cae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(uMe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(Nae(e)===!0){const s=dD(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Am(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=br({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Eo(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=br({},e)),this.color=e;const n=yf(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=yf(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=fy(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=yf(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Dm(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=oe(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=oe(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=oe(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=oe(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new uD(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,c=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=fy(o*c,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,c=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*d+s,f=Math.sin(c)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=c/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=yf(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const v=fy(g.h,g.s,g.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function nR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(nR(...Is(e).call(e,1))),n}}let pMe=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},br(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new fMe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(lr(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Wn(e)!==void 0&&(this.options.filter=Wn(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Wn(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Wn(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||yt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Nt(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(nR("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&yt(e).call(e,r)!==-1&&(s=yt(e).call(e,r));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],i.appendChild(c)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,c="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,c="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,c="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);c!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Eo(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Eo(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Wn(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],c=e0(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!lr(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(c);if(lr(l))this._handleArray(l,d,c);else if(typeof l=="string")this._makeTextInput(l,d,c);else if(typeof l=="boolean")this._makeCheckbox(l,d,c);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=e0(c,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(nR("pre","const options = "+Am(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},mMe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=ls(e),this.y=ls(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-r<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},of=!1,YK;const iR="background: #FFeeee; color: #dd0000";let gMe=class er{static validate(e,r,n){of=!1,YK=r;let i=r;return n!==void 0&&(i=r[n]),er.parse(e,i,[]),of}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&er.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){er.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=er.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),er.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+er.printLocation(o,e),iR)},l=er.getType(r[e]),c=s[l];c!==void 0?er.getType(c)==="array"&&yt(c).call(c,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+er.print(c)+' not "'+r[e]+'". '),of=!0):l==="object"&&i!=="__any__"&&(o=e0(o,e),er.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+er.print(ir(s))+". Received ["+l+'] "'+r[e]+'"'),of=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":lr(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=er.findInOptions(e,r,n,!1),s=er.findInOptions(e,YK,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+er.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+er.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+er.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+er.printLocation(i.path,e):l=". Did you mean one of these: "+er.print(ir(r))+er.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,iR),of=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=er.findInOptions(e,r[h],e0(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,c=p.indexMatch)}else{var d;yt(d=h.toLowerCase()).call(d,l)!==-1&&(c=h),f=er.levenshteinDistance(e,h),s>f&&(o=h,a=oMe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return Am(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const yMe=As,vMe=pMe,cd=uD,bMe=mMe,kae=iR,xMe=gMe;function wMe(t){return Oa=t,NMe()}var Tae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},hD=fc(Tae);hD.color="color.color";hD.style="dashes";var Nn={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},QK={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Oa="",th=0,Qe="",Re="",Vn=Nn.NULL;function SMe(){th=0,Qe=Oa.charAt(0)}function Dr(){th++,Qe=Oa.charAt(th)}function Eu(){return Oa.charAt(th+1)}function XK(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function rl(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function _Me(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function Oae(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=rl(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),yt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=rl(i.attr,e.attr))}function EMe(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=rl({},t.edge);e.attr=rl(r,e.attr)}}function jae(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=rl({},t.edge)),s.attr=rl(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Pt(){for(Vn=Nn.NULL,Re="";Qe===" "||Qe==="	"||Qe===`
`||Qe==="\r";)Dr();do{var t=!1;if(Qe==="#"){for(var e=th-1;Oa.charAt(e)===" "||Oa.charAt(e)==="	";)e--;if(Oa.charAt(e)===`
`||Oa.charAt(e)===""){for(;Qe!=""&&Qe!=`
`;)Dr();t=!0}}if(Qe==="/"&&Eu()==="/"){for(;Qe!=""&&Qe!=`
`;)Dr();t=!0}if(Qe==="/"&&Eu()==="*"){for(;Qe!="";)if(Qe==="*"&&Eu()==="/"){Dr(),Dr();break}else Dr();t=!0}for(;Qe===" "||Qe==="	"||Qe===`
`||Qe==="\r";)Dr()}while(t);if(Qe===""){Vn=Nn.DELIMITER;return}var r=Qe+Eu();if(QK[r]){Vn=Nn.DELIMITER,Re=r,Dr(),Dr();return}if(QK[Qe]){Vn=Nn.DELIMITER,Re=Qe,Dr();return}if(XK(Qe)||Qe==="-"){for(Re+=Qe,Dr();XK(Qe);)Re+=Qe,Dr();Re==="false"?Re=!1:Re==="true"?Re=!0:isNaN(Number(Re))||(Re=Number(Re)),Vn=Nn.IDENTIFIER;return}if(Qe==='"'){for(Dr();Qe!=""&&(Qe!='"'||Qe==='"'&&Eu()==='"');)Qe==='"'?(Re+=Qe,Dr()):Qe==="\\"&&Eu()==="n"?(Re+=`
`,Dr()):Re+=Qe,Dr();if(Qe!='"')throw Cn('End of string " expected');Dr(),Vn=Nn.IDENTIFIER;return}for(Vn=Nn.UNKNOWN;Qe!="";)Re+=Qe,Dr();throw new SyntaxError('Syntax error in part "'+Mae(Re,30)+'"')}function NMe(){var t={};if(SMe(),Pt(),Re==="strict"&&(t.strict=!0,Pt()),(Re==="graph"||Re==="digraph")&&(t.type=Re,Pt()),Vn===Nn.IDENTIFIER&&(t.id=Re,Pt()),Re!="{")throw Cn("Angle bracket { expected");if(Pt(),Pae(t),Re!="}")throw Cn("Angle bracket } expected");if(Pt(),Re!=="")throw Cn("End of file expected");return Pt(),delete t.node,delete t.edge,delete t.graph,t}function Pae(t){for(;Re!==""&&Re!="}";)CMe(t),Re===";"&&Pt()}function CMe(t){var e=Iae(t);if(e){Rae(t,e);return}var r=kMe(t);if(!r){if(Vn!=Nn.IDENTIFIER)throw Cn("Identifier expected");var n=Re;if(Pt(),Re==="="){if(Pt(),Vn!=Nn.IDENTIFIER)throw Cn("Identifier expected");t[n]=Re,Pt()}else TMe(t,n)}}function Iae(t){var e=null;if(Re==="subgraph"&&(e={},e.type="subgraph",Pt(),Vn===Nn.IDENTIFIER&&(e.id=Re,Pt())),Re==="{"){if(Pt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Pae(e),Re!="}")throw Cn("Angle bracket } expected");Pt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function kMe(t){return Re==="node"?(Pt(),t.node=Vf(),"node"):Re==="edge"?(Pt(),t.edge=Vf(),"edge"):Re==="graph"?(Pt(),t.graph=Vf(),"graph"):null}function TMe(t,e){var r={id:e},n=Vf();n&&(r.attr=n),Oae(t,r),Rae(t,e)}function Rae(t,e){for(;Re==="->"||Re==="--";){var r,n=Re;Pt();var i=Iae(t);if(i)r=i;else{if(Vn!=Nn.IDENTIFIER)throw Cn("Identifier or subgraph expected");r=Re,Oae(t,{id:r}),Pt()}var s=Vf(),o=jae(t,e,r,n,s);EMe(t,o),e=r}}function Vf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Re==="[";){for(Pt(),e={};Re!==""&&Re!="]";){if(Vn!=Nn.IDENTIFIER)throw Cn("Attribute name expected");var o=Re;if(Pt(),Re!="=")throw Cn("Equal sign = expected");if(Pt(),Vn!=Nn.IDENTIFIER)throw Cn("Attribute value expected");var a=Re;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),Pt(),Re==","&&Pt()}if(Re!="]")throw Cn("Bracket ] expected");Pt()}if(Ka(s).call(s,"dir")){var c={};for(c.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)c.arrows.to=t;else if(i[t].value.from!=null)c.arrows.from=t;else throw Cn("Invalid value of arrows");else i[t].name==="dir"&&(c.dir=t);var d=i[c.dir].value;if(!Ka(s).call(s,"arrows"))if(d==="both")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1,i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[c.dir].attr,name:"arrows",value:""}),c.arrows.to=i.length-1;else throw Cn('Invalid dir type "'+d+'"');var h,f;if(d==="both")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},_o(i).call(i,c.arrows.from,1)):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="arrow",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")c.arrows.to&&c.arrows.from?(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f="",h="arrow",c.arrows.from=c.arrows.to,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{from:{enabled:!0,type:i[c.arrows.from].value.from.type}}};else if(d==="none"){var p;c.arrows.to?p=c.arrows.to:p=c.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h="",c.arrows.to=c.arrows.from,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:i[c.arrows.to].value.to.type}}};else throw Cn('Invalid dir type "'+d+'"');_o(i).call(i,c.dir,1)}var m;if(Ka(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)_Me(i[t].attr,i[t].name,i[t].value);return e}function Cn(t){return new SyntaxError(t+', got "'+Mae(Re,30)+'" (char '+th+")")}function Mae(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function OMe(t,e,r){lr(t)?Nt(t).call(t,function(n){lr(e)?Nt(e).call(e,function(i){r(n,i)}):r(n,e)}):lr(e)?Nt(e).call(e,function(n){r(t,n)}):r(t,e)}function fT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function JK(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];lr(i)?Nt(i).call(i,function(s){fT(r,s,t[n])}):typeof i=="string"?fT(r,i,t[n]):fT(r,n,t[n])}return r}function jMe(t){var e=wMe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;Nt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};rl(a,JK(o.attr,Tae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return rl(a,JK(o.attr,hD)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};Nt(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var c;Nt(c=o.from.edges).call(c,function(h){var f=s(h);r.edges.push(f)})}if(OMe(a,l,function(h,f){var p=jae(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;Nt(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function PMe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=Xd(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:Xd(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const IMe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},RMe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},MMe={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},AMe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},DMe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},$Me={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},FMe={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},qMe={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},LMe={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},BMe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},zMe={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var VMe=Object.freeze({__proto__:null,cn:qMe,cs:zMe,de:RMe,en:IMe,es:MMe,fr:BMe,it:AMe,nl:DMe,pt:$Me,ru:FMe,uk:LMe});function UMe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(pIe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class HMe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),c=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,c,s],[5*c,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class WMe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new HMe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var ZK={},eG={},pT={exports:{}},mT,tG;function KMe(){if(tG)return mT;tG=1;var t=st();return mT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),mT}var gT,rG;function GMe(){if(rG)return gT;rG=1;var t=st(),e=Yr(),r=Hs(),n=KMe(),i=Object.isExtensible,s=t(function(){});return gT=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,gT}var yT,nG;function Aae(){if(nG)return yT;nG=1;var t=st();return yT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),yT}var iG;function Tb(){if(iG)return pT.exports;iG=1;var t=je(),e=at(),r=jm(),n=Yr(),i=ln(),s=Yi().f,o=Sb(),a=XA(),l=GMe(),c=mb(),d=Aae(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),C=0,k=E.length;C<k;C++)if(E[C]===f){S(E,C,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=pT.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,pT.exports}var vT,sG;function YMe(){if(sG)return vT;sG=1;var t=Cr(),e=Ph(),r=t("iterator"),n=Array.prototype;return vT=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},vT}var bT,oG;function Dae(){if(oG)return bT;oG=1;var t=jh(),e=zA(),r=wh(),n=Ph(),i=Cr(),s=i("iterator");return bT=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},bT}var xT,aG;function QMe(){if(aG)return xT;aG=1;var t=oi(),e=Uo(),r=Ws(),n=Eh(),i=Dae(),s=TypeError;return xT=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},xT}var wT,lG;function fD(){if(lG)return wT;lG=1;var t=oi(),e=Ws(),r=zA();return wT=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},wT}var ST,cG;function Ob(){if(cG)return ST;cG=1;var t=yb(),e=oi(),r=Ws(),n=Eh(),i=YMe(),s=Ho(),o=Nr(),a=QMe(),l=Dae(),c=fD(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return ST=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,N,E,C,k,j,P,O=function(q){return _&&c(_,"normal"),new h(!0,q)},A=function(q){return y?(r(q),x?S(q[0],q[1],O):S(q[0],q[1])):x?S(q,O):S(q)};if(b)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,C=s(p);C>E;E++)if(k=A(p[E]),k&&o(f,k))return k;return new h(!1)}_=a(p,N)}for(j=b?p.next:_.next;!(P=e(j,_)).done;){try{k=A(P.value)}catch(q){c(_,"throw",q)}if(typeof k=="object"&&k&&o(f,k))return k}return new h(!1)},ST}var _T,uG;function pD(){if(uG)return _T;uG=1;var t=Nr(),e=TypeError;return _T=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},_T}var ET,dG;function mD(){if(dG)return ET;dG=1;var t=je(),e=Bt(),r=Tb(),n=st(),i=kh(),s=Ob(),o=pD(),a=Gr(),l=Yr(),c=wh(),d=ou(),h=Yi().f,f=yl().forEach,p=pr(),m=au(),g=m.set,v=m.getterFor;return ET=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,C={},k;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))k=w.getConstructor(b,y,x,_),r.enable();else{k=b(function(O,A){g(o(O,j),{type:y,collection:new N}),c(A)||s(A,O[_],{that:O,AS_ENTRIES:x})});var j=k.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var A=O==="add"||O==="set";O in E&&!(S&&O==="clear")&&i(j,O,function(q,D){var B=P(this).collection;if(!A&&S&&!l(q))return O==="get"?void 0:!1;var F=B[O](q===0?0:q,D);return A?this:F})}),S||h(j,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(k,y,!1,!0),C[y]=k,t({global:!0,forced:!0},C),S||w.setStrong(k,y,x),k},ET}var NT,hG;function gD(){if(hG)return NT;hG=1;var t=Mm();return NT=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},NT}var CT,fG;function XMe(){if(fG)return CT;fG=1;var t=Si(),e=JA(),r=Cr(),n=pr(),i=r("species");return CT=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},CT}var kT,pG;function $ae(){if(pG)return kT;pG=1;var t=Rm(),e=JA(),r=gD(),n=yb(),i=pD(),s=wh(),o=Ob(),a=eD(),l=tD(),c=XMe(),d=pr(),h=Tb().fastKey,f=au(),p=f.set,m=f.getterFor;return kT={getConstructor:function(g,v,y,b){var w=g(function(E,C){i(E,x),p(E,{type:v,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(C)||o(C,E[b],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(E,C,k){var j=S(E),P=N(E,C),O,A;return P?P.value=k:(j.last=P={index:A=h(C,!0),key:C,value:k,previous:O=j.last,next:null,removed:!1},j.first||(j.first=P),O&&(O.next=P),d?j.size++:E.size++,A!=="F"&&(j.index[A]=P)),E},N=function(E,C){var k=S(E),j=h(C),P;if(j!=="F")return k.index[j];for(P=k.first;P;P=P.next)if(P.key===C)return P};return r(x,{clear:function(){for(var C=this,k=S(C),j=k.first;j;)j.removed=!0,j.previous&&(j.previous=j.previous.next=null),j=j.next;k.first=k.last=null,k.index=t(null),d?k.size=0:C.size=0},delete:function(E){var C=this,k=S(C),j=N(C,E);if(j){var P=j.next,O=j.previous;delete k.index[j.index],j.removed=!0,O&&(O.next=P),P&&(P.previous=O),k.first===j&&(k.first=P),k.last===j&&(k.last=O),d?k.size--:C.size--}return!!j},forEach:function(C){for(var k=S(this),j=n(C,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:k.first;)for(j(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(C){return!!N(this,C)}}),r(x,y?{get:function(C){var k=N(this,C);return k&&k.value},set:function(C,k){return _(this,C===0?0:C,k)}}:{add:function(C){return _(this,C=C===0?0:C,C)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(v)}},kT}var mG;function JMe(){if(mG)return eG;mG=1;var t=mD(),e=$ae();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),eG}var gG;function ZMe(){return gG||(gG=1,JMe()),ZK}var yG={},TT,vG;function Fae(){return vG||(vG=1,TT=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),TT}var OT,bG;function eAe(){if(bG)return OT;bG=1;var t=Si(),e=Fae(),r=t("Map");return OT={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},OT}var xG;function tAe(){if(xG)return yG;xG=1;var t=je(),e=at(),r=Uo(),n=Vo(),i=Ob(),s=eAe(),o=Nh(),a=st(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),yG}var wG={},jT,SG;function rAe(){if(SG)return jT;SG=1;var t=at(),e=Th(),r=Qi(),n=Vo(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return jT={codeAt:a(!1),charAt:a(!0)},jT}var _G;function yD(){if(_G)return wG;_G=1;var t=rAe().charAt,e=Qi(),r=au(),n=eD(),i=tD(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),wG}var PT,EG;function nAe(){if(EG)return PT;EG=1,Ih(),ZMe(),tAe(),yD();var t=wt();return PT=t.Map,PT}var IT,NG;function iAe(){if(NG)return IT;NG=1;var t=nAe();return Rh(),IT=t,IT}var RT,CG;function sAe(){return CG||(CG=1,RT=iAe()),RT}var oAe=sAe(),vD=qe(oAe);class aAe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},br(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&yt(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new vD,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var kG={},TG;function lAe(){if(TG)return kG;TG=1;var t=je();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),kG}var MT,OG;function cAe(){if(OG)return MT;OG=1,lAe();var t=wt();return MT=t.Number.isNaN,MT}var AT,jG;function uAe(){if(jG)return AT;jG=1;var t=cAe();return AT=t,AT}var DT,PG;function dAe(){return PG||(PG=1,DT=uAe()),DT}var hAe=dAe(),sR=qe(hAe),IG={},$T,RG;function fAe(){if(RG)return $T;RG=1;var t=Bt(),e=t.isFinite;return $T=Number.isFinite||function(n){return typeof n=="number"&&e(n)},$T}var MG;function pAe(){if(MG)return IG;MG=1;var t=je(),e=fAe();return t({target:"Number",stat:!0},{isFinite:e}),IG}var FT,AG;function mAe(){if(AG)return FT;AG=1,pAe();var t=wt();return FT=t.Number.isFinite,FT}var qT,DG;function gAe(){if(DG)return qT;DG=1;var t=mAe();return qT=t,qT}var LT,$G;function yAe(){return $G||($G=1,LT=gAe()),LT}var vAe=yAe(),Wl=qe(vAe),FG={},qG;function bAe(){if(qG)return FG;qG=1;var t=je(),e=yl().some,r=Mh(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),FG}var BT,LG;function xAe(){if(LG)return BT;LG=1,bAe();var t=cn();return BT=t("Array","some"),BT}var zT,BG;function wAe(){if(BG)return zT;BG=1;var t=Nr(),e=xAe(),r=Array.prototype;return zT=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},zT}var VT,zG;function SAe(){if(zG)return VT;zG=1;var t=wAe();return VT=t,VT}var UT,VG;function _Ae(){return VG||(VG=1,UT=SAe()),UT}var EAe=_Ae(),NAe=qe(EAe),HT={exports:{}},UG={},HG;function CAe(){if(HG)return UG;HG=1;var t=je(),e=pr(),r=Yi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),UG}var WG;function kAe(){if(WG)return HT.exports;WG=1,CAe();var t=wt(),e=t.Object,r=HT.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),HT.exports}var WT,KG;function qae(){if(KG)return WT;KG=1;var t=kAe();return WT=t,WT}var KT,GG;function TAe(){if(GG)return KT;GG=1;var t=qae();return KT=t,KT}var GT,YG;function OAe(){if(YG)return GT;YG=1;var t=TAe();return GT=t,GT}var YT,QG;function jAe(){return QG||(QG=1,YT=OAe()),YT}var PAe=jAe(),IAe=qe(PAe),XG={},JG;function RAe(){if(JG)return XG;JG=1;var t=Cr(),e=Yi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),XG}var ZG={},eY;function MAe(){return eY||(eY=1,Boe()),ZG}var tY={},rY;function AAe(){return rY||(rY=1,zoe()),tY}var nY={},iY;function DAe(){if(iY)return nY;iY=1;var t=Xt();return t("metadata"),nY}var QT,sY;function $Ae(){if(sY)return QT;sY=1;var t=Koe();return RAe(),MAe(),AAe(),DAe(),QT=t,QT}var oY={},XT,aY;function Lae(){if(aY)return XT;aY=1;var t=Si(),e=at(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return XT=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},XT}var lY;function FAe(){if(lY)return oY;lY=1;var t=je(),e=Lae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),oY}var cY={},JT,uY;function Bae(){if(uY)return JT;uY=1;for(var t=Ch(),e=Si(),r=at(),n=Om(),i=Cr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return JT=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},JT}var dY;function qAe(){if(dY)return cY;dY=1;var t=je(),e=Bae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),cY}var hY={},fY;function LAe(){if(fY)return hY;fY=1;var t=Xt();return t("customMatcher"),hY}var pY={},mY;function BAe(){if(mY)return pY;mY=1;var t=Xt();return t("observable"),pY}var gY={},yY;function zAe(){if(yY)return gY;yY=1;var t=je(),e=Lae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),gY}var vY={},bY;function VAe(){if(bY)return vY;bY=1;var t=je(),e=Bae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),vY}var xY={},wY;function UAe(){if(wY)return xY;wY=1;var t=Xt();return t("matcher"),xY}var SY={},_Y;function HAe(){if(_Y)return SY;_Y=1;var t=Xt();return t("metadataKey"),SY}var EY={},NY;function WAe(){if(NY)return EY;NY=1;var t=Xt();return t("patternMatch"),EY}var CY={},kY;function KAe(){if(kY)return CY;kY=1;var t=Xt();return t("replaceAll"),CY}var ZT,TY;function GAe(){if(TY)return ZT;TY=1;var t=$Ae();return FAe(),qAe(),LAe(),BAe(),zAe(),VAe(),UAe(),HAe(),WAe(),KAe(),ZT=t,ZT}var eO,OY;function YAe(){return OY||(OY=1,eO=GAe()),eO}var QAe=YAe(),zg=qe(QAe),tO,jY;function XAe(){if(jY)return tO;jY=1,Ih(),yD(),Voe();var t=_b();return tO=t.f("iterator"),tO}var rO,PY;function JAe(){if(PY)return rO;PY=1;var t=XAe();return Rh(),rO=t,rO}var nO,IY;function ZAe(){if(IY)return nO;IY=1;var t=JAe();return nO=t,nO}var iO,RY;function eDe(){if(RY)return iO;RY=1;var t=ZAe();return iO=t,iO}var sO,MY;function tDe(){return MY||(MY=1,sO=eDe()),sO}var rDe=tDe(),nDe=qe(rDe);function Dp(t){"@babel/helpers - typeof";return Dp=typeof zg=="function"&&typeof nDe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof zg=="function"&&e.constructor===zg&&e!==zg.prototype?"symbol":typeof e},Dp(t)}var oO,AY;function iDe(){if(AY)return oO;AY=1,Uoe();var t=_b();return oO=t.f("toPrimitive"),oO}var aO,DY;function sDe(){if(DY)return aO;DY=1;var t=iDe();return aO=t,aO}var lO,$Y;function oDe(){if($Y)return lO;$Y=1;var t=sDe();return lO=t,lO}var cO,FY;function aDe(){if(FY)return cO;FY=1;var t=oDe();return cO=t,cO}var uO,qY;function lDe(){return qY||(qY=1,uO=aDe()),uO}var cDe=lDe(),uDe=qe(cDe);function dDe(t,e){if(Dp(t)!="object"||!t)return t;var r=t[uDe];if(r!==void 0){var n=r.call(t,e);if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hDe(t){var e=dDe(t,"string");return Dp(e)=="symbol"?e:e+""}function mo(t,e,r){return(e=hDe(e))in t?IAe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var LY={},dO,BY;function fDe(){if(BY)return dO;BY=1;var t=Bt(),e=st(),r=at(),n=Qi(),i=Yoe().trim,s=rD(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,c=l&&l.iterator,d=1/a(s+"-0")!==-1/0||c&&!e(function(){a(Object(c))});return dO=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,dO}var zY;function pDe(){if(zY)return LY;zY=1;var t=je(),e=fDe();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),LY}var hO,VY;function mDe(){if(VY)return hO;VY=1,pDe();var t=wt();return hO=t.parseFloat,hO}var fO,UY;function gDe(){if(UY)return fO;UY=1;var t=mDe();return fO=t,fO}var pO,HY;function yDe(){return HY||(HY=1,pO=gDe()),pO}var vDe=yDe(),zae=qe(vDe),WY={},KY;function bDe(){if(KY)return WY;KY=1;var t=je(),e=st(),r=XA().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),WY}var mO,GY;function xDe(){if(GY)return mO;GY=1,bDe();var t=wt(),e=t.Object;return mO=function(n){return e.getOwnPropertyNames(n)},mO}var gO,YY;function wDe(){if(YY)return gO;YY=1;var t=xDe();return gO=t,gO}var yO,QY;function SDe(){return QY||(QY=1,yO=wDe()),yO}var _De=SDe(),EDe=qe(_De),vO,XY;function NDe(){if(XY)return vO;XY=1,Loe();var t=wt();return vO=t.Object.getOwnPropertySymbols,vO}var bO,JY;function CDe(){if(JY)return bO;JY=1;var t=NDe();return bO=t,bO}var xO,ZY;function kDe(){return ZY||(ZY=1,xO=CDe()),xO}var TDe=kDe(),nl=qe(TDe),wO={exports:{}},eQ={},tQ;function ODe(){if(tQ)return eQ;tQ=1;var t=je(),e=st(),r=bs(),n=gb().f,i=pr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),eQ}var rQ;function jDe(){if(rQ)return wO.exports;rQ=1,ODe();var t=wt(),e=t.Object,r=wO.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),wO.exports}var SO,nQ;function PDe(){if(nQ)return SO;nQ=1;var t=jDe();return SO=t,SO}var _O,iQ;function IDe(){return iQ||(iQ=1,_O=PDe()),_O}var RDe=IDe(),vl=qe(RDe),sQ={},oQ;function MDe(){if(oQ)return sQ;oQ=1;var t=je(),e=pr(),r=sPe(),n=bs(),i=gb(),s=xb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),sQ}var EO,aQ;function ADe(){if(aQ)return EO;aQ=1,MDe();var t=wt();return EO=t.Object.getOwnPropertyDescriptors,EO}var NO,lQ;function DDe(){if(lQ)return NO;lQ=1;var t=ADe();return NO=t,NO}var CO,cQ;function $De(){return cQ||(cQ=1,CO=DDe()),CO}var FDe=$De(),il=qe(FDe),kO={exports:{}},uQ={},dQ;function qDe(){if(dQ)return uQ;dQ=1;var t=je(),e=pr(),r=QA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),uQ}var hQ;function LDe(){if(hQ)return kO.exports;hQ=1,qDe();var t=wt(),e=t.Object,r=kO.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),kO.exports}var TO,fQ;function BDe(){if(fQ)return TO;fQ=1;var t=LDe();return TO=t,TO}var OO,pQ;function zDe(){return pQ||(pQ=1,OO=BDe()),OO}var VDe=zDe(),jb=qe(VDe),jO,mQ;function UDe(){return mQ||(mQ=1,jO=qae()),jO}var HDe=UDe(),Pb=qe(HDe);function bD(t,e){const r=["node","edge","label"];let n=!0;const i=aa(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(yt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=aa(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function oR(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function t0(t){return typeof t=="string"&&t!==""}function Vae(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var PO,gQ;function WDe(){if(gQ)return PO;gQ=1,Ih();var t=cn();return PO=t("Array","values"),PO}var IO,yQ;function KDe(){if(yQ)return IO;yQ=1;var t=WDe();return IO=t,IO}var RO,vQ;function GDe(){if(vQ)return RO;vQ=1,Rh();var t=jh(),e=ln(),r=Nr(),n=KDe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return RO=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},RO}var MO,bQ;function YDe(){return bQ||(bQ=1,MO=GDe()),MO}var QDe=YDe(),Uae=qe(QDe);class XDe{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=br({},Uae(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};br(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const JDe={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class xQ{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=JDe[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class ZDe{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let c=0;return o!==""&&(c=this.ctx.measureText(o).width),{width:c,values:l}};this.lines=new XDe(s)}process(e){if(!t0(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.splitStringIntoLines(c,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.lines.append(c,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new xQ(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new xQ(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Is(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Is(o).call(o,0,a),r),i[0]=Is(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=Is(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=Is(i).call(i,o)}}}}const af=["bold","ital","boldital","mono"];class ud{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),t0(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(Je(af,r=>{this.fontOptions[r]={}}),ud.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}Je(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=aa(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=aa(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=aa(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=aa(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=aa(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=aa(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),Ot(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=bD("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};ud.parseFontString(s,i)&&(i=s),Je(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(yt(af).call(af,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(ud.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<af.length;++n){const i=af[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);Je(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let c=0;c<a.blocks.length;c++){const d=a.blocks[c];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=$i(i,o),s=$i(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,c,d){return c==="normal"?d==="mod"?"":l[d]:l[c][d]!==void 0?l[c][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new ZDe(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class cu{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Dm(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let e$e=class extends cu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Ooe(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class xD extends cu{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),KA(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let t$e=class extends xD{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class r$e extends xD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class bl extends cu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),vje(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const c=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,c,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function wQ(t,e){var r=ir(t);if(nl){var n=nl(t);e&&(n=Wn(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function n$e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Nt(r=wQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):il?jb(t,il(i)):Nt(n=wQ(Object(i))).call(n,function(s){Pb(t,s,vl(i,s))})}return t}class i$e extends bl{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:n$e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class s$e extends cu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),joe(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let o$e=class extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class a$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class SQ extends cu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),QI(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class l$e extends cu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let c$e=class extends xD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const c=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:c)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=$i(f,o.opacity),p=$i(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Dm(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class u$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class d$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class h$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class f$e extends cu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let p$e=class extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class m$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function _Q(t,e){var r=ir(t);if(nl){var n=nl(t);e&&(n=Wn(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function EQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Nt(r=_Q(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):il?jb(t,il(i)):Nt(n=_Q(Object(i))).call(n,function(s){Pb(t,s,vl(i,s))})}return t}class qt{constructor(e,r,n,i,s,o){this.options=Ya(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new ud(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;yt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=yt(r=this.edges).call(r,e);if(n!=-1){var i;_o(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");qt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ls(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ls(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=zae(e.value)),qt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=bD("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&qt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(qt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Wn(i=EDe(r)).call(i,c=>r[c]!=null);l.push("font"),Zv(l,e,a),e.color=tR(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(Zv(["color","fixed","shadow"],e,r,n),qt.checkMass(r),e.opacity!==void 0&&(qt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(qt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!qt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Ii(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=tR(r.color);_ae(e.color,a)}else n===!0&&r.color===null&&(e.color=Ya(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Ya(i.font)),qt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Ii(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=$i(e.borderColor,r),e.color=$i(e.color,r),e.shadowColor=$i(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),qt.updateGroupOptions(this.options,EQ(EQ({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new e$e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new t$e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new r$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new i$e(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new s$e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new o$e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new a$e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new SQ(this.options,this.body,this.labelModule);break;case"icon":this.shape=new l$e(this.options,this.body,this.labelModule);break;case"image":this.shape=new c$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new u$e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new d$e(this.options,this.body,this.labelModule);break;case"star":this.shape=new h$e(this.options,this.body,this.labelModule);break;case"text":this.shape=new f$e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new p$e(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new m$e(this.options,this.body,this.labelModule);break;default:this.shape=new SQ(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&oR(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),oR(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",kae),e.mass=1}}}class g$e{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=oe(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,c){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(c-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Ya(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",oe(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",oe(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{Je(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(qt.parseOptions(this.options,e),e.opacity!==void 0&&(sR(e.opacity)||!Wl(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of ir(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(woe("id",e))this.body.data.nodes=e;else if(lr(e))this.body.data.nodes=new Qd,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Qd;else throw new TypeError("Array or DataSet expected");if(n&&Je(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;Je(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const c=r[o];l!==void 0?l.setOptions(c)&&(s=!0):(s=!0,l=this.create(c),i[a]=l)}!s&&n!==void 0&&(s=NAe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Je(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(lr(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),Eo(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var NQ={},CQ;function y$e(){if(CQ)return NQ;CQ=1;var t=je(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,c=0,d=arguments.length,h=0,f,p;c<d;)f=r(arguments[c++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),NQ}var AO,kQ;function v$e(){if(kQ)return AO;kQ=1,y$e();var t=wt();return AO=t.Math.hypot,AO}var DO,TQ;function b$e(){if(TQ)return DO;TQ=1;var t=v$e();return DO=t,DO}var $O,OQ;function x$e(){return OQ||(OQ=1,$O=b$e()),$O}var w$e=x$e(),S$e=qe(w$e);class dr{static transform(e,r){lr(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],c=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*c,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let _$e=class extends dr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class E$e extends dr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class N$e{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class C$e{static draw(e,r){const n={x:-.4,y:0};dr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class k$e{static draw(e,r){const n={x:-.3,y:0};dr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class T$e{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class O$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class j$e{static draw(e,r){const n={x:-.4,y:0};return dr.transform(n,r),KA(e,n.x,n.y,r.length*.4),!0}}class P$e{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class I$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class R$e{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class M$e{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return dr.transform(n,r),dr.drawPath(e,n),!0}}class Hae{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return _$e.draw(e,r);case"circle":return j$e.draw(e,r);case"box":return I$e.draw(e,r);case"crow":return N$e.draw(e,r);case"curve":return C$e.draw(e,r);case"diamond":return R$e.draw(e,r);case"inv_curve":return k$e.draw(e,r);case"triangle":return T$e.draw(e,r);case"inv_triangle":return O$e.draw(e,r);case"bar":return P$e.draw(e,r);case"vee":return M$e.draw(e,r);case"arrow":default:return E$e.draw(e,r)}}}function jQ(t,e){var r=ir(t);if(nl){var n=nl(t);e&&(n=Wn(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function PQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Nt(r=jQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):il?jb(t,il(i)):Nt(n=jQ(Object(i))).call(n,function(s){Pb(t,s,vl(i,s))})}return t}class Wae{constructor(e,r,n){mo(this,"color",{}),mo(this,"colorDirty",!0),mo(this,"hoverWidth",1.5),mo(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=lr(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)Poe(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Is(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=Vae(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,c=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const v=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,v)+m,b=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-b;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<c);return PQ(PQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=$i(this.from.options.color.border,r.opacity),s=$i(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?$i(this.to.options.color.border,r.opacity):$i(this.from.options.color.border,r.opacity)}else return $i(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,c=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,c]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-c)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,c=a*a+l*l;let d=((s-e)*a+(o-r)*l)/c;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,c,d,h,f,p;const m=o.width;r==="from"?(c=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(c=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(c=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(c!=d){const w=S$e(c.x-d.x,c.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(c,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(c.y-d.y,c.x-d.x),l=this._findBorderPosition(c,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),N=this.getPoint(.5-S,n);a=Math.atan2(_.y-N.y,_.x-N.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:-1});a=E.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=E}else if(r==="to"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:1});a=E.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=E}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const v=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:v,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,Hae.draw(e,s)&&(this.enableShadow(e,r),Dm(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=lr(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function IQ(t,e){var r=ir(t);if(nl){var n=nl(t);e&&(n=Wn(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function RQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Nt(r=IQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):il?jb(t,il(i)):Nt(n=IQ(Object(i))).call(n,function(s){Pb(t,s,vl(i,s))})}return t}class wD extends Wae{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,c=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(c=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(c.y-d.y,c.x-d.x),g=c.distanceToBorder(r,m)+f,v=Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)),y=g-v;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return RQ(RQ({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,c,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(c=this._getDistanceToLine(m,g,f,p,s,o),l=c<l?c:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class MQ extends wD{constructor(e,r,n){super(e,r,n),mo(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class AQ extends wD{constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class A$e extends wD{constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let c=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,v=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(d,h,g,v,s,o);c=y<c?y:c}d=g,h=v}return c}}class DQ extends A$e{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class $Q extends Wae{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),c=e.distanceToBorder(r,s),d=(l-c)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class Qa{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Ya(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new ud(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;Qa.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=zae(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=bD("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Dh(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(Wl(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(Wl(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),t0(r.label)?e.label=r.label:t0(e.label)||(e.label=void 0),Ii(e,r,"smooth",i),Ii(e,r,"shadow",i),Ii(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=fc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Ii(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=fc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=yt(a).call(a,"to")!=-1,e.arrows.middle.enabled=yt(a).call(a,"middle")!=-1,e.arrows.from.enabled=yt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Ii(e.arrows,r.arrows,"to",i.arrows),Ii(e.arrows,r.arrows,"middle",i.arrows),Ii(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Am(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=fc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=ld(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)Ot(l,i.color,!1,n);else for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&delete l[c];if(ld(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let c=!1;a.color!==void 0&&(l.color=a.color,c=!0),a.highlight!==void 0&&(l.highlight=a.highlight,c=!0),a.hover!==void 0&&(l.hover=a.hover,c=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),c===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Ya(i.color));n===!0&&r.font===null&&(e.font=Ya(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof MQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof DQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof AQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof $Q&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new MQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new DQ(this.options,this.body,this.labelModule):this.edgeType=new AQ(this.options,this.body,this.labelModule):this.edgeType=new $Q(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=Vae(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();oR(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class D$e{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=oe(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const c=1/(o-s);return Math.max(0,(l-s)*c)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Ot(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],c=e.body.data.edges.get(a);if(c!=null){const d=c.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",oe(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",oe(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{Je(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){Qa.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(woe("id",e))this.body.data.edges=e;else if(lr(e))this.body.data.edges=new Qd,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Qd;else throw new TypeError("Array or DataSet expected");if(n&&Je(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){Je(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;Je(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){Je(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new Qa(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];Je(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];Nt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class Kae{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=kb("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let v=1;v<i;v++){const y=e[r[v]],b=y.x,w=y.y;y.options.mass>0&&(b<s&&(s=b),b>a&&(a=b),w<o&&(o=w),w>l&&(l=w))}const c=Math.abs(a-s)-Math.abs(l-o);c>0?(o-=.5*c,l+=.5*c):(s+=.5*c,a-=.5*c);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let v=0;v<i;v++)n=e[r[v]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class $$e{constructor(e,r,n){this._rng=kb("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=c[d[g]];for(let v=g+1;v<d.length;v++)l=c[d[v]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class F$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const c=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<c?m=-Math.pow(p*f,2)+Math.pow(p*c,2):m=0,f!==0&&(m=m/f);const g=d*m,v=h*m;n[o.id].x-=g,n[o.id].y-=v,n[l.id].x+=g,n[l.id].y+=v}}}}}class FO{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,c=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=c),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=c)}}class q$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=c[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let v=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];v+=p[S].x,y+=p[S].y}const b=v/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=b,p[S].y-=w}}}class py{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const c=o[l];i=s[c],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class L$e extends Kae{constructor(e,r,n){super(e,r,n),this._rng=kb("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,c=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=c}}class B$e extends py{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class z$e{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},br(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Zv(["stabilization"],this.options,e),Ii(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||sR(r.x))&&(r.x=0),(typeof r.y!="number"||sR(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new L$e(this.body,this.physicsBody,e),this.edgesSolver=new FO(this.body,this.physicsBody,e),this.gravitySolver=new B$e(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new $$e(this.body,this.physicsBody,e),this.edgesSolver=new FO(this.body,this.physicsBody,e),this.gravitySolver=new py(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new F$e(this.body,this.physicsBody,e),this.edgesSolver=new q$e(this.body,this.physicsBody,e),this.gravitySolver=new py(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new Kae(this.body,this.physicsBody,e),this.edgesSolver=new FO(this.body,this.physicsBody,e),this.gravitySolver=new py(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=oe(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=Yv();this.physicsTick(),(Yv()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&Eo(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=ir(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,Eo(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;Eo(oe(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),c=Math.min(Math.max(5,l),15),d=3*c,h=rR((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=c,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,Hae.draw(e,{type:"arrow",point:f,angle:p,length:d}),Dm(e).call(e)}}}const Zr=[];for(let t=0;t<256;++t)Zr.push((t+256).toString(16).slice(1));function V$e(t,e=0){return(Zr[t[e+0]]+Zr[t[e+1]]+Zr[t[e+2]]+Zr[t[e+3]]+"-"+Zr[t[e+4]]+Zr[t[e+5]]+"-"+Zr[t[e+6]]+Zr[t[e+7]]+"-"+Zr[t[e+8]]+Zr[t[e+9]]+"-"+Zr[t[e+10]]+Zr[t[e+11]]+Zr[t[e+12]]+Zr[t[e+13]]+Zr[t[e+14]]+Zr[t[e+15]]).toLowerCase()}let qO;const U$e=new Uint8Array(16);function H$e(){if(!qO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");qO=crypto.getRandomValues.bind(crypto)}return qO(U$e)}const W$e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var FQ={randomUUID:W$e};function K$e(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??H$e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,V$e(n)}function Uf(t,e,r){return FQ.randomUUID&&!t?FQ.randomUUID():K$e(t)}class Tn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(Ot(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):Ot(n,e.options,!0),n}}class G$e extends qt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],Je(r.edges,n=>{delete this.containedEdges[n.id]}),Je(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},Je(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},Je(r.edges,n=>{Je(this.edges,i=>{var s,o;const a=yt(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(Je(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),_o(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class Y$e{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},br(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};Je(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,Je(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let c=0;c<this.body.nodeIndices.length;c++){const d={},h={},f=this.body.nodeIndices[c],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(v){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=Tn.cloneOptions(v);return r.joinCondition(y)};let g=!0;for(let v=0;v<a.length;v++){o=a[v];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(ir(d).length>0&&ir(h).length>0&&g===!0){const y=function(){for(let b=0;b<i.length;++b)for(const w in d)if(i[b].nodes[w]!==void 0)return i[b]}();if(y!==void 0){for(const b in d)y.nodes[b]===void 0&&(y.nodes[b]=d[b]);for(const b in h)y.edges[b]===void 0&&(y.edges[b]=h[b])}else i.push({nodes:d,edges:h})}}}}for(let c=0;c<i.length;c++)this._cluster(i[c].nodes,i[c].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,c=Tn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=Tn.cloneOptions(this.body.nodes[p]);r.joinCondition(c,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=Xd(n=ir(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];yt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,c,d;const h=ir(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let v=0;v<a.edges.length;v++)s=a.edges[v],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,c=s.fromId,d=c):(l=s.toId,c=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:c,toId:l}))}const p=[],m=function(g){for(let v=0;v<p.length;v++){const y=p[v],b=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(b||w)return y}return null};for(let g=0;g<f.length;g++){const v=f[g],y=v.edge;let b=m(v);b===null?(b=this._createClusteredEdge(v.fromId,v.toId,y,i),p.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(ir(e).length==0||ir(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=Ot({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=Tn.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=Tn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+Uf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const c=this.body.functions.createNode(o,G$e);c.containedNodes=e,c.containedEdges=r,c.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=c,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=ir(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=yt(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else Je(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const c=[];for(let d=0;d<i.edges.length;d++)c.push(i.edges[d]);for(let d=0;d<c.length;d++){const h=c[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],v=this.body.edges[g];if(v!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[v.id]=v,delete l[v.id];let b=v.fromId,w=v.toId;v.toId==f?w=p.clusterId:b=p.clusterId,this._createClusteredEdge(b,w,v,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(v)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),hc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return hc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const c=l.clusteringEdgeReplacingIds;if(c===void 0)i.push(a);else for(let d=0;d<c.length;++d){const h=c[d];yt(r).call(r,c)!==-1||yt(n).call(n,c)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const c=this.body.nodes[this.body.nodeIndices[l]];c.edges.length>i&&(i=c.edges.length),e+=c.edges.length,r+=Math.pow(c.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=Tn.cloneOptions(n,"edge");Ot(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+Uf(),s!==void 0&&Ot(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof Qa){const s=r,o={};o[s.id]=s,r=o}if(e instanceof qt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return Je(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{Je(this.body.nodes,c=>{c.isCluster===!0&&l(c)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let c=0;c<r.length;c++)delete l.containedNodes[r[c]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];Je(this.clusteredEdges,l=>{const c=this.body.edges[l];(c===void 0||!c.endPointsValid())&&(n[l]=l)}),i(function(l){Je(l.containedEdges,(c,d)=>{!c.endPointsValid()&&!n[d]&&(n[d]=d)})}),Je(this.body.edges,(l,c)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;Je(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[c]=c)}),i(l=>{Je(n,c=>{delete l.containedEdges[c],Je(l.edges,(d,h)=>{if(d.id===c){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),Je(n,l=>{delete this.clusteredEdges[l]}),Je(n,l=>{delete this.body.edges[l]});const s=ir(this.body.edges);Je(s,l=>{const c=this.body.edges[l],d=this._isClusteredNode(c.fromId)||this._isClusteredNode(c.toId);if(d!==this._isClusteredEdge(c.id))if(d){const h=this._getClusterNodeForNode(c.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[c.fromId],c,h);const f=this._getClusterNodeForNode(c.toId);f!==void 0&&this._clusterEdges(this.body.nodes[c.toId],c,f)}else delete this._clusterEdges[l],this._restoreEdge(c)});let o=!1,a=!0;for(;a;){const l=[];i(function(c){const d=ir(c.containedNodes).length,h=c.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(c.id)});for(let c=0;c<l.length;++c)this.openCluster(l[c],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class Q$e{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},br(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=Eo(()=>{var r;this.zooming=!1,oe(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",oe(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&Dh(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(oe(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,c=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:c.y,left:c.x,bottom:d.y,right:d.x},f=[];for(let v=0;v<i.length;v++)if(s=n[i[v]],s.hover)a.push(i[v]);else if(s.isSelected())o.push(i[v]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}return{drawExternalLabels:()=>{for(const v of f)v()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var LO,qQ;function X$e(){if(qQ)return LO;qQ=1,Joe();var t=wt();return LO=t.setInterval,LO}var BO,LQ;function J$e(){return LQ||(LQ=1,BO=X$e()),BO}var Z$e=J$e(),eFe=qe(Z$e);function r0(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function Gae(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class tFe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},br(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",oe(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&Dh(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=eFe(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=oe(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;Nt(e=hc(r=_o(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(yt(e).call(e,"%")!==-1||yt(e).call(e,"px")!==-1)return e;if(yt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new cd(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:cd.DIRECTION_ALL}),r0(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new cd(this.frame),Gae(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function rFe(t,e){const r=br({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!lr(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class nFe{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",oe(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",oe(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=rFe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=Tn.getRange(this.body.nodes,e.nodes);else if(r===!0){let c=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(c+=1);if(c>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=Tn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=Tn.getRange(this.body.nodes,e.nodes);const c=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/c,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:Tn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!Wl(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!Wl(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!Wl(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!Wl(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=oe(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=oe(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=dMe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=oe(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function BQ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){c(d,"keydown")},l=function(d){c(d,"keyup")},c=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class iFe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new cd(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;r0(a,oe(n=this._fit).call(n,this))}else{var i;r0(a,oe(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new cd(this.canvas.frame);Gae(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=oe(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=BQ({container:window,preventDefault:!0}):this.keycharm=BQ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,c,d,h,f,p,m,g,v,y,b,w,x,S,_,N,E;oe(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),oe(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),oe(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),oe(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),oe(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),oe(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),oe(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),oe(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),oe(c=this.keycharm).call(c,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),oe(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),oe(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),oe(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),oe(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),oe(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),oe(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),oe(v=this.keycharm).call(v,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),oe(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),oe(b=this.keycharm).call(b,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),oe(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),oe(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),oe(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),oe(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),oe(N=this.keycharm).call(N,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),oe(E=this.keycharm).call(E,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class sFe{constructor(e,r,n){var i,s,o,a,l,c,d,h,f,p,m,g,v;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new iFe(e,r),this.body.eventListeners.onTap=oe(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=oe(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=oe(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=oe(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=oe(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=oe(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=oe(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=oe(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=oe(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=oe(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=oe(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=oe(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=oe(v=this.getPointer).call(v,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},br(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(Zv(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Ii(this.options,e,"keyboard"),e.tooltip&&(br(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=tR(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-aMe(this.canvas.frame.canvas),y:e.y-lMe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];yt(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=br({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;Nt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Wn(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});Nt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(Nt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const c=this.canvas.canvasToDOM(i);this.drag.pointer.x=c.x,this.drag.pointer.y=c.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=Eo(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,c=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=c[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,c=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=c[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new bMe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var zQ={},VQ={},UQ;function oFe(){if(UQ)return VQ;UQ=1;var t=mD(),e=$ae();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),VQ}var HQ;function aFe(){return HQ||(HQ=1,oFe()),zQ}var WQ={},zO,KQ;function uu(){if(KQ)return zO;KQ=1;var t=Eh(),e=TypeError;return zO=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},zO}var VO,GQ;function du(){if(GQ)return VO;GQ=1;var t=Si(),e=Fae(),r=t("Set"),n=r.prototype;return VO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},VO}var UO,YQ;function hu(){if(YQ)return UO;YQ=1;var t=oi();return UO=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},UO}var HO,QQ;function zm(){if(QQ)return HO;QQ=1;var t=hu();return HO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},HO}var WO,XQ;function SD(){if(XQ)return WO;XQ=1;var t=du(),e=zm(),r=t.Set,n=t.add;return WO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},WO}var KO,JQ;function Vm(){return JQ||(JQ=1,KO=function(t){return t.size}),KO}var GO,ZQ;function lFe(){return ZQ||(ZQ=1,GO=function(t){return{iterator:t,next:t.next,done:!1}}),GO}var YO,eX;function fu(){if(eX)return YO;eX=1;var t=Uo(),e=Ws(),r=oi(),n=Th(),i=lFe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},YO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},YO}var QO,tX;function cFe(){if(tX)return QO;tX=1;var t=uu(),e=du(),r=SD(),n=Vm(),i=fu(),s=zm(),o=hu(),a=e.has,l=e.remove;return QO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},QO}var XO,rX;function pu(){return rX||(rX=1,XO=function(){return!1}),XO}var nX;function uFe(){if(nX)return WQ;nX=1;var t=je(),e=cFe(),r=st(),n=pu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),WQ}var iX={},JO,sX;function dFe(){if(sX)return JO;sX=1;var t=uu(),e=du(),r=Vm(),n=fu(),i=zm(),s=hu(),o=e.Set,a=e.add,l=e.has;return JO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},JO}var oX;function hFe(){if(oX)return iX;oX=1;var t=je(),e=st(),r=dFe(),n=pu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),iX}var aX={},ZO,lX;function fFe(){if(lX)return ZO;lX=1;var t=uu(),e=du().has,r=Vm(),n=fu(),i=zm(),s=hu(),o=fD();return ZO=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},ZO}var cX;function pFe(){if(cX)return aX;cX=1;var t=je(),e=fFe(),r=pu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),aX}var uX={},ej,dX;function mFe(){if(dX)return ej;dX=1;var t=uu(),e=Vm(),r=zm(),n=fu();return ej=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},ej}var hX;function gFe(){if(hX)return uX;hX=1;var t=je(),e=mFe(),r=pu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),uX}var fX={},tj,pX;function yFe(){if(pX)return tj;pX=1;var t=uu(),e=du().has,r=Vm(),n=fu(),i=hu(),s=fD();return tj=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},tj}var mX;function vFe(){if(mX)return fX;mX=1;var t=je(),e=yFe(),r=pu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),fX}var gX={},rj,yX;function bFe(){if(yX)return rj;yX=1;var t=uu(),e=du(),r=SD(),n=fu(),i=hu(),s=e.add,o=e.has,a=e.remove;return rj=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},rj}var nj,vX;function Yae(){return vX||(vX=1,nj=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),nj}var bX;function xFe(){if(bX)return gX;bX=1;var t=je(),e=bFe(),r=Yae(),n=pu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),gX}var xX={},ij,wX;function wFe(){if(wX)return ij;wX=1;var t=uu(),e=du().add,r=SD(),n=fu(),i=hu();return ij=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},ij}var SX;function SFe(){if(SX)return xX;SX=1;var t=je(),e=wFe(),r=Yae(),n=pu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),xX}var sj,_X;function _Fe(){if(_X)return sj;_X=1,Ih(),aFe(),uFe(),hFe(),pFe(),gFe(),vFe(),xFe(),SFe(),yD();var t=wt();return sj=t.Set,sj}var oj,EX;function EFe(){if(EX)return oj;EX=1;var t=_Fe();return Rh(),oj=t,oj}var aj,NX;function NFe(){return NX||(NX=1,aj=EFe()),aj}var CFe=NFe(),ha=qe(CFe),CX={},kX={},lj,TX;function kFe(){if(TX)return lj;TX=1;var t=at(),e=gD(),r=Tb().getWeakData,n=pD(),i=Ws(),s=wh(),o=Yr(),a=Ob(),l=yl(),c=ln(),d=au(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),v=0,y=function(x){return x.frozen||(x.frozen=new b)},b=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return b.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},lj={getConstructor:function(x,S,_,N){var E=x(function(P,O){n(P,C),h(P,{type:S,id:v++,frozen:null}),s(O)||a(O,P[N],{that:P,AS_ENTRIES:_})}),C=E.prototype,k=f(S),j=function(P,O,A){var q=k(P),D=r(i(O),!0);return D===!0?y(q).set(O,A):D[q.id]=A,P};return e(C,{delete:function(P){var O=k(this);if(!o(P))return!1;var A=r(P);return A===!0?y(O).delete(P):A&&c(A,O.id)&&delete A[O.id]},has:function(O){var A=k(this);if(!o(O))return!1;var q=r(O);return q===!0?y(A).has(O):q&&c(q,A.id)}}),e(C,_?{get:function(O){var A=k(this);if(o(O)){var q=r(O);if(q===!0)return y(A).get(O);if(q)return q[A.id]}},set:function(O,A){return j(this,O,A)}}:{add:function(O){return j(this,O,!0)}}),E}},lj}var OX;function TFe(){if(OX)return kX;OX=1;var t=Aae(),e=Bt(),r=at(),n=gD(),i=Tb(),s=mD(),o=kFe(),a=Yr(),l=au().enforce,c=st(),d=$oe(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,v=h.freeze,y=h.seal,b=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,N=r(_.set),E=function(){return t&&c(function(){var P=v([]);return N(new S,P,1),!m(P)})};if(d)if(b){w=o.getConstructor(x,"WeakMap",!0),i.enable();var C=r(_.delete),k=r(_.has),j=r(_.get);n(_,{delete:function(P){if(a(P)&&!p(P)){var O=l(this);return O.frozen||(O.frozen=new w),C(this,P)||O.frozen.delete(P)}return C(this,P)},has:function(O){if(a(O)&&!p(O)){var A=l(this);return A.frozen||(A.frozen=new w),k(this,O)||A.frozen.has(O)}return k(this,O)},get:function(O){if(a(O)&&!p(O)){var A=l(this);return A.frozen||(A.frozen=new w),k(this,O)?j(this,O):A.frozen.get(O)}return j(this,O)},set:function(O,A){if(a(O)&&!p(O)){var q=l(this);q.frozen||(q.frozen=new w),k(this,O)?N(this,O,A):q.frozen.set(O,A)}else N(this,O,A);return this}})}else E()&&n(_,{set:function(O,A){var q;return f(O)&&(m(O)?q=v:g(O)&&(q=y)),N(this,O,A),q&&q(O),this}});return kX}var jX;function OFe(){return jX||(jX=1,TFe()),CX}var cj,PX;function jFe(){if(PX)return cj;PX=1,Ih(),OFe();var t=wt();return cj=t.WeakMap,cj}var uj,IX;function PFe(){if(IX)return uj;IX=1;var t=jFe();return Rh(),uj=t,uj}var dj,RX;function IFe(){return RX||(RX=1,dj=PFe()),dj}var RFe=IFe(),Um=qe(RFe);function Hf(t,e,r){MFe(t,e),e.set(t,r)}function MFe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function aR(t,e,r){return t.set(Qae(t,e),r),r}function Tt(t,e){return t.get(Qae(t,e))}function Qae(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function MX(t,e){const r=new ha;for(const n of e)t.has(n)||r.add(n);return r}var Nu=new Um,es=new Um;class AX{constructor(){Hf(this,Nu,new ha),Hf(this,es,new ha)}get size(){return Tt(es,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Tt(es,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Tt(es,this).delete(i)}clear(){Tt(es,this).clear()}getSelection(){return[...Tt(es,this)]}getChanges(){return{added:[...MX(Tt(Nu,this),Tt(es,this))],deleted:[...MX(Tt(es,this),Tt(Nu,this))],previous:[...new ha(Tt(Nu,this))],current:[...new ha(Tt(es,this))]}}commit(){const e=this.getChanges();aR(Nu,this,Tt(es,this)),aR(es,this,new ha(Tt(Nu,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var kl=new Um,Tl=new Um,hj=new Um;class AFe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Hf(this,kl,new AX),Hf(this,Tl,new AX),Hf(this,hj,void 0),aR(hj,this,e)}get sizeNodes(){return Tt(kl,this).size}get sizeEdges(){return Tt(Tl,this).size}getNodes(){return Tt(kl,this).getSelection()}getEdges(){return Tt(Tl,this).getSelection()}addNodes(){Tt(kl,this).add(...arguments)}addEdges(){Tt(Tl,this).add(...arguments)}deleteNodes(e){Tt(kl,this).delete(e)}deleteEdges(e){Tt(Tl,this).delete(e)}clear(){Tt(kl,this).clear(),Tt(Tl,this).clear()}commit(){const e={nodes:Tt(kl,this).commit(),edges:Tt(Tl,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Tt(hj,this).call(this,e,...n),e}}class DFe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new AFe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},br(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&Dh(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof qt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],c=o[l];if(c.connected){const d=c.from.x,h=c.from.y,f=c.to.x,p=c.to.y,m=c.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof qt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof qt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof qt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof qt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof qt&&n.id!=s||n instanceof Qa)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof Qa&&n.id!=s||n instanceof qt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=ir(this.hoverObj.edges).length,o=ir(this.hoverObj.nodes).length,a=n instanceof Qa&&s===0&&o===0,l=n instanceof qt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof qt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return Xd(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return Xd(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var DX={},fj,$X;function $Fe(){if($X)return fj;$X=1;var t=Oh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return fj=r,fj}var pj,FX;function FFe(){if(FX)return pj;FX=1;var t=Sh(),e=t.match(/firefox\/(\d+)/i);return pj=!!e&&+e[1],pj}var mj,qX;function qFe(){if(qX)return mj;qX=1;var t=Sh();return mj=/MSIE|Trident/.test(t),mj}var gj,LX;function LFe(){if(LX)return gj;LX=1;var t=Sh(),e=t.match(/AppleWebKit\/(\d+)\./);return gj=!!e&&+e[1],gj}var BX;function BFe(){if(BX)return DX;BX=1;var t=je(),e=at(),r=Uo(),n=_i(),i=Ho(),s=Goe(),o=Qi(),a=st(),l=$Fe(),c=Mh(),d=FFe(),h=qFe(),f=Tm(),p=LFe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,C,k,j;for(E=65;E<76;E++){switch(C=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:k=3;break;case 68:case 71:k=4;break;default:k=2}for(j=0;j<47;j++)m.push({k:C+j,v:k})}for(m.sort(function(P,O){return O.v-P.v}),j=0;j<m.length;j++)C=m[j].k.charAt(0),N.charAt(N.length-1)!==C&&(N+=C);return N!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(N){return function(E,C){return C===void 0?-1:E===void 0?1:N!==void 0?+N(E,C)||0:o(E)>o(C)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var C=n(this);if(x)return E===void 0?g(C):g(C,E);var k=[],j=i(C),P,O;for(O=0;O<j;O++)O in C&&v(k,C[O]);for(l(k,_(E)),P=i(k),O=0;O<P;)C[O]=k[O++];for(;O<j;)s(C,O++);return C}}),DX}var yj,zX;function zFe(){if(zX)return yj;zX=1,BFe();var t=cn();return yj=t("Array","sort"),yj}var vj,VX;function VFe(){if(VX)return vj;VX=1;var t=Nr(),e=zFe(),r=Array.prototype;return vj=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},vj}var bj,UX;function UFe(){if(UX)return bj;UX=1;var t=VFe();return bj=t,bj}var xj,HX;function HFe(){return HX||(HX=1,xj=UFe()),xj}var WFe=HFe(),dd=qe(WFe),WX={},wj,KX;function KFe(){if(KX)return wj;KX=1;var t=Uo(),e=_i(),r=pb(),n=Ho(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return wj={left:o(!1),right:o(!0)},wj}var Sj,GX;function GFe(){if(GX)return Sj;GX=1;var t=Qoe();return Sj=t==="NODE",Sj}var YX;function YFe(){if(YX)return WX;YX=1;var t=je(),e=KFe().left,r=Mh(),n=Tm(),i=GFe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),WX}var _j,QX;function QFe(){if(QX)return _j;QX=1,YFe();var t=cn();return _j=t("Array","reduce"),_j}var Ej,XX;function XFe(){if(XX)return Ej;XX=1;var t=Nr(),e=QFe(),r=Array.prototype;return Ej=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},Ej}var Nj,JX;function JFe(){if(JX)return Nj;JX=1;var t=XFe();return Nj=t,Nj}var Cj,ZX;function ZFe(){return ZX||(ZX=1,Cj=JFe()),Cj}var e4e=ZFe(),Xae=qe(e4e);class Jae{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class t4e extends Jae{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){dd(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class r4e extends Jae{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){dd(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var eJ={},tJ;function n4e(){if(tJ)return eJ;tJ=1;var t=je(),e=yl().every,r=Mh(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),eJ}var kj,rJ;function i4e(){if(rJ)return kj;rJ=1,n4e();var t=cn();return kj=t("Array","every"),kj}var Tj,nJ;function s4e(){if(nJ)return Tj;nJ=1;var t=Nr(),e=i4e(),r=Array.prototype;return Tj=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},Tj}var Oj,iJ;function o4e(){if(iJ)return Oj;iJ=1;var t=s4e();return Oj=t,Oj}var jj,sJ;function a4e(){return sJ||(sJ=1,jj=o4e()),jj}var l4e=a4e(),Zae=qe(l4e);function c4e(t,e){const r=new ha;return Nt(t).call(t,n=>{var i;Nt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),Nt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function u4e(t){return ele(e=>{var r,n;return Zae(r=Wn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function d4e(t){return ele(e=>{var r,n;return Zae(r=Wn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function ele(t,e,r,n){var i;const s=fc(null),o=Xae(i=[...Uae(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var c,d;if(!n.has(h))continue;const v=s[g.id]+l;if(Nt(c=Wn(d=g.edges).call(d,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(c,y=>{const b=y[a],w=s[b];(w==null||e(v,w))&&(s[b]=v,p.push(y[r]))}),m>o)return c4e(n,s);++m}}return s}class h4e{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new vD;let n=0;const i=dd(e=[...new ha(kIe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return ir(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class f4e{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+Yv()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},br(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(Dh(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Ii(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),Ot(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=kb(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const c=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(c==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const c=this.body.nodes[e[l]];c.predefinedPosition===!1&&(c.x+=(.5-this._rng())*a,c.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=Tn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=Tn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new h4e;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let b=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;b+=x+this.options.hierarchical.treeSpacing,s(w+1,b)}},s=(y,b)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,b)},o=()=>{const y=[];for(let b=0;b<this.hierarchical.numTrees();b++)y.push(this.direction.getTreeSize(b));return y},a=(y,b)=>{if(!b[y.id]&&(b[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],b)}},l=function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const N in y)if(Object.prototype.hasOwnProperty.call(y,N)){const E=e.body.nodes[N],C=e.hierarchical.levels[E.id],k=e.direction.getPosition(E),[j,P]=e._getSpaceAroundNode(E,y);w=Math.min(j,w),x=Math.min(P,x),C<=b&&(S=Math.min(k,S),_=Math.max(k,_))}return[S,_,w,x]},c=(y,b)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(b.id);return Math.min(w,x)},d=(y,b,w)=>{const x=this.hierarchical;for(let S=0;S<b.length;S++){const _=b[S],N=x.distributionOrdering[_];if(N.length>1)for(let E=0;E<N.length-1;E++){const C=N[E],k=N[E+1];x.hasSameParent(C,k)&&x.inSameSubNetwork(C,k)&&y(C,k,w)}}},h=function(y,b){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(b),_=Math.abs(S-x),N=e.options.hierarchical.nodeSpacing;if(_>N){const E={},C={};a(y,E),a(b,C);const k=c(y,b),j=l(E,k),P=l(C,k),O=j[1],A=P[0],q=P[2];if(Math.abs(O-A)>N){let B=O-A+N;B<-q+N&&(B=-q+N),B<0&&(e._shiftBlock(b.id,B),r=!0,w===!0&&e._centerParent(b))}}},f=(y,b)=>{const w=b.id,x=b.edges,S=this.hierarchical.levels[b.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,N={},E=[];for(let q=0;q<x.length;q++){const D=x[q];if(D.toId!=D.fromId){const B=D.toId==w?D.from:D.to;N[x[q].id]=B,this.hierarchical.levels[B.id]<S&&E.push(D)}}const C=(q,D)=>{let B=0;for(let F=0;F<D.length;F++)if(N[D[F].id]!==void 0){const K=this.direction.getPosition(N[D[F].id])-q;B+=K/Math.sqrt(K*K+_)}return B},k=(q,D)=>{let B=0;for(let F=0;F<D.length;F++)if(N[D[F].id]!==void 0){const K=this.direction.getPosition(N[D[F].id])-q;B-=_*Math.pow(K*K+_,-1.5)}return B},j=(q,D)=>{let B=this.direction.getPosition(b);const F={};for(let K=0;K<q;K++){const X=C(B,D),G=k(B,D),L=40,Z=Math.max(-L,Math.min(L,Math.round(X/G)));if(B=B-Z,F[B]!==void 0)break;F[B]=K}return B},P=q=>{const D=this.direction.getPosition(b);if(n[b.id]===void 0){const L={};a(b,L),n[b.id]=L}const B=l(n[b.id]),F=B[2],K=B[3],X=q-D;let G=0;X>0?G=Math.min(X,K-this.options.hierarchical.nodeSpacing):X<0&&(G=-Math.min(-X,F-this.options.hierarchical.nodeSpacing)),G!=0&&(this._shiftBlock(b.id,G),r=!0)},O=q=>{const D=this.direction.getPosition(b),[B,F]=this._getSpaceAroundNode(b),K=q-D;let X=D;K>0?X=Math.min(D+(F-this.options.hierarchical.nodeSpacing),q):K<0&&(X=Math.max(D-(B-this.options.hierarchical.nodeSpacing),q)),X!==D&&(this.direction.setPosition(b,X),r=!0)};let A=j(y,E);P(A),A=j(y,x),O(A)},p=y=>{let b=this.hierarchical.getLevels();b=hc(b).call(b);for(let w=0;w<y;w++){r=!1;for(let x=0;x<b.length;x++){const S=b[x],_=this.hierarchical.distributionOrdering[S];for(let N=0;N<_.length;N++)f(1e3,_[N])}if(r!==!0)break}},m=y=>{let b=this.hierarchical.getLevels();b=hc(b).call(b);for(let w=0;w<y&&(r=!1,d(h,b,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},v=()=>{let y=this.hierarchical.getLevels();y=hc(y).call(y);for(let b=0;b<y.length;b++){const w=y[b],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&v(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,c=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);c=Math.min(c,h-o)}}return[l,c]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[c,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=ir(e[n]);i=this._indexArrayToNodes(i),dd(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let c=l*s;s>0&&(c=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,c,n),this._validatePositionAndContinue(a,n,c),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);dd(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],c=this.hierarchical.levels[l.id];if(c>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,c),this._validatePositionAndContinue(l,c,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return Je(e.edges,n=>{var i;yt(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;Je(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return Je(e,i=>{n.push(Number(i))}),dd(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;Je(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(Tn.cloneOptions(i,"node"),Tn.cloneOptions(s,"node"),Tn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=Xae(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new vD);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=d4e(r):this.hierarchical.levels=u4e(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let c=0;c<l.length;c++){const d=l[c];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new t4e(this):this.direction=new r4e(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class p4e{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},br(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",oe(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",oe(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,Ot(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,oe(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",oe(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,oe(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",oe(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=Ot({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,oe(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",oe(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",oe(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",oe(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",oe(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",oe(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,oe(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",oe(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",oe(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",oe(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",oe(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",c=>{const d=o.edgeType.findBorderPositions(c);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=Ot({},this.options.controlNodeStyle);n.id="targetNode"+Uf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},oa(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,oe(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(oa(this.editModeDiv),oa(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of _o(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),oa(this.manipulationDiv),oa(this.editModeDiv),oa(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,oe(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,oe(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,oe(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,oe(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,oe(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,oe(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Am(ir(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new cd(e,{});r0(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=yt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;_o(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=yt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;_o(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=br({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=br({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+Uf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(yt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(yt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:Uf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const le="string",ie="boolean",U="number",vf="array",ke="object",tle="dom",m4e="any",Pj=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],Ij={borderWidth:{number:U},borderWidthSelected:{number:U,undefined:"undefined"},brokenImage:{string:le,undefined:"undefined"},chosen:{label:{boolean:ie,function:"function"},node:{boolean:ie,function:"function"},__type__:{object:ke,boolean:ie}},color:{border:{string:le},background:{string:le},highlight:{border:{string:le},background:{string:le},__type__:{object:ke,string:le}},hover:{border:{string:le},background:{string:le},__type__:{object:ke,string:le}},__type__:{object:ke,string:le}},opacity:{number:U,undefined:"undefined"},fixed:{x:{boolean:ie},y:{boolean:ie},__type__:{object:ke,boolean:ie}},font:{align:{string:le},color:{string:le},size:{number:U},face:{string:le},background:{string:le},strokeWidth:{number:U},strokeColor:{string:le},vadjust:{number:U},multi:{boolean:ie,string:le},bold:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},boldital:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},ital:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},mono:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},__type__:{object:ke,string:le}},group:{string:le,number:U,undefined:"undefined"},heightConstraint:{minimum:{number:U},valign:{string:le},__type__:{object:ke,boolean:ie,number:U}},hidden:{boolean:ie},icon:{face:{string:le},code:{string:le},size:{number:U},color:{string:le},weight:{string:le,number:U},__type__:{object:ke}},id:{string:le,number:U},image:{selected:{string:le,undefined:"undefined"},unselected:{string:le,undefined:"undefined"},__type__:{object:ke,string:le}},imagePadding:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:ke,number:U}},label:{string:le,undefined:"undefined"},labelHighlightBold:{boolean:ie},level:{number:U,undefined:"undefined"},margin:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:ke,number:U}},mass:{number:U},physics:{boolean:ie},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:ie},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:ke,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:ke}},shadow:{enabled:{boolean:ie},color:{string:le},size:{number:U},x:{number:U},y:{number:U},__type__:{object:ke,boolean:ie}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:ie,array:vf},borderRadius:{number:U},interpolation:{boolean:ie},useImageSize:{boolean:ie},useBorderWithImage:{boolean:ie},coordinateOrigin:{string:["center","top-left"]},__type__:{object:ke}},size:{number:U},title:{string:le,dom:tle,undefined:"undefined"},value:{number:U,undefined:"undefined"},widthConstraint:{minimum:{number:U},maximum:{number:U},__type__:{object:ke,boolean:ie,number:U}},x:{number:U},y:{number:U},__type__:{object:ke}},g4e={configure:{enabled:{boolean:ie},filter:{boolean:ie,string:le,array:vf,function:"function"},container:{dom:tle},showButton:{boolean:ie},__type__:{object:ke,boolean:ie,string:le,array:vf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:ie},scaleFactor:{number:U},type:{string:Pj},imageHeight:{number:U},imageWidth:{number:U},src:{string:le},__type__:{object:ke,boolean:ie}},middle:{enabled:{boolean:ie},scaleFactor:{number:U},type:{string:Pj},imageWidth:{number:U},imageHeight:{number:U},src:{string:le},__type__:{object:ke,boolean:ie}},from:{enabled:{boolean:ie},scaleFactor:{number:U},type:{string:Pj},imageWidth:{number:U},imageHeight:{number:U},src:{string:le},__type__:{object:ke,boolean:ie}},__type__:{string:["from","to","middle"],object:ke}},endPointOffset:{from:{number:U},to:{number:U},__type__:{object:ke,number:U}},arrowStrikethrough:{boolean:ie},background:{enabled:{boolean:ie},color:{string:le},size:{number:U},dashes:{boolean:ie,array:vf},__type__:{object:ke,boolean:ie}},chosen:{label:{boolean:ie,function:"function"},edge:{boolean:ie,function:"function"},__type__:{object:ke,boolean:ie}},color:{color:{string:le},highlight:{string:le},hover:{string:le},inherit:{string:["from","to","both"],boolean:ie},opacity:{number:U},__type__:{object:ke,string:le}},dashes:{boolean:ie,array:vf},font:{color:{string:le},size:{number:U},face:{string:le},background:{string:le},strokeWidth:{number:U},strokeColor:{string:le},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:U},multi:{boolean:ie,string:le},bold:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},boldital:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},ital:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},mono:{color:{string:le},size:{number:U},face:{string:le},mod:{string:le},vadjust:{number:U},__type__:{object:ke,string:le}},__type__:{object:ke,string:le}},hidden:{boolean:ie},hoverWidth:{function:"function",number:U},label:{string:le,undefined:"undefined"},labelHighlightBold:{boolean:ie},length:{number:U,undefined:"undefined"},physics:{boolean:ie},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:ie},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:ke,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:ke}},selectionWidth:{function:"function",number:U},selfReferenceSize:{number:U},selfReference:{size:{number:U},angle:{number:U},renderBehindTheNode:{boolean:ie},__type__:{object:ke}},shadow:{enabled:{boolean:ie},color:{string:le},size:{number:U},x:{number:U},y:{number:U},__type__:{object:ke,boolean:ie}},smooth:{enabled:{boolean:ie},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:U},forceDirection:{string:["horizontal","vertical","none"],boolean:ie},__type__:{object:ke,boolean:ie}},title:{string:le,undefined:"undefined"},width:{number:U},widthConstraint:{maximum:{number:U},__type__:{object:ke,boolean:ie,number:U}},value:{number:U,undefined:"undefined"},__type__:{object:ke}},groups:{useDefaultGroups:{boolean:ie},__any__:Ij,__type__:{object:ke}},interaction:{dragNodes:{boolean:ie},dragView:{boolean:ie},hideEdgesOnDrag:{boolean:ie},hideEdgesOnZoom:{boolean:ie},hideNodesOnDrag:{boolean:ie},hover:{boolean:ie},keyboard:{enabled:{boolean:ie},speed:{x:{number:U},y:{number:U},zoom:{number:U},__type__:{object:ke}},bindToWindow:{boolean:ie},autoFocus:{boolean:ie},__type__:{object:ke,boolean:ie}},multiselect:{boolean:ie},navigationButtons:{boolean:ie},selectable:{boolean:ie},selectConnectedEdges:{boolean:ie},hoverConnectedEdges:{boolean:ie},tooltipDelay:{number:U},zoomView:{boolean:ie},zoomSpeed:{number:U},__type__:{object:ke}},layout:{randomSeed:{undefined:"undefined",number:U,string:le},improvedLayout:{boolean:ie},clusterThreshold:{number:U},hierarchical:{enabled:{boolean:ie},levelSeparation:{number:U},nodeSpacing:{number:U},treeSpacing:{number:U},blockShifting:{boolean:ie},edgeMinimization:{boolean:ie},parentCentralization:{boolean:ie},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:ke,boolean:ie}},__type__:{object:ke}},manipulation:{enabled:{boolean:ie},initiallyActive:{boolean:ie},addNode:{boolean:ie,function:"function"},addEdge:{boolean:ie,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:ke,boolean:ie,function:"function"}},deleteNode:{boolean:ie,function:"function"},deleteEdge:{boolean:ie,function:"function"},controlNodeStyle:Ij,__type__:{object:ke,boolean:ie}},nodes:Ij,physics:{enabled:{boolean:ie},barnesHut:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:ke}},forceAtlas2Based:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:ke}},repulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},__type__:{object:ke}},hierarchicalRepulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:ke}},maxVelocity:{number:U},minVelocity:{number:U},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:ie},iterations:{number:U},updateInterval:{number:U},onlyDynamicEdges:{boolean:ie},fit:{boolean:ie},__type__:{object:ke,boolean:ie}},timestep:{number:U},adaptiveTimestep:{boolean:ie},wind:{x:{number:U},y:{number:U},__type__:{object:ke}},__type__:{object:ke,boolean:ie}},autoResize:{boolean:ie},clickToUse:{boolean:ie},locale:{string:le},locales:{__any__:{any:m4e},__type__:{object:ke}},height:{string:le},width:{string:le},__type__:{object:ke}},rle={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},y4e=(t,e,r)=>{var n;return!!(Ka(t).call(t,"physics")&&Ka(n=rle.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class v4e{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],c={};i[l]=c;for(let d=0;d<r.length;d++)c[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],c=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],v=Math.min(f[m],f[l]+c[m]);f[m]=v,g[h]=v}}}return i}}class b4e{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new v4e}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),c=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<c;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const c=r[l];if(n[c].predefinedPosition!==!0||n[c].isCluster===!0&&e===!0||n[c].options.fixed.x!==!0||n[c].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(c);i<d&&(i=d,s=c,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const c=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,N=s[S].y,E=h[S],C=f[S],k=1/((c-_)**2+(d-N)**2)**1.5;o+=E*(1-C*(d-N)**2*k),a+=E*(C*(c-_)*(d-N)*k),l+=E*(1-C*(c-_)**2*k)}}const p=o,m=a,g=r,v=l,y=n,b=(g/p+y/m)/(m/p-v/m),w=-(m*b+g)/p;s[e].x+=w,s[e].y+=b,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let c=n;c<e.length;c++){const d=e[c];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][c]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][c],a+=this.E_matrix[i][c][0],l+=this.E_matrix[i][c][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let c=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],v=n[f].x,y=n[f].y,b=1/Math.sqrt((a-v)**2+(l-y)**2),w=s[f]*(a-v-o[f]*(a-v)*b),x=s[f]*(l-y-o[f]*(l-y)*b);i[h]=[w,x],c+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[c,d]}}function _e(t,e,r){var n,i,s,o;if(!(this instanceof _e))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:VMe,clickToUse:!1},br(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:oe(n=this.on).call(n,this),off:oe(i=this.off).call(i,this),emit:oe(s=this.emit).call(s,this),once:oe(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new WMe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new aAe,this.canvas=new tFe(this.body),this.selectionHandler=new DFe(this.body,this.canvas),this.interactionHandler=new sFe(this.body,this.canvas,this.selectionHandler),this.view=new nFe(this.body,this.canvas),this.renderer=new Q$e(this.body,this.canvas),this.physics=new z$e(this.body),this.layoutEngine=new f4e(this.body),this.clustering=new Y$e(this.body),this.manipulation=new p4e(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new g$e(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new D$e(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new b4e(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}Ioe(_e.prototype);_e.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(xMe.validate(t,g4e)===!0&&console.error("%cErrors have been found in the supplied options object.",kae),Dh(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=UMe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new vMe(this,this.body.container,rle,this.canvas.pixelRatio,y4e)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Ot(n.nodes,this.nodesHandler.options),Ot(n.edges,this.edgesHandler.options),Ot(n.layout,this.layoutEngine.options),Ot(n.interaction,this.selectionHandler.options),Ot(n.interaction,this.renderer.options),Ot(n.interaction,this.interactionHandler.options),Ot(n.manipulation,this.manipulation.options),Ot(n.physics,this.physics.options),Ot(n.global,this.canvas.options),Ot(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new yMe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};_e.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};_e.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};_e.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=jMe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=PMe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};_e.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];oa(this.body.container)};_e.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};_e.prototype.isActive=function(){return!this.activator||this.activator.active};_e.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};_e.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};_e.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};_e.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};_e.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};_e.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};_e.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};_e.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};_e.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};_e.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};_e.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};_e.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};_e.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};_e.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};_e.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};_e.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};_e.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};_e.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};_e.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};_e.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};_e.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};_e.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};_e.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};_e.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};_e.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};_e.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};_e.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};_e.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};_e.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};_e.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};_e.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};_e.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};_e.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};_e.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};_e.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};_e.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};_e.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};_e.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};_e.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};_e.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};_e.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};_e.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};_e.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};_e.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};_e.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};_e.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};_e.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};_e.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};_e.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};_e.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};_e.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};_e.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function x4e({graphData:t,startPersonId:e,onNodeClick:r}){const n=T.useRef(null),i=T.useRef(null),s=Wi(),o=T.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);T.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new Qd(t.nodes),h=new Qd(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new _e(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),v={},y=new Set;m.forEach(([b,w])=>{if(y.has(b)||y.has(w))return;const x=g[b],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;v[b]={x:_-60,y:x.y},v[w]={x:_+60,y:S.y},y.add(b),y.add(w)}),Object.entries(v).forEach(([b,w])=>{p.moveNode(b,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},c=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[u.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:u.jsx(Hpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:u.jsx(Wpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:u.jsx(Mte,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),u.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const w4e=["parent","child","spouse","lover","partner"];function S4e(t){return w4e.includes(t==null?void 0:t.toLowerCase())}function _4e(t){return(t==null?void 0:t.toLowerCase())==="parent"}function E4e(t){return(t==null?void 0:t.toLowerCase())==="child"}function N4e(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function C4e(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var b,w,x,S;let p=h.name||((b=h.title)==null?void 0:b.rendered)||h.title||`Person ${f}`;if(p&&typeof p=="string"&&typeof document<"u"){const _=document.createElement("textarea");_.innerHTML=p,p=_.value}let m=null,g=((w=h.acf)==null?void 0:w.birth_date)||null;if(g){const _=new Date(g);isNaN(_.getTime())||(m=Math.floor((new Date-_)/(365.25*24*60*60*1e3)))}let v="";switch((x=h.acf)==null?void 0:x.gender){case"male":v="";break;case"female":v="";break;case"non_binary":case"other":case"prefer_not_to_say":v="";break}let y="";if(g)try{const _=new Date(g);if(!isNaN(_.getTime())){const N=String(_.getDate()).padStart(2,"0"),E=String(_.getMonth()+1).padStart(2,"0"),C=_.getFullYear();y=`${N}-${E}-${C}`}}catch{}return{id:f,name:p,gender:((S=h.acf)==null?void 0:S.gender)||"",genderSymbol:v,photo:h.thumbnail||null,age:m,birthDate:g,formattedBirthDate:y}}const c=o.get(t);for(c&&n.set(t,l(c,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!S4e(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const v=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===v||`${w.from}-${w.to}`===y)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(_4e(w))i.push({from:g,to:h,type:"parent-child"});else if(E4e(w))i.push({from:h,to:g,type:"parent-child"});else if(N4e(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function k4e(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(v=>{s.set(v.id,[]),o.set(v.id,[]),a.set(v.id,[])}),i.forEach(v=>{var y,b,w,x;v.type==="parent-child"?((y=s.get(v.to))==null||y.push(v.from),(b=o.get(v.from))==null||b.push(v.to)):v.type==="spouse"&&((w=a.get(v.from))==null||w.push(v.to),(x=a.get(v.to))==null||x.push(v.from))});const l=new Map,c=new Set,d=[{id:e,generation:0}];for(l.set(e,0),c.add(e);d.length>0;){const{id:v,generation:y}=d.shift(),b=s.get(v)||[];for(const S of b)c.has(S)||(c.add(S),l.set(S,y-1),d.push({id:S,generation:y-1}));const w=o.get(v)||[];for(const S of w)c.has(S)||(c.add(S),l.set(S,y+1),d.push({id:S,generation:y+1}));const x=a.get(v)||[];for(const S of x)c.has(S)||(c.add(S),l.set(S,y),d.push({id:S,generation:y}))}n.forEach(v=>{l.has(v.id)||l.set(v.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((v,y)=>{f.set(y,v-h)});function p(v,y,b=!1){const w=v?v.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2):"?";let x,S;b?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(v=>{const y=f.get(v.id)||0,b=v.id===e,w=r[v.id]||!1;let x=v.name;w&&(x=v.name+" ");let S=[x],_="";v.genderSymbol&&(_+=v.genderSymbol+" "),v.age!==null&&(_+=v.age+" "),v.formattedBirthDate&&(_+=v.formattedBirthDate),_.trim()&&S.push(_.trim());const N=v.photo||p(v.name,b,w);let E="#d1d5db";return b?E="#f59e0b":w&&(E="#9ca3af"),{id:v.id,label:S.join(`
`),level:y,shape:"circularImage",image:N,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:E,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:b?3:2,data:{...v,isDeceased:w}}}),g=i.map((v,y)=>{const b=v.type==="spouse";return{id:`edge-${y}`,from:v.from,to:v.to,arrows:{to:{enabled:!1}},color:{color:b?"#ec4899":"#9ca3af",highlight:b?"#db2777":"#6b7280"},width:2,dashes:b?[5,5]:!1,smooth:!1,length:b?50:300}});return{nodes:m,edges:g}}function T4e(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var c,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((c=o.relationship_type)==null?void 0:c.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function O4e(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function j4e(){var p,m;const{id:t}=w0(),e=Wi(),r=parseInt(t,10),{data:n,isLoading:i}=Hte(t),{data:s=[],isLoading:o}=Wc(),{data:a=[]}=ht({queryKey:["relationship-types"],queryFn:async()=>(await Le.getRelationshipTypes()).data}),l=T.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),c=JP({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await Ae.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=T.useMemo(()=>{const g={};return c.forEach((v,y)=>{if(v.data&&l[y]){const b=l[y],w=v.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[b]=w}}),g},[c,l]);Hc(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=T.useMemo(()=>{if(!n||!s.length)return null;try{const g=T4e(s);a.length>0&&O4e(g,a);const v=C4e(r,s,g);return!v||v.nodes.length===0?null:k4e(v,r,d)}catch(g){return console.error("Error building family tree:",g),null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?u.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(He,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(em,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),u.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),u.jsx("div",{className:"card p-6",children:u.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?u.jsx(x4e,{graphData:h,startPersonId:r,onNodeClick:f}):u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),u.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),u.jsx(He,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function P4e(){const{loginUrl:t,isLoggedIn:e}=fM();return Bte(),T.useEffect(()=>{e||(window.location.href=t)},[e,t]),u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function I4e({children:t}){const{data:e,isLoading:r,error:n}=ht({queryKey:["current-user"],queryFn:async()=>(await Ae.getCurrentUser()).data,retry:!1});return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Ro,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Ro,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function R4e({children:t}){const{isLoggedIn:e,isLoading:r}=fM();return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?u.jsx(I4e,{children:t}):u.jsx(Bee,{to:"/login",replace:!0})}function M4e(){return u.jsxs(dF,{children:[u.jsx(Xr,{path:"/login",element:u.jsx(P4e,{})}),u.jsx(Xr,{path:"/*",element:u.jsx(R4e,{children:u.jsx(Dme,{children:u.jsxs(dF,{children:[u.jsx(Xr,{path:"/",element:u.jsx(I_e,{})}),u.jsx(Xr,{path:"/people",element:u.jsx(M_e,{})}),u.jsx(Xr,{path:"/people/:id/family-tree",element:u.jsx(j4e,{})}),u.jsx(Xr,{path:"/people/:id",element:u.jsx(lEe,{})}),u.jsx(Xr,{path:"/companies",element:u.jsx(uEe,{})}),u.jsx(Xr,{path:"/companies/new",element:u.jsx(Dq,{})}),u.jsx(Xr,{path:"/companies/:id",element:u.jsx(dEe,{})}),u.jsx(Xr,{path:"/companies/:id/edit",element:u.jsx(Dq,{})}),u.jsx(Xr,{path:"/dates",element:u.jsx(pEe,{})}),u.jsx(Xr,{path:"/todos",element:u.jsx(mEe,{})}),u.jsx(Xr,{path:"/settings",element:u.jsx(wEe,{})}),u.jsx(Xr,{path:"/settings/relationship-types",element:u.jsx(kEe,{})}),u.jsx(Xr,{path:"/settings/user-approval",element:u.jsx(TEe,{})}),u.jsx(Xr,{path:"*",element:u.jsx(Bee,{to:"/",replace:!0})})]})})})})]})}const A4e=new $he({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),Rj=document.getElementById("root");if(!Rj)console.error('Root element not found! Make sure there is a <div id="root"></div> in your HTML.');else try{Mj.createRoot(Rj).render(u.jsx(xe.StrictMode,{children:u.jsx(Fhe,{client:A4e,children:u.jsx(she,{children:u.jsx(M4e,{})})})}))}catch(t){console.error("Error mounting React app:",t),Rj.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
