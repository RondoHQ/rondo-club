import{e as h,r as m,j as e,L as b}from"./vendor-CjdX6t1i.js";import{a4 as g,X as f,g as j,P as o,U as x}from"./main-D6r1FXj6.js";import{u as y}from"./utils-D5Yy9kBW.js";import{C as N,E as w}from"./eye-DamYVwHf.js";import{S as v}from"./shield-znEaW7R6.js";function C({isOpen:s,onClose:a}){const t=h(),r=g(),{register:i,handleSubmit:l,reset:n,formState:{errors:c}}=y({defaultValues:{title:"",description:""}});m.useEffect(()=>{s&&n({title:"",description:""})},[s,n]);const u=async d=>{const p=await r.mutateAsync({title:d.title,content:d.description,status:"publish"});a(),t(`/workspaces/${p.id}`)};return s?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:a}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create Workspace"}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:e.jsx(f,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:l(u),children:[e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),e.jsx("input",{type:"text",...i("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Sales Team"}),c.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{...i("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"What's this workspace for?"})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r.isPending,className:"btn-primary",children:r.isPending?"Creating...":"Create Workspace"})]})]})]})})]}):null}function k({role:s,isOwner:a}){if(a)return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:[e.jsx(N,{className:"w-3 h-3"}),"Owner"]});const t={admin:{icon:v,bg:"bg-purple-100",text:"text-purple-800",label:"Admin"},member:{icon:x,bg:"bg-blue-100",text:"text-blue-800",label:"Member"},viewer:{icon:w,bg:"bg-gray-100",text:"text-gray-800",label:"Viewer"}},r=t[s]||t.member,i=r.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 ${r.bg} ${r.text} text-xs rounded-full`,children:[e.jsx(i,{className:"w-3 h-3"}),r.label]})}function W({workspace:s}){return e.jsx(b,{to:`/workspaces/${s.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 truncate",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsx(k,{role:s.role,isOwner:s.is_owner}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.member_count," member",s.member_count!==1?"s":""]})]})]})})})}function $(){const[s,a]=m.useState(!1),{data:t,isLoading:r,error:i}=j();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspaces"}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx(o,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Create Workspace"})]})]}),r&&e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&e.jsx("div",{className:"card p-6 text-center",children:e.jsx("p",{className:"text-red-600",children:"Failed to load workspaces."})}),!r&&!i&&(t==null?void 0:t.length)===0&&e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(x,{className:"w-6 h-6 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No workspaces yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create a workspace to start collaborating with others."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Create Workspace"]})]}),!r&&!i&&(t==null?void 0:t.length)>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(l=>e.jsx(W,{workspace:l},l.id))}),e.jsx(C,{isOpen:s,onClose:()=>a(!1)})]})}export{$ as default};
