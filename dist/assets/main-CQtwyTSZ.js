var bD=t=>{throw TypeError(t)};var Pb=(t,e,r)=>e.has(t)||bD("Cannot "+r);var I=(t,e,r)=>(Pb(t,e,"read from private field"),r?r.call(t):e.get(t)),ve=(t,e,r)=>e.has(t)?bD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),se=(t,e,r,n)=>(Pb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),De=(t,e,r)=>(Pb(t,e,"access private method"),r);var Qm=(t,e,r,n)=>({set _(i){se(t,e,i,r)},get _(){return I(t,e,n)}});function Dae(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function XX(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var JX={exports:{}},e0={},ZX={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up=Symbol.for("react.element"),Aae=Symbol.for("react.portal"),Fae=Symbol.for("react.fragment"),qae=Symbol.for("react.strict_mode"),Lae=Symbol.for("react.profiler"),Bae=Symbol.for("react.provider"),zae=Symbol.for("react.context"),Vae=Symbol.for("react.forward_ref"),Uae=Symbol.for("react.suspense"),Hae=Symbol.for("react.memo"),Wae=Symbol.for("react.lazy"),xD=Symbol.iterator;function Kae(t){return t===null||typeof t!="object"?null:(t=xD&&t[xD]||t["@@iterator"],typeof t=="function"?t:null)}var eJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tJ=Object.assign,rJ={};function Qd(t,e,r){this.props=t,this.context=e,this.refs=rJ,this.updater=r||eJ}Qd.prototype.isReactComponent={};Qd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nJ(){}nJ.prototype=Qd.prototype;function BI(t,e,r){this.props=t,this.context=e,this.refs=rJ,this.updater=r||eJ}var zI=BI.prototype=new nJ;zI.constructor=BI;tJ(zI,Qd.prototype);zI.isPureReactComponent=!0;var wD=Array.isArray,iJ=Object.prototype.hasOwnProperty,VI={current:null},sJ={key:!0,ref:!0,__self:!0,__source:!0};function oJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)iJ.call(e,n)&&!sJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Up,type:t,key:s,ref:o,props:i,_owner:VI.current}}function Gae(t,e){return{$$typeof:Up,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function UI(t){return typeof t=="object"&&t!==null&&t.$$typeof===Up}function Yae(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var SD=/\/+/g;function Ib(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yae(""+t.key):e.toString(36)}function Lg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Up:case Aae:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Ib(o,0):n,wD(i)?(r="",t!=null&&(r=t.replace(SD,"$&/")+"/"),Lg(i,e,r,"",function(c){return c})):i!=null&&(UI(i)&&(i=Gae(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(SD,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",wD(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Ib(s,a);o+=Lg(s,e,r,l,i)}else if(l=Kae(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Ib(s,a++),o+=Lg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xm(t,e,r){if(t==null)return t;var n=[],i=0;return Lg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Qae(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},Bg={transition:null},Xae={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:Bg,ReactCurrentOwner:VI};function aJ(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:Xm,forEach:function(t,e,r){Xm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Xm(t,function(){e++}),e},toArray:function(t){return Xm(t,function(e){return e})||[]},only:function(t){if(!UI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=Qd;rt.Fragment=Fae;rt.Profiler=Lae;rt.PureComponent=BI;rt.StrictMode=qae;rt.Suspense=Uae;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xae;rt.act=aJ;rt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=tJ({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=VI.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)iJ.call(e,l)&&!sJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Up,type:t.type,key:i,ref:s,props:n,_owner:o}};rt.createContext=function(t){return t={$$typeof:zae,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bae,_context:t},t.Consumer=t};rt.createElement=oJ;rt.createFactory=function(t){var e=oJ.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:Vae,render:t}};rt.isValidElement=UI;rt.lazy=function(t){return{$$typeof:Wae,_payload:{_status:-1,_result:t},_init:Qae}};rt.memo=function(t,e){return{$$typeof:Hae,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=Bg.transition;Bg.transition={};try{t()}finally{Bg.transition=e}};rt.unstable_act=aJ;rt.useCallback=function(t,e){return Rn.current.useCallback(t,e)};rt.useContext=function(t){return Rn.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};rt.useEffect=function(t,e){return Rn.current.useEffect(t,e)};rt.useId=function(){return Rn.current.useId()};rt.useImperativeHandle=function(t,e,r){return Rn.current.useImperativeHandle(t,e,r)};rt.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return Rn.current.useMemo(t,e)};rt.useReducer=function(t,e,r){return Rn.current.useReducer(t,e,r)};rt.useRef=function(t){return Rn.current.useRef(t)};rt.useState=function(t){return Rn.current.useState(t)};rt.useSyncExternalStore=function(t,e,r){return Rn.current.useSyncExternalStore(t,e,r)};rt.useTransition=function(){return Rn.current.useTransition()};rt.version="18.3.1";ZX.exports=rt;var T=ZX.exports;const Ae=XX(T),Jae=Dae({__proto__:null,default:Ae},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zae=T,ele=Symbol.for("react.element"),tle=Symbol.for("react.fragment"),rle=Object.prototype.hasOwnProperty,nle=Zae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ile={key:!0,ref:!0,__self:!0,__source:!0};function lJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)rle.call(e,n)&&!ile.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:ele,type:t,key:s,ref:o,props:i,_owner:nle.current}}e0.Fragment=tle;e0.jsx=lJ;e0.jsxs=lJ;JX.exports=e0;var u=JX.exports,mj={},cJ={exports:{}},gi={},uJ={exports:{}},dJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,W){var z=D.length;D.push(W);e:for(;0<z;){var U=z-1>>>1,K=D[U];if(0<i(K,W))D[U]=W,D[z]=K,z=U;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var W=D[0],z=D.pop();if(z!==W){D[0]=z;e:for(var U=0,K=D.length,fe=K>>>1;U<fe;){var we=2*(U+1)-1,Fe=D[we],xe=we+1,Re=D[xe];if(0>i(Fe,z))xe<K&&0>i(Re,Fe)?(D[U]=Re,D[xe]=z,U=xe):(D[U]=Fe,D[we]=z,U=we);else if(xe<K&&0>i(Re,z))D[U]=Re,D[xe]=z,U=xe;else break e}}return W}function i(D,W){var z=D.sortIndex-W.sortIndex;return z!==0?z:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var W=r(c);W!==null;){if(W.callback===null)n(c);else if(W.startTime<=D)n(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=r(c)}}function x(D){if(g=!1,w(D),!m)if(r(l)!==null)m=!0,R(S);else{var W=r(c);W!==null&&L(x,W.startTime-D)}}function S(D,W){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var z=f;try{for(w(W),h=r(l);h!==null&&(!(h.expirationTime>W)||D&&!O());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var K=U(h.expirationTime<=W);W=t.unstable_now(),typeof K=="function"?h.callback=K:h===r(l)&&n(l),w(W)}else n(l);h=r(l)}if(h!==null)var fe=!0;else{var we=r(c);we!==null&&L(x,we.startTime-W),fe=!1}return fe}finally{h=null,f=z,p=!1}}var _=!1,N=null,E=-1,k=5,C=-1;function O(){return!(t.unstable_now()-C<k)}function j(){if(N!==null){var D=t.unstable_now();C=D;var W=!0;try{W=N(!0,D)}finally{W?P():(_=!1,N=null)}}else _=!1}var P;if(typeof v=="function")P=function(){v(j)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,q=A.port2;A.port1.onmessage=j,P=function(){q.postMessage(null)}}else P=function(){b(j,0)};function R(D){N=D,_||(_=!0,P())}function L(D,W){E=b(function(){D(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var z=f;f=W;try{return D()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=f;f=D;try{return W()}finally{f=z}},t.unstable_scheduleCallback=function(D,W,z){var U=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=z+K,D={id:d++,callback:W,priorityLevel:D,startTime:z,expirationTime:K,sortIndex:-1},z>U?(D.sortIndex=z,e(c,D),r(l)===null&&D===r(c)&&(g?(y(E),E=-1):g=!0,L(x,z-U))):(D.sortIndex=K,e(l,D),m||p||(m=!0,R(S))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var W=f;return function(){var z=f;f=W;try{return D.apply(this,arguments)}finally{f=z}}}})(dJ);uJ.exports=dJ;var sle=uJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ole=T,mi=sle;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hJ=new Set,Hf={};function qc(t,e){wd(t,e),wd(t+"Capture",e)}function wd(t,e){for(Hf[t]=e,t=0;t<e.length;t++)hJ.add(e[t])}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gj=Object.prototype.hasOwnProperty,ale=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_D={},ED={};function lle(t){return gj.call(ED,t)?!0:gj.call(_D,t)?!1:ale.test(t)?ED[t]=!0:(_D[t]=!0,!1)}function cle(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ule(t,e,r,n){if(e===null||typeof e>"u"||cle(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rn[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rn[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rn[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rn[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rn[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rn[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rn[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rn[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rn[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var HI=/[\-:]([a-z])/g;function WI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(HI,WI);rn[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(HI,WI);rn[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(HI,WI);rn[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});rn.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function KI(t,e,r,n){var i=rn.hasOwnProperty(e)?rn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ule(e,r,i,n)&&(r=null),n||i===null?lle(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Do=ole.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jm=Symbol.for("react.element"),Tu=Symbol.for("react.portal"),Ou=Symbol.for("react.fragment"),GI=Symbol.for("react.strict_mode"),yj=Symbol.for("react.profiler"),fJ=Symbol.for("react.provider"),pJ=Symbol.for("react.context"),YI=Symbol.for("react.forward_ref"),vj=Symbol.for("react.suspense"),bj=Symbol.for("react.suspense_list"),QI=Symbol.for("react.memo"),ta=Symbol.for("react.lazy"),mJ=Symbol.for("react.offscreen"),ND=Symbol.iterator;function Fh(t){return t===null||typeof t!="object"?null:(t=ND&&t[ND]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,Rb;function sf(t){if(Rb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Rb=e&&e[1]||""}return`
`+Rb+t}var Mb=!1;function $b(t,e){if(!t||Mb)return"";Mb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?sf(t):""}function dle(t){switch(t.tag){case 5:return sf(t.type);case 16:return sf("Lazy");case 13:return sf("Suspense");case 19:return sf("SuspenseList");case 0:case 2:case 15:return t=$b(t.type,!1),t;case 11:return t=$b(t.type.render,!1),t;case 1:return t=$b(t.type,!0),t;default:return""}}function xj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ou:return"Fragment";case Tu:return"Portal";case yj:return"Profiler";case GI:return"StrictMode";case vj:return"Suspense";case bj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pJ:return(t.displayName||"Context")+".Consumer";case fJ:return(t._context.displayName||"Context")+".Provider";case YI:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case QI:return e=t.displayName||null,e!==null?e:xj(t.type)||"Memo";case ta:e=t._payload,t=t._init;try{return xj(t(e))}catch{}}return null}function hle(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xj(e);case 8:return e===GI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ja(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fle(t){var e=gJ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zm(t){t._valueTracker||(t._valueTracker=fle(t))}function yJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=gJ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function hy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wj(t,e){var r=e.checked;return Gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function CD(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ja(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vJ(t,e){e=e.checked,e!=null&&KI(t,"checked",e,!1)}function Sj(t,e){vJ(t,e);var r=Ja(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_j(t,e.type,r):e.hasOwnProperty("defaultValue")&&_j(t,e.type,Ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kD(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function _j(t,e,r){(e!=="number"||hy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var of=Array.isArray;function Ku(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ja(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ej(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function TD(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(te(92));if(of(r)){if(1<r.length)throw Error(te(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ja(r)}}function bJ(t,e){var r=Ja(e.value),n=Ja(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function OD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eg,wJ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eg=eg||document.createElement("div"),eg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var gf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ple=["Webkit","ms","Moz","O"];Object.keys(gf).forEach(function(t){ple.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gf[e]=gf[t]})});function SJ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||gf.hasOwnProperty(t)&&gf[t]?(""+e).trim():e+"px"}function _J(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=SJ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var mle=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cj(t,e){if(e){if(mle[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function kj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tj=null;function XI(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oj=null,Gu=null,Yu=null;function jD(t){if(t=Kp(t)){if(typeof Oj!="function")throw Error(te(280));var e=t.stateNode;e&&(e=s0(e),Oj(t.stateNode,t.type,e))}}function EJ(t){Gu?Yu?Yu.push(t):Yu=[t]:Gu=t}function NJ(){if(Gu){var t=Gu,e=Yu;if(Yu=Gu=null,jD(t),e)for(t=0;t<e.length;t++)jD(e[t])}}function CJ(t,e){return t(e)}function kJ(){}var Db=!1;function TJ(t,e,r){if(Db)return t(e,r);Db=!0;try{return CJ(t,e,r)}finally{Db=!1,(Gu!==null||Yu!==null)&&(kJ(),NJ())}}function Kf(t,e){var r=t.stateNode;if(r===null)return null;var n=s0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(te(231,e,typeof r));return r}var jj=!1;if(Oo)try{var qh={};Object.defineProperty(qh,"passive",{get:function(){jj=!0}}),window.addEventListener("test",qh,qh),window.removeEventListener("test",qh,qh)}catch{jj=!1}function gle(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var yf=!1,fy=null,py=!1,Pj=null,yle={onError:function(t){yf=!0,fy=t}};function vle(t,e,r,n,i,s,o,a,l){yf=!1,fy=null,gle.apply(yle,arguments)}function ble(t,e,r,n,i,s,o,a,l){if(vle.apply(this,arguments),yf){if(yf){var c=fy;yf=!1,fy=null}else throw Error(te(198));py||(py=!0,Pj=c)}}function Lc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function OJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function PD(t){if(Lc(t)!==t)throw Error(te(188))}function xle(t){var e=t.alternate;if(!e){if(e=Lc(t),e===null)throw Error(te(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return PD(i),t;if(s===n)return PD(i),e;s=s.sibling}throw Error(te(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(te(189))}}if(r.alternate!==n)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?t:e}function jJ(t){return t=xle(t),t!==null?PJ(t):null}function PJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=PJ(t);if(e!==null)return e;t=t.sibling}return null}var IJ=mi.unstable_scheduleCallback,ID=mi.unstable_cancelCallback,wle=mi.unstable_shouldYield,Sle=mi.unstable_requestPaint,dr=mi.unstable_now,_le=mi.unstable_getCurrentPriorityLevel,JI=mi.unstable_ImmediatePriority,RJ=mi.unstable_UserBlockingPriority,my=mi.unstable_NormalPriority,Ele=mi.unstable_LowPriority,MJ=mi.unstable_IdlePriority,t0=null,Ms=null;function Nle(t){if(Ms&&typeof Ms.onCommitFiberRoot=="function")try{Ms.onCommitFiberRoot(t0,t,void 0,(t.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:Tle,Cle=Math.log,kle=Math.LN2;function Tle(t){return t>>>=0,t===0?32:31-(Cle(t)/kle|0)|0}var tg=64,rg=4194304;function af(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gy(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=af(a):(s&=o,s!==0&&(n=af(s)))}else o=r&~i,o!==0?n=af(o):s!==0&&(n=af(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-us(e),i=1<<r,n|=t[r],e&=~i;return n}function Ole(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jle(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-us(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Ole(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ij(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $J(){var t=tg;return tg<<=1,!(tg&4194240)&&(tg=64),t}function Ab(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-us(e),t[e]=r}function Ple(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-us(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function ZI(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-us(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var St=0;function DJ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AJ,eR,FJ,qJ,LJ,Rj=!1,ng=[],Pa=null,Ia=null,Ra=null,Gf=new Map,Yf=new Map,ca=[],Ile="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function RD(t,e){switch(t){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Gf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yf.delete(e.pointerId)}}function Lh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Kp(e),e!==null&&eR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Rle(t,e,r,n,i){switch(e){case"focusin":return Pa=Lh(Pa,t,e,r,n,i),!0;case"dragenter":return Ia=Lh(Ia,t,e,r,n,i),!0;case"mouseover":return Ra=Lh(Ra,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Gf.set(s,Lh(Gf.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Yf.set(s,Lh(Yf.get(s)||null,t,e,r,n,i)),!0}return!1}function BJ(t){var e=Ol(t.target);if(e!==null){var r=Lc(e);if(r!==null){if(e=r.tag,e===13){if(e=OJ(r),e!==null){t.blockedOn=e,LJ(t.priority,function(){FJ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Mj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Tj=n,r.target.dispatchEvent(n),Tj=null}else return e=Kp(r),e!==null&&eR(e),t.blockedOn=r,!1;e.shift()}return!0}function MD(t,e,r){zg(t)&&r.delete(e)}function Mle(){Rj=!1,Pa!==null&&zg(Pa)&&(Pa=null),Ia!==null&&zg(Ia)&&(Ia=null),Ra!==null&&zg(Ra)&&(Ra=null),Gf.forEach(MD),Yf.forEach(MD)}function Bh(t,e){t.blockedOn===e&&(t.blockedOn=null,Rj||(Rj=!0,mi.unstable_scheduleCallback(mi.unstable_NormalPriority,Mle)))}function Qf(t){function e(i){return Bh(i,t)}if(0<ng.length){Bh(ng[0],t);for(var r=1;r<ng.length;r++){var n=ng[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Pa!==null&&Bh(Pa,t),Ia!==null&&Bh(Ia,t),Ra!==null&&Bh(Ra,t),Gf.forEach(e),Yf.forEach(e),r=0;r<ca.length;r++)n=ca[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ca.length&&(r=ca[0],r.blockedOn===null);)BJ(r),r.blockedOn===null&&ca.shift()}var Qu=Do.ReactCurrentBatchConfig,yy=!0;function $le(t,e,r,n){var i=St,s=Qu.transition;Qu.transition=null;try{St=1,tR(t,e,r,n)}finally{St=i,Qu.transition=s}}function Dle(t,e,r,n){var i=St,s=Qu.transition;Qu.transition=null;try{St=4,tR(t,e,r,n)}finally{St=i,Qu.transition=s}}function tR(t,e,r,n){if(yy){var i=Mj(t,e,r,n);if(i===null)Kb(t,e,n,vy,r),RD(t,n);else if(Rle(i,t,e,r,n))n.stopPropagation();else if(RD(t,n),e&4&&-1<Ile.indexOf(t)){for(;i!==null;){var s=Kp(i);if(s!==null&&AJ(s),s=Mj(t,e,r,n),s===null&&Kb(t,e,n,vy,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Kb(t,e,n,null,r)}}var vy=null;function Mj(t,e,r,n){if(vy=null,t=XI(n),t=Ol(t),t!==null)if(e=Lc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=OJ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vy=t,null}function zJ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_le()){case JI:return 1;case RJ:return 4;case my:case Ele:return 16;case MJ:return 536870912;default:return 16}default:return 16}}var Ea=null,rR=null,Vg=null;function VJ(){if(Vg)return Vg;var t,e=rR,r=e.length,n,i="value"in Ea?Ea.value:Ea.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Vg=i.slice(t,1<n?1-n:void 0)}function Ug(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ig(){return!0}function $D(){return!1}function yi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ig:$D,this.isPropagationStopped=$D,this}return Gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ig)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ig)},persist:function(){},isPersistent:ig}),e}var Xd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nR=yi(Xd),Wp=Gt({},Xd,{view:0,detail:0}),Ale=yi(Wp),Fb,qb,zh,r0=Gt({},Wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zh&&(zh&&t.type==="mousemove"?(Fb=t.screenX-zh.screenX,qb=t.screenY-zh.screenY):qb=Fb=0,zh=t),Fb)},movementY:function(t){return"movementY"in t?t.movementY:qb}}),DD=yi(r0),Fle=Gt({},r0,{dataTransfer:0}),qle=yi(Fle),Lle=Gt({},Wp,{relatedTarget:0}),Lb=yi(Lle),Ble=Gt({},Xd,{animationName:0,elapsedTime:0,pseudoElement:0}),zle=yi(Ble),Vle=Gt({},Xd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ule=yi(Vle),Hle=Gt({},Xd,{data:0}),AD=yi(Hle),Wle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gle[t])?!!e[t]:!1}function iR(){return Yle}var Qle=Gt({},Wp,{key:function(t){if(t.key){var e=Wle[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ug(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iR,charCode:function(t){return t.type==="keypress"?Ug(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ug(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xle=yi(Qle),Jle=Gt({},r0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FD=yi(Jle),Zle=Gt({},Wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iR}),ece=yi(Zle),tce=Gt({},Xd,{propertyName:0,elapsedTime:0,pseudoElement:0}),rce=yi(tce),nce=Gt({},r0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ice=yi(nce),sce=[9,13,27,32],sR=Oo&&"CompositionEvent"in window,vf=null;Oo&&"documentMode"in document&&(vf=document.documentMode);var oce=Oo&&"TextEvent"in window&&!vf,UJ=Oo&&(!sR||vf&&8<vf&&11>=vf),qD=" ",LD=!1;function HJ(t,e){switch(t){case"keyup":return sce.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WJ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ju=!1;function ace(t,e){switch(t){case"compositionend":return WJ(e);case"keypress":return e.which!==32?null:(LD=!0,qD);case"textInput":return t=e.data,t===qD&&LD?null:t;default:return null}}function lce(t,e){if(ju)return t==="compositionend"||!sR&&HJ(t,e)?(t=VJ(),Vg=rR=Ea=null,ju=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return UJ&&e.locale!=="ko"?null:e.data;default:return null}}var cce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cce[t.type]:e==="textarea"}function KJ(t,e,r,n){EJ(n),e=by(e,"onChange"),0<e.length&&(r=new nR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var bf=null,Xf=null;function uce(t){iZ(t,0)}function n0(t){var e=Ru(t);if(yJ(e))return t}function dce(t,e){if(t==="change")return e}var GJ=!1;if(Oo){var Bb;if(Oo){var zb="oninput"in document;if(!zb){var zD=document.createElement("div");zD.setAttribute("oninput","return;"),zb=typeof zD.oninput=="function"}Bb=zb}else Bb=!1;GJ=Bb&&(!document.documentMode||9<document.documentMode)}function VD(){bf&&(bf.detachEvent("onpropertychange",YJ),Xf=bf=null)}function YJ(t){if(t.propertyName==="value"&&n0(Xf)){var e=[];KJ(e,Xf,t,XI(t)),TJ(uce,e)}}function hce(t,e,r){t==="focusin"?(VD(),bf=e,Xf=r,bf.attachEvent("onpropertychange",YJ)):t==="focusout"&&VD()}function fce(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return n0(Xf)}function pce(t,e){if(t==="click")return n0(e)}function mce(t,e){if(t==="input"||t==="change")return n0(e)}function gce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hs=typeof Object.is=="function"?Object.is:gce;function Jf(t,e){if(hs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!gj.call(e,i)||!hs(t[i],e[i]))return!1}return!0}function UD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function HD(t,e){var r=UD(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=UD(r)}}function QJ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QJ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function XJ(){for(var t=window,e=hy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=hy(t.document)}return e}function oR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yce(t){var e=XJ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&QJ(r.ownerDocument.documentElement,r)){if(n!==null&&oR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=HD(r,s);var o=HD(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vce=Oo&&"documentMode"in document&&11>=document.documentMode,Pu=null,$j=null,xf=null,Dj=!1;function WD(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Dj||Pu==null||Pu!==hy(n)||(n=Pu,"selectionStart"in n&&oR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xf&&Jf(xf,n)||(xf=n,n=by($j,"onSelect"),0<n.length&&(e=new nR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Pu)))}function sg(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Iu={animationend:sg("Animation","AnimationEnd"),animationiteration:sg("Animation","AnimationIteration"),animationstart:sg("Animation","AnimationStart"),transitionend:sg("Transition","TransitionEnd")},Vb={},JJ={};Oo&&(JJ=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function i0(t){if(Vb[t])return Vb[t];if(!Iu[t])return t;var e=Iu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in JJ)return Vb[t]=e[r];return t}var ZJ=i0("animationend"),eZ=i0("animationiteration"),tZ=i0("animationstart"),rZ=i0("transitionend"),nZ=new Map,KD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ol(t,e){nZ.set(t,e),qc(e,[t])}for(var Ub=0;Ub<KD.length;Ub++){var Hb=KD[Ub],bce=Hb.toLowerCase(),xce=Hb[0].toUpperCase()+Hb.slice(1);ol(bce,"on"+xce)}ol(ZJ,"onAnimationEnd");ol(eZ,"onAnimationIteration");ol(tZ,"onAnimationStart");ol("dblclick","onDoubleClick");ol("focusin","onFocus");ol("focusout","onBlur");ol(rZ,"onTransitionEnd");wd("onMouseEnter",["mouseout","mouseover"]);wd("onMouseLeave",["mouseout","mouseover"]);wd("onPointerEnter",["pointerout","pointerover"]);wd("onPointerLeave",["pointerout","pointerover"]);qc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qc("onBeforeInput",["compositionend","keypress","textInput","paste"]);qc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wce=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function GD(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,ble(n,e,void 0,t),t.currentTarget=null}function iZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;GD(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;GD(i,a,c),s=l}}}if(py)throw t=Pj,py=!1,Pj=null,t}function At(t,e){var r=e[Bj];r===void 0&&(r=e[Bj]=new Set);var n=t+"__bubble";r.has(n)||(sZ(e,t,2,!1),r.add(n))}function Wb(t,e,r){var n=0;e&&(n|=4),sZ(r,t,n,e)}var og="_reactListening"+Math.random().toString(36).slice(2);function Zf(t){if(!t[og]){t[og]=!0,hJ.forEach(function(r){r!=="selectionchange"&&(wce.has(r)||Wb(r,!1,t),Wb(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[og]||(e[og]=!0,Wb("selectionchange",!1,e))}}function sZ(t,e,r,n){switch(zJ(e)){case 1:var i=$le;break;case 4:i=Dle;break;default:i=tR}r=i.bind(null,e,r,t),i=void 0,!jj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Kb(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ol(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}TJ(function(){var c=s,d=XI(r),h=[];e:{var f=nZ.get(t);if(f!==void 0){var p=nR,m=t;switch(t){case"keypress":if(Ug(r)===0)break e;case"keydown":case"keyup":p=Xle;break;case"focusin":m="focus",p=Lb;break;case"focusout":m="blur",p=Lb;break;case"beforeblur":case"afterblur":p=Lb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=DD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ece;break;case ZJ:case eZ:case tZ:p=zle;break;case rZ:p=rce;break;case"scroll":p=Ale;break;case"wheel":p=ice;break;case"copy":case"cut":case"paste":p=Ule;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=FD}var g=(e&4)!==0,b=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var v=c,w;v!==null;){w=v;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Kf(v,y),x!=null&&g.push(ep(v,x,w)))),b)break;v=v.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Tj&&(m=r.relatedTarget||r.fromElement)&&(Ol(m)||m[jo]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Ol(m):null,m!==null&&(b=Lc(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=DD,x="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=FD,x="onPointerLeave",y="onPointerEnter",v="pointer"),b=p==null?f:Ru(p),w=m==null?f:Ru(m),f=new g(x,v+"leave",p,r,d),f.target=b,f.relatedTarget=w,x=null,Ol(d)===c&&(g=new g(y,v+"enter",m,r,d),g.target=w,g.relatedTarget=b,x=g),b=x,p&&m)t:{for(g=p,y=m,v=0,w=g;w;w=mu(w))v++;for(w=0,x=y;x;x=mu(x))w++;for(;0<v-w;)g=mu(g),v--;for(;0<w-v;)y=mu(y),w--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=mu(g),y=mu(y)}g=null}else g=null;p!==null&&YD(h,f,p,g,!1),m!==null&&b!==null&&YD(h,b,m,g,!0)}}e:{if(f=c?Ru(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=dce;else if(BD(f))if(GJ)S=mce;else{S=fce;var _=hce}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=pce);if(S&&(S=S(t,c))){KJ(h,S,r,d);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&_j(f,"number",f.value)}switch(_=c?Ru(c):window,t){case"focusin":(BD(_)||_.contentEditable==="true")&&(Pu=_,$j=c,xf=null);break;case"focusout":xf=$j=Pu=null;break;case"mousedown":Dj=!0;break;case"contextmenu":case"mouseup":case"dragend":Dj=!1,WD(h,r,d);break;case"selectionchange":if(vce)break;case"keydown":case"keyup":WD(h,r,d)}var N;if(sR)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ju?HJ(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(UJ&&r.locale!=="ko"&&(ju||E!=="onCompositionStart"?E==="onCompositionEnd"&&ju&&(N=VJ()):(Ea=d,rR="value"in Ea?Ea.value:Ea.textContent,ju=!0)),_=by(c,E),0<_.length&&(E=new AD(E,t,null,r,d),h.push({event:E,listeners:_}),N?E.data=N:(N=WJ(r),N!==null&&(E.data=N)))),(N=oce?ace(t,r):lce(t,r))&&(c=by(c,"onBeforeInput"),0<c.length&&(d=new AD("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=N))}iZ(h,e)})}function ep(t,e,r){return{instance:t,listener:e,currentTarget:r}}function by(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Kf(t,r),s!=null&&n.unshift(ep(t,s,i)),s=Kf(t,e),s!=null&&n.push(ep(t,s,i))),t=t.return}return n}function mu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function YD(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Kf(r,s),l!=null&&o.unshift(ep(r,l,a))):i||(l=Kf(r,s),l!=null&&o.push(ep(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Sce=/\r\n?/g,_ce=/\u0000|\uFFFD/g;function QD(t){return(typeof t=="string"?t:""+t).replace(Sce,`
`).replace(_ce,"")}function ag(t,e,r){if(e=QD(e),QD(t)!==e&&r)throw Error(te(425))}function xy(){}var Aj=null,Fj=null;function qj(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lj=typeof setTimeout=="function"?setTimeout:void 0,Ece=typeof clearTimeout=="function"?clearTimeout:void 0,XD=typeof Promise=="function"?Promise:void 0,Nce=typeof queueMicrotask=="function"?queueMicrotask:typeof XD<"u"?function(t){return XD.resolve(null).then(t).catch(Cce)}:Lj;function Cce(t){setTimeout(function(){throw t})}function Gb(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Qf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Qf(e)}function Ma(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function JD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Jd=Math.random().toString(36).slice(2),Os="__reactFiber$"+Jd,tp="__reactProps$"+Jd,jo="__reactContainer$"+Jd,Bj="__reactEvents$"+Jd,kce="__reactListeners$"+Jd,Tce="__reactHandles$"+Jd;function Ol(t){var e=t[Os];if(e)return e;for(var r=t.parentNode;r;){if(e=r[jo]||r[Os]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=JD(t);t!==null;){if(r=t[Os])return r;t=JD(t)}return e}t=r,r=t.parentNode}return null}function Kp(t){return t=t[Os]||t[jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ru(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function s0(t){return t[tp]||null}var zj=[],Mu=-1;function al(t){return{current:t}}function qt(t){0>Mu||(t.current=zj[Mu],zj[Mu]=null,Mu--)}function Mt(t,e){Mu++,zj[Mu]=t.current,t.current=e}var Za={},fn=al(Za),Kn=al(!1),fc=Za;function Sd(t,e){var r=t.type.contextTypes;if(!r)return Za;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Gn(t){return t=t.childContextTypes,t!=null}function wy(){qt(Kn),qt(fn)}function ZD(t,e,r){if(fn.current!==Za)throw Error(te(168));Mt(fn,e),Mt(Kn,r)}function oZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(te(108,hle(t)||"Unknown",i));return Gt({},r,n)}function Sy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Za,fc=fn.current,Mt(fn,t),Mt(Kn,Kn.current),!0}function eA(t,e,r){var n=t.stateNode;if(!n)throw Error(te(169));r?(t=oZ(t,e,fc),n.__reactInternalMemoizedMergedChildContext=t,qt(Kn),qt(fn),Mt(fn,t)):qt(Kn),Mt(Kn,r)}var io=null,o0=!1,Yb=!1;function aZ(t){io===null?io=[t]:io.push(t)}function Oce(t){o0=!0,aZ(t)}function ll(){if(!Yb&&io!==null){Yb=!0;var t=0,e=St;try{var r=io;for(St=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}io=null,o0=!1}catch(i){throw io!==null&&(io=io.slice(t+1)),IJ(JI,ll),i}finally{St=e,Yb=!1}}return null}var $u=[],Du=0,_y=null,Ey=0,Pi=[],Ii=0,pc=null,uo=1,ho="";function Nl(t,e){$u[Du++]=Ey,$u[Du++]=_y,_y=t,Ey=e}function lZ(t,e,r){Pi[Ii++]=uo,Pi[Ii++]=ho,Pi[Ii++]=pc,pc=t;var n=uo;t=ho;var i=32-us(n)-1;n&=~(1<<i),r+=1;var s=32-us(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,uo=1<<32-us(e)+i|r<<i|n,ho=s+t}else uo=1<<s|r<<i|n,ho=t}function aR(t){t.return!==null&&(Nl(t,1),lZ(t,1,0))}function lR(t){for(;t===_y;)_y=$u[--Du],$u[Du]=null,Ey=$u[--Du],$u[Du]=null;for(;t===pc;)pc=Pi[--Ii],Pi[Ii]=null,ho=Pi[--Ii],Pi[Ii]=null,uo=Pi[--Ii],Pi[Ii]=null}var fi=null,hi=null,Bt=!1,rs=null;function cZ(t,e){var r=$i(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function tA(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fi=t,hi=Ma(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fi=t,hi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=pc!==null?{id:uo,overflow:ho}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=$i(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,fi=t,hi=null,!0):!1;default:return!1}}function Vj(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uj(t){if(Bt){var e=hi;if(e){var r=e;if(!tA(t,e)){if(Vj(t))throw Error(te(418));e=Ma(r.nextSibling);var n=fi;e&&tA(t,e)?cZ(n,r):(t.flags=t.flags&-4097|2,Bt=!1,fi=t)}}else{if(Vj(t))throw Error(te(418));t.flags=t.flags&-4097|2,Bt=!1,fi=t}}}function rA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fi=t}function lg(t){if(t!==fi)return!1;if(!Bt)return rA(t),Bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qj(t.type,t.memoizedProps)),e&&(e=hi)){if(Vj(t))throw uZ(),Error(te(418));for(;e;)cZ(t,e),e=Ma(e.nextSibling)}if(rA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){hi=Ma(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}hi=null}}else hi=fi?Ma(t.stateNode.nextSibling):null;return!0}function uZ(){for(var t=hi;t;)t=Ma(t.nextSibling)}function _d(){hi=fi=null,Bt=!1}function cR(t){rs===null?rs=[t]:rs.push(t)}var jce=Do.ReactCurrentBatchConfig;function Vh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var n=r.stateNode}if(!n)throw Error(te(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,t))}return t}function cg(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nA(t){var e=t._init;return e(t._payload)}function dZ(t){function e(y,v){if(t){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function r(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Fa(y,v),y.index=0,y.sibling=null,y}function s(y,v,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,w,x){return v===null||v.tag!==6?(v=r1(w,y.mode,x),v.return=y,v):(v=i(v,w),v.return=y,v)}function l(y,v,w,x){var S=w.type;return S===Ou?d(y,v,w.props.children,x,w.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&nA(S)===v.type)?(x=i(v,w.props),x.ref=Vh(y,v,w),x.return=y,x):(x=Xg(w.type,w.key,w.props,null,y.mode,x),x.ref=Vh(y,v,w),x.return=y,x)}function c(y,v,w,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=n1(w,y.mode,x),v.return=y,v):(v=i(v,w.children||[]),v.return=y,v)}function d(y,v,w,x,S){return v===null||v.tag!==7?(v=Zl(w,y.mode,x,S),v.return=y,v):(v=i(v,w),v.return=y,v)}function h(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=r1(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jm:return w=Xg(v.type,v.key,v.props,null,y.mode,w),w.ref=Vh(y,null,v),w.return=y,w;case Tu:return v=n1(v,y.mode,w),v.return=y,v;case ta:var x=v._init;return h(y,x(v._payload),w)}if(of(v)||Fh(v))return v=Zl(v,y.mode,w,null),v.return=y,v;cg(y,v)}return null}function f(y,v,w,x){var S=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Jm:return w.key===S?l(y,v,w,x):null;case Tu:return w.key===S?c(y,v,w,x):null;case ta:return S=w._init,f(y,v,S(w._payload),x)}if(of(w)||Fh(w))return S!==null?null:d(y,v,w,x,null);cg(y,w)}return null}function p(y,v,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(v,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Jm:return y=y.get(x.key===null?w:x.key)||null,l(v,y,x,S);case Tu:return y=y.get(x.key===null?w:x.key)||null,c(v,y,x,S);case ta:var _=x._init;return p(y,v,w,_(x._payload),S)}if(of(x)||Fh(x))return y=y.get(w)||null,d(v,y,x,S,null);cg(v,x)}return null}function m(y,v,w,x){for(var S=null,_=null,N=v,E=v=0,k=null;N!==null&&E<w.length;E++){N.index>E?(k=N,N=null):k=N.sibling;var C=f(y,N,w[E],x);if(C===null){N===null&&(N=k);break}t&&N&&C.alternate===null&&e(y,N),v=s(C,v,E),_===null?S=C:_.sibling=C,_=C,N=k}if(E===w.length)return r(y,N),Bt&&Nl(y,E),S;if(N===null){for(;E<w.length;E++)N=h(y,w[E],x),N!==null&&(v=s(N,v,E),_===null?S=N:_.sibling=N,_=N);return Bt&&Nl(y,E),S}for(N=n(y,N);E<w.length;E++)k=p(N,y,E,w[E],x),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),v=s(k,v,E),_===null?S=k:_.sibling=k,_=k);return t&&N.forEach(function(O){return e(y,O)}),Bt&&Nl(y,E),S}function g(y,v,w,x){var S=Fh(w);if(typeof S!="function")throw Error(te(150));if(w=S.call(w),w==null)throw Error(te(151));for(var _=S=null,N=v,E=v=0,k=null,C=w.next();N!==null&&!C.done;E++,C=w.next()){N.index>E?(k=N,N=null):k=N.sibling;var O=f(y,N,C.value,x);if(O===null){N===null&&(N=k);break}t&&N&&O.alternate===null&&e(y,N),v=s(O,v,E),_===null?S=O:_.sibling=O,_=O,N=k}if(C.done)return r(y,N),Bt&&Nl(y,E),S;if(N===null){for(;!C.done;E++,C=w.next())C=h(y,C.value,x),C!==null&&(v=s(C,v,E),_===null?S=C:_.sibling=C,_=C);return Bt&&Nl(y,E),S}for(N=n(y,N);!C.done;E++,C=w.next())C=p(N,y,E,C.value,x),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?E:C.key),v=s(C,v,E),_===null?S=C:_.sibling=C,_=C);return t&&N.forEach(function(j){return e(y,j)}),Bt&&Nl(y,E),S}function b(y,v,w,x){if(typeof w=="object"&&w!==null&&w.type===Ou&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Jm:e:{for(var S=w.key,_=v;_!==null;){if(_.key===S){if(S=w.type,S===Ou){if(_.tag===7){r(y,_.sibling),v=i(_,w.props.children),v.return=y,y=v;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&nA(S)===_.type){r(y,_.sibling),v=i(_,w.props),v.ref=Vh(y,_,w),v.return=y,y=v;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===Ou?(v=Zl(w.props.children,y.mode,x,w.key),v.return=y,y=v):(x=Xg(w.type,w.key,w.props,null,y.mode,x),x.ref=Vh(y,v,w),x.return=y,y=x)}return o(y);case Tu:e:{for(_=w.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(y,v.sibling),v=i(v,w.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else e(y,v);v=v.sibling}v=n1(w,y.mode,x),v.return=y,y=v}return o(y);case ta:return _=w._init,b(y,v,_(w._payload),x)}if(of(w))return m(y,v,w,x);if(Fh(w))return g(y,v,w,x);cg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(y,v.sibling),v=i(v,w),v.return=y,y=v):(r(y,v),v=r1(w,y.mode,x),v.return=y,y=v),o(y)):r(y,v)}return b}var Ed=dZ(!0),hZ=dZ(!1),Ny=al(null),Cy=null,Au=null,uR=null;function dR(){uR=Au=Cy=null}function hR(t){var e=Ny.current;qt(Ny),t._currentValue=e}function Hj(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Xu(t,e){Cy=t,uR=Au=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hn=!0),t.firstContext=null)}function Bi(t){var e=t._currentValue;if(uR!==t)if(t={context:t,memoizedValue:e,next:null},Au===null){if(Cy===null)throw Error(te(308));Au=t,Cy.dependencies={lanes:0,firstContext:t}}else Au=Au.next=t;return e}var jl=null;function fR(t){jl===null?jl=[t]:jl.push(t)}function fZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,fR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Po(t,n)}function Po(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ra=!1;function pR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $a(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,dt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Po(t,r)}return i=n.interleaved,i===null?(e.next=e,fR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Po(t,r)}function Hg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ZI(t,r)}}function iA(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ky(t,e,r,n){var i=t.updateQueue;ra=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Gt({},h,f);break e;case 2:ra=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);gc|=o,t.lanes=o,t.memoizedState=h}}function sA(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(te(191,i));i.call(n)}}}var Gp={},$s=al(Gp),rp=al(Gp),np=al(Gp);function Pl(t){if(t===Gp)throw Error(te(174));return t}function mR(t,e){switch(Mt(np,e),Mt(rp,t),Mt($s,Gp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nj(e,t)}qt($s),Mt($s,e)}function Nd(){qt($s),qt(rp),qt(np)}function mZ(t){Pl(np.current);var e=Pl($s.current),r=Nj(e,t.type);e!==r&&(Mt(rp,t),Mt($s,r))}function gR(t){rp.current===t&&(qt($s),qt(rp))}var Ut=al(0);function Ty(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qb=[];function yR(){for(var t=0;t<Qb.length;t++)Qb[t]._workInProgressVersionPrimary=null;Qb.length=0}var Wg=Do.ReactCurrentDispatcher,Xb=Do.ReactCurrentBatchConfig,mc=0,Wt=null,jr=null,Ar=null,Oy=!1,wf=!1,ip=0,Pce=0;function an(){throw Error(te(321))}function vR(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!hs(t[r],e[r]))return!1;return!0}function bR(t,e,r,n,i,s){if(mc=s,Wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wg.current=t===null||t.memoizedState===null?$ce:Dce,t=r(n,i),wf){s=0;do{if(wf=!1,ip=0,25<=s)throw Error(te(301));s+=1,Ar=jr=null,e.updateQueue=null,Wg.current=Ace,t=r(n,i)}while(wf)}if(Wg.current=jy,e=jr!==null&&jr.next!==null,mc=0,Ar=jr=Wt=null,Oy=!1,e)throw Error(te(300));return t}function xR(){var t=ip!==0;return ip=0,t}function ws(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?Wt.memoizedState=Ar=t:Ar=Ar.next=t,Ar}function zi(){if(jr===null){var t=Wt.alternate;t=t!==null?t.memoizedState:null}else t=jr.next;var e=Ar===null?Wt.memoizedState:Ar.next;if(e!==null)Ar=e,jr=t;else{if(t===null)throw Error(te(310));jr=t,t={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Ar===null?Wt.memoizedState=Ar=t:Ar=Ar.next=t}return Ar}function sp(t,e){return typeof e=="function"?e(t):e}function Jb(t){var e=zi(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=jr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((mc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Wt.lanes|=d,gc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,hs(n,e.memoizedState)||(Hn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Wt.lanes|=s,gc|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Zb(t){var e=zi(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);hs(s,e.memoizedState)||(Hn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function gZ(){}function yZ(t,e){var r=Wt,n=zi(),i=e(),s=!hs(n.memoizedState,i);if(s&&(n.memoizedState=i,Hn=!0),n=n.queue,wR(xZ.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Ar!==null&&Ar.memoizedState.tag&1){if(r.flags|=2048,op(9,bZ.bind(null,r,n,i,e),void 0,null),Lr===null)throw Error(te(349));mc&30||vZ(r,e,i)}return i}function vZ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function bZ(t,e,r,n){e.value=r,e.getSnapshot=n,wZ(e)&&SZ(t)}function xZ(t,e,r){return r(function(){wZ(e)&&SZ(t)})}function wZ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!hs(t,r)}catch{return!0}}function SZ(t){var e=Po(t,1);e!==null&&ds(e,t,1,-1)}function oA(t){var e=ws();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:t},e.queue=t,t=t.dispatch=Mce.bind(null,Wt,t),[e.memoizedState,t]}function op(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function _Z(){return zi().memoizedState}function Kg(t,e,r,n){var i=ws();Wt.flags|=t,i.memoizedState=op(1|e,r,void 0,n===void 0?null:n)}function a0(t,e,r,n){var i=zi();n=n===void 0?null:n;var s=void 0;if(jr!==null){var o=jr.memoizedState;if(s=o.destroy,n!==null&&vR(n,o.deps)){i.memoizedState=op(e,r,s,n);return}}Wt.flags|=t,i.memoizedState=op(1|e,r,s,n)}function aA(t,e){return Kg(8390656,8,t,e)}function wR(t,e){return a0(2048,8,t,e)}function EZ(t,e){return a0(4,2,t,e)}function NZ(t,e){return a0(4,4,t,e)}function CZ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kZ(t,e,r){return r=r!=null?r.concat([t]):null,a0(4,4,CZ.bind(null,e,t),r)}function SR(){}function TZ(t,e){var r=zi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&vR(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function OZ(t,e){var r=zi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&vR(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function jZ(t,e,r){return mc&21?(hs(r,e)||(r=$J(),Wt.lanes|=r,gc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hn=!0),t.memoizedState=r)}function Ice(t,e){var r=St;St=r!==0&&4>r?r:4,t(!0);var n=Xb.transition;Xb.transition={};try{t(!1),e()}finally{St=r,Xb.transition=n}}function PZ(){return zi().memoizedState}function Rce(t,e,r){var n=Aa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},IZ(t))RZ(e,r);else if(r=fZ(t,e,r,n),r!==null){var i=Tn();ds(r,t,n,i),MZ(r,e,n)}}function Mce(t,e,r){var n=Aa(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(IZ(t))RZ(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,hs(a,o)){var l=e.interleaved;l===null?(i.next=i,fR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=fZ(t,e,i,n),r!==null&&(i=Tn(),ds(r,t,n,i),MZ(r,e,n))}}function IZ(t){var e=t.alternate;return t===Wt||e!==null&&e===Wt}function RZ(t,e){wf=Oy=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function MZ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ZI(t,r)}}var jy={readContext:Bi,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},$ce={readContext:Bi,useCallback:function(t,e){return ws().memoizedState=[t,e===void 0?null:e],t},useContext:Bi,useEffect:aA,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Kg(4194308,4,CZ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Kg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kg(4,2,t,e)},useMemo:function(t,e){var r=ws();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ws();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Rce.bind(null,Wt,t),[n.memoizedState,t]},useRef:function(t){var e=ws();return t={current:t},e.memoizedState=t},useState:oA,useDebugValue:SR,useDeferredValue:function(t){return ws().memoizedState=t},useTransition:function(){var t=oA(!1),e=t[0];return t=Ice.bind(null,t[1]),ws().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Wt,i=ws();if(Bt){if(r===void 0)throw Error(te(407));r=r()}else{if(r=e(),Lr===null)throw Error(te(349));mc&30||vZ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,aA(xZ.bind(null,n,s,t),[t]),n.flags|=2048,op(9,bZ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=ws(),e=Lr.identifierPrefix;if(Bt){var r=ho,n=uo;r=(n&~(1<<32-us(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ip++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Pce++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Dce={readContext:Bi,useCallback:TZ,useContext:Bi,useEffect:wR,useImperativeHandle:kZ,useInsertionEffect:EZ,useLayoutEffect:NZ,useMemo:OZ,useReducer:Jb,useRef:_Z,useState:function(){return Jb(sp)},useDebugValue:SR,useDeferredValue:function(t){var e=zi();return jZ(e,jr.memoizedState,t)},useTransition:function(){var t=Jb(sp)[0],e=zi().memoizedState;return[t,e]},useMutableSource:gZ,useSyncExternalStore:yZ,useId:PZ,unstable_isNewReconciler:!1},Ace={readContext:Bi,useCallback:TZ,useContext:Bi,useEffect:wR,useImperativeHandle:kZ,useInsertionEffect:EZ,useLayoutEffect:NZ,useMemo:OZ,useReducer:Zb,useRef:_Z,useState:function(){return Zb(sp)},useDebugValue:SR,useDeferredValue:function(t){var e=zi();return jr===null?e.memoizedState=t:jZ(e,jr.memoizedState,t)},useTransition:function(){var t=Zb(sp)[0],e=zi().memoizedState;return[t,e]},useMutableSource:gZ,useSyncExternalStore:yZ,useId:PZ,unstable_isNewReconciler:!1};function Ji(t,e){if(t&&t.defaultProps){e=Gt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Wj(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Gt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var l0={isMounted:function(t){return(t=t._reactInternals)?Lc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Tn(),i=Aa(t),s=go(n,i);s.payload=e,r!=null&&(s.callback=r),e=$a(t,s,i),e!==null&&(ds(e,t,i,n),Hg(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Tn(),i=Aa(t),s=go(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=$a(t,s,i),e!==null&&(ds(e,t,i,n),Hg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Tn(),n=Aa(t),i=go(r,n);i.tag=2,e!=null&&(i.callback=e),e=$a(t,i,n),e!==null&&(ds(e,t,n,r),Hg(e,t,n))}};function lA(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Jf(r,n)||!Jf(i,s):!0}function $Z(t,e,r){var n=!1,i=Za,s=e.contextType;return typeof s=="object"&&s!==null?s=Bi(s):(i=Gn(e)?fc:fn.current,n=e.contextTypes,s=(n=n!=null)?Sd(t,i):Za),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=l0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function cA(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&l0.enqueueReplaceState(e,e.state,null)}function Kj(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},pR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bi(s):(s=Gn(e)?fc:fn.current,i.context=Sd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Wj(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&l0.enqueueReplaceState(i,i.state,null),ky(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cd(t,e){try{var r="",n=e;do r+=dle(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function e1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Gj(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Fce=typeof WeakMap=="function"?WeakMap:Map;function DZ(t,e,r){r=go(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Iy||(Iy=!0,iP=n),Gj(t,e)},r}function AZ(t,e,r){r=go(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Gj(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Gj(t,e),typeof n!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function uA(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Fce;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Jce.bind(null,t,e,r),e.then(t,t))}function dA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hA(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=go(-1,1),e.tag=2,$a(r,e,1))),r.lanes|=1),t)}var qce=Do.ReactCurrentOwner,Hn=!1;function wn(t,e,r,n){e.child=t===null?hZ(e,null,r,n):Ed(e,t.child,r,n)}function fA(t,e,r,n,i){r=r.render;var s=e.ref;return Xu(e,i),n=bR(t,e,r,n,s,i),r=xR(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(Bt&&r&&aR(e),e.flags|=1,wn(t,e,n,i),e.child)}function pA(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!jR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,FZ(t,e,s,n,i)):(t=Xg(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Jf,r(o,n)&&t.ref===e.ref)return Io(t,e,i)}return e.flags|=1,t=Fa(s,n),t.ref=e.ref,t.return=e,e.child=t}function FZ(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Jf(s,n)&&t.ref===e.ref)if(Hn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Hn=!0);else return e.lanes=t.lanes,Io(t,e,i)}return Yj(t,e,r,n,i)}function qZ(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(qu,ai),ai|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mt(qu,ai),ai|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Mt(qu,ai),ai|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Mt(qu,ai),ai|=n;return wn(t,e,i,r),e.child}function LZ(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Yj(t,e,r,n,i){var s=Gn(r)?fc:fn.current;return s=Sd(e,s),Xu(e,i),r=bR(t,e,r,n,s,i),n=xR(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(Bt&&n&&aR(e),e.flags|=1,wn(t,e,r,i),e.child)}function mA(t,e,r,n,i){if(Gn(r)){var s=!0;Sy(e)}else s=!1;if(Xu(e,i),e.stateNode===null)Gg(t,e),$Z(e,r,n),Kj(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Bi(c):(c=Gn(r)?fc:fn.current,c=Sd(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&cA(e,o,n,c),ra=!1;var f=e.memoizedState;o.state=f,ky(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Kn.current||ra?(typeof d=="function"&&(Wj(e,r,d,n),l=e.memoizedState),(a=ra||lA(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,pZ(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ji(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Bi(l):(l=Gn(r)?fc:fn.current,l=Sd(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&cA(e,o,n,l),ra=!1,f=e.memoizedState,o.state=f,ky(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Kn.current||ra?(typeof p=="function"&&(Wj(e,r,p,n),m=e.memoizedState),(c=ra||lA(e,r,c,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Qj(t,e,r,n,s,i)}function Qj(t,e,r,n,i,s){LZ(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&eA(e,r,!1),Io(t,e,s);n=e.stateNode,qce.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ed(e,t.child,null,s),e.child=Ed(e,null,a,s)):wn(t,e,a,s),e.memoizedState=n.state,i&&eA(e,r,!0),e.child}function BZ(t){var e=t.stateNode;e.pendingContext?ZD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ZD(t,e.context,!1),mR(t,e.containerInfo)}function gA(t,e,r,n,i){return _d(),cR(i),e.flags|=256,wn(t,e,r,n),e.child}var Xj={dehydrated:null,treeContext:null,retryLane:0};function Jj(t){return{baseLanes:t,cachePool:null,transitions:null}}function zZ(t,e,r){var n=e.pendingProps,i=Ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Mt(Ut,i&1),t===null)return Uj(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=d0(o,n,0,null),t=Zl(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Jj(r),e.memoizedState=Xj,t):_R(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Lce(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Fa(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fa(a,s):(s=Zl(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Jj(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Xj,n}return s=t.child,t=s.sibling,n=Fa(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function _R(t,e){return e=d0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ug(t,e,r,n){return n!==null&&cR(n),Ed(e,t.child,null,r),t=_R(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lce(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=e1(Error(te(422))),ug(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=d0({mode:"visible",children:n.children},i,0,null),s=Zl(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Ed(e,t.child,null,o),e.child.memoizedState=Jj(o),e.memoizedState=Xj,s);if(!(e.mode&1))return ug(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(te(419)),n=e1(s,n,void 0),ug(t,e,o,n)}if(a=(o&t.childLanes)!==0,Hn||a){if(n=Lr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Po(t,i),ds(n,t,i,-1))}return OR(),n=e1(Error(te(421))),ug(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Zce.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,hi=Ma(i.nextSibling),fi=e,Bt=!0,rs=null,t!==null&&(Pi[Ii++]=uo,Pi[Ii++]=ho,Pi[Ii++]=pc,uo=t.id,ho=t.overflow,pc=e),e=_R(e,n.children),e.flags|=4096,e)}function yA(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Hj(t.return,e,r)}function t1(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function VZ(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(wn(t,e,n.children,r),n=Ut.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yA(t,r,e);else if(t.tag===19)yA(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Mt(Ut,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Ty(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),t1(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ty(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}t1(e,!0,r,null,s);break;case"together":t1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Io(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),gc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,r=Fa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Fa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Bce(t,e,r){switch(e.tag){case 3:BZ(e),_d();break;case 5:mZ(e);break;case 1:Gn(e.type)&&Sy(e);break;case 4:mR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Mt(Ny,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Mt(Ut,Ut.current&1),e.flags|=128,null):r&e.child.childLanes?zZ(t,e,r):(Mt(Ut,Ut.current&1),t=Io(t,e,r),t!==null?t.sibling:null);Mt(Ut,Ut.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return VZ(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mt(Ut,Ut.current),n)break;return null;case 22:case 23:return e.lanes=0,qZ(t,e,r)}return Io(t,e,r)}var UZ,Zj,HZ,WZ;UZ=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Zj=function(){};HZ=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Pl($s.current);var s=null;switch(r){case"input":i=wj(t,i),n=wj(t,n),s=[];break;case"select":i=Gt({},i,{value:void 0}),n=Gt({},n,{value:void 0}),s=[];break;case"textarea":i=Ej(t,i),n=Ej(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=xy)}Cj(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&At("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};WZ=function(t,e,r,n){r!==n&&(e.flags|=4)};function Uh(t,e){if(!Bt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function zce(t,e,r){var n=e.pendingProps;switch(lR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Gn(e.type)&&wy(),ln(e),null;case 3:return n=e.stateNode,Nd(),qt(Kn),qt(fn),yR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(lg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rs!==null&&(aP(rs),rs=null))),Zj(t,e),ln(e),null;case 5:gR(e);var i=Pl(np.current);if(r=e.type,t!==null&&e.stateNode!=null)HZ(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(te(166));return ln(e),null}if(t=Pl($s.current),lg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Os]=e,n[tp]=s,t=(e.mode&1)!==0,r){case"dialog":At("cancel",n),At("close",n);break;case"iframe":case"object":case"embed":At("load",n);break;case"video":case"audio":for(i=0;i<lf.length;i++)At(lf[i],n);break;case"source":At("error",n);break;case"img":case"image":case"link":At("error",n),At("load",n);break;case"details":At("toggle",n);break;case"input":CD(n,s),At("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},At("invalid",n);break;case"textarea":TD(n,s),At("invalid",n)}Cj(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&ag(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ag(n.textContent,a,t),i=["children",""+a]):Hf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&At("scroll",n)}switch(r){case"input":Zm(n),kD(n,s,!0);break;case"textarea":Zm(n),OD(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=xy)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xJ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Os]=e,t[tp]=n,UZ(t,e,!1,!1),e.stateNode=t;e:{switch(o=kj(r,n),r){case"dialog":At("cancel",t),At("close",t),i=n;break;case"iframe":case"object":case"embed":At("load",t),i=n;break;case"video":case"audio":for(i=0;i<lf.length;i++)At(lf[i],t);i=n;break;case"source":At("error",t),i=n;break;case"img":case"image":case"link":At("error",t),At("load",t),i=n;break;case"details":At("toggle",t),i=n;break;case"input":CD(t,n),i=wj(t,n),At("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Gt({},n,{value:void 0}),At("invalid",t);break;case"textarea":TD(t,n),i=Ej(t,n),At("invalid",t);break;default:i=n}Cj(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_J(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wJ(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Wf(t,l):typeof l=="number"&&Wf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&At("scroll",t):l!=null&&KI(t,s,l,o))}switch(r){case"input":Zm(t),kD(t,n,!1);break;case"textarea":Zm(t),OD(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ja(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Ku(t,!!n.multiple,s,!1):n.defaultValue!=null&&Ku(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)WZ(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(te(166));if(r=Pl(np.current),Pl($s.current),lg(e)){if(n=e.stateNode,r=e.memoizedProps,n[Os]=e,(s=n.nodeValue!==r)&&(t=fi,t!==null))switch(t.tag){case 3:ag(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ag(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Os]=e,e.stateNode=n}return ln(e),null;case 13:if(qt(Ut),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bt&&hi!==null&&e.mode&1&&!(e.flags&128))uZ(),_d(),e.flags|=98560,s=!1;else if(s=lg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(te(317));s[Os]=e}else _d(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),s=!1}else rs!==null&&(aP(rs),rs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ut.current&1?Pr===0&&(Pr=3):OR())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return Nd(),Zj(t,e),t===null&&Zf(e.stateNode.containerInfo),ln(e),null;case 10:return hR(e.type._context),ln(e),null;case 17:return Gn(e.type)&&wy(),ln(e),null;case 19:if(qt(Ut),s=e.memoizedState,s===null)return ln(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Uh(s,!1);else{if(Pr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ty(t),o!==null){for(e.flags|=128,Uh(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Mt(Ut,Ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&dr()>kd&&(e.flags|=128,n=!0,Uh(s,!1),e.lanes=4194304)}else{if(!n)if(t=Ty(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Uh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Bt)return ln(e),null}else 2*dr()-s.renderingStartTime>kd&&r!==1073741824&&(e.flags|=128,n=!0,Uh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dr(),e.sibling=null,r=Ut.current,Mt(Ut,n?r&1|2:r&1),e):(ln(e),null);case 22:case 23:return TR(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ai&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function Vce(t,e){switch(lR(e),e.tag){case 1:return Gn(e.type)&&wy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Nd(),qt(Kn),qt(fn),yR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gR(e),null;case 13:if(qt(Ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));_d()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qt(Ut),null;case 4:return Nd(),null;case 10:return hR(e.type._context),null;case 22:case 23:return TR(),null;case 24:return null;default:return null}}var dg=!1,dn=!1,Uce=typeof WeakSet=="function"?WeakSet:Set,be=null;function Fu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ir(t,e,n)}else r.current=null}function eP(t,e,r){try{r()}catch(n){ir(t,e,n)}}var vA=!1;function Hce(t,e){if(Aj=yy,t=XJ(),oR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fj={focusedElem:t,selectionRange:r},yy=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,b=m.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ji(e.type,g),b);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){ir(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return m=vA,vA=!1,m}function Sf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&eP(e,r,s)}i=i.next}while(i!==n)}}function c0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function tP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function KZ(t){var e=t.alternate;e!==null&&(t.alternate=null,KZ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Os],delete e[tp],delete e[Bj],delete e[kce],delete e[Tce])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GZ(t){return t.tag===5||t.tag===3||t.tag===4}function bA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=xy));else if(n!==4&&(t=t.child,t!==null))for(rP(t,e,r),t=t.sibling;t!==null;)rP(t,e,r),t=t.sibling}function nP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(nP(t,e,r),t=t.sibling;t!==null;)nP(t,e,r),t=t.sibling}var Xr=null,ts=!1;function Go(t,e,r){for(r=r.child;r!==null;)YZ(t,e,r),r=r.sibling}function YZ(t,e,r){if(Ms&&typeof Ms.onCommitFiberUnmount=="function")try{Ms.onCommitFiberUnmount(t0,r)}catch{}switch(r.tag){case 5:dn||Fu(r,e);case 6:var n=Xr,i=ts;Xr=null,Go(t,e,r),Xr=n,ts=i,Xr!==null&&(ts?(t=Xr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Xr.removeChild(r.stateNode));break;case 18:Xr!==null&&(ts?(t=Xr,r=r.stateNode,t.nodeType===8?Gb(t.parentNode,r):t.nodeType===1&&Gb(t,r),Qf(t)):Gb(Xr,r.stateNode));break;case 4:n=Xr,i=ts,Xr=r.stateNode.containerInfo,ts=!0,Go(t,e,r),Xr=n,ts=i;break;case 0:case 11:case 14:case 15:if(!dn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&eP(r,e,o),i=i.next}while(i!==n)}Go(t,e,r);break;case 1:if(!dn&&(Fu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ir(r,e,a)}Go(t,e,r);break;case 21:Go(t,e,r);break;case 22:r.mode&1?(dn=(n=dn)||r.memoizedState!==null,Go(t,e,r),dn=n):Go(t,e,r);break;default:Go(t,e,r)}}function xA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Uce),e.forEach(function(n){var i=eue.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Qi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xr=a.stateNode,ts=!1;break e;case 3:Xr=a.stateNode.containerInfo,ts=!0;break e;case 4:Xr=a.stateNode.containerInfo,ts=!0;break e}a=a.return}if(Xr===null)throw Error(te(160));YZ(s,o,i),Xr=null,ts=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ir(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QZ(e,t),e=e.sibling}function QZ(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qi(e,t),bs(t),n&4){try{Sf(3,t,t.return),c0(3,t)}catch(g){ir(t,t.return,g)}try{Sf(5,t,t.return)}catch(g){ir(t,t.return,g)}}break;case 1:Qi(e,t),bs(t),n&512&&r!==null&&Fu(r,r.return);break;case 5:if(Qi(e,t),bs(t),n&512&&r!==null&&Fu(r,r.return),t.flags&32){var i=t.stateNode;try{Wf(i,"")}catch(g){ir(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&vJ(i,s),kj(a,o);var c=kj(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?_J(i,h):d==="dangerouslySetInnerHTML"?wJ(i,h):d==="children"?Wf(i,h):KI(i,d,h,c)}switch(a){case"input":Sj(i,s);break;case"textarea":bJ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Ku(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ku(i,!!s.multiple,s.defaultValue,!0):Ku(i,!!s.multiple,s.multiple?[]:"",!1))}i[tp]=s}catch(g){ir(t,t.return,g)}}break;case 6:if(Qi(e,t),bs(t),n&4){if(t.stateNode===null)throw Error(te(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){ir(t,t.return,g)}}break;case 3:if(Qi(e,t),bs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qf(e.containerInfo)}catch(g){ir(t,t.return,g)}break;case 4:Qi(e,t),bs(t);break;case 13:Qi(e,t),bs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(CR=dr())),n&4&&xA(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(dn=(c=dn)||d,Qi(e,t),dn=c):Qi(e,t),bs(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(h=be=d;be!==null;){switch(f=be,p=f.child,f.tag){case 0:case 11:case 14:case 15:Sf(4,f,f.return);break;case 1:Fu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){ir(n,r,g)}}break;case 5:Fu(f,f.return);break;case 22:if(f.memoizedState!==null){SA(h);continue}}p!==null?(p.return=f,be=p):SA(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SJ("display",o))}catch(g){ir(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){ir(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Qi(e,t),bs(t),n&4&&xA(t);break;case 21:break;default:Qi(e,t),bs(t)}}function bs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(GZ(r)){var n=r;break e}r=r.return}throw Error(te(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Wf(i,""),n.flags&=-33);var s=bA(t);nP(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=bA(t);rP(t,a,o);break;default:throw Error(te(161))}}catch(l){ir(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wce(t,e,r){be=t,XZ(t)}function XZ(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var i=be,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||dg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||dn;a=dg;var c=dn;if(dg=o,(dn=l)&&!c)for(be=i;be!==null;)o=be,l=o.child,o.tag===22&&o.memoizedState!==null?_A(i):l!==null?(l.return=o,be=l):_A(i);for(;s!==null;)be=s,XZ(s),s=s.sibling;be=i,dg=a,dn=c}wA(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,be=s):wA(t)}}function wA(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||c0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!dn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Ji(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sA(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}sA(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Qf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}dn||e.flags&512&&tP(e)}catch(f){ir(e,e.return,f)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function SA(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function _A(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{c0(4,e)}catch(l){ir(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){ir(e,i,l)}}var s=e.return;try{tP(e)}catch(l){ir(e,s,l)}break;case 5:var o=e.return;try{tP(e)}catch(l){ir(e,o,l)}}}catch(l){ir(e,e.return,l)}if(e===t){be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,be=a;break}be=e.return}}var Kce=Math.ceil,Py=Do.ReactCurrentDispatcher,ER=Do.ReactCurrentOwner,Di=Do.ReactCurrentBatchConfig,dt=0,Lr=null,yr=null,tn=0,ai=0,qu=al(0),Pr=0,ap=null,gc=0,u0=0,NR=0,_f=null,zn=null,CR=0,kd=1/0,ro=null,Iy=!1,iP=null,Da=null,hg=!1,Na=null,Ry=0,Ef=0,sP=null,Yg=-1,Qg=0;function Tn(){return dt&6?dr():Yg!==-1?Yg:Yg=dr()}function Aa(t){return t.mode&1?dt&2&&tn!==0?tn&-tn:jce.transition!==null?(Qg===0&&(Qg=$J()),Qg):(t=St,t!==0||(t=window.event,t=t===void 0?16:zJ(t.type)),t):1}function ds(t,e,r,n){if(50<Ef)throw Ef=0,sP=null,Error(te(185));Hp(t,r,n),(!(dt&2)||t!==Lr)&&(t===Lr&&(!(dt&2)&&(u0|=r),Pr===4&&ua(t,tn)),Yn(t,n),r===1&&dt===0&&!(e.mode&1)&&(kd=dr()+500,o0&&ll()))}function Yn(t,e){var r=t.callbackNode;jle(t,e);var n=gy(t,t===Lr?tn:0);if(n===0)r!==null&&ID(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&ID(r),e===1)t.tag===0?Oce(EA.bind(null,t)):aZ(EA.bind(null,t)),Nce(function(){!(dt&6)&&ll()}),r=null;else{switch(DJ(n)){case 1:r=JI;break;case 4:r=RJ;break;case 16:r=my;break;case 536870912:r=MJ;break;default:r=my}r=see(r,JZ.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function JZ(t,e){if(Yg=-1,Qg=0,dt&6)throw Error(te(327));var r=t.callbackNode;if(Ju()&&t.callbackNode!==r)return null;var n=gy(t,t===Lr?tn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=My(t,n);else{e=n;var i=dt;dt|=2;var s=eee();(Lr!==t||tn!==e)&&(ro=null,kd=dr()+500,Jl(t,e));do try{Qce();break}catch(a){ZZ(t,a)}while(!0);dR(),Py.current=s,dt=i,yr!==null?e=0:(Lr=null,tn=0,e=Pr)}if(e!==0){if(e===2&&(i=Ij(t),i!==0&&(n=i,e=oP(t,i))),e===1)throw r=ap,Jl(t,0),ua(t,n),Yn(t,dr()),r;if(e===6)ua(t,n);else{if(i=t.current.alternate,!(n&30)&&!Gce(i)&&(e=My(t,n),e===2&&(s=Ij(t),s!==0&&(n=s,e=oP(t,s))),e===1))throw r=ap,Jl(t,0),ua(t,n),Yn(t,dr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(te(345));case 2:Cl(t,zn,ro);break;case 3:if(ua(t,n),(n&130023424)===n&&(e=CR+500-dr(),10<e)){if(gy(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Tn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lj(Cl.bind(null,t,zn,ro),e);break}Cl(t,zn,ro);break;case 4:if(ua(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-us(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=dr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Kce(n/1960))-n,10<n){t.timeoutHandle=Lj(Cl.bind(null,t,zn,ro),n);break}Cl(t,zn,ro);break;case 5:Cl(t,zn,ro);break;default:throw Error(te(329))}}}return Yn(t,dr()),t.callbackNode===r?JZ.bind(null,t):null}function oP(t,e){var r=_f;return t.current.memoizedState.isDehydrated&&(Jl(t,e).flags|=256),t=My(t,e),t!==2&&(e=zn,zn=r,e!==null&&aP(e)),t}function aP(t){zn===null?zn=t:zn.push.apply(zn,t)}function Gce(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!hs(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ua(t,e){for(e&=~NR,e&=~u0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-us(e),n=1<<r;t[r]=-1,e&=~n}}function EA(t){if(dt&6)throw Error(te(327));Ju();var e=gy(t,0);if(!(e&1))return Yn(t,dr()),null;var r=My(t,e);if(t.tag!==0&&r===2){var n=Ij(t);n!==0&&(e=n,r=oP(t,n))}if(r===1)throw r=ap,Jl(t,0),ua(t,e),Yn(t,dr()),r;if(r===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cl(t,zn,ro),Yn(t,dr()),null}function kR(t,e){var r=dt;dt|=1;try{return t(e)}finally{dt=r,dt===0&&(kd=dr()+500,o0&&ll())}}function yc(t){Na!==null&&Na.tag===0&&!(dt&6)&&Ju();var e=dt;dt|=1;var r=Di.transition,n=St;try{if(Di.transition=null,St=1,t)return t()}finally{St=n,Di.transition=r,dt=e,!(dt&6)&&ll()}}function TR(){ai=qu.current,qt(qu)}function Jl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Ece(r)),yr!==null)for(r=yr.return;r!==null;){var n=r;switch(lR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wy();break;case 3:Nd(),qt(Kn),qt(fn),yR();break;case 5:gR(n);break;case 4:Nd();break;case 13:qt(Ut);break;case 19:qt(Ut);break;case 10:hR(n.type._context);break;case 22:case 23:TR()}r=r.return}if(Lr=t,yr=t=Fa(t.current,null),tn=ai=e,Pr=0,ap=null,NR=u0=gc=0,zn=_f=null,jl!==null){for(e=0;e<jl.length;e++)if(r=jl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}jl=null}return t}function ZZ(t,e){do{var r=yr;try{if(dR(),Wg.current=jy,Oy){for(var n=Wt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Oy=!1}if(mc=0,Ar=jr=Wt=null,wf=!1,ip=0,ER.current=null,r===null||r.return===null){Pr=1,ap=e,yr=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=dA(o);if(p!==null){p.flags&=-257,hA(p,o,a,s,e),p.mode&1&&uA(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){uA(s,c,e),OR();break e}l=Error(te(426))}}else if(Bt&&a.mode&1){var b=dA(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),hA(b,o,a,s,e),cR(Cd(l,a));break e}}s=l=Cd(l,a),Pr!==4&&(Pr=2),_f===null?_f=[s]:_f.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=DZ(s,l,e);iA(s,y);break e;case 1:a=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Da===null||!Da.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=AZ(s,a,e);iA(s,x);break e}}s=s.return}while(s!==null)}ree(r)}catch(S){e=S,yr===r&&r!==null&&(yr=r=r.return);continue}break}while(!0)}function eee(){var t=Py.current;return Py.current=jy,t===null?jy:t}function OR(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Lr===null||!(gc&268435455)&&!(u0&268435455)||ua(Lr,tn)}function My(t,e){var r=dt;dt|=2;var n=eee();(Lr!==t||tn!==e)&&(ro=null,Jl(t,e));do try{Yce();break}catch(i){ZZ(t,i)}while(!0);if(dR(),dt=r,Py.current=n,yr!==null)throw Error(te(261));return Lr=null,tn=0,Pr}function Yce(){for(;yr!==null;)tee(yr)}function Qce(){for(;yr!==null&&!wle();)tee(yr)}function tee(t){var e=iee(t.alternate,t,ai);t.memoizedProps=t.pendingProps,e===null?ree(t):yr=e,ER.current=null}function ree(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Vce(r,e),r!==null){r.flags&=32767,yr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pr=6,yr=null;return}}else if(r=zce(r,e,ai),r!==null){yr=r;return}if(e=e.sibling,e!==null){yr=e;return}yr=e=t}while(e!==null);Pr===0&&(Pr=5)}function Cl(t,e,r){var n=St,i=Di.transition;try{Di.transition=null,St=1,Xce(t,e,r,n)}finally{Di.transition=i,St=n}return null}function Xce(t,e,r,n){do Ju();while(Na!==null);if(dt&6)throw Error(te(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Ple(t,s),t===Lr&&(yr=Lr=null,tn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||hg||(hg=!0,see(my,function(){return Ju(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Di.transition,Di.transition=null;var o=St;St=1;var a=dt;dt|=4,ER.current=null,Hce(t,r),QZ(r,t),yce(Fj),yy=!!Aj,Fj=Aj=null,t.current=r,Wce(r),Sle(),dt=a,St=o,Di.transition=s}else t.current=r;if(hg&&(hg=!1,Na=t,Ry=i),s=t.pendingLanes,s===0&&(Da=null),Nle(r.stateNode),Yn(t,dr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Iy)throw Iy=!1,t=iP,iP=null,t;return Ry&1&&t.tag!==0&&Ju(),s=t.pendingLanes,s&1?t===sP?Ef++:(Ef=0,sP=t):Ef=0,ll(),null}function Ju(){if(Na!==null){var t=DJ(Ry),e=Di.transition,r=St;try{if(Di.transition=null,St=16>t?16:t,Na===null)var n=!1;else{if(t=Na,Na=null,Ry=0,dt&6)throw Error(te(331));var i=dt;for(dt|=4,be=t.current;be!==null;){var s=be,o=s.child;if(be.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(be=c;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:Sf(8,d,s)}var h=d.child;if(h!==null)h.return=d,be=h;else for(;be!==null;){d=be;var f=d.sibling,p=d.return;if(KZ(d),d===c){be=null;break}if(f!==null){f.return=p,be=f;break}be=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}be=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,be=o;else e:for(;be!==null;){if(s=be,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,be=y;break e}be=s.return}}var v=t.current;for(be=v;be!==null;){o=be;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,be=w;else e:for(o=v;be!==null;){if(a=be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:c0(9,a)}}catch(S){ir(a,a.return,S)}if(a===o){be=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,be=x;break e}be=a.return}}if(dt=i,ll(),Ms&&typeof Ms.onPostCommitFiberRoot=="function")try{Ms.onPostCommitFiberRoot(t0,t)}catch{}n=!0}return n}finally{St=r,Di.transition=e}}return!1}function NA(t,e,r){e=Cd(r,e),e=DZ(t,e,1),t=$a(t,e,1),e=Tn(),t!==null&&(Hp(t,1,e),Yn(t,e))}function ir(t,e,r){if(t.tag===3)NA(t,t,r);else for(;e!==null;){if(e.tag===3){NA(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Da===null||!Da.has(n))){t=Cd(r,t),t=AZ(e,t,1),e=$a(e,t,1),t=Tn(),e!==null&&(Hp(e,1,t),Yn(e,t));break}}e=e.return}}function Jce(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&r,Lr===t&&(tn&r)===r&&(Pr===4||Pr===3&&(tn&130023424)===tn&&500>dr()-CR?Jl(t,0):NR|=r),Yn(t,e)}function nee(t,e){e===0&&(t.mode&1?(e=rg,rg<<=1,!(rg&130023424)&&(rg=4194304)):e=1);var r=Tn();t=Po(t,e),t!==null&&(Hp(t,e,r),Yn(t,r))}function Zce(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),nee(t,r)}function eue(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(te(314))}n!==null&&n.delete(e),nee(t,r)}var iee;iee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kn.current)Hn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Hn=!1,Bce(t,e,r);Hn=!!(t.flags&131072)}else Hn=!1,Bt&&e.flags&1048576&&lZ(e,Ey,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Gg(t,e),t=e.pendingProps;var i=Sd(e,fn.current);Xu(e,r),i=bR(null,e,n,t,i,r);var s=xR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gn(n)?(s=!0,Sy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pR(e),i.updater=l0,e.stateNode=i,i._reactInternals=e,Kj(e,n,t,r),e=Qj(null,e,n,!0,s,r)):(e.tag=0,Bt&&s&&aR(e),wn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Gg(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=rue(n),t=Ji(n,t),i){case 0:e=Yj(null,e,n,t,r);break e;case 1:e=mA(null,e,n,t,r);break e;case 11:e=fA(null,e,n,t,r);break e;case 14:e=pA(null,e,n,Ji(n.type,t),r);break e}throw Error(te(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),Yj(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),mA(t,e,n,i,r);case 3:e:{if(BZ(e),t===null)throw Error(te(387));n=e.pendingProps,s=e.memoizedState,i=s.element,pZ(t,e),ky(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Cd(Error(te(423)),e),e=gA(t,e,n,r,i);break e}else if(n!==i){i=Cd(Error(te(424)),e),e=gA(t,e,n,r,i);break e}else for(hi=Ma(e.stateNode.containerInfo.firstChild),fi=e,Bt=!0,rs=null,r=hZ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_d(),n===i){e=Io(t,e,r);break e}wn(t,e,n,r)}e=e.child}return e;case 5:return mZ(e),t===null&&Uj(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,qj(n,i)?o=null:s!==null&&qj(n,s)&&(e.flags|=32),LZ(t,e),wn(t,e,o,r),e.child;case 6:return t===null&&Uj(e),null;case 13:return zZ(t,e,r);case 4:return mR(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ed(e,null,n,r):wn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),fA(t,e,n,i,r);case 7:return wn(t,e,e.pendingProps,r),e.child;case 8:return wn(t,e,e.pendingProps.children,r),e.child;case 12:return wn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Mt(Ny,n._currentValue),n._currentValue=o,s!==null)if(hs(s.value,o)){if(s.children===i.children&&!Kn.current){e=Io(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=go(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Hj(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(te(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Hj(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Xu(e,r),i=Bi(i),n=n(i),e.flags|=1,wn(t,e,n,r),e.child;case 14:return n=e.type,i=Ji(n,e.pendingProps),i=Ji(n.type,i),pA(t,e,n,i,r);case 15:return FZ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),Gg(t,e),e.tag=1,Gn(n)?(t=!0,Sy(e)):t=!1,Xu(e,r),$Z(e,n,i),Kj(e,n,i,r),Qj(null,e,n,!0,t,r);case 19:return VZ(t,e,r);case 22:return qZ(t,e,r)}throw Error(te(156,e.tag))};function see(t,e){return IJ(t,e)}function tue(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(t,e,r,n){return new tue(t,e,r,n)}function jR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rue(t){if(typeof t=="function")return jR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===YI)return 11;if(t===QI)return 14}return 2}function Fa(t,e){var r=t.alternate;return r===null?(r=$i(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Xg(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")jR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ou:return Zl(r.children,i,s,e);case GI:o=8,i|=8;break;case yj:return t=$i(12,r,e,i|2),t.elementType=yj,t.lanes=s,t;case vj:return t=$i(13,r,e,i),t.elementType=vj,t.lanes=s,t;case bj:return t=$i(19,r,e,i),t.elementType=bj,t.lanes=s,t;case mJ:return d0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fJ:o=10;break e;case pJ:o=9;break e;case YI:o=11;break e;case QI:o=14;break e;case ta:o=16,n=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=$i(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Zl(t,e,r,n){return t=$i(7,t,n,e),t.lanes=r,t}function d0(t,e,r,n){return t=$i(22,t,n,e),t.elementType=mJ,t.lanes=r,t.stateNode={isHidden:!1},t}function r1(t,e,r){return t=$i(6,t,null,e),t.lanes=r,t}function n1(t,e,r){return e=$i(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nue(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ab(0),this.expirationTimes=Ab(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ab(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function PR(t,e,r,n,i,s,o,a,l){return t=new nue(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$i(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pR(s),t}function iue(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function oee(t){if(!t)return Za;t=t._reactInternals;e:{if(Lc(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var r=t.type;if(Gn(r))return oZ(t,r,e)}return e}function aee(t,e,r,n,i,s,o,a,l){return t=PR(r,n,!0,t,i,s,o,a,l),t.context=oee(null),r=t.current,n=Tn(),i=Aa(r),s=go(n,i),s.callback=e??null,$a(r,s,i),t.current.lanes=i,Hp(t,i,n),Yn(t,n),t}function h0(t,e,r,n){var i=e.current,s=Tn(),o=Aa(i);return r=oee(r),e.context===null?e.context=r:e.pendingContext=r,e=go(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=$a(i,e,o),t!==null&&(ds(t,i,o,s),Hg(t,i,o)),o}function $y(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function CA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function IR(t,e){CA(t,e),(t=t.alternate)&&CA(t,e)}function sue(){return null}var lee=typeof reportError=="function"?reportError:function(t){console.error(t)};function RR(t){this._internalRoot=t}f0.prototype.render=RR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));h0(t,e,null,null)};f0.prototype.unmount=RR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yc(function(){h0(null,t,null,null)}),e[jo]=null}};function f0(t){this._internalRoot=t}f0.prototype.unstable_scheduleHydration=function(t){if(t){var e=qJ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ca.length&&e!==0&&e<ca[r].priority;r++);ca.splice(r,0,t),r===0&&BJ(t)}};function MR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function p0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kA(){}function oue(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=$y(o);s.call(c)}}var o=aee(e,n,t,0,null,!1,!1,"",kA);return t._reactRootContainer=o,t[jo]=o.current,Zf(t.nodeType===8?t.parentNode:t),yc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=$y(l);a.call(c)}}var l=PR(t,0,!1,null,null,!1,!1,"",kA);return t._reactRootContainer=l,t[jo]=l.current,Zf(t.nodeType===8?t.parentNode:t),yc(function(){h0(e,l,r,n)}),l}function m0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$y(o);a.call(l)}}h0(e,o,t,i)}else o=oue(r,e,t,i,n);return $y(o)}AJ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=af(e.pendingLanes);r!==0&&(ZI(e,r|1),Yn(e,dr()),!(dt&6)&&(kd=dr()+500,ll()))}break;case 13:yc(function(){var n=Po(t,1);if(n!==null){var i=Tn();ds(n,t,1,i)}}),IR(t,1)}};eR=function(t){if(t.tag===13){var e=Po(t,134217728);if(e!==null){var r=Tn();ds(e,t,134217728,r)}IR(t,134217728)}};FJ=function(t){if(t.tag===13){var e=Aa(t),r=Po(t,e);if(r!==null){var n=Tn();ds(r,t,e,n)}IR(t,e)}};qJ=function(){return St};LJ=function(t,e){var r=St;try{return St=t,e()}finally{St=r}};Oj=function(t,e,r){switch(e){case"input":if(Sj(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=s0(n);if(!i)throw Error(te(90));yJ(n),Sj(n,i)}}}break;case"textarea":bJ(t,r);break;case"select":e=r.value,e!=null&&Ku(t,!!r.multiple,e,!1)}};CJ=kR;kJ=yc;var aue={usingClientEntryPoint:!1,Events:[Kp,Ru,s0,EJ,NJ,kR]},Hh={findFiberByHostInstance:Ol,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lue={bundleType:Hh.bundleType,version:Hh.version,rendererPackageName:Hh.rendererPackageName,rendererConfig:Hh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Do.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jJ(t),t===null?null:t.stateNode},findFiberByHostInstance:Hh.findFiberByHostInstance||sue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fg.isDisabled&&fg.supportsFiber)try{t0=fg.inject(lue),Ms=fg}catch{}}gi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aue;gi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!MR(e))throw Error(te(200));return iue(t,e,null,r)};gi.createRoot=function(t,e){if(!MR(t))throw Error(te(299));var r=!1,n="",i=lee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=PR(t,1,!1,null,null,r,!1,n,i),t[jo]=e.current,Zf(t.nodeType===8?t.parentNode:t),new RR(e)};gi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=jJ(e),t=t===null?null:t.stateNode,t};gi.flushSync=function(t){return yc(t)};gi.hydrate=function(t,e,r){if(!p0(e))throw Error(te(200));return m0(null,t,e,!0,r)};gi.hydrateRoot=function(t,e,r){if(!MR(t))throw Error(te(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=lee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=aee(e,null,t,1,r??null,i,!1,s,o),t[jo]=e.current,Zf(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new f0(e)};gi.render=function(t,e,r){if(!p0(e))throw Error(te(200));return m0(null,t,e,!1,r)};gi.unmountComponentAtNode=function(t){if(!p0(t))throw Error(te(40));return t._reactRootContainer?(yc(function(){m0(null,null,t,!1,function(){t._reactRootContainer=null,t[jo]=null})}),!0):!1};gi.unstable_batchedUpdates=kR;gi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!p0(r))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return m0(t,e,r,!1,n)};gi.version="18.3.1-next-f1338f8080-20240426";function cee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cee)}catch(t){console.error(t)}}cee(),cJ.exports=gi;var uee=cJ.exports;const cue=XX(uee);var TA=uee;mj.createRoot=TA.createRoot,mj.hydrateRoot=TA.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lp.apply(this,arguments)}var Ca;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ca||(Ca={}));const OA="popstate";function uue(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return lP("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Dy(i)}return hue(e,r,null,t)}function Kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $R(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function due(){return Math.random().toString(36).substr(2,8)}function jA(t,e){return{usr:t.state,key:t.key,idx:e}}function lP(t,e,r,n){return r===void 0&&(r=null),lp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zd(e):e,{state:r,key:e&&e.key||n||due()})}function Dy(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Zd(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function hue(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Ca.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(lp({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ca.Pop;let b=d(),y=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:y})}function f(b,y){a=Ca.Push;let v=lP(g.location,b,y);c=d()+1;let w=jA(v,c),x=g.createHref(v);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(b,y){a=Ca.Replace;let v=lP(g.location,b,y);c=d();let w=jA(v,c),x=g.createHref(v);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(b){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof b=="string"?b:Dy(b);return v=v.replace(/ $/,"%20"),Kt(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(OA,h),l=b,()=>{i.removeEventListener(OA,h),l=null}},createHref(b){return e(i,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return o.go(b)}};return g}var PA;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(PA||(PA={}));function fue(t,e,r){return r===void 0&&(r="/"),pue(t,e,r)}function pue(t,e,r,n){let i=typeof e=="string"?Zd(e):e,s=Td(i.pathname||"/",r);if(s==null)return null;let o=dee(t);mue(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Cue(s);a=Eue(o[l],c)}return a}function dee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Kt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=qa([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),dee(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Sue(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of hee(s.path))i(s,o,l)}),e}function hee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=hee(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function mue(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:_ue(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const gue=/^:[\w-]+$/,yue=3,vue=2,bue=1,xue=10,wue=-2,IA=t=>t==="*";function Sue(t,e){let r=t.split("/"),n=r.length;return r.some(IA)&&(n+=wue),e&&(n+=vue),r.filter(i=>!IA(i)).reduce((i,s)=>i+(gue.test(s)?yue:s===""?bue:xue),n)}function _ue(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Eue(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=cP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:qa([s,h.pathname]),pathnameBase:Pue(qa([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=qa([s,h.pathnameBase]))}return o}function cP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Nue(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Nue(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),$R(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Cue(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $R(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Td(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const kue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tue=t=>kue.test(t);function Oue(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Zd(t):t,s;if(r)if(Tue(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),$R(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=RA(r.substring(1),"/"):s=RA(r,e)}else s=e;return{pathname:s,search:Iue(n),hash:Rue(i)}}function RA(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function i1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jue(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function DR(t,e){let r=jue(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function AR(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Zd(t):(i=lp({},t),Kt(!i.pathname||!i.pathname.includes("?"),i1("?","pathname","search",i)),Kt(!i.pathname||!i.pathname.includes("#"),i1("#","pathname","hash",i)),Kt(!i.search||!i.search.includes("#"),i1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Oue(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const qa=t=>t.join("/").replace(/\/\/+/g,"/"),Pue=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Iue=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Rue=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Mue(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fee=["post","put","patch","delete"];new Set(fee);const $ue=["get",...fee];new Set($ue);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cp.apply(this,arguments)}const g0=T.createContext(null),pee=T.createContext(null),Ao=T.createContext(null),y0=T.createContext(null),Fo=T.createContext({outlet:null,matches:[],isDataRoute:!1}),mee=T.createContext(null);function Due(t,e){let{relative:r}=e===void 0?{}:e;eh()||Kt(!1);let{basename:n,navigator:i}=T.useContext(Ao),{hash:s,pathname:o,search:a}=v0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:qa([n,o])),i.createHref({pathname:l,search:a,hash:s})}function eh(){return T.useContext(y0)!=null}function qo(){return eh()||Kt(!1),T.useContext(y0).location}function gee(t){T.useContext(Ao).static||T.useLayoutEffect(t)}function gn(){let{isDataRoute:t}=T.useContext(Fo);return t?Yue():Aue()}function Aue(){eh()||Kt(!1);let t=T.useContext(g0),{basename:e,future:r,navigator:n}=T.useContext(Ao),{matches:i}=T.useContext(Fo),{pathname:s}=qo(),o=JSON.stringify(DR(i,r.v7_relativeSplatPath)),a=T.useRef(!1);return gee(()=>{a.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=AR(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qa([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function zs(){let{matches:t}=T.useContext(Fo),e=t[t.length-1];return e?e.params:{}}function v0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(Ao),{matches:i}=T.useContext(Fo),{pathname:s}=qo(),o=JSON.stringify(DR(i,n.v7_relativeSplatPath));return T.useMemo(()=>AR(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function Fue(t,e){return que(t,e)}function que(t,e,r,n){eh()||Kt(!1);let{navigator:i}=T.useContext(Ao),{matches:s}=T.useContext(Fo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=qo(),d;if(e){var h;let b=typeof e=="string"?Zd(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||Kt(!1),d=b}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=fue(t,{pathname:p}),g=Uue(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:qa([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:qa([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,r,n);return e&&g?T.createElement(y0.Provider,{value:{location:cp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ca.Pop}},g):g}function Lue(){let t=Gue(),e=Mue(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:i},r):null,null)}const Bue=T.createElement(Lue,null);class zue extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Fo.Provider,{value:this.props.routeContext},T.createElement(mee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vue(t){let{routeContext:e,match:r,children:n}=t,i=T.useContext(g0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Fo.Provider,{value:e},n)}function Uue(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Kt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,b=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Bue,l&&(c<0&&f===0?(Que("route-fallback"),m=!0,b=null):c===f&&(m=!0,b=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),v=()=>{let w;return p?w=g:m?w=b:h.route.Component?w=T.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,T.createElement(Vue,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(zue,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var yee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yee||{}),vee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vee||{});function Hue(t){let e=T.useContext(g0);return e||Kt(!1),e}function Wue(t){let e=T.useContext(pee);return e||Kt(!1),e}function Kue(t){let e=T.useContext(Fo);return e||Kt(!1),e}function bee(t){let e=Kue(),r=e.matches[e.matches.length-1];return r.route.id||Kt(!1),r.route.id}function Gue(){var t;let e=T.useContext(mee),r=Wue(),n=bee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Yue(){let{router:t}=Hue(yee.UseNavigateStable),e=bee(vee.UseNavigateStable),r=T.useRef(!1);return gee(()=>{r.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,cp({fromRouteId:e},s)))},[t,e])}const MA={};function Que(t,e,r){MA[t]||(MA[t]=!0)}function Xue(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xee(t){let{to:e,replace:r,state:n,relative:i}=t;eh()||Kt(!1);let{future:s,static:o}=T.useContext(Ao),{matches:a}=T.useContext(Fo),{pathname:l}=qo(),c=gn(),d=AR(e,DR(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:i}),[c,h,i,r,n]),null}function mt(t){Kt(!1)}function Jue(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ca.Pop,navigator:s,static:o=!1,future:a}=t;eh()&&Kt(!1);let l=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:s,static:o,future:cp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=Zd(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=T.useMemo(()=>{let b=Td(d,l);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:T.createElement(Ao.Provider,{value:c},T.createElement(y0.Provider,{children:r,value:g}))}function $A(t){let{children:e,location:r}=t;return Fue(uP(e),r)}new Promise(()=>{});function uP(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,i)=>{if(!T.isValidElement(n))return;let s=[...e,i];if(n.type===T.Fragment){r.push.apply(r,uP(n.props.children,s));return}n.type!==mt&&Kt(!1),!n.props.index||!n.props.children||Kt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=uP(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ay(){return Ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ay.apply(this,arguments)}function wee(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Zue(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ede(t,e){return t.button===0&&(!e||e==="_self")&&!Zue(t)}function dP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function tde(t,e){let r=dP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const rde=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nde=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ide="6";try{window.__reactRouterVersion=ide}catch{}const sde=T.createContext({isTransitioning:!1}),ode="startTransition",DA=Jae[ode];function ade(t){let{basename:e,children:r,future:n,window:i}=t,s=T.useRef();s.current==null&&(s.current=uue({window:i,v5Compat:!0}));let o=s.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=T.useCallback(h=>{c&&DA?DA(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>Xue(n),[n]),T.createElement(Jue,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const lde=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cde=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,le=T.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=wee(e,rde),{basename:p}=T.useContext(Ao),m,g=!1;if(typeof c=="string"&&cde.test(c)&&(m=c,lde))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=Td(x.pathname,p);x.origin===w.origin&&S!=null?c=S+x.search+x.hash:g=!0}catch{}let b=Due(c,{relative:i}),y=hde(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function v(w){n&&n(w),w.defaultPrevented||y(w)}return T.createElement("a",Ay({},f,{href:m||b,onClick:g||s?n:v,ref:r,target:l}))}),ude=T.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=wee(e,nde),f=v0(l,{relative:h.relative}),p=qo(),m=T.useContext(pee),{navigator:g,basename:b}=T.useContext(Ao),y=m!=null&&fde(f)&&c===!0,v=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&b&&(x=Td(x,b)||x);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let _=w===v||!o&&w.startsWith(v)&&w.charAt(S)==="/",N=x!=null&&(x===v||!o&&x.startsWith(v)&&x.charAt(v.length)==="/"),E={isActive:_,isPending:N,isTransitioning:y},k=_?n:void 0,C;typeof s=="function"?C=s(E):C=[s,_?"active":null,N?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(E):a;return T.createElement(le,Ay({},h,{"aria-current":k,className:C,ref:r,style:O,to:l,viewTransition:c}),typeof d=="function"?d(E):d)});var hP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hP||(hP={}));var AA;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(AA||(AA={}));function dde(t){let e=T.useContext(g0);return e||Kt(!1),e}function hde(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=gn(),c=qo(),d=v0(t,{relative:o});return T.useCallback(h=>{if(ede(h,r)){h.preventDefault();let f=n!==void 0?n:Dy(c)===Dy(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,n,i,r,t,s,o,a])}function b0(t){let e=T.useRef(dP(t)),r=T.useRef(!1),n=qo(),i=T.useMemo(()=>tde(n.search,r.current?null:e.current),[n.search]),s=gn(),o=T.useCallback((a,l)=>{const c=dP(typeof a=="function"?a(i):a);r.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function fde(t,e){e===void 0&&(e={});let r=T.useContext(sde);r==null&&Kt(!1);let{basename:n}=dde(hP.useViewTransitionState),i=v0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=Td(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Td(r.nextLocation.pathname,n)||r.nextLocation.pathname;return cP(i.pathname,o)!=null||cP(i.pathname,s)!=null}var Bc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},pde={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},pa,LI,qX,mde=(qX=class{constructor(){ve(this,pa,pde);ve(this,LI,!1)}setTimeoutProvider(t){se(this,pa,t)}setTimeout(t,e){return I(this,pa).setTimeout(t,e)}clearTimeout(t){I(this,pa).clearTimeout(t)}setInterval(t,e){return I(this,pa).setInterval(t,e)}clearInterval(t){I(this,pa).clearInterval(t)}},pa=new WeakMap,LI=new WeakMap,qX),Il=new mde;function gde(t){setTimeout(t,0)}var vc=typeof window>"u"||"Deno"in globalThis;function un(){}function yde(t,e){return typeof t=="function"?t(e):t}function fP(t){return typeof t=="number"&&t>=0&&t!==1/0}function See(t,e){return Math.max(t+(e||0)-Date.now(),0)}function La(t,e){return typeof t=="function"?t(e):t}function Ti(t,e){return typeof t=="function"?t(e):t}function FA(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==FR(o,e.options))return!1}else if(!up(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function qA(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(bc(e.options.mutationKey)!==bc(s))return!1}else if(!up(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function FR(t,e){return((e==null?void 0:e.queryKeyHashFn)||bc)(t)}function bc(t){return JSON.stringify(t,(e,r)=>pP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function up(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>up(t[r],e[r])):!1}var vde=Object.prototype.hasOwnProperty;function qR(t,e){if(t===e)return t;const r=LA(t)&&LA(e);if(!r&&!(pP(t)&&pP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=r?c:s[c],h=t[d],f=e[d];if(h===f){a[d]=h,(r?c<i:vde.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=qR(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function dp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function LA(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function pP(t){if(!BA(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!BA(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function BA(t){return Object.prototype.toString.call(t)==="[object Object]"}function bde(t){return new Promise(e=>{Il.setTimeout(e,t)})}function mP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?qR(t,e):e}function xde(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function wde(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var LR=Symbol();function _ee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===LR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function BR(t,e){return typeof t=="function"?t(...e):!!t}function Sde(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var Vl,ma,od,LX,_de=(LX=class extends Bc{constructor(){super();ve(this,Vl);ve(this,ma);ve(this,od);se(this,od,e=>{if(!vc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){I(this,ma)||this.setEventListener(I(this,od))}onUnsubscribe(){var e;this.hasListeners()||((e=I(this,ma))==null||e.call(this),se(this,ma,void 0))}setEventListener(e){var r;se(this,od,e),(r=I(this,ma))==null||r.call(this),se(this,ma,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){I(this,Vl)!==e&&(se(this,Vl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof I(this,Vl)=="boolean"?I(this,Vl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Vl=new WeakMap,ma=new WeakMap,od=new WeakMap,LX),zR=new _de;function gP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var Ede=gde;function Nde(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=Ede;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var cr=Nde(),ad,ga,ld,BX,Cde=(BX=class extends Bc{constructor(){super();ve(this,ad,!0);ve(this,ga);ve(this,ld);se(this,ld,e=>{if(!vc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){I(this,ga)||this.setEventListener(I(this,ld))}onUnsubscribe(){var e;this.hasListeners()||((e=I(this,ga))==null||e.call(this),se(this,ga,void 0))}setEventListener(e){var r;se(this,ld,e),(r=I(this,ga))==null||r.call(this),se(this,ga,e(this.setOnline.bind(this)))}setOnline(e){I(this,ad)!==e&&(se(this,ad,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return I(this,ad)}},ad=new WeakMap,ga=new WeakMap,ld=new WeakMap,BX),Fy=new Cde;function kde(t){return Math.min(1e3*2**t,3e4)}function Eee(t){return(t??"online")==="online"?Fy.isOnline():!0}var yP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Nee(t){let e=!1,r=0,n;const i=gP(),s=()=>i.status!=="pending",o=g=>{var b;if(!s()){const y=new yP(g);f(y),(b=t.onCancel)==null||b.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>zR.isFocused()&&(t.networkMode==="always"||Fy.isOnline())&&t.canRun(),d=()=>Eee(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var b;n=y=>{(s()||c())&&g(y)},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const b=r===0?t.initialPromise:void 0;try{g=b??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const v=t.retry??(vc?0:3),w=t.retryDelay??kde,x=typeof w=="function"?w(r,y):w,S=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),bde(x).then(()=>c()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Ul,zX,Cee=(zX=class{constructor(){ve(this,Ul)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fP(this.gcTime)&&se(this,Ul,Il.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vc?1/0:5*60*1e3))}clearGcTimeout(){I(this,Ul)&&(Il.clearTimeout(I(this,Ul)),se(this,Ul,void 0))}},Ul=new WeakMap,zX),Hl,cd,Ci,Wl,Dr,Dp,Kl,Zi,eo,VX,Tde=(VX=class extends Cee{constructor(e){super();ve(this,Zi);ve(this,Hl);ve(this,cd);ve(this,Ci);ve(this,Wl);ve(this,Dr);ve(this,Dp);ve(this,Kl);se(this,Kl,!1),se(this,Dp,e.defaultOptions),this.setOptions(e.options),this.observers=[],se(this,Wl,e.client),se(this,Ci,I(this,Wl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,se(this,Hl,VA(this.options)),this.state=e.state??I(this,Hl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=I(this,Dr))==null?void 0:e.promise}setOptions(e){if(this.options={...I(this,Dp),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=VA(this.options);r.data!==void 0&&(this.setState(zA(r.data,r.dataUpdatedAt)),se(this,Hl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&I(this,Ci).remove(this)}setData(e,r){const n=mP(this.state.data,e,this.options);return De(this,Zi,eo).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){De(this,Zi,eo).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=I(this,Dr))==null?void 0:n.promise;return(i=I(this,Dr))==null||i.cancel(e),r?r.then(un).catch(un):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(I(this,Hl))}isActive(){return this.observers.some(e=>Ti(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===LR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>La(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!See(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=I(this,Dr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=I(this,Dr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),I(this,Ci).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(I(this,Dr)&&(I(this,Kl)?I(this,Dr).cancel({revert:!0}):I(this,Dr).cancelRetry()),this.scheduleGc()),I(this,Ci).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||De(this,Zi,eo).call(this,{type:"invalidate"})}async fetch(e,r){var l,c,d,h,f,p,m,g,b,y,v,w;if(this.state.fetchStatus!=="idle"&&((l=I(this,Dr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(I(this,Dr))return I(this,Dr).continueRetry(),I(this,Dr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(se(this,Kl,!0),n.signal)})},s=()=>{const x=_ee(this.options,r),_=(()=>{const N={client:I(this,Wl),queryKey:this.queryKey,meta:this.meta};return i(N),N})();return se(this,Kl,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:I(this,Wl),state:this.state,fetchFn:s};return i(x),x})();(c=this.options.behavior)==null||c.onFetch(a,this),se(this,cd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&De(this,Zi,eo).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),se(this,Dr,Nee({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof yP&&x.revert&&this.setState({...I(this,cd),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{De(this,Zi,eo).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{De(this,Zi,eo).call(this,{type:"pause"})},onContinue:()=>{De(this,Zi,eo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await I(this,Dr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=I(this,Ci).config).onSuccess)==null||p.call(f,x,this),(g=(m=I(this,Ci).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof yP){if(x.silent)return I(this,Dr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw De(this,Zi,eo).call(this,{type:"error",error:x}),(y=(b=I(this,Ci).config).onError)==null||y.call(b,x,this),(w=(v=I(this,Ci).config).onSettled)==null||w.call(v,this.state.data,x,this),x}finally{this.scheduleGc()}}},Hl=new WeakMap,cd=new WeakMap,Ci=new WeakMap,Wl=new WeakMap,Dr=new WeakMap,Dp=new WeakMap,Kl=new WeakMap,Zi=new WeakSet,eo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...kee(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...zA(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return se(this,cd,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),cr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),I(this,Ci).notify({query:this,type:"updated",action:e})})},VX);function kee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Eee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function zA(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function VA(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Fn,ot,Ap,vn,Gl,ud,so,ya,Fp,dd,hd,Yl,Ql,va,fd,gt,cf,vP,bP,xP,wP,SP,_P,EP,Tee,UX,VR=(UX=class extends Bc{constructor(e,r){super();ve(this,gt);ve(this,Fn);ve(this,ot);ve(this,Ap);ve(this,vn);ve(this,Gl);ve(this,ud);ve(this,so);ve(this,ya);ve(this,Fp);ve(this,dd);ve(this,hd);ve(this,Yl);ve(this,Ql);ve(this,va);ve(this,fd,new Set);this.options=r,se(this,Fn,e),se(this,ya,null),se(this,so,gP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(I(this,ot).addObserver(this),UA(I(this,ot),this.options)?De(this,gt,cf).call(this):this.updateResult(),De(this,gt,wP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return NP(I(this,ot),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return NP(I(this,ot),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,De(this,gt,SP).call(this),De(this,gt,_P).call(this),I(this,ot).removeObserver(this)}setOptions(e){const r=this.options,n=I(this,ot);if(this.options=I(this,Fn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ti(this.options.enabled,I(this,ot))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");De(this,gt,EP).call(this),I(this,ot).setOptions(this.options),r._defaulted&&!dp(this.options,r)&&I(this,Fn).getQueryCache().notify({type:"observerOptionsUpdated",query:I(this,ot),observer:this});const i=this.hasListeners();i&&HA(I(this,ot),n,this.options,r)&&De(this,gt,cf).call(this),this.updateResult(),i&&(I(this,ot)!==n||Ti(this.options.enabled,I(this,ot))!==Ti(r.enabled,I(this,ot))||La(this.options.staleTime,I(this,ot))!==La(r.staleTime,I(this,ot)))&&De(this,gt,vP).call(this);const s=De(this,gt,bP).call(this);i&&(I(this,ot)!==n||Ti(this.options.enabled,I(this,ot))!==Ti(r.enabled,I(this,ot))||s!==I(this,va))&&De(this,gt,xP).call(this,s)}getOptimisticResult(e){const r=I(this,Fn).getQueryCache().build(I(this,Fn),e),n=this.createResult(r,e);return jde(this,n)&&(se(this,vn,n),se(this,ud,this.options),se(this,Gl,I(this,ot).state)),n}getCurrentResult(){return I(this,vn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&I(this,so).status==="pending"&&I(this,so).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){I(this,fd).add(e)}getCurrentQuery(){return I(this,ot)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=I(this,Fn).defaultQueryOptions(e),n=I(this,Fn).getQueryCache().build(I(this,Fn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return De(this,gt,cf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),I(this,vn)))}createResult(e,r){var k;const n=I(this,ot),i=this.options,s=I(this,vn),o=I(this,Gl),a=I(this,ud),c=e!==n?e.state:I(this,Ap),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const C=this.hasListeners(),O=!C&&UA(e,r),j=C&&HA(e,n,r,i);(O||j)&&(h={...h,...kee(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:b}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&b==="pending"){let C;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(C=s.data,y=!0):C=typeof r.placeholderData=="function"?r.placeholderData((k=I(this,hd))==null?void 0:k.state.data,I(this,hd)):r.placeholderData,C!==void 0&&(b="success",p=mP(s==null?void 0:s.data,C,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===I(this,Fp))p=I(this,dd);else try{se(this,Fp,r.select),p=r.select(p),p=mP(s==null?void 0:s.data,p,r),se(this,dd,p),se(this,ya,null)}catch(C){se(this,ya,C)}I(this,ya)&&(m=I(this,ya),p=I(this,dd),g=Date.now(),b="error");const v=h.fetchStatus==="fetching",w=b==="pending",x=b==="error",S=w&&v,_=p!==void 0,E={status:b,fetchStatus:h.fetchStatus,isPending:w,isSuccess:b==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:UR(e,r),refetch:this.refetch,promise:I(this,so),isEnabled:Ti(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const C=P=>{E.status==="error"?P.reject(E.error):E.data!==void 0&&P.resolve(E.data)},O=()=>{const P=se(this,so,E.promise=gP());C(P)},j=I(this,so);switch(j.status){case"pending":e.queryHash===n.queryHash&&C(j);break;case"fulfilled":(E.status==="error"||E.data!==j.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==j.reason)&&O();break}}return E}updateResult(){const e=I(this,vn),r=this.createResult(I(this,ot),this.options);if(se(this,Gl,I(this,ot).state),se(this,ud,this.options),I(this,Gl).data!==void 0&&se(this,hd,I(this,ot)),dp(r,e))return;se(this,vn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!I(this,fd).size)return!0;const o=new Set(s??I(this,fd));return this.options.throwOnError&&o.add("error"),Object.keys(I(this,vn)).some(a=>{const l=a;return I(this,vn)[l]!==e[l]&&o.has(l)})};De(this,gt,Tee).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&De(this,gt,wP).call(this)}},Fn=new WeakMap,ot=new WeakMap,Ap=new WeakMap,vn=new WeakMap,Gl=new WeakMap,ud=new WeakMap,so=new WeakMap,ya=new WeakMap,Fp=new WeakMap,dd=new WeakMap,hd=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,va=new WeakMap,fd=new WeakMap,gt=new WeakSet,cf=function(e){De(this,gt,EP).call(this);let r=I(this,ot).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(un)),r},vP=function(){De(this,gt,SP).call(this);const e=La(this.options.staleTime,I(this,ot));if(vc||I(this,vn).isStale||!fP(e))return;const n=See(I(this,vn).dataUpdatedAt,e)+1;se(this,Yl,Il.setTimeout(()=>{I(this,vn).isStale||this.updateResult()},n))},bP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(I(this,ot)):this.options.refetchInterval)??!1},xP=function(e){De(this,gt,_P).call(this),se(this,va,e),!(vc||Ti(this.options.enabled,I(this,ot))===!1||!fP(I(this,va))||I(this,va)===0)&&se(this,Ql,Il.setInterval(()=>{(this.options.refetchIntervalInBackground||zR.isFocused())&&De(this,gt,cf).call(this)},I(this,va)))},wP=function(){De(this,gt,vP).call(this),De(this,gt,xP).call(this,De(this,gt,bP).call(this))},SP=function(){I(this,Yl)&&(Il.clearTimeout(I(this,Yl)),se(this,Yl,void 0))},_P=function(){I(this,Ql)&&(Il.clearInterval(I(this,Ql)),se(this,Ql,void 0))},EP=function(){const e=I(this,Fn).getQueryCache().build(I(this,Fn),this.options);if(e===I(this,ot))return;const r=I(this,ot);se(this,ot,e),se(this,Ap,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Tee=function(e){cr.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(I(this,vn))}),I(this,Fn).getQueryCache().notify({query:I(this,ot),type:"observerResultsUpdated"})})},UX);function Ode(t,e){return Ti(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function UA(t,e){return Ode(t,e)||t.state.data!==void 0&&NP(t,e,e.refetchOnMount)}function NP(t,e,r){if(Ti(e.enabled,t)!==!1&&La(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&UR(t,e)}return!1}function HA(t,e,r,n){return(t!==e||Ti(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&UR(t,r)}function UR(t,e){return Ti(e.enabled,t)!==!1&&t.isStaleByTime(La(e.staleTime,t))}function jde(t,e){return!dp(t.getCurrentResult(),e)}function WA(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const b=w=>{Sde(w,()=>e.signal,()=>g=!0)},y=_ee(e.options,e.fetchOptions),v=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return b(O),O})(),E=await y(N),{maxPages:k}=e.options,C=S?wde:xde;return{pages:C(w.pages,E,k),pageParams:C(w.pageParams,x,k)}};if(i&&s.length){const w=i==="backward",x=w?Pde:KA,S={pages:s,pageParams:o},_=x(n,S);a=await v(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:KA(n,a);if(l>0&&x==null)break;a=await v(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=c}}}function KA(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Pde(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var qp,Cs,bn,Xl,ks,Zo,HX,Ide=(HX=class extends Cee{constructor(e){super();ve(this,ks);ve(this,qp);ve(this,Cs);ve(this,bn);ve(this,Xl);se(this,qp,e.client),this.mutationId=e.mutationId,se(this,bn,e.mutationCache),se(this,Cs,[]),this.state=e.state||Oee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){I(this,Cs).includes(e)||(I(this,Cs).push(e),this.clearGcTimeout(),I(this,bn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){se(this,Cs,I(this,Cs).filter(r=>r!==e)),this.scheduleGc(),I(this,bn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){I(this,Cs).length||(this.state.status==="pending"?this.scheduleGc():I(this,bn).remove(this))}continue(){var e;return((e=I(this,Xl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,d,h,f,p,m,g,b,y,v,w,x,S,_,N,E,k;const r=()=>{De(this,ks,Zo).call(this,{type:"continue"})},n={client:I(this,qp),meta:this.options.meta,mutationKey:this.options.mutationKey};se(this,Xl,Nee({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{De(this,ks,Zo).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{De(this,ks,Zo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>I(this,bn).canRun(this)}));const i=this.state.status==="pending",s=!I(this,Xl).canStart();try{if(i)r();else{De(this,ks,Zo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=I(this,bn).config).onMutate)==null?void 0:a.call(o,e,this,n));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,n));O!==this.state.context&&De(this,ks,Zo).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await I(this,Xl).start();return await((h=(d=I(this,bn).config).onSuccess)==null?void 0:h.call(d,C,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,e,this.state.context,n)),await((g=(m=I(this,bn).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this,n)),await((y=(b=this.options).onSettled)==null?void 0:y.call(b,C,null,e,this.state.context,n)),De(this,ks,Zo).call(this,{type:"success",data:C}),C}catch(C){try{await((w=(v=I(this,bn).config).onError)==null?void 0:w.call(v,C,e,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,C,e,this.state.context,n))}catch(O){Promise.reject(O)}try{await((N=(_=I(this,bn).config).onSettled)==null?void 0:N.call(_,void 0,C,this.state.variables,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((k=(E=this.options).onSettled)==null?void 0:k.call(E,void 0,C,e,this.state.context,n))}catch(O){Promise.reject(O)}throw De(this,ks,Zo).call(this,{type:"error",error:C}),C}finally{I(this,bn).runNext(this)}}},qp=new WeakMap,Cs=new WeakMap,bn=new WeakMap,Xl=new WeakMap,ks=new WeakSet,Zo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),cr.batch(()=>{I(this,Cs).forEach(n=>{n.onMutationUpdate(e)}),I(this,bn).notify({mutation:this,type:"updated",action:e})})},HX);function Oee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oo,es,Lp,WX,Rde=(WX=class extends Bc{constructor(e={}){super();ve(this,oo);ve(this,es);ve(this,Lp);this.config=e,se(this,oo,new Set),se(this,es,new Map),se(this,Lp,0)}build(e,r,n){const i=new Ide({client:e,mutationCache:this,mutationId:++Qm(this,Lp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){I(this,oo).add(e);const r=pg(e);if(typeof r=="string"){const n=I(this,es).get(r);n?n.push(e):I(this,es).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(I(this,oo).delete(e)){const r=pg(e);if(typeof r=="string"){const n=I(this,es).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&I(this,es).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=pg(e);if(typeof r=="string"){const n=I(this,es).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=pg(e);if(typeof r=="string"){const i=(n=I(this,es).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){cr.batch(()=>{I(this,oo).forEach(e=>{this.notify({type:"removed",mutation:e})}),I(this,oo).clear(),I(this,es).clear()})}getAll(){return Array.from(I(this,oo))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>qA(r,n))}findAll(e={}){return this.getAll().filter(r=>qA(e,r))}notify(e){cr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return cr.batch(()=>Promise.all(e.map(r=>r.continue().catch(un))))}},oo=new WeakMap,es=new WeakMap,Lp=new WeakMap,WX);function pg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ao,ba,qn,lo,To,Jg,CP,KX,Mde=(KX=class extends Bc{constructor(e,r){super();ve(this,To);ve(this,ao);ve(this,ba);ve(this,qn);ve(this,lo);se(this,ao,e),this.setOptions(r),this.bindMethods(),De(this,To,Jg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=I(this,ao).defaultMutationOptions(e),dp(this.options,r)||I(this,ao).getMutationCache().notify({type:"observerOptionsUpdated",mutation:I(this,qn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&bc(r.mutationKey)!==bc(this.options.mutationKey)?this.reset():((n=I(this,qn))==null?void 0:n.state.status)==="pending"&&I(this,qn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=I(this,qn))==null||e.removeObserver(this)}onMutationUpdate(e){De(this,To,Jg).call(this),De(this,To,CP).call(this,e)}getCurrentResult(){return I(this,ba)}reset(){var e;(e=I(this,qn))==null||e.removeObserver(this),se(this,qn,void 0),De(this,To,Jg).call(this),De(this,To,CP).call(this)}mutate(e,r){var n;return se(this,lo,r),(n=I(this,qn))==null||n.removeObserver(this),se(this,qn,I(this,ao).getMutationCache().build(I(this,ao),this.options)),I(this,qn).addObserver(this),I(this,qn).execute(e)}},ao=new WeakMap,ba=new WeakMap,qn=new WeakMap,lo=new WeakMap,To=new WeakSet,Jg=function(){var r;const e=((r=I(this,qn))==null?void 0:r.state)??Oee();se(this,ba,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},CP=function(e){cr.batch(()=>{var r,n,i,s,o,a,l,c;if(I(this,lo)&&this.hasListeners()){const d=I(this,ba).variables,h=I(this,ba).context,f={client:I(this,ao),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=I(this,lo)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=I(this,lo)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=I(this,lo)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(c=(l=I(this,lo)).onSettled)==null||c.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(I(this,ba))})})},KX);function GA(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function $de(t,e,r){const n=t.slice(0);return n[e]=r,n}var pd,oi,md,gd,ki,xa,Bp,zp,Vp,nn,kP,TP,OP,jP,PP,GX,Dde=(GX=class extends Bc{constructor(e,r,n){super();ve(this,nn);ve(this,pd);ve(this,oi);ve(this,md);ve(this,gd);ve(this,ki);ve(this,xa);ve(this,Bp);ve(this,zp);ve(this,Vp,[]);se(this,pd,e),se(this,gd,n),se(this,md,[]),se(this,ki,[]),se(this,oi,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&I(this,ki).forEach(e=>{e.subscribe(r=>{De(this,nn,jP).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,I(this,ki).forEach(e=>{e.destroy()})}setQueries(e,r){se(this,md,e),se(this,gd,r),cr.batch(()=>{const n=I(this,ki),i=De(this,nn,OP).call(this,I(this,md));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),c=a||l,d=c?!0:o.some((h,f)=>{const p=I(this,oi)[f];return!p||!dp(h,p)});!c&&!d||(c&&(se(this,Vp,i),se(this,ki,s)),se(this,oi,o),this.hasListeners()&&(c&&(GA(n,s).forEach(h=>{h.destroy()}),GA(s,n).forEach(h=>{h.subscribe(f=>{De(this,nn,jP).call(this,h,f)})})),De(this,nn,PP).call(this)))})}getCurrentResult(){return I(this,oi)}getQueries(){return I(this,ki).map(e=>e.getCurrentQuery())}getObservers(){return I(this,ki)}getOptimisticResult(e,r){const n=De(this,nn,OP).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>De(this,nn,TP).call(this,s??i,r),()=>De(this,nn,kP).call(this,i,n)]}},pd=new WeakMap,oi=new WeakMap,md=new WeakMap,gd=new WeakMap,ki=new WeakMap,xa=new WeakMap,Bp=new WeakMap,zp=new WeakMap,Vp=new WeakMap,nn=new WeakSet,kP=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},TP=function(e,r){return r?((!I(this,xa)||I(this,oi)!==I(this,zp)||r!==I(this,Bp))&&(se(this,Bp,r),se(this,zp,I(this,oi)),se(this,xa,qR(I(this,xa),r(e)))),I(this,xa)):e},OP=function(e){const r=new Map;I(this,ki).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=I(this,pd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new VR(I(this,pd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},jP=function(e,r){const n=I(this,ki).indexOf(e);n!==-1&&(se(this,oi,$de(I(this,oi),n,r)),De(this,nn,PP).call(this))},PP=function(){var e;if(this.hasListeners()){const r=I(this,xa),n=De(this,nn,kP).call(this,I(this,oi),I(this,Vp)),i=De(this,nn,TP).call(this,n,(e=I(this,gd))==null?void 0:e.combine);r!==i&&cr.batch(()=>{this.listeners.forEach(s=>{s(I(this,oi))})})}},GX),Ts,YX,Ade=(YX=class extends Bc{constructor(e={}){super();ve(this,Ts);this.config=e,se(this,Ts,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??FR(i,r);let o=this.get(s);return o||(o=new Tde({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){I(this,Ts).has(e.queryHash)||(I(this,Ts).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=I(this,Ts).get(e.queryHash);r&&(e.destroy(),r===e&&I(this,Ts).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){cr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return I(this,Ts).get(e)}getAll(){return[...I(this,Ts).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>FA(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>FA(e,n)):r}notify(e){cr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){cr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){cr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ts=new WeakMap,YX),rr,wa,Sa,yd,vd,_a,bd,xd,QX,Fde=(QX=class{constructor(t={}){ve(this,rr);ve(this,wa);ve(this,Sa);ve(this,yd);ve(this,vd);ve(this,_a);ve(this,bd);ve(this,xd);se(this,rr,t.queryCache||new Ade),se(this,wa,t.mutationCache||new Rde),se(this,Sa,t.defaultOptions||{}),se(this,yd,new Map),se(this,vd,new Map),se(this,_a,0)}mount(){Qm(this,_a)._++,I(this,_a)===1&&(se(this,bd,zR.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,rr).onFocus())})),se(this,xd,Fy.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,rr).onOnline())})))}unmount(){var t,e;Qm(this,_a)._--,I(this,_a)===0&&((t=I(this,bd))==null||t.call(this),se(this,bd,void 0),(e=I(this,xd))==null||e.call(this),se(this,xd,void 0))}isFetching(t){return I(this,rr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return I(this,wa).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=I(this,rr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=I(this,rr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(La(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return I(this,rr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=I(this,rr).get(n.queryHash),s=i==null?void 0:i.state.data,o=yde(e,s);if(o!==void 0)return I(this,rr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return cr.batch(()=>I(this,rr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=I(this,rr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=I(this,rr);cr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=I(this,rr);return cr.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=cr.batch(()=>I(this,rr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(un).catch(un)}invalidateQueries(t,e={}){return cr.batch(()=>(I(this,rr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=cr.batch(()=>I(this,rr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(un)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(un)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=I(this,rr).build(this,e);return r.isStaleByTime(La(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(un).catch(un)}fetchInfiniteQuery(t){return t.behavior=WA(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(un).catch(un)}ensureInfiniteQueryData(t){return t.behavior=WA(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Fy.isOnline()?I(this,wa).resumePausedMutations():Promise.resolve()}getQueryCache(){return I(this,rr)}getMutationCache(){return I(this,wa)}getDefaultOptions(){return I(this,Sa)}setDefaultOptions(t){se(this,Sa,t)}setQueryDefaults(t,e){I(this,yd).set(bc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...I(this,yd).values()],r={};return e.forEach(n=>{up(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){I(this,vd).set(bc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...I(this,vd).values()],r={};return e.forEach(n=>{up(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...I(this,Sa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=FR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===LR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...I(this,Sa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){I(this,rr).clear(),I(this,wa).clear()}},rr=new WeakMap,wa=new WeakMap,Sa=new WeakMap,yd=new WeakMap,vd=new WeakMap,_a=new WeakMap,bd=new WeakMap,xd=new WeakMap,QX),jee=T.createContext(void 0),yt=t=>{const e=T.useContext(jee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qde=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(jee.Provider,{value:t,children:e})),Pee=T.createContext(!1),Iee=()=>T.useContext(Pee);Pee.Provider;function Lde(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Bde=T.createContext(Lde()),Ree=()=>T.useContext(Bde),Mee=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?BR(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},$ee=t=>{T.useEffect(()=>{t.clearReset()},[t])},Dee=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||BR(r,[t.error,n])),Aee=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Fee=(t,e)=>t.isLoading&&t.isFetching&&!e,IP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,qy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function RP({queries:t,...e},r){const n=yt(),i=Iee(),s=Ree(),o=T.useMemo(()=>t.map(g=>{const b=n.defaultQueryOptions(g);return b._optimisticResults=i?"isRestoring":"optimistic",b}),[t,n,i]);o.forEach(g=>{Aee(g);const b=n.getQueryCache().get(g.queryHash);Mee(g,s,b)}),$ee(s);const[a]=T.useState(()=>new Dde(n,o,e)),[l,c,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;T.useSyncExternalStore(T.useCallback(g=>h?a.subscribe(cr.batchCalls(g)):un,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),T.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,b)=>IP(o[b],g))?l.flatMap((g,b)=>{const y=o[b];if(y){const v=new VR(n,y);if(IP(y,g))return qy(y,v,s);Fee(g,i)&&qy(y,v,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,b)=>{const y=o[b];return y&&Dee({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return c(d())}function zde(t,e,r){var f,p,m,g;const n=Iee(),i=Ree(),s=yt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",Aee(o),Mee(o,i,a),$ee(i);const l=!s.getQueryCache().get(o.queryHash),[c]=T.useState(()=>new e(s,o)),d=c.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(b=>{const y=h?c.subscribe(cr.batchCalls(b)):un;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(o)},[o,c]),IP(o,d))throw qy(o,c,i);if(Dee({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!vc&&Fee(d,n)){const b=l?qy(o,c,i):a==null?void 0:a.promise;b==null||b.catch(un).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function ut(t,e){return zde(t,VR)}function ht(t,e){const r=yt(),[n]=T.useState(()=>new Mde(r,t));T.useEffect(()=>{n.setOptions(t)},[n,t]);const i=T.useSyncExternalStore(T.useCallback(o=>n.subscribe(cr.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=T.useCallback((o,a)=>{n.mutate(o,a).catch(un)},[n]);if(i.error&&BR(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function HR(){const t=window.prmConfig||{};return T.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function qee(t,e){return function(){return t.apply(e,arguments)}}const{toString:Vde}=Object.prototype,{getPrototypeOf:WR}=Object,{iterator:x0,toStringTag:Lee}=Symbol,w0=(t=>e=>{const r=Vde.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ms=t=>(t=t.toLowerCase(),e=>w0(e)===t),S0=t=>e=>typeof e===t,{isArray:th}=Array,Od=S0("undefined");function Yp(t){return t!==null&&!Od(t)&&t.constructor!==null&&!Od(t.constructor)&&Qn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bee=ms("ArrayBuffer");function Ude(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Bee(t.buffer),e}const Hde=S0("string"),Qn=S0("function"),zee=S0("number"),Qp=t=>t!==null&&typeof t=="object",Wde=t=>t===!0||t===!1,Zg=t=>{if(w0(t)!=="object")return!1;const e=WR(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Lee in t)&&!(x0 in t)},Kde=t=>{if(!Qp(t)||Yp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Gde=ms("Date"),Yde=ms("File"),Qde=ms("Blob"),Xde=ms("FileList"),Jde=t=>Qp(t)&&Qn(t.pipe),Zde=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Qn(t.append)&&((e=w0(t))==="formdata"||e==="object"&&Qn(t.toString)&&t.toString()==="[object FormData]"))},ehe=ms("URLSearchParams"),[the,rhe,nhe,ihe]=["ReadableStream","Request","Response","Headers"].map(ms),she=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xp(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),th(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Yp(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function Vee(t,e){if(Yp(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Rl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Uee=t=>!Od(t)&&t!==Rl;function MP(){const{caseless:t,skipUndefined:e}=Uee(this)&&this||{},r={},n=(i,s)=>{const o=t&&Vee(r,s)||s;Zg(r[o])&&Zg(i)?r[o]=MP(r[o],i):Zg(i)?r[o]=MP({},i):th(i)?r[o]=i.slice():(!e||!Od(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Xp(arguments[i],n);return r}const ohe=(t,e,r,{allOwnKeys:n}={})=>(Xp(e,(i,s)=>{r&&Qn(i)?t[s]=qee(i,r):t[s]=i},{allOwnKeys:n}),t),ahe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),lhe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},che=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&WR(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},uhe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},dhe=t=>{if(!t)return null;if(th(t))return t;let e=t.length;if(!zee(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},hhe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&WR(Uint8Array)),fhe=(t,e)=>{const n=(t&&t[x0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},phe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},mhe=ms("HTMLFormElement"),ghe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),YA=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),yhe=ms("RegExp"),Hee=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Xp(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},vhe=t=>{Hee(t,(e,r)=>{if(Qn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Qn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},bhe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return th(t)?n(t):n(String(t).split(e)),r},xhe=()=>{},whe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function She(t){return!!(t&&Qn(t.append)&&t[Lee]==="FormData"&&t[x0])}const _he=t=>{const e=new Array(10),r=(n,i)=>{if(Qp(n)){if(e.indexOf(n)>=0)return;if(Yp(n))return n;if(!("toJSON"in n)){e[i]=n;const s=th(n)?[]:{};return Xp(n,(o,a)=>{const l=r(o,i+1);!Od(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},Ehe=ms("AsyncFunction"),Nhe=t=>t&&(Qp(t)||Qn(t))&&Qn(t.then)&&Qn(t.catch),Wee=((t,e)=>t?setImmediate:e?((r,n)=>(Rl.addEventListener("message",({source:i,data:s})=>{i===Rl&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Rl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Qn(Rl.postMessage)),Che=typeof queueMicrotask<"u"?queueMicrotask.bind(Rl):typeof process<"u"&&process.nextTick||Wee,khe=t=>t!=null&&Qn(t[x0]),B={isArray:th,isArrayBuffer:Bee,isBuffer:Yp,isFormData:Zde,isArrayBufferView:Ude,isString:Hde,isNumber:zee,isBoolean:Wde,isObject:Qp,isPlainObject:Zg,isEmptyObject:Kde,isReadableStream:the,isRequest:rhe,isResponse:nhe,isHeaders:ihe,isUndefined:Od,isDate:Gde,isFile:Yde,isBlob:Qde,isRegExp:yhe,isFunction:Qn,isStream:Jde,isURLSearchParams:ehe,isTypedArray:hhe,isFileList:Xde,forEach:Xp,merge:MP,extend:ohe,trim:she,stripBOM:ahe,inherits:lhe,toFlatObject:che,kindOf:w0,kindOfTest:ms,endsWith:uhe,toArray:dhe,forEachEntry:fhe,matchAll:phe,isHTMLForm:mhe,hasOwnProperty:YA,hasOwnProp:YA,reduceDescriptors:Hee,freezeMethods:vhe,toObjectSet:bhe,toCamelCase:ghe,noop:xhe,toFiniteNumber:whe,findKey:Vee,global:Rl,isContextDefined:Uee,isSpecCompliantForm:She,toJSONObject:_he,isAsyncFn:Ehe,isThenable:Nhe,setImmediate:Wee,asap:Che,isIterable:khe};function Ue(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}B.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Kee=Ue.prototype,Gee={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Gee[t]={value:t}});Object.defineProperties(Ue,Gee);Object.defineProperty(Kee,"isAxiosError",{value:!0});Ue.from=(t,e,r,n,i,s)=>{const o=Object.create(Kee);B.toFlatObject(t,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Ue.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const The=null;function $P(t){return B.isPlainObject(t)||B.isArray(t)}function Yee(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function QA(t,e,r){return t?t.concat(e).map(function(i,s){return i=Yee(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function Ohe(t){return B.isArray(t)&&!t.some($P)}const jhe=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function _0(t,e,r){if(!B.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=B.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!B.isUndefined(b[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(B.isDate(m))return m.toISOString();if(B.isBoolean(m))return m.toString();if(!l&&B.isBlob(m))throw new Ue("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(m)||B.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,b){let y=m;if(m&&!b&&typeof m=="object"){if(B.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(B.isArray(m)&&Ohe(m)||(B.isFileList(m)||B.endsWith(g,"[]"))&&(y=B.toArray(m)))return g=Yee(g),y.forEach(function(w,x){!(B.isUndefined(w)||w===null)&&e.append(o===!0?QA([g],x,s):o===null?g:g+"[]",c(w))}),!1}return $P(m)?!0:(e.append(QA(b,g,s),c(m)),!1)}const h=[],f=Object.assign(jhe,{defaultVisitor:d,convertValue:c,isVisitable:$P});function p(m,g){if(!B.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),B.forEach(m,function(y,v){(!(B.isUndefined(y)||y===null)&&i.call(e,y,B.isString(v)?v.trim():v,g,f))===!0&&p(y,g?g.concat(v):[v])}),h.pop()}}if(!B.isObject(t))throw new TypeError("data must be an object");return p(t),e}function XA(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function KR(t,e){this._pairs=[],t&&_0(t,this,e)}const Qee=KR.prototype;Qee.append=function(e,r){this._pairs.push([e,r])};Qee.toString=function(e){const r=e?function(n){return e.call(this,n,XA)}:XA;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Phe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Xee(t,e,r){if(!e)return t;const n=r&&r.encode||Phe;B.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=B.isURLSearchParams(e)?e.toString():new KR(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class JA{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Jee={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ihe=typeof URLSearchParams<"u"?URLSearchParams:KR,Rhe=typeof FormData<"u"?FormData:null,Mhe=typeof Blob<"u"?Blob:null,$he={isBrowser:!0,classes:{URLSearchParams:Ihe,FormData:Rhe,Blob:Mhe},protocols:["http","https","file","blob","url","data"]},GR=typeof window<"u"&&typeof document<"u",DP=typeof navigator=="object"&&navigator||void 0,Dhe=GR&&(!DP||["ReactNative","NativeScript","NS"].indexOf(DP.product)<0),Ahe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Fhe=GR&&window.location.href||"http://localhost",qhe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:GR,hasStandardBrowserEnv:Dhe,hasStandardBrowserWebWorkerEnv:Ahe,navigator:DP,origin:Fhe},Symbol.toStringTag,{value:"Module"})),hn={...qhe,...$he};function Lhe(t,e){return _0(t,new hn.classes.URLSearchParams,{visitor:function(r,n,i,s){return hn.isNode&&B.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Bhe(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zhe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Zee(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&B.isArray(i)?i.length:o,l?(B.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!B.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&B.isArray(i[o])&&(i[o]=zhe(i[o])),!a)}if(B.isFormData(t)&&B.isFunction(t.entries)){const r={};return B.forEachEntry(t,(n,i)=>{e(Bhe(n),i,r,0)}),r}return null}function Vhe(t,e,r){if(B.isString(t))try{return(e||JSON.parse)(t),B.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Jp={transitional:Jee,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=B.isObject(e);if(s&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return i?JSON.stringify(Zee(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e)||B.isReadableStream(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Lhe(e,this.formSerializer).toString();if((a=B.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return _0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Vhe(e)):e}],transformResponse:[function(e){const r=this.transitional||Jp.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(B.isResponse(e)||B.isReadableStream(e))return e;if(e&&B.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ue.from(a,Ue.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hn.classes.FormData,Blob:hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],t=>{Jp.headers[t]={}});const Uhe=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hhe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&Uhe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},ZA=Symbol("internals");function Wh(t){return t&&String(t).trim().toLowerCase()}function ey(t){return t===!1||t==null?t:B.isArray(t)?t.map(ey):String(t)}function Whe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Khe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function s1(t,e,r,n,i){if(B.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!B.isString(e)){if(B.isString(n))return e.indexOf(n)!==-1;if(B.isRegExp(n))return n.test(e)}}function Ghe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Yhe(t,e){const r=B.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let Xn=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,c){const d=Wh(l);if(!d)throw new Error("header name must be a non-empty string");const h=B.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=ey(a))}const o=(a,l)=>B.forEach(a,(c,d)=>s(c,d,l));if(B.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(B.isString(e)&&(e=e.trim())&&!Khe(e))o(Hhe(e),r);else if(B.isObject(e)&&B.isIterable(e)){let a={},l,c;for(const d of e){if(!B.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?B.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Wh(e),e){const n=B.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Whe(i);if(B.isFunction(r))return r.call(this,i,n);if(B.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Wh(e),e){const n=B.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||s1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Wh(o),o){const a=B.findKey(n,o);a&&(!r||s1(n,n[a],a,r))&&(delete n[a],i=!0)}}return B.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||s1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return B.forEach(this,(i,s)=>{const o=B.findKey(n,s);if(o){r[o]=ey(i),delete r[s];return}const a=e?Ghe(s):String(s).trim();a!==s&&delete r[s],r[a]=ey(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return B.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&B.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[ZA]=this[ZA]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Wh(o);n[a]||(Yhe(i,o),n[a]=!0)}return B.isArray(e)?e.forEach(s):s(e),this}};Xn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(Xn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});B.freezeMethods(Xn);function o1(t,e){const r=this||Jp,n=e||r,i=Xn.from(n.headers);let s=n.data;return B.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function ete(t){return!!(t&&t.__CANCEL__)}function rh(t,e,r){Ue.call(this,t??"canceled",Ue.ERR_CANCELED,e,r),this.name="CanceledError"}B.inherits(rh,Ue,{__CANCEL__:!0});function tte(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ue("Request failed with status code "+r.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Qhe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Xhe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[s];o||(o=c),r[i]=l,n[i]=c;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(f*1e3/p):void 0}}function Jhe(t,e){let r=0,n=1e3/e,i,s;const o=(c,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const d=Date.now(),h=d-r;h>=n?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const Ly=(t,e,r=3)=>{let n=0;const i=Xhe(50,250);return Jhe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},eF=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},tF=t=>(...e)=>B.asap(()=>t(...e)),Zhe=hn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,hn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(hn.origin),hn.navigator&&/(msie|trident)/i.test(hn.navigator.userAgent)):()=>!0,efe=hn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];B.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),B.isString(n)&&a.push(`path=${n}`),B.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),B.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function tfe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function rfe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function rte(t,e,r){let n=!tfe(e);return t&&(n||r==!1)?rfe(t,e):e}const rF=t=>t instanceof Xn?{...t}:t;function xc(t,e){e=e||{};const r={};function n(c,d,h,f){return B.isPlainObject(c)&&B.isPlainObject(d)?B.merge.call({caseless:f},c,d):B.isPlainObject(d)?B.merge({},d):B.isArray(d)?d.slice():d}function i(c,d,h,f){if(B.isUndefined(d)){if(!B.isUndefined(c))return n(void 0,c,h,f)}else return n(c,d,h,f)}function s(c,d){if(!B.isUndefined(d))return n(void 0,d)}function o(c,d){if(B.isUndefined(d)){if(!B.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function a(c,d,h){if(h in e)return n(c,d);if(h in t)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>i(rF(c),rF(d),h,!0)};return B.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);B.isUndefined(f)&&h!==a||(r[d]=f)}),r}const nte=t=>{const e=xc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Xn.from(o),e.url=Xee(rte(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),B.isFormData(r)){if(hn.hasStandardBrowserEnv||hn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(B.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{c.includes(d.toLowerCase())&&o.set(d,h)})}}if(hn.hasStandardBrowserEnv&&(n&&B.isFunction(n)&&(n=n(e)),n||n!==!1&&Zhe(e.url))){const l=i&&s&&efe.read(s);l&&o.set(i,l)}return e},nfe=typeof XMLHttpRequest<"u",ife=nfe&&function(t){return new Promise(function(r,n){const i=nte(t);let s=i.data;const o=Xn.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function y(){if(!b)return;const w=Xn.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:t,request:b};tte(function(N){r(N),g()},function(N){n(N),g()},S),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(n(new Ue("Request aborted",Ue.ECONNABORTED,t,b)),b=null)},b.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new Ue(S,Ue.ERR_NETWORK,t,b);_.event=x||null,n(_),b=null},b.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||Jee;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Ue(x,S.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,t,b)),b=null},s===void 0&&o.setContentType(null),"setRequestHeader"in b&&B.forEach(o.toJSON(),function(x,S){b.setRequestHeader(S,x)}),B.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),c&&([f,m]=Ly(c,!0),b.addEventListener("progress",f)),l&&b.upload&&([h,p]=Ly(l),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{b&&(n(!w||w.type?new rh(null,t,b):w),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const v=Qhe(i.url);if(v&&hn.protocols.indexOf(v)===-1){n(new Ue("Unsupported protocol "+v+":",Ue.ERR_BAD_REQUEST,t));return}b.send(s||null)})},sfe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Ue?d:new rh(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Ue(`timeout ${e} of ms exceeded`,Ue.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>B.asap(a),l}},ofe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},afe=async function*(t,e){for await(const r of lfe(t))yield*ofe(r,e)},lfe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},nF=(t,e,r,n)=>{const i=afe(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},iF=64*1024,{isFunction:mg}=B,cfe=(({Request:t,Response:e})=>({Request:t,Response:e}))(B.global),{ReadableStream:sF,TextEncoder:oF}=B.global,aF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},ufe=t=>{t=B.merge.call({skipUndefined:!0},cfe,t);const{fetch:e,Request:r,Response:n}=t,i=e?mg(e):typeof fetch=="function",s=mg(r),o=mg(n);if(!i)return!1;const a=i&&mg(sF),l=i&&(typeof oF=="function"?(m=>g=>m.encode(g))(new oF):async m=>new Uint8Array(await new r(m).arrayBuffer())),c=s&&a&&aF(()=>{let m=!1;const g=new r(hn.origin,{body:new sF,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&aF(()=>B.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,b)=>{let y=g&&g[m];if(y)return y.call(g);throw new Ue(`Response type '${m}' is not supported`,Ue.ERR_NOT_SUPPORT,b)})});const f=async m=>{if(m==null)return 0;if(B.isBlob(m))return m.size;if(B.isSpecCompliantForm(m))return(await new r(hn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(B.isArrayBufferView(m)||B.isArrayBuffer(m))return m.byteLength;if(B.isURLSearchParams(m)&&(m=m+""),B.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const b=B.toFiniteNumber(m.getContentLength());return b??f(g)};return async m=>{let{url:g,method:b,data:y,signal:v,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:N,headers:E,withCredentials:k="same-origin",fetchOptions:C}=nte(m),O=e||fetch;N=N?(N+"").toLowerCase():"text";let j=sfe([v,w&&w.toAbortSignal()],x),P=null;const A=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let q;try{if(_&&c&&b!=="get"&&b!=="head"&&(q=await p(E,y))!==0){let U=new r(g,{method:"POST",body:y,duplex:"half"}),K;if(B.isFormData(y)&&(K=U.headers.get("content-type"))&&E.setContentType(K),U.body){const[fe,we]=eF(q,Ly(tF(_)));y=nF(U.body,iF,fe,we)}}B.isString(k)||(k=k?"include":"omit");const R=s&&"credentials"in r.prototype,L={...C,signal:j,method:b.toUpperCase(),headers:E.normalize().toJSON(),body:y,duplex:"half",credentials:R?k:void 0};P=s&&new r(g,L);let D=await(s?O(P,C):O(g,L));const W=d&&(N==="stream"||N==="response");if(d&&(S||W&&A)){const U={};["status","statusText","headers"].forEach(Fe=>{U[Fe]=D[Fe]});const K=B.toFiniteNumber(D.headers.get("content-length")),[fe,we]=S&&eF(K,Ly(tF(S),!0))||[];D=new n(nF(D.body,iF,fe,()=>{we&&we(),A&&A()}),U)}N=N||"text";let z=await h[B.findKey(h,N)||"text"](D,m);return!W&&A&&A(),await new Promise((U,K)=>{tte(U,K,{data:z,headers:Xn.from(D.headers),status:D.status,statusText:D.statusText,config:m,request:P})})}catch(R){throw A&&A(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Ue("Network Error",Ue.ERR_NETWORK,m,P),{cause:R.cause||R}):Ue.from(R,R&&R.code,m,P)}}},dfe=new Map,ite=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,c,d=dfe;for(;a--;)l=s[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:ufe(e)),d=c;return c};ite();const YR={http:The,xhr:ife,fetch:{get:ite}};B.forEach(YR,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const lF=t=>`- ${t}`,hfe=t=>B.isFunction(t)||t===null||t===!1;function ffe(t,e){t=B.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!hfe(n)&&(i=YR[(a=String(n)).toLowerCase()],i===void 0))throw new Ue(`Unknown adapter '${a}'`);if(i&&(B.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(lF).join(`
`):" "+lF(o[0]):"as no adapter specified";throw new Ue("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const ste={getAdapter:ffe,adapters:YR};function a1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rh(null,t)}function cF(t){return a1(t),t.headers=Xn.from(t.headers),t.data=o1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ste.getAdapter(t.adapter||Jp.adapter,t)(t).then(function(n){return a1(t),n.data=o1.call(t,t.transformResponse,n),n.headers=Xn.from(n.headers),n},function(n){return ete(n)||(a1(t),n&&n.response&&(n.response.data=o1.call(t,t.transformResponse,n.response),n.response.headers=Xn.from(n.response.headers))),Promise.reject(n)})}const ote="1.13.2",E0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{E0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const uF={};E0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+ote+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Ue(i(o," has been removed"+(r?" in "+r:"")),Ue.ERR_DEPRECATED);return r&&!uF[o]&&(uF[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};E0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function pfe(t,e,r){if(typeof t!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Ue("option "+s+" must be "+l,Ue.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ue("Unknown option "+s,Ue.ERR_BAD_OPTION)}}const ty={assertOptions:pfe,validators:E0},xs=ty.validators;let ec=class{constructor(e){this.defaults=e||{},this.interceptors={request:new JA,response:new JA}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=xc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&ty.assertOptions(n,{silentJSONParsing:xs.transitional(xs.boolean),forcedJSONParsing:xs.transitional(xs.boolean),clarifyTimeoutError:xs.transitional(xs.boolean)},!1),i!=null&&(B.isFunction(i)?r.paramsSerializer={serialize:i}:ty.assertOptions(i,{encode:xs.function,serialize:xs.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ty.assertOptions(r,{baseUrl:xs.spelling("baseURL"),withXsrfToken:xs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&B.merge(s.common,s[r.method]);s&&B.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=Xn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[cF.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(b){g.call(this,b);break}}try{d=cF.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=xc(this.defaults,e);const r=rte(e.baseURL,e.url,e.allowAbsoluteUrls);return Xee(r,e.params,e.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(e){ec.prototype[e]=function(r,n){return this.request(xc(n||{},{method:e,url:r,data:(n||{}).data}))}});B.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(xc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ec.prototype[e]=r(),ec.prototype[e+"Form"]=r(!0)});let mfe=class ate{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new rh(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new ate(function(i){e=i}),cancel:e}}};function gfe(t){return function(r){return t.apply(null,r)}}function yfe(t){return B.isObject(t)&&t.isAxiosError===!0}const AP={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(AP).forEach(([t,e])=>{AP[e]=t});function lte(t){const e=new ec(t),r=qee(ec.prototype.request,e);return B.extend(r,ec.prototype,e,{allOwnKeys:!0}),B.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return lte(xc(t,i))},r}const fr=lte(Jp);fr.Axios=ec;fr.CanceledError=rh;fr.CancelToken=mfe;fr.isCancel=ete;fr.VERSION=ote;fr.toFormData=_0;fr.AxiosError=Ue;fr.Cancel=fr.CanceledError;fr.all=function(e){return Promise.all(e)};fr.spread=gfe;fr.isAxiosError=yfe;fr.mergeConfig=xc;fr.AxiosHeaders=Xn;fr.formToJSON=t=>Zee(B.isHTMLForm(t)?new FormData(t):t);fr.getAdapter=ste.getAdapter;fr.HttpStatusCode=AP;fr.default=fr;const{Axios:$Fe,AxiosError:DFe,CanceledError:AFe,isCancel:FFe,CancelToken:qFe,VERSION:LFe,all:BFe,Cancel:zFe,isAxiosError:VFe,spread:UFe,toFormData:HFe,AxiosHeaders:WFe,HttpStatusCode:KFe,formToJSON:GFe,getAdapter:YFe,mergeConfig:QFe}=fr,FP=window.prmConfig||{},ce=fr.create({baseURL:FP.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":FP.nonce||""}});ce.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});ce.interceptors.response.use(t=>t,t=>{var e,r;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=FP.loginUrl||"/wp-login.php"),((r=t.response)==null?void 0:r.status)===403&&console.error("Access denied:",t.response.data),Promise.reject(t)});const We={getPeople:t=>ce.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>ce.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>ce.post("/wp/v2/people",t),updatePerson:(t,e)=>ce.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>ce.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>ce.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>ce.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>ce.post("/wp/v2/companies",t),updateCompany:(t,e)=>ce.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>ce.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>ce.get("/wp/v2/important-dates",{params:t}),getDate:t=>ce.get(`/wp/v2/important-dates/${t}`),createDate:t=>ce.post("/wp/v2/important-dates",t),updateDate:(t,e)=>ce.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>ce.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>ce.get("/wp/v2/person_label"),getCompanyLabels:()=>ce.get("/wp/v2/company_label"),getRelationshipTypes:()=>ce.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>ce.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>ce.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>ce.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>ce.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>ce.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),ce.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},qe={getDashboard:()=>ce.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>ce.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>ce.get("/prm/v1/user/me"),getUsers:()=>ce.get("/prm/v1/users"),approveUser:t=>ce.post(`/prm/v1/users/${t}/approve`),denyUser:t=>ce.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>ce.delete(`/prm/v1/users/${t}`),search:t=>ce.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>ce.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>ce.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>ce.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>ce.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>ce.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>ce.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>ce.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>ce.get("/prm/v1/user/slack-status"),disconnectSlack:()=>ce.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>ce.get("/prm/v1/slack/channels"),getSlackTargets:()=>ce.get("/prm/v1/slack/targets"),updateSlackTargets:t=>ce.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>ce.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>ce.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>ce.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>ce.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>ce.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>ce.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>ce.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>ce.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>ce.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>ce.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>ce.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>ce.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>ce.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>ce.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>ce.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>ce.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>ce.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>ce.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),ce.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),ce.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>ce.get("/prm/v1/carddav/urls"),getAppPasswords:t=>ce.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>ce.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>ce.delete(`/wp/v2/users/${t}/application-passwords/${e}`)};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bfe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>T.createElement("svg",{ref:d,...vfe,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${bfe(t)}`,a].join(" "),...c},[...e.map(([h,f])=>T.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xfe=ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wfe=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sfe=ue("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _fe=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Efe=ue("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=ue("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=ue("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=ue("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=ue("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ue("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nfe=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=ue("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cfe=ue("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=ue("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=ue("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kfe=ue("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=ue("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tfe=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ofe=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pfe=ue("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ife=ue("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rfe=ue("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mfe=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $fe=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=ue("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ffe=ue("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pte=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lfe=ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=ue("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bfe=ue("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=ue("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=ue("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=ue("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=ue("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=ue("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=ue("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xte=ue("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=ue("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wfe=ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kfe=ue("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Ec="Caelis";function $n(t){T.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Ec;document.title=`${t} - ${r}`}},[t])}function Gfe(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function wte(t=null){const e=qo();T.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=Gfe(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=Ec}const n=((i=window.prmConfig)==null?void 0:i.siteName)||Ec;document.title=`${r} - ${n}`},[e.pathname,t])}function Yfe(){return ut({queryKey:["dashboard"],queryFn:async()=>(await qe.getDashboard()).data})}function Qfe(t=30){return ut({queryKey:["reminders",t],queryFn:async()=>(await qe.getReminders(t)).data})}function Ste(t=!1){return ut({queryKey:["todos",t],queryFn:async()=>(await qe.getAllTodos(t)).data})}function _te(){const t=yt();return ht({mutationFn:({todoId:e,data:r})=>qe.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Xfe(){const t=yt();return ht({mutationFn:e=>qe.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Jfe(t){const e=typeof t=="string"?t:"",r=e.length>=2;return ut({queryKey:["search",e],queryFn:async()=>r?(await qe.search(e)).data:{people:[],companies:[]},enabled:r})}function Wn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function nr(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Wn(e)}function tc(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Wn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Wn(e)}function co(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const Rt={all:["people"],lists:()=>[...Rt.all,"list"],list:t=>[...Rt.lists(),t],details:()=>[...Rt.all,"detail"],detail:t=>[...Rt.details(),t],timeline:t=>[...Rt.detail(t),"timeline"],dates:t=>[...Rt.detail(t),"dates"]};function Ete(t){var i,s,o,a,l,c,d,h,f,p,m,g,b,y,v,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(c=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:c.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((b=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:b.map(S=>S.name))||[],n=Wn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((v=t.acf)==null?void 0:v.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,thumbnail:e,labels:r}}function zc(t={}){return ut({queryKey:Rt.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await We.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(Ete);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function Vc(t){return ut({queryKey:Rt.detail(t),queryFn:async()=>{const e=await We.getPerson(t,{_embed:!0});return Ete(e.data)},enabled:!!t})}function Zfe(t){return ut({queryKey:Rt.timeline(t),queryFn:async()=>(await qe.getPersonTimeline(t)).data,enabled:!!t})}function epe(t){return ut({queryKey:Rt.dates(t),queryFn:async()=>(await qe.getPersonDates(t)).data,enabled:!!t})}function tpe(){const t=yt();return ht({mutationFn:e=>We.createPerson(e),onSuccess:()=>{t.invalidateQueries({queryKey:Rt.lists()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function nh(){const t=yt();return ht({mutationFn:({id:e,data:r})=>We.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:Rt.detail(r)}),t.invalidateQueries({queryKey:Rt.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:Rt.detail(a)})})}})}function rpe(){const t=yt();return ht({mutationFn:e=>We.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:Rt.lists()}),t.invalidateQueries({queryKey:Rt.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function npe(){const t=yt();return ht({mutationFn:({personId:e,content:r})=>qe.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Rt.timeline(r)})}})}function ipe(){const t=yt();return ht({mutationFn:({noteId:e,personId:r})=>qe.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Rt.timeline(r)})}})}function eM(){const t=yt();return ht({mutationFn:({personId:e,data:r})=>qe.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Rt.timeline(r)})}})}function spe(){const t=yt();return ht({mutationFn:({activityId:e,data:r,personId:n})=>qe.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Rt.timeline(r)})}})}function ope(){const t=yt();return ht({mutationFn:({activityId:e,personId:r})=>qe.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Rt.timeline(r)})}})}function Nte(){const t=yt();return ht({mutationFn:({personId:e,data:r})=>qe.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Rt.timeline(r)})}})}function ape(){const t=yt();return ht({mutationFn:({todoId:e,data:r,personId:n})=>qe.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Rt.timeline(r)})}})}function lpe(){const t=yt();return ht({mutationFn:({todoId:e,personId:r})=>qe.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Rt.timeline(r)})}})}function cpe(){const t=yt();return ht({mutationFn:({dateId:e,personId:r})=>We.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:Rt.dates(r)}),t.invalidateQueries({queryKey:Rt.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function Cte({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(""),[o,a]=T.useState(""),[l,c]=T.useState(!1),[d,h]=T.useState(""),{data:f=[],isLoading:p}=zc(),m=Nte(),g=yt(),b=T.useMemo(()=>{const _=d.toLowerCase().trim();let N=f;return _&&(N=f.filter(E=>{var k,C,O;return((k=E.name)==null?void 0:k.toLowerCase().includes(_))||((C=E.first_name)==null?void 0:C.toLowerCase().includes(_))||((O=E.last_name)==null?void 0:O.toLowerCase().includes(_))})),[...N].sort((E,k)=>(E.name||"").localeCompare(k.name||""))},[f,d]),y=T.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),v=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{t&&(n(""),s(v()),a(""),h(""),c(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch(N){console.error("Failed to create todo:",N)}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),u.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:u.jsx(pn,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:w,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>c(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?u.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(el,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:y.name})]}):u.jsx("span",{className:"text-gray-400",children:"Select a person..."}),u.jsx(By,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Sc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:p?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):b.length>0?b.map(_=>u.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),c(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?u.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(el,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}const upe=[{name:"Dashboard",href:"/",icon:Ofe},{name:"People",href:"/people",icon:As},{name:"Organizations",href:"/companies",icon:Ir},{name:"Dates",href:"/dates",icon:yo},{name:"Todos",href:"/todos",icon:Ds},{name:"Settings",href:"/settings",icon:mte}];function mF({mobile:t=!1,onClose:e}){const{logoutUrl:r}=HR();return u.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[u.jsxs(le,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[u.jsx(yte,{className:"w-5 h-5"}),Ec]}),t&&u.jsx("button",{onClick:e,className:"p-2 -mr-2",children:u.jsx(pn,{className:"w-5 h-5"})})]}),u.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:upe.map(n=>u.jsxs(ude,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[u.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(Mfe,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function dpe(){var o;const[t,e]=T.useState(!1),r=T.useRef(null),{data:n,isLoading:i}=ut({queryKey:["current-user"],queryFn:async()=>(await qe.getCurrentUser()).data});if(T.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return u.jsx("div",{className:"flex items-center ml-auto",children:u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return u.jsxs("div",{className:"relative ml-auto",ref:r,children:[u.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?u.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),u.jsx(By,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(el,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&u.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(mte,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function hpe({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(0),o=gn(),a=T.useRef(null),l=r.trim(),{data:c,isLoading:d}=Jfe(l),h=c||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;T.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),T.useEffect(()=>{s(0)},[c]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(v=>Math.min(v+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(v=>Math.max(v-1,0));else if(y.key==="Enter"){y.preventDefault();const v=f[i];v&&b(v.type,v.id)}}},b=(y,v)=>{e(),y==="person"?o(`/people/${v}`):y==="company"&&o(`/companies/${v}`)};return t?u.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),u.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:u.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[u.jsx(Sc,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),u.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),u.jsx("span",{children:"to close"})]})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?u.jsxs("div",{className:"px-4 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),u.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?u.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,v)=>{const x=i===v;return u.jsxs("button",{onClick:()=>b("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(el,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&u.jsxs("div",{className:"px-2 mt-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,v)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+v,x=i===w;return u.jsxs("button",{onClick:()=>b("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):u.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:u.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):u.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[u.jsx(Sc,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),u.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to navigate"})]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to select"})]})]})})]})})]}):null}function fpe({onAddTodo:t}){const[e,r]=T.useState(!1),n=T.useRef(null),i=gn();T.useEffect(()=>{const a=l=>{n.current&&!n.current.contains(l.target)&&r(!1)};if(e)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[e]);const s=a=>{r(!1),i(a)},o=()=>{r(!1),t()};return u.jsxs("div",{className:"relative",ref:n,children:[u.jsx("button",{onClick:()=>r(!e),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:u.jsx(sr,{className:"w-5 h-5"})}),e&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:()=>s("/people/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(el,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),u.jsxs("button",{onClick:()=>s("/companies/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Ir,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),u.jsxs("button",{onClick:o,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Ds,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),u.jsxs("button",{onClick:()=>s("/dates/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(yo,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function ppe({onMenuClick:t,onAddTodo:e,onOpenSearch:r}){const n=qo(),i=()=>{const s=n.pathname;return s==="/"?"Dashboard":s.startsWith("/people")?"People":s.startsWith("/companies")?"Organizations":s.startsWith("/dates")?"Important Dates":s.startsWith("/todos")?"Todos":s.startsWith("/settings")?"Settings":""};return u.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:u.jsx(Dfe,{className:"w-5 h-5"})}),u.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:i()}),u.jsx("div",{className:"flex-1"}),u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[u.jsx(Sc,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),u.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[u.jsx(Cfe,{className:"w-3 h-3"}),"K"]})]}),u.jsx("div",{className:"ml-2",children:u.jsx(fpe,{onAddTodo:e})}),u.jsx("div",{className:"ml-2",children:u.jsx(dpe,{})})]})}function mpe({children:t}){const[e,r]=T.useState(!1),[n,i]=T.useState(!1),[s,o]=T.useState(!1);return wte(),T.useEffect(()=>{const a=l=>{(l.metaKey||l.ctrlKey)&&l.key==="k"&&(l.preventDefault(),o(!0))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]),u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[u.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:u.jsx(mF,{})}),e&&u.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:u.jsx(mF,{mobile:!0,onClose:()=>r(!1)})})]}),u.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[u.jsx(ppe,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onOpenSearch:()=>o(!0)}),u.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),u.jsx(hpe,{isOpen:s,onClose:()=>o(!1)}),u.jsx(Cte,{isOpen:n,onClose:()=>i(!1)})]})}function lt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function $o(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function gpe(t,e){const r=lt(t);return isNaN(e)?$o(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const kte=6048e5,ype=864e5,Tte=6e4,Ote=36e5,gg=43200,gF=1440;let vpe={};function em(){return vpe}function Nc(t,e){var a,l,c,d;const r=em(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=lt(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Vy(t){return Nc(t,{weekStartsOn:1})}function jte(t){const e=lt(t),r=e.getFullYear(),n=$o(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Vy(n),s=$o(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Vy(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Uy(t){const e=lt(t);return e.setHours(0,0,0,0),e}function Hy(t){const e=lt(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function bpe(t,e){const r=Uy(t),n=Uy(e),i=+r-Hy(r),s=+n-Hy(n);return Math.round((i-s)/ype)}function xpe(t){const e=jte(t),r=$o(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Vy(r)}function Zu(t,e){const r=lt(t),n=lt(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function C0(t){return $o(t,Date.now())}function Pte(t,e){const r=Uy(t),n=Uy(e);return+r==+n}function wpe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Spe(t){if(!wpe(t)&&typeof t!="number")return!1;const e=lt(t);return!isNaN(Number(e))}function _pe(t,e){const r=lt(t),n=lt(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function Epe(t,e){const r=lt(t),n=lt(e);return r.getFullYear()-n.getFullYear()}function Npe(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Cpe(t,e){return+lt(t)-+lt(e)}function kpe(t){const e=lt(t);return e.setHours(23,59,59,999),e}function Tpe(t){const e=lt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Ope(t){const e=lt(t);return+kpe(e)==+Tpe(e)}function jpe(t,e){const r=lt(t),n=lt(e),i=Zu(r,n),s=Math.abs(_pe(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=Zu(r,n)===-i;Ope(lt(t))&&s===1&&Zu(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Ppe(t,e,r){const n=Cpe(t,e)/1e3;return Npe(r==null?void 0:r.roundingMethod)(n)}function c1(t,e){const r=lt(t),n=lt(e),i=Zu(r,n),s=Math.abs(Epe(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=Zu(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Ipe(t){const e=lt(t),r=$o(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Rpe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Mpe=(t,e,r)=>{let n;const i=Rpe[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function u1(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const $pe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Dpe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ape={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fpe={date:u1({formats:$pe,defaultWidth:"full"}),time:u1({formats:Dpe,defaultWidth:"full"}),dateTime:u1({formats:Ape,defaultWidth:"full"})},qpe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Lpe=(t,e,r,n)=>qpe[t];function Kh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Bpe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zpe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Vpe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Upe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Hpe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wpe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kpe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Gpe={ordinalNumber:Kpe,era:Kh({values:Bpe,defaultWidth:"wide"}),quarter:Kh({values:zpe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Kh({values:Vpe,defaultWidth:"wide"}),day:Kh({values:Upe,defaultWidth:"wide"}),dayPeriod:Kh({values:Hpe,defaultWidth:"wide",formattingValues:Wpe,defaultFormattingWidth:"wide"})};function Gh(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Qpe(a,h=>h.test(o)):Ype(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function Ype(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Qpe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Xpe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Jpe=/^(\d+)(th|st|nd|rd)?/i,Zpe=/\d+/i,eme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tme={any:[/^b/i,/^(a|c)/i]},rme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nme={any:[/1/i,/2/i,/3/i,/4/i]},ime={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ome={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ame={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lme={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ume={ordinalNumber:Xpe({matchPattern:Jpe,parsePattern:Zpe,valueCallback:t=>parseInt(t,10)}),era:Gh({matchPatterns:eme,defaultMatchWidth:"wide",parsePatterns:tme,defaultParseWidth:"any"}),quarter:Gh({matchPatterns:rme,defaultMatchWidth:"wide",parsePatterns:nme,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gh({matchPatterns:ime,defaultMatchWidth:"wide",parsePatterns:sme,defaultParseWidth:"any"}),day:Gh({matchPatterns:ome,defaultMatchWidth:"wide",parsePatterns:ame,defaultParseWidth:"any"}),dayPeriod:Gh({matchPatterns:lme,defaultMatchWidth:"any",parsePatterns:cme,defaultParseWidth:"any"})},Ite={code:"en-US",formatDistance:Mpe,formatLong:Fpe,formatRelative:Lpe,localize:Gpe,match:ume,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dme(t){const e=lt(t);return bpe(e,Ipe(e))+1}function hme(t){const e=lt(t),r=+Vy(e)-+xpe(e);return Math.round(r/kte)+1}function Rte(t,e){var d,h,f,p;const r=lt(t),n=r.getFullYear(),i=em(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=$o(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Nc(o,e),l=$o(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=Nc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function fme(t,e){var a,l,c,d;const r=em(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=Rte(t,e),s=$o(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Nc(s,e)}function pme(t,e){const r=lt(t),n=+Nc(r,e)-+fme(r,e);return Math.round(n/kte)+1}function xt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Yo={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return xt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):xt(r+1,2)},d(t,e){return xt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return xt(t.getHours()%12||12,e.length)},H(t,e){return xt(t.getHours(),e.length)},m(t,e){return xt(t.getMinutes(),e.length)},s(t,e){return xt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return xt(i,e.length)}},gu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yF={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Yo.y(t,e)},Y:function(t,e,r,n){const i=Rte(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return xt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):xt(s,e.length)},R:function(t,e){const r=jte(t);return xt(r,e.length)},u:function(t,e){const r=t.getFullYear();return xt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return xt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return xt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Yo.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return xt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=pme(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):xt(i,e.length)},I:function(t,e,r){const n=hme(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):xt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Yo.d(t,e)},D:function(t,e,r){const n=dme(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):xt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return xt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return xt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return xt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=gu.noon:n===0?i=gu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=gu.evening:n>=12?i=gu.afternoon:n>=4?i=gu.morning:i=gu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Yo.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Yo.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):xt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):xt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Yo.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Yo.s(t,e)},S:function(t,e){return Yo.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return bF(n);case"XXXX":case"XX":return kl(n);case"XXXXX":case"XXX":default:return kl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return bF(n);case"xxxx":case"xx":return kl(n);case"xxxxx":case"xxx":default:return kl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+vF(n,":");case"OOOO":default:return"GMT"+kl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+vF(n,":");case"zzzz":default:return"GMT"+kl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return xt(n,e.length)},T:function(t,e,r){const n=t.getTime();return xt(n,e.length)}};function vF(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+xt(s,2)}function bF(t,e){return t%60===0?(t>0?"-":"+")+xt(Math.abs(t)/60,2):kl(t,e)}function kl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=xt(Math.trunc(n/60),2),s=xt(n%60,2);return r+i+e+s}const xF=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Mte=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},mme=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return xF(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",xF(n,e)).replace("{{time}}",Mte(i,e))},gme={p:Mte,P:mme},yme=/^D+$/,vme=/^Y+$/,bme=["D","DD","YY","YYYY"];function xme(t){return yme.test(t)}function wme(t){return vme.test(t)}function Sme(t,e,r){const n=_me(t,e,r);if(console.warn(n),bme.includes(t))throw new RangeError(n)}function _me(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Eme=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nme=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cme=/^'([^]*?)'?$/,kme=/''/g,Tme=/[a-zA-Z]/;function En(t,e,r){var d,h,f,p;const n=em(),i=n.locale??Ite,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=lt(t);if(!Spe(a))throw new RangeError("Invalid time value");let l=e.match(Nme).map(m=>{const g=m[0];if(g==="p"||g==="P"){const b=gme[g];return b(m,i.formatLong)}return m}).join("").match(Eme).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Ome(m)};if(yF[g])return{isToken:!0,value:m};if(g.match(Tme))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(wme(g)||xme(g))&&Sme(g,e,String(t));const b=yF[g[0]];return b(a,g,i.localize,c)}).join("")}function Ome(t){const e=t.match(Cme);return e?e[1].replace(kme,"'"):t}function jme(t,e,r){const n=em(),i=(r==null?void 0:r.locale)??n.locale??Ite,s=2520,o=Zu(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,c;o>0?(l=lt(e),c=lt(t)):(l=lt(t),c=lt(e));const d=Ppe(c,l),h=(Hy(c)-Hy(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<gF){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<gg){const m=Math.round(f/gF);return i.formatDistance("xDays",m,a)}else if(f<gg*2)return p=Math.round(f/gg),i.formatDistance("aboutXMonths",p,a)}if(p=jpe(c,l),p<12){const m=Math.round(f/gg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function Pme(t,e){return jme(t,C0(t),e)}function Ime(t,e){const r=lt(t),n=lt(e);return r.getTime()>n.getTime()}function Rme(t,e,r){const n=Nc(t,r),i=Nc(e,r);return+n==+i}function Mme(t,e){return Rme(t,C0(t),e)}function $te(t){return Pte(t,C0(t))}function Dte(t,e){return gpe(t,-e)}function Ate(t){return Pte(t,Dte(C0(t),1))}function hp(t,e){const n=Fme(t);let i;if(n.date){const l=qme(n.date,2);i=Lme(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=Bme(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=zme(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const yg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$me=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Dme=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ame=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Fme(t){const e={},r=t.split(yg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],yg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(yg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=yg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function qme(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function Lme(t,e){if(e===null)return new Date(NaN);const r=t.match($me);if(!r)return new Date(NaN);const n=!!r[4],i=Yh(r[1]),s=Yh(r[2])-1,o=Yh(r[3]),a=Yh(r[4]),l=Yh(r[5])-1;if(n)return Kme(e,a,l)?Vme(e,a,l):new Date(NaN);{const c=new Date(0);return!Hme(e,s,o)||!Wme(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Yh(t){return t?parseInt(t):1}function Bme(t){const e=t.match(Dme);if(!e)return NaN;const r=d1(e[1]),n=d1(e[2]),i=d1(e[3]);return Gme(r,n,i)?r*Ote+n*Tte+i*1e3:NaN}function d1(t){return t&&parseFloat(t.replace(",","."))||0}function zme(t){if(t==="Z")return 0;const e=t.match(Ame);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Yme(n,i)?r*(n*Ote+i*Tte):NaN}function Vme(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const Ume=[31,null,31,30,31,30,31,31,30,31,30,31];function Fte(t){return t%400===0||t%4===0&&t%100!==0}function Hme(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(Ume[e]||(Fte(t)?29:28))}function Wme(t,e){return e>=1&&e<=(Fte(t)?366:365)}function Kme(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Gme(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function Yme(t,e){return e>=0&&e<=59}function Qme(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}hp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=hp(n);$te(i)?e.today.push(r):Ate(i)?e.yesterday.push(r):Mme(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function Xme(t){if(!t)return"";try{const e=hp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return $te(e)?Pme(e,{addSuffix:!0}):Ate(e)?r?En(e,"'Yesterday' 'at' HH:mm"):"Yesterday":En(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function Jme(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function Zme(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function tm(t){if(!t.due_date||t.is_completed)return!1;try{const e=hp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function ege(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):tm(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function tM({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:u.jsx(pn,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[u.jsx(Ds,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),u.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[u.jsx(N0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),u.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var qte={exports:{}},Lte={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd=T;function tge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rge=typeof Object.is=="function"?Object.is:tge,nge=Rd.useState,ige=Rd.useEffect,sge=Rd.useLayoutEffect,oge=Rd.useDebugValue;function age(t,e){var r=e(),n=nge({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return sge(function(){i.value=r,i.getSnapshot=e,h1(i)&&s({inst:i})},[t,r,e]),ige(function(){return h1(i)&&s({inst:i}),t(function(){h1(i)&&s({inst:i})})},[t]),oge(r),r}function h1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!rge(t,r)}catch{return!0}}function lge(t,e){return e()}var cge=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lge:age;Lte.useSyncExternalStore=Rd.useSyncExternalStore!==void 0?Rd.useSyncExternalStore:cge;qte.exports=Lte;var rM=qte.exports;function Jr(t){this.content=t}Jr.prototype={constructor:Jr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new Jr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Jr(r)},addToStart:function(t,e){return new Jr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new Jr(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new Jr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Jr.from(t),t.size?new Jr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Jr.from(t),t.size?new Jr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Jr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};Jr.from=function(t){if(t instanceof Jr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new Jr(e)};function Bte(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=Bte(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function zte(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=zte(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class Q{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Q(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new Q(n,i)}cutByIndex(e,r){return e==r?Q.empty:e==0&&r==this.content.length?this:new Q(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new Q(i,s)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return Bte(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return zte(this,e,r,n)}findIndex(e){if(e==0)return vg(0,e);if(e==this.size)return vg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?vg(r+1,s):vg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return Q.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new Q(r||e,n)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const f1={index:0,offset:0};function vg(t,e){return f1.index=t,f1.offset=e,f1}function Wy(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Wy(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Wy(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Ct=class VP{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Wy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return VP.none;if(e instanceof VP)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Ct.none=[];class Ky extends Error{}class me{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=Ute(this.content,e+this.openStart,r);return n&&new me(n,this.openStart,this.openEnd)}removeBetween(e,r){return new me(Vte(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return me.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new me(Q.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new me(e,n,i)}}me.empty=new me(Q.empty,0,0);function Vte(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(Vte(s.content,e-i-1,r-i-1)))}function Ute(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=Ute(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function uge(t,e,r){if(r.openStart>t.depth)throw new Ky("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Ky("Inconsistent open depths");return Hte(t,e,r,0)}function Hte(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=Hte(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return nc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=dge(r,t);return nc(s,Kte(t,o,a,e,n))}else return nc(s,Gy(t,e,n))}function Wte(t,e){if(!e.type.compatibleContent(t.type))throw new Ky("Cannot join "+e.type.name+" onto "+t.type.name)}function UP(t,e,r){let n=t.node(r);return Wte(n,e.node(r)),n}function rc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Cf(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(rc(t.nodeAfter,n),s++));for(let a=s;a<o;a++)rc(i.child(a),n);e&&e.depth==r&&e.textOffset&&rc(e.nodeBefore,n)}function nc(t,e){return t.type.checkContent(e),t.copy(e)}function Kte(t,e,r,n,i){let s=t.depth>i&&UP(t,e,i+1),o=n.depth>i&&UP(r,n,i+1),a=[];return Cf(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(Wte(s,o),rc(nc(s,Kte(t,e,r,n,i+1)),a)):(s&&rc(nc(s,Gy(t,e,i+1)),a),Cf(e,r,i,a),o&&rc(nc(o,Gy(r,n,i+1)),a)),Cf(n,null,i,a),new Q(a)}function Gy(t,e,r){let n=[];if(Cf(null,t,r,n),t.depth>r){let i=UP(t,e,r+1);rc(nc(i,Gy(t,e,r+1)),n)}return Cf(e,null,r,n),new Q(n)}function dge(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(Q.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class fp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Ct.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Yy(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new fp(r,n,s)}static resolveCached(e,r){let n=wF.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else wF.set(e,n=new hge);let i=n.elts[n.i]=fp.resolve(e,r);return n.i=(n.i+1)%fge,i}}class hge{constructor(){this.elts=[],this.i=0}}const fge=12,wF=new WeakMap;class Yy{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const pge=Object.create(null);let Ba=class HP{constructor(e,r,n,i=Ct.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||Q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Wy(this.attrs,r||e.defaultAttrs||pge)&&Ct.sameSet(this.marks,n||Ct.none)}copy(e=null){return e==this.content?this:new HP(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new HP(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return me.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new me(c,i.depth-o,s.depth-o)}replace(e,r,n){return uge(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return fp.resolveCached(this,e)}resolveNoCache(e){return fp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Gte(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=Q.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ct.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Ct.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=Q.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};Ba.prototype.text=void 0;class Qy extends Ba{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Gte(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Qy(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Qy(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Gte(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Cc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new mge(e,r);if(n.next==null)return Cc.empty;let i=Yte(n);n.next&&n.err("Unexpected trailing text");let s=Sge(wge(i));return _ge(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return Q.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:h}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Cc.empty=new Cc(!0);class mge{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Yte(t){let e=[];do e.push(gge(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function gge(t){let e=[];do e.push(yge(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function yge(t){let e=xge(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=vge(t,e);else break;return e}function SF(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function vge(t,e){let r=SF(t),n=r;return t.eat(",")&&(t.next!="}"?n=SF(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function bge(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function xge(t){if(t.eat("(")){let e=Yte(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=bge(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function wge(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Qte(t,e){return e-t}function _F(t,e){let r=[];return n(e),r.sort(Qte);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function Sge(t){let e=Object.create(null);return r(_F(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<i.length;d++)i[d][0]==a&&(c=i[d][1]);_F(t,l).forEach(d=>{c||i.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[n.join(",")]=new Cc(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Qte);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function _ge(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Xte(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function Jte(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function Zte(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function ere(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new Nge(t,n,e[n]);return r}let EF=class tre{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=ere(e,n.attrs),this.defaultAttrs=Xte(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Cc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Jte(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ba(this,this.computeAttrs(e),Q.from(r),Ct.setFrom(n))}createChecked(e=null,r,n){return r=Q.from(r),this.checkContent(r),new Ba(this,this.computeAttrs(e),r,Ct.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=Q.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(Q.empty,!0);return s?new Ba(this,e,r.append(s),Ct.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Zte(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Ct.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new tre(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function Ege(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class Nge{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?Ege(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class k0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=ere(e,i.attrs),this.excluded=null;let s=Xte(this.attrs);this.instance=s?new Ct(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ct(this,Jte(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new k0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){Zte(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class rre{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=Jr.from(e.nodes),r.marks=Jr.from(e.marks||{}),this.nodes=EF.compile(this.spec.nodes,this),this.marks=k0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Cc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?NF(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:NF(this,o.split(" "))}this.nodeFromJSON=i=>Ba.fromJSON(this,i),this.markFromJSON=i=>Ct.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof EF){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new Qy(n,n.defaultAttrs,e,Ct.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function NF(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function Cge(t){return t.tag!=null}function kge(t){return t.style!=null}class za{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(Cge(i))this.tags.push(i);else if(kge(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new kF(this,r,!1);return n.addAll(e,Ct.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new kF(this,r,!0);return n.addAll(e,Ct.none,r.from,r.to),me.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(jge(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=TF(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=TF(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new za(e,za.schemaRules(e)))}}const nre={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Tge={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ire={ol:!0,ul:!0},pp=1,WP=2,kf=4;function CF(t,e,r){return e!=null?(e?pp:0)|(e==="full"?WP:0):t&&t.whitespace=="pre"?pp|WP:r&~kf}class bg{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Ct.none,this.match=s||(o&kf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Q.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&pp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=Q.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!nre.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class kF{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=CF(null,r.preserveWhitespace,0)|(n?kf:0);i?s=new bg(i.type,i.attrs,Ct.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new bg(null,null,Ct.none,!0,null,o):s=new bg(e.schema.topNodeType,null,Ct.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&WP?"full":this.localPreserveWS||(i.options&pp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;ire.hasOwnProperty(o)&&this.parser.normalizeLists&&Oge(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:Tge.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(nre.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,r);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Ct.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):OF(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=CF(e,s,o.options);o.options&kf&&o.content.length==0&&(a|=kf);let l=Ct.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):OF(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new bg(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=pp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Oge(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&ire.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function jge(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function TF(t){let e={};for(let r in t)e[r]=t[r];return e}function OF(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Uc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=p1(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,r);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=ny(p1(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&ny(p1(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return ny(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Uc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=jF(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return jF(e.marks)}}function jF(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function p1(t){return t.document||window.document}const PF=new WeakMap;function Pge(t){let e=PF.get(t);return e===void 0&&PF.set(t,e=Ige(t)),e}function Ige(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function ny(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=Pge(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=ny(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const sre=65535,ore=Math.pow(2,16);function Rge(t,e){return t+e*ore}function IF(t){return t&sre}function Mge(t){return(t-(t&sre))/ore}const are=1,lre=2,iy=4,cre=8;class KP{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&cre)>0}get deletedBefore(){return(this.delInfo&(are|iy))>0}get deletedAfter(){return(this.delInfo&(lre|iy))>0}get deletedAcross(){return(this.delInfo&iy)>0}}class ui{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&ui.empty)return ui.empty}recover(e){let r=0,n=IF(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+Mge(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:Rge(a/3,e-l),g=e==l?lre:e==h?are:iy;return(r<0?e!=l:e!=h)&&(g|=cre),new KP(p,g,m)}i+=d-c}return n?e+i:new KP(e+i,0,null)}touches(e,r){let n=0,i=IF(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],d=this.ranges[i+n];e(a,a+c,l,l+d),s+=d-c}}invert(){return new ui(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ui.empty:new ui(e<0?[0,-e,0]:[0,0,e])}}ui.empty=new ui([]);class mp{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new mp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new mp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new KP(e,i,null)}}const m1=Object.create(null);class yn{getMap(){return ui.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=m1[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in m1)throw new RangeError("Duplicate use of step JSON ID "+e);return m1[e]=r,r.prototype.jsonID=e,r}}class vr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new vr(e,null)}static fail(e){return new vr(null,e)}static fromReplace(e,r,n,i){try{return vr.ok(e.replace(r,n,i))}catch(s){if(s instanceof Ky)return vr.fail(s.message);throw s}}}function nM(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(nM(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return Q.fromArray(n)}class ka extends yn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new me(nM(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return vr.fromReplace(e,this.from,this.to,s)}invert(){return new cs(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ka(r.pos,n.pos,this.mark)}merge(e){return e instanceof ka&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ka(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ka(r.from,r.to,e.markFromJSON(r.mark))}}yn.jsonID("addMark",ka);class cs extends yn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new me(nM(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return vr.fromReplace(e,this.from,this.to,n)}invert(){return new ka(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new cs(r.pos,n.pos,this.mark)}merge(e){return e instanceof cs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new cs(r.from,r.to,e.markFromJSON(r.mark))}}yn.jsonID("removeMark",cs);class Ta extends yn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return vr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return vr.fromReplace(e,this.pos,this.pos+1,new me(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Ta(this.pos,r.marks[i]);return new Ta(this.pos,this.mark)}}return new kc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Ta(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ta(r.pos,e.markFromJSON(r.mark))}}yn.jsonID("addNodeMark",Ta);class kc extends yn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return vr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return vr.fromReplace(e,this.pos,this.pos+1,new me(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Ta(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new kc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new kc(r.pos,e.markFromJSON(r.mark))}}yn.jsonID("removeNodeMark",kc);class Fr extends yn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&GP(e,this.from,this.to)?vr.fail("Structure replace would overwrite content"):vr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ui([this.from,this.to-this.from,this.slice.size])}invert(e){return new Fr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Fr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Fr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?me.empty:new me(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Fr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?me.empty:new me(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Fr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Fr(r.from,r.to,me.fromJSON(e,r.slice),!!r.structure)}}yn.jsonID("replace",Fr);class Br extends yn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(GP(e,this.from,this.gapFrom)||GP(e,this.gapTo,this.to)))return vr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return vr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?vr.fromReplace(e,this.from,this.to,n):vr.fail("Content does not fit in gap")}getMap(){return new ui([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Br(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Br(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Br(r.from,r.to,r.gapFrom,r.gapTo,me.fromJSON(e,r.slice),r.insert,!!r.structure)}}yn.jsonID("replaceAround",Br);function GP(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function $ge(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,c,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new cs(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new ka(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Dge(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof k0){let c=o.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new cs(o.from,o.to,o.style)))}function iM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,h=n.matchType(c.type);if(!h)o.push(new Fr(a,d,me.empty));else{n=h;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||t.step(new cs(a,d,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new me(Q.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new Fr(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(Q.empty,!0);t.replace(a,a,new me(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function Age(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function ih(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!Age(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function Fge(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,c=a,d=Q.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=Q.from(n.node(m).copy(d)),h++):l--;let f=Q.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=Q.from(i.node(m).copy(f)),p++):c++;t.step(new Br(l,c,o,a,new me(d.append(f),h,p),d.size-h,!0))}function sM(t,e,r=null,n=t){let i=qge(t,e),s=i&&Lge(n,e);return s?i.map(RF).concat({type:e,attrs:r}).concat(s.map(RF)):null}function RF(t){return{type:t,attrs:null}}function qge(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function Lge(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function Bge(t,e,r){let n=Q.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Q.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Br(i,s,i,s,new me(n,0,0),r.length,!0))}function zge(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&Vge(t.doc,t.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&dre(t,o,a,s),iM(t,t.mapping.slice(s).map(a,1),n,void 0,c===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new Br(h,f,h+1,f-1,new me(Q.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&ure(t,o,a,s),!1}})}function ure(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function dre(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Vge(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function Uge(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Br(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new me(Q.from(o),0,0),1,!0))}function vo(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>s;c--,d--){let h=i.node(c),f=i.index(c);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Hge(t,e,r=1,n){let i=t.doc.resolve(e),s=Q.empty,o=Q.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=Q.from(i.node(a).copy(s));let d=n&&n[c];o=Q.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new Fr(e,e,new me(s.append(o),r,r),!0))}function cl(t,e){let r=t.resolve(e),n=r.index();return hre(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Wge(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function hre(t,e){return!!(t&&e&&!t.isLeaf&&Wge(t,e))}function T0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&hre(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function Kge(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);dre(t,d.node(),d.before(),a)}o.inlineContent&&iM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),c=l.map(e-r);if(t.step(new Fr(c,l.map(e+r,-1),me.empty,!0)),n===!0){let d=t.doc.resolve(c);ure(t,d.node(),d.before(),t.steps.length)}return t}function Gge(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function fre(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),d=!1;if(s==1)d=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&c.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function O0(t,e,r=e,n=me.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return pre(i,s,n)?new Fr(e,r,n):new Yge(i,s,n).fit()}function pre(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class Yge{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=Q.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new me(s,o,a);return e>-1?new Br(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Fr(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=g1(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,h=null;if(r==1&&(o?c.matchType(o.type)||(h=c.fillBefore(Q.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=g1(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new me(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=g1(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new me(uf(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new me(uf(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),b=h.matchType(g.type);if(!b)break;c++,(c>1||l==0||g.content.size)&&(h=b,d.push(mre(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=df(this.placed,r,Q.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=a;g<p;g++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=m?e==0?me.empty:new me(uf(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new me(uf(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!y1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=y1(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=y1(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=df(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=df(this.placed,this.depth,Q.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Q.empty,!0);r.childCount&&(this.placed=df(this.placed,this.frontier.length,r))}}function uf(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(uf(t.firstChild.content,e-1,r)))}function df(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(df(t.lastChild.content,e-1,r)))}function g1(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function mre(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,mre(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(Q.empty,!0)))),t.copy(n)}function y1(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!Qge(r,s.content,o)?a:null}function Qge(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Xge(t){return t.spec.defining||t.spec.definingForContent}function Jge(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(pre(i,s,n))return t.step(new Fr(e,r,n));let o=yre(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=c[f],m=Xge(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let b=o[(g+l)%o.length],y=!0;b<0&&(y=!1,b=-b);let v=i.node(b-1),w=i.index(b-1);if(v.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(b),y?s.after(b):r,new me(gre(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function gre(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(gre(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Q.empty,!0))}return t}function Zge(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Gge(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new me(Q.from(n),0,0))}function eye(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=yre(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function yre(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class ed extends yn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return vr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return vr.fromReplace(e,this.pos,this.pos+1,new me(Q.from(i),0,r.isLeaf?0:1))}getMap(){return ui.empty}invert(e){return new ed(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new ed(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ed(r.pos,r.attr,r.value)}}yn.jsonID("attr",ed);class gp extends yn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return vr.ok(n)}getMap(){return ui.empty}invert(e){return new gp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new gp(r.attr,r.value)}}yn.jsonID("docAttr",gp);let Md=class extends Error{};Md=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Md.prototype=Object.create(Error.prototype);Md.prototype.constructor=Md;Md.prototype.name="TransformError";class vre{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new mp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Md(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=me.empty){let i=O0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new me(Q.from(n),0,0))}delete(e,r){return this.replace(e,r,me.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return Jge(this,e,r,n),this}replaceRangeWith(e,r,n){return Zge(this,e,r,n),this}deleteRange(e,r){return eye(this,e,r),this}lift(e,r){return Fge(this,e,r),this}join(e,r=1){return Kge(this,e,r),this}wrap(e,r){return Bge(this,e,r),this}setBlockType(e,r=e,n,i=null){return zge(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return Uge(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new ed(e,r,n)),this}setDocAttribute(e,r){return this.step(new gp(e,r)),this}addNodeMark(e,r){return this.step(new Ta(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Ct)r.isInSet(n.marks)&&this.step(new kc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new kc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return Hge(this,e,r,n),this}addMark(e,r,n){return $ge(this,e,r,n),this}removeMark(e,r,n){return Dge(this,e,r,n),this}clearIncompatible(e,r,n){return iM(this,e,r,n),this}}const v1=Object.create(null);class Ge{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new tye(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=me.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?me.empty:r),a==0&&DF(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),c=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,r),DF(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new Le(e):_u(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?_u(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):_u(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new pi(e.node(0))}static atStart(e){return _u(e,e,0,0,1)||new pi(e)}static atEnd(e){return _u(e,e,e.content.size,e.childCount,-1)||new pi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=v1[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in v1)throw new RangeError("Duplicate use of selection JSON ID "+e);return v1[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Le.between(this.$anchor,this.$head).getBookmark()}}Ge.prototype.visible=!0;class tye{constructor(e,r){this.$from=e,this.$to=r}}let MF=!1;function $F(t){!MF&&!t.parent.inlineContent&&(MF=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Le extends Ge{constructor(e,r=e){$F(e),$F(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Ge.near(n);let i=e.resolve(r.map(this.anchor));return new Le(i.parent.inlineContent?i:n,n)}replace(e,r=me.empty){if(super.replace(e,r),r==me.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Le&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new j0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Le(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=Ge.findFrom(r,n,!0)||Ge.findFrom(r,-n,!0);if(s)r=s.$head;else return Ge.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(Ge.findFrom(e,-n,!0)||Ge.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new Le(e,r)}}Ge.jsonID("text",Le);class j0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new j0(e.map(this.anchor),e.map(this.head))}resolve(e){return Le.between(e.resolve(this.anchor),e.resolve(this.head))}}class Me extends Ge{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?Ge.near(s):new Me(s)}content(){return new me(Q.from(this.node),0,0)}eq(e){return e instanceof Me&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new oM(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Me(e.resolve(r.anchor))}static create(e,r){return new Me(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Me.prototype.visible=!1;Ge.jsonID("node",Me);class oM{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new j0(n,n):new oM(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Me.isSelectable(n)?new Me(r):Ge.near(r)}}class pi extends Ge{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=me.empty){if(r==me.empty){e.delete(0,e.doc.content.size);let n=Ge.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new pi(e)}map(e){return new pi(e)}eq(e){return e instanceof pi}getBookmark(){return rye}}Ge.jsonID("all",pi);const rye={map(){return this},resolve(t){return new pi(t)}};function _u(t,e,r,n,i,s=!1){if(e.inlineContent)return Le.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Me.isSelectable(a))return Me.create(t,r-(i<0?a.nodeSize:0))}else{let l=_u(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function DF(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof Fr||i instanceof Br))return;let s=t.mapping.maps[n],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(Ge.near(t.doc.resolve(o),r))}const AF=1,xg=2,FF=4;class nye extends vre{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|AF)&~xg,this.storedMarks=null,this}get selectionSet(){return(this.updated&AF)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=xg,this}ensureMarks(e){return Ct.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&xg)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~xg,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Ct.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Ge.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=FF,this}get scrolledIntoView(){return(this.updated&FF)>0}}function qF(t,e){return!e||!t?t:t.bind(e)}class hf{constructor(e,r,n){this.name=e,this.init=qF(r.init,n),this.apply=qF(r.apply,n)}}const iye=[new hf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new hf("selection",{init(t,e){return t.selection||Ge.atStart(e.doc)},apply(t){return t.selection}}),new hf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new hf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class b1{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=iye.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new hf(n.key,n.spec.state,n))})}}class Lu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Lu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new nye(this)}static create(e){let r=new b1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Lu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new b1(this.schema,e.plugins),n=r.fields,i=new Lu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new b1(e.schema,e.plugins),s=new Lu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ba.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=Ge.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function bre(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=bre(i,e,{})),r[n]=i}return r}class Yt{constructor(e){this.spec=e,this.props={},e.props&&bre(e.props,this,this.props),this.key=e.key?e.key.key:xre("plugin")}getState(e){return e[this.key]}}const x1=Object.create(null);function xre(t){return t in x1?t+"$"+ ++x1[t]:(x1[t]=0,t+"$")}class Rr{constructor(e="key"){this.key=xre(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const aM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function wre(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const Sre=(t,e,r)=>{let n=wre(t,r);if(!n)return!1;let i=lM(n);if(!i){let o=n.blockRange(),a=o&&ih(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Pre(t,i,e,-1))return!0;if(n.parent.content.size==0&&($d(s,"end")||Me.isSelectable(s)))for(let o=n.depth;;o--){let a=O0(t.doc,n.before(o),n.after(o),me.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection($d(s,"end")?Ge.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Me.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},sye=(t,e,r)=>{let n=wre(t,r);if(!n)return!1;let i=lM(n);return i?_re(t,i,e):!1},oye=(t,e,r)=>{let n=Nre(t,r);if(!n)return!1;let i=cM(n);return i?_re(t,i,e):!1};function _re(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=O0(t.doc,s,l,me.empty);if(!c||c.from!=s||c instanceof Fr&&c.slice.size>=l-s)return!1;if(r){let d=t.tr.step(c);d.setSelection(Le.create(d.doc,s)),r(d.scrollIntoView())}return!0}function $d(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const Ere=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=lM(n)}let o=s&&s.nodeBefore;return!o||!Me.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Me.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function lM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Nre(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const Cre=(t,e,r)=>{let n=Nre(t,r);if(!n)return!1;let i=cM(n);if(!i)return!1;let s=i.nodeAfter;if(Pre(t,i,e,1))return!0;if(n.parent.content.size==0&&($d(s,"start")||Me.isSelectable(s))){let o=O0(t.doc,n.before(),n.after(),me.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection($d(s,"start")?Ge.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Me.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},kre=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=cM(n)}let o=s&&s.nodeAfter;return!o||!Me.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Me.create(t.doc,s.pos)).scrollIntoView()),!0)};function cM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const aye=(t,e)=>{let r=t.selection,n=r instanceof Me,i;if(n){if(r.node.isTextblock||!cl(t.doc,r.from))return!1;i=r.from}else if(i=T0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(Me.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},lye=(t,e)=>{let r=t.selection,n;if(r instanceof Me){if(r.node.isTextblock||!cl(t.doc,r.to))return!1;n=r.to}else if(n=T0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},cye=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&ih(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Tre=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function uM(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const uye=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=uM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ge.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Ore=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof pi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=uM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Le.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},jre=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(vo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&ih(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function dye(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof Me&&e.selection.node.isBlock)return!n.parentOffset||!vo(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),c=n.start(p)==n.pos-(n.depth-p),a=uM(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof Le||e.selection instanceof pi)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=vo(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=vo(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&c&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const hye=dye(),fye=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(Me.create(t.doc,i))),!0)};function pye(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||cl(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function Pre(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&pye(t,e,r))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=Q.empty;for(let y=o.length-1;y>=0;y--)m=Q.from(o[y].create(null,m));m=Q.from(i.copy(m));let g=t.tr.step(new Br(e.pos-1,p,e.pos,p,new me(m,1,0),o.length,!0)),b=g.doc.resolve(p+2*o.length);b.nodeAfter&&b.nodeAfter.type==i.type&&cl(g.doc,b.pos)&&g.join(b.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:Ge.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&ih(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&$d(s,"start",!0)&&$d(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,b=1;for(;!g.isTextblock;g=g.firstChild)b++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=Q.empty;for(let w=m.length-1;w>=0;w--)y=Q.from(m[w].copy(y));let v=t.tr.step(new Br(e.pos-m.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new me(y,m.length,0),0,!0));r(v.scrollIntoView())}return!0}}return!1}function Ire(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(Le.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const mye=Ire(-1),gye=Ire(1);function yye(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&sM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function LF(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(c),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function dM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}dM(aM,Sre,Ere);dM(aM,Cre,kre);dM(Tre,Ore,jre,hye);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function vye(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return bye(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function bye(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Yy(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Yy(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=sM(s,r,n,e);return a?(t&&xye(t,e,a,i,r),!0):!1}function xye(t,e,r,n,i){let s=Q.empty;for(let d=r.length-1;d>=0;d--)s=Q.from(r[d].type.create(r[d].attrs,s));t.step(new Br(e.start-(n?2:0),e.end,e.start,e.end,new me(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),c=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&vo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function wye(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?Sye(e,r,t,s):_ye(e,r,s):!0:!1}}function Sye(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Br(s-1,o,s,o,new me(Q.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Yy(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=ih(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return cl(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function _ye(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?Q.empty:Q.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new Br(h-(a?1:0),f+(l?1:0),h+1,f-1,new me((a?Q.empty:Q.from(i.copy(Q.empty))).append(l?Q.empty:Q.from(i.copy(Q.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function Eye(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,d=Q.from(c?t.create():null),h=new me(Q.from(t.create(null,Q.from(a.type.create(null,d)))),c?3:1,0),f=s.start,p=s.end;r(e.tr.step(new Br(f-(c?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const Zr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Dd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let YP=null;const no=function(t,e,r){let n=YP||(YP=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},Nye=function(){YP=null},Tc=function(t,e,r,n){return r&&(BF(t,e,r,n,-1)||BF(t,e,r,n,1))},Cye=/^(img|br|input|textarea|hr)$/i;function BF(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Ri(t))){let o=t.parentNode;if(!o||o.nodeType!=1||rm(t)||Cye.test(t.nodeName)||t.contentEditable=="false")return!1;e=Zr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Ri(t):0}else return!1}}function Ri(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function kye(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ri(t)}else if(t.parentNode&&!rm(t))e=Zr(t),t=t.parentNode;else return null}}function Tye(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!rm(t))e=Zr(t)+1,t=t.parentNode;else return null}}function Oye(t,e,r){for(let n=e==0,i=e==Ri(t);n||i;){if(t==r)return!0;let s=Zr(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Ri(t)}}function rm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const P0=function(t){return t.focusNode&&Tc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Tl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function jye(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Pye(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Ri(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Ri(n.startContainer),n.startOffset)}}}const Ls=typeof navigator<"u"?navigator:null,zF=typeof document<"u"?document:null,ul=Ls&&Ls.userAgent||"",QP=/Edge\/(\d+)/.exec(ul),Rre=/MSIE \d/.exec(ul),XP=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ul),Jn=!!(Rre||XP||QP),Va=Rre?document.documentMode:XP?+XP[1]:QP?+QP[1]:0,Ai=!Jn&&/gecko\/(\d+)/i.test(ul);Ai&&+(/Firefox\/(\d+)/.exec(ul)||[0,0])[1];const JP=!Jn&&/Chrome\/(\d+)/.exec(ul),qr=!!JP,Mre=JP?+JP[1]:0,mn=!Jn&&!!Ls&&/Apple Computer/.test(Ls.vendor),Ad=mn&&(/Mobile\/\w+/.test(ul)||!!Ls&&Ls.maxTouchPoints>2),Oi=Ad||(Ls?/Mac/.test(Ls.platform):!1),$re=Ls?/Win/.test(Ls.platform):!1,fo=/Android \d/.test(ul),nm=!!zF&&"webkitFontSmoothing"in zF.documentElement.style,Iye=nm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Rye(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Qs(t,e){return typeof t=="number"?t:t[e]}function Mye(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function VF(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=Dd(o);continue}let a=o,l=a==s.body,c=l?Rye(s):Mye(a),d=0,h=0;if(e.top<c.top+Qs(n,"top")?h=-(c.top-e.top+Qs(i,"top")):e.bottom>c.bottom-Qs(n,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Qs(i,"top")-c.top:e.bottom-c.bottom+Qs(i,"bottom")),e.left<c.left+Qs(n,"left")?d=-(c.left-e.left+Qs(i,"left")):e.right>c.right-Qs(n,"right")&&(d=e.right-c.right+Qs(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,b=a.scrollTop-m;e={left:e.left-g,top:e.top-b,right:e.right-g,bottom:e.bottom-b}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Dd(o)}}function $ye(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:Dre(t.dom)}}function Dre(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Dd(n));return e}function Dye({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;Are(r,n==0?0:n-e)}function Are(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let yu=null;function Aye(t){if(t.setActive)return t.setActive();if(yu)return t.focus(yu);let e=Dre(t);t.focus(yu==null?{get preventScroll(){return yu={preventScroll:!0},!0}}:void 0),yu||(yu=!1,Are(e,0))}function Fre(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=no(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?Fye(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:Fre(r,i)}function Fye(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=ea(n,1);if(o.top!=o.bottom&&hM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function hM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function qye(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function Lye(t,e,r){let{node:n,offset:i}=Fre(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function Bye(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function qre(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(hM(e,c))return qre(o,e,c)}}if((s=(s+1)%n)==i)break}return t}function zye(t,e){let r=t.dom.ownerDocument,n,i=0,s=Pye(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!hM(e,c)||(o=qre(t.dom,e,c),!o))return null}if(mn)for(let c=o;n&&c;c=Dd(c))c.draggable&&(n=void 0);if(o=qye(o,e),n){if(Ai&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;nm&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=Bye(t,n,i,e))}a==null&&(a=Lye(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function UF(t){return t.top<t.bottom||t.left<t.right}function ea(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(UF(n))return n}return Array.prototype.find.call(r,UF)||t.getBoundingClientRect()}const Vye=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Lre(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=nm||Ai;if(n.nodeType==3)if(o&&(Vye.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=ea(no(n,i,i),r);if(Ai&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=ea(no(n,i-1,i-1),-1);if(c.top==l.top){let d=ea(no(n,i,i+1),-1);if(d.top!=l.top)return Qh(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,Qh(ea(no(n,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Ri(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return w1(l.getBoundingClientRect(),!1)}if(s==null&&i<Ri(n)){let l=n.childNodes[i];if(l.nodeType==1)return w1(l.getBoundingClientRect(),!0)}return w1(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Ri(n))){let l=n.childNodes[i-1],c=l.nodeType==3?no(l,Ri(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Qh(ea(c,1),!1)}if(s==null&&i<Ri(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?no(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Qh(ea(c,-1),!0)}return Qh(ea(n.nodeType==3?no(n):n,-r),r>=0)}function Qh(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function w1(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function Bre(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function Uye(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return Bre(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Lre(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=no(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const Hye=/[\u0590-\u08ac]/;function Wye(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!Hye.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:Bre(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),b=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(d,h),l&&(l!=d||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),b}):n.pos==n.start()||n.pos==n.end()}let HF=null,WF=null,KF=!1;function Kye(t,e,r){return HF==e&&WF==r?KF:(HF=e,WF=r,KF=r=="up"||r=="down"?Uye(t,e,r):Wye(t,e,r))}const Fi=0,GF=1,Ml=2,Bs=3;class im{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Fi,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>Zr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof Vre){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof zre&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?Zr(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?Zr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let d=o+l.border;if(e>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Zr(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=Zr(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],b=m+g.size;if(s>m&&o<b)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=b}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((Ai||mn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,b;g;g=g.parentNode){if(b=g.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:Zr(b)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Ai&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&mn)&&Tc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Tc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((c.extend||e==r)&&!(h&&Ai)){c.collapse(a.node,a.offset);try{e!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?Ml:GF,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Bs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ml:Bs}n=o}this.dirty=Ml}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Ml:GF;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class zre extends im{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Fi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Gye extends im{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Oc extends im{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Uc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Oc(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Bs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Bs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Fi){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Fi}}slice(e,r,n){let i=Oc.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=eI(s,r,o,n)),e>0&&(s=eI(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ua extends im{constructor(e,r,n,i,s,o,a,l,c){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,h=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=Uc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=Wre(d,n,r),c?l=new Yye(e,r,n,i,d,h||null,f,c,s,o+1):r.isText?new I0(e,r,n,i,d,f,s):new Ua(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,r,n){return this.dirty==Fi&&e.eq(this.node)&&Xy(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Xye(this,o&&o.node,e);eve(this.node,this.innerDeco,(c,d,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Ct.none:this.node.child(d).marks,n,e),l.placeWidget(c,e,i)},(c,d,h,f)=>{l.syncToMarks(c.marks,n,e);let p;l.findNodeMatch(c,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,h,p,e)||l.updateNextNode(c,d,h,e,f,i)||l.addNode(c,d,h,e,i),i+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ml)&&(o&&this.protectLocalComposition(e,o),Ure(this.contentDOM,this.children,e),Ad&&tve(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof Le)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=rve(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Gye(this,s,r,i);e.input.compositionNodes.push(o),this.children=eI(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==Bs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Fi}updateOuterDeco(e){if(Xy(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Hre(this.dom,this.nodeDOM,ZP(this.outerDeco,this.node,r),ZP(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function YF(t,e,r,n,i){Wre(n,e,t);let s=new Ua(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class I0 extends Ua{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==Bs||this.dirty!=Fi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Fi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Fi,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new I0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Bs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Vre extends im{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Fi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Yye extends Ua{constructor(e,r,n,i,s,o,a,l,c,d){super(e,r,n,i,s,o,a,c,d),this.spec=l}update(e,r,n,i){if(this.dirty==Bs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Ure(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=QF(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Oc){let l=n?n.previousSibling:t.lastChild;Ure(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=QF(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const Tf=function(t){t&&(this.nodeName=t)};Tf.prototype=Object.create(null);const $l=[new Tf];function ZP(t,e,r){if(t.length==0)return $l;let n=r?$l[0]:new Tf,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new Tf(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new Tf(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function Hre(t,e,r,n){if(r==$l&&n==$l)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=$l[0]),i=l}Qye(i,a||$l[0],o)}return i}function Qye(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function Wre(t,e,r){return Hre(t,t,$l,ZP(e,r,t.nodeType!=1))}function Xy(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function QF(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Xye{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Jye(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Fi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Oc.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==Bs&&o.dom==o.contentDOM&&(o.dirty=Ml),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ua){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Bs&&Xy(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Ml,h.updateChildren(i,o+1),h.dirty=Fi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Xy(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ua.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Ua.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new zre(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Oc;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof I0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((mn||qr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Vre(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Jye(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof Oc)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function Zye(t,e){return t.type.side-e.type.side}function eve(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);n(d,i,e.forChild(s,d),c),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let b=i[o++];b.widget&&(d?(h||(h=[d])).push(b):d=b)}if(d)if(h){h.sort(Zye);for(let b=0;b<h.length;b++)r(h[b],c,!!l)}else r(d,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let b=m;o<i.length&&i[o].from<b&&(b=i[o].from);for(let y=0;y<a.length;y++)a[y].to<b&&(b=a[y].to);b<m&&(l=f.cut(b-s),f=f.cut(0,b-s),m=b,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(b=>!b.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function tve(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function rve(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=r)return a+c;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function eI(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=r||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-c,l.size,n)))}return s}function fM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(P0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Me.isSelectable(h)&&i.parent&&!(h.isInline&&Oye(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new Me(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=pM(t,d,a,h)}return c}function Kre(t){return t.editable?t.hasFocus():Yre(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function bo(t,e=!1){let r=t.state.selection;if(Gre(t,r),!!Kre(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&qr){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Tc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)ive(t);else{let{anchor:n,head:i}=r,s,o;XF&&!(r instanceof Le)&&(r.$from.parent.inlineContent||(s=JF(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=JF(t,r.to))),t.docView.setSelection(n,i,t,e),XF&&(s&&ZF(s),o&&ZF(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&nve(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const XF=mn||qr&&Mre<63;function JF(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(mn&&i&&i.contentEditable=="false")return S1(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return S1(i);if(s)return S1(s)}}function S1(t){return t.contentEditable="true",mn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ZF(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function nve(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Kre(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function ive(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,Zr(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&Jn&&Va<=11&&(r.disabled=!0,r.disabled=!1)}function Gre(t,e){if(e instanceof Me){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(e4(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else e4(t)}function e4(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function pM(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||Le.between(e,r,n)}function t4(t){return t.editable&&!t.hasFocus()?!1:Yre(t)}function Yre(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function sve(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Tc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function tI(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ge.findFrom(s,e)}function ia(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function r4(t,e,r){let n=t.state.selection;if(n instanceof Le)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ia(t,new Le(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=tI(t.state,e);return i&&i instanceof Me?ia(t,i):!1}else if(!(Oi&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Me.isSelectable(s)?ia(t,new Me(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):nm?ia(t,new Le(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Me&&n.node.isInline)return ia(t,new Le(e>0?n.$to:n.$from));{let i=tI(t.state,e);return i?ia(t,i):!1}}}function Jy(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Of(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function vu(t,e){return e<0?ove(t):ave(t)}function ove(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(Ai&&r.nodeType==1&&n<Jy(r)&&Of(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(Of(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(Qre(r))break;{let a=r.previousSibling;for(;a&&Of(a,-1);)i=r.parentNode,s=Zr(a),a=a.previousSibling;if(a)r=a,n=Jy(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?rI(t,r,n):i&&rI(t,i,s)}function ave(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=Jy(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(Of(a,1))s=r,o=++n;else break}else{if(Qre(r))break;{let a=r.nextSibling;for(;a&&Of(a,1);)s=a.parentNode,o=Zr(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=Jy(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&rI(t,s,o)}function Qre(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function lve(t,e){for(;t&&e==t.childNodes.length&&!rm(t);)e=Zr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function cve(t,e){for(;t&&!e&&!rm(t);)e=Zr(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function rI(t,e,r){if(e.nodeType!=3){let s,o;(o=lve(e,r))?(e=o,r=0):(s=cve(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(P0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&bo(t)},50)}function n4(t,e){let r=t.state.doc.resolve(e);if(!(qr||$re)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function i4(t,e,r){let n=t.state.selection;if(n instanceof Le&&!n.empty||r.indexOf("s")>-1||Oi&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=tI(t.state,e);if(o&&o instanceof Me)return ia(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof pi?Ge.near(o,e):Ge.findFrom(o,e);return a?ia(t,a):!1}return!1}function s4(t,e){if(!(t.state.selection instanceof Le))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function o4(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function uve(t){if(!mn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;o4(t,n,"true"),setTimeout(()=>o4(t,n,"false"),20)}return!1}function dve(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function hve(t,e){let r=e.keyCode,n=dve(e);if(r==8||Oi&&r==72&&n=="c")return s4(t,-1)||vu(t,-1);if(r==46&&!e.shiftKey||Oi&&r==68&&n=="c")return s4(t,1)||vu(t,1);if(r==13||r==27)return!0;if(r==37||Oi&&r==66&&n=="c"){let i=r==37?n4(t,t.state.selection.from)=="ltr"?-1:1:-1;return r4(t,i,n)||vu(t,i)}else if(r==39||Oi&&r==70&&n=="c"){let i=r==39?n4(t,t.state.selection.from)=="ltr"?1:-1:1;return r4(t,i,n)||vu(t,i)}else{if(r==38||Oi&&r==80&&n=="c")return i4(t,-1,n)||vu(t,-1);if(r==40||Oi&&r==78&&n=="c")return uve(t)||i4(t,1,n)||vu(t,1);if(n==(Oi?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function mM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Uc.fromSchema(t.state.schema),a=rne(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,d,h=0;for(;c&&c.nodeType==1&&(d=tne[c.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function Xre(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new me(Q.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Uc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let b=o.appendChild(document.createElement("p"));g&&b.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=gve(r),nm&&yve(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||za.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!fve.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=vve(a4(a,+d[1],+d[2]),d[4]);else if(a=me.maxOpen(pve(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=a4(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const fve=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function pve(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&Zre(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=ene(o[o.length-1],s.length));let d=Jre(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return Q.from(o)}return t}function Jre(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,Q.from(t));return t}function Zre(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Zre(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(Q.from(Jre(r,t,i+1))))}}function ene(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,ene(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(Q.empty,!0);return t.copy(r.append(n))}function nI(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=nI(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Q.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function a4(t,e,r){return e<t.openStart&&(t=new me(nI(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new me(nI(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const tne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let l4=null;function rne(){return l4||(l4=document.implementation.createHTMLDocument("title"))}let _1=null;function mve(t){let e=window.trustedTypes;return e?(_1||(_1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),_1.createHTML(t)):t}function gve(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=rne().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&tne[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=mve(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function yve(t){let e=t.querySelectorAll(qr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function vve(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=Q.from(l.create(n[a+1],i)),s++,o++}return new me(i,s,o)}const On={},jn={},bve={touchstart:!0,touchmove:!0};class xve{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function wve(t){for(let e in On){let r=On[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{_ve(t,n)&&!gM(t,n)&&(t.editable||!(n.type in jn))&&r(t,n)},bve[e]?{passive:!0}:void 0)}mn&&t.dom.addEventListener("input",()=>null),iI(t)}function Oa(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Sve(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function iI(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>gM(t,n))})}function gM(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function _ve(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function Eve(t,e){!gM(t,e)&&On[e.type]&&(t.editable||!(e.type in jn))&&On[e.type](t,e)}jn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!ine(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(fo&&qr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Ad&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Tl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||hve(t,r)?r.preventDefault():Oa(t,"key")};jn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};jn.keypress=(t,e)=>{let r=e;if(ine(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||Oi&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Le)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function R0(t){return{left:t.clientX,top:t.clientY}}function Nve(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function yM(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function td(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function Cve(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Me.isSelectable(n)?(td(t,new Me(r)),!0):!1}function kve(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof Me&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Me.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(td(t,Me.create(t.state.doc,i)),!0):!1}function Tve(t,e,r,n,i){return yM(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?kve(t,r):Cve(t,r))}function Ove(t,e,r,n){return yM(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function jve(t,e,r,n){return yM(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||Pve(t,r,n)}function Pve(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(td(t,Le.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)td(t,Le.create(n,a+1,a+1+o.content.size));else if(Me.isSelectable(o))td(t,Me.create(n,a));else continue;return!0}}function vM(t){return Zy(t)}const nne=Oi?"metaKey":"ctrlKey";On.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=vM(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&Nve(r,t.input.lastClick)&&!r[nne]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(R0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Ive(t,o,r,!!n)):(s=="doubleClick"?Ove:jve)(t,o.pos,o.inside,r)?r.preventDefault():Oa(t,"pointer"))};class Ive{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[nne],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Me&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ai&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Oa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>bo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(R0(e))),this.updateAllowDefault(e),this.allowDefault||!r?Oa(this.view,"pointer"):Tve(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||mn&&this.mightDrag&&!this.mightDrag.node.isAtom||qr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(td(this.view,Ge.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Oa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Oa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}On.touchstart=t=>{t.input.lastTouch=Date.now(),vM(t),Oa(t,"pointer")};On.touchmove=t=>{t.input.lastTouch=Date.now(),Oa(t,"pointer")};On.contextmenu=t=>vM(t);function ine(t,e){return t.composing?!0:mn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Rve=fo?5e3:-1;jn.compositionstart=jn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Le&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||qr&&$re&&Mve(t)))t.markCursor=t.state.storedMarks||r.marks(),Zy(t,!0),t.markCursor=null;else if(Zy(t,!e.selection.empty),Ai&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}sne(t,Rve)};function Mve(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}jn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,sne(t,20))};function sne(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Zy(t),e))}function one(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Dve());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function $ve(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=kye(e.focusNode,e.focusOffset),n=Tye(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function Dve(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Zy(t,e=!1){if(!(fo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),one(t),e||t.docView&&t.docView.dirty){let r=fM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Ave(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const yp=Jn&&Va<15||Ad&&Iye<604;On.copy=jn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=yp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=mM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Ave(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Fve(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function qve(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?vp(t,n.value,null,i,e):vp(t,n.textContent,n.innerHTML,i,e)},50)}function vp(t,e,r,n,i){let s=Xre(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||me.empty)))return!0;if(!s)return!1;let o=Fve(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ane(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}jn.paste=(t,e)=>{let r=e;if(t.composing&&!fo)return;let n=yp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&vp(t,ane(n),n.getData("text/html"),i,r)?r.preventDefault():qve(t,r)};class lne{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const Lve=Oi?"altKey":"ctrlKey";function cne(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[Lve]}On.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(R0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Me?i.to-1:i.to))){if(n&&n.mightDrag)o=Me.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=Me.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:d}=mM(t,a);(!r.dataTransfer.files.length||!qr||Mre>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(yp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",yp||r.dataTransfer.setData("text/plain",c),t.dragging=new lne(d,cne(t,r),o)};On.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};jn.dragover=jn.dragenter=(t,e)=>e.preventDefault();jn.drop=(t,e)=>{try{Bve(t,e,t.dragging)}finally{t.dragging=null}};function Bve(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(R0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=Xre(t,ane(e.dataTransfer),yp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&cne(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||me.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?fre(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&Me.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Me(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,b,y)=>p=y),l.setSelection(pM(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}On.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&bo(t)},20))};On.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};On.beforeinput=(t,e)=>{if(qr&&fo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Tl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in jn)On[t]=jn[t];function bp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class ev{constructor(e,r){this.toDOM=e,this.spec=r||ic,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new kn(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof ev&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&bp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ha{constructor(e,r){this.attrs=e,this.spec=r||ic}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new kn(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Ha&&bp(this.attrs,e.attrs)&&bp(this.spec,e.spec)}static is(e){return e.type instanceof Ha}destroy(){}}class bM{constructor(e,r){this.attrs=e,this.spec=r||ic}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new kn(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof bM&&bp(this.attrs,e.attrs)&&bp(this.spec,e.spec)}destroy(){}}class kn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new kn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new kn(e,e,new ev(r,n))}static inline(e,r,n,i){return new kn(e,r,new Ha(n,i))}static node(e,r,n,i){return new kn(e,r,new bM(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ha}get widget(){return this.type instanceof ev}}const Eu=[],ic={};class Ht{constructor(e,r){this.local=e.length?e:Eu,this.children=r.length?r:Eu}static create(e,r){return r.length?tv(r,e,0,ic):cn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==cn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||ic)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?zve(this.children,o||[],e,r,n,i,s):o?new Ht(o.sort(sc),Eu):cn}add(e,r){return r.length?this==cn?Ht.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let c=l+n,d;if(d=dne(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,c+1):i.splice(s,0,l,l+a.nodeSize,tv(d,a,c+1,ic)),s+=3}});let o=une(s?hne(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ht(o.length?this.local.concat(o).sort(sc):this.local,i||this.children)}remove(e){return e.length==0||this==cn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=cn?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Ht(i,n):cn}forChild(e,r){if(this==cn)return this;if(r.isLeaf)return Ht.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ha){let c=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let a=new Ht(i.sort(sc),Eu);return n?new da([a,n]):a}return n||cn}eq(e){if(this==e)return!0;if(!(e instanceof Ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return xM(this.localsInner(e))}localsInner(e){if(this==cn)return Eu;if(e.inlineContent||!this.local.some(Ha.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ha||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Ht.empty=new Ht([],[]);Ht.removeOverlap=xM;const cn=Ht.empty;class da{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,ic));return da.from(n)}forChild(e,r){if(r.isLeaf)return Ht.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=cn&&(s instanceof da?n=n.concat(s.members):n.push(s))}return da.from(n)}eq(e){if(!(e instanceof da)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?xM(n?r:r.sort(sc)):Eu}static from(e){switch(e.length){case 0:return cn;case 1:return e[0];default:return new da(e.every(r=>r instanceof Ht)?e:e.reduce((r,n)=>r.concat(n instanceof Ht?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function zve(t,e,r,n,i,s,o){let a=t.slice();for(let c=0,d=s;c<r.maps.length;c++){let h=0;r.maps[c].forEach((f,p,m,g)=>{let b=g-m-(p-f);for(let y=0;y<a.length;y+=3){let v=a[y+1];if(v<0||f>v+d-h)continue;let w=a[y]+d-h;p>=w?a[y+1]=f<=w?-2:-1:f>=d&&b&&(a[y]+=b,a[y+1]+=b)}h+=b}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=r.map(t[c]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[c+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),b=n.maybeChild(m);if(b&&g==h&&g+b.nodeSize==p){let y=a[c+2].mapInner(r,b,d+1,t[c]+s+1,o);y!=cn?(a[c]=h,a[c+1]=p,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Vve(a,t,e,r,i,s,o),d=tv(c,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Ht(e.sort(sc),a)}function une(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new kn(i.from+e,i.to+e,i.type))}return r}function Vve(t,e,r,n,i,s,o){function a(l,c){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,c);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function dne(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function hne(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function tv(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let c=dne(t,a,l+r);if(c){s=!0;let d=tv(c,a,r+l+1,n);d!=cn&&i.push(l,l+a.nodeSize,d)}});let o=une(s?hne(t):t,-r).sort(sc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Ht(o,i):cn}function sc(t,e){return t.from-e.from||t.to-e.to}function xM(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),c4(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),c4(e,i,n.copy(s.from,n.to)));break}}}return e}function c4(t,e,r){for(;e<t.length&&sc(r,t[e])>0;)e++;t.splice(e,0,r)}function E1(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=cn&&e.push(n)}),t.cursorWrapper&&e.push(Ht.create(t.state.doc,[t.cursorWrapper.deco])),da.from(e)}const Uve={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Hve=Jn&&Va<=11;class Wve{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Kve{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Wve,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);Jn&&Va<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Hve&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Uve)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(t4(this.view)){if(this.suppressingSelectionUpdates)return bo(this.view);if(Jn&&Va<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Tc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=Dd(s))r.add(s);for(let s=e.anchorNode;s;s=Dd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&t4(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Ai&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||Qve(e,h)!=p)&&f.remove()}}}else if((qr||mn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&P0(n)&&(c=fM(e))&&c.eq(Ge.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,bo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Gve(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||bo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Jn&&Va<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Zr(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Zr(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let u4=new WeakMap,d4=!1;function Gve(t){if(!u4.has(t)&&(u4.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ai,d4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),d4=!0}}function h4(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Tc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Yve(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return h4(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?h4(t,r):null}function Qve(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function Xve(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],P0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),qr&&t.input.lastKeyCode===8)for(let b=s;b>i;b--){let y=n.childNodes[b-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){s=b;break}if(!v||v.size)break}let h=t.state.doc,f=t.someProp("domParser")||za.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Jve,context:p});if(c&&c[0].pos!=null){let b=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=b),m={anchor:b+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function Jve(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(mn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||mn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Zve=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function e0e(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=fM(t,N);if(E&&!t.state.selection.eq(E)){if(qr&&fo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",C=>C(t,Tl(13,"Enter"))))return;let k=t.state.tr.setSelection(E);N=="pointer"?k.setMeta("pointer",!0):N=="key"&&k.scrollIntoView(),s&&k.setMeta("composition",s),t.dispatch(k)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,c=Xve(t,e,r),d=t.state.doc,h=d.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=n0e(h.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(Ad&&t.input.lastIOSEnter>Date.now()-225||fo)&&i.some(N=>N.nodeType==1&&!Zve.test(N.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",N=>N(t,Tl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof Le&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let N=f4(t,t.state.doc,c.sel);if(N&&!N.eq(t.state.selection)){let E=t.state.tr.setSelection(N);s&&E.setMeta("composition",s),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Le&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Jn&&Va<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),b=c.doc.resolveNoCache(m.endB-c.from),y=d.resolve(m.start),v=g.sameParent(b)&&g.parent.inlineContent&&y.end()>=m.endA;if((Ad&&t.input.lastIOSEnter>Date.now()-225&&(!v||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!v&&g.pos<c.doc.content.size&&(!g.sameParent(b)||!g.parent.inlineContent)&&g.pos<b.pos&&!/\S/.test(c.doc.textBetween(g.pos,b.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,Tl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&r0e(d,m.start,m.endA,g,b)&&t.someProp("handleKeyDown",N=>N(t,Tl(8,"Backspace")))){fo&&qr&&t.domObserver.suppressSelectionUpdates();return}qr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),fo&&!v&&g.start()!=b.start()&&b.parentOffset==0&&g.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,b=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,Tl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=N=>{let E=N||t.state.tr.replace(w,x,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let k=f4(t,E.doc,c.sel);k&&!(qr&&t.composing&&k.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==w||k.head==E.mapping.map(x)-1)||Jn&&k.empty&&k.head==w)&&E.setSelection(k)}return s&&E.setMeta("composition",s),E.scrollIntoView()},_;if(v)if(g.pos==b.pos){Jn&&Va<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>bo(t),20));let N=S(t.state.tr.delete(w,x)),E=d.resolve(m.start).marksAcross(d.resolve(m.endA));E&&N.ensureMarks(E),t.dispatch(N)}else if(m.endA==m.endB&&(_=t0e(g.parent.content.cut(g.parentOffset,b.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let N=S(t.state.tr);_.type=="add"?N.addMark(w,x,_.mark):N.removeMark(w,x,_.mark),t.dispatch(N)}else if(g.parent.child(g.index()).isText&&g.index()==b.index()-(b.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,b.parentOffset),E=()=>S(t.state.tr.insertText(N,w,x));t.someProp("handleTextInput",k=>k(t,w,x,N,E))||t.dispatch(E())}else t.dispatch(S());else t.dispatch(S())}function f4(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:pM(t,e.resolve(r.anchor),e.resolve(r.head))}function t0e(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(Q.from(c).eq(t))return{mark:a,type:o}}function r0e(t,e,r,n,i){if(r-e<=i.pos-n.pos||N1(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(N1(s,!0,!0));return!o.parent.isTextblock||o.pos>r||N1(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function N1(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function n0e(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&p4(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&p4(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function p4(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class fne{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new xve,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(b4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=y4(this),g4(this),this.nodeViews=v4(this),this.docView=YF(this.state.doc,m4(this),E1(this),this.dom,this),this.domObserver=new Kve(this,(n,i,s,o)=>e0e(this,n,i,s,o)),this.domObserver.start(),wve(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&iI(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(b4),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(one(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=v4(this);s0e(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&iI(this),this.editable=y4(this),g4(this);let l=E1(this),c=m4(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&$ye(this);if(o){this.domObserver.stop();let p=h&&(Jn||qr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&i0e(i.selection,e.selection);if(h){let m=qr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=$ve(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=YF(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&sve(this))?bo(this,p):(Gre(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&Dye(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Me){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&VF(this,r.getBoundingClientRect(),e)}else VF(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new lne(e.slice,e.move,i<0?void 0:Me.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(Jn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Aye(this.dom),bo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return zye(this,e)}coordsAtPos(e,r=1){return Lre(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return Kye(this,r||this.state,e)}pasteHTML(e,r){return vp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return vp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return mM(this,e)}destroy(){this.docView&&(Sve(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],E1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Nye())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Eve(this,e)}domSelectionRange(){let e=this.domSelection();return e?mn&&this.root.nodeType===11&&jye(this.dom.ownerDocument)==this.dom&&Yve(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}fne.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function m4(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[kn.node(0,t.state.doc.content.size,e)]}function g4(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:kn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function y4(t){return!t.someProp("editable",e=>e(t.state)===!1)}function i0e(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function v4(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function s0e(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function b4(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var tl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o0e=typeof navigator<"u"&&/Mac/.test(navigator.platform),a0e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var en=0;en<10;en++)tl[48+en]=tl[96+en]=String(en);for(var en=1;en<=24;en++)tl[en+111]="F"+en;for(var en=65;en<=90;en++)tl[en]=String.fromCharCode(en+32),rv[en]=String.fromCharCode(en);for(var C1 in tl)rv.hasOwnProperty(C1)||(rv[C1]=tl[C1]);function l0e(t){var e=o0e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||a0e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?rv:tl)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const c0e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),u0e=typeof navigator<"u"&&/Win/.test(navigator.platform);function d0e(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))c0e?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function h0e(t){let e=Object.create(null);for(let r in t)e[d0e(r)]=t[r];return e}function k1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function f0e(t){return new Yt({props:{handleKeyDown:pne(t)}})}function pne(t){let e=h0e(t);return function(r,n){let i=l0e(n),s,o=e[k1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[k1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(u0e&&n.ctrlKey&&n.altKey)&&(s=tl[n.keyCode])&&s!=i){let a=e[k1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var p0e=Object.defineProperty,wM=(t,e)=>{for(var r in e)p0e(t,r,{get:e[r],enumerable:!0})};function M0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var $0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),b=f(...m)(g);return o.push(b),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:M0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},mne={};wM(mne,{blur:()=>m0e,clearContent:()=>g0e,clearNodes:()=>y0e,command:()=>v0e,createParagraphNear:()=>b0e,cut:()=>x0e,deleteCurrentNode:()=>w0e,deleteNode:()=>S0e,deleteRange:()=>_0e,deleteSelection:()=>E0e,enter:()=>N0e,exitCode:()=>C0e,extendMarkRange:()=>k0e,first:()=>T0e,focus:()=>j0e,forEach:()=>P0e,insertContent:()=>I0e,insertContentAt:()=>$0e,joinBackward:()=>F0e,joinDown:()=>A0e,joinForward:()=>q0e,joinItemBackward:()=>L0e,joinItemForward:()=>B0e,joinTextblockBackward:()=>z0e,joinTextblockForward:()=>V0e,joinUp:()=>D0e,keyboardShortcut:()=>H0e,lift:()=>W0e,liftEmptyBlock:()=>K0e,liftListItem:()=>G0e,newlineInCode:()=>Y0e,resetAttributes:()=>Q0e,scrollIntoView:()=>X0e,selectAll:()=>J0e,selectNodeBackward:()=>Z0e,selectNodeForward:()=>ebe,selectParentNode:()=>tbe,selectTextblockEnd:()=>rbe,selectTextblockStart:()=>nbe,setContent:()=>ibe,setMark:()=>Ebe,setMeta:()=>Nbe,setNode:()=>Cbe,setNodeSelection:()=>kbe,setTextDirection:()=>Tbe,setTextSelection:()=>Obe,sinkListItem:()=>jbe,splitBlock:()=>Pbe,splitListItem:()=>Ibe,toggleList:()=>Rbe,toggleMark:()=>Mbe,toggleNode:()=>$be,toggleWrap:()=>Dbe,undoInputRule:()=>Abe,unsetAllMarks:()=>Fbe,unsetMark:()=>qbe,unsetTextDirection:()=>Lbe,updateAttributes:()=>Bbe,wrapIn:()=>zbe,wrapInList:()=>Vbe});var m0e=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),g0e=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),y0e=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,h=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=ih(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},v0e=t=>e=>t(e),b0e=()=>({state:t,dispatch:e})=>Ore(t,e),x0e=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new Le(n.doc.resolve(Math.max(o-1,0)))),!0},w0e=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function _r(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var S0e=t=>({tr:e,state:r,dispatch:n})=>{const i=_r(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},_0e=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},E0e=()=>({state:t,dispatch:e})=>aM(t,e),N0e=()=>({commands:t})=>t.keyboardShortcut("Enter"),C0e=()=>({state:t,dispatch:e})=>uye(t,e);function SM(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function nv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:SM(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function gne(t,e,r={}){return t.find(n=>n.type===e&&nv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function x4(t,e,r={}){return!!gne(t,e,r)}function _M(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!gne([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&x4([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&x4([...t.parent.child(l).marks],e,r);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Lo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var k0e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=Lo(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:c,to:d}=a;if(i){const h=_M(l,s,e);if(h&&h.from<=c&&h.to>=d){const f=Le.create(o,h.from,h.to);r.setSelection(f)}}return!0},T0e=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function yne(t){return t instanceof Le}function Dl(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function vne(t,e=null){if(!e)return null;const r=Ge.atStart(t),n=Ge.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?Le.create(t,Dl(0,i,s),Dl(t.content.size,i,s)):Le.create(t,Dl(e,i,s),Dl(e,i,s))}function w4(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function iv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function O0e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var j0e=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(iv()||w4())&&n.dom.focus(),O0e()&&!iv()&&!w4()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!yne(r.state.selection))return o(),!0;const a=vne(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},P0e=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),I0e=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),bne=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&bne(n)}return t};function wg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return bne(r)}function xp(t,e,r){if(t instanceof Ba||t instanceof Q)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return Q.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),xp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new rre({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?za.fromSchema(l).parseSlice(wg(t),r.parseOptions):za.fromSchema(l).parse(wg(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=za.fromSchema(e);return r.slice?s.parseSlice(wg(t),r.parseOptions).content:s.parse(wg(t),r.parseOptions)}return xp("",e,r)}function R0e(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof Fr||i instanceof Br))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(Ge.near(t.doc.resolve(o),r))}var M0e=t=>!("type"in t),$0e=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=b=>{s.emit("contentError",{editor:s,error:b,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{xp(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(b){l(b)}try{a=xp(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(b){return l(b),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((M0e(a)?a:[a]).forEach(b=>{b.check(),f=f?b.isText&&b.marks.length===0:!1,p=p?b.isBlock:!1}),d===h&&p){const{parent:b}=n.doc.resolve(d);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(b=>b.text||"").join("");else if(e instanceof Q){let b="";e.forEach(y=>{y.text&&(b+=y.text)}),g=b}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const b=n.doc.resolve(d),y=b.node(),v=b.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;v&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&R0e(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},D0e=()=>({state:t,dispatch:e})=>aye(t,e),A0e=()=>({state:t,dispatch:e})=>lye(t,e),F0e=()=>({state:t,dispatch:e})=>Sre(t,e),q0e=()=>({state:t,dispatch:e})=>Cre(t,e),L0e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=T0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},B0e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=T0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},z0e=()=>({state:t,dispatch:e})=>sye(t,e),V0e=()=>({state:t,dispatch:e})=>oye(t,e);function xne(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function U0e(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))iv()||xne()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var H0e=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=U0e(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,a))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function rl(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?_r(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>nv(h.node.attrs,r,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}var W0e=(t,e={})=>({state:r,dispatch:n})=>{const i=_r(t,r.schema);return rl(r,i,e)?cye(r,n):!1},K0e=()=>({state:t,dispatch:e})=>jre(t,e),G0e=t=>({state:e,dispatch:r})=>{const n=_r(t,e.schema);return wye(n)(e,r)},Y0e=()=>({state:t,dispatch:e})=>Tre(t,e);function D0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function S4(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var Q0e=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=D0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=_r(t,n.schema)),a==="mark"&&(o=Lo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,S4(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(S4(f.attrs,e))))})})}),l},X0e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),J0e=()=>({tr:t,dispatch:e})=>{if(e){const r=new pi(t.doc);t.setSelection(r)}return!0},Z0e=()=>({state:t,dispatch:e})=>Ere(t,e),ebe=()=>({state:t,dispatch:e})=>kre(t,e),tbe=()=>({state:t,dispatch:e})=>fye(t,e),rbe=()=>({state:t,dispatch:e})=>gye(t,e),nbe=()=>({state:t,dispatch:e})=>mye(t,e);function sI(t,e,r={},n={}){return xp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var ibe=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const c=sI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function wne(t,e){const r=Lo(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function Sne(t,e){const r=new vre(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function sbe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function obe(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function abe(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function A0(t){return e=>abe(e.$from,t)}function je(t,e,r){return t.config[e]===void 0&&t.parent?je(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?je(t.parent,e,r):null}):t.config[e]}function EM(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=je(e,"addExtensions",r);return n?[e,...EM(n())]:e}).flat(10)}function NM(t,e){const r=Uc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function _ne(t){return typeof t=="function"}function bt(t,e=void 0,...r){return _ne(t)?e?t.bind(e)(...r):t(...r):t}function lbe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Fd(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function Ene(t){const e=[],{nodeExtensions:r,markExtensions:n}=Fd(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=je(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=je(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function Er(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],c=a.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),n[i]=Array.from(c.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function wp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Er(r,n),{})}function cbe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function _4(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):cbe(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function E4(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&lbe(r)?!1:r!=null))}function N4(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function ube(t,e){var r;const n=Ene(t),{nodeExtensions:i,markExtensions:s}=Fd(t),o=(r=i.find(c=>je(c,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(c=>{const d=n.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,v)=>{const w=je(v,"extendNodeSchema",h);return{...y,...w?w(c):{}}},{}),p=E4({...f,content:bt(je(c,"content",h)),marks:bt(je(c,"marks",h)),group:bt(je(c,"group",h)),inline:bt(je(c,"inline",h)),atom:bt(je(c,"atom",h)),selectable:bt(je(c,"selectable",h)),draggable:bt(je(c,"draggable",h)),code:bt(je(c,"code",h)),whitespace:bt(je(c,"whitespace",h)),linebreakReplacement:bt(je(c,"linebreakReplacement",h)),defining:bt(je(c,"defining",h)),isolating:bt(je(c,"isolating",h)),attrs:Object.fromEntries(d.map(N4))}),m=bt(je(c,"parseHTML",h));m&&(p.parseDOM=m.map(y=>_4(y,d)));const g=je(c,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:wp(y,d)}));const b=je(c,"renderText",h);return b&&(p.toText=b),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const d=n.filter(b=>b.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((b,y)=>{const v=je(y,"extendMarkSchema",h);return{...b,...v?v(c):{}}},{}),p=E4({...f,inclusive:bt(je(c,"inclusive",h)),excludes:bt(je(c,"excludes",h)),group:bt(je(c,"group",h)),spanning:bt(je(c,"spanning",h)),code:bt(je(c,"code",h)),attrs:Object.fromEntries(d.map(N4))}),m=bt(je(c,"parseHTML",h));m&&(p.parseDOM=m.map(b=>_4(b,d)));const g=je(c,"renderHTML",h);return g&&(p.toDOM=b=>g({mark:b,HTMLAttributes:wp(b,d)})),[c.name,p]}));return new rre({topNode:o,nodes:a,marks:l})}function dbe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function sv(t){return t.sort((r,n)=>{const i=je(r,"priority")||100,s=je(n,"priority")||100;return i>s?-1:i<s?1:0})}function Nne(t){const e=sv(EM(t)),r=dbe(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function Cne(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,c,d,h)=>{var f;l.isBlock&&c>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:c,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,c)-c,i-c))}),a}function hbe(t,e){const r={from:0,to:t.content.size};return Cne(t,r,e)}function kne(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function fbe(t,e){const r=_r(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function Tne(t,e){const r=D0(typeof e=="string"?e:e.name,t.schema);return r==="node"?fbe(t,e):r==="mark"?wne(t,e):{}}function pbe(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function mbe(t){const e=pbe(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function One(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(c,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:c,to:d}})})}),mbe(n)}function CM(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=_M(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var gbe=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function Sg(t,e){return e.nodes[t]||e.marks[t]||null}function sy(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var ybe=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function oI(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?Lo(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>nv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,b)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,b),v=Math.min(m,b+g.nodeSize),w=v-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:v})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>nv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function vbe(t,e,r={}){if(!e)return rl(t,null,r)||oI(t,null,r);const n=D0(e,t.schema);return n==="node"?rl(t,e,r):n==="mark"?oI(t,e,r):!1}var bbe=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=A0(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},xbe=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function C4(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function k4(t,e){const{nodeExtensions:r}=Fd(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=bt(je(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function F0(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(F0(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function jne(t){return t instanceof Me}var Pne=class Ine{constructor(e){this.position=e}static fromJSON(e){return new Ine(e.position)}toJSON(){return{position:this.position}}};function wbe(t,e){const r=e.mapping.mapResult(t.position);return{position:new Pne(r.pos),mapResult:r}}function Sbe(t){return new Pne(t)}function _be(t,e,r){var n;const{selection:i}=e;let s=null;if(yne(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(c=>c.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(c)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));c=p&&m}return!c}),c})}var Ebe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=Lo(t,n.schema);if(i)if(o){const c=wne(n,l);r.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return _be(n,r,l)},Nbe=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),Cbe=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=_r(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>LF(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>LF(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},kbe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Dl(t,0,n.content.size),s=Me.create(n,i);e.setSelection(s)}return!0},Tbe=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},Obe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Le.atStart(n).from,a=Le.atEnd(n).to,l=Dl(i,o,a),c=Dl(s,o,a),d=Le.create(n,l,c);e.setSelection(d)}return!0},jbe=t=>({state:e,dispatch:r})=>{const n=_r(t,e.schema);return Eye(n)(e,r)};function T4(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var Pbe=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=sy(c,a.node().type.name,a.node().attrs);if(s instanceof Me&&s.node.isBlock)return!a.parentOffset||!vo(o,a.pos)?!1:(n&&(t&&T4(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:sbe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=vo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&vo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof Le&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&T4(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},Ibe=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=_r(t,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=Q.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-v;E>=l.depth-3;E-=1)y=Q.from(l.node(E).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...sy(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(Q.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(v-1));r.replace(_,l.after(-w),new me(y,4-v,0));let N=-1;r.doc.nodesBetween(_,r.doc.content.size,(E,k)=>{if(N>-1)return!1;E.isTextblock&&E.content.size===0&&(N=k+1)}),N>-1&&r.setSelection(Le.near(r.doc.resolve(N))),r.scrollIntoView()}return!0}const p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...sy(f,h.type.name,h.attrs),...e},g={...sy(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,c.pos);const b=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!vo(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:v}=n,{splittableMarks:w}=s.extensionManager,x=v||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,b).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},T1=(t,e)=>{const r=A0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&cl(t.doc,r.pos)&&t.join(r.pos),!0},O1=(t,e)=>{const r=A0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&cl(t.doc,n)&&t.join(n),!0},Rbe=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=_r(t,o.schema),m=_r(e,o.schema),{selection:g,storedMarks:b}=o,{$from:y,$to:v}=g,w=y.blockRange(v),x=b||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=A0(_=>k4(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if(k4(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>T1(s,p)).command(()=>O1(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:c.clearNodes()).wrapInList(p,n).command(()=>T1(s,p)).command(()=>O1(s,p)).run():l().command(()=>{const _=d().wrapInList(p,n),N=x.filter(E=>f.includes(E.type.name));return s.ensureMarks(N),_?!0:c.clearNodes()}).wrapInList(p,n).command(()=>T1(s,p)).command(()=>O1(s,p)).run()},Mbe=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=Lo(t,n.schema);return oI(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},$be=(t,e,r={})=>({state:n,commands:i})=>{const s=_r(t,n.schema),o=_r(e,n.schema),a=rl(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},Dbe=(t,e={})=>({state:r,commands:n})=>{const i=_r(t,r.schema);return rl(r,i,e)?n.lift(i):n.wrapIn(i,e)},Abe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Fbe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},qbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=Lo(t,n.schema),{$from:c,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=c.marks().find(b=>b.type===l))==null?void 0:s.attrs,g=_M(c,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},Lbe=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},Bbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=D0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=_r(t,n.schema)),a==="mark"&&(o=Lo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(b,y)=>{s&&s===b.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+b.nodeSize,h),f=y,p=b)}):n.doc.nodesBetween(d,h,(b,y)=>{y<d&&s&&s===b.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+b.nodeSize,h),f=y,p=b),y>=d&&y<=h&&(s&&s===b.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...b.attrs,...e})),o&&b.marks.length&&b.marks.forEach(v=>{if(o===v.type&&(l=!0,i)){const w=Math.max(y,d),x=Math.min(y+b.nodeSize,h);r.addMark(w,x,o.create({...v.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(b=>{o===b.type&&i&&r.addMark(m,g,o.create({...b.attrs,...e}))}))}),l},zbe=(t,e={})=>({state:r,dispatch:n})=>{const i=_r(t,r.schema);return yye(i,e)(r,n)},Vbe=(t,e={})=>({state:r,dispatch:n})=>{const i=_r(t,r.schema);return vye(i,e)(r,n)},Ube=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},q0=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},Hbe=(t,e)=>{if(SM(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function _g(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=ybe(c)+s;return o.forEach(f=>{if(d)return;const p=Hbe(h,f.find);if(!p)return;const m=l.state.tr,g=M0({state:l.state,transaction:m}),b={from:n-(p[0].length-s.length),to:i},{commands:y,chain:v,can:w}=new $0({editor:r,state:g});f.handler({state:g,range:b,match:p,commands:y,chain:v,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function Wbe(t){const{editor:e,rules:r}=t,n=new Yt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=NM(Q.from(d),o.schema);const{from:h}=l,f=h+d.length;_g({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return _g({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&_g({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?_g({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function Kbe(t){return Object.prototype.toString.call(t).slice(8,-1)}function Eg(t){return Kbe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Rne(t,e){const r={...t};return Eg(t)&&Eg(e)&&Object.keys(e).forEach(n=>{Eg(e[n])&&Eg(t[n])?r[n]=Rne(t[n],e[n]):r[n]=e[n]}),r}var kM=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...bt(je(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...bt(je(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Rne(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Hc=class Mne extends kM{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new Mne(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Gbe(t){return typeof t=="number"}var Ybe=class{constructor(t){this.find=t.find,this.handler=t.handler}},Qbe=(t,e,r)=>{if(SM(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Xbe(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new $0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,b,y,v,w;if((b=(g=p.type)==null?void 0:g.spec)!=null&&b.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(v=(y=p.content)==null?void 0:y.size)!=null?v:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const N=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");Qbe(N,s.find,o).forEach(k=>{if(k.index===void 0)return;const C=S+k.index+1,O=C+k[0].length,j={from:r.tr.mapping.map(C),to:r.tr.mapping.map(O)},P=s.handler({state:r,range:j,match:k,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});h.push(P)})}),h.every(p=>p!==null)}var Ng=null,Jbe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function Zbe(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,b=M0({state:d,transaction:g});if(!(!Xbe({editor:e,state:b,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Yt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(Ng=e)},p=()=>{Ng&&(Ng=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=Ng;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,b=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),v=!!y;if(!g&&!b&&!v)return;if(v){let{text:S}=y;typeof S=="string"?S=S:S=NM(Q.from(S),p.schema);const{from:_}=y,N=_+S.length,E=Jbe(S);return l({rule:d,state:p,from:_,to:{b:N},pasteEvt:E})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!Gbe(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var L0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Nne(t),this.schema=ube(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Sg(e.name,this.schema)},n=je(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return sv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Sg(n.name,this.schema)},s=[],o=je(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&je(n,"exitable",i)&&(a.ArrowRight=()=>Hc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=f0e(a);s.push(l);const c=je(n,"addInputRules",i);if(C4(n,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=Wbe({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=je(n,"addPasteRules",i);if(C4(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=Zbe({editor:t,rules:f});s.push(...p)}}const h=je(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return Ene(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Fd(this.extensions);return Object.fromEntries(e.filter(r=>!!je(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:_r(r.name,this.schema)},s=je(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,d,h,f)=>{const p=wp(l,n);return o({node:l,view:c,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return sv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Sg(i.name,this.schema)},o=je(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Fd(this.extensions);return Object.fromEntries(e.filter(r=>!!je(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Lo(r.name,this.schema)},s=je(r,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const d=wp(a,n);return s()({mark:a,view:l,inline:c,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{f1e(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Sg(e.name,this.schema)};e.type==="mark"&&((r=bt(je(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=je(e,"onBeforeCreate",n),s=je(e,"onCreate",n),o=je(e,"onUpdate",n),a=je(e,"onSelectionUpdate",n),l=je(e,"onTransaction",n),c=je(e,"onFocus",n),d=je(e,"onBlur",n),h=je(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};L0.resolve=Nne;L0.sort=sv;L0.flatten=EM;var e1e={};wM(e1e,{ClipboardTextSerializer:()=>Dne,Commands:()=>Ane,Delete:()=>Fne,Drop:()=>qne,Editable:()=>Lne,FocusEvents:()=>zne,Keymap:()=>Vne,Paste:()=>Une,Tabindex:()=>Hne,TextDirection:()=>Wne,focusEventsPluginKey:()=>Bne});var pr=class $ne extends kM{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new $ne(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},Dne=pr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Yt({key:new Rr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=kne(r);return Cne(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Ane=pr.create({name:"commands",addCommands(){return{...mne}}}),Fne=pr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=Sne(t.before,[t,...e]);One(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const b=g+m.nodeSize-2,y=p.oldRange.from<=g&&b<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:b,newFrom:d.mapping.map(g),newTo:d.mapping.map(b),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,b;if(p instanceof cs){const y=f.slice(m).map(p.from,-1),v=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(v),S=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(N=>N.eq(p.mark)),_=(b=d.doc.nodeAt(v))==null?void 0:b.marks.some(N=>N.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:v},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),qne=pr.create({name:"drop",addProseMirrorPlugins(){return[new Yt({key:new Rr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),Lne=pr.create({name:"editable",addProseMirrorPlugins(){return[new Yt({key:new Rr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Bne=new Rr("focusEvents"),zne=pr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Yt({key:Bne,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),Vne=pr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,b=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?b===h.pos:Ge.atStart(c).from===f;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return iv()||xne()?s:i},addProseMirrorPlugins(){return[new Yt({key:new Rr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=Ge.atStart(e.doc).from,c=Ge.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!F0(r.doc))return;const f=r.tr,p=M0({state:r,transaction:f}),{commands:m}=new $0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),Une=pr.create({name:"paste",addProseMirrorPlugins(){return[new Yt({key:new Rr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),Hne=pr.create({name:"tabindex",addProseMirrorPlugins(){return[new Yt({key:new Rr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Wne=pr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Fd(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Yt({key:new Rr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),t1e=class Nu{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Nu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Nu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Nu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Nu(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Nu(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},r1e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function n1e(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var i1e=class extends Ube{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:wbe,createMappablePosition:Sbe},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=vne(e,this.options.autofocus);this.editorState=Lu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=n1e(r1e,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=_ne(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[Lne,Dne.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Ane,zne,Vne,Hne,qne,Une,Fne,Wne.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new L0(n,this)}createCommandManager(){this.commandManager=new $0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=sI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=sI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new fne(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return Tne(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return vbe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return NM(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return hbe(this.state.doc,{blockSeparator:e,textSerializers:{...kne(this.schema),...r}})}get isEmpty(){return F0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new t1e(e,this)}get $doc(){return this.$pos(0)}};function qd(t){return new q0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=bt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),c=r.from+a.indexOf(o),d=c+o.length;if(CM(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;d<r.to&&s.delete(d,r.to),c>r.from&&s.delete(r.from+l,c);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function s1e(t){return new q0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=bt(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=o+c;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function aI(t){return new q0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=bt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function Ld(t){return new q0({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=bt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),c=l&&sM(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(b=>p.includes(b.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&cl(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function o1e(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Me){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var a1e={};wM(a1e,{createAtomBlockMarkdownSpec:()=>l1e,createBlockMarkdownSpec:()=>c1e,createInlineMarkdownSpec:()=>h1e,parseAttributes:()=>TM,parseIndentedBlocks:()=>lI,renderNestedMarkdownContent:()=>jM,serializeAttributes:()=>OM});function TM(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));e.class=c.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,c,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[c]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function OM(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function l1e(t){const{nodeName:e,name:r,parseAttributes:n=TM,serializeAttributes:i=OM,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,c=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",b=n(g);if(!o.find(v=>!(v in b)))return{type:e,raw:m[0],attributes:b}}},renderMarkdown:d=>{const h=c(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function c1e(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=TM,serializeAttributes:s=OM,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=h.match(g);if(!b)return;const[y,v=""]=b,w=i(v);let x=1;const S=y.length;let _="";const N=/^:::([\w-]*)(\s.*)?/gm,E=h.slice(S);for(N.lastIndex=0;;){const k=N.exec(E);if(k===null)break;const C=k.index,O=k[1];if(!((m=k[2])!=null&&m.endsWith(":::"))){if(O)x+=1;else if(x-=1,x===0){const j=E.slice(0,C);_=j.trim();const P=h.slice(0,S+C+k[0].length);let A=[];if(_)if(a==="block")for(A=p.blockTokens(j),A.forEach(q=>{q.text&&(!q.tokens||q.tokens.length===0)&&(q.tokens=p.inlineTokens(q.text))});A.length>0;){const q=A[A.length-1];if(q.type==="paragraph"&&(!q.text||q.text.trim()===""))A.pop();else break}else A=p.inlineTokens(_);return{type:e,raw:P,attributes:w,content:_,tokens:A}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",b=f.renderChildren(h.content||[],`

`);return`:::${c}${g}

${b}

:::`}}}function u1e(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function d1e(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function h1e(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=u1e,serializeAttributes:s=d1e,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,b=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(b!==void 0&&y===b)return;p[g]=y}}),p},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),b=f.match(g);if(!b)return;let y="",v="";if(a){const[,x]=b;v=x}else{const[,x,S]=b;v=x,y=S||""}const w=i(v.trim());return{type:e,raw:b[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(f.attrs||{}),g=s(m),b=g?` ${g}`:"";return a?`[${c}${b}]`:`[${c}${b}]${p}[/${c}]`}}}function lI(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let c="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:b}=m;c=`${c}${f}
`;const y=[b];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const N=a.slice(d+1).findIndex(C=>C.trim()!=="");if(N===-1)break;if((((i=(n=a[d+1+N].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),c=`${c}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),c=`${c}${S}
`,d+=1;else break}let v;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?v=e.customNestedParser(S):v=r.blockTokens(S))}const x=e.createToken(m,v);l.push(x)}if(l.length!==0)return{items:l,raw:c}}function jM(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const d=e.renderChildren([c]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function f1e(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(c,d,t.type),s.addMark(c,d,p)}}),s.docChanged&&e.view.dispatch(s)}var vi=class Kne extends kM{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new Kne(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function jc(t){return new Ybe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=bt(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let c=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(CM(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),c=r.from+d+a.length,o.addMark(r.from+d,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:p1e,getOwnPropertySymbols:m1e}=Object,{hasOwnProperty:g1e}=Object.prototype;function j1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function Cg(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function y1e(t){return t!=null?t[Symbol.toStringTag]:void 0}function O4(t){return p1e(t).concat(m1e(t))}const v1e=Object.hasOwn||((t,e)=>g1e.call(t,e));function Wc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const b1e="__v",x1e="__o",w1e="_owner",{getOwnPropertyDescriptor:j4,keys:P4}=Object;function S1e(t,e){return t.byteLength===e.byteLength&&ov(new Uint8Array(t),new Uint8Array(e))}function _1e(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function E1e(t,e){return t.byteLength===e.byteLength&&ov(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function N1e(t,e){return Wc(t.getTime(),e.getTime())}function C1e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function k1e(t,e){return t===e}function I4(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const c=e.entries();let d=!1,h=0;for(;(a=c.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const T1e=Wc;function O1e(t,e,r){const n=P4(t);let i=n.length;if(P4(e).length!==i)return!1;for(;i-- >0;)if(!Gne(t,e,r,n[i]))return!1;return!0}function Xh(t,e,r){const n=O4(t);let i=n.length;if(O4(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!Gne(t,e,r,s)||(o=j4(t,s),a=j4(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function j1e(t,e){return Wc(t.valueOf(),e.valueOf())}function P1e(t,e){return t.source===e.source&&t.flags===e.flags}function R4(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let c=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function ov(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function I1e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Gne(t,e,r,n){return(n===w1e||n===x1e||n===b1e)&&(t.$$typeof||e.$$typeof)?!0:v1e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const R1e="[object ArrayBuffer]",M1e="[object Arguments]",$1e="[object Boolean]",D1e="[object DataView]",A1e="[object Date]",F1e="[object Error]",q1e="[object Map]",L1e="[object Number]",B1e="[object Object]",z1e="[object RegExp]",V1e="[object Set]",U1e="[object String]",H1e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},W1e="[object URL]",K1e=Object.prototype.toString;function G1e({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(b,y,v){if(b===y)return!0;if(b==null||y==null)return!1;const w=typeof b;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(b,y,v):w==="function"?s(b,y,v):!1;const x=b.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(b,y,v);if(Array.isArray(b))return e(b,y,v);if(x===Date)return n(b,y,v);if(x===RegExp)return d(b,y,v);if(x===Map)return o(b,y,v);if(x===Set)return h(b,y,v);const S=K1e.call(b);if(S===A1e)return n(b,y,v);if(S===z1e)return d(b,y,v);if(S===q1e)return o(b,y,v);if(S===V1e)return h(b,y,v);if(S===B1e)return typeof b.then!="function"&&typeof y.then!="function"&&l(b,y,v);if(S===W1e)return p(b,y,v);if(S===F1e)return i(b,y,v);if(S===M1e)return l(b,y,v);if(H1e[S])return f(b,y,v);if(S===R1e)return t(b,y,v);if(S===D1e)return r(b,y,v);if(S===$1e||S===L1e||S===U1e)return c(b,y,v);if(m){let _=m[S];if(!_){const N=y1e(b);N&&(_=m[N])}if(_)return _(b,y,v)}return!1}}function Y1e({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:S1e,areArraysEqual:r?Xh:_1e,areDataViewsEqual:E1e,areDatesEqual:N1e,areErrorsEqual:C1e,areFunctionsEqual:k1e,areMapsEqual:r?j1(I4,Xh):I4,areNumbersEqual:T1e,areObjectsEqual:r?Xh:O1e,arePrimitiveWrappersEqual:j1e,areRegExpsEqual:P1e,areSetsEqual:r?j1(R4,Xh):R4,areTypedArraysEqual:r?j1(ov,Xh):ov,areUrlsEqual:I1e,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=Cg(n.areArraysEqual),s=Cg(n.areMapsEqual),o=Cg(n.areObjectsEqual),a=Cg(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function Q1e(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function X1e({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:c,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const J1e=dl();dl({strict:!0});dl({circular:!0});dl({circular:!0,strict:!0});dl({createInternalComparator:()=>Wc});dl({strict:!0,createInternalComparator:()=>Wc});dl({circular:!0,createInternalComparator:()=>Wc});dl({circular:!0,createInternalComparator:()=>Wc,strict:!0});function dl(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=Y1e(t),o=G1e(s),a=r?r(o):Q1e(o);return X1e({circular:e,comparator:o,createState:n,equals:a,strict:i})}var Yne={exports:{}},Qne={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0=T,Z1e=rM;function exe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var txe=typeof Object.is=="function"?Object.is:exe,rxe=Z1e.useSyncExternalStore,nxe=B0.useRef,ixe=B0.useEffect,sxe=B0.useMemo,oxe=B0.useDebugValue;Qne.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=nxe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=sxe(function(){function l(p){if(!c){if(c=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,txe(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=rxe(t,s[0],s[1]);return ixe(function(){o.hasValue=!0,o.value=a},[a]),oxe(a),a};Yne.exports=Qne;var axe=Yne.exports,lxe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},cxe=({contentComponent:t})=>{const e=rM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(e)})};function uxe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:cue.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var dxe=class extends Ae.Component{constructor(t){var e;super(t),this.editorContentRef=Ae.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=uxe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:lxe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&u.jsx(cxe,{contentComponent:t.contentComponent})]})}},hxe=T.forwardRef((t,e)=>{const r=Ae.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ae.createElement(dxe,{key:r,innerRef:e,...t})}),fxe=Ae.memo(hxe),pxe=typeof window<"u"?T.useLayoutEffect:T.useEffect,mxe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function gxe(t){var e;const[r]=T.useState(()=>new mxe(t.editor)),n=axe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:J1e);return pxe(()=>r.watch(t.editor),[t.editor,r]),T.useDebugValue(n),n}var yxe=!1,cI=typeof window>"u",vxe=cI||!!(typeof window<"u"&&window.next),bxe=class Xne{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?cI||vxe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new i1e(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Xne.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function xxe(t={},e=[]){const r=T.useRef(t);r.current=t;const[n]=T.useState(()=>new bxe(r)),i=rM.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return T.useDebugValue(i),T.useEffect(n.onRender(e)),gxe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var wxe=T.createContext({editor:null});wxe.Consumer;var Sxe=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),_xe=()=>T.useContext(Sxe);Ae.forwardRef((t,e)=>{const{onDragStart:r}=_xe(),n=t.as||"div";return u.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});Ae.createContext({markViewContentRef:()=>{}});var av=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},Exe=/^\s*>\s$/,Nxe=vi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return av("blockquote",{...Er(this.options.HTMLAttributes,t),children:av("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ld({find:Exe,type:this.type})]}}),Cxe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,kxe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Txe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Oxe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,jxe=Hc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return av("strong",{...Er(this.options.HTMLAttributes,t),children:av("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[qd({find:Cxe,type:this.type}),qd({find:Txe,type:this.type})]},addPasteRules(){return[jc({find:kxe,type:this.type}),jc({find:Oxe,type:this.type})]}}),Pxe=/(^|[^`])`([^`]+)`(?!`)$/,Ixe=/(^|[^`])`([^`]+)`(?!`)/g,Rxe=Hc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[qd({find:Pxe,type:this.type})]},addPasteRules(){return[jc({find:Ixe,type:this.type})]}}),P1=4,Mxe=/^```([a-z]+)?[\s\n]$/,$xe=/^~~~([a-z]+)?[\s\n]$/,Dxe=vi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:P1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Er(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:P1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:d}=i,p=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:P1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const b=c-d;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=b){m=_;break}g+=p[_].length+1}const v=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(v.length,r);if(w===0)return!0;let x=d;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),c-x<=w&&a.setSelection(Le.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,f=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",b=Math.min(g.length,r);return p.slice(b)}).join(`
`);return a.replaceWith(l,c,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Ge.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[aI({find:Mxe,type:this.type,getAttributes:t=>({language:t[1]})}),aI({find:$xe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Yt({key:new Rr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Le.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Axe=vi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Fxe=vi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Er(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),qxe=vi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Er(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>aI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),Lxe=vi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Er(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!o1e(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return jne(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Le.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Me.create(o.doc,l.pos)):o.setSelection(Le.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(c,h),o.setSelection(Le.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[s1e({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Bxe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,zxe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Vxe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Uxe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Hxe=Hc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Er(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[qd({find:Bxe,type:this.type}),qd({find:Vxe,type:this.type})]},addPasteRules(){return[jc({find:zxe,type:this.type}),jc({find:Uxe,type:this.type})]}});const Wxe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Kxe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",uI="numeric",dI="ascii",hI="alpha",jf="asciinumeric",ff="alphanumeric",fI="domain",Jne="emoji",Gxe="scheme",Yxe="slashscheme",I1="whitespace";function Qxe(t,e){return t in e||(e[t]=[]),e[t]}function Al(t,e,r){e[uI]&&(e[jf]=!0,e[ff]=!0),e[dI]&&(e[jf]=!0,e[hI]=!0),e[jf]&&(e[ff]=!0),e[hI]&&(e[ff]=!0),e[ff]&&(e[fI]=!0),e[Jne]&&(e[fI]=!0);for(const n in e){const i=Qxe(n,r);i.indexOf(t)<0&&i.push(t)}}function Xxe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Vn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Vn.groups={};Vn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Vn.groups;let i;return e&&e.j?i=e:(i=new Vn(e),r&&n&&Al(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Vn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Vn,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Vn,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(Xxe(o.t,n),r);Al(s,l,n)}else r&&Al(s,r,n);o.t=s}return i.j[t]=o,o}};const Ke=(t,e,r,n,i)=>t.ta(e,r,n,i),er=(t,e,r,n,i)=>t.tr(e,r,n,i),M4=(t,e,r,n,i)=>t.ts(e,r,n,i),ee=(t,e,r,n,i)=>t.tt(e,r,n,i),to="WORD",pI="UWORD",Zne="ASCIINUMERICAL",eie="ALPHANUMERICAL",Sp="LOCALHOST",mI="TLD",gI="UTLD",oy="SCHEME",Cu="SLASH_SCHEME",PM="NUM",yI="WS",IM="NL",Pf="OPENBRACE",If="CLOSEBRACE",lv="OPENBRACKET",cv="CLOSEBRACKET",uv="OPENPAREN",dv="CLOSEPAREN",hv="OPENANGLEBRACKET",fv="CLOSEANGLEBRACKET",pv="FULLWIDTHLEFTPAREN",mv="FULLWIDTHRIGHTPAREN",gv="LEFTCORNERBRACKET",yv="RIGHTCORNERBRACKET",vv="LEFTWHITECORNERBRACKET",bv="RIGHTWHITECORNERBRACKET",xv="FULLWIDTHLESSTHAN",wv="FULLWIDTHGREATERTHAN",Sv="AMPERSAND",_v="APOSTROPHE",Ev="ASTERISK",sa="AT",Nv="BACKSLASH",Cv="BACKTICK",kv="CARET",ha="COLON",RM="COMMA",Tv="DOLLAR",Ss="DOT",Ov="EQUALS",MM="EXCLAMATION",Ni="HYPHEN",Rf="PERCENT",jv="PIPE",Pv="PLUS",Iv="POUND",Mf="QUERY",$M="QUOTE",tie="FULLWIDTHMIDDLEDOT",DM="SEMI",_s="SLASH",$f="TILDE",Rv="UNDERSCORE",rie="EMOJI",Mv="SYM";var nie=Object.freeze({__proto__:null,ALPHANUMERICAL:eie,AMPERSAND:Sv,APOSTROPHE:_v,ASCIINUMERICAL:Zne,ASTERISK:Ev,AT:sa,BACKSLASH:Nv,BACKTICK:Cv,CARET:kv,CLOSEANGLEBRACKET:fv,CLOSEBRACE:If,CLOSEBRACKET:cv,CLOSEPAREN:dv,COLON:ha,COMMA:RM,DOLLAR:Tv,DOT:Ss,EMOJI:rie,EQUALS:Ov,EXCLAMATION:MM,FULLWIDTHGREATERTHAN:wv,FULLWIDTHLEFTPAREN:pv,FULLWIDTHLESSTHAN:xv,FULLWIDTHMIDDLEDOT:tie,FULLWIDTHRIGHTPAREN:mv,HYPHEN:Ni,LEFTCORNERBRACKET:gv,LEFTWHITECORNERBRACKET:vv,LOCALHOST:Sp,NL:IM,NUM:PM,OPENANGLEBRACKET:hv,OPENBRACE:Pf,OPENBRACKET:lv,OPENPAREN:uv,PERCENT:Rf,PIPE:jv,PLUS:Pv,POUND:Iv,QUERY:Mf,QUOTE:$M,RIGHTCORNERBRACKET:yv,RIGHTWHITECORNERBRACKET:bv,SCHEME:oy,SEMI:DM,SLASH:_s,SLASH_SCHEME:Cu,SYM:Mv,TILDE:$f,TLD:mI,UNDERSCORE:Rv,UTLD:gI,UWORD:pI,WORD:to,WS:yI});const Xs=/[a-z]/,Jh=new RegExp("\\p{L}","u"),R1=new RegExp("\\p{Emoji}","u"),Js=/\d/,M1=/\s/,$4="\r",$1=`
`,Jxe="",Zxe="",D1="";let kg=null,Tg=null;function ewe(t=[]){const e={};Vn.groups=e;const r=new Vn;kg==null&&(kg=D4(Wxe)),Tg==null&&(Tg=D4(Kxe)),ee(r,"'",_v),ee(r,"{",Pf),ee(r,"}",If),ee(r,"[",lv),ee(r,"]",cv),ee(r,"(",uv),ee(r,")",dv),ee(r,"<",hv),ee(r,">",fv),ee(r,"",pv),ee(r,"",mv),ee(r,"",gv),ee(r,"",yv),ee(r,"",vv),ee(r,"",bv),ee(r,"",xv),ee(r,"",wv),ee(r,"&",Sv),ee(r,"*",Ev),ee(r,"@",sa),ee(r,"`",Cv),ee(r,"^",kv),ee(r,":",ha),ee(r,",",RM),ee(r,"$",Tv),ee(r,".",Ss),ee(r,"=",Ov),ee(r,"!",MM),ee(r,"-",Ni),ee(r,"%",Rf),ee(r,"|",jv),ee(r,"+",Pv),ee(r,"#",Iv),ee(r,"?",Mf),ee(r,'"',$M),ee(r,"/",_s),ee(r,";",DM),ee(r,"~",$f),ee(r,"_",Rv),ee(r,"\\",Nv),ee(r,"",tie);const n=er(r,Js,PM,{[uI]:!0});er(n,Js,n);const i=er(n,Xs,Zne,{[jf]:!0}),s=er(n,Jh,eie,{[ff]:!0}),o=er(r,Xs,to,{[dI]:!0});er(o,Js,i),er(o,Xs,o),er(i,Js,i),er(i,Xs,i);const a=er(r,Jh,pI,{[hI]:!0});er(a,Xs),er(a,Js,s),er(a,Jh,a),er(s,Js,s),er(s,Xs),er(s,Jh,s);const l=ee(r,$1,IM,{[I1]:!0}),c=ee(r,$4,yI,{[I1]:!0}),d=er(r,M1,yI,{[I1]:!0});ee(r,D1,d),ee(c,$1,l),ee(c,D1,d),er(c,M1,d),ee(d,$4),ee(d,$1),er(d,M1,d),ee(d,D1,d);const h=er(r,R1,rie,{[Jne]:!0});ee(h,"#"),er(h,R1,h),ee(h,Jxe,h);const f=ee(h,Zxe);ee(f,"#"),er(f,R1,h);const p=[[Xs,o],[Js,i]],m=[[Xs,null],[Jh,a],[Js,s]];for(let g=0;g<kg.length;g++)Qo(r,kg[g],mI,to,p);for(let g=0;g<Tg.length;g++)Qo(r,Tg[g],gI,pI,m);Al(mI,{tld:!0,ascii:!0},e),Al(gI,{utld:!0,alpha:!0},e),Qo(r,"file",oy,to,p),Qo(r,"mailto",oy,to,p),Qo(r,"http",Cu,to,p),Qo(r,"https",Cu,to,p),Qo(r,"ftp",Cu,to,p),Qo(r,"ftps",Cu,to,p),Al(oy,{scheme:!0,ascii:!0},e),Al(Cu,{slashscheme:!0,ascii:!0},e),t=t.sort((g,b)=>g[0]>b[0]?1:-1);for(let g=0;g<t.length;g++){const b=t[g][0],v=t[g][1]?{[Gxe]:!0}:{[Yxe]:!0};b.indexOf("-")>=0?v[fI]=!0:Xs.test(b)?Js.test(b)?v[jf]=!0:v[dI]=!0:v[uI]=!0,M4(r,b,b,v)}return M4(r,"localhost",Sp,{ascii:!0}),r.jd=new Vn(Mv),{start:r,tokens:Object.assign({groups:e},nie)}}function iie(t,e){const r=twe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,c=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),c+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,c-=h,i.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function twe(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Qo(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Vn(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Vn(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function D4(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const _p={defaultProtocol:"http",events:null,format:A4,formatHref:A4,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function AM(t,e=null){let r=Object.assign({},_p);t&&(r=Object.assign(r,t instanceof AM?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}AM.prototype={o:_p,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:_p[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function A4(t){return t}function sie(t,e){this.t="token",this.v=t,this.tk=e}sie.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=_p.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),c=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function z0(t,e){class r extends sie{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const F4=z0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),q4=z0("text"),rwe=z0("nl"),Og=z0("url",{isLink:!0,toHref(t=_p.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Sp&&t[1].t===ha}}),Ei=t=>new Vn(t);function nwe({groups:t}){const e=t.domain.concat([Sv,Ev,sa,Nv,Cv,kv,Tv,Ov,Ni,PM,Rf,jv,Pv,Iv,_s,Mv,$f,Rv]),r=[_v,ha,RM,Ss,MM,Rf,Mf,$M,DM,hv,fv,Pf,If,cv,lv,uv,dv,pv,mv,gv,yv,vv,bv,xv,wv],n=[Sv,_v,Ev,Nv,Cv,kv,Tv,Ov,Ni,Pf,If,Rf,jv,Pv,Iv,Mf,_s,Mv,$f,Rv],i=Ei(),s=ee(i,$f);Ke(s,n,s),Ke(s,t.domain,s);const o=Ei(),a=Ei(),l=Ei();Ke(i,t.domain,o),Ke(i,t.scheme,a),Ke(i,t.slashscheme,l),Ke(o,n,s),Ke(o,t.domain,o);const c=ee(o,sa);ee(s,sa,c),ee(a,sa,c),ee(l,sa,c);const d=ee(s,Ss);Ke(d,n,s),Ke(d,t.domain,s);const h=Ei();Ke(c,t.domain,h),Ke(h,t.domain,h);const f=ee(h,Ss);Ke(f,t.domain,h);const p=Ei(F4);Ke(f,t.tld,p),Ke(f,t.utld,p),ee(c,Sp,p);const m=ee(h,Ni);ee(m,Ni,m),Ke(m,t.domain,h),Ke(p,t.domain,h),ee(p,Ss,f),ee(p,Ni,m);const g=ee(p,ha);Ke(g,t.numeric,F4);const b=ee(o,Ni),y=ee(o,Ss);ee(b,Ni,b),Ke(b,t.domain,o),Ke(y,n,s),Ke(y,t.domain,o);const v=Ei(Og);Ke(y,t.tld,v),Ke(y,t.utld,v),Ke(v,t.domain,o),Ke(v,n,s),ee(v,Ss,y),ee(v,Ni,b),ee(v,sa,c);const w=ee(v,ha),x=Ei(Og);Ke(w,t.numeric,x);const S=Ei(Og),_=Ei();Ke(S,e,S),Ke(S,r,_),Ke(_,e,S),Ke(_,r,_),ee(v,_s,S),ee(x,_s,S);const N=ee(a,ha),E=ee(l,ha),k=ee(E,_s),C=ee(k,_s);Ke(a,t.domain,o),ee(a,Ss,y),ee(a,Ni,b),Ke(l,t.domain,o),ee(l,Ss,y),ee(l,Ni,b),Ke(N,t.domain,S),ee(N,_s,S),ee(N,Mf,S),Ke(C,t.domain,S),Ke(C,e,S),ee(C,_s,S);const O=[[Pf,If],[lv,cv],[uv,dv],[hv,fv],[pv,mv],[gv,yv],[vv,bv],[xv,wv]];for(let j=0;j<O.length;j++){const[P,A]=O[j],q=ee(S,P);ee(_,P,q),ee(q,A,S);const R=Ei(Og);Ke(q,e,R);const L=Ei();Ke(q,r),Ke(R,e,R),Ke(R,r,L),Ke(L,e,R),Ke(L,r,L),ee(R,A,S),ee(L,A,S)}return ee(i,Sp,v),ee(i,IM,rwe),{start:i,tokens:nie}}function iwe(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,c=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(c=l||a.go(r[i].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(A1(q4,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(A1(p,e,m))}}return o.length>0&&s.push(A1(q4,e,o)),s}function A1(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const swe=typeof console<"u"&&console&&console.warn||(()=>{}),owe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ft={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function awe(){return Vn.groups={},Ft.scanner=null,Ft.parser=null,Ft.tokenQueue=[],Ft.pluginQueue=[],Ft.customSchemes=[],Ft.initialized=!1,Ft}function L4(t,e=!1){if(Ft.initialized&&swe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${owe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ft.customSchemes.push([t,e])}function lwe(){Ft.scanner=ewe(Ft.customSchemes);for(let t=0;t<Ft.tokenQueue.length;t++)Ft.tokenQueue[t][1]({scanner:Ft.scanner});Ft.parser=nwe(Ft.scanner.tokens);for(let t=0;t<Ft.pluginQueue.length;t++)Ft.pluginQueue[t][1]({scanner:Ft.scanner,parser:Ft.parser});return Ft.initialized=!0,Ft}function FM(t){return Ft.initialized||lwe(),iwe(Ft.parser.start,t,iie(Ft.scanner.start,t))}FM.scan=iie;function oie(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new AM(r),i=FM(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var qM="[\0- -\u2029]",cwe=new RegExp(qM),uwe=new RegExp(`${qM}$`),dwe=new RegExp(qM,"g");function hwe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function fwe(t){return new Yt({key:new Rr("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(c=>c.docChanged)&&!r.doc.eq(n.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=Sne(r.doc,[...e]);if(One(a).forEach(({newRange:c})=>{const d=obe(n.doc,c,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(c.from,c.to," "," ");if(!uwe.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&f){const p=f.split(cwe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const b=FM(m).map(y=>y.toObject(t.defaultProtocol));if(!hwe(b))return!1;b.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{CM(y.from,y.to,n.doc).some(v=>v.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function pwe(t){return new Yt({key:new Rr("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=Tne(e.state,t.type.name),c=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&c&&(window.open(c,d),o=!0)}return o}}})}function mwe(t){return new Yt({key:new Rr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=oie(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Sl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(dwe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var aie=Hc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){L4(t);return}L4(t.scheme,t.optionalSlashes)})},onDestroy(){awe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Sl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!Sl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Sl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Er(this.options.HTMLAttributes,t),0]:["a",Er(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Sl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Sl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[jc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=oie(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Sl(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(fwe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!Sl(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(pwe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(mwe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),gwe=aie,ywe=Object.defineProperty,vwe=(t,e)=>{for(var r in e)ywe(t,r,{get:e[r],enumerable:!0})},bwe="listItem",B4="textStyle",z4=/^\s*([-+*])\s$/,lie=vi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(bwe,this.editor.getAttributes(B4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ld({find:z4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ld({find:z4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(B4),editor:this.editor})),[t]}}),cie=vi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>jM(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),xwe={};vwe(xwe,{findListItemPos:()=>sm,getNextListDepth:()=>LM,handleBackspace:()=>vI,handleDelete:()=>bI,hasListBefore:()=>uie,hasListItemAfter:()=>wwe,hasListItemBefore:()=>die,listItemHasSubList:()=>hie,nextListIsDeeper:()=>fie,nextListIsHigher:()=>pie});var sm=(t,e)=>{const{$from:r}=e.selection,n=_r(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},LM=(t,e)=>{const r=sm(t,e);if(!r)return!1;const[,n]=gbe(e,t,r.$pos.pos+4);return n},uie=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},die=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},hie=(t,e,r)=>{if(!r)return!1;const n=_r(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},vI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!rl(t.state,e)&&uie(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const d=c.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!rl(t.state,e)||!xbe(t.state))return!1;const n=sm(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=hie(e,t.state,s);return die(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},fie=(t,e)=>{const r=LM(t,e),n=sm(t,e);return!n||!r?!1:r>n.depth},pie=(t,e)=>{const r=LM(t,e),n=sm(t,e);return!n||!r?!1:r<n.depth},bI=(t,e)=>{if(!rl(t.state,e)||!bbe(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:fie(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():pie(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},wwe=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},mie=pr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&bI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&bI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&vI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&vI(t,r,n)&&(e=!0)}),e}}}}),V4=/^(\s*)(\d+)\.\s+(.*)$/,Swe=/^\s/;function _we(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(V4);if(!s)break;const[,o,a,l]=s,c=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(V4))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(Swe))f.push(p),d+=`
${p.slice(c+2)}`,h+=1;else break}e.push({indent:c,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function gie(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);c.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=gie(f,p,r);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=h}else s+=1}return i}function Ewe(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var Nwe="listItem",U4="textStyle",H4=/^(\d+)\.\s$/,yie=vi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Er(this.options.HTMLAttributes,r),0]:["ol",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?Ewe(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=_we(i);if(s.length===0)return;const a=gie(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Nwe,this.editor.getAttributes(U4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ld({find:H4,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ld({find:H4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(U4)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),Cwe=/^\s*(\[([( |x])?\])\s$/,kwe=vi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Er(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return jM(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,c(h);const f=n.extensionManager.attributes,p=wp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(b=>{m.has(b)||(b in g?i.setAttribute(b,g[b]):i.removeAttribute(b))}),Object.entries(p).forEach(([b,y])=>{y==null?b in g?i.setAttribute(b,g[b]):i.removeAttribute(b):i.setAttribute(b,y)}),d=m,!0}}}},addInputRules(){return[Ld({find:Cwe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Twe=vi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Er(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=lI(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=lI(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});pr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(lie.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(cie.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(mie.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(yie.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(kwe.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Twe.configure(this.options.taskList)),t}});var Owe=vi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Er(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),jwe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Pwe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Iwe=Hc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Er(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[qd({find:jwe,type:this.type})]},addPasteRules(){return[jc({find:Pwe,type:this.type})]}}),Rwe=vi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),Mwe=Hc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Er(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function $we(t={}){return new Yt({view(e){return new Dwe(e,t)}})}class Dwe{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;n={left:m.left,right:m.right,top:g-b,bottom:g+b}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;c=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-c)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=fre(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class lr extends Ge{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return lr.valid(n)?new lr(n):Ge.near(n)}content(){return me.empty}eq(e){return e instanceof lr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new lr(e.resolve(r.pos))}getBookmark(){return new BM(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!Awe(e)||!Fwe(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&lr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(lr.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Me.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(lr.valid(a))return a}return null}}}lr.prototype.visible=!1;lr.findFrom=lr.findGapCursorFrom;Ge.jsonID("gapcursor",lr);class BM{constructor(e){this.pos=e}map(e){return new BM(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return lr.valid(r)?new lr(r):Ge.near(r)}}function vie(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Awe(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||vie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Fwe(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||vie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function qwe(){return new Yt({props:{decorations:Vwe,createSelectionBetween(t,e,r){return e.pos==r.pos&&lr.valid(r)?new lr(r):null},handleClick:Bwe,handleKeyDown:Lwe,handleDOMEvents:{beforeinput:zwe}}})}const Lwe=pne({ArrowLeft:jg("horiz",-1),ArrowRight:jg("horiz",1),ArrowUp:jg("vert",-1),ArrowDown:jg("vert",1)});function jg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Le){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=lr.findGapCursorFrom(a,e,l);return c?(i&&i(n.tr.setSelection(new lr(c))),!0):!1}}function Bwe(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!lr.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&Me.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new lr(n))),!0)}function zwe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof lr))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=Q.empty;for(let o=n.length-1;o>=0;o--)i=Q.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new me(i,0,0));return s.setSelection(Le.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function Vwe(t){if(!(t.selection instanceof lr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ht.create(t.doc,[kn.widget(t.selection.head,e,{key:"gapcursor"})])}var $v=200,zr=function(){};zr.prototype.append=function(e){return e.length?(e=zr.from(e),!this.length&&e||e.length<$v&&this.leafAppend(e)||this.length<$v&&e.leafPrepend(this)||this.appendInner(e)):this};zr.prototype.prepend=function(e){return e.length?zr.from(e).append(this):this};zr.prototype.appendInner=function(e){return new Uwe(this,e)};zr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?zr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};zr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};zr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};zr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};zr.from=function(e){return e instanceof zr?e:e&&e.length?new bie(e):zr.empty};var bie=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=$v)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=$v)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(zr);zr.empty=new bie([]);var Uwe=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(zr);const Hwe=500;class ss{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new Es(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Es(m,void 0,void 0,c.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new ss(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Es(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>Kwe&&(a=Wwe(a,c),o-=c),new ss(a.append(s),o)}remapping(e,r){let n=new mp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new ss(this.items.append(e.map(r=>new Es(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),b=f.selection&&f.selection.map(s.slice(l+1,p));b&&a++,n.push(new Es(m,g,b))}else n.push(new Es(m))},i);let c=[];for(let f=r;f<o;f++)c.push(new Es(s.maps[f]));let d=this.items.slice(0,i).append(c).append(n),h=new ss(d,a);return h.emptyItemCount()>Hwe&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new Es(c.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new ss(zr.from(i.reverse()),s)}}ss.empty=new ss(zr.empty,0);function Wwe(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Es{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Es(r.getMap().invert(),r,this.selection)}}}class oa{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const Kwe=20;function Gwe(t,e,r,n){let i=r.getMeta(oc),s;if(i)return i.historyState;r.getMeta(Xwe)&&(t=new oa(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(oc))return o.getMeta(oc).redo?new oa(t.done.addTransform(r,void 0,n,ay(e)),t.undone,W4(r.mapping.maps),t.prevTime,t.prevComposition):new oa(t.done,t.undone.addTransform(r,void 0,n,ay(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!Ywe(r,t.prevRanges)),c=o?F1(t.prevRanges,r.mapping):W4(r.mapping.maps);return new oa(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,ay(e)),ss.empty,c,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new oa(t.done.rebased(r,s),t.undone.rebased(r,s),F1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new oa(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),F1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function Ywe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function W4(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function F1(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function Qwe(t,e,r){let n=ay(e),i=oc.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new oa(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(oc,{redo:r,historyState:l})}let q1=!1,K4=null;function ay(t){let e=t.plugins;if(K4!=e){q1=!1,K4=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){q1=!0;break}}return q1}const oc=new Rr("history"),Xwe=new Rr("closeHistory");function Jwe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Yt({key:oc,state:{init(){return new oa(ss.empty,ss.empty,null,0,-1)},apply(e,r,n){return Gwe(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?wie:n=="historyRedo"?Sie:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function xie(t,e){return(r,n)=>{let i=oc.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=Qwe(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const wie=xie(!1,!0),Sie=xie(!0,!0);pr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Yt({key:new Rr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>n)}})]}});var Zwe=pr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[$we(this.options)]}});pr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Yt({key:new Rr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Ht.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(kn.node(c,c+l.nodeSize,{class:this.options.className}))}),Ht.create(t,s)}}})]}});var eSe=pr.create({name:"gapCursor",addProseMirrorPlugins(){return[qwe()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=bt(je(t,"allowGapCursor",r)))!=null?e:null}}}),tSe=pr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Yt({key:new Rr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,c=!o.isLeaf&&F0(o);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=kn.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Ht.create(t,i)}}})]}});pr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Yt({key:new Rr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||jne(r.selection)||t.view.dragging?null:Ht.create(r.doc,[kn.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function G4({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var rSe=pr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Rr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Yt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,d=e.getState(o),h=a.content.size,f=c.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!G4({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!G4({node:o,types:n})}}})]}}),nSe=pr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>wie(t,e),redo:()=>({state:t,dispatch:e})=>Sie(t,e)}},addProseMirrorPlugins(){return[Jwe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),iSe=pr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(jxe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Nxe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(lie.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Rxe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Dxe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Axe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Zwe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(eSe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Fxe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(qxe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(nSe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(Lxe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(Hxe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(cie.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(mie.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(aie.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(yie.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Owe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Iwe.configure(this.options.strike)),this.options.text!==!1&&i.push(Rwe.configure(this.options.text)),this.options.underline!==!1&&i.push(Mwe.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(rSe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),sSe=iSe,oSe=tSe;const Xo=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>u.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),aSe=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return u.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[u.jsx(Xo,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:u.jsx(Efe,{className:"w-4 h-4"})}),u.jsx(Xo,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:u.jsx(Pfe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Xo,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:u.jsx(Rfe,{className:"w-4 h-4"})}),u.jsx(Xo,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:u.jsx(Ife,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Xo,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:u.jsx(XR,{className:"w-4 h-4"})}),t.isActive("link")&&u.jsx(Xo,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:u.jsx(Ufe,{className:"w-4 h-4"})}),u.jsx("div",{className:"flex-1"}),u.jsx(Xo,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:u.jsx(Vfe,{className:"w-4 h-4"})}),u.jsx(Xo,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:u.jsx(Ffe,{className:"w-4 h-4"})})]})};function _ie({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=xxe({extensions:[sSe.configure({heading:!1,codeBlock:!1,blockquote:!1}),oSe.configure({placeholder:r}),gwe.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return u.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[u.jsx(aSe,{editor:o}),u.jsx(fxe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),u.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function Dv(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const L1=[{id:"call",label:"Phone call",icon:ZR},{id:"email",label:"Email",icon:JR},{id:"chat",label:"Chat",icon:fte},{id:"meeting",label:"Meeting",icon:As},{id:"coffee",label:"Coffee",icon:ute},{id:"lunch",label:"Lunch",icon:xte},{id:"note",label:"Other",icon:N0}];function zM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=T.useState("call"),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,b]=T.useState([]),[y,v]=T.useState(!1),[w,x]=T.useState(""),{data:S}=zc(),_=!!o;if(T.useEffect(()=>{if(t){const R=new Date,L=R.toISOString().split("T")[0],D=R.toTimeString().slice(0,5);o?(d(o.activity_date||L),f(o.activity_time||""),m(o.content||""),b(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||L),f(s.activity_time||D),m(s.content||""),b(s.participants||[]),l(s.activity_type||"note")):(d(L),f(D),m(""),b([]),l("call"))}},[t,s,o]),!t)return null;const N=(S||[]).filter(R=>R.id.toString()!==(i==null?void 0:i.toString())),E=N.filter(R=>{var L;return(L=R.name)==null?void 0:L.toLowerCase().includes(w.toLowerCase())}),k=R=>{R.preventDefault(),!Dv(p)&&(r({activity_type:a,activity_date:c||null,activity_time:h||null,content:p,participants:g}),m(""),b([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},C=()=>{m(""),b([]),d(""),f(""),v(!1),x(""),e()},O=R=>{b(L=>L.includes(R)?L.filter(D=>D!==R):[...L,R])},j=R=>{b(L=>L.filter(D=>D!==R))},P=()=>N.filter(R=>g.includes(R.id)),A=R=>{if(!R)return"";try{return new Date(R).toISOString().split("T")[0]}catch{return""}};return(L1.find(R=>R.id===a)||L1[0]).icon,u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[u.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),u.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(pn,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:k,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:L1.map(R=>{const L=R.icon,D=a===R.id;return u.jsxs("button",{type:"button",onClick:()=>l(R.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${D?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[u.jsx(L,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs",children:R.label})]},R.id)})})]}),u.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),u.jsx("input",{id:"activity-date",type:"date",value:A(c),onChange:R=>d(R.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),u.jsx("input",{id:"activity-time",type:"time",value:h,onChange:R=>f(R.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx(_ie,{value:p,onChange:m,placeholder:"What happened?",disabled:n,minHeight:"100px"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),P().length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:P().map(R=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[R.name,u.jsx("button",{type:"button",onClick:()=>j(R.id),className:"hover:text-primary-900",disabled:n,children:u.jsx(pn,{className:"w-3 h-3"})})]},R.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>v(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&u.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[u.jsx("div",{className:"p-2 border-b",children:u.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:R=>x(R.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),u.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0?u.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):E.map(R=>{var D;const L=g.includes(R.id);return u.jsxs("button",{type:"button",onClick:()=>O(R.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${L?"bg-primary-50":""}`,children:[u.jsx("input",{type:"checkbox",checked:L,onChange:()=>{},className:"mr-1"}),R.thumbnail?u.jsx("img",{src:R.thumbnail,alt:R.name,className:"w-6 h-6 rounded-full"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((D=R.first_name)==null?void 0:D[0])||"?"})}),u.jsx("span",{children:R.name})]},R.id)})})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:C,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Dv(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function Jo({title:t,value:e,icon:r,href:n}){return u.jsx(le,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),u.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function Y4({person:t,hideStar:e=!1}){var r,n;return u.jsxs(le,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):u.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&u.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&u.jsx(Id,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function lSe({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),u.jsx("p",{className:"text-xs text-gray-500",children:En(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&u.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(c=>{var d;return c.thumbnail?u.jsx("img",{src:c.thumbnail,alt:c.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},c.id):u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:u.jsx("span",{className:"text-sm",children:(d=c.name)==null?void 0:d[0]})},c.id)})})]});return i&&n?u.jsx(le,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):u.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function cSe({todo:t,onToggle:e}){var n;const r=tm(t);return u.jsxs(le,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(Ds,{className:"w-5 h-5 text-primary-600"}):u.jsx(Pd,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),u.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&u.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[u.jsx("div",{children:En(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&u.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function uSe(){return u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:u.jsx(yte,{className:"w-12 h-12 text-primary-600"})})}),u.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Ec,"!"]}),u.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsxs(le,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[u.jsx(sr,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),u.jsxs(le,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(sr,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function dSe(){var k,C,O;const{data:t,isLoading:e,error:r}=Yfe(),{data:n}=Ste(!1),i=_te(),s=eM(),[o,a]=T.useState(null),[l,c]=T.useState(!1),[d,h]=T.useState(!1),[f,p]=T.useState(null),m=j=>{if(!j.is_completed){a(j),c(!0);return}i.mutate({todoId:j.id,data:{content:j.content,due_date:j.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),c(!1),a(null))},b=()=>{if(!o)return;const j=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:j,activity_type:"note",participants:[]}),c(!1),h(!0)},y=async j=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:j}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch(P){console.error("Failed to create activity:",P),alert("Failed to create activity. Please try again.")}};if(e)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const j=((k=r==null?void 0:r.response)==null?void 0:k.status)>=500||!(r!=null&&r.response);return u.jsx("div",{className:"card p-8 text-center",children:u.jsx("div",{className:"text-red-600 mb-2",children:j?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),u.jsx("p",{className:"text-sm text-gray-600",children:((O=(C=r==null?void 0:r.response)==null?void 0:C.data)==null?void 0:O.message)||"An error occurred while loading your data."})]})})})}const{stats:v,recent_people:w,upcoming_reminders:x,favorites:S}=t||{};if(((v==null?void 0:v.total_people)||0)+((v==null?void 0:v.total_companies)||0)+((v==null?void 0:v.total_dates)||0)===0)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Jo,{title:"Total people",value:0,icon:As,href:"/people"}),u.jsx(Jo,{title:"Organizations",value:0,icon:Ir,href:"/companies"}),u.jsx(Jo,{title:"Events",value:0,icon:yo,href:"/dates"}),u.jsx(Jo,{title:"Open todos",value:0,icon:Ds,href:"/todos"})]}),u.jsx(uSe,{})]});const E=(n==null?void 0:n.slice(0,5))||[];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Jo,{title:"Total people",value:(v==null?void 0:v.total_people)||0,icon:As,href:"/people"}),u.jsx(Jo,{title:"Organizations",value:(v==null?void 0:v.total_companies)||0,icon:Ir,href:"/companies"}),u.jsx(Jo,{title:"Events",value:(v==null?void 0:v.total_dates)||0,icon:yo,href:"/dates"}),u.jsx(Jo,{title:"Open todos",value:(v==null?void 0:v.open_todos_count)||0,icon:Ds,href:"/todos"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(yo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),u.jsxs(le,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",u.jsx(l1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(j=>u.jsx(lSe,{reminder:j},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Ds,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),u.jsxs(le,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",u.jsx(l1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:E.length>0?E.map(j=>u.jsx(cSe,{todo:j,onToggle:m},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Id,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(j=>u.jsx(Y4,{person:j,hideStar:!0},j.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(As,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited people"]}),u.jsxs(le,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all people",u.jsx(l1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(j=>u.jsx(Y4,{person:j},j.id)):u.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",u.jsx(le,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),u.jsx(tM,{isOpen:l,onClose:()=>{c(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:b}),u.jsx(zM,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function Q4(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function hSe({person:t,companyName:e,isDeceased:r}){var n,i;return u.jsx(le,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&u.jsx(Id,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>u.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function fSe(){const[t,e]=T.useState(!1),[r,n]=T.useState(!1),[i,s]=T.useState([]),[o,a]=T.useState("first_name"),[l,c]=T.useState("asc"),d=T.useRef(null),h=T.useRef(null),{data:f,isLoading:p,error:m}=zc(),{data:g}=ut({queryKey:["person-labels"],queryFn:async()=>(await We.getPersonLabels()).data}),b=(g==null?void 0:g.map(k=>k.name))||[];T.useEffect(()=>{const k=C=>{h.current&&!h.current.contains(C.target)&&d.current&&!d.current.contains(C.target)&&e(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const y=T.useMemo(()=>{if(!f)return[];let k=[...f];return r&&(k=k.filter(C=>C.is_favorite)),i.length>0&&(k=k.filter(C=>{const O=C.labels||[];return i.some(j=>O.includes(j))})),k.sort((C,O)=>{var q,R,L,D,W,z,U,K;let j,P;if(o==="first_name"?(j=(((q=C.acf)==null?void 0:q.first_name)||C.first_name||"").toLowerCase(),P=(((R=O.acf)==null?void 0:R.first_name)||O.first_name||"").toLowerCase()):(j=(((L=C.acf)==null?void 0:L.last_name)||C.last_name||"").toLowerCase(),P=(((D=O.acf)==null?void 0:D.last_name)||O.last_name||"").toLowerCase()),j===P){const fe=o==="first_name"?(((W=C.acf)==null?void 0:W.last_name)||C.last_name||"").toLowerCase():(((z=C.acf)==null?void 0:z.first_name)||C.first_name||"").toLowerCase(),we=o==="first_name"?(((U=O.acf)==null?void 0:U.last_name)||O.last_name||"").toLowerCase():(((K=O.acf)==null?void 0:K.first_name)||O.first_name||"").toLowerCase(),Fe=fe.localeCompare(we);return l==="asc"?Fe:-Fe}const A=j.localeCompare(P);return l==="asc"?A:-A})},[f,r,i,o,l]),v=r||i.length>0,w=k=>{s(C=>C.includes(k)?C.filter(O=>O!==k):[...C,k])},x=()=>{n(!1),s([])},S=T.useMemo(()=>{if(!y)return[];const k=y.map(C=>Q4(C)).filter(Boolean);return[...new Set(k)]},[y]),{data:_}=ut({queryKey:["companies","batch",S.sort().join(",")],queryFn:async()=>S.length===0?[]:(await We.getCompanies({per_page:100,include:S.join(",")})).data,enabled:S.length>0}),N=T.useMemo(()=>{const k={};return _&&_.forEach(C=>{k[C.id]=nr(C)}),k},[_]),E=T.useMemo(()=>{const k={};return y.forEach(C=>{const O=Q4(C);O&&N[O]&&(k[C.id]=N[O])}),k},[y,N]);return u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[u.jsxs("select",{value:o,onChange:k=>a(k.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[u.jsx("option",{value:"first_name",children:"First name"}),u.jsx("option",{value:"last_name",children:"Last name"})]}),u.jsx("div",{className:"h-4 w-px bg-gray-300"}),u.jsx("button",{onClick:()=>c(l==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${l==="asc"?"descending":"ascending"}`,children:l==="asc"?u.jsx(Sfe,{className:"w-4 h-4 text-gray-600"}):u.jsx(wfe,{className:"w-4 h-4 text-gray-600"})})]}),u.jsxs("div",{className:"relative",ref:d,children:[u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${v?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[u.jsx(zP,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Filter"}),v&&u.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)})]}),t&&u.jsx("div",{ref:h,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:k=>n(k.target.checked),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&u.jsx(hF,{className:"w-3 h-3 text-white"})}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Id,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),u.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),b.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:b.map(k=>u.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:i.includes(k),onChange:()=>w(k),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(k)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(k)&&u.jsx(hF,{className:"w-3 h-3 text-white"})}),u.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]}),v&&u.jsx("button",{onClick:x,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),v&&u.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[u.jsx(Id,{className:"w-3 h-3"}),"Favorites",u.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:u.jsx(pn,{className:"w-3 h-3"})})]}),i.map(k=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[k,u.jsx("button",{onClick:()=>w(k),className:"hover:text-gray-600",children:u.jsx(pn,{className:"w-3 h-3"})})]},k))]}),u.jsxs(le,{to:"/people/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),p&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),m&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!p&&!m&&(f==null?void 0:f.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(sr,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),u.jsxs(le,{to:"/people/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!p&&!m&&(y==null?void 0:y.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(k=>u.jsx(hSe,{person:k,companyName:E[k.id],isDeceased:k.is_deceased},k.id))}),!p&&!m&&(f==null?void 0:f.length)>0&&(y==null?void 0:y.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(zP,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),u.jsx("button",{onClick:x,className:"btn-secondary",children:"Clear filters"})]})]})}const pSe="#0285FF",mSe=T.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=pSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),gSe="#0866FF",ySe=T.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=gSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),vSe="#FF0069",bSe=T.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=vSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),xSe="#000000",wSe=T.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=xSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),SSe="#000000",_Se=T.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=SSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),ESe={Phone:ZR,Mail:JR,Users:As,Coffee:ute,Utensils:xte,FileText:N0,Circle:LP};function NSe({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=T.useMemo(()=>Qme(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?qP:Pd;if(f.type==="activity"&&f.activity_type){const p=Jme(f.activity_type);return ESe[p]||LP}return f.type==="note"?N0:LP},c=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",b=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const v=Xme(y),w=ege(f),x=m&&tm(f);return u.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&u.jsx("div",{className:"absolute left-0 top-1",children:u.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),u.jsx("div",{className:`${w}`,children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&u.jsx("span",{className:"text-xs font-medium text-gray-600",children:Zme(f.activity_type)}),u.jsx("span",{className:"text-xs text-gray-400",children:""}),u.jsx("span",{className:"text-xs text-gray-500",children:v})]}),u.jsxs("div",{className:"flex items-start gap-2",children:[m&&u.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?u.jsx(qP,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):u.jsx(Pd,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(b||g)&&((S=f.content)!=null&&S.includes("<"))?u.jsx("div",{className:`text-sm flex-1 prose prose-sm max-w-none ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):u.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&u.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const N=a(_);return N?u.jsxs(le,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[u.jsx(XR,{className:"w-3 h-3"}),N.name]},_):null})]}),m&&f.due_date&&u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",En(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&u.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&u.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(li,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),u.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(c)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?u.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function CSe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i=""}){const[s,o]=T.useState("");if(T.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=c=>{c.preventDefault(),!Dv(s)&&(r(s),o(""))},l=()=>{o(""),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),u.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(pn,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),u.jsx(_ie,{value:s,onChange:o,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:l,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Dv(s),children:n?"Adding...":"Add note"})]})]})]})})}function Eie({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=T.useState(""),[a,l]=T.useState(""),[c,d]=T.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:c}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(pn,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:f,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&u.jsx("div",{className:"mb-4",children:u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:c,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),u.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}function An(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function kSe(t){return t?t.replace(/[^\d+]/g,""):""}function X4(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function TSe(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function OSe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${An(l)}`),s.push(`N:${An(a)};${An(o)};;;`),i.nickname&&s.push(`NICKNAME:${An(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=An(h.contact_value),p=h.contact_label?An(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",b=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=kSe(h.contact_value);y&&s.push(`${b}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let v=h.contact_value;v.match(/^https?:\/\//i)||(v=`https://${v}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${An(v)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=An(h.street||""),m=An(h.city||""),g=An(h.state||""),b=An(h.postal_code||""),y=An(h.country||"");(p||m||g||b||y)&&s.push(`${f}:;;${p};${m};${g};${b};${y}`)});const{title:c,org:d}=TSe(i.work_history,r);if(d&&s.push(`ORG:${An(d)}`),c&&s.push(`TITLE:${An(c)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=X4(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=X4(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function jSe(t,e={}){const{filename:r,...n}=e,i=OSe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const PSe=({className:t})=>u.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:u.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function Pg(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function ISe(){var $h,Km,rD,nD,iD,sD,oD,aD,lD,cD,uD,dD,hD,fD,pD;const{id:t}=zs(),e=gn(),r=yt(),{data:n,isLoading:i,error:s}=Vc(t),{data:o}=Zfe(t),{data:a}=epe(t),l=rpe(),c=ipe(),d=cpe(),h=nh(),f=npe(),p=eM(),m=spe(),g=Nte(),b=ape(),y=ope(),v=lpe(),{data:w}=zc(),{data:x=[]}=ut({queryKey:["investments",t],queryFn:async()=>(await qe.getInvestments(t)).data,enabled:!!t}),[S,_]=T.useState(!1),[N,E]=T.useState(""),[k,C]=T.useState(!1),O=T.useRef(null),[j,P]=T.useState(!1),[A,q]=T.useState(!1),[R,L]=T.useState(!1),[D,W]=T.useState(null),[z,U]=T.useState(null),[K,fe]=T.useState(null),[we,Fe]=T.useState(!1),[xe,Re]=T.useState(null),{data:Ve}=ut({queryKey:["person-labels"],queryFn:async()=>(await We.getPersonLabels()).data}),ct=Ve||[],Jt=(n==null?void 0:n.labels)||[],ft=((nD=(rD=(Km=($h=n==null?void 0:n._embedded)==null?void 0:$h["wp:term"])==null?void 0:Km.flat())==null?void 0:rD.filter($=>($==null?void 0:$.taxonomy)==="person_label"))==null?void 0:nD.map($=>$.id))||[],X=ct.filter($=>!Jt.includes($.name));$n((n==null?void 0:n.name)||((iD=n==null?void 0:n.title)==null?void 0:iD.rendered)||(n==null?void 0:n.title)||"Person");const Se=a==null?void 0:a.find($=>{const Y=Array.isArray($.date_type)?$.date_type[0]:$.date_type;return(Y==null?void 0:Y.toLowerCase())==="birthday"}),He=Se!=null&&Se.date_value?new Date(Se.date_value):null,tt=a==null?void 0:a.find($=>{const Y=Array.isArray($.date_type)?$.date_type[0]:$.date_type;return(Y==null?void 0:Y.toLowerCase())==="died"}),Vt=tt!=null&&tt.date_value?new Date(tt.date_value):null,ke=!!Vt,Ye=He?c1(ke?Vt:new Date,He):null,$t=a?[...a].sort(($,Y)=>{const G=$.date_value?new Date($.date_value):new Date(0),Ie=Y.date_value?new Date(Y.date_value):new Date(0);return G-Ie}):[],Nt=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch($){console.error("Failed to delete person:",$),alert("Failed to delete person. Please try again.")}},M=$=>{if(!$)return"";let Y=$.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const G=Y.startsWith("+");return Y=Y.replace(/\D/g,""),G?`+${Y}`:Y},F=async $=>{var Ie;if(!window.confirm("Are you sure you want to delete this contact detail?"))return;const Y=[...((Ie=n.acf)==null?void 0:Ie.contact_info)||[]];Y.splice($,1);const G=co(n.acf,{contact_info:Y});await h.mutateAsync({id:t,data:{acf:G}})},V=async $=>{var Ie;if(!window.confirm("Are you sure you want to delete this address?"))return;const Y=[...((Ie=n.acf)==null?void 0:Ie.addresses)||[]];Y.splice($,1);const G=co(n.acf,{addresses:Y});await h.mutateAsync({id:t,data:{acf:G}})},oe=async $=>{var Ks,Yi,Gs,Gm,mD,gD;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const Y=(Yi=(Ks=n.acf)==null?void 0:Ks.relationships)==null?void 0:Yi[$];if(!Y)return;const G=Y.related_person,Ie=Y.relationship_type;let Xe=!0;G&&Ie&&(Xe=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let pt=null;if(!Xe&&G&&Ie)try{const[vs,Ym]=await Promise.all([We.getPerson(G,{_embed:!0}),We.getRelationshipTypes()]),jb={};Ym.data.forEach(Dh=>{jb[Dh.id]=Dh});const _i=jb[Ie],wl=(Gs=_i==null?void 0:_i.acf)==null?void 0:Gs.inverse_relationship_type;if(wl){const Ah=(((Gm=vs.data.acf)==null?void 0:Gm.relationships)||[]).find(Ys=>{var yD,vD;const Mae=typeof Ys.related_person=="object"?(yD=Ys.related_person)==null?void 0:yD.ID:Ys.related_person,$ae=typeof Ys.relationship_type=="object"?(vD=Ys.relationship_type)==null?void 0:vD.term_id:Ys.relationship_type;return Mae===parseInt(t)&&$ae===wl});Ah&&(pt={related_person:parseInt(t),relationship_type:wl,relationship_label:Ah.relationship_label||""})}}catch(vs){console.error("Failed to fetch inverse relationship:",vs)}const vt=[...((mD=n.acf)==null?void 0:mD.relationships)||[]];vt.splice($,1);const Ko=co(n.acf,{relationships:vt});if(await h.mutateAsync({id:t,data:{acf:Ko}}),!Xe&&pt&&G){await new Promise(vs=>setTimeout(vs,500));try{const vs=await We.getPerson(G,{_embed:!0}),Ym=((gD=vs.data.acf)==null?void 0:gD.relationships)||[];if(!Ym.some(_i=>{var Ah,Ys;const wl=typeof _i.related_person=="object"?(Ah=_i.related_person)==null?void 0:Ah.ID:_i.related_person,Dh=typeof _i.relationship_type=="object"?(Ys=_i.relationship_type)==null?void 0:Ys.term_id:_i.relationship_type;return wl===pt.related_person&&Dh===pt.relationship_type})){const _i=[...Ym,pt],wl=co(vs.data.acf,{relationships:_i});await We.updatePerson(G,{acf:wl})}}catch(vs){console.error("Failed to restore inverse relationship:",vs)}}r.invalidateQueries({queryKey:["person",t]}),G&&r.invalidateQueries({queryKey:["person",G]}),r.invalidateQueries({queryKey:["people"]})},Z=async $=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:$,personId:t})},J=async $=>{window.confirm("Are you sure you want to delete this note?")&&await c.mutateAsync({noteId:$,personId:t})},ye=async $=>{try{await f.mutateAsync({personId:t,content:$}),P(!1)}catch(Y){console.error("Failed to create note:",Y),alert("Failed to create note. Please try again.")}},Qe=async $=>{try{z?(await m.mutateAsync({activityId:z.id,data:$,personId:t}),U(null)):(await p.mutateAsync({personId:t,data:$}),K&&(await b.mutateAsync({todoId:K.id,data:{content:K.content,due_date:K.due_date,is_completed:!0},personId:t}),fe(null),Re(null))),q(!1)}catch(Y){console.error("Failed to save activity:",Y),alert("Failed to save activity. Please try again.")}},Ze=async $=>{try{await g.mutateAsync({personId:t,data:$}),L(!1),W(null)}catch(Y){console.error("Failed to create todo:",Y),alert("Failed to create todo. Please try again.")}},Zt=async $=>{if(D)try{await b.mutateAsync({todoId:D.id,data:$,personId:t}),L(!1),W(null)}catch(Y){console.error("Failed to update todo:",Y),alert("Failed to update todo. Please try again.")}},_e=async $=>{if(!$.is_completed){fe($),Fe(!0);return}try{await b.mutateAsync({todoId:$.id,data:{content:$.content,due_date:$.due_date,is_completed:!1},personId:t})}catch(Y){console.error("Failed to toggle todo:",Y),alert("Failed to update todo. Please try again.")}},ie=async()=>{if(K)try{await b.mutateAsync({todoId:K.id,data:{content:K.content,due_date:K.due_date,is_completed:!0},personId:t}),Fe(!1),fe(null)}catch($){console.error("Failed to complete todo:",$),alert("Failed to complete todo. Please try again.")}},he=()=>{if(!K)return;const $=new Date().toISOString().split("T")[0];Re({content:K.content,activity_date:$,activity_type:"note",participants:[]}),Fe(!1),q(!0)},de=async $=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:$,personId:t})},Ce=async $=>{window.confirm("Are you sure you want to delete this todo?")&&await v.mutateAsync({todoId:$,personId:t})},st=$=>{$.type==="todo"?(W($),L(!0)):$.type==="activity"&&(U($),q(!0))},Si=$=>{$.type==="note"?J($.id):$.type==="activity"?de($.id):$.type==="todo"&&Ce($.id)},Gi=async $=>{var Ie;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const Y=[...((Ie=n.acf)==null?void 0:Ie.work_history)||[]];Y.splice($,1);const G=co(n.acf,{work_history:Y});await h.mutateAsync({id:t,data:{acf:G}})},fu=async $=>{var Ie,Xe,pt;const Y=(pt=(Xe=(Ie=n==null?void 0:n._embedded)==null?void 0:Ie["wp:term"])==null?void 0:Xe.flat())==null?void 0:pt.find(vt=>(vt==null?void 0:vt.taxonomy)==="person_label"&&(vt==null?void 0:vt.name)===$);if(!Y)return;const G=ft.filter(vt=>vt!==Y.id);await h.mutateAsync({id:t,data:{person_label:G}})},Nb=async()=>{if(!N)return;const $=ct.find(G=>G.id.toString()===N);if(!$)return;const Y=[...ft,$.id];await h.mutateAsync({id:t,data:{person_label:Y}}),E(""),_(!1)},Cb=async $=>{var G;const Y=(G=$.target.files)==null?void 0:G[0];if(Y){if(!Y.type.startsWith("image/")){alert("Please select an image file");return}if(Y.size>5*1024*1024){alert("Image size must be less than 5MB");return}C(!0);try{await qe.uploadPersonPhoto(t,Y),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch(Ie){console.error("Failed to upload photo:",Ie),alert("Failed to upload photo. Please try again.")}finally{C(!1),O.current&&(O.current.value="")}}},kb=()=>{if(n)try{jSe(n,{companyMap:Rh,personDates:a||[]})}catch($){console.error("Failed to export vCard:",$),alert("Failed to export vCard. Please try again.")}},Vm=((oD=(sD=n==null?void 0:n.acf)==null?void 0:sD.work_history)==null?void 0:oD.map($=>$.company).filter(Boolean))||[],Tb=RP({queries:Vm.map($=>({queryKey:["company",$],queryFn:async()=>(await We.getCompany($,{_embed:!0})).data,enabled:!!$}))}),Ws=((lD=(aD=n==null?void 0:n.acf)==null?void 0:aD.relationships)==null?void 0:lD.map($=>$.related_person).filter(Boolean))||[],xl=RP({queries:Ws.map($=>({queryKey:["person-dates",$],queryFn:async()=>(await qe.getPersonDates($)).data,enabled:!!$}))}),Ih=T.useMemo(()=>{const $={};return xl.forEach((Y,G)=>{if(Y.data&&Ws[G]){const Ie=Ws[G],Xe=Y.data.find(pt=>{const vt=Array.isArray(pt.date_type)?pt.date_type[0]:pt.date_type;return(vt==null?void 0:vt.toLowerCase())==="birthday"});if(Xe!=null&&Xe.date_value){const pt=new Date(Xe.date_value);$[Ie]=c1(new Date,pt)}else $[Ie]=-1}}),$},[xl,Ws]),Ob=T.useMemo(()=>{const $={};return xl.forEach((Y,G)=>{if(Y.data&&Ws[G]){const Ie=Ws[G],Xe=Y.data.some(pt=>{const vt=Array.isArray(pt.date_type)?pt.date_type[0]:pt.date_type;return(vt==null?void 0:vt.toLowerCase())==="died"});$[Ie]=Xe}}),$},[xl,Ws]),pu=T.useMemo(()=>{var $;return($=n==null?void 0:n.acf)!=null&&$.relationships?[...n.acf.relationships].sort((Y,G)=>{const Ie=Ih[Y.related_person]??-1,Xe=Ih[G.related_person]??-1;return Ie===-1&&Xe===-1?0:Ie===-1?1:Xe===-1?-1:Xe-Ie}):[]},[(cD=n==null?void 0:n.acf)==null?void 0:cD.relationships,Ih]),Rh={};Tb.forEach(($,Y)=>{var G,Ie,Xe,pt,vt,Ko,Ks,Yi,Gs;if($.data){const Gm=Vm[Y];Rh[Gm]={name:nr($.data),logo:((Xe=(Ie=(G=$.data._embedded)==null?void 0:G["wp:featuredmedia"])==null?void 0:Ie[0])==null?void 0:Xe.source_url)||((Gs=(Yi=(Ks=(Ko=(vt=(pt=$.data._embedded)==null?void 0:pt["wp:featuredmedia"])==null?void 0:vt[0])==null?void 0:Ko.media_details)==null?void 0:Ks.sizes)==null?void 0:Yi.thumbnail)==null?void 0:Gs.source_url)||null}}});const ge=T.useMemo(()=>{var $;return($=n==null?void 0:n.acf)!=null&&$.work_history?[...n.acf.work_history].map((Y,G)=>({...Y,originalIndex:G})).sort((Y,G)=>{if(Y.is_current&&!G.is_current)return-1;if(!Y.is_current&&G.is_current)return 1;const Ie=Y.start_date?new Date(Y.start_date):new Date(0);return(G.start_date?new Date(G.start_date):new Date(0))-Ie}):[]},[(uD=n==null?void 0:n.acf)==null?void 0:uD.work_history]),Oe=T.useMemo(()=>o?o.filter(Y=>Y.type==="todo").sort((Y,G)=>{if(Y.is_completed&&!G.is_completed)return 1;if(!Y.is_completed&&G.is_completed)return-1;if(!Y.is_completed&&!G.is_completed){if(Y.due_date&&G.due_date)return new Date(Y.due_date)-new Date(G.due_date);if(Y.due_date&&!G.due_date)return-1;if(!Y.due_date&&G.due_date)return 1}return new Date(G.created)-new Date(Y.created)}):[],[o]);if(T.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(le,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const Ee=n.acf||{},Dt=["facebook","linkedin","instagram","twitter","bluesky","threads","website"],si=((dD=Ee.contact_info)==null?void 0:dD.filter($=>Dt.includes($.contact_type)))||[],Um={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,website:7},Mh=[...si].sort(($,Y)=>{const G=Um[$.contact_type]||99,Ie=Um[Y.contact_type]||99;return G-Ie}),Hm=$=>{switch($){case"facebook":return ySe;case"linkedin":return PSe;case"instagram":return bSe;case"twitter":return _Se;case"bluesky":return mSe;case"threads":return wSe;case"website":return ry;default:return ry}},Wm=$=>{switch($){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"website":return"text-gray-600";default:return"text-gray-600"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(le,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:kb,className:"btn-secondary",children:[u.jsx(BP,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),u.jsxs(le,{to:`/people/${t}/edit`,className:"btn-secondary",children:[u.jsx(vte,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),u.jsxs("button",{onClick:Nt,className:"btn-danger",children:[u.jsx(li,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),u.jsxs("div",{className:"card p-6 relative",children:[u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx(le,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"})}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[n.thumbnail?u.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):u.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((hD=n.first_name)==null?void 0:hD[0])||"?"})}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var $;return($=O.current)==null?void 0:$.click()},children:k?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Nf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:Cb,className:"hidden",disabled:k})]}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,ke&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&u.jsx(Id,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),Ee.nickname&&u.jsxs("p",{className:"text-gray-500",children:['"',Ee.nickname,'"']}),ke&&Vt&&Ye!==null&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Pg(Ee.gender)&&u.jsx("span",{className:"mr-1",children:Pg(Ee.gender)}),"Died ",En(Vt,"MMMM d, yyyy")," at age ",Ye]}),!ke&&Ye!==null&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Pg(Ee.gender)&&u.jsx("span",{className:"mr-1",children:Pg(Ee.gender)}),Ye," years old"]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map(($,Y)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[$,u.jsx("button",{onClick:()=>fu($),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:u.jsx(pn,{className:"w-3 h-3"})})]},Y)),S?u.jsxs("div",{className:"inline-flex items-center gap-2",children:[u.jsxs("select",{value:N,onChange:$=>E($.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:X.length===0,children:[u.jsx("option",{value:"",children:"Select a label..."}),X.map($=>u.jsx("option",{value:$.id,children:$.name},$.id))]}),u.jsx("button",{onClick:Nb,disabled:!N,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),u.jsx("button",{onClick:()=>{_(!1),E("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):X.length>0&&u.jsxs("button",{onClick:()=>_(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[u.jsx(sr,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),Mh.length>0&&u.jsx("div",{className:"flex items-center gap-3 mt-4",children:Mh.map(($,Y)=>{const G=Hm($.contact_type),Ie=Wm($.contact_type);let Xe=$.contact_value;return Xe.match(/^https?:\/\//i)||(Xe=`https://${Xe}`),u.jsx("a",{href:Xe,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${Ie}`,title:`${$.contact_type.charAt(0).toUpperCase()+$.contact_type.slice(1)}: ${$.contact_value}`,children:u.jsx(G,{className:"w-5 h-5"})},Y)})})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[!ke&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Contact information"}),u.jsxs(le,{to:`/people/${t}/contact/new`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add contact detail"})]})]}),((fD=Ee.contact_info)==null?void 0:fD.filter($=>!Dt.includes($.contact_type)).length)>0?u.jsx("div",{className:"space-y-2",children:(()=>{const $={email:1,phone:2,mobile:2,calendar:3,other:4};return Ee.contact_info.filter(G=>!Dt.includes(G.contact_type)).map((G,Ie)=>({...G,originalIndex:Ie})).sort((G,Ie)=>{const Xe=$[G.contact_type]||99,pt=$[Ie.contact_type]||99;return Xe!==pt?Xe-pt:G.originalIndex-Ie.originalIndex}).map((G,Ie)=>{Ee.contact_info.indexOf(G);const Xe=G.contact_type==="email"?JR:G.contact_type==="phone"||G.contact_type==="mobile"?ZR:G.contact_type==="calendar"?yo:ry,pt=G.contact_type==="email",vt=G.contact_type==="phone"||G.contact_type==="mobile",Ko=G.contact_type==="mobile",Ks=G.contact_type==="calendar";let Yi=null,Gs=null;return pt?Yi=`mailto:${G.contact_value}`:vt?Yi=`tel:${M(G.contact_value)}`:Ks&&(Yi=G.contact_value,Gs="_blank"),u.jsx("div",{className:"group",children:u.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[u.jsx(Xe,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[G.contact_label||G.contact_type,": "]}),Yi?u.jsx("a",{href:Yi,target:Gs||void 0,rel:Gs==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:G.contact_value}):u.jsx("span",{children:G.contact_value}),Ko&&u.jsx("a",{href:`https://wa.me/${M(G.contact_value)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 hover:opacity-80 transition-opacity",title:"Open WhatsApp",children:u.jsx(fte,{className:"w-4 h-4 text-[#25D366]"})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(le,{to:`/people/${t}/contact/${G.originalIndex}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit contact detail",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>F(G.originalIndex),className:"p-1 hover:bg-red-50 rounded",title:"Delete contact detail",children:u.jsx(li,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},G.originalIndex)})})()}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No contact information yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Events"}),u.jsxs(le,{to:`/dates/new?person=${t}`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add Important Date"})]})]}),$t.length>0?u.jsx("div",{className:"space-y-3",children:$t.map($=>{const Y=Array.isArray($.date_type)?$.date_type[0]:$.date_type,G=(Y==null?void 0:Y.toLowerCase())||"",Ie=G.includes("died"),Xe=G.includes("wedding")||G.includes("marriage")?Tfe:G.includes("birthday")?kfe:yo;return u.jsxs("div",{className:"flex items-start group",children:[u.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:Ie?u.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):u.jsx(Xe,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium",children:$.title}),u.jsx("p",{className:"text-xs text-gray-500",children:$.date_value&&En(new Date($.date_value),"MMMM d, yyyy")}),Y&&u.jsx("p",{className:"text-xs text-gray-400 capitalize",children:Y})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx(le,{to:`/dates/${$.id}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Z($.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:u.jsx(li,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},$.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No important dates yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Timeline"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>P(!0),className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Note"})]}),u.jsxs("button",{onClick:()=>q(!0),className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),u.jsx(NSe,{timeline:o||[],onEdit:st,onDelete:Si,onToggleTodo:_e,personId:t,allPeople:w||[]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Work history"}),u.jsxs(le,{to:`/people/${t}/work-history/new`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add work history"})]})]}),(ge==null?void 0:ge.length)>0?u.jsx("div",{className:"space-y-4",children:ge.map(($,Y)=>{const G=$.company?Rh[$.company]:null,Ie=$.originalIndex;return u.jsxs("div",{className:"flex items-start group",children:[G!=null&&G.logo?u.jsx("img",{src:G.logo,alt:G.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):u.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:u.jsx(Ir,{className:"w-10 h-10 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium",children:$.job_title}),$.company&&G&&u.jsx(le,{to:`/companies/${$.company}`,className:"text-sm text-primary-600 hover:underline",children:G.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[$.start_date&&En(new Date($.start_date),"MMM yyyy")," - ",$.is_current?"Present":$.end_date?En(new Date($.end_date),"MMM yyyy"):""]}),$.description&&u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:$.description})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(le,{to:`/people/${t}/work-history/${Ie}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Gi(Ie),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:u.jsx(li,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Ie)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No work history yet."})]}),x.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(zy,{className:"w-5 h-5 mr-2"}),"Investments"]}),u.jsx("div",{className:"space-y-3",children:x.map($=>u.jsxs(le,{to:`/companies/${$.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[$.thumbnail?u.jsx("img",{src:$.thumbnail,alt:$.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Ir,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:$.name}),$.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:$.industry})]})]},$.id))})]}),u.jsx(CSe,{isOpen:j,onClose:()=>P(!1),onSubmit:ye,isLoading:f.isPending}),u.jsx(zM,{isOpen:A,onClose:()=>{q(!1),U(null),fe(null),Re(null)},onSubmit:Qe,isLoading:z?m.isPending:p.isPending,personId:t,initialData:xe,activity:z}),u.jsx(tM,{isOpen:we,onClose:()=>{Fe(!1),fe(null)},todo:K,onComplete:ie,onCompleteAsActivity:he}),u.jsx(Eie,{isOpen:R,onClose:()=>{L(!1),W(null)},onSubmit:D?Zt:Ze,isLoading:D?b.isPending:g.isPending,todo:D})]}),u.jsxs("div",{className:"space-y-6",children:[(Ee.how_we_met||Ee.met_date)&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),Ee.met_date&&u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[u.jsx(yo,{className:"w-4 h-4 inline mr-1"}),En(new Date(Ee.met_date),"MMMM d, yyyy")]}),Ee.how_we_met&&u.jsx("p",{className:"text-sm",children:Ee.how_we_met})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Todos"}),u.jsxs("button",{onClick:()=>{W(null),L(!0)},className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add todo"})]})]}),Oe.length>0?u.jsx("div",{className:"space-y-2",children:Oe.map($=>{const Y=tm($);return u.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[u.jsx("button",{onClick:()=>_e($),className:"mt-0.5 mr-2 flex-shrink-0",title:$.is_completed?"Mark as incomplete":"Mark as complete",children:$.is_completed?u.jsx(qP,{className:"w-5 h-5 text-primary-600"}):u.jsx(Pd,{className:`w-5 h-5 ${Y?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${$.is_completed?"line-through text-gray-400":Y?"text-red-600":""}`,children:$.content}),$.due_date&&u.jsxs("p",{className:`text-xs mt-0.5 ${Y&&!$.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",En(new Date($.due_date),"MMM d, yyyy"),Y&&!$.is_completed&&" (overdue)"]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{W($),L(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Ce($.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(li,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},$.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Relationships"}),u.jsxs(le,{to:`/people/${t}/relationship/new`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add relationship"})]})]}),(pu==null?void 0:pu.length)>0?u.jsx("div",{className:"space-y-2",children:pu.map(($,Y)=>{var Ie,Xe,pt;const G=((Xe=(Ie=n==null?void 0:n.acf)==null?void 0:Ie.relationships)==null?void 0:Xe.findIndex(vt=>vt.related_person===$.related_person&&vt.relationship_type===$.relationship_type))??Y;return u.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[u.jsxs(le,{to:`/people/${$.related_person}`,className:"flex items-center flex-1 min-w-0",children:[$.person_thumbnail?u.jsx("img",{src:$.person_thumbnail,alt:Wn($.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-gray-500",children:((pt=Wn($.person_name))==null?void 0:pt[0])||"?"})}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium",children:[Wn($.person_name)||`Person #${$.related_person}`,Ob[$.related_person]&&u.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),u.jsx("p",{className:"text-xs text-gray-500",children:Wn($.relationship_name||$.relationship_label)})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(le,{to:`/people/${t}/relationship/${G}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>oe(G),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:u.jsx(li,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Y)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No relationships yet."})]}),!ke&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Addresses"}),u.jsxs(le,{to:`/people/${t}/address/new`,className:"btn-secondary text-sm",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add address"})]})]}),((pD=Ee.addresses)==null?void 0:pD.length)>0?u.jsx("div",{className:"space-y-4",children:Ee.addresses.map(($,Y)=>{const G=[];$.street&&G.push($.street);const Ie=[$.postal_code,$.city].filter(Boolean).join(" ");Ie&&G.push(Ie);const Xe=[$.state,$.country].filter(Boolean).join(", ");Xe&&G.push(Xe);const pt=[$.street,$.postal_code,$.city,$.state,$.country].filter(Boolean).join(", "),vt=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(pt)}`;return u.jsx("div",{className:"group",children:u.jsxs("div",{className:"flex items-start rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[u.jsx($fe,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[$.address_label&&u.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:$.address_label}),u.jsx("a",{href:vt,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:G.map((Ko,Ks)=>u.jsx("span",{className:"block",children:Ko},Ks))})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(le,{to:`/people/${t}/address/${Y}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>V(Y),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:u.jsx(li,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},Y)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No addresses yet."})]})]})]})]})}var om=t=>t.type==="checkbox",Fl=t=>t instanceof Date,Ln=t=>t==null;const Nie=t=>typeof t=="object";var br=t=>!Ln(t)&&!Array.isArray(t)&&Nie(t)&&!Fl(t),Cie=t=>br(t)&&t.target?om(t.target)?t.target.checked:t.target.value:t,RSe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,kie=(t,e)=>t.has(RSe(e)),MSe=t=>{const e=t.constructor&&t.constructor.prototype;return br(e)&&e.hasOwnProperty("isPrototypeOf")},VM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Or(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(VM&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(br(t)&&MSe(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Or(t[i]));return n}var V0=t=>/^\w*$/.test(t),ar=t=>t===void 0,UM=t=>Array.isArray(t)?t.filter(Boolean):[],HM=t=>UM(t.replace(/["|']|\]/g,"").split(/\.|\[/)),pe=(t,e,r)=>{if(!e||!br(t))return r;const n=(V0(e)?[e]:HM(e)).reduce((i,s)=>Ln(i)?i:i[s],t);return ar(n)||n===t?ar(t[e])?r:t[e]:n},ci=t=>typeof t=="boolean",Cn=t=>typeof t=="function",Ot=(t,e,r)=>{let n=-1;const i=V0(e)?[e]:HM(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const c=t[a];l=br(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Av={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},as={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Tie=Ae.createContext(null);Tie.displayName="HookFormContext";const WM=()=>Ae.useContext(Tie);var Oie=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==as.all&&(e._proxyFormState[o]=!n||as.all),r&&(r[o]=!0),t[o]}});return i};const KM=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;function $Se(t){const e=WM(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=Ae.useState(r._formState),l=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return KM(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:c=>{!n&&a({...r._formState,...c})}}),[i,n,s]),Ae.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),Ae.useMemo(()=>Oie(o,r,l.current,!1),[o,r])}var di=t=>typeof t=="string",xI=(t,e,r,n,i)=>di(t)?(n&&e.watch.add(t),pe(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),pe(r,s))):(n&&(e.watchAll=!0),r),wI=t=>Ln(t)||!Nie(t);function ls(t,e,r=new WeakSet){if(wI(t)||wI(e))return Object.is(t,e);if(Fl(t)&&Fl(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Fl(o)&&Fl(a)||br(o)&&br(a)||Array.isArray(o)&&Array.isArray(a)?!ls(o,a,r):!Object.is(o,a))return!1}}return!0}function DSe(t){const e=WM(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=Ae.useRef(i),c=Ae.useRef(a),d=Ae.useRef(void 0),h=Ae.useRef(r),f=Ae.useRef(n);c.current=a;const[p,m]=Ae.useState(()=>{const x=r._getWatch(n,l.current);return c.current?c.current(x):x}),g=Ae.useCallback(x=>{const S=xI(n,r._names,x||r._formValues,!1,l.current);return c.current?c.current(S):S},[r._formValues,r._names,n]),b=Ae.useCallback(x=>{if(!s){const S=xI(n,r._names,x||r._formValues,!1,l.current);if(c.current){const _=c.current(S);ls(_,d.current)||(m(_),d.current=_)}else m(S)}},[r._formValues,r._names,s,n]);KM(()=>((h.current!==r||!ls(f.current,n))&&(h.current=r,f.current=n,b()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{b(x.values)}})),[r,o,n,b]),Ae.useEffect(()=>r._removeUnmounted());const y=h.current!==r,v=f.current,w=Ae.useMemo(()=>{if(s)return null;const x=!y&&!ls(v,n);return y||x?g():null},[s,y,n,v,g]);return w!==null?w:p}function ASe(t){const e=WM(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=kie(i._names.array,r),c=Ae.useMemo(()=>pe(i._formValues,r,pe(i._defaultValues,r,o)),[i,r,o]),d=DSe({control:i,name:r,defaultValue:c,exact:a}),h=$Se({control:i,name:r,exact:a}),f=Ae.useRef(t),p=Ae.useRef(void 0),m=Ae.useRef(i.register(r,{...t.rules,value:d,...ci(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!pe(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!pe(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!pe(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!pe(h.validatingFields,r)},error:{enumerable:!0,get:()=>pe(h.errors,r)}}),[h,r]),b=Ae.useCallback(x=>m.current.onChange({target:{value:Cie(x),name:r},type:Av.CHANGE}),[r]),y=Ae.useCallback(()=>m.current.onBlur({target:{value:pe(i._formValues,r),name:r},type:Av.BLUR}),[r,i._formValues]),v=Ae.useCallback(x=>{const S=pe(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>Cn(x.focus)&&x.focus(),select:()=>Cn(x.select)&&x.select(),setCustomValidity:_=>Cn(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>Cn(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=Ae.useMemo(()=>({name:r,value:d,...ci(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:b,onBlur:y,ref:v}),[r,n,h.disabled,b,y,v,d]);return Ae.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...ci(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(N,E)=>{const k=pe(i._fields,N);k&&k._f&&(k._f.mount=E)};if(_(r,!0),x){const N=Or(pe(i._options.defaultValues,r,f.current.defaultValue));Ot(i._defaultValues,r,N),ar(pe(i._formValues,r))&&Ot(i._formValues,r,N)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),Ae.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Ae.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const Fv=t=>t.render(ASe(t));var FSe=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},Df=t=>Array.isArray(t)?t:[t],J4=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function jie(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&br(i)&&s){const o=jie(i,s);br(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var xn=t=>br(t)&&!Object.keys(t).length,GM=t=>t.type==="file",qv=t=>{if(!VM)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Pie=t=>t.type==="select-multiple",YM=t=>t.type==="radio",qSe=t=>YM(t)||om(t),B1=t=>qv(t)&&t.isConnected;function LSe(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=ar(t)?n++:t[e[n++]];return t}function BSe(t){for(const e in t)if(t.hasOwnProperty(e)&&!ar(t[e]))return!1;return!0}function gr(t,e){const r=Array.isArray(e)?e:V0(e)?[e]:HM(e),n=r.length===1?t:LSe(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(br(n)&&xn(n)||Array.isArray(n)&&BSe(n))&&gr(t,r.slice(0,-1)),t}var zSe=t=>{for(const e in t)if(Cn(t[e]))return!0;return!1};function Iie(t){return Array.isArray(t)||br(t)&&!zSe(t)}function SI(t,e={}){for(const r in t){const n=t[r];Iie(n)?(e[r]=Array.isArray(n)?[]:{},SI(n,e[r])):ar(n)||(e[r]=!0)}return e}function ku(t,e,r){r||(r=SI(e));for(const n in t){const i=t[n];if(Iie(i))ar(e)||wI(r[n])?r[n]=SI(i,Array.isArray(i)?[]:{}):ku(i,Ln(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!ls(i,s)}}return r}const Z4={value:!1,isValid:!1},eq={value:!0,isValid:!0};var Rie=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ar(t[0].attributes.value)?ar(t[0].value)||t[0].value===""?eq:{value:t[0].value,isValid:!0}:eq:Z4}return Z4},Mie=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>ar(t)?t:e?t===""?NaN:t&&+t:r&&di(t)?new Date(t):n?n(t):t;const tq={isValid:!1,value:null};var $ie=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,tq):tq;function rq(t){const e=t.ref;return GM(e)?e.files:YM(e)?$ie(t.refs).value:Pie(e)?[...e.selectedOptions].map(({value:r})=>r):om(e)?Rie(t.refs).value:Mie(ar(e.value)?t.ref.value:e.value,t)}var VSe=(t,e,r,n)=>{const i={};for(const s of t){const o=pe(e,s);o&&Ot(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Lv=t=>t instanceof RegExp,Zh=t=>ar(t)?t:Lv(t)?t.source:br(t)?Lv(t.value)?t.value.source:t.value:t,nq=t=>({isOnSubmit:!t||t===as.onSubmit,isOnBlur:t===as.onBlur,isOnChange:t===as.onChange,isOnAll:t===as.all,isOnTouch:t===as.onTouched});const iq="AsyncFunction";var USe=t=>!!t&&!!t.validate&&!!(Cn(t.validate)&&t.validate.constructor.name===iq||br(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===iq)),HSe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),sq=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Af=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=pe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(Af(a,e))break}else if(br(a)&&Af(a,e))break}}};function oq(t,e,r){const n=pe(t,r);if(n||V0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=pe(e,s),a=pe(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var WSe=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return xn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||as.all))},KSe=(t,e,r)=>!t||!e||t===e||Df(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),GSe=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,YSe=(t,e)=>!UM(pe(t,e)).length&&gr(t,e),QSe=(t,e,r)=>{const n=Df(pe(t,r));return Ot(n,"root",e[r]),Ot(t,r,n),t};function aq(t,e,r="validate"){if(di(t)||Array.isArray(t)&&t.every(di)||ci(t)&&!t)return{type:r,message:di(t)?t:"",ref:e}}var bu=t=>br(t)&&!Lv(t)?t:{value:t,message:""},lq=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:b,mount:y}=t._f,v=pe(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=j=>{i&&w.reportValidity&&(w.setCustomValidity(ci(j)?"":j||""),w.reportValidity())},S={},_=YM(o),N=om(o),E=_||N,k=(b||GM(o))&&ar(o.value)&&ar(v)||qv(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,C=FSe.bind(null,g,n,S),O=(j,P,A,q=Zs.maxLength,R=Zs.minLength)=>{const L=j?P:A;S[g]={type:j?q:R,message:L,ref:o,...C(j?q:R,L)}};if(s?!Array.isArray(v)||!v.length:l&&(!E&&(k||Ln(v))||ci(v)&&!v||N&&!Rie(a).isValid||_&&!$ie(a).isValid)){const{value:j,message:P}=di(l)?{value:!!l,message:l}:bu(l);if(j&&(S[g]={type:Zs.required,message:P,ref:w,...C(Zs.required,P)},!n))return x(P),S}if(!k&&(!Ln(h)||!Ln(f))){let j,P;const A=bu(f),q=bu(h);if(!Ln(v)&&!isNaN(v)){const R=o.valueAsNumber||v&&+v;Ln(A.value)||(j=R>A.value),Ln(q.value)||(P=R<q.value)}else{const R=o.valueAsDate||new Date(v),L=z=>new Date(new Date().toDateString()+" "+z),D=o.type=="time",W=o.type=="week";di(A.value)&&v&&(j=D?L(v)>L(A.value):W?v>A.value:R>new Date(A.value)),di(q.value)&&v&&(P=D?L(v)<L(q.value):W?v<q.value:R<new Date(q.value))}if((j||P)&&(O(!!j,A.message,q.message,Zs.max,Zs.min),!n))return x(S[g].message),S}if((c||d)&&!k&&(di(v)||s&&Array.isArray(v))){const j=bu(c),P=bu(d),A=!Ln(j.value)&&v.length>+j.value,q=!Ln(P.value)&&v.length<+P.value;if((A||q)&&(O(A,j.message,P.message),!n))return x(S[g].message),S}if(p&&!k&&di(v)){const{value:j,message:P}=bu(p);if(Lv(j)&&!v.match(j)&&(S[g]={type:Zs.pattern,message:P,ref:o,...C(Zs.pattern,P)},!n))return x(P),S}if(m){if(Cn(m)){const j=await m(v,r),P=aq(j,w);if(P&&(S[g]={...P,...C(Zs.validate,P.message)},!n))return x(P.message),S}else if(br(m)){let j={};for(const P in m){if(!xn(j)&&!n)break;const A=aq(await m[P](v,r),w,P);A&&(j={...A,...C(P,A.message)},x(A.message),n&&(S[g]=j))}if(!xn(j)&&(S[g]={ref:w,...j},!n))return S}}return x(!0),S};const XSe={mode:as.onSubmit,reValidateMode:as.onChange,shouldFocusError:!0};function JSe(t={}){let e={...XSe,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Cn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=br(e.defaultValues)||br(e.values)?Or(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Or(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:J4(),state:J4()},m=e.criteriaMode===as.all,g=M=>F=>{clearTimeout(c),c=setTimeout(M,F)},b=async M=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||M)){let F;e.resolver?(F=xn((await E()).errors),y()):F=await C(n,!0),F!==r.isValid&&p.state.next({isValid:F})}},y=(M,F)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((M||Array.from(a.mount)).forEach(V=>{V&&(F?Ot(r.validatingFields,V,F):gr(r.validatingFields,V))}),p.state.next({validatingFields:r.validatingFields,isValidating:!xn(r.validatingFields)}))},v=(M,F=[],V,oe,Z=!0,J=!0)=>{if(oe&&V&&!e.disabled){if(o.action=!0,J&&Array.isArray(pe(n,M))){const ye=V(pe(n,M),oe.argA,oe.argB);Z&&Ot(n,M,ye)}if(J&&Array.isArray(pe(r.errors,M))){const ye=V(pe(r.errors,M),oe.argA,oe.argB);Z&&Ot(r.errors,M,ye),YSe(r.errors,M)}if((h.touchedFields||f.touchedFields)&&J&&Array.isArray(pe(r.touchedFields,M))){const ye=V(pe(r.touchedFields,M),oe.argA,oe.argB);Z&&Ot(r.touchedFields,M,ye)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=ku(i,s)),p.state.next({name:M,isDirty:j(M,F),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ot(s,M,F)},w=(M,F)=>{Ot(r.errors,M,F),p.state.next({errors:r.errors})},x=M=>{r.errors=M,p.state.next({errors:r.errors,isValid:!1})},S=(M,F,V,oe)=>{const Z=pe(n,M);if(Z){const J=pe(s,M,ar(V)?pe(i,M):V);ar(J)||oe&&oe.defaultChecked||F?Ot(s,M,F?J:rq(Z._f)):q(M,J),o.mount&&!o.action&&b()}},_=(M,F,V,oe,Z)=>{let J=!1,ye=!1;const Qe={name:M};if(!e.disabled){if(!V||oe){(h.isDirty||f.isDirty)&&(ye=r.isDirty,r.isDirty=Qe.isDirty=j(),J=ye!==Qe.isDirty);const Ze=ls(pe(i,M),F);ye=!!pe(r.dirtyFields,M),Ze?gr(r.dirtyFields,M):Ot(r.dirtyFields,M,!0),Qe.dirtyFields=r.dirtyFields,J=J||(h.dirtyFields||f.dirtyFields)&&ye!==!Ze}if(V){const Ze=pe(r.touchedFields,M);Ze||(Ot(r.touchedFields,M,V),Qe.touchedFields=r.touchedFields,J=J||(h.touchedFields||f.touchedFields)&&Ze!==V)}J&&Z&&p.state.next(Qe)}return J?Qe:{}},N=(M,F,V,oe)=>{const Z=pe(r.errors,M),J=(h.isValid||f.isValid)&&ci(F)&&r.isValid!==F;if(e.delayError&&V?(l=g(()=>w(M,V)),l(e.delayError)):(clearTimeout(c),l=null,V?Ot(r.errors,M,V):gr(r.errors,M)),(V?!ls(Z,V):Z)||!xn(oe)||J){const ye={...oe,...J&&ci(F)?{isValid:F}:{},errors:r.errors,name:M};r={...r,...ye},p.state.next(ye)}},E=async M=>(y(M,!0),await e.resolver(s,e.context,VSe(M||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),k=async M=>{const{errors:F}=await E(M);if(y(M),M)for(const V of M){const oe=pe(F,V);oe?Ot(r.errors,V,oe):gr(r.errors,V)}else r.errors=F;return F},C=async(M,F,V={valid:!0})=>{for(const oe in M){const Z=M[oe];if(Z){const{_f:J,...ye}=Z;if(J){const Qe=a.array.has(J.name),Ze=Z._f&&USe(Z._f);Ze&&h.validatingFields&&y([J.name],!0);const Zt=await lq(Z,a.disabled,s,m,e.shouldUseNativeValidation&&!F,Qe);if(Ze&&h.validatingFields&&y([J.name]),Zt[J.name]&&(V.valid=!1,F))break;!F&&(pe(Zt,J.name)?Qe?QSe(r.errors,Zt,J.name):Ot(r.errors,J.name,Zt[J.name]):gr(r.errors,J.name))}!xn(ye)&&await C(ye,F,V)}}return V.valid},O=()=>{for(const M of a.unMount){const F=pe(n,M);F&&(F._f.refs?F._f.refs.every(V=>!B1(V)):!B1(F._f.ref))&&Ve(M)}a.unMount=new Set},j=(M,F)=>!e.disabled&&(M&&F&&Ot(s,M,F),!ls(U(),i)),P=(M,F,V)=>xI(M,a,{...o.mount?s:ar(F)?i:di(M)?{[M]:F}:F},V,F),A=M=>UM(pe(o.mount?s:i,M,e.shouldUnregister?pe(i,M,[]):[])),q=(M,F,V={})=>{const oe=pe(n,M);let Z=F;if(oe){const J=oe._f;J&&(!J.disabled&&Ot(s,M,Mie(F,J)),Z=qv(J.ref)&&Ln(F)?"":F,Pie(J.ref)?[...J.ref.options].forEach(ye=>ye.selected=Z.includes(ye.value)):J.refs?om(J.ref)?J.refs.forEach(ye=>{(!ye.defaultChecked||!ye.disabled)&&(Array.isArray(Z)?ye.checked=!!Z.find(Qe=>Qe===ye.value):ye.checked=Z===ye.value||!!Z)}):J.refs.forEach(ye=>ye.checked=ye.value===Z):GM(J.ref)?J.ref.value="":(J.ref.value=Z,J.ref.type||p.state.next({name:M,values:Or(s)})))}(V.shouldDirty||V.shouldTouch)&&_(M,Z,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&z(M)},R=(M,F,V)=>{for(const oe in F){if(!F.hasOwnProperty(oe))return;const Z=F[oe],J=M+"."+oe,ye=pe(n,J);(a.array.has(M)||br(Z)||ye&&!ye._f)&&!Fl(Z)?R(J,Z,V):q(J,Z,V)}},L=(M,F,V={})=>{const oe=pe(n,M),Z=a.array.has(M),J=Or(F);Ot(s,M,J),Z?(p.array.next({name:M,values:Or(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&V.shouldDirty&&p.state.next({name:M,dirtyFields:ku(i,s),isDirty:j(M,J)})):oe&&!oe._f&&!Ln(J)?R(M,J,V):q(M,J,V),sq(M,a)&&p.state.next({...r,name:M}),p.state.next({name:o.mount?M:void 0,values:Or(s)})},D=async M=>{o.mount=!0;const F=M.target;let V=F.name,oe=!0;const Z=pe(n,V),J=Ze=>{oe=Number.isNaN(Ze)||Fl(Ze)&&isNaN(Ze.getTime())||ls(Ze,pe(s,V,Ze))},ye=nq(e.mode),Qe=nq(e.reValidateMode);if(Z){let Ze,Zt;const _e=F.type?rq(Z._f):Cie(M),ie=M.type===Av.BLUR||M.type===Av.FOCUS_OUT,he=!HSe(Z._f)&&!e.resolver&&!pe(r.errors,V)&&!Z._f.deps||GSe(ie,pe(r.touchedFields,V),r.isSubmitted,Qe,ye),de=sq(V,a,ie);Ot(s,V,_e),ie?(!F||!F.readOnly)&&(Z._f.onBlur&&Z._f.onBlur(M),l&&l(0)):Z._f.onChange&&Z._f.onChange(M);const Ce=_(V,_e,ie),st=!xn(Ce)||de;if(!ie&&p.state.next({name:V,type:M.type,values:Or(s)}),he)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?ie&&b():ie||b()),st&&p.state.next({name:V,...de?{}:Ce});if(!ie&&de&&p.state.next({...r}),e.resolver){const{errors:Si}=await E([V]);if(y([V]),J(_e),oe){const Gi=oq(r.errors,n,V),fu=oq(Si,n,Gi.name||V);Ze=fu.error,V=fu.name,Zt=xn(Si)}}else y([V],!0),Ze=(await lq(Z,a.disabled,s,m,e.shouldUseNativeValidation))[V],y([V]),J(_e),oe&&(Ze?Zt=!1:(h.isValid||f.isValid)&&(Zt=await C(n,!0)));oe&&(Z._f.deps&&(!Array.isArray(Z._f.deps)||Z._f.deps.length>0)&&z(Z._f.deps),N(V,Zt,Ze,Ce))}},W=(M,F)=>{if(pe(r.errors,F)&&M.focus)return M.focus(),1},z=async(M,F={})=>{let V,oe;const Z=Df(M);if(e.resolver){const J=await k(ar(M)?M:Z);V=xn(J),oe=M?!Z.some(ye=>pe(J,ye)):V}else M?(oe=(await Promise.all(Z.map(async J=>{const ye=pe(n,J);return await C(ye&&ye._f?{[J]:ye}:ye)}))).every(Boolean),!(!oe&&!r.isValid)&&b()):oe=V=await C(n);return p.state.next({...!di(M)||(h.isValid||f.isValid)&&V!==r.isValid?{}:{name:M},...e.resolver||!M?{isValid:V}:{},errors:r.errors}),F.shouldFocus&&!oe&&Af(n,W,M?Z:a.mount),oe},U=(M,F)=>{let V={...o.mount?s:i};return F&&(V=jie(F.dirtyFields?r.dirtyFields:r.touchedFields,V)),ar(M)?V:di(M)?pe(V,M):M.map(oe=>pe(V,oe))},K=(M,F)=>({invalid:!!pe((F||r).errors,M),isDirty:!!pe((F||r).dirtyFields,M),error:pe((F||r).errors,M),isValidating:!!pe(r.validatingFields,M),isTouched:!!pe((F||r).touchedFields,M)}),fe=M=>{M&&Df(M).forEach(F=>gr(r.errors,F)),p.state.next({errors:M?r.errors:{}})},we=(M,F,V)=>{const oe=(pe(n,M,{_f:{}})._f||{}).ref,Z=pe(r.errors,M)||{},{ref:J,message:ye,type:Qe,...Ze}=Z;Ot(r.errors,M,{...Ze,...F,ref:oe}),p.state.next({name:M,errors:r.errors,isValid:!1}),V&&V.shouldFocus&&oe&&oe.focus&&oe.focus()},Fe=(M,F)=>Cn(M)?p.state.subscribe({next:V=>"values"in V&&M(P(void 0,F),V)}):P(M,F,!0),xe=M=>p.state.subscribe({next:F=>{KSe(M.name,F.name,M.exact)&&WSe(F,M.formState||h,Ye,M.reRenderRoot)&&M.callback({values:{...s},...r,...F,defaultValues:i})}}).unsubscribe,Re=M=>(o.mount=!0,f={...f,...M.formState},xe({...M,formState:{...d,...M.formState}})),Ve=(M,F={})=>{for(const V of M?Df(M):a.mount)a.mount.delete(V),a.array.delete(V),F.keepValue||(gr(n,V),gr(s,V)),!F.keepError&&gr(r.errors,V),!F.keepDirty&&gr(r.dirtyFields,V),!F.keepTouched&&gr(r.touchedFields,V),!F.keepIsValidating&&gr(r.validatingFields,V),!e.shouldUnregister&&!F.keepDefaultValue&&gr(i,V);p.state.next({values:Or(s)}),p.state.next({...r,...F.keepDirty?{isDirty:j()}:{}}),!F.keepIsValid&&b()},ct=({disabled:M,name:F})=>{(ci(M)&&o.mount||M||a.disabled.has(F))&&(M?a.disabled.add(F):a.disabled.delete(F))},Jt=(M,F={})=>{let V=pe(n,M);const oe=ci(F.disabled)||ci(e.disabled);return Ot(n,M,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:M}},name:M,mount:!0,...F}}),a.mount.add(M),V?ct({disabled:ci(F.disabled)?F.disabled:e.disabled,name:M}):S(M,!0,F.value),{...oe?{disabled:F.disabled||e.disabled}:{},...e.progressive?{required:!!F.required,min:Zh(F.min),max:Zh(F.max),minLength:Zh(F.minLength),maxLength:Zh(F.maxLength),pattern:Zh(F.pattern)}:{},name:M,onChange:D,onBlur:D,ref:Z=>{if(Z){Jt(M,F),V=pe(n,M);const J=ar(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,ye=qSe(J),Qe=V._f.refs||[];if(ye?Qe.find(Ze=>Ze===J):J===V._f.ref)return;Ot(n,M,{_f:{...V._f,...ye?{refs:[...Qe.filter(B1),J,...Array.isArray(pe(i,M))?[{}]:[]],ref:{type:J.type,name:M}}:{ref:J}}}),S(M,!1,void 0,J)}else V=pe(n,M,{}),V._f&&(V._f.mount=!1),(e.shouldUnregister||F.shouldUnregister)&&!(kie(a.array,M)&&o.action)&&a.unMount.add(M)}}},ft=()=>e.shouldFocusError&&Af(n,W,a.mount),X=M=>{ci(M)&&(p.state.next({disabled:M}),Af(n,(F,V)=>{const oe=pe(n,V);oe&&(F.disabled=oe._f.disabled||M,Array.isArray(oe._f.refs)&&oe._f.refs.forEach(Z=>{Z.disabled=oe._f.disabled||M}))},0,!1))},Se=(M,F)=>async V=>{let oe;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let Z=Or(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:J,values:ye}=await E();y(),r.errors=J,Z=Or(ye)}else await C(n);if(a.disabled.size)for(const J of a.disabled)gr(Z,J);if(gr(r.errors,"root"),xn(r.errors)){p.state.next({errors:{}});try{await M(Z,V)}catch(J){oe=J}}else F&&await F({...r.errors},V),ft(),setTimeout(ft);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xn(r.errors)&&!oe,submitCount:r.submitCount+1,errors:r.errors}),oe)throw oe},He=(M,F={})=>{pe(n,M)&&(ar(F.defaultValue)?L(M,Or(pe(i,M))):(L(M,F.defaultValue),Ot(i,M,Or(F.defaultValue))),F.keepTouched||gr(r.touchedFields,M),F.keepDirty||(gr(r.dirtyFields,M),r.isDirty=F.defaultValue?j(M,Or(pe(i,M))):j()),F.keepError||(gr(r.errors,M),h.isValid&&b()),p.state.next({...r}))},tt=(M,F={})=>{const V=M?Or(M):i,oe=Or(V),Z=xn(M),J=Z?i:oe;if(F.keepDefaultValues||(i=V),!F.keepValues){if(F.keepDirtyValues){const ye=new Set([...a.mount,...Object.keys(ku(i,s))]);for(const Qe of Array.from(ye))pe(r.dirtyFields,Qe)?Ot(J,Qe,pe(s,Qe)):L(Qe,pe(J,Qe))}else{if(VM&&ar(M))for(const ye of a.mount){const Qe=pe(n,ye);if(Qe&&Qe._f){const Ze=Array.isArray(Qe._f.refs)?Qe._f.refs[0]:Qe._f.ref;if(qv(Ze)){const Zt=Ze.closest("form");if(Zt){Zt.reset();break}}}}if(F.keepFieldsRef)for(const ye of a.mount)L(ye,pe(J,ye));else n={}}s=e.shouldUnregister?F.keepDefaultValues?Or(i):{}:Or(J),p.array.next({values:{...J}}),p.state.next({values:{...J}})}a={mount:F.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!F.keepIsValid||!!F.keepDirtyValues||!e.shouldUnregister&&!xn(J),o.watch=!!e.shouldUnregister,o.keepIsValid=!!F.keepIsValid,o.action=!1,F.keepErrors||(r.errors={}),p.state.next({submitCount:F.keepSubmitCount?r.submitCount:0,isDirty:Z?!1:F.keepDirty?r.isDirty:!!(F.keepDefaultValues&&!ls(M,i)),isSubmitted:F.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Z?{}:F.keepDirtyValues?F.keepDefaultValues&&s?ku(i,s):r.dirtyFields:F.keepDefaultValues&&M?ku(i,M):F.keepDirty?r.dirtyFields:{},touchedFields:F.keepTouched?r.touchedFields:{},errors:F.keepErrors?r.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Vt=(M,F)=>tt(Cn(M)?M(s):M,{...e.resetOptions,...F}),ke=(M,F={})=>{const V=pe(n,M),oe=V&&V._f;if(oe){const Z=oe.refs?oe.refs[0]:oe.ref;Z.focus&&setTimeout(()=>{Z.focus(),F.shouldSelect&&Cn(Z.select)&&Z.select()})}},Ye=M=>{r={...r,...M}},Nt={control:{register:Jt,unregister:Ve,getFieldState:K,handleSubmit:Se,setError:we,_subscribe:xe,_runSchema:E,_updateIsValidating:y,_focusError:ft,_getWatch:P,_getDirty:j,_setValid:b,_setFieldArray:v,_setDisabledField:ct,_setErrors:x,_getFieldArray:A,_reset:tt,_resetDefaultValues:()=>Cn(e.defaultValues)&&e.defaultValues().then(M=>{Vt(M,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:X,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(M){o=M},get _defaultValues(){return i},get _names(){return a},set _names(M){a=M},get _formState(){return r},get _options(){return e},set _options(M){e={...e,...M}}},subscribe:Re,trigger:z,register:Jt,handleSubmit:Se,watch:Fe,setValue:L,getValues:U,reset:Vt,resetField:He,clearErrors:fe,unregister:Ve,setError:we,setFocus:ke,getFieldState:K};return{...Nt,formControl:Nt}}function Kc(t={}){const e=Ae.useRef(void 0),r=Ae.useRef(void 0),[n,i]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:Cn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Cn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!Cn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=JSe(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,KM(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Ae.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Ae.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Ae.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Ae.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Ae.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),Ae.useEffect(()=>{var o;t.values&&!ls(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),Ae.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=Oie(n,s),e.current}function cq(){var q;const{id:t}=zs(),e=gn(),[r]=b0(),n=!!t,i=r.get("returnTo"),s=r.get("sourcePersonId"),{data:o,isLoading:a}=Vc(t),l=tpe(),c=nh(),{data:d=[]}=ut({queryKey:["date-types"],queryFn:async()=>(await We.getDateTypes()).data}),h=d.find(R=>R.slug==="birthday"||R.name.toLowerCase()==="birthday"),[f,p]=T.useState(!1),[m,g]=T.useState(null),[b,y]=T.useState(null),v=ht({mutationFn:async R=>{const L=new FormData;return L.append("file",R),(await ce.post("/prm/v1/import/vcard/parse",L,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:x,reset:S,watch:_,formState:{errors:N,isSubmitting:E}}=Kc({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",how_we_met:"",is_favorite:!1,birthday:""}});_("phone"),T.useEffect(()=>{var R,L,D,W,z,U,K,fe,we,Fe;if(o){const xe=(L=(R=o.acf)==null?void 0:R.contact_info)==null?void 0:L.find(ft=>ft.contact_type==="email"),Re=(xe==null?void 0:xe.contact_value)||"",Ve=(W=(D=o.acf)==null?void 0:D.contact_info)==null?void 0:W.find(ft=>ft.contact_type==="phone"||ft.contact_type==="mobile"),ct=(Ve==null?void 0:Ve.contact_value)||"",Jt=(Ve==null?void 0:Ve.contact_type)||"mobile";S({first_name:((z=o.acf)==null?void 0:z.first_name)||"",last_name:((U=o.acf)==null?void 0:U.last_name)||"",nickname:((K=o.acf)==null?void 0:K.nickname)||"",gender:((fe=o.acf)==null?void 0:fe.gender)||"",email:Re,phone:ct,phone_type:Jt,how_we_met:((we=o.acf)==null?void 0:we.how_we_met)||"",is_favorite:((Fe=o.acf)==null?void 0:Fe.is_favorite)||!1,birthday:""})}},[o,S]),$n(n&&o?`Edit ${((q=o.title)==null?void 0:q.rendered)||o.title||"person"}`:"New person");const k=T.useCallback(R=>{R.preventDefault(),R.stopPropagation(),R.type==="dragenter"||R.type==="dragover"?p(!0):R.type==="dragleave"&&p(!1)},[]),C=T.useCallback(R=>{R.preventDefault(),R.stopPropagation(),p(!1),y(null),R.dataTransfer.files&&R.dataTransfer.files[0]&&O(R.dataTransfer.files[0])},[]),O=R=>{const L=R.name.split(".").pop().toLowerCase();if(L!=="vcf"&&L!=="vcard"){y("Please select a vCard file (.vcf)");return}g(R),v.mutate(R,{onSuccess:D=>{S({first_name:D.first_name||"",last_name:D.last_name||"",nickname:D.nickname||"",gender:"",email:D.email||"",phone:D.phone||"",phone_type:D.phone_type||"mobile",how_we_met:D.note||"",is_favorite:!1,birthday:D.birthday||""}),D.contact_count>1&&y(`Note: File contains ${D.contact_count} contacts. Only the first contact was loaded.`)},onError:D=>{var W,z;y(((z=(W=D.response)==null?void 0:W.data)==null?void 0:z.message)||"Failed to parse vCard file"),g(null)}})},j=R=>{y(null),R.target.files&&R.target.files[0]&&O(R.target.files[0])},P=()=>{g(null),y(null),v.reset()},A=async R=>{try{const D=`${R.first_name||""} ${R.last_name||""}`.trim()||"Unnamed Person",W={title:D,status:"publish",acf:{first_name:R.first_name,last_name:R.last_name,nickname:R.nickname,gender:R.gender||null,how_we_met:R.how_we_met,is_favorite:R.is_favorite}};if(!n&&(R.email||R.phone)){const z=[];R.email&&z.push({contact_type:"email",contact_value:R.email,contact_label:""}),R.phone&&z.push({contact_type:R.phone_type||"mobile",contact_value:R.phone,contact_label:""}),W.acf.contact_info=z}if(n)W.title=D,await c.mutateAsync({id:t,data:W}),e(`/people/${t}`);else{const U=(await l.mutateAsync(W)).data.id;if(R.email)try{await qe.sideloadGravatar(U,R.email)}catch(K){console.error("Failed to load Gravatar:",K)}if(R.birthday&&h)try{const K=R.first_name||"Person";await We.createDate({title:`${K}'s Birthday`,status:"publish",date_type:[h.id],acf:{date_value:R.birthday,is_recurring:!0,related_people:[U],reminder_days_before:7}})}catch(K){console.error("Failed to create birthday:",K)}e(i==="relationship"&&s?`/people/${s}/relationship/new?newPersonId=${U}`:`/people/${U}`)}}catch(L){console.error("Failed to save person:",L)}};return n&&a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:i==="relationship"&&s?u.jsxs(le,{to:`/people/${s}/relationship/new`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to add relationship"})]}):u.jsxs(le,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit person":"Add new person"}),!n&&u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-4 text-center transition-colors ${f?"border-primary-500 bg-primary-50":m&&!b?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:C,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:j,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),v.isPending?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):m&&!b?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(Zp,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",m.name]}),u.jsx("button",{type:"button",onClick:R=>{R.preventDefault(),R.stopPropagation(),P()},className:"ml-2 p-1 hover:bg-green-100 rounded",children:u.jsx(pn,{className:"h-4 w-4 text-green-600"})})]}):u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(_c,{className:"h-5 w-5 text-gray-400"}),u.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard file here to import, or ",u.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),b&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-sm text-amber-700 bg-amber-50 rounded-lg p-2",children:[u.jsx(Ro,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:b})]})]}),u.jsxs("form",{onSubmit:x(A),className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"First name *"}),u.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John"}),N.first_name&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.first_name.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Last name"}),u.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Nickname"}),u.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Gender"}),u.jsxs("select",{...w("gender"),className:"input",children:[u.jsx("option",{value:"",children:"Select gender..."}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"non_binary",children:"Non-binary"}),u.jsx("option",{value:"other",children:"Other"}),u.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Email"}),u.jsx("input",{type:"email",...w("email"),className:"input",placeholder:"john@example.com"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: If a Gravatar is associated with this email, it will be automatically set as the profile photo"})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Phone"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{...w("phone_type"),className:"input w-28",children:[u.jsx("option",{value:"mobile",children:"Mobile"}),u.jsx("option",{value:"phone",children:"Phone"})]}),u.jsx("input",{type:"tel",...w("phone"),className:"input flex-1",placeholder:"+1 555 123 4567"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Birthday"}),u.jsx("input",{type:"date",...w("birthday"),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set their birthday when creating a new person"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"How we met"}),u.jsx("textarea",{...w("how_we_met"),className:"input",rows:4,placeholder:"We met at..."})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i==="relationship"&&s?u.jsx(le,{to:`/people/${s}/relationship/new`,className:"btn-secondary",children:"Cancel"}):u.jsx(le,{to:"/people",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:E,children:[E?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create person"]})]})]})]})]})}function ZSe({value:t,onChange:e,companies:r,isLoading:n}){return u.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return u.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function uq(){var v,w;const{personId:t,index:e}=zs(),r=gn();yt();const n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:o}=Vc(t),a=nh(),{data:l=[],isLoading:c}=ut({queryKey:["companies","all"],queryFn:async()=>(await We.getCompanies({per_page:100,orderby:"title",order:"asc"})).data}),{register:d,handleSubmit:h,reset:f,watch:p,control:m,formState:{errors:g,isSubmitting:b}}=Kc({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});T.useEffect(()=>{var x;if(s&&i){const _=(((x=s.acf)==null?void 0:x.work_history)||[])[n];_&&f({company:_.company||null,job_title:_.job_title||"",description:_.description||"",start_date:_.start_date||"",end_date:_.end_date||"",is_current:_.is_current||!1})}},[s,n,i,f]),$n(i?`Edit work history - ${((v=s==null?void 0:s.title)==null?void 0:v.rendered)||(s==null?void 0:s.title)||"person"}`:`Add work history - ${((w=s==null?void 0:s.title)==null?void 0:w.rendered)||(s==null?void 0:s.title)||"person"}`);const y=async x=>{var S;try{const _=[...((S=s.acf)==null?void 0:S.work_history)||[]],N={company:x.company||null,job_title:x.job_title||"",description:x.description||"",start_date:x.start_date||"",end_date:x.end_date||"",is_current:x.is_current||!1};i?_[n]=N:_.push(N);const E=co(s.acf,{work_history:_});await a.mutateAsync({id:t,data:{acf:E}}),r(`/people/${t}`)}catch(_){console.error("Failed to save work history:",_)}};return p("is_current"),o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(le,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit work history":"Add work history"}),u.jsxs("form",{onSubmit:h(y),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization"}),u.jsx(Fv,{name:"company",control:m,render:({field:x})=>u.jsx(ZSe,{value:x.value,onChange:x.onChange,companies:l,isLoading:c})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Job title"}),u.jsx("input",{...d("job_title"),className:"input",placeholder:"e.g., Software Engineer"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Description"}),u.jsx("textarea",{...d("description"),className:"input",rows:4,placeholder:"Job description, responsibilities, achievements..."})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Start date"}),u.jsx("input",{type:"date",...d("start_date"),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"End date"}),u.jsx("input",{type:"date",...d("end_date"),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set a future end date to automatically mark as former when it passes"})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_current",...d("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(le,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:b,children:[b?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add work history"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(le,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}const e_e=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"other",label:"Other"}];function dq(){var g,b;const{personId:t,index:e}=zs(),r=gn(),n=yt(),i=parseInt(e,10),s=!isNaN(i),{data:o,isLoading:a}=Vc(t),l=nh(),{register:c,handleSubmit:d,reset:h,formState:{errors:f,isSubmitting:p}}=Kc({defaultValues:{contact_type:"",contact_label:"",contact_value:""}});T.useEffect(()=>{var y;if(o&&s){const w=(((y=o.acf)==null?void 0:y.contact_info)||[])[i];w&&h({contact_type:w.contact_type||"",contact_label:w.contact_label||"",contact_value:w.contact_value||""})}},[o,i,s,h]),$n(s?`Edit contact detail - ${((g=o==null?void 0:o.title)==null?void 0:g.rendered)||(o==null?void 0:o.title)||"person"}`:`Add contact detail - ${((b=o==null?void 0:o.title)==null?void 0:b.rendered)||(o==null?void 0:o.title)||"person"}`);const m=async y=>{var v,w,x,S;try{const _=[...((v=o.acf)==null?void 0:v.contact_info)||[]],N={contact_type:y.contact_type||"",contact_label:y.contact_label||"",contact_value:y.contact_value||""};s?_[i]=N:_.push(N);const E=co(o.acf,{contact_info:_});if(await l.mutateAsync({id:t,data:{acf:E}}),!s&&y.contact_type==="email"&&y.contact_value&&!(o.featured_media>0||((S=(x=(w=o._embedded)==null?void 0:w["wp:featuredmedia"])==null?void 0:x[0])==null?void 0:S.source_url)||o.thumbnail))try{await qe.sideloadGravatar(t,y.contact_value),n.invalidateQueries({queryKey:["person",t]})}catch(C){console.log("No Gravatar found or failed to load:",C)}r(`/people/${t}`)}catch(_){console.error("Failed to save contact detail:",_)}};return a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):o?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(le,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:s?"Edit contact detail":"Add contact detail"}),u.jsxs("form",{onSubmit:d(m),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Contact type *"}),u.jsxs("select",{...c("contact_type",{required:"Please select a contact type"}),className:"input",children:[u.jsx("option",{value:"",children:"Select a type..."}),e_e.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))]}),f.contact_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.contact_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...c("contact_label"),className:"input",placeholder:"e.g., Work, Personal, Home"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Add a label to distinguish multiple entries of the same type"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Value *"}),u.jsx("input",{...c("contact_value",{required:"Please enter a contact value"}),className:"input",placeholder:"e.g., john@example.com, +1 234 567 8900"}),f.contact_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.contact_value.message})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(le,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:p,children:[p?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),s?"Save changes":"Add contact detail"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(le,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function t_e({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=T.useState(""),[a,l]=T.useState(!1),c=T.useRef(null),d=T.useRef(null),h=T.useMemo(()=>r.filter(v=>v.id!==i).sort((v,w)=>{var _,N;const x=(v.first_name||((_=v.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((N=w.acf)==null?void 0:N.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=T.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(v=>{var _,N;const w=tc(v).toLowerCase(),x=(v.first_name||((_=v.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(v.last_name||((N=v.acf)==null?void 0:N.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=T.useMemo(()=>h.find(y=>y.id===t),[h,t]);T.useEffect(()=>{const y=v=>{d.current&&!d.current.contains(v.target)&&c.current&&!c.current.contains(v.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},b=p?tc(p):"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:p&&!a?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[u.jsx("span",{children:b}),u.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(pn,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:c,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&u.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>u.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:tc(y)},y.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function hq(){var _,N;const{personId:t,index:e}=zs(),r=gn(),[n]=b0(),i=yt(),s=parseInt(e,10),o=!isNaN(s),{data:a,isLoading:l}=Vc(t),c=nh(),{data:d=[],isLoading:h}=zc(),{data:f=[],isLoading:p}=ut({queryKey:["relationship-types"],queryFn:async()=>(await We.getRelationshipTypes()).data}),{register:m,handleSubmit:g,reset:b,control:y,setValue:v,formState:{errors:w,isSubmitting:x}}=Kc({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});T.useEffect(()=>{const E=n.get("newPersonId");if(E&&!o&&!h){const k=parseInt(E,10);if(!isNaN(k))if(d.some(O=>O.id===k)){v("related_person",k);const O=new URLSearchParams(n);O.delete("newPersonId"),r({search:O.toString()},{replace:!0})}else(async()=>{try{await i.invalidateQueries({queryKey:["people"]});const{data:j=[]}=await i.refetchQueries({queryKey:["people"]});j.some(q=>q.id===k)&&v("related_person",k);const A=new URLSearchParams(n);A.delete("newPersonId"),r({search:A.toString()},{replace:!0})}catch(j){console.error("Failed to load new person:",j);const P=new URLSearchParams(n);P.delete("newPersonId"),r({search:P.toString()},{replace:!0})}})()}},[n,o,h,d,v,r,i]),T.useEffect(()=>{var E;if(a&&o){const C=(((E=a.acf)==null?void 0:E.relationships)||[])[s];C&&b({related_person:C.related_person||null,relationship_type:C.relationship_type?String(C.relationship_type):"",relationship_label:C.relationship_label||""})}},[a,s,o,b]),$n(o?`Edit relationship - ${((_=a==null?void 0:a.title)==null?void 0:_.rendered)||(a==null?void 0:a.title)||"person"}`:`Add relationship - ${((N=a==null?void 0:a.title)==null?void 0:N.rendered)||(a==null?void 0:a.title)||"person"}`);const S=async E=>{var k;try{const C=[...((k=a.acf)==null?void 0:k.relationships)||[]],O={related_person:E.related_person||null,relationship_type:E.relationship_type||null,relationship_label:E.relationship_label||""};o?C[s]=O:C.push(O);const j=co(a.acf,{relationships:C});await c.mutateAsync({id:t,data:{acf:j}}),r(`/people/${t}`)}catch(C){console.error("Failed to save relationship:",C)}};return l?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):a?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(le,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:o?"Edit relationship":"Add relationship"}),u.jsxs("form",{onSubmit:g(S),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related person *"}),u.jsx(Fv,{name:"related_person",control:y,rules:{required:"Please select a person"},render:({field:E})=>u.jsx(t_e,{value:E.value,onChange:E.onChange,people:d,isLoading:h,excludePersonId:parseInt(t,10)})}),w.related_person&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:w.related_person.message}),!o&&u.jsx("div",{className:"mt-2",children:u.jsxs(le,{to:`/people/new?returnTo=relationship&sourcePersonId=${t}`,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[u.jsx(sr,{className:"w-4 h-4"}),"Add new person"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Relationship type"}),u.jsxs("select",{...m("relationship_type",{setValueAs:E=>E?parseInt(E,10):null}),className:"input",disabled:p,children:[u.jsx("option",{value:"",children:"Select a type..."}),f.map(E=>u.jsx("option",{value:E.id,children:E.name},E.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Custom label"}),u.jsx("input",{...m("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(le,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:x,children:[x?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),o?"Save changes":"Add relationship"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(le,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function fq(){var m,g;const{personId:t,index:e}=zs(),r=gn(),n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:o}=Vc(t),a=nh(),{register:l,handleSubmit:c,reset:d,formState:{errors:h,isSubmitting:f}}=Kc({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});T.useEffect(()=>{var b;if(s&&i){const v=(((b=s.acf)==null?void 0:b.addresses)||[])[n];v&&d({address_label:v.address_label||"",street:v.street||"",postal_code:v.postal_code||"",city:v.city||"",state:v.state||"",country:v.country||""})}},[s,n,i,d]),$n(i?`Edit address - ${((m=s==null?void 0:s.title)==null?void 0:m.rendered)||(s==null?void 0:s.title)||"person"}`:`Add address - ${((g=s==null?void 0:s.title)==null?void 0:g.rendered)||(s==null?void 0:s.title)||"person"}`);const p=async b=>{var y;try{const v=[...((y=s.acf)==null?void 0:y.addresses)||[]],w={address_label:b.address_label||"",street:b.street||"",postal_code:b.postal_code||"",city:b.city||"",state:b.state||"",country:b.country||""};i?v[n]=w:v.push(w);const x=co(s.acf,{addresses:v});await a.mutateAsync({id:t,data:{acf:x}}),r(`/people/${t}`)}catch(v){console.error("Failed to save address:",v)}};return o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(le,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit address":"Add address"}),u.jsxs("form",{onSubmit:c(p),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...l("address_label"),className:"input",placeholder:"e.g., Home, Work"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Street"}),u.jsx("input",{...l("street"),className:"input",placeholder:"e.g., 123 Main Street"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Postal code"}),u.jsx("input",{...l("postal_code"),className:"input",placeholder:"e.g., 12345"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"City"}),u.jsx("input",{...l("city"),className:"input",placeholder:"e.g., Amsterdam"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"State/Province"}),u.jsx("input",{...l("state"),className:"input",placeholder:"e.g., North Holland"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Country"}),u.jsx("input",{...l("country"),className:"input",placeholder:"e.g., Netherlands"})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(le,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:f,children:[f?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add address"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(le,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function r_e({company:t}){var e,r,n,i,s;return u.jsx(le,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?u.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:nr(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Ir,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:nr(t)}),((i=t.acf)==null?void 0:i.industry)&&u.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&u.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function n_e(){const[t,e]=T.useState(""),{data:r,isLoading:n,error:i}=ut({queryKey:["companies",t],queryFn:async()=>(await We.getCompanies({search:t,per_page:100,_embed:!0})).data}),s=T.useMemo(()=>r?[...r].sort((o,a)=>{var d,h;const l=(((d=o.title)==null?void 0:d.rendered)||o.title||"").toLowerCase(),c=(((h=a.title)==null?void 0:h.rendered)||a.title||"").toLowerCase();return l.localeCompare(c)}):[],[r]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"relative flex-1 max-w-md",children:[u.jsx(Sc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:o=>e(o.target.value),className:"input pl-9"})]}),u.jsxs(le,{to:"/companies/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),n&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!n&&!i&&(s==null?void 0:s.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Ir,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&u.jsxs(le,{to:"/companies/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!n&&!i&&(s==null?void 0:s.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(o=>u.jsx(r_e,{company:o},o.id))})]})}function i_e(){var w,x,S,_,N,E,k;const{id:t}=zs(),e=gn(),r=yt(),n=T.useRef(null),[i,s]=T.useState(!1),{data:o,isLoading:a,error:l}=ut({queryKey:["company",t],queryFn:async()=>(await We.getCompany(t,{_embed:!0})).data}),{data:c}=ut({queryKey:["company-people",t],queryFn:async()=>(await qe.getCompanyPeople(t)).data}),{data:d}=ut({queryKey:["company",o==null?void 0:o.parent],queryFn:async()=>(await We.getCompany(o.parent,{_embed:!0})).data,enabled:!!(o!=null&&o.parent)}),{data:h=[]}=ut({queryKey:["company-children",t],queryFn:async()=>(await We.getCompanies({parent:t,per_page:100,_embed:!0})).data}),f=((w=o==null?void 0:o.acf)==null?void 0:w.investors)||[],{data:p=[]}=ut({queryKey:["company-investors",t,f],queryFn:async()=>{if(!f.length)return[];const[C,O]=await Promise.all([We.getPeople({per_page:100,include:f.join(","),_embed:!0}),We.getCompanies({per_page:100,include:f.join(","),_embed:!0})]),j=(C.data||[]).map(q=>{var R,L,D,W;return{id:q.id,type:"person",name:Wn(((R=q.title)==null?void 0:R.rendered)||""),thumbnail:(W=(D=(L=q._embedded)==null?void 0:L["wp:featuredmedia"])==null?void 0:D[0])==null?void 0:W.source_url}}),P=(O.data||[]).map(q=>{var R,L,D;return{id:q.id,type:"company",name:nr(q),thumbnail:(D=(L=(R=q._embedded)==null?void 0:R["wp:featuredmedia"])==null?void 0:L[0])==null?void 0:D.source_url}}),A=[...j,...P];return f.map(q=>A.find(R=>R.id===q)).filter(Boolean)},enabled:f.length>0}),{data:m=[]}=ut({queryKey:["investments",t],queryFn:async()=>(await qe.getInvestments(t)).data,enabled:!!t}),g=ht({mutationFn:()=>We.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}});$n(nr(o)||"Organization"),T.useEffect(()=>{(o==null?void 0:o.status)==="trash"&&e("/companies",{replace:!0})},[o,e]);const b=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await g.mutateAsync()}catch(C){console.error("Failed to delete company:",C),alert("Failed to delete organization. Please try again.")}},y=async C=>{var j;const O=(j=C.target.files)==null?void 0:j[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await qe.uploadCompanyLogo(t,O),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch(P){console.error("Failed to upload logo:",P),alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(a)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(l||!o)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),u.jsx(le,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(o.status==="trash")return null;const v=o.acf||{};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(le,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(le,{to:`/companies/${t}/edit`,className:"btn-secondary",children:[u.jsx(vte,{className:"w-4 h-4 mr-2"}),"Edit"]}),u.jsxs("button",{onClick:b,className:"btn-danger",children:[u.jsx(li,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),u.jsx("div",{className:"card p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[(_=(S=(x=o._embedded)==null?void 0:x["wp:featuredmedia"])==null?void 0:S[0])!=null&&_.source_url?u.jsx("img",{src:o._embedded["wp:featuredmedia"][0].source_url,alt:nr(o),className:"w-24 h-24 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Ir,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var C;return(C=n.current)==null?void 0:C.click()},children:i?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Nf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:y,className:"hidden",disabled:i})]}),u.jsxs("div",{children:[d&&u.jsxs(le,{to:`/companies/${d.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[u.jsx(fF,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",nr(d)]}),u.jsx("h1",{className:"text-2xl font-bold",children:nr(o)}),v.industry&&u.jsx("p",{className:"text-gray-500",children:v.industry}),v.website&&u.jsxs("a",{href:v.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[u.jsx(ry,{className:"w-4 h-4 mr-1"}),v.website]})]})]})}),h.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(fF,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(C=>{var O,j,P,A;return u.jsxs(le,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(P=(j=(O=C._embedded)==null?void 0:O["wp:featuredmedia"])==null?void 0:j[0])!=null&&P.source_url?u.jsx("img",{src:C._embedded["wp:featuredmedia"][0].source_url,alt:nr(C),className:"w-10 h-10 rounded object-contain bg-white"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:u.jsx(Ir,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:nr(C)}),((A=C.acf)==null?void 0:A.industry)&&u.jsx("p",{className:"text-xs text-gray-500",children:C.acf.industry})]})]},C.id)})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(As,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((N=c==null?void 0:c.current)==null?void 0:N.length)>0?u.jsx("div",{className:"space-y-2",children:c.current.map(C=>{var O;return u.jsxs(le,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(As,{className:"w-5 h-5 mr-2"}),"Former employees"]}),((E=c==null?void 0:c.former)==null?void 0:E.length)>0?u.jsx("div",{className:"space-y-2",children:c.former.map(C=>{var O;return u.jsxs(le,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),p.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(zy,{className:"w-5 h-5 mr-2"}),"Investors"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:p.map(C=>{const O=C.type==="person",j=O?`/people/${C.id}`:`/companies/${C.id}`;return u.jsxs(le,{to:j,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:`w-10 h-10 object-cover ${O?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${O?"rounded-full":"rounded"}`,children:O?u.jsx(el,{className:"w-5 h-5 text-gray-400"}):u.jsx(Ir,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),u.jsx("p",{className:"text-xs text-gray-500",children:O?"Person":"Organization"})]})]},`${C.type}-${C.id}`)})})]}),m.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(zy,{className:"w-5 h-5 mr-2"}),"Invested in"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(C=>u.jsxs(le,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:u.jsx(Ir,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:C.industry})]})]},C.id))})]}),((k=v.contact_info)==null?void 0:k.length)>0&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),u.jsx("div",{className:"space-y-3",children:v.contact_info.map((C,O)=>u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[C.contact_label||C.contact_type,":"]}),u.jsx("span",{className:"ml-2",children:C.contact_value})]},O))})]})]})}function pq(){var fe,we,Fe,xe,Re,Ve,ct,Jt,ft;const{id:t}=zs(),e=gn(),r=yt(),n=!!t,{data:i,isLoading:s}=ut({queryKey:["company",t],queryFn:async()=>(await We.getCompany(t,{_embed:!0})).data,enabled:n}),{data:o=[],isLoading:a}=ut({queryKey:["companies","all"],queryFn:async()=>(await We.getCompanies({per_page:100,_embed:!0})).data}),{data:l=[],isLoading:c}=ut({queryKey:["people","all"],queryFn:async()=>(await We.getPeople({per_page:100,_embed:!0})).data}),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(""),[b,y]=T.useState(""),[v,w]=T.useState(!1),[x,S]=T.useState(""),[_,N]=T.useState([]),E=T.useRef(null),k=T.useRef(null),C=T.useRef(null),O=T.useMemo(()=>{const X=m.toLowerCase().trim();let Se=o.filter(He=>!(n&&He.id===parseInt(t)||n&&He.parent===parseInt(t)));return X&&(Se=Se.filter(He=>{var tt;return(tt=nr(He))==null?void 0:tt.toLowerCase().includes(X)})),[...Se].sort((He,tt)=>(nr(He)||"").localeCompare(nr(tt)||""))},[o,m,t,n]),j=T.useMemo(()=>o.find(X=>X.id===parseInt(b)),[o,b]),P=T.useMemo(()=>{const X=x.toLowerCase().trim(),Se=l.map(ke=>{var Ye,$t,Nt,M;return{id:ke.id,type:"person",name:Wn(((Ye=ke.title)==null?void 0:Ye.rendered)||""),thumbnail:(M=(Nt=($t=ke._embedded)==null?void 0:$t["wp:featuredmedia"])==null?void 0:Nt[0])==null?void 0:M.source_url}}),He=o.filter(ke=>!n||ke.id!==parseInt(t)).map(ke=>{var Ye,$t,Nt;return{id:ke.id,type:"company",name:nr(ke),thumbnail:(Nt=($t=(Ye=ke._embedded)==null?void 0:Ye["wp:featuredmedia"])==null?void 0:$t[0])==null?void 0:Nt.source_url}});let tt=[...Se,...He];X&&(tt=tt.filter(ke=>{var Ye;return(Ye=ke.name)==null?void 0:Ye.toLowerCase().includes(X)}));const Vt=_.map(ke=>`${ke.type}-${ke.id}`);return tt=tt.filter(ke=>!Vt.includes(`${ke.type}-${ke.id}`)),tt.sort((ke,Ye)=>(ke.name||"").localeCompare(Ye.name||""))},[l,o,x,_,t,n]);T.useEffect(()=>{const X=Se=>{k.current&&!k.current.contains(Se.target)&&p(!1)};if(f)return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[f]),T.useEffect(()=>{const X=Se=>{C.current&&!C.current.contains(Se.target)&&w(!1)};if(v)return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[v]);const A=ht({mutationFn:X=>We.createCompany(X),onSuccess:X=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${X.data.id}`)}}),q=ht({mutationFn:X=>We.updateCompany(t,X),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${t}`)}}),R=async X=>{var He;const Se=(He=X.target.files)==null?void 0:He[0];if(Se){if(!Se.type.startsWith("image/")){alert("Please select an image file");return}if(Se.size>5*1024*1024){alert("Image size must be less than 5MB");return}h(!0);try{await qe.uploadCompanyLogo(t,Se),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.refetchQueries({queryKey:["company",t]}),r.refetchQueries({queryKey:["companies"]}),r.refetchQueries({queryKey:["people"]})}catch(tt){console.error("Failed to upload logo:",tt),alert("Failed to upload logo. Please try again.")}finally{h(!1),E.current&&(E.current.value="")}}},{register:L,handleSubmit:D,reset:W,formState:{errors:z,isSubmitting:U}}=Kc();T.useEffect(()=>{var X,Se,He;i&&(W({title:Wn(((X=i.title)==null?void 0:X.rendered)||""),website:((Se=i.acf)==null?void 0:Se.website)||"",industry:((He=i.acf)==null?void 0:He.industry)||""}),i.parent&&y(String(i.parent)))},[i,W]),T.useEffect(()=>{var X,Se;if(((Se=(X=i==null?void 0:i.acf)==null?void 0:X.investors)==null?void 0:Se.length)>0&&l.length>0&&o.length>0){const tt=i.acf.investors.map(Vt=>{var $t,Nt,M,F,V,oe,Z;const ke=l.find(J=>J.id===Vt);if(ke)return{id:ke.id,type:"person",name:Wn((($t=ke.title)==null?void 0:$t.rendered)||""),thumbnail:(F=(M=(Nt=ke._embedded)==null?void 0:Nt["wp:featuredmedia"])==null?void 0:M[0])==null?void 0:F.source_url};const Ye=o.find(J=>J.id===Vt);return Ye?{id:Ye.id,type:"company",name:nr(Ye),thumbnail:(Z=(oe=(V=Ye._embedded)==null?void 0:V["wp:featuredmedia"])==null?void 0:oe[0])==null?void 0:Z.source_url}:null}).filter(Boolean);N(tt)}},[i,l,o]),$n(n&&i?`Edit ${nr(i)||"organization"}`:"New organization");const K=async X=>{const Se=_.map(tt=>tt.id),He={title:X.title,status:"publish",parent:b?parseInt(b):0,acf:{website:X.website,industry:X.industry,investors:Se}};n?q.mutate(He):A.mutate(He)};return n&&s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(le,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit organization":"Add new organization"}),u.jsxs("form",{onSubmit:D(K),className:"space-y-6",children:[n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Logo"}),u.jsxs("div",{className:"flex items-center gap-4",children:[(Fe=(we=(fe=i==null?void 0:i._embedded)==null?void 0:fe["wp:featuredmedia"])==null?void 0:we[0])!=null&&Fe.source_url?u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:i._embedded["wp:featuredmedia"][0].source_url,alt:nr(i)||"Organization logo",className:"w-20 h-20 rounded-lg object-contain bg-white"}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var X;return(X=E.current)==null?void 0:X.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Nf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}):u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsx(Nf,{className:"w-8 h-8 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var X;return(X=E.current)==null?void 0:X.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Nf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),u.jsxs("div",{children:[u.jsx("button",{type:"button",onClick:()=>{var X;return(X=E.current)==null?void 0:X.click()},className:"btn-secondary text-sm",disabled:d,children:(Ve=(Re=(xe=i==null?void 0:i._embedded)==null?void 0:xe["wp:featuredmedia"])==null?void 0:Re[0])!=null&&Ve.source_url?"Change logo":"Upload logo"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click the logo or button to upload a new logo"})]}),u.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:R,className:"hidden",disabled:d})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization name *"}),u.jsx("input",{...L("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc."}),z.title&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:z.title.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Website"}),u.jsx("input",{...L("website"),type:"url",className:"input",placeholder:"https://example.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Industry"}),u.jsx("input",{...L("industry"),className:"input",placeholder:"Technology"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Parent organization"}),u.jsxs("div",{className:"relative",ref:k,children:[u.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a,children:[j?u.jsxs("div",{className:"flex items-center gap-2",children:[(ft=(Jt=(ct=j._embedded)==null?void 0:ct["wp:featuredmedia"])==null?void 0:Jt[0])!=null&&ft.source_url?u.jsx("img",{src:j._embedded["wp:featuredmedia"][0].source_url,alt:nr(j),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:nr(j)})]}):u.jsx("span",{className:"text-gray-400",children:"No parent organization"}),u.jsx(By,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Sc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:m,onChange:X=>g(X.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsxs("div",{className:"overflow-y-auto max-h-48",children:[u.jsx("button",{type:"button",onClick:()=>{y(""),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${b?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),a?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):O.length>0?O.map(X=>{var Se,He,tt;return u.jsxs("button",{type:"button",onClick:()=>{y(String(X.id)),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${b===String(X.id)?"bg-primary-50":""}`,children:[(tt=(He=(Se=X._embedded)==null?void 0:Se["wp:featuredmedia"])==null?void 0:He[0])!=null&&tt.source_url?u.jsx("img",{src:X._embedded["wp:featuredmedia"][0].source_url,alt:nr(X),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:nr(X)})]},X.id)}):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"label flex items-center",children:[u.jsx(zy,{className:"w-4 h-4 mr-2"}),"Investors"]}),_.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map(X=>u.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[X.thumbnail?u.jsx("img",{src:X.thumbnail,alt:X.name,className:`w-5 h-5 object-cover ${X.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${X.type==="person"?"rounded-full":"rounded"}`,children:X.type==="person"?u.jsx(el,{className:"w-3 h-3 text-gray-500"}):u.jsx(Ir,{className:"w-3 h-3 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-700",children:X.name}),u.jsx("button",{type:"button",onClick:()=>N(Se=>Se.filter(He=>!(He.id===X.id&&He.type===X.type))),className:"ml-1 text-gray-400 hover:text-gray-600",children:u.jsx(pn,{className:"w-3.5 h-3.5"})})]},`${X.type}-${X.id}`))}),u.jsxs("div",{className:"relative",ref:C,children:[u.jsxs("button",{type:"button",onClick:()=>w(!v),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a||c,children:[u.jsx("span",{className:"text-gray-400",children:"Add investor..."}),u.jsx(By,{className:`w-4 h-4 text-gray-400 transition-transform ${v?"rotate-180":""}`})]}),v&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Sc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:x,onChange:X=>S(X.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:a||c?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):P.length>0?P.map(X=>u.jsxs("button",{type:"button",onClick:()=>{N(Se=>[...Se,X]),S("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[X.thumbnail?u.jsx("img",{src:X.thumbnail,alt:X.name,className:`w-6 h-6 object-cover ${X.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${X.type==="person"?"rounded-full":"rounded"}`,children:X.type==="person"?u.jsx(el,{className:"w-4 h-4 text-gray-500"}):u.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-sm text-gray-900 truncate block",children:X.name}),u.jsx("span",{className:"text-xs text-gray-500",children:X.type==="person"?"Person":"Organization"})]})]},`${X.type}-${X.id}`)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:x?"No results found":"No people or organizations available"})})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(le,{to:"/companies",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:U,children:[u.jsx(Mo,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create organization"]})]})]})]})]})}function s_e({person:t,dateType:e}){var r;return u.jsx("div",{className:"flex items-center gap-3 py-2",children:u.jsxs(le,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),u.jsx("span",{className:"font-medium truncate",children:t.name}),u.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function o_e({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(c=>{i.push({person:c,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),u.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:u.jsx("span",{className:"text-2xl font-bold leading-none",children:En(new Date(e.next_occurrence),"d")})}),u.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>u.jsx(s_e,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function a_e(){const{data:t,isLoading:e,error:r}=Qfe(365),n=(t==null?void 0:t.reduce((s,o)=>{const a=En(new Date(o.next_occurrence),"yyyy-MM-dd");return s[a]||(s[a]=[]),s[a].push(o),s},{}))||{},i=Object.entries(n).reduce((s,[o,a])=>{const l=En(new Date(o),"MMMM yyyy");return s[l]||(s[l]=[]),s[l].push(a),s},{});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("p",{className:"text-gray-600",children:[(t==null?void 0:t.length)||0," upcoming dates"]}),u.jsxs(le,{to:"/dates/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),e&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),r&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!e&&!r&&(t==null?void 0:t.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx(yo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),u.jsxs(le,{to:"/dates/new",className:"btn-primary",children:[u.jsx(sr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(i).map(([s,o])=>u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:s}),u.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:o.map(a=>u.jsx(o_e,{dates:a},a[0].next_occurrence))})]},s))]})}function l_e({value:t=[],onChange:e,people:r=[],isLoading:n}){const[i,s]=T.useState(""),o=T.useMemo(()=>{if(!i)return r.slice(0,10);const d=i.toLowerCase();return r.filter(h=>tc(h).toLowerCase().includes(d)).slice(0,10)},[r,i]),a=T.useMemo(()=>t.map(d=>r.find(h=>h.id===d)).filter(Boolean),[t,r]),l=d=>{t.includes(d)||e([...t,d]),s("")},c=d=>{e(t.filter(h=>h!==d))};return u.jsxs("div",{className:"space-y-2",children:[a.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(d=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[tc(d),u.jsx("button",{type:"button",onClick:()=>c(d.id),className:"hover:text-primary-600",children:u.jsx(pn,{className:"w-3 h-3"})})]},d.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:i,onChange:d=>s(d.target.value),placeholder:"Search for people...",className:"input",disabled:n}),i&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:o.length>0?o.map(d=>u.jsx("button",{type:"button",onClick:()=>l(d.id),disabled:t.includes(d.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(d.id)?"opacity-50 cursor-not-allowed":""}`,children:tc(d)},d.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function mq(){var W;const{id:t}=zs(),[e]=b0(),r=gn(),n=yt(),i=!!t,s=e.get("person"),o=e.get("type"),{data:a,isLoading:l}=ut({queryKey:["important-date",t],queryFn:async()=>(await We.getDate(t)).data,enabled:i}),c=T.useMemo(()=>{var U;if(!((U=a==null?void 0:a.acf)!=null&&U.related_people))return[];const z=a.acf.related_people;return Array.isArray(z)?z.map(K=>parseInt(typeof K=="object"&&K!==null?K.ID||K.id||K.post_id:K,10)).filter(K=>!isNaN(K)&&K>0):[]},[a]),{data:d=[],isLoading:h}=zc({orderby:"title",order:"asc"}),{data:f=[]}=ut({queryKey:["people","specific",c],queryFn:async()=>{const z=c.map(K=>We.getPerson(K,{_embed:!0}).then(fe=>fe.data).catch(()=>null));return(await Promise.all(z)).filter(Boolean)},enabled:c.length>0}),p=T.useMemo(()=>{const z=new Map;return d.forEach(U=>z.set(U.id,U)),f.forEach(U=>{var fe,we,Fe,xe,Re,Ve,ct,Jt,ft,X,Se,He,tt,Vt,ke,Ye;const K={...U,id:U.id,name:tc(U),first_name:((fe=U.acf)==null?void 0:fe.first_name)||"",last_name:((we=U.acf)==null?void 0:we.last_name)||"",is_favorite:((Fe=U.acf)==null?void 0:Fe.is_favorite)||!1,thumbnail:((Ve=(Re=(xe=U._embedded)==null?void 0:xe["wp:featuredmedia"])==null?void 0:Re[0])==null?void 0:Ve.source_url)||((He=(Se=(X=(ft=(Jt=(ct=U._embedded)==null?void 0:ct["wp:featuredmedia"])==null?void 0:Jt[0])==null?void 0:ft.media_details)==null?void 0:X.sizes)==null?void 0:Se.thumbnail)==null?void 0:He.source_url)||null,labels:((Ye=(ke=(Vt=(tt=U._embedded)==null?void 0:tt["wp:term"])==null?void 0:Vt.flat())==null?void 0:ke.filter($t=>($t==null?void 0:$t.taxonomy)==="person_label"))==null?void 0:Ye.map($t=>$t.name))||[]};z.set(K.id,K)}),Array.from(z.values())},[d,f]),{data:m=[]}=ut({queryKey:["date-types"],queryFn:async()=>((await We.getDateTypes()).data||[]).sort((K,fe)=>{const we=K.name||"",Fe=fe.name||"";return we.localeCompare(Fe)})}),g=ht({mutationFn:z=>We.createDate(z),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),r(s?`/people/${s}`:"/dates")}}),b=ht({mutationFn:z=>We.updateDate(t,z),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),n.invalidateQueries({queryKey:["important-date",t]}),n.invalidateQueries({queryKey:["people"]});const z=x("related_people");(z==null?void 0:z.length)>0?r(`/people/${z[0]}`):r("/dates")}}),{register:y,handleSubmit:v,reset:w,watch:x,setValue:S,control:_,formState:{errors:N,isSubmitting:E}}=Kc({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0}}),k=x("related_people"),C=x("date_type"),O=x("title");T.useEffect(()=>{var K;if((!O||["'s Birthday","Wedding of "].some(fe=>O.endsWith(fe)||O.startsWith(fe)))&&(k==null?void 0:k.length)>0&&C){const fe=m.find(Re=>Re.id===parseInt(C)),we=(fe==null?void 0:fe.name)||"",Fe=((K=fe==null?void 0:fe.slug)==null?void 0:K.toLowerCase())||we.toLowerCase(),xe=k.map(Re=>{var ct,Jt,ft;const Ve=p.find(X=>X.id===Re);return Ve?Wn(((ct=Ve.acf)==null?void 0:ct.first_name)||((ft=(Jt=Ve.title)==null?void 0:Jt.rendered)==null?void 0:ft.split(" ")[0])||""):null}).filter(Boolean);if(xe.length>0&&we){let Re;Fe==="wedding"?xe.length>=2?Re=`Wedding of ${xe[0]} & ${xe[1]}`:Re=`Wedding of ${xe[0]}`:Re=`${xe[0]}'s ${we}`,S("title",Re)}}},[k,C,p,m,S,O]);const[j,P]=T.useState(!1);T.useEffect(()=>{var U,K,fe,we,Fe;if(j&&!i)return;const z=c.length===0||f.length>0;if(a&&p.length>0&&z){let xe=[];const Re=(U=a.acf)==null?void 0:U.related_people;Re&&(Array.isArray(Re)?xe=Re.map(ct=>parseInt(typeof ct=="object"&&ct!==null?ct.ID||ct.id||ct.post_id:ct,10)).filter(ct=>!isNaN(ct)&&ct>0):typeof Re=="number"&&(xe=[Re]));let Ve="";((K=a.date_type)==null?void 0:K.length)>0&&(Ve=a.date_type[0].toString()),w({title:Wn(((fe=a.title)==null?void 0:fe.rendered)||""),date_value:((we=a.acf)==null?void 0:we.date_value)||"",date_type:Ve,related_people:xe,is_recurring:((Fe=a.acf)==null?void 0:Fe.is_recurring)??!0}),P(!0)}else if(!i&&p.length>0&&m.length>0){const xe={title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0};if(s&&(xe.related_people=[parseInt(s)]),o){const Re=m.find(Ve=>Ve.slug===o||Ve.name.toLowerCase()===o.toLowerCase());Re&&(xe.date_type=Re.id.toString())}w(xe),P(!0)}},[a,w,i,s,o,m,p,c,f,j]),$n(i&&a?`Edit ${((W=a.title)==null?void 0:W.rendered)||a.title||"date"}`:"New date");const A=async z=>{const U={title:z.title,status:"publish",date_type:z.date_type?[parseInt(z.date_type)]:[],acf:{date_value:z.date_value,related_people:z.related_people,is_recurring:z.is_recurring}};i?b.mutate(U):g.mutate(U)};if(i&&l)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const q=x("related_people"),R=i&&(q==null?void 0:q.length)>0?q[0]:s,L=R?`/people/${R}`:"/dates",D=R?"Back to person":"Back to dates";return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(le,{to:L,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:D})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit date":"Add new date"}),u.jsxs("form",{onSubmit:v(A),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related people"}),u.jsx(Fv,{name:"related_people",control:_,render:({field:z})=>u.jsx(l_e,{value:z.value,onChange:z.onChange,people:p,isLoading:h})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date type *"}),u.jsx(Fv,{name:"date_type",control:_,rules:{required:"Please select a date type"},render:({field:z})=>{const U=z.value?String(z.value):"";return u.jsxs("select",{value:U,onChange:K=>{const fe=K.target.value;z.onChange(fe)},onBlur:z.onBlur,name:z.name,ref:z.ref,className:"input",children:[u.jsx("option",{value:"",children:"Select a type..."}),m.map(K=>u.jsx("option",{value:String(K.id),children:K.name},K.id))]})}}),N.date_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.date_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...y("title"),className:"input",placeholder:"e.g., Mom's Birthday, Wedding Anniversary"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date *"}),u.jsx("input",{...y("date_value",{required:"Date is required"}),type:"date",className:"input"}),N.date_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.date_value.message})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_recurring",...y("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(le,{to:L,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:E,children:[u.jsx(Mo,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Create date"]})]})]})]})]})}function c_e(){$n("Todos");const[t,e]=T.useState(!1),[r,n]=T.useState(null),[i,s]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(null),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(null),{data:b,isLoading:y}=Ste(!0),v=_te(),w=Xfe(),x=eM(),S=T.useMemo(()=>Dte(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:N,olderCompletedTodos:E}=T.useMemo(()=>{if(!b)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const R=[],L=[],D=[];return b.forEach(W=>{if(!W.is_completed)R.push(W);else try{const z=hp(W.created);Ime(z,S)?L.push(W):D.push(W)}catch{D.push(W)}}),{incompleteTodos:R,recentlyCompletedTodos:L,olderCompletedTodos:D}},[b,S]),k=R=>{if(!R.is_completed){c(R),h(!0);return}v.mutate({todoId:R.id,data:{content:R.content,due_date:R.due_date,is_completed:!1}})},C=()=>{l&&(v.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),c(null))},O=()=>{if(!l)return;const R=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:R,activity_type:"note",participants:[]}),h(!1),p(!0)},j=async R=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:R}),await v.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),c(null),g(null)}catch(L){console.error("Failed to create activity:",L),alert("Failed to create activity. Please try again.")}},P=async R=>{r&&(await v.mutateAsync({todoId:r.id,data:R}),s(!1),n(null))},A=async R=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync(R)};if(y)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const q=[...N,...E];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),u.jsxs("div",{className:"flex items-center gap-2",children:[E.length>0&&u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[u.jsx(zP,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[u.jsx(sr,{className:"w-4 h-4"}),"Add todo"]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Pd,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(R=>u.jsx(z1,{todo:R,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},R.id))}):u.jsxs("div",{className:"p-8 text-center",children:[u.jsx(Ds,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No open todos"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),N.length>0&&!t&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Nfe,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",N.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:N.map(R=>u.jsx(z1,{todo:R,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},R.id))})]}),t&&q.length>0&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Ds,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",q.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:q.map(R=>u.jsx(z1,{todo:R,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},R.id))})]}),u.jsx(Eie,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:P,isLoading:v.isPending,todo:r}),u.jsx(Cte,{isOpen:o,onClose:()=>a(!1)}),u.jsx(tM,{isOpen:d,onClose:()=>{h(!1),c(null)},todo:l,onComplete:C,onCompleteAsActivity:O}),u.jsx(zM,{isOpen:f,onClose:()=>{p(!1),c(null),g(null)},onSubmit:j,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function z1({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=tm(t);return u.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(Ds,{className:"w-5 h-5 text-primary-600"}):u.jsx(Pd,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[u.jsxs(le,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&u.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",En(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(li,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}const u_e=[{id:"sync",label:"Sync",icon:Lfe},{id:"notifications",label:"Notifications",icon:_fe},{id:"data",label:"Data",icon:dte},{id:"admin",label:"Admin",icon:Bfe,adminOnly:!0},{id:"about",label:"About",icon:jfe}];function d_e(){const[t,e]=b0(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=ge=>{e({tab:ge})},a=u_e.filter(ge=>!ge.adminOnly||n),[l,c]=T.useState(""),[d,h]=T.useState(""),[f,p]=T.useState(!0),[m,g]=T.useState(!1),[b,y]=T.useState(!1),[v,w]=T.useState([]),[x,S]=T.useState(!0),[_,N]=T.useState(""),[E,k]=T.useState(!1),[C,O]=T.useState(null),[j,P]=T.useState(!1),[A,q]=T.useState(null),[R,L]=T.useState([]),[D,W]=T.useState(""),[z,U]=T.useState(!1),[K,fe]=T.useState(""),[we,Fe]=T.useState("09:00"),[xe,Re]=T.useState(!0),[Ve,ct]=T.useState(!1),[Jt,ft]=T.useState(!1),[X,Se]=T.useState(""),[He,tt]=T.useState(!1),[Vt,ke]=T.useState([]),[Ye,$t]=T.useState([]),[Nt,M]=T.useState([]),[F,V]=T.useState(!1),[oe,Z]=T.useState(!1),[J,ye]=T.useState(!1),[Qe,Ze]=T.useState(""),[Zt,_e]=T.useState(!1),[ie,he]=T.useState("");T.useEffect(()=>{(async()=>{try{const Oe=await ce.get("/prm/v1/user/ical-url");c(Oe.data.url),h(Oe.data.webcal_url)}catch(Oe){console.error("Failed to fetch iCal URL:",Oe)}finally{p(!1)}})()},[]),T.useEffect(()=>{i&&(async()=>{try{const[Oe,Ee]=await Promise.all([qe.getAppPasswords(i),qe.getCardDAVUrls()]);w(Oe.data||[]),q(Ee.data)}catch(Oe){console.error("Failed to fetch app passwords:",Oe)}finally{S(!1)}})()},[i]);const de=async()=>{V(!0);try{const[ge,Oe]=await Promise.all([qe.getSlackChannels(),qe.getSlackTargets()]);ke(ge.data.channels||[]),$t(ge.data.users||[]),M(Oe.data.targets||[])}catch(ge){console.error("Failed to fetch Slack data:",ge),Se("Failed to load Slack channels and users. Please try refreshing the page.")}finally{V(!1)}};T.useEffect(()=>{(async()=>{try{const Oe=await qe.getNotificationChannels();L(Oe.data.channels||["email"]),W(Oe.data.slack_webhook||""),Fe(Oe.data.notification_time||"09:00");const Ee=await qe.getSlackStatus(),Dt=Ee.data.connected||!1;U(Dt),fe(Ee.data.workspace_name||""),Dt&&await de()}catch(Oe){console.error("Failed to fetch notification channels:",Oe)}finally{Re(!1)}})()},[]),T.useEffect(()=>{z&&de()},[z]),T.useEffect(()=>{const ge=new URLSearchParams(window.location.search),Oe=ge.get("slack_connected"),Ee=ge.get("slack_error");Oe==="1"?(Se("Slack connected successfully!"),o("notifications"),qe.getSlackStatus().then(Dt=>{U(Dt.data.connected||!1),fe(Dt.data.workspace_name||"")}),e({tab:"notifications"})):Ee&&(Se(`Slack connection failed: ${Ee}`),o("notifications"),e({tab:"notifications"}))},[]);const Ce=async()=>{var ge,Oe;try{const Ee=await ce.get("/prm/v1/slack/oauth/authorize");window.location.href=Ee.data.oauth_url}catch(Ee){console.error("Failed to get Slack OAuth URL:",Ee),alert(((Oe=(ge=Ee.response)==null?void 0:ge.data)==null?void 0:Oe.message)||"Failed to connect Slack")}},st=async()=>{var ge,Oe;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){tt(!0);try{await qe.disconnectSlack(),U(!1),fe(""),ke([]),$t([]),M([]),Se("Slack disconnected successfully"),R.includes("slack")&&await xl("slack")}catch(Ee){console.error("Failed to disconnect Slack:",Ee),alert(((Oe=(ge=Ee.response)==null?void 0:ge.data)==null?void 0:Oe.message)||"Failed to disconnect Slack")}finally{tt(!1)}}},Si=ge=>{const Oe=Nt.includes(ge)?Nt.filter(Ee=>Ee!==ge):[...Nt,ge];M(Oe)},Gi=async()=>{var ge,Oe;Z(!0);try{await qe.updateSlackTargets(Nt),Se("Notification targets saved successfully"),setTimeout(()=>Se(""),3e3)}catch(Ee){console.error("Failed to save Slack targets:",Ee),alert(((Oe=(ge=Ee.response)==null?void 0:ge.data)==null?void 0:Oe.message)||"Failed to save notification targets")}finally{Z(!1)}},fu=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch(ge){console.error("Failed to copy:",ge)}},Nb=async ge=>{var Oe,Ee;if(ge.preventDefault(),!!_.trim()){k(!0);try{const Dt=await qe.createAppPassword(i,_.trim());O(Dt.data.password),w([...v,Dt.data]),N("")}catch(Dt){console.error("Failed to create app password:",Dt),alert(((Ee=(Oe=Dt.response)==null?void 0:Oe.data)==null?void 0:Ee.message)||"Failed to create app password")}finally{k(!1)}}},Cb=async(ge,Oe)=>{var Ee,Dt;if(confirm(`Are you sure you want to revoke the app password "${Oe}"? Any devices using this password will no longer be able to sync.`))try{await qe.deleteAppPassword(i,ge),w(v.filter(si=>si.uuid!==ge))}catch(si){console.error("Failed to delete app password:",si),alert(((Dt=(Ee=si.response)==null?void 0:Ee.data)==null?void 0:Dt.message)||"Failed to revoke app password")}},kb=async()=>{try{await navigator.clipboard.writeText(C),P(!0),setTimeout(()=>P(!1),2e3)}catch(ge){console.error("Failed to copy:",ge)}},Vm=async ge=>{try{await navigator.clipboard.writeText(ge)}catch(Oe){console.error("Failed to copy:",Oe)}},Tb=ge=>{if(!ge)return"Never";const Oe=new Date(ge);return Oe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:Oe.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Ws=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){y(!0);try{const ge=await ce.post("/prm/v1/user/regenerate-ical-token");c(ge.data.url),h(ge.data.webcal_url)}catch(ge){console.error("Failed to regenerate token:",ge)}finally{y(!1)}}},xl=async ge=>{var Ee,Dt;const Oe=R.includes(ge)?R.filter(si=>si!==ge):[...R,ge];ct(!0);try{await qe.updateNotificationChannels(Oe),L(Oe)}catch(si){console.error("Failed to update notification channels:",si),alert(((Dt=(Ee=si.response)==null?void 0:Ee.data)==null?void 0:Dt.message)||"Failed to update notification channels")}finally{ct(!1)}},Ih=async ge=>{var Hm,Wm;const[Oe,Ee]=ge.split(":").map(Number),Dt=Math.round(Ee/5)*5,si=Dt===60?(Oe+1)%24:Oe,Um=Dt===60?0:Dt,Mh=`${String(si).padStart(2,"0")}:${String(Um).padStart(2,"0")}`;Fe(Mh),ft(!0);try{await qe.updateNotificationTime(Mh)}catch($h){console.error("Failed to update notification time:",$h),alert(((Wm=(Hm=$h.response)==null?void 0:Hm.data)==null?void 0:Wm.message)||"Failed to update notification time");const Km=await qe.getNotificationChannels();Fe(Km.data.notification_time||"09:00")}finally{ft(!1)}},Ob=async()=>{var ge,Oe;if(confirm("This will send reminder emails for all reminders due today. Continue?")){ye(!0),Ze("");try{const Ee=await qe.triggerReminders();Ze(Ee.data.message||"Reminders triggered successfully.")}catch(Ee){console.error("Failed to trigger reminders:",Ee),Ze(((Oe=(ge=Ee.response)==null?void 0:ge.data)==null?void 0:Oe.message)||"Failed to trigger reminders. Please check server logs.")}finally{ye(!1)}}},pu=async()=>{var ge,Oe;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){_e(!0),he("");try{const Ee=await qe.rescheduleCronJobs();he(Ee.data.message||"Cron jobs rescheduled successfully.")}catch(Ee){console.error("Failed to reschedule cron jobs:",Ee),he(((Oe=(ge=Ee.response)==null?void 0:ge.data)==null?void 0:Oe.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{_e(!1)}}},Rh=()=>{switch(s){case"sync":return u.jsx(h_e,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:fu,regenerateIcalToken:Ws,regenerating:b,appPasswords:v,appPasswordsLoading:x,carddavUrls:A,config:r,newPasswordName:_,setNewPasswordName:N,handleCreateAppPassword:Nb,creatingPassword:E,newPassword:C,setNewPassword:O,copyNewPassword:kb,passwordCopied:j,handleDeleteAppPassword:Cb,formatDate:Tb,copyCarddavUrl:Vm});case"notifications":return u.jsx(f_e,{notificationsLoading:xe,notificationChannels:R,toggleChannel:xl,savingChannels:Ve,slackConnected:z,slackWorkspaceName:K,handleConnectSlack:Ce,handleDisconnectSlack:st,disconnectingSlack:He,webhookTestMessage:X,slackChannels:Vt,slackUsers:Ye,slackTargets:Nt,loadingSlackData:F,handleToggleSlackTarget:Si,handleSaveSlackTargets:Gi,savingSlackTargets:oe,slackWebhook:D,notificationTime:we,handleNotificationTimeChange:Ih,savingTime:Jt});case"data":return u.jsx(p_e,{});case"admin":return n?u.jsx(m_e,{handleTriggerReminders:Ob,triggeringReminders:J,reminderMessage:Qe,handleRescheduleCron:pu,reschedulingCron:Zt,cronMessage:ie}):null;case"about":return u.jsx(g_e,{config:r});default:return null}};return u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(ge=>{const Oe=ge.icon,Ee=s===ge.id;return u.jsxs("button",{onClick:()=>o(ge.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${Ee?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[u.jsx(Oe,{className:"w-4 h-4"}),ge.label]},ge.id)})})}),u.jsx("div",{className:"space-y-6",children:Rh()})]})}function h_e({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:c,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:b,copyNewPassword:y,passwordCopied:v,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar Subscription"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Your Calendar Feed URL"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:_=>_.target.select()}),u.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("a",{href:e,className:"btn-primary",children:u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in Calendar App"]})}),u.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),u.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV Sync"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[c&&u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[u.jsx("h3",{className:"font-medium text-sm",children:"Connection Details"}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:c.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(c.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),u.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),u.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create Password"})]}),g&&u.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:y,className:"btn-primary whitespace-nowrap",children:v?"Copied!":"Copy"})]}),u.jsx("button",{onClick:()=>b(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your App Passwords"}),u.jsx("div",{className:"space-y-2",children:a.map(_=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:_.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(_.created),"  Last used ",x(_.last_used)]})]}),u.jsx("button",{onClick:()=>w(_.uuid,_.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},_.uuid))})]}),a.length===0&&!g&&u.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function f_e({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:c,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:b,slackWebhook:y,notificationTime:v,handleNotificationTimeChange:w,savingTime:x}){return u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Email"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Slack"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsx("div",{children:i?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&u.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),u.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")||c.includes("disconnected")?"text-green-600":"text-red-600"}`,children:c}),e.includes("slack")&&u.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?u.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):u.jsxs(u.Fragment,{children:[d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsx("span",{className:"text-sm",children:S.name})]},S.id))})]}),h.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsxs("span",{className:"text-sm",children:[S.name,S.is_me&&u.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},S.id))})]}),d.length===0&&h.length===0&&!p&&u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),u.jsx("button",{onClick:g,disabled:b,className:"btn-primary text-sm mt-4",children:b?"Saving...":"Save targets"})]})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")?"text-green-600":"text-red-600"}`,children:c}),u.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),y&&!i&&u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Notification Time (UTC)"}),u.jsx("input",{type:"time",value:v,onChange:S=>w(S.target.value),className:"input",disabled:x,step:"300"}),v&&u.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[u.jsxs("p",{className:"text-gray-700",children:[u.jsx("span",{className:"font-medium",children:"UTC:"})," ",v]}),u.jsxs("p",{className:"text-gray-700 mt-1",children:[u.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[S,_]=v.split(":"),N=new Date;return N.setUTCHours(parseInt(S),parseInt(_),0,0),N.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return v}})()]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]})}function p_e(){return u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Data Management"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Import contacts from other sources or export your data for backup."}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs(le,{to:"/settings/import",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"Import Data"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Import contacts from Monica CRM, vCard, or Google Contacts"})]}),u.jsxs(le,{to:"/settings/export",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"Export Data"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Export all contacts as vCard or Google Contacts CSV"})]})]})]})}function m_e({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Management"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(le,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"User Approval"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(le,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"Relationship Types"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System Actions"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Trigger Reminders"}),u.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),u.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Reschedule Cron Jobs"}),u.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function g_e({config:t}){return u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",Ec]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsxs("p",{className:"text-sm text-gray-600",children:[Ec," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function gq({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=T.useState(""),[o,a]=T.useState(!1),l=T.useRef(null),c=T.useRef(null),d=T.useMemo(()=>r.sort((b,y)=>{const v=(b.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return v<w?-1:v>w?1:0}),[r]),h=T.useMemo(()=>{if(!i)return d.slice(0,10);const b=i.toLowerCase();return d.filter(y=>(y.name||"").toLowerCase().includes(b)).slice(0,10)},[d,i]),f=T.useMemo(()=>d.find(b=>b.id===parseInt(t,10)),[d,t]);T.useEffect(()=>{const b=y=>{c.current&&!c.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const p=b=>{e(b?b.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:f&&!o?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[u.jsx("span",{children:g}),u.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(pn,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:l,type:"text",value:i,onChange:b=>{s(b.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&u.jsx("div",{ref:c,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(b=>u.jsx("button",{type:"button",onClick:()=>p(b.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===b.id.toString()?"bg-primary-50":""}`,children:b.name},b.id))]}):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function y_e(){$n("Relationship Types - Settings");const t=yt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(gte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),u.jsx(le,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ut({queryKey:["relationship-types"],queryFn:async()=>(await We.getRelationshipTypes()).data}),[s,o]=T.useState(null),[a,l]=T.useState(""),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,b]=T.useState(!1),y=ht({mutationFn:async({id:O,name:j,inverseId:P})=>{const A={name:j};return P&&(A.acf={inverse_relationship_type:parseInt(P,10)}),We.updateRelationshipType(O,A)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),v=ht({mutationFn:async({name:O,inverseId:j})=>{const P={name:O};return j&&(P.acf={inverse_relationship_type:parseInt(j,10)}),We.createRelationshipType(P)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),b(!1)}}),w=ht({mutationFn:O=>We.deleteRelationshipType(O),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=ht({mutationFn:()=>We.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return u.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):u.jsx(pte,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=O=>{var P;o(O.id),l(O.name);const j=(P=O.acf)==null?void 0:P.inverse_relationship_type;d(j?j.toString():"")},N=()=>{o(null),l(""),d("")},E=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:c||null})},k=()=>{if(!h.trim()){alert("Name is required");return}v.mutate({name:h.trim(),inverseId:p||null})},C=(O,j)=>{window.confirm(`Are you sure you want to delete "${j}"? This cannot be undone.`)&&w.mutate(O)};return i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),u.jsx("div",{className:"flex gap-2",children:!g&&u.jsxs(u.Fragment,{children:[u.jsx(S,{}),u.jsxs("button",{onClick:()=>b(!0),className:"btn-primary flex items-center gap-2",children:[u.jsx(sr,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&u.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:h,onChange:O=>f(O.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(gq,{value:p,onChange:m,relationshipTypes:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:k,disabled:v.isPending,className:"btn-primary flex items-center gap-2",children:[v.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(Mo,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsx("button",{onClick:()=>{b(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),u.jsx("div",{className:"space-y-2",children:n.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(O=>{var R,L;const j=s===O.id,P=(R=O.acf)==null?void 0:R.inverse_relationship_type,A=typeof P=="object"&&(P!=null&&P.ID)?P.ID:typeof P=="object"&&(P!=null&&P.id)?P.id:P,q=A?n.find(D=>D.id===A):null;return u.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:j?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:a,onChange:D=>l(D.target.value),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(gq,{value:c,onChange:d,relationshipTypes:n,currentTypeId:O.id}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:E,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(Mo,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsxs("button",{onClick:N,className:"btn-secondary flex items-center gap-2",children:[u.jsx(pn,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium",children:O.name}),q&&u.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",u.jsx("span",{className:"font-medium",children:q.name})]}),!q&&((L=O.acf)==null?void 0:L.inverse_relationship_type)===null&&u.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(O),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:u.jsx(Afe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>C(O.id,O.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(li,{className:"w-4 h-4"})})]})]})},O.id)})})]})})}function v_e(){var y,v,w;const[t,e]=T.useState(null),[r,n]=T.useState(""),[i,s]=T.useState(!1),[o,a]=T.useState(null),l=yt(),c=ht({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await ce.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),d=ht({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await ce.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),c.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},b=()=>{e(null),n(""),a(null),c.reset(),d.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),u.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((y=d.data.stats.errors)==null?void 0:y.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>u.jsx("li",{children:x},S))})]})]}),u.jsx("button",{onClick:b,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(wc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Zp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(_c,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&u.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[u.jsxs("p",{children:["Export format: ",o.version]}),u.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),u.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),u.jsxs("p",{children:["Notes: ",o.summary.notes]}),u.jsxs("p",{children:["Dates: ",o.summary.reminders]}),u.jsxs("p",{children:["Photos: ",o.summary.photos]}),u.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(XR,{className:"h-4 w-4 text-gray-400"})}),u.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&u.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),u.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(wc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(_c,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:b,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(v=d.error.response)==null?void 0:v.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function b_e(){var g,b,y;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),o=yt(),a=ht({mutationFn:async v=>{const w=new FormData;return w.append("file",v),(await ce.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:v=>{s(v)},onError:v=>{var w,x;s({valid:!1,error:((x=(w=v.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=ht({mutationFn:async v=>{const w=new FormData;return w.append("file",v),(await ce.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),c=T.useCallback(v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?n(!0):v.type==="dragleave"&&n(!1)},[]),d=T.useCallback(v=>{v.preventDefault(),v.stopPropagation(),n(!1),v.dataTransfer.files&&v.dataTransfer.files[0]&&f(v.dataTransfer.files[0])},[]),h=v=>{v.target.files&&v.target.files[0]&&f(v.target.files[0])},f=v=>{const w=v.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(v),s(null),l.reset(),a.mutate(v)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((v,w)=>u.jsx("li",{children:v},w))})]})]}),u.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:d,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(wc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Zp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(_c,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(As,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Ir,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(cte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(hte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(bte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?u.jsxs(u.Fragment,{children:[u.jsx(wc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(_c,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(b=l.error.response)==null?void 0:b.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function x_e(){var x,S,_;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),[o,a]=T.useState({}),l=yt(),c=ht({mutationFn:async N=>{const E=new FormData;return E.append("file",N),(await ce.post("/prm/v1/import/google-contacts/validate",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:N=>{var E;if(s(N),((E=N.duplicates)==null?void 0:E.length)>0){const k={};N.duplicates.forEach(C=>{k[C.index]="merge"}),a(k)}},onError:N=>{var E,k;s({valid:!1,error:((k=(E=N.response)==null?void 0:E.data)==null?void 0:k.message)||"Failed to validate file"})}}),d=ht({mutationFn:async({file:N,decisions:E})=>{const k=new FormData;return k.append("file",N),k.append("decisions",JSON.stringify(E)),(await ce.post("/prm/v1/import/google-contacts",k,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?n(!0):N.type==="dragleave"&&n(!1)},[]),f=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),n(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&m(N.dataTransfer.files[0])},[]),p=N=>{N.target.files&&N.target.files[0]&&m(N.target.files[0])},m=N=>{if(!N.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(N),s(null),a({}),d.reset(),c.mutate(N)},g=(N,E)=>{a(k=>({...k,[N]:E}))},b=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),c.reset(),d.reset()},v=(i==null?void 0:i.duplicates)||[],w=v.length>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),u.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[u.jsxs("li",{children:["Go to ",u.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),u.jsx("li",{children:'Click "Export" in the left sidebar'}),u.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((N,E)=>u.jsx("li",{children:N},E))})]})]}),u.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(wc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(QR,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(_c,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(jd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(As,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Ir,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(cte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(bte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(hte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&u.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(xfe,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("h3",{className:"font-medium text-amber-900",children:[v.length," contact",v.length>1?"s":""," may already exist"]}),u.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),u.jsx("div",{className:"mt-4 space-y-4",children:v.map(N=>u.jsx(w_e,{duplicate:N,decision:o[N.index]||"merge",onDecision:E=>g(N.index,E)},N.index))})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:b,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(wc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(_c,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=d.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function w_e({duplicate:t,decision:e,onDecision:r}){var n,i;return u.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),u.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),u.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?u.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(qfe,{className:"h-4 w-4"}),"Update existing"]}),u.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Hfe,{className:"h-4 w-4"}),"Create new"]}),u.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(zfe,{className:"h-4 w-4"}),"Skip"]})]})]})}const yq=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:Zp,component:b_e},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:QR,component:x_e},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:dte,component:v_e}];function S_e(){var n;$n("Import - Settings");const[t,e]=T.useState("vcard"),r=(n=yq.find(i=>i.id===t))==null?void 0:n.component;return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(le,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(Zn,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"Import Contacts"})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:yq.map(i=>{const s=i.icon,o=t===i.id;return u.jsxs("button",{onClick:()=>e(i.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${o?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.jsx(s,{className:`mr-2 h-5 w-5 ${o?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:"block",children:i.name}),u.jsx("span",{className:`block text-xs font-normal ${o?"text-primary-400":"text-gray-400"}`,children:i.description})]})]},i.id)})})}),r&&u.jsx(r,{})]})]})}function __e(){$n("Export Data - Settings");const t=e=>{e==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":e==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")};return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(le,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(Zn,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"Export Data"})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>t("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(Zp,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),u.jsx(BP,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("button",{onClick:()=>t("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(QR,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),u.jsx(BP,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function E_e(){$n("User Approval - Settings");const t=yt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(gte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),u.jsx(le,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ut({queryKey:["users"],queryFn:async()=>(await qe.getUsers()).data}),s=ht({mutationFn:p=>qe.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=ht({mutationFn:p=>qe.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=ht({mutationFn:p=>qe.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},c=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(wc,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(le,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(Zn,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),u.jsxs("div",{className:"space-y-6",children:[h.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),u.jsx("div",{className:"space-y-3",children:h.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:p.name}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email}),u.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[u.jsx(dF,{className:"w-4 h-4"}),"Approve"]}),u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(pF,{className:"w-4 h-4"}),"Deny"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(li,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),u.jsx("div",{className:"space-y-3",children:f.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,u.jsx(dF,{className:"w-4 h-4 text-green-600"})]}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(pF,{className:"w-4 h-4"}),"Revoke Access"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(li,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&u.jsx("div",{className:"card p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var vq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V1={exports:{}},bq={},ef,xq;function Nr(){if(xq)return ef;xq=1;var t=function(e){return e&&e.Math===Math&&e};return ef=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof vq=="object"&&vq)||t(typeof ef=="object"&&ef)||function(){return this}()||Function("return this")(),ef}var U1,wq;function _t(){return wq||(wq=1,U1=function(t){try{return!!t()}catch{return!0}}),U1}var H1,Sq;function am(){if(Sq)return H1;Sq=1;var t=_t();return H1=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),H1}var W1,_q;function U0(){if(_q)return W1;_q=1;var t=am(),e=Function.prototype,r=e.apply,n=e.call;return W1=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),W1}var K1,Eq;function Tt(){if(Eq)return K1;Eq=1;var t=am(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return K1=t?n:function(i){return function(){return r.apply(i,arguments)}},K1}var G1,Nq;function Bo(){if(Nq)return G1;Nq=1;var t=Tt(),e=t({}.toString),r=t("".slice);return G1=function(n){return r(e(n),8,-1)},G1}var Y1,Cq;function Die(){if(Cq)return Y1;Cq=1;var t=Bo(),e=Tt();return Y1=function(r){if(t(r)==="Function")return e(r)},Y1}var Q1,kq;function Vr(){if(kq)return Q1;kq=1;var t=typeof document=="object"&&document.all;return Q1=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},Q1}var X1={},J1,Tq;function Cr(){if(Tq)return J1;Tq=1;var t=_t();return J1=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),J1}var Z1,Oq;function ri(){if(Oq)return Z1;Oq=1;var t=am(),e=Function.prototype.call;return Z1=t?e.bind(e):function(){return e.apply(e,arguments)},Z1}var ex={},jq;function QM(){if(jq)return ex;jq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return ex.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,ex}var tx,Pq;function lm(){return Pq||(Pq=1,tx=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),tx}var rx,Iq;function H0(){if(Iq)return rx;Iq=1;var t=Tt(),e=_t(),r=Bo(),n=Object,i=t("".split);return rx=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,rx}var nx,Rq;function cm(){return Rq||(Rq=1,nx=function(t){return t==null}),nx}var ix,Mq;function Gc(){if(Mq)return ix;Mq=1;var t=cm(),e=TypeError;return ix=function(r){if(t(r))throw new e("Can't call method on "+r);return r},ix}var sx,$q;function Vs(){if($q)return sx;$q=1;var t=H0(),e=Gc();return sx=function(r){return t(e(r))},sx}var ox,Dq;function Dn(){if(Dq)return ox;Dq=1;var t=Vr();return ox=function(e){return typeof e=="object"?e!==null:t(e)},ox}var ax,Aq;function Mr(){return Aq||(Aq=1,ax={}),ax}var lx,Fq;function bi(){if(Fq)return lx;Fq=1;var t=Mr(),e=Nr(),r=Vr(),n=function(i){return r(i)?i:void 0};return lx=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},lx}var cx,qq;function Ur(){if(qq)return cx;qq=1;var t=Tt();return cx=t({}.isPrototypeOf),cx}var ux,Lq;function sh(){if(Lq)return ux;Lq=1;var t=Nr(),e=t.navigator,r=e&&e.userAgent;return ux=r?String(r):"",ux}var dx,Bq;function um(){if(Bq)return dx;Bq=1;var t=Nr(),e=sh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),dx=a,dx}var hx,zq;function oh(){if(zq)return hx;zq=1;var t=um(),e=_t(),r=Nr(),n=r.String;return hx=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),hx}var fx,Vq;function Aie(){if(Vq)return fx;Vq=1;var t=oh();return fx=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",fx}var px,Uq;function dm(){if(Uq)return px;Uq=1;var t=bi(),e=Vr(),r=Ur(),n=Aie(),i=Object;return px=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},px}var mx,Hq;function ah(){if(Hq)return mx;Hq=1;var t=String;return mx=function(e){try{return t(e)}catch{return"Object"}},mx}var gx,Wq;function zo(){if(Wq)return gx;Wq=1;var t=Vr(),e=ah(),r=TypeError;return gx=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},gx}var yx,Kq;function XM(){if(Kq)return yx;Kq=1;var t=zo(),e=cm();return yx=function(r,n){var i=r[n];return e(i)?void 0:t(i)},yx}var vx,Gq;function N_e(){if(Gq)return vx;Gq=1;var t=ri(),e=Vr(),r=Dn(),n=TypeError;return vx=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},vx}var bx={exports:{}},xx,Yq;function lh(){return Yq||(Yq=1,xx=!0),xx}var wx,Qq;function C_e(){if(Qq)return wx;Qq=1;var t=Nr(),e=Object.defineProperty;return wx=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},wx}var Xq;function JM(){if(Xq)return bx.exports;Xq=1;var t=lh(),e=Nr(),r=C_e(),n="__core-js_shared__",i=bx.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),bx.exports}var Sx,Jq;function ch(){if(Jq)return Sx;Jq=1;var t=JM();return Sx=function(e,r){return t[e]||(t[e]=r||{})},Sx}var _x,Zq;function gs(){if(Zq)return _x;Zq=1;var t=Gc(),e=Object;return _x=function(r){return e(t(r))},_x}var Ex,eL;function Hr(){if(eL)return Ex;eL=1;var t=Tt(),e=gs(),r=t({}.hasOwnProperty);return Ex=Object.hasOwn||function(i,s){return r(e(i),s)},Ex}var Nx,tL;function W0(){if(tL)return Nx;tL=1;var t=Tt(),e=0,r=Math.random(),n=t(1.1.toString);return Nx=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},Nx}var Cx,rL;function Wr(){if(rL)return Cx;rL=1;var t=Nr(),e=ch(),r=Hr(),n=W0(),i=oh(),s=Aie(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Cx=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},Cx}var kx,nL;function Fie(){if(nL)return kx;nL=1;var t=ri(),e=Dn(),r=dm(),n=XM(),i=N_e(),s=Wr(),o=TypeError,a=s("toPrimitive");return kx=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},kx}var Tx,iL;function ZM(){if(iL)return Tx;iL=1;var t=Fie(),e=dm();return Tx=function(r){var n=t(r,"string");return e(n)?n:n+""},Tx}var Ox,sL;function qie(){if(sL)return Ox;sL=1;var t=Nr(),e=Dn(),r=t.document,n=e(r)&&e(r.createElement);return Ox=function(i){return n?r.createElement(i):{}},Ox}var jx,oL;function Lie(){if(oL)return jx;oL=1;var t=Cr(),e=_t(),r=qie();return jx=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),jx}var aL;function K0(){if(aL)return X1;aL=1;var t=Cr(),e=ri(),r=QM(),n=lm(),i=Vs(),s=ZM(),o=Hr(),a=Lie(),l=Object.getOwnPropertyDescriptor;return X1.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},X1}var Px,lL;function k_e(){if(lL)return Px;lL=1;var t=_t(),e=Vr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Px=n,Px}var Ix,cL;function G0(){if(cL)return Ix;cL=1;var t=Die(),e=zo(),r=am(),n=t(t.bind);return Ix=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},Ix}var Rx={},Mx,uL;function Bie(){if(uL)return Mx;uL=1;var t=Cr(),e=_t();return Mx=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Mx}var $x,dL;function Vo(){if(dL)return $x;dL=1;var t=Dn(),e=String,r=TypeError;return $x=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},$x}var hL;function Vi(){if(hL)return Rx;hL=1;var t=Cr(),e=Lie(),r=Bie(),n=Vo(),i=ZM(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return Rx.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Rx}var Dx,fL;function uh(){if(fL)return Dx;fL=1;var t=Cr(),e=Vi(),r=lm();return Dx=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},Dx}var Ax,pL;function ze(){if(pL)return Ax;pL=1;var t=Nr(),e=U0(),r=Die(),n=Vr(),i=K0().f,s=k_e(),o=Mr(),a=G0(),l=uh(),c=Hr(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return Ax=function(h,f){var p=h.target,m=h.global,g=h.stat,b=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,v=m?o:o[p]||l(o,p,{})[p],w=v.prototype,x,S,_,N,E,k,C,O,j;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),k=v[N],S&&(h.dontCallGetSet?(j=i(y,N),C=j&&j.value):C=y[N]),E=S&&C?C:f[N],!(!x&&!b&&typeof k==typeof E)&&(h.bind&&S?O=a(E,t):h.wrap&&S?O=d(E):b&&n(E)?O=r(E):O=E,(h.sham||E&&E.sham||k&&k.sham)&&l(O,"sham",!0),l(v,N,O),b&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},Ax}var mL;function T_e(){if(mL)return bq;mL=1;var t=ze(),e=Cr(),r=Vi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),bq}var gL;function O_e(){if(gL)return V1.exports;gL=1,T_e();var t=Mr(),e=t.Object,r=V1.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),V1.exports}var Fx,yL;function zie(){if(yL)return Fx;yL=1;var t=O_e();return Fx=t,Fx}var qx,vL;function j_e(){if(vL)return qx;vL=1;var t=zie();return qx=t,qx}var Lx,bL;function P_e(){if(bL)return Lx;bL=1;var t=j_e();return Lx=t,Lx}var Bx,xL;function I_e(){return xL||(xL=1,Bx=P_e()),Bx}var R_e=I_e(),M_e=nt(R_e),wL={},zx,SL;function Yc(){if(SL)return zx;SL=1;var t=Bo();return zx=Array.isArray||function(r){return t(r)==="Array"},zx}var Vx,_L;function $_e(){if(_L)return Vx;_L=1;var t=Math.ceil,e=Math.floor;return Vx=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},Vx}var Ux,EL;function dh(){if(EL)return Ux;EL=1;var t=$_e();return Ux=function(e){var r=+e;return r!==r||r===0?0:t(r)},Ux}var Hx,NL;function Vie(){if(NL)return Hx;NL=1;var t=dh(),e=Math.min;return Hx=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},Hx}var Wx,CL;function hl(){if(CL)return Wx;CL=1;var t=Vie();return Wx=function(e){return t(e.length)},Wx}var Kx,kL;function Uie(){if(kL)return Kx;kL=1;var t=TypeError,e=9007199254740991;return Kx=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},Kx}var Gx,TL;function Y0(){if(TL)return Gx;TL=1;var t=Cr(),e=Vi(),r=lm();return Gx=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},Gx}var Yx,OL;function e$(){if(OL)return Yx;OL=1;var t=Wr(),e=t("toStringTag"),r={};return r[e]="z",Yx=String(r)==="[object z]",Yx}var Qx,jL;function fl(){if(jL)return Qx;jL=1;var t=e$(),e=Vr(),r=Bo(),n=Wr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return Qx=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},Qx}var Xx,PL;function D_e(){if(PL)return Xx;PL=1;var t=Tt(),e=Vr(),r=JM(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),Xx=r.inspectSource,Xx}var Jx,IL;function Hie(){if(IL)return Jx;IL=1;var t=Tt(),e=_t(),r=Vr(),n=fl(),i=bi(),s=D_e(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,Jx=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,Jx}var Zx,RL;function A_e(){if(RL)return Zx;RL=1;var t=Yc(),e=Hie(),r=Dn(),n=Wr(),i=n("species"),s=Array;return Zx=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},Zx}var ew,ML;function t$(){if(ML)return ew;ML=1;var t=A_e();return ew=function(e,r){return new(t(e))(r===0?0:r)},ew}var tw,$L;function hm(){if($L)return tw;$L=1;var t=_t(),e=Wr(),r=um(),n=e("species");return tw=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},tw}var DL;function Wie(){if(DL)return wL;DL=1;var t=ze(),e=_t(),r=Yc(),n=Dn(),i=gs(),s=hl(),o=Uie(),a=Y0(),l=t$(),c=hm(),d=Wr(),h=um(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var b=[];return b[f]=!1,b.concat()[0]!==b}),m=function(b){if(!n(b))return!1;var y=b[f];return y!==void 0?!!y:r(b)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var v=i(this),w=l(v,0),x=0,S,_,N,E,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?v:arguments[S],m(k))for(E=s(k),o(x+E),_=0;_<E;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),wL}var AL={},FL={},rw,qL;function pl(){if(qL)return rw;qL=1;var t=fl(),e=String;return rw=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},rw}var nw={},iw,LL;function r$(){if(LL)return iw;LL=1;var t=dh(),e=Math.max,r=Math.min;return iw=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},iw}var sw,BL;function F_e(){if(BL)return sw;BL=1;var t=Vs(),e=r$(),r=hl(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return sw={includes:n(!0),indexOf:n(!1)},sw}var ow,zL;function fm(){return zL||(zL=1,ow={}),ow}var aw,VL;function Kie(){if(VL)return aw;VL=1;var t=Tt(),e=Hr(),r=Vs(),n=F_e().indexOf,i=fm(),s=t([].push);return aw=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},aw}var lw,UL;function n$(){return UL||(UL=1,lw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),lw}var cw,HL;function Q0(){if(HL)return cw;HL=1;var t=Kie(),e=n$();return cw=Object.keys||function(n){return t(n,e)},cw}var WL;function i$(){if(WL)return nw;WL=1;var t=Cr(),e=Bie(),r=Vi(),n=Vo(),i=Vs(),s=Q0();return nw.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},nw}var uw,KL;function q_e(){if(KL)return uw;KL=1;var t=bi();return uw=t("document","documentElement"),uw}var dw,GL;function X0(){if(GL)return dw;GL=1;var t=ch(),e=W0(),r=t("keys");return dw=function(n){return r[n]||(r[n]=e(n))},dw}var hw,YL;function pm(){if(YL)return hw;YL=1;var t=Vo(),e=i$(),r=n$(),n=fm(),i=q_e(),s=qie(),o=X0(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(v){return l+d+a+v+l+"/"+d+a},m=function(v){v.write(p("")),v.close();var w=v.parentWindow.Object;return v=null,w},g=function(){var v=s("iframe"),w="java"+d+":",x;return v.style.display="none",i.appendChild(v),v.src=String(w),x=v.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},b,y=function(){try{b=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&b?m(b):g():m(b);for(var v=r.length;v--;)delete y[c][r[v]];return y()};return n[h]=!0,hw=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},hw}var fw={},QL;function J0(){if(QL)return fw;QL=1;var t=Kie(),e=n$(),r=e.concat("length","prototype");return fw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},fw}var pw={},mw,XL;function hh(){if(XL)return mw;XL=1;var t=Tt();return mw=t([].slice),mw}var JL;function Gie(){if(JL)return pw;JL=1;var t=Bo(),e=Vs(),r=J0().f,n=hh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return pw.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},pw}var gw={},ZL;function Z0(){return ZL||(ZL=1,gw.f=Object.getOwnPropertySymbols),gw}var yw,e3;function mm(){if(e3)return yw;e3=1;var t=uh();return yw=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},yw}var vw,t3;function s$(){if(t3)return vw;t3=1;var t=Vi();return vw=function(e,r,n){return t.f(e,r,n)},vw}var bw={},r3;function eb(){if(r3)return bw;r3=1;var t=Wr();return bw.f=t,bw}var xw,n3;function Qt(){if(n3)return xw;n3=1;var t=Mr(),e=Hr(),r=eb(),n=Vi().f;return xw=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},xw}var ww,i3;function Yie(){if(i3)return ww;i3=1;var t=ri(),e=bi(),r=Wr(),n=mm();return ww=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},ww}var Sw,s3;function L_e(){if(s3)return Sw;s3=1;var t=e$(),e=fl();return Sw=t?{}.toString:function(){return"[object "+e(this)+"]"},Sw}var _w,o3;function Qc(){if(o3)return _w;o3=1;var t=e$(),e=Vi().f,r=uh(),n=Hr(),i=L_e(),s=Wr(),o=s("toStringTag");return _w=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},_w}var Ew,a3;function B_e(){if(a3)return Ew;a3=1;var t=Nr(),e=Vr(),r=t.WeakMap;return Ew=e(r)&&/native code/.test(String(r)),Ew}var Nw,l3;function gm(){if(l3)return Nw;l3=1;var t=B_e(),e=Nr(),r=Dn(),n=uh(),i=Hr(),s=JM(),o=X0(),a=fm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(v){return p(v)?f(v):h(v,{})},g=function(v){return function(w){var x;if(!r(w)||(x=f(w)).type!==v)throw new c("Incompatible receiver, "+v+" required");return x}};if(t||s.state){var b=s.state||(s.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,h=function(v,w){if(b.has(v))throw new c(l);return w.facade=v,b.set(v,w),w},f=function(v){return b.get(v)||{}},p=function(v){return b.has(v)}}else{var y=o("state");a[y]=!0,h=function(v,w){if(i(v,y))throw new c(l);return w.facade=v,n(v,y,w),w},f=function(v){return i(v,y)?v[y]:{}},p=function(v){return i(v,y)}}return Nw={set:h,get:f,has:p,enforce:m,getterFor:g},Nw}var Cw,c3;function fh(){if(c3)return Cw;c3=1;var t=G0(),e=Tt(),r=H0(),n=gs(),i=hl(),s=t$(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(b,y,v,w){for(var x=n(b),S=r(x),_=i(S),N=t(y,v),E=0,k=w||s,C=c?k(b,_):d||m?k(b,0):void 0,O,j;_>E;E++)if((g||E in S)&&(O=S[E],j=N(O,E,x),l))if(c)C[E]=j;else if(j)switch(l){case 3:return!0;case 5:return O;case 6:return E;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return Cw={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},Cw}var u3;function z_e(){if(u3)return FL;u3=1;var t=ze(),e=Nr(),r=ri(),n=Tt(),i=lh(),s=Cr(),o=oh(),a=_t(),l=Hr(),c=Ur(),d=Vo(),h=Vs(),f=ZM(),p=pl(),m=lm(),g=pm(),b=Q0(),y=J0(),v=Gie(),w=Z0(),x=K0(),S=Vi(),_=i$(),N=QM(),E=mm(),k=s$(),C=ch(),O=X0(),j=fm(),P=W0(),A=Wr(),q=eb(),R=Qt(),L=Yie(),D=Qc(),W=gm(),z=fh().forEach,U=O("hidden"),K="Symbol",fe="prototype",we=W.set,Fe=W.getterFor(K),xe=Object[fe],Re=e.Symbol,Ve=Re&&Re[fe],ct=e.RangeError,Jt=e.TypeError,ft=e.QObject,X=x.f,Se=S.f,He=v.f,tt=N.f,Vt=n([].push),ke=C("symbols"),Ye=C("op-symbols"),$t=C("wks"),Nt=!ft||!ft[fe]||!ft[fe].findChild,M=function(_e,ie,he){var de=X(xe,ie);de&&delete xe[ie],Se(_e,ie,he),de&&_e!==xe&&Se(xe,ie,de)},F=s&&a(function(){return g(Se({},"a",{get:function(){return Se(this,"a",{value:7}).a}})).a!==7})?M:Se,V=function(_e,ie){var he=ke[_e]=g(Ve);return we(he,{type:K,tag:_e,description:ie}),s||(he.description=ie),he},oe=function(ie,he,de){ie===xe&&oe(Ye,he,de),d(ie);var Ce=f(he);return d(de),l(ke,Ce)?(de.enumerable?(l(ie,U)&&ie[U][Ce]&&(ie[U][Ce]=!1),de=g(de,{enumerable:m(0,!1)})):(l(ie,U)||Se(ie,U,m(1,g(null))),ie[U][Ce]=!0),F(ie,Ce,de)):Se(ie,Ce,de)},Z=function(ie,he){d(ie);var de=h(he),Ce=b(de).concat(Zt(de));return z(Ce,function(st){(!s||r(ye,de,st))&&oe(ie,st,de[st])}),ie},J=function(ie,he){return he===void 0?g(ie):Z(g(ie),he)},ye=function(ie){var he=f(ie),de=r(tt,this,he);return this===xe&&l(ke,he)&&!l(Ye,he)?!1:de||!l(this,he)||!l(ke,he)||l(this,U)&&this[U][he]?de:!0},Qe=function(ie,he){var de=h(ie),Ce=f(he);if(!(de===xe&&l(ke,Ce)&&!l(Ye,Ce))){var st=X(de,Ce);return st&&l(ke,Ce)&&!(l(de,U)&&de[U][Ce])&&(st.enumerable=!0),st}},Ze=function(ie){var he=He(h(ie)),de=[];return z(he,function(Ce){!l(ke,Ce)&&!l(j,Ce)&&Vt(de,Ce)}),de},Zt=function(_e){var ie=_e===xe,he=He(ie?Ye:h(_e)),de=[];return z(he,function(Ce){l(ke,Ce)&&(!ie||l(xe,Ce))&&Vt(de,ke[Ce])}),de};return o||(Re=function(){if(c(Ve,this))throw new Jt("Symbol is not a constructor");var ie=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),he=P(ie),de=function(Ce){var st=this===void 0?e:this;st===xe&&r(de,Ye,Ce),l(st,U)&&l(st[U],he)&&(st[U][he]=!1);var Si=m(1,Ce);try{F(st,he,Si)}catch(Gi){if(!(Gi instanceof ct))throw Gi;M(st,he,Si)}};return s&&Nt&&F(xe,he,{configurable:!0,set:de}),V(he,ie)},Ve=Re[fe],E(Ve,"toString",function(){return Fe(this).tag}),E(Re,"withoutSetter",function(_e){return V(P(_e),_e)}),N.f=ye,S.f=oe,_.f=Z,x.f=Qe,y.f=v.f=Ze,w.f=Zt,q.f=function(_e){return V(A(_e),_e)},s&&(k(Ve,"description",{configurable:!0,get:function(){return Fe(this).description}}),i||E(xe,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Re}),z(b($t),function(_e){R(_e)}),t({target:K,stat:!0,forced:!o},{useSetter:function(){Nt=!0},useSimple:function(){Nt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:J,defineProperty:oe,defineProperties:Z,getOwnPropertyDescriptor:Qe}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ze}),L(),D(Re,K),j[U]=!0,FL}var d3={},kw,h3;function Qie(){if(h3)return kw;h3=1;var t=oh();return kw=t&&!!Symbol.for&&!!Symbol.keyFor,kw}var f3;function V_e(){if(f3)return d3;f3=1;var t=ze(),e=bi(),r=Hr(),n=pl(),i=ch(),s=Qie(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),d3}var p3={},m3;function U_e(){if(m3)return p3;m3=1;var t=ze(),e=Hr(),r=dm(),n=ah(),i=ch(),s=Qie(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),p3}var g3={},Tw,y3;function H_e(){if(y3)return Tw;y3=1;var t=Tt(),e=Yc(),r=Vr(),n=Bo(),i=pl(),s=t([].push);return Tw=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},Tw}var v3;function Xie(){if(v3)return g3;v3=1;var t=ze(),e=bi(),r=U0(),n=ri(),i=Tt(),s=_t(),o=Vr(),a=dm(),l=hh(),c=H_e(),d=oh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),b=i("".replace),y=i(1.1.toString),v=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,C){var O=l(arguments),j=c(C);if(!(!o(j)&&(k===void 0||a(k))))return O[1]=function(P,A){if(o(j)&&(A=n(j,this,h(P),A)),!a(A))return A},r(f,null,O)},E=function(k,C,O){var j=m(O,C-1),P=m(O,C+1);return p(w,k)&&!p(x,P)||p(x,k)&&!p(w,j)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,j){var P=l(arguments),A=r(S?N:f,null,P);return _&&typeof A=="string"?b(A,v,E):A}}),g3}var b3={},x3;function W_e(){if(x3)return b3;x3=1;var t=ze(),e=oh(),r=_t(),n=Z0(),i=gs(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),b3}var w3;function Jie(){return w3||(w3=1,z_e(),V_e(),U_e(),Xie(),W_e()),AL}var S3={},_3;function Zie(){if(_3)return S3;_3=1;var t=Qt();return t("asyncDispose"),S3}var E3={},N3;function K_e(){if(N3)return E3;N3=1;var t=Qt();return t("asyncIterator"),E3}var C3={},k3;function ese(){if(k3)return C3;k3=1;var t=Qt();return t("dispose"),C3}var T3={},O3;function G_e(){if(O3)return T3;O3=1;var t=Qt();return t("hasInstance"),T3}var j3={},P3;function Y_e(){if(P3)return j3;P3=1;var t=Qt();return t("isConcatSpreadable"),j3}var I3={},R3;function tse(){if(R3)return I3;R3=1;var t=Qt();return t("iterator"),I3}var M3={},$3;function Q_e(){if($3)return M3;$3=1;var t=Qt();return t("match"),M3}var D3={},A3;function X_e(){if(A3)return D3;A3=1;var t=Qt();return t("matchAll"),D3}var F3={},q3;function J_e(){if(q3)return F3;q3=1;var t=Qt();return t("replace"),F3}var L3={},B3;function Z_e(){if(B3)return L3;B3=1;var t=Qt();return t("search"),L3}var z3={},V3;function eEe(){if(V3)return z3;V3=1;var t=Qt();return t("species"),z3}var U3={},H3;function tEe(){if(H3)return U3;H3=1;var t=Qt();return t("split"),U3}var W3={},K3;function rse(){if(K3)return W3;K3=1;var t=Qt(),e=Yie();return t("toPrimitive"),e(),W3}var G3={},Y3;function rEe(){if(Y3)return G3;Y3=1;var t=bi(),e=Qt(),r=Qc();return e("toStringTag"),r(t("Symbol"),"Symbol"),G3}var Q3={},X3;function nEe(){if(X3)return Q3;X3=1;var t=Qt();return t("unscopables"),Q3}var J3={},Z3;function iEe(){if(Z3)return J3;Z3=1;var t=Nr(),e=Qc();return e(t.JSON,"JSON",!0),J3}var Ow,e5;function sEe(){if(e5)return Ow;e5=1,Wie(),Jie(),Zie(),K_e(),ese(),G_e(),Y_e(),tse(),Q_e(),X_e(),J_e(),Z_e(),eEe(),tEe(),rse(),rEe(),nEe(),iEe();var t=Mr();return Ow=t.Symbol,Ow}var t5={},jw,r5;function oEe(){return r5||(r5=1,jw=function(){}),jw}var Pw,n5;function ph(){return n5||(n5=1,Pw={}),Pw}var Iw,i5;function aEe(){if(i5)return Iw;i5=1;var t=Cr(),e=Hr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return Iw={EXISTS:i,PROPER:s,CONFIGURABLE:o},Iw}var Rw,s5;function lEe(){if(s5)return Rw;s5=1;var t=_t();return Rw=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Rw}var Mw,o5;function nse(){if(o5)return Mw;o5=1;var t=Hr(),e=Vr(),r=gs(),n=X0(),i=lEe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return Mw=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},Mw}var $w,a5;function ise(){if(a5)return $w;a5=1;var t=_t(),e=Vr(),r=Dn(),n=pm(),i=nse(),s=mm(),o=Wr(),a=lh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),$w={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},$w}var Dw,l5;function cEe(){if(l5)return Dw;l5=1;var t=ise().IteratorPrototype,e=pm(),r=lm(),n=Qc(),i=ph(),s=function(){return this};return Dw=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},Dw}var Aw,c5;function uEe(){if(c5)return Aw;c5=1;var t=Tt(),e=zo();return Aw=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},Aw}var Fw,u5;function dEe(){if(u5)return Fw;u5=1;var t=Dn();return Fw=function(e){return t(e)||e===null},Fw}var qw,d5;function hEe(){if(d5)return qw;d5=1;var t=dEe(),e=String,r=TypeError;return qw=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},qw}var Lw,h5;function fEe(){if(h5)return Lw;h5=1;var t=uEe(),e=Dn(),r=Gc(),n=hEe();return Lw=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),Lw}var Bw,f5;function o$(){if(f5)return Bw;f5=1;var t=ze(),e=ri(),r=lh(),n=aEe(),i=Vr(),s=cEe(),o=nse(),a=fEe(),l=Qc(),c=uh(),d=mm(),h=Wr(),f=ph(),p=ise(),m=n.PROPER,g=n.CONFIGURABLE,b=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,v=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return Bw=function(N,E,k,C,O,j,P){s(k,E,C);var A=function(we){if(we===O&&W)return W;if(!y&&we&&we in L)return L[we];switch(we){case w:return function(){return new k(this,we)};case x:return function(){return new k(this,we)};case S:return function(){return new k(this,we)}}return function(){return new k(this)}},q=E+" Iterator",R=!1,L=N.prototype,D=L[v]||L["@@iterator"]||O&&L[O],W=!y&&D||A(O),z=E==="Array"&&L.entries||D,U,K,fe;if(z&&(U=o(z.call(new N)),U!==Object.prototype&&U.next&&(!r&&o(U)!==b&&(a?a(U,b):i(U[v])||d(U,v,_)),l(U,q,!0,!0),r&&(f[q]=_))),m&&O===x&&D&&D.name!==x&&(!r&&g?c(L,"name",x):(R=!0,W=function(){return e(D,this)})),O)if(K={values:A(x),keys:j?W:A(w),entries:A(S)},P)for(fe in K)(y||R||!(fe in L))&&d(L,fe,K[fe]);else t({target:E,proto:!0,forced:y||R},K);return(!r||P)&&L[v]!==W&&d(L,v,W,{name:O}),f[E]=W,K},Bw}var zw,p5;function a$(){return p5||(p5=1,zw=function(t,e){return{value:t,done:e}}),zw}var Vw,m5;function ml(){if(m5)return Vw;m5=1;var t=Vs(),e=oEe(),r=ph(),n=gm(),i=Vi().f,s=o$(),o=a$(),a=lh(),l=Cr(),c="Array Iterator",d=n.set,h=n.getterFor(c);Vw=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return Vw}var Uw,g5;function pEe(){return g5||(g5=1,Uw={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Uw}var y5;function gl(){if(y5)return t5;y5=1,ml();var t=pEe(),e=Nr(),r=Qc(),n=ph();for(var i in t)r(e[i],i),n[i]=n.Array;return t5}var Hw,v5;function sse(){if(v5)return Hw;v5=1;var t=sEe();return gl(),Hw=t,Hw}var b5={},x5;function mEe(){if(x5)return b5;x5=1;var t=Wr(),e=Vi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),b5}var w5={},S5;function gEe(){return S5||(S5=1,Zie()),w5}var _5={},E5;function yEe(){return E5||(E5=1,ese()),_5}var N5={},C5;function vEe(){if(C5)return N5;C5=1;var t=Qt();return t("metadata"),N5}var Ww,k5;function bEe(){if(k5)return Ww;k5=1;var t=sse();return mEe(),gEe(),yEe(),vEe(),Ww=t,Ww}var T5={},Kw,O5;function ose(){if(O5)return Kw;O5=1;var t=bi(),e=Tt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return Kw=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},Kw}var j5;function xEe(){if(j5)return T5;j5=1;var t=ze(),e=ose();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),T5}var P5={},Gw,I5;function ase(){if(I5)return Gw;I5=1;for(var t=ch(),e=bi(),r=Tt(),n=dm(),i=Wr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return Gw=function(g){if(o&&o(g))return!0;try{for(var b=l(g),y=0,v=a(c),w=v.length;y<w;y++)if(c[v[y]]==b)return!0}catch{}return!1},Gw}var R5;function wEe(){if(R5)return P5;R5=1;var t=ze(),e=ase();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),P5}var M5={},$5;function SEe(){if($5)return M5;$5=1;var t=Qt();return t("customMatcher"),M5}var D5={},A5;function _Ee(){if(A5)return D5;A5=1;var t=Qt();return t("observable"),D5}var F5={},q5;function EEe(){if(q5)return F5;q5=1;var t=ze(),e=ose();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),F5}var L5={},B5;function NEe(){if(B5)return L5;B5=1;var t=ze(),e=ase();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),L5}var z5={},V5;function CEe(){if(V5)return z5;V5=1;var t=Qt();return t("matcher"),z5}var U5={},H5;function kEe(){if(H5)return U5;H5=1;var t=Qt();return t("metadataKey"),U5}var W5={},K5;function TEe(){if(K5)return W5;K5=1;var t=Qt();return t("patternMatch"),W5}var G5={},Y5;function OEe(){if(Y5)return G5;Y5=1;var t=Qt();return t("replaceAll"),G5}var Yw,Q5;function jEe(){if(Q5)return Yw;Q5=1;var t=bEe();return xEe(),wEe(),SEe(),_Ee(),EEe(),NEe(),CEe(),kEe(),TEe(),OEe(),Yw=t,Yw}var Qw,X5;function PEe(){return X5||(X5=1,Qw=jEe()),Qw}var IEe=PEe(),Ig=nt(IEe),J5={},Xw,Z5;function REe(){if(Z5)return Xw;Z5=1;var t=Tt(),e=dh(),r=pl(),n=Gc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return Xw={codeAt:a(!1),charAt:a(!0)},Xw}var eB;function tb(){if(eB)return J5;eB=1;var t=REe().charAt,e=pl(),r=gm(),n=o$(),i=a$(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),J5}var Jw,tB;function MEe(){if(tB)return Jw;tB=1,ml(),tb(),tse();var t=eb();return Jw=t.f("iterator"),Jw}var Zw,rB;function lse(){if(rB)return Zw;rB=1;var t=MEe();return gl(),Zw=t,Zw}var eS,nB;function $Ee(){if(nB)return eS;nB=1;var t=lse();return eS=t,eS}var tS,iB;function DEe(){if(iB)return tS;iB=1;var t=$Ee();return tS=t,tS}var rS,sB;function AEe(){return sB||(sB=1,rS=DEe()),rS}var FEe=AEe(),qEe=nt(FEe);function Ep(t){"@babel/helpers - typeof";return Ep=typeof Ig=="function"&&typeof qEe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Ig=="function"&&e.constructor===Ig&&e!==Ig.prototype?"symbol":typeof e},Ep(t)}var nS,oB;function LEe(){if(oB)return nS;oB=1,rse();var t=eb();return nS=t.f("toPrimitive"),nS}var iS,aB;function BEe(){if(aB)return iS;aB=1;var t=LEe();return iS=t,iS}var sS,lB;function zEe(){if(lB)return sS;lB=1;var t=BEe();return sS=t,sS}var oS,cB;function VEe(){if(cB)return oS;cB=1;var t=zEe();return oS=t,oS}var aS,uB;function UEe(){return uB||(uB=1,aS=VEe()),aS}var HEe=UEe(),WEe=nt(HEe);function KEe(t,e){if(Ep(t)!="object"||!t)return t;var r=t[WEe];if(r!==void 0){var n=r.call(t,e);if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GEe(t){var e=KEe(t,"string");return Ep(e)=="symbol"?e:e+""}function Wa(t,e,r){return(e=GEe(e))in t?M_e(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var dB={},lS,hB;function YEe(){if(hB)return lS;hB=1;var t=Tt(),e=zo(),r=Dn(),n=Hr(),i=hh(),s=am(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return lS=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),b=function(){var v=a(g,i(arguments));return this instanceof b?d(p,v.length,v):p.apply(f,v)};return r(m)&&(b.prototype=m),b},lS}var fB;function QEe(){if(fB)return dB;fB=1;var t=ze(),e=YEe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),dB}var cS,pB;function ni(){if(pB)return cS;pB=1;var t=Nr(),e=Mr();return cS=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},cS}var uS,mB;function XEe(){if(mB)return uS;mB=1,QEe();var t=ni();return uS=t("Function","bind"),uS}var dS,gB;function JEe(){if(gB)return dS;gB=1;var t=Ur(),e=XEe(),r=Function.prototype;return dS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},dS}var hS,yB;function ZEe(){if(yB)return hS;yB=1;var t=JEe();return hS=t,hS}var fS,vB;function eNe(){return vB||(vB=1,fS=ZEe()),fS}var tNe=eNe(),cse=nt(tNe),bB={},pS,xB;function rNe(){if(xB)return pS;xB=1;var t=zo(),e=gs(),r=H0(),n=hl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,b=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=b;break}if(g+=b,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=b)g in p&&(h=c(h,p[g],g,f));return h}};return pS={left:o(!1),right:o(!0)},pS}var mS,wB;function rb(){if(wB)return mS;wB=1;var t=_t();return mS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},mS}var gS,SB;function use(){if(SB)return gS;SB=1;var t=Nr(),e=sh(),r=Bo(),n=function(i){return e.slice(0,i.length)===i};return gS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),gS}var yS,_B;function nNe(){if(_B)return yS;_B=1;var t=use();return yS=t==="NODE",yS}var EB;function iNe(){if(EB)return bB;EB=1;var t=ze(),e=rNe().left,r=rb(),n=um(),i=nNe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),bB}var vS,NB;function sNe(){if(NB)return vS;NB=1,iNe();var t=ni();return vS=t("Array","reduce"),vS}var bS,CB;function oNe(){if(CB)return bS;CB=1;var t=Ur(),e=sNe(),r=Array.prototype;return bS=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},bS}var xS,kB;function aNe(){if(kB)return xS;kB=1;var t=oNe();return xS=t,xS}var wS,TB;function lNe(){return TB||(TB=1,wS=aNe()),wS}var cNe=lNe(),uNe=nt(cNe),OB={},jB;function dNe(){if(jB)return OB;jB=1;var t=ze(),e=fh().filter,r=hm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),OB}var SS,PB;function hNe(){if(PB)return SS;PB=1,dNe();var t=ni();return SS=t("Array","filter"),SS}var _S,IB;function fNe(){if(IB)return _S;IB=1;var t=Ur(),e=hNe(),r=Array.prototype;return _S=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},_S}var ES,RB;function pNe(){if(RB)return ES;RB=1;var t=fNe();return ES=t,ES}var NS,MB;function mNe(){return MB||(MB=1,NS=pNe()),NS}var gNe=mNe(),Bu=nt(gNe),$B={},DB;function yNe(){if(DB)return $B;DB=1;var t=ze(),e=fh().map,r=hm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),$B}var CS,AB;function vNe(){if(AB)return CS;AB=1,yNe();var t=ni();return CS=t("Array","map"),CS}var kS,FB;function bNe(){if(FB)return kS;FB=1;var t=Ur(),e=vNe(),r=Array.prototype;return kS=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},kS}var TS,qB;function xNe(){if(qB)return TS;qB=1;var t=bNe();return TS=t,TS}var OS,LB;function wNe(){return LB||(LB=1,OS=xNe()),OS}var SNe=wNe(),ns=nt(SNe),jS,BB;function _Ne(){return BB||(BB=1,jS=sse()),jS}var ENe=_Ne(),NNe=nt(ENe),zB={},VB;function CNe(){if(VB)return zB;VB=1;var t=ze(),e=Yc(),r=Hie(),n=Dn(),i=r$(),s=hl(),o=Vs(),a=Y0(),l=Wr(),c=hm(),d=hh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(b,y){var v=o(this),w=s(v),x=i(b,w),S=i(y===void 0?w:y,w),_,N,E;if(e(v)&&(_=v.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(v,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in v&&a(N,E,v[x]);return N.length=E,N}}),zB}var PS,UB;function kNe(){if(UB)return PS;UB=1,CNe();var t=ni();return PS=t("Array","slice"),PS}var IS,HB;function TNe(){if(HB)return IS;HB=1;var t=Ur(),e=kNe(),r=Array.prototype;return IS=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},IS}var RS,WB;function ONe(){if(WB)return RS;WB=1;var t=TNe();return RS=t,RS}var MS,KB;function jNe(){return KB||(KB=1,MS=ONe()),MS}var PNe=jNe(),INe=nt(PNe),GB={},$S,YB;function dse(){if(YB)return $S;YB=1;var t=bi(),e=Tt(),r=J0(),n=Z0(),i=Vo(),s=e([].concat);return $S=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},$S}var QB;function RNe(){if(QB)return GB;QB=1;var t=ze(),e=dse();return t({target:"Reflect",stat:!0},{ownKeys:e}),GB}var DS,XB;function MNe(){if(XB)return DS;XB=1,RNe();var t=Mr();return DS=t.Reflect.ownKeys,DS}var AS,JB;function $Ne(){if(JB)return AS;JB=1;var t=MNe();return AS=t,AS}var FS,ZB;function DNe(){return ZB||(ZB=1,FS=$Ne()),FS}var ANe=DNe(),FNe=nt(ANe),ez={},tz;function qNe(){if(tz)return ez;tz=1;var t=ze(),e=Yc();return t({target:"Array",stat:!0},{isArray:e}),ez}var qS,rz;function LNe(){if(rz)return qS;rz=1,qNe();var t=Mr();return qS=t.Array.isArray,qS}var LS,nz;function BNe(){if(nz)return LS;nz=1;var t=LNe();return LS=t,LS}var BS,iz;function zNe(){return iz||(iz=1,BS=BNe()),BS}var VNe=zNe(),Ns=nt(VNe),sz={},oz;function UNe(){if(oz)return sz;oz=1;var t=ze(),e=gs(),r=Q0(),n=_t(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),sz}var zS,az;function HNe(){if(az)return zS;az=1,UNe();var t=Mr();return zS=t.Object.keys,zS}var VS,lz;function WNe(){if(lz)return VS;lz=1;var t=HNe();return VS=t,VS}var US,cz;function KNe(){return cz||(cz=1,US=WNe()),US}var GNe=KNe(),l$=nt(GNe),uz={},HS,dz;function YNe(){if(dz)return HS;dz=1;var t=fh().forEach,e=rb(),r=e("forEach");return HS=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},HS}var hz;function QNe(){if(hz)return uz;hz=1;var t=ze(),e=YNe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),uz}var WS,fz;function XNe(){if(fz)return WS;fz=1,QNe();var t=ni();return WS=t("Array","forEach"),WS}var KS,pz;function JNe(){if(pz)return KS;pz=1;var t=XNe();return KS=t,KS}var GS,mz;function ZNe(){if(mz)return GS;mz=1;var t=fl(),e=Hr(),r=Ur(),n=JNe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return GS=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},GS}var YS,gz;function eCe(){return gz||(gz=1,YS=ZNe()),YS}var tCe=eCe(),Pc=nt(tCe),yz={},vz;function rCe(){if(vz)return yz;vz=1;var t=ze(),e=Tt(),r=Yc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),yz}var QS,bz;function nCe(){if(bz)return QS;bz=1,rCe();var t=ni();return QS=t("Array","reverse"),QS}var XS,xz;function iCe(){if(xz)return XS;xz=1;var t=Ur(),e=nCe(),r=Array.prototype;return XS=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},XS}var JS,wz;function sCe(){if(wz)return JS;wz=1;var t=iCe();return JS=t,JS}var ZS,Sz;function oCe(){return Sz||(Sz=1,ZS=sCe()),ZS}var aCe=oCe(),lCe=nt(aCe),_z={},e_,Ez;function cCe(){if(Ez)return e_;Ez=1;var t=Cr(),e=Yc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return e_=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},e_}var t_,Nz;function hse(){if(Nz)return t_;Nz=1;var t=ah(),e=TypeError;return t_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},t_}var Cz;function uCe(){if(Cz)return _z;Cz=1;var t=ze(),e=gs(),r=r$(),n=dh(),i=hl(),s=cCe(),o=Uie(),a=t$(),l=Y0(),c=hse(),d=hm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,b){var y=e(this),v=i(y),w=r(g,v),x=arguments.length,S,_,N,E,k,C;for(x===0?S=_=0:x===1?(S=0,_=v-w):(S=x-2,_=p(f(n(b),0),v-w)),o(v+S-_),N=a(y,_),E=0;E<_;E++)k=w+E,k in y&&l(N,E,y[k]);if(N.length=_,S<_){for(E=w;E<v-_;E++)k=E+_,C=E+S,k in y?y[C]=y[k]:c(y,C);for(E=v;E>v-_+S;E--)c(y,E-1)}else if(S>_)for(E=v-_;E>w;E--)k=E+_-1,C=E+S-1,k in y?y[C]=y[k]:c(y,C);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,v-_+S),N}}),_z}var r_,kz;function dCe(){if(kz)return r_;kz=1,uCe();var t=ni();return r_=t("Array","splice"),r_}var n_,Tz;function hCe(){if(Tz)return n_;Tz=1;var t=Ur(),e=dCe(),r=Array.prototype;return n_=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},n_}var i_,Oz;function fCe(){if(Oz)return i_;Oz=1;var t=hCe();return i_=t,i_}var s_,jz;function pCe(){return jz||(jz=1,s_=fCe()),s_}var mCe=pCe(),fse=nt(mCe),Pz={},o_,Iz;function gCe(){if(Iz)return o_;Iz=1;var t=Cr(),e=Tt(),r=ri(),n=_t(),i=Q0(),s=Z0(),o=QM(),a=gs(),l=H0(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return o_=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(b){p[b]=b}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),b=arguments.length,y=1,v=s.f,w=o.f;b>y;)for(var x=l(arguments[y++]),S=v?h(i(x),v(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,o_}var Rz;function yCe(){if(Rz)return Pz;Rz=1;var t=ze(),e=gCe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),Pz}var a_,Mz;function vCe(){if(Mz)return a_;Mz=1,yCe();var t=Mr();return a_=t.Object.assign,a_}var l_,$z;function bCe(){if($z)return l_;$z=1;var t=vCe();return l_=t,l_}var c_,Dz;function xCe(){return Dz||(Dz=1,c_=bCe()),c_}var wCe=xCe(),SCe=nt(wCe),u_,Az;function _Ce(){if(Az)return u_;Az=1,Wie();var t=ni();return u_=t("Array","concat"),u_}var d_,Fz;function ECe(){if(Fz)return d_;Fz=1;var t=Ur(),e=_Ce(),r=Array.prototype;return d_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},d_}var h_,qz;function NCe(){if(qz)return h_;qz=1;var t=ECe();return h_=t,h_}var f_,Lz;function CCe(){return Lz||(Lz=1,f_=NCe()),f_}var kCe=CCe(),TCe=nt(kCe),Bz={},zz;function OCe(){if(zz)return Bz;zz=1;var t=ze(),e=Cr(),r=pm();return t({target:"Object",stat:!0,sham:!e},{create:r}),Bz}var p_,Vz;function jCe(){if(Vz)return p_;Vz=1,OCe();var t=Mr(),e=t.Object;return p_=function(n,i){return e.create(n,i)},p_}var m_,Uz;function PCe(){if(Uz)return m_;Uz=1;var t=jCe();return m_=t,m_}var g_,Hz;function ICe(){return Hz||(Hz=1,g_=PCe()),g_}var RCe=ICe(),MCe=nt(RCe),Wz={},y_,Kz;function $Ce(){if(Kz)return y_;Kz=1;var t=dh(),e=pl(),r=Gc(),n=RangeError;return y_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},y_}var v_,Gz;function DCe(){if(Gz)return v_;Gz=1;var t=Tt(),e=Vie(),r=pl(),n=$Ce(),i=Gc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,b=f===void 0?" ":r(f),y,v;return m<=g||b===""?p:(y=m-g,v=s(b,a(y/b.length)),v.length>y&&(v=o(v,0,y)),c?p+v:v+p)}};return v_={start:l(!1),end:l(!0)},v_}var b_,Yz;function ACe(){if(Yz)return b_;Yz=1;var t=Tt(),e=_t(),r=DCe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return b_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,v=d(y),w=f(y),x=v<0?"-":v>9999?"+":"";return x+r(s(v),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,b_}var Qz;function FCe(){if(Qz)return Wz;Qz=1;var t=ze(),e=ri(),r=gs(),n=Fie(),i=ACe(),s=Bo(),o=_t(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),Wz}var x_,Xz;function qCe(){if(Xz)return x_;Xz=1,FCe(),Xie();var t=Mr(),e=U0();return t.JSON||(t.JSON={stringify:JSON.stringify}),x_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},x_}var w_,Jz;function LCe(){if(Jz)return w_;Jz=1;var t=qCe();return w_=t,w_}var S_,Zz;function BCe(){return Zz||(Zz=1,S_=LCe()),S_}var zCe=BCe(),VCe=nt(zCe),e6={},t6={},__,r6;function UCe(){if(r6)return __;r6=1;var t=TypeError;return __=function(e,r){if(e<r)throw new t("Not enough arguments");return e},__}var E_,n6;function pse(){if(n6)return E_;n6=1;var t=Nr(),e=U0(),r=Vr(),n=use(),i=sh(),s=hh(),o=UCe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return E_=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),b=m?s(arguments,h):[],y=m?function(){e(g,this,b)}:g;return d?c(y,p):c(y)}:c},E_}var i6;function HCe(){if(i6)return t6;i6=1;var t=ze(),e=Nr(),r=pse(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),t6}var s6={},o6;function WCe(){if(o6)return s6;o6=1;var t=ze(),e=Nr(),r=pse(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),s6}var a6;function KCe(){return a6||(a6=1,HCe(),WCe()),e6}var N_,l6;function GCe(){if(l6)return N_;l6=1,KCe();var t=Mr();return N_=t.setTimeout,N_}var C_,c6;function YCe(){return c6||(c6=1,C_=GCe()),C_}var QCe=YCe(),XCe=nt(QCe),k_={exports:{}},u6;function JCe(){return u6||(u6=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(k_)),k_.exports}var ZCe=JCe(),eke=nt(ZCe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function fs(){return fs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fs.apply(this,arguments)}function Ui(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Rg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var _I;typeof Object.assign!="function"?_I=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:_I=Object.assign;var Ic=_I,d6=["","webkit","Moz","MS","ms","o"],tke=typeof document>"u"?{style:{}}:document.createElement("div"),rke="function",zu=Math.round,Rc=Math.abs,c$=Date.now;function nb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<d6.length;){if(r=d6[s],n=r?r+i:e,n in t)return n;s++}}var xo;typeof window>"u"?xo={}:xo=window;var mse=nb(tke.style,"touchAction"),gse=mse!==void 0;function nke(){if(!gse)return!1;var t={},e=xo.CSS&&xo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?xo.CSS.supports("touch-action",r):!0}),t}var yse="compute",vse="auto",EI="manipulation",ac="none",Np="pan-x",Cp="pan-y",Mg=nke(),ike=/mobile|tablet|ip(ad|hone|od)|android/i,bse="ontouchstart"in xo,ske=nb(xo,"PointerEvent")!==void 0,oke=bse&&ike.test(navigator.userAgent),ym="touch",ake="pen",u$="mouse",lke="kinect",cke=25,Pn=1,Xc=2,xr=4,ei=8,Bv=1,vm=2,bm=4,xm=8,Bd=16,Fs=vm|bm,lc=xm|Bd,xse=Fs|lc,wse=["x","y"],zv=["clientX","clientY"];function wo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function ib(t,e){return typeof t===rke?t.apply(e&&e[0]||void 0,e):t}function ql(t,e){return t.indexOf(e)>-1}function uke(t){if(ql(t,ac))return ac;var e=ql(t,Np),r=ql(t,Cp);return e&&r?ac:e||r?e?Np:Cp:ql(t,EI)?EI:vse}var Sse=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===yse&&(n=this.compute()),gse&&this.manager.element.style&&Mg[n]&&(this.manager.element.style[mse]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return wo(this.manager.recognizers,function(i){ib(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),uke(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=ql(o,ac)&&!Mg[ac],l=ql(o,Cp)&&!Mg[Cp],c=ql(o,Np)&&!Mg[Np];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&Fs||c&&s&lc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function d$(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function _se(t){var e=t.length;if(e===1)return{x:zu(t[0].clientX),y:zu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:zu(r/e),y:zu(n/e)}}function h6(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:zu(t.pointers[r].clientX),clientY:zu(t.pointers[r].clientY)},r++;return{timeStamp:c$(),pointers:e,center:_se(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Vv(t,e,r){r||(r=wse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function NI(t,e,r){r||(r=wse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Ese(t,e){return t===e?Bv:Rc(t)>=Rc(e)?t<0?vm:bm:e<0?xm:Bd}function dke(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Pn||s.eventType===xr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Nse(t,e,r){return{x:e/t||0,y:r/t||0}}function hke(t,e){return Vv(e[0],e[1],zv)/Vv(t[0],t[1],zv)}function fke(t,e){return NI(e[1],e[0],zv)+NI(t[1],t[0],zv)}function pke(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ei&&(n>cke||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=Nse(n,l,c);s=d.x,o=d.y,i=Rc(d.x)>Rc(d.y)?d.x:d.y,a=Ese(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function mke(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=h6(e)),i>1&&!r.firstMultiple?r.firstMultiple=h6(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=_se(n);e.timeStamp=c$(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=NI(a,l),e.distance=Vv(a,l),dke(r,e),e.offsetDirection=Ese(e.deltaX,e.deltaY);var c=Nse(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Rc(c.x)>Rc(c.y)?c.x:c.y,e.scale=o?hke(o.pointers,n):1,e.rotation=o?fke(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,pke(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,d$(f,d)&&(d=f),e.target=d}function gke(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Pn&&n-i===0,o=e&(xr|ei)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,mke(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function kp(t){return t.trim().split(/\s+/g)}function Ff(t,e,r){wo(kp(e),function(n){t.addEventListener(n,r,!1)})}function qf(t,e,r){wo(kp(e),function(n){t.removeEventListener(n,r,!1)})}function f6(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var mh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){ib(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Ff(this.element,this.evEl,this.domHandler),this.evTarget&&Ff(this.target,this.evTarget,this.domHandler),this.evWin&&Ff(f6(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&qf(this.element,this.evEl,this.domHandler),this.evTarget&&qf(this.target,this.evTarget,this.domHandler),this.evWin&&qf(f6(this.element),this.evWin,this.domHandler)},t}();function Mc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var yke={pointerdown:Pn,pointermove:Xc,pointerup:xr,pointercancel:ei,pointerout:ei},vke={2:ym,3:ake,4:u$,5:lke},Cse="pointerdown",kse="pointermove pointerup pointercancel";xo.MSPointerEvent&&!xo.PointerEvent&&(Cse="MSPointerDown",kse="MSPointerMove MSPointerUp MSPointerCancel");var Tse=function(t){Ui(e,t);function e(){var n,i=e.prototype;return i.evEl=Cse,i.evWin=kse,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=yke[a],c=vke[i.pointerType]||i.pointerType,d=c===ym,h=Mc(s,i.pointerId,"pointerId");l&Pn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(xr|ei)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(mh);function Tp(t){return Array.prototype.slice.call(t,0)}function h$(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Mc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var bke={touchstart:Pn,touchmove:Xc,touchend:xr,touchcancel:ei},xke="touchstart touchmove touchend touchcancel",f$=function(t){Ui(e,t);function e(){var n;return e.prototype.evTarget=xke,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=bke[i.type],o=wke.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ym,srcEvent:i})},e}(mh);function wke(t,e){var r=Tp(t.touches),n=this.targetIds;if(e&(Pn|Xc)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Tp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return d$(c.target,l)}),e===Pn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(xr|ei)&&delete n[o[i].identifier],i++;if(a.length)return[h$(s.concat(a),"identifier",!0),a]}var Ske={mousedown:Pn,mousemove:Xc,mouseup:xr},_ke="mousedown",Eke="mousemove mouseup",p$=function(t){Ui(e,t);function e(){var n,i=e.prototype;return i.evEl=_ke,i.evWin=Eke,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=Ske[i.type];s&Pn&&i.button===0&&(this.pressed=!0),s&Xc&&i.which!==1&&(s=xr),this.pressed&&(s&xr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:u$,srcEvent:i}))},e}(mh),Nke=2500,p6=25;function m6(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,Nke)}}function Cke(t,e){t&Pn?(this.primaryTouch=e.changedPointers[0].identifier,m6.call(this,e)):t&(xr|ei)&&m6.call(this,e)}function kke(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=p6&&o<=p6)return!0}return!1}var Ose=function(){var t=function(e){Ui(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===ym,h=c.pointerType===u$;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)Cke.call(Rg(Rg(o)),l,c);else if(h&&kke.call(Rg(Rg(o)),c))return;o.callback(a,l,c)}},o.touch=new f$(o.manager,o.handler),o.mouse=new p$(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(mh);return t}();function Tke(t){var e,r=t.options.inputClass;return r?e=r:ske?e=Tse:oke?e=f$:bse?e=Ose:e=p$,new e(t,gke)}function Vu(t,e,r){return Array.isArray(t)?(wo(t,r[e],r),!0):!1}var ly=1,qi=2,zd=4,Ka=8,So=Ka,Op=16,Ps=32,Oke=1;function jke(){return Oke++}function $g(t,e){var r=e.manager;return r?r.get(t):t}function g6(t){return t&Op?"cancel":t&Ka?"end":t&zd?"move":t&qi?"start":""}var wm=function(){function t(r){r===void 0&&(r={}),this.options=fs({enable:!0},r),this.id=jke(),this.manager=null,this.state=ly,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Ic(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Vu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=$g(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Vu(n,"dropRecognizeWith",this)?this:(n=$g(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Vu(n,"requireFailure",this))return this;var i=this.requireFail;return n=$g(n,this),Mc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Vu(n,"dropRequireFailure",this))return this;n=$g(n,this);var i=Mc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ka&&o(i.options.event+g6(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ka&&o(i.options.event+g6(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Ps},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Ps|ly)))return!1;n++}return!0},e.recognize=function(n){var i=Ic({},n);if(!ib(this.options.enable,[this,i])){this.reset(),this.state=Ps;return}this.state&(So|Op|Ps)&&(this.state=ly),this.state=this.process(i),this.state&(qi|zd|Ka|Op)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),CI=function(t){Ui(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[EI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Pn&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==xr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Vv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=So,s.tryEmit()},o.interval),qi):So}return Ps},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Ps},this.options.interval),Ps},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===So&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(wm),Vd=function(t){Ui(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(qi|zd),l=this.attrTest(i);return a&&(o&ei||!l)?s|Op:a||l?o&xr?s|Ka:s&qi?s|zd:qi:Ps},e}(wm);function jse(t){return t===Bd?"down":t===xm?"up":t===vm?"left":t===bm?"right":""}var m$=function(t){Ui(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"pan",threshold:10,pointers:1,direction:xse},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Fs&&s.push(Cp),i&lc&&s.push(Np),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Fs?(l=c===0?Bv:c<0?vm:bm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Bv:d<0?xm:Bd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Vd.prototype.attrTest.call(this,i)&&(this.state&qi||!(this.state&qi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=jse(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Vd),Pse=function(t){Ui(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"swipe",threshold:10,velocity:.3,direction:Fs|lc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return m$.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Fs|lc)?o=i.overallVelocity:s&Fs?o=i.overallVelocityX:s&lc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Rc(o)>this.options.velocity&&i.eventType&xr},r.emit=function(i){var s=jse(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Vd),Ise=function(t){Ui(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[ac]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&qi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Vd),Rse=function(t){Ui(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[ac]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&qi)},e}(Vd),Mse=function(t){Ui(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[vse]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(xr|ei)&&!c)this.reset();else if(i.eventType&Pn)this.reset(),this._timer=setTimeout(function(){s.state=So,s.tryEmit()},o.time);else if(i.eventType&xr)return So;return Ps},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===So&&(i&&i.eventType&xr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=c$(),this.manager.emit(this.options.event,this._input)))},e}(wm),$se={domEvents:!1,touchAction:yse,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},y6=[[Rse,{enable:!1}],[Ise,{enable:!1},["rotate"]],[Pse,{direction:Fs}],[m$,{direction:Fs},["swipe"]],[CI],[CI,{event:"doubletap",taps:2},["tap"]],[Mse]],Pke=1,v6=2;function b6(t,e){var r=t.element;if(r.style){var n;wo(t.options.cssProps,function(i,s){n=nb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function Ike(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var x6=function(){function t(r,n){var i=this;this.options=Ic({},$se,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=Tke(this),this.touchAction=new Sse(this,this.options.touchAction),b6(this,!0),wo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Ic(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?v6:Pke},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&So)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==v6&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(qi|zd|Ka)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof wm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Vu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Vu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Mc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return wo(kp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return wo(kp(n),function(o){i?s[o]&&s[o].splice(Mc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&Ike(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&b6(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Rke={touchstart:Pn,touchmove:Xc,touchend:xr,touchcancel:ei},Mke="touchstart",$ke="touchstart touchmove touchend touchcancel",Dke=function(t){Ui(e,t);function e(){var n,i=e.prototype;return i.evTarget=Mke,i.evWin=$ke,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=Rke[i.type];if(s===Pn&&(this.started=!0),!!this.started){var o=Ake.call(this,i,s);s&(xr|ei)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ym,srcEvent:i})}},e}(mh);function Ake(t,e){var r=Tp(t.touches),n=Tp(t.changedTouches);return e&(xr|ei)&&(r=h$(r.concat(n),"identifier",!0)),[r,n]}function Dse(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Ase=Dse(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),Fke=Dse(function(t,e){return Ase(t,e,!0)},"merge","Use `assign`.");function qke(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Ic(i,r)}function w6(t,e){return function(){return t.apply(e,arguments)}}var Lke=function(){var t=function(r,n){return n===void 0&&(n={}),new x6(r,fs({recognizers:y6.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=xse,t.DIRECTION_DOWN=Bd,t.DIRECTION_LEFT=vm,t.DIRECTION_RIGHT=bm,t.DIRECTION_UP=xm,t.DIRECTION_HORIZONTAL=Fs,t.DIRECTION_VERTICAL=lc,t.DIRECTION_NONE=Bv,t.DIRECTION_DOWN=Bd,t.INPUT_START=Pn,t.INPUT_MOVE=Xc,t.INPUT_END=xr,t.INPUT_CANCEL=ei,t.STATE_POSSIBLE=ly,t.STATE_BEGAN=qi,t.STATE_CHANGED=zd,t.STATE_ENDED=Ka,t.STATE_RECOGNIZED=So,t.STATE_CANCELLED=Op,t.STATE_FAILED=Ps,t.Manager=x6,t.Input=mh,t.TouchAction=Sse,t.TouchInput=f$,t.MouseInput=p$,t.PointerEventInput=Tse,t.TouchMouseInput=Ose,t.SingleTouchInput=Dke,t.Recognizer=wm,t.AttrRecognizer=Vd,t.Tap=CI,t.Pan=m$,t.Swipe=Pse,t.Pinch=Ise,t.Rotate=Rse,t.Press=Mse,t.on=Ff,t.off=qf,t.each=wo,t.merge=Fke,t.extend=Ase,t.bindFn=w6,t.assign=Ic,t.inherit=qke,t.bindFn=w6,t.prefixed=nb,t.toArray=Tp,t.inArray=Mc,t.uniqueArray=h$,t.splitStr=kp,t.boolOrFn=ib,t.hasParent=d$,t.addEventListeners=Ff,t.removeEventListeners=qf,t.defaults=Ic({},$se,{preset:y6}),t}();const Fse=NNe("DELETE");function Bke(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return qse({},t,...r)}function qse(){const t=Uv(...arguments);return Bse(t),t}function Uv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return Uv(qse(e[0],e[1]),...INe(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of FNe(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===Fse?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!Ns(n[s])&&!Ns(i[s])?n[s]=Uv(n[s],i[s]):n[s]=Lse(i[s]));return n}function Lse(t){return Ns(t)?ns(t).call(t,e=>Lse(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):Uv({},t):t}function Bse(t){for(const e of l$(t))t[e]===Fse?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&Bse(t[e])}function zke(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const Vke=typeof window<"u"?window.Hammer||Lke:function(){return zke()};function po(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=Vke(this._dom.overlay);r.on("tap",cse(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Pc(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{Uke(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}eke(po.prototype);po.current=null;po.prototype.destroy=function(){this.deactivate();for(const r of lCe(t=fse(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};po.prototype.activate=function(){po.current&&po.current.deactivate(),po.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};po.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};po.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function Uke(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var T_,S6;function Hke(){if(S6)return T_;S6=1,Jie();var t=Mr();return T_=t.Object.getOwnPropertySymbols,T_}var O_,_6;function Wke(){if(_6)return O_;_6=1;var t=Hke();return O_=t,O_}var j_,E6;function Kke(){return E6||(E6=1,j_=Wke()),j_}var Gke=Kke(),N6=nt(Gke),P_={exports:{}},C6={},k6;function Yke(){if(k6)return C6;k6=1;var t=ze(),e=_t(),r=Vs(),n=K0().f,i=Cr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),C6}var T6;function Qke(){if(T6)return P_.exports;T6=1,Yke();var t=Mr(),e=t.Object,r=P_.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),P_.exports}var I_,O6;function Xke(){if(O6)return I_;O6=1;var t=Qke();return I_=t,I_}var R_,j6;function Jke(){return j6||(j6=1,R_=Xke()),R_}var Zke=Jke(),zse=nt(Zke),P6={},I6;function eTe(){if(I6)return P6;I6=1;var t=ze(),e=Cr(),r=dse(),n=Vs(),i=K0(),s=Y0();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),P6}var M_,R6;function tTe(){if(R6)return M_;R6=1,eTe();var t=Mr();return M_=t.Object.getOwnPropertyDescriptors,M_}var $_,M6;function rTe(){if(M6)return $_;M6=1;var t=tTe();return $_=t,$_}var D_,$6;function nTe(){return $6||($6=1,D_=rTe()),D_}var iTe=nTe(),D6=nt(iTe),A_={exports:{}},A6={},F6;function sTe(){if(F6)return A6;F6=1;var t=ze(),e=Cr(),r=i$().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),A6}var q6;function oTe(){if(q6)return A_.exports;q6=1,sTe();var t=Mr(),e=t.Object,r=A_.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),A_.exports}var F_,L6;function aTe(){if(L6)return F_;L6=1;var t=oTe();return F_=t,F_}var q_,B6;function lTe(){return B6||(B6=1,q_=aTe()),q_}var cTe=lTe(),uTe=nt(cTe),L_,z6;function dTe(){return z6||(z6=1,L_=zie()),L_}var hTe=dTe(),fTe=nt(hTe),V6={},U6={},B_={exports:{}},z_,H6;function pTe(){if(H6)return z_;H6=1;var t=_t();return z_=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),z_}var V_,W6;function mTe(){if(W6)return V_;W6=1;var t=_t(),e=Dn(),r=Bo(),n=pTe(),i=Object.isExtensible,s=t(function(){});return V_=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,V_}var U_,K6;function gTe(){if(K6)return U_;K6=1;var t=_t();return U_=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),U_}var G6;function Vse(){if(G6)return B_.exports;G6=1;var t=ze(),e=Tt(),r=fm(),n=Dn(),i=Hr(),s=Vi().f,o=J0(),a=Gie(),l=mTe(),c=W0(),d=gTe(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},b=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},v=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),k=0,C=E.length;k<C;k++)if(E[k]===f){S(E,k,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=B_.exports={enable:v,fastKey:g,getWeakData:b,onFreeze:y};return r[f]=!0,B_.exports}var H_,Y6;function yTe(){if(Y6)return H_;Y6=1;var t=Wr(),e=ph(),r=t("iterator"),n=Array.prototype;return H_=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},H_}var W_,Q6;function Use(){if(Q6)return W_;Q6=1;var t=fl(),e=XM(),r=cm(),n=ph(),i=Wr(),s=i("iterator");return W_=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},W_}var K_,X6;function Hse(){if(X6)return K_;X6=1;var t=ri(),e=zo(),r=Vo(),n=ah(),i=Use(),s=TypeError;return K_=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},K_}var G_,J6;function g$(){if(J6)return G_;J6=1;var t=ri(),e=Vo(),r=XM();return G_=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},G_}var Y_,Z6;function y$(){if(Z6)return Y_;Z6=1;var t=G0(),e=ri(),r=Vo(),n=ah(),i=yTe(),s=hl(),o=Ur(),a=Hse(),l=Use(),c=g$(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return Y_=function(p,m,g){var b=g&&g.that,y=!!(g&&g.AS_ENTRIES),v=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,b),_,N,E,k,C,O,j,P=function(q){return _&&c(_,"normal"),new h(!0,q)},A=function(q){return y?(r(q),x?S(q[0],q[1],P):S(q[0],q[1])):x?S(q,P):S(q)};if(v)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,k=s(p);k>E;E++)if(C=A(p[E]),C&&o(f,C))return C;return new h(!1)}_=a(p,N)}for(O=v?p.next:_.next;!(j=e(O,_)).done;){try{C=A(j.value)}catch(q){c(_,"throw",q)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},Y_}var Q_,e8;function Wse(){if(e8)return Q_;e8=1;var t=Ur(),e=TypeError;return Q_=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},Q_}var X_,t8;function Kse(){if(t8)return X_;t8=1;var t=ze(),e=Nr(),r=Vse(),n=_t(),i=uh(),s=y$(),o=Wse(),a=Vr(),l=Dn(),c=cm(),d=Qc(),h=Vi().f,f=fh().forEach,p=Cr(),m=gm(),g=m.set,b=m.getterFor;return X_=function(y,v,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,k={},C;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))C=w.getConstructor(v,y,x,_),r.enable();else{C=v(function(P,A){g(o(P,O),{type:y,collection:new N}),c(A)||s(A,P[_],{that:P,AS_ENTRIES:x})});var O=C.prototype,j=b(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(P){var A=P==="add"||P==="set";P in E&&!(S&&P==="clear")&&i(O,P,function(q,R){var L=j(this).collection;if(!A&&S&&!l(q))return P==="get"?void 0:!1;var D=L[P](q===0?0:q,R);return A?this:D})}),S||h(O,"size",{configurable:!0,get:function(){return j(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},X_}var J_,r8;function vTe(){if(r8)return J_;r8=1;var t=mm();return J_=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},J_}var Z_,n8;function bTe(){if(n8)return Z_;n8=1;var t=bi(),e=s$(),r=Wr(),n=Cr(),i=r("species");return Z_=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},Z_}var eE,i8;function Gse(){if(i8)return eE;i8=1;var t=pm(),e=s$(),r=vTe(),n=G0(),i=Wse(),s=cm(),o=y$(),a=o$(),l=a$(),c=bTe(),d=Cr(),h=Vse().fastKey,f=gm(),p=f.set,m=f.getterFor;return eE={getConstructor:function(g,b,y,v){var w=g(function(E,k){i(E,x),p(E,{type:b,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(k)||o(k,E[v],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(b),_=function(E,k,C){var O=S(E),j=N(E,k),P,A;return j?j.value=C:(O.last=j={index:A=h(k,!0),key:k,value:C,previous:P=O.last,next:null,removed:!1},O.first||(O.first=j),P&&(P.next=j),d?O.size++:E.size++,A!=="F"&&(O.index[A]=j)),E},N=function(E,k){var C=S(E),O=h(k),j;if(O!=="F")return C.index[O];for(j=C.first;j;j=j.next)if(j.key===k)return j};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(E){var k=this,C=S(k),O=N(k,E);if(O){var j=O.next,P=O.previous;delete C.index[O.index],O.removed=!0,P&&(P.next=j),j&&(j.previous=P),C.first===O&&(C.first=j),C.last===O&&(C.last=P),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),j;j=j?j.next:C.first;)for(O(j.value,j.key,this);j&&j.removed;)j=j.previous},has:function(k){return!!N(this,k)}}),r(x,y?{get:function(k){var C=N(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,b,y){var v=b+" Iterator",w=m(b),x=m(v);a(g,b,function(S,_){p(this,{type:v,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(b)}},eE}var s8;function xTe(){if(s8)return U6;s8=1;var t=Kse(),e=Gse();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),U6}var o8;function wTe(){return o8||(o8=1,xTe()),V6}var a8={},tE,l8;function Yse(){return l8||(l8=1,tE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),tE}var rE,c8;function STe(){if(c8)return rE;c8=1;var t=bi(),e=Yse(),r=t("Map");return rE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},rE}var u8;function _Te(){if(u8)return a8;u8=1;var t=ze(),e=Tt(),r=zo(),n=Gc(),i=y$(),s=STe(),o=lh(),a=_t(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,b){n(g),r(b);var y=new l,v=0;return i(g,function(w){var x=b(w,v++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),a8}var nE,d8;function ETe(){if(d8)return nE;d8=1,ml(),wTe(),_Te(),tb();var t=Mr();return nE=t.Map,nE}var iE,h8;function NTe(){if(h8)return iE;h8=1;var t=ETe();return gl(),iE=t,iE}var sE,f8;function CTe(){return f8||(f8=1,sE=NTe()),sE}var kTe=CTe(),Qse=nt(kTe),p8={},m8;function TTe(){if(m8)return p8;m8=1;var t=ze(),e=fh().some,r=rb(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),p8}var oE,g8;function OTe(){if(g8)return oE;g8=1,TTe();var t=ni();return oE=t("Array","some"),oE}var aE,y8;function jTe(){if(y8)return aE;y8=1;var t=Ur(),e=OTe(),r=Array.prototype;return aE=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},aE}var lE,v8;function PTe(){if(v8)return lE;v8=1;var t=jTe();return lE=t,lE}var cE,b8;function ITe(){return b8||(b8=1,cE=PTe()),cE}var RTe=ITe(),MTe=nt(RTe),uE,x8;function $Te(){if(x8)return uE;x8=1,ml();var t=ni();return uE=t("Array","keys"),uE}var dE,w8;function DTe(){if(w8)return dE;w8=1;var t=$Te();return dE=t,dE}var hE,S8;function ATe(){if(S8)return hE;S8=1,gl();var t=fl(),e=Hr(),r=Ur(),n=DTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return hE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},hE}var fE,_8;function FTe(){return _8||(_8=1,fE=ATe()),fE}var qTe=FTe(),xu=nt(qTe),E8={},pE,N8;function LTe(){if(N8)return pE;N8=1;var t=hh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return pE=r,pE}var mE,C8;function BTe(){if(C8)return mE;C8=1;var t=sh(),e=t.match(/firefox\/(\d+)/i);return mE=!!e&&+e[1],mE}var gE,k8;function zTe(){if(k8)return gE;k8=1;var t=sh();return gE=/MSIE|Trident/.test(t),gE}var yE,T8;function VTe(){if(T8)return yE;T8=1;var t=sh(),e=t.match(/AppleWebKit\/(\d+)\./);return yE=!!e&&+e[1],yE}var O8;function UTe(){if(O8)return E8;O8=1;var t=ze(),e=Tt(),r=zo(),n=gs(),i=hl(),s=hse(),o=pl(),a=_t(),l=LTe(),c=rb(),d=BTe(),h=zTe(),f=um(),p=VTe(),m=[],g=e(m.sort),b=e(m.push),y=a(function(){m.sort(void 0)}),v=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,k,C,O;for(E=65;E<76;E++){switch(k=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(j,P){return P.v-j.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=y||!v||!w||!x,_=function(N){return function(E,k){return k===void 0?-1:E===void 0?1:N!==void 0?+N(E,k)||0:o(E)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var k=n(this);if(x)return E===void 0?g(k):g(k,E);var C=[],O=i(k),j,P;for(P=0;P<O;P++)P in k&&b(C,k[P]);for(l(C,_(E)),j=i(C),P=0;P<j;)k[P]=C[P++];for(;P<O;)s(k,P++);return k}}),E8}var vE,j8;function HTe(){if(j8)return vE;j8=1,UTe();var t=ni();return vE=t("Array","sort"),vE}var bE,P8;function WTe(){if(P8)return bE;P8=1;var t=Ur(),e=HTe(),r=Array.prototype;return bE=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},bE}var xE,I8;function KTe(){if(I8)return xE;I8=1;var t=WTe();return xE=t,xE}var wE,R8;function GTe(){return R8||(R8=1,wE=KTe()),wE}var YTe=GTe(),kI=nt(YTe),SE,M8;function QTe(){if(M8)return SE;M8=1,ml();var t=ni();return SE=t("Array","values"),SE}var _E,$8;function XTe(){if($8)return _E;$8=1;var t=QTe();return _E=t,_E}var EE,D8;function JTe(){if(D8)return EE;D8=1,gl();var t=fl(),e=Hr(),r=Ur(),n=XTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return EE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},EE}var NE,A8;function ZTe(){return A8||(A8=1,NE=JTe()),NE}var e2e=ZTe(),F8=nt(e2e),CE,q8;function t2e(){return q8||(q8=1,CE=lse()),CE}var r2e=t2e(),Uu=nt(r2e),kE,L8;function n2e(){if(L8)return kE;L8=1,ml();var t=ni();return kE=t("Array","entries"),kE}var TE,B8;function i2e(){if(B8)return TE;B8=1;var t=n2e();return TE=t,TE}var OE,z8;function s2e(){if(z8)return OE;z8=1,gl();var t=fl(),e=Hr(),r=Ur(),n=i2e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return OE=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},OE}var jE,V8;function o2e(){return V8||(V8=1,jE=s2e()),jE}var a2e=o2e(),l2e=nt(a2e);const Yr=[];for(let t=0;t<256;++t)Yr.push((t+256).toString(16).slice(1));function c2e(t,e=0){return(Yr[t[e+0]]+Yr[t[e+1]]+Yr[t[e+2]]+Yr[t[e+3]]+"-"+Yr[t[e+4]]+Yr[t[e+5]]+"-"+Yr[t[e+6]]+Yr[t[e+7]]+"-"+Yr[t[e+8]]+Yr[t[e+9]]+"-"+Yr[t[e+10]]+Yr[t[e+11]]+Yr[t[e+12]]+Yr[t[e+13]]+Yr[t[e+14]]+Yr[t[e+15]]).toLowerCase()}let PE;const u2e=new Uint8Array(16);function d2e(){if(!PE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");PE=crypto.getRandomValues.bind(crypto)}return PE(u2e)}const h2e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var U8={randomUUID:h2e};function f2e(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??d2e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,c2e(n)}function p2e(t,e,r){return U8.randomUUID&&!t?U8.randomUUID():f2e(t)}function H8(t){return typeof t=="string"||typeof t=="number"}class v${constructor(e){Wa(this,"_queue",[]),Wa(this,"_timeout",null),Wa(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new v$(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=XCe(()=>{this.flush()},this.delay))}flush(){var e,r;Pc(e=fse(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class Hv{constructor(){Wa(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Wa(this,"subscribe",Hv.prototype.on),Wa(this,"unsubscribe",Hv.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");Pc(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=Bu(n=this._subscribers[e]).call(n,i=>i!==r)}}var W8={},K8={},G8;function m2e(){if(G8)return K8;G8=1;var t=Kse(),e=Gse();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),K8}var Y8;function g2e(){return Y8||(Y8=1,m2e()),W8}var Q8={},IE,X8;function Jc(){if(X8)return IE;X8=1;var t=ah(),e=TypeError;return IE=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},IE}var RE,J8;function Zc(){if(J8)return RE;J8=1;var t=bi(),e=Yse(),r=t("Set"),n=r.prototype;return RE={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},RE}var ME,Z8;function eu(){if(Z8)return ME;Z8=1;var t=ri();return ME=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},ME}var $E,eV;function Sm(){if(eV)return $E;eV=1;var t=eu();return $E=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},$E}var DE,tV;function b$(){if(tV)return DE;tV=1;var t=Zc(),e=Sm(),r=t.Set,n=t.add;return DE=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},DE}var AE,rV;function _m(){return rV||(rV=1,AE=function(t){return t.size}),AE}var FE,nV;function y2e(){return nV||(nV=1,FE=function(t){return{iterator:t,next:t.next,done:!1}}),FE}var qE,iV;function tu(){if(iV)return qE;iV=1;var t=zo(),e=Vo(),r=ri(),n=dh(),i=y2e(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},qE=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},qE}var LE,sV;function v2e(){if(sV)return LE;sV=1;var t=Jc(),e=Zc(),r=b$(),n=_m(),i=tu(),s=Sm(),o=eu(),a=e.has,l=e.remove;return LE=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},LE}var BE,oV;function ru(){return oV||(oV=1,BE=function(){return!1}),BE}var aV;function b2e(){if(aV)return Q8;aV=1;var t=ze(),e=v2e(),r=_t(),n=ru(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),Q8}var lV={},zE,cV;function x2e(){if(cV)return zE;cV=1;var t=Jc(),e=Zc(),r=_m(),n=tu(),i=Sm(),s=eu(),o=e.Set,a=e.add,l=e.has;return zE=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},zE}var uV;function w2e(){if(uV)return lV;uV=1;var t=ze(),e=_t(),r=x2e(),n=ru(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),lV}var dV={},VE,hV;function S2e(){if(hV)return VE;hV=1;var t=Jc(),e=Zc().has,r=_m(),n=tu(),i=Sm(),s=eu(),o=g$();return VE=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},VE}var fV;function _2e(){if(fV)return dV;fV=1;var t=ze(),e=S2e(),r=ru(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),dV}var pV={},UE,mV;function E2e(){if(mV)return UE;mV=1;var t=Jc(),e=_m(),r=Sm(),n=tu();return UE=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},UE}var gV;function N2e(){if(gV)return pV;gV=1;var t=ze(),e=E2e(),r=ru(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),pV}var yV={},HE,vV;function C2e(){if(vV)return HE;vV=1;var t=Jc(),e=Zc().has,r=_m(),n=tu(),i=eu(),s=g$();return HE=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},HE}var bV;function k2e(){if(bV)return yV;bV=1;var t=ze(),e=C2e(),r=ru(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),yV}var xV={},WE,wV;function T2e(){if(wV)return WE;wV=1;var t=Jc(),e=Zc(),r=b$(),n=tu(),i=eu(),s=e.add,o=e.has,a=e.remove;return WE=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},WE}var KE,SV;function Xse(){return SV||(SV=1,KE=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),KE}var _V;function O2e(){if(_V)return xV;_V=1;var t=ze(),e=T2e(),r=Xse(),n=ru(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),xV}var EV={},GE,NV;function j2e(){if(NV)return GE;NV=1;var t=Jc(),e=Zc().add,r=b$(),n=tu(),i=eu();return GE=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},GE}var CV;function P2e(){if(CV)return EV;CV=1;var t=ze(),e=j2e(),r=Xse(),n=ru(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),EV}var YE,kV;function I2e(){if(kV)return YE;kV=1,ml(),g2e(),b2e(),w2e(),_2e(),N2e(),k2e(),O2e(),P2e(),tb();var t=Mr();return YE=t.Set,YE}var QE,TV;function R2e(){if(TV)return QE;TV=1;var t=I2e();return gl(),QE=t,QE}var XE,OV;function M2e(){return OV||(OV=1,XE=R2e()),XE}var $2e=M2e(),JE=nt($2e),ZE,jV;function D2e(){if(jV)return ZE;jV=1,ml(),tb();var t=Hse();return ZE=t,ZE}var eN,PV;function A2e(){if(PV)return eN;PV=1;var t=D2e();return gl(),eN=t,eN}var tN,IV;function F2e(){if(IV)return tN;IV=1;var t=A2e();return tN=t,tN}var rN,RV;function q2e(){if(RV)return rN;RV=1;var t=F2e();return rN=t,rN}var nN,MV;function L2e(){return MV||(MV=1,nN=q2e()),nN}var iN,$V;function B2e(){return $V||($V=1,iN=L2e()),iN}var z2e=B2e(),sN=nt(z2e);class Ll{constructor(e){this._pairs=e}*[Uu](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return ns(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return ns(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=MCe(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new Qse(this._pairs)}toIdSet(){return new JE(this.toIdArray())}toItemSet(){return new JE(this.toItemArray())}cache(){return new Ll([...this._pairs])}distinct(e){const r=new JE;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new Ll({*[Uu](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new Ll({*[Uu](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=sN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=sN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new Ll({[Uu]:()=>{var r;return sN(kI(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function DV(t,e){var r=l$(t);if(N6){var n=N6(t);e&&(n=Bu(n).call(n,function(i){return zse(t,i).enumerable})),r.push.apply(r,n)}return r}function AV(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Pc(r=DV(Object(i),!0)).call(r,function(s){Wa(t,s,i[s])}):D6?uTe(t,D6(i)):Pc(n=DV(Object(i))).call(n,function(s){fTe(t,s,zse(i,s))})}return t}function V2e(t,e){return t[e]==null&&(t[e]=p2e()),t}class Ud extends Hv{get idProp(){return this._idProp}constructor(e,r){super(),Wa(this,"_queue",null),e&&!Ns(e)&&(r=e,e=[]),this._options=r||{},this._data=new Qse,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=v$.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(Ns(e)){const s=ns(e).call(e,o=>o[this._idProp]);if(MTe(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=c=>{const d=c[a];if(d!=null&&this._data.has(d)){const h=c,f=SCe({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(c);n.push(h)}};if(Ns(e))for(let c=0,d=e.length;c<d;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const c={items:i,oldData:s,data:o};this._trigger("update",c,r)}return TCe(n).call(n,i)}updateOnly(e,r){var n;Ns(e)||(e=[e]);const i=ns(n=ns(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=Bke(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(i.length){const s={items:ns(i).call(i,o=>o.id),oldData:ns(i).call(i,o=>o.oldData),data:ns(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;H8(e)?(n=e,s=r):Ns(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&Bu(s),l=[];let c,d,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)c=this._data.get(i[p]),c!=null&&(!a||a(c))&&l.push(c);else{var f;d=[...xu(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const b=l[m],y=b[this._idProp];p[y]=b}return p}else return n!=null?c??null:l}getIds(e){const r=this._data,n=e&&Bu(e),i=e&&e.order,s=[...xu(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=this._data.get(c);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=r.get(c);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&Bu(r),i=this._data,s=[...xu(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const c=o[a],d=c[this._idProp];e(c,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,r){const n=r&&Bu(r),i=[],s=this._data,o=[...xu(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],d=this._data.get(c);d!=null&&(!n||n(d))&&i.push(e(d,c))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&uNe(n=Ns(r)?r:l$(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;kI(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")kI(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=Ns(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(H8(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...xu(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of F8(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of F8(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[...xu(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=V2e(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+VCe(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,AV(AV({},n),e)),r}stream(e){if(e){const n=this._data;return new Ll({*[Uu](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new Ll({[Uu]:cse(r=l2e(this._data)).call(r,this._data)})}}}function U2e(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof Pc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ns(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function Jse(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof Pc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ns(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&U2e(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var FV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Be(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qV={},tf,LV;function zt(){if(LV)return tf;LV=1;var t=function(e){return e&&e.Math===Math&&e};return tf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof FV=="object"&&FV)||t(typeof tf=="object"&&tf)||function(){return this}()||Function("return this")(),tf}var oN,BV;function it(){return BV||(BV=1,oN=function(t){try{return!!t()}catch{return!0}}),oN}var aN,zV;function Em(){if(zV)return aN;zV=1;var t=it();return aN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),aN}var lN,VV;function sb(){if(VV)return lN;VV=1;var t=Em(),e=Function.prototype,r=e.apply,n=e.call;return lN=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),lN}var cN,UV;function at(){if(UV)return cN;UV=1;var t=Em(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return cN=t?n:function(i){return function(){return r.apply(i,arguments)}},cN}var uN,HV;function Us(){if(HV)return uN;HV=1;var t=at(),e=t({}.toString),r=t("".slice);return uN=function(n){return r(e(n),8,-1)},uN}var dN,WV;function x$(){if(WV)return dN;WV=1;var t=Us(),e=at();return dN=function(r){if(t(r)==="Function")return e(r)},dN}var hN,KV;function Kr(){if(KV)return hN;KV=1;var t=typeof document=="object"&&document.all;return hN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},hN}var fN={},pN,GV;function mr(){if(GV)return pN;GV=1;var t=it();return pN=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),pN}var mN,YV;function ii(){if(YV)return mN;YV=1;var t=Em(),e=Function.prototype.call;return mN=t?e.bind(e):function(){return e.apply(e,arguments)},mN}var gN={},QV;function ob(){if(QV)return gN;QV=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return gN.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,gN}var yN,XV;function Nm(){return XV||(XV=1,yN=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),yN}var vN,JV;function ab(){if(JV)return vN;JV=1;var t=at(),e=it(),r=Us(),n=Object,i=t("".split);return vN=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,vN}var bN,ZV;function gh(){return ZV||(ZV=1,bN=function(t){return t==null}),bN}var xN,eU;function Uo(){if(eU)return xN;eU=1;var t=gh(),e=TypeError;return xN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},xN}var wN,tU;function ys(){if(tU)return wN;tU=1;var t=ab(),e=Uo();return wN=function(r){return t(e(r))},wN}var SN,rU;function Gr(){if(rU)return SN;rU=1;var t=Kr();return SN=function(e){return typeof e=="object"?e!==null:t(e)},SN}var _N,nU;function Et(){return nU||(nU=1,_N={}),_N}var EN,iU;function xi(){if(iU)return EN;iU=1;var t=Et(),e=zt(),r=Kr(),n=function(i){return r(i)?i:void 0};return EN=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},EN}var NN,sU;function kr(){if(sU)return NN;sU=1;var t=at();return NN=t({}.isPrototypeOf),NN}var CN,oU;function yh(){if(oU)return CN;oU=1;var t=zt(),e=t.navigator,r=e&&e.userAgent;return CN=r?String(r):"",CN}var kN,aU;function Cm(){if(aU)return kN;aU=1;var t=zt(),e=yh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),kN=a,kN}var TN,lU;function vh(){if(lU)return TN;lU=1;var t=Cm(),e=it(),r=zt(),n=r.String;return TN=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),TN}var ON,cU;function Zse(){if(cU)return ON;cU=1;var t=vh();return ON=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ON}var jN,uU;function km(){if(uU)return jN;uU=1;var t=xi(),e=Kr(),r=kr(),n=Zse(),i=Object;return jN=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},jN}var PN,dU;function bh(){if(dU)return PN;dU=1;var t=String;return PN=function(e){try{return t(e)}catch{return"Object"}},PN}var IN,hU;function Ho(){if(hU)return IN;hU=1;var t=Kr(),e=bh(),r=TypeError;return IN=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},IN}var RN,fU;function w$(){if(fU)return RN;fU=1;var t=Ho(),e=gh();return RN=function(r,n){var i=r[n];return e(i)?void 0:t(i)},RN}var MN,pU;function H2e(){if(pU)return MN;pU=1;var t=ii(),e=Kr(),r=Gr(),n=TypeError;return MN=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},MN}var $N={exports:{}},DN,mU;function xh(){return mU||(mU=1,DN=!0),DN}var AN,gU;function W2e(){if(gU)return AN;gU=1;var t=zt(),e=Object.defineProperty;return AN=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},AN}var yU;function S$(){if(yU)return $N.exports;yU=1;var t=xh(),e=zt(),r=W2e(),n="__core-js_shared__",i=$N.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),$N.exports}var FN,vU;function wh(){if(vU)return FN;vU=1;var t=S$();return FN=function(e,r){return t[e]||(t[e]=r||{})},FN}var qN,bU;function wi(){if(bU)return qN;bU=1;var t=Uo(),e=Object;return qN=function(r){return e(t(r))},qN}var LN,xU;function sn(){if(xU)return LN;xU=1;var t=at(),e=wi(),r=t({}.hasOwnProperty);return LN=Object.hasOwn||function(i,s){return r(e(i),s)},LN}var BN,wU;function lb(){if(wU)return BN;wU=1;var t=at(),e=0,r=Math.random(),n=t(1.1.toString);return BN=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},BN}var zN,SU;function Tr(){if(SU)return zN;SU=1;var t=zt(),e=wh(),r=sn(),n=lb(),i=vh(),s=Zse(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return zN=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},zN}var VN,_U;function eoe(){if(_U)return VN;_U=1;var t=ii(),e=Gr(),r=km(),n=w$(),i=H2e(),s=Tr(),o=TypeError,a=s("toPrimitive");return VN=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},VN}var UN,EU;function _$(){if(EU)return UN;EU=1;var t=eoe(),e=km();return UN=function(r){var n=t(r,"string");return e(n)?n:n+""},UN}var HN,NU;function toe(){if(NU)return HN;NU=1;var t=zt(),e=Gr(),r=t.document,n=e(r)&&e(r.createElement);return HN=function(i){return n?r.createElement(i):{}},HN}var WN,CU;function roe(){if(CU)return WN;CU=1;var t=mr(),e=it(),r=toe();return WN=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),WN}var kU;function cb(){if(kU)return fN;kU=1;var t=mr(),e=ii(),r=ob(),n=Nm(),i=ys(),s=_$(),o=sn(),a=roe(),l=Object.getOwnPropertyDescriptor;return fN.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},fN}var KN,TU;function K2e(){if(TU)return KN;TU=1;var t=it(),e=Kr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return KN=n,KN}var GN,OU;function ub(){if(OU)return GN;OU=1;var t=x$(),e=Ho(),r=Em(),n=t(t.bind);return GN=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},GN}var YN={},QN,jU;function noe(){if(jU)return QN;jU=1;var t=mr(),e=it();return QN=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),QN}var XN,PU;function Hs(){if(PU)return XN;PU=1;var t=Gr(),e=String,r=TypeError;return XN=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},XN}var IU;function Hi(){if(IU)return YN;IU=1;var t=mr(),e=roe(),r=noe(),n=Hs(),i=_$(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return YN.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},YN}var JN,RU;function Sh(){if(RU)return JN;RU=1;var t=mr(),e=Hi(),r=Nm();return JN=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},JN}var ZN,MU;function Pe(){if(MU)return ZN;MU=1;var t=zt(),e=sb(),r=x$(),n=Kr(),i=cb().f,s=K2e(),o=Et(),a=ub(),l=Sh(),c=sn(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return ZN=function(h,f){var p=h.target,m=h.global,g=h.stat,b=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,v=m?o:o[p]||l(o,p,{})[p],w=v.prototype,x,S,_,N,E,k,C,O,j;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),k=v[N],S&&(h.dontCallGetSet?(j=i(y,N),C=j&&j.value):C=y[N]),E=S&&C?C:f[N],!(!x&&!b&&typeof k==typeof E)&&(h.bind&&S?O=a(E,t):h.wrap&&S?O=d(E):b&&n(E)?O=r(E):O=E,(h.sham||E&&E.sham||k&&k.sham)&&l(O,"sham",!0),l(v,N,O),b&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},ZN}var eC,$U;function G2e(){if($U)return eC;$U=1;var t=Math.ceil,e=Math.floor;return eC=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},eC}var tC,DU;function _h(){if(DU)return tC;DU=1;var t=G2e();return tC=function(e){var r=+e;return r!==r||r===0?0:t(r)},tC}var rC,AU;function db(){if(AU)return rC;AU=1;var t=_h(),e=Math.max,r=Math.min;return rC=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},rC}var nC,FU;function ioe(){if(FU)return nC;FU=1;var t=_h(),e=Math.min;return nC=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},nC}var iC,qU;function Wo(){if(qU)return iC;qU=1;var t=ioe();return iC=function(e){return t(e.length)},iC}var sC,LU;function E$(){if(LU)return sC;LU=1;var t=ys(),e=db(),r=Wo(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return sC={includes:n(!0),indexOf:n(!1)},sC}var oC,BU;function Tm(){return BU||(BU=1,oC={}),oC}var aC,zU;function soe(){if(zU)return aC;zU=1;var t=at(),e=sn(),r=ys(),n=E$().indexOf,i=Tm(),s=t([].push);return aC=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},aC}var lC,VU;function N$(){return VU||(VU=1,lC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),lC}var cC,UU;function Om(){if(UU)return cC;UU=1;var t=soe(),e=N$();return cC=Object.keys||function(n){return t(n,e)},cC}var uC={},HU;function hb(){return HU||(HU=1,uC.f=Object.getOwnPropertySymbols),uC}var dC,WU;function Y2e(){if(WU)return dC;WU=1;var t=mr(),e=at(),r=ii(),n=it(),i=Om(),s=hb(),o=ob(),a=wi(),l=ab(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return dC=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(b){p[b]=b}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),b=arguments.length,y=1,v=s.f,w=o.f;b>y;)for(var x=l(arguments[y++]),S=v?h(i(x),v(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,dC}var KU;function Q2e(){if(KU)return qV;KU=1;var t=Pe(),e=Y2e();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),qV}var hC,GU;function X2e(){if(GU)return hC;GU=1,Q2e();var t=Et();return hC=t.Object.assign,hC}var fC,YU;function J2e(){if(YU)return fC;YU=1;var t=X2e();return fC=t,fC}var pC,QU;function Z2e(){return QU||(QU=1,pC=J2e()),pC}var eOe=Z2e(),wr=Be(eOe),XU={},mC,JU;function Eh(){if(JU)return mC;JU=1;var t=at();return mC=t([].slice),mC}var gC,ZU;function tOe(){if(ZU)return gC;ZU=1;var t=at(),e=Ho(),r=Gr(),n=sn(),i=Eh(),s=Em(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return gC=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),b=function(){var v=a(g,i(arguments));return this instanceof b?d(p,v.length,v):p.apply(f,v)};return r(m)&&(b.prototype=m),b},gC}var eH;function rOe(){if(eH)return XU;eH=1;var t=Pe(),e=tOe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),XU}var yC,tH;function on(){if(tH)return yC;tH=1;var t=zt(),e=Et();return yC=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},yC}var vC,rH;function nOe(){if(rH)return vC;rH=1,rOe();var t=on();return vC=t("Function","bind"),vC}var bC,nH;function iOe(){if(nH)return bC;nH=1;var t=kr(),e=nOe(),r=Function.prototype;return bC=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},bC}var xC,iH;function sOe(){if(iH)return xC;iH=1;var t=iOe();return xC=t,xC}var wC,sH;function oOe(){return sH||(sH=1,wC=sOe()),wC}var aOe=oOe(),ne=Be(aOe);function C$(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function lOe(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function cOe(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function uOe(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function dOe(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function hOe(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function ooe(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function TI(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,c=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,c,d,c),t.bezierCurveTo(d-o,c,e,h+a,e,h),t.closePath()}function aoe(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,c=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),b=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+c,f,p,f),t.bezierCurveTo(p-c,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-c,r,p,r),t.bezierCurveTo(p+c,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+c,b,p,b),t.bezierCurveTo(p-c,b,e,g+d,e,g),t.lineTo(e,m)}function loe(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,c=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+c*c)),p=a<0?-p:p,e+=p,r+=c*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function fOe(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const oH={circle:C$,dashedLine:loe,database:aoe,diamond:hOe,ellipse:TI,ellipse_vis:TI,hexagon:fOe,roundRect:ooe,square:lOe,star:dOe,triangle:cOe,triangleDown:uOe};function pOe(t){return Object.prototype.hasOwnProperty.call(oH,t)?oH[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var SC={exports:{}},aH;function mOe(){return aH||(aH=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(SC)),SC.exports}var gOe=mOe(),coe=Be(gOe),lH={},_C,cH;function nu(){if(cH)return _C;cH=1;var t=Us();return _C=Array.isArray||function(r){return t(r)==="Array"},_C}var EC,uH;function uoe(){if(uH)return EC;uH=1;var t=TypeError,e=9007199254740991;return EC=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},EC}var NC,dH;function fb(){if(dH)return NC;dH=1;var t=mr(),e=Hi(),r=Nm();return NC=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},NC}var CC,hH;function k$(){if(hH)return CC;hH=1;var t=Tr(),e=t("toStringTag"),r={};return r[e]="z",CC=String(r)==="[object z]",CC}var kC,fH;function Nh(){if(fH)return kC;fH=1;var t=k$(),e=Kr(),r=Us(),n=Tr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return kC=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},kC}var TC,pH;function yOe(){if(pH)return TC;pH=1;var t=at(),e=Kr(),r=S$(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),TC=r.inspectSource,TC}var OC,mH;function doe(){if(mH)return OC;mH=1;var t=at(),e=it(),r=Kr(),n=Nh(),i=xi(),s=yOe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,OC=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,OC}var jC,gH;function vOe(){if(gH)return jC;gH=1;var t=nu(),e=doe(),r=Gr(),n=Tr(),i=n("species"),s=Array;return jC=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},jC}var PC,yH;function T$(){if(yH)return PC;yH=1;var t=vOe();return PC=function(e,r){return new(t(e))(r===0?0:r)},PC}var IC,vH;function jm(){if(vH)return IC;vH=1;var t=it(),e=Tr(),r=Cm(),n=e("species");return IC=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},IC}var bH;function hoe(){if(bH)return lH;bH=1;var t=Pe(),e=it(),r=nu(),n=Gr(),i=wi(),s=Wo(),o=uoe(),a=fb(),l=T$(),c=jm(),d=Tr(),h=Cm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var b=[];return b[f]=!1,b.concat()[0]!==b}),m=function(b){if(!n(b))return!1;var y=b[f];return y!==void 0?!!y:r(b)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var v=i(this),w=l(v,0),x=0,S,_,N,E,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?v:arguments[S],m(k))for(E=s(k),o(x+E),_=0;_<E;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),lH}var xH={},wH={},RC,SH;function Wi(){if(SH)return RC;SH=1;var t=Nh(),e=String;return RC=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},RC}var MC={},_H;function O$(){if(_H)return MC;_H=1;var t=mr(),e=noe(),r=Hi(),n=Hs(),i=ys(),s=Om();return MC.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},MC}var $C,EH;function bOe(){if(EH)return $C;EH=1;var t=xi();return $C=t("document","documentElement"),$C}var DC,NH;function pb(){if(NH)return DC;NH=1;var t=wh(),e=lb(),r=t("keys");return DC=function(n){return r[n]||(r[n]=e(n))},DC}var AC,CH;function Pm(){if(CH)return AC;CH=1;var t=Hs(),e=O$(),r=N$(),n=Tm(),i=bOe(),s=toe(),o=pb(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(v){return l+d+a+v+l+"/"+d+a},m=function(v){v.write(p("")),v.close();var w=v.parentWindow.Object;return v=null,w},g=function(){var v=s("iframe"),w="java"+d+":",x;return v.style.display="none",i.appendChild(v),v.src=String(w),x=v.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},b,y=function(){try{b=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&b?m(b):g():m(b);for(var v=r.length;v--;)delete y[c][r[v]];return y()};return n[h]=!0,AC=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},AC}var FC={},kH;function mb(){if(kH)return FC;kH=1;var t=soe(),e=N$(),r=e.concat("length","prototype");return FC.f=Object.getOwnPropertyNames||function(i){return t(i,r)},FC}var qC={},TH;function j$(){if(TH)return qC;TH=1;var t=Us(),e=ys(),r=mb().f,n=Eh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return qC.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},qC}var LC,OH;function Im(){if(OH)return LC;OH=1;var t=Sh();return LC=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},LC}var BC,jH;function P$(){if(jH)return BC;jH=1;var t=Hi();return BC=function(e,r,n){return t.f(e,r,n)},BC}var zC={},PH;function gb(){if(PH)return zC;PH=1;var t=Tr();return zC.f=t,zC}var VC,IH;function Xt(){if(IH)return VC;IH=1;var t=Et(),e=sn(),r=gb(),n=Hi().f;return VC=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},VC}var UC,RH;function foe(){if(RH)return UC;RH=1;var t=ii(),e=xi(),r=Tr(),n=Im();return UC=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},UC}var HC,MH;function xOe(){if(MH)return HC;MH=1;var t=k$(),e=Nh();return HC=t?{}.toString:function(){return"[object "+e(this)+"]"},HC}var WC,$H;function iu(){if($H)return WC;$H=1;var t=k$(),e=Hi().f,r=Sh(),n=sn(),i=xOe(),s=Tr(),o=s("toStringTag");return WC=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},WC}var KC,DH;function poe(){if(DH)return KC;DH=1;var t=zt(),e=Kr(),r=t.WeakMap;return KC=e(r)&&/native code/.test(String(r)),KC}var GC,AH;function su(){if(AH)return GC;AH=1;var t=poe(),e=zt(),r=Gr(),n=Sh(),i=sn(),s=S$(),o=pb(),a=Tm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(v){return p(v)?f(v):h(v,{})},g=function(v){return function(w){var x;if(!r(w)||(x=f(w)).type!==v)throw new c("Incompatible receiver, "+v+" required");return x}};if(t||s.state){var b=s.state||(s.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,h=function(v,w){if(b.has(v))throw new c(l);return w.facade=v,b.set(v,w),w},f=function(v){return b.get(v)||{}},p=function(v){return b.has(v)}}else{var y=o("state");a[y]=!0,h=function(v,w){if(i(v,y))throw new c(l);return w.facade=v,n(v,y,w),w},f=function(v){return i(v,y)?v[y]:{}},p=function(v){return i(v,y)}}return GC={set:h,get:f,has:p,enforce:m,getterFor:g},GC}var YC,FH;function yl(){if(FH)return YC;FH=1;var t=ub(),e=at(),r=ab(),n=wi(),i=Wo(),s=T$(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(b,y,v,w){for(var x=n(b),S=r(x),_=i(S),N=t(y,v),E=0,k=w||s,C=c?k(b,_):d||m?k(b,0):void 0,O,j;_>E;E++)if((g||E in S)&&(O=S[E],j=N(O,E,x),l))if(c)C[E]=j;else if(j)switch(l){case 3:return!0;case 5:return O;case 6:return E;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return YC={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},YC}var qH;function wOe(){if(qH)return wH;qH=1;var t=Pe(),e=zt(),r=ii(),n=at(),i=xh(),s=mr(),o=vh(),a=it(),l=sn(),c=kr(),d=Hs(),h=ys(),f=_$(),p=Wi(),m=Nm(),g=Pm(),b=Om(),y=mb(),v=j$(),w=hb(),x=cb(),S=Hi(),_=O$(),N=ob(),E=Im(),k=P$(),C=wh(),O=pb(),j=Tm(),P=lb(),A=Tr(),q=gb(),R=Xt(),L=foe(),D=iu(),W=su(),z=yl().forEach,U=O("hidden"),K="Symbol",fe="prototype",we=W.set,Fe=W.getterFor(K),xe=Object[fe],Re=e.Symbol,Ve=Re&&Re[fe],ct=e.RangeError,Jt=e.TypeError,ft=e.QObject,X=x.f,Se=S.f,He=v.f,tt=N.f,Vt=n([].push),ke=C("symbols"),Ye=C("op-symbols"),$t=C("wks"),Nt=!ft||!ft[fe]||!ft[fe].findChild,M=function(_e,ie,he){var de=X(xe,ie);de&&delete xe[ie],Se(_e,ie,he),de&&_e!==xe&&Se(xe,ie,de)},F=s&&a(function(){return g(Se({},"a",{get:function(){return Se(this,"a",{value:7}).a}})).a!==7})?M:Se,V=function(_e,ie){var he=ke[_e]=g(Ve);return we(he,{type:K,tag:_e,description:ie}),s||(he.description=ie),he},oe=function(ie,he,de){ie===xe&&oe(Ye,he,de),d(ie);var Ce=f(he);return d(de),l(ke,Ce)?(de.enumerable?(l(ie,U)&&ie[U][Ce]&&(ie[U][Ce]=!1),de=g(de,{enumerable:m(0,!1)})):(l(ie,U)||Se(ie,U,m(1,g(null))),ie[U][Ce]=!0),F(ie,Ce,de)):Se(ie,Ce,de)},Z=function(ie,he){d(ie);var de=h(he),Ce=b(de).concat(Zt(de));return z(Ce,function(st){(!s||r(ye,de,st))&&oe(ie,st,de[st])}),ie},J=function(ie,he){return he===void 0?g(ie):Z(g(ie),he)},ye=function(ie){var he=f(ie),de=r(tt,this,he);return this===xe&&l(ke,he)&&!l(Ye,he)?!1:de||!l(this,he)||!l(ke,he)||l(this,U)&&this[U][he]?de:!0},Qe=function(ie,he){var de=h(ie),Ce=f(he);if(!(de===xe&&l(ke,Ce)&&!l(Ye,Ce))){var st=X(de,Ce);return st&&l(ke,Ce)&&!(l(de,U)&&de[U][Ce])&&(st.enumerable=!0),st}},Ze=function(ie){var he=He(h(ie)),de=[];return z(he,function(Ce){!l(ke,Ce)&&!l(j,Ce)&&Vt(de,Ce)}),de},Zt=function(_e){var ie=_e===xe,he=He(ie?Ye:h(_e)),de=[];return z(he,function(Ce){l(ke,Ce)&&(!ie||l(xe,Ce))&&Vt(de,ke[Ce])}),de};return o||(Re=function(){if(c(Ve,this))throw new Jt("Symbol is not a constructor");var ie=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),he=P(ie),de=function(Ce){var st=this===void 0?e:this;st===xe&&r(de,Ye,Ce),l(st,U)&&l(st[U],he)&&(st[U][he]=!1);var Si=m(1,Ce);try{F(st,he,Si)}catch(Gi){if(!(Gi instanceof ct))throw Gi;M(st,he,Si)}};return s&&Nt&&F(xe,he,{configurable:!0,set:de}),V(he,ie)},Ve=Re[fe],E(Ve,"toString",function(){return Fe(this).tag}),E(Re,"withoutSetter",function(_e){return V(P(_e),_e)}),N.f=ye,S.f=oe,_.f=Z,x.f=Qe,y.f=v.f=Ze,w.f=Zt,q.f=function(_e){return V(A(_e),_e)},s&&(k(Ve,"description",{configurable:!0,get:function(){return Fe(this).description}}),i||E(xe,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Re}),z(b($t),function(_e){R(_e)}),t({target:K,stat:!0,forced:!o},{useSetter:function(){Nt=!0},useSimple:function(){Nt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:J,defineProperty:oe,defineProperties:Z,getOwnPropertyDescriptor:Qe}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ze}),L(),D(Re,K),j[U]=!0,wH}var LH={},QC,BH;function moe(){if(BH)return QC;BH=1;var t=vh();return QC=t&&!!Symbol.for&&!!Symbol.keyFor,QC}var zH;function SOe(){if(zH)return LH;zH=1;var t=Pe(),e=xi(),r=sn(),n=Wi(),i=wh(),s=moe(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),LH}var VH={},UH;function _Oe(){if(UH)return VH;UH=1;var t=Pe(),e=sn(),r=km(),n=bh(),i=wh(),s=moe(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),VH}var HH={},XC,WH;function EOe(){if(WH)return XC;WH=1;var t=at(),e=nu(),r=Kr(),n=Us(),i=Wi(),s=t([].push);return XC=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},XC}var KH;function goe(){if(KH)return HH;KH=1;var t=Pe(),e=xi(),r=sb(),n=ii(),i=at(),s=it(),o=Kr(),a=km(),l=Eh(),c=EOe(),d=vh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),b=i("".replace),y=i(1.1.toString),v=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,C){var O=l(arguments),j=c(C);if(!(!o(j)&&(k===void 0||a(k))))return O[1]=function(P,A){if(o(j)&&(A=n(j,this,h(P),A)),!a(A))return A},r(f,null,O)},E=function(k,C,O){var j=m(O,C-1),P=m(O,C+1);return p(w,k)&&!p(x,P)||p(x,k)&&!p(w,j)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,j){var P=l(arguments),A=r(S?N:f,null,P);return _&&typeof A=="string"?b(A,v,E):A}}),HH}var GH={},YH;function NOe(){if(YH)return GH;YH=1;var t=Pe(),e=vh(),r=it(),n=hb(),i=wi(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),GH}var QH;function yoe(){return QH||(QH=1,wOe(),SOe(),_Oe(),goe(),NOe()),xH}var XH={},JH;function voe(){if(JH)return XH;JH=1;var t=Xt();return t("asyncDispose"),XH}var ZH={},eW;function COe(){if(eW)return ZH;eW=1;var t=Xt();return t("asyncIterator"),ZH}var tW={},rW;function boe(){if(rW)return tW;rW=1;var t=Xt();return t("dispose"),tW}var nW={},iW;function kOe(){if(iW)return nW;iW=1;var t=Xt();return t("hasInstance"),nW}var sW={},oW;function TOe(){if(oW)return sW;oW=1;var t=Xt();return t("isConcatSpreadable"),sW}var aW={},lW;function xoe(){if(lW)return aW;lW=1;var t=Xt();return t("iterator"),aW}var cW={},uW;function OOe(){if(uW)return cW;uW=1;var t=Xt();return t("match"),cW}var dW={},hW;function jOe(){if(hW)return dW;hW=1;var t=Xt();return t("matchAll"),dW}var fW={},pW;function POe(){if(pW)return fW;pW=1;var t=Xt();return t("replace"),fW}var mW={},gW;function IOe(){if(gW)return mW;gW=1;var t=Xt();return t("search"),mW}var yW={},vW;function ROe(){if(vW)return yW;vW=1;var t=Xt();return t("species"),yW}var bW={},xW;function MOe(){if(xW)return bW;xW=1;var t=Xt();return t("split"),bW}var wW={},SW;function woe(){if(SW)return wW;SW=1;var t=Xt(),e=foe();return t("toPrimitive"),e(),wW}var _W={},EW;function $Oe(){if(EW)return _W;EW=1;var t=xi(),e=Xt(),r=iu();return e("toStringTag"),r(t("Symbol"),"Symbol"),_W}var NW={},CW;function DOe(){if(CW)return NW;CW=1;var t=Xt();return t("unscopables"),NW}var kW={},TW;function AOe(){if(TW)return kW;TW=1;var t=zt(),e=iu();return e(t.JSON,"JSON",!0),kW}var JC,OW;function FOe(){if(OW)return JC;OW=1,hoe(),yoe(),voe(),COe(),boe(),kOe(),TOe(),xoe(),OOe(),jOe(),POe(),IOe(),ROe(),MOe(),woe(),$Oe(),DOe(),AOe();var t=Et();return JC=t.Symbol,JC}var jW={},ZC,PW;function I$(){return PW||(PW=1,ZC=function(){}),ZC}var ek,IW;function Ch(){return IW||(IW=1,ek={}),ek}var tk,RW;function qOe(){if(RW)return tk;RW=1;var t=mr(),e=sn(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return tk={EXISTS:i,PROPER:s,CONFIGURABLE:o},tk}var rk,MW;function Soe(){if(MW)return rk;MW=1;var t=it();return rk=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),rk}var nk,$W;function yb(){if($W)return nk;$W=1;var t=sn(),e=Kr(),r=wi(),n=pb(),i=Soe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return nk=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},nk}var ik,DW;function _oe(){if(DW)return ik;DW=1;var t=it(),e=Kr(),r=Gr(),n=Pm(),i=yb(),s=Im(),o=Tr(),a=xh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),ik={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},ik}var sk,AW;function LOe(){if(AW)return sk;AW=1;var t=_oe().IteratorPrototype,e=Pm(),r=Nm(),n=iu(),i=Ch(),s=function(){return this};return sk=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},sk}var ok,FW;function BOe(){if(FW)return ok;FW=1;var t=at(),e=Ho();return ok=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},ok}var ak,qW;function zOe(){if(qW)return ak;qW=1;var t=Gr();return ak=function(e){return t(e)||e===null},ak}var lk,LW;function VOe(){if(LW)return lk;LW=1;var t=zOe(),e=String,r=TypeError;return lk=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},lk}var ck,BW;function UOe(){if(BW)return ck;BW=1;var t=BOe(),e=Gr(),r=Uo(),n=VOe();return ck=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),ck}var uk,zW;function R$(){if(zW)return uk;zW=1;var t=Pe(),e=ii(),r=xh(),n=qOe(),i=Kr(),s=LOe(),o=yb(),a=UOe(),l=iu(),c=Sh(),d=Im(),h=Tr(),f=Ch(),p=_oe(),m=n.PROPER,g=n.CONFIGURABLE,b=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,v=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return uk=function(N,E,k,C,O,j,P){s(k,E,C);var A=function(we){if(we===O&&W)return W;if(!y&&we&&we in L)return L[we];switch(we){case w:return function(){return new k(this,we)};case x:return function(){return new k(this,we)};case S:return function(){return new k(this,we)}}return function(){return new k(this)}},q=E+" Iterator",R=!1,L=N.prototype,D=L[v]||L["@@iterator"]||O&&L[O],W=!y&&D||A(O),z=E==="Array"&&L.entries||D,U,K,fe;if(z&&(U=o(z.call(new N)),U!==Object.prototype&&U.next&&(!r&&o(U)!==b&&(a?a(U,b):i(U[v])||d(U,v,_)),l(U,q,!0,!0),r&&(f[q]=_))),m&&O===x&&D&&D.name!==x&&(!r&&g?c(L,"name",x):(R=!0,W=function(){return e(D,this)})),O)if(K={values:A(x),keys:j?W:A(w),entries:A(S)},P)for(fe in K)(y||R||!(fe in L))&&d(L,fe,K[fe]);else t({target:E,proto:!0,forced:y||R},K);return(!r||P)&&L[v]!==W&&d(L,v,W,{name:O}),f[E]=W,K},uk}var dk,VW;function M$(){return VW||(VW=1,dk=function(t,e){return{value:t,done:e}}),dk}var hk,UW;function kh(){if(UW)return hk;UW=1;var t=ys(),e=I$(),r=Ch(),n=su(),i=Hi().f,s=R$(),o=M$(),a=xh(),l=mr(),c="Array Iterator",d=n.set,h=n.getterFor(c);hk=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return hk}var fk,HW;function HOe(){return HW||(HW=1,fk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),fk}var WW;function Th(){if(WW)return jW;WW=1,kh();var t=HOe(),e=zt(),r=iu(),n=Ch();for(var i in t)r(e[i],i),n[i]=n.Array;return jW}var pk,KW;function Eoe(){if(KW)return pk;KW=1;var t=FOe();return Th(),pk=t,pk}var mk,GW;function WOe(){return GW||(GW=1,mk=Eoe()),mk}var KOe=WOe(),GOe=Be(KOe),YW={},QW;function YOe(){if(QW)return YW;QW=1;var t=Pe(),e=nu(),r=doe(),n=Gr(),i=db(),s=Wo(),o=ys(),a=fb(),l=Tr(),c=jm(),d=Eh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(b,y){var v=o(this),w=s(v),x=i(b,w),S=i(y===void 0?w:y,w),_,N,E;if(e(v)&&(_=v.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(v,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in v&&a(N,E,v[x]);return N.length=E,N}}),YW}var gk,XW;function QOe(){if(XW)return gk;XW=1,YOe();var t=on();return gk=t("Array","slice"),gk}var yk,JW;function XOe(){if(JW)return yk;JW=1;var t=kr(),e=QOe(),r=Array.prototype;return yk=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},yk}var vk,ZW;function JOe(){if(ZW)return vk;ZW=1;var t=XOe();return vk=t,vk}var bk,e7;function ZOe(){return e7||(e7=1,bk=JOe()),bk}var eje=ZOe(),js=Be(eje),xk,t7;function tje(){if(t7)return xk;t7=1;var t=xi(),e=at(),r=mb(),n=hb(),i=Hs(),s=e([].concat);return xk=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},xk}var r7={},n7;function rje(){if(n7)return r7;n7=1;var t=Pe(),e=nu();return t({target:"Array",stat:!0},{isArray:e}),r7}var wk,i7;function nje(){if(i7)return wk;i7=1,rje();var t=Et();return wk=t.Array.isArray,wk}var Sk,s7;function ije(){if(s7)return Sk;s7=1;var t=nje();return Sk=t,Sk}var _k,o7;function sje(){return o7||(o7=1,_k=ije()),_k}var oje=sje(),ur=Be(oje),a7={},l7;function aje(){if(l7)return a7;l7=1;var t=Pe(),e=yl().map,r=jm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),a7}var Ek,c7;function lje(){if(c7)return Ek;c7=1,aje();var t=on();return Ek=t("Array","map"),Ek}var Nk,u7;function cje(){if(u7)return Nk;u7=1;var t=kr(),e=lje(),r=Array.prototype;return Nk=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},Nk}var Ck,d7;function uje(){if(d7)return Ck;d7=1;var t=cje();return Ck=t,Ck}var kk,h7;function dje(){return h7||(h7=1,kk=uje()),kk}var hje=dje(),Hd=Be(hje),f7={},p7;function fje(){if(p7)return f7;p7=1;var t=Pe(),e=wi(),r=Om(),n=it(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),f7}var Tk,m7;function pje(){if(m7)return Tk;m7=1,fje();var t=Et();return Tk=t.Object.keys,Tk}var Ok,g7;function mje(){if(g7)return Ok;g7=1;var t=pje();return Ok=t,Ok}var jk,y7;function gje(){return y7||(y7=1,jk=mje()),jk}var yje=gje(),or=Be(yje),v7={},b7;function vje(){if(b7)return v7;b7=1;var t=Pe(),e=at(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),v7}var Pk,x7;function bje(){if(x7)return Pk;x7=1,vje();var t=Et();return Pk=t.Date.now,Pk}var Ik,w7;function xje(){if(w7)return Ik;w7=1;var t=bje();return Ik=t,Ik}var Rk,S7;function wje(){return S7||(S7=1,Rk=xje()),Rk}var Sje=wje(),Wv=Be(Sje),_7={},Mk,E7;function Oh(){if(E7)return Mk;E7=1;var t=it();return Mk=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},Mk}var $k,N7;function _je(){if(N7)return $k;N7=1;var t=yl().forEach,e=Oh(),r=e("forEach");return $k=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},$k}var C7;function Eje(){if(C7)return _7;C7=1;var t=Pe(),e=_je();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),_7}var Dk,k7;function Nje(){if(k7)return Dk;k7=1,Eje();var t=on();return Dk=t("Array","forEach"),Dk}var Ak,T7;function Cje(){if(T7)return Ak;T7=1;var t=Nje();return Ak=t,Ak}var Fk,O7;function kje(){if(O7)return Fk;O7=1;var t=Nh(),e=sn(),r=kr(),n=Cje(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Fk=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},Fk}var qk,j7;function Tje(){return j7||(j7=1,qk=kje()),qk}var Oje=Tje(),kt=Be(Oje),P7={},I7;function jje(){if(I7)return P7;I7=1;var t=Pe(),e=at(),r=nu(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),P7}var Lk,R7;function Pje(){if(R7)return Lk;R7=1,jje();var t=on();return Lk=t("Array","reverse"),Lk}var Bk,M7;function Ije(){if(M7)return Bk;M7=1;var t=kr(),e=Pje(),r=Array.prototype;return Bk=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},Bk}var zk,$7;function Rje(){if($7)return zk;$7=1;var t=Ije();return zk=t,zk}var Vk,D7;function Mje(){return D7||(D7=1,Vk=Rje()),Vk}var $je=Mje(),cc=Be($je),A7={},Uk,F7;function Dje(){if(F7)return Uk;F7=1;var t=mr(),e=nu(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return Uk=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},Uk}var Hk,q7;function Noe(){if(q7)return Hk;q7=1;var t=bh(),e=TypeError;return Hk=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},Hk}var L7;function Aje(){if(L7)return A7;L7=1;var t=Pe(),e=wi(),r=db(),n=_h(),i=Wo(),s=Dje(),o=uoe(),a=T$(),l=fb(),c=Noe(),d=jm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,b){var y=e(this),v=i(y),w=r(g,v),x=arguments.length,S,_,N,E,k,C;for(x===0?S=_=0:x===1?(S=0,_=v-w):(S=x-2,_=p(f(n(b),0),v-w)),o(v+S-_),N=a(y,_),E=0;E<_;E++)k=w+E,k in y&&l(N,E,y[k]);if(N.length=_,S<_){for(E=w;E<v-_;E++)k=E+_,C=E+S,k in y?y[C]=y[k]:c(y,C);for(E=v;E>v-_+S;E--)c(y,E-1)}else if(S>_)for(E=v-_;E>w;E--)k=E+_-1,C=E+S-1,k in y?y[C]=y[k]:c(y,C);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,v-_+S),N}}),A7}var Wk,B7;function Fje(){if(B7)return Wk;B7=1,Aje();var t=on();return Wk=t("Array","splice"),Wk}var Kk,z7;function qje(){if(z7)return Kk;z7=1;var t=kr(),e=Fje(),r=Array.prototype;return Kk=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},Kk}var Gk,V7;function Lje(){if(V7)return Gk;V7=1;var t=qje();return Gk=t,Gk}var Yk,U7;function Bje(){return U7||(U7=1,Yk=Lje()),Yk}var zje=Bje(),_o=Be(zje),H7={},W7;function Vje(){if(W7)return H7;W7=1;var t=Pe(),e=E$().includes,r=it(),n=I$(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),H7}var Qk,K7;function Uje(){if(K7)return Qk;K7=1,Vje();var t=on();return Qk=t("Array","includes"),Qk}var G7={},Xk,Y7;function Hje(){if(Y7)return Xk;Y7=1;var t=Gr(),e=Us(),r=Tr(),n=r("match");return Xk=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},Xk}var Jk,Q7;function Wje(){if(Q7)return Jk;Q7=1;var t=Hje(),e=TypeError;return Jk=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},Jk}var Zk,X7;function Kje(){if(X7)return Zk;X7=1;var t=Tr(),e=t("match");return Zk=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},Zk}var J7;function Gje(){if(J7)return G7;J7=1;var t=Pe(),e=at(),r=Wje(),n=Uo(),i=Wi(),s=Kje(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),G7}var eT,Z7;function Yje(){if(Z7)return eT;Z7=1,Gje();var t=on();return eT=t("String","includes"),eT}var tT,e9;function Qje(){if(e9)return tT;e9=1;var t=kr(),e=Uje(),r=Yje(),n=Array.prototype,i=String.prototype;return tT=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},tT}var rT,t9;function Xje(){if(t9)return rT;t9=1;var t=Qje();return rT=t,rT}var nT,r9;function Jje(){return r9||(r9=1,nT=Xje()),nT}var Zje=Jje(),Ga=Be(Zje),n9={},i9;function ePe(){if(i9)return n9;i9=1;var t=Pe(),e=it(),r=wi(),n=yb(),i=Soe(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),n9}var iT,s9;function tPe(){if(s9)return iT;s9=1,ePe();var t=Et();return iT=t.Object.getPrototypeOf,iT}var sT,o9;function rPe(){if(o9)return sT;o9=1;var t=tPe();return sT=t,sT}var oT,a9;function nPe(){return a9||(a9=1,oT=rPe()),oT}var iPe=nPe(),l9=Be(iPe),aT,c9;function sPe(){if(c9)return aT;c9=1,hoe();var t=on();return aT=t("Array","concat"),aT}var lT,u9;function oPe(){if(u9)return lT;u9=1;var t=kr(),e=sPe(),r=Array.prototype;return lT=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},lT}var cT,d9;function aPe(){if(d9)return cT;d9=1;var t=oPe();return cT=t,cT}var uT,h9;function lPe(){return h9||(h9=1,uT=aPe()),uT}var cPe=lPe(),uPe=Be(cPe),f9={},p9;function dPe(){if(p9)return f9;p9=1;var t=Pe(),e=yl().filter,r=jm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),f9}var dT,m9;function hPe(){if(m9)return dT;m9=1,dPe();var t=on();return dT=t("Array","filter"),dT}var hT,g9;function fPe(){if(g9)return hT;g9=1;var t=kr(),e=hPe(),r=Array.prototype;return hT=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},hT}var fT,y9;function pPe(){if(y9)return fT;y9=1;var t=fPe();return fT=t,fT}var pT,v9;function mPe(){return v9||(v9=1,pT=pPe()),pT}var gPe=mPe(),Un=Be(gPe),b9={},mT,x9;function yPe(){if(x9)return mT;x9=1;var t=mr(),e=it(),r=at(),n=yb(),i=Om(),s=ys(),o=ob().f,a=r(o),l=r([].push),c=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=c&&n(p)===null,b=m.length,y=0,v=[],w;b>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(v,h?[w,p[w]]:p[w]);return v}};return mT={entries:d(!0),values:d(!1)},mT}var w9;function vPe(){if(w9)return b9;w9=1;var t=Pe(),e=yPe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),b9}var gT,S9;function bPe(){if(S9)return gT;S9=1,vPe();var t=Et();return gT=t.Object.values,gT}var yT,_9;function xPe(){if(_9)return yT;_9=1;var t=bPe();return yT=t,yT}var vT,E9;function wPe(){return E9||(E9=1,vT=xPe()),vT}var SPe=wPe(),_Pe=Be(SPe),N9={},bT,C9;function $$(){return C9||(C9=1,bT=`	
\v\f\r \u2028\u2029\uFEFF`),bT}var xT,k9;function Coe(){if(k9)return xT;k9=1;var t=at(),e=Uo(),r=Wi(),n=$$(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(c){var d=r(e(c));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return xT={start:a(1),end:a(2),trim:a(3)},xT}var wT,T9;function EPe(){if(T9)return wT;T9=1;var t=zt(),e=it(),r=at(),n=Wi(),i=Coe().trim,s=$$(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,c=/^[+-]?0x/i,d=r(c.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return wT=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(c,g)?16:10))}:o,wT}var O9;function NPe(){if(O9)return N9;O9=1;var t=Pe(),e=EPe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),N9}var ST,j9;function CPe(){if(j9)return ST;j9=1,NPe();var t=Et();return ST=t.parseInt,ST}var _T,P9;function kPe(){if(P9)return _T;P9=1;var t=CPe();return _T=t,_T}var ET,I9;function TPe(){return I9||(I9=1,ET=kPe()),ET}var OPe=TPe(),is=Be(OPe),R9={},M9;function jPe(){if(M9)return R9;M9=1;var t=Pe(),e=x$(),r=E$().indexOf,n=Oh(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var c=arguments.length>1?arguments[1]:void 0;return s?i(this,l,c)||0:r(this,l,c)}}),R9}var NT,$9;function PPe(){if($9)return NT;$9=1,jPe();var t=on();return NT=t("Array","indexOf"),NT}var CT,D9;function IPe(){if(D9)return CT;D9=1;var t=kr(),e=PPe(),r=Array.prototype;return CT=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},CT}var kT,A9;function RPe(){if(A9)return kT;A9=1;var t=IPe();return kT=t,kT}var TT,F9;function MPe(){return F9||(F9=1,TT=RPe()),TT}var $Pe=MPe(),wt=Be($Pe),q9={},L9;function DPe(){if(L9)return q9;L9=1;var t=Pe(),e=mr(),r=Pm();return t({target:"Object",stat:!0,sham:!e},{create:r}),q9}var OT,B9;function APe(){if(B9)return OT;B9=1,DPe();var t=Et(),e=t.Object;return OT=function(n,i){return e.create(n,i)},OT}var jT,z9;function FPe(){if(z9)return jT;z9=1;var t=APe();return jT=t,jT}var PT,V9;function qPe(){return V9||(V9=1,PT=FPe()),PT}var LPe=qPe(),uc=Be(LPe),U9={},IT,H9;function BPe(){if(H9)return IT;H9=1;var t=_h(),e=Wi(),r=Uo(),n=RangeError;return IT=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},IT}var RT,W9;function zPe(){if(W9)return RT;W9=1;var t=at(),e=ioe(),r=Wi(),n=BPe(),i=Uo(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,b=f===void 0?" ":r(f),y,v;return m<=g||b===""?p:(y=m-g,v=s(b,a(y/b.length)),v.length>y&&(v=o(v,0,y)),c?p+v:v+p)}};return RT={start:l(!1),end:l(!0)},RT}var MT,K9;function VPe(){if(K9)return MT;K9=1;var t=at(),e=it(),r=zPe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return MT=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,v=d(y),w=f(y),x=v<0?"-":v>9999?"+":"";return x+r(s(v),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,MT}var G9;function UPe(){if(G9)return U9;G9=1;var t=Pe(),e=ii(),r=wi(),n=eoe(),i=VPe(),s=Us(),o=it(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),U9}var $T,Y9;function HPe(){if(Y9)return $T;Y9=1,UPe(),goe();var t=Et(),e=sb();return t.JSON||(t.JSON={stringify:JSON.stringify}),$T=function(n,i,s){return e(t.JSON.stringify,null,arguments)},$T}var DT,Q9;function WPe(){if(Q9)return DT;Q9=1;var t=HPe();return DT=t,DT}var AT,X9;function KPe(){return X9||(X9=1,AT=WPe()),AT}var GPe=KPe(),Rm=Be(GPe),J9={},Z9={},FT,eK;function koe(){if(eK)return FT;eK=1;var t=zt(),e=yh(),r=Us(),n=function(i){return e.slice(0,i.length)===i};return FT=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),FT}var qT,tK;function YPe(){if(tK)return qT;tK=1;var t=TypeError;return qT=function(e,r){if(e<r)throw new t("Not enough arguments");return e},qT}var LT,rK;function Toe(){if(rK)return LT;rK=1;var t=zt(),e=sb(),r=Kr(),n=koe(),i=yh(),s=Eh(),o=YPe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return LT=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),b=m?s(arguments,h):[],y=m?function(){e(g,this,b)}:g;return d?c(y,p):c(y)}:c},LT}var nK;function QPe(){if(nK)return Z9;nK=1;var t=Pe(),e=zt(),r=Toe(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),Z9}var iK={},sK;function XPe(){if(sK)return iK;sK=1;var t=Pe(),e=zt(),r=Toe(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),iK}var oK;function Ooe(){return oK||(oK=1,QPe(),XPe()),J9}var BT,aK;function JPe(){if(aK)return BT;aK=1,Ooe();var t=Et();return BT=t.setTimeout,BT}var zT,lK;function ZPe(){return lK||(lK=1,zT=JPe()),zT}var eIe=ZPe(),Eo=Be(eIe),cK={},VT,uK;function tIe(){if(uK)return VT;uK=1;var t=wi(),e=db(),r=Wo();return VT=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,d=c===void 0?o:e(c,o);d>l;)s[l++]=i;return s},VT}var dK;function rIe(){if(dK)return cK;dK=1;var t=Pe(),e=tIe(),r=I$();return t({target:"Array",proto:!0},{fill:e}),r("fill"),cK}var UT,hK;function nIe(){if(hK)return UT;hK=1,rIe();var t=on();return UT=t("Array","fill"),UT}var HT,fK;function iIe(){if(fK)return HT;fK=1;var t=kr(),e=nIe(),r=Array.prototype;return HT=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},HT}var WT,pK;function sIe(){if(pK)return WT;pK=1;var t=iIe();return WT=t,WT}var KT,mK;function oIe(){return mK||(mK=1,KT=sIe()),KT}var aIe=oIe(),Mm=Be(aIe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ps(){return ps=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ps.apply(this,arguments)}function Ki(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Dg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var OI;typeof Object.assign!="function"?OI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:OI=Object.assign;var $c=OI,gK=["","webkit","Moz","MS","ms","o"],lIe=typeof document>"u"?{style:{}}:document.createElement("div"),cIe="function",Hu=Math.round,Dc=Math.abs,D$=Date.now;function vb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<gK.length;){if(r=gK[s],n=r?r+i:e,n in t)return n;s++}}var No;typeof window>"u"?No={}:No=window;var joe=vb(lIe.style,"touchAction"),Poe=joe!==void 0;function uIe(){if(!Poe)return!1;var t={},e=No.CSS&&No.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?No.CSS.supports("touch-action",r):!0}),t}var Ioe="compute",Roe="auto",jI="manipulation",dc="none",jp="pan-x",Pp="pan-y",Ag=uIe(),dIe=/mobile|tablet|ip(ad|hone|od)|android/i,Moe="ontouchstart"in No,hIe=vb(No,"PointerEvent")!==void 0,fIe=Moe&&dIe.test(navigator.userAgent),$m="touch",pIe="pen",A$="mouse",mIe="kinect",gIe=25,In=1,ou=2,Sr=4,ti=8,Kv=1,Dm=2,Am=4,Fm=8,Wd=16,qs=Dm|Am,hc=Fm|Wd,$oe=qs|hc,Doe=["x","y"],Gv=["clientX","clientY"];function Co(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function bb(t,e){return typeof t===cIe?t.apply(e&&e[0]||void 0,e):t}function Bl(t,e){return t.indexOf(e)>-1}function yIe(t){if(Bl(t,dc))return dc;var e=Bl(t,jp),r=Bl(t,Pp);return e&&r?dc:e||r?e?jp:Pp:Bl(t,jI)?jI:Roe}var Aoe=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Ioe&&(n=this.compute()),Poe&&this.manager.element.style&&Ag[n]&&(this.manager.element.style[joe]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Co(this.manager.recognizers,function(i){bb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),yIe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Bl(o,dc)&&!Ag[dc],l=Bl(o,Pp)&&!Ag[Pp],c=Bl(o,jp)&&!Ag[jp];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&qs||c&&s&hc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function F$(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Foe(t){var e=t.length;if(e===1)return{x:Hu(t[0].clientX),y:Hu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Hu(r/e),y:Hu(n/e)}}function yK(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Hu(t.pointers[r].clientX),clientY:Hu(t.pointers[r].clientY)},r++;return{timeStamp:D$(),pointers:e,center:Foe(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Yv(t,e,r){r||(r=Doe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function PI(t,e,r){r||(r=Doe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function qoe(t,e){return t===e?Kv:Dc(t)>=Dc(e)?t<0?Dm:Am:e<0?Fm:Wd}function vIe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===In||s.eventType===Sr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Loe(t,e,r){return{x:e/t||0,y:r/t||0}}function bIe(t,e){return Yv(e[0],e[1],Gv)/Yv(t[0],t[1],Gv)}function xIe(t,e){return PI(e[1],e[0],Gv)+PI(t[1],t[0],Gv)}function wIe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ti&&(n>gIe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=Loe(n,l,c);s=d.x,o=d.y,i=Dc(d.x)>Dc(d.y)?d.x:d.y,a=qoe(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function SIe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=yK(e)),i>1&&!r.firstMultiple?r.firstMultiple=yK(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Foe(n);e.timeStamp=D$(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=PI(a,l),e.distance=Yv(a,l),vIe(r,e),e.offsetDirection=qoe(e.deltaX,e.deltaY);var c=Loe(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Dc(c.x)>Dc(c.y)?c.x:c.y,e.scale=o?bIe(o.pointers,n):1,e.rotation=o?xIe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,wIe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,F$(f,d)&&(d=f),e.target=d}function _Ie(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&In&&n-i===0,o=e&(Sr|ti)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,SIe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Ip(t){return t.trim().split(/\s+/g)}function Lf(t,e,r){Co(Ip(e),function(n){t.addEventListener(n,r,!1)})}function Bf(t,e,r){Co(Ip(e),function(n){t.removeEventListener(n,r,!1)})}function vK(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var jh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){bb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Lf(this.element,this.evEl,this.domHandler),this.evTarget&&Lf(this.target,this.evTarget,this.domHandler),this.evWin&&Lf(vK(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Bf(this.element,this.evEl,this.domHandler),this.evTarget&&Bf(this.target,this.evTarget,this.domHandler),this.evWin&&Bf(vK(this.element),this.evWin,this.domHandler)},t}();function Ac(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var EIe={pointerdown:In,pointermove:ou,pointerup:Sr,pointercancel:ti,pointerout:ti},NIe={2:$m,3:pIe,4:A$,5:mIe},Boe="pointerdown",zoe="pointermove pointerup pointercancel";No.MSPointerEvent&&!No.PointerEvent&&(Boe="MSPointerDown",zoe="MSPointerMove MSPointerUp MSPointerCancel");var Voe=function(t){Ki(e,t);function e(){var n,i=e.prototype;return i.evEl=Boe,i.evWin=zoe,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=EIe[a],c=NIe[i.pointerType]||i.pointerType,d=c===$m,h=Ac(s,i.pointerId,"pointerId");l&In&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(Sr|ti)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(jh);function Rp(t){return Array.prototype.slice.call(t,0)}function q$(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Ac(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var CIe={touchstart:In,touchmove:ou,touchend:Sr,touchcancel:ti},kIe="touchstart touchmove touchend touchcancel",L$=function(t){Ki(e,t);function e(){var n;return e.prototype.evTarget=kIe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=CIe[i.type],o=TIe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:$m,srcEvent:i})},e}(jh);function TIe(t,e){var r=Rp(t.touches),n=this.targetIds;if(e&(In|ou)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Rp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return F$(c.target,l)}),e===In)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(Sr|ti)&&delete n[o[i].identifier],i++;if(a.length)return[q$(s.concat(a),"identifier",!0),a]}var OIe={mousedown:In,mousemove:ou,mouseup:Sr},jIe="mousedown",PIe="mousemove mouseup",B$=function(t){Ki(e,t);function e(){var n,i=e.prototype;return i.evEl=jIe,i.evWin=PIe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=OIe[i.type];s&In&&i.button===0&&(this.pressed=!0),s&ou&&i.which!==1&&(s=Sr),this.pressed&&(s&Sr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:A$,srcEvent:i}))},e}(jh),IIe=2500,bK=25;function xK(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,IIe)}}function RIe(t,e){t&In?(this.primaryTouch=e.changedPointers[0].identifier,xK.call(this,e)):t&(Sr|ti)&&xK.call(this,e)}function MIe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=bK&&o<=bK)return!0}return!1}var Uoe=function(){var t=function(e){Ki(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===$m,h=c.pointerType===A$;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)RIe.call(Dg(Dg(o)),l,c);else if(h&&MIe.call(Dg(Dg(o)),c))return;o.callback(a,l,c)}},o.touch=new L$(o.manager,o.handler),o.mouse=new B$(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(jh);return t}();function $Ie(t){var e,r=t.options.inputClass;return r?e=r:hIe?e=Voe:fIe?e=L$:Moe?e=Uoe:e=B$,new e(t,_Ie)}function Wu(t,e,r){return Array.isArray(t)?(Co(t,r[e],r),!0):!1}var cy=1,Li=2,Kd=4,Ya=8,ko=Ya,Mp=16,Is=32,DIe=1;function AIe(){return DIe++}function Fg(t,e){var r=e.manager;return r?r.get(t):t}function wK(t){return t&Mp?"cancel":t&Ya?"end":t&Kd?"move":t&Li?"start":""}var qm=function(){function t(r){r===void 0&&(r={}),this.options=ps({enable:!0},r),this.id=AIe(),this.manager=null,this.state=cy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return $c(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Wu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Fg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Wu(n,"dropRecognizeWith",this)?this:(n=Fg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Wu(n,"requireFailure",this))return this;var i=this.requireFail;return n=Fg(n,this),Ac(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Wu(n,"dropRequireFailure",this))return this;n=Fg(n,this);var i=Ac(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ya&&o(i.options.event+wK(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ya&&o(i.options.event+wK(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Is},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Is|cy)))return!1;n++}return!0},e.recognize=function(n){var i=$c({},n);if(!bb(this.options.enable,[this,i])){this.reset(),this.state=Is;return}this.state&(ko|Mp|Is)&&(this.state=cy),this.state=this.process(i),this.state&(Li|Kd|Ya|Mp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),II=function(t){Ki(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[jI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&In&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==Sr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Yv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=ko,s.tryEmit()},o.interval),Li):ko}return Is},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Is},this.options.interval),Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===ko&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(qm),Gd=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Li|Kd),l=this.attrTest(i);return a&&(o&ti||!l)?s|Mp:a||l?o&Sr?s|Ya:s&Li?s|Kd:Li:Is},e}(qm);function Hoe(t){return t===Wd?"down":t===Fm?"up":t===Dm?"left":t===Am?"right":""}var z$=function(t){Ki(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"pan",threshold:10,pointers:1,direction:$oe},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&qs&&s.push(Pp),i&hc&&s.push(jp),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&qs?(l=c===0?Kv:c<0?Dm:Am,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Kv:d<0?Fm:Wd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Gd.prototype.attrTest.call(this,i)&&(this.state&Li||!(this.state&Li)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Hoe(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Gd),Woe=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"swipe",threshold:10,velocity:.3,direction:qs|hc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return z$.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(qs|hc)?o=i.overallVelocity:s&qs?o=i.overallVelocityX:s&hc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Dc(o)>this.options.velocity&&i.eventType&Sr},r.emit=function(i){var s=Hoe(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Gd),Koe=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[dc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Li)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Gd),Goe=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[dc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Li)},e}(Gd),Yoe=function(t){Ki(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Roe]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Sr|ti)&&!c)this.reset();else if(i.eventType&In)this.reset(),this._timer=setTimeout(function(){s.state=ko,s.tryEmit()},o.time);else if(i.eventType&Sr)return ko;return Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===ko&&(i&&i.eventType&Sr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=D$(),this.manager.emit(this.options.event,this._input)))},e}(qm),Qoe={domEvents:!1,touchAction:Ioe,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},SK=[[Goe,{enable:!1}],[Koe,{enable:!1},["rotate"]],[Woe,{direction:qs}],[z$,{direction:qs},["swipe"]],[II],[II,{event:"doubletap",taps:2},["tap"]],[Yoe]],FIe=1,_K=2;function EK(t,e){var r=t.element;if(r.style){var n;Co(t.options.cssProps,function(i,s){n=vb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function qIe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var NK=function(){function t(r,n){var i=this;this.options=$c({},Qoe,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=$Ie(this),this.touchAction=new Aoe(this,this.options.touchAction),EK(this,!0),Co(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return $c(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?_K:FIe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&ko)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==_K&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Li|Kd|Ya)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof qm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Wu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Wu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Ac(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return Co(Ip(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return Co(Ip(n),function(o){i?s[o]&&s[o].splice(Ac(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&qIe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&EK(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),LIe={touchstart:In,touchmove:ou,touchend:Sr,touchcancel:ti},BIe="touchstart",zIe="touchstart touchmove touchend touchcancel",VIe=function(t){Ki(e,t);function e(){var n,i=e.prototype;return i.evTarget=BIe,i.evWin=zIe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=LIe[i.type];if(s===In&&(this.started=!0),!!this.started){var o=UIe.call(this,i,s);s&(Sr|ti)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:$m,srcEvent:i})}},e}(jh);function UIe(t,e){var r=Rp(t.touches),n=Rp(t.changedTouches);return e&(Sr|ti)&&(r=q$(r.concat(n),"identifier",!0)),[r,n]}function Xoe(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Joe=Xoe(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),HIe=Xoe(function(t,e){return Joe(t,e,!0)},"merge","Use `assign`.");function WIe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&$c(i,r)}function CK(t,e){return function(){return t.apply(e,arguments)}}var Zoe=function(){var t=function(r,n){return n===void 0&&(n={}),new NK(r,ps({recognizers:SK.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=$oe,t.DIRECTION_DOWN=Wd,t.DIRECTION_LEFT=Dm,t.DIRECTION_RIGHT=Am,t.DIRECTION_UP=Fm,t.DIRECTION_HORIZONTAL=qs,t.DIRECTION_VERTICAL=hc,t.DIRECTION_NONE=Kv,t.DIRECTION_DOWN=Wd,t.INPUT_START=In,t.INPUT_MOVE=ou,t.INPUT_END=Sr,t.INPUT_CANCEL=ti,t.STATE_POSSIBLE=cy,t.STATE_BEGAN=Li,t.STATE_CHANGED=Kd,t.STATE_ENDED=Ya,t.STATE_RECOGNIZED=ko,t.STATE_CANCELLED=Mp,t.STATE_FAILED=Is,t.Manager=NK,t.Input=jh,t.TouchAction=Aoe,t.TouchInput=L$,t.MouseInput=B$,t.PointerEventInput=Voe,t.TouchMouseInput=Uoe,t.SingleTouchInput=VIe,t.Recognizer=qm,t.AttrRecognizer=Gd,t.Tap=II,t.Pan=z$,t.Swipe=Woe,t.Pinch=Koe,t.Rotate=Goe,t.Press=Yoe,t.on=Lf,t.off=Bf,t.each=Co,t.merge=HIe,t.extend=Joe,t.bindFn=CK,t.assign=$c,t.inherit=WIe,t.bindFn=CK,t.prefixed=vb,t.toArray=Rp,t.inArray=Ac,t.uniqueArray=q$,t.splitStr=Ip,t.boolOrFn=bb,t.hasParent=F$,t.addEventListeners=Lf,t.removeEventListeners=Bf,t.defaults=$c({},Qoe,{preset:SK}),t}();Zoe.defaults;GOe("DELETE");function xb(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return KIe(e.length?e:[Wv()])}function KIe(t){let[e,r,n]=GIe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function GIe(){const t=YIe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function YIe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function QIe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const V$=typeof window<"u"?window.Hammer||Zoe:function(){return QIe()};function Rs(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=V$(this._dom.overlay);r.on("tap",ne(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];kt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{XIe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}coe(Rs.prototype);Rs.current=null;Rs.prototype.destroy=function(){this.deactivate();for(const r of cc(t=_o(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Rs.prototype.activate=function(){Rs.current&&Rs.current.deactivate(),Rs.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Rs.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Rs.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function XIe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const JIe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ZIe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,eRe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,tRe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function aa(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(aa(e),t.removeChild(e))}}function rd(t){return t instanceof String||typeof t=="string"}function kK(t){return typeof t=="object"&&t!==null}function Fc(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function eae(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")Fc(t,e,n,r);else{const i=t[n],s=e[n];kK(i)&&kK(s)&&eae(i,s,r)}}function Ph(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ur(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Pt(e[s],r[s],!1,n):Fc(e,r,s,n);else{if(ur(r[s]))throw new TypeError("Arrays are not supported by deepExtend");Fc(e,r,s,n)}}return e}function Qv(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ur(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Ga(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?Pt(e[i],r[i]):Fc(e,r,i,n);else if(ur(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else Fc(e,r,i,n);return e}function Pt(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&l9(e[s])===Object.prototype)t[s]===void 0?t[s]=Pt({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&l9(t[s])===Object.prototype?Pt(t[s],e[s],r):Fc(t,e,s,n);else if(ur(e[s])){var i;t[s]=js(i=e[s]).call(i)}else Fc(t,e,s,n);return t}function Xv(t,e){return[...t,e]}function rRe(t){return js(t).call(t)}function nRe(t){return t.getBoundingClientRect().left}function iRe(t){return t.getBoundingClientRect().top}function et(t,e){if(ur(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function U$(t){let e;switch(t.length){case 3:case 4:return e=ZIe.exec(t),e?{r:is(e[1]+e[1],16),g:is(e[2]+e[2],16),b:is(e[3]+e[3],16)}:null;case 6:case 7:return e=JIe.exec(t),e?{r:is(e[1],16),g:is(e[2],16),b:is(e[3],16)}:null;default:return null}}function Mi(t,e){if(Ga(t).call(t,"rgba"))return t;if(Ga(t).call(t,"rgb")){const r=t.substr(wt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=U$(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function tae(t,e,r){var n;return"#"+js(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function RI(t,e){if(rd(t)){let n=t;if(nae(n)){var r;const i=Hd(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return is(s)});n=tae(i[0],i[1],i[2])}if(rae(n)===!0){const i=sRe(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=MI(o.h,o.s,o.v),l=MI(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:rd(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:rd(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function pf(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function uy(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),c=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=c,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=c,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function MI(t,e,r){const n=uy(t,e,r);return tae(n.r,n.g,n.b)}function sRe(t){const e=U$(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return pf(e.r,e.g,e.b)}function rae(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function nae(t){return eRe.test(t)}function oRe(t){return tRe.test(t)}function Qa(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=uc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Qa(t[r]));return e}function ji(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const b=m[g],y=p[g];for(const v in b)Object.prototype.hasOwnProperty.call(b,v)&&(y[v]=b[v])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=uc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const aRe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function la(t,e){let r;ur(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const lRe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let cRe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return lRe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),rd(e)===!0){if(nae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(oRe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(rae(e)===!0){const s=U$(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Rm(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=wr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Eo(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=wr({},e)),this.color=e;const n=pf(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=pf(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=uy(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=pf(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Mm(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=ne(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=ne(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=ne(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=ne(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new V$(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,c=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=uy(o*c,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,c=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*d+s,f=Math.sin(c)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=c/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=pf(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const b=uy(g.h,g.s,g.v);b.a=this.color.a,this.color=b,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function $I(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild($I(...js(e).call(e,1))),n}}let uRe=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},wr(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new cRe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(ur(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Un(e)!==void 0&&(this.options.filter=Un(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Un(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Un(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||wt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return kt(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild($I("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&wt(e).call(e,r)!==-1&&(s=wt(e).call(e,r));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],i.appendChild(c)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,c="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,c="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,c="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);c!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Eo(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Eo(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Un(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],c=Xv(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!ur(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(c);if(ur(l))this._handleArray(l,d,c);else if(typeof l=="string")this._makeTextInput(l,d,c);else if(typeof l=="boolean")this._makeCheckbox(l,d,c);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=Xv(c,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild($I("pre","const options = "+Rm(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},dRe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=is(e),this.y=is(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-r<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},rf=!1,TK;const DI="background: #FFeeee; color: #dd0000";let hRe=class tr{static validate(e,r,n){rf=!1,TK=r;let i=r;return n!==void 0&&(i=r[n]),tr.parse(e,i,[]),rf}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&tr.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){tr.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=tr.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),tr.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+tr.printLocation(o,e),DI)},l=tr.getType(r[e]),c=s[l];c!==void 0?tr.getType(c)==="array"&&wt(c).call(c,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+tr.print(c)+' not "'+r[e]+'". '),rf=!0):l==="object"&&i!=="__any__"&&(o=Xv(o,e),tr.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+tr.print(or(s))+". Received ["+l+'] "'+r[e]+'"'),rf=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":ur(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=tr.findInOptions(e,r,n,!1),s=tr.findInOptions(e,TK,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+tr.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+tr.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+tr.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+tr.printLocation(i.path,e):l=". Did you mean one of these: "+tr.print(or(r))+tr.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,DI),rf=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=tr.findInOptions(e,r[h],Xv(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,c=p.indexMatch)}else{var d;wt(d=h.toLowerCase()).call(d,l)!==-1&&(c=h),f=tr.levenshteinDistance(e,h),s>f&&(o=h,a=rRe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return Rm(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const fRe=Rs,pRe=uRe,nd=V$,mRe=dRe,iae=DI,gRe=hRe;function yRe(t){return ja=t,wRe()}var sae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},H$=uc(sae);H$.color="color.color";H$.style="dashes";var Sn={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},OK={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},ja="",Yd=0,Je="",$e="",Bn=Sn.NULL;function vRe(){Yd=0,Je=ja.charAt(0)}function $r(){Yd++,Je=ja.charAt(Yd)}function wu(){return ja.charAt(Yd+1)}function jK(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function nl(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function bRe(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function oae(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=nl(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),wt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=nl(i.attr,e.attr))}function xRe(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=nl({},t.edge);e.attr=nl(r,e.attr)}}function aae(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=nl({},t.edge)),s.attr=nl(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function It(){for(Bn=Sn.NULL,$e="";Je===" "||Je==="	"||Je===`
`||Je==="\r";)$r();do{var t=!1;if(Je==="#"){for(var e=Yd-1;ja.charAt(e)===" "||ja.charAt(e)==="	";)e--;if(ja.charAt(e)===`
`||ja.charAt(e)===""){for(;Je!=""&&Je!=`
`;)$r();t=!0}}if(Je==="/"&&wu()==="/"){for(;Je!=""&&Je!=`
`;)$r();t=!0}if(Je==="/"&&wu()==="*"){for(;Je!="";)if(Je==="*"&&wu()==="/"){$r(),$r();break}else $r();t=!0}for(;Je===" "||Je==="	"||Je===`
`||Je==="\r";)$r()}while(t);if(Je===""){Bn=Sn.DELIMITER;return}var r=Je+wu();if(OK[r]){Bn=Sn.DELIMITER,$e=r,$r(),$r();return}if(OK[Je]){Bn=Sn.DELIMITER,$e=Je,$r();return}if(jK(Je)||Je==="-"){for($e+=Je,$r();jK(Je);)$e+=Je,$r();$e==="false"?$e=!1:$e==="true"?$e=!0:isNaN(Number($e))||($e=Number($e)),Bn=Sn.IDENTIFIER;return}if(Je==='"'){for($r();Je!=""&&(Je!='"'||Je==='"'&&wu()==='"');)Je==='"'?($e+=Je,$r()):Je==="\\"&&wu()==="n"?($e+=`
`,$r()):$e+=Je,$r();if(Je!='"')throw _n('End of string " expected');$r(),Bn=Sn.IDENTIFIER;return}for(Bn=Sn.UNKNOWN;Je!="";)$e+=Je,$r();throw new SyntaxError('Syntax error in part "'+dae($e,30)+'"')}function wRe(){var t={};if(vRe(),It(),$e==="strict"&&(t.strict=!0,It()),($e==="graph"||$e==="digraph")&&(t.type=$e,It()),Bn===Sn.IDENTIFIER&&(t.id=$e,It()),$e!="{")throw _n("Angle bracket { expected");if(It(),lae(t),$e!="}")throw _n("Angle bracket } expected");if(It(),$e!=="")throw _n("End of file expected");return It(),delete t.node,delete t.edge,delete t.graph,t}function lae(t){for(;$e!==""&&$e!="}";)SRe(t),$e===";"&&It()}function SRe(t){var e=cae(t);if(e){uae(t,e);return}var r=_Re(t);if(!r){if(Bn!=Sn.IDENTIFIER)throw _n("Identifier expected");var n=$e;if(It(),$e==="="){if(It(),Bn!=Sn.IDENTIFIER)throw _n("Identifier expected");t[n]=$e,It()}else ERe(t,n)}}function cae(t){var e=null;if($e==="subgraph"&&(e={},e.type="subgraph",It(),Bn===Sn.IDENTIFIER&&(e.id=$e,It())),$e==="{"){if(It(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,lae(e),$e!="}")throw _n("Angle bracket } expected");It(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function _Re(t){return $e==="node"?(It(),t.node=zf(),"node"):$e==="edge"?(It(),t.edge=zf(),"edge"):$e==="graph"?(It(),t.graph=zf(),"graph"):null}function ERe(t,e){var r={id:e},n=zf();n&&(r.attr=n),oae(t,r),uae(t,e)}function uae(t,e){for(;$e==="->"||$e==="--";){var r,n=$e;It();var i=cae(t);if(i)r=i;else{if(Bn!=Sn.IDENTIFIER)throw _n("Identifier or subgraph expected");r=$e,oae(t,{id:r}),It()}var s=zf(),o=aae(t,e,r,n,s);xRe(t,o),e=r}}function zf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;$e==="[";){for(It(),e={};$e!==""&&$e!="]";){if(Bn!=Sn.IDENTIFIER)throw _n("Attribute name expected");var o=$e;if(It(),$e!="=")throw _n("Equal sign = expected");if(It(),Bn!=Sn.IDENTIFIER)throw _n("Attribute value expected");var a=$e;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),It(),$e==","&&It()}if($e!="]")throw _n("Bracket ] expected");It()}if(Ga(s).call(s,"dir")){var c={};for(c.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)c.arrows.to=t;else if(i[t].value.from!=null)c.arrows.from=t;else throw _n("Invalid value of arrows");else i[t].name==="dir"&&(c.dir=t);var d=i[c.dir].value;if(!Ga(s).call(s,"arrows"))if(d==="both")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1,i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[c.dir].attr,name:"arrows",value:""}),c.arrows.to=i.length-1;else throw _n('Invalid dir type "'+d+'"');var h,f;if(d==="both")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},_o(i).call(i,c.arrows.from,1)):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="arrow",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")c.arrows.to&&c.arrows.from?(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f="",h="arrow",c.arrows.from=c.arrows.to,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{from:{enabled:!0,type:i[c.arrows.from].value.from.type}}};else if(d==="none"){var p;c.arrows.to?p=c.arrows.to:p=c.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h="",c.arrows.to=c.arrows.from,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:i[c.arrows.to].value.to.type}}};else throw _n('Invalid dir type "'+d+'"');_o(i).call(i,c.dir,1)}var m;if(Ga(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)bRe(i[t].attr,i[t].name,i[t].value);return e}function _n(t){return new SyntaxError(t+', got "'+dae($e,30)+'" (char '+Yd+")")}function dae(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function NRe(t,e,r){ur(t)?kt(t).call(t,function(n){ur(e)?kt(e).call(e,function(i){r(n,i)}):r(n,e)}):ur(e)?kt(e).call(e,function(n){r(t,n)}):r(t,e)}function GT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function PK(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];ur(i)?kt(i).call(i,function(s){GT(r,s,t[n])}):typeof i=="string"?GT(r,i,t[n]):GT(r,n,t[n])}return r}function CRe(t){var e=yRe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;kt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};nl(a,PK(o.attr,sae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return nl(a,PK(o.attr,H$)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};kt(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var c;kt(c=o.from.edges).call(c,function(h){var f=s(h);r.edges.push(f)})}if(NRe(a,l,function(h,f){var p=aae(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;kt(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function kRe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=Hd(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:Hd(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const TRe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},ORe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},jRe={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},PRe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},IRe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},RRe={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},MRe={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},$Re={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},DRe={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},ARe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},FRe={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var qRe=Object.freeze({__proto__:null,cn:$Re,cs:FRe,de:ORe,en:TRe,es:jRe,fr:ARe,it:PRe,nl:IRe,pt:RRe,ru:MRe,uk:DRe});function LRe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(uPe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class BRe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),c=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,c,s],[5*c,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class zRe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new BRe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var IK={},RK={},YT={exports:{}},QT,MK;function VRe(){if(MK)return QT;MK=1;var t=it();return QT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),QT}var XT,$K;function URe(){if($K)return XT;$K=1;var t=it(),e=Gr(),r=Us(),n=VRe(),i=Object.isExtensible,s=t(function(){});return XT=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,XT}var JT,DK;function hae(){if(DK)return JT;DK=1;var t=it();return JT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),JT}var AK;function wb(){if(AK)return YT.exports;AK=1;var t=Pe(),e=at(),r=Tm(),n=Gr(),i=sn(),s=Hi().f,o=mb(),a=j$(),l=URe(),c=lb(),d=hae(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},b=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},v=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),k=0,C=E.length;k<C;k++)if(E[k]===f){S(E,k,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=YT.exports={enable:v,fastKey:g,getWeakData:b,onFreeze:y};return r[f]=!0,YT.exports}var ZT,FK;function HRe(){if(FK)return ZT;FK=1;var t=Tr(),e=Ch(),r=t("iterator"),n=Array.prototype;return ZT=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},ZT}var e2,qK;function fae(){if(qK)return e2;qK=1;var t=Nh(),e=w$(),r=gh(),n=Ch(),i=Tr(),s=i("iterator");return e2=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},e2}var t2,LK;function WRe(){if(LK)return t2;LK=1;var t=ii(),e=Ho(),r=Hs(),n=bh(),i=fae(),s=TypeError;return t2=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},t2}var r2,BK;function W$(){if(BK)return r2;BK=1;var t=ii(),e=Hs(),r=w$();return r2=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},r2}var n2,zK;function Sb(){if(zK)return n2;zK=1;var t=ub(),e=ii(),r=Hs(),n=bh(),i=HRe(),s=Wo(),o=kr(),a=WRe(),l=fae(),c=W$(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return n2=function(p,m,g){var b=g&&g.that,y=!!(g&&g.AS_ENTRIES),v=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,b),_,N,E,k,C,O,j,P=function(q){return _&&c(_,"normal"),new h(!0,q)},A=function(q){return y?(r(q),x?S(q[0],q[1],P):S(q[0],q[1])):x?S(q,P):S(q)};if(v)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,k=s(p);k>E;E++)if(C=A(p[E]),C&&o(f,C))return C;return new h(!1)}_=a(p,N)}for(O=v?p.next:_.next;!(j=e(O,_)).done;){try{C=A(j.value)}catch(q){c(_,"throw",q)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},n2}var i2,VK;function K$(){if(VK)return i2;VK=1;var t=kr(),e=TypeError;return i2=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},i2}var s2,UK;function G$(){if(UK)return s2;UK=1;var t=Pe(),e=zt(),r=wb(),n=it(),i=Sh(),s=Sb(),o=K$(),a=Kr(),l=Gr(),c=gh(),d=iu(),h=Hi().f,f=yl().forEach,p=mr(),m=su(),g=m.set,b=m.getterFor;return s2=function(y,v,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,k={},C;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))C=w.getConstructor(v,y,x,_),r.enable();else{C=v(function(P,A){g(o(P,O),{type:y,collection:new N}),c(A)||s(A,P[_],{that:P,AS_ENTRIES:x})});var O=C.prototype,j=b(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(P){var A=P==="add"||P==="set";P in E&&!(S&&P==="clear")&&i(O,P,function(q,R){var L=j(this).collection;if(!A&&S&&!l(q))return P==="get"?void 0:!1;var D=L[P](q===0?0:q,R);return A?this:D})}),S||h(O,"size",{configurable:!0,get:function(){return j(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},s2}var o2,HK;function Y$(){if(HK)return o2;HK=1;var t=Im();return o2=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},o2}var a2,WK;function KRe(){if(WK)return a2;WK=1;var t=xi(),e=P$(),r=Tr(),n=mr(),i=r("species");return a2=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},a2}var l2,KK;function pae(){if(KK)return l2;KK=1;var t=Pm(),e=P$(),r=Y$(),n=ub(),i=K$(),s=gh(),o=Sb(),a=R$(),l=M$(),c=KRe(),d=mr(),h=wb().fastKey,f=su(),p=f.set,m=f.getterFor;return l2={getConstructor:function(g,b,y,v){var w=g(function(E,k){i(E,x),p(E,{type:b,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(k)||o(k,E[v],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(b),_=function(E,k,C){var O=S(E),j=N(E,k),P,A;return j?j.value=C:(O.last=j={index:A=h(k,!0),key:k,value:C,previous:P=O.last,next:null,removed:!1},O.first||(O.first=j),P&&(P.next=j),d?O.size++:E.size++,A!=="F"&&(O.index[A]=j)),E},N=function(E,k){var C=S(E),O=h(k),j;if(O!=="F")return C.index[O];for(j=C.first;j;j=j.next)if(j.key===k)return j};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(E){var k=this,C=S(k),O=N(k,E);if(O){var j=O.next,P=O.previous;delete C.index[O.index],O.removed=!0,P&&(P.next=j),j&&(j.previous=P),C.first===O&&(C.first=j),C.last===O&&(C.last=P),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),j;j=j?j.next:C.first;)for(O(j.value,j.key,this);j&&j.removed;)j=j.previous},has:function(k){return!!N(this,k)}}),r(x,y?{get:function(k){var C=N(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,b,y){var v=b+" Iterator",w=m(b),x=m(v);a(g,b,function(S,_){p(this,{type:v,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(b)}},l2}var GK;function GRe(){if(GK)return RK;GK=1;var t=G$(),e=pae();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),RK}var YK;function YRe(){return YK||(YK=1,GRe()),IK}var QK={},c2,XK;function mae(){return XK||(XK=1,c2=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),c2}var u2,JK;function QRe(){if(JK)return u2;JK=1;var t=xi(),e=mae(),r=t("Map");return u2={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},u2}var ZK;function XRe(){if(ZK)return QK;ZK=1;var t=Pe(),e=at(),r=Ho(),n=Uo(),i=Sb(),s=QRe(),o=xh(),a=it(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,b){n(g),r(b);var y=new l,v=0;return i(g,function(w){var x=b(w,v++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),QK}var eG={},d2,tG;function JRe(){if(tG)return d2;tG=1;var t=at(),e=_h(),r=Wi(),n=Uo(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return d2={codeAt:a(!1),charAt:a(!0)},d2}var rG;function Q$(){if(rG)return eG;rG=1;var t=JRe().charAt,e=Wi(),r=su(),n=R$(),i=M$(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),eG}var h2,nG;function ZRe(){if(nG)return h2;nG=1,kh(),YRe(),XRe(),Q$();var t=Et();return h2=t.Map,h2}var f2,iG;function eMe(){if(iG)return f2;iG=1;var t=ZRe();return Th(),f2=t,f2}var p2,sG;function tMe(){return sG||(sG=1,p2=eMe()),p2}var rMe=tMe(),X$=Be(rMe);class nMe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},wr(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&wt(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new X$,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var oG={},aG;function iMe(){if(aG)return oG;aG=1;var t=Pe();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),oG}var m2,lG;function sMe(){if(lG)return m2;lG=1,iMe();var t=Et();return m2=t.Number.isNaN,m2}var g2,cG;function oMe(){if(cG)return g2;cG=1;var t=sMe();return g2=t,g2}var y2,uG;function aMe(){return uG||(uG=1,y2=oMe()),y2}var lMe=aMe(),AI=Be(lMe),dG={},v2,hG;function cMe(){if(hG)return v2;hG=1;var t=zt(),e=t.isFinite;return v2=Number.isFinite||function(n){return typeof n=="number"&&e(n)},v2}var fG;function uMe(){if(fG)return dG;fG=1;var t=Pe(),e=cMe();return t({target:"Number",stat:!0},{isFinite:e}),dG}var b2,pG;function dMe(){if(pG)return b2;pG=1,uMe();var t=Et();return b2=t.Number.isFinite,b2}var x2,mG;function hMe(){if(mG)return x2;mG=1;var t=dMe();return x2=t,x2}var w2,gG;function fMe(){return gG||(gG=1,w2=hMe()),w2}var pMe=fMe(),zl=Be(pMe),yG={},vG;function mMe(){if(vG)return yG;vG=1;var t=Pe(),e=yl().some,r=Oh(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),yG}var S2,bG;function gMe(){if(bG)return S2;bG=1,mMe();var t=on();return S2=t("Array","some"),S2}var _2,xG;function yMe(){if(xG)return _2;xG=1;var t=kr(),e=gMe(),r=Array.prototype;return _2=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},_2}var E2,wG;function vMe(){if(wG)return E2;wG=1;var t=yMe();return E2=t,E2}var N2,SG;function bMe(){return SG||(SG=1,N2=vMe()),N2}var xMe=bMe(),wMe=Be(xMe),C2={exports:{}},_G={},EG;function SMe(){if(EG)return _G;EG=1;var t=Pe(),e=mr(),r=Hi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),_G}var NG;function _Me(){if(NG)return C2.exports;NG=1,SMe();var t=Et(),e=t.Object,r=C2.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),C2.exports}var k2,CG;function gae(){if(CG)return k2;CG=1;var t=_Me();return k2=t,k2}var T2,kG;function EMe(){if(kG)return T2;kG=1;var t=gae();return T2=t,T2}var O2,TG;function NMe(){if(TG)return O2;TG=1;var t=EMe();return O2=t,O2}var j2,OG;function CMe(){return OG||(OG=1,j2=NMe()),j2}var kMe=CMe(),TMe=Be(kMe),jG={},PG;function OMe(){if(PG)return jG;PG=1;var t=Tr(),e=Hi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),jG}var IG={},RG;function jMe(){return RG||(RG=1,voe()),IG}var MG={},$G;function PMe(){return $G||($G=1,boe()),MG}var DG={},AG;function IMe(){if(AG)return DG;AG=1;var t=Xt();return t("metadata"),DG}var P2,FG;function RMe(){if(FG)return P2;FG=1;var t=Eoe();return OMe(),jMe(),PMe(),IMe(),P2=t,P2}var qG={},I2,LG;function yae(){if(LG)return I2;LG=1;var t=xi(),e=at(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return I2=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},I2}var BG;function MMe(){if(BG)return qG;BG=1;var t=Pe(),e=yae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),qG}var zG={},R2,VG;function vae(){if(VG)return R2;VG=1;for(var t=wh(),e=xi(),r=at(),n=km(),i=Tr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return R2=function(g){if(o&&o(g))return!0;try{for(var b=l(g),y=0,v=a(c),w=v.length;y<w;y++)if(c[v[y]]==b)return!0}catch{}return!1},R2}var UG;function $Me(){if(UG)return zG;UG=1;var t=Pe(),e=vae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),zG}var HG={},WG;function DMe(){if(WG)return HG;WG=1;var t=Xt();return t("customMatcher"),HG}var KG={},GG;function AMe(){if(GG)return KG;GG=1;var t=Xt();return t("observable"),KG}var YG={},QG;function FMe(){if(QG)return YG;QG=1;var t=Pe(),e=yae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),YG}var XG={},JG;function qMe(){if(JG)return XG;JG=1;var t=Pe(),e=vae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),XG}var ZG={},eY;function LMe(){if(eY)return ZG;eY=1;var t=Xt();return t("matcher"),ZG}var tY={},rY;function BMe(){if(rY)return tY;rY=1;var t=Xt();return t("metadataKey"),tY}var nY={},iY;function zMe(){if(iY)return nY;iY=1;var t=Xt();return t("patternMatch"),nY}var sY={},oY;function VMe(){if(oY)return sY;oY=1;var t=Xt();return t("replaceAll"),sY}var M2,aY;function UMe(){if(aY)return M2;aY=1;var t=RMe();return MMe(),$Me(),DMe(),AMe(),FMe(),qMe(),LMe(),BMe(),zMe(),VMe(),M2=t,M2}var $2,lY;function HMe(){return lY||(lY=1,$2=UMe()),$2}var WMe=HMe(),qg=Be(WMe),D2,cY;function KMe(){if(cY)return D2;cY=1,kh(),Q$(),xoe();var t=gb();return D2=t.f("iterator"),D2}var A2,uY;function GMe(){if(uY)return A2;uY=1;var t=KMe();return Th(),A2=t,A2}var F2,dY;function YMe(){if(dY)return F2;dY=1;var t=GMe();return F2=t,F2}var q2,hY;function QMe(){if(hY)return q2;hY=1;var t=YMe();return q2=t,q2}var L2,fY;function XMe(){return fY||(fY=1,L2=QMe()),L2}var JMe=XMe(),ZMe=Be(JMe);function $p(t){"@babel/helpers - typeof";return $p=typeof qg=="function"&&typeof ZMe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof qg=="function"&&e.constructor===qg&&e!==qg.prototype?"symbol":typeof e},$p(t)}var B2,pY;function e$e(){if(pY)return B2;pY=1,woe();var t=gb();return B2=t.f("toPrimitive"),B2}var z2,mY;function t$e(){if(mY)return z2;mY=1;var t=e$e();return z2=t,z2}var V2,gY;function r$e(){if(gY)return V2;gY=1;var t=t$e();return V2=t,V2}var U2,yY;function n$e(){if(yY)return U2;yY=1;var t=r$e();return U2=t,U2}var H2,vY;function i$e(){return vY||(vY=1,H2=n$e()),H2}var s$e=i$e(),o$e=Be(s$e);function a$e(t,e){if($p(t)!="object"||!t)return t;var r=t[o$e];if(r!==void 0){var n=r.call(t,e);if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l$e(t){var e=a$e(t,"string");return $p(e)=="symbol"?e:e+""}function mo(t,e,r){return(e=l$e(e))in t?TMe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var bY={},W2,xY;function c$e(){if(xY)return W2;xY=1;var t=zt(),e=it(),r=at(),n=Wi(),i=Coe().trim,s=$$(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,c=l&&l.iterator,d=1/a(s+"-0")!==-1/0||c&&!e(function(){a(Object(c))});return W2=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,W2}var wY;function u$e(){if(wY)return bY;wY=1;var t=Pe(),e=c$e();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),bY}var K2,SY;function d$e(){if(SY)return K2;SY=1,u$e();var t=Et();return K2=t.parseFloat,K2}var G2,_Y;function h$e(){if(_Y)return G2;_Y=1;var t=d$e();return G2=t,G2}var Y2,EY;function f$e(){return EY||(EY=1,Y2=h$e()),Y2}var p$e=f$e(),bae=Be(p$e),NY={},CY;function m$e(){if(CY)return NY;CY=1;var t=Pe(),e=it(),r=j$().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),NY}var Q2,kY;function g$e(){if(kY)return Q2;kY=1,m$e();var t=Et(),e=t.Object;return Q2=function(n){return e.getOwnPropertyNames(n)},Q2}var X2,TY;function y$e(){if(TY)return X2;TY=1;var t=g$e();return X2=t,X2}var J2,OY;function v$e(){return OY||(OY=1,J2=y$e()),J2}var b$e=v$e(),x$e=Be(b$e),Z2,jY;function w$e(){if(jY)return Z2;jY=1,yoe();var t=Et();return Z2=t.Object.getOwnPropertySymbols,Z2}var eO,PY;function S$e(){if(PY)return eO;PY=1;var t=w$e();return eO=t,eO}var tO,IY;function _$e(){return IY||(IY=1,tO=S$e()),tO}var E$e=_$e(),il=Be(E$e),rO={exports:{}},RY={},MY;function N$e(){if(MY)return RY;MY=1;var t=Pe(),e=it(),r=ys(),n=cb().f,i=mr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),RY}var $Y;function C$e(){if($Y)return rO.exports;$Y=1,N$e();var t=Et(),e=t.Object,r=rO.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),rO.exports}var nO,DY;function k$e(){if(DY)return nO;DY=1;var t=C$e();return nO=t,nO}var iO,AY;function T$e(){return AY||(AY=1,iO=k$e()),iO}var O$e=T$e(),vl=Be(O$e),FY={},qY;function j$e(){if(qY)return FY;qY=1;var t=Pe(),e=mr(),r=tje(),n=ys(),i=cb(),s=fb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),FY}var sO,LY;function P$e(){if(LY)return sO;LY=1,j$e();var t=Et();return sO=t.Object.getOwnPropertyDescriptors,sO}var oO,BY;function I$e(){if(BY)return oO;BY=1;var t=P$e();return oO=t,oO}var aO,zY;function R$e(){return zY||(zY=1,aO=I$e()),aO}var M$e=R$e(),sl=Be(M$e),lO={exports:{}},VY={},UY;function $$e(){if(UY)return VY;UY=1;var t=Pe(),e=mr(),r=O$().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),VY}var HY;function D$e(){if(HY)return lO.exports;HY=1,$$e();var t=Et(),e=t.Object,r=lO.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),lO.exports}var cO,WY;function A$e(){if(WY)return cO;WY=1;var t=D$e();return cO=t,cO}var uO,KY;function F$e(){return KY||(KY=1,uO=A$e()),uO}var q$e=F$e(),_b=Be(q$e),dO,GY;function L$e(){return GY||(GY=1,dO=gae()),dO}var B$e=L$e(),Eb=Be(B$e);function J$(t,e){const r=["node","edge","label"];let n=!0;const i=la(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(wt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=la(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function FI(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function Jv(t){return typeof t=="string"&&t!==""}function xae(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var hO,YY;function z$e(){if(YY)return hO;YY=1,kh();var t=on();return hO=t("Array","values"),hO}var fO,QY;function V$e(){if(QY)return fO;QY=1;var t=z$e();return fO=t,fO}var pO,XY;function U$e(){if(XY)return pO;XY=1,Th();var t=Nh(),e=sn(),r=kr(),n=V$e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return pO=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},pO}var mO,JY;function H$e(){return JY||(JY=1,mO=U$e()),mO}var W$e=H$e(),wae=Be(W$e);class K$e{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=wr({},wae(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};wr(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const G$e={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class ZY{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=G$e[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class Y$e{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let c=0;return o!==""&&(c=this.ctx.measureText(o).width),{width:c,values:l}};this.lines=new K$e(s)}process(e){if(!Jv(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.splitStringIntoLines(c,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.lines.append(c,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new ZY(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new ZY(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(js(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(js(o).call(o,0,a),r),i[0]=js(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=js(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=js(i).call(i,o)}}}}const nf=["bold","ital","boldital","mono"];class id{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),Jv(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(et(nf,r=>{this.fontOptions[r]={}}),id.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}et(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=la(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=la(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=la(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=la(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=la(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=la(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),Pt(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=J$("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};id.parseFontString(s,i)&&(i=s),et(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(wt(nf).call(nf,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(id.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<nf.length;++n){const i=nf[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);et(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let c=0;c<a.blocks.length;c++){const d=a.blocks[c];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=Mi(i,o),s=Mi(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,c,d){return c==="normal"?d==="mod"?"":l[d]:l[c][d]!==void 0?l[c][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new Y$e(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class au{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Mm(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let Q$e=class extends au{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),ooe(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class Z$ extends au{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),C$(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let X$e=class extends Z${constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class J$e extends Z${constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class bl extends au{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),pOe(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const c=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,c,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function eQ(t,e){var r=or(t);if(il){var n=il(t);e&&(n=Un(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function Z$e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=eQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):sl?_b(t,sl(i)):kt(n=eQ(Object(i))).call(n,function(s){Eb(t,s,vl(i,s))})}return t}class eDe extends bl{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:Z$e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class tDe extends au{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),aoe(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let rDe=class extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class nDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class tQ extends au{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),TI(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class iDe extends au{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let sDe=class extends Z${constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const c=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:c)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=Mi(f,o.opacity),p=Mi(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Mm(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class oDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class aDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class lDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class cDe extends au{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let uDe=class extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class dDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function rQ(t,e){var r=or(t);if(il){var n=il(t);e&&(n=Un(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function nQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=rQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):sl?_b(t,sl(i)):kt(n=rQ(Object(i))).call(n,function(s){Eb(t,s,vl(i,s))})}return t}class Lt{constructor(e,r,n,i,s,o){this.options=Qa(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new id(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;wt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=wt(r=this.edges).call(r,e);if(n!=-1){var i;_o(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");Lt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=is(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=is(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=bae(e.value)),Lt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=J$("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&Lt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(Lt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Un(i=x$e(r)).call(i,c=>r[c]!=null);l.push("font"),Qv(l,e,a),e.color=RI(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(Qv(["color","fixed","shadow"],e,r,n),Lt.checkMass(r),e.opacity!==void 0&&(Lt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(Lt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!Lt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),ji(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=RI(r.color);eae(e.color,a)}else n===!0&&r.color===null&&(e.color=Qa(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Qa(i.font)),Lt.updateGroupOptions(e,r,s),r.scaling!==void 0&&ji(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=Mi(e.borderColor,r),e.color=Mi(e.color,r),e.shadowColor=Mi(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),Lt.updateGroupOptions(this.options,nQ(nQ({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new Q$e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new X$e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new J$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new eDe(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new tDe(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new rDe(this.options,this.body,this.labelModule);break;case"dot":this.shape=new nDe(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new tQ(this.options,this.body,this.labelModule);break;case"icon":this.shape=new iDe(this.options,this.body,this.labelModule);break;case"image":this.shape=new sDe(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new oDe(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new aDe(this.options,this.body,this.labelModule);break;case"star":this.shape=new lDe(this.options,this.body,this.labelModule);break;case"text":this.shape=new cDe(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new uDe(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new dDe(this.options,this.body,this.labelModule);break;default:this.shape=new tQ(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&FI(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),FI(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",iae),e.mass=1}}}class hDe{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=ne(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,c){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(c-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Qa(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",ne(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",ne(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{et(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(Lt.parseOptions(this.options,e),e.opacity!==void 0&&(AI(e.opacity)||!zl(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of or(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(Jse("id",e))this.body.data.nodes=e;else if(ur(e))this.body.data.nodes=new Ud,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Ud;else throw new TypeError("Array or DataSet expected");if(n&&et(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;et(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const c=r[o];l!==void 0?l.setOptions(c)&&(s=!0):(s=!0,l=this.create(c),i[a]=l)}!s&&n!==void 0&&(s=wMe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;et(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(ur(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),Eo(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var iQ={},sQ;function fDe(){if(sQ)return iQ;sQ=1;var t=Pe(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,c=0,d=arguments.length,h=0,f,p;c<d;)f=r(arguments[c++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),iQ}var gO,oQ;function pDe(){if(oQ)return gO;oQ=1,fDe();var t=Et();return gO=t.Math.hypot,gO}var yO,aQ;function mDe(){if(aQ)return yO;aQ=1;var t=pDe();return yO=t,yO}var vO,lQ;function gDe(){return lQ||(lQ=1,vO=mDe()),vO}var yDe=gDe(),vDe=Be(yDe);class hr{static transform(e,r){ur(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],c=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*c,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let bDe=class extends hr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class xDe extends hr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class wDe{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class SDe{static draw(e,r){const n={x:-.4,y:0};hr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class _De{static draw(e,r){const n={x:-.3,y:0};hr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class EDe{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class NDe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class CDe{static draw(e,r){const n={x:-.4,y:0};return hr.transform(n,r),C$(e,n.x,n.y,r.length*.4),!0}}class kDe{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class TDe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class ODe{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class jDe{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class Sae{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return bDe.draw(e,r);case"circle":return CDe.draw(e,r);case"box":return TDe.draw(e,r);case"crow":return wDe.draw(e,r);case"curve":return SDe.draw(e,r);case"diamond":return ODe.draw(e,r);case"inv_curve":return _De.draw(e,r);case"triangle":return EDe.draw(e,r);case"inv_triangle":return NDe.draw(e,r);case"bar":return kDe.draw(e,r);case"vee":return jDe.draw(e,r);case"arrow":default:return xDe.draw(e,r)}}}function cQ(t,e){var r=or(t);if(il){var n=il(t);e&&(n=Un(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function uQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=cQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):sl?_b(t,sl(i)):kt(n=cQ(Object(i))).call(n,function(s){Eb(t,s,vl(i,s))})}return t}class _ae{constructor(e,r,n){mo(this,"color",{}),mo(this,"colorDirty",!0),mo(this,"hoverWidth",1.5),mo(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=ur(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)loe(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=js(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=xae(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,c=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const b=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,b)+m,v=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-v;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<c);return uQ(uQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=Mi(this.from.options.color.border,r.opacity),s=Mi(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?Mi(this.to.options.color.border,r.opacity):Mi(this.from.options.color.border,r.opacity)}else return Mi(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,c=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,c]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-c)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,c=a*a+l*l;let d=((s-e)*a+(o-r)*l)/c;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,c,d,h,f,p;const m=o.width;r==="from"?(c=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(c=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(c=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(c!=d){const w=vDe(c.x-d.x,c.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(c,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(c.y-d.y,c.x-d.x),l=this._findBorderPosition(c,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),N=this.getPoint(.5-S,n);a=Math.atan2(_.y-N.y,_.x-N.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:-1});a=E.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=E}else if(r==="to"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:1});a=E.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=E}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const b=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:b,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,Sae.draw(e,s)&&(this.enableShadow(e,r),Mm(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=ur(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function dQ(t,e){var r=or(t);if(il){var n=il(t);e&&(n=Un(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function hQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=dQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):sl?_b(t,sl(i)):kt(n=dQ(Object(i))).call(n,function(s){Eb(t,s,vl(i,s))})}return t}class eD extends _ae{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,c=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(c=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(c.y-d.y,c.x-d.x),g=c.distanceToBorder(r,m)+f,b=Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)),y=g-b;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return hQ(hQ({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,c,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(c=this._getDistanceToLine(m,g,f,p,s,o),l=c<l?c:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class fQ extends eD{constructor(e,r,n){super(e,r,n),mo(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class pQ extends eD{constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class PDe extends eD{constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let c=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,b=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(d,h,g,b,s,o);c=y<c?y:c}d=g,h=b}return c}}class mQ extends PDe{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class gQ extends _ae{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),c=e.distanceToBorder(r,s),d=(l-c)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class Xa{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Qa(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new id(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;Xa.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=bae(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=J$("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Ph(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(zl(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(zl(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Jv(r.label)?e.label=r.label:Jv(e.label)||(e.label=void 0),ji(e,r,"smooth",i),ji(e,r,"shadow",i),ji(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=uc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),ji(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=uc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=wt(a).call(a,"to")!=-1,e.arrows.middle.enabled=wt(a).call(a,"middle")!=-1,e.arrows.from.enabled=wt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")ji(e.arrows,r.arrows,"to",i.arrows),ji(e.arrows,r.arrows,"middle",i.arrows),ji(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Rm(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=uc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=rd(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)Pt(l,i.color,!1,n);else for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&delete l[c];if(rd(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let c=!1;a.color!==void 0&&(l.color=a.color,c=!0),a.highlight!==void 0&&(l.highlight=a.highlight,c=!0),a.hover!==void 0&&(l.hover=a.hover,c=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),c===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Qa(i.color));n===!0&&r.font===null&&(e.font=Qa(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof fQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof mQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof pQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof gQ&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new fQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new mQ(this.options,this.body,this.labelModule):this.edgeType=new pQ(this.options,this.body,this.labelModule):this.edgeType=new gQ(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=xae(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();FI(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class IDe{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=ne(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const c=1/(o-s);return Math.max(0,(l-s)*c)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Pt(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],c=e.body.data.edges.get(a);if(c!=null){const d=c.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",ne(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",ne(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{et(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){Xa.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(Jse("id",e))this.body.data.edges=e;else if(ur(e))this.body.data.edges=new Ud,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Ud;else throw new TypeError("Array or DataSet expected");if(n&&et(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){et(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;et(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){et(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new Xa(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];et(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];kt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class Eae{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=xb("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let b=1;b<i;b++){const y=e[r[b]],v=y.x,w=y.y;y.options.mass>0&&(v<s&&(s=v),v>a&&(a=v),w<o&&(o=w),w>l&&(l=w))}const c=Math.abs(a-s)-Math.abs(l-o);c>0?(o-=.5*c,l+=.5*c):(s+=.5*c,a-=.5*c);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let b=0;b<i;b++)n=e[r[b]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class RDe{constructor(e,r,n){this._rng=xb("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=c[d[g]];for(let b=g+1;b<d.length;b++)l=c[d[b]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class MDe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const c=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<c?m=-Math.pow(p*f,2)+Math.pow(p*c,2):m=0,f!==0&&(m=m/f);const g=d*m,b=h*m;n[o.id].x-=g,n[o.id].y-=b,n[l.id].x+=g,n[l.id].y+=b}}}}}class bO{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,c=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=c),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=c)}}class $De{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=c[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let b=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];b+=p[S].x,y+=p[S].y}const v=b/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=v,p[S].y-=w}}}class dy{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const c=o[l];i=s[c],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class DDe extends Eae{constructor(e,r,n){super(e,r,n),this._rng=xb("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,c=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=c}}class ADe extends dy{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class FDe{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},wr(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Qv(["stabilization"],this.options,e),ji(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||AI(r.x))&&(r.x=0),(typeof r.y!="number"||AI(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new DDe(this.body,this.physicsBody,e),this.edgesSolver=new bO(this.body,this.physicsBody,e),this.gravitySolver=new ADe(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new RDe(this.body,this.physicsBody,e),this.edgesSolver=new bO(this.body,this.physicsBody,e),this.gravitySolver=new dy(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new MDe(this.body,this.physicsBody,e),this.edgesSolver=new $De(this.body,this.physicsBody,e),this.gravitySolver=new dy(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new Eae(this.body,this.physicsBody,e),this.edgesSolver=new bO(this.body,this.physicsBody,e),this.gravitySolver=new dy(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=ne(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=Wv();this.physicsTick(),(Wv()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&Eo(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=or(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,Eo(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;Eo(ne(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),c=Math.min(Math.max(5,l),15),d=3*c,h=MI((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=c,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,Sae.draw(e,{type:"arrow",point:f,angle:p,length:d}),Mm(e).call(e)}}}const Qr=[];for(let t=0;t<256;++t)Qr.push((t+256).toString(16).slice(1));function qDe(t,e=0){return(Qr[t[e+0]]+Qr[t[e+1]]+Qr[t[e+2]]+Qr[t[e+3]]+"-"+Qr[t[e+4]]+Qr[t[e+5]]+"-"+Qr[t[e+6]]+Qr[t[e+7]]+"-"+Qr[t[e+8]]+Qr[t[e+9]]+"-"+Qr[t[e+10]]+Qr[t[e+11]]+Qr[t[e+12]]+Qr[t[e+13]]+Qr[t[e+14]]+Qr[t[e+15]]).toLowerCase()}let xO;const LDe=new Uint8Array(16);function BDe(){if(!xO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");xO=crypto.getRandomValues.bind(crypto)}return xO(LDe)}const zDe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var yQ={randomUUID:zDe};function VDe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??BDe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,qDe(n)}function Vf(t,e,r){return yQ.randomUUID&&!t?yQ.randomUUID():VDe(t)}class Nn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(Pt(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):Pt(n,e.options,!0),n}}class UDe extends Lt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],et(r.edges,n=>{delete this.containedEdges[n.id]}),et(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},et(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},et(r.edges,n=>{et(this.edges,i=>{var s,o;const a=wt(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(et(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),_o(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class HDe{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},wr(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};et(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,et(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let c=0;c<this.body.nodeIndices.length;c++){const d={},h={},f=this.body.nodeIndices[c],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(b){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=Nn.cloneOptions(b);return r.joinCondition(y)};let g=!0;for(let b=0;b<a.length;b++){o=a[b];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(or(d).length>0&&or(h).length>0&&g===!0){const y=function(){for(let v=0;v<i.length;++v)for(const w in d)if(i[v].nodes[w]!==void 0)return i[v]}();if(y!==void 0){for(const v in d)y.nodes[v]===void 0&&(y.nodes[v]=d[v]);for(const v in h)y.edges[v]===void 0&&(y.edges[v]=h[v])}else i.push({nodes:d,edges:h})}}}}for(let c=0;c<i.length;c++)this._cluster(i[c].nodes,i[c].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,c=Nn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=Nn.cloneOptions(this.body.nodes[p]);r.joinCondition(c,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=Hd(n=or(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];wt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,c,d;const h=or(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let b=0;b<a.edges.length;b++)s=a.edges[b],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,c=s.fromId,d=c):(l=s.toId,c=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:c,toId:l}))}const p=[],m=function(g){for(let b=0;b<p.length;b++){const y=p[b],v=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(v||w)return y}return null};for(let g=0;g<f.length;g++){const b=f[g],y=b.edge;let v=m(b);v===null?(v=this._createClusteredEdge(b.fromId,b.toId,y,i),p.push(v)):v.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=v.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(or(e).length==0||or(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=Pt({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=Nn.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=Nn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+Vf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const c=this.body.functions.createNode(o,UDe);c.containedNodes=e,c.containedEdges=r,c.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=c,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=or(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=wt(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else et(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const c=[];for(let d=0;d<i.edges.length;d++)c.push(i.edges[d]);for(let d=0;d<c.length;d++){const h=c[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],b=this.body.edges[g];if(b!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[b.id]=b,delete l[b.id];let v=b.fromId,w=b.toId;b.toId==f?w=p.clusterId:v=p.clusterId,this._createClusteredEdge(v,w,b,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(b)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),cc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return cc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const c=l.clusteringEdgeReplacingIds;if(c===void 0)i.push(a);else for(let d=0;d<c.length;++d){const h=c[d];wt(r).call(r,c)!==-1||wt(n).call(n,c)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const c=this.body.nodes[this.body.nodeIndices[l]];c.edges.length>i&&(i=c.edges.length),e+=c.edges.length,r+=Math.pow(c.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=Nn.cloneOptions(n,"edge");Pt(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+Vf(),s!==void 0&&Pt(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof Xa){const s=r,o={};o[s.id]=s,r=o}if(e instanceof Lt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return et(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{et(this.body.nodes,c=>{c.isCluster===!0&&l(c)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let c=0;c<r.length;c++)delete l.containedNodes[r[c]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];et(this.clusteredEdges,l=>{const c=this.body.edges[l];(c===void 0||!c.endPointsValid())&&(n[l]=l)}),i(function(l){et(l.containedEdges,(c,d)=>{!c.endPointsValid()&&!n[d]&&(n[d]=d)})}),et(this.body.edges,(l,c)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;et(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[c]=c)}),i(l=>{et(n,c=>{delete l.containedEdges[c],et(l.edges,(d,h)=>{if(d.id===c){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),et(n,l=>{delete this.clusteredEdges[l]}),et(n,l=>{delete this.body.edges[l]});const s=or(this.body.edges);et(s,l=>{const c=this.body.edges[l],d=this._isClusteredNode(c.fromId)||this._isClusteredNode(c.toId);if(d!==this._isClusteredEdge(c.id))if(d){const h=this._getClusterNodeForNode(c.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[c.fromId],c,h);const f=this._getClusterNodeForNode(c.toId);f!==void 0&&this._clusterEdges(this.body.nodes[c.toId],c,f)}else delete this._clusterEdges[l],this._restoreEdge(c)});let o=!1,a=!0;for(;a;){const l=[];i(function(c){const d=or(c.containedNodes).length,h=c.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(c.id)});for(let c=0;c<l.length;++c)this.openCluster(l[c],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class WDe{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},wr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=Eo(()=>{var r;this.zooming=!1,ne(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",ne(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&Ph(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(ne(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,c=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:c.y,left:c.x,bottom:d.y,right:d.x},f=[];for(let b=0;b<i.length;b++)if(s=n[i[b]],s.hover)a.push(i[b]);else if(s.isSelected())o.push(i[b]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const b=s.draw(e);b.drawExternalLabel!=null&&f.push(b.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const b=s.draw(e);b.drawExternalLabel!=null&&f.push(b.drawExternalLabel)}return{drawExternalLabels:()=>{for(const b of f)b()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var wO,vQ;function KDe(){if(vQ)return wO;vQ=1,Ooe();var t=Et();return wO=t.setInterval,wO}var SO,bQ;function GDe(){return bQ||(bQ=1,SO=KDe()),SO}var YDe=GDe(),QDe=Be(YDe);function Zv(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function Nae(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class XDe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},wr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",ne(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&Ph(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=QDe(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=ne(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;kt(e=cc(r=_o(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(wt(e).call(e,"%")!==-1||wt(e).call(e,"px")!==-1)return e;if(wt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new nd(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:nd.DIRECTION_ALL}),Zv(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new nd(this.frame),Nae(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function JDe(t,e){const r=wr({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!ur(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class ZDe{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",ne(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",ne(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=JDe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=Nn.getRange(this.body.nodes,e.nodes);else if(r===!0){let c=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(c+=1);if(c>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=Nn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=Nn.getRange(this.body.nodes,e.nodes);const c=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/c,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:Nn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!zl(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!zl(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!zl(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!zl(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=ne(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=ne(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=aRe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=ne(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function xQ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){c(d,"keydown")},l=function(d){c(d,"keyup")},c=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class eAe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new nd(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;Zv(a,ne(n=this._fit).call(n,this))}else{var i;Zv(a,ne(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new nd(this.canvas.frame);Nae(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=ne(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=xQ({container:window,preventDefault:!0}):this.keycharm=xQ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,c,d,h,f,p,m,g,b,y,v,w,x,S,_,N,E;ne(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),ne(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),ne(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),ne(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),ne(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(c=this.keycharm).call(c,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),ne(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),ne(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),ne(b=this.keycharm).call(b,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),ne(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(v=this.keycharm).call(v,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(N=this.keycharm).call(N,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(E=this.keycharm).call(E,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class tAe{constructor(e,r,n){var i,s,o,a,l,c,d,h,f,p,m,g,b;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new eAe(e,r),this.body.eventListeners.onTap=ne(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=ne(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=ne(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=ne(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=ne(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=ne(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=ne(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=ne(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=ne(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=ne(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=ne(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=ne(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=ne(b=this.getPointer).call(b,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},wr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(Qv(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),ji(this.options,e,"keyboard"),e.tooltip&&(wr(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=RI(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-nRe(this.canvas.frame.canvas),y:e.y-iRe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];wt(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=wr({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;kt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Un(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});kt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(kt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const c=this.canvas.canvasToDOM(i);this.drag.pointer.x=c.x,this.drag.pointer.y=c.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=Eo(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,c=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=c[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,c=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=c[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new mRe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var wQ={},SQ={},_Q;function rAe(){if(_Q)return SQ;_Q=1;var t=G$(),e=pae();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),SQ}var EQ;function nAe(){return EQ||(EQ=1,rAe()),wQ}var NQ={},_O,CQ;function lu(){if(CQ)return _O;CQ=1;var t=bh(),e=TypeError;return _O=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},_O}var EO,kQ;function cu(){if(kQ)return EO;kQ=1;var t=xi(),e=mae(),r=t("Set"),n=r.prototype;return EO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},EO}var NO,TQ;function uu(){if(TQ)return NO;TQ=1;var t=ii();return NO=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},NO}var CO,OQ;function Lm(){if(OQ)return CO;OQ=1;var t=uu();return CO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},CO}var kO,jQ;function tD(){if(jQ)return kO;jQ=1;var t=cu(),e=Lm(),r=t.Set,n=t.add;return kO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},kO}var TO,PQ;function Bm(){return PQ||(PQ=1,TO=function(t){return t.size}),TO}var OO,IQ;function iAe(){return IQ||(IQ=1,OO=function(t){return{iterator:t,next:t.next,done:!1}}),OO}var jO,RQ;function du(){if(RQ)return jO;RQ=1;var t=Ho(),e=Hs(),r=ii(),n=_h(),i=iAe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},jO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},jO}var PO,MQ;function sAe(){if(MQ)return PO;MQ=1;var t=lu(),e=cu(),r=tD(),n=Bm(),i=du(),s=Lm(),o=uu(),a=e.has,l=e.remove;return PO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},PO}var IO,$Q;function hu(){return $Q||($Q=1,IO=function(){return!1}),IO}var DQ;function oAe(){if(DQ)return NQ;DQ=1;var t=Pe(),e=sAe(),r=it(),n=hu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),NQ}var AQ={},RO,FQ;function aAe(){if(FQ)return RO;FQ=1;var t=lu(),e=cu(),r=Bm(),n=du(),i=Lm(),s=uu(),o=e.Set,a=e.add,l=e.has;return RO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},RO}var qQ;function lAe(){if(qQ)return AQ;qQ=1;var t=Pe(),e=it(),r=aAe(),n=hu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),AQ}var LQ={},MO,BQ;function cAe(){if(BQ)return MO;BQ=1;var t=lu(),e=cu().has,r=Bm(),n=du(),i=Lm(),s=uu(),o=W$();return MO=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},MO}var zQ;function uAe(){if(zQ)return LQ;zQ=1;var t=Pe(),e=cAe(),r=hu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),LQ}var VQ={},$O,UQ;function dAe(){if(UQ)return $O;UQ=1;var t=lu(),e=Bm(),r=Lm(),n=du();return $O=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},$O}var HQ;function hAe(){if(HQ)return VQ;HQ=1;var t=Pe(),e=dAe(),r=hu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),VQ}var WQ={},DO,KQ;function fAe(){if(KQ)return DO;KQ=1;var t=lu(),e=cu().has,r=Bm(),n=du(),i=uu(),s=W$();return DO=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},DO}var GQ;function pAe(){if(GQ)return WQ;GQ=1;var t=Pe(),e=fAe(),r=hu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),WQ}var YQ={},AO,QQ;function mAe(){if(QQ)return AO;QQ=1;var t=lu(),e=cu(),r=tD(),n=du(),i=uu(),s=e.add,o=e.has,a=e.remove;return AO=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},AO}var FO,XQ;function Cae(){return XQ||(XQ=1,FO=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),FO}var JQ;function gAe(){if(JQ)return YQ;JQ=1;var t=Pe(),e=mAe(),r=Cae(),n=hu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),YQ}var ZQ={},qO,eX;function yAe(){if(eX)return qO;eX=1;var t=lu(),e=cu().add,r=tD(),n=du(),i=uu();return qO=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},qO}var tX;function vAe(){if(tX)return ZQ;tX=1;var t=Pe(),e=yAe(),r=Cae(),n=hu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),ZQ}var LO,rX;function bAe(){if(rX)return LO;rX=1,kh(),nAe(),oAe(),lAe(),uAe(),hAe(),pAe(),gAe(),vAe(),Q$();var t=Et();return LO=t.Set,LO}var BO,nX;function xAe(){if(nX)return BO;nX=1;var t=bAe();return Th(),BO=t,BO}var zO,iX;function wAe(){return iX||(iX=1,zO=xAe()),zO}var SAe=wAe(),fa=Be(SAe),sX={},oX={},VO,aX;function _Ae(){if(aX)return VO;aX=1;var t=at(),e=Y$(),r=wb().getWeakData,n=K$(),i=Hs(),s=gh(),o=Gr(),a=Sb(),l=yl(),c=sn(),d=su(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),b=0,y=function(x){return x.frozen||(x.frozen=new v)},v=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return v.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},VO={getConstructor:function(x,S,_,N){var E=x(function(j,P){n(j,k),h(j,{type:S,id:b++,frozen:null}),s(P)||a(P,j[N],{that:j,AS_ENTRIES:_})}),k=E.prototype,C=f(S),O=function(j,P,A){var q=C(j),R=r(i(P),!0);return R===!0?y(q).set(P,A):R[q.id]=A,j};return e(k,{delete:function(j){var P=C(this);if(!o(j))return!1;var A=r(j);return A===!0?y(P).delete(j):A&&c(A,P.id)&&delete A[P.id]},has:function(P){var A=C(this);if(!o(P))return!1;var q=r(P);return q===!0?y(A).has(P):q&&c(q,A.id)}}),e(k,_?{get:function(P){var A=C(this);if(o(P)){var q=r(P);if(q===!0)return y(A).get(P);if(q)return q[A.id]}},set:function(P,A){return O(this,P,A)}}:{add:function(P){return O(this,P,!0)}}),E}},VO}var lX;function EAe(){if(lX)return oX;lX=1;var t=hae(),e=zt(),r=at(),n=Y$(),i=wb(),s=G$(),o=_Ae(),a=Gr(),l=su().enforce,c=it(),d=poe(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,b=h.freeze,y=h.seal,v=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(j){return function(){return j(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,N=r(_.set),E=function(){return t&&c(function(){var j=b([]);return N(new S,j,1),!m(j)})};if(d)if(v){w=o.getConstructor(x,"WeakMap",!0),i.enable();var k=r(_.delete),C=r(_.has),O=r(_.get);n(_,{delete:function(j){if(a(j)&&!p(j)){var P=l(this);return P.frozen||(P.frozen=new w),k(this,j)||P.frozen.delete(j)}return k(this,j)},has:function(P){if(a(P)&&!p(P)){var A=l(this);return A.frozen||(A.frozen=new w),C(this,P)||A.frozen.has(P)}return C(this,P)},get:function(P){if(a(P)&&!p(P)){var A=l(this);return A.frozen||(A.frozen=new w),C(this,P)?O(this,P):A.frozen.get(P)}return O(this,P)},set:function(P,A){if(a(P)&&!p(P)){var q=l(this);q.frozen||(q.frozen=new w),C(this,P)?N(this,P,A):q.frozen.set(P,A)}else N(this,P,A);return this}})}else E()&&n(_,{set:function(P,A){var q;return f(P)&&(m(P)?q=b:g(P)&&(q=y)),N(this,P,A),q&&q(P),this}});return oX}var cX;function NAe(){return cX||(cX=1,EAe()),sX}var UO,uX;function CAe(){if(uX)return UO;uX=1,kh(),NAe();var t=Et();return UO=t.WeakMap,UO}var HO,dX;function kAe(){if(dX)return HO;dX=1;var t=CAe();return Th(),HO=t,HO}var WO,hX;function TAe(){return hX||(hX=1,WO=kAe()),WO}var OAe=TAe(),zm=Be(OAe);function Uf(t,e,r){jAe(t,e),e.set(t,r)}function jAe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qI(t,e,r){return t.set(kae(t,e),r),r}function jt(t,e){return t.get(kae(t,e))}function kae(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function fX(t,e){const r=new fa;for(const n of e)t.has(n)||r.add(n);return r}var Su=new zm,Xi=new zm;class pX{constructor(){Uf(this,Su,new fa),Uf(this,Xi,new fa)}get size(){return jt(Xi,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)jt(Xi,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)jt(Xi,this).delete(i)}clear(){jt(Xi,this).clear()}getSelection(){return[...jt(Xi,this)]}getChanges(){return{added:[...fX(jt(Su,this),jt(Xi,this))],deleted:[...fX(jt(Xi,this),jt(Su,this))],previous:[...new fa(jt(Su,this))],current:[...new fa(jt(Xi,this))]}}commit(){const e=this.getChanges();qI(Su,this,jt(Xi,this)),qI(Xi,this,new fa(jt(Su,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var _l=new zm,El=new zm,KO=new zm;class PAe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Uf(this,_l,new pX),Uf(this,El,new pX),Uf(this,KO,void 0),qI(KO,this,e)}get sizeNodes(){return jt(_l,this).size}get sizeEdges(){return jt(El,this).size}getNodes(){return jt(_l,this).getSelection()}getEdges(){return jt(El,this).getSelection()}addNodes(){jt(_l,this).add(...arguments)}addEdges(){jt(El,this).add(...arguments)}deleteNodes(e){jt(_l,this).delete(e)}deleteEdges(e){jt(El,this).delete(e)}clear(){jt(_l,this).clear(),jt(El,this).clear()}commit(){const e={nodes:jt(_l,this).commit(),edges:jt(El,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return jt(KO,this).call(this,e,...n),e}}class IAe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new PAe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},wr(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&Ph(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof Lt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],c=o[l];if(c.connected){const d=c.from.x,h=c.from.y,f=c.to.x,p=c.to.y,m=c.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof Lt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof Lt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof Lt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof Lt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof Lt&&n.id!=s||n instanceof Xa)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof Xa&&n.id!=s||n instanceof Lt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=or(this.hoverObj.edges).length,o=or(this.hoverObj.nodes).length,a=n instanceof Xa&&s===0&&o===0,l=n instanceof Lt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof Lt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return Hd(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return Hd(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var mX={},GO,gX;function RAe(){if(gX)return GO;gX=1;var t=Eh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return GO=r,GO}var YO,yX;function MAe(){if(yX)return YO;yX=1;var t=yh(),e=t.match(/firefox\/(\d+)/i);return YO=!!e&&+e[1],YO}var QO,vX;function $Ae(){if(vX)return QO;vX=1;var t=yh();return QO=/MSIE|Trident/.test(t),QO}var XO,bX;function DAe(){if(bX)return XO;bX=1;var t=yh(),e=t.match(/AppleWebKit\/(\d+)\./);return XO=!!e&&+e[1],XO}var xX;function AAe(){if(xX)return mX;xX=1;var t=Pe(),e=at(),r=Ho(),n=wi(),i=Wo(),s=Noe(),o=Wi(),a=it(),l=RAe(),c=Oh(),d=MAe(),h=$Ae(),f=Cm(),p=DAe(),m=[],g=e(m.sort),b=e(m.push),y=a(function(){m.sort(void 0)}),v=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,k,C,O;for(E=65;E<76;E++){switch(k=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(j,P){return P.v-j.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=y||!v||!w||!x,_=function(N){return function(E,k){return k===void 0?-1:E===void 0?1:N!==void 0?+N(E,k)||0:o(E)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var k=n(this);if(x)return E===void 0?g(k):g(k,E);var C=[],O=i(k),j,P;for(P=0;P<O;P++)P in k&&b(C,k[P]);for(l(C,_(E)),j=i(C),P=0;P<j;)k[P]=C[P++];for(;P<O;)s(k,P++);return k}}),mX}var JO,wX;function FAe(){if(wX)return JO;wX=1,AAe();var t=on();return JO=t("Array","sort"),JO}var ZO,SX;function qAe(){if(SX)return ZO;SX=1;var t=kr(),e=FAe(),r=Array.prototype;return ZO=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},ZO}var ej,_X;function LAe(){if(_X)return ej;_X=1;var t=qAe();return ej=t,ej}var tj,EX;function BAe(){return EX||(EX=1,tj=LAe()),tj}var zAe=BAe(),sd=Be(zAe),NX={},rj,CX;function VAe(){if(CX)return rj;CX=1;var t=Ho(),e=wi(),r=ab(),n=Wo(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,b=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=b;break}if(g+=b,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=b)g in p&&(h=c(h,p[g],g,f));return h}};return rj={left:o(!1),right:o(!0)},rj}var nj,kX;function UAe(){if(kX)return nj;kX=1;var t=koe();return nj=t==="NODE",nj}var TX;function HAe(){if(TX)return NX;TX=1;var t=Pe(),e=VAe().left,r=Oh(),n=Cm(),i=UAe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),NX}var ij,OX;function WAe(){if(OX)return ij;OX=1,HAe();var t=on();return ij=t("Array","reduce"),ij}var sj,jX;function KAe(){if(jX)return sj;jX=1;var t=kr(),e=WAe(),r=Array.prototype;return sj=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},sj}var oj,PX;function GAe(){if(PX)return oj;PX=1;var t=KAe();return oj=t,oj}var aj,IX;function YAe(){return IX||(IX=1,aj=GAe()),aj}var QAe=YAe(),Tae=Be(QAe);class Oae{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class XAe extends Oae{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){sd(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class JAe extends Oae{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){sd(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var RX={},MX;function ZAe(){if(MX)return RX;MX=1;var t=Pe(),e=yl().every,r=Oh(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),RX}var lj,$X;function eFe(){if($X)return lj;$X=1,ZAe();var t=on();return lj=t("Array","every"),lj}var cj,DX;function tFe(){if(DX)return cj;DX=1;var t=kr(),e=eFe(),r=Array.prototype;return cj=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},cj}var uj,AX;function rFe(){if(AX)return uj;AX=1;var t=tFe();return uj=t,uj}var dj,FX;function nFe(){return FX||(FX=1,dj=rFe()),dj}var iFe=nFe(),jae=Be(iFe);function sFe(t,e){const r=new fa;return kt(t).call(t,n=>{var i;kt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),kt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function oFe(t){return Pae(e=>{var r,n;return jae(r=Un(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function aFe(t){return Pae(e=>{var r,n;return jae(r=Un(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function Pae(t,e,r,n){var i;const s=uc(null),o=Tae(i=[...wae(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var c,d;if(!n.has(h))continue;const b=s[g.id]+l;if(kt(c=Un(d=g.edges).call(d,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(c,y=>{const v=y[a],w=s[v];(w==null||e(b,w))&&(s[v]=b,p.push(y[r]))}),m>o)return sFe(n,s);++m}}return s}class lFe{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new X$;let n=0;const i=sd(e=[...new fa(_Pe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return or(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class cFe{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+Wv()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},wr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(Ph(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),ji(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),Pt(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=xb(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const c=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(c==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const c=this.body.nodes[e[l]];c.predefinedPosition===!1&&(c.x+=(.5-this._rng())*a,c.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=Nn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=Nn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new lFe;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let v=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;v+=x+this.options.hierarchical.treeSpacing,s(w+1,v)}},s=(y,v)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,v)},o=()=>{const y=[];for(let v=0;v<this.hierarchical.numTrees();v++)y.push(this.direction.getTreeSize(v));return y},a=(y,v)=>{if(!v[y.id]&&(v[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],v)}},l=function(y){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const N in y)if(Object.prototype.hasOwnProperty.call(y,N)){const E=e.body.nodes[N],k=e.hierarchical.levels[E.id],C=e.direction.getPosition(E),[O,j]=e._getSpaceAroundNode(E,y);w=Math.min(O,w),x=Math.min(j,x),k<=v&&(S=Math.min(C,S),_=Math.max(C,_))}return[S,_,w,x]},c=(y,v)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(v.id);return Math.min(w,x)},d=(y,v,w)=>{const x=this.hierarchical;for(let S=0;S<v.length;S++){const _=v[S],N=x.distributionOrdering[_];if(N.length>1)for(let E=0;E<N.length-1;E++){const k=N[E],C=N[E+1];x.hasSameParent(k,C)&&x.inSameSubNetwork(k,C)&&y(k,C,w)}}},h=function(y,v){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(v),_=Math.abs(S-x),N=e.options.hierarchical.nodeSpacing;if(_>N){const E={},k={};a(y,E),a(v,k);const C=c(y,v),O=l(E,C),j=l(k,C),P=O[1],A=j[0],q=j[2];if(Math.abs(P-A)>N){let L=P-A+N;L<-q+N&&(L=-q+N),L<0&&(e._shiftBlock(v.id,L),r=!0,w===!0&&e._centerParent(v))}}},f=(y,v)=>{const w=v.id,x=v.edges,S=this.hierarchical.levels[v.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,N={},E=[];for(let q=0;q<x.length;q++){const R=x[q];if(R.toId!=R.fromId){const L=R.toId==w?R.from:R.to;N[x[q].id]=L,this.hierarchical.levels[L.id]<S&&E.push(R)}}const k=(q,R)=>{let L=0;for(let D=0;D<R.length;D++)if(N[R[D].id]!==void 0){const W=this.direction.getPosition(N[R[D].id])-q;L+=W/Math.sqrt(W*W+_)}return L},C=(q,R)=>{let L=0;for(let D=0;D<R.length;D++)if(N[R[D].id]!==void 0){const W=this.direction.getPosition(N[R[D].id])-q;L-=_*Math.pow(W*W+_,-1.5)}return L},O=(q,R)=>{let L=this.direction.getPosition(v);const D={};for(let W=0;W<q;W++){const z=k(L,R),U=C(L,R),K=40,fe=Math.max(-K,Math.min(K,Math.round(z/U)));if(L=L-fe,D[L]!==void 0)break;D[L]=W}return L},j=q=>{const R=this.direction.getPosition(v);if(n[v.id]===void 0){const K={};a(v,K),n[v.id]=K}const L=l(n[v.id]),D=L[2],W=L[3],z=q-R;let U=0;z>0?U=Math.min(z,W-this.options.hierarchical.nodeSpacing):z<0&&(U=-Math.min(-z,D-this.options.hierarchical.nodeSpacing)),U!=0&&(this._shiftBlock(v.id,U),r=!0)},P=q=>{const R=this.direction.getPosition(v),[L,D]=this._getSpaceAroundNode(v),W=q-R;let z=R;W>0?z=Math.min(R+(D-this.options.hierarchical.nodeSpacing),q):W<0&&(z=Math.max(R-(L-this.options.hierarchical.nodeSpacing),q)),z!==R&&(this.direction.setPosition(v,z),r=!0)};let A=O(y,E);j(A),A=O(y,x),P(A)},p=y=>{let v=this.hierarchical.getLevels();v=cc(v).call(v);for(let w=0;w<y;w++){r=!1;for(let x=0;x<v.length;x++){const S=v[x],_=this.hierarchical.distributionOrdering[S];for(let N=0;N<_.length;N++)f(1e3,_[N])}if(r!==!0)break}},m=y=>{let v=this.hierarchical.getLevels();v=cc(v).call(v);for(let w=0;w<y&&(r=!1,d(h,v,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},b=()=>{let y=this.hierarchical.getLevels();y=cc(y).call(y);for(let v=0;v<y.length;v++){const w=y[v],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&b(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,c=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);c=Math.min(c,h-o)}}return[l,c]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[c,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=or(e[n]);i=this._indexArrayToNodes(i),sd(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let c=l*s;s>0&&(c=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,c,n),this._validatePositionAndContinue(a,n,c),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);sd(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],c=this.hierarchical.levels[l.id];if(c>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,c),this._validatePositionAndContinue(l,c,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return et(e.edges,n=>{var i;wt(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;et(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return et(e,i=>{n.push(Number(i))}),sd(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;et(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(Nn.cloneOptions(i,"node"),Nn.cloneOptions(s,"node"),Nn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=Tae(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new X$);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=aFe(r):this.hierarchical.levels=oFe(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let c=0;c<l.length;c++){const d=l[c];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new XAe(this):this.direction=new JAe(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class uFe{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},wr(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",ne(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",ne(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,Pt(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,ne(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",ne(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,ne(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",ne(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=Pt({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,ne(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",ne(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",ne(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",ne(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",ne(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",ne(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,ne(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",ne(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",ne(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",ne(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",ne(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",c=>{const d=o.edgeType.findBorderPositions(c);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=Pt({},this.options.controlNodeStyle);n.id="targetNode"+Vf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},aa(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,ne(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(aa(this.editModeDiv),aa(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of _o(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),aa(this.manipulationDiv),aa(this.editModeDiv),aa(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,ne(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Rm(or(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new nd(e,{});Zv(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=wt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;_o(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=wt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;_o(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=wr({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=wr({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+Vf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(wt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(wt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:Vf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const ae="string",re="boolean",H="number",mf="array",Te="object",Iae="dom",dFe="any",hj=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],fj={borderWidth:{number:H},borderWidthSelected:{number:H,undefined:"undefined"},brokenImage:{string:ae,undefined:"undefined"},chosen:{label:{boolean:re,function:"function"},node:{boolean:re,function:"function"},__type__:{object:Te,boolean:re}},color:{border:{string:ae},background:{string:ae},highlight:{border:{string:ae},background:{string:ae},__type__:{object:Te,string:ae}},hover:{border:{string:ae},background:{string:ae},__type__:{object:Te,string:ae}},__type__:{object:Te,string:ae}},opacity:{number:H,undefined:"undefined"},fixed:{x:{boolean:re},y:{boolean:re},__type__:{object:Te,boolean:re}},font:{align:{string:ae},color:{string:ae},size:{number:H},face:{string:ae},background:{string:ae},strokeWidth:{number:H},strokeColor:{string:ae},vadjust:{number:H},multi:{boolean:re,string:ae},bold:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Te,string:ae}},boldital:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Te,string:ae}},ital:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Te,string:ae}},mono:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Te,string:ae}},__type__:{object:Te,string:ae}},group:{string:ae,number:H,undefined:"undefined"},heightConstraint:{minimum:{number:H},valign:{string:ae},__type__:{object:Te,boolean:re,number:H}},hidden:{boolean:re},icon:{face:{string:ae},code:{string:ae},size:{number:H},color:{string:ae},weight:{string:ae,number:H},__type__:{object:Te}},id:{string:ae,number:H},image:{selected:{string:ae,undefined:"undefined"},unselected:{string:ae,undefined:"undefined"},__type__:{object:Te,string:ae}},imagePadding:{top:{number:H},right:{number:H},bottom:{number:H},left:{number:H},__type__:{object:Te,number:H}},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:re},level:{number:H,undefined:"undefined"},margin:{top:{number:H},right:{number:H},bottom:{number:H},left:{number:H},__type__:{object:Te,number:H}},mass:{number:H},physics:{boolean:re},scaling:{min:{number:H},max:{number:H},label:{enabled:{boolean:re},min:{number:H},max:{number:H},maxVisible:{number:H},drawThreshold:{number:H},__type__:{object:Te,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:Te}},shadow:{enabled:{boolean:re},color:{string:ae},size:{number:H},x:{number:H},y:{number:H},__type__:{object:Te,boolean:re}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:re,array:mf},borderRadius:{number:H},interpolation:{boolean:re},useImageSize:{boolean:re},useBorderWithImage:{boolean:re},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Te}},size:{number:H},title:{string:ae,dom:Iae,undefined:"undefined"},value:{number:H,undefined:"undefined"},widthConstraint:{minimum:{number:H},maximum:{number:H},__type__:{object:Te,boolean:re,number:H}},x:{number:H},y:{number:H},__type__:{object:Te}},hFe={configure:{enabled:{boolean:re},filter:{boolean:re,string:ae,array:mf,function:"function"},container:{dom:Iae},showButton:{boolean:re},__type__:{object:Te,boolean:re,string:ae,array:mf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:re},scaleFactor:{number:H},type:{string:hj},imageHeight:{number:H},imageWidth:{number:H},src:{string:ae},__type__:{object:Te,boolean:re}},middle:{enabled:{boolean:re},scaleFactor:{number:H},type:{string:hj},imageWidth:{number:H},imageHeight:{number:H},src:{string:ae},__type__:{object:Te,boolean:re}},from:{enabled:{boolean:re},scaleFactor:{number:H},type:{string:hj},imageWidth:{number:H},imageHeight:{number:H},src:{string:ae},__type__:{object:Te,boolean:re}},__type__:{string:["from","to","middle"],object:Te}},endPointOffset:{from:{number:H},to:{number:H},__type__:{object:Te,number:H}},arrowStrikethrough:{boolean:re},background:{enabled:{boolean:re},color:{string:ae},size:{number:H},dashes:{boolean:re,array:mf},__type__:{object:Te,boolean:re}},chosen:{label:{boolean:re,function:"function"},edge:{boolean:re,function:"function"},__type__:{object:Te,boolean:re}},color:{color:{string:ae},highlight:{string:ae},hover:{string:ae},inherit:{string:["from","to","both"],boolean:re},opacity:{number:H},__type__:{object:Te,string:ae}},dashes:{boolean:re,array:mf},font:{color:{string:ae},size:{number:H},face:{string:ae},background:{string:ae},strokeWidth:{number:H},strokeColor:{string:ae},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:H},multi:{boolean:re,string:ae},bold:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Te,string:ae}},boldital:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Te,string:ae}},ital:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Te,string:ae}},mono:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Te,string:ae}},__type__:{object:Te,string:ae}},hidden:{boolean:re},hoverWidth:{function:"function",number:H},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:re},length:{number:H,undefined:"undefined"},physics:{boolean:re},scaling:{min:{number:H},max:{number:H},label:{enabled:{boolean:re},min:{number:H},max:{number:H},maxVisible:{number:H},drawThreshold:{number:H},__type__:{object:Te,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:Te}},selectionWidth:{function:"function",number:H},selfReferenceSize:{number:H},selfReference:{size:{number:H},angle:{number:H},renderBehindTheNode:{boolean:re},__type__:{object:Te}},shadow:{enabled:{boolean:re},color:{string:ae},size:{number:H},x:{number:H},y:{number:H},__type__:{object:Te,boolean:re}},smooth:{enabled:{boolean:re},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:H},forceDirection:{string:["horizontal","vertical","none"],boolean:re},__type__:{object:Te,boolean:re}},title:{string:ae,undefined:"undefined"},width:{number:H},widthConstraint:{maximum:{number:H},__type__:{object:Te,boolean:re,number:H}},value:{number:H,undefined:"undefined"},__type__:{object:Te}},groups:{useDefaultGroups:{boolean:re},__any__:fj,__type__:{object:Te}},interaction:{dragNodes:{boolean:re},dragView:{boolean:re},hideEdgesOnDrag:{boolean:re},hideEdgesOnZoom:{boolean:re},hideNodesOnDrag:{boolean:re},hover:{boolean:re},keyboard:{enabled:{boolean:re},speed:{x:{number:H},y:{number:H},zoom:{number:H},__type__:{object:Te}},bindToWindow:{boolean:re},autoFocus:{boolean:re},__type__:{object:Te,boolean:re}},multiselect:{boolean:re},navigationButtons:{boolean:re},selectable:{boolean:re},selectConnectedEdges:{boolean:re},hoverConnectedEdges:{boolean:re},tooltipDelay:{number:H},zoomView:{boolean:re},zoomSpeed:{number:H},__type__:{object:Te}},layout:{randomSeed:{undefined:"undefined",number:H,string:ae},improvedLayout:{boolean:re},clusterThreshold:{number:H},hierarchical:{enabled:{boolean:re},levelSeparation:{number:H},nodeSpacing:{number:H},treeSpacing:{number:H},blockShifting:{boolean:re},edgeMinimization:{boolean:re},parentCentralization:{boolean:re},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Te,boolean:re}},__type__:{object:Te}},manipulation:{enabled:{boolean:re},initiallyActive:{boolean:re},addNode:{boolean:re,function:"function"},addEdge:{boolean:re,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Te,boolean:re,function:"function"}},deleteNode:{boolean:re,function:"function"},deleteEdge:{boolean:re,function:"function"},controlNodeStyle:fj,__type__:{object:Te,boolean:re}},nodes:fj,physics:{enabled:{boolean:re},barnesHut:{theta:{number:H},gravitationalConstant:{number:H},centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:Te}},forceAtlas2Based:{theta:{number:H},gravitationalConstant:{number:H},centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:Te}},repulsion:{centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},nodeDistance:{number:H},damping:{number:H},__type__:{object:Te}},hierarchicalRepulsion:{centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},nodeDistance:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:Te}},maxVelocity:{number:H},minVelocity:{number:H},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:re},iterations:{number:H},updateInterval:{number:H},onlyDynamicEdges:{boolean:re},fit:{boolean:re},__type__:{object:Te,boolean:re}},timestep:{number:H},adaptiveTimestep:{boolean:re},wind:{x:{number:H},y:{number:H},__type__:{object:Te}},__type__:{object:Te,boolean:re}},autoResize:{boolean:re},clickToUse:{boolean:re},locale:{string:ae},locales:{__any__:{any:dFe},__type__:{object:Te}},height:{string:ae},width:{string:ae},__type__:{object:Te}},Rae={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},fFe=(t,e,r)=>{var n;return!!(Ga(t).call(t,"physics")&&Ga(n=Rae.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class pFe{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],c={};i[l]=c;for(let d=0;d<r.length;d++)c[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],c=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],b=Math.min(f[m],f[l]+c[m]);f[m]=b,g[h]=b}}}return i}}class mFe{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new pFe}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),c=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<c;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const c=r[l];if(n[c].predefinedPosition!==!0||n[c].isCluster===!0&&e===!0||n[c].options.fixed.x!==!0||n[c].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(c);i<d&&(i=d,s=c,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const c=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,N=s[S].y,E=h[S],k=f[S],C=1/((c-_)**2+(d-N)**2)**1.5;o+=E*(1-k*(d-N)**2*C),a+=E*(k*(c-_)*(d-N)*C),l+=E*(1-k*(c-_)**2*C)}}const p=o,m=a,g=r,b=l,y=n,v=(g/p+y/m)/(m/p-b/m),w=-(m*v+g)/p;s[e].x+=w,s[e].y+=v,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let c=n;c<e.length;c++){const d=e[c];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][c]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][c],a+=this.E_matrix[i][c][0],l+=this.E_matrix[i][c][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let c=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],b=n[f].x,y=n[f].y,v=1/Math.sqrt((a-b)**2+(l-y)**2),w=s[f]*(a-b-o[f]*(a-b)*v),x=s[f]*(l-y-o[f]*(l-y)*v);i[h]=[w,x],c+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[c,d]}}function Ne(t,e,r){var n,i,s,o;if(!(this instanceof Ne))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:qRe,clickToUse:!1},wr(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:ne(n=this.on).call(n,this),off:ne(i=this.off).call(i,this),emit:ne(s=this.emit).call(s,this),once:ne(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new zRe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new nMe,this.canvas=new XDe(this.body),this.selectionHandler=new IAe(this.body,this.canvas),this.interactionHandler=new tAe(this.body,this.canvas,this.selectionHandler),this.view=new ZDe(this.body,this.canvas),this.renderer=new WDe(this.body,this.canvas),this.physics=new FDe(this.body),this.layoutEngine=new cFe(this.body),this.clustering=new HDe(this.body),this.manipulation=new uFe(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new hDe(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new IDe(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new mFe(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}coe(Ne.prototype);Ne.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(gRe.validate(t,hFe)===!0&&console.error("%cErrors have been found in the supplied options object.",iae),Ph(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=LRe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new pRe(this,this.body.container,Rae,this.canvas.pixelRatio,fFe)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Pt(n.nodes,this.nodesHandler.options),Pt(n.edges,this.edgesHandler.options),Pt(n.layout,this.layoutEngine.options),Pt(n.interaction,this.selectionHandler.options),Pt(n.interaction,this.renderer.options),Pt(n.interaction,this.interactionHandler.options),Pt(n.manipulation,this.manipulation.options),Pt(n.physics,this.physics.options),Pt(n.global,this.canvas.options),Pt(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new fRe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};Ne.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};Ne.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};Ne.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=CRe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=kRe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};Ne.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];aa(this.body.container)};Ne.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};Ne.prototype.isActive=function(){return!this.activator||this.activator.active};Ne.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};Ne.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};Ne.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};Ne.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};Ne.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};Ne.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};Ne.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};Ne.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};Ne.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};Ne.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};Ne.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};Ne.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};Ne.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};Ne.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};Ne.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};Ne.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};Ne.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};Ne.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};Ne.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};Ne.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};Ne.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};Ne.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};Ne.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};Ne.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};Ne.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};Ne.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};Ne.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};Ne.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};Ne.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};Ne.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};Ne.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};Ne.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};Ne.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};Ne.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};Ne.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};Ne.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};Ne.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};Ne.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};Ne.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};Ne.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Ne.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Ne.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};Ne.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};Ne.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};Ne.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};Ne.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};Ne.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};Ne.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};Ne.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};Ne.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};Ne.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};Ne.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function gFe({graphData:t,startPersonId:e,onNodeClick:r}){const n=T.useRef(null),i=T.useRef(null),s=gn(),o=T.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);T.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new Ud(t.nodes),h=new Ud(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new Ne(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),b={},y=new Set;m.forEach(([v,w])=>{if(y.has(v)||y.has(w))return;const x=g[v],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;b[v]={x:_-60,y:x.y},b[w]={x:_+60,y:S.y},y.add(v),y.add(w)}),Object.entries(b).forEach(([v,w])=>{p.moveNode(v,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},c=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[u.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:u.jsx(Wfe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:u.jsx(Kfe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:u.jsx(pte,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),u.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const yFe=["parent","child","spouse","lover","partner"];function vFe(t){return yFe.includes(t==null?void 0:t.toLowerCase())}function bFe(t){return(t==null?void 0:t.toLowerCase())==="parent"}function xFe(t){return(t==null?void 0:t.toLowerCase())==="child"}function wFe(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function SFe(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var v,w,x,S;let p=h.name||((v=h.title)==null?void 0:v.rendered)||h.title||`Person ${f}`;if(p&&typeof p=="string"&&typeof document<"u"){const _=document.createElement("textarea");_.innerHTML=p,p=_.value}let m=null,g=((w=h.acf)==null?void 0:w.birth_date)||null;if(g){const _=new Date(g);isNaN(_.getTime())||(m=Math.floor((new Date-_)/(365.25*24*60*60*1e3)))}let b="";switch((x=h.acf)==null?void 0:x.gender){case"male":b="";break;case"female":b="";break;case"non_binary":case"other":case"prefer_not_to_say":b="";break}let y="";if(g)try{const _=new Date(g);if(!isNaN(_.getTime())){const N=String(_.getDate()).padStart(2,"0"),E=String(_.getMonth()+1).padStart(2,"0"),k=_.getFullYear();y=`${N}-${E}-${k}`}}catch{}return{id:f,name:p,gender:((S=h.acf)==null?void 0:S.gender)||"",genderSymbol:b,photo:h.thumbnail||null,age:m,birthDate:g,formattedBirthDate:y}}const c=o.get(t);for(c&&n.set(t,l(c,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!vFe(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const b=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===b||`${w.from}-${w.to}`===y)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(bFe(w))i.push({from:g,to:h,type:"parent-child"});else if(xFe(w))i.push({from:h,to:g,type:"parent-child"});else if(wFe(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function _Fe(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(b=>{s.set(b.id,[]),o.set(b.id,[]),a.set(b.id,[])}),i.forEach(b=>{var y,v,w,x;b.type==="parent-child"?((y=s.get(b.to))==null||y.push(b.from),(v=o.get(b.from))==null||v.push(b.to)):b.type==="spouse"&&((w=a.get(b.from))==null||w.push(b.to),(x=a.get(b.to))==null||x.push(b.from))});const l=new Map,c=new Set,d=[{id:e,generation:0}];for(l.set(e,0),c.add(e);d.length>0;){const{id:b,generation:y}=d.shift(),v=s.get(b)||[];for(const S of v)c.has(S)||(c.add(S),l.set(S,y-1),d.push({id:S,generation:y-1}));const w=o.get(b)||[];for(const S of w)c.has(S)||(c.add(S),l.set(S,y+1),d.push({id:S,generation:y+1}));const x=a.get(b)||[];for(const S of x)c.has(S)||(c.add(S),l.set(S,y),d.push({id:S,generation:y}))}n.forEach(b=>{l.has(b.id)||l.set(b.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((b,y)=>{f.set(y,b-h)});function p(b,y,v=!1){const w=b?b.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2):"?";let x,S;v?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(b=>{const y=f.get(b.id)||0,v=b.id===e,w=r[b.id]||!1;let x=b.name;w&&(x=b.name+" ");let S=[x],_="";b.genderSymbol&&(_+=b.genderSymbol+" "),b.age!==null&&(_+=b.age+" "),b.formattedBirthDate&&(_+=b.formattedBirthDate),_.trim()&&S.push(_.trim());const N=b.photo||p(b.name,v,w);let E="#d1d5db";return v?E="#f59e0b":w&&(E="#9ca3af"),{id:b.id,label:S.join(`
`),level:y,shape:"circularImage",image:N,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:E,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:v?3:2,data:{...b,isDeceased:w}}}),g=i.map((b,y)=>{const v=b.type==="spouse";return{id:`edge-${y}`,from:b.from,to:b.to,arrows:{to:{enabled:!1}},color:{color:v?"#ec4899":"#9ca3af",highlight:v?"#db2777":"#6b7280"},width:2,dashes:v?[5,5]:!1,smooth:!1,length:v?50:300}});return{nodes:m,edges:g}}function EFe(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var c,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((c=o.relationship_type)==null?void 0:c.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function NFe(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function CFe(){var p,m;const{id:t}=zs(),e=gn(),r=parseInt(t,10),{data:n,isLoading:i}=Vc(t),{data:s=[],isLoading:o}=zc(),{data:a=[]}=ut({queryKey:["relationship-types"],queryFn:async()=>(await We.getRelationshipTypes()).data}),l=T.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),c=RP({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await qe.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=T.useMemo(()=>{const g={};return c.forEach((b,y)=>{if(b.data&&l[y]){const v=l[y],w=b.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[v]=w}}),g},[c,l]);$n(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=T.useMemo(()=>{if(!n||!s.length)return null;try{const g=EFe(s);a.length>0&&NFe(g,a);const b=SFe(r,s,g);return!b||b.nodes.length===0?null:_Fe(b,r,d)}catch(g){return console.error("Error building family tree:",g),null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?u.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(le,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Zn,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),u.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),u.jsx("div",{className:"card p-6",children:u.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?u.jsx(gFe,{graphData:h,startPersonId:r,onNodeClick:f}):u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),u.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),u.jsx(le,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function kFe(){const{loginUrl:t,isLoggedIn:e}=HR();return wte(),T.useEffect(()=>{e||(window.location.href=t)},[e,t]),u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function TFe({children:t}){const{data:e,isLoading:r,error:n}=ut({queryKey:["current-user"],queryFn:async()=>(await qe.getCurrentUser()).data,retry:!1});return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Ro,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Ro,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function OFe({children:t}){const{isLoggedIn:e,isLoading:r}=HR();return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?u.jsx(TFe,{children:t}):u.jsx(xee,{to:"/login",replace:!0})}function jFe(){return u.jsxs($A,{children:[u.jsx(mt,{path:"/login",element:u.jsx(kFe,{})}),u.jsx(mt,{path:"/*",element:u.jsx(OFe,{children:u.jsx(mpe,{children:u.jsxs($A,{children:[u.jsx(mt,{path:"/",element:u.jsx(dSe,{})}),u.jsx(mt,{path:"/people",element:u.jsx(fSe,{})}),u.jsx(mt,{path:"/people/new",element:u.jsx(cq,{})}),u.jsx(mt,{path:"/people/:personId/contact/new",element:u.jsx(dq,{})}),u.jsx(mt,{path:"/people/:personId/contact/:index/edit",element:u.jsx(dq,{})}),u.jsx(mt,{path:"/people/:personId/address/new",element:u.jsx(fq,{})}),u.jsx(mt,{path:"/people/:personId/address/:index/edit",element:u.jsx(fq,{})}),u.jsx(mt,{path:"/people/:personId/work-history/new",element:u.jsx(uq,{})}),u.jsx(mt,{path:"/people/:personId/work-history/:index/edit",element:u.jsx(uq,{})}),u.jsx(mt,{path:"/people/:personId/relationship/new",element:u.jsx(hq,{})}),u.jsx(mt,{path:"/people/:personId/relationship/:index/edit",element:u.jsx(hq,{})}),u.jsx(mt,{path:"/people/:id/family-tree",element:u.jsx(CFe,{})}),u.jsx(mt,{path:"/people/:id/edit",element:u.jsx(cq,{})}),u.jsx(mt,{path:"/people/:id",element:u.jsx(ISe,{})}),u.jsx(mt,{path:"/companies",element:u.jsx(n_e,{})}),u.jsx(mt,{path:"/companies/new",element:u.jsx(pq,{})}),u.jsx(mt,{path:"/companies/:id",element:u.jsx(i_e,{})}),u.jsx(mt,{path:"/companies/:id/edit",element:u.jsx(pq,{})}),u.jsx(mt,{path:"/dates",element:u.jsx(a_e,{})}),u.jsx(mt,{path:"/dates/new",element:u.jsx(mq,{})}),u.jsx(mt,{path:"/dates/:id/edit",element:u.jsx(mq,{})}),u.jsx(mt,{path:"/todos",element:u.jsx(c_e,{})}),u.jsx(mt,{path:"/settings",element:u.jsx(d_e,{})}),u.jsx(mt,{path:"/settings/relationship-types",element:u.jsx(y_e,{})}),u.jsx(mt,{path:"/settings/import",element:u.jsx(S_e,{})}),u.jsx(mt,{path:"/settings/export",element:u.jsx(__e,{})}),u.jsx(mt,{path:"/settings/user-approval",element:u.jsx(E_e,{})}),u.jsx(mt,{path:"*",element:u.jsx(xee,{to:"/",replace:!0})})]})})})})]})}const PFe=new Fde({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),pj=document.getElementById("root");if(!pj)console.error('Root element not found! Make sure there is a <div id="root"></div> in your HTML.');else try{mj.createRoot(pj).render(u.jsx(Ae.StrictMode,{children:u.jsx(qde,{client:PFe,children:u.jsx(ade,{children:u.jsx(jFe,{})})})}))}catch(t){console.error("Error mounting React app:",t),pj.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
