var ZD=t=>{throw TypeError(t)};var Lb=(t,e,r)=>e.has(t)||ZD("Cannot "+r);var M=(t,e,r)=>(Lb(t,e,"read from private field"),r?r.call(t):e.get(t)),ve=(t,e,r)=>e.has(t)?ZD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),oe=(t,e,r,n)=>(Lb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Re=(t,e,r)=>(Lb(t,e,"access private method"),r);var Zm=(t,e,r,n)=>({set _(i){oe(t,e,i,r)},get _(){return M(t,e,n)}});function Ble(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function SJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _J={exports:{}},i0={},EJ={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=Symbol.for("react.element"),zle=Symbol.for("react.portal"),Vle=Symbol.for("react.fragment"),Ule=Symbol.for("react.strict_mode"),Hle=Symbol.for("react.profiler"),Wle=Symbol.for("react.provider"),Kle=Symbol.for("react.context"),Gle=Symbol.for("react.forward_ref"),Yle=Symbol.for("react.suspense"),Qle=Symbol.for("react.memo"),Xle=Symbol.for("react.lazy"),e$=Symbol.iterator;function Jle(t){return t===null||typeof t!="object"?null:(t=e$&&t[e$]||t["@@iterator"],typeof t=="function"?t:null)}var CJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NJ=Object.assign,kJ={};function rh(t,e,r){this.props=t,this.context=e,this.refs=kJ,this.updater=r||CJ}rh.prototype.isReactComponent={};rh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function TJ(){}TJ.prototype=rh.prototype;function oR(t,e,r){this.props=t,this.context=e,this.refs=kJ,this.updater=r||CJ}var aR=oR.prototype=new TJ;aR.constructor=oR;NJ(aR,rh.prototype);aR.isPureReactComponent=!0;var t$=Array.isArray,OJ=Object.prototype.hasOwnProperty,lR={current:null},jJ={key:!0,ref:!0,__self:!0,__source:!0};function PJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)OJ.call(e,n)&&!jJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Hp,type:t,key:s,ref:o,props:i,_owner:lR.current}}function Zle(t,e){return{$$typeof:Hp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cR(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hp}function ece(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var r$=/\/+/g;function Bb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ece(""+t.key):e.toString(36)}function Vg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hp:case zle:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Bb(o,0):n,t$(i)?(r="",t!=null&&(r=t.replace(r$,"$&/")+"/"),Vg(i,e,r,"",function(c){return c})):i!=null&&(cR(i)&&(i=Zle(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(r$,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",t$(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Bb(s,a);o+=Vg(s,e,r,l,i)}else if(l=Jle(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Bb(s,a++),o+=Vg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function eg(t,e,r){if(t==null)return t;var n=[],i=0;return Vg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function tce(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},Ug={transition:null},rce={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:Ug,ReactCurrentOwner:lR};function IJ(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:eg,forEach:function(t,e,r){eg(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return eg(t,function(){e++}),e},toArray:function(t){return eg(t,function(e){return e})||[]},only:function(t){if(!cR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qe.Component=rh;Qe.Fragment=Vle;Qe.Profiler=Hle;Qe.PureComponent=oR;Qe.StrictMode=Ule;Qe.Suspense=Yle;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rce;Qe.act=IJ;Qe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=NJ({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)OJ.call(e,l)&&!jJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Hp,type:t.type,key:i,ref:s,props:n,_owner:o}};Qe.createContext=function(t){return t={$$typeof:Kle,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Wle,_context:t},t.Consumer=t};Qe.createElement=PJ;Qe.createFactory=function(t){var e=PJ.bind(null,t);return e.type=t,e};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(t){return{$$typeof:Gle,render:t}};Qe.isValidElement=cR;Qe.lazy=function(t){return{$$typeof:Xle,_payload:{_status:-1,_result:t},_init:tce}};Qe.memo=function(t,e){return{$$typeof:Qle,type:t,compare:e===void 0?null:e}};Qe.startTransition=function(t){var e=Ug.transition;Ug.transition={};try{t()}finally{Ug.transition=e}};Qe.unstable_act=IJ;Qe.useCallback=function(t,e){return Rn.current.useCallback(t,e)};Qe.useContext=function(t){return Rn.current.useContext(t)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};Qe.useEffect=function(t,e){return Rn.current.useEffect(t,e)};Qe.useId=function(){return Rn.current.useId()};Qe.useImperativeHandle=function(t,e,r){return Rn.current.useImperativeHandle(t,e,r)};Qe.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};Qe.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};Qe.useMemo=function(t,e){return Rn.current.useMemo(t,e)};Qe.useReducer=function(t,e,r){return Rn.current.useReducer(t,e,r)};Qe.useRef=function(t){return Rn.current.useRef(t)};Qe.useState=function(t){return Rn.current.useState(t)};Qe.useSyncExternalStore=function(t,e,r){return Rn.current.useSyncExternalStore(t,e,r)};Qe.useTransition=function(){return Rn.current.useTransition()};Qe.version="18.3.1";EJ.exports=Qe;var k=EJ.exports;const xe=SJ(k),nce=Ble({__proto__:null,default:xe},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ice=k,sce=Symbol.for("react.element"),oce=Symbol.for("react.fragment"),ace=Object.prototype.hasOwnProperty,lce=ice.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cce={key:!0,ref:!0,__self:!0,__source:!0};function RJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)ace.call(e,n)&&!cce.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:sce,type:t,key:s,ref:o,props:i,_owner:lce.current}}i0.Fragment=oce;i0.jsx=RJ;i0.jsxs=RJ;_J.exports=i0;var u=_J.exports,Rj={},MJ={exports:{}},vi={},AJ={exports:{}},DJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,$){var G=q.length;q.push($);e:for(;0<G;){var K=G-1>>>1,F=q[K];if(0<i(F,$))q[K]=$,q[G]=F,G=K;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var $=q[0],G=q.pop();if(G!==$){q[0]=G;e:for(var K=0,F=q.length,X=F>>>1;K<X;){var Q=2*(K+1)-1,Ee=q[Q],we=Q+1,Le=q[we];if(0>i(Ee,G))we<F&&0>i(Le,Ee)?(q[K]=Le,q[we]=G,K=we):(q[K]=Ee,q[Q]=G,K=Q);else if(we<F&&0>i(Le,G))q[K]=Le,q[we]=G,K=we;else break e}}return $}function i(q,$){var G=q.sortIndex-$.sortIndex;return G!==0?G:q.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(q){for(var $=r(c);$!==null;){if($.callback===null)n(c);else if($.startTime<=q)n(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=r(c)}}function x(q){if(g=!1,w(q),!m)if(r(l)!==null)m=!0,R(S);else{var $=r(c);$!==null&&B(x,$.startTime-q)}}function S(q,$){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var G=f;try{for(w($),h=r(l);h!==null&&(!(h.expirationTime>$)||q&&!j());){var K=h.callback;if(typeof K=="function"){h.callback=null,f=h.priorityLevel;var F=K(h.expirationTime<=$);$=t.unstable_now(),typeof F=="function"?h.callback=F:h===r(l)&&n(l),w($)}else n(l);h=r(l)}if(h!==null)var X=!0;else{var Q=r(c);Q!==null&&B(x,Q.startTime-$),X=!1}return X}finally{h=null,f=G,p=!1}}var _=!1,C=null,E=-1,N=5,T=-1;function j(){return!(t.unstable_now()-T<N)}function I(){if(C!==null){var q=t.unstable_now();T=q;var $=!0;try{$=C(!0,q)}finally{$?O():(_=!1,C=null)}}else _=!1}var O;if(typeof b=="function")O=function(){b(I)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,z=D.port2;D.port1.onmessage=I,O=function(){z.postMessage(null)}}else O=function(){v(I,0)};function R(q){C=q,_||(_=!0,O())}function B(q,$){E=v(function(){q(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(S))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var G=f;f=$;try{return q()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,$){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=f;f=q;try{return $()}finally{f=G}},t.unstable_scheduleCallback=function(q,$,G){var K=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?K+G:K):G=K,q){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=G+F,q={id:d++,callback:$,priorityLevel:q,startTime:G,expirationTime:F,sortIndex:-1},G>K?(q.sortIndex=G,e(c,q),r(l)===null&&q===r(c)&&(g?(y(E),E=-1):g=!0,B(x,G-K))):(q.sortIndex=F,e(l,q),m||p||(m=!0,R(S))),q},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(q){var $=f;return function(){var G=f;f=$;try{return q.apply(this,arguments)}finally{f=G}}}})(DJ);AJ.exports=DJ;var uce=AJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dce=k,yi=uce;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $J=new Set,Wf={};function Vc(t,e){kd(t,e),kd(t+"Capture",e)}function kd(t,e){for(Wf[t]=e,t=0;t<e.length;t++)$J.add(e[t])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mj=Object.prototype.hasOwnProperty,hce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n$={},i$={};function fce(t){return Mj.call(i$,t)?!0:Mj.call(n$,t)?!1:hce.test(t)?i$[t]=!0:(n$[t]=!0,!1)}function pce(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mce(t,e,r,n){if(e===null||typeof e>"u"||pce(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var uR=/[\-:]([a-z])/g;function dR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uR,dR);en[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uR,dR);en[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uR,dR);en[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function hR(t,e,r,n){var i=en.hasOwnProperty(e)?en[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mce(e,r,i,n)&&(r=null),n||i===null?fce(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Do=dce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tg=Symbol.for("react.element"),Pu=Symbol.for("react.portal"),Iu=Symbol.for("react.fragment"),fR=Symbol.for("react.strict_mode"),Aj=Symbol.for("react.profiler"),FJ=Symbol.for("react.provider"),qJ=Symbol.for("react.context"),pR=Symbol.for("react.forward_ref"),Dj=Symbol.for("react.suspense"),$j=Symbol.for("react.suspense_list"),mR=Symbol.for("react.memo"),ta=Symbol.for("react.lazy"),LJ=Symbol.for("react.offscreen"),s$=Symbol.iterator;function zh(t){return t===null||typeof t!="object"?null:(t=s$&&t[s$]||t["@@iterator"],typeof t=="function"?t:null)}var zt=Object.assign,zb;function cf(t){if(zb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);zb=e&&e[1]||""}return`
`+zb+t}var Vb=!1;function Ub(t,e){if(!t||Vb)return"";Vb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?cf(t):""}function gce(t){switch(t.tag){case 5:return cf(t.type);case 16:return cf("Lazy");case 13:return cf("Suspense");case 19:return cf("SuspenseList");case 0:case 2:case 15:return t=Ub(t.type,!1),t;case 11:return t=Ub(t.type.render,!1),t;case 1:return t=Ub(t.type,!0),t;default:return""}}function Fj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Iu:return"Fragment";case Pu:return"Portal";case Aj:return"Profiler";case fR:return"StrictMode";case Dj:return"Suspense";case $j:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qJ:return(t.displayName||"Context")+".Consumer";case FJ:return(t._context.displayName||"Context")+".Provider";case pR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mR:return e=t.displayName||null,e!==null?e:Fj(t.type)||"Memo";case ta:e=t._payload,t=t._init;try{return Fj(t(e))}catch{}}return null}function yce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fj(e);case 8:return e===fR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ja(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function BJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vce(t){var e=BJ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rg(t){t._valueTracker||(t._valueTracker=vce(t))}function zJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=BJ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function gy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qj(t,e){var r=e.checked;return zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function o$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ja(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function VJ(t,e){e=e.checked,e!=null&&hR(t,"checked",e,!1)}function Lj(t,e){VJ(t,e);var r=Ja(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bj(t,e.type,r):e.hasOwnProperty("defaultValue")&&Bj(t,e.type,Ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function a$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Bj(t,e,r){(e!=="number"||gy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var uf=Array.isArray;function Xu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ja(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function l$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(re(92));if(uf(r)){if(1<r.length)throw Error(re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ja(r)}}function UJ(t,e){var r=Ja(e.value),n=Ja(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function c$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ng,WJ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ng=ng||document.createElement("div"),ng.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ng.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var xf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bce=["Webkit","ms","Moz","O"];Object.keys(xf).forEach(function(t){bce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xf[e]=xf[t]})});function KJ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||xf.hasOwnProperty(t)&&xf[t]?(""+e).trim():e+"px"}function GJ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=KJ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var xce=zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uj(t,e){if(e){if(xce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Hj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wj=null;function gR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kj=null,Ju=null,Zu=null;function u$(t){if(t=Gp(t)){if(typeof Kj!="function")throw Error(re(280));var e=t.stateNode;e&&(e=c0(e),Kj(t.stateNode,t.type,e))}}function YJ(t){Ju?Zu?Zu.push(t):Zu=[t]:Ju=t}function QJ(){if(Ju){var t=Ju,e=Zu;if(Zu=Ju=null,u$(t),e)for(t=0;t<e.length;t++)u$(e[t])}}function XJ(t,e){return t(e)}function JJ(){}var Hb=!1;function ZJ(t,e,r){if(Hb)return t(e,r);Hb=!0;try{return XJ(t,e,r)}finally{Hb=!1,(Ju!==null||Zu!==null)&&(JJ(),QJ())}}function Gf(t,e){var r=t.stateNode;if(r===null)return null;var n=c0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(re(231,e,typeof r));return r}var Gj=!1;if(jo)try{var Vh={};Object.defineProperty(Vh,"passive",{get:function(){Gj=!0}}),window.addEventListener("test",Vh,Vh),window.removeEventListener("test",Vh,Vh)}catch{Gj=!1}function wce(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var wf=!1,yy=null,vy=!1,Yj=null,Sce={onError:function(t){wf=!0,yy=t}};function _ce(t,e,r,n,i,s,o,a,l){wf=!1,yy=null,wce.apply(Sce,arguments)}function Ece(t,e,r,n,i,s,o,a,l){if(_ce.apply(this,arguments),wf){if(wf){var c=yy;wf=!1,yy=null}else throw Error(re(198));vy||(vy=!0,Yj=c)}}function Uc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function eZ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function d$(t){if(Uc(t)!==t)throw Error(re(188))}function Cce(t){var e=t.alternate;if(!e){if(e=Uc(t),e===null)throw Error(re(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return d$(i),t;if(s===n)return d$(i),e;s=s.sibling}throw Error(re(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(re(189))}}if(r.alternate!==n)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?t:e}function tZ(t){return t=Cce(t),t!==null?rZ(t):null}function rZ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rZ(t);if(e!==null)return e;t=t.sibling}return null}var nZ=yi.unstable_scheduleCallback,h$=yi.unstable_cancelCallback,Nce=yi.unstable_shouldYield,kce=yi.unstable_requestPaint,sr=yi.unstable_now,Tce=yi.unstable_getCurrentPriorityLevel,yR=yi.unstable_ImmediatePriority,iZ=yi.unstable_UserBlockingPriority,by=yi.unstable_NormalPriority,Oce=yi.unstable_LowPriority,sZ=yi.unstable_IdlePriority,s0=null,As=null;function jce(t){if(As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot(s0,t,void 0,(t.current.flags&128)===128)}catch{}}var cs=Math.clz32?Math.clz32:Rce,Pce=Math.log,Ice=Math.LN2;function Rce(t){return t>>>=0,t===0?32:31-(Pce(t)/Ice|0)|0}var ig=64,sg=4194304;function df(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xy(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=df(a):(s&=o,s!==0&&(n=df(s)))}else o=r&~i,o!==0?n=df(o):s!==0&&(n=df(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-cs(e),i=1<<r,n|=t[r],e&=~i;return n}function Mce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ace(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-cs(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Mce(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Qj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oZ(){var t=ig;return ig<<=1,!(ig&4194240)&&(ig=64),t}function Wb(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Wp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cs(e),t[e]=r}function Dce(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-cs(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function vR(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-cs(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var pt=0;function aZ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lZ,bR,cZ,uZ,dZ,Xj=!1,og=[],Pa=null,Ia=null,Ra=null,Yf=new Map,Qf=new Map,ca=[],$ce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f$(t,e){switch(t){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Yf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qf.delete(e.pointerId)}}function Uh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gp(e),e!==null&&bR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Fce(t,e,r,n,i){switch(e){case"focusin":return Pa=Uh(Pa,t,e,r,n,i),!0;case"dragenter":return Ia=Uh(Ia,t,e,r,n,i),!0;case"mouseover":return Ra=Uh(Ra,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Yf.set(s,Uh(Yf.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Qf.set(s,Uh(Qf.get(s)||null,t,e,r,n,i)),!0}return!1}function hZ(t){var e=Ml(t.target);if(e!==null){var r=Uc(e);if(r!==null){if(e=r.tag,e===13){if(e=eZ(r),e!==null){t.blockedOn=e,dZ(t.priority,function(){cZ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Jj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Wj=n,r.target.dispatchEvent(n),Wj=null}else return e=Gp(r),e!==null&&bR(e),t.blockedOn=r,!1;e.shift()}return!0}function p$(t,e,r){Hg(t)&&r.delete(e)}function qce(){Xj=!1,Pa!==null&&Hg(Pa)&&(Pa=null),Ia!==null&&Hg(Ia)&&(Ia=null),Ra!==null&&Hg(Ra)&&(Ra=null),Yf.forEach(p$),Qf.forEach(p$)}function Hh(t,e){t.blockedOn===e&&(t.blockedOn=null,Xj||(Xj=!0,yi.unstable_scheduleCallback(yi.unstable_NormalPriority,qce)))}function Xf(t){function e(i){return Hh(i,t)}if(0<og.length){Hh(og[0],t);for(var r=1;r<og.length;r++){var n=og[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Pa!==null&&Hh(Pa,t),Ia!==null&&Hh(Ia,t),Ra!==null&&Hh(Ra,t),Yf.forEach(e),Qf.forEach(e),r=0;r<ca.length;r++)n=ca[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ca.length&&(r=ca[0],r.blockedOn===null);)hZ(r),r.blockedOn===null&&ca.shift()}var ed=Do.ReactCurrentBatchConfig,wy=!0;function Lce(t,e,r,n){var i=pt,s=ed.transition;ed.transition=null;try{pt=1,xR(t,e,r,n)}finally{pt=i,ed.transition=s}}function Bce(t,e,r,n){var i=pt,s=ed.transition;ed.transition=null;try{pt=4,xR(t,e,r,n)}finally{pt=i,ed.transition=s}}function xR(t,e,r,n){if(wy){var i=Jj(t,e,r,n);if(i===null)r1(t,e,n,Sy,r),f$(t,n);else if(Fce(i,t,e,r,n))n.stopPropagation();else if(f$(t,n),e&4&&-1<$ce.indexOf(t)){for(;i!==null;){var s=Gp(i);if(s!==null&&lZ(s),s=Jj(t,e,r,n),s===null&&r1(t,e,n,Sy,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else r1(t,e,n,null,r)}}var Sy=null;function Jj(t,e,r,n){if(Sy=null,t=gR(n),t=Ml(t),t!==null)if(e=Uc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=eZ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sy=t,null}function fZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tce()){case yR:return 1;case iZ:return 4;case by:case Oce:return 16;case sZ:return 536870912;default:return 16}default:return 16}}var Ea=null,wR=null,Wg=null;function pZ(){if(Wg)return Wg;var t,e=wR,r=e.length,n,i="value"in Ea?Ea.value:Ea.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Wg=i.slice(t,1<n?1-n:void 0)}function Kg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ag(){return!0}function m$(){return!1}function bi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ag:m$,this.isPropagationStopped=m$,this}return zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ag)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ag)},persist:function(){},isPersistent:ag}),e}var nh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SR=bi(nh),Kp=zt({},nh,{view:0,detail:0}),zce=bi(Kp),Kb,Gb,Wh,o0=zt({},Kp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_R,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wh&&(Wh&&t.type==="mousemove"?(Kb=t.screenX-Wh.screenX,Gb=t.screenY-Wh.screenY):Gb=Kb=0,Wh=t),Kb)},movementY:function(t){return"movementY"in t?t.movementY:Gb}}),g$=bi(o0),Vce=zt({},o0,{dataTransfer:0}),Uce=bi(Vce),Hce=zt({},Kp,{relatedTarget:0}),Yb=bi(Hce),Wce=zt({},nh,{animationName:0,elapsedTime:0,pseudoElement:0}),Kce=bi(Wce),Gce=zt({},nh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yce=bi(Gce),Qce=zt({},nh,{data:0}),y$=bi(Qce),Xce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eue(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Zce[t])?!!e[t]:!1}function _R(){return eue}var tue=zt({},Kp,{key:function(t){if(t.key){var e=Xce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_R,charCode:function(t){return t.type==="keypress"?Kg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rue=bi(tue),nue=zt({},o0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v$=bi(nue),iue=zt({},Kp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_R}),sue=bi(iue),oue=zt({},nh,{propertyName:0,elapsedTime:0,pseudoElement:0}),aue=bi(oue),lue=zt({},o0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cue=bi(lue),uue=[9,13,27,32],ER=jo&&"CompositionEvent"in window,Sf=null;jo&&"documentMode"in document&&(Sf=document.documentMode);var due=jo&&"TextEvent"in window&&!Sf,mZ=jo&&(!ER||Sf&&8<Sf&&11>=Sf),b$=" ",x$=!1;function gZ(t,e){switch(t){case"keyup":return uue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yZ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ru=!1;function hue(t,e){switch(t){case"compositionend":return yZ(e);case"keypress":return e.which!==32?null:(x$=!0,b$);case"textInput":return t=e.data,t===b$&&x$?null:t;default:return null}}function fue(t,e){if(Ru)return t==="compositionend"||!ER&&gZ(t,e)?(t=pZ(),Wg=wR=Ea=null,Ru=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mZ&&e.locale!=="ko"?null:e.data;default:return null}}var pue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pue[t.type]:e==="textarea"}function vZ(t,e,r,n){YJ(n),e=_y(e,"onChange"),0<e.length&&(r=new SR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var _f=null,Jf=null;function mue(t){OZ(t,0)}function a0(t){var e=Du(t);if(zJ(e))return t}function gue(t,e){if(t==="change")return e}var bZ=!1;if(jo){var Qb;if(jo){var Xb="oninput"in document;if(!Xb){var S$=document.createElement("div");S$.setAttribute("oninput","return;"),Xb=typeof S$.oninput=="function"}Qb=Xb}else Qb=!1;bZ=Qb&&(!document.documentMode||9<document.documentMode)}function _$(){_f&&(_f.detachEvent("onpropertychange",xZ),Jf=_f=null)}function xZ(t){if(t.propertyName==="value"&&a0(Jf)){var e=[];vZ(e,Jf,t,gR(t)),ZJ(mue,e)}}function yue(t,e,r){t==="focusin"?(_$(),_f=e,Jf=r,_f.attachEvent("onpropertychange",xZ)):t==="focusout"&&_$()}function vue(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return a0(Jf)}function bue(t,e){if(t==="click")return a0(e)}function xue(t,e){if(t==="input"||t==="change")return a0(e)}function wue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ds=typeof Object.is=="function"?Object.is:wue;function Zf(t,e){if(ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Mj.call(e,i)||!ds(t[i],e[i]))return!1}return!0}function E$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function C$(t,e){var r=E$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=E$(r)}}function wZ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wZ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SZ(){for(var t=window,e=gy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=gy(t.document)}return e}function CR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Sue(t){var e=SZ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&wZ(r.ownerDocument.documentElement,r)){if(n!==null&&CR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=C$(r,s);var o=C$(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _ue=jo&&"documentMode"in document&&11>=document.documentMode,Mu=null,Zj=null,Ef=null,eP=!1;function N$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;eP||Mu==null||Mu!==gy(n)||(n=Mu,"selectionStart"in n&&CR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ef&&Zf(Ef,n)||(Ef=n,n=_y(Zj,"onSelect"),0<n.length&&(e=new SR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Mu)))}function lg(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Au={animationend:lg("Animation","AnimationEnd"),animationiteration:lg("Animation","AnimationIteration"),animationstart:lg("Animation","AnimationStart"),transitionend:lg("Transition","TransitionEnd")},Jb={},_Z={};jo&&(_Z=document.createElement("div").style,"AnimationEvent"in window||(delete Au.animationend.animation,delete Au.animationiteration.animation,delete Au.animationstart.animation),"TransitionEvent"in window||delete Au.transitionend.transition);function l0(t){if(Jb[t])return Jb[t];if(!Au[t])return t;var e=Au[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in _Z)return Jb[t]=e[r];return t}var EZ=l0("animationend"),CZ=l0("animationiteration"),NZ=l0("animationstart"),kZ=l0("transitionend"),TZ=new Map,k$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ol(t,e){TZ.set(t,e),Vc(e,[t])}for(var Zb=0;Zb<k$.length;Zb++){var e1=k$[Zb],Eue=e1.toLowerCase(),Cue=e1[0].toUpperCase()+e1.slice(1);ol(Eue,"on"+Cue)}ol(EZ,"onAnimationEnd");ol(CZ,"onAnimationIteration");ol(NZ,"onAnimationStart");ol("dblclick","onDoubleClick");ol("focusin","onFocus");ol("focusout","onBlur");ol(kZ,"onTransitionEnd");kd("onMouseEnter",["mouseout","mouseover"]);kd("onMouseLeave",["mouseout","mouseover"]);kd("onPointerEnter",["pointerout","pointerover"]);kd("onPointerLeave",["pointerout","pointerover"]);Vc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nue=new Set("cancel close invalid load scroll toggle".split(" ").concat(hf));function T$(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Ece(n,e,void 0,t),t.currentTarget=null}function OZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;T$(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;T$(i,a,c),s=l}}}if(vy)throw t=Yj,vy=!1,Yj=null,t}function Ot(t,e){var r=e[sP];r===void 0&&(r=e[sP]=new Set);var n=t+"__bubble";r.has(n)||(jZ(e,t,2,!1),r.add(n))}function t1(t,e,r){var n=0;e&&(n|=4),jZ(r,t,n,e)}var cg="_reactListening"+Math.random().toString(36).slice(2);function ep(t){if(!t[cg]){t[cg]=!0,$J.forEach(function(r){r!=="selectionchange"&&(Nue.has(r)||t1(r,!1,t),t1(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cg]||(e[cg]=!0,t1("selectionchange",!1,e))}}function jZ(t,e,r,n){switch(fZ(e)){case 1:var i=Lce;break;case 4:i=Bce;break;default:i=xR}r=i.bind(null,e,r,t),i=void 0,!Gj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function r1(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ml(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}ZJ(function(){var c=s,d=gR(r),h=[];e:{var f=TZ.get(t);if(f!==void 0){var p=SR,m=t;switch(t){case"keypress":if(Kg(r)===0)break e;case"keydown":case"keyup":p=rue;break;case"focusin":m="focus",p=Yb;break;case"focusout":m="blur",p=Yb;break;case"beforeblur":case"afterblur":p=Yb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=g$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Uce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=sue;break;case EZ:case CZ:case NZ:p=Kce;break;case kZ:p=aue;break;case"scroll":p=zce;break;case"wheel":p=cue;break;case"copy":case"cut":case"paste":p=Yce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=v$}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Gf(b,y),x!=null&&g.push(tp(b,x,w)))),v)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Wj&&(m=r.relatedTarget||r.fromElement)&&(Ml(m)||m[Po]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Ml(m):null,m!==null&&(v=Uc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=g$,x="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=v$,x="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:Du(p),w=m==null?f:Du(m),f=new g(x,b+"leave",p,r,d),f.target=v,f.relatedTarget=w,x=null,Ml(d)===c&&(g=new g(y,b+"enter",m,r,d),g.target=w,g.relatedTarget=v,x=g),v=x,p&&m)t:{for(g=p,y=m,b=0,w=g;w;w=vu(w))b++;for(w=0,x=y;x;x=vu(x))w++;for(;0<b-w;)g=vu(g),b--;for(;0<w-b;)y=vu(y),w--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=vu(g),y=vu(y)}g=null}else g=null;p!==null&&O$(h,f,p,g,!1),m!==null&&v!==null&&O$(h,v,m,g,!0)}}e:{if(f=c?Du(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=gue;else if(w$(f))if(bZ)S=xue;else{S=vue;var _=yue}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=bue);if(S&&(S=S(t,c))){vZ(h,S,r,d);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Bj(f,"number",f.value)}switch(_=c?Du(c):window,t){case"focusin":(w$(_)||_.contentEditable==="true")&&(Mu=_,Zj=c,Ef=null);break;case"focusout":Ef=Zj=Mu=null;break;case"mousedown":eP=!0;break;case"contextmenu":case"mouseup":case"dragend":eP=!1,N$(h,r,d);break;case"selectionchange":if(_ue)break;case"keydown":case"keyup":N$(h,r,d)}var C;if(ER)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ru?gZ(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(mZ&&r.locale!=="ko"&&(Ru||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ru&&(C=pZ()):(Ea=d,wR="value"in Ea?Ea.value:Ea.textContent,Ru=!0)),_=_y(c,E),0<_.length&&(E=new y$(E,t,null,r,d),h.push({event:E,listeners:_}),C?E.data=C:(C=yZ(r),C!==null&&(E.data=C)))),(C=due?hue(t,r):fue(t,r))&&(c=_y(c,"onBeforeInput"),0<c.length&&(d=new y$("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=C))}OZ(h,e)})}function tp(t,e,r){return{instance:t,listener:e,currentTarget:r}}function _y(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gf(t,r),s!=null&&n.unshift(tp(t,s,i)),s=Gf(t,e),s!=null&&n.push(tp(t,s,i))),t=t.return}return n}function vu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function O$(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Gf(r,s),l!=null&&o.unshift(tp(r,l,a))):i||(l=Gf(r,s),l!=null&&o.push(tp(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var kue=/\r\n?/g,Tue=/\u0000|\uFFFD/g;function j$(t){return(typeof t=="string"?t:""+t).replace(kue,`
`).replace(Tue,"")}function ug(t,e,r){if(e=j$(e),j$(t)!==e&&r)throw Error(re(425))}function Ey(){}var tP=null,rP=null;function nP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var iP=typeof setTimeout=="function"?setTimeout:void 0,Oue=typeof clearTimeout=="function"?clearTimeout:void 0,P$=typeof Promise=="function"?Promise:void 0,jue=typeof queueMicrotask=="function"?queueMicrotask:typeof P$<"u"?function(t){return P$.resolve(null).then(t).catch(Pue)}:iP;function Pue(t){setTimeout(function(){throw t})}function n1(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Xf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Xf(e)}function Ma(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function I$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ih=Math.random().toString(36).slice(2),js="__reactFiber$"+ih,rp="__reactProps$"+ih,Po="__reactContainer$"+ih,sP="__reactEvents$"+ih,Iue="__reactListeners$"+ih,Rue="__reactHandles$"+ih;function Ml(t){var e=t[js];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Po]||r[js]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=I$(t);t!==null;){if(r=t[js])return r;t=I$(t)}return e}t=r,r=t.parentNode}return null}function Gp(t){return t=t[js]||t[Po],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Du(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function c0(t){return t[rp]||null}var oP=[],$u=-1;function al(t){return{current:t}}function Rt(t){0>$u||(t.current=oP[$u],oP[$u]=null,$u--)}function Tt(t,e){$u++,oP[$u]=t.current,t.current=e}var Za={},hn=al(Za),Yn=al(!1),yc=Za;function Td(t,e){var r=t.type.contextTypes;if(!r)return Za;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qn(t){return t=t.childContextTypes,t!=null}function Cy(){Rt(Yn),Rt(hn)}function R$(t,e,r){if(hn.current!==Za)throw Error(re(168));Tt(hn,e),Tt(Yn,r)}function PZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(re(108,yce(t)||"Unknown",i));return zt({},r,n)}function Ny(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Za,yc=hn.current,Tt(hn,t),Tt(Yn,Yn.current),!0}function M$(t,e,r){var n=t.stateNode;if(!n)throw Error(re(169));r?(t=PZ(t,e,yc),n.__reactInternalMemoizedMergedChildContext=t,Rt(Yn),Rt(hn),Tt(hn,t)):Rt(Yn),Tt(Yn,r)}var oo=null,u0=!1,i1=!1;function IZ(t){oo===null?oo=[t]:oo.push(t)}function Mue(t){u0=!0,IZ(t)}function ll(){if(!i1&&oo!==null){i1=!0;var t=0,e=pt;try{var r=oo;for(pt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}oo=null,u0=!1}catch(i){throw oo!==null&&(oo=oo.slice(t+1)),nZ(yR,ll),i}finally{pt=e,i1=!1}}return null}var Fu=[],qu=0,ky=null,Ty=0,Ii=[],Ri=0,vc=null,ho=1,fo="";function jl(t,e){Fu[qu++]=Ty,Fu[qu++]=ky,ky=t,Ty=e}function RZ(t,e,r){Ii[Ri++]=ho,Ii[Ri++]=fo,Ii[Ri++]=vc,vc=t;var n=ho;t=fo;var i=32-cs(n)-1;n&=~(1<<i),r+=1;var s=32-cs(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,ho=1<<32-cs(e)+i|r<<i|n,fo=s+t}else ho=1<<s|r<<i|n,fo=t}function NR(t){t.return!==null&&(jl(t,1),RZ(t,1,0))}function kR(t){for(;t===ky;)ky=Fu[--qu],Fu[qu]=null,Ty=Fu[--qu],Fu[qu]=null;for(;t===vc;)vc=Ii[--Ri],Ii[Ri]=null,fo=Ii[--Ri],Ii[Ri]=null,ho=Ii[--Ri],Ii[Ri]=null}var mi=null,pi=null,Dt=!1,rs=null;function MZ(t,e){var r=$i(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function A$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mi=t,pi=Ma(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mi=t,pi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=vc!==null?{id:ho,overflow:fo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=$i(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,mi=t,pi=null,!0):!1;default:return!1}}function aP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lP(t){if(Dt){var e=pi;if(e){var r=e;if(!A$(t,e)){if(aP(t))throw Error(re(418));e=Ma(r.nextSibling);var n=mi;e&&A$(t,e)?MZ(n,r):(t.flags=t.flags&-4097|2,Dt=!1,mi=t)}}else{if(aP(t))throw Error(re(418));t.flags=t.flags&-4097|2,Dt=!1,mi=t}}}function D$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mi=t}function dg(t){if(t!==mi)return!1;if(!Dt)return D$(t),Dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nP(t.type,t.memoizedProps)),e&&(e=pi)){if(aP(t))throw AZ(),Error(re(418));for(;e;)MZ(t,e),e=Ma(e.nextSibling)}if(D$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){pi=Ma(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}pi=null}}else pi=mi?Ma(t.stateNode.nextSibling):null;return!0}function AZ(){for(var t=pi;t;)t=Ma(t.nextSibling)}function Od(){pi=mi=null,Dt=!1}function TR(t){rs===null?rs=[t]:rs.push(t)}var Aue=Do.ReactCurrentBatchConfig;function Kh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var n=r.stateNode}if(!n)throw Error(re(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,t))}return t}function hg(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $$(t){var e=t._init;return e(t._payload)}function DZ(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function r(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=Fa(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,x){return b===null||b.tag!==6?(b=d1(w,y.mode,x),b.return=y,b):(b=i(b,w),b.return=y,b)}function l(y,b,w,x){var S=w.type;return S===Iu?d(y,b,w.props.children,x,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&$$(S)===b.type)?(x=i(b,w.props),x.ref=Kh(y,b,w),x.return=y,x):(x=ey(w.type,w.key,w.props,null,y.mode,x),x.ref=Kh(y,b,w),x.return=y,x)}function c(y,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=h1(w,y.mode,x),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function d(y,b,w,x,S){return b===null||b.tag!==7?(b=ic(w,y.mode,x,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function h(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=d1(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tg:return w=ey(b.type,b.key,b.props,null,y.mode,w),w.ref=Kh(y,null,b),w.return=y,w;case Pu:return b=h1(b,y.mode,w),b.return=y,b;case ta:var x=b._init;return h(y,x(b._payload),w)}if(uf(b)||zh(b))return b=ic(b,y.mode,w,null),b.return=y,b;hg(y,b)}return null}function f(y,b,w,x){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case tg:return w.key===S?l(y,b,w,x):null;case Pu:return w.key===S?c(y,b,w,x):null;case ta:return S=w._init,f(y,b,S(w._payload),x)}if(uf(w)||zh(w))return S!==null?null:d(y,b,w,x,null);hg(y,w)}return null}function p(y,b,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(b,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tg:return y=y.get(x.key===null?w:x.key)||null,l(b,y,x,S);case Pu:return y=y.get(x.key===null?w:x.key)||null,c(b,y,x,S);case ta:var _=x._init;return p(y,b,w,_(x._payload),S)}if(uf(x)||zh(x))return y=y.get(w)||null,d(b,y,x,S,null);hg(b,x)}return null}function m(y,b,w,x){for(var S=null,_=null,C=b,E=b=0,N=null;C!==null&&E<w.length;E++){C.index>E?(N=C,C=null):N=C.sibling;var T=f(y,C,w[E],x);if(T===null){C===null&&(C=N);break}t&&C&&T.alternate===null&&e(y,C),b=s(T,b,E),_===null?S=T:_.sibling=T,_=T,C=N}if(E===w.length)return r(y,C),Dt&&jl(y,E),S;if(C===null){for(;E<w.length;E++)C=h(y,w[E],x),C!==null&&(b=s(C,b,E),_===null?S=C:_.sibling=C,_=C);return Dt&&jl(y,E),S}for(C=n(y,C);E<w.length;E++)N=p(C,y,E,w[E],x),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?E:N.key),b=s(N,b,E),_===null?S=N:_.sibling=N,_=N);return t&&C.forEach(function(j){return e(y,j)}),Dt&&jl(y,E),S}function g(y,b,w,x){var S=zh(w);if(typeof S!="function")throw Error(re(150));if(w=S.call(w),w==null)throw Error(re(151));for(var _=S=null,C=b,E=b=0,N=null,T=w.next();C!==null&&!T.done;E++,T=w.next()){C.index>E?(N=C,C=null):N=C.sibling;var j=f(y,C,T.value,x);if(j===null){C===null&&(C=N);break}t&&C&&j.alternate===null&&e(y,C),b=s(j,b,E),_===null?S=j:_.sibling=j,_=j,C=N}if(T.done)return r(y,C),Dt&&jl(y,E),S;if(C===null){for(;!T.done;E++,T=w.next())T=h(y,T.value,x),T!==null&&(b=s(T,b,E),_===null?S=T:_.sibling=T,_=T);return Dt&&jl(y,E),S}for(C=n(y,C);!T.done;E++,T=w.next())T=p(C,y,E,T.value,x),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?E:T.key),b=s(T,b,E),_===null?S=T:_.sibling=T,_=T);return t&&C.forEach(function(I){return e(y,I)}),Dt&&jl(y,E),S}function v(y,b,w,x){if(typeof w=="object"&&w!==null&&w.type===Iu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case tg:e:{for(var S=w.key,_=b;_!==null;){if(_.key===S){if(S=w.type,S===Iu){if(_.tag===7){r(y,_.sibling),b=i(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&$$(S)===_.type){r(y,_.sibling),b=i(_,w.props),b.ref=Kh(y,_,w),b.return=y,y=b;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===Iu?(b=ic(w.props.children,y.mode,x,w.key),b.return=y,y=b):(x=ey(w.type,w.key,w.props,null,y.mode,x),x.ref=Kh(y,b,w),x.return=y,y=x)}return o(y);case Pu:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else e(y,b);b=b.sibling}b=h1(w,y.mode,x),b.return=y,y=b}return o(y);case ta:return _=w._init,v(y,b,_(w._payload),x)}if(uf(w))return m(y,b,w,x);if(zh(w))return g(y,b,w,x);hg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(y,b.sibling),b=i(b,w),b.return=y,y=b):(r(y,b),b=d1(w,y.mode,x),b.return=y,y=b),o(y)):r(y,b)}return v}var jd=DZ(!0),$Z=DZ(!1),Oy=al(null),jy=null,Lu=null,OR=null;function jR(){OR=Lu=jy=null}function PR(t){var e=Oy.current;Rt(Oy),t._currentValue=e}function cP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function td(t,e){jy=t,OR=Lu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wn=!0),t.firstContext=null)}function Vi(t){var e=t._currentValue;if(OR!==t)if(t={context:t,memoizedValue:e,next:null},Lu===null){if(jy===null)throw Error(re(308));Lu=t,jy.dependencies={lanes:0,firstContext:t}}else Lu=Lu.next=t;return e}var Al=null;function IR(t){Al===null?Al=[t]:Al.push(t)}function FZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,IR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Io(t,n)}function Io(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ra=!1;function RR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Aa(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,st&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Io(t,r)}return i=n.interleaved,i===null?(e.next=e,IR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Io(t,r)}function Gg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,vR(t,r)}}function F$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Py(t,e,r,n){var i=t.updateQueue;ra=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=zt({},h,f);break e;case 2:ra=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xc|=o,t.lanes=o,t.memoizedState=h}}function q$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(re(191,i));i.call(n)}}}var Yp={},Ds=al(Yp),np=al(Yp),ip=al(Yp);function Dl(t){if(t===Yp)throw Error(re(174));return t}function MR(t,e){switch(Tt(ip,e),Tt(np,t),Tt(Ds,Yp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vj(e,t)}Rt(Ds),Tt(Ds,e)}function Pd(){Rt(Ds),Rt(np),Rt(ip)}function LZ(t){Dl(ip.current);var e=Dl(Ds.current),r=Vj(e,t.type);e!==r&&(Tt(np,t),Tt(Ds,r))}function AR(t){np.current===t&&(Rt(Ds),Rt(np))}var Ft=al(0);function Iy(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var s1=[];function DR(){for(var t=0;t<s1.length;t++)s1[t]._workInProgressVersionPrimary=null;s1.length=0}var Yg=Do.ReactCurrentDispatcher,o1=Do.ReactCurrentBatchConfig,bc=0,Lt=null,Nr=null,Mr=null,Ry=!1,Cf=!1,sp=0,Due=0;function sn(){throw Error(re(321))}function $R(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ds(t[r],e[r]))return!1;return!0}function FR(t,e,r,n,i,s){if(bc=s,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yg.current=t===null||t.memoizedState===null?Lue:Bue,t=r(n,i),Cf){s=0;do{if(Cf=!1,sp=0,25<=s)throw Error(re(301));s+=1,Mr=Nr=null,e.updateQueue=null,Yg.current=zue,t=r(n,i)}while(Cf)}if(Yg.current=My,e=Nr!==null&&Nr.next!==null,bc=0,Mr=Nr=Lt=null,Ry=!1,e)throw Error(re(300));return t}function qR(){var t=sp!==0;return sp=0,t}function Ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?Lt.memoizedState=Mr=t:Mr=Mr.next=t,Mr}function Ui(){if(Nr===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=Nr.next;var e=Mr===null?Lt.memoizedState:Mr.next;if(e!==null)Mr=e,Nr=t;else{if(t===null)throw Error(re(310));Nr=t,t={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},Mr===null?Lt.memoizedState=Mr=t:Mr=Mr.next=t}return Mr}function op(t,e){return typeof e=="function"?e(t):e}function a1(t){var e=Ui(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=Nr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((bc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Lt.lanes|=d,xc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,ds(n,e.memoizedState)||(Wn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Lt.lanes|=s,xc|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function l1(t){var e=Ui(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ds(s,e.memoizedState)||(Wn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function BZ(){}function zZ(t,e){var r=Lt,n=Ui(),i=e(),s=!ds(n.memoizedState,i);if(s&&(n.memoizedState=i,Wn=!0),n=n.queue,LR(HZ.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Mr!==null&&Mr.memoizedState.tag&1){if(r.flags|=2048,ap(9,UZ.bind(null,r,n,i,e),void 0,null),$r===null)throw Error(re(349));bc&30||VZ(r,e,i)}return i}function VZ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function UZ(t,e,r,n){e.value=r,e.getSnapshot=n,WZ(e)&&KZ(t)}function HZ(t,e,r){return r(function(){WZ(e)&&KZ(t)})}function WZ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ds(t,r)}catch{return!0}}function KZ(t){var e=Io(t,1);e!==null&&us(e,t,1,-1)}function L$(t){var e=Ss();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:op,lastRenderedState:t},e.queue=t,t=t.dispatch=que.bind(null,Lt,t),[e.memoizedState,t]}function ap(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function GZ(){return Ui().memoizedState}function Qg(t,e,r,n){var i=Ss();Lt.flags|=t,i.memoizedState=ap(1|e,r,void 0,n===void 0?null:n)}function d0(t,e,r,n){var i=Ui();n=n===void 0?null:n;var s=void 0;if(Nr!==null){var o=Nr.memoizedState;if(s=o.destroy,n!==null&&$R(n,o.deps)){i.memoizedState=ap(e,r,s,n);return}}Lt.flags|=t,i.memoizedState=ap(1|e,r,s,n)}function B$(t,e){return Qg(8390656,8,t,e)}function LR(t,e){return d0(2048,8,t,e)}function YZ(t,e){return d0(4,2,t,e)}function QZ(t,e){return d0(4,4,t,e)}function XZ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JZ(t,e,r){return r=r!=null?r.concat([t]):null,d0(4,4,XZ.bind(null,e,t),r)}function BR(){}function ZZ(t,e){var r=Ui();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$R(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function eee(t,e){var r=Ui();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$R(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function tee(t,e,r){return bc&21?(ds(r,e)||(r=oZ(),Lt.lanes|=r,xc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wn=!0),t.memoizedState=r)}function $ue(t,e){var r=pt;pt=r!==0&&4>r?r:4,t(!0);var n=o1.transition;o1.transition={};try{t(!1),e()}finally{pt=r,o1.transition=n}}function ree(){return Ui().memoizedState}function Fue(t,e,r){var n=$a(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},nee(t))iee(e,r);else if(r=FZ(t,e,r,n),r!==null){var i=Tn();us(r,t,n,i),see(r,e,n)}}function que(t,e,r){var n=$a(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(nee(t))iee(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,ds(a,o)){var l=e.interleaved;l===null?(i.next=i,IR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=FZ(t,e,i,n),r!==null&&(i=Tn(),us(r,t,n,i),see(r,e,n))}}function nee(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function iee(t,e){Cf=Ry=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function see(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,vR(t,r)}}var My={readContext:Vi,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},Lue={readContext:Vi,useCallback:function(t,e){return Ss().memoizedState=[t,e===void 0?null:e],t},useContext:Vi,useEffect:B$,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Qg(4194308,4,XZ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Qg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qg(4,2,t,e)},useMemo:function(t,e){var r=Ss();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ss();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Fue.bind(null,Lt,t),[n.memoizedState,t]},useRef:function(t){var e=Ss();return t={current:t},e.memoizedState=t},useState:L$,useDebugValue:BR,useDeferredValue:function(t){return Ss().memoizedState=t},useTransition:function(){var t=L$(!1),e=t[0];return t=$ue.bind(null,t[1]),Ss().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Lt,i=Ss();if(Dt){if(r===void 0)throw Error(re(407));r=r()}else{if(r=e(),$r===null)throw Error(re(349));bc&30||VZ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,B$(HZ.bind(null,n,s,t),[t]),n.flags|=2048,ap(9,UZ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Ss(),e=$r.identifierPrefix;if(Dt){var r=fo,n=ho;r=(n&~(1<<32-cs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=sp++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Due++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bue={readContext:Vi,useCallback:ZZ,useContext:Vi,useEffect:LR,useImperativeHandle:JZ,useInsertionEffect:YZ,useLayoutEffect:QZ,useMemo:eee,useReducer:a1,useRef:GZ,useState:function(){return a1(op)},useDebugValue:BR,useDeferredValue:function(t){var e=Ui();return tee(e,Nr.memoizedState,t)},useTransition:function(){var t=a1(op)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:BZ,useSyncExternalStore:zZ,useId:ree,unstable_isNewReconciler:!1},zue={readContext:Vi,useCallback:ZZ,useContext:Vi,useEffect:LR,useImperativeHandle:JZ,useInsertionEffect:YZ,useLayoutEffect:QZ,useMemo:eee,useReducer:l1,useRef:GZ,useState:function(){return l1(op)},useDebugValue:BR,useDeferredValue:function(t){var e=Ui();return Nr===null?e.memoizedState=t:tee(e,Nr.memoizedState,t)},useTransition:function(){var t=l1(op)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:BZ,useSyncExternalStore:zZ,useId:ree,unstable_isNewReconciler:!1};function Ji(t,e){if(t&&t.defaultProps){e=zt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function uP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:zt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var h0={isMounted:function(t){return(t=t._reactInternals)?Uc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Tn(),i=$a(t),s=yo(n,i);s.payload=e,r!=null&&(s.callback=r),e=Aa(t,s,i),e!==null&&(us(e,t,i,n),Gg(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Tn(),i=$a(t),s=yo(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Aa(t,s,i),e!==null&&(us(e,t,i,n),Gg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Tn(),n=$a(t),i=yo(r,n);i.tag=2,e!=null&&(i.callback=e),e=Aa(t,i,n),e!==null&&(us(e,t,n,r),Gg(e,t,n))}};function z$(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zf(r,n)||!Zf(i,s):!0}function oee(t,e,r){var n=!1,i=Za,s=e.contextType;return typeof s=="object"&&s!==null?s=Vi(s):(i=Qn(e)?yc:hn.current,n=e.contextTypes,s=(n=n!=null)?Td(t,i):Za),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=h0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function V$(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&h0.enqueueReplaceState(e,e.state,null)}function dP(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},RR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vi(s):(s=Qn(e)?yc:hn.current,i.context=Td(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uP(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&h0.enqueueReplaceState(i,i.state,null),Py(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Id(t,e){try{var r="",n=e;do r+=gce(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function c1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function hP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Vue=typeof WeakMap=="function"?WeakMap:Map;function aee(t,e,r){r=yo(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Dy||(Dy=!0,SP=n),hP(t,e)},r}function lee(t,e,r){r=yo(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){hP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){hP(t,e),typeof n!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function U$(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Vue;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=nde.bind(null,t,e,r),e.then(t,t))}function H$(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function W$(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=yo(-1,1),e.tag=2,Aa(r,e,1))),r.lanes|=1),t)}var Uue=Do.ReactCurrentOwner,Wn=!1;function wn(t,e,r,n){e.child=t===null?$Z(e,null,r,n):jd(e,t.child,r,n)}function K$(t,e,r,n,i){r=r.render;var s=e.ref;return td(e,i),n=FR(t,e,r,n,s,i),r=qR(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ro(t,e,i)):(Dt&&r&&NR(e),e.flags|=1,wn(t,e,n,i),e.child)}function G$(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!YR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,cee(t,e,s,n,i)):(t=ey(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Zf,r(o,n)&&t.ref===e.ref)return Ro(t,e,i)}return e.flags|=1,t=Fa(s,n),t.ref=e.ref,t.return=e,e.child=t}function cee(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Zf(s,n)&&t.ref===e.ref)if(Wn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Wn=!0);else return e.lanes=t.lanes,Ro(t,e,i)}return fP(t,e,r,n,i)}function uee(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(zu,ci),ci|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(zu,ci),ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Tt(zu,ci),ci|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Tt(zu,ci),ci|=n;return wn(t,e,i,r),e.child}function dee(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function fP(t,e,r,n,i){var s=Qn(r)?yc:hn.current;return s=Td(e,s),td(e,i),r=FR(t,e,r,n,s,i),n=qR(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ro(t,e,i)):(Dt&&n&&NR(e),e.flags|=1,wn(t,e,r,i),e.child)}function Y$(t,e,r,n,i){if(Qn(r)){var s=!0;Ny(e)}else s=!1;if(td(e,i),e.stateNode===null)Xg(t,e),oee(e,r,n),dP(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Vi(c):(c=Qn(r)?yc:hn.current,c=Td(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&V$(e,o,n,c),ra=!1;var f=e.memoizedState;o.state=f,Py(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Yn.current||ra?(typeof d=="function"&&(uP(e,r,d,n),l=e.memoizedState),(a=ra||z$(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,qZ(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ji(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Vi(l):(l=Qn(r)?yc:hn.current,l=Td(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&V$(e,o,n,l),ra=!1,f=e.memoizedState,o.state=f,Py(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Yn.current||ra?(typeof p=="function"&&(uP(e,r,p,n),m=e.memoizedState),(c=ra||z$(e,r,c,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return pP(t,e,r,n,s,i)}function pP(t,e,r,n,i,s){dee(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&M$(e,r,!1),Ro(t,e,s);n=e.stateNode,Uue.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=jd(e,t.child,null,s),e.child=jd(e,null,a,s)):wn(t,e,a,s),e.memoizedState=n.state,i&&M$(e,r,!0),e.child}function hee(t){var e=t.stateNode;e.pendingContext?R$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&R$(t,e.context,!1),MR(t,e.containerInfo)}function Q$(t,e,r,n,i){return Od(),TR(i),e.flags|=256,wn(t,e,r,n),e.child}var mP={dehydrated:null,treeContext:null,retryLane:0};function gP(t){return{baseLanes:t,cachePool:null,transitions:null}}function fee(t,e,r){var n=e.pendingProps,i=Ft.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Tt(Ft,i&1),t===null)return lP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=m0(o,n,0,null),t=ic(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=gP(r),e.memoizedState=mP,t):zR(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Hue(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Fa(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fa(a,s):(s=ic(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?gP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=mP,n}return s=t.child,t=s.sibling,n=Fa(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function zR(t,e){return e=m0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fg(t,e,r,n){return n!==null&&TR(n),jd(e,t.child,null,r),t=zR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Hue(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=c1(Error(re(422))),fg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=m0({mode:"visible",children:n.children},i,0,null),s=ic(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&jd(e,t.child,null,o),e.child.memoizedState=gP(o),e.memoizedState=mP,s);if(!(e.mode&1))return fg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(re(419)),n=c1(s,n,void 0),fg(t,e,o,n)}if(a=(o&t.childLanes)!==0,Wn||a){if(n=$r,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Io(t,i),us(n,t,i,-1))}return GR(),n=c1(Error(re(421))),fg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ide.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pi=Ma(i.nextSibling),mi=e,Dt=!0,rs=null,t!==null&&(Ii[Ri++]=ho,Ii[Ri++]=fo,Ii[Ri++]=vc,ho=t.id,fo=t.overflow,vc=e),e=zR(e,n.children),e.flags|=4096,e)}function X$(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),cP(t.return,e,r)}function u1(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function pee(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(wn(t,e,n.children,r),n=Ft.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&X$(t,r,e);else if(t.tag===19)X$(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Tt(Ft,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Iy(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),u1(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Iy(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}u1(e,!0,r,null,s);break;case"together":u1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ro(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),xc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,r=Fa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Fa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Wue(t,e,r){switch(e.tag){case 3:hee(e),Od();break;case 5:LZ(e);break;case 1:Qn(e.type)&&Ny(e);break;case 4:MR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Tt(Oy,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Tt(Ft,Ft.current&1),e.flags|=128,null):r&e.child.childLanes?fee(t,e,r):(Tt(Ft,Ft.current&1),t=Ro(t,e,r),t!==null?t.sibling:null);Tt(Ft,Ft.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return pee(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(Ft,Ft.current),n)break;return null;case 22:case 23:return e.lanes=0,uee(t,e,r)}return Ro(t,e,r)}var mee,yP,gee,yee;mee=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yP=function(){};gee=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Dl(Ds.current);var s=null;switch(r){case"input":i=qj(t,i),n=qj(t,n),s=[];break;case"select":i=zt({},i,{value:void 0}),n=zt({},n,{value:void 0}),s=[];break;case"textarea":i=zj(t,i),n=zj(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ey)}Uj(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ot("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};yee=function(t,e,r,n){r!==n&&(e.flags|=4)};function Gh(t,e){if(!Dt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function on(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Kue(t,e,r){var n=e.pendingProps;switch(kR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(e),null;case 1:return Qn(e.type)&&Cy(),on(e),null;case 3:return n=e.stateNode,Pd(),Rt(Yn),Rt(hn),DR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(dg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rs!==null&&(CP(rs),rs=null))),yP(t,e),on(e),null;case 5:AR(e);var i=Dl(ip.current);if(r=e.type,t!==null&&e.stateNode!=null)gee(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(re(166));return on(e),null}if(t=Dl(Ds.current),dg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[js]=e,n[rp]=s,t=(e.mode&1)!==0,r){case"dialog":Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":case"embed":Ot("load",n);break;case"video":case"audio":for(i=0;i<hf.length;i++)Ot(hf[i],n);break;case"source":Ot("error",n);break;case"img":case"image":case"link":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"input":o$(n,s),Ot("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ot("invalid",n);break;case"textarea":l$(n,s),Ot("invalid",n)}Uj(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&ug(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ug(n.textContent,a,t),i=["children",""+a]):Wf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ot("scroll",n)}switch(r){case"input":rg(n),a$(n,s,!0);break;case"textarea":rg(n),c$(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Ey)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HJ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[js]=e,t[rp]=n,mee(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hj(r,n),r){case"dialog":Ot("cancel",t),Ot("close",t),i=n;break;case"iframe":case"object":case"embed":Ot("load",t),i=n;break;case"video":case"audio":for(i=0;i<hf.length;i++)Ot(hf[i],t);i=n;break;case"source":Ot("error",t),i=n;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),i=n;break;case"details":Ot("toggle",t),i=n;break;case"input":o$(t,n),i=qj(t,n),Ot("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=zt({},n,{value:void 0}),Ot("invalid",t);break;case"textarea":l$(t,n),i=zj(t,n),Ot("invalid",t);break;default:i=n}Uj(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?GJ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&WJ(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Kf(t,l):typeof l=="number"&&Kf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ot("scroll",t):l!=null&&hR(t,s,l,o))}switch(r){case"input":rg(t),a$(t,n,!1);break;case"textarea":rg(t),c$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ja(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Xu(t,!!n.multiple,s,!1):n.defaultValue!=null&&Xu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ey)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return on(e),null;case 6:if(t&&e.stateNode!=null)yee(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(re(166));if(r=Dl(ip.current),Dl(Ds.current),dg(e)){if(n=e.stateNode,r=e.memoizedProps,n[js]=e,(s=n.nodeValue!==r)&&(t=mi,t!==null))switch(t.tag){case 3:ug(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ug(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[js]=e,e.stateNode=n}return on(e),null;case 13:if(Rt(Ft),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Dt&&pi!==null&&e.mode&1&&!(e.flags&128))AZ(),Od(),e.flags|=98560,s=!1;else if(s=dg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(re(317));s[js]=e}else Od(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;on(e),s=!1}else rs!==null&&(CP(rs),rs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?kr===0&&(kr=3):GR())),e.updateQueue!==null&&(e.flags|=4),on(e),null);case 4:return Pd(),yP(t,e),t===null&&ep(e.stateNode.containerInfo),on(e),null;case 10:return PR(e.type._context),on(e),null;case 17:return Qn(e.type)&&Cy(),on(e),null;case 19:if(Rt(Ft),s=e.memoizedState,s===null)return on(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Gh(s,!1);else{if(kr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Iy(t),o!==null){for(e.flags|=128,Gh(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Tt(Ft,Ft.current&1|2),e.child}t=t.sibling}s.tail!==null&&sr()>Rd&&(e.flags|=128,n=!0,Gh(s,!1),e.lanes=4194304)}else{if(!n)if(t=Iy(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Gh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Dt)return on(e),null}else 2*sr()-s.renderingStartTime>Rd&&r!==1073741824&&(e.flags|=128,n=!0,Gh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=sr(),e.sibling=null,r=Ft.current,Tt(Ft,n?r&1|2:r&1),e):(on(e),null);case 22:case 23:return KR(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ci&1073741824&&(on(e),e.subtreeFlags&6&&(e.flags|=8192)):on(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function Gue(t,e){switch(kR(e),e.tag){case 1:return Qn(e.type)&&Cy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pd(),Rt(Yn),Rt(hn),DR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return AR(e),null;case 13:if(Rt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Od()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Rt(Ft),null;case 4:return Pd(),null;case 10:return PR(e.type._context),null;case 22:case 23:return KR(),null;case 24:return null;default:return null}}var pg=!1,un=!1,Yue=typeof WeakSet=="function"?WeakSet:Set,be=null;function Bu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Qt(t,e,n)}else r.current=null}function vP(t,e,r){try{r()}catch(n){Qt(t,e,n)}}var J$=!1;function Que(t,e){if(tP=wy,t=SZ(),CR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(rP={focusedElem:t,selectionRange:r},wy=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ji(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(x){Qt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return m=J$,J$=!1,m}function Nf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&vP(e,r,s)}i=i.next}while(i!==n)}}function f0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function bP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function vee(t){var e=t.alternate;e!==null&&(t.alternate=null,vee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[js],delete e[rp],delete e[sP],delete e[Iue],delete e[Rue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bee(t){return t.tag===5||t.tag===3||t.tag===4}function Z$(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ey));else if(n!==4&&(t=t.child,t!==null))for(xP(t,e,r),t=t.sibling;t!==null;)xP(t,e,r),t=t.sibling}function wP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(wP(t,e,r),t=t.sibling;t!==null;)wP(t,e,r),t=t.sibling}var Yr=null,ts=!1;function Ko(t,e,r){for(r=r.child;r!==null;)xee(t,e,r),r=r.sibling}function xee(t,e,r){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount(s0,r)}catch{}switch(r.tag){case 5:un||Bu(r,e);case 6:var n=Yr,i=ts;Yr=null,Ko(t,e,r),Yr=n,ts=i,Yr!==null&&(ts?(t=Yr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Yr.removeChild(r.stateNode));break;case 18:Yr!==null&&(ts?(t=Yr,r=r.stateNode,t.nodeType===8?n1(t.parentNode,r):t.nodeType===1&&n1(t,r),Xf(t)):n1(Yr,r.stateNode));break;case 4:n=Yr,i=ts,Yr=r.stateNode.containerInfo,ts=!0,Ko(t,e,r),Yr=n,ts=i;break;case 0:case 11:case 14:case 15:if(!un&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vP(r,e,o),i=i.next}while(i!==n)}Ko(t,e,r);break;case 1:if(!un&&(Bu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Qt(r,e,a)}Ko(t,e,r);break;case 21:Ko(t,e,r);break;case 22:r.mode&1?(un=(n=un)||r.memoizedState!==null,Ko(t,e,r),un=n):Ko(t,e,r);break;default:Ko(t,e,r)}}function eF(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Yue),e.forEach(function(n){var i=sde.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Qi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yr=a.stateNode,ts=!1;break e;case 3:Yr=a.stateNode.containerInfo,ts=!0;break e;case 4:Yr=a.stateNode.containerInfo,ts=!0;break e}a=a.return}if(Yr===null)throw Error(re(160));xee(s,o,i),Yr=null,ts=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Qt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wee(e,t),e=e.sibling}function wee(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qi(e,t),xs(t),n&4){try{Nf(3,t,t.return),f0(3,t)}catch(g){Qt(t,t.return,g)}try{Nf(5,t,t.return)}catch(g){Qt(t,t.return,g)}}break;case 1:Qi(e,t),xs(t),n&512&&r!==null&&Bu(r,r.return);break;case 5:if(Qi(e,t),xs(t),n&512&&r!==null&&Bu(r,r.return),t.flags&32){var i=t.stateNode;try{Kf(i,"")}catch(g){Qt(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&VJ(i,s),Hj(a,o);var c=Hj(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?GJ(i,h):d==="dangerouslySetInnerHTML"?WJ(i,h):d==="children"?Kf(i,h):hR(i,d,h,c)}switch(a){case"input":Lj(i,s);break;case"textarea":UJ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Xu(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Xu(i,!!s.multiple,s.defaultValue,!0):Xu(i,!!s.multiple,s.multiple?[]:"",!1))}i[rp]=s}catch(g){Qt(t,t.return,g)}}break;case 6:if(Qi(e,t),xs(t),n&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Qt(t,t.return,g)}}break;case 3:if(Qi(e,t),xs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Xf(e.containerInfo)}catch(g){Qt(t,t.return,g)}break;case 4:Qi(e,t),xs(t);break;case 13:Qi(e,t),xs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(HR=sr())),n&4&&eF(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(un=(c=un)||d,Qi(e,t),un=c):Qi(e,t),xs(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(h=be=d;be!==null;){switch(f=be,p=f.child,f.tag){case 0:case 11:case 14:case 15:Nf(4,f,f.return);break;case 1:Bu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Qt(n,r,g)}}break;case 5:Bu(f,f.return);break;case 22:if(f.memoizedState!==null){rF(h);continue}}p!==null?(p.return=f,be=p):rF(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=KJ("display",o))}catch(g){Qt(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Qt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Qi(e,t),xs(t),n&4&&eF(t);break;case 21:break;default:Qi(e,t),xs(t)}}function xs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(bee(r)){var n=r;break e}r=r.return}throw Error(re(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Kf(i,""),n.flags&=-33);var s=Z$(t);wP(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Z$(t);xP(t,a,o);break;default:throw Error(re(161))}}catch(l){Qt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Xue(t,e,r){be=t,See(t)}function See(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var i=be,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||pg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||un;a=pg;var c=un;if(pg=o,(un=l)&&!c)for(be=i;be!==null;)o=be,l=o.child,o.tag===22&&o.memoizedState!==null?nF(i):l!==null?(l.return=o,be=l):nF(i);for(;s!==null;)be=s,See(s),s=s.sibling;be=i,pg=a,un=c}tF(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,be=s):tF(t)}}function tF(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:un||f0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!un)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Ji(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&q$(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}q$(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Xf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}un||e.flags&512&&bP(e)}catch(f){Qt(e,e.return,f)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function rF(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function nF(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{f0(4,e)}catch(l){Qt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Qt(e,i,l)}}var s=e.return;try{bP(e)}catch(l){Qt(e,s,l)}break;case 5:var o=e.return;try{bP(e)}catch(l){Qt(e,o,l)}}}catch(l){Qt(e,e.return,l)}if(e===t){be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,be=a;break}be=e.return}}var Jue=Math.ceil,Ay=Do.ReactCurrentDispatcher,VR=Do.ReactCurrentOwner,Fi=Do.ReactCurrentBatchConfig,st=0,$r=null,dr=null,Zr=0,ci=0,zu=al(0),kr=0,lp=null,xc=0,p0=0,UR=0,kf=null,Vn=null,HR=0,Rd=1/0,io=null,Dy=!1,SP=null,Da=null,mg=!1,Ca=null,$y=0,Tf=0,_P=null,Jg=-1,Zg=0;function Tn(){return st&6?sr():Jg!==-1?Jg:Jg=sr()}function $a(t){return t.mode&1?st&2&&Zr!==0?Zr&-Zr:Aue.transition!==null?(Zg===0&&(Zg=oZ()),Zg):(t=pt,t!==0||(t=window.event,t=t===void 0?16:fZ(t.type)),t):1}function us(t,e,r,n){if(50<Tf)throw Tf=0,_P=null,Error(re(185));Wp(t,r,n),(!(st&2)||t!==$r)&&(t===$r&&(!(st&2)&&(p0|=r),kr===4&&ua(t,Zr)),Xn(t,n),r===1&&st===0&&!(e.mode&1)&&(Rd=sr()+500,u0&&ll()))}function Xn(t,e){var r=t.callbackNode;Ace(t,e);var n=xy(t,t===$r?Zr:0);if(n===0)r!==null&&h$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&h$(r),e===1)t.tag===0?Mue(iF.bind(null,t)):IZ(iF.bind(null,t)),jue(function(){!(st&6)&&ll()}),r=null;else{switch(aZ(n)){case 1:r=yR;break;case 4:r=iZ;break;case 16:r=by;break;case 536870912:r=sZ;break;default:r=by}r=jee(r,_ee.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function _ee(t,e){if(Jg=-1,Zg=0,st&6)throw Error(re(327));var r=t.callbackNode;if(rd()&&t.callbackNode!==r)return null;var n=xy(t,t===$r?Zr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Fy(t,n);else{e=n;var i=st;st|=2;var s=Cee();($r!==t||Zr!==e)&&(io=null,Rd=sr()+500,nc(t,e));do try{tde();break}catch(a){Eee(t,a)}while(!0);jR(),Ay.current=s,st=i,dr!==null?e=0:($r=null,Zr=0,e=kr)}if(e!==0){if(e===2&&(i=Qj(t),i!==0&&(n=i,e=EP(t,i))),e===1)throw r=lp,nc(t,0),ua(t,n),Xn(t,sr()),r;if(e===6)ua(t,n);else{if(i=t.current.alternate,!(n&30)&&!Zue(i)&&(e=Fy(t,n),e===2&&(s=Qj(t),s!==0&&(n=s,e=EP(t,s))),e===1))throw r=lp,nc(t,0),ua(t,n),Xn(t,sr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(re(345));case 2:Pl(t,Vn,io);break;case 3:if(ua(t,n),(n&130023424)===n&&(e=HR+500-sr(),10<e)){if(xy(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Tn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=iP(Pl.bind(null,t,Vn,io),e);break}Pl(t,Vn,io);break;case 4:if(ua(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-cs(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=sr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Jue(n/1960))-n,10<n){t.timeoutHandle=iP(Pl.bind(null,t,Vn,io),n);break}Pl(t,Vn,io);break;case 5:Pl(t,Vn,io);break;default:throw Error(re(329))}}}return Xn(t,sr()),t.callbackNode===r?_ee.bind(null,t):null}function EP(t,e){var r=kf;return t.current.memoizedState.isDehydrated&&(nc(t,e).flags|=256),t=Fy(t,e),t!==2&&(e=Vn,Vn=r,e!==null&&CP(e)),t}function CP(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function Zue(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!ds(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ua(t,e){for(e&=~UR,e&=~p0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-cs(e),n=1<<r;t[r]=-1,e&=~n}}function iF(t){if(st&6)throw Error(re(327));rd();var e=xy(t,0);if(!(e&1))return Xn(t,sr()),null;var r=Fy(t,e);if(t.tag!==0&&r===2){var n=Qj(t);n!==0&&(e=n,r=EP(t,n))}if(r===1)throw r=lp,nc(t,0),ua(t,e),Xn(t,sr()),r;if(r===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pl(t,Vn,io),Xn(t,sr()),null}function WR(t,e){var r=st;st|=1;try{return t(e)}finally{st=r,st===0&&(Rd=sr()+500,u0&&ll())}}function wc(t){Ca!==null&&Ca.tag===0&&!(st&6)&&rd();var e=st;st|=1;var r=Fi.transition,n=pt;try{if(Fi.transition=null,pt=1,t)return t()}finally{pt=n,Fi.transition=r,st=e,!(st&6)&&ll()}}function KR(){ci=zu.current,Rt(zu)}function nc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Oue(r)),dr!==null)for(r=dr.return;r!==null;){var n=r;switch(kR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Cy();break;case 3:Pd(),Rt(Yn),Rt(hn),DR();break;case 5:AR(n);break;case 4:Pd();break;case 13:Rt(Ft);break;case 19:Rt(Ft);break;case 10:PR(n.type._context);break;case 22:case 23:KR()}r=r.return}if($r=t,dr=t=Fa(t.current,null),Zr=ci=e,kr=0,lp=null,UR=p0=xc=0,Vn=kf=null,Al!==null){for(e=0;e<Al.length;e++)if(r=Al[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Al=null}return t}function Eee(t,e){do{var r=dr;try{if(jR(),Yg.current=My,Ry){for(var n=Lt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ry=!1}if(bc=0,Mr=Nr=Lt=null,Cf=!1,sp=0,VR.current=null,r===null||r.return===null){kr=1,lp=e,dr=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=Zr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=H$(o);if(p!==null){p.flags&=-257,W$(p,o,a,s,e),p.mode&1&&U$(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){U$(s,c,e),GR();break e}l=Error(re(426))}}else if(Dt&&a.mode&1){var v=H$(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),W$(v,o,a,s,e),TR(Id(l,a));break e}}s=l=Id(l,a),kr!==4&&(kr=2),kf===null?kf=[s]:kf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=aee(s,l,e);F$(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Da===null||!Da.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=lee(s,a,e);F$(s,x);break e}}s=s.return}while(s!==null)}kee(r)}catch(S){e=S,dr===r&&r!==null&&(dr=r=r.return);continue}break}while(!0)}function Cee(){var t=Ay.current;return Ay.current=My,t===null?My:t}function GR(){(kr===0||kr===3||kr===2)&&(kr=4),$r===null||!(xc&268435455)&&!(p0&268435455)||ua($r,Zr)}function Fy(t,e){var r=st;st|=2;var n=Cee();($r!==t||Zr!==e)&&(io=null,nc(t,e));do try{ede();break}catch(i){Eee(t,i)}while(!0);if(jR(),st=r,Ay.current=n,dr!==null)throw Error(re(261));return $r=null,Zr=0,kr}function ede(){for(;dr!==null;)Nee(dr)}function tde(){for(;dr!==null&&!Nce();)Nee(dr)}function Nee(t){var e=Oee(t.alternate,t,ci);t.memoizedProps=t.pendingProps,e===null?kee(t):dr=e,VR.current=null}function kee(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Gue(r,e),r!==null){r.flags&=32767,dr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kr=6,dr=null;return}}else if(r=Kue(r,e,ci),r!==null){dr=r;return}if(e=e.sibling,e!==null){dr=e;return}dr=e=t}while(e!==null);kr===0&&(kr=5)}function Pl(t,e,r){var n=pt,i=Fi.transition;try{Fi.transition=null,pt=1,rde(t,e,r,n)}finally{Fi.transition=i,pt=n}return null}function rde(t,e,r,n){do rd();while(Ca!==null);if(st&6)throw Error(re(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Dce(t,s),t===$r&&(dr=$r=null,Zr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||mg||(mg=!0,jee(by,function(){return rd(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Fi.transition,Fi.transition=null;var o=pt;pt=1;var a=st;st|=4,VR.current=null,Que(t,r),wee(r,t),Sue(rP),wy=!!tP,rP=tP=null,t.current=r,Xue(r),kce(),st=a,pt=o,Fi.transition=s}else t.current=r;if(mg&&(mg=!1,Ca=t,$y=i),s=t.pendingLanes,s===0&&(Da=null),jce(r.stateNode),Xn(t,sr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Dy)throw Dy=!1,t=SP,SP=null,t;return $y&1&&t.tag!==0&&rd(),s=t.pendingLanes,s&1?t===_P?Tf++:(Tf=0,_P=t):Tf=0,ll(),null}function rd(){if(Ca!==null){var t=aZ($y),e=Fi.transition,r=pt;try{if(Fi.transition=null,pt=16>t?16:t,Ca===null)var n=!1;else{if(t=Ca,Ca=null,$y=0,st&6)throw Error(re(331));var i=st;for(st|=4,be=t.current;be!==null;){var s=be,o=s.child;if(be.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(be=c;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:Nf(8,d,s)}var h=d.child;if(h!==null)h.return=d,be=h;else for(;be!==null;){d=be;var f=d.sibling,p=d.return;if(vee(d),d===c){be=null;break}if(f!==null){f.return=p,be=f;break}be=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}be=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,be=o;else e:for(;be!==null;){if(s=be,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,be=y;break e}be=s.return}}var b=t.current;for(be=b;be!==null;){o=be;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,be=w;else e:for(o=b;be!==null;){if(a=be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:f0(9,a)}}catch(S){Qt(a,a.return,S)}if(a===o){be=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,be=x;break e}be=a.return}}if(st=i,ll(),As&&typeof As.onPostCommitFiberRoot=="function")try{As.onPostCommitFiberRoot(s0,t)}catch{}n=!0}return n}finally{pt=r,Fi.transition=e}}return!1}function sF(t,e,r){e=Id(r,e),e=aee(t,e,1),t=Aa(t,e,1),e=Tn(),t!==null&&(Wp(t,1,e),Xn(t,e))}function Qt(t,e,r){if(t.tag===3)sF(t,t,r);else for(;e!==null;){if(e.tag===3){sF(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Da===null||!Da.has(n))){t=Id(r,t),t=lee(e,t,1),e=Aa(e,t,1),t=Tn(),e!==null&&(Wp(e,1,t),Xn(e,t));break}}e=e.return}}function nde(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&r,$r===t&&(Zr&r)===r&&(kr===4||kr===3&&(Zr&130023424)===Zr&&500>sr()-HR?nc(t,0):UR|=r),Xn(t,e)}function Tee(t,e){e===0&&(t.mode&1?(e=sg,sg<<=1,!(sg&130023424)&&(sg=4194304)):e=1);var r=Tn();t=Io(t,e),t!==null&&(Wp(t,e,r),Xn(t,r))}function ide(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Tee(t,r)}function sde(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(re(314))}n!==null&&n.delete(e),Tee(t,r)}var Oee;Oee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yn.current)Wn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Wn=!1,Wue(t,e,r);Wn=!!(t.flags&131072)}else Wn=!1,Dt&&e.flags&1048576&&RZ(e,Ty,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Xg(t,e),t=e.pendingProps;var i=Td(e,hn.current);td(e,r),i=FR(null,e,n,t,i,r);var s=qR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(n)?(s=!0,Ny(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,RR(e),i.updater=h0,e.stateNode=i,i._reactInternals=e,dP(e,n,t,r),e=pP(null,e,n,!0,s,r)):(e.tag=0,Dt&&s&&NR(e),wn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Xg(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=ade(n),t=Ji(n,t),i){case 0:e=fP(null,e,n,t,r);break e;case 1:e=Y$(null,e,n,t,r);break e;case 11:e=K$(null,e,n,t,r);break e;case 14:e=G$(null,e,n,Ji(n.type,t),r);break e}throw Error(re(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),fP(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),Y$(t,e,n,i,r);case 3:e:{if(hee(e),t===null)throw Error(re(387));n=e.pendingProps,s=e.memoizedState,i=s.element,qZ(t,e),Py(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Id(Error(re(423)),e),e=Q$(t,e,n,r,i);break e}else if(n!==i){i=Id(Error(re(424)),e),e=Q$(t,e,n,r,i);break e}else for(pi=Ma(e.stateNode.containerInfo.firstChild),mi=e,Dt=!0,rs=null,r=$Z(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Od(),n===i){e=Ro(t,e,r);break e}wn(t,e,n,r)}e=e.child}return e;case 5:return LZ(e),t===null&&lP(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,nP(n,i)?o=null:s!==null&&nP(n,s)&&(e.flags|=32),dee(t,e),wn(t,e,o,r),e.child;case 6:return t===null&&lP(e),null;case 13:return fee(t,e,r);case 4:return MR(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=jd(e,null,n,r):wn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),K$(t,e,n,i,r);case 7:return wn(t,e,e.pendingProps,r),e.child;case 8:return wn(t,e,e.pendingProps.children,r),e.child;case 12:return wn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Tt(Oy,n._currentValue),n._currentValue=o,s!==null)if(ds(s.value,o)){if(s.children===i.children&&!Yn.current){e=Ro(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=yo(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),cP(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(re(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),cP(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,td(e,r),i=Vi(i),n=n(i),e.flags|=1,wn(t,e,n,r),e.child;case 14:return n=e.type,i=Ji(n,e.pendingProps),i=Ji(n.type,i),G$(t,e,n,i,r);case 15:return cee(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),Xg(t,e),e.tag=1,Qn(n)?(t=!0,Ny(e)):t=!1,td(e,r),oee(e,n,i),dP(e,n,i,r),pP(null,e,n,!0,t,r);case 19:return pee(t,e,r);case 22:return uee(t,e,r)}throw Error(re(156,e.tag))};function jee(t,e){return nZ(t,e)}function ode(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(t,e,r,n){return new ode(t,e,r,n)}function YR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ade(t){if(typeof t=="function")return YR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pR)return 11;if(t===mR)return 14}return 2}function Fa(t,e){var r=t.alternate;return r===null?(r=$i(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ey(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")YR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Iu:return ic(r.children,i,s,e);case fR:o=8,i|=8;break;case Aj:return t=$i(12,r,e,i|2),t.elementType=Aj,t.lanes=s,t;case Dj:return t=$i(13,r,e,i),t.elementType=Dj,t.lanes=s,t;case $j:return t=$i(19,r,e,i),t.elementType=$j,t.lanes=s,t;case LJ:return m0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FJ:o=10;break e;case qJ:o=9;break e;case pR:o=11;break e;case mR:o=14;break e;case ta:o=16,n=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=$i(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ic(t,e,r,n){return t=$i(7,t,n,e),t.lanes=r,t}function m0(t,e,r,n){return t=$i(22,t,n,e),t.elementType=LJ,t.lanes=r,t.stateNode={isHidden:!1},t}function d1(t,e,r){return t=$i(6,t,null,e),t.lanes=r,t}function h1(t,e,r){return e=$i(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lde(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wb(0),this.expirationTimes=Wb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wb(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function QR(t,e,r,n,i,s,o,a,l){return t=new lde(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$i(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},RR(s),t}function cde(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Pee(t){if(!t)return Za;t=t._reactInternals;e:{if(Uc(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var r=t.type;if(Qn(r))return PZ(t,r,e)}return e}function Iee(t,e,r,n,i,s,o,a,l){return t=QR(r,n,!0,t,i,s,o,a,l),t.context=Pee(null),r=t.current,n=Tn(),i=$a(r),s=yo(n,i),s.callback=e??null,Aa(r,s,i),t.current.lanes=i,Wp(t,i,n),Xn(t,n),t}function g0(t,e,r,n){var i=e.current,s=Tn(),o=$a(i);return r=Pee(r),e.context===null?e.context=r:e.pendingContext=r,e=yo(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Aa(i,e,o),t!==null&&(us(t,i,o,s),Gg(t,i,o)),o}function qy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function XR(t,e){oF(t,e),(t=t.alternate)&&oF(t,e)}function ude(){return null}var Ree=typeof reportError=="function"?reportError:function(t){console.error(t)};function JR(t){this._internalRoot=t}y0.prototype.render=JR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));g0(t,e,null,null)};y0.prototype.unmount=JR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wc(function(){g0(null,t,null,null)}),e[Po]=null}};function y0(t){this._internalRoot=t}y0.prototype.unstable_scheduleHydration=function(t){if(t){var e=uZ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ca.length&&e!==0&&e<ca[r].priority;r++);ca.splice(r,0,t),r===0&&hZ(t)}};function ZR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function v0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function aF(){}function dde(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=qy(o);s.call(c)}}var o=Iee(e,n,t,0,null,!1,!1,"",aF);return t._reactRootContainer=o,t[Po]=o.current,ep(t.nodeType===8?t.parentNode:t),wc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=qy(l);a.call(c)}}var l=QR(t,0,!1,null,null,!1,!1,"",aF);return t._reactRootContainer=l,t[Po]=l.current,ep(t.nodeType===8?t.parentNode:t),wc(function(){g0(e,l,r,n)}),l}function b0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=qy(o);a.call(l)}}g0(e,o,t,i)}else o=dde(r,e,t,i,n);return qy(o)}lZ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=df(e.pendingLanes);r!==0&&(vR(e,r|1),Xn(e,sr()),!(st&6)&&(Rd=sr()+500,ll()))}break;case 13:wc(function(){var n=Io(t,1);if(n!==null){var i=Tn();us(n,t,1,i)}}),XR(t,1)}};bR=function(t){if(t.tag===13){var e=Io(t,134217728);if(e!==null){var r=Tn();us(e,t,134217728,r)}XR(t,134217728)}};cZ=function(t){if(t.tag===13){var e=$a(t),r=Io(t,e);if(r!==null){var n=Tn();us(r,t,e,n)}XR(t,e)}};uZ=function(){return pt};dZ=function(t,e){var r=pt;try{return pt=t,e()}finally{pt=r}};Kj=function(t,e,r){switch(e){case"input":if(Lj(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=c0(n);if(!i)throw Error(re(90));zJ(n),Lj(n,i)}}}break;case"textarea":UJ(t,r);break;case"select":e=r.value,e!=null&&Xu(t,!!r.multiple,e,!1)}};XJ=WR;JJ=wc;var hde={usingClientEntryPoint:!1,Events:[Gp,Du,c0,YJ,QJ,WR]},Yh={findFiberByHostInstance:Ml,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fde={bundleType:Yh.bundleType,version:Yh.version,rendererPackageName:Yh.rendererPackageName,rendererConfig:Yh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Do.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tZ(t),t===null?null:t.stateNode},findFiberByHostInstance:Yh.findFiberByHostInstance||ude,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gg.isDisabled&&gg.supportsFiber)try{s0=gg.inject(fde),As=gg}catch{}}vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hde;vi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZR(e))throw Error(re(200));return cde(t,e,null,r)};vi.createRoot=function(t,e){if(!ZR(t))throw Error(re(299));var r=!1,n="",i=Ree;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=QR(t,1,!1,null,null,r,!1,n,i),t[Po]=e.current,ep(t.nodeType===8?t.parentNode:t),new JR(e)};vi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=tZ(e),t=t===null?null:t.stateNode,t};vi.flushSync=function(t){return wc(t)};vi.hydrate=function(t,e,r){if(!v0(e))throw Error(re(200));return b0(null,t,e,!0,r)};vi.hydrateRoot=function(t,e,r){if(!ZR(t))throw Error(re(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Ree;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Iee(e,null,t,1,r??null,i,!1,s,o),t[Po]=e.current,ep(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new y0(e)};vi.render=function(t,e,r){if(!v0(e))throw Error(re(200));return b0(null,t,e,!1,r)};vi.unmountComponentAtNode=function(t){if(!v0(t))throw Error(re(40));return t._reactRootContainer?(wc(function(){b0(null,null,t,!1,function(){t._reactRootContainer=null,t[Po]=null})}),!0):!1};vi.unstable_batchedUpdates=WR;vi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!v0(r))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return b0(t,e,r,!1,n)};vi.version="18.3.1-next-f1338f8080-20240426";function Mee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mee)}catch(t){console.error(t)}}Mee(),MJ.exports=vi;var Aee=MJ.exports;const pde=SJ(Aee);var lF=Aee;Rj.createRoot=lF.createRoot,Rj.hydrateRoot=lF.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cp.apply(this,arguments)}var Na;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Na||(Na={}));const cF="popstate";function mde(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return NP("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Ly(i)}return yde(e,r,null,t)}function Bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gde(){return Math.random().toString(36).substr(2,8)}function uF(t,e){return{usr:t.state,key:t.key,idx:e}}function NP(t,e,r,n){return r===void 0&&(r=null),cp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?sh(e):e,{state:r,key:e&&e.key||n||gde()})}function Ly(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function sh(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function yde(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Na.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(cp({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Na.Pop;let v=d(),y=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=Na.Push;let b=NP(g.location,v,y);c=d()+1;let w=uF(b,c),x=g.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(v,y){a=Na.Replace;let b=NP(g.location,v,y);c=d();let w=uF(b,c),x=g.createHref(b);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof v=="string"?v:Ly(v);return b=b.replace(/ $/,"%20"),Bt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(cF,h),l=v,()=>{i.removeEventListener(cF,h),l=null}},createHref(v){return e(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var dF;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dF||(dF={}));function vde(t,e,r){return r===void 0&&(r="/"),bde(t,e,r)}function bde(t,e,r,n){let i=typeof e=="string"?sh(e):e,s=Md(i.pathname||"/",r);if(s==null)return null;let o=Dee(t);xde(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Pde(s);a=Ode(o[l],c)}return a}function Dee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Bt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=qa([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Bt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Dee(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:kde(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of $ee(s.path))i(s,o,l)}),e}function $ee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=$ee(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function xde(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Tde(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const wde=/^:[\w-]+$/,Sde=3,_de=2,Ede=1,Cde=10,Nde=-2,hF=t=>t==="*";function kde(t,e){let r=t.split("/"),n=r.length;return r.some(hF)&&(n+=Nde),e&&(n+=_de),r.filter(i=>!hF(i)).reduce((i,s)=>i+(wde.test(s)?Sde:s===""?Ede:Cde),n)}function Tde(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Ode(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=kP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:qa([s,h.pathname]),pathnameBase:Dde(qa([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=qa([s,h.pathnameBase]))}return o}function kP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=jde(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function jde(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),eM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Pde(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Md(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Ide=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rde=t=>Ide.test(t);function Mde(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?sh(t):t,s;if(r)if(Rde(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),eM(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=fF(r.substring(1),"/"):s=fF(r,e)}else s=e;return{pathname:s,search:$de(n),hash:Fde(i)}}function fF(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function f1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ade(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function tM(t,e){let r=Ade(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rM(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=sh(t):(i=cp({},t),Bt(!i.pathname||!i.pathname.includes("?"),f1("?","pathname","search",i)),Bt(!i.pathname||!i.pathname.includes("#"),f1("#","pathname","hash",i)),Bt(!i.search||!i.search.includes("#"),f1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Mde(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const qa=t=>t.join("/").replace(/\/\/+/g,"/"),Dde=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$de=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Fde=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qde(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Fee=["post","put","patch","delete"];new Set(Fee);const Lde=["get",...Fee];new Set(Lde);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},up.apply(this,arguments)}const x0=k.createContext(null),qee=k.createContext(null),$o=k.createContext(null),w0=k.createContext(null),Fo=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Lee=k.createContext(null);function Bde(t,e){let{relative:r}=e===void 0?{}:e;oh()||Bt(!1);let{basename:n,navigator:i}=k.useContext($o),{hash:s,pathname:o,search:a}=S0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:qa([n,o])),i.createHref({pathname:l,search:a,hash:s})}function oh(){return k.useContext(w0)!=null}function qo(){return oh()||Bt(!1),k.useContext(w0).location}function Bee(t){k.useContext($o).static||k.useLayoutEffect(t)}function ps(){let{isDataRoute:t}=k.useContext(Fo);return t?ehe():zde()}function zde(){oh()||Bt(!1);let t=k.useContext(x0),{basename:e,future:r,navigator:n}=k.useContext($o),{matches:i}=k.useContext(Fo),{pathname:s}=qo(),o=JSON.stringify(tM(i,r.v7_relativeSplatPath)),a=k.useRef(!1);return Bee(()=>{a.current=!0}),k.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=rM(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qa([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function nM(){let{matches:t}=k.useContext(Fo),e=t[t.length-1];return e?e.params:{}}function S0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=k.useContext($o),{matches:i}=k.useContext(Fo),{pathname:s}=qo(),o=JSON.stringify(tM(i,n.v7_relativeSplatPath));return k.useMemo(()=>rM(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function Vde(t,e){return Ude(t,e)}function Ude(t,e,r,n){oh()||Bt(!1);let{navigator:i}=k.useContext($o),{matches:s}=k.useContext(Fo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=qo(),d;if(e){var h;let v=typeof e=="string"?sh(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Bt(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=vde(t,{pathname:p}),g=Yde(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:qa([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:qa([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,n);return e&&g?k.createElement(w0.Provider,{value:{location:up({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Na.Pop}},g):g}function Hde(){let t=Zde(),e=qde(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:i},r):null,null)}const Wde=k.createElement(Hde,null);class Kde extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?k.createElement(Fo.Provider,{value:this.props.routeContext},k.createElement(Lee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Gde(t){let{routeContext:e,match:r,children:n}=t,i=k.useContext(x0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(Fo.Provider,{value:e},n)}function Yde(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Bt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,v=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Wde,l&&(c<0&&f===0?(the("route-fallback"),m=!0,v=null):c===f&&(m=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),b=()=>{let w;return p?w=g:m?w=v:h.route.Component?w=k.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,k.createElement(Gde,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(Kde,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var zee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zee||{}),Vee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vee||{});function Qde(t){let e=k.useContext(x0);return e||Bt(!1),e}function Xde(t){let e=k.useContext(qee);return e||Bt(!1),e}function Jde(t){let e=k.useContext(Fo);return e||Bt(!1),e}function Uee(t){let e=Jde(),r=e.matches[e.matches.length-1];return r.route.id||Bt(!1),r.route.id}function Zde(){var t;let e=k.useContext(Lee),r=Xde(),n=Uee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function ehe(){let{router:t}=Qde(zee.UseNavigateStable),e=Uee(Vee.UseNavigateStable),r=k.useRef(!1);return Bee(()=>{r.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,up({fromRouteId:e},s)))},[t,e])}const pF={};function the(t,e,r){pF[t]||(pF[t]=!0)}function rhe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Hee(t){let{to:e,replace:r,state:n,relative:i}=t;oh()||Bt(!1);let{future:s,static:o}=k.useContext($o),{matches:a}=k.useContext(Fo),{pathname:l}=qo(),c=ps(),d=rM(e,tM(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return k.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:i}),[c,h,i,r,n]),null}function vn(t){Bt(!1)}function nhe(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Na.Pop,navigator:s,static:o=!1,future:a}=t;oh()&&Bt(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:s,static:o,future:up({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=sh(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=k.useMemo(()=>{let v=Md(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:k.createElement($o.Provider,{value:c},k.createElement(w0.Provider,{children:r,value:g}))}function mF(t){let{children:e,location:r}=t;return Vde(TP(e),r)}new Promise(()=>{});function TP(t,e){e===void 0&&(e=[]);let r=[];return k.Children.forEach(t,(n,i)=>{if(!k.isValidElement(n))return;let s=[...e,i];if(n.type===k.Fragment){r.push.apply(r,TP(n.props.children,s));return}n.type!==vn&&Bt(!1),!n.props.index||!n.props.children||Bt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=TP(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function By(){return By=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},By.apply(this,arguments)}function Wee(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function ihe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function she(t,e){return t.button===0&&(!e||e==="_self")&&!ihe(t)}function OP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function ohe(t,e){let r=OP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const ahe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lhe=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],che="6";try{window.__reactRouterVersion=che}catch{}const uhe=k.createContext({isTransitioning:!1}),dhe="startTransition",gF=nce[dhe];function hhe(t){let{basename:e,children:r,future:n,window:i}=t,s=k.useRef();s.current==null&&(s.current=mde({window:i,v5Compat:!0}));let o=s.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=k.useCallback(h=>{c&&gF?gF(()=>l(h)):l(h)},[l,c]);return k.useLayoutEffect(()=>o.listen(d),[o,d]),k.useEffect(()=>rhe(n),[n]),k.createElement(nhe,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const fhe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",phe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=k.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=Wee(e,ahe),{basename:p}=k.useContext($o),m,g=!1;if(typeof c=="string"&&phe.test(c)&&(m=c,fhe))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=Md(x.pathname,p);x.origin===w.origin&&S!=null?c=S+x.search+x.hash:g=!0}catch{}let v=Bde(c,{relative:i}),y=yhe(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function b(w){n&&n(w),w.defaultPrevented||y(w)}return k.createElement("a",By({},f,{href:m||v,onClick:g||s?n:b,ref:r,target:l}))}),mhe=k.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=Wee(e,lhe),f=S0(l,{relative:h.relative}),p=qo(),m=k.useContext(qee),{navigator:g,basename:v}=k.useContext($o),y=m!=null&&bhe(f)&&c===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&v&&(x=Md(x,v)||x);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=w===b||!o&&w.startsWith(b)&&w.charAt(S)==="/",C=x!=null&&(x===b||!o&&x.startsWith(b)&&x.charAt(b.length)==="/"),E={isActive:_,isPending:C,isTransitioning:y},N=_?n:void 0,T;typeof s=="function"?T=s(E):T=[s,_?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(E):a;return k.createElement(Ge,By({},h,{"aria-current":N,className:T,ref:r,style:j,to:l,viewTransition:c}),typeof d=="function"?d(E):d)});var jP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jP||(jP={}));var yF;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yF||(yF={}));function ghe(t){let e=k.useContext(x0);return e||Bt(!1),e}function yhe(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ps(),c=qo(),d=S0(t,{relative:o});return k.useCallback(h=>{if(she(h,r)){h.preventDefault();let f=n!==void 0?n:Ly(c)===Ly(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,n,i,r,t,s,o,a])}function vhe(t){let e=k.useRef(OP(t)),r=k.useRef(!1),n=qo(),i=k.useMemo(()=>ohe(n.search,r.current?null:e.current),[n.search]),s=ps(),o=k.useCallback((a,l)=>{const c=OP(typeof a=="function"?a(i):a);r.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function bhe(t,e){e===void 0&&(e={});let r=k.useContext(uhe);r==null&&Bt(!1);let{basename:n}=ghe(jP.useViewTransitionState),i=S0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=Md(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Md(r.nextLocation.pathname,n)||r.nextLocation.pathname;return kP(i.pathname,o)!=null||kP(i.pathname,s)!=null}var Hc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xhe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},pa,sR,uJ,whe=(uJ=class{constructor(){ve(this,pa,xhe);ve(this,sR,!1)}setTimeoutProvider(t){oe(this,pa,t)}setTimeout(t,e){return M(this,pa).setTimeout(t,e)}clearTimeout(t){M(this,pa).clearTimeout(t)}setInterval(t,e){return M(this,pa).setInterval(t,e)}clearInterval(t){M(this,pa).clearInterval(t)}},pa=new WeakMap,sR=new WeakMap,uJ),$l=new whe;function She(t){setTimeout(t,0)}var Sc=typeof window>"u"||"Deno"in globalThis;function cn(){}function _he(t,e){return typeof t=="function"?t(e):t}function PP(t){return typeof t=="number"&&t>=0&&t!==1/0}function Kee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function La(t,e){return typeof t=="function"?t(e):t}function Oi(t,e){return typeof t=="function"?t(e):t}function vF(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==iM(o,e.options))return!1}else if(!dp(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function bF(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(_c(e.options.mutationKey)!==_c(s))return!1}else if(!dp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function iM(t,e){return((e==null?void 0:e.queryKeyHashFn)||_c)(t)}function _c(t){return JSON.stringify(t,(e,r)=>IP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function dp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>dp(t[r],e[r])):!1}var Ehe=Object.prototype.hasOwnProperty;function sM(t,e){if(t===e)return t;const r=xF(t)&&xF(e);if(!r&&!(IP(t)&&IP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=r?c:s[c],h=t[d],f=e[d];if(h===f){a[d]=h,(r?c<i:Ehe.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=sM(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function hp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function xF(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function IP(t){if(!wF(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!wF(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function wF(t){return Object.prototype.toString.call(t)==="[object Object]"}function Che(t){return new Promise(e=>{$l.setTimeout(e,t)})}function RP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?sM(t,e):e}function Nhe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function khe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var oM=Symbol();function Gee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===oM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function aM(t,e){return typeof t=="function"?t(...e):!!t}function The(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var Gl,ma,hd,dJ,Ohe=(dJ=class extends Hc{constructor(){super();ve(this,Gl);ve(this,ma);ve(this,hd);oe(this,hd,e=>{if(!Sc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){M(this,ma)||this.setEventListener(M(this,hd))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,ma))==null||e.call(this),oe(this,ma,void 0))}setEventListener(e){var r;oe(this,hd,e),(r=M(this,ma))==null||r.call(this),oe(this,ma,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){M(this,Gl)!==e&&(oe(this,Gl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof M(this,Gl)=="boolean"?M(this,Gl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Gl=new WeakMap,ma=new WeakMap,hd=new WeakMap,dJ),lM=new Ohe;function MP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var jhe=She;function Phe(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=jhe;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var er=Phe(),fd,ga,pd,hJ,Ihe=(hJ=class extends Hc{constructor(){super();ve(this,fd,!0);ve(this,ga);ve(this,pd);oe(this,pd,e=>{if(!Sc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){M(this,ga)||this.setEventListener(M(this,pd))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,ga))==null||e.call(this),oe(this,ga,void 0))}setEventListener(e){var r;oe(this,pd,e),(r=M(this,ga))==null||r.call(this),oe(this,ga,e(this.setOnline.bind(this)))}setOnline(e){M(this,fd)!==e&&(oe(this,fd,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return M(this,fd)}},fd=new WeakMap,ga=new WeakMap,pd=new WeakMap,hJ),zy=new Ihe;function Rhe(t){return Math.min(1e3*2**t,3e4)}function Yee(t){return(t??"online")==="online"?zy.isOnline():!0}var AP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Qee(t){let e=!1,r=0,n;const i=MP(),s=()=>i.status!=="pending",o=g=>{var v;if(!s()){const y=new AP(g);f(y),(v=t.onCancel)==null||v.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>lM.isFocused()&&(t.networkMode==="always"||zy.isOnline())&&t.canRun(),d=()=>Yee(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var v;n=y=>{(s()||c())&&g(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const v=r===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const b=t.retry??(Sc?0:3),w=t.retryDelay??Rhe,x=typeof w=="function"?w(r,y):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),Che(x).then(()=>c()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Yl,fJ,Xee=(fJ=class{constructor(){ve(this,Yl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),PP(this.gcTime)&&oe(this,Yl,$l.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Sc?1/0:5*60*1e3))}clearGcTimeout(){M(this,Yl)&&($l.clearTimeout(M(this,Yl)),oe(this,Yl,void 0))}},Yl=new WeakMap,fJ),Ql,md,ki,Xl,Rr,$p,Jl,Zi,ro,pJ,Mhe=(pJ=class extends Xee{constructor(e){super();ve(this,Zi);ve(this,Ql);ve(this,md);ve(this,ki);ve(this,Xl);ve(this,Rr);ve(this,$p);ve(this,Jl);oe(this,Jl,!1),oe(this,$p,e.defaultOptions),this.setOptions(e.options),this.observers=[],oe(this,Xl,e.client),oe(this,ki,M(this,Xl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,oe(this,Ql,_F(this.options)),this.state=e.state??M(this,Ql),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=M(this,Rr))==null?void 0:e.promise}setOptions(e){if(this.options={...M(this,$p),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=_F(this.options);r.data!==void 0&&(this.setState(SF(r.data,r.dataUpdatedAt)),oe(this,Ql,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,ki).remove(this)}setData(e,r){const n=RP(this.state.data,e,this.options);return Re(this,Zi,ro).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Re(this,Zi,ro).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=M(this,Rr))==null?void 0:n.promise;return(i=M(this,Rr))==null||i.cancel(e),r?r.then(cn).catch(cn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Ql))}isActive(){return this.observers.some(e=>Oi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===oM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>La(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Kee(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=M(this,Rr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=M(this,Rr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),M(this,ki).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(M(this,Rr)&&(M(this,Jl)?M(this,Rr).cancel({revert:!0}):M(this,Rr).cancelRetry()),this.scheduleGc()),M(this,ki).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Re(this,Zi,ro).call(this,{type:"invalidate"})}async fetch(e,r){var l,c,d,h,f,p,m,g,v,y,b,w;if(this.state.fetchStatus!=="idle"&&((l=M(this,Rr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(M(this,Rr))return M(this,Rr).continueRetry(),M(this,Rr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(oe(this,Jl,!0),n.signal)})},s=()=>{const x=Gee(this.options,r),_=(()=>{const C={client:M(this,Xl),queryKey:this.queryKey,meta:this.meta};return i(C),C})();return oe(this,Jl,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:M(this,Xl),state:this.state,fetchFn:s};return i(x),x})();(c=this.options.behavior)==null||c.onFetch(a,this),oe(this,md,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Re(this,Zi,ro).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),oe(this,Rr,Qee({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof AP&&x.revert&&this.setState({...M(this,md),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{Re(this,Zi,ro).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{Re(this,Zi,ro).call(this,{type:"pause"})},onContinue:()=>{Re(this,Zi,ro).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await M(this,Rr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=M(this,ki).config).onSuccess)==null||p.call(f,x,this),(g=(m=M(this,ki).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof AP){if(x.silent)return M(this,Rr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Re(this,Zi,ro).call(this,{type:"error",error:x}),(y=(v=M(this,ki).config).onError)==null||y.call(v,x,this),(w=(b=M(this,ki).config).onSettled)==null||w.call(b,this.state.data,x,this),x}finally{this.scheduleGc()}}},Ql=new WeakMap,md=new WeakMap,ki=new WeakMap,Xl=new WeakMap,Rr=new WeakMap,$p=new WeakMap,Jl=new WeakMap,Zi=new WeakSet,ro=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Jee(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...SF(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return oe(this,md,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),er.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),M(this,ki).notify({query:this,type:"updated",action:e})})},pJ);function Jee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Yee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function SF(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _F(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var qn,et,Fp,bn,Zl,gd,ao,ya,qp,yd,vd,ec,tc,va,bd,ct,ff,DP,$P,FP,qP,LP,BP,zP,Zee,mJ,cM=(mJ=class extends Hc{constructor(e,r){super();ve(this,ct);ve(this,qn);ve(this,et);ve(this,Fp);ve(this,bn);ve(this,Zl);ve(this,gd);ve(this,ao);ve(this,ya);ve(this,qp);ve(this,yd);ve(this,vd);ve(this,ec);ve(this,tc);ve(this,va);ve(this,bd,new Set);this.options=r,oe(this,qn,e),oe(this,ya,null),oe(this,ao,MP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,et).addObserver(this),EF(M(this,et),this.options)?Re(this,ct,ff).call(this):this.updateResult(),Re(this,ct,qP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return VP(M(this,et),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return VP(M(this,et),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Re(this,ct,LP).call(this),Re(this,ct,BP).call(this),M(this,et).removeObserver(this)}setOptions(e){const r=this.options,n=M(this,et);if(this.options=M(this,qn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Oi(this.options.enabled,M(this,et))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Re(this,ct,zP).call(this),M(this,et).setOptions(this.options),r._defaulted&&!hp(this.options,r)&&M(this,qn).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,et),observer:this});const i=this.hasListeners();i&&CF(M(this,et),n,this.options,r)&&Re(this,ct,ff).call(this),this.updateResult(),i&&(M(this,et)!==n||Oi(this.options.enabled,M(this,et))!==Oi(r.enabled,M(this,et))||La(this.options.staleTime,M(this,et))!==La(r.staleTime,M(this,et)))&&Re(this,ct,DP).call(this);const s=Re(this,ct,$P).call(this);i&&(M(this,et)!==n||Oi(this.options.enabled,M(this,et))!==Oi(r.enabled,M(this,et))||s!==M(this,va))&&Re(this,ct,FP).call(this,s)}getOptimisticResult(e){const r=M(this,qn).getQueryCache().build(M(this,qn),e),n=this.createResult(r,e);return Dhe(this,n)&&(oe(this,bn,n),oe(this,gd,this.options),oe(this,Zl,M(this,et).state)),n}getCurrentResult(){return M(this,bn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&M(this,ao).status==="pending"&&M(this,ao).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){M(this,bd).add(e)}getCurrentQuery(){return M(this,et)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=M(this,qn).defaultQueryOptions(e),n=M(this,qn).getQueryCache().build(M(this,qn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Re(this,ct,ff).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,bn)))}createResult(e,r){var N;const n=M(this,et),i=this.options,s=M(this,bn),o=M(this,Zl),a=M(this,gd),c=e!==n?e.state:M(this,Fp),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const T=this.hasListeners(),j=!T&&EF(e,r),I=T&&CF(e,n,r,i);(j||I)&&(h={...h,...Jee(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let T;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(T=s.data,y=!0):T=typeof r.placeholderData=="function"?r.placeholderData((N=M(this,vd))==null?void 0:N.state.data,M(this,vd)):r.placeholderData,T!==void 0&&(v="success",p=RP(s==null?void 0:s.data,T,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===M(this,qp))p=M(this,yd);else try{oe(this,qp,r.select),p=r.select(p),p=RP(s==null?void 0:s.data,p,r),oe(this,yd,p),oe(this,ya,null)}catch(T){oe(this,ya,T)}M(this,ya)&&(m=M(this,ya),p=M(this,yd),g=Date.now(),v="error");const b=h.fetchStatus==="fetching",w=v==="pending",x=v==="error",S=w&&b,_=p!==void 0,E={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:uM(e,r),refetch:this.refetch,promise:M(this,ao),isEnabled:Oi(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const T=O=>{E.status==="error"?O.reject(E.error):E.data!==void 0&&O.resolve(E.data)},j=()=>{const O=oe(this,ao,E.promise=MP());T(O)},I=M(this,ao);switch(I.status){case"pending":e.queryHash===n.queryHash&&T(I);break;case"fulfilled":(E.status==="error"||E.data!==I.value)&&j();break;case"rejected":(E.status!=="error"||E.error!==I.reason)&&j();break}}return E}updateResult(){const e=M(this,bn),r=this.createResult(M(this,et),this.options);if(oe(this,Zl,M(this,et).state),oe(this,gd,this.options),M(this,Zl).data!==void 0&&oe(this,vd,M(this,et)),hp(r,e))return;oe(this,bn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!M(this,bd).size)return!0;const o=new Set(s??M(this,bd));return this.options.throwOnError&&o.add("error"),Object.keys(M(this,bn)).some(a=>{const l=a;return M(this,bn)[l]!==e[l]&&o.has(l)})};Re(this,ct,Zee).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Re(this,ct,qP).call(this)}},qn=new WeakMap,et=new WeakMap,Fp=new WeakMap,bn=new WeakMap,Zl=new WeakMap,gd=new WeakMap,ao=new WeakMap,ya=new WeakMap,qp=new WeakMap,yd=new WeakMap,vd=new WeakMap,ec=new WeakMap,tc=new WeakMap,va=new WeakMap,bd=new WeakMap,ct=new WeakSet,ff=function(e){Re(this,ct,zP).call(this);let r=M(this,et).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(cn)),r},DP=function(){Re(this,ct,LP).call(this);const e=La(this.options.staleTime,M(this,et));if(Sc||M(this,bn).isStale||!PP(e))return;const n=Kee(M(this,bn).dataUpdatedAt,e)+1;oe(this,ec,$l.setTimeout(()=>{M(this,bn).isStale||this.updateResult()},n))},$P=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,et)):this.options.refetchInterval)??!1},FP=function(e){Re(this,ct,BP).call(this),oe(this,va,e),!(Sc||Oi(this.options.enabled,M(this,et))===!1||!PP(M(this,va))||M(this,va)===0)&&oe(this,tc,$l.setInterval(()=>{(this.options.refetchIntervalInBackground||lM.isFocused())&&Re(this,ct,ff).call(this)},M(this,va)))},qP=function(){Re(this,ct,DP).call(this),Re(this,ct,FP).call(this,Re(this,ct,$P).call(this))},LP=function(){M(this,ec)&&($l.clearTimeout(M(this,ec)),oe(this,ec,void 0))},BP=function(){M(this,tc)&&($l.clearInterval(M(this,tc)),oe(this,tc,void 0))},zP=function(){const e=M(this,qn).getQueryCache().build(M(this,qn),this.options);if(e===M(this,et))return;const r=M(this,et);oe(this,et,e),oe(this,Fp,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Zee=function(e){er.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(M(this,bn))}),M(this,qn).getQueryCache().notify({query:M(this,et),type:"observerResultsUpdated"})})},mJ);function Ahe(t,e){return Oi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function EF(t,e){return Ahe(t,e)||t.state.data!==void 0&&VP(t,e,e.refetchOnMount)}function VP(t,e,r){if(Oi(e.enabled,t)!==!1&&La(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&uM(t,e)}return!1}function CF(t,e,r,n){return(t!==e||Oi(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&uM(t,r)}function uM(t,e){return Oi(e.enabled,t)!==!1&&t.isStaleByTime(La(e.staleTime,t))}function Dhe(t,e){return!hp(t.getCurrentResult(),e)}function NF(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=w=>{The(w,()=>e.signal,()=>g=!0)},y=Gee(e.options,e.fetchOptions),b=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return v(j),j})(),E=await y(C),{maxPages:N}=e.options,T=S?khe:Nhe;return{pages:T(w.pages,E,N),pageParams:T(w.pageParams,x,N)}};if(i&&s.length){const w=i==="backward",x=w?$he:kF,S={pages:s,pageParams:o},_=x(n,S);a=await b(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:kF(n,a);if(l>0&&x==null)break;a=await b(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=c}}}function kF(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function $he(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Lp,ks,xn,rc,Ts,Zo,gJ,Fhe=(gJ=class extends Xee{constructor(e){super();ve(this,Ts);ve(this,Lp);ve(this,ks);ve(this,xn);ve(this,rc);oe(this,Lp,e.client),this.mutationId=e.mutationId,oe(this,xn,e.mutationCache),oe(this,ks,[]),this.state=e.state||ete(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){M(this,ks).includes(e)||(M(this,ks).push(e),this.clearGcTimeout(),M(this,xn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){oe(this,ks,M(this,ks).filter(r=>r!==e)),this.scheduleGc(),M(this,xn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){M(this,ks).length||(this.state.status==="pending"?this.scheduleGc():M(this,xn).remove(this))}continue(){var e;return((e=M(this,rc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,d,h,f,p,m,g,v,y,b,w,x,S,_,C,E,N;const r=()=>{Re(this,Ts,Zo).call(this,{type:"continue"})},n={client:M(this,Lp),meta:this.options.meta,mutationKey:this.options.mutationKey};oe(this,rc,Qee({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(T,j)=>{Re(this,Ts,Zo).call(this,{type:"failed",failureCount:T,error:j})},onPause:()=>{Re(this,Ts,Zo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,xn).canRun(this)}));const i=this.state.status==="pending",s=!M(this,rc).canStart();try{if(i)r();else{Re(this,Ts,Zo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=M(this,xn).config).onMutate)==null?void 0:a.call(o,e,this,n));const j=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,n));j!==this.state.context&&Re(this,Ts,Zo).call(this,{type:"pending",context:j,variables:e,isPaused:s})}const T=await M(this,rc).start();return await((h=(d=M(this,xn).config).onSuccess)==null?void 0:h.call(d,T,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,e,this.state.context,n)),await((g=(m=M(this,xn).config).onSettled)==null?void 0:g.call(m,T,null,this.state.variables,this.state.context,this,n)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,T,null,e,this.state.context,n)),Re(this,Ts,Zo).call(this,{type:"success",data:T}),T}catch(T){try{await((w=(b=M(this,xn).config).onError)==null?void 0:w.call(b,T,e,this.state.context,this,n))}catch(j){Promise.reject(j)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,T,e,this.state.context,n))}catch(j){Promise.reject(j)}try{await((C=(_=M(this,xn).config).onSettled)==null?void 0:C.call(_,void 0,T,this.state.variables,this.state.context,this,n))}catch(j){Promise.reject(j)}try{await((N=(E=this.options).onSettled)==null?void 0:N.call(E,void 0,T,e,this.state.context,n))}catch(j){Promise.reject(j)}throw Re(this,Ts,Zo).call(this,{type:"error",error:T}),T}finally{M(this,xn).runNext(this)}}},Lp=new WeakMap,ks=new WeakMap,xn=new WeakMap,rc=new WeakMap,Ts=new WeakSet,Zo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),er.batch(()=>{M(this,ks).forEach(n=>{n.onMutationUpdate(e)}),M(this,xn).notify({mutation:this,type:"updated",action:e})})},gJ);function ete(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var lo,es,Bp,yJ,qhe=(yJ=class extends Hc{constructor(e={}){super();ve(this,lo);ve(this,es);ve(this,Bp);this.config=e,oe(this,lo,new Set),oe(this,es,new Map),oe(this,Bp,0)}build(e,r,n){const i=new Fhe({client:e,mutationCache:this,mutationId:++Zm(this,Bp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){M(this,lo).add(e);const r=yg(e);if(typeof r=="string"){const n=M(this,es).get(r);n?n.push(e):M(this,es).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(M(this,lo).delete(e)){const r=yg(e);if(typeof r=="string"){const n=M(this,es).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&M(this,es).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=yg(e);if(typeof r=="string"){const n=M(this,es).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=yg(e);if(typeof r=="string"){const i=(n=M(this,es).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){er.batch(()=>{M(this,lo).forEach(e=>{this.notify({type:"removed",mutation:e})}),M(this,lo).clear(),M(this,es).clear()})}getAll(){return Array.from(M(this,lo))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>bF(r,n))}findAll(e={}){return this.getAll().filter(r=>bF(e,r))}notify(e){er.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return er.batch(()=>Promise.all(e.map(r=>r.continue().catch(cn))))}},lo=new WeakMap,es=new WeakMap,Bp=new WeakMap,yJ);function yg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var co,ba,Ln,uo,Oo,ty,UP,vJ,Lhe=(vJ=class extends Hc{constructor(e,r){super();ve(this,Oo);ve(this,co);ve(this,ba);ve(this,Ln);ve(this,uo);oe(this,co,e),this.setOptions(r),this.bindMethods(),Re(this,Oo,ty).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=M(this,co).defaultMutationOptions(e),hp(this.options,r)||M(this,co).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,Ln),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&_c(r.mutationKey)!==_c(this.options.mutationKey)?this.reset():((n=M(this,Ln))==null?void 0:n.state.status)==="pending"&&M(this,Ln).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=M(this,Ln))==null||e.removeObserver(this)}onMutationUpdate(e){Re(this,Oo,ty).call(this),Re(this,Oo,UP).call(this,e)}getCurrentResult(){return M(this,ba)}reset(){var e;(e=M(this,Ln))==null||e.removeObserver(this),oe(this,Ln,void 0),Re(this,Oo,ty).call(this),Re(this,Oo,UP).call(this)}mutate(e,r){var n;return oe(this,uo,r),(n=M(this,Ln))==null||n.removeObserver(this),oe(this,Ln,M(this,co).getMutationCache().build(M(this,co),this.options)),M(this,Ln).addObserver(this),M(this,Ln).execute(e)}},co=new WeakMap,ba=new WeakMap,Ln=new WeakMap,uo=new WeakMap,Oo=new WeakSet,ty=function(){var r;const e=((r=M(this,Ln))==null?void 0:r.state)??ete();oe(this,ba,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},UP=function(e){er.batch(()=>{var r,n,i,s,o,a,l,c;if(M(this,uo)&&this.hasListeners()){const d=M(this,ba).variables,h=M(this,ba).context,f={client:M(this,co),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=M(this,uo)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=M(this,uo)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=M(this,uo)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(c=(l=M(this,uo)).onSettled)==null||c.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(M(this,ba))})})},vJ);function TF(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function Bhe(t,e,r){const n=t.slice(0);return n[e]=r,n}var xd,li,wd,Sd,Ti,xa,zp,Vp,Up,tn,HP,WP,KP,GP,YP,bJ,zhe=(bJ=class extends Hc{constructor(e,r,n){super();ve(this,tn);ve(this,xd);ve(this,li);ve(this,wd);ve(this,Sd);ve(this,Ti);ve(this,xa);ve(this,zp);ve(this,Vp);ve(this,Up,[]);oe(this,xd,e),oe(this,Sd,n),oe(this,wd,[]),oe(this,Ti,[]),oe(this,li,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&M(this,Ti).forEach(e=>{e.subscribe(r=>{Re(this,tn,GP).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,M(this,Ti).forEach(e=>{e.destroy()})}setQueries(e,r){oe(this,wd,e),oe(this,Sd,r),er.batch(()=>{const n=M(this,Ti),i=Re(this,tn,KP).call(this,M(this,wd));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),c=a||l,d=c?!0:o.some((h,f)=>{const p=M(this,li)[f];return!p||!hp(h,p)});!c&&!d||(c&&(oe(this,Up,i),oe(this,Ti,s)),oe(this,li,o),this.hasListeners()&&(c&&(TF(n,s).forEach(h=>{h.destroy()}),TF(s,n).forEach(h=>{h.subscribe(f=>{Re(this,tn,GP).call(this,h,f)})})),Re(this,tn,YP).call(this)))})}getCurrentResult(){return M(this,li)}getQueries(){return M(this,Ti).map(e=>e.getCurrentQuery())}getObservers(){return M(this,Ti)}getOptimisticResult(e,r){const n=Re(this,tn,KP).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>Re(this,tn,WP).call(this,s??i,r),()=>Re(this,tn,HP).call(this,i,n)]}},xd=new WeakMap,li=new WeakMap,wd=new WeakMap,Sd=new WeakMap,Ti=new WeakMap,xa=new WeakMap,zp=new WeakMap,Vp=new WeakMap,Up=new WeakMap,tn=new WeakSet,HP=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},WP=function(e,r){return r?((!M(this,xa)||M(this,li)!==M(this,Vp)||r!==M(this,zp))&&(oe(this,zp,r),oe(this,Vp,M(this,li)),oe(this,xa,sM(M(this,xa),r(e)))),M(this,xa)):e},KP=function(e){const r=new Map;M(this,Ti).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=M(this,xd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new cM(M(this,xd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},GP=function(e,r){const n=M(this,Ti).indexOf(e);n!==-1&&(oe(this,li,Bhe(M(this,li),n,r)),Re(this,tn,YP).call(this))},YP=function(){var e;if(this.hasListeners()){const r=M(this,xa),n=Re(this,tn,HP).call(this,M(this,li),M(this,Up)),i=Re(this,tn,WP).call(this,n,(e=M(this,Sd))==null?void 0:e.combine);r!==i&&er.batch(()=>{this.listeners.forEach(s=>{s(M(this,li))})})}},bJ),Os,xJ,Vhe=(xJ=class extends Hc{constructor(e={}){super();ve(this,Os);this.config=e,oe(this,Os,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??iM(i,r);let o=this.get(s);return o||(o=new Mhe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){M(this,Os).has(e.queryHash)||(M(this,Os).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=M(this,Os).get(e.queryHash);r&&(e.destroy(),r===e&&M(this,Os).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,Os).get(e)}getAll(){return[...M(this,Os).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>vF(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>vF(e,n)):r}notify(e){er.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){er.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){er.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Os=new WeakMap,xJ),Yt,wa,Sa,_d,Ed,_a,Cd,Nd,wJ,Uhe=(wJ=class{constructor(t={}){ve(this,Yt);ve(this,wa);ve(this,Sa);ve(this,_d);ve(this,Ed);ve(this,_a);ve(this,Cd);ve(this,Nd);oe(this,Yt,t.queryCache||new Vhe),oe(this,wa,t.mutationCache||new qhe),oe(this,Sa,t.defaultOptions||{}),oe(this,_d,new Map),oe(this,Ed,new Map),oe(this,_a,0)}mount(){Zm(this,_a)._++,M(this,_a)===1&&(oe(this,Cd,lM.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,Yt).onFocus())})),oe(this,Nd,zy.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,Yt).onOnline())})))}unmount(){var t,e;Zm(this,_a)._--,M(this,_a)===0&&((t=M(this,Cd))==null||t.call(this),oe(this,Cd,void 0),(e=M(this,Nd))==null||e.call(this),oe(this,Nd,void 0))}isFetching(t){return M(this,Yt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return M(this,wa).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=M(this,Yt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=M(this,Yt).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(La(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return M(this,Yt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=M(this,Yt).get(n.queryHash),s=i==null?void 0:i.state.data,o=_he(e,s);if(o!==void 0)return M(this,Yt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return er.batch(()=>M(this,Yt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=M(this,Yt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=M(this,Yt);er.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=M(this,Yt);return er.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=er.batch(()=>M(this,Yt).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(cn).catch(cn)}invalidateQueries(t,e={}){return er.batch(()=>(M(this,Yt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=er.batch(()=>M(this,Yt).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(cn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(cn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=M(this,Yt).build(this,e);return r.isStaleByTime(La(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(cn).catch(cn)}fetchInfiniteQuery(t){return t.behavior=NF(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(cn).catch(cn)}ensureInfiniteQueryData(t){return t.behavior=NF(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zy.isOnline()?M(this,wa).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,Yt)}getMutationCache(){return M(this,wa)}getDefaultOptions(){return M(this,Sa)}setDefaultOptions(t){oe(this,Sa,t)}setQueryDefaults(t,e){M(this,_d).set(_c(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...M(this,_d).values()],r={};return e.forEach(n=>{dp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){M(this,Ed).set(_c(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...M(this,Ed).values()],r={};return e.forEach(n=>{dp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...M(this,Sa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=iM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===oM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...M(this,Sa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){M(this,Yt).clear(),M(this,wa).clear()}},Yt=new WeakMap,wa=new WeakMap,Sa=new WeakMap,_d=new WeakMap,Ed=new WeakMap,_a=new WeakMap,Cd=new WeakMap,Nd=new WeakMap,wJ),tte=k.createContext(void 0),bt=t=>{const e=k.useContext(tte);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Hhe=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(tte.Provider,{value:t,children:e})),rte=k.createContext(!1),nte=()=>k.useContext(rte);rte.Provider;function Whe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Khe=k.createContext(Whe()),ite=()=>k.useContext(Khe),ste=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?aM(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},ote=t=>{k.useEffect(()=>{t.clearReset()},[t])},ate=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||aM(r,[t.error,n])),lte=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},cte=(t,e)=>t.isLoading&&t.isFetching&&!e,QP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Vy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function ry({queries:t,...e},r){const n=bt(),i=nte(),s=ite(),o=k.useMemo(()=>t.map(g=>{const v=n.defaultQueryOptions(g);return v._optimisticResults=i?"isRestoring":"optimistic",v}),[t,n,i]);o.forEach(g=>{lte(g);const v=n.getQueryCache().get(g.queryHash);ste(g,s,v)}),ote(s);const[a]=k.useState(()=>new zhe(n,o,e)),[l,c,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;k.useSyncExternalStore(k.useCallback(g=>h?a.subscribe(er.batchCalls(g)):cn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),k.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,v)=>QP(o[v],g))?l.flatMap((g,v)=>{const y=o[v];if(y){const b=new cM(n,y);if(QP(y,g))return Vy(y,b,s);cte(g,i)&&Vy(y,b,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,v)=>{const y=o[v];return y&&ate({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return c(d())}function Ghe(t,e,r){var f,p,m,g;const n=nte(),i=ite(),s=bt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",lte(o),ste(o,i,a),ote(i);const l=!s.getQueryCache().get(o.queryHash),[c]=k.useState(()=>new e(s,o)),d=c.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(v=>{const y=h?c.subscribe(er.batchCalls(v)):cn;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(o)},[o,c]),QP(o,d))throw Vy(o,c,i);if(ate({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!Sc&&cte(d,n)){const v=l?Vy(o,c,i):a==null?void 0:a.promise;v==null||v.catch(cn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function lt(t,e){return Ghe(t,cM)}function tt(t,e){const r=bt(),[n]=k.useState(()=>new Lhe(r,t));k.useEffect(()=>{n.setOptions(t)},[n,t]);const i=k.useSyncExternalStore(k.useCallback(o=>n.subscribe(er.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=k.useCallback((o,a)=>{n.mutate(o,a).catch(cn)},[n]);if(i.error&&aM(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function dM(){const t=window.prmConfig||{};return k.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function ute(t,e){return function(){return t.apply(e,arguments)}}const{toString:Yhe}=Object.prototype,{getPrototypeOf:hM}=Object,{iterator:_0,toStringTag:dte}=Symbol,E0=(t=>e=>{const r=Yhe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ms=t=>(t=t.toLowerCase(),e=>E0(e)===t),C0=t=>e=>typeof e===t,{isArray:ah}=Array,Ad=C0("undefined");function Qp(t){return t!==null&&!Ad(t)&&t.constructor!==null&&!Ad(t.constructor)&&Jn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const hte=ms("ArrayBuffer");function Qhe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&hte(t.buffer),e}const Xhe=C0("string"),Jn=C0("function"),fte=C0("number"),Xp=t=>t!==null&&typeof t=="object",Jhe=t=>t===!0||t===!1,ny=t=>{if(E0(t)!=="object")return!1;const e=hM(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(dte in t)&&!(_0 in t)},Zhe=t=>{if(!Xp(t)||Qp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},efe=ms("Date"),tfe=ms("File"),rfe=ms("Blob"),nfe=ms("FileList"),ife=t=>Xp(t)&&Jn(t.pipe),sfe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Jn(t.append)&&((e=E0(t))==="formdata"||e==="object"&&Jn(t.toString)&&t.toString()==="[object FormData]"))},ofe=ms("URLSearchParams"),[afe,lfe,cfe,ufe]=["ReadableStream","Request","Response","Headers"].map(ms),dfe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jp(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),ah(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Qp(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function pte(t,e){if(Qp(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Fl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mte=t=>!Ad(t)&&t!==Fl;function XP(){const{caseless:t,skipUndefined:e}=mte(this)&&this||{},r={},n=(i,s)=>{const o=t&&pte(r,s)||s;ny(r[o])&&ny(i)?r[o]=XP(r[o],i):ny(i)?r[o]=XP({},i):ah(i)?r[o]=i.slice():(!e||!Ad(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Jp(arguments[i],n);return r}const hfe=(t,e,r,{allOwnKeys:n}={})=>(Jp(e,(i,s)=>{r&&Jn(i)?t[s]=ute(i,r):t[s]=i},{allOwnKeys:n}),t),ffe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),pfe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},mfe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&hM(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},gfe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},yfe=t=>{if(!t)return null;if(ah(t))return t;let e=t.length;if(!fte(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},vfe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&hM(Uint8Array)),bfe=(t,e)=>{const n=(t&&t[_0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},xfe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},wfe=ms("HTMLFormElement"),Sfe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),OF=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),_fe=ms("RegExp"),gte=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Jp(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},Efe=t=>{gte(t,(e,r)=>{if(Jn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Jn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Cfe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return ah(t)?n(t):n(String(t).split(e)),r},Nfe=()=>{},kfe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Tfe(t){return!!(t&&Jn(t.append)&&t[dte]==="FormData"&&t[_0])}const Ofe=t=>{const e=new Array(10),r=(n,i)=>{if(Xp(n)){if(e.indexOf(n)>=0)return;if(Qp(n))return n;if(!("toJSON"in n)){e[i]=n;const s=ah(n)?[]:{};return Jp(n,(o,a)=>{const l=r(o,i+1);!Ad(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},jfe=ms("AsyncFunction"),Pfe=t=>t&&(Xp(t)||Jn(t))&&Jn(t.then)&&Jn(t.catch),yte=((t,e)=>t?setImmediate:e?((r,n)=>(Fl.addEventListener("message",({source:i,data:s})=>{i===Fl&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Fl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Jn(Fl.postMessage)),Ife=typeof queueMicrotask<"u"?queueMicrotask.bind(Fl):typeof process<"u"&&process.nextTick||yte,Rfe=t=>t!=null&&Jn(t[_0]),V={isArray:ah,isArrayBuffer:hte,isBuffer:Qp,isFormData:sfe,isArrayBufferView:Qhe,isString:Xhe,isNumber:fte,isBoolean:Jhe,isObject:Xp,isPlainObject:ny,isEmptyObject:Zhe,isReadableStream:afe,isRequest:lfe,isResponse:cfe,isHeaders:ufe,isUndefined:Ad,isDate:efe,isFile:tfe,isBlob:rfe,isRegExp:_fe,isFunction:Jn,isStream:ife,isURLSearchParams:ofe,isTypedArray:vfe,isFileList:nfe,forEach:Jp,merge:XP,extend:hfe,trim:dfe,stripBOM:ffe,inherits:pfe,toFlatObject:mfe,kindOf:E0,kindOfTest:ms,endsWith:gfe,toArray:yfe,forEachEntry:bfe,matchAll:xfe,isHTMLForm:wfe,hasOwnProperty:OF,hasOwnProp:OF,reduceDescriptors:gte,freezeMethods:Efe,toObjectSet:Cfe,toCamelCase:Sfe,noop:Nfe,toFiniteNumber:kfe,findKey:pte,global:Fl,isContextDefined:mte,isSpecCompliantForm:Tfe,toJSONObject:Ofe,isAsyncFn:jfe,isThenable:Pfe,setImmediate:yte,asap:Ife,isIterable:Rfe};function Be(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}V.inherits(Be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const vte=Be.prototype,bte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{bte[t]={value:t}});Object.defineProperties(Be,bte);Object.defineProperty(vte,"isAxiosError",{value:!0});Be.from=(t,e,r,n,i,s)=>{const o=Object.create(vte);V.toFlatObject(t,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Be.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const Mfe=null;function JP(t){return V.isPlainObject(t)||V.isArray(t)}function xte(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function jF(t,e,r){return t?t.concat(e).map(function(i,s){return i=xte(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function Afe(t){return V.isArray(t)&&!t.some(JP)}const Dfe=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function N0(t,e,r){if(!V.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=V.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!V.isUndefined(v[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(V.isDate(m))return m.toISOString();if(V.isBoolean(m))return m.toString();if(!l&&V.isBlob(m))throw new Be("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(m)||V.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,v){let y=m;if(m&&!v&&typeof m=="object"){if(V.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(V.isArray(m)&&Afe(m)||(V.isFileList(m)||V.endsWith(g,"[]"))&&(y=V.toArray(m)))return g=xte(g),y.forEach(function(w,x){!(V.isUndefined(w)||w===null)&&e.append(o===!0?jF([g],x,s):o===null?g:g+"[]",c(w))}),!1}return JP(m)?!0:(e.append(jF(v,g,s),c(m)),!1)}const h=[],f=Object.assign(Dfe,{defaultVisitor:d,convertValue:c,isVisitable:JP});function p(m,g){if(!V.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),V.forEach(m,function(y,b){(!(V.isUndefined(y)||y===null)&&i.call(e,y,V.isString(b)?b.trim():b,g,f))===!0&&p(y,g?g.concat(b):[b])}),h.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return p(t),e}function PF(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function fM(t,e){this._pairs=[],t&&N0(t,this,e)}const wte=fM.prototype;wte.append=function(e,r){this._pairs.push([e,r])};wte.toString=function(e){const r=e?function(n){return e.call(this,n,PF)}:PF;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function $fe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ste(t,e,r){if(!e)return t;const n=r&&r.encode||$fe;V.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=V.isURLSearchParams(e)?e.toString():new fM(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class IF{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(n){n!==null&&e(n)})}}const _te={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ffe=typeof URLSearchParams<"u"?URLSearchParams:fM,qfe=typeof FormData<"u"?FormData:null,Lfe=typeof Blob<"u"?Blob:null,Bfe={isBrowser:!0,classes:{URLSearchParams:Ffe,FormData:qfe,Blob:Lfe},protocols:["http","https","file","blob","url","data"]},pM=typeof window<"u"&&typeof document<"u",ZP=typeof navigator=="object"&&navigator||void 0,zfe=pM&&(!ZP||["ReactNative","NativeScript","NS"].indexOf(ZP.product)<0),Vfe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ufe=pM&&window.location.href||"http://localhost",Hfe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pM,hasStandardBrowserEnv:zfe,hasStandardBrowserWebWorkerEnv:Vfe,navigator:ZP,origin:Ufe},Symbol.toStringTag,{value:"Module"})),dn={...Hfe,...Bfe};function Wfe(t,e){return N0(t,new dn.classes.URLSearchParams,{visitor:function(r,n,i,s){return dn.isNode&&V.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Kfe(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Gfe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Ete(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&V.isArray(i)?i.length:o,l?(V.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!V.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&V.isArray(i[o])&&(i[o]=Gfe(i[o])),!a)}if(V.isFormData(t)&&V.isFunction(t.entries)){const r={};return V.forEachEntry(t,(n,i)=>{e(Kfe(n),i,r,0)}),r}return null}function Yfe(t,e,r){if(V.isString(t))try{return(e||JSON.parse)(t),V.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Zp={transitional:_te,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=V.isObject(e);if(s&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return i?JSON.stringify(Ete(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Wfe(e,this.formSerializer).toString();if((a=V.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return N0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Yfe(e)):e}],transformResponse:[function(e){const r=this.transitional||Zp.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Be.from(a,Be.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dn.classes.FormData,Blob:dn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Zp.headers[t]={}});const Qfe=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xfe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&Qfe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},RF=Symbol("internals");function Qh(t){return t&&String(t).trim().toLowerCase()}function iy(t){return t===!1||t==null?t:V.isArray(t)?t.map(iy):String(t)}function Jfe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Zfe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function p1(t,e,r,n,i){if(V.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!V.isString(e)){if(V.isString(n))return e.indexOf(n)!==-1;if(V.isRegExp(n))return n.test(e)}}function epe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function tpe(t,e){const r=V.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let Zn=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,c){const d=Qh(l);if(!d)throw new Error("header name must be a non-empty string");const h=V.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=iy(a))}const o=(a,l)=>V.forEach(a,(c,d)=>s(c,d,l));if(V.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(V.isString(e)&&(e=e.trim())&&!Zfe(e))o(Xfe(e),r);else if(V.isObject(e)&&V.isIterable(e)){let a={},l,c;for(const d of e){if(!V.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?V.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Qh(e),e){const n=V.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Jfe(i);if(V.isFunction(r))return r.call(this,i,n);if(V.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Qh(e),e){const n=V.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||p1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Qh(o),o){const a=V.findKey(n,o);a&&(!r||p1(n,n[a],a,r))&&(delete n[a],i=!0)}}return V.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||p1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return V.forEach(this,(i,s)=>{const o=V.findKey(n,s);if(o){r[o]=iy(i),delete r[s];return}const a=e?epe(s):String(s).trim();a!==s&&delete r[s],r[a]=iy(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return V.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&V.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[RF]=this[RF]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Qh(o);n[a]||(tpe(i,o),n[a]=!0)}return V.isArray(e)?e.forEach(s):s(e),this}};Zn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Zn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});V.freezeMethods(Zn);function m1(t,e){const r=this||Zp,n=e||r,i=Zn.from(n.headers);let s=n.data;return V.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Cte(t){return!!(t&&t.__CANCEL__)}function lh(t,e,r){Be.call(this,t??"canceled",Be.ERR_CANCELED,e,r),this.name="CanceledError"}V.inherits(lh,Be,{__CANCEL__:!0});function Nte(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Be("Request failed with status code "+r.status,[Be.ERR_BAD_REQUEST,Be.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function rpe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function npe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[s];o||(o=c),r[i]=l,n[i]=c;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(f*1e3/p):void 0}}function ipe(t,e){let r=0,n=1e3/e,i,s;const o=(c,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const d=Date.now(),h=d-r;h>=n?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const Uy=(t,e,r=3)=>{let n=0;const i=npe(50,250);return ipe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},MF=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},AF=t=>(...e)=>V.asap(()=>t(...e)),spe=dn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,dn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(dn.origin),dn.navigator&&/(msie|trident)/i.test(dn.navigator.userAgent)):()=>!0,ope=dn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];V.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),V.isString(n)&&a.push(`path=${n}`),V.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),V.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ape(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function lpe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function kte(t,e,r){let n=!ape(e);return t&&(n||r==!1)?lpe(t,e):e}const DF=t=>t instanceof Zn?{...t}:t;function Ec(t,e){e=e||{};const r={};function n(c,d,h,f){return V.isPlainObject(c)&&V.isPlainObject(d)?V.merge.call({caseless:f},c,d):V.isPlainObject(d)?V.merge({},d):V.isArray(d)?d.slice():d}function i(c,d,h,f){if(V.isUndefined(d)){if(!V.isUndefined(c))return n(void 0,c,h,f)}else return n(c,d,h,f)}function s(c,d){if(!V.isUndefined(d))return n(void 0,d)}function o(c,d){if(V.isUndefined(d)){if(!V.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function a(c,d,h){if(h in e)return n(c,d);if(h in t)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>i(DF(c),DF(d),h,!0)};return V.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);V.isUndefined(f)&&h!==a||(r[d]=f)}),r}const Tte=t=>{const e=Ec({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Zn.from(o),e.url=Ste(kte(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),V.isFormData(r)){if(dn.hasStandardBrowserEnv||dn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(V.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{c.includes(d.toLowerCase())&&o.set(d,h)})}}if(dn.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(e)),n||n!==!1&&spe(e.url))){const l=i&&s&&ope.read(s);l&&o.set(i,l)}return e},cpe=typeof XMLHttpRequest<"u",upe=cpe&&function(t){return new Promise(function(r,n){const i=Tte(t);let s=i.data;const o=Zn.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function y(){if(!v)return;const w=Zn.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:t,request:v};Nte(function(C){r(C),g()},function(C){n(C),g()},S),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(n(new Be("Request aborted",Be.ECONNABORTED,t,v)),v=null)},v.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new Be(S,Be.ERR_NETWORK,t,v);_.event=x||null,n(_),v=null},v.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||_te;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Be(x,S.clarifyTimeoutError?Be.ETIMEDOUT:Be.ECONNABORTED,t,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&V.forEach(o.toJSON(),function(x,S){v.setRequestHeader(S,x)}),V.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),c&&([f,m]=Uy(c,!0),v.addEventListener("progress",f)),l&&v.upload&&([h,p]=Uy(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{v&&(n(!w||w.type?new lh(null,t,v):w),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=rpe(i.url);if(b&&dn.protocols.indexOf(b)===-1){n(new Be("Unsupported protocol "+b+":",Be.ERR_BAD_REQUEST,t));return}v.send(s||null)})},dpe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Be?d:new lh(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Be(`timeout ${e} of ms exceeded`,Be.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>V.asap(a),l}},hpe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},fpe=async function*(t,e){for await(const r of ppe(t))yield*hpe(r,e)},ppe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},$F=(t,e,r,n)=>{const i=fpe(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},FF=64*1024,{isFunction:vg}=V,mpe=(({Request:t,Response:e})=>({Request:t,Response:e}))(V.global),{ReadableStream:qF,TextEncoder:LF}=V.global,BF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},gpe=t=>{t=V.merge.call({skipUndefined:!0},mpe,t);const{fetch:e,Request:r,Response:n}=t,i=e?vg(e):typeof fetch=="function",s=vg(r),o=vg(n);if(!i)return!1;const a=i&&vg(qF),l=i&&(typeof LF=="function"?(m=>g=>m.encode(g))(new LF):async m=>new Uint8Array(await new r(m).arrayBuffer())),c=s&&a&&BF(()=>{let m=!1;const g=new r(dn.origin,{body:new qF,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&BF(()=>V.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,v)=>{let y=g&&g[m];if(y)return y.call(g);throw new Be(`Response type '${m}' is not supported`,Be.ERR_NOT_SUPPORT,v)})});const f=async m=>{if(m==null)return 0;if(V.isBlob(m))return m.size;if(V.isSpecCompliantForm(m))return(await new r(dn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(V.isArrayBufferView(m)||V.isArrayBuffer(m))return m.byteLength;if(V.isURLSearchParams(m)&&(m=m+""),V.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const v=V.toFiniteNumber(m.getContentLength());return v??f(g)};return async m=>{let{url:g,method:v,data:y,signal:b,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:C,headers:E,withCredentials:N="same-origin",fetchOptions:T}=Tte(m),j=e||fetch;C=C?(C+"").toLowerCase():"text";let I=dpe([b,w&&w.toAbortSignal()],x),O=null;const D=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let z;try{if(_&&c&&v!=="get"&&v!=="head"&&(z=await p(E,y))!==0){let K=new r(g,{method:"POST",body:y,duplex:"half"}),F;if(V.isFormData(y)&&(F=K.headers.get("content-type"))&&E.setContentType(F),K.body){const[X,Q]=MF(z,Uy(AF(_)));y=$F(K.body,FF,X,Q)}}V.isString(N)||(N=N?"include":"omit");const R=s&&"credentials"in r.prototype,B={...T,signal:I,method:v.toUpperCase(),headers:E.normalize().toJSON(),body:y,duplex:"half",credentials:R?N:void 0};O=s&&new r(g,B);let q=await(s?j(O,T):j(g,B));const $=d&&(C==="stream"||C==="response");if(d&&(S||$&&D)){const K={};["status","statusText","headers"].forEach(Ee=>{K[Ee]=q[Ee]});const F=V.toFiniteNumber(q.headers.get("content-length")),[X,Q]=S&&MF(F,Uy(AF(S),!0))||[];q=new n($F(q.body,FF,X,()=>{Q&&Q(),D&&D()}),K)}C=C||"text";let G=await h[V.findKey(h,C)||"text"](q,m);return!$&&D&&D(),await new Promise((K,F)=>{Nte(K,F,{data:G,headers:Zn.from(q.headers),status:q.status,statusText:q.statusText,config:m,request:O})})}catch(R){throw D&&D(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Be("Network Error",Be.ERR_NETWORK,m,O),{cause:R.cause||R}):Be.from(R,R&&R.code,m,O)}}},ype=new Map,Ote=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,c,d=ype;for(;a--;)l=s[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:gpe(e)),d=c;return c};Ote();const mM={http:Mfe,xhr:upe,fetch:{get:Ote}};V.forEach(mM,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const zF=t=>`- ${t}`,vpe=t=>V.isFunction(t)||t===null||t===!1;function bpe(t,e){t=V.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!vpe(n)&&(i=mM[(a=String(n)).toLowerCase()],i===void 0))throw new Be(`Unknown adapter '${a}'`);if(i&&(V.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(zF).join(`
`):" "+zF(o[0]):"as no adapter specified";throw new Be("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const jte={getAdapter:bpe,adapters:mM};function g1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new lh(null,t)}function VF(t){return g1(t),t.headers=Zn.from(t.headers),t.data=m1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),jte.getAdapter(t.adapter||Zp.adapter,t)(t).then(function(n){return g1(t),n.data=m1.call(t,t.transformResponse,n),n.headers=Zn.from(n.headers),n},function(n){return Cte(n)||(g1(t),n&&n.response&&(n.response.data=m1.call(t,t.transformResponse,n.response),n.response.headers=Zn.from(n.response.headers))),Promise.reject(n)})}const Pte="1.13.2",k0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{k0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const UF={};k0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+Pte+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Be(i(o," has been removed"+(r?" in "+r:"")),Be.ERR_DEPRECATED);return r&&!UF[o]&&(UF[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};k0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function xpe(t,e,r){if(typeof t!="object")throw new Be("options must be an object",Be.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Be("option "+s+" must be "+l,Be.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Be("Unknown option "+s,Be.ERR_BAD_OPTION)}}const sy={assertOptions:xpe,validators:k0},ws=sy.validators;let sc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new IF,response:new IF}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Ec(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&sy.assertOptions(n,{silentJSONParsing:ws.transitional(ws.boolean),forcedJSONParsing:ws.transitional(ws.boolean),clarifyTimeoutError:ws.transitional(ws.boolean)},!1),i!=null&&(V.isFunction(i)?r.paramsSerializer={serialize:i}:sy.assertOptions(i,{encode:ws.function,serialize:ws.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),sy.assertOptions(r,{baseUrl:ws.spelling("baseURL"),withXsrfToken:ws.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&V.merge(s.common,s[r.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=Zn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[VF.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(v){g.call(this,v);break}}try{d=VF.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Ec(this.defaults,e);const r=kte(e.baseURL,e.url,e.allowAbsoluteUrls);return Ste(r,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){sc.prototype[e]=function(r,n){return this.request(Ec(n||{},{method:e,url:r,data:(n||{}).data}))}});V.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(Ec(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}sc.prototype[e]=r(),sc.prototype[e+"Form"]=r(!0)});let wpe=class Ite{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new lh(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Ite(function(i){e=i}),cancel:e}}};function Spe(t){return function(r){return t.apply(null,r)}}function _pe(t){return V.isObject(t)&&t.isAxiosError===!0}const eI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(eI).forEach(([t,e])=>{eI[e]=t});function Rte(t){const e=new sc(t),r=ute(sc.prototype.request,e);return V.extend(r,sc.prototype,e,{allOwnKeys:!0}),V.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Rte(Ec(t,i))},r}const ar=Rte(Zp);ar.Axios=sc;ar.CanceledError=lh;ar.CancelToken=wpe;ar.isCancel=Cte;ar.VERSION=Pte;ar.toFormData=N0;ar.AxiosError=Be;ar.Cancel=ar.CanceledError;ar.all=function(e){return Promise.all(e)};ar.spread=Spe;ar.isAxiosError=_pe;ar.mergeConfig=Ec;ar.AxiosHeaders=Zn;ar.formToJSON=t=>Ete(V.isHTMLForm(t)?new FormData(t):t);ar.getAdapter=jte.getAdapter;ar.HttpStatusCode=eI;ar.default=ar;const{Axios:G4e,AxiosError:Y4e,CanceledError:Q4e,isCancel:X4e,CancelToken:J4e,VERSION:Z4e,all:e5e,Cancel:t5e,isAxiosError:r5e,spread:n5e,toFormData:i5e,AxiosHeaders:s5e,HttpStatusCode:o5e,formToJSON:a5e,getAdapter:l5e,mergeConfig:c5e}=ar,tI=window.prmConfig||{},de=ar.create({baseURL:tI.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":tI.nonce||""}});de.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});de.interceptors.response.use(t=>t,t=>{var e,r;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=tI.loginUrl||"/wp-login.php"),((r=t.response)==null?void 0:r.status)===403&&console.error("Access denied:",t.response.data),Promise.reject(t)});const Fe={getPeople:t=>de.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>de.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>de.post("/wp/v2/people",t),updatePerson:(t,e)=>de.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>de.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>de.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>de.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>de.post("/wp/v2/companies",t),updateCompany:(t,e)=>de.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>de.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>de.get("/wp/v2/important-dates",{params:t}),getDate:t=>de.get(`/wp/v2/important-dates/${t}`),createDate:t=>de.post("/wp/v2/important-dates",t),updateDate:(t,e)=>de.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>de.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>de.get("/wp/v2/person_label"),getCompanyLabels:()=>de.get("/wp/v2/company_label"),getRelationshipTypes:()=>de.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>de.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>de.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>de.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>de.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>de.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),de.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},Me={getDashboard:()=>de.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>de.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>de.get("/prm/v1/user/me"),getUsers:()=>de.get("/prm/v1/users"),approveUser:t=>de.post(`/prm/v1/users/${t}/approve`),denyUser:t=>de.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>de.delete(`/prm/v1/users/${t}`),search:t=>de.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>de.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>de.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>de.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>de.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>de.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>de.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>de.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>de.get("/prm/v1/user/slack-status"),disconnectSlack:()=>de.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>de.get("/prm/v1/slack/channels"),getSlackTargets:()=>de.get("/prm/v1/slack/targets"),updateSlackTargets:t=>de.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>de.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>de.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>de.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>de.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>de.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>de.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>de.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>de.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>de.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>de.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>de.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>de.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>de.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>de.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>de.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>de.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>de.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>de.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),de.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),de.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>de.get("/prm/v1/carddav/urls"),getAppPasswords:t=>de.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>de.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>de.delete(`/wp/v2/users/${t}/application-passwords/${e}`)};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Epe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const r=k.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>k.createElement("svg",{ref:d,...Epe,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Cpe(t)}`,a].join(" "),...c},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Npe=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kpe=he("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tpe=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ope=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=he("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=he("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=he("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=he("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=he("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=he("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=he("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ppe=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=he("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ipe=he("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=he("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=he("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=he("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rpe=he("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=he("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=he("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mpe=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ape=he("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fte=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $pe=he("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=he("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fpe=he("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=he("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lpe=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bpe=he("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=he("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vpe=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=he("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=he("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upe=he("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hpe=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wpe=he("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=he("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kpe=he("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gpe=he("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=he("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=he("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ype=he("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qpe=he("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xpe=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=he("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=he("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jpe=he("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zpe=he("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Tc="Caelis";function ch(t){k.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Tc;document.title=`${t} - ${r}`}},[t])}function eme(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function Wte(t=null){const e=qo();k.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=eme(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=Tc}const n=((i=window.prmConfig)==null?void 0:i.siteName)||Tc;document.title=`${r} - ${n}`},[e.pathname,t])}function tme(){return lt({queryKey:["dashboard"],queryFn:async()=>(await Me.getDashboard()).data})}function rme(t=30){return lt({queryKey:["reminders",t],queryFn:async()=>(await Me.getReminders(t)).data})}function Kte(t=!1){return lt({queryKey:["todos",t],queryFn:async()=>(await Me.getAllTodos(t)).data})}function Gte(){const t=bt();return tt({mutationFn:({todoId:e,data:r})=>Me.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function nme(){const t=bt();return tt({mutationFn:e=>Me.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function ime(t){const e=typeof t=="string"?t:"",r=e.length>=2;return lt({queryKey:["search",e],queryFn:async()=>r?(await Me.search(e)).data:{people:[],companies:[]},enabled:r})}function Kn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function ur(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Kn(e)}function nd(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Kn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Kn(e)}function Xs(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const It={all:["people"],lists:()=>[...It.all,"list"],list:t=>[...It.lists(),t],details:()=>[...It.all,"detail"],detail:t=>[...It.details(),t],timeline:t=>[...It.detail(t),"timeline"],dates:t=>[...It.detail(t),"dates"]};function Yte(t){var i,s,o,a,l,c,d,h,f,p,m,g,v,y,b,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(c=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:c.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((v=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:v.map(S=>S.name))||[],n=Kn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((b=t.acf)==null?void 0:b.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function Wc(t={}){return lt({queryKey:It.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await Fe.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(Yte);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function Qte(t){return lt({queryKey:It.detail(t),queryFn:async()=>{const e=await Fe.getPerson(t,{_embed:!0});return Yte(e.data)},enabled:!!t})}function sme(t){return lt({queryKey:It.timeline(t),queryFn:async()=>(await Me.getPersonTimeline(t)).data,enabled:!!t})}function ome(t){return lt({queryKey:It.dates(t),queryFn:async()=>(await Me.getPersonDates(t)).data,enabled:!!t})}function ame(){const t=bt();return tt({mutationFn:({id:e,data:r})=>Fe.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:It.detail(r)}),t.invalidateQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:It.detail(a)})})}})}function lme(){const t=bt();return tt({mutationFn:e=>Fe.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:It.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function cme(){const t=bt();return tt({mutationFn:({personId:e,content:r})=>Me.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function ume(){const t=bt();return tt({mutationFn:({noteId:e,personId:r})=>Me.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function wM(){const t=bt();return tt({mutationFn:({personId:e,data:r})=>Me.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function dme(){const t=bt();return tt({mutationFn:({activityId:e,data:r,personId:n})=>Me.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function hme(){const t=bt();return tt({mutationFn:({activityId:e,personId:r})=>Me.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function Xte(){const t=bt();return tt({mutationFn:({personId:e,data:r})=>Me.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function fme(){const t=bt();return tt({mutationFn:({todoId:e,data:r,personId:n})=>Me.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function pme(){const t=bt();return tt({mutationFn:({todoId:e,personId:r})=>Me.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function mme(){const t=bt();return tt({mutationFn:({dateId:e,personId:r})=>Fe.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:It.dates(r)}),t.invalidateQueries({queryKey:It.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function Jte({isOpen:t,onClose:e}){const[r,n]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(!1),[d,h]=k.useState(""),{data:f=[],isLoading:p}=Wc(),m=Xte(),g=bt(),v=k.useMemo(()=>{const _=d.toLowerCase().trim();let C=f;return _&&(C=f.filter(E=>{var N,T,j;return((N=E.name)==null?void 0:N.toLowerCase().includes(_))||((T=E.first_name)==null?void 0:T.toLowerCase().includes(_))||((j=E.last_name)==null?void 0:j.toLowerCase().includes(_))})),[...C].sort((E,N)=>(E.name||"").localeCompare(N.name||""))},[f,d]),y=k.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),b=()=>new Date().toISOString().split("T")[0];if(k.useEffect(()=>{t&&(n(""),s(b()),a(""),h(""),c(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch(C){console.error("Failed to create todo:",C)}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),u.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:w,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>c(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?u.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(el,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:y.name})]}):u.jsx("span",{className:"text-gray-400",children:"Select a person..."}),u.jsx(Hy,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Nc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:p?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):v.length>0?v.map(_=>u.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),c(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?u.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(el,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}var tm=t=>t.type==="checkbox",ql=t=>t instanceof Date,Bn=t=>t==null;const Zte=t=>typeof t=="object";var fr=t=>!Bn(t)&&!Array.isArray(t)&&Zte(t)&&!ql(t),ere=t=>fr(t)&&t.target?tm(t.target)?t.target.checked:t.target.value:t,gme=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,tre=(t,e)=>t.has(gme(e)),yme=t=>{const e=t.constructor&&t.constructor.prototype;return fr(e)&&e.hasOwnProperty("isPrototypeOf")},SM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function jt(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(SM&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(fr(t)&&yme(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=jt(t[i]));return n}var j0=t=>/^\w*$/.test(t),Nt=t=>t===void 0,P0=t=>Array.isArray(t)?t.filter(Boolean):[],_M=t=>P0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ue=(t,e,r)=>{if(!e||!fr(t))return r;const n=(j0(e)?[e]:_M(e)).reduce((i,s)=>Bn(i)?i:i[s],t);return Nt(n)||n===t?Nt(t[e])?r:t[e]:n},ui=t=>typeof t=="boolean",Nn=t=>typeof t=="function",vt=(t,e,r)=>{let n=-1;const i=j0(e)?[e]:_M(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const c=t[a];l=fr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Ky={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Mi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Js={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},rre=xe.createContext(null);rre.displayName="HookFormContext";const I0=()=>xe.useContext(rre);var nre=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Mi.all&&(e._proxyFormState[o]=!n||Mi.all),r&&(r[o]=!0),t[o]}});return i};const R0=typeof window<"u"?xe.useLayoutEffect:xe.useEffect;function vme(t){const e=I0(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=xe.useState(r._formState),l=xe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return R0(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:c=>{!n&&a({...r._formState,...c})}}),[i,n,s]),xe.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),xe.useMemo(()=>nre(o,r,l.current,!1),[o,r])}var hi=t=>typeof t=="string",oI=(t,e,r,n,i)=>hi(t)?(n&&e.watch.add(t),ue(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),ue(r,s))):(n&&(e.watchAll=!0),r),aI=t=>Bn(t)||!Zte(t);function ss(t,e,r=new WeakSet){if(aI(t)||aI(e))return Object.is(t,e);if(ql(t)&&ql(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(ql(o)&&ql(a)||fr(o)&&fr(a)||Array.isArray(o)&&Array.isArray(a)?!ss(o,a,r):!Object.is(o,a))return!1}}return!0}function bme(t){const e=I0(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=xe.useRef(i),c=xe.useRef(a),d=xe.useRef(void 0),h=xe.useRef(r),f=xe.useRef(n);c.current=a;const[p,m]=xe.useState(()=>{const x=r._getWatch(n,l.current);return c.current?c.current(x):x}),g=xe.useCallback(x=>{const S=oI(n,r._names,x||r._formValues,!1,l.current);return c.current?c.current(S):S},[r._formValues,r._names,n]),v=xe.useCallback(x=>{if(!s){const S=oI(n,r._names,x||r._formValues,!1,l.current);if(c.current){const _=c.current(S);ss(_,d.current)||(m(_),d.current=_)}else m(S)}},[r._formValues,r._names,s,n]);R0(()=>((h.current!==r||!ss(f.current,n))&&(h.current=r,f.current=n,v()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{v(x.values)}})),[r,o,n,v]),xe.useEffect(()=>r._removeUnmounted());const y=h.current!==r,b=f.current,w=xe.useMemo(()=>{if(s)return null;const x=!y&&!ss(b,n);return y||x?g():null},[s,y,n,b,g]);return w!==null?w:p}function xme(t){const e=I0(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=tre(i._names.array,r),c=xe.useMemo(()=>ue(i._formValues,r,ue(i._defaultValues,r,o)),[i,r,o]),d=bme({control:i,name:r,defaultValue:c,exact:a}),h=vme({control:i,name:r,exact:a}),f=xe.useRef(t),p=xe.useRef(void 0),m=xe.useRef(i.register(r,{...t.rules,value:d,...ui(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=xe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ue(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!ue(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ue(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ue(h.validatingFields,r)},error:{enumerable:!0,get:()=>ue(h.errors,r)}}),[h,r]),v=xe.useCallback(x=>m.current.onChange({target:{value:ere(x),name:r},type:Ky.CHANGE}),[r]),y=xe.useCallback(()=>m.current.onBlur({target:{value:ue(i._formValues,r),name:r},type:Ky.BLUR}),[r,i._formValues]),b=xe.useCallback(x=>{const S=ue(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>Nn(x.focus)&&x.focus(),select:()=>Nn(x.select)&&x.select(),setCustomValidity:_=>Nn(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>Nn(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=xe.useMemo(()=>({name:r,value:d,...ui(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:v,onBlur:y,ref:b}),[r,n,h.disabled,v,y,b,d]);return xe.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...ui(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(C,E)=>{const N=ue(i._fields,C);N&&N._f&&(N._f.mount=E)};if(_(r,!0),x){const C=jt(ue(i._options.defaultValues,r,f.current.defaultValue));vt(i._defaultValues,r,C),Nt(ue(i._formValues,r))&&vt(i._formValues,r,C)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),xe.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),xe.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const Gy=t=>t.render(xme(t));var wme=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},Gn=t=>Array.isArray(t)?t:[t],QF=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function ire(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&fr(i)&&s){const o=ire(i,s);fr(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var an=t=>fr(t)&&!Object.keys(t).length,EM=t=>t.type==="file",Yy=t=>{if(!SM)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},sre=t=>t.type==="select-multiple",CM=t=>t.type==="radio",Sme=t=>CM(t)||tm(t),v1=t=>Yy(t)&&t.isConnected;function _me(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Nt(t)?n++:t[e[n++]];return t}function Eme(t){for(const e in t)if(t.hasOwnProperty(e)&&!Nt(t[e]))return!1;return!0}function ir(t,e){const r=Array.isArray(e)?e:j0(e)?[e]:_M(e),n=r.length===1?t:_me(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(fr(n)&&an(n)||Array.isArray(n)&&Eme(n))&&ir(t,r.slice(0,-1)),t}var Cme=t=>{for(const e in t)if(Nn(t[e]))return!0;return!1};function ore(t){return Array.isArray(t)||fr(t)&&!Cme(t)}function lI(t,e={}){for(const r in t){const n=t[r];ore(n)?(e[r]=Array.isArray(n)?[]:{},lI(n,e[r])):Nt(n)||(e[r]=!0)}return e}function Nu(t,e,r){r||(r=lI(e));for(const n in t){const i=t[n];if(ore(i))Nt(e)||aI(r[n])?r[n]=lI(i,Array.isArray(i)?[]:{}):Nu(i,Bn(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!ss(i,s)}}return r}const XF={value:!1,isValid:!1},JF={value:!0,isValid:!0};var are=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Nt(t[0].attributes.value)?Nt(t[0].value)||t[0].value===""?JF:{value:t[0].value,isValid:!0}:JF:XF}return XF},lre=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Nt(t)?t:e?t===""?NaN:t&&+t:r&&hi(t)?new Date(t):n?n(t):t;const ZF={isValid:!1,value:null};var cre=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,ZF):ZF;function e4(t){const e=t.ref;return EM(e)?e.files:CM(e)?cre(t.refs).value:sre(e)?[...e.selectedOptions].map(({value:r})=>r):tm(e)?are(t.refs).value:lre(Nt(e.value)?t.ref.value:e.value,t)}var Nme=(t,e,r,n)=>{const i={};for(const s of t){const o=ue(e,s);o&&vt(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Qy=t=>t instanceof RegExp,Xh=t=>Nt(t)?t:Qy(t)?t.source:fr(t)?Qy(t.value)?t.value.source:t.value:t,Vu=t=>({isOnSubmit:!t||t===Mi.onSubmit,isOnBlur:t===Mi.onBlur,isOnChange:t===Mi.onChange,isOnAll:t===Mi.all,isOnTouch:t===Mi.onTouched});const t4="AsyncFunction";var kme=t=>!!t&&!!t.validate&&!!(Nn(t.validate)&&t.validate.constructor.name===t4||fr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===t4)),Tme=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),cI=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const id=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=ue(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(id(a,e))break}else if(fr(a)&&id(a,e))break}}};function r4(t,e,r){const n=ue(t,r);if(n||j0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=ue(e,s),a=ue(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var Ome=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return an(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||Mi.all))},jme=(t,e,r)=>!t||!e||t===e||Gn(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),Pme=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,Ime=(t,e)=>!P0(ue(t,e)).length&&ir(t,e),ure=(t,e,r)=>{const n=Gn(ue(t,r));return vt(n,"root",e[r]),vt(t,r,n),t};function n4(t,e,r="validate"){if(hi(t)||Array.isArray(t)&&t.every(hi)||ui(t)&&!t)return{type:r,message:hi(t)?t:"",ref:e}}var bu=t=>fr(t)&&!Qy(t)?t:{value:t,message:""},uI=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:v,mount:y}=t._f,b=ue(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=I=>{i&&w.reportValidity&&(w.setCustomValidity(ui(I)?"":I||""),w.reportValidity())},S={},_=CM(o),C=tm(o),E=_||C,N=(v||EM(o))&&Nt(o.value)&&Nt(b)||Yy(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,T=wme.bind(null,g,n,S),j=(I,O,D,z=Js.maxLength,R=Js.minLength)=>{const B=I?O:D;S[g]={type:I?z:R,message:B,ref:o,...T(I?z:R,B)}};if(s?!Array.isArray(b)||!b.length:l&&(!E&&(N||Bn(b))||ui(b)&&!b||C&&!are(a).isValid||_&&!cre(a).isValid)){const{value:I,message:O}=hi(l)?{value:!!l,message:l}:bu(l);if(I&&(S[g]={type:Js.required,message:O,ref:w,...T(Js.required,O)},!n))return x(O),S}if(!N&&(!Bn(h)||!Bn(f))){let I,O;const D=bu(f),z=bu(h);if(!Bn(b)&&!isNaN(b)){const R=o.valueAsNumber||b&&+b;Bn(D.value)||(I=R>D.value),Bn(z.value)||(O=R<z.value)}else{const R=o.valueAsDate||new Date(b),B=G=>new Date(new Date().toDateString()+" "+G),q=o.type=="time",$=o.type=="week";hi(D.value)&&b&&(I=q?B(b)>B(D.value):$?b>D.value:R>new Date(D.value)),hi(z.value)&&b&&(O=q?B(b)<B(z.value):$?b<z.value:R<new Date(z.value))}if((I||O)&&(j(!!I,D.message,z.message,Js.max,Js.min),!n))return x(S[g].message),S}if((c||d)&&!N&&(hi(b)||s&&Array.isArray(b))){const I=bu(c),O=bu(d),D=!Bn(I.value)&&b.length>+I.value,z=!Bn(O.value)&&b.length<+O.value;if((D||z)&&(j(D,I.message,O.message),!n))return x(S[g].message),S}if(p&&!N&&hi(b)){const{value:I,message:O}=bu(p);if(Qy(I)&&!b.match(I)&&(S[g]={type:Js.pattern,message:O,ref:o,...T(Js.pattern,O)},!n))return x(O),S}if(m){if(Nn(m)){const I=await m(b,r),O=n4(I,w);if(O&&(S[g]={...O,...T(Js.validate,O.message)},!n))return x(O.message),S}else if(fr(m)){let I={};for(const O in m){if(!an(I)&&!n)break;const D=n4(await m[O](b,r),w,O);D&&(I={...D,...T(O,D.message)},x(D.message),n&&(S[g]=I))}if(!an(I)&&(S[g]={ref:w,...I},!n))return S}}return x(!0),S};const Rme={mode:Mi.onSubmit,reValidateMode:Mi.onChange,shouldFocusError:!0};function Mme(t={}){let e={...Rme,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Nn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=fr(e.defaultValues)||fr(e.values)?jt(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:jt(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:QF(),state:QF()},m=e.criteriaMode===Mi.all,g=A=>L=>{clearTimeout(c),c=setTimeout(A,L)},v=async A=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||A)){let L;e.resolver?(L=an((await E()).errors),y()):L=await T(n,!0),L!==r.isValid&&p.state.next({isValid:L})}},y=(A,L)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((A||Array.from(a.mount)).forEach(H=>{H&&(L?vt(r.validatingFields,H,L):ir(r.validatingFields,H))}),p.state.next({validatingFields:r.validatingFields,isValidating:!an(r.validatingFields)}))},b=(A,L=[],H,le,ee=!0,Z=!0)=>{if(le&&H&&!e.disabled){if(o.action=!0,Z&&Array.isArray(ue(n,A))){const pe=H(ue(n,A),le.argA,le.argB);ee&&vt(n,A,pe)}if(Z&&Array.isArray(ue(r.errors,A))){const pe=H(ue(r.errors,A),le.argA,le.argB);ee&&vt(r.errors,A,pe),Ime(r.errors,A)}if((h.touchedFields||f.touchedFields)&&Z&&Array.isArray(ue(r.touchedFields,A))){const pe=H(ue(r.touchedFields,A),le.argA,le.argB);ee&&vt(r.touchedFields,A,pe)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Nu(i,s)),p.state.next({name:A,isDirty:I(A,L),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else vt(s,A,L)},w=(A,L)=>{vt(r.errors,A,L),p.state.next({errors:r.errors})},x=A=>{r.errors=A,p.state.next({errors:r.errors,isValid:!1})},S=(A,L,H,le)=>{const ee=ue(n,A);if(ee){const Z=ue(s,A,Nt(H)?ue(i,A):H);Nt(Z)||le&&le.defaultChecked||L?vt(s,A,L?Z:e4(ee._f)):z(A,Z),o.mount&&!o.action&&v()}},_=(A,L,H,le,ee)=>{let Z=!1,pe=!1;const ze={name:A};if(!e.disabled){if(!H||le){(h.isDirty||f.isDirty)&&(pe=r.isDirty,r.isDirty=ze.isDirty=I(),Z=pe!==ze.isDirty);const Ve=ss(ue(i,A),L);pe=!!ue(r.dirtyFields,A),Ve?ir(r.dirtyFields,A):vt(r.dirtyFields,A,!0),ze.dirtyFields=r.dirtyFields,Z=Z||(h.dirtyFields||f.dirtyFields)&&pe!==!Ve}if(H){const Ve=ue(r.touchedFields,A);Ve||(vt(r.touchedFields,A,H),ze.touchedFields=r.touchedFields,Z=Z||(h.touchedFields||f.touchedFields)&&Ve!==H)}Z&&ee&&p.state.next(ze)}return Z?ze:{}},C=(A,L,H,le)=>{const ee=ue(r.errors,A),Z=(h.isValid||f.isValid)&&ui(L)&&r.isValid!==L;if(e.delayError&&H?(l=g(()=>w(A,H)),l(e.delayError)):(clearTimeout(c),l=null,H?vt(r.errors,A,H):ir(r.errors,A)),(H?!ss(ee,H):ee)||!an(le)||Z){const pe={...le,...Z&&ui(L)?{isValid:L}:{},errors:r.errors,name:A};r={...r,...pe},p.state.next(pe)}},E=async A=>(y(A,!0),await e.resolver(s,e.context,Nme(A||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),N=async A=>{const{errors:L}=await E(A);if(y(A),A)for(const H of A){const le=ue(L,H);le?vt(r.errors,H,le):ir(r.errors,H)}else r.errors=L;return L},T=async(A,L,H={valid:!0})=>{for(const le in A){const ee=A[le];if(ee){const{_f:Z,...pe}=ee;if(Z){const ze=a.array.has(Z.name),Ve=ee._f&&kme(ee._f);Ve&&h.validatingFields&&y([Z.name],!0);const _t=await uI(ee,a.disabled,s,m,e.shouldUseNativeValidation&&!L,ze);if(Ve&&h.validatingFields&&y([Z.name]),_t[Z.name]&&(H.valid=!1,L))break;!L&&(ue(_t,Z.name)?ze?ure(r.errors,_t,Z.name):vt(r.errors,Z.name,_t[Z.name]):ir(r.errors,Z.name))}!an(pe)&&await T(pe,L,H)}}return H.valid},j=()=>{for(const A of a.unMount){const L=ue(n,A);L&&(L._f.refs?L._f.refs.every(H=>!v1(H)):!v1(L._f.ref))&&ot(A)}a.unMount=new Set},I=(A,L)=>!e.disabled&&(A&&L&&vt(s,A,L),!ss(K(),i)),O=(A,L,H)=>oI(A,a,{...o.mount?s:Nt(L)?i:hi(A)?{[A]:L}:L},H,L),D=A=>P0(ue(o.mount?s:i,A,e.shouldUnregister?ue(i,A,[]):[])),z=(A,L,H={})=>{const le=ue(n,A);let ee=L;if(le){const Z=le._f;Z&&(!Z.disabled&&vt(s,A,lre(L,Z)),ee=Yy(Z.ref)&&Bn(L)?"":L,sre(Z.ref)?[...Z.ref.options].forEach(pe=>pe.selected=ee.includes(pe.value)):Z.refs?tm(Z.ref)?Z.refs.forEach(pe=>{(!pe.defaultChecked||!pe.disabled)&&(Array.isArray(ee)?pe.checked=!!ee.find(ze=>ze===pe.value):pe.checked=ee===pe.value||!!ee)}):Z.refs.forEach(pe=>pe.checked=pe.value===ee):EM(Z.ref)?Z.ref.value="":(Z.ref.value=ee,Z.ref.type||p.state.next({name:A,values:jt(s)})))}(H.shouldDirty||H.shouldTouch)&&_(A,ee,H.shouldTouch,H.shouldDirty,!0),H.shouldValidate&&G(A)},R=(A,L,H)=>{for(const le in L){if(!L.hasOwnProperty(le))return;const ee=L[le],Z=A+"."+le,pe=ue(n,Z);(a.array.has(A)||fr(ee)||pe&&!pe._f)&&!ql(ee)?R(Z,ee,H):z(Z,ee,H)}},B=(A,L,H={})=>{const le=ue(n,A),ee=a.array.has(A),Z=jt(L);vt(s,A,Z),ee?(p.array.next({name:A,values:jt(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&H.shouldDirty&&p.state.next({name:A,dirtyFields:Nu(i,s),isDirty:I(A,Z)})):le&&!le._f&&!Bn(Z)?R(A,Z,H):z(A,Z,H),cI(A,a)&&p.state.next({...r,name:A}),p.state.next({name:o.mount?A:void 0,values:jt(s)})},q=async A=>{o.mount=!0;const L=A.target;let H=L.name,le=!0;const ee=ue(n,H),Z=Ve=>{le=Number.isNaN(Ve)||ql(Ve)&&isNaN(Ve.getTime())||ss(Ve,ue(s,H,Ve))},pe=Vu(e.mode),ze=Vu(e.reValidateMode);if(ee){let Ve,_t;const _e=L.type?e4(ee._f):ere(A),ne=A.type===Ky.BLUR||A.type===Ky.FOCUS_OUT,fe=!Tme(ee._f)&&!e.resolver&&!ue(r.errors,H)&&!ee._f.deps||Pme(ne,ue(r.touchedFields,H),r.isSubmitted,ze,pe),ce=cI(H,a,ne);vt(s,H,_e),ne?(!L||!L.readOnly)&&(ee._f.onBlur&&ee._f.onBlur(A),l&&l(0)):ee._f.onChange&&ee._f.onChange(A);const Ce=_(H,_e,ne),We=!an(Ce)||ce;if(!ne&&p.state.next({name:H,type:A.type,values:jt(s)}),fe)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?ne&&v():ne||v()),We&&p.state.next({name:H,...ce?{}:Ce});if(!ne&&ce&&p.state.next({...r}),e.resolver){const{errors:oi}=await E([H]);if(y([H]),Z(_e),le){const gn=r4(r.errors,n,H),gu=r4(oi,n,gn.name||H);Ve=gu.error,H=gu.name,_t=an(oi)}}else y([H],!0),Ve=(await uI(ee,a.disabled,s,m,e.shouldUseNativeValidation))[H],y([H]),Z(_e),le&&(Ve?_t=!1:(h.isValid||f.isValid)&&(_t=await T(n,!0)));le&&(ee._f.deps&&(!Array.isArray(ee._f.deps)||ee._f.deps.length>0)&&G(ee._f.deps),C(H,_t,Ve,Ce))}},$=(A,L)=>{if(ue(r.errors,L)&&A.focus)return A.focus(),1},G=async(A,L={})=>{let H,le;const ee=Gn(A);if(e.resolver){const Z=await N(Nt(A)?A:ee);H=an(Z),le=A?!ee.some(pe=>ue(Z,pe)):H}else A?(le=(await Promise.all(ee.map(async Z=>{const pe=ue(n,Z);return await T(pe&&pe._f?{[Z]:pe}:pe)}))).every(Boolean),!(!le&&!r.isValid)&&v()):le=H=await T(n);return p.state.next({...!hi(A)||(h.isValid||f.isValid)&&H!==r.isValid?{}:{name:A},...e.resolver||!A?{isValid:H}:{},errors:r.errors}),L.shouldFocus&&!le&&id(n,$,A?ee:a.mount),le},K=(A,L)=>{let H={...o.mount?s:i};return L&&(H=ire(L.dirtyFields?r.dirtyFields:r.touchedFields,H)),Nt(A)?H:hi(A)?ue(H,A):A.map(le=>ue(H,le))},F=(A,L)=>({invalid:!!ue((L||r).errors,A),isDirty:!!ue((L||r).dirtyFields,A),error:ue((L||r).errors,A),isValidating:!!ue(r.validatingFields,A),isTouched:!!ue((L||r).touchedFields,A)}),X=A=>{A&&Gn(A).forEach(L=>ir(r.errors,L)),p.state.next({errors:A?r.errors:{}})},Q=(A,L,H)=>{const le=(ue(n,A,{_f:{}})._f||{}).ref,ee=ue(r.errors,A)||{},{ref:Z,message:pe,type:ze,...Ve}=ee;vt(r.errors,A,{...Ve,...L,ref:le}),p.state.next({name:A,errors:r.errors,isValid:!1}),H&&H.shouldFocus&&le&&le.focus&&le.focus()},Ee=(A,L)=>Nn(A)?p.state.subscribe({next:H=>"values"in H&&A(O(void 0,L),H)}):O(A,L,!0),we=A=>p.state.subscribe({next:L=>{jme(A.name,L.name,A.exact)&&Ome(L,A.formState||h,nr,A.reRenderRoot)&&A.callback({values:{...s},...r,...L,defaultValues:i})}}).unsubscribe,Le=A=>(o.mount=!0,f={...f,...A.formState},we({...A,formState:{...d,...A.formState}})),ot=(A,L={})=>{for(const H of A?Gn(A):a.mount)a.mount.delete(H),a.array.delete(H),L.keepValue||(ir(n,H),ir(s,H)),!L.keepError&&ir(r.errors,H),!L.keepDirty&&ir(r.dirtyFields,H),!L.keepTouched&&ir(r.touchedFields,H),!L.keepIsValidating&&ir(r.validatingFields,H),!e.shouldUnregister&&!L.keepDefaultValue&&ir(i,H);p.state.next({values:jt(s)}),p.state.next({...r,...L.keepDirty?{isDirty:I()}:{}}),!L.keepIsValid&&v()},Wr=({disabled:A,name:L})=>{(ui(A)&&o.mount||A||a.disabled.has(L))&&(A?a.disabled.add(L):a.disabled.delete(L))},rr=(A,L={})=>{let H=ue(n,A);const le=ui(L.disabled)||ui(e.disabled);return vt(n,A,{...H||{},_f:{...H&&H._f?H._f:{ref:{name:A}},name:A,mount:!0,...L}}),a.mount.add(A),H?Wr({disabled:ui(L.disabled)?L.disabled:e.disabled,name:A}):S(A,!0,L.value),{...le?{disabled:L.disabled||e.disabled}:{},...e.progressive?{required:!!L.required,min:Xh(L.min),max:Xh(L.max),minLength:Xh(L.minLength),maxLength:Xh(L.maxLength),pattern:Xh(L.pattern)}:{},name:A,onChange:q,onBlur:q,ref:ee=>{if(ee){rr(A,L),H=ue(n,A);const Z=Nt(ee.value)&&ee.querySelectorAll&&ee.querySelectorAll("input,select,textarea")[0]||ee,pe=Sme(Z),ze=H._f.refs||[];if(pe?ze.find(Ve=>Ve===Z):Z===H._f.ref)return;vt(n,A,{_f:{...H._f,...pe?{refs:[...ze.filter(v1),Z,...Array.isArray(ue(i,A))?[{}]:[]],ref:{type:Z.type,name:A}}:{ref:Z}}}),S(A,!1,void 0,Z)}else H=ue(n,A,{}),H._f&&(H._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(tre(a.array,A)&&o.action)&&a.unMount.add(A)}}},Wt=()=>e.shouldFocusError&&id(n,$,a.mount),_r=A=>{ui(A)&&(p.state.next({disabled:A}),id(n,(L,H)=>{const le=ue(n,H);le&&(L.disabled=le._f.disabled||A,Array.isArray(le._f.refs)&&le._f.refs.forEach(ee=>{ee.disabled=le._f.disabled||A}))},0,!1))},nt=(A,L)=>async H=>{let le;H&&(H.preventDefault&&H.preventDefault(),H.persist&&H.persist());let ee=jt(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Z,values:pe}=await E();y(),r.errors=Z,ee=jt(pe)}else await T(n);if(a.disabled.size)for(const Z of a.disabled)ir(ee,Z);if(ir(r.errors,"root"),an(r.errors)){p.state.next({errors:{}});try{await A(ee,H)}catch(Z){le=Z}}else L&&await L({...r.errors},H),Wt(),setTimeout(Wt);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:an(r.errors)&&!le,submitCount:r.submitCount+1,errors:r.errors}),le)throw le},mn=(A,L={})=>{ue(n,A)&&(Nt(L.defaultValue)?B(A,jt(ue(i,A))):(B(A,L.defaultValue),vt(i,A,jt(L.defaultValue))),L.keepTouched||ir(r.touchedFields,A),L.keepDirty||(ir(r.dirtyFields,A),r.isDirty=L.defaultValue?I(A,jt(ue(i,A))):I()),L.keepError||(ir(r.errors,A),h.isValid&&v()),p.state.next({...r}))},Dn=(A,L={})=>{const H=A?jt(A):i,le=jt(H),ee=an(A),Z=ee?i:le;if(L.keepDefaultValues||(i=H),!L.keepValues){if(L.keepDirtyValues){const pe=new Set([...a.mount,...Object.keys(Nu(i,s))]);for(const ze of Array.from(pe))ue(r.dirtyFields,ze)?vt(Z,ze,ue(s,ze)):B(ze,ue(Z,ze))}else{if(SM&&Nt(A))for(const pe of a.mount){const ze=ue(n,pe);if(ze&&ze._f){const Ve=Array.isArray(ze._f.refs)?ze._f.refs[0]:ze._f.ref;if(Yy(Ve)){const _t=Ve.closest("form");if(_t){_t.reset();break}}}}if(L.keepFieldsRef)for(const pe of a.mount)B(pe,ue(Z,pe));else n={}}s=e.shouldUnregister?L.keepDefaultValues?jt(i):{}:jt(Z),p.array.next({values:{...Z}}),p.state.next({values:{...Z}})}a={mount:L.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!L.keepIsValid||!!L.keepDirtyValues||!e.shouldUnregister&&!an(Z),o.watch=!!e.shouldUnregister,o.keepIsValid=!!L.keepIsValid,o.action=!1,L.keepErrors||(r.errors={}),p.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:ee?!1:L.keepDirty?r.isDirty:!!(L.keepDefaultValues&&!ss(A,i)),isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ee?{}:L.keepDirtyValues?L.keepDefaultValues&&s?Nu(i,s):r.dirtyFields:L.keepDefaultValues&&A?Nu(i,A):L.keepDirty?r.dirtyFields:{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Pr=(A,L)=>Dn(Nn(A)?A(s):A,{...e.resetOptions,...L}),yt=(A,L={})=>{const H=ue(n,A),le=H&&H._f;if(le){const ee=le.refs?le.refs[0]:le.ref;ee.focus&&setTimeout(()=>{ee.focus(),L.shouldSelect&&Nn(ee.select)&&ee.select()})}},nr=A=>{r={...r,...A}},Er={control:{register:rr,unregister:ot,getFieldState:F,handleSubmit:nt,setError:Q,_subscribe:we,_runSchema:E,_updateIsValidating:y,_focusError:Wt,_getWatch:O,_getDirty:I,_setValid:v,_setFieldArray:b,_setDisabledField:Wr,_setErrors:x,_getFieldArray:D,_reset:Dn,_resetDefaultValues:()=>Nn(e.defaultValues)&&e.defaultValues().then(A=>{Pr(A,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:_r,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(A){o=A},get _defaultValues(){return i},get _names(){return a},set _names(A){a=A},get _formState(){return r},get _options(){return e},set _options(A){e={...e,...A}}},subscribe:Le,trigger:G,register:rr,handleSubmit:nt,watch:Ee,setValue:B,getValues:K,reset:Pr,resetField:mn,clearErrors:X,unregister:ot,setError:Q,setFocus:yt,getFieldState:F};return{...Er,formControl:Er}}var Go=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},b1=(t,e,r={})=>r.shouldFocus||Nt(r.shouldFocus)?r.focusName||`${t}.${Nt(r.focusIndex)?e:r.focusIndex}.`:"",x1=(t,e)=>[...t,...Gn(e)],w1=t=>Array.isArray(t)?t.map(()=>{}):void 0;function S1(t,e,r){return[...t.slice(0,e),...Gn(r),...t.slice(e)]}var _1=(t,e,r)=>Array.isArray(t)?(Nt(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],E1=(t,e)=>[...Gn(e),...Gn(t)];function Ame(t,e){let r=0;const n=[...t];for(const i of e)n.splice(i-r,1),r++;return P0(n).length?n:[]}var C1=(t,e)=>Nt(e)?[]:Ame(t,Gn(e).sort((r,n)=>r-n)),N1=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},i4=(t,e,r)=>(t[e]=r,t);function Dme(t){const e=I0(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:s,rules:o}=t,[a,l]=xe.useState(r._getFieldArray(n)),c=xe.useRef(r._getFieldArray(n).map(Go)),d=xe.useRef(!1);r._names.array.add(n),xe.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),R0(()=>r._subjects.array.subscribe({next:({values:x,name:S})=>{if(S===n||!S){const _=ue(x,n);Array.isArray(_)&&(l(_),c.current=_.map(Go))}}}).unsubscribe,[r,n]);const h=xe.useCallback(x=>{d.current=!0,r._setFieldArray(n,x)},[r,n]),f=(x,S)=>{const _=Gn(jt(x)),C=x1(r._getFieldArray(n),_);r._names.focus=b1(n,C.length-1,S),c.current=x1(c.current,_.map(Go)),h(C),l(C),r._setFieldArray(n,C,x1,{argA:w1(x)})},p=(x,S)=>{const _=Gn(jt(x)),C=E1(r._getFieldArray(n),_);r._names.focus=b1(n,0,S),c.current=E1(c.current,_.map(Go)),h(C),l(C),r._setFieldArray(n,C,E1,{argA:w1(x)})},m=x=>{const S=C1(r._getFieldArray(n),x);c.current=C1(c.current,x),h(S),l(S),!Array.isArray(ue(r._fields,n))&&vt(r._fields,n,void 0),r._setFieldArray(n,S,C1,{argA:x})},g=(x,S,_)=>{const C=Gn(jt(S)),E=S1(r._getFieldArray(n),x,C);r._names.focus=b1(n,x,_),c.current=S1(c.current,x,C.map(Go)),h(E),l(E),r._setFieldArray(n,E,S1,{argA:x,argB:w1(S)})},v=(x,S)=>{const _=r._getFieldArray(n);N1(_,x,S),N1(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,N1,{argA:x,argB:S},!1)},y=(x,S)=>{const _=r._getFieldArray(n);_1(_,x,S),_1(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,_1,{argA:x,argB:S},!1)},b=(x,S)=>{const _=jt(S),C=i4(r._getFieldArray(n),x,_);c.current=[...C].map((E,N)=>!E||N===x?Go():c.current[N]),h(C),l([...C]),r._setFieldArray(n,C,i4,{argA:x,argB:_},!0,!1)},w=x=>{const S=Gn(jt(x));c.current=S.map(Go),h([...S]),l([...S]),r._setFieldArray(n,[...S],_=>_,{},!0,!1)};return xe.useEffect(()=>{if(r._state.action=!1,cI(n,r._names)&&r._subjects.state.next({...r._formState}),d.current&&(!Vu(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Vu(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(x=>{r._updateIsValidating([n]);const S=ue(x.errors,n),_=ue(r._formState.errors,n);(_?!S&&_.type||S&&(_.type!==S.type||_.message!==S.message):S&&S.type)&&(S?vt(r._formState.errors,n,S):ir(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const x=ue(r._fields,n);x&&x._f&&!(Vu(r._options.reValidateMode).isOnSubmit&&Vu(r._options.mode).isOnSubmit)&&uI(x,r._names.disabled,r._formValues,r._options.criteriaMode===Mi.all,r._options.shouldUseNativeValidation,!0).then(S=>!an(S)&&r._subjects.state.next({errors:ure(r._formState.errors,S,n)}))}r._subjects.state.next({name:n,values:jt(r._formValues)}),r._names.focus&&id(r._fields,(x,S)=>{if(r._names.focus&&S.startsWith(r._names.focus)&&x.focus)return x.focus(),1}),r._names.focus="",r._setValid(),d.current=!1},[a,n,r]),xe.useEffect(()=>(!ue(r._formValues,n)&&r._setFieldArray(n),()=>{const x=(S,_)=>{const C=ue(r._fields,S);C&&C._f&&(C._f.mount=_)};r._options.shouldUnregister||s?r.unregister(n):x(n,!1)}),[n,r,i,s]),{swap:xe.useCallback(v,[h,n,r]),move:xe.useCallback(y,[h,n,r]),prepend:xe.useCallback(p,[h,n,r]),append:xe.useCallback(f,[h,n,r]),remove:xe.useCallback(m,[h,n,r]),insert:xe.useCallback(g,[h,n,r]),update:xe.useCallback(b,[h,n,r]),replace:xe.useCallback(w,[h,n,r]),fields:xe.useMemo(()=>a.map((x,S)=>({...x,[i]:c.current[S]||Go()})),[a,i])}}function Kc(t={}){const e=xe.useRef(void 0),r=xe.useRef(void 0),[n,i]=xe.useState({isDirty:!1,isValidating:!1,isLoading:Nn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Nn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!Nn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=Mme(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,R0(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),xe.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),xe.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),xe.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),xe.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),xe.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),xe.useEffect(()=>{var o;t.values&&!ss(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),xe.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=nre(n,s),e.current}function NM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,person:i=null}){const s=!!i,[o,a]=k.useState(!1),[l,c]=k.useState(null),[d,h]=k.useState(null),{data:f=[]}=lt({queryKey:["date-types"],queryFn:async()=>(await Fe.getDateTypes()).data,enabled:t&&!s}),p=f.find(N=>N.slug==="birthday"||N.name.toLowerCase()==="birthday"),m=tt({mutationFn:async N=>{const T=new FormData;return T.append("file",N),(await de.post("/prm/v1/import/vcard/parse",T,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:g,handleSubmit:v,reset:y,formState:{errors:b}}=Kc({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}});k.useEffect(()=>{var N,T,j,I,O,D,z,R,B,q;if(t)if(c(null),h(null),m.reset(),i){const $=(T=(N=i.acf)==null?void 0:N.contact_info)==null?void 0:T.find(K=>K.contact_type==="email"),G=(I=(j=i.acf)==null?void 0:j.contact_info)==null?void 0:I.find(K=>K.contact_type==="phone"||K.contact_type==="mobile");y({first_name:((O=i.acf)==null?void 0:O.first_name)||"",last_name:((D=i.acf)==null?void 0:D.last_name)||"",nickname:((z=i.acf)==null?void 0:z.nickname)||"",gender:((R=i.acf)==null?void 0:R.gender)||"",email:($==null?void 0:$.contact_value)||"",phone:(G==null?void 0:G.contact_value)||"",phone_type:(G==null?void 0:G.contact_type)||"mobile",birthday:"",how_we_met:((B=i.acf)==null?void 0:B.how_we_met)||"",is_favorite:((q=i.acf)==null?void 0:q.is_favorite)||!1})}else y({first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1})},[t,i,y]);const w=k.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?a(!0):N.type==="dragleave"&&a(!1)},[]),x=k.useCallback(N=>{N.preventDefault(),N.stopPropagation(),a(!1),h(null),N.dataTransfer.files&&N.dataTransfer.files[0]&&S(N.dataTransfer.files[0])},[]),S=N=>{const T=N.name.split(".").pop().toLowerCase();if(T!=="vcf"&&T!=="vcard"){h("Please select a vCard file (.vcf)");return}c(N),m.mutate(N,{onSuccess:j=>{y({first_name:j.first_name||"",last_name:j.last_name||"",nickname:j.nickname||"",gender:"",email:j.email||"",phone:j.phone||"",phone_type:j.phone_type||"mobile",birthday:j.birthday||"",how_we_met:j.note||"",is_favorite:!1}),j.contact_count>1&&h(`Note: File contains ${j.contact_count} contacts. Only the first contact was loaded.`)},onError:j=>{var I,O;h(((O=(I=j.response)==null?void 0:I.data)==null?void 0:O.message)||"Failed to parse vCard file"),c(null)}})},_=N=>{h(null),N.target.files&&N.target.files[0]&&S(N.target.files[0])},C=()=>{c(null),h(null),m.reset()};if(!t)return null;const E=N=>{r({...N,birthdayType:p})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit person":"Add person"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:v(E),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!s&&u.jsxs("div",{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-3 text-center transition-colors ${o?"border-primary-500 bg-primary-50":l&&!d?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:x,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:n}),m.isPending?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):l&&!d?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[u.jsx(em,{className:"h-4 w-4 text-green-600"}),u.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",l.name]}),u.jsx("button",{type:"button",onClick:N=>{N.preventDefault(),N.stopPropagation(),C()},className:"ml-1 p-0.5 hover:bg-green-100 rounded",children:u.jsx(Mt,{className:"h-3 w-3 text-green-600"})})]}):u.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[u.jsx(kc,{className:"h-4 w-4 text-gray-400"}),u.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard or ",u.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),d&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-xs text-amber-700 bg-amber-50 rounded-lg p-2",children:[u.jsx(Mo,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:d})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"First name *"}),u.jsx("input",{...g("first_name",{required:"First name is required"}),className:"input",placeholder:"John",disabled:n,autoFocus:!0}),b.first_name&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:b.first_name.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Last name"}),u.jsx("input",{...g("last_name"),className:"input",placeholder:"Doe",disabled:n})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Nickname"}),u.jsx("input",{...g("nickname"),className:"input",placeholder:"Johnny",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Gender"}),u.jsxs("select",{...g("gender"),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select..."}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"non_binary",children:"Non-binary"}),u.jsx("option",{value:"other",children:"Other"}),u.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),!s&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Email"}),u.jsx("input",{...g("email"),type:"email",className:"input",placeholder:"john@example.com",disabled:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gravatar will be auto-fetched if available"})]}),!s&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Phone"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{...g("phone_type"),className:"input w-24",disabled:n,children:[u.jsx("option",{value:"mobile",children:"Mobile"}),u.jsx("option",{value:"phone",children:"Phone"})]}),u.jsx("input",{...g("phone"),type:"tel",className:"input flex-1",placeholder:"+1 234 567 890",disabled:n})]})]}),!s&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Birthday"}),u.jsx("input",{...g("birthday"),type:"date",className:"input",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"How we met"}),u.jsx("textarea",{...g("how_we_met"),className:"input",rows:3,placeholder:"We met at...",disabled:n})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_favorite",...g("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create person"})]})]})]})})}function kM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,company:i=null}){var R,B,q;const s=!!i,[o,a]=k.useState(!1),[l,c]=k.useState(""),[d,h]=k.useState(""),[f,p]=k.useState(!1),[m,g]=k.useState(""),[v,y]=k.useState([]),b=k.useRef(null),w=k.useRef(null),{data:x=[],isLoading:S}=lt({queryKey:["companies","all"],queryFn:async()=>(await Fe.getCompanies({per_page:100,_embed:!0})).data,enabled:t}),{data:_=[],isLoading:C}=lt({queryKey:["people","all"],queryFn:async()=>(await Fe.getPeople({per_page:100,_embed:!0})).data,enabled:t}),{register:E,handleSubmit:N,reset:T,formState:{errors:j}}=Kc({defaultValues:{title:"",website:"",industry:""}}),I=k.useMemo(()=>{const $=l.toLowerCase().trim();let G=x.filter(K=>!(s&&K.id===(i==null?void 0:i.id)||s&&K.parent===(i==null?void 0:i.id)));return $&&(G=G.filter(K=>{var F;return(F=ur(K))==null?void 0:F.toLowerCase().includes($)})),[...G].sort((K,F)=>(ur(K)||"").localeCompare(ur(F)||""))},[x,l,i,s]),O=k.useMemo(()=>x.find($=>$.id===parseInt(d)),[x,d]),D=k.useMemo(()=>{const $=m.toLowerCase().trim(),G=_.map(Q=>{var Ee,we,Le,ot;return{id:Q.id,type:"person",name:Kn(((Ee=Q.title)==null?void 0:Ee.rendered)||""),thumbnail:(ot=(Le=(we=Q._embedded)==null?void 0:we["wp:featuredmedia"])==null?void 0:Le[0])==null?void 0:ot.source_url}}),K=x.filter(Q=>!s||Q.id!==(i==null?void 0:i.id)).map(Q=>{var Ee,we,Le;return{id:Q.id,type:"company",name:ur(Q),thumbnail:(Le=(we=(Ee=Q._embedded)==null?void 0:Ee["wp:featuredmedia"])==null?void 0:we[0])==null?void 0:Le.source_url}});let F=[...G,...K];$&&(F=F.filter(Q=>{var Ee;return(Ee=Q.name)==null?void 0:Ee.toLowerCase().includes($)}));const X=v.map(Q=>`${Q.type}-${Q.id}`);return F=F.filter(Q=>!X.includes(`${Q.type}-${Q.id}`)),F.sort((Q,Ee)=>(Q.name||"").localeCompare(Ee.name||""))},[_,x,m,v,i,s]);if(k.useEffect(()=>{var $,G,K;t&&(a(!1),p(!1),c(""),g(""),i?(T({title:Kn((($=i.title)==null?void 0:$.rendered)||""),website:((G=i.acf)==null?void 0:G.website)||"",industry:((K=i.acf)==null?void 0:K.industry)||""}),h(i.parent?String(i.parent):"")):(T({title:"",website:"",industry:""}),h(""),y([])))},[t,i,T]),k.useEffect(()=>{var $,G;if(t&&((G=($=i==null?void 0:i.acf)==null?void 0:$.investors)==null?void 0:G.length)>0&&_.length>0&&x.length>0){const F=i.acf.investors.map(X=>{var we,Le,ot,Wr,rr,Wt,_r;const Q=_.find(nt=>nt.id===X);if(Q)return{id:Q.id,type:"person",name:Kn(((we=Q.title)==null?void 0:we.rendered)||""),thumbnail:(Wr=(ot=(Le=Q._embedded)==null?void 0:Le["wp:featuredmedia"])==null?void 0:ot[0])==null?void 0:Wr.source_url};const Ee=x.find(nt=>nt.id===X);return Ee?{id:Ee.id,type:"company",name:ur(Ee),thumbnail:(_r=(Wt=(rr=Ee._embedded)==null?void 0:rr["wp:featuredmedia"])==null?void 0:Wt[0])==null?void 0:_r.source_url}:null}).filter(Boolean);y(F)}else t&&!i&&y([])},[t,i,_,x]),k.useEffect(()=>{const $=G=>{b.current&&!b.current.contains(G.target)&&a(!1)};if(o)return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[o]),k.useEffect(()=>{const $=G=>{w.current&&!w.current.contains(G.target)&&p(!1)};if(f)return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[f]),!t)return null;const z=$=>{r({...$,parentId:d?parseInt(d):0,investors:v.map(G=>G.id)})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit organization":"Add organization"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:N(z),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization name *"}),u.jsx("input",{...E("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc.",disabled:n,autoFocus:!0}),j.title&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:j.title.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Website"}),u.jsx("input",{...E("website"),type:"url",className:"input",placeholder:"https://example.com",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Industry"}),u.jsx("input",{...E("industry"),className:"input",placeholder:"Technology",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Parent organization"}),u.jsxs("div",{className:"relative",ref:b,children:[u.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:S||n,children:[O?u.jsxs("div",{className:"flex items-center gap-2",children:[(q=(B=(R=O._embedded)==null?void 0:R["wp:featuredmedia"])==null?void 0:B[0])!=null&&q.source_url?u.jsx("img",{src:O._embedded["wp:featuredmedia"][0].source_url,alt:ur(O),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Tr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:ur(O)})]}):u.jsx("span",{className:"text-gray-400",children:"No parent organization"}),u.jsx(Hy,{className:`w-4 h-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Nc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:l,onChange:$=>c($.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsxs("div",{className:"overflow-y-auto max-h-48",children:[u.jsx("button",{type:"button",onClick:()=>{h(""),a(!1),c("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),S?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):I.length>0?I.map($=>{var G,K,F;return u.jsxs("button",{type:"button",onClick:()=>{h(String($.id)),a(!1),c("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d===String($.id)?"bg-primary-50":""}`,children:[(F=(K=(G=$._embedded)==null?void 0:G["wp:featuredmedia"])==null?void 0:K[0])!=null&&F.source_url?u.jsx("img",{src:$._embedded["wp:featuredmedia"][0].source_url,alt:ur($),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Tr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:ur($)})]},$.id)}):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"label flex items-center",children:[u.jsx(Wy,{className:"w-4 h-4 mr-2"}),"Investors"]}),v.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:v.map($=>u.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[$.thumbnail?u.jsx("img",{src:$.thumbnail,alt:$.name,className:`w-5 h-5 object-cover ${$.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${$.type==="person"?"rounded-full":"rounded"}`,children:$.type==="person"?u.jsx(el,{className:"w-3 h-3 text-gray-500"}):u.jsx(Tr,{className:"w-3 h-3 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-700",children:$.name}),u.jsx("button",{type:"button",onClick:()=>y(G=>G.filter(K=>!(K.id===$.id&&K.type===$.type))),className:"ml-1 text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-3.5 h-3.5"})})]},`${$.type}-${$.id}`))}),u.jsxs("div",{className:"relative",ref:w,children:[u.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:S||C||n,children:[u.jsx("span",{className:"text-gray-400",children:"Add investor..."}),u.jsx(Hy,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(Nc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:m,onChange:$=>g($.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:S||C?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):D.length>0?D.map($=>u.jsxs("button",{type:"button",onClick:()=>{y(G=>[...G,$]),g("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[$.thumbnail?u.jsx("img",{src:$.thumbnail,alt:$.name,className:`w-6 h-6 object-cover ${$.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${$.type==="person"?"rounded-full":"rounded"}`,children:$.type==="person"?u.jsx(el,{className:"w-4 h-4 text-gray-500"}):u.jsx(Tr,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-sm text-gray-900 truncate block",children:$.name}),u.jsx("span",{className:"text-xs text-gray-500",children:$.type==="person"?"Person":"Organization"})]})]},`${$.type}-${$.id}`)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:m?"No results found":"No people or organizations available"})})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create organization"})]})]})]})})}function $me({value:t=[],onChange:e,people:r=[],isLoading:n,currentPersonId:i}){const[s,o]=k.useState(""),a=k.useMemo(()=>{if(!s)return r.slice(0,10);const h=s.toLowerCase();return r.filter(f=>nd(f).toLowerCase().includes(h)).slice(0,10)},[r,s]),l=k.useMemo(()=>t.map(h=>r.find(f=>f.id===h)).filter(Boolean),[t,r]),c=h=>{t.includes(h)||e([...t,h]),o("")},d=h=>{h!==i&&e(t.filter(f=>f!==h))};return u.jsxs("div",{className:"space-y-2",children:[l.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[nd(h),h.id!==i&&u.jsx("button",{type:"button",onClick:()=>d(h.id),className:"hover:text-primary-600",children:u.jsx(Mt,{className:"w-3 h-3"})})]},h.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:s,onChange:h=>o(h.target.value),placeholder:"Search for people to add...",className:"input",disabled:n}),s&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:a.length>0?a.map(h=>u.jsx("button",{type:"button",onClick:()=>c(h.id),disabled:t.includes(h.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(h.id)?"opacity-50 cursor-not-allowed":""}`,children:nd(h)},h.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function TM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,dateItem:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1}){const l=!!i,{data:c=[]}=lt({queryKey:["date-types"],queryFn:async()=>((await Fe.getDateTypes()).data||[]).sort((C,E)=>{const N=C.name||"",T=E.name||"";return N.localeCompare(T)})}),{register:d,handleSubmit:h,reset:f,watch:p,setValue:m,control:g,formState:{errors:v}}=Kc({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),y=p("related_people"),b=p("date_type"),w=p("title");if(k.useEffect(()=>{var C;if((!w||["'s Birthday","Wedding of "].some(E=>w.endsWith(E)||w.startsWith(E)))&&(y==null?void 0:y.length)>0&&b){const E=c.find(I=>I.id===parseInt(b)),N=(E==null?void 0:E.name)||"",T=((C=E==null?void 0:E.slug)==null?void 0:C.toLowerCase())||N.toLowerCase(),j=y.map(I=>{var D,z,R;const O=o.find(B=>B.id===I);return O?Kn(((D=O.acf)==null?void 0:D.first_name)||O.first_name||((R=(z=O.title)==null?void 0:z.rendered)==null?void 0:R.split(" ")[0])||""):null}).filter(Boolean);if(j.length>0&&N){let I;T==="wedding"?I=j.length>=2?`Wedding of ${j[0]} & ${j[1]}`:`Wedding of ${j[0]}`:I=`${j[0]}'s ${N}`,m("title",I)}}},[y,b,o,c,m,w]),k.useEffect(()=>{var S,_,C,E,N,T;if(t)if(i){let j=[];const I=(S=i.acf)==null?void 0:S.related_people;I&&(Array.isArray(I)?j=I.map(D=>parseInt(typeof D=="object"&&D!==null?D.ID||D.id||D.post_id:D,10)).filter(D=>!isNaN(D)&&D>0):typeof I=="number"&&(j=[I]));let O="";((_=i.date_type)==null?void 0:_.length)>0&&(O=i.date_type[0].toString()),f({title:Kn(((C=i.title)==null?void 0:C.rendered)||i.title||""),date_value:((E=i.acf)==null?void 0:E.date_value)||i.date_value||"",date_type:O,related_people:j,is_recurring:((N=i.acf)==null?void 0:N.is_recurring)??i.is_recurring??!0,year_unknown:((T=i.acf)==null?void 0:T.year_unknown)??i.year_unknown??!1})}else f({title:"",date_value:"",date_type:"",related_people:s?[parseInt(s)]:[],is_recurring:!0,year_unknown:!1})},[t,i,s,f]),!t)return null;const x=S=>{r({title:S.title,date_type:S.date_type?[parseInt(S.date_type)]:[],date_value:S.date_value,related_people:S.related_people,is_recurring:S.is_recurring,year_unknown:S.year_unknown})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:l?"Edit date":"Add date"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:h(x),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related people"}),u.jsx(Gy,{name:"related_people",control:g,render:({field:S})=>u.jsx($me,{value:S.value,onChange:S.onChange,people:o,isLoading:a,currentPersonId:parseInt(s)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date type *"}),u.jsx(Gy,{name:"date_type",control:g,rules:{required:"Please select a date type"},render:({field:S})=>u.jsxs("select",{value:S.value?String(S.value):"",onChange:_=>S.onChange(_.target.value),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select a type..."}),c.map(_=>u.jsx("option",{value:String(_.id),children:_.name},_.id))]})}),v.date_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...d("title"),className:"input",placeholder:"e.g., Mom's Birthday",disabled:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date *"}),u.jsx("input",{...d("date_value",{required:"Date is required"}),type:"date",className:"input",disabled:n}),v.date_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_value.message})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"year_unknown",...d("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_recurring",...d("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":l?"Save changes":"Add date"})]})]})]})})}const Fme=[{name:"Dashboard",href:"/",icon:Ape},{name:"People",href:"/people",icon:Fs},{name:"Organizations",href:"/companies",icon:Tr},{name:"Dates",href:"/dates",icon:vo},{name:"Todos",href:"/todos",icon:$s},{name:"Settings",href:"/settings",icon:Lte}];function s4({mobile:t=!1,onClose:e}){const{logoutUrl:r}=dM();return u.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[u.jsxs(Ge,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[u.jsx(zte,{className:"w-5 h-5"}),Tc]}),t&&u.jsx("button",{onClick:e,className:"p-2 -mr-2",children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:Fme.map(n=>u.jsxs(mhe,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[u.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(Lpe,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function qme(){var o;const[t,e]=k.useState(!1),r=k.useRef(null),{data:n,isLoading:i}=lt({queryKey:["current-user"],queryFn:async()=>(await Me.getCurrentUser()).data});if(k.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return u.jsx("div",{className:"flex items-center ml-auto",children:u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return u.jsxs("div",{className:"relative ml-auto",ref:r,children:[u.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?u.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),u.jsx(Hy,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(el,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&u.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(Lte,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function Lme({isOpen:t,onClose:e}){const[r,n]=k.useState(""),[i,s]=k.useState(0),o=ps(),a=k.useRef(null),l=r.trim(),{data:c,isLoading:d}=ime(l),h=c||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;k.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),k.useEffect(()=>{s(0)},[c]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(b=>Math.min(b+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(b=>Math.max(b-1,0));else if(y.key==="Enter"){y.preventDefault();const b=f[i];b&&v(b.type,b.id)}}},v=(y,b)=>{e(),y==="person"?o(`/people/${b}`):y==="company"&&o(`/companies/${b}`)};return t?u.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),u.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:u.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[u.jsx(Nc,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),u.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),u.jsx("span",{children:"to close"})]})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?u.jsxs("div",{className:"px-4 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),u.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?u.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,b)=>{const x=i===b;return u.jsxs("button",{onClick:()=>v("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(el,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&u.jsxs("div",{className:"px-2 mt-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,b)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+b,x=i===w;return u.jsxs("button",{onClick:()=>v("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Tr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):u.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:u.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):u.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[u.jsx(Nc,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),u.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to navigate"})]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to select"})]})]})})]})})]}):null}function Bme({onAddTodo:t,onAddPerson:e,onAddCompany:r,onAddDate:n}){const[i,s]=k.useState(!1),o=k.useRef(null);k.useEffect(()=>{const h=f=>{o.current&&!o.current.contains(f.target)&&s(!1)};if(i)return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[i]);const a=()=>{s(!1),t()},l=()=>{s(!1),e()},c=()=>{s(!1),r()},d=()=>{s(!1),n()};return u.jsxs("div",{className:"relative",ref:o,children:[u.jsx("button",{onClick:()=>s(!i),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:u.jsx(Jt,{className:"w-5 h-5"})}),i&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:l,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(el,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),u.jsxs("button",{onClick:c,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Tr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),u.jsxs("button",{onClick:a,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx($s,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),u.jsxs("button",{onClick:d,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(vo,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function zme({onMenuClick:t,onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i,onOpenSearch:s}){const o=qo(),a=()=>{const l=o.pathname;return l==="/"?"Dashboard":l.startsWith("/people")?"People":l.startsWith("/companies")?"Organizations":l.startsWith("/dates")?"Important Dates":l.startsWith("/todos")?"Todos":l.startsWith("/settings")?"Settings":""};return u.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:u.jsx(zpe,{className:"w-5 h-5"})}),u.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:a()}),u.jsx("div",{className:"flex-1"}),u.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[u.jsx(Nc,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),u.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[u.jsx(Ipe,{className:"w-3 h-3"}),"K"]})]}),u.jsx("div",{className:"ml-2",children:u.jsx(Bme,{onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i})}),u.jsx("div",{className:"ml-2",children:u.jsx(qme,{})})]})}function Vme({children:t}){const[e,r]=k.useState(!1),[n,i]=k.useState(!1),[s,o]=k.useState(!1),[a,l]=k.useState(!1),[c,d]=k.useState(!1),[h,f]=k.useState(!1),[p,m]=k.useState(!1),[g,v]=k.useState(!1),[y,b]=k.useState(!1),w=ps(),x=bt(),{data:S=[],isLoading:_}=Wc();Wte();const C=tt({mutationFn:async O=>{const D=[];O.email&&D.push({contact_type:"email",contact_value:O.email,contact_label:"Email"}),O.phone&&D.push({contact_type:O.phone_type||"mobile",contact_value:O.phone,contact_label:O.phone_type==="mobile"?"Mobile":"Phone"});const z={title:`${O.first_name} ${O.last_name}`.trim(),status:"publish",acf:{first_name:O.first_name,last_name:O.last_name,nickname:O.nickname,gender:O.gender||null,how_we_met:O.how_we_met,is_favorite:O.is_favorite,contact_info:D}},R=await Fe.createPerson(z),B=R.data.id;if(O.email)try{await Me.sideloadGravatar(B,O.email)}catch(q){console.error("Failed to load Gravatar:",q)}if(O.birthday&&O.birthdayType)try{await Fe.createDate({title:`${O.first_name}'s Birthday`,status:"publish",date_type:[O.birthdayType.id],acf:{date_value:O.birthday,is_recurring:!0,related_people:[B]}})}catch(q){console.error("Failed to create birthday:",q)}return R.data},onSuccess:O=>{x.invalidateQueries({queryKey:["people"]}),x.invalidateQueries({queryKey:["dashboard"]}),x.invalidateQueries({queryKey:["reminders"]}),l(!1),w(`/people/${O.id}`)}}),E=tt({mutationFn:async O=>{const D={title:O.title,status:"publish",parent:O.parentId||0,acf:{website:O.website,industry:O.industry,investors:O.investors||[]}};return(await Fe.createCompany(D)).data},onSuccess:O=>{x.invalidateQueries({queryKey:["companies"]}),x.invalidateQueries({queryKey:["dashboard"]}),d(!1),w(`/companies/${O.id}`)}}),N=tt({mutationFn:async O=>{const D={title:O.title,status:"publish",date_type:O.date_type,acf:{date_value:O.date_value,related_people:O.related_people,is_recurring:O.is_recurring,year_unknown:O.year_unknown}};return(await Fe.createDate(D)).data},onSuccess:()=>{x.invalidateQueries({queryKey:["reminders"]}),f(!1)}}),T=async O=>{m(!0);try{await C.mutateAsync(O)}finally{m(!1)}},j=async O=>{v(!0);try{await E.mutateAsync(O)}finally{v(!1)}},I=async O=>{b(!0);try{await N.mutateAsync(O)}finally{b(!1)}};return k.useEffect(()=>{const O=D=>{(D.metaKey||D.ctrlKey)&&D.key==="k"&&(D.preventDefault(),o(!0))};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[]),u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[u.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:u.jsx(s4,{})}),e&&u.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:u.jsx(s4,{mobile:!0,onClose:()=>r(!1)})})]}),u.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[u.jsx(zme,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onAddPerson:()=>l(!0),onAddCompany:()=>d(!0),onAddDate:()=>f(!0),onOpenSearch:()=>o(!0)}),u.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),u.jsx(Lme,{isOpen:s,onClose:()=>o(!1)}),u.jsx(Jte,{isOpen:n,onClose:()=>i(!1)}),u.jsx(NM,{isOpen:a,onClose:()=>l(!1),onSubmit:T,isLoading:p}),u.jsx(kM,{isOpen:c,onClose:()=>d(!1),onSubmit:j,isLoading:g}),u.jsx(TM,{isOpen:h,onClose:()=>f(!1),onSubmit:I,isLoading:y,allPeople:S,isPeopleLoading:_})]})}function it(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ao(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Ume(t,e){const r=it(t);return isNaN(e)?Ao(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const dre=6048e5,Hme=864e5,hre=6e4,fre=36e5,bg=43200,o4=1440;let Wme={};function rm(){return Wme}function Oc(t,e){var a,l,c,d;const r=rm(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=it(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Xy(t){return Oc(t,{weekStartsOn:1})}function pre(t){const e=it(t),r=e.getFullYear(),n=Ao(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Xy(n),s=Ao(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Xy(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Jy(t){const e=it(t);return e.setHours(0,0,0,0),e}function Zy(t){const e=it(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Kme(t,e){const r=Jy(t),n=Jy(e),i=+r-Zy(r),s=+n-Zy(n);return Math.round((i-s)/Hme)}function Gme(t){const e=pre(t),r=Ao(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Xy(r)}function sd(t,e){const r=it(t),n=it(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function M0(t){return Ao(t,Date.now())}function mre(t,e){const r=Jy(t),n=Jy(e);return+r==+n}function Yme(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Qme(t){if(!Yme(t)&&typeof t!="number")return!1;const e=it(t);return!isNaN(Number(e))}function Xme(t,e){const r=it(t),n=it(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function Jme(t,e){const r=it(t),n=it(e);return r.getFullYear()-n.getFullYear()}function Zme(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function ege(t,e){return+it(t)-+it(e)}function tge(t){const e=it(t);return e.setHours(23,59,59,999),e}function rge(t){const e=it(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function nge(t){const e=it(t);return+tge(e)==+rge(e)}function ige(t,e){const r=it(t),n=it(e),i=sd(r,n),s=Math.abs(Xme(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=sd(r,n)===-i;nge(it(t))&&s===1&&sd(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function sge(t,e,r){const n=ege(t,e)/1e3;return Zme(r==null?void 0:r.roundingMethod)(n)}function k1(t,e){const r=it(t),n=it(e),i=sd(r,n),s=Math.abs(Jme(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=sd(r,n)===-i,a=i*(s-+o);return a===0?0:a}function oge(t){const e=it(t),r=Ao(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const age={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lge=(t,e,r)=>{let n;const i=age[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function T1(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const cge={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},uge={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dge={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hge={date:T1({formats:cge,defaultWidth:"full"}),time:T1({formats:uge,defaultWidth:"full"}),dateTime:T1({formats:dge,defaultWidth:"full"})},fge={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pge=(t,e,r,n)=>fge[t];function Jh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const mge={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yge={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vge={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},wge=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Sge={ordinalNumber:wge,era:Jh({values:mge,defaultWidth:"wide"}),quarter:Jh({values:gge,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Jh({values:yge,defaultWidth:"wide"}),day:Jh({values:vge,defaultWidth:"wide"}),dayPeriod:Jh({values:bge,defaultWidth:"wide",formattingValues:xge,defaultFormattingWidth:"wide"})};function Zh(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Ege(a,h=>h.test(o)):_ge(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function _ge(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Ege(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Cge(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Nge=/^(\d+)(th|st|nd|rd)?/i,kge=/\d+/i,Tge={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Oge={any:[/^b/i,/^(a|c)/i]},jge={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Pge={any:[/1/i,/2/i,/3/i,/4/i]},Ige={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Rge={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mge={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Age={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Dge={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$ge={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Fge={ordinalNumber:Cge({matchPattern:Nge,parsePattern:kge,valueCallback:t=>parseInt(t,10)}),era:Zh({matchPatterns:Tge,defaultMatchWidth:"wide",parsePatterns:Oge,defaultParseWidth:"any"}),quarter:Zh({matchPatterns:jge,defaultMatchWidth:"wide",parsePatterns:Pge,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Zh({matchPatterns:Ige,defaultMatchWidth:"wide",parsePatterns:Rge,defaultParseWidth:"any"}),day:Zh({matchPatterns:Mge,defaultMatchWidth:"wide",parsePatterns:Age,defaultParseWidth:"any"}),dayPeriod:Zh({matchPatterns:Dge,defaultMatchWidth:"any",parsePatterns:$ge,defaultParseWidth:"any"})},gre={code:"en-US",formatDistance:lge,formatLong:hge,formatRelative:pge,localize:Sge,match:Fge,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qge(t){const e=it(t);return Kme(e,oge(e))+1}function Lge(t){const e=it(t),r=+Xy(e)-+Gme(e);return Math.round(r/dre)+1}function yre(t,e){var d,h,f,p;const r=it(t),n=r.getFullYear(),i=rm(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Ao(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Oc(o,e),l=Ao(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=Oc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function Bge(t,e){var a,l,c,d;const r=rm(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=yre(t,e),s=Ao(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Oc(s,e)}function zge(t,e){const r=it(t),n=+Oc(r,e)-+Bge(r,e);return Math.round(n/dre)+1}function ht(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Yo={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return ht(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):ht(r+1,2)},d(t,e){return ht(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return ht(t.getHours()%12||12,e.length)},H(t,e){return ht(t.getHours(),e.length)},m(t,e){return ht(t.getMinutes(),e.length)},s(t,e){return ht(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return ht(i,e.length)}},xu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},a4={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Yo.y(t,e)},Y:function(t,e,r,n){const i=yre(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return ht(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):ht(s,e.length)},R:function(t,e){const r=pre(t);return ht(r,e.length)},u:function(t,e){const r=t.getFullYear();return ht(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return ht(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return ht(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Yo.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return ht(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=zge(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):ht(i,e.length)},I:function(t,e,r){const n=Lge(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):ht(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Yo.d(t,e)},D:function(t,e,r){const n=qge(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ht(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ht(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ht(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return ht(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=xu.noon:n===0?i=xu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=xu.evening:n>=12?i=xu.afternoon:n>=4?i=xu.morning:i=xu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Yo.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Yo.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ht(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):ht(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Yo.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Yo.s(t,e)},S:function(t,e){return Yo.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return c4(n);case"XXXX":case"XX":return Il(n);case"XXXXX":case"XXX":default:return Il(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return c4(n);case"xxxx":case"xx":return Il(n);case"xxxxx":case"xxx":default:return Il(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+l4(n,":");case"OOOO":default:return"GMT"+Il(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+l4(n,":");case"zzzz":default:return"GMT"+Il(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return ht(n,e.length)},T:function(t,e,r){const n=t.getTime();return ht(n,e.length)}};function l4(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+ht(s,2)}function c4(t,e){return t%60===0?(t>0?"-":"+")+ht(Math.abs(t)/60,2):Il(t,e)}function Il(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=ht(Math.trunc(n/60),2),s=ht(n%60,2);return r+i+e+s}const u4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vre=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Vge=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return u4(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",u4(n,e)).replace("{{time}}",vre(i,e))},Uge={p:vre,P:Vge},Hge=/^D+$/,Wge=/^Y+$/,Kge=["D","DD","YY","YYYY"];function Gge(t){return Hge.test(t)}function Yge(t){return Wge.test(t)}function Qge(t,e,r){const n=Xge(t,e,r);if(console.warn(n),Kge.includes(t))throw new RangeError(n)}function Xge(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Jge=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Zge=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eye=/^'([^]*?)'?$/,tye=/''/g,rye=/[a-zA-Z]/;function En(t,e,r){var d,h,f,p;const n=rm(),i=n.locale??gre,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=it(t);if(!Qme(a))throw new RangeError("Invalid time value");let l=e.match(Zge).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=Uge[g];return v(m,i.formatLong)}return m}).join("").match(Jge).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:nye(m)};if(a4[g])return{isToken:!0,value:m};if(g.match(rye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(Yge(g)||Gge(g))&&Qge(g,e,String(t));const v=a4[g[0]];return v(a,g,i.localize,c)}).join("")}function nye(t){const e=t.match(eye);return e?e[1].replace(tye,"'"):t}function iye(t,e,r){const n=rm(),i=(r==null?void 0:r.locale)??n.locale??gre,s=2520,o=sd(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,c;o>0?(l=it(e),c=it(t)):(l=it(t),c=it(e));const d=sge(c,l),h=(Zy(c)-Zy(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<o4){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<bg){const m=Math.round(f/o4);return i.formatDistance("xDays",m,a)}else if(f<bg*2)return p=Math.round(f/bg),i.formatDistance("aboutXMonths",p,a)}if(p=ige(c,l),p<12){const m=Math.round(f/bg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function sye(t,e){return iye(t,M0(t),e)}function oye(t,e){const r=it(t),n=it(e);return r.getTime()>n.getTime()}function aye(t,e,r){const n=Oc(t,r),i=Oc(e,r);return+n==+i}function lye(t,e){return aye(t,M0(t),e)}function bre(t){return mre(t,M0(t))}function xre(t,e){return Ume(t,-e)}function wre(t){return mre(t,xre(M0(t),1))}function fp(t,e){const n=hye(t);let i;if(n.date){const l=fye(n.date,2);i=pye(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=mye(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=gye(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const xg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},cye=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,uye=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,dye=/^([+-])(\d{2})(?::?(\d{2}))?$/;function hye(t){const e={},r=t.split(xg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],xg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(xg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=xg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function fye(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function pye(t,e){if(e===null)return new Date(NaN);const r=t.match(cye);if(!r)return new Date(NaN);const n=!!r[4],i=ef(r[1]),s=ef(r[2])-1,o=ef(r[3]),a=ef(r[4]),l=ef(r[5])-1;if(n)return wye(e,a,l)?yye(e,a,l):new Date(NaN);{const c=new Date(0);return!bye(e,s,o)||!xye(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function ef(t){return t?parseInt(t):1}function mye(t){const e=t.match(uye);if(!e)return NaN;const r=O1(e[1]),n=O1(e[2]),i=O1(e[3]);return Sye(r,n,i)?r*fre+n*hre+i*1e3:NaN}function O1(t){return t&&parseFloat(t.replace(",","."))||0}function gye(t){if(t==="Z")return 0;const e=t.match(dye);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return _ye(n,i)?r*(n*fre+i*hre):NaN}function yye(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const vye=[31,null,31,30,31,30,31,31,30,31,30,31];function Sre(t){return t%400===0||t%4===0&&t%100!==0}function bye(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(vye[e]||(Sre(t)?29:28))}function xye(t,e){return e>=1&&e<=(Sre(t)?366:365)}function wye(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Sye(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function _ye(t,e){return e>=0&&e<=59}function Eye(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}fp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=fp(n);bre(i)?e.today.push(r):wre(i)?e.yesterday.push(r):lye(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function Cye(t){if(!t)return"";try{const e=fp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return bre(e)?sye(e,{addSuffix:!0}):wre(e)?r?En(e,"'Yesterday' 'at' HH:mm"):"Yesterday":En(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function Nye(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function kye(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function nm(t){if(!t.due_date||t.is_completed)return!1;try{const e=fp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function Tye(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):nm(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function OM({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[u.jsx($s,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),u.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[u.jsx(O0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),u.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var _re={exports:{}},Ere={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=k;function Oye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jye=typeof Object.is=="function"?Object.is:Oye,Pye=qd.useState,Iye=qd.useEffect,Rye=qd.useLayoutEffect,Mye=qd.useDebugValue;function Aye(t,e){var r=e(),n=Pye({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return Rye(function(){i.value=r,i.getSnapshot=e,j1(i)&&s({inst:i})},[t,r,e]),Iye(function(){return j1(i)&&s({inst:i}),t(function(){j1(i)&&s({inst:i})})},[t]),Mye(r),r}function j1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!jye(t,r)}catch{return!0}}function Dye(t,e){return e()}var $ye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Dye:Aye;Ere.useSyncExternalStore=qd.useSyncExternalStore!==void 0?qd.useSyncExternalStore:$ye;_re.exports=Ere;var jM=_re.exports;function Qr(t){this.content=t}Qr.prototype={constructor:Qr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new Qr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Qr(r)},addToStart:function(t,e){return new Qr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new Qr(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new Qr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Qr.from(t),t.size?new Qr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Qr.from(t),t.size?new Qr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Qr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};Qr.from=function(t){if(t instanceof Qr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new Qr(e)};function Cre(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=Cre(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function Nre(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=Nre(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class J{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new J(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new J(n,i)}cutByIndex(e,r){return e==r?J.empty:e==0&&r==this.content.length?this:new J(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new J(i,s)}addToStart(e){return new J([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new J(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return Cre(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return Nre(this,e,r,n)}findIndex(e){if(e==0)return wg(0,e);if(e==this.size)return wg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?wg(r+1,s):wg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return J.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new J(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return J.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new J(r||e,n)}static from(e){if(!e)return J.empty;if(e instanceof J)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new J([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}J.empty=new J([],0);const P1={index:0,offset:0};function wg(t,e){return P1.index=t,P1.offset=e,P1}function ev(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!ev(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!ev(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let xt=class dI{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ev(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return dI.none;if(e instanceof dI)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};xt.none=[];class tv extends Error{}class me{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=Tre(this.content,e+this.openStart,r);return n&&new me(n,this.openStart,this.openEnd)}removeBetween(e,r){return new me(kre(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return me.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new me(J.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new me(e,n,i)}}me.empty=new me(J.empty,0,0);function kre(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(kre(s.content,e-i-1,r-i-1)))}function Tre(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=Tre(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function Fye(t,e,r){if(r.openStart>t.depth)throw new tv("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new tv("Inconsistent open depths");return Ore(t,e,r,0)}function Ore(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=Ore(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return ac(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=qye(r,t);return ac(s,Pre(t,o,a,e,n))}else return ac(s,rv(t,e,n))}function jre(t,e){if(!e.type.compatibleContent(t.type))throw new tv("Cannot join "+e.type.name+" onto "+t.type.name)}function hI(t,e,r){let n=t.node(r);return jre(n,e.node(r)),n}function oc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Of(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(oc(t.nodeAfter,n),s++));for(let a=s;a<o;a++)oc(i.child(a),n);e&&e.depth==r&&e.textOffset&&oc(e.nodeBefore,n)}function ac(t,e){return t.type.checkContent(e),t.copy(e)}function Pre(t,e,r,n,i){let s=t.depth>i&&hI(t,e,i+1),o=n.depth>i&&hI(r,n,i+1),a=[];return Of(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(jre(s,o),oc(ac(s,Pre(t,e,r,n,i+1)),a)):(s&&oc(ac(s,rv(t,e,i+1)),a),Of(e,r,i,a),o&&oc(ac(o,rv(r,n,i+1)),a)),Of(n,null,i,a),new J(a)}function rv(t,e,r){let n=[];if(Of(null,t,r,n),t.depth>r){let i=hI(t,e,r+1);oc(ac(i,rv(t,e,r+1)),n)}return Of(e,null,r,n),new J(n)}function qye(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(J.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class pp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return xt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new nv(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new pp(r,n,s)}static resolveCached(e,r){let n=d4.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else d4.set(e,n=new Lye);let i=n.elts[n.i]=pp.resolve(e,r);return n.i=(n.i+1)%Bye,i}}class Lye{constructor(){this.elts=[],this.i=0}}const Bye=12,d4=new WeakMap;class nv{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const zye=Object.create(null);let Ba=class fI{constructor(e,r,n,i=xt.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||J.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&ev(this.attrs,r||e.defaultAttrs||zye)&&xt.sameSet(this.marks,n||xt.none)}copy(e=null){return e==this.content?this:new fI(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new fI(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return me.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new me(c,i.depth-o,s.depth-o)}replace(e,r,n){return Fye(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return pp.resolveCached(this,e)}resolveNoCache(e){return pp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Ire(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=J.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=xt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!xt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=J.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};Ba.prototype.text=void 0;class iv extends Ba{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ire(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new iv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new iv(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Ire(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class jc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new Vye(e,r);if(n.next==null)return jc.empty;let i=Rre(n);n.next&&n.err("Unexpected trailing text");let s=Qye(Yye(i));return Xye(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return J.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:h}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}jc.empty=new jc(!0);class Vye{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Rre(t){let e=[];do e.push(Uye(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Uye(t){let e=[];do e.push(Hye(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Hye(t){let e=Gye(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Wye(t,e);else break;return e}function h4(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Wye(t,e){let r=h4(t),n=r;return t.eat(",")&&(t.next!="}"?n=h4(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function Kye(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Gye(t){if(t.eat("(")){let e=Rre(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Kye(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Yye(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Mre(t,e){return e-t}function f4(t,e){let r=[];return n(e),r.sort(Mre);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function Qye(t){let e=Object.create(null);return r(f4(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<i.length;d++)i[d][0]==a&&(c=i[d][1]);f4(t,l).forEach(d=>{c||i.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[n.join(",")]=new jc(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Mre);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function Xye(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Are(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function Dre(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function $re(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Fre(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new Zye(t,n,e[n]);return r}let p4=class qre{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Fre(e,n.attrs),this.defaultAttrs=Are(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==jc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Dre(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ba(this,this.computeAttrs(e),J.from(r),xt.setFrom(n))}createChecked(e=null,r,n){return r=J.from(r),this.checkContent(r),new Ba(this,this.computeAttrs(e),r,xt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=J.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(J.empty,!0);return s?new Ba(this,e,r.append(s),xt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){$re(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:xt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new qre(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function Jye(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class Zye{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?Jye(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class A0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=Fre(e,i.attrs),this.excluded=null;let s=Are(this.attrs);this.instance=s?new xt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new xt(this,Dre(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new A0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){$re(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Lre{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=Qr.from(e.nodes),r.marks=Qr.from(e.marks||{}),this.nodes=p4.compile(this.spec.nodes,this),this.marks=A0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=jc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?m4(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:m4(this,o.split(" "))}this.nodeFromJSON=i=>Ba.fromJSON(this,i),this.markFromJSON=i=>xt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof p4){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new iv(n,n.defaultAttrs,e,xt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function m4(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function eve(t){return t.tag!=null}function tve(t){return t.style!=null}class za{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(eve(i))this.tags.push(i);else if(tve(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new y4(this,r,!1);return n.addAll(e,xt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new y4(this,r,!0);return n.addAll(e,xt.none,r.from,r.to),me.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(ive(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=v4(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=v4(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new za(e,za.schemaRules(e)))}}const Bre={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},rve={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},zre={ol:!0,ul:!0},mp=1,pI=2,jf=4;function g4(t,e,r){return e!=null?(e?mp:0)|(e==="full"?pI:0):t&&t.whitespace=="pre"?mp|pI:r&~jf}class Sg{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=xt.none,this.match=s||(o&jf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(J.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&mp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=J.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(J.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Bre.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class y4{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=g4(null,r.preserveWhitespace,0)|(n?jf:0);i?s=new Sg(i.type,i.attrs,xt.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new Sg(null,null,xt.none,!0,null,o):s=new Sg(e.schema.topNodeType,null,xt.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&pI?"full":this.localPreserveWS||(i.options&mp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;zre.hasOwnProperty(o)&&this.parser.normalizeLists&&nve(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:rve.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(Bre.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,r);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=xt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):b4(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=g4(e,s,o.options);o.options&jf&&o.content.length==0&&(a|=jf);let l=xt.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):b4(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Sg(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=mp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function nve(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&zre.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function ive(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function v4(t){let e={};for(let r in t)e[r]=t[r];return e}function b4(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Gc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=I1(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,r);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=ay(I1(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&ay(I1(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return ay(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Gc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=x4(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return x4(e.marks)}}function x4(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function I1(t){return t.document||window.document}const w4=new WeakMap;function sve(t){let e=w4.get(t);return e===void 0&&w4.set(t,e=ove(t)),e}function ove(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function ay(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=sve(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=ay(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const Vre=65535,Ure=Math.pow(2,16);function ave(t,e){return t+e*Ure}function S4(t){return t&Vre}function lve(t){return(t-(t&Vre))/Ure}const Hre=1,Wre=2,ly=4,Kre=8;class mI{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&Kre)>0}get deletedBefore(){return(this.delInfo&(Hre|ly))>0}get deletedAfter(){return(this.delInfo&(Wre|ly))>0}get deletedAcross(){return(this.delInfo&ly)>0}}class fi{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&fi.empty)return fi.empty}recover(e){let r=0,n=S4(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+lve(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:ave(a/3,e-l),g=e==l?Wre:e==h?Hre:ly;return(r<0?e!=l:e!=h)&&(g|=Kre),new mI(p,g,m)}i+=d-c}return n?e+i:new mI(e+i,0,null)}touches(e,r){let n=0,i=S4(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],d=this.ranges[i+n];e(a,a+c,l,l+d),s+=d-c}}invert(){return new fi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?fi.empty:new fi(e<0?[0,-e,0]:[0,0,e])}}fi.empty=new fi([]);class gp{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new gp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new gp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new mI(e,i,null)}}const R1=Object.create(null);class pn{getMap(){return fi.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=R1[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in R1)throw new RangeError("Duplicate use of step JSON ID "+e);return R1[e]=r,r.prototype.jsonID=e,r}}class hr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new hr(e,null)}static fail(e){return new hr(null,e)}static fromReplace(e,r,n,i){try{return hr.ok(e.replace(r,n,i))}catch(s){if(s instanceof tv)return hr.fail(s.message);throw s}}}function PM(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(PM(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return J.fromArray(n)}class ka extends pn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new me(PM(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return hr.fromReplace(e,this.from,this.to,s)}invert(){return new ls(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ka(r.pos,n.pos,this.mark)}merge(e){return e instanceof ka&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ka(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ka(r.from,r.to,e.markFromJSON(r.mark))}}pn.jsonID("addMark",ka);class ls extends pn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new me(PM(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return hr.fromReplace(e,this.from,this.to,n)}invert(){return new ka(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ls(r.pos,n.pos,this.mark)}merge(e){return e instanceof ls&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ls(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ls(r.from,r.to,e.markFromJSON(r.mark))}}pn.jsonID("removeMark",ls);class Ta extends pn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return hr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return hr.fromReplace(e,this.pos,this.pos+1,new me(J.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Ta(this.pos,r.marks[i]);return new Ta(this.pos,this.mark)}}return new Pc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Ta(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ta(r.pos,e.markFromJSON(r.mark))}}pn.jsonID("addNodeMark",Ta);class Pc extends pn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return hr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return hr.fromReplace(e,this.pos,this.pos+1,new me(J.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Ta(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Pc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Pc(r.pos,e.markFromJSON(r.mark))}}pn.jsonID("removeNodeMark",Pc);class Ar extends pn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&gI(e,this.from,this.to)?hr.fail("Structure replace would overwrite content"):hr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new fi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ar(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Ar(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ar)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?me.empty:new me(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ar(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?me.empty:new me(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ar(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ar(r.from,r.to,me.fromJSON(e,r.slice),!!r.structure)}}pn.jsonID("replace",Ar);class Fr extends pn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(gI(e,this.from,this.gapFrom)||gI(e,this.gapTo,this.to)))return hr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return hr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?hr.fromReplace(e,this.from,this.to,n):hr.fail("Content does not fit in gap")}getMap(){return new fi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Fr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Fr(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Fr(r.from,r.to,r.gapFrom,r.gapTo,me.fromJSON(e,r.slice),r.insert,!!r.structure)}}pn.jsonID("replaceAround",Fr);function gI(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function cve(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,c,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new ls(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new ka(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function uve(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof A0){let c=o.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new ls(o.from,o.to,o.style)))}function IM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,h=n.matchType(c.type);if(!h)o.push(new Ar(a,d,me.empty));else{n=h;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||t.step(new ls(a,d,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new me(J.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new Ar(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(J.empty,!0);t.replace(a,a,new me(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function dve(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function uh(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!dve(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function hve(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,c=a,d=J.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=J.from(n.node(m).copy(d)),h++):l--;let f=J.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=J.from(i.node(m).copy(f)),p++):c++;t.step(new Fr(l,c,o,a,new me(d.append(f),h,p),d.size-h,!0))}function RM(t,e,r=null,n=t){let i=fve(t,e),s=i&&pve(n,e);return s?i.map(_4).concat({type:e,attrs:r}).concat(s.map(_4)):null}function _4(t){return{type:t,attrs:null}}function fve(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function pve(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function mve(t,e,r){let n=J.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=J.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Fr(i,s,i,s,new me(n,0,0),r.length,!0))}function gve(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&yve(t.doc,t.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&Yre(t,o,a,s),IM(t,t.mapping.slice(s).map(a,1),n,void 0,c===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new Fr(h,f,h+1,f-1,new me(J.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&Gre(t,o,a,s),!1}})}function Gre(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Yre(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function yve(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function vve(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Fr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new me(J.from(o),0,0),1,!0))}function bo(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>s;c--,d--){let h=i.node(c),f=i.index(c);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function bve(t,e,r=1,n){let i=t.doc.resolve(e),s=J.empty,o=J.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=J.from(i.node(a).copy(s));let d=n&&n[c];o=J.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new Ar(e,e,new me(s.append(o),r,r),!0))}function cl(t,e){let r=t.resolve(e),n=r.index();return Qre(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function xve(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function Qre(t,e){return!!(t&&e&&!t.isLeaf&&xve(t,e))}function D0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&Qre(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function wve(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);Yre(t,d.node(),d.before(),a)}o.inlineContent&&IM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),c=l.map(e-r);if(t.step(new Ar(c,l.map(e+r,-1),me.empty,!0)),n===!0){let d=t.doc.resolve(c);Gre(t,d.node(),d.before(),t.steps.length)}return t}function Sve(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function Xre(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),d=!1;if(s==1)d=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&c.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function $0(t,e,r=e,n=me.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return Jre(i,s,n)?new Ar(e,r,n):new _ve(i,s,n).fit()}function Jre(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class _ve{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=J.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=J.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new me(s,o,a);return e>-1?new Fr(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Ar(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=M1(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,h=null;if(r==1&&(o?c.matchType(o.type)||(h=c.fillBefore(J.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=M1(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new me(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=M1(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new me(pf(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new me(pf(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),v=h.matchType(g.type);if(!v)break;c++,(c>1||l==0||g.content.size)&&(h=v,d.push(Zre(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=mf(this.placed,r,J.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<p;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?me.empty:new me(pf(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new me(pf(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!A1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=A1(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=A1(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=mf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=mf(this.placed,this.depth,J.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(J.empty,!0);r.childCount&&(this.placed=mf(this.placed,this.frontier.length,r))}}function pf(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(pf(t.firstChild.content,e-1,r)))}function mf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(mf(t.lastChild.content,e-1,r)))}function M1(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function Zre(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,Zre(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(J.empty,!0)))),t.copy(n)}function A1(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!Eve(r,s.content,o)?a:null}function Eve(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Cve(t){return t.spec.defining||t.spec.definingForContent}function Nve(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(Jre(i,s,n))return t.step(new Ar(e,r,n));let o=tne(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=c[f],m=Cve(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let v=o[(g+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let b=i.node(v-1),w=i.index(v-1);if(b.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(v),y?s.after(v):r,new me(ene(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function ene(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(ene(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(J.empty,!0))}return t}function kve(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Sve(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new me(J.from(n),0,0))}function Tve(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=tne(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function tne(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class od extends pn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return hr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return hr.fromReplace(e,this.pos,this.pos+1,new me(J.from(i),0,r.isLeaf?0:1))}getMap(){return fi.empty}invert(e){return new od(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new od(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new od(r.pos,r.attr,r.value)}}pn.jsonID("attr",od);class yp extends pn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return hr.ok(n)}getMap(){return fi.empty}invert(e){return new yp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new yp(r.attr,r.value)}}pn.jsonID("docAttr",yp);let Ld=class extends Error{};Ld=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Ld.prototype=Object.create(Error.prototype);Ld.prototype.constructor=Ld;Ld.prototype.name="TransformError";class rne{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new gp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Ld(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=me.empty){let i=$0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new me(J.from(n),0,0))}delete(e,r){return this.replace(e,r,me.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return Nve(this,e,r,n),this}replaceRangeWith(e,r,n){return kve(this,e,r,n),this}deleteRange(e,r){return Tve(this,e,r),this}lift(e,r){return hve(this,e,r),this}join(e,r=1){return wve(this,e,r),this}wrap(e,r){return mve(this,e,r),this}setBlockType(e,r=e,n,i=null){return gve(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return vve(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new od(e,r,n)),this}setDocAttribute(e,r){return this.step(new yp(e,r)),this}addNodeMark(e,r){return this.step(new Ta(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof xt)r.isInSet(n.marks)&&this.step(new Pc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Pc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return bve(this,e,r,n),this}addMark(e,r,n){return cve(this,e,r,n),this}removeMark(e,r,n){return uve(this,e,r,n),this}clearIncompatible(e,r,n){return IM(this,e,r,n),this}}const D1=Object.create(null);class He{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new Ove(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=me.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?me.empty:r),a==0&&N4(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),c=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,r),N4(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new De(e):ku(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?ku(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):ku(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new gi(e.node(0))}static atStart(e){return ku(e,e,0,0,1)||new gi(e)}static atEnd(e){return ku(e,e,e.content.size,e.childCount,-1)||new gi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=D1[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in D1)throw new RangeError("Duplicate use of selection JSON ID "+e);return D1[e]=r,r.prototype.jsonID=e,r}getBookmark(){return De.between(this.$anchor,this.$head).getBookmark()}}He.prototype.visible=!0;class Ove{constructor(e,r){this.$from=e,this.$to=r}}let E4=!1;function C4(t){!E4&&!t.parent.inlineContent&&(E4=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class De extends He{constructor(e,r=e){C4(e),C4(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return He.near(n);let i=e.resolve(r.map(this.anchor));return new De(i.parent.inlineContent?i:n,n)}replace(e,r=me.empty){if(super.replace(e,r),r==me.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof De&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new F0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new De(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=He.findFrom(r,n,!0)||He.findFrom(r,-n,!0);if(s)r=s.$head;else return He.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(He.findFrom(e,-n,!0)||He.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new De(e,r)}}He.jsonID("text",De);class F0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new F0(e.map(this.anchor),e.map(this.head))}resolve(e){return De.between(e.resolve(this.anchor),e.resolve(this.head))}}class je extends He{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?He.near(s):new je(s)}content(){return new me(J.from(this.node),0,0)}eq(e){return e instanceof je&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new MM(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new je(e.resolve(r.anchor))}static create(e,r){return new je(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}je.prototype.visible=!1;He.jsonID("node",je);class MM{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new F0(n,n):new MM(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&je.isSelectable(n)?new je(r):He.near(r)}}class gi extends He{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=me.empty){if(r==me.empty){e.delete(0,e.doc.content.size);let n=He.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new gi(e)}map(e){return new gi(e)}eq(e){return e instanceof gi}getBookmark(){return jve}}He.jsonID("all",gi);const jve={map(){return this},resolve(t){return new gi(t)}};function ku(t,e,r,n,i,s=!1){if(e.inlineContent)return De.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&je.isSelectable(a))return je.create(t,r-(i<0?a.nodeSize:0))}else{let l=ku(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function N4(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof Ar||i instanceof Fr))return;let s=t.mapping.maps[n],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(He.near(t.doc.resolve(o),r))}const k4=1,_g=2,T4=4;class Pve extends rne{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|k4)&~_g,this.storedMarks=null,this}get selectionSet(){return(this.updated&k4)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=_g,this}ensureMarks(e){return xt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&_g)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~_g,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||xt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(He.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=T4,this}get scrolledIntoView(){return(this.updated&T4)>0}}function O4(t,e){return!e||!t?t:t.bind(e)}class gf{constructor(e,r,n){this.name=e,this.init=O4(r.init,n),this.apply=O4(r.apply,n)}}const Ive=[new gf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new gf("selection",{init(t,e){return t.selection||He.atStart(e.doc)},apply(t){return t.selection}}),new gf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new gf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class $1{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Ive.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new gf(n.key,n.spec.state,n))})}}class Uu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Uu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new Pve(this)}static create(e){let r=new $1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Uu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new $1(this.schema,e.plugins),n=r.fields,i=new Uu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new $1(e.schema,e.plugins),s=new Uu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ba.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=He.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function nne(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=nne(i,e,{})),r[n]=i}return r}class Vt{constructor(e){this.spec=e,this.props={},e.props&&nne(e.props,this,this.props),this.key=e.key?e.key.key:ine("plugin")}getState(e){return e[this.key]}}const F1=Object.create(null);function ine(t){return t in F1?t+"$"+ ++F1[t]:(F1[t]=0,t+"$")}class Or{constructor(e="key"){this.key=ine(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const AM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function sne(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const one=(t,e,r)=>{let n=sne(t,r);if(!n)return!1;let i=DM(n);if(!i){let o=n.blockRange(),a=o&&uh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(mne(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Bd(s,"end")||je.isSelectable(s)))for(let o=n.depth;;o--){let a=$0(t.doc,n.before(o),n.after(o),me.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Bd(s,"end")?He.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):je.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Rve=(t,e,r)=>{let n=sne(t,r);if(!n)return!1;let i=DM(n);return i?ane(t,i,e):!1},Mve=(t,e,r)=>{let n=cne(t,r);if(!n)return!1;let i=$M(n);return i?ane(t,i,e):!1};function ane(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=$0(t.doc,s,l,me.empty);if(!c||c.from!=s||c instanceof Ar&&c.slice.size>=l-s)return!1;if(r){let d=t.tr.step(c);d.setSelection(De.create(d.doc,s)),r(d.scrollIntoView())}return!0}function Bd(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const lne=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=DM(n)}let o=s&&s.nodeBefore;return!o||!je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(je.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function DM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function cne(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const une=(t,e,r)=>{let n=cne(t,r);if(!n)return!1;let i=$M(n);if(!i)return!1;let s=i.nodeAfter;if(mne(t,i,e,1))return!0;if(n.parent.content.size==0&&(Bd(s,"start")||je.isSelectable(s))){let o=$0(t.doc,n.before(),n.after(),me.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Bd(s,"start")?He.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):je.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},dne=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=$M(n)}let o=s&&s.nodeAfter;return!o||!je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(je.create(t.doc,s.pos)).scrollIntoView()),!0)};function $M(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const Ave=(t,e)=>{let r=t.selection,n=r instanceof je,i;if(n){if(r.node.isTextblock||!cl(t.doc,r.from))return!1;i=r.from}else if(i=D0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(je.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Dve=(t,e)=>{let r=t.selection,n;if(r instanceof je){if(r.node.isTextblock||!cl(t.doc,r.to))return!1;n=r.to}else if(n=D0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},$ve=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&uh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},hne=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function FM(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const Fve=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=FM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(He.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},fne=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof gi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=FM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(De.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},pne=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(bo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&uh(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function qve(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof je&&e.selection.node.isBlock)return!n.parentOffset||!bo(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),c=n.start(p)==n.pos-(n.depth-p),a=FM(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof De||e.selection instanceof gi)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=bo(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=bo(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&c&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const Lve=qve(),Bve=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(je.create(t.doc,i))),!0)};function zve(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||cl(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function mne(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&zve(t,e,r))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=J.empty;for(let y=o.length-1;y>=0;y--)m=J.from(o[y].create(null,m));m=J.from(i.copy(m));let g=t.tr.step(new Fr(e.pos-1,p,e.pos,p,new me(m,1,0),o.length,!0)),v=g.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&cl(g.doc,v.pos)&&g.join(v.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:He.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&uh(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&Bd(s,"start",!0)&&Bd(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=J.empty;for(let w=m.length-1;w>=0;w--)y=J.from(m[w].copy(y));let b=t.tr.step(new Fr(e.pos-m.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new me(y,m.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function gne(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(De.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Vve=gne(-1),Uve=gne(1);function Hve(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&RM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function j4(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(c),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function qM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}qM(AM,one,lne);qM(AM,une,dne);qM(hne,fne,pne,Lve);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Wve(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return Kve(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function Kve(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new nv(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new nv(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=RM(s,r,n,e);return a?(t&&Gve(t,e,a,i,r),!0):!1}function Gve(t,e,r,n,i){let s=J.empty;for(let d=r.length-1;d>=0;d--)s=J.from(r[d].type.create(r[d].attrs,s));t.step(new Fr(e.start-(n?2:0),e.end,e.start,e.end,new me(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),c=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&bo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function Yve(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?Qve(e,r,t,s):Xve(e,r,s):!0:!1}}function Qve(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Fr(s-1,o,s,o,new me(J.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new nv(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=uh(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return cl(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function Xve(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?J.empty:J.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new Fr(h-(a?1:0),f+(l?1:0),h+1,f-1,new me((a?J.empty:J.from(i.copy(J.empty))).append(l?J.empty:J.from(i.copy(J.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function Jve(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,d=J.from(c?t.create():null),h=new me(J.from(t.create(null,J.from(a.type.create(null,d)))),c?3:1,0),f=s.start,p=s.end;r(e.tr.step(new Fr(f-(c?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const Xr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},zd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let yI=null;const so=function(t,e,r){let n=yI||(yI=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},Zve=function(){yI=null},Ic=function(t,e,r,n){return r&&(P4(t,e,r,n,-1)||P4(t,e,r,n,1))},e0e=/^(img|br|input|textarea|hr)$/i;function P4(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Ai(t))){let o=t.parentNode;if(!o||o.nodeType!=1||im(t)||e0e.test(t.nodeName)||t.contentEditable=="false")return!1;e=Xr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Ai(t):0}else return!1}}function Ai(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function t0e(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ai(t)}else if(t.parentNode&&!im(t))e=Xr(t),t=t.parentNode;else return null}}function r0e(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!im(t))e=Xr(t)+1,t=t.parentNode;else return null}}function n0e(t,e,r){for(let n=e==0,i=e==Ai(t);n||i;){if(t==r)return!0;let s=Xr(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Ai(t)}}function im(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const q0=function(t){return t.focusNode&&Ic(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Rl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function i0e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function s0e(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Ai(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Ai(n.startContainer),n.startOffset)}}}const Bs=typeof navigator<"u"?navigator:null,I4=typeof document<"u"?document:null,ul=Bs&&Bs.userAgent||"",vI=/Edge\/(\d+)/.exec(ul),yne=/MSIE \d/.exec(ul),bI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ul),ei=!!(yne||bI||vI),Va=yne?document.documentMode:bI?+bI[1]:vI?+vI[1]:0,qi=!ei&&/gecko\/(\d+)/i.test(ul);qi&&+(/Firefox\/(\d+)/.exec(ul)||[0,0])[1];const xI=!ei&&/Chrome\/(\d+)/.exec(ul),Dr=!!xI,vne=xI?+xI[1]:0,fn=!ei&&!!Bs&&/Apple Computer/.test(Bs.vendor),Vd=fn&&(/Mobile\/\w+/.test(ul)||!!Bs&&Bs.maxTouchPoints>2),ji=Vd||(Bs?/Mac/.test(Bs.platform):!1),bne=Bs?/Win/.test(Bs.platform):!1,po=/Android \d/.test(ul),sm=!!I4&&"webkitFontSmoothing"in I4.documentElement.style,o0e=sm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function a0e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Zs(t,e){return typeof t=="number"?t:t[e]}function l0e(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function R4(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=zd(o);continue}let a=o,l=a==s.body,c=l?a0e(s):l0e(a),d=0,h=0;if(e.top<c.top+Zs(n,"top")?h=-(c.top-e.top+Zs(i,"top")):e.bottom>c.bottom-Zs(n,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Zs(i,"top")-c.top:e.bottom-c.bottom+Zs(i,"bottom")),e.left<c.left+Zs(n,"left")?d=-(c.left-e.left+Zs(i,"left")):e.right>c.right-Zs(n,"right")&&(d=e.right-c.right+Zs(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:zd(o)}}function c0e(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:xne(t.dom)}}function xne(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=zd(n));return e}function u0e({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;wne(r,n==0?0:n-e)}function wne(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let wu=null;function d0e(t){if(t.setActive)return t.setActive();if(wu)return t.focus(wu);let e=xne(t);t.focus(wu==null?{get preventScroll(){return wu={preventScroll:!0},!0}}:void 0),wu||(wu=!1,wne(e,0))}function Sne(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=so(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?h0e(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:Sne(r,i)}function h0e(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=ea(n,1);if(o.top!=o.bottom&&LM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function LM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function f0e(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function p0e(t,e,r){let{node:n,offset:i}=Sne(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function m0e(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function _ne(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(LM(e,c))return _ne(o,e,c)}}if((s=(s+1)%n)==i)break}return t}function g0e(t,e){let r=t.dom.ownerDocument,n,i=0,s=s0e(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!LM(e,c)||(o=_ne(t.dom,e,c),!o))return null}if(fn)for(let c=o;n&&c;c=zd(c))c.draggable&&(n=void 0);if(o=f0e(o,e),n){if(qi&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;sm&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=m0e(t,n,i,e))}a==null&&(a=p0e(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function M4(t){return t.top<t.bottom||t.left<t.right}function ea(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(M4(n))return n}return Array.prototype.find.call(r,M4)||t.getBoundingClientRect()}const y0e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ene(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=sm||qi;if(n.nodeType==3)if(o&&(y0e.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=ea(so(n,i,i),r);if(qi&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=ea(so(n,i-1,i-1),-1);if(c.top==l.top){let d=ea(so(n,i,i+1),-1);if(d.top!=l.top)return tf(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,tf(ea(so(n,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Ai(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return q1(l.getBoundingClientRect(),!1)}if(s==null&&i<Ai(n)){let l=n.childNodes[i];if(l.nodeType==1)return q1(l.getBoundingClientRect(),!0)}return q1(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Ai(n))){let l=n.childNodes[i-1],c=l.nodeType==3?so(l,Ai(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return tf(ea(c,1),!1)}if(s==null&&i<Ai(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?so(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return tf(ea(c,-1),!0)}return tf(ea(n.nodeType==3?so(n):n,-r),r>=0)}function tf(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function q1(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function Cne(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function v0e(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return Cne(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Ene(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=so(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const b0e=/[\u0590-\u08ac]/;function x0e(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!b0e.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:Cne(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(d,h),l&&(l!=d||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),v}):n.pos==n.start()||n.pos==n.end()}let A4=null,D4=null,$4=!1;function w0e(t,e,r){return A4==e&&D4==r?$4:(A4=e,D4=r,$4=r=="up"||r=="down"?v0e(t,e,r):x0e(t,e,r))}const Li=0,F4=1,Ll=2,zs=3;class om{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Li,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>Xr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof kne){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof Nne&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?Xr(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?Xr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let d=o+l.border;if(e>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Xr(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=Xr(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(s>m&&o<v)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=v}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((qi||fn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:Xr(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(qi&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&fn)&&Ic(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Ic(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((c.extend||e==r)&&!(h&&qi)){c.collapse(a.node,a.offset);try{e!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?Ll:F4,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=zs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ll:zs}n=o}this.dirty=Ll}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Ll:F4;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Nne extends om{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Li&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class S0e extends om{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Rc extends om{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Gc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Rc(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&zs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=zs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Li){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Li}}slice(e,r,n){let i=Rc.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=SI(s,r,o,n)),e>0&&(s=SI(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ua extends om{constructor(e,r,n,i,s,o,a,l,c){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,h=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=Gc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=jne(d,n,r),c?l=new _0e(e,r,n,i,d,h||null,f,c,s,o+1):r.isText?new L0(e,r,n,i,d,f,s):new Ua(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>J.empty)}return e}matchesNode(e,r,n){return this.dirty==Li&&e.eq(this.node)&&sv(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new C0e(this,o&&o.node,e);T0e(this.node,this.innerDeco,(c,d,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?xt.none:this.node.child(d).marks,n,e),l.placeWidget(c,e,i)},(c,d,h,f)=>{l.syncToMarks(c.marks,n,e);let p;l.findNodeMatch(c,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,h,p,e)||l.updateNextNode(c,d,h,e,f,i)||l.addNode(c,d,h,e,i),i+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ll)&&(o&&this.protectLocalComposition(e,o),Tne(this.contentDOM,this.children,e),Vd&&O0e(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof De)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=j0e(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new S0e(this,s,r,i);e.input.compositionNodes.push(o),this.children=SI(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==zs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Li}updateOuterDeco(e){if(sv(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=One(this.dom,this.nodeDOM,wI(this.outerDeco,this.node,r),wI(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function q4(t,e,r,n,i){jne(n,e,t);let s=new Ua(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class L0 extends Ua{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==zs||this.dirty!=Li&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Li||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Li,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new L0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=zs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class kne extends om{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Li&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class _0e extends Ua{constructor(e,r,n,i,s,o,a,l,c,d){super(e,r,n,i,s,o,a,c,d),this.spec=l}update(e,r,n,i){if(this.dirty==zs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Tne(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=L4(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Rc){let l=n?n.previousSibling:t.lastChild;Tne(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=L4(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const Pf=function(t){t&&(this.nodeName=t)};Pf.prototype=Object.create(null);const Bl=[new Pf];function wI(t,e,r){if(t.length==0)return Bl;let n=r?Bl[0]:new Pf,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new Pf(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new Pf(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function One(t,e,r,n){if(r==Bl&&n==Bl)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Bl[0]),i=l}E0e(i,a||Bl[0],o)}return i}function E0e(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function jne(t,e,r){return One(t,t,Bl,wI(e,r,t.nodeType!=1))}function sv(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function L4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class C0e{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=N0e(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Li,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Rc.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==zs&&o.dom==o.contentDOM&&(o.dirty=Ll),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ua){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=zs&&sv(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Ll,h.updateChildren(i,o+1),h.dirty=Li),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!sv(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ua.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Ua.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Nne(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Rc;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof L0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((fn||Dr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new kne(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function N0e(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof Rc)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function k0e(t,e){return t.type.side-e.type.side}function T0e(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);n(d,i,e.forChild(s,d),c),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(d?(h||(h=[d])).push(v):d=v)}if(d)if(h){h.sort(k0e);for(let v=0;v<h.length;v++)r(h[v],c,!!l)}else r(d,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let v=m;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<m&&(l=f.cut(v-s),f=f.cut(0,v-s),m=v,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function O0e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function j0e(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=r)return a+c;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function SI(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=r||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-c,l.size,n)))}return s}function BM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(q0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&je.isSelectable(h)&&i.parent&&!(h.isInline&&n0e(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new je(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=zM(t,d,a,h)}return c}function Pne(t){return t.editable?t.hasFocus():Rne(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function xo(t,e=!1){let r=t.state.selection;if(Ine(t,r),!!Pne(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Dr){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Ic(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)I0e(t);else{let{anchor:n,head:i}=r,s,o;B4&&!(r instanceof De)&&(r.$from.parent.inlineContent||(s=z4(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=z4(t,r.to))),t.docView.setSelection(n,i,t,e),B4&&(s&&V4(s),o&&V4(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&P0e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const B4=fn||Dr&&vne<63;function z4(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(fn&&i&&i.contentEditable=="false")return L1(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return L1(i);if(s)return L1(s)}}function L1(t){return t.contentEditable="true",fn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function V4(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function P0e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Pne(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function I0e(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,Xr(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&ei&&Va<=11&&(r.disabled=!0,r.disabled=!1)}function Ine(t,e){if(e instanceof je){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(U4(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else U4(t)}function U4(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function zM(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||De.between(e,r,n)}function H4(t){return t.editable&&!t.hasFocus()?!1:Rne(t)}function Rne(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function R0e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Ic(e.node,e.offset,r.anchorNode,r.anchorOffset)}function _I(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&He.findFrom(s,e)}function ia(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function W4(t,e,r){let n=t.state.selection;if(n instanceof De)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ia(t,new De(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=_I(t.state,e);return i&&i instanceof je?ia(t,i):!1}else if(!(ji&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?je.isSelectable(s)?ia(t,new je(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):sm?ia(t,new De(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof je&&n.node.isInline)return ia(t,new De(e>0?n.$to:n.$from));{let i=_I(t.state,e);return i?ia(t,i):!1}}}function ov(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function If(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Su(t,e){return e<0?M0e(t):A0e(t)}function M0e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(qi&&r.nodeType==1&&n<ov(r)&&If(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(If(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(Mne(r))break;{let a=r.previousSibling;for(;a&&If(a,-1);)i=r.parentNode,s=Xr(a),a=a.previousSibling;if(a)r=a,n=ov(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?EI(t,r,n):i&&EI(t,i,s)}function A0e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=ov(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(If(a,1))s=r,o=++n;else break}else{if(Mne(r))break;{let a=r.nextSibling;for(;a&&If(a,1);)s=a.parentNode,o=Xr(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=ov(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&EI(t,s,o)}function Mne(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function D0e(t,e){for(;t&&e==t.childNodes.length&&!im(t);)e=Xr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function $0e(t,e){for(;t&&!e&&!im(t);)e=Xr(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function EI(t,e,r){if(e.nodeType!=3){let s,o;(o=D0e(e,r))?(e=o,r=0):(s=$0e(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(q0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&xo(t)},50)}function K4(t,e){let r=t.state.doc.resolve(e);if(!(Dr||bne)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function G4(t,e,r){let n=t.state.selection;if(n instanceof De&&!n.empty||r.indexOf("s")>-1||ji&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=_I(t.state,e);if(o&&o instanceof je)return ia(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof gi?He.near(o,e):He.findFrom(o,e);return a?ia(t,a):!1}return!1}function Y4(t,e){if(!(t.state.selection instanceof De))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Q4(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function F0e(t){if(!fn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;Q4(t,n,"true"),setTimeout(()=>Q4(t,n,"false"),20)}return!1}function q0e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function L0e(t,e){let r=e.keyCode,n=q0e(e);if(r==8||ji&&r==72&&n=="c")return Y4(t,-1)||Su(t,-1);if(r==46&&!e.shiftKey||ji&&r==68&&n=="c")return Y4(t,1)||Su(t,1);if(r==13||r==27)return!0;if(r==37||ji&&r==66&&n=="c"){let i=r==37?K4(t,t.state.selection.from)=="ltr"?-1:1:-1;return W4(t,i,n)||Su(t,i)}else if(r==39||ji&&r==70&&n=="c"){let i=r==39?K4(t,t.state.selection.from)=="ltr"?1:-1:1;return W4(t,i,n)||Su(t,i)}else{if(r==38||ji&&r==80&&n=="c")return G4(t,-1,n)||Su(t,-1);if(r==40||ji&&r==78&&n=="c")return F0e(t)||G4(t,1,n)||Su(t,1);if(n==(ji?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function VM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Gc.fromSchema(t.state.schema),a=Lne(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,d,h=0;for(;c&&c.nodeType==1&&(d=qne[c.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function Ane(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new me(J.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Gc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=U0e(r),sm&&H0e(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||za.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!B0e.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=W0e(X4(a,+d[1],+d[2]),d[4]);else if(a=me.maxOpen(z0e(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=X4(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const B0e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function z0e(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&$ne(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Fne(o[o.length-1],s.length));let d=Dne(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return J.from(o)}return t}function Dne(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,J.from(t));return t}function $ne(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=$ne(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(J.from(Dne(r,t,i+1))))}}function Fne(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,Fne(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(J.empty,!0);return t.copy(r.append(n))}function CI(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=CI(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(J.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function X4(t,e,r){return e<t.openStart&&(t=new me(CI(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new me(CI(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const qne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let J4=null;function Lne(){return J4||(J4=document.implementation.createHTMLDocument("title"))}let B1=null;function V0e(t){let e=window.trustedTypes;return e?(B1||(B1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),B1.createHTML(t)):t}function U0e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=Lne().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&qne[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=V0e(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function H0e(t){let e=t.querySelectorAll(Dr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function W0e(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=J.from(l.create(n[a+1],i)),s++,o++}return new me(i,s,o)}const On={},jn={},K0e={touchstart:!0,touchmove:!0};class G0e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Y0e(t){for(let e in On){let r=On[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{X0e(t,n)&&!UM(t,n)&&(t.editable||!(n.type in jn))&&r(t,n)},K0e[e]?{passive:!0}:void 0)}fn&&t.dom.addEventListener("input",()=>null),NI(t)}function Oa(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Q0e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function NI(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>UM(t,n))})}function UM(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function X0e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function J0e(t,e){!UM(t,e)&&On[e.type]&&(t.editable||!(e.type in jn))&&On[e.type](t,e)}jn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!zne(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(po&&Dr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Vd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Rl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||L0e(t,r)?r.preventDefault():Oa(t,"key")};jn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};jn.keypress=(t,e)=>{let r=e;if(zne(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||ji&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof De)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function B0(t){return{left:t.clientX,top:t.clientY}}function Z0e(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function HM(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function ad(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function ebe(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&je.isSelectable(n)?(ad(t,new je(r)),!0):!1}function tbe(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof je&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(je.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(ad(t,je.create(t.state.doc,i)),!0):!1}function rbe(t,e,r,n,i){return HM(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?tbe(t,r):ebe(t,r))}function nbe(t,e,r,n){return HM(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function ibe(t,e,r,n){return HM(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||sbe(t,r,n)}function sbe(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(ad(t,De.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)ad(t,De.create(n,a+1,a+1+o.content.size));else if(je.isSelectable(o))ad(t,je.create(n,a));else continue;return!0}}function WM(t){return av(t)}const Bne=ji?"metaKey":"ctrlKey";On.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=WM(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&Z0e(r,t.input.lastClick)&&!r[Bne]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(B0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new obe(t,o,r,!!n)):(s=="doubleClick"?nbe:ibe)(t,o.pos,o.inside,r)?r.preventDefault():Oa(t,"pointer"))};class obe{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Bne],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof je&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Oa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>xo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(B0(e))),this.updateAllowDefault(e),this.allowDefault||!r?Oa(this.view,"pointer"):rbe(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||fn&&this.mightDrag&&!this.mightDrag.node.isAtom||Dr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(ad(this.view,He.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Oa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Oa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}On.touchstart=t=>{t.input.lastTouch=Date.now(),WM(t),Oa(t,"pointer")};On.touchmove=t=>{t.input.lastTouch=Date.now(),Oa(t,"pointer")};On.contextmenu=t=>WM(t);function zne(t,e){return t.composing?!0:fn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const abe=po?5e3:-1;jn.compositionstart=jn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof De&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||Dr&&bne&&lbe(t)))t.markCursor=t.state.storedMarks||r.marks(),av(t,!0),t.markCursor=null;else if(av(t,!e.selection.empty),qi&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}Vne(t,abe)};function lbe(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}jn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Vne(t,20))};function Vne(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>av(t),e))}function Une(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=ube());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function cbe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=t0e(e.focusNode,e.focusOffset),n=r0e(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function ube(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function av(t,e=!1){if(!(po&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Une(t),e||t.docView&&t.docView.dirty){let r=BM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function dbe(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const vp=ei&&Va<15||Vd&&o0e<604;On.copy=jn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=vp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=VM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):dbe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function hbe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function fbe(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?bp(t,n.value,null,i,e):bp(t,n.textContent,n.innerHTML,i,e)},50)}function bp(t,e,r,n,i){let s=Ane(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||me.empty)))return!0;if(!s)return!1;let o=hbe(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Hne(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}jn.paste=(t,e)=>{let r=e;if(t.composing&&!po)return;let n=vp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&bp(t,Hne(n),n.getData("text/html"),i,r)?r.preventDefault():fbe(t,r)};class Wne{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const pbe=ji?"altKey":"ctrlKey";function Kne(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[pbe]}On.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(B0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof je?i.to-1:i.to))){if(n&&n.mightDrag)o=je.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=je.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:d}=VM(t,a);(!r.dataTransfer.files.length||!Dr||vne>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(vp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",vp||r.dataTransfer.setData("text/plain",c),t.dragging=new Wne(d,Kne(t,r),o)};On.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};jn.dragover=jn.dragenter=(t,e)=>e.preventDefault();jn.drop=(t,e)=>{try{mbe(t,e,t.dragging)}finally{t.dragging=null}};function mbe(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(B0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=Ane(t,Hne(e.dataTransfer),vp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&Kne(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||me.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?Xre(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&je.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new je(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,v,y)=>p=y),l.setSelection(zM(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}On.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&xo(t)},20))};On.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};On.beforeinput=(t,e)=>{if(Dr&&po&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Rl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in jn)On[t]=jn[t];function xp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class lv{constructor(e,r){this.toDOM=e,this.spec=r||lc,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new kn(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof lv&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&xp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ha{constructor(e,r){this.attrs=e,this.spec=r||lc}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new kn(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Ha&&xp(this.attrs,e.attrs)&&xp(this.spec,e.spec)}static is(e){return e.type instanceof Ha}destroy(){}}class KM{constructor(e,r){this.attrs=e,this.spec=r||lc}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new kn(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof KM&&xp(this.attrs,e.attrs)&&xp(this.spec,e.spec)}destroy(){}}class kn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new kn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new kn(e,e,new lv(r,n))}static inline(e,r,n,i){return new kn(e,r,new Ha(n,i))}static node(e,r,n,i){return new kn(e,r,new KM(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ha}get widget(){return this.type instanceof lv}}const Tu=[],lc={};class qt{constructor(e,r){this.local=e.length?e:Tu,this.children=r.length?r:Tu}static create(e,r){return r.length?cv(r,e,0,lc):ln}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==ln||e.maps.length==0?this:this.mapInner(e,r,0,0,n||lc)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?gbe(this.children,o||[],e,r,n,i,s):o?new qt(o.sort(cc),Tu):ln}add(e,r){return r.length?this==ln?qt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let c=l+n,d;if(d=Yne(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,c+1):i.splice(s,0,l,l+a.nodeSize,cv(d,a,c+1,lc)),s+=3}});let o=Gne(s?Qne(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new qt(o.length?this.local.concat(o).sort(cc):this.local,i||this.children)}remove(e){return e.length==0||this==ln?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=ln?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new qt(i,n):ln}forChild(e,r){if(this==ln)return this;if(r.isLeaf)return qt.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ha){let c=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let a=new qt(i.sort(cc),Tu);return n?new da([a,n]):a}return n||ln}eq(e){if(this==e)return!0;if(!(e instanceof qt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return GM(this.localsInner(e))}localsInner(e){if(this==ln)return Tu;if(e.inlineContent||!this.local.some(Ha.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ha||r.push(this.local[n]);return r}forEachSet(e){e(this)}}qt.empty=new qt([],[]);qt.removeOverlap=GM;const ln=qt.empty;class da{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,lc));return da.from(n)}forChild(e,r){if(r.isLeaf)return qt.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=ln&&(s instanceof da?n=n.concat(s.members):n.push(s))}return da.from(n)}eq(e){if(!(e instanceof da)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?GM(n?r:r.sort(cc)):Tu}static from(e){switch(e.length){case 0:return ln;case 1:return e[0];default:return new da(e.every(r=>r instanceof qt)?e:e.reduce((r,n)=>r.concat(n instanceof qt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function gbe(t,e,r,n,i,s,o){let a=t.slice();for(let c=0,d=s;c<r.maps.length;c++){let h=0;r.maps[c].forEach((f,p,m,g)=>{let v=g-m-(p-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+d-h)continue;let w=a[y]+d-h;p>=w?a[y+1]=f<=w?-2:-1:f>=d&&v&&(a[y]+=v,a[y+1]+=v)}h+=v}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=r.map(t[c]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[c+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),v=n.maybeChild(m);if(v&&g==h&&g+v.nodeSize==p){let y=a[c+2].mapInner(r,v,d+1,t[c]+s+1,o);y!=ln?(a[c]=h,a[c+1]=p,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=ybe(a,t,e,r,i,s,o),d=cv(c,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new qt(e.sort(cc),a)}function Gne(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new kn(i.from+e,i.to+e,i.type))}return r}function ybe(t,e,r,n,i,s,o){function a(l,c){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,c);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function Yne(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function Qne(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function cv(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let c=Yne(t,a,l+r);if(c){s=!0;let d=cv(c,a,r+l+1,n);d!=ln&&i.push(l,l+a.nodeSize,d)}});let o=Gne(s?Qne(t):t,-r).sort(cc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new qt(o,i):ln}function cc(t,e){return t.from-e.from||t.to-e.to}function GM(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),Z4(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),Z4(e,i,n.copy(s.from,n.to)));break}}}return e}function Z4(t,e,r){for(;e<t.length&&cc(r,t[e])>0;)e++;t.splice(e,0,r)}function z1(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=ln&&e.push(n)}),t.cursorWrapper&&e.push(qt.create(t.state.doc,[t.cursorWrapper.deco])),da.from(e)}const vbe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bbe=ei&&Va<=11;class xbe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class wbe{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new xbe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);ei&&Va<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),bbe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,vbe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(H4(this.view)){if(this.suppressingSelectionUpdates)return xo(this.view);if(ei&&Va<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ic(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=zd(s))r.add(s);for(let s=e.anchorNode;s;s=zd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&H4(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(qi&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||Ebe(e,h)!=p)&&f.remove()}}}else if((Dr||fn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&q0(n)&&(c=BM(e))&&c.eq(He.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,xo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Sbe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||xo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ei&&Va<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Xr(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Xr(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let e5=new WeakMap,t5=!1;function Sbe(t){if(!e5.has(t)&&(e5.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=qi,t5)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),t5=!0}}function r5(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Ic(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function _be(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return r5(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?r5(t,r):null}function Ebe(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function Cbe(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],q0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Dr&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=n.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=v;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||za.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Nbe,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function Nbe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(fn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||fn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const kbe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Tbe(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=BM(t,C);if(E&&!t.state.selection.eq(E)){if(Dr&&po&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",T=>T(t,Rl(13,"Enter"))))return;let N=t.state.tr.setSelection(E);C=="pointer"?N.setMeta("pointer",!0):C=="key"&&N.scrollIntoView(),s&&N.setMeta("composition",s),t.dispatch(N)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,c=Cbe(t,e,r),d=t.state.doc,h=d.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=Pbe(h.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(Vd&&t.input.lastIOSEnter>Date.now()-225||po)&&i.some(C=>C.nodeType==1&&!kbe.test(C.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",C=>C(t,Rl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof De&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let C=n5(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let E=t.state.tr.setSelection(C);s&&E.setMeta("composition",s),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof De&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ei&&Va<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),y=d.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if((Vd&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!b&&g.pos<c.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(c.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,Rl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&jbe(d,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",C=>C(t,Rl(8,"Backspace")))){po&&Dr&&t.domObserver.suppressSelectionUpdates();return}Dr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),po&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Rl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=C=>{let E=C||t.state.tr.replace(w,x,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let N=n5(t,E.doc,c.sel);N&&!(Dr&&t.composing&&N.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(N.head==w||N.head==E.mapping.map(x)-1)||ei&&N.empty&&N.head==w)&&E.setSelection(N)}return s&&E.setMeta("composition",s),E.scrollIntoView()},_;if(b)if(g.pos==v.pos){ei&&Va<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>xo(t),20));let C=S(t.state.tr.delete(w,x)),E=d.resolve(m.start).marksAcross(d.resolve(m.endA));E&&C.ensureMarks(E),t.dispatch(C)}else if(m.endA==m.endB&&(_=Obe(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let C=S(t.state.tr);_.type=="add"?C.addMark(w,x,_.mark):C.removeMark(w,x,_.mark),t.dispatch(C)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let C=g.parent.textBetween(g.parentOffset,v.parentOffset),E=()=>S(t.state.tr.insertText(C,w,x));t.someProp("handleTextInput",N=>N(t,w,x,C,E))||t.dispatch(E())}else t.dispatch(S());else t.dispatch(S())}function n5(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:zM(t,e.resolve(r.anchor),e.resolve(r.head))}function Obe(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(J.from(c).eq(t))return{mark:a,type:o}}function jbe(t,e,r,n,i){if(r-e<=i.pos-n.pos||V1(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(V1(s,!0,!0));return!o.parent.isTextblock||o.pos>r||V1(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function V1(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Pbe(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&i5(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&i5(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function i5(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class Xne{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new G0e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(c5),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=a5(this),o5(this),this.nodeViews=l5(this),this.docView=q4(this.state.doc,s5(this),z1(this),this.dom,this),this.domObserver=new wbe(this,(n,i,s,o)=>Tbe(this,n,i,s,o)),this.domObserver.start(),Y0e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&NI(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(c5),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Une(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=l5(this);Rbe(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&NI(this),this.editable=a5(this),o5(this);let l=z1(this),c=s5(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&c0e(this);if(o){this.domObserver.stop();let p=h&&(ei||Dr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Ibe(i.selection,e.selection);if(h){let m=Dr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=cbe(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=q4(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&R0e(this))?xo(this,p):(Ine(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&u0e(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof je){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&R4(this,r.getBoundingClientRect(),e)}else R4(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new Wne(e.slice,e.move,i<0?void 0:je.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(ei){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&d0e(this.dom),xo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return g0e(this,e)}coordsAtPos(e,r=1){return Ene(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return w0e(this,r||this.state,e)}pasteHTML(e,r){return bp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return bp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return VM(this,e)}destroy(){this.docView&&(Q0e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],z1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Zve())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return J0e(this,e)}domSelectionRange(){let e=this.domSelection();return e?fn&&this.root.nodeType===11&&i0e(this.dom.ownerDocument)==this.dom&&_be(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Xne.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function s5(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[kn.node(0,t.state.doc.content.size,e)]}function o5(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:kn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function a5(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Ibe(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function l5(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function Rbe(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function c5(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var tl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},uv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Mbe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Abe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Jr=0;Jr<10;Jr++)tl[48+Jr]=tl[96+Jr]=String(Jr);for(var Jr=1;Jr<=24;Jr++)tl[Jr+111]="F"+Jr;for(var Jr=65;Jr<=90;Jr++)tl[Jr]=String.fromCharCode(Jr+32),uv[Jr]=String.fromCharCode(Jr);for(var U1 in tl)uv.hasOwnProperty(U1)||(uv[U1]=tl[U1]);function Dbe(t){var e=Mbe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Abe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?uv:tl)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const $be=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Fbe=typeof navigator<"u"&&/Win/.test(navigator.platform);function qbe(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))$be?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Lbe(t){let e=Object.create(null);for(let r in t)e[qbe(r)]=t[r];return e}function H1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function Bbe(t){return new Vt({props:{handleKeyDown:Jne(t)}})}function Jne(t){let e=Lbe(t);return function(r,n){let i=Dbe(n),s,o=e[H1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[H1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(Fbe&&n.ctrlKey&&n.altKey)&&(s=tl[n.keyCode])&&s!=i){let a=e[H1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var zbe=Object.defineProperty,YM=(t,e)=>{for(var r in e)zbe(t,r,{get:e[r],enumerable:!0})};function z0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var V0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),v=f(...m)(g);return o.push(v),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:z0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},Zne={};YM(Zne,{blur:()=>Vbe,clearContent:()=>Ube,clearNodes:()=>Hbe,command:()=>Wbe,createParagraphNear:()=>Kbe,cut:()=>Gbe,deleteCurrentNode:()=>Ybe,deleteNode:()=>Qbe,deleteRange:()=>Xbe,deleteSelection:()=>Jbe,enter:()=>Zbe,exitCode:()=>e1e,extendMarkRange:()=>t1e,first:()=>r1e,focus:()=>i1e,forEach:()=>s1e,insertContent:()=>o1e,insertContentAt:()=>c1e,joinBackward:()=>h1e,joinDown:()=>d1e,joinForward:()=>f1e,joinItemBackward:()=>p1e,joinItemForward:()=>m1e,joinTextblockBackward:()=>g1e,joinTextblockForward:()=>y1e,joinUp:()=>u1e,keyboardShortcut:()=>b1e,lift:()=>x1e,liftEmptyBlock:()=>w1e,liftListItem:()=>S1e,newlineInCode:()=>_1e,resetAttributes:()=>E1e,scrollIntoView:()=>C1e,selectAll:()=>N1e,selectNodeBackward:()=>k1e,selectNodeForward:()=>T1e,selectParentNode:()=>O1e,selectTextblockEnd:()=>j1e,selectTextblockStart:()=>P1e,setContent:()=>I1e,setMark:()=>J1e,setMeta:()=>Z1e,setNode:()=>exe,setNodeSelection:()=>txe,setTextDirection:()=>rxe,setTextSelection:()=>nxe,sinkListItem:()=>ixe,splitBlock:()=>sxe,splitListItem:()=>oxe,toggleList:()=>axe,toggleMark:()=>lxe,toggleNode:()=>cxe,toggleWrap:()=>uxe,undoInputRule:()=>dxe,unsetAllMarks:()=>hxe,unsetMark:()=>fxe,unsetTextDirection:()=>pxe,updateAttributes:()=>mxe,wrapIn:()=>gxe,wrapInList:()=>yxe});var Vbe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),Ube=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Hbe=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,h=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=uh(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},Wbe=t=>e=>t(e),Kbe=()=>({state:t,dispatch:e})=>fne(t,e),Gbe=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new De(n.doc.resolve(Math.max(o-1,0)))),!0},Ybe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function yr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Qbe=t=>({tr:e,state:r,dispatch:n})=>{const i=yr(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Xbe=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},Jbe=()=>({state:t,dispatch:e})=>AM(t,e),Zbe=()=>({commands:t})=>t.keyboardShortcut("Enter"),e1e=()=>({state:t,dispatch:e})=>Fve(t,e);function QM(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function dv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:QM(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function eie(t,e,r={}){return t.find(n=>n.type===e&&dv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function u5(t,e,r={}){return!!eie(t,e,r)}function XM(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!eie([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&u5([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&u5([...t.parent.child(l).marks],e,r);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Lo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var t1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=Lo(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:c,to:d}=a;if(i){const h=XM(l,s,e);if(h&&h.from<=c&&h.to>=d){const f=De.create(o,h.from,h.to);r.setSelection(f)}}return!0},r1e=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function tie(t){return t instanceof De}function zl(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function rie(t,e=null){if(!e)return null;const r=He.atStart(t),n=He.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?De.create(t,zl(0,i,s),zl(t.content.size,i,s)):De.create(t,zl(e,i,s),zl(e,i,s))}function d5(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function hv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function n1e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var i1e=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(hv()||d5())&&n.dom.focus(),n1e()&&!hv()&&!d5()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!tie(r.state.selection))return o(),!0;const a=rie(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},s1e=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),o1e=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),nie=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&nie(n)}return t};function Eg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return nie(r)}function wp(t,e,r){if(t instanceof Ba||t instanceof J)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return J.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),wp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new Lre({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?za.fromSchema(l).parseSlice(Eg(t),r.parseOptions):za.fromSchema(l).parse(Eg(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=za.fromSchema(e);return r.slice?s.parseSlice(Eg(t),r.parseOptions).content:s.parse(Eg(t),r.parseOptions)}return wp("",e,r)}function a1e(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof Ar||i instanceof Fr))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(He.near(t.doc.resolve(o),r))}var l1e=t=>!("type"in t),c1e=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{wp(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=wp(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((l1e(a)?a:[a]).forEach(v=>{v.check(),f=f?v.isText&&v.marks.length===0:!1,p=p?v.isBlock:!1}),d===h&&p){const{parent:v}=n.doc.resolve(d);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof J){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const v=n.doc.resolve(d),y=v.node(),b=v.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;b&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&a1e(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},u1e=()=>({state:t,dispatch:e})=>Ave(t,e),d1e=()=>({state:t,dispatch:e})=>Dve(t,e),h1e=()=>({state:t,dispatch:e})=>one(t,e),f1e=()=>({state:t,dispatch:e})=>une(t,e),p1e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=D0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},m1e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=D0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},g1e=()=>({state:t,dispatch:e})=>Rve(t,e),y1e=()=>({state:t,dispatch:e})=>Mve(t,e);function iie(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function v1e(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))hv()||iie()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var b1e=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=v1e(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,a))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function rl(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?yr(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>dv(h.node.attrs,r,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}var x1e=(t,e={})=>({state:r,dispatch:n})=>{const i=yr(t,r.schema);return rl(r,i,e)?$ve(r,n):!1},w1e=()=>({state:t,dispatch:e})=>pne(t,e),S1e=t=>({state:e,dispatch:r})=>{const n=yr(t,e.schema);return Yve(n)(e,r)},_1e=()=>({state:t,dispatch:e})=>hne(t,e);function U0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function h5(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var E1e=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=U0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=yr(t,n.schema)),a==="mark"&&(o=Lo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,h5(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(h5(f.attrs,e))))})})}),l},C1e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),N1e=()=>({tr:t,dispatch:e})=>{if(e){const r=new gi(t.doc);t.setSelection(r)}return!0},k1e=()=>({state:t,dispatch:e})=>lne(t,e),T1e=()=>({state:t,dispatch:e})=>dne(t,e),O1e=()=>({state:t,dispatch:e})=>Bve(t,e),j1e=()=>({state:t,dispatch:e})=>Uve(t,e),P1e=()=>({state:t,dispatch:e})=>Vve(t,e);function kI(t,e,r={},n={}){return wp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var I1e=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const c=kI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function sie(t,e){const r=Lo(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function oie(t,e){const r=new rne(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function R1e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function M1e(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function A1e(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function H0(t){return e=>A1e(e.$from,t)}function Te(t,e,r){return t.config[e]===void 0&&t.parent?Te(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Te(t.parent,e,r):null}):t.config[e]}function JM(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Te(e,"addExtensions",r);return n?[e,...JM(n())]:e}).flat(10)}function ZM(t,e){const r=Gc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function aie(t){return typeof t=="function"}function dt(t,e=void 0,...r){return aie(t)?e?t.bind(e)(...r):t(...r):t}function D1e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ud(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function lie(t){const e=[],{nodeExtensions:r,markExtensions:n}=Ud(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Te(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Te(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function vr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],c=a.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),n[i]=Array.from(c.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function Sp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>vr(r,n),{})}function $1e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function f5(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):$1e(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function p5(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&D1e(r)?!1:r!=null))}function m5(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function F1e(t,e){var r;const n=lie(t),{nodeExtensions:i,markExtensions:s}=Ud(t),o=(r=i.find(c=>Te(c,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(c=>{const d=n.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,b)=>{const w=Te(b,"extendNodeSchema",h);return{...y,...w?w(c):{}}},{}),p=p5({...f,content:dt(Te(c,"content",h)),marks:dt(Te(c,"marks",h)),group:dt(Te(c,"group",h)),inline:dt(Te(c,"inline",h)),atom:dt(Te(c,"atom",h)),selectable:dt(Te(c,"selectable",h)),draggable:dt(Te(c,"draggable",h)),code:dt(Te(c,"code",h)),whitespace:dt(Te(c,"whitespace",h)),linebreakReplacement:dt(Te(c,"linebreakReplacement",h)),defining:dt(Te(c,"defining",h)),isolating:dt(Te(c,"isolating",h)),attrs:Object.fromEntries(d.map(m5))}),m=dt(Te(c,"parseHTML",h));m&&(p.parseDOM=m.map(y=>f5(y,d)));const g=Te(c,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:Sp(y,d)}));const v=Te(c,"renderText",h);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const d=n.filter(v=>v.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,y)=>{const b=Te(y,"extendMarkSchema",h);return{...v,...b?b(c):{}}},{}),p=p5({...f,inclusive:dt(Te(c,"inclusive",h)),excludes:dt(Te(c,"excludes",h)),group:dt(Te(c,"group",h)),spanning:dt(Te(c,"spanning",h)),code:dt(Te(c,"code",h)),attrs:Object.fromEntries(d.map(m5))}),m=dt(Te(c,"parseHTML",h));m&&(p.parseDOM=m.map(v=>f5(v,d)));const g=Te(c,"renderHTML",h);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:Sp(v,d)})),[c.name,p]}));return new Lre({topNode:o,nodes:a,marks:l})}function q1e(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function fv(t){return t.sort((r,n)=>{const i=Te(r,"priority")||100,s=Te(n,"priority")||100;return i>s?-1:i<s?1:0})}function cie(t){const e=fv(JM(t)),r=q1e(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function uie(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,c,d,h)=>{var f;l.isBlock&&c>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:c,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,c)-c,i-c))}),a}function L1e(t,e){const r={from:0,to:t.content.size};return uie(t,r,e)}function die(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function B1e(t,e){const r=yr(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function hie(t,e){const r=U0(typeof e=="string"?e:e.name,t.schema);return r==="node"?B1e(t,e):r==="mark"?sie(t,e):{}}function z1e(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function V1e(t){const e=z1e(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function fie(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(c,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:c,to:d}})})}),V1e(n)}function eA(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=XM(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var U1e=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function Cg(t,e){return e.nodes[t]||e.marks[t]||null}function cy(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var H1e=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function TI(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?Lo(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>dv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,v),b=Math.min(m,v+g.nodeSize),w=b-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:b})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>dv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function W1e(t,e,r={}){if(!e)return rl(t,null,r)||TI(t,null,r);const n=U0(e,t.schema);return n==="node"?rl(t,e,r):n==="mark"?TI(t,e,r):!1}var K1e=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=H0(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},G1e=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function g5(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function y5(t,e){const{nodeExtensions:r}=Ud(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=dt(Te(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function W0(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(W0(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function pie(t){return t instanceof je}var mie=class gie{constructor(e){this.position=e}static fromJSON(e){return new gie(e.position)}toJSON(){return{position:this.position}}};function Y1e(t,e){const r=e.mapping.mapResult(t.position);return{position:new mie(r.pos),mapResult:r}}function Q1e(t){return new mie(t)}function X1e(t,e,r){var n;const{selection:i}=e;let s=null;if(tie(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(c=>c.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(c)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));c=p&&m}return!c}),c})}var J1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=Lo(t,n.schema);if(i)if(o){const c=sie(n,l);r.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return X1e(n,r,l)},Z1e=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),exe=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=yr(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>j4(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>j4(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},txe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=zl(t,0,n.content.size),s=je.create(n,i);e.setSelection(s)}return!0},rxe=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},nxe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=De.atStart(n).from,a=De.atEnd(n).to,l=zl(i,o,a),c=zl(s,o,a),d=De.create(n,l,c);e.setSelection(d)}return!0},ixe=t=>({state:e,dispatch:r})=>{const n=yr(t,e.schema);return Jve(n)(e,r)};function v5(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var sxe=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=cy(c,a.node().type.name,a.node().attrs);if(s instanceof je&&s.node.isBlock)return!a.parentOffset||!bo(o,a.pos)?!1:(n&&(t&&v5(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:R1e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=bo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&bo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof De&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),v=e.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&v5(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},oxe=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=yr(t,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=J.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-b;E>=l.depth-3;E-=1)y=J.from(l.node(E).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...cy(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(J.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(b-1));r.replace(_,l.after(-w),new me(y,4-b,0));let C=-1;r.doc.nodesBetween(_,r.doc.content.size,(E,N)=>{if(C>-1)return!1;E.isTextblock&&E.content.size===0&&(C=N+1)}),C>-1&&r.setSelection(De.near(r.doc.resolve(C))),r.scrollIntoView()}return!0}const p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...cy(f,h.type.name,h.attrs),...e},g={...cy(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,c.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!bo(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=n,{splittableMarks:w}=s.extensionManager,x=b||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,v).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},W1=(t,e)=>{const r=H0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&cl(t.doc,r.pos)&&t.join(r.pos),!0},K1=(t,e)=>{const r=H0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&cl(t.doc,n)&&t.join(n),!0},axe=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=yr(t,o.schema),m=yr(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:b}=g,w=y.blockRange(b),x=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=H0(_=>y5(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if(y5(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>W1(s,p)).command(()=>K1(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:c.clearNodes()).wrapInList(p,n).command(()=>W1(s,p)).command(()=>K1(s,p)).run():l().command(()=>{const _=d().wrapInList(p,n),C=x.filter(E=>f.includes(E.type.name));return s.ensureMarks(C),_?!0:c.clearNodes()}).wrapInList(p,n).command(()=>W1(s,p)).command(()=>K1(s,p)).run()},lxe=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=Lo(t,n.schema);return TI(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},cxe=(t,e,r={})=>({state:n,commands:i})=>{const s=yr(t,n.schema),o=yr(e,n.schema),a=rl(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},uxe=(t,e={})=>({state:r,commands:n})=>{const i=yr(t,r.schema);return rl(r,i,e)?n.lift(i):n.wrapIn(i,e)},dxe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},hxe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},fxe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=Lo(t,n.schema),{$from:c,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=c.marks().find(v=>v.type===l))==null?void 0:s.attrs,g=XM(c,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},pxe=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},mxe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=U0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=yr(t,n.schema)),a==="mark"&&(o=Lo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(v,y)=>{s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v)}):n.doc.nodesBetween(d,h,(v,y)=>{y<d&&s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v),y>=d&&y<=h&&(s&&s===v.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...v.attrs,...e})),o&&v.marks.length&&v.marks.forEach(b=>{if(o===b.type&&(l=!0,i)){const w=Math.max(y,d),x=Math.min(y+v.nodeSize,h);r.addMark(w,x,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(v=>{o===v.type&&i&&r.addMark(m,g,o.create({...v.attrs,...e}))}))}),l},gxe=(t,e={})=>({state:r,dispatch:n})=>{const i=yr(t,r.schema);return Hve(i,e)(r,n)},yxe=(t,e={})=>({state:r,dispatch:n})=>{const i=yr(t,r.schema);return Wve(i,e)(r,n)},vxe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},K0=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},bxe=(t,e)=>{if(QM(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function Ng(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=H1e(c)+s;return o.forEach(f=>{if(d)return;const p=bxe(h,f.find);if(!p)return;const m=l.state.tr,g=z0({state:l.state,transaction:m}),v={from:n-(p[0].length-s.length),to:i},{commands:y,chain:b,can:w}=new V0({editor:r,state:g});f.handler({state:g,range:v,match:p,commands:y,chain:b,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function xxe(t){const{editor:e,rules:r}=t,n=new Vt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=ZM(J.from(d),o.schema);const{from:h}=l,f=h+d.length;Ng({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Ng({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Ng({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Ng({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function wxe(t){return Object.prototype.toString.call(t).slice(8,-1)}function kg(t){return wxe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function yie(t,e){const r={...t};return kg(t)&&kg(e)&&Object.keys(e).forEach(n=>{kg(e[n])&&kg(t[n])?r[n]=yie(t[n],e[n]):r[n]=e[n]}),r}var tA=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...dt(Te(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...dt(Te(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>yie(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Yc=class vie extends tA{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new vie(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Sxe(t){return typeof t=="number"}var _xe=class{constructor(t){this.find=t.find,this.handler=t.handler}},Exe=(t,e,r)=>{if(QM(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Cxe(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new V0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,v,y,b,w;if((v=(g=p.type)==null?void 0:g.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(b=(y=p.content)==null?void 0:y.size)!=null?b:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const C=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");Exe(C,s.find,o).forEach(N=>{if(N.index===void 0)return;const T=S+N.index+1,j=T+N[0].length,I={from:r.tr.mapping.map(T),to:r.tr.mapping.map(j)},O=s.handler({state:r,range:I,match:N,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});h.push(O)})}),h.every(p=>p!==null)}var Tg=null,Nxe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function kxe(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,v=z0({state:d,transaction:g});if(!(!Cxe({editor:e,state:v,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Vt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(Tg=e)},p=()=>{Tg&&(Tg=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=Tg;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:S}=y;typeof S=="string"?S=S:S=ZM(J.from(S),p.schema);const{from:_}=y,C=_+S.length,E=Nxe(S);return l({rule:d,state:p,from:_,to:{b:C},pasteEvt:E})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!Sxe(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var G0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=cie(t),this.schema=F1e(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Cg(e.name,this.schema)},n=Te(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return fv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Cg(n.name,this.schema)},s=[],o=Te(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&Te(n,"exitable",i)&&(a.ArrowRight=()=>Yc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=Bbe(a);s.push(l);const c=Te(n,"addInputRules",i);if(g5(n,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=xxe({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=Te(n,"addPasteRules",i);if(g5(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=kxe({editor:t,rules:f});s.push(...p)}}const h=Te(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return lie(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ud(this.extensions);return Object.fromEntries(e.filter(r=>!!Te(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:yr(r.name,this.schema)},s=Te(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,d,h,f)=>{const p=Sp(l,n);return o({node:l,view:c,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return fv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Cg(i.name,this.schema)},o=Te(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ud(this.extensions);return Object.fromEntries(e.filter(r=>!!Te(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Lo(r.name,this.schema)},s=Te(r,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const d=Sp(a,n);return s()({mark:a,view:l,inline:c,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{Bxe(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Cg(e.name,this.schema)};e.type==="mark"&&((r=dt(Te(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=Te(e,"onBeforeCreate",n),s=Te(e,"onCreate",n),o=Te(e,"onUpdate",n),a=Te(e,"onSelectionUpdate",n),l=Te(e,"onTransaction",n),c=Te(e,"onFocus",n),d=Te(e,"onBlur",n),h=Te(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};G0.resolve=cie;G0.sort=fv;G0.flatten=JM;var Txe={};YM(Txe,{ClipboardTextSerializer:()=>xie,Commands:()=>wie,Delete:()=>Sie,Drop:()=>_ie,Editable:()=>Eie,FocusEvents:()=>Nie,Keymap:()=>kie,Paste:()=>Tie,Tabindex:()=>Oie,TextDirection:()=>jie,focusEventsPluginKey:()=>Cie});var lr=class bie extends tA{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new bie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},xie=lr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Vt({key:new Or("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=die(r);return uie(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),wie=lr.create({name:"commands",addCommands(){return{...Zne}}}),Sie=lr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=oie(t.before,[t,...e]);fie(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=p.oldRange.from<=g&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:d.mapping.map(g),newTo:d.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,v;if(p instanceof ls){const y=f.slice(m).map(p.from,-1),b=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(b),S=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(C=>C.eq(p.mark)),_=(v=d.doc.nodeAt(b))==null?void 0:v.marks.some(C=>C.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:b},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),_ie=lr.create({name:"drop",addProseMirrorPlugins(){return[new Vt({key:new Or("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),Eie=lr.create({name:"editable",addProseMirrorPlugins(){return[new Vt({key:new Or("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Cie=new Or("focusEvents"),Nie=lr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Vt({key:Cie,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),kie=lr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,v=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?v===h.pos:He.atStart(c).from===f;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return hv()||iie()?s:i},addProseMirrorPlugins(){return[new Vt({key:new Or("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=He.atStart(e.doc).from,c=He.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!W0(r.doc))return;const f=r.tr,p=z0({state:r,transaction:f}),{commands:m}=new V0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),Tie=lr.create({name:"paste",addProseMirrorPlugins(){return[new Vt({key:new Or("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),Oie=lr.create({name:"tabindex",addProseMirrorPlugins(){return[new Vt({key:new Or("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),jie=lr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ud(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Vt({key:new Or("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),Oxe=class Ou{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Ou(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ou(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ou(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Ou(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Ou(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},jxe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Pxe(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var Ixe=class extends vxe{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Y1e,createMappablePosition:Q1e},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=rie(e,this.options.autofocus);this.editorState=Uu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Pxe(jxe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=aie(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[Eie,xie.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),wie,Nie,kie,Oie,_ie,Tie,Sie,jie.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new G0(n,this)}createCommandManager(){this.commandManager=new V0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=kI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=kI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new Xne(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return hie(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return W1e(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ZM(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return L1e(this.state.doc,{blockSeparator:e,textSerializers:{...die(this.schema),...r}})}get isEmpty(){return W0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Oxe(e,this)}get $doc(){return this.$pos(0)}};function Hd(t){return new K0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=dt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),c=r.from+a.indexOf(o),d=c+o.length;if(eA(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;d<r.to&&s.delete(d,r.to),c>r.from&&s.delete(r.from+l,c);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function Rxe(t){return new K0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=dt(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=o+c;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function OI(t){return new K0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=dt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function Wd(t){return new K0({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=dt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),c=l&&RM(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&cl(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function Mxe(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof je){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var Axe={};YM(Axe,{createAtomBlockMarkdownSpec:()=>Dxe,createBlockMarkdownSpec:()=>$xe,createInlineMarkdownSpec:()=>Lxe,parseAttributes:()=>rA,parseIndentedBlocks:()=>jI,renderNestedMarkdownContent:()=>iA,serializeAttributes:()=>nA});function rA(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));e.class=c.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,c,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[c]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function nA(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function Dxe(t){const{nodeName:e,name:r,parseAttributes:n=rA,serializeAttributes:i=nA,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,c=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",v=n(g);if(!o.find(b=>!(b in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:d=>{const h=c(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function $xe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=rA,serializeAttributes:s=nA,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=h.match(g);if(!v)return;const[y,b=""]=v,w=i(b);let x=1;const S=y.length;let _="";const C=/^:::([\w-]*)(\s.*)?/gm,E=h.slice(S);for(C.lastIndex=0;;){const N=C.exec(E);if(N===null)break;const T=N.index,j=N[1];if(!((m=N[2])!=null&&m.endsWith(":::"))){if(j)x+=1;else if(x-=1,x===0){const I=E.slice(0,T);_=I.trim();const O=h.slice(0,S+T+N[0].length);let D=[];if(_)if(a==="block")for(D=p.blockTokens(I),D.forEach(z=>{z.text&&(!z.tokens||z.tokens.length===0)&&(z.tokens=p.inlineTokens(z.text))});D.length>0;){const z=D[D.length-1];if(z.type==="paragraph"&&(!z.text||z.text.trim()===""))D.pop();else break}else D=p.inlineTokens(_);return{type:e,raw:O,attributes:w,content:_,tokens:D}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",v=f.renderChildren(h.content||[],`

`);return`:::${c}${g}

${v}

:::`}}}function Fxe(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function qxe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function Lxe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=Fxe,serializeAttributes:s=qxe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,v=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(v!==void 0&&y===v)return;p[g]=y}}),p},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),v=f.match(g);if(!v)return;let y="",b="";if(a){const[,x]=v;b=x}else{const[,x,S]=v;b=x,y=S||""}const w=i(b.trim());return{type:e,raw:v[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(f.attrs||{}),g=s(m),v=g?` ${g}`:"";return a?`[${c}${v}]`:`[${c}${v}]${p}[/${c}]`}}}function jI(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let c="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:v}=m;c=`${c}${f}
`;const y=[v];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const C=a.slice(d+1).findIndex(T=>T.trim()!=="");if(C===-1)break;if((((i=(n=a[d+1+C].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),c=`${c}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),c=`${c}${S}
`,d+=1;else break}let b;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?b=e.customNestedParser(S):b=r.blockTokens(S))}const x=e.createToken(m,b);l.push(x)}if(l.length!==0)return{items:l,raw:c}}function iA(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const d=e.renderChildren([c]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function Bxe(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(c,d,t.type),s.addMark(c,d,p)}}),s.docChanged&&e.view.dispatch(s)}var xi=class Pie extends tA{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new Pie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Mc(t){return new _xe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=dt(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let c=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(eA(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),c=r.from+d+a.length,o.addMark(r.from+d,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:zxe,getOwnPropertySymbols:Vxe}=Object,{hasOwnProperty:Uxe}=Object.prototype;function G1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function Og(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function Hxe(t){return t!=null?t[Symbol.toStringTag]:void 0}function b5(t){return zxe(t).concat(Vxe(t))}const Wxe=Object.hasOwn||((t,e)=>Uxe.call(t,e));function Qc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Kxe="__v",Gxe="__o",Yxe="_owner",{getOwnPropertyDescriptor:x5,keys:w5}=Object;function Qxe(t,e){return t.byteLength===e.byteLength&&pv(new Uint8Array(t),new Uint8Array(e))}function Xxe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Jxe(t,e){return t.byteLength===e.byteLength&&pv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Zxe(t,e){return Qc(t.getTime(),e.getTime())}function ewe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function twe(t,e){return t===e}function S5(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const c=e.entries();let d=!1,h=0;for(;(a=c.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const rwe=Qc;function nwe(t,e,r){const n=w5(t);let i=n.length;if(w5(e).length!==i)return!1;for(;i-- >0;)if(!Iie(t,e,r,n[i]))return!1;return!0}function rf(t,e,r){const n=b5(t);let i=n.length;if(b5(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!Iie(t,e,r,s)||(o=x5(t,s),a=x5(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function iwe(t,e){return Qc(t.valueOf(),e.valueOf())}function swe(t,e){return t.source===e.source&&t.flags===e.flags}function _5(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let c=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function pv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function owe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Iie(t,e,r,n){return(n===Yxe||n===Gxe||n===Kxe)&&(t.$$typeof||e.$$typeof)?!0:Wxe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const awe="[object ArrayBuffer]",lwe="[object Arguments]",cwe="[object Boolean]",uwe="[object DataView]",dwe="[object Date]",hwe="[object Error]",fwe="[object Map]",pwe="[object Number]",mwe="[object Object]",gwe="[object RegExp]",ywe="[object Set]",vwe="[object String]",bwe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},xwe="[object URL]",wwe=Object.prototype.toString;function Swe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(v,y,b){if(v===y)return!0;if(v==null||y==null)return!1;const w=typeof v;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(v,y,b):w==="function"?s(v,y,b):!1;const x=v.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(v,y,b);if(Array.isArray(v))return e(v,y,b);if(x===Date)return n(v,y,b);if(x===RegExp)return d(v,y,b);if(x===Map)return o(v,y,b);if(x===Set)return h(v,y,b);const S=wwe.call(v);if(S===dwe)return n(v,y,b);if(S===gwe)return d(v,y,b);if(S===fwe)return o(v,y,b);if(S===ywe)return h(v,y,b);if(S===mwe)return typeof v.then!="function"&&typeof y.then!="function"&&l(v,y,b);if(S===xwe)return p(v,y,b);if(S===hwe)return i(v,y,b);if(S===lwe)return l(v,y,b);if(bwe[S])return f(v,y,b);if(S===awe)return t(v,y,b);if(S===uwe)return r(v,y,b);if(S===cwe||S===pwe||S===vwe)return c(v,y,b);if(m){let _=m[S];if(!_){const C=Hxe(v);C&&(_=m[C])}if(_)return _(v,y,b)}return!1}}function _we({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:Qxe,areArraysEqual:r?rf:Xxe,areDataViewsEqual:Jxe,areDatesEqual:Zxe,areErrorsEqual:ewe,areFunctionsEqual:twe,areMapsEqual:r?G1(S5,rf):S5,areNumbersEqual:rwe,areObjectsEqual:r?rf:nwe,arePrimitiveWrappersEqual:iwe,areRegExpsEqual:swe,areSetsEqual:r?G1(_5,rf):_5,areTypedArraysEqual:r?G1(pv,rf):pv,areUrlsEqual:owe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=Og(n.areArraysEqual),s=Og(n.areMapsEqual),o=Og(n.areObjectsEqual),a=Og(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function Ewe(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function Cwe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:c,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const Nwe=dl();dl({strict:!0});dl({circular:!0});dl({circular:!0,strict:!0});dl({createInternalComparator:()=>Qc});dl({strict:!0,createInternalComparator:()=>Qc});dl({circular:!0,createInternalComparator:()=>Qc});dl({circular:!0,createInternalComparator:()=>Qc,strict:!0});function dl(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=_we(t),o=Swe(s),a=r?r(o):Ewe(o);return Cwe({circular:e,comparator:o,createState:n,equals:a,strict:i})}var Rie={exports:{}},Mie={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0=k,kwe=jM;function Twe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Owe=typeof Object.is=="function"?Object.is:Twe,jwe=kwe.useSyncExternalStore,Pwe=Y0.useRef,Iwe=Y0.useEffect,Rwe=Y0.useMemo,Mwe=Y0.useDebugValue;Mie.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=Pwe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Rwe(function(){function l(p){if(!c){if(c=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,Owe(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=jwe(t,s[0],s[1]);return Iwe(function(){o.hasValue=!0,o.value=a},[a]),Mwe(a),a};Rie.exports=Mie;var Awe=Rie.exports,Dwe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},$we=({contentComponent:t})=>{const e=jM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(e)})};function Fwe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:pde.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var qwe=class extends xe.Component{constructor(t){var e;super(t),this.editorContentRef=xe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=Fwe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:Dwe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&u.jsx($we,{contentComponent:t.contentComponent})]})}},Lwe=k.forwardRef((t,e)=>{const r=xe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return xe.createElement(qwe,{key:r,innerRef:e,...t})}),Bwe=xe.memo(Lwe),zwe=typeof window<"u"?k.useLayoutEffect:k.useEffect,Vwe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function Uwe(t){var e;const[r]=k.useState(()=>new Vwe(t.editor)),n=Awe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:Nwe);return zwe(()=>r.watch(t.editor),[t.editor,r]),k.useDebugValue(n),n}var Hwe=!1,PI=typeof window>"u",Wwe=PI||!!(typeof window<"u"&&window.next),Kwe=class Aie{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?PI||Wwe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new Ixe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Aie.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Gwe(t={},e=[]){const r=k.useRef(t);r.current=t;const[n]=k.useState(()=>new Kwe(r)),i=jM.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return k.useDebugValue(i),k.useEffect(n.onRender(e)),Uwe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var Ywe=k.createContext({editor:null});Ywe.Consumer;var Qwe=k.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Xwe=()=>k.useContext(Qwe);xe.forwardRef((t,e)=>{const{onDragStart:r}=Xwe(),n=t.as||"div";return u.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});xe.createContext({markViewContentRef:()=>{}});var mv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},Jwe=/^\s*>\s$/,Zwe=xi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return mv("blockquote",{...vr(this.options.HTMLAttributes,t),children:mv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Wd({find:Jwe,type:this.type})]}}),eSe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,tSe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,rSe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,nSe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,iSe=Yc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return mv("strong",{...vr(this.options.HTMLAttributes,t),children:mv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Hd({find:eSe,type:this.type}),Hd({find:rSe,type:this.type})]},addPasteRules(){return[Mc({find:tSe,type:this.type}),Mc({find:nSe,type:this.type})]}}),sSe=/(^|[^`])`([^`]+)`(?!`)$/,oSe=/(^|[^`])`([^`]+)`(?!`)/g,aSe=Yc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",vr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Hd({find:sSe,type:this.type})]},addPasteRules(){return[Mc({find:oSe,type:this.type})]}}),Y1=4,lSe=/^```([a-z]+)?[\s\n]$/,cSe=/^~~~([a-z]+)?[\s\n]$/,uSe=xi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Y1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",vr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Y1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:d}=i,p=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Y1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const v=c-d;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=v){m=_;break}g+=p[_].length+1}const b=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(b.length,r);if(w===0)return!0;let x=d;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),c-x<=w&&a.setSelection(De.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,f=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",v=Math.min(g.length,r);return p.slice(v)}).join(`
`);return a.replaceWith(l,c,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(He.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[OI({find:lSe,type:this.type,getAttributes:t=>({language:t[1]})}),OI({find:cSe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Vt({key:new Or("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(De.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),dSe=xi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),hSe=xi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",vr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),fSe=xi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,vr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>OI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),pSe=xi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",vr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!Mxe(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return pie(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(De.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(je.create(o.doc,l.pos)):o.setSelection(De.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(c,h),o.setSelection(De.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Rxe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),mSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,gSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ySe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,vSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,bSe=Yc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",vr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Hd({find:mSe,type:this.type}),Hd({find:ySe,type:this.type})]},addPasteRules(){return[Mc({find:gSe,type:this.type}),Mc({find:vSe,type:this.type})]}});const xSe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",wSe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",II="numeric",RI="ascii",MI="alpha",Rf="asciinumeric",yf="alphanumeric",AI="domain",Die="emoji",SSe="scheme",_Se="slashscheme",Q1="whitespace";function ESe(t,e){return t in e||(e[t]=[]),e[t]}function Vl(t,e,r){e[II]&&(e[Rf]=!0,e[yf]=!0),e[RI]&&(e[Rf]=!0,e[MI]=!0),e[Rf]&&(e[yf]=!0),e[MI]&&(e[yf]=!0),e[yf]&&(e[AI]=!0),e[Die]&&(e[AI]=!0);for(const n in e){const i=ESe(n,r);i.indexOf(t)<0&&i.push(t)}}function CSe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Un(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Un.groups={};Un.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Un.groups;let i;return e&&e.j?i=e:(i=new Un(e),r&&n&&Vl(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Un.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Un,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Un,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(CSe(o.t,n),r);Vl(s,l,n)}else r&&Vl(s,r,n);o.t=s}return i.j[t]=o,o}};const Ue=(t,e,r,n,i)=>t.ta(e,r,n,i),Kt=(t,e,r,n,i)=>t.tr(e,r,n,i),E5=(t,e,r,n,i)=>t.ts(e,r,n,i),te=(t,e,r,n,i)=>t.tt(e,r,n,i),no="WORD",DI="UWORD",$ie="ASCIINUMERICAL",Fie="ALPHANUMERICAL",_p="LOCALHOST",$I="TLD",FI="UTLD",uy="SCHEME",ju="SLASH_SCHEME",sA="NUM",qI="WS",oA="NL",Mf="OPENBRACE",Af="CLOSEBRACE",gv="OPENBRACKET",yv="CLOSEBRACKET",vv="OPENPAREN",bv="CLOSEPAREN",xv="OPENANGLEBRACKET",wv="CLOSEANGLEBRACKET",Sv="FULLWIDTHLEFTPAREN",_v="FULLWIDTHRIGHTPAREN",Ev="LEFTCORNERBRACKET",Cv="RIGHTCORNERBRACKET",Nv="LEFTWHITECORNERBRACKET",kv="RIGHTWHITECORNERBRACKET",Tv="FULLWIDTHLESSTHAN",Ov="FULLWIDTHGREATERTHAN",jv="AMPERSAND",Pv="APOSTROPHE",Iv="ASTERISK",sa="AT",Rv="BACKSLASH",Mv="BACKTICK",Av="CARET",ha="COLON",aA="COMMA",Dv="DOLLAR",_s="DOT",$v="EQUALS",lA="EXCLAMATION",Ni="HYPHEN",Df="PERCENT",Fv="PIPE",qv="PLUS",Lv="POUND",$f="QUERY",cA="QUOTE",qie="FULLWIDTHMIDDLEDOT",uA="SEMI",Es="SLASH",Ff="TILDE",Bv="UNDERSCORE",Lie="EMOJI",zv="SYM";var Bie=Object.freeze({__proto__:null,ALPHANUMERICAL:Fie,AMPERSAND:jv,APOSTROPHE:Pv,ASCIINUMERICAL:$ie,ASTERISK:Iv,AT:sa,BACKSLASH:Rv,BACKTICK:Mv,CARET:Av,CLOSEANGLEBRACKET:wv,CLOSEBRACE:Af,CLOSEBRACKET:yv,CLOSEPAREN:bv,COLON:ha,COMMA:aA,DOLLAR:Dv,DOT:_s,EMOJI:Lie,EQUALS:$v,EXCLAMATION:lA,FULLWIDTHGREATERTHAN:Ov,FULLWIDTHLEFTPAREN:Sv,FULLWIDTHLESSTHAN:Tv,FULLWIDTHMIDDLEDOT:qie,FULLWIDTHRIGHTPAREN:_v,HYPHEN:Ni,LEFTCORNERBRACKET:Ev,LEFTWHITECORNERBRACKET:Nv,LOCALHOST:_p,NL:oA,NUM:sA,OPENANGLEBRACKET:xv,OPENBRACE:Mf,OPENBRACKET:gv,OPENPAREN:vv,PERCENT:Df,PIPE:Fv,PLUS:qv,POUND:Lv,QUERY:$f,QUOTE:cA,RIGHTCORNERBRACKET:Cv,RIGHTWHITECORNERBRACKET:kv,SCHEME:uy,SEMI:uA,SLASH:Es,SLASH_SCHEME:ju,SYM:zv,TILDE:Ff,TLD:$I,UNDERSCORE:Bv,UTLD:FI,UWORD:DI,WORD:no,WS:qI});const eo=/[a-z]/,nf=new RegExp("\\p{L}","u"),X1=new RegExp("\\p{Emoji}","u"),to=/\d/,J1=/\s/,C5="\r",Z1=`
`,NSe="",kSe="",ex="";let jg=null,Pg=null;function TSe(t=[]){const e={};Un.groups=e;const r=new Un;jg==null&&(jg=N5(xSe)),Pg==null&&(Pg=N5(wSe)),te(r,"'",Pv),te(r,"{",Mf),te(r,"}",Af),te(r,"[",gv),te(r,"]",yv),te(r,"(",vv),te(r,")",bv),te(r,"<",xv),te(r,">",wv),te(r,"",Sv),te(r,"",_v),te(r,"",Ev),te(r,"",Cv),te(r,"",Nv),te(r,"",kv),te(r,"",Tv),te(r,"",Ov),te(r,"&",jv),te(r,"*",Iv),te(r,"@",sa),te(r,"`",Mv),te(r,"^",Av),te(r,":",ha),te(r,",",aA),te(r,"$",Dv),te(r,".",_s),te(r,"=",$v),te(r,"!",lA),te(r,"-",Ni),te(r,"%",Df),te(r,"|",Fv),te(r,"+",qv),te(r,"#",Lv),te(r,"?",$f),te(r,'"',cA),te(r,"/",Es),te(r,";",uA),te(r,"~",Ff),te(r,"_",Bv),te(r,"\\",Rv),te(r,"",qie);const n=Kt(r,to,sA,{[II]:!0});Kt(n,to,n);const i=Kt(n,eo,$ie,{[Rf]:!0}),s=Kt(n,nf,Fie,{[yf]:!0}),o=Kt(r,eo,no,{[RI]:!0});Kt(o,to,i),Kt(o,eo,o),Kt(i,to,i),Kt(i,eo,i);const a=Kt(r,nf,DI,{[MI]:!0});Kt(a,eo),Kt(a,to,s),Kt(a,nf,a),Kt(s,to,s),Kt(s,eo),Kt(s,nf,s);const l=te(r,Z1,oA,{[Q1]:!0}),c=te(r,C5,qI,{[Q1]:!0}),d=Kt(r,J1,qI,{[Q1]:!0});te(r,ex,d),te(c,Z1,l),te(c,ex,d),Kt(c,J1,d),te(d,C5),te(d,Z1),Kt(d,J1,d),te(d,ex,d);const h=Kt(r,X1,Lie,{[Die]:!0});te(h,"#"),Kt(h,X1,h),te(h,NSe,h);const f=te(h,kSe);te(f,"#"),Kt(f,X1,h);const p=[[eo,o],[to,i]],m=[[eo,null],[nf,a],[to,s]];for(let g=0;g<jg.length;g++)Qo(r,jg[g],$I,no,p);for(let g=0;g<Pg.length;g++)Qo(r,Pg[g],FI,DI,m);Vl($I,{tld:!0,ascii:!0},e),Vl(FI,{utld:!0,alpha:!0},e),Qo(r,"file",uy,no,p),Qo(r,"mailto",uy,no,p),Qo(r,"http",ju,no,p),Qo(r,"https",ju,no,p),Qo(r,"ftp",ju,no,p),Qo(r,"ftps",ju,no,p),Vl(uy,{scheme:!0,ascii:!0},e),Vl(ju,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],b=t[g][1]?{[SSe]:!0}:{[_Se]:!0};v.indexOf("-")>=0?b[AI]=!0:eo.test(v)?to.test(v)?b[Rf]=!0:b[RI]=!0:b[II]=!0,E5(r,v,v,b)}return E5(r,"localhost",_p,{ascii:!0}),r.jd=new Un(zv),{start:r,tokens:Object.assign({groups:e},Bie)}}function zie(t,e){const r=OSe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,c=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),c+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,c-=h,i.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function OSe(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Qo(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Un(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Un(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function N5(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const Ep={defaultProtocol:"http",events:null,format:k5,formatHref:k5,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function dA(t,e=null){let r=Object.assign({},Ep);t&&(r=Object.assign(r,t instanceof dA?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}dA.prototype={o:Ep,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:Ep[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function k5(t){return t}function Vie(t,e){this.t="token",this.v=t,this.tk=e}Vie.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Ep.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),c=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function Q0(t,e){class r extends Vie{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const T5=Q0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),O5=Q0("text"),jSe=Q0("nl"),Ig=Q0("url",{isLink:!0,toHref(t=Ep.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==_p&&t[1].t===ha}}),Ci=t=>new Un(t);function PSe({groups:t}){const e=t.domain.concat([jv,Iv,sa,Rv,Mv,Av,Dv,$v,Ni,sA,Df,Fv,qv,Lv,Es,zv,Ff,Bv]),r=[Pv,ha,aA,_s,lA,Df,$f,cA,uA,xv,wv,Mf,Af,yv,gv,vv,bv,Sv,_v,Ev,Cv,Nv,kv,Tv,Ov],n=[jv,Pv,Iv,Rv,Mv,Av,Dv,$v,Ni,Mf,Af,Df,Fv,qv,Lv,$f,Es,zv,Ff,Bv],i=Ci(),s=te(i,Ff);Ue(s,n,s),Ue(s,t.domain,s);const o=Ci(),a=Ci(),l=Ci();Ue(i,t.domain,o),Ue(i,t.scheme,a),Ue(i,t.slashscheme,l),Ue(o,n,s),Ue(o,t.domain,o);const c=te(o,sa);te(s,sa,c),te(a,sa,c),te(l,sa,c);const d=te(s,_s);Ue(d,n,s),Ue(d,t.domain,s);const h=Ci();Ue(c,t.domain,h),Ue(h,t.domain,h);const f=te(h,_s);Ue(f,t.domain,h);const p=Ci(T5);Ue(f,t.tld,p),Ue(f,t.utld,p),te(c,_p,p);const m=te(h,Ni);te(m,Ni,m),Ue(m,t.domain,h),Ue(p,t.domain,h),te(p,_s,f),te(p,Ni,m);const g=te(p,ha);Ue(g,t.numeric,T5);const v=te(o,Ni),y=te(o,_s);te(v,Ni,v),Ue(v,t.domain,o),Ue(y,n,s),Ue(y,t.domain,o);const b=Ci(Ig);Ue(y,t.tld,b),Ue(y,t.utld,b),Ue(b,t.domain,o),Ue(b,n,s),te(b,_s,y),te(b,Ni,v),te(b,sa,c);const w=te(b,ha),x=Ci(Ig);Ue(w,t.numeric,x);const S=Ci(Ig),_=Ci();Ue(S,e,S),Ue(S,r,_),Ue(_,e,S),Ue(_,r,_),te(b,Es,S),te(x,Es,S);const C=te(a,ha),E=te(l,ha),N=te(E,Es),T=te(N,Es);Ue(a,t.domain,o),te(a,_s,y),te(a,Ni,v),Ue(l,t.domain,o),te(l,_s,y),te(l,Ni,v),Ue(C,t.domain,S),te(C,Es,S),te(C,$f,S),Ue(T,t.domain,S),Ue(T,e,S),te(T,Es,S);const j=[[Mf,Af],[gv,yv],[vv,bv],[xv,wv],[Sv,_v],[Ev,Cv],[Nv,kv],[Tv,Ov]];for(let I=0;I<j.length;I++){const[O,D]=j[I],z=te(S,O);te(_,O,z),te(z,D,S);const R=Ci(Ig);Ue(z,e,R);const B=Ci();Ue(z,r),Ue(R,e,R),Ue(R,r,B),Ue(B,e,R),Ue(B,r,B),te(R,D,S),te(B,D,S)}return te(i,_p,b),te(i,oA,jSe),{start:i,tokens:Bie}}function ISe(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,c=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(c=l||a.go(r[i].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(tx(O5,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(tx(p,e,m))}}return o.length>0&&s.push(tx(O5,e,o)),s}function tx(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const RSe=typeof console<"u"&&console&&console.warn||(()=>{}),MSe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Pt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function ASe(){return Un.groups={},Pt.scanner=null,Pt.parser=null,Pt.tokenQueue=[],Pt.pluginQueue=[],Pt.customSchemes=[],Pt.initialized=!1,Pt}function j5(t,e=!1){if(Pt.initialized&&RSe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${MSe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Pt.customSchemes.push([t,e])}function DSe(){Pt.scanner=TSe(Pt.customSchemes);for(let t=0;t<Pt.tokenQueue.length;t++)Pt.tokenQueue[t][1]({scanner:Pt.scanner});Pt.parser=PSe(Pt.scanner.tokens);for(let t=0;t<Pt.pluginQueue.length;t++)Pt.pluginQueue[t][1]({scanner:Pt.scanner,parser:Pt.parser});return Pt.initialized=!0,Pt}function hA(t){return Pt.initialized||DSe(),ISe(Pt.parser.start,t,zie(Pt.scanner.start,t))}hA.scan=zie;function Uie(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new dA(r),i=hA(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var fA="[\0- -\u2029]",$Se=new RegExp(fA),FSe=new RegExp(`${fA}$`),qSe=new RegExp(fA,"g");function LSe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function BSe(t){return new Vt({key:new Or("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(c=>c.docChanged)&&!r.doc.eq(n.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=oie(r.doc,[...e]);if(fie(a).forEach(({newRange:c})=>{const d=M1e(n.doc,c,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(c.from,c.to," "," ");if(!FSe.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&f){const p=f.split($Se).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const v=hA(m).map(y=>y.toObject(t.defaultProtocol));if(!LSe(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{eA(y.from,y.to,n.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function zSe(t){return new Vt({key:new Or("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=hie(e.state,t.type.name),c=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&c&&(window.open(c,d),o=!0)}return o}}})}function VSe(t){return new Vt({key:new Or("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=Uie(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function kl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(qSe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Hie=Yc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){j5(t);return}j5(t.scheme,t.optionalSlashes)})},onDestroy(){ASe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!kl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!kl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!kl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",vr(this.options.HTMLAttributes,t),0]:["a",vr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!kl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!kl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Mc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=Uie(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!kl(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(BSe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!kl(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(zSe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(VSe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),USe=Hie,HSe=Object.defineProperty,WSe=(t,e)=>{for(var r in e)HSe(t,r,{get:e[r],enumerable:!0})},KSe="listItem",P5="textStyle",I5=/^\s*([-+*])\s$/,Wie=xi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",vr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(KSe,this.editor.getAttributes(P5)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Wd({find:I5,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wd({find:I5,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(P5),editor:this.editor})),[t]}}),Kie=xi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",vr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>iA(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),GSe={};WSe(GSe,{findListItemPos:()=>am,getNextListDepth:()=>pA,handleBackspace:()=>LI,handleDelete:()=>BI,hasListBefore:()=>Gie,hasListItemAfter:()=>YSe,hasListItemBefore:()=>Yie,listItemHasSubList:()=>Qie,nextListIsDeeper:()=>Xie,nextListIsHigher:()=>Jie});var am=(t,e)=>{const{$from:r}=e.selection,n=yr(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},pA=(t,e)=>{const r=am(t,e);if(!r)return!1;const[,n]=U1e(e,t,r.$pos.pos+4);return n},Gie=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},Yie=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},Qie=(t,e,r)=>{if(!r)return!1;const n=yr(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},LI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!rl(t.state,e)&&Gie(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const d=c.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!rl(t.state,e)||!G1e(t.state))return!1;const n=am(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=Qie(e,t.state,s);return Yie(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Xie=(t,e)=>{const r=pA(t,e),n=am(t,e);return!n||!r?!1:r>n.depth},Jie=(t,e)=>{const r=pA(t,e),n=am(t,e);return!n||!r?!1:r<n.depth},BI=(t,e)=>{if(!rl(t.state,e)||!K1e(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:Xie(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Jie(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},YSe=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},Zie=lr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&BI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&BI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&LI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&LI(t,r,n)&&(e=!0)}),e}}}}),R5=/^(\s*)(\d+)\.\s+(.*)$/,QSe=/^\s/;function XSe(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(R5);if(!s)break;const[,o,a,l]=s,c=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(R5))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(QSe))f.push(p),d+=`
${p.slice(c+2)}`,h+=1;else break}e.push({indent:c,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function ese(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);c.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=ese(f,p,r);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=h}else s+=1}return i}function JSe(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var ZSe="listItem",M5="textStyle",A5=/^(\d+)\.\s$/,tse=xi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",vr(this.options.HTMLAttributes,r),0]:["ol",vr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?JSe(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=XSe(i);if(s.length===0)return;const a=ese(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ZSe,this.editor.getAttributes(M5)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Wd({find:A5,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wd({find:A5,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(M5)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),e_e=/^\s*(\[([( |x])?\])\s$/,t_e=xi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",vr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return iA(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,c(h);const f=n.extensionManager.attributes,p=Sp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(v=>{m.has(v)||(v in g?i.setAttribute(v,g[v]):i.removeAttribute(v))}),Object.entries(p).forEach(([v,y])=>{y==null?v in g?i.setAttribute(v,g[v]):i.removeAttribute(v):i.setAttribute(v,y)}),d=m,!0}}}},addInputRules(){return[Wd({find:e_e,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),r_e=xi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",vr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=jI(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=jI(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});lr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Wie.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Kie.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Zie.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(tse.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(t_e.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(r_e.configure(this.options.taskList)),t}});var n_e=xi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",vr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),i_e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,s_e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,o_e=Yc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",vr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Hd({find:i_e,type:this.type})]},addPasteRules(){return[Mc({find:s_e,type:this.type})]}}),a_e=xi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),l_e=Yc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",vr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function c_e(t={}){return new Vt({view(e){return new u_e(e,t)}})}class u_e{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;n={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;c=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-c)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Xre(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Zt extends He{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return Zt.valid(n)?new Zt(n):He.near(n)}content(){return me.empty}eq(e){return e instanceof Zt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Zt(e.resolve(r.pos))}getBookmark(){return new mA(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!d_e(e)||!h_e(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&Zt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(Zt.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!je.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(Zt.valid(a))return a}return null}}}Zt.prototype.visible=!1;Zt.findFrom=Zt.findGapCursorFrom;He.jsonID("gapcursor",Zt);class mA{constructor(e){this.pos=e}map(e){return new mA(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return Zt.valid(r)?new Zt(r):He.near(r)}}function rse(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function d_e(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||rse(i.type))return!0;if(i.inlineContent)return!1}}return!0}function h_e(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||rse(i.type))return!0;if(i.inlineContent)return!1}}return!0}function f_e(){return new Vt({props:{decorations:y_e,createSelectionBetween(t,e,r){return e.pos==r.pos&&Zt.valid(r)?new Zt(r):null},handleClick:m_e,handleKeyDown:p_e,handleDOMEvents:{beforeinput:g_e}}})}const p_e=Jne({ArrowLeft:Rg("horiz",-1),ArrowRight:Rg("horiz",1),ArrowUp:Rg("vert",-1),ArrowDown:Rg("vert",1)});function Rg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof De){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=Zt.findGapCursorFrom(a,e,l);return c?(i&&i(n.tr.setSelection(new Zt(c))),!0):!1}}function m_e(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!Zt.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&je.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Zt(n))),!0)}function g_e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Zt))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=J.empty;for(let o=n.length-1;o>=0;o--)i=J.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new me(i,0,0));return s.setSelection(De.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function y_e(t){if(!(t.selection instanceof Zt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",qt.create(t.doc,[kn.widget(t.selection.head,e,{key:"gapcursor"})])}var Vv=200,qr=function(){};qr.prototype.append=function(e){return e.length?(e=qr.from(e),!this.length&&e||e.length<Vv&&this.leafAppend(e)||this.length<Vv&&e.leafPrepend(this)||this.appendInner(e)):this};qr.prototype.prepend=function(e){return e.length?qr.from(e).append(this):this};qr.prototype.appendInner=function(e){return new v_e(this,e)};qr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?qr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};qr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};qr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};qr.from=function(e){return e instanceof qr?e:e&&e.length?new nse(e):qr.empty};var nse=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Vv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Vv)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(qr);qr.empty=new nse([]);var v_e=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(qr);const b_e=500;class as{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new Cs(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Cs(m,void 0,void 0,c.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new as(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Cs(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>w_e&&(a=x_e(a,c),o-=c),new as(a.append(s),o)}remapping(e,r){let n=new gp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new as(this.items.append(e.map(r=>new Cs(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),v=f.selection&&f.selection.map(s.slice(l+1,p));v&&a++,n.push(new Cs(m,g,v))}else n.push(new Cs(m))},i);let c=[];for(let f=r;f<o;f++)c.push(new Cs(s.maps[f]));let d=this.items.slice(0,i).append(c).append(n),h=new as(d,a);return h.emptyItemCount()>b_e&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new Cs(c.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new as(qr.from(i.reverse()),s)}}as.empty=new as(qr.empty,0);function x_e(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Cs{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Cs(r.getMap().invert(),r,this.selection)}}}class oa{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const w_e=20;function S_e(t,e,r,n){let i=r.getMeta(uc),s;if(i)return i.historyState;r.getMeta(C_e)&&(t=new oa(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(uc))return o.getMeta(uc).redo?new oa(t.done.addTransform(r,void 0,n,dy(e)),t.undone,D5(r.mapping.maps),t.prevTime,t.prevComposition):new oa(t.done,t.undone.addTransform(r,void 0,n,dy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!__e(r,t.prevRanges)),c=o?rx(t.prevRanges,r.mapping):D5(r.mapping.maps);return new oa(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,dy(e)),as.empty,c,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new oa(t.done.rebased(r,s),t.undone.rebased(r,s),rx(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new oa(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),rx(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function __e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function D5(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function rx(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function E_e(t,e,r){let n=dy(e),i=uc.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new oa(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(uc,{redo:r,historyState:l})}let nx=!1,$5=null;function dy(t){let e=t.plugins;if($5!=e){nx=!1,$5=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){nx=!0;break}}return nx}const uc=new Or("history"),C_e=new Or("closeHistory");function N_e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Vt({key:uc,state:{init(){return new oa(as.empty,as.empty,null,0,-1)},apply(e,r,n){return S_e(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?sse:n=="historyRedo"?ose:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function ise(t,e){return(r,n)=>{let i=uc.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=E_e(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const sse=ise(!1,!0),ose=ise(!0,!0);lr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Vt({key:new Or("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>n)}})]}});var k_e=lr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[c_e(this.options)]}});lr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Vt({key:new Or("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return qt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(kn.node(c,c+l.nodeSize,{class:this.options.className}))}),qt.create(t,s)}}})]}});var T_e=lr.create({name:"gapCursor",addProseMirrorPlugins(){return[f_e()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=dt(Te(t,"allowGapCursor",r)))!=null?e:null}}}),O_e=lr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Vt({key:new Or("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,c=!o.isLeaf&&W0(o);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=kn.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),qt.create(t,i)}}})]}});lr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Vt({key:new Or("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||pie(r.selection)||t.view.dragging?null:qt.create(r.doc,[kn.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function F5({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var j_e=lr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Or(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Vt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,d=e.getState(o),h=a.content.size,f=c.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!F5({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!F5({node:o,types:n})}}})]}}),P_e=lr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>sse(t,e),redo:()=>({state:t,dispatch:e})=>ose(t,e)}},addProseMirrorPlugins(){return[N_e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),I_e=lr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(iSe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Zwe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Wie.configure(this.options.bulletList)),this.options.code!==!1&&i.push(aSe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(uSe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(dSe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(k_e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(T_e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(hSe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(fSe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(P_e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(pSe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(bSe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Kie.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Zie.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(Hie.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(tse.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(n_e.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(o_e.configure(this.options.strike)),this.options.text!==!1&&i.push(a_e.configure(this.options.text)),this.options.underline!==!1&&i.push(l_e.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(j_e.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),R_e=I_e,M_e=O_e;const Xo=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>u.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),A_e=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return u.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[u.jsx(Xo,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:u.jsx(jpe,{className:"w-4 h-4"})}),u.jsx(Xo,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:u.jsx($pe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Xo,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:u.jsx(qpe,{className:"w-4 h-4"})}),u.jsx(Xo,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:u.jsx(Fpe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Xo,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:u.jsx(yM,{className:"w-4 h-4"})}),t.isActive("link")&&u.jsx(Xo,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:u.jsx(Qpe,{className:"w-4 h-4"})}),u.jsx("div",{className:"flex-1"}),u.jsx(Xo,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:u.jsx(Ype,{className:"w-4 h-4"})}),u.jsx(Xo,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:u.jsx(Upe,{className:"w-4 h-4"})})]})};function ase({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=Gwe({extensions:[R_e.configure({heading:!1,codeBlock:!1,blockquote:!1}),M_e.configure({placeholder:r}),USe.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return u.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[u.jsx(A_e,{editor:o}),u.jsx(Bwe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),u.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function Uv(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const ix=[{id:"call",label:"Phone call",icon:xM},{id:"email",label:"Email",icon:vM},{id:"chat",label:"Chat",icon:bM},{id:"meeting",label:"Meeting",icon:Fs},{id:"coffee",label:"Coffee",icon:Dte},{id:"lunch",label:"Lunch",icon:Hte},{id:"note",label:"Other",icon:O0}];function gA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=k.useState("call"),[c,d]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState(""),[g,v]=k.useState([]),[y,b]=k.useState(!1),[w,x]=k.useState(""),{data:S}=Wc(),_=!!o;if(k.useEffect(()=>{if(t){const R=new Date,B=R.toISOString().split("T")[0],q=R.toTimeString().slice(0,5);o?(d(o.activity_date||B),f(o.activity_time||""),m(o.content||""),v(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||B),f(s.activity_time||q),m(s.content||""),v(s.participants||[]),l(s.activity_type||"note")):(d(B),f(q),m(""),v([]),l("call"))}},[t,s,o]),!t)return null;const C=(S||[]).filter(R=>R.id.toString()!==(i==null?void 0:i.toString())),E=C.filter(R=>{var B;return(B=R.name)==null?void 0:B.toLowerCase().includes(w.toLowerCase())}),N=R=>{R.preventDefault(),!Uv(p)&&(r({activity_type:a,activity_date:c||null,activity_time:h||null,content:p,participants:g}),m(""),v([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},T=()=>{m(""),v([]),d(""),f(""),b(!1),x(""),e()},j=R=>{v(B=>B.includes(R)?B.filter(q=>q!==R):[...B,R])},I=R=>{v(B=>B.filter(q=>q!==R))},O=()=>C.filter(R=>g.includes(R.id)),D=R=>{if(!R)return"";try{return new Date(R).toISOString().split("T")[0]}catch{return""}};return(ix.find(R=>R.id===a)||ix[0]).icon,u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[u.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),u.jsx("button",{onClick:T,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:N,className:"p-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-4 md:col-span-1",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:ix.map(R=>{const B=R.icon,q=a===R.id;return u.jsxs("button",{type:"button",onClick:()=>l(R.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${q?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[u.jsx(B,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs",children:R.label})]},R.id)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),u.jsx("input",{id:"activity-date",type:"date",value:D(c),onChange:R=>d(R.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),u.jsx("input",{id:"activity-time",type:"time",value:h,onChange:R=>f(R.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),O().length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:O().map(R=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[R.name,u.jsx("button",{type:"button",onClick:()=>I(R.id),className:"hover:text-primary-900",disabled:n,children:u.jsx(Mt,{className:"w-3 h-3"})})]},R.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>b(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&u.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[u.jsx("div",{className:"p-2 border-b",children:u.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:R=>x(R.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),u.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0?u.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):E.map(R=>{var q;const B=g.includes(R.id);return u.jsxs("button",{type:"button",onClick:()=>j(R.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${B?"bg-primary-50":""}`,children:[u.jsx("input",{type:"checkbox",checked:B,onChange:()=>{},className:"mr-1"}),R.thumbnail?u.jsx("img",{src:R.thumbnail,alt:R.name,className:"w-6 h-6 rounded-full"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((q=R.first_name)==null?void 0:q[0])||"?"})}),u.jsx("span",{children:R.name})]},R.id)})})]})]})]})]}),u.jsxs("div",{className:"flex flex-col md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("div",{className:"flex-1",children:u.jsx(ase,{value:p,onChange:m,placeholder:"What happened? Add your call notes, chat summary, meeting notes...",disabled:n,minHeight:"280px"})})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:[u.jsx("button",{type:"button",onClick:T,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Uv(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function Jo({title:t,value:e,icon:r,href:n}){return u.jsx(Ge,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),u.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function sx({person:t,hideStar:e=!1}){var r,n;return u.jsxs(Ge,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):u.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&u.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&u.jsx(Fd,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function D_e({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),u.jsx("p",{className:"text-xs text-gray-500",children:En(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&u.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(c=>{var d;return c.thumbnail?u.jsx("img",{src:c.thumbnail,alt:c.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},c.id):u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:u.jsx("span",{className:"text-sm",children:(d=c.name)==null?void 0:d[0]})},c.id)})})]});return i&&n?u.jsx(Ge,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):u.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function $_e({todo:t,onToggle:e}){var n;const r=nm(t);return u.jsxs(Ge,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx($s,{className:"w-5 h-5 text-primary-600"}):u.jsx($d,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),u.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&u.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[u.jsx("div",{children:En(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&u.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function F_e(){return u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:u.jsx(zte,{className:"w-12 h-12 text-primary-600"})})}),u.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Tc,"!"]}),u.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsxs(Ge,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[u.jsx(Jt,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),u.jsxs(Ge,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(Jt,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function q_e(){var T,j,I;const{data:t,isLoading:e,error:r}=tme(),{data:n}=Kte(!1),i=Gte(),s=wM(),[o,a]=k.useState(null),[l,c]=k.useState(!1),[d,h]=k.useState(!1),[f,p]=k.useState(null),m=O=>{if(!O.is_completed){a(O),c(!0);return}i.mutate({todoId:O.id,data:{content:O.content,due_date:O.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),c(!1),a(null))},v=()=>{if(!o)return;const O=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:O,activity_type:"note",participants:[]}),c(!1),h(!0)},y=async O=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:O}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch(D){console.error("Failed to create activity:",D),alert("Failed to create activity. Please try again.")}};if(e)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const O=((T=r==null?void 0:r.response)==null?void 0:T.status)>=500||!(r!=null&&r.response);return u.jsx("div",{className:"card p-8 text-center",children:u.jsx("div",{className:"text-red-600 mb-2",children:O?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),u.jsx("p",{className:"text-sm text-gray-600",children:((I=(j=r==null?void 0:r.response)==null?void 0:j.data)==null?void 0:I.message)||"An error occurred while loading your data."})]})})})}const{stats:b,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:_}=t||{};if(((b==null?void 0:b.total_people)||0)+((b==null?void 0:b.total_companies)||0)+((b==null?void 0:b.total_dates)||0)===0)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Jo,{title:"Total people",value:0,icon:Fs,href:"/people"}),u.jsx(Jo,{title:"Organizations",value:0,icon:Tr,href:"/companies"}),u.jsx(Jo,{title:"Events",value:0,icon:vo,href:"/dates"}),u.jsx(Jo,{title:"Open todos",value:0,icon:$s,href:"/todos"})]}),u.jsx(F_e,{})]});const N=(n==null?void 0:n.slice(0,5))||[];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Jo,{title:"Total people",value:(b==null?void 0:b.total_people)||0,icon:Fs,href:"/people"}),u.jsx(Jo,{title:"Organizations",value:(b==null?void 0:b.total_companies)||0,icon:Tr,href:"/companies"}),u.jsx(Jo,{title:"Events",value:(b==null?void 0:b.total_dates)||0,icon:vo,href:"/dates"}),u.jsx(Jo,{title:"Open todos",value:(b==null?void 0:b.open_todos_count)||0,icon:$s,href:"/todos"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(vo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),u.jsxs(Ge,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",u.jsx(y1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(O=>u.jsx(D_e,{reminder:O},O.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx($s,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),u.jsxs(Ge,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",u.jsx(y1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:N.length>0?N.map(O=>u.jsx($_e,{todo:O,onToggle:m},O.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Fd,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(O=>u.jsx(sx,{person:O,hideStar:!0},O.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(bM,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(_==null?void 0:_.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(O=>u.jsx(sx,{person:O},O.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),u.jsxs(Ge,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",u.jsx(y1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(O=>u.jsx(sx,{person:O},O.id)):u.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",u.jsx(Ge,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),u.jsx(OM,{isOpen:l,onClose:()=>{c(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:v}),u.jsx(gA,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function q5(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function L_e({person:t,companyName:e,isDeceased:r}){var n,i;return u.jsx(Ge,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&u.jsx(Fd,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>u.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function B_e(){const[t,e]=k.useState(!1),[r,n]=k.useState(!1),[i,s]=k.useState([]),[o,a]=k.useState(""),[l,c]=k.useState(""),[d,h]=k.useState("first_name"),[f,p]=k.useState("asc"),[m,g]=k.useState(!1),[v,y]=k.useState(!1),b=k.useRef(null),w=k.useRef(null),x=ps(),S=bt(),{data:_,isLoading:C,error:E}=Wc(),N=tt({mutationFn:async F=>{const X=[];F.email&&X.push({contact_type:"email",contact_value:F.email,contact_label:"Email"}),F.phone&&X.push({contact_type:F.phone_type||"mobile",contact_value:F.phone,contact_label:F.phone_type==="mobile"?"Mobile":"Phone"});const Q={title:`${F.first_name} ${F.last_name}`.trim(),status:"publish",acf:{first_name:F.first_name,last_name:F.last_name,nickname:F.nickname,gender:F.gender||null,how_we_met:F.how_we_met,is_favorite:F.is_favorite,contact_info:X}},Ee=await Fe.createPerson(Q),we=Ee.data.id;if(F.email)try{await Me.sideloadGravatar(we,F.email)}catch(Le){console.error("Failed to load Gravatar:",Le)}if(F.birthday&&F.birthdayType)try{await Fe.createDate({title:`${F.first_name}'s Birthday`,status:"publish",date_type:[F.birthdayType.id],acf:{date_value:F.birthday,is_recurring:!0,related_people:[we]}})}catch(Le){console.error("Failed to create birthday:",Le)}return Ee.data},onSuccess:F=>{S.invalidateQueries({queryKey:["people"]}),S.invalidateQueries({queryKey:["dashboard"]}),S.invalidateQueries({queryKey:["reminders"]}),g(!1),x(`/people/${F.id}`)}}),T=async F=>{y(!0);try{await N.mutateAsync(F)}finally{y(!1)}},{data:j}=lt({queryKey:["person-labels"],queryFn:async()=>(await Fe.getPersonLabels()).data}),I=(j==null?void 0:j.map(F=>F.name))||[],O=k.useMemo(()=>{if(!_)return[];const F=_.map(X=>X.birth_year).filter(X=>X!=null);return[...new Set(F)].sort((X,Q)=>Q-X)},[_]);k.useEffect(()=>{const F=X=>{w.current&&!w.current.contains(X.target)&&b.current&&!b.current.contains(X.target)&&e(!1)};return document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[]);const D=k.useMemo(()=>{if(!_)return[];let F=[..._];if(r&&(F=F.filter(X=>X.is_favorite)),i.length>0&&(F=F.filter(X=>{const Q=X.labels||[];return i.some(Ee=>Q.includes(Ee))})),o){const X=parseInt(o,10);F=F.filter(Q=>Q.birth_year===X)}if(l){const X=new Date;let Q;switch(l){case"7":Q=new Date(X.setDate(X.getDate()-7));break;case"30":Q=new Date(X.setDate(X.getDate()-30));break;case"90":Q=new Date(X.setDate(X.getDate()-90));break;case"365":Q=new Date(X.setDate(X.getDate()-365));break;default:Q=null}Q&&(F=F.filter(Ee=>Ee.modified?new Date(Ee.modified)>=Q:!1))}return F.sort((X,Q)=>{var ot,Wr,rr,Wt,_r,nt,mn,Dn;let Ee,we;if(d==="modified"){Ee=X.modified?new Date(X.modified).getTime():0,we=Q.modified?new Date(Q.modified).getTime():0;const Pr=Ee-we;return f==="asc"?Pr:-Pr}if(d==="first_name"?(Ee=(((ot=X.acf)==null?void 0:ot.first_name)||X.first_name||"").toLowerCase(),we=(((Wr=Q.acf)==null?void 0:Wr.first_name)||Q.first_name||"").toLowerCase()):(Ee=(((rr=X.acf)==null?void 0:rr.last_name)||X.last_name||"").toLowerCase(),we=(((Wt=Q.acf)==null?void 0:Wt.last_name)||Q.last_name||"").toLowerCase()),Ee===we){const Pr=d==="first_name"?(((_r=X.acf)==null?void 0:_r.last_name)||X.last_name||"").toLowerCase():(((nt=X.acf)==null?void 0:nt.first_name)||X.first_name||"").toLowerCase(),yt=d==="first_name"?(((mn=Q.acf)==null?void 0:mn.last_name)||Q.last_name||"").toLowerCase():(((Dn=Q.acf)==null?void 0:Dn.first_name)||Q.first_name||"").toLowerCase(),nr=Pr.localeCompare(yt);return f==="asc"?nr:-nr}const Le=Ee.localeCompare(we);return f==="asc"?Le:-Le})},[_,r,i,o,l,d,f]),z=r||i.length>0||o||l,R=F=>{s(X=>X.includes(F)?X.filter(Q=>Q!==F):[...X,F])},B=()=>{n(!1),s([]),a(""),c("")},q=k.useMemo(()=>{if(!D)return[];const F=D.map(X=>q5(X)).filter(Boolean);return[...new Set(F)]},[D]),{data:$}=lt({queryKey:["companies","batch",q.sort().join(",")],queryFn:async()=>q.length===0?[]:(await Fe.getCompanies({per_page:100,include:q.join(",")})).data,enabled:q.length>0}),G=k.useMemo(()=>{const F={};return $&&$.forEach(X=>{F[X.id]=ur(X)}),F},[$]),K=k.useMemo(()=>{const F={};return D.forEach(X=>{const Q=q5(X);Q&&G[Q]&&(F[X.id]=G[Q])}),F},[D,G]);return u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[u.jsxs("select",{value:d,onChange:F=>h(F.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[u.jsx("option",{value:"first_name",children:"First name"}),u.jsx("option",{value:"last_name",children:"Last name"}),u.jsx("option",{value:"modified",children:"Last modified"})]}),u.jsx("div",{className:"h-4 w-px bg-gray-300"}),u.jsx("button",{onClick:()=>p(f==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${f==="asc"?"descending":"ascending"}`,children:f==="asc"?u.jsx(Tpe,{className:"w-4 h-4 text-gray-600"}):u.jsx(kpe,{className:"w-4 h-4 text-gray-600"})})]}),u.jsxs("div",{className:"relative",ref:b,children:[u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${z?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[u.jsx(sI,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Filter"}),z&&u.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&u.jsx("div",{ref:w,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:F=>n(F.target.checked),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&u.jsx(WF,{className:"w-3 h-3 text-white"})}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Fd,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),u.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),I.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:I.map(F=>u.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:i.includes(F),onChange:()=>R(F),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(F)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(F)&&u.jsx(WF,{className:"w-3 h-3 text-white"})}),u.jsx("span",{className:"text-sm text-gray-700",children:F})]},F))})]}),O.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),u.jsxs("select",{value:o,onChange:F=>a(F.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"All years"}),O.map(F=>u.jsx("option",{value:F,children:F},F))]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),u.jsxs("select",{value:l,onChange:F=>c(F.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"Any time"}),u.jsx("option",{value:"7",children:"Last 7 days"}),u.jsx("option",{value:"30",children:"Last 30 days"}),u.jsx("option",{value:"90",children:"Last 90 days"}),u.jsx("option",{value:"365",children:"Last year"})]})]}),z&&u.jsx("button",{onClick:B,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),z&&u.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[u.jsx(Fd,{className:"w-3 h-3"}),"Favorites",u.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:u.jsx(Mt,{className:"w-3 h-3"})})]}),i.map(F=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[F,u.jsx("button",{onClick:()=>R(F),className:"hover:text-gray-600",children:u.jsx(Mt,{className:"w-3 h-3"})})]},F)),o&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,u.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:u.jsx(Mt,{className:"w-3 h-3"})})]}),l&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",u.jsx("button",{onClick:()=>c(""),className:"hover:text-gray-600",children:u.jsx(Mt,{className:"w-3 h-3"})})]})]}),u.jsxs("button",{onClick:()=>g(!0),className:"btn-primary",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),C&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),E&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!C&&!E&&(_==null?void 0:_.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Jt,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),u.jsxs("button",{onClick:()=>g(!0),className:"btn-primary",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!C&&!E&&(D==null?void 0:D.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(F=>u.jsx(L_e,{person:F,companyName:K[F.id],isDeceased:F.is_deceased},F.id))}),!C&&!E&&(_==null?void 0:_.length)>0&&(D==null?void 0:D.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(sI,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),u.jsx("button",{onClick:B,className:"btn-secondary",children:"Clear filters"})]}),u.jsx(NM,{isOpen:m,onClose:()=>g(!1),onSubmit:T,isLoading:v})]})}const z_e="#0285FF",V_e=k.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=z_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),U_e="#0866FF",H_e=k.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=U_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),W_e="#FF0069",K_e=k.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=W_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),G_e="#4A154B",Y_e=k.forwardRef(function({title:e="Slack",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=G_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})]})}),Q_e="#000000",X_e=k.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=Q_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),J_e="#25D366",Z_e=k.forwardRef(function({title:e="WhatsApp",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=J_e),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})]})}),eEe="#000000",tEe=k.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=eEe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),rEe={Phone:xM,Mail:vM,Users:Fs,Coffee:Dte,Utensils:Hte,FileText:O0,Circle:nI,MessageCircle:bM};function nEe({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=k.useMemo(()=>Eye(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?rI:$d;if(f.type==="activity"&&f.activity_type){const p=Nye(f.activity_type);return rEe[p]||nI}return f.type==="note"?O0:nI},c=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",v=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const b=Cye(y),w=Tye(f),x=m&&nm(f);return u.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&u.jsx("div",{className:"absolute left-0 top-1",children:u.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),u.jsx("div",{className:`${w}`,children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&u.jsx("span",{className:"text-xs font-medium text-gray-600",children:kye(f.activity_type)}),u.jsx("span",{className:"text-xs text-gray-400",children:""}),u.jsx("span",{className:"text-xs text-gray-500",children:b})]}),u.jsxs("div",{className:"flex items-start gap-2",children:[m&&u.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?u.jsx(rI,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):u.jsx($d,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(v||g)&&((S=f.content)!=null&&S.includes("<"))?u.jsx("div",{className:`text-sm flex-1 timeline-content ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):u.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&u.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const C=a(_);return C?u.jsxs(Ge,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[u.jsx(yM,{className:"w-3 h-3"}),C.name]},_):null})]}),m&&f.due_date&&u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",En(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&u.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&u.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),u.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(c)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?u.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function iEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i=""}){const[s,o]=k.useState("");if(k.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=c=>{c.preventDefault(),!Uv(s)&&(r(s),o(""))},l=()=>{o(""),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),u.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),u.jsx(ase,{value:s,onChange:o,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:l,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Uv(s),children:n?"Adding...":"Add note"})]})]})]})})}function lse({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=k.useState(""),[a,l]=k.useState(""),[c,d]=k.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(k.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:c}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:f,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&u.jsx("div",{className:"mb-4",children:u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:c,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),u.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}const sEe=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"slack",label:"Slack"},{value:"other",label:"Other"}];function oEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,contactInfo:i=[]}){const{register:s,control:o,handleSubmit:a,reset:l,formState:{errors:c}}=Kc({defaultValues:{contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]}}),{fields:d,append:h,remove:f}=Dme({control:o,name:"contacts"});if(k.useEffect(()=>{t&&l({contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]})},[t,i,l]),!t)return null;const p=g=>{const v=g.contacts.filter(y=>y.contact_type&&y.contact_value);r(v)},m=()=>{h({contact_type:"",contact_label:"",contact_value:""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Edit contact details"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a(p),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[d.length===0?u.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:'No contact details yet. Click "Add contact detail" to add one.'}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-2 text-xs font-medium text-gray-500 px-1",children:[u.jsx("div",{className:"col-span-3",children:"Type"}),u.jsx("div",{className:"col-span-3",children:"Label"}),u.jsx("div",{className:"col-span-5",children:"Value"}),u.jsx("div",{className:"col-span-1"})]}),d.map((g,v)=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 p-3 md:p-2 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Type"}),u.jsxs("select",{...s(`contacts.${v}.contact_type`,{required:!0}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n,children:[u.jsx("option",{value:"",children:"Select type..."}),sEe.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))]})]}),u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Label"}),u.jsx("input",{...s(`contacts.${v}.contact_label`),placeholder:"e.g., Work",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{className:"md:col-span-5",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Value"}),u.jsx("input",{...s(`contacts.${v}.contact_value`,{required:!0}),placeholder:"e.g., john@example.com",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsx("div",{className:"md:col-span-1 flex items-center justify-end md:justify-center",children:u.jsx("button",{type:"button",onClick:()=>f(v),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",disabled:n,children:u.jsx(di,{className:"w-4 h-4"})})})]},g.id))]}),u.jsxs("button",{type:"button",onClick:m,className:"mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",disabled:n,children:[u.jsx(Jt,{className:"w-4 h-4"}),"Add contact detail"]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":"Save changes"})]})]})]})})}function aEe({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=k.useState(""),[a,l]=k.useState(!1),c=k.useRef(null),d=k.useRef(null),h=k.useMemo(()=>r.filter(b=>b.id!==i).sort((b,w)=>{var _,C;const x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((C=w.acf)==null?void 0:C.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=k.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(b=>{var _,C;const w=nd(b).toLowerCase(),x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(b.last_name||((C=b.acf)==null?void 0:C.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=k.useMemo(()=>h.find(y=>y.id===t),[h,t]);k.useEffect(()=>{const y=b=>{d.current&&!d.current.contains(b.target)&&c.current&&!c.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},v=p?nd(p):"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:p&&!a?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[u.jsx("span",{children:v}),u.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Mt,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:c,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&u.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>u.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:nd(y)},y.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function lEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,relationship:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1,onCreatePerson:l}){const c=!!i,{data:d=[],isLoading:h}=lt({queryKey:["relationship-types"],queryFn:async()=>(await Fe.getRelationshipTypes()).data}),{register:f,handleSubmit:p,reset:m,control:g,formState:{errors:v}}=Kc({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});if(k.useEffect(()=>{t&&m(i?{related_person:i.related_person||null,relationship_type:i.relationship_type?String(i.relationship_type):"",relationship_label:i.relationship_label||""}:{related_person:null,relationship_type:"",relationship_label:""})},[t,i,m]),!t)return null;const y=b=>{r({related_person:b.related_person||null,relationship_type:b.relationship_type?parseInt(b.relationship_type,10):null,relationship_label:b.relationship_label||""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:c?"Edit relationship":"Add relationship"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:p(y),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related person *"}),u.jsx(Gy,{name:"related_person",control:g,rules:{required:"Please select a person"},render:({field:b})=>u.jsx(aEe,{value:b.value,onChange:b.onChange,people:o,isLoading:a,excludePersonId:parseInt(s,10)})}),v.related_person&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.related_person.message}),!c&&l&&u.jsx("div",{className:"mt-2",children:u.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[u.jsx(Jt,{className:"w-4 h-4"}),"Add new person"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Relationship type"}),u.jsxs("select",{...f("relationship_type"),className:"input",disabled:h||n,children:[u.jsx("option",{value:"",children:"Select a type..."}),d.map(b=>u.jsx("option",{value:b.id,children:b.name},b.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Custom label"}),u.jsx("input",{...f("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law",disabled:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":c?"Save changes":"Add relationship"})]})]})]})})}function cEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,address:i=null}){const s=!!i,{register:o,handleSubmit:a,reset:l,formState:{errors:c}}=Kc({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});if(k.useEffect(()=>{t&&l(i?{address_label:i.address_label||"",street:i.street||"",postal_code:i.postal_code||"",city:i.city||"",state:i.state||"",country:i.country||""}:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""})},[t,i,l]),!t)return null;const d=h=>{r({address_label:h.address_label||"",street:h.street||"",postal_code:h.postal_code||"",city:h.city||"",state:h.state||"",country:h.country||""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit address":"Add address"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a(d),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...o("address_label"),className:"input",placeholder:"e.g., Home, Work",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Street"}),u.jsx("input",{...o("street"),className:"input",placeholder:"e.g., 123 Main Street",disabled:n})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Postal code"}),u.jsx("input",{...o("postal_code"),className:"input",placeholder:"e.g., 12345",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"City"}),u.jsx("input",{...o("city"),className:"input",placeholder:"e.g., Amsterdam",disabled:n})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"State/Province"}),u.jsx("input",{...o("state"),className:"input",placeholder:"e.g., North Holland",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Country"}),u.jsx("input",{...o("country"),className:"input",placeholder:"e.g., Netherlands",disabled:n})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add address"})]})]})]})})}function uEe({value:t,onChange:e,companies:r,isLoading:n}){return u.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return u.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function dEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,workHistoryItem:i=null}){const s=!!i,{data:o=[],isLoading:a}=lt({queryKey:["companies","all"],queryFn:async()=>(await Fe.getCompanies({per_page:100})).data}),l=k.useMemo(()=>[...o].sort((v,y)=>{var x,S;const b=(((x=v.title)==null?void 0:x.rendered)||v.title||"").toLowerCase(),w=(((S=y.title)==null?void 0:S.rendered)||y.title||"").toLowerCase();return b.localeCompare(w)}),[o]),{register:c,handleSubmit:d,reset:h,watch:f,control:p,formState:{errors:m}}=Kc({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});if(f("is_current"),k.useEffect(()=>{t&&h(i?{company:i.company||null,job_title:i.job_title||"",description:i.description||"",start_date:i.start_date||"",end_date:i.end_date||"",is_current:i.is_current||!1}:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1})},[t,i,h]),!t)return null;const g=v=>{r({company:v.company||null,job_title:v.job_title||"",description:v.description||"",start_date:v.start_date||"",end_date:v.end_date||"",is_current:v.is_current||!1})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit work history":"Add work history"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:d(g),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization"}),u.jsx(Gy,{name:"company",control:p,render:({field:v})=>u.jsx(uEe,{value:v.value,onChange:v.onChange,companies:l,isLoading:a||n})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Job title"}),u.jsx("input",{...c("job_title"),className:"input",placeholder:"e.g., Software Engineer",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Description"}),u.jsx("textarea",{...c("description"),className:"input",rows:3,placeholder:"Job description, responsibilities, achievements...",disabled:n})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Start date"}),u.jsx("input",{type:"date",...c("start_date"),className:"input",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"End date"}),u.jsx("input",{type:"date",...c("end_date"),className:"input",disabled:n})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_current",...c("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),u.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add work history"})]})]})]})})}function Fn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function hEe(t){return t?t.replace(/[^\d+]/g,""):""}function L5(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function fEe(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function pEe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${Fn(l)}`),s.push(`N:${Fn(a)};${Fn(o)};;;`),i.nickname&&s.push(`NICKNAME:${Fn(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=Fn(h.contact_value),p=h.contact_label?Fn(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",v=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=hEe(h.contact_value);y&&s.push(`${v}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let b=h.contact_value;b.match(/^https?:\/\//i)||(b=`https://${b}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${Fn(b)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=Fn(h.street||""),m=Fn(h.city||""),g=Fn(h.state||""),v=Fn(h.postal_code||""),y=Fn(h.country||"");(p||m||g||v||y)&&s.push(`${f}:;;${p};${m};${g};${v};${y}`)});const{title:c,org:d}=fEe(i.work_history,r);if(d&&s.push(`ORG:${Fn(d)}`),c&&s.push(`TITLE:${Fn(c)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=L5(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=L5(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function mEe(t,e={}){const{filename:r,...n}=e,i=pEe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const gEe=({className:t})=>u.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:u.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function Mg(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function yEe(){var ID,RD,MD,AD,DD,$D,FD,qD,LD,BD,zD,VD,UD,HD,WD,KD,GD;const{id:t}=nM(),e=ps(),r=bt(),{data:n,isLoading:i,error:s}=Qte(t),{data:o}=sme(t),{data:a}=ome(t),l=lme(),c=ume(),d=mme(),h=ame(),f=cme(),p=wM(),m=dme(),g=Xte(),v=fme(),y=hme(),b=pme(),{data:w,isLoading:x}=Wc(),{data:S=[]}=lt({queryKey:["investments",t],queryFn:async()=>(await Me.getInvestments(t)).data,enabled:!!t}),[_,C]=k.useState("profile"),[E,N]=k.useState(!1),[T,j]=k.useState(""),[I,O]=k.useState(!1),D=k.useRef(null),[z,R]=k.useState(!1),[B,q]=k.useState(!1),[$,G]=k.useState(!1),[K,F]=k.useState(!1),[X,Q]=k.useState(!1),[Ee,we]=k.useState(!1),[Le,ot]=k.useState(!1),[Wr,rr]=k.useState(!1),[Wt,_r]=k.useState(!1),[nt,mn]=k.useState(!1),[Dn,Pr]=k.useState(!1),[yt,nr]=k.useState(!1),[Ws,Er]=k.useState(!1),[A,L]=k.useState(!1),[H,le]=k.useState(!1),[ee,Z]=k.useState(null),[pe,ze]=k.useState(null),[Ve,_t]=k.useState(null),[_e,ne]=k.useState(null),[fe,ce]=k.useState(null),[Ce,We]=k.useState(null),[oi,gn]=k.useState(null),[gu,xl]=k.useState(null),[Um,wl]=k.useState(null),[ai,Sl]=k.useState(null),[Ib,_l]=k.useState(!1),[Rb,Fh]=k.useState(null),{data:Mb}=lt({queryKey:["person-labels"],queryFn:async()=>(await Fe.getPersonLabels()).data}),Hm=Mb||[],ye=(n==null?void 0:n.labels)||[],ke=((AD=(MD=(RD=(ID=n==null?void 0:n._embedded)==null?void 0:ID["wp:term"])==null?void 0:RD.flat())==null?void 0:MD.filter(P=>(P==null?void 0:P.taxonomy)==="person_label"))==null?void 0:AD.map(P=>P.id))||[],Ae=Hm.filter(P=>!ye.includes(P.name));ch((n==null?void 0:n.name)||((DD=n==null?void 0:n.title)==null?void 0:DD.rendered)||(n==null?void 0:n.title)||"Person");const ut=a==null?void 0:a.find(P=>{const U=Array.isArray(P.date_type)?P.date_type[0]:P.date_type;return(U==null?void 0:U.toLowerCase())==="birthday"}),yn=ut!=null&&ut.date_value?new Date(ut.date_value):null,Ab=(ut==null?void 0:ut.year_unknown)??!1,vs=a==null?void 0:a.find(P=>{const U=Array.isArray(P.date_type)?P.date_type[0]:P.date_type;return(U==null?void 0:U.toLowerCase())==="died"}),El=vs!=null&&vs.date_value?new Date(vs.date_value):null,Wm=(vs==null?void 0:vs.year_unknown)??!1,Ks=!!El,yu=yn&&!Ab?k1(Ks?El:new Date,yn):null,_D=a?[...a].sort((P,U)=>{const Y=P.date_value?new Date(P.date_value):new Date(0),ge=U.date_value?new Date(U.date_value):new Date(0);return Y-ge}):[],ale=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch(P){console.error("Failed to delete person:",P),alert("Failed to delete person. Please try again.")}},lle=P=>{if(!P)return"";let U=P.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const Y=U.startsWith("+");return U=U.replace(/\D/g,""),Y?`+${U}`:U},cle=async P=>{mn(!0);try{const U=Xs(n.acf,{contact_info:P});await h.mutateAsync({id:t,data:{acf:U}}),F(!1)}catch(U){console.error("Failed to save contacts:",U),alert("Failed to save contacts. Please try again.")}finally{mn(!1)}},ule=async P=>{Pr(!0);try{Ve?await Fe.updateDate(Ve.id,{title:P.title,date_type:P.date_type,acf:{date_value:P.date_value,related_people:P.related_people,is_recurring:P.is_recurring,year_unknown:P.year_unknown}}):await Fe.createDate({title:P.title,status:"publish",date_type:P.date_type,acf:{date_value:P.date_value,related_people:P.related_people,is_recurring:P.is_recurring,year_unknown:P.year_unknown}}),r.invalidateQueries({queryKey:["person-dates",t]}),r.invalidateQueries({queryKey:["reminders"]}),Q(!1),_t(null)}catch(U){console.error("Failed to save date:",U),alert("Failed to save date. Please try again.")}finally{Pr(!1)}},dle=async P=>{var U;nr(!0);try{const Y=[...((U=n.acf)==null?void 0:U.relationships)||[]],ge={related_person:P.related_person||null,relationship_type:P.relationship_type||null,relationship_label:P.relationship_label||""};fe!==null?Y[fe]=ge:Y.push(ge);const Pe=Xs(n.acf,{relationships:Y});await h.mutateAsync({id:t,data:{acf:Pe}}),r.invalidateQueries({queryKey:["person",t]}),we(!1),ne(null),ce(null)}catch(Y){console.error("Failed to save relationship:",Y),alert("Failed to save relationship. Please try again.")}finally{nr(!1)}},hle=async P=>{var U;Er(!0);try{const Y=[...((U=n.acf)==null?void 0:U.addresses)||[]],ge={address_label:P.address_label||"",street:P.street||"",postal_code:P.postal_code||"",city:P.city||"",state:P.state||"",country:P.country||""};oi!==null?Y[oi]=ge:Y.push(ge);const Pe=Xs(n.acf,{addresses:Y});await h.mutateAsync({id:t,data:{acf:Pe}}),ot(!1),We(null),gn(null)}catch(Y){console.error("Failed to save address:",Y),alert("Failed to save address. Please try again.")}finally{Er(!1)}},fle=async P=>{var U;L(!0);try{const Y=[...((U=n.acf)==null?void 0:U.work_history)||[]],ge={company:P.company||null,job_title:P.job_title||"",description:P.description||"",start_date:P.start_date||"",end_date:P.end_date||"",is_current:P.is_current||!1};Um!==null?Y[Um]=ge:Y.push(ge);const Pe=Xs(n.acf,{work_history:Y});await h.mutateAsync({id:t,data:{acf:Pe}}),rr(!1),xl(null),wl(null)}catch(Y){console.error("Failed to save work history:",Y),alert("Failed to save work history. Please try again.")}finally{L(!1)}},ple=async P=>{le(!0);try{const U=Xs(n.acf,{first_name:P.first_name,last_name:P.last_name,nickname:P.nickname,gender:P.gender||null,how_we_met:P.how_we_met,is_favorite:P.is_favorite});await h.mutateAsync({id:t,data:{title:`${P.first_name} ${P.last_name}`.trim(),acf:U}}),_r(!1)}catch(U){console.error("Failed to save person:",U),alert("Failed to save person. Please try again.")}finally{le(!1)}},mle=async P=>{var ge;if(!window.confirm("Are you sure you want to delete this address?"))return;const U=[...((ge=n.acf)==null?void 0:ge.addresses)||[]];U.splice(P,1);const Y=Xs(n.acf,{addresses:U});await h.mutateAsync({id:t,data:{acf:Y}})},gle=async P=>{var $n,Ys,qh,Xm,YD,QD;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const U=(Ys=($n=n.acf)==null?void 0:$n.relationships)==null?void 0:Ys[P];if(!U)return;const Y=U.related_person,ge=U.relationship_type;let Pe=!0;Y&&ge&&(Pe=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let Xe=null;if(!Pe&&Y&&ge)try{const[bs,Jm]=await Promise.all([Fe.getPerson(Y,{_embed:!0}),Fe.getRelationshipTypes()]),qb={};Jm.data.forEach(Lh=>{qb[Lh.id]=Lh});const Ei=qb[ge],Nl=(qh=Ei==null?void 0:Ei.acf)==null?void 0:qh.inverse_relationship_type;if(Nl){const Bh=(((Xm=bs.data.acf)==null?void 0:Xm.relationships)||[]).find(Qs=>{var XD,JD;const qle=typeof Qs.related_person=="object"?(XD=Qs.related_person)==null?void 0:XD.ID:Qs.related_person,Lle=typeof Qs.relationship_type=="object"?(JD=Qs.relationship_type)==null?void 0:JD.term_id:Qs.relationship_type;return qle===parseInt(t)&&Lle===Nl});Bh&&(Xe={related_person:parseInt(t),relationship_type:Nl,relationship_label:Bh.relationship_label||""})}}catch(bs){console.error("Failed to fetch inverse relationship:",bs)}const at=[...((YD=n.acf)==null?void 0:YD.relationships)||[]];at.splice(P,1);const Gs=Xs(n.acf,{relationships:at});if(await h.mutateAsync({id:t,data:{acf:Gs}}),!Pe&&Xe&&Y){await new Promise(bs=>setTimeout(bs,500));try{const bs=await Fe.getPerson(Y,{_embed:!0}),Jm=((QD=bs.data.acf)==null?void 0:QD.relationships)||[];if(!Jm.some(Ei=>{var Bh,Qs;const Nl=typeof Ei.related_person=="object"?(Bh=Ei.related_person)==null?void 0:Bh.ID:Ei.related_person,Lh=typeof Ei.relationship_type=="object"?(Qs=Ei.relationship_type)==null?void 0:Qs.term_id:Ei.relationship_type;return Nl===Xe.related_person&&Lh===Xe.relationship_type})){const Ei=[...Jm,Xe],Nl=Xs(bs.data.acf,{relationships:Ei});await Fe.updatePerson(Y,{acf:Nl})}}catch(bs){console.error("Failed to restore inverse relationship:",bs)}}r.invalidateQueries({queryKey:["person",t]}),Y&&r.invalidateQueries({queryKey:["person",Y]}),r.invalidateQueries({queryKey:["people"]})},yle=async P=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:P,personId:t})},vle=async P=>{window.confirm("Are you sure you want to delete this note?")&&await c.mutateAsync({noteId:P,personId:t})},ble=async P=>{try{await f.mutateAsync({personId:t,content:P}),R(!1)}catch(U){console.error("Failed to create note:",U),alert("Failed to create note. Please try again.")}},xle=async P=>{try{pe?(await m.mutateAsync({activityId:pe.id,data:P,personId:t}),ze(null)):(await p.mutateAsync({personId:t,data:P}),ai&&(await v.mutateAsync({todoId:ai.id,data:{content:ai.content,due_date:ai.due_date,is_completed:!0},personId:t}),Sl(null),Fh(null))),q(!1)}catch(U){console.error("Failed to save activity:",U),alert("Failed to save activity. Please try again.")}},wle=async P=>{try{await g.mutateAsync({personId:t,data:P}),G(!1),Z(null)}catch(U){console.error("Failed to create todo:",U),alert("Failed to create todo. Please try again.")}},Sle=async P=>{if(ee)try{await v.mutateAsync({todoId:ee.id,data:P,personId:t}),G(!1),Z(null)}catch(U){console.error("Failed to update todo:",U),alert("Failed to update todo. Please try again.")}},ED=async P=>{if(!P.is_completed){Sl(P),_l(!0);return}try{await v.mutateAsync({todoId:P.id,data:{content:P.content,due_date:P.due_date,is_completed:!1},personId:t})}catch(U){console.error("Failed to toggle todo:",U),alert("Failed to update todo. Please try again.")}},_le=async()=>{if(ai)try{await v.mutateAsync({todoId:ai.id,data:{content:ai.content,due_date:ai.due_date,is_completed:!0},personId:t}),_l(!1),Sl(null)}catch(P){console.error("Failed to complete todo:",P),alert("Failed to complete todo. Please try again.")}},Ele=()=>{if(!ai)return;const P=new Date().toISOString().split("T")[0];Fh({content:ai.content,activity_date:P,activity_type:"note",participants:[]}),_l(!1),q(!0)},Cle=async P=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:P,personId:t})},CD=async P=>{window.confirm("Are you sure you want to delete this todo?")&&await b.mutateAsync({todoId:P,personId:t})},Nle=P=>{P.type==="todo"?(Z(P),G(!0)):P.type==="activity"&&(ze(P),q(!0))},kle=P=>{P.type==="note"?vle(P.id):P.type==="activity"?Cle(P.id):P.type==="todo"&&CD(P.id)},Tle=async P=>{var ge;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const U=[...((ge=n.acf)==null?void 0:ge.work_history)||[]];U.splice(P,1);const Y=Xs(n.acf,{work_history:U});await h.mutateAsync({id:t,data:{acf:Y}})},Ole=async P=>{var ge,Pe,Xe;const U=(Xe=(Pe=(ge=n==null?void 0:n._embedded)==null?void 0:ge["wp:term"])==null?void 0:Pe.flat())==null?void 0:Xe.find(at=>(at==null?void 0:at.taxonomy)==="person_label"&&(at==null?void 0:at.name)===P);if(!U)return;const Y=ke.filter(at=>at!==U.id);await h.mutateAsync({id:t,data:{person_label:Y}})},jle=async()=>{if(!T)return;const P=Hm.find(Y=>Y.id.toString()===T);if(!P)return;const U=[...ke,P.id];await h.mutateAsync({id:t,data:{person_label:U}}),j(""),N(!1)},Ple=async P=>{var Y;const U=(Y=P.target.files)==null?void 0:Y[0];if(U){if(!U.type.startsWith("image/")){alert("Please select an image file");return}if(U.size>5*1024*1024){alert("Image size must be less than 5MB");return}O(!0);try{await Me.uploadPersonPhoto(t,U),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch(ge){console.error("Failed to upload photo:",ge),alert("Failed to upload photo. Please try again.")}finally{O(!1),D.current&&(D.current.value="")}}},Ile=()=>{if(n)try{mEe(n,{companyMap:$b,personDates:a||[]})}catch(P){console.error("Failed to export vCard:",P),alert("Failed to export vCard. Please try again.")}},ND=((FD=($D=n==null?void 0:n.acf)==null?void 0:$D.work_history)==null?void 0:FD.map(P=>P.company).filter(Boolean))||[],Rle=ry({queries:ND.map(P=>({queryKey:["company",P],queryFn:async()=>(await Fe.getCompany(P,{_embed:!0})).data,enabled:!!P}))}),Mle=k.useMemo(()=>{var P;return(P=n==null?void 0:n.acf)!=null&&P.work_history?n.acf.work_history.filter(U=>!U.end_date&&U.company).map(U=>U.company):[]},[(qD=n==null?void 0:n.acf)==null?void 0:qD.work_history]),kD=ry({queries:Mle.map(P=>({queryKey:["company-people",P],queryFn:async()=>{const U=await Me.getCompanyPeople(P);return{companyId:P,...U.data}},enabled:!!P}))}),Km=k.useMemo(()=>{const P=new Map;return kD.forEach(U=>{var Y;(Y=U.data)!=null&&Y.current&&U.data.current.forEach(ge=>{if(ge.id!==parseInt(t))if(P.has(ge.id)){const Pe=P.get(ge.id);Pe.companies.includes(U.data.companyId)||Pe.companies.push(U.data.companyId)}else P.set(ge.id,{...ge,companies:[U.data.companyId]})})}),Array.from(P.values()).sort((U,Y)=>(U.name||"").localeCompare(Y.name||""))},[kD,t]),Cl=((BD=(LD=n==null?void 0:n.acf)==null?void 0:LD.relationships)==null?void 0:BD.map(P=>P.related_person).filter(Boolean))||[],Gm=ry({queries:Cl.map(P=>({queryKey:["person-dates",P],queryFn:async()=>(await Me.getPersonDates(P)).data,enabled:!!P}))}),Db=k.useMemo(()=>{const P={};return Gm.forEach((U,Y)=>{if(U.data&&Cl[Y]){const ge=Cl[Y],Pe=U.data.find(Xe=>{const at=Array.isArray(Xe.date_type)?Xe.date_type[0]:Xe.date_type;return(at==null?void 0:at.toLowerCase())==="birthday"});if(Pe!=null&&Pe.date_value){const Xe=new Date(Pe.date_value);P[ge]=k1(new Date,Xe)}else P[ge]=-1}}),P},[Gm,Cl]),Ale=k.useMemo(()=>{const P={};return Gm.forEach((U,Y)=>{if(U.data&&Cl[Y]){const ge=Cl[Y],Pe=U.data.some(Xe=>{const at=Array.isArray(Xe.date_type)?Xe.date_type[0]:Xe.date_type;return(at==null?void 0:at.toLowerCase())==="died"});P[ge]=Pe}}),P},[Gm,Cl]),Ym=k.useMemo(()=>{var P;return(P=n==null?void 0:n.acf)!=null&&P.relationships?[...n.acf.relationships].sort((U,Y)=>{const ge=Db[U.related_person]??-1,Pe=Db[Y.related_person]??-1;return ge===-1&&Pe===-1?0:ge===-1?1:Pe===-1?-1:Pe-ge}):[]},[(zD=n==null?void 0:n.acf)==null?void 0:zD.relationships,Db]),$b={};Rle.forEach((P,U)=>{var Y,ge,Pe,Xe,at,Gs,$n,Ys,qh;if(P.data){const Xm=ND[U];$b[Xm]={name:ur(P.data),logo:((Pe=(ge=(Y=P.data._embedded)==null?void 0:Y["wp:featuredmedia"])==null?void 0:ge[0])==null?void 0:Pe.source_url)||((qh=(Ys=($n=(Gs=(at=(Xe=P.data._embedded)==null?void 0:Xe["wp:featuredmedia"])==null?void 0:at[0])==null?void 0:Gs.media_details)==null?void 0:$n.sizes)==null?void 0:Ys.thumbnail)==null?void 0:qh.source_url)||null}}});const Qm=k.useMemo(()=>{var P;return(P=n==null?void 0:n.acf)!=null&&P.work_history?[...n.acf.work_history].map((U,Y)=>({...U,originalIndex:Y})).sort((U,Y)=>{if(U.is_current&&!Y.is_current)return-1;if(!U.is_current&&Y.is_current)return 1;const ge=U.start_date?new Date(U.start_date):new Date(0);return(Y.start_date?new Date(Y.start_date):new Date(0))-ge}):[]},[(VD=n==null?void 0:n.acf)==null?void 0:VD.work_history]),TD=k.useMemo(()=>o?o.filter(U=>U.type==="todo").sort((U,Y)=>{if(U.is_completed&&!Y.is_completed)return 1;if(!U.is_completed&&Y.is_completed)return-1;if(!U.is_completed&&!Y.is_completed){if(U.due_date&&Y.due_date)return new Date(U.due_date)-new Date(Y.due_date);if(U.due_date&&!Y.due_date)return-1;if(!U.due_date&&Y.due_date)return 1}return new Date(Y.created)-new Date(U.created)}):[],[o]);if(k.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(Ge,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const Cr=n.acf||{},Fb=["facebook","linkedin","instagram","twitter","bluesky","threads","website"],Dle=((UD=Cr.contact_info)==null?void 0:UD.filter(P=>Fb.includes(P.contact_type)))||[],OD=(HD=Cr.contact_info)==null?void 0:HD.find(P=>P.contact_type==="mobile"),jD={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,whatsapp:7,website:8},PD=(()=>{const P=[...Dle];return OD&&P.push({contact_type:"whatsapp",contact_value:`https://wa.me/${OD.contact_value.replace(/[^0-9+]/g,"")}`}),P.sort((U,Y)=>{const ge=jD[U.contact_type]||99,Pe=jD[Y.contact_type]||99;return ge-Pe})})(),$le=P=>{switch(P){case"facebook":return H_e;case"linkedin":return gEe;case"instagram":return K_e;case"twitter":return tEe;case"bluesky":return V_e;case"threads":return X_e;case"whatsapp":return Z_e;case"website":return oy;default:return oy}},Fle=P=>{switch(P){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"whatsapp":return"text-[#25D366]";case"website":return"text-gray-600";default:return"text-gray-600"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(Ge,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(T0,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Ile,className:"btn-secondary",children:[u.jsx(iI,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),u.jsxs("button",{onClick:()=>_r(!0),className:"btn-secondary",children:[u.jsx(Vte,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),u.jsxs("button",{onClick:ale,className:"btn-danger",children:[u.jsx(di,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),u.jsxs("div",{className:"card p-6 relative",children:[u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx(Ge,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"})}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[n.thumbnail?u.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):u.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((WD=n.first_name)==null?void 0:WD[0])||"?"})}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var P;return(P=D.current)==null?void 0:P.click()},children:I?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ate,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:D,type:"file",accept:"image/*",onChange:Ple,className:"hidden",disabled:I})]}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,Ks&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&u.jsx(Fd,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),Cr.nickname&&u.jsxs("p",{className:"text-gray-500",children:['"',Cr.nickname,'"']}),Ks&&El&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Mg(Cr.gender)&&u.jsx("span",{className:"mr-1",children:Mg(Cr.gender)}),"Died ",En(El,Wm?"MMMM d":"MMMM d, yyyy"),yu!==null&&` at age ${yu}`]}),!Ks&&yu!==null&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Mg(Cr.gender)&&u.jsx("span",{className:"mr-1",children:Mg(Cr.gender)}),yu," years old"]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map((P,U)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[P,u.jsx("button",{onClick:()=>Ole(P),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:u.jsx(Mt,{className:"w-3 h-3"})})]},U)),E?u.jsxs("div",{className:"inline-flex items-center gap-2",children:[u.jsxs("select",{value:T,onChange:P=>j(P.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:Ae.length===0,children:[u.jsx("option",{value:"",children:"Select a label..."}),Ae.map(P=>u.jsx("option",{value:P.id,children:P.name},P.id))]}),u.jsx("button",{onClick:jle,disabled:!T,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),u.jsx("button",{onClick:()=>{N(!1),j("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):Ae.length>0&&u.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[u.jsx(Jt,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),PD.length>0&&u.jsx("div",{className:"flex items-center gap-3 mt-4",children:PD.map((P,U)=>{const Y=$le(P.contact_type),ge=Fle(P.contact_type);let Pe=P.contact_value;return Pe.match(/^https?:\/\//i)||(Pe=`https://${Pe}`),u.jsx("a",{href:Pe,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${ge}`,title:`${P.contact_type.charAt(0).toUpperCase()+P.contact_type.slice(1)}: ${P.contact_value}`,children:u.jsx(Y,{className:"w-5 h-5"})},U)})})]})]})]})]}),u.jsx("div",{className:"border-b border-gray-200",children:u.jsxs("nav",{className:"flex gap-8",children:[u.jsx("button",{onClick:()=>C("profile"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${_==="profile"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Profile"}),u.jsx("button",{onClick:()=>C("timeline"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${_==="timeline"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Timeline"}),u.jsx("button",{onClick:()=>C("work"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${_==="work"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Work"})]})}),u.jsxs("div",{className:"space-y-6",children:[_==="profile"&&u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[!Ks&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Contact information"}),u.jsxs("button",{onClick:()=>F(!0),className:"btn-secondary text-sm",children:[u.jsx(na,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]}),((KD=Cr.contact_info)==null?void 0:KD.filter(P=>!Fb.includes(P.contact_type)).length)>0?u.jsx("div",{className:"space-y-2",children:(()=>{const P={email:1,phone:2,mobile:2,slack:3,calendar:4,other:5};return Cr.contact_info.filter(Y=>!Fb.includes(Y.contact_type)).map((Y,ge)=>({...Y,originalIndex:ge})).sort((Y,ge)=>{const Pe=P[Y.contact_type]||99,Xe=P[ge.contact_type]||99;return Pe!==Xe?Pe-Xe:Y.originalIndex-ge.originalIndex}).map(Y=>{const ge=Y.contact_type==="email"?vM:Y.contact_type==="phone"||Y.contact_type==="mobile"?xM:Y.contact_type==="slack"?Y_e:Y.contact_type==="calendar"?vo:oy,Pe=Y.contact_type==="email",Xe=Y.contact_type==="phone"||Y.contact_type==="mobile",at=Y.contact_type==="slack",Gs=Y.contact_type==="calendar";let $n=null,Ys=null;return Pe?$n=`mailto:${Y.contact_value}`:Xe?$n=`tel:${lle(Y.contact_value)}`:(at||Gs)&&($n=Y.contact_value,Ys="_blank"),u.jsx("div",{children:u.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5",children:[u.jsx(ge,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[Y.contact_label||Y.contact_type,": "]}),$n?u.jsx("a",{href:$n,target:Ys||void 0,rel:Ys==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:Y.contact_value}):u.jsx("span",{children:Y.contact_value})]})]})},Y.originalIndex)})})()}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No contact information yet. ",u.jsx("button",{onClick:()=>F(!0),className:"text-primary-600 hover:underline",children:"Add some"})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Important dates"}),u.jsxs("button",{onClick:()=>{_t(null),Q(!0)},className:"btn-secondary text-sm",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add Important Date"})]})]}),_D.length>0?u.jsx("div",{className:"space-y-3",children:_D.map(P=>{const U=Array.isArray(P.date_type)?P.date_type[0]:P.date_type,Y=(U==null?void 0:U.toLowerCase())||"",ge=Y.includes("died"),Pe=Y.includes("wedding")||Y.includes("marriage")?Mpe:Y.includes("birthday")?Rpe:vo,Xe=P.year_unknown?"MMMM d":"MMMM d, yyyy";return u.jsxs("div",{className:"flex items-start group",children:[u.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:ge?u.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):u.jsx(Pe,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium",children:P.title}),u.jsx("p",{className:"text-xs text-gray-500",children:P.date_value&&En(new Date(P.date_value),Xe)}),U&&u.jsx("p",{className:"text-xs text-gray-400 capitalize",children:U})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>{_t(P),Q(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>yle(P.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},P.id)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No important dates yet. ",u.jsx("button",{onClick:()=>{_t(null),Q(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),!Ks&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Addresses"}),u.jsxs("button",{onClick:()=>{We(null),gn(null),ot(!0)},className:"btn-secondary text-sm",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add address"})]})]}),((GD=Cr.addresses)==null?void 0:GD.length)>0?u.jsx("div",{className:"space-y-3",children:Cr.addresses.map((P,U)=>{const Y=[P.street,[P.city,P.state,P.postal_code].filter(Boolean).join(", "),P.country].filter(Boolean),ge=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Y.join(", "))}`;return u.jsxs("div",{className:"flex items-start group",children:[u.jsx(Bpe,{className:"w-4 h-4 text-gray-400 mt-1 mr-3 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[P.address_label&&u.jsx("p",{className:"text-xs text-gray-500 mb-1",children:P.address_label}),u.jsx("a",{href:ge,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:Y.map((Pe,Xe)=>u.jsx("span",{className:"block",children:Pe},Xe))})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{We(P),gn(U),ot(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>mle(U),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},U)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No addresses yet. ",u.jsx("button",{onClick:()=>{We(null),gn(null),ot(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),(Cr.how_we_met||Cr.met_date)&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),Cr.met_date&&u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[u.jsx(vo,{className:"w-4 h-4 inline mr-1"}),En(new Date(Cr.met_date),"MMMM d, yyyy")]}),Cr.how_we_met&&u.jsx("p",{className:"text-sm",children:Cr.how_we_met})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Relationships"}),u.jsxs("button",{onClick:()=>{ne(null),ce(null),we(!0)},className:"btn-secondary text-sm",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add relationship"})]})]}),(Ym==null?void 0:Ym.length)>0?u.jsx("div",{className:"space-y-2",children:Ym.map((P,U)=>{var ge,Pe,Xe;const Y=((Pe=(ge=n==null?void 0:n.acf)==null?void 0:ge.relationships)==null?void 0:Pe.findIndex(at=>at.related_person===P.related_person&&at.relationship_type===P.relationship_type))??U;return u.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[u.jsxs(Ge,{to:`/people/${P.related_person}`,className:"flex items-center flex-1 min-w-0",children:[P.person_thumbnail?u.jsx("img",{src:P.person_thumbnail,alt:Kn(P.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-gray-500",children:((Xe=Kn(P.person_name))==null?void 0:Xe[0])||"?"})}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium",children:[Kn(P.person_name)||`Person #${P.related_person}`,Ale[P.related_person]&&u.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),u.jsx("p",{className:"text-xs text-gray-500",children:Kn(P.relationship_name||P.relationship_label)})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{var Gs,$n;const at=($n=(Gs=n==null?void 0:n.acf)==null?void 0:Gs.relationships)==null?void 0:$n[Y];ne(at),ce(Y),we(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>gle(Y),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},U)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No relationships yet. ",u.jsx("button",{onClick:()=>{ne(null),ce(null),we(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]})]}),_==="timeline"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Todos"}),u.jsxs("button",{onClick:()=>{Z(null),G(!0)},className:"btn-secondary text-sm",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add todo"})]})]}),TD.length>0?u.jsx("div",{className:"space-y-2",children:TD.map(P=>{const U=nm(P);return u.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[u.jsx("button",{onClick:()=>ED(P),className:"mt-0.5 mr-2 flex-shrink-0",title:P.is_completed?"Mark as incomplete":"Mark as complete",children:P.is_completed?u.jsx(rI,{className:"w-5 h-5 text-primary-600"}):u.jsx($d,{className:`w-5 h-5 ${U?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${P.is_completed?"line-through text-gray-400":U?"text-red-600":""}`,children:P.content}),P.due_date&&u.jsxs("p",{className:`text-xs mt-0.5 ${U&&!P.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",En(new Date(P.due_date),"MMM d, yyyy"),U&&!P.is_completed&&" (overdue)"]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{Z(P),G(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>CD(P.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},P.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Timeline"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>R(!0),className:"btn-secondary text-sm",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Note"})]}),u.jsxs("button",{onClick:()=>q(!0),className:"btn-secondary text-sm",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),u.jsx(nEe,{timeline:o||[],onEdit:Nle,onDelete:kle,onToggleTodo:ED,personId:t,allPeople:w||[]})]})]}),_==="work"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Work history"}),u.jsxs("button",{onClick:()=>{xl(null),wl(null),rr(!0)},className:"btn-secondary text-sm",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add work history"})]})]}),(Qm==null?void 0:Qm.length)>0?u.jsx("div",{className:"space-y-4",children:Qm.map((P,U)=>{const Y=P.company?$b[P.company]:null,ge=P.originalIndex;return u.jsxs("div",{className:"flex items-start group",children:[Y!=null&&Y.logo?u.jsx("img",{src:Y.logo,alt:Y.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):u.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:u.jsx(Tr,{className:"w-10 h-10 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium",children:P.job_title}),P.company&&Y&&u.jsx(Ge,{to:`/companies/${P.company}`,className:"text-sm text-primary-600 hover:underline",children:Y.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[P.start_date&&En(new Date(P.start_date),"MMM yyyy")," - ",P.is_current?"Present":P.end_date?En(new Date(P.end_date),"MMM yyyy"):""]}),P.description&&u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:P.description})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{var Xe,at;const Pe=(at=(Xe=n==null?void 0:n.acf)==null?void 0:Xe.work_history)==null?void 0:at[ge];xl(Pe),wl(ge),rr(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Tle(ge),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},ge)})}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No work history yet. ",u.jsx("button",{onClick:()=>{xl(null),wl(null),rr(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),S.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Wy,{className:"w-5 h-5 mr-2"}),"Investments"]}),u.jsx("div",{className:"space-y-3",children:S.map(P=>u.jsxs(Ge,{to:`/companies/${P.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[P.thumbnail?u.jsx("img",{src:P.thumbnail,alt:P.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Tr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:P.name}),P.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:P.industry})]})]},P.id))})]}),Km.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Colleagues"}),u.jsxs("span",{className:"text-xs text-gray-500",children:[Km.length," ",Km.length===1?"colleague":"colleagues"]})]}),u.jsx("div",{className:"space-y-2",children:Km.map(P=>{var U;return u.jsxs(Ge,{to:`/people/${P.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[P.thumbnail?u.jsx("img",{src:P.thumbnail,alt:P.name||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-gray-500",children:((U=P.name)==null?void 0:U[0])||"?"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-medium truncate",children:P.name}),P.job_title&&u.jsx("p",{className:"text-xs text-gray-500 truncate",children:P.job_title})]})]},P.id)})})]})]})]}),u.jsx(iEe,{isOpen:z,onClose:()=>R(!1),onSubmit:ble,isLoading:f.isPending}),u.jsx(gA,{isOpen:B,onClose:()=>{q(!1),ze(null),Sl(null),Fh(null)},onSubmit:xle,isLoading:pe?m.isPending:p.isPending,personId:t,initialData:Rb,activity:pe}),u.jsx(OM,{isOpen:Ib,onClose:()=>{_l(!1),Sl(null)},todo:ai,onComplete:_le,onCompleteAsActivity:Ele}),u.jsx(lse,{isOpen:$,onClose:()=>{G(!1),Z(null)},onSubmit:ee?Sle:wle,isLoading:ee?v.isPending:g.isPending,todo:ee}),u.jsx(oEe,{isOpen:K,onClose:()=>F(!1),onSubmit:cle,isLoading:nt,contactInfo:Cr.contact_info||[]}),u.jsx(TM,{isOpen:X,onClose:()=>{Q(!1),_t(null)},onSubmit:ule,isLoading:Dn,dateItem:Ve,personId:t,allPeople:w||[],isPeopleLoading:x}),u.jsx(lEe,{isOpen:Ee,onClose:()=>{we(!1),ne(null),ce(null)},onSubmit:dle,isLoading:yt,relationship:_e,personId:t,allPeople:w||[],isPeopleLoading:x}),u.jsx(cEe,{isOpen:Le,onClose:()=>{ot(!1),We(null),gn(null)},onSubmit:hle,isLoading:Ws,address:Ce}),u.jsx(dEe,{isOpen:Wr,onClose:()=>{rr(!1),xl(null),wl(null)},onSubmit:fle,isLoading:A,workHistoryItem:gu}),u.jsx(NM,{isOpen:Wt,onClose:()=>_r(!1),onSubmit:ple,isLoading:H,person:n})]})}function vEe({company:t}){var e,r,n,i,s;return u.jsx(Ge,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?u.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:ur(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Tr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:ur(t)}),((i=t.acf)==null?void 0:i.industry)&&u.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&u.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function bEe(){const[t,e]=k.useState(""),[r,n]=k.useState(!1),[i,s]=k.useState(!1),o=ps(),a=bt(),{data:l,isLoading:c,error:d}=lt({queryKey:["companies",t],queryFn:async()=>(await Fe.getCompanies({search:t,per_page:100,_embed:!0})).data}),h=tt({mutationFn:async m=>{const g={title:m.title,status:"publish",parent:m.parentId||0,acf:{website:m.website,industry:m.industry,investors:m.investors||[]}};return(await Fe.createCompany(g)).data},onSuccess:m=>{a.invalidateQueries({queryKey:["companies"]}),a.invalidateQueries({queryKey:["dashboard"]}),n(!1),o(`/companies/${m.id}`)}}),f=async m=>{s(!0);try{await h.mutateAsync(m)}finally{s(!1)}},p=k.useMemo(()=>l?[...l].sort((m,g)=>{var b,w;const v=(((b=m.title)==null?void 0:b.rendered)||m.title||"").toLowerCase(),y=(((w=g.title)==null?void 0:w.rendered)||g.title||"").toLowerCase();return v.localeCompare(y)}):[],[l]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"relative flex-1 max-w-md",children:[u.jsx(Nc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:m=>e(m.target.value),className:"input pl-9"})]}),u.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),c&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),d&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!c&&!d&&(p==null?void 0:p.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Tr,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&u.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!c&&!d&&(p==null?void 0:p.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(m=>u.jsx(vEe,{company:m},m.id))}),u.jsx(kM,{isOpen:r,onClose:()=>n(!1),onSubmit:f,isLoading:i})]})}function xEe(){var N,T,j,I,O,D,z;const{id:t}=nM(),e=ps(),r=bt(),n=k.useRef(null),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,c]=k.useState(!1),{data:d,isLoading:h,error:f}=lt({queryKey:["company",t],queryFn:async()=>(await Fe.getCompany(t,{_embed:!0})).data}),{data:p}=lt({queryKey:["company-people",t],queryFn:async()=>(await Me.getCompanyPeople(t)).data}),{data:m}=lt({queryKey:["company",d==null?void 0:d.parent],queryFn:async()=>(await Fe.getCompany(d.parent,{_embed:!0})).data,enabled:!!(d!=null&&d.parent)}),{data:g=[]}=lt({queryKey:["company-children",t],queryFn:async()=>(await Fe.getCompanies({parent:t,per_page:100,_embed:!0})).data}),v=((N=d==null?void 0:d.acf)==null?void 0:N.investors)||[],{data:y=[]}=lt({queryKey:["company-investors",t,v],queryFn:async()=>{if(!v.length)return[];const[R,B]=await Promise.all([Fe.getPeople({per_page:100,include:v.join(","),_embed:!0}),Fe.getCompanies({per_page:100,include:v.join(","),_embed:!0})]),q=(R.data||[]).map(K=>{var F,X,Q,Ee;return{id:K.id,type:"person",name:Kn(((F=K.title)==null?void 0:F.rendered)||""),thumbnail:(Ee=(Q=(X=K._embedded)==null?void 0:X["wp:featuredmedia"])==null?void 0:Q[0])==null?void 0:Ee.source_url}}),$=(B.data||[]).map(K=>{var F,X,Q;return{id:K.id,type:"company",name:ur(K),thumbnail:(Q=(X=(F=K._embedded)==null?void 0:F["wp:featuredmedia"])==null?void 0:X[0])==null?void 0:Q.source_url}}),G=[...q,...$];return v.map(K=>G.find(F=>F.id===K)).filter(Boolean)},enabled:v.length>0}),{data:b=[]}=lt({queryKey:["investments",t],queryFn:async()=>(await Me.getInvestments(t)).data,enabled:!!t}),w=tt({mutationFn:()=>Fe.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}}),x=tt({mutationFn:R=>Fe.updateCompany(t,R),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["company-investors",t]}),r.invalidateQueries({queryKey:["dashboard"]})}});ch(ur(d)||"Organization"),k.useEffect(()=>{(d==null?void 0:d.status)==="trash"&&e("/companies",{replace:!0})},[d,e]);const S=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await w.mutateAsync()}catch(R){console.error("Failed to delete company:",R),alert("Failed to delete organization. Please try again.")}},_=async R=>{c(!0);try{const B={title:R.title,parent:R.parentId||0,acf:{website:R.website,industry:R.industry,investors:R.investors||[]}};await x.mutateAsync(B),a(!1)}catch(B){console.error("Failed to save company:",B),alert("Failed to save organization. Please try again.")}finally{c(!1)}},C=async R=>{var q;const B=(q=R.target.files)==null?void 0:q[0];if(B){if(!B.type.startsWith("image/")){alert("Please select an image file");return}if(B.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await Me.uploadCompanyLogo(t,B),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch($){console.error("Failed to upload logo:",$),alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(h)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(f||!d)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),u.jsx(Ge,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(d.status==="trash")return null;const E=d.acf||{};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(Ge,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(T0,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>a(!0),className:"btn-secondary",children:[u.jsx(Vte,{className:"w-4 h-4 mr-2"}),"Edit"]}),u.jsxs("button",{onClick:S,className:"btn-danger",children:[u.jsx(di,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),u.jsx("div",{className:"card p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[(I=(j=(T=d._embedded)==null?void 0:T["wp:featuredmedia"])==null?void 0:j[0])!=null&&I.source_url?u.jsx("img",{src:d._embedded["wp:featuredmedia"][0].source_url,alt:ur(d),className:"w-24 h-24 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Tr,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var R;return(R=n.current)==null?void 0:R.click()},children:i?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ate,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:C,className:"hidden",disabled:i})]}),u.jsxs("div",{children:[m&&u.jsxs(Ge,{to:`/companies/${m.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[u.jsx(KF,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",ur(m)]}),u.jsx("h1",{className:"text-2xl font-bold",children:ur(d)}),E.industry&&u.jsx("p",{className:"text-gray-500",children:E.industry}),E.website&&u.jsxs("a",{href:E.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[u.jsx(oy,{className:"w-4 h-4 mr-1"}),E.website]})]})]})}),g.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(KF,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:g.map(R=>{var B,q,$,G;return u.jsxs(Ge,{to:`/companies/${R.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[($=(q=(B=R._embedded)==null?void 0:B["wp:featuredmedia"])==null?void 0:q[0])!=null&&$.source_url?u.jsx("img",{src:R._embedded["wp:featuredmedia"][0].source_url,alt:ur(R),className:"w-10 h-10 rounded object-contain bg-white"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:u.jsx(Tr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:ur(R)}),((G=R.acf)==null?void 0:G.industry)&&u.jsx("p",{className:"text-xs text-gray-500",children:R.acf.industry})]})]},R.id)})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((O=p==null?void 0:p.current)==null?void 0:O.length)>0?u.jsx("div",{className:"space-y-2",children:p.current.map(R=>{var B;return u.jsxs(Ge,{to:`/people/${R.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[R.thumbnail?u.jsx("img",{src:R.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((B=R.name)==null?void 0:B[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium",children:R.name}),R.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:R.job_title})]})]},R.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2"}),"Former employees"]}),((D=p==null?void 0:p.former)==null?void 0:D.length)>0?u.jsx("div",{className:"space-y-2",children:p.former.map(R=>{var B;return u.jsxs(Ge,{to:`/people/${R.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[R.thumbnail?u.jsx("img",{src:R.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:u.jsx("span",{className:"text-xs text-gray-500",children:((B=R.name)==null?void 0:B[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:R.name}),R.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:R.job_title})]})]},R.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),y.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Wy,{className:"w-5 h-5 mr-2"}),"Investors"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:y.map(R=>{const B=R.type==="person",q=B?`/people/${R.id}`:`/companies/${R.id}`;return u.jsxs(Ge,{to:q,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[R.thumbnail?u.jsx("img",{src:R.thumbnail,alt:R.name,loading:"lazy",className:`w-10 h-10 object-cover ${B?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${B?"rounded-full":"rounded"}`,children:B?u.jsx(el,{className:"w-5 h-5 text-gray-400"}):u.jsx(Tr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:R.name}),u.jsx("p",{className:"text-xs text-gray-500",children:B?"Person":"Organization"})]})]},`${R.type}-${R.id}`)})})]}),b.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Wy,{className:"w-5 h-5 mr-2"}),"Invested in"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:b.map(R=>u.jsxs(Ge,{to:`/companies/${R.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[R.thumbnail?u.jsx("img",{src:R.thumbnail,alt:R.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:u.jsx(Tr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:R.name}),R.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:R.industry})]})]},R.id))})]}),((z=E.contact_info)==null?void 0:z.length)>0&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),u.jsx("div",{className:"space-y-3",children:E.contact_info.map((R,B)=>u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[R.contact_label||R.contact_type,":"]}),u.jsx("span",{className:"ml-2",children:R.contact_value})]},B))})]}),u.jsx(kM,{isOpen:o,onClose:()=>a(!1),onSubmit:_,isLoading:l,company:d})]})}function wEe({person:t,dateType:e}){var r;return u.jsx("div",{className:"flex items-center gap-3 py-2",children:u.jsxs(Ge,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),u.jsx("span",{className:"font-medium truncate",children:t.name}),u.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function SEe({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(c=>{i.push({person:c,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),u.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:u.jsx("span",{className:"text-2xl font-bold leading-none",children:En(new Date(e.next_occurrence),"d")})}),u.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>u.jsx(wEe,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function _Ee(){const[t,e]=k.useState(!1),[r,n]=k.useState(!1),i=bt(),{data:s,isLoading:o,error:a}=rme(365),{data:l=[],isLoading:c}=Wc(),d=tt({mutationFn:async m=>{const g={title:m.title,status:"publish",date_type:m.date_type,acf:{date_value:m.date_value,related_people:m.related_people,is_recurring:m.is_recurring,year_unknown:m.year_unknown}};return(await Fe.createDate(g)).data},onSuccess:()=>{i.invalidateQueries({queryKey:["reminders"]}),e(!1)}}),h=async m=>{n(!0);try{await d.mutateAsync(m)}finally{n(!1)}},f=(s==null?void 0:s.reduce((m,g)=>{const v=En(new Date(g.next_occurrence),"yyyy-MM-dd");return m[v]||(m[v]=[]),m[v].push(g),m},{}))||{},p=Object.entries(f).reduce((m,[g,v])=>{const y=En(new Date(g),"MMMM yyyy");return m[y]||(m[y]=[]),m[y].push(v),m},{});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("p",{className:"text-gray-600",children:[(s==null?void 0:s.length)||0," upcoming dates"]}),u.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),o&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),a&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!o&&!a&&(s==null?void 0:s.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx(vo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),u.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[u.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(p).map(([m,g])=>u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:m}),u.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:g.map(v=>u.jsx(SEe,{dates:v},v[0].next_occurrence))})]},m)),u.jsx(TM,{isOpen:t,onClose:()=>e(!1),onSubmit:h,isLoading:r,allPeople:l,isPeopleLoading:c})]})}function EEe(){ch("Todos");const[t,e]=k.useState(!1),[r,n]=k.useState(null),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,c]=k.useState(null),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[m,g]=k.useState(null),{data:v,isLoading:y}=Kte(!0),b=Gte(),w=nme(),x=wM(),S=k.useMemo(()=>xre(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:C,olderCompletedTodos:E}=k.useMemo(()=>{if(!v)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const R=[],B=[],q=[];return v.forEach($=>{if(!$.is_completed)R.push($);else try{const G=fp($.created);oye(G,S)?B.push($):q.push($)}catch{q.push($)}}),{incompleteTodos:R,recentlyCompletedTodos:B,olderCompletedTodos:q}},[v,S]),N=R=>{if(!R.is_completed){c(R),h(!0);return}b.mutate({todoId:R.id,data:{content:R.content,due_date:R.due_date,is_completed:!1}})},T=()=>{l&&(b.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),c(null))},j=()=>{if(!l)return;const R=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:R,activity_type:"note",participants:[]}),h(!1),p(!0)},I=async R=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:R}),await b.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),c(null),g(null)}catch(B){console.error("Failed to create activity:",B),alert("Failed to create activity. Please try again.")}},O=async R=>{r&&(await b.mutateAsync({todoId:r.id,data:R}),s(!1),n(null))},D=async R=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync(R)};if(y)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const z=[...C,...E];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),u.jsxs("div",{className:"flex items-center gap-2",children:[E.length>0&&u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[u.jsx(sI,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[u.jsx(Jt,{className:"w-4 h-4"}),"Add todo"]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx($d,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(R=>u.jsx(ox,{todo:R,onToggle:N,onEdit:B=>{n(B),s(!0)},onDelete:D},R.id))}):u.jsxs("div",{className:"p-8 text-center",children:[u.jsx($s,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No open todos"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),C.length>0&&!t&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Ppe,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",C.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:C.map(R=>u.jsx(ox,{todo:R,onToggle:N,onEdit:B=>{n(B),s(!0)},onDelete:D},R.id))})]}),t&&z.length>0&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx($s,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",z.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:z.map(R=>u.jsx(ox,{todo:R,onToggle:N,onEdit:B=>{n(B),s(!0)},onDelete:D},R.id))})]}),u.jsx(lse,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:O,isLoading:b.isPending,todo:r}),u.jsx(Jte,{isOpen:o,onClose:()=>a(!1)}),u.jsx(OM,{isOpen:d,onClose:()=>{h(!1),c(null)},todo:l,onComplete:T,onCompleteAsActivity:j}),u.jsx(gA,{isOpen:f,onClose:()=>{p(!1),c(null),g(null)},onSubmit:I,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function ox({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=nm(t);return u.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx($s,{className:"w-5 h-5 text-primary-600"}):u.jsx($d,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[u.jsxs(Ge,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&u.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",En(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function CEe(){var y,b,w;const[t,e]=k.useState(null),[r,n]=k.useState(""),[i,s]=k.useState(!1),[o,a]=k.useState(null),l=bt(),c=tt({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await de.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),d=tt({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await de.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=k.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=k.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),c.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},v=()=>{e(null),n(""),a(null),c.reset(),d.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),u.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((y=d.data.stats.errors)==null?void 0:y.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>u.jsx("li",{children:x},S))})]})]}),u.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Cc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(em,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(kc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&u.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[u.jsxs("p",{children:["Export format: ",o.version]}),u.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),u.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),u.jsxs("p",{children:["Notes: ",o.summary.notes]}),u.jsxs("p",{children:["Dates: ",o.summary.reminders]}),u.jsxs("p",{children:["Photos: ",o.summary.photos]}),u.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(yM,{className:"h-4 w-4 text-gray-400"})}),u.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&u.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),u.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(Cc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(kc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(b=d.error.response)==null?void 0:b.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function NEe(){var g,v,y;const[t,e]=k.useState(null),[r,n]=k.useState(!1),[i,s]=k.useState(null),o=bt(),a=tt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await de.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{s(b)},onError:b=>{var w,x;s({valid:!1,error:((x=(w=b.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=tt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await de.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),c=k.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?n(!0):b.type==="dragleave"&&n(!1)},[]),d=k.useCallback(b=>{b.preventDefault(),b.stopPropagation(),n(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&f(b.dataTransfer.files[0])},[]),h=b=>{b.target.files&&b.target.files[0]&&f(b.target.files[0])},f=b=>{const w=b.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(b),s(null),l.reset(),a.mutate(b)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((b,w)=>u.jsx("li",{children:b},w))})]})]}),u.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:d,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Cc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(em,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(kc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Fs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Tr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Mte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Fte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Ute,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?u.jsxs(u.Fragment,{children:[u.jsx(Cc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(kc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(v=l.error.response)==null?void 0:v.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function kEe(){var x,S,_;const[t,e]=k.useState(null),[r,n]=k.useState(!1),[i,s]=k.useState(null),[o,a]=k.useState({}),l=bt(),c=tt({mutationFn:async C=>{const E=new FormData;return E.append("file",C),(await de.post("/prm/v1/import/google-contacts/validate",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:C=>{var E;if(s(C),((E=C.duplicates)==null?void 0:E.length)>0){const N={};C.duplicates.forEach(T=>{N[T.index]="merge"}),a(N)}},onError:C=>{var E,N;s({valid:!1,error:((N=(E=C.response)==null?void 0:E.data)==null?void 0:N.message)||"Failed to validate file"})}}),d=tt({mutationFn:async({file:C,decisions:E})=>{const N=new FormData;return N.append("file",C),N.append("decisions",JSON.stringify(E)),(await de.post("/prm/v1/import/google-contacts",N,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=k.useCallback(C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?n(!0):C.type==="dragleave"&&n(!1)},[]),f=k.useCallback(C=>{C.preventDefault(),C.stopPropagation(),n(!1),C.dataTransfer.files&&C.dataTransfer.files[0]&&m(C.dataTransfer.files[0])},[]),p=C=>{C.target.files&&C.target.files[0]&&m(C.target.files[0])},m=C=>{if(!C.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(C),s(null),a({}),d.reset(),c.mutate(C)},g=(C,E)=>{a(N=>({...N,[C]:E}))},v=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),c.reset(),d.reset()},b=(i==null?void 0:i.duplicates)||[],w=b.length>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),u.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[u.jsxs("li",{children:["Go to ",u.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),u.jsx("li",{children:'Click "Export" in the left sidebar'}),u.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((C,E)=>u.jsx("li",{children:C},E))})]})]}),u.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Cc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(gM,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(kc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Dd,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Fs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Tr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Mte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Ute,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Fte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&u.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Npe,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("h3",{className:"font-medium text-amber-900",children:[b.length," contact",b.length>1?"s":""," may already exist"]}),u.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),u.jsx("div",{className:"mt-4 space-y-4",children:b.map(C=>u.jsx(TEe,{duplicate:C,decision:o[C.index]||"merge",onDecision:E=>g(C.index,E)},C.index))})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(Cc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(kc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Mo,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=d.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function TEe({duplicate:t,decision:e,onDecision:r}){var n,i;return u.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),u.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),u.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?u.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Hpe,{className:"h-4 w-4"}),"Update existing"]}),u.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Xpe,{className:"h-4 w-4"}),"Create new"]}),u.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Gpe,{className:"h-4 w-4"}),"Skip"]})]})]})}const OEe=[{id:"sync",label:"Sync",icon:Wpe},{id:"notifications",label:"Notifications",icon:Ope},{id:"data",label:"Data",icon:$te},{id:"admin",label:"Admin",icon:Kpe,adminOnly:!0},{id:"about",label:"About",icon:Dpe}];function jEe(){const[t,e]=vhe(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=ye=>{e({tab:ye})},a=OEe.filter(ye=>!ye.adminOnly||n),[l,c]=k.useState(""),[d,h]=k.useState(""),[f,p]=k.useState(!0),[m,g]=k.useState(!1),[v,y]=k.useState(!1),[b,w]=k.useState([]),[x,S]=k.useState(!0),[_,C]=k.useState(""),[E,N]=k.useState(!1),[T,j]=k.useState(null),[I,O]=k.useState(!1),[D,z]=k.useState(null),[R,B]=k.useState([]),[q,$]=k.useState(""),[G,K]=k.useState(!1),[F,X]=k.useState(""),[Q,Ee]=k.useState("09:00"),[we,Le]=k.useState(!0),[ot,Wr]=k.useState(!1),[rr,Wt]=k.useState(!1),[_r,nt]=k.useState(""),[mn,Dn]=k.useState(!1),[Pr,yt]=k.useState([]),[nr,Ws]=k.useState([]),[Er,A]=k.useState([]),[L,H]=k.useState(!1),[le,ee]=k.useState(!1),[Z,pe]=k.useState(!1),[ze,Ve]=k.useState(""),[_t,_e]=k.useState(!1),[ne,fe]=k.useState("");k.useEffect(()=>{(async()=>{try{const ke=await de.get("/prm/v1/user/ical-url");c(ke.data.url),h(ke.data.webcal_url)}catch(ke){console.error("Failed to fetch iCal URL:",ke)}finally{p(!1)}})()},[]),k.useEffect(()=>{i&&(async()=>{try{const[ke,Ae]=await Promise.all([Me.getAppPasswords(i),Me.getCardDAVUrls()]);w(ke.data||[]),z(Ae.data)}catch(ke){console.error("Failed to fetch app passwords:",ke)}finally{S(!1)}})()},[i]);const ce=async()=>{H(!0);try{const[ye,ke]=await Promise.all([Me.getSlackChannels(),Me.getSlackTargets()]);yt(ye.data.channels||[]),Ws(ye.data.users||[]),A(ke.data.targets||[])}catch(ye){console.error("Failed to fetch Slack data:",ye),nt("Failed to load Slack channels and users. Please try refreshing the page.")}finally{H(!1)}};k.useEffect(()=>{(async()=>{try{const ke=await Me.getNotificationChannels();B(ke.data.channels||["email"]),$(ke.data.slack_webhook||""),Ee(ke.data.notification_time||"09:00");const Ae=await Me.getSlackStatus(),ut=Ae.data.connected||!1;K(ut),X(Ae.data.workspace_name||""),ut&&await ce()}catch(ke){console.error("Failed to fetch notification channels:",ke)}finally{Le(!1)}})()},[]),k.useEffect(()=>{G&&ce()},[G]),k.useEffect(()=>{const ye=new URLSearchParams(window.location.search),ke=ye.get("slack_connected"),Ae=ye.get("slack_error");ke==="1"?(nt("Slack connected successfully!"),o("notifications"),Me.getSlackStatus().then(ut=>{K(ut.data.connected||!1),X(ut.data.workspace_name||"")}),e({tab:"notifications"})):Ae&&(nt(`Slack connection failed: ${Ae}`),o("notifications"),e({tab:"notifications"}))},[]);const Ce=async()=>{var ye,ke;try{const Ae=await de.get("/prm/v1/slack/oauth/authorize");window.location.href=Ae.data.oauth_url}catch(Ae){console.error("Failed to get Slack OAuth URL:",Ae),alert(((ke=(ye=Ae.response)==null?void 0:ye.data)==null?void 0:ke.message)||"Failed to connect Slack")}},We=async()=>{var ye,ke;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){Dn(!0);try{await Me.disconnectSlack(),K(!1),X(""),yt([]),Ws([]),A([]),nt("Slack disconnected successfully"),R.includes("slack")&&await _l("slack")}catch(Ae){console.error("Failed to disconnect Slack:",Ae),alert(((ke=(ye=Ae.response)==null?void 0:ye.data)==null?void 0:ke.message)||"Failed to disconnect Slack")}finally{Dn(!1)}}},oi=ye=>{const ke=Er.includes(ye)?Er.filter(Ae=>Ae!==ye):[...Er,ye];A(ke)},gn=async()=>{var ye,ke;ee(!0);try{await Me.updateSlackTargets(Er),nt("Notification targets saved successfully"),setTimeout(()=>nt(""),3e3)}catch(Ae){console.error("Failed to save Slack targets:",Ae),alert(((ke=(ye=Ae.response)==null?void 0:ye.data)==null?void 0:ke.message)||"Failed to save notification targets")}finally{ee(!1)}},gu=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch(ye){console.error("Failed to copy:",ye)}},xl=async ye=>{var ke,Ae;if(ye.preventDefault(),!!_.trim()){N(!0);try{const ut=await Me.createAppPassword(i,_.trim());j(ut.data.password),w([...b,ut.data]),C("")}catch(ut){console.error("Failed to create app password:",ut),alert(((Ae=(ke=ut.response)==null?void 0:ke.data)==null?void 0:Ae.message)||"Failed to create app password")}finally{N(!1)}}},Um=async(ye,ke)=>{var Ae,ut;if(confirm(`Are you sure you want to revoke the app password "${ke}"? Any devices using this password will no longer be able to sync.`))try{await Me.deleteAppPassword(i,ye),w(b.filter(yn=>yn.uuid!==ye))}catch(yn){console.error("Failed to delete app password:",yn),alert(((ut=(Ae=yn.response)==null?void 0:Ae.data)==null?void 0:ut.message)||"Failed to revoke app password")}},wl=async()=>{try{await navigator.clipboard.writeText(T),O(!0),setTimeout(()=>O(!1),2e3)}catch(ye){console.error("Failed to copy:",ye)}},ai=async ye=>{try{await navigator.clipboard.writeText(ye)}catch(ke){console.error("Failed to copy:",ke)}},Sl=ye=>{if(!ye)return"Never";const ke=new Date(ye);return ke.toLocaleDateString("en-US",{month:"short",day:"numeric",year:ke.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Ib=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){y(!0);try{const ye=await de.post("/prm/v1/user/regenerate-ical-token");c(ye.data.url),h(ye.data.webcal_url)}catch(ye){console.error("Failed to regenerate token:",ye)}finally{y(!1)}}},_l=async ye=>{var Ae,ut;const ke=R.includes(ye)?R.filter(yn=>yn!==ye):[...R,ye];Wr(!0);try{await Me.updateNotificationChannels(ke),B(ke)}catch(yn){console.error("Failed to update notification channels:",yn),alert(((ut=(Ae=yn.response)==null?void 0:Ae.data)==null?void 0:ut.message)||"Failed to update notification channels")}finally{Wr(!1)}},Rb=async ye=>{var El,Wm;const[ke,Ae]=ye.split(":").map(Number),ut=Math.round(Ae/5)*5,yn=ut===60?(ke+1)%24:ke,Ab=ut===60?0:ut,vs=`${String(yn).padStart(2,"0")}:${String(Ab).padStart(2,"0")}`;Ee(vs),Wt(!0);try{await Me.updateNotificationTime(vs)}catch(Ks){console.error("Failed to update notification time:",Ks),alert(((Wm=(El=Ks.response)==null?void 0:El.data)==null?void 0:Wm.message)||"Failed to update notification time");const yu=await Me.getNotificationChannels();Ee(yu.data.notification_time||"09:00")}finally{Wt(!1)}},Fh=async()=>{var ye,ke;if(confirm("This will send reminder emails for all reminders due today. Continue?")){pe(!0),Ve("");try{const Ae=await Me.triggerReminders();Ve(Ae.data.message||"Reminders triggered successfully.")}catch(Ae){console.error("Failed to trigger reminders:",Ae),Ve(((ke=(ye=Ae.response)==null?void 0:ye.data)==null?void 0:ke.message)||"Failed to trigger reminders. Please check server logs.")}finally{pe(!1)}}},Mb=async()=>{var ye,ke;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){_e(!0),fe("");try{const Ae=await Me.rescheduleCronJobs();fe(Ae.data.message||"Cron jobs rescheduled successfully.")}catch(Ae){console.error("Failed to reschedule cron jobs:",Ae),fe(((ke=(ye=Ae.response)==null?void 0:ye.data)==null?void 0:ke.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{_e(!1)}}},Hm=()=>{switch(s){case"sync":return u.jsx(PEe,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:gu,regenerateIcalToken:Ib,regenerating:v,appPasswords:b,appPasswordsLoading:x,carddavUrls:D,config:r,newPasswordName:_,setNewPasswordName:C,handleCreateAppPassword:xl,creatingPassword:E,newPassword:T,setNewPassword:j,copyNewPassword:wl,passwordCopied:I,handleDeleteAppPassword:Um,formatDate:Sl,copyCarddavUrl:ai});case"notifications":return u.jsx(IEe,{notificationsLoading:we,notificationChannels:R,toggleChannel:_l,savingChannels:ot,slackConnected:G,slackWorkspaceName:F,handleConnectSlack:Ce,handleDisconnectSlack:We,disconnectingSlack:mn,webhookTestMessage:_r,slackChannels:Pr,slackUsers:nr,slackTargets:Er,loadingSlackData:L,handleToggleSlackTarget:oi,handleSaveSlackTargets:gn,savingSlackTargets:le,slackWebhook:q,notificationTime:Q,handleNotificationTimeChange:Rb,savingTime:rr});case"data":return u.jsx(REe,{});case"admin":return n?u.jsx(MEe,{handleTriggerReminders:Fh,triggeringReminders:Z,reminderMessage:ze,handleRescheduleCron:Mb,reschedulingCron:_t,cronMessage:ne}):null;case"about":return u.jsx(AEe,{config:r});default:return null}};return u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(ye=>{const ke=ye.icon,Ae=s===ye.id;return u.jsxs("button",{onClick:()=>o(ye.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${Ae?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[u.jsx(ke,{className:"w-4 h-4"}),ye.label]},ye.id)})})}),u.jsx("div",{className:"space-y-6",children:Hm()})]})}function PEe({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:c,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:v,copyNewPassword:y,passwordCopied:b,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:_=>_.target.select()}),u.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("a",{href:e,className:"btn-primary",children:u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),u.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),u.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[c&&u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[u.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:c.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(c.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),u.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),u.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&u.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:y,className:"btn-primary whitespace-nowrap",children:b?"Copied!":"Copy"})]}),u.jsx("button",{onClick:()=>v(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),u.jsx("div",{className:"space-y-2",children:a.map(_=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:_.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(_.created),"  Last used ",x(_.last_used)]})]}),u.jsx("button",{onClick:()=>w(_.uuid,_.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},_.uuid))})]}),a.length===0&&!g&&u.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function IEe({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:c,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:v,slackWebhook:y,notificationTime:b,handleNotificationTimeChange:w,savingTime:x}){return u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Email"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Slack"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsx("div",{children:i?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&u.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),u.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")||c.includes("disconnected")?"text-green-600":"text-red-600"}`,children:c}),e.includes("slack")&&u.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?u.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):u.jsxs(u.Fragment,{children:[d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsx("span",{className:"text-sm",children:S.name})]},S.id))})]}),h.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsxs("span",{className:"text-sm",children:[S.name,S.is_me&&u.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},S.id))})]}),d.length===0&&h.length===0&&!p&&u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),u.jsx("button",{onClick:g,disabled:v,className:"btn-primary text-sm mt-4",children:v?"Saving...":"Save targets"})]})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")?"text-green-600":"text-red-600"}`,children:c}),u.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),y&&!i&&u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),u.jsx("input",{type:"time",value:b,onChange:S=>w(S.target.value),className:"input",disabled:x,step:"300"}),b&&u.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[u.jsxs("p",{className:"text-gray-700",children:[u.jsx("span",{className:"font-medium",children:"UTC:"})," ",b]}),u.jsxs("p",{className:"text-gray-700 mt-1",children:[u.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[S,_]=b.split(":"),C=new Date;return C.setUTCHours(parseInt(S),parseInt(_),0,0),C.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}})()]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]})}const B5=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:em,component:NEe},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:gM,component:kEe},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:$te,component:CEe}];function REe(){var i;const[t,e]=k.useState("vcard"),r=s=>{s==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":s==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(i=B5.find(s=>s.id===t))==null?void 0:i.component;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:B5.map(s=>{const o=s.icon,a=t===s.id;return u.jsxs("button",{onClick:()=>e(s.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:"block",children:s.name}),u.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:s.description})]})]},s.id)})})}),n&&u.jsx(n,{})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(em,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),u.jsx(iI,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(gM,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),u.jsx(iI,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function MEe({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(Ge,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"User approval"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(Ge,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"Relationship types"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Trigger reminders"}),u.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),u.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),u.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function AEe({config:t}){return u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",Tc]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsxs("p",{className:"text-sm text-gray-600",children:[Tc," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function z5({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=k.useState(""),[o,a]=k.useState(!1),l=k.useRef(null),c=k.useRef(null),d=k.useMemo(()=>r.sort((v,y)=>{const b=(v.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return b<w?-1:b>w?1:0}),[r]),h=k.useMemo(()=>{if(!i)return d.slice(0,10);const v=i.toLowerCase();return d.filter(y=>(y.name||"").toLowerCase().includes(v)).slice(0,10)},[d,i]),f=k.useMemo(()=>d.find(v=>v.id===parseInt(t,10)),[d,t]);k.useEffect(()=>{const v=y=>{c.current&&!c.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const p=v=>{e(v?v.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:f&&!o?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[u.jsx("span",{children:g}),u.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Mt,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:l,type:"text",value:i,onChange:v=>{s(v.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&u.jsx("div",{ref:c,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(v=>u.jsx("button",{type:"button",onClick:()=>p(v.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===v.id.toString()?"bg-primary-50":""}`,children:v.name},v.id))]}):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function DEe(){ch("Relationship Types - Settings");const t=bt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(Bte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),u.jsx(Ge,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=lt({queryKey:["relationship-types"],queryFn:async()=>(await Fe.getRelationshipTypes()).data}),[s,o]=k.useState(null),[a,l]=k.useState(""),[c,d]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState(""),[g,v]=k.useState(!1),y=tt({mutationFn:async({id:j,name:I,inverseId:O})=>{const D={name:I};return O&&(D.acf={inverse_relationship_type:parseInt(O,10)}),Fe.updateRelationshipType(j,D)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),b=tt({mutationFn:async({name:j,inverseId:I})=>{const O={name:j};return I&&(O.acf={inverse_relationship_type:parseInt(I,10)}),Fe.createRelationshipType(O)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),v(!1)}}),w=tt({mutationFn:j=>Fe.deleteRelationshipType(j),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=tt({mutationFn:()=>Fe.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return u.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):u.jsx(qte,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=j=>{var O;o(j.id),l(j.name);const I=(O=j.acf)==null?void 0:O.inverse_relationship_type;d(I?I.toString():"")},C=()=>{o(null),l(""),d("")},E=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:c||null})},N=()=>{if(!h.trim()){alert("Name is required");return}b.mutate({name:h.trim(),inverseId:p||null})},T=(j,I)=>{window.confirm(`Are you sure you want to delete "${I}"? This cannot be undone.`)&&w.mutate(j)};return i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),u.jsx("div",{className:"flex gap-2",children:!g&&u.jsxs(u.Fragment,{children:[u.jsx(S,{}),u.jsxs("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[u.jsx(Jt,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&u.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:h,onChange:j=>f(j.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(z5,{value:p,onChange:m,relationshipTypes:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:N,disabled:b.isPending,className:"btn-primary flex items-center gap-2",children:[b.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(GF,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsx("button",{onClick:()=>{v(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),u.jsx("div",{className:"space-y-2",children:n.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(j=>{var R,B;const I=s===j.id,O=(R=j.acf)==null?void 0:R.inverse_relationship_type,D=typeof O=="object"&&(O!=null&&O.ID)?O.ID:typeof O=="object"&&(O!=null&&O.id)?O.id:O,z=D?n.find(q=>q.id===D):null;return u.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:I?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:a,onChange:q=>l(q.target.value),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(z5,{value:c,onChange:d,relationshipTypes:n,currentTypeId:j.id}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:E,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(GF,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsxs("button",{onClick:C,className:"btn-secondary flex items-center gap-2",children:[u.jsx(Mt,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium",children:j.name}),z&&u.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",u.jsx("span",{className:"font-medium",children:z.name})]}),!z&&((B=j.acf)==null?void 0:B.inverse_relationship_type)===null&&u.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(j),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:u.jsx(Vpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>T(j.id,j.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(di,{className:"w-4 h-4"})})]})]})},j.id)})})]})})}function $Ee(){ch("User Approval - Settings");const t=bt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(Bte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),u.jsx(Ge,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=lt({queryKey:["users"],queryFn:async()=>(await Me.getUsers()).data}),s=tt({mutationFn:p=>Me.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=tt({mutationFn:p=>Me.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=tt({mutationFn:p=>Me.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},c=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(Cc,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(Ge,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(T0,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),u.jsxs("div",{className:"space-y-6",children:[h.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),u.jsx("div",{className:"space-y-3",children:h.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:p.name}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email}),u.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[u.jsx(HF,{className:"w-4 h-4"}),"Approve"]}),u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(YF,{className:"w-4 h-4"}),"Deny"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(di,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),u.jsx("div",{className:"space-y-3",children:f.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,u.jsx(HF,{className:"w-4 h-4 text-green-600"})]}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(YF,{className:"w-4 h-4"}),"Revoke Access"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(di,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&u.jsx("div",{className:"card p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var V5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Je(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ax={exports:{}},U5={},sf,H5;function br(){if(H5)return sf;H5=1;var t=function(e){return e&&e.Math===Math&&e};return sf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof V5=="object"&&V5)||t(typeof sf=="object"&&sf)||function(){return this}()||Function("return this")(),sf}var lx,W5;function mt(){return W5||(W5=1,lx=function(t){try{return!!t()}catch{return!0}}),lx}var cx,K5;function lm(){if(K5)return cx;K5=1;var t=mt();return cx=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),cx}var ux,G5;function X0(){if(G5)return ux;G5=1;var t=lm(),e=Function.prototype,r=e.apply,n=e.call;return ux=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),ux}var dx,Y5;function St(){if(Y5)return dx;Y5=1;var t=lm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return dx=t?n:function(i){return function(){return r.apply(i,arguments)}},dx}var hx,Q5;function Bo(){if(Q5)return hx;Q5=1;var t=St(),e=t({}.toString),r=t("".slice);return hx=function(n){return r(e(n),8,-1)},hx}var fx,X5;function cse(){if(X5)return fx;X5=1;var t=Bo(),e=St();return fx=function(r){if(t(r)==="Function")return e(r)},fx}var px,J5;function Lr(){if(J5)return px;J5=1;var t=typeof document=="object"&&document.all;return px=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},px}var mx={},gx,Z5;function xr(){if(Z5)return gx;Z5=1;var t=mt();return gx=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),gx}var yx,eq;function ni(){if(eq)return yx;eq=1;var t=lm(),e=Function.prototype.call;return yx=t?e.bind(e):function(){return e.apply(e,arguments)},yx}var vx={},tq;function yA(){if(tq)return vx;tq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return vx.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,vx}var bx,rq;function cm(){return rq||(rq=1,bx=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),bx}var xx,nq;function J0(){if(nq)return xx;nq=1;var t=St(),e=mt(),r=Bo(),n=Object,i=t("".split);return xx=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,xx}var wx,iq;function um(){return iq||(iq=1,wx=function(t){return t==null}),wx}var Sx,sq;function Xc(){if(sq)return Sx;sq=1;var t=um(),e=TypeError;return Sx=function(r){if(t(r))throw new e("Can't call method on "+r);return r},Sx}var _x,oq;function Vs(){if(oq)return _x;oq=1;var t=J0(),e=Xc();return _x=function(r){return t(e(r))},_x}var Ex,aq;function An(){if(aq)return Ex;aq=1;var t=Lr();return Ex=function(e){return typeof e=="object"?e!==null:t(e)},Ex}var Cx,lq;function jr(){return lq||(lq=1,Cx={}),Cx}var Nx,cq;function wi(){if(cq)return Nx;cq=1;var t=jr(),e=br(),r=Lr(),n=function(i){return r(i)?i:void 0};return Nx=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},Nx}var kx,uq;function Br(){if(uq)return kx;uq=1;var t=St();return kx=t({}.isPrototypeOf),kx}var Tx,dq;function dh(){if(dq)return Tx;dq=1;var t=br(),e=t.navigator,r=e&&e.userAgent;return Tx=r?String(r):"",Tx}var Ox,hq;function dm(){if(hq)return Ox;hq=1;var t=br(),e=dh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),Ox=a,Ox}var jx,fq;function hh(){if(fq)return jx;fq=1;var t=dm(),e=mt(),r=br(),n=r.String;return jx=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),jx}var Px,pq;function use(){if(pq)return Px;pq=1;var t=hh();return Px=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Px}var Ix,mq;function hm(){if(mq)return Ix;mq=1;var t=wi(),e=Lr(),r=Br(),n=use(),i=Object;return Ix=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},Ix}var Rx,gq;function fh(){if(gq)return Rx;gq=1;var t=String;return Rx=function(e){try{return t(e)}catch{return"Object"}},Rx}var Mx,yq;function zo(){if(yq)return Mx;yq=1;var t=Lr(),e=fh(),r=TypeError;return Mx=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},Mx}var Ax,vq;function vA(){if(vq)return Ax;vq=1;var t=zo(),e=um();return Ax=function(r,n){var i=r[n];return e(i)?void 0:t(i)},Ax}var Dx,bq;function FEe(){if(bq)return Dx;bq=1;var t=ni(),e=Lr(),r=An(),n=TypeError;return Dx=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},Dx}var $x={exports:{}},Fx,xq;function ph(){return xq||(xq=1,Fx=!0),Fx}var qx,wq;function qEe(){if(wq)return qx;wq=1;var t=br(),e=Object.defineProperty;return qx=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},qx}var Sq;function bA(){if(Sq)return $x.exports;Sq=1;var t=ph(),e=br(),r=qEe(),n="__core-js_shared__",i=$x.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),$x.exports}var Lx,_q;function mh(){if(_q)return Lx;_q=1;var t=bA();return Lx=function(e,r){return t[e]||(t[e]=r||{})},Lx}var Bx,Eq;function gs(){if(Eq)return Bx;Eq=1;var t=Xc(),e=Object;return Bx=function(r){return e(t(r))},Bx}var zx,Cq;function zr(){if(Cq)return zx;Cq=1;var t=St(),e=gs(),r=t({}.hasOwnProperty);return zx=Object.hasOwn||function(i,s){return r(e(i),s)},zx}var Vx,Nq;function Z0(){if(Nq)return Vx;Nq=1;var t=St(),e=0,r=Math.random(),n=t(1.1.toString);return Vx=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},Vx}var Ux,kq;function Vr(){if(kq)return Ux;kq=1;var t=br(),e=mh(),r=zr(),n=Z0(),i=hh(),s=use(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Ux=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},Ux}var Hx,Tq;function dse(){if(Tq)return Hx;Tq=1;var t=ni(),e=An(),r=hm(),n=vA(),i=FEe(),s=Vr(),o=TypeError,a=s("toPrimitive");return Hx=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},Hx}var Wx,Oq;function xA(){if(Oq)return Wx;Oq=1;var t=dse(),e=hm();return Wx=function(r){var n=t(r,"string");return e(n)?n:n+""},Wx}var Kx,jq;function hse(){if(jq)return Kx;jq=1;var t=br(),e=An(),r=t.document,n=e(r)&&e(r.createElement);return Kx=function(i){return n?r.createElement(i):{}},Kx}var Gx,Pq;function fse(){if(Pq)return Gx;Pq=1;var t=xr(),e=mt(),r=hse();return Gx=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Gx}var Iq;function eb(){if(Iq)return mx;Iq=1;var t=xr(),e=ni(),r=yA(),n=cm(),i=Vs(),s=xA(),o=zr(),a=fse(),l=Object.getOwnPropertyDescriptor;return mx.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},mx}var Yx,Rq;function LEe(){if(Rq)return Yx;Rq=1;var t=mt(),e=Lr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Yx=n,Yx}var Qx,Mq;function tb(){if(Mq)return Qx;Mq=1;var t=cse(),e=zo(),r=lm(),n=t(t.bind);return Qx=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},Qx}var Xx={},Jx,Aq;function pse(){if(Aq)return Jx;Aq=1;var t=xr(),e=mt();return Jx=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Jx}var Zx,Dq;function Vo(){if(Dq)return Zx;Dq=1;var t=An(),e=String,r=TypeError;return Zx=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},Zx}var $q;function Hi(){if($q)return Xx;$q=1;var t=xr(),e=fse(),r=pse(),n=Vo(),i=xA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return Xx.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Xx}var ew,Fq;function gh(){if(Fq)return ew;Fq=1;var t=xr(),e=Hi(),r=cm();return ew=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},ew}var tw,qq;function qe(){if(qq)return tw;qq=1;var t=br(),e=X0(),r=cse(),n=Lr(),i=eb().f,s=LEe(),o=jr(),a=tb(),l=gh(),c=zr(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return tw=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,C,E,N,T,j,I;for(C in f)x=s(m?C:p+(g?".":"#")+C,h.forced),S=!x&&y&&c(y,C),N=b[C],S&&(h.dontCallGetSet?(I=i(y,C),T=I&&I.value):T=y[C]),E=S&&T?T:f[C],!(!x&&!v&&typeof N==typeof E)&&(h.bind&&S?j=a(E,t):h.wrap&&S?j=d(E):v&&n(E)?j=r(E):j=E,(h.sham||E&&E.sham||N&&N.sham)&&l(j,"sham",!0),l(b,C,j),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],C,E),h.real&&w&&(x||!w[C])&&l(w,C,E)))},tw}var Lq;function BEe(){if(Lq)return U5;Lq=1;var t=qe(),e=xr(),r=Hi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),U5}var Bq;function zEe(){if(Bq)return ax.exports;Bq=1,BEe();var t=jr(),e=t.Object,r=ax.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),ax.exports}var rw,zq;function mse(){if(zq)return rw;zq=1;var t=zEe();return rw=t,rw}var nw,Vq;function VEe(){if(Vq)return nw;Vq=1;var t=mse();return nw=t,nw}var iw,Uq;function UEe(){if(Uq)return iw;Uq=1;var t=VEe();return iw=t,iw}var sw,Hq;function HEe(){return Hq||(Hq=1,sw=UEe()),sw}var WEe=HEe(),KEe=Je(WEe),Wq={},ow,Kq;function Jc(){if(Kq)return ow;Kq=1;var t=Bo();return ow=Array.isArray||function(r){return t(r)==="Array"},ow}var aw,Gq;function GEe(){if(Gq)return aw;Gq=1;var t=Math.ceil,e=Math.floor;return aw=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},aw}var lw,Yq;function yh(){if(Yq)return lw;Yq=1;var t=GEe();return lw=function(e){var r=+e;return r!==r||r===0?0:t(r)},lw}var cw,Qq;function gse(){if(Qq)return cw;Qq=1;var t=yh(),e=Math.min;return cw=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},cw}var uw,Xq;function hl(){if(Xq)return uw;Xq=1;var t=gse();return uw=function(e){return t(e.length)},uw}var dw,Jq;function yse(){if(Jq)return dw;Jq=1;var t=TypeError,e=9007199254740991;return dw=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},dw}var hw,Zq;function rb(){if(Zq)return hw;Zq=1;var t=xr(),e=Hi(),r=cm();return hw=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},hw}var fw,e3;function wA(){if(e3)return fw;e3=1;var t=Vr(),e=t("toStringTag"),r={};return r[e]="z",fw=String(r)==="[object z]",fw}var pw,t3;function fl(){if(t3)return pw;t3=1;var t=wA(),e=Lr(),r=Bo(),n=Vr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return pw=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},pw}var mw,r3;function YEe(){if(r3)return mw;r3=1;var t=St(),e=Lr(),r=bA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),mw=r.inspectSource,mw}var gw,n3;function vse(){if(n3)return gw;n3=1;var t=St(),e=mt(),r=Lr(),n=fl(),i=wi(),s=YEe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,gw=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,gw}var yw,i3;function QEe(){if(i3)return yw;i3=1;var t=Jc(),e=vse(),r=An(),n=Vr(),i=n("species"),s=Array;return yw=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},yw}var vw,s3;function SA(){if(s3)return vw;s3=1;var t=QEe();return vw=function(e,r){return new(t(e))(r===0?0:r)},vw}var bw,o3;function fm(){if(o3)return bw;o3=1;var t=mt(),e=Vr(),r=dm(),n=e("species");return bw=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},bw}var a3;function bse(){if(a3)return Wq;a3=1;var t=qe(),e=mt(),r=Jc(),n=An(),i=gs(),s=hl(),o=yse(),a=rb(),l=SA(),c=fm(),d=Vr(),h=dm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,C,E,N;for(S=-1,C=arguments.length;S<C;S++)if(N=S===-1?b:arguments[S],m(N))for(E=s(N),o(x+E),_=0;_<E;_++,x++)_ in N&&a(w,x,N[_]);else o(x+1),a(w,x++,N);return w.length=x,w}}),Wq}var l3={},c3={},xw,u3;function pl(){if(u3)return xw;u3=1;var t=fl(),e=String;return xw=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},xw}var ww={},Sw,d3;function _A(){if(d3)return Sw;d3=1;var t=yh(),e=Math.max,r=Math.min;return Sw=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},Sw}var _w,h3;function XEe(){if(h3)return _w;h3=1;var t=Vs(),e=_A(),r=hl(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return _w={includes:n(!0),indexOf:n(!1)},_w}var Ew,f3;function pm(){return f3||(f3=1,Ew={}),Ew}var Cw,p3;function xse(){if(p3)return Cw;p3=1;var t=St(),e=zr(),r=Vs(),n=XEe().indexOf,i=pm(),s=t([].push);return Cw=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},Cw}var Nw,m3;function EA(){return m3||(m3=1,Nw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Nw}var kw,g3;function nb(){if(g3)return kw;g3=1;var t=xse(),e=EA();return kw=Object.keys||function(n){return t(n,e)},kw}var y3;function CA(){if(y3)return ww;y3=1;var t=xr(),e=pse(),r=Hi(),n=Vo(),i=Vs(),s=nb();return ww.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},ww}var Tw,v3;function JEe(){if(v3)return Tw;v3=1;var t=wi();return Tw=t("document","documentElement"),Tw}var Ow,b3;function ib(){if(b3)return Ow;b3=1;var t=mh(),e=Z0(),r=t("keys");return Ow=function(n){return r[n]||(r[n]=e(n))},Ow}var jw,x3;function mm(){if(x3)return jw;x3=1;var t=Vo(),e=CA(),r=EA(),n=pm(),i=JEe(),s=hse(),o=ib(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,jw=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},jw}var Pw={},w3;function sb(){if(w3)return Pw;w3=1;var t=xse(),e=EA(),r=e.concat("length","prototype");return Pw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},Pw}var Iw={},Rw,S3;function vh(){if(S3)return Rw;S3=1;var t=St();return Rw=t([].slice),Rw}var _3;function wse(){if(_3)return Iw;_3=1;var t=Bo(),e=Vs(),r=sb().f,n=vh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return Iw.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},Iw}var Mw={},E3;function ob(){return E3||(E3=1,Mw.f=Object.getOwnPropertySymbols),Mw}var Aw,C3;function gm(){if(C3)return Aw;C3=1;var t=gh();return Aw=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},Aw}var Dw,N3;function NA(){if(N3)return Dw;N3=1;var t=Hi();return Dw=function(e,r,n){return t.f(e,r,n)},Dw}var $w={},k3;function ab(){if(k3)return $w;k3=1;var t=Vr();return $w.f=t,$w}var Fw,T3;function Ut(){if(T3)return Fw;T3=1;var t=jr(),e=zr(),r=ab(),n=Hi().f;return Fw=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},Fw}var qw,O3;function Sse(){if(O3)return qw;O3=1;var t=ni(),e=wi(),r=Vr(),n=gm();return qw=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},qw}var Lw,j3;function ZEe(){if(j3)return Lw;j3=1;var t=wA(),e=fl();return Lw=t?{}.toString:function(){return"[object "+e(this)+"]"},Lw}var Bw,P3;function Zc(){if(P3)return Bw;P3=1;var t=wA(),e=Hi().f,r=gh(),n=zr(),i=ZEe(),s=Vr(),o=s("toStringTag");return Bw=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},Bw}var zw,I3;function eCe(){if(I3)return zw;I3=1;var t=br(),e=Lr(),r=t.WeakMap;return zw=e(r)&&/native code/.test(String(r)),zw}var Vw,R3;function ym(){if(R3)return Vw;R3=1;var t=eCe(),e=br(),r=An(),n=gh(),i=zr(),s=bA(),o=ib(),a=pm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return Vw={set:h,get:f,has:p,enforce:m,getterFor:g},Vw}var Uw,M3;function bh(){if(M3)return Uw;M3=1;var t=tb(),e=St(),r=J0(),n=gs(),i=hl(),s=SA(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),C=t(y,b),E=0,N=w||s,T=c?N(v,_):d||m?N(v,0):void 0,j,I;_>E;E++)if((g||E in S)&&(j=S[E],I=C(j,E,x),l))if(c)T[E]=I;else if(I)switch(l){case 3:return!0;case 5:return j;case 6:return E;case 2:o(T,j)}else switch(l){case 4:return!1;case 7:o(T,j)}return p?-1:h||f?f:T}};return Uw={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},Uw}var A3;function tCe(){if(A3)return c3;A3=1;var t=qe(),e=br(),r=ni(),n=St(),i=ph(),s=xr(),o=hh(),a=mt(),l=zr(),c=Br(),d=Vo(),h=Vs(),f=xA(),p=pl(),m=cm(),g=mm(),v=nb(),y=sb(),b=wse(),w=ob(),x=eb(),S=Hi(),_=CA(),C=yA(),E=gm(),N=NA(),T=mh(),j=ib(),I=pm(),O=Z0(),D=Vr(),z=ab(),R=Ut(),B=Sse(),q=Zc(),$=ym(),G=bh().forEach,K=j("hidden"),F="Symbol",X="prototype",Q=$.set,Ee=$.getterFor(F),we=Object[X],Le=e.Symbol,ot=Le&&Le[X],Wr=e.RangeError,rr=e.TypeError,Wt=e.QObject,_r=x.f,nt=S.f,mn=b.f,Dn=C.f,Pr=n([].push),yt=T("symbols"),nr=T("op-symbols"),Ws=T("wks"),Er=!Wt||!Wt[X]||!Wt[X].findChild,A=function(_e,ne,fe){var ce=_r(we,ne);ce&&delete we[ne],nt(_e,ne,fe),ce&&_e!==we&&nt(we,ne,ce)},L=s&&a(function(){return g(nt({},"a",{get:function(){return nt(this,"a",{value:7}).a}})).a!==7})?A:nt,H=function(_e,ne){var fe=yt[_e]=g(ot);return Q(fe,{type:F,tag:_e,description:ne}),s||(fe.description=ne),fe},le=function(ne,fe,ce){ne===we&&le(nr,fe,ce),d(ne);var Ce=f(fe);return d(ce),l(yt,Ce)?(ce.enumerable?(l(ne,K)&&ne[K][Ce]&&(ne[K][Ce]=!1),ce=g(ce,{enumerable:m(0,!1)})):(l(ne,K)||nt(ne,K,m(1,g(null))),ne[K][Ce]=!0),L(ne,Ce,ce)):nt(ne,Ce,ce)},ee=function(ne,fe){d(ne);var ce=h(fe),Ce=v(ce).concat(_t(ce));return G(Ce,function(We){(!s||r(pe,ce,We))&&le(ne,We,ce[We])}),ne},Z=function(ne,fe){return fe===void 0?g(ne):ee(g(ne),fe)},pe=function(ne){var fe=f(ne),ce=r(Dn,this,fe);return this===we&&l(yt,fe)&&!l(nr,fe)?!1:ce||!l(this,fe)||!l(yt,fe)||l(this,K)&&this[K][fe]?ce:!0},ze=function(ne,fe){var ce=h(ne),Ce=f(fe);if(!(ce===we&&l(yt,Ce)&&!l(nr,Ce))){var We=_r(ce,Ce);return We&&l(yt,Ce)&&!(l(ce,K)&&ce[K][Ce])&&(We.enumerable=!0),We}},Ve=function(ne){var fe=mn(h(ne)),ce=[];return G(fe,function(Ce){!l(yt,Ce)&&!l(I,Ce)&&Pr(ce,Ce)}),ce},_t=function(_e){var ne=_e===we,fe=mn(ne?nr:h(_e)),ce=[];return G(fe,function(Ce){l(yt,Ce)&&(!ne||l(we,Ce))&&Pr(ce,yt[Ce])}),ce};return o||(Le=function(){if(c(ot,this))throw new rr("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),fe=O(ne),ce=function(Ce){var We=this===void 0?e:this;We===we&&r(ce,nr,Ce),l(We,K)&&l(We[K],fe)&&(We[K][fe]=!1);var oi=m(1,Ce);try{L(We,fe,oi)}catch(gn){if(!(gn instanceof Wr))throw gn;A(We,fe,oi)}};return s&&Er&&L(we,fe,{configurable:!0,set:ce}),H(fe,ne)},ot=Le[X],E(ot,"toString",function(){return Ee(this).tag}),E(Le,"withoutSetter",function(_e){return H(O(_e),_e)}),C.f=pe,S.f=le,_.f=ee,x.f=ze,y.f=b.f=Ve,w.f=_t,z.f=function(_e){return H(D(_e),_e)},s&&(N(ot,"description",{configurable:!0,get:function(){return Ee(this).description}}),i||E(we,"propertyIsEnumerable",pe,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Le}),G(v(Ws),function(_e){R(_e)}),t({target:F,stat:!0,forced:!o},{useSetter:function(){Er=!0},useSimple:function(){Er=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Z,defineProperty:le,defineProperties:ee,getOwnPropertyDescriptor:ze}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ve}),B(),q(Le,F),I[K]=!0,c3}var D3={},Hw,$3;function _se(){if($3)return Hw;$3=1;var t=hh();return Hw=t&&!!Symbol.for&&!!Symbol.keyFor,Hw}var F3;function rCe(){if(F3)return D3;F3=1;var t=qe(),e=wi(),r=zr(),n=pl(),i=mh(),s=_se(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),D3}var q3={},L3;function nCe(){if(L3)return q3;L3=1;var t=qe(),e=zr(),r=hm(),n=fh(),i=mh(),s=_se(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),q3}var B3={},Ww,z3;function iCe(){if(z3)return Ww;z3=1;var t=St(),e=Jc(),r=Lr(),n=Bo(),i=pl(),s=t([].push);return Ww=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},Ww}var V3;function Ese(){if(V3)return B3;V3=1;var t=qe(),e=wi(),r=X0(),n=ni(),i=St(),s=mt(),o=Lr(),a=hm(),l=vh(),c=iCe(),d=hh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var N=e("Symbol")("stringify detection");return f([N])!=="[null]"||f({a:N})!=="{}"||f(Object(N))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),C=function(N,T){var j=l(arguments),I=c(T);if(!(!o(I)&&(N===void 0||a(N))))return j[1]=function(O,D){if(o(I)&&(D=n(I,this,h(O),D)),!a(D))return D},r(f,null,j)},E=function(N,T,j){var I=m(j,T-1),O=m(j,T+1);return p(w,N)&&!p(x,O)||p(x,N)&&!p(w,I)?"\\u"+y(g(N,0),16):N};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(T,j,I){var O=l(arguments),D=r(S?C:f,null,O);return _&&typeof D=="string"?v(D,b,E):D}}),B3}var U3={},H3;function sCe(){if(H3)return U3;H3=1;var t=qe(),e=hh(),r=mt(),n=ob(),i=gs(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),U3}var W3;function Cse(){return W3||(W3=1,tCe(),rCe(),nCe(),Ese(),sCe()),l3}var K3={},G3;function Nse(){if(G3)return K3;G3=1;var t=Ut();return t("asyncDispose"),K3}var Y3={},Q3;function oCe(){if(Q3)return Y3;Q3=1;var t=Ut();return t("asyncIterator"),Y3}var X3={},J3;function kse(){if(J3)return X3;J3=1;var t=Ut();return t("dispose"),X3}var Z3={},eL;function aCe(){if(eL)return Z3;eL=1;var t=Ut();return t("hasInstance"),Z3}var tL={},rL;function lCe(){if(rL)return tL;rL=1;var t=Ut();return t("isConcatSpreadable"),tL}var nL={},iL;function Tse(){if(iL)return nL;iL=1;var t=Ut();return t("iterator"),nL}var sL={},oL;function cCe(){if(oL)return sL;oL=1;var t=Ut();return t("match"),sL}var aL={},lL;function uCe(){if(lL)return aL;lL=1;var t=Ut();return t("matchAll"),aL}var cL={},uL;function dCe(){if(uL)return cL;uL=1;var t=Ut();return t("replace"),cL}var dL={},hL;function hCe(){if(hL)return dL;hL=1;var t=Ut();return t("search"),dL}var fL={},pL;function fCe(){if(pL)return fL;pL=1;var t=Ut();return t("species"),fL}var mL={},gL;function pCe(){if(gL)return mL;gL=1;var t=Ut();return t("split"),mL}var yL={},vL;function Ose(){if(vL)return yL;vL=1;var t=Ut(),e=Sse();return t("toPrimitive"),e(),yL}var bL={},xL;function mCe(){if(xL)return bL;xL=1;var t=wi(),e=Ut(),r=Zc();return e("toStringTag"),r(t("Symbol"),"Symbol"),bL}var wL={},SL;function gCe(){if(SL)return wL;SL=1;var t=Ut();return t("unscopables"),wL}var _L={},EL;function yCe(){if(EL)return _L;EL=1;var t=br(),e=Zc();return e(t.JSON,"JSON",!0),_L}var Kw,CL;function vCe(){if(CL)return Kw;CL=1,bse(),Cse(),Nse(),oCe(),kse(),aCe(),lCe(),Tse(),cCe(),uCe(),dCe(),hCe(),fCe(),pCe(),Ose(),mCe(),gCe(),yCe();var t=jr();return Kw=t.Symbol,Kw}var NL={},Gw,kL;function bCe(){return kL||(kL=1,Gw=function(){}),Gw}var Yw,TL;function xh(){return TL||(TL=1,Yw={}),Yw}var Qw,OL;function xCe(){if(OL)return Qw;OL=1;var t=xr(),e=zr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return Qw={EXISTS:i,PROPER:s,CONFIGURABLE:o},Qw}var Xw,jL;function wCe(){if(jL)return Xw;jL=1;var t=mt();return Xw=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Xw}var Jw,PL;function jse(){if(PL)return Jw;PL=1;var t=zr(),e=Lr(),r=gs(),n=ib(),i=wCe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return Jw=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},Jw}var Zw,IL;function Pse(){if(IL)return Zw;IL=1;var t=mt(),e=Lr(),r=An(),n=mm(),i=jse(),s=gm(),o=Vr(),a=ph(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),Zw={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},Zw}var eS,RL;function SCe(){if(RL)return eS;RL=1;var t=Pse().IteratorPrototype,e=mm(),r=cm(),n=Zc(),i=xh(),s=function(){return this};return eS=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},eS}var tS,ML;function _Ce(){if(ML)return tS;ML=1;var t=St(),e=zo();return tS=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},tS}var rS,AL;function ECe(){if(AL)return rS;AL=1;var t=An();return rS=function(e){return t(e)||e===null},rS}var nS,DL;function CCe(){if(DL)return nS;DL=1;var t=ECe(),e=String,r=TypeError;return nS=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},nS}var iS,$L;function NCe(){if($L)return iS;$L=1;var t=_Ce(),e=An(),r=Xc(),n=CCe();return iS=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),iS}var sS,FL;function kA(){if(FL)return sS;FL=1;var t=qe(),e=ni(),r=ph(),n=xCe(),i=Lr(),s=SCe(),o=jse(),a=NCe(),l=Zc(),c=gh(),d=gm(),h=Vr(),f=xh(),p=Pse(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return sS=function(C,E,N,T,j,I,O){s(N,E,T);var D=function(Q){if(Q===j&&$)return $;if(!y&&Q&&Q in B)return B[Q];switch(Q){case w:return function(){return new N(this,Q)};case x:return function(){return new N(this,Q)};case S:return function(){return new N(this,Q)}}return function(){return new N(this)}},z=E+" Iterator",R=!1,B=C.prototype,q=B[b]||B["@@iterator"]||j&&B[j],$=!y&&q||D(j),G=E==="Array"&&B.entries||q,K,F,X;if(G&&(K=o(G.call(new C)),K!==Object.prototype&&K.next&&(!r&&o(K)!==v&&(a?a(K,v):i(K[b])||d(K,b,_)),l(K,z,!0,!0),r&&(f[z]=_))),m&&j===x&&q&&q.name!==x&&(!r&&g?c(B,"name",x):(R=!0,$=function(){return e(q,this)})),j)if(F={values:D(x),keys:I?$:D(w),entries:D(S)},O)for(X in F)(y||R||!(X in B))&&d(B,X,F[X]);else t({target:E,proto:!0,forced:y||R},F);return(!r||O)&&B[b]!==$&&d(B,b,$,{name:j}),f[E]=$,F},sS}var oS,qL;function TA(){return qL||(qL=1,oS=function(t,e){return{value:t,done:e}}),oS}var aS,LL;function ml(){if(LL)return aS;LL=1;var t=Vs(),e=bCe(),r=xh(),n=ym(),i=Hi().f,s=kA(),o=TA(),a=ph(),l=xr(),c="Array Iterator",d=n.set,h=n.getterFor(c);aS=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return aS}var lS,BL;function kCe(){return BL||(BL=1,lS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),lS}var zL;function gl(){if(zL)return NL;zL=1,ml();var t=kCe(),e=br(),r=Zc(),n=xh();for(var i in t)r(e[i],i),n[i]=n.Array;return NL}var cS,VL;function Ise(){if(VL)return cS;VL=1;var t=vCe();return gl(),cS=t,cS}var UL={},HL;function TCe(){if(HL)return UL;HL=1;var t=Vr(),e=Hi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),UL}var WL={},KL;function OCe(){return KL||(KL=1,Nse()),WL}var GL={},YL;function jCe(){return YL||(YL=1,kse()),GL}var QL={},XL;function PCe(){if(XL)return QL;XL=1;var t=Ut();return t("metadata"),QL}var uS,JL;function ICe(){if(JL)return uS;JL=1;var t=Ise();return TCe(),OCe(),jCe(),PCe(),uS=t,uS}var ZL={},dS,eB;function Rse(){if(eB)return dS;eB=1;var t=wi(),e=St(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return dS=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},dS}var tB;function RCe(){if(tB)return ZL;tB=1;var t=qe(),e=Rse();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),ZL}var rB={},hS,nB;function Mse(){if(nB)return hS;nB=1;for(var t=mh(),e=wi(),r=St(),n=hm(),i=Vr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return hS=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},hS}var iB;function MCe(){if(iB)return rB;iB=1;var t=qe(),e=Mse();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),rB}var sB={},oB;function ACe(){if(oB)return sB;oB=1;var t=Ut();return t("customMatcher"),sB}var aB={},lB;function DCe(){if(lB)return aB;lB=1;var t=Ut();return t("observable"),aB}var cB={},uB;function $Ce(){if(uB)return cB;uB=1;var t=qe(),e=Rse();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),cB}var dB={},hB;function FCe(){if(hB)return dB;hB=1;var t=qe(),e=Mse();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),dB}var fB={},pB;function qCe(){if(pB)return fB;pB=1;var t=Ut();return t("matcher"),fB}var mB={},gB;function LCe(){if(gB)return mB;gB=1;var t=Ut();return t("metadataKey"),mB}var yB={},vB;function BCe(){if(vB)return yB;vB=1;var t=Ut();return t("patternMatch"),yB}var bB={},xB;function zCe(){if(xB)return bB;xB=1;var t=Ut();return t("replaceAll"),bB}var fS,wB;function VCe(){if(wB)return fS;wB=1;var t=ICe();return RCe(),MCe(),ACe(),DCe(),$Ce(),FCe(),qCe(),LCe(),BCe(),zCe(),fS=t,fS}var pS,SB;function UCe(){return SB||(SB=1,pS=VCe()),pS}var HCe=UCe(),Ag=Je(HCe),_B={},mS,EB;function WCe(){if(EB)return mS;EB=1;var t=St(),e=yh(),r=pl(),n=Xc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return mS={codeAt:a(!1),charAt:a(!0)},mS}var CB;function lb(){if(CB)return _B;CB=1;var t=WCe().charAt,e=pl(),r=ym(),n=kA(),i=TA(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),_B}var gS,NB;function KCe(){if(NB)return gS;NB=1,ml(),lb(),Tse();var t=ab();return gS=t.f("iterator"),gS}var yS,kB;function Ase(){if(kB)return yS;kB=1;var t=KCe();return gl(),yS=t,yS}var vS,TB;function GCe(){if(TB)return vS;TB=1;var t=Ase();return vS=t,vS}var bS,OB;function YCe(){if(OB)return bS;OB=1;var t=GCe();return bS=t,bS}var xS,jB;function QCe(){return jB||(jB=1,xS=YCe()),xS}var XCe=QCe(),JCe=Je(XCe);function Cp(t){"@babel/helpers - typeof";return Cp=typeof Ag=="function"&&typeof JCe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Ag=="function"&&e.constructor===Ag&&e!==Ag.prototype?"symbol":typeof e},Cp(t)}var wS,PB;function ZCe(){if(PB)return wS;PB=1,Ose();var t=ab();return wS=t.f("toPrimitive"),wS}var SS,IB;function eNe(){if(IB)return SS;IB=1;var t=ZCe();return SS=t,SS}var _S,RB;function tNe(){if(RB)return _S;RB=1;var t=eNe();return _S=t,_S}var ES,MB;function rNe(){if(MB)return ES;MB=1;var t=tNe();return ES=t,ES}var CS,AB;function nNe(){return AB||(AB=1,CS=rNe()),CS}var iNe=nNe(),sNe=Je(iNe);function oNe(t,e){if(Cp(t)!="object"||!t)return t;var r=t[sNe];if(r!==void 0){var n=r.call(t,e);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aNe(t){var e=oNe(t,"string");return Cp(e)=="symbol"?e:e+""}function Wa(t,e,r){return(e=aNe(e))in t?KEe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var DB={},NS,$B;function lNe(){if($B)return NS;$B=1;var t=St(),e=zo(),r=An(),n=zr(),i=vh(),s=lm(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return NS=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},NS}var FB;function cNe(){if(FB)return DB;FB=1;var t=qe(),e=lNe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),DB}var kS,qB;function ii(){if(qB)return kS;qB=1;var t=br(),e=jr();return kS=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},kS}var TS,LB;function uNe(){if(LB)return TS;LB=1,cNe();var t=ii();return TS=t("Function","bind"),TS}var OS,BB;function dNe(){if(BB)return OS;BB=1;var t=Br(),e=uNe(),r=Function.prototype;return OS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},OS}var jS,zB;function hNe(){if(zB)return jS;zB=1;var t=dNe();return jS=t,jS}var PS,VB;function fNe(){return VB||(VB=1,PS=hNe()),PS}var pNe=fNe(),Dse=Je(pNe),UB={},IS,HB;function mNe(){if(HB)return IS;HB=1;var t=zo(),e=gs(),r=J0(),n=hl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return IS={left:o(!1),right:o(!0)},IS}var RS,WB;function cb(){if(WB)return RS;WB=1;var t=mt();return RS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},RS}var MS,KB;function $se(){if(KB)return MS;KB=1;var t=br(),e=dh(),r=Bo(),n=function(i){return e.slice(0,i.length)===i};return MS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),MS}var AS,GB;function gNe(){if(GB)return AS;GB=1;var t=$se();return AS=t==="NODE",AS}var YB;function yNe(){if(YB)return UB;YB=1;var t=qe(),e=mNe().left,r=cb(),n=dm(),i=gNe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),UB}var DS,QB;function vNe(){if(QB)return DS;QB=1,yNe();var t=ii();return DS=t("Array","reduce"),DS}var $S,XB;function bNe(){if(XB)return $S;XB=1;var t=Br(),e=vNe(),r=Array.prototype;return $S=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},$S}var FS,JB;function xNe(){if(JB)return FS;JB=1;var t=bNe();return FS=t,FS}var qS,ZB;function wNe(){return ZB||(ZB=1,qS=xNe()),qS}var SNe=wNe(),_Ne=Je(SNe),ez={},tz;function ENe(){if(tz)return ez;tz=1;var t=qe(),e=bh().filter,r=fm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),ez}var LS,rz;function CNe(){if(rz)return LS;rz=1,ENe();var t=ii();return LS=t("Array","filter"),LS}var BS,nz;function NNe(){if(nz)return BS;nz=1;var t=Br(),e=CNe(),r=Array.prototype;return BS=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},BS}var zS,iz;function kNe(){if(iz)return zS;iz=1;var t=NNe();return zS=t,zS}var VS,sz;function TNe(){return sz||(sz=1,VS=kNe()),VS}var ONe=TNe(),Hu=Je(ONe),oz={},az;function jNe(){if(az)return oz;az=1;var t=qe(),e=bh().map,r=fm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),oz}var US,lz;function PNe(){if(lz)return US;lz=1,jNe();var t=ii();return US=t("Array","map"),US}var HS,cz;function INe(){if(cz)return HS;cz=1;var t=Br(),e=PNe(),r=Array.prototype;return HS=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},HS}var WS,uz;function RNe(){if(uz)return WS;uz=1;var t=INe();return WS=t,WS}var KS,dz;function MNe(){return dz||(dz=1,KS=RNe()),KS}var ANe=MNe(),ns=Je(ANe),GS,hz;function DNe(){return hz||(hz=1,GS=Ise()),GS}var $Ne=DNe(),FNe=Je($Ne),fz={},pz;function qNe(){if(pz)return fz;pz=1;var t=qe(),e=Jc(),r=vse(),n=An(),i=_A(),s=hl(),o=Vs(),a=rb(),l=Vr(),c=fm(),d=vh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,C,E;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(C=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in b&&a(C,E,b[x]);return C.length=E,C}}),fz}var YS,mz;function LNe(){if(mz)return YS;mz=1,qNe();var t=ii();return YS=t("Array","slice"),YS}var QS,gz;function BNe(){if(gz)return QS;gz=1;var t=Br(),e=LNe(),r=Array.prototype;return QS=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},QS}var XS,yz;function zNe(){if(yz)return XS;yz=1;var t=BNe();return XS=t,XS}var JS,vz;function VNe(){return vz||(vz=1,JS=zNe()),JS}var UNe=VNe(),HNe=Je(UNe),bz={},ZS,xz;function Fse(){if(xz)return ZS;xz=1;var t=wi(),e=St(),r=sb(),n=ob(),i=Vo(),s=e([].concat);return ZS=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},ZS}var wz;function WNe(){if(wz)return bz;wz=1;var t=qe(),e=Fse();return t({target:"Reflect",stat:!0},{ownKeys:e}),bz}var e_,Sz;function KNe(){if(Sz)return e_;Sz=1,WNe();var t=jr();return e_=t.Reflect.ownKeys,e_}var t_,_z;function GNe(){if(_z)return t_;_z=1;var t=KNe();return t_=t,t_}var r_,Ez;function YNe(){return Ez||(Ez=1,r_=GNe()),r_}var QNe=YNe(),XNe=Je(QNe),Cz={},Nz;function JNe(){if(Nz)return Cz;Nz=1;var t=qe(),e=Jc();return t({target:"Array",stat:!0},{isArray:e}),Cz}var n_,kz;function ZNe(){if(kz)return n_;kz=1,JNe();var t=jr();return n_=t.Array.isArray,n_}var i_,Tz;function e2e(){if(Tz)return i_;Tz=1;var t=ZNe();return i_=t,i_}var s_,Oz;function t2e(){return Oz||(Oz=1,s_=e2e()),s_}var r2e=t2e(),Ns=Je(r2e),jz={},Pz;function n2e(){if(Pz)return jz;Pz=1;var t=qe(),e=gs(),r=nb(),n=mt(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),jz}var o_,Iz;function i2e(){if(Iz)return o_;Iz=1,n2e();var t=jr();return o_=t.Object.keys,o_}var a_,Rz;function s2e(){if(Rz)return a_;Rz=1;var t=i2e();return a_=t,a_}var l_,Mz;function o2e(){return Mz||(Mz=1,l_=s2e()),l_}var a2e=o2e(),OA=Je(a2e),Az={},c_,Dz;function l2e(){if(Dz)return c_;Dz=1;var t=bh().forEach,e=cb(),r=e("forEach");return c_=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},c_}var $z;function c2e(){if($z)return Az;$z=1;var t=qe(),e=l2e();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),Az}var u_,Fz;function u2e(){if(Fz)return u_;Fz=1,c2e();var t=ii();return u_=t("Array","forEach"),u_}var d_,qz;function d2e(){if(qz)return d_;qz=1;var t=u2e();return d_=t,d_}var h_,Lz;function h2e(){if(Lz)return h_;Lz=1;var t=fl(),e=zr(),r=Br(),n=d2e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return h_=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},h_}var f_,Bz;function f2e(){return Bz||(Bz=1,f_=h2e()),f_}var p2e=f2e(),Ac=Je(p2e),zz={},Vz;function m2e(){if(Vz)return zz;Vz=1;var t=qe(),e=St(),r=Jc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),zz}var p_,Uz;function g2e(){if(Uz)return p_;Uz=1,m2e();var t=ii();return p_=t("Array","reverse"),p_}var m_,Hz;function y2e(){if(Hz)return m_;Hz=1;var t=Br(),e=g2e(),r=Array.prototype;return m_=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},m_}var g_,Wz;function v2e(){if(Wz)return g_;Wz=1;var t=y2e();return g_=t,g_}var y_,Kz;function b2e(){return Kz||(Kz=1,y_=v2e()),y_}var x2e=b2e(),w2e=Je(x2e),Gz={},v_,Yz;function S2e(){if(Yz)return v_;Yz=1;var t=xr(),e=Jc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return v_=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},v_}var b_,Qz;function qse(){if(Qz)return b_;Qz=1;var t=fh(),e=TypeError;return b_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},b_}var Xz;function _2e(){if(Xz)return Gz;Xz=1;var t=qe(),e=gs(),r=_A(),n=yh(),i=hl(),s=S2e(),o=yse(),a=SA(),l=rb(),c=qse(),d=fm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,C,E,N,T;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),C=a(y,_),E=0;E<_;E++)N=w+E,N in y&&l(C,E,y[N]);if(C.length=_,S<_){for(E=w;E<b-_;E++)N=E+_,T=E+S,N in y?y[T]=y[N]:c(y,T);for(E=b;E>b-_+S;E--)c(y,E-1)}else if(S>_)for(E=b-_;E>w;E--)N=E+_-1,T=E+S-1,N in y?y[T]=y[N]:c(y,T);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,b-_+S),C}}),Gz}var x_,Jz;function E2e(){if(Jz)return x_;Jz=1,_2e();var t=ii();return x_=t("Array","splice"),x_}var w_,Zz;function C2e(){if(Zz)return w_;Zz=1;var t=Br(),e=E2e(),r=Array.prototype;return w_=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},w_}var S_,e6;function N2e(){if(e6)return S_;e6=1;var t=C2e();return S_=t,S_}var __,t6;function k2e(){return t6||(t6=1,__=N2e()),__}var T2e=k2e(),Lse=Je(T2e),r6={},E_,n6;function O2e(){if(n6)return E_;n6=1;var t=xr(),e=St(),r=ni(),n=mt(),i=nb(),s=ob(),o=yA(),a=gs(),l=J0(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return E_=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,C=0,E;_>C;)E=S[C++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,E_}var i6;function j2e(){if(i6)return r6;i6=1;var t=qe(),e=O2e();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),r6}var C_,s6;function P2e(){if(s6)return C_;s6=1,j2e();var t=jr();return C_=t.Object.assign,C_}var N_,o6;function I2e(){if(o6)return N_;o6=1;var t=P2e();return N_=t,N_}var k_,a6;function R2e(){return a6||(a6=1,k_=I2e()),k_}var M2e=R2e(),A2e=Je(M2e),T_,l6;function D2e(){if(l6)return T_;l6=1,bse();var t=ii();return T_=t("Array","concat"),T_}var O_,c6;function $2e(){if(c6)return O_;c6=1;var t=Br(),e=D2e(),r=Array.prototype;return O_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},O_}var j_,u6;function F2e(){if(u6)return j_;u6=1;var t=$2e();return j_=t,j_}var P_,d6;function q2e(){return d6||(d6=1,P_=F2e()),P_}var L2e=q2e(),B2e=Je(L2e),h6={},f6;function z2e(){if(f6)return h6;f6=1;var t=qe(),e=xr(),r=mm();return t({target:"Object",stat:!0,sham:!e},{create:r}),h6}var I_,p6;function V2e(){if(p6)return I_;p6=1,z2e();var t=jr(),e=t.Object;return I_=function(n,i){return e.create(n,i)},I_}var R_,m6;function U2e(){if(m6)return R_;m6=1;var t=V2e();return R_=t,R_}var M_,g6;function H2e(){return g6||(g6=1,M_=U2e()),M_}var W2e=H2e(),K2e=Je(W2e),y6={},A_,v6;function G2e(){if(v6)return A_;v6=1;var t=yh(),e=pl(),r=Xc(),n=RangeError;return A_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},A_}var D_,b6;function Y2e(){if(b6)return D_;b6=1;var t=St(),e=gse(),r=pl(),n=G2e(),i=Xc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return D_={start:l(!1),end:l(!0)},D_}var $_,x6;function Q2e(){if(x6)return $_;x6=1;var t=St(),e=mt(),r=Y2e().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return $_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,$_}var w6;function X2e(){if(w6)return y6;w6=1;var t=qe(),e=ni(),r=gs(),n=dse(),i=Q2e(),s=Bo(),o=mt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),y6}var F_,S6;function J2e(){if(S6)return F_;S6=1,X2e(),Ese();var t=jr(),e=X0();return t.JSON||(t.JSON={stringify:JSON.stringify}),F_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},F_}var q_,_6;function Z2e(){if(_6)return q_;_6=1;var t=J2e();return q_=t,q_}var L_,E6;function eke(){return E6||(E6=1,L_=Z2e()),L_}var tke=eke(),rke=Je(tke),C6={},N6={},B_,k6;function nke(){if(k6)return B_;k6=1;var t=TypeError;return B_=function(e,r){if(e<r)throw new t("Not enough arguments");return e},B_}var z_,T6;function Bse(){if(T6)return z_;T6=1;var t=br(),e=X0(),r=Lr(),n=$se(),i=dh(),s=vh(),o=nke(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return z_=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?c(y,p):c(y)}:c},z_}var O6;function ike(){if(O6)return N6;O6=1;var t=qe(),e=br(),r=Bse(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),N6}var j6={},P6;function ske(){if(P6)return j6;P6=1;var t=qe(),e=br(),r=Bse(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),j6}var I6;function oke(){return I6||(I6=1,ike(),ske()),C6}var V_,R6;function ake(){if(R6)return V_;R6=1,oke();var t=jr();return V_=t.setTimeout,V_}var U_,M6;function lke(){return M6||(M6=1,U_=ake()),U_}var cke=lke(),uke=Je(cke),H_={exports:{}},A6;function dke(){return A6||(A6=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(H_)),H_.exports}var hke=dke(),fke=Je(hke);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function hs(){return hs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hs.apply(this,arguments)}function Wi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Dg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var zI;typeof Object.assign!="function"?zI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:zI=Object.assign;var Dc=zI,D6=["","webkit","Moz","MS","ms","o"],pke=typeof document>"u"?{style:{}}:document.createElement("div"),mke="function",Wu=Math.round,$c=Math.abs,jA=Date.now;function ub(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<D6.length;){if(r=D6[s],n=r?r+i:e,n in t)return n;s++}}var wo;typeof window>"u"?wo={}:wo=window;var zse=ub(pke.style,"touchAction"),Vse=zse!==void 0;function gke(){if(!Vse)return!1;var t={},e=wo.CSS&&wo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?wo.CSS.supports("touch-action",r):!0}),t}var Use="compute",Hse="auto",VI="manipulation",dc="none",Np="pan-x",kp="pan-y",$g=gke(),yke=/mobile|tablet|ip(ad|hone|od)|android/i,Wse="ontouchstart"in wo,vke=ub(wo,"PointerEvent")!==void 0,bke=Wse&&yke.test(navigator.userAgent),vm="touch",xke="pen",PA="mouse",wke="kinect",Ske=25,Pn=1,eu=2,pr=4,ti=8,Hv=1,bm=2,xm=4,wm=8,Kd=16,qs=bm|xm,hc=wm|Kd,Kse=qs|hc,Gse=["x","y"],Wv=["clientX","clientY"];function So(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function db(t,e){return typeof t===mke?t.apply(e&&e[0]||void 0,e):t}function Ul(t,e){return t.indexOf(e)>-1}function _ke(t){if(Ul(t,dc))return dc;var e=Ul(t,Np),r=Ul(t,kp);return e&&r?dc:e||r?e?Np:kp:Ul(t,VI)?VI:Hse}var Yse=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Use&&(n=this.compute()),Vse&&this.manager.element.style&&$g[n]&&(this.manager.element.style[zse]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return So(this.manager.recognizers,function(i){db(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),_ke(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Ul(o,dc)&&!$g[dc],l=Ul(o,kp)&&!$g[kp],c=Ul(o,Np)&&!$g[Np];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&qs||c&&s&hc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function IA(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Qse(t){var e=t.length;if(e===1)return{x:Wu(t[0].clientX),y:Wu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Wu(r/e),y:Wu(n/e)}}function $6(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Wu(t.pointers[r].clientX),clientY:Wu(t.pointers[r].clientY)},r++;return{timeStamp:jA(),pointers:e,center:Qse(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Kv(t,e,r){r||(r=Gse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function UI(t,e,r){r||(r=Gse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Xse(t,e){return t===e?Hv:$c(t)>=$c(e)?t<0?bm:xm:e<0?wm:Kd}function Eke(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Pn||s.eventType===pr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Jse(t,e,r){return{x:e/t||0,y:r/t||0}}function Cke(t,e){return Kv(e[0],e[1],Wv)/Kv(t[0],t[1],Wv)}function Nke(t,e){return UI(e[1],e[0],Wv)+UI(t[1],t[0],Wv)}function kke(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ti&&(n>Ske||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=Jse(n,l,c);s=d.x,o=d.y,i=$c(d.x)>$c(d.y)?d.x:d.y,a=Xse(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function Tke(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=$6(e)),i>1&&!r.firstMultiple?r.firstMultiple=$6(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Qse(n);e.timeStamp=jA(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=UI(a,l),e.distance=Kv(a,l),Eke(r,e),e.offsetDirection=Xse(e.deltaX,e.deltaY);var c=Jse(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=$c(c.x)>$c(c.y)?c.x:c.y,e.scale=o?Cke(o.pointers,n):1,e.rotation=o?Nke(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,kke(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,IA(f,d)&&(d=f),e.target=d}function Oke(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Pn&&n-i===0,o=e&(pr|ti)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,Tke(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Tp(t){return t.trim().split(/\s+/g)}function qf(t,e,r){So(Tp(e),function(n){t.addEventListener(n,r,!1)})}function Lf(t,e,r){So(Tp(e),function(n){t.removeEventListener(n,r,!1)})}function F6(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var wh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){db(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&qf(this.element,this.evEl,this.domHandler),this.evTarget&&qf(this.target,this.evTarget,this.domHandler),this.evWin&&qf(F6(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Lf(this.element,this.evEl,this.domHandler),this.evTarget&&Lf(this.target,this.evTarget,this.domHandler),this.evWin&&Lf(F6(this.element),this.evWin,this.domHandler)},t}();function Fc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var jke={pointerdown:Pn,pointermove:eu,pointerup:pr,pointercancel:ti,pointerout:ti},Pke={2:vm,3:xke,4:PA,5:wke},Zse="pointerdown",eoe="pointermove pointerup pointercancel";wo.MSPointerEvent&&!wo.PointerEvent&&(Zse="MSPointerDown",eoe="MSPointerMove MSPointerUp MSPointerCancel");var toe=function(t){Wi(e,t);function e(){var n,i=e.prototype;return i.evEl=Zse,i.evWin=eoe,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=jke[a],c=Pke[i.pointerType]||i.pointerType,d=c===vm,h=Fc(s,i.pointerId,"pointerId");l&Pn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(pr|ti)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(wh);function Op(t){return Array.prototype.slice.call(t,0)}function RA(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Fc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var Ike={touchstart:Pn,touchmove:eu,touchend:pr,touchcancel:ti},Rke="touchstart touchmove touchend touchcancel",MA=function(t){Wi(e,t);function e(){var n;return e.prototype.evTarget=Rke,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=Ike[i.type],o=Mke.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:vm,srcEvent:i})},e}(wh);function Mke(t,e){var r=Op(t.touches),n=this.targetIds;if(e&(Pn|eu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Op(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return IA(c.target,l)}),e===Pn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(pr|ti)&&delete n[o[i].identifier],i++;if(a.length)return[RA(s.concat(a),"identifier",!0),a]}var Ake={mousedown:Pn,mousemove:eu,mouseup:pr},Dke="mousedown",$ke="mousemove mouseup",AA=function(t){Wi(e,t);function e(){var n,i=e.prototype;return i.evEl=Dke,i.evWin=$ke,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=Ake[i.type];s&Pn&&i.button===0&&(this.pressed=!0),s&eu&&i.which!==1&&(s=pr),this.pressed&&(s&pr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:PA,srcEvent:i}))},e}(wh),Fke=2500,q6=25;function L6(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,Fke)}}function qke(t,e){t&Pn?(this.primaryTouch=e.changedPointers[0].identifier,L6.call(this,e)):t&(pr|ti)&&L6.call(this,e)}function Lke(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=q6&&o<=q6)return!0}return!1}var roe=function(){var t=function(e){Wi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===vm,h=c.pointerType===PA;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)qke.call(Dg(Dg(o)),l,c);else if(h&&Lke.call(Dg(Dg(o)),c))return;o.callback(a,l,c)}},o.touch=new MA(o.manager,o.handler),o.mouse=new AA(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(wh);return t}();function Bke(t){var e,r=t.options.inputClass;return r?e=r:vke?e=toe:bke?e=MA:Wse?e=roe:e=AA,new e(t,Oke)}function Ku(t,e,r){return Array.isArray(t)?(So(t,r[e],r),!0):!1}var hy=1,Bi=2,Gd=4,Ka=8,_o=Ka,jp=16,Is=32,zke=1;function Vke(){return zke++}function Fg(t,e){var r=e.manager;return r?r.get(t):t}function B6(t){return t&jp?"cancel":t&Ka?"end":t&Gd?"move":t&Bi?"start":""}var Sm=function(){function t(r){r===void 0&&(r={}),this.options=hs({enable:!0},r),this.id=Vke(),this.manager=null,this.state=hy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Dc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Ku(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Fg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Ku(n,"dropRecognizeWith",this)?this:(n=Fg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Ku(n,"requireFailure",this))return this;var i=this.requireFail;return n=Fg(n,this),Fc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Ku(n,"dropRequireFailure",this))return this;n=Fg(n,this);var i=Fc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ka&&o(i.options.event+B6(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ka&&o(i.options.event+B6(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Is},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Is|hy)))return!1;n++}return!0},e.recognize=function(n){var i=Dc({},n);if(!db(this.options.enable,[this,i])){this.reset(),this.state=Is;return}this.state&(_o|jp|Is)&&(this.state=hy),this.state=this.process(i),this.state&(Bi|Gd|Ka|jp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),HI=function(t){Wi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,hs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[VI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Pn&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==pr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Kv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=_o,s.tryEmit()},o.interval),Bi):_o}return Is},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Is},this.options.interval),Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===_o&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Sm),Yd=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,hs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Bi|Gd),l=this.attrTest(i);return a&&(o&ti||!l)?s|jp:a||l?o&pr?s|Ka:s&Bi?s|Gd:Bi:Is},e}(Sm);function noe(t){return t===Kd?"down":t===wm?"up":t===bm?"left":t===xm?"right":""}var DA=function(t){Wi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,hs({event:"pan",threshold:10,pointers:1,direction:Kse},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&qs&&s.push(kp),i&hc&&s.push(Np),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&qs?(l=c===0?Hv:c<0?bm:xm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Hv:d<0?wm:Kd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Yd.prototype.attrTest.call(this,i)&&(this.state&Bi||!(this.state&Bi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=noe(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Yd),ioe=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,hs({event:"swipe",threshold:10,velocity:.3,direction:qs|hc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return DA.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(qs|hc)?o=i.overallVelocity:s&qs?o=i.overallVelocityX:s&hc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&$c(o)>this.options.velocity&&i.eventType&pr},r.emit=function(i){var s=noe(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Yd),soe=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,hs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[dc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Bi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Yd),ooe=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,hs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[dc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Bi)},e}(Yd),aoe=function(t){Wi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,hs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Hse]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(pr|ti)&&!c)this.reset();else if(i.eventType&Pn)this.reset(),this._timer=setTimeout(function(){s.state=_o,s.tryEmit()},o.time);else if(i.eventType&pr)return _o;return Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===_o&&(i&&i.eventType&pr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=jA(),this.manager.emit(this.options.event,this._input)))},e}(Sm),loe={domEvents:!1,touchAction:Use,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},z6=[[ooe,{enable:!1}],[soe,{enable:!1},["rotate"]],[ioe,{direction:qs}],[DA,{direction:qs},["swipe"]],[HI],[HI,{event:"doubletap",taps:2},["tap"]],[aoe]],Uke=1,V6=2;function U6(t,e){var r=t.element;if(r.style){var n;So(t.options.cssProps,function(i,s){n=ub(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function Hke(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var H6=function(){function t(r,n){var i=this;this.options=Dc({},loe,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=Bke(this),this.touchAction=new Yse(this,this.options.touchAction),U6(this,!0),So(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Dc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?V6:Uke},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&_o)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==V6&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Bi|Gd|Ka)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Sm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Ku(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Ku(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Fc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return So(Tp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return So(Tp(n),function(o){i?s[o]&&s[o].splice(Fc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&Hke(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&U6(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Wke={touchstart:Pn,touchmove:eu,touchend:pr,touchcancel:ti},Kke="touchstart",Gke="touchstart touchmove touchend touchcancel",Yke=function(t){Wi(e,t);function e(){var n,i=e.prototype;return i.evTarget=Kke,i.evWin=Gke,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=Wke[i.type];if(s===Pn&&(this.started=!0),!!this.started){var o=Qke.call(this,i,s);s&(pr|ti)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:vm,srcEvent:i})}},e}(wh);function Qke(t,e){var r=Op(t.touches),n=Op(t.changedTouches);return e&(pr|ti)&&(r=RA(r.concat(n),"identifier",!0)),[r,n]}function coe(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var uoe=coe(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),Xke=coe(function(t,e){return uoe(t,e,!0)},"merge","Use `assign`.");function Jke(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Dc(i,r)}function W6(t,e){return function(){return t.apply(e,arguments)}}var Zke=function(){var t=function(r,n){return n===void 0&&(n={}),new H6(r,hs({recognizers:z6.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Kse,t.DIRECTION_DOWN=Kd,t.DIRECTION_LEFT=bm,t.DIRECTION_RIGHT=xm,t.DIRECTION_UP=wm,t.DIRECTION_HORIZONTAL=qs,t.DIRECTION_VERTICAL=hc,t.DIRECTION_NONE=Hv,t.DIRECTION_DOWN=Kd,t.INPUT_START=Pn,t.INPUT_MOVE=eu,t.INPUT_END=pr,t.INPUT_CANCEL=ti,t.STATE_POSSIBLE=hy,t.STATE_BEGAN=Bi,t.STATE_CHANGED=Gd,t.STATE_ENDED=Ka,t.STATE_RECOGNIZED=_o,t.STATE_CANCELLED=jp,t.STATE_FAILED=Is,t.Manager=H6,t.Input=wh,t.TouchAction=Yse,t.TouchInput=MA,t.MouseInput=AA,t.PointerEventInput=toe,t.TouchMouseInput=roe,t.SingleTouchInput=Yke,t.Recognizer=Sm,t.AttrRecognizer=Yd,t.Tap=HI,t.Pan=DA,t.Swipe=ioe,t.Pinch=soe,t.Rotate=ooe,t.Press=aoe,t.on=qf,t.off=Lf,t.each=So,t.merge=Xke,t.extend=uoe,t.bindFn=W6,t.assign=Dc,t.inherit=Jke,t.bindFn=W6,t.prefixed=ub,t.toArray=Op,t.inArray=Fc,t.uniqueArray=RA,t.splitStr=Tp,t.boolOrFn=db,t.hasParent=IA,t.addEventListeners=qf,t.removeEventListeners=Lf,t.defaults=Dc({},loe,{preset:z6}),t}();const doe=FNe("DELETE");function eTe(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return hoe({},t,...r)}function hoe(){const t=Gv(...arguments);return poe(t),t}function Gv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return Gv(hoe(e[0],e[1]),...HNe(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of XNe(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===doe?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!Ns(n[s])&&!Ns(i[s])?n[s]=Gv(n[s],i[s]):n[s]=foe(i[s]));return n}function foe(t){return Ns(t)?ns(t).call(t,e=>foe(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):Gv({},t):t}function poe(t){for(const e of OA(t))t[e]===doe?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&poe(t[e])}function tTe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const rTe=typeof window<"u"?window.Hammer||Zke:function(){return tTe()};function mo(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=rTe(this._dom.overlay);r.on("tap",Dse(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Ac(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{nTe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}fke(mo.prototype);mo.current=null;mo.prototype.destroy=function(){this.deactivate();for(const r of w2e(t=Lse(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};mo.prototype.activate=function(){mo.current&&mo.current.deactivate(),mo.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};mo.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};mo.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function nTe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var W_,K6;function iTe(){if(K6)return W_;K6=1,Cse();var t=jr();return W_=t.Object.getOwnPropertySymbols,W_}var K_,G6;function sTe(){if(G6)return K_;G6=1;var t=iTe();return K_=t,K_}var G_,Y6;function oTe(){return Y6||(Y6=1,G_=sTe()),G_}var aTe=oTe(),Q6=Je(aTe),Y_={exports:{}},X6={},J6;function lTe(){if(J6)return X6;J6=1;var t=qe(),e=mt(),r=Vs(),n=eb().f,i=xr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),X6}var Z6;function cTe(){if(Z6)return Y_.exports;Z6=1,lTe();var t=jr(),e=t.Object,r=Y_.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),Y_.exports}var Q_,e8;function uTe(){if(e8)return Q_;e8=1;var t=cTe();return Q_=t,Q_}var X_,t8;function dTe(){return t8||(t8=1,X_=uTe()),X_}var hTe=dTe(),moe=Je(hTe),r8={},n8;function fTe(){if(n8)return r8;n8=1;var t=qe(),e=xr(),r=Fse(),n=Vs(),i=eb(),s=rb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),r8}var J_,i8;function pTe(){if(i8)return J_;i8=1,fTe();var t=jr();return J_=t.Object.getOwnPropertyDescriptors,J_}var Z_,s8;function mTe(){if(s8)return Z_;s8=1;var t=pTe();return Z_=t,Z_}var eE,o8;function gTe(){return o8||(o8=1,eE=mTe()),eE}var yTe=gTe(),a8=Je(yTe),tE={exports:{}},l8={},c8;function vTe(){if(c8)return l8;c8=1;var t=qe(),e=xr(),r=CA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),l8}var u8;function bTe(){if(u8)return tE.exports;u8=1,vTe();var t=jr(),e=t.Object,r=tE.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),tE.exports}var rE,d8;function xTe(){if(d8)return rE;d8=1;var t=bTe();return rE=t,rE}var nE,h8;function wTe(){return h8||(h8=1,nE=xTe()),nE}var STe=wTe(),_Te=Je(STe),iE,f8;function ETe(){return f8||(f8=1,iE=mse()),iE}var CTe=ETe(),NTe=Je(CTe),p8={},m8={},sE={exports:{}},oE,g8;function kTe(){if(g8)return oE;g8=1;var t=mt();return oE=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),oE}var aE,y8;function TTe(){if(y8)return aE;y8=1;var t=mt(),e=An(),r=Bo(),n=kTe(),i=Object.isExtensible,s=t(function(){});return aE=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,aE}var lE,v8;function OTe(){if(v8)return lE;v8=1;var t=mt();return lE=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),lE}var b8;function goe(){if(b8)return sE.exports;b8=1;var t=qe(),e=St(),r=pm(),n=An(),i=zr(),s=Hi().f,o=sb(),a=wse(),l=TTe(),c=Z0(),d=OTe(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(C){for(var E=x(C),N=0,T=E.length;N<T;N++)if(E[N]===f){S(E,N,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=sE.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,sE.exports}var cE,x8;function jTe(){if(x8)return cE;x8=1;var t=Vr(),e=xh(),r=t("iterator"),n=Array.prototype;return cE=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},cE}var uE,w8;function yoe(){if(w8)return uE;w8=1;var t=fl(),e=vA(),r=um(),n=xh(),i=Vr(),s=i("iterator");return uE=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},uE}var dE,S8;function voe(){if(S8)return dE;S8=1;var t=ni(),e=zo(),r=Vo(),n=fh(),i=yoe(),s=TypeError;return dE=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},dE}var hE,_8;function $A(){if(_8)return hE;_8=1;var t=ni(),e=Vo(),r=vA();return hE=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},hE}var fE,E8;function FA(){if(E8)return fE;E8=1;var t=tb(),e=ni(),r=Vo(),n=fh(),i=jTe(),s=hl(),o=Br(),a=voe(),l=yoe(),c=$A(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return fE=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,C,E,N,T,j,I,O=function(z){return _&&c(_,"normal"),new h(!0,z)},D=function(z){return y?(r(z),x?S(z[0],z[1],O):S(z[0],z[1])):x?S(z,O):S(z)};if(b)_=p.iterator;else if(w)_=p;else{if(C=l(p),!C)throw new d(n(p)+" is not iterable");if(i(C)){for(E=0,N=s(p);N>E;E++)if(T=D(p[E]),T&&o(f,T))return T;return new h(!1)}_=a(p,C)}for(j=b?p.next:_.next;!(I=e(j,_)).done;){try{T=D(I.value)}catch(z){c(_,"throw",z)}if(typeof T=="object"&&T&&o(f,T))return T}return new h(!1)},fE}var pE,C8;function boe(){if(C8)return pE;C8=1;var t=Br(),e=TypeError;return pE=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},pE}var mE,N8;function xoe(){if(N8)return mE;N8=1;var t=qe(),e=br(),r=goe(),n=mt(),i=gh(),s=FA(),o=boe(),a=Lr(),l=An(),c=um(),d=Zc(),h=Hi().f,f=bh().forEach,p=xr(),m=ym(),g=m.set,v=m.getterFor;return mE=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",C=e[y],E=C&&C.prototype,N={},T;if(!p||!a(C)||!(S||E.forEach&&!n(function(){new C().entries().next()})))T=w.getConstructor(b,y,x,_),r.enable();else{T=b(function(O,D){g(o(O,j),{type:y,collection:new C}),c(D)||s(D,O[_],{that:O,AS_ENTRIES:x})});var j=T.prototype,I=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in E&&!(S&&O==="clear")&&i(j,O,function(z,R){var B=I(this).collection;if(!D&&S&&!l(z))return O==="get"?void 0:!1;var q=B[O](z===0?0:z,R);return D?this:q})}),S||h(j,"size",{configurable:!0,get:function(){return I(this).collection.size}})}return d(T,y,!1,!0),N[y]=T,t({global:!0,forced:!0},N),S||w.setStrong(T,y,x),T},mE}var gE,k8;function PTe(){if(k8)return gE;k8=1;var t=gm();return gE=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},gE}var yE,T8;function ITe(){if(T8)return yE;T8=1;var t=wi(),e=NA(),r=Vr(),n=xr(),i=r("species");return yE=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},yE}var vE,O8;function woe(){if(O8)return vE;O8=1;var t=mm(),e=NA(),r=PTe(),n=tb(),i=boe(),s=um(),o=FA(),a=kA(),l=TA(),c=ITe(),d=xr(),h=goe().fastKey,f=ym(),p=f.set,m=f.getterFor;return vE={getConstructor:function(g,v,y,b){var w=g(function(E,N){i(E,x),p(E,{type:v,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(N)||o(N,E[b],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(E,N,T){var j=S(E),I=C(E,N),O,D;return I?I.value=T:(j.last=I={index:D=h(N,!0),key:N,value:T,previous:O=j.last,next:null,removed:!1},j.first||(j.first=I),O&&(O.next=I),d?j.size++:E.size++,D!=="F"&&(j.index[D]=I)),E},C=function(E,N){var T=S(E),j=h(N),I;if(j!=="F")return T.index[j];for(I=T.first;I;I=I.next)if(I.key===N)return I};return r(x,{clear:function(){for(var N=this,T=S(N),j=T.first;j;)j.removed=!0,j.previous&&(j.previous=j.previous.next=null),j=j.next;T.first=T.last=null,T.index=t(null),d?T.size=0:N.size=0},delete:function(E){var N=this,T=S(N),j=C(N,E);if(j){var I=j.next,O=j.previous;delete T.index[j.index],j.removed=!0,O&&(O.next=I),I&&(I.previous=O),T.first===j&&(T.first=I),T.last===j&&(T.last=O),d?T.size--:N.size--}return!!j},forEach:function(N){for(var T=S(this),j=n(N,arguments.length>1?arguments[1]:void 0),I;I=I?I.next:T.first;)for(j(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(N){return!!C(this,N)}}),r(x,y?{get:function(N){var T=C(this,N);return T&&T.value},set:function(N,T){return _(this,N===0?0:N,T)}}:{add:function(N){return _(this,N=N===0?0:N,N)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,C=S.last;C&&C.removed;)C=C.previous;return!S.target||!(S.last=C=C?C.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?C.key:_==="values"?C.value:[C.key,C.value],!1)},y?"entries":"values",!y,!0),c(v)}},vE}var j8;function RTe(){if(j8)return m8;j8=1;var t=xoe(),e=woe();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),m8}var P8;function MTe(){return P8||(P8=1,RTe()),p8}var I8={},bE,R8;function Soe(){return R8||(R8=1,bE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),bE}var xE,M8;function ATe(){if(M8)return xE;M8=1;var t=wi(),e=Soe(),r=t("Map");return xE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},xE}var A8;function DTe(){if(A8)return I8;A8=1;var t=qe(),e=St(),r=zo(),n=Xc(),i=FA(),s=ATe(),o=ph(),a=mt(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),I8}var wE,D8;function $Te(){if(D8)return wE;D8=1,ml(),MTe(),DTe(),lb();var t=jr();return wE=t.Map,wE}var SE,$8;function FTe(){if($8)return SE;$8=1;var t=$Te();return gl(),SE=t,SE}var _E,F8;function qTe(){return F8||(F8=1,_E=FTe()),_E}var LTe=qTe(),_oe=Je(LTe),q8={},L8;function BTe(){if(L8)return q8;L8=1;var t=qe(),e=bh().some,r=cb(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),q8}var EE,B8;function zTe(){if(B8)return EE;B8=1,BTe();var t=ii();return EE=t("Array","some"),EE}var CE,z8;function VTe(){if(z8)return CE;z8=1;var t=Br(),e=zTe(),r=Array.prototype;return CE=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},CE}var NE,V8;function UTe(){if(V8)return NE;V8=1;var t=VTe();return NE=t,NE}var kE,U8;function HTe(){return U8||(U8=1,kE=UTe()),kE}var WTe=HTe(),KTe=Je(WTe),TE,H8;function GTe(){if(H8)return TE;H8=1,ml();var t=ii();return TE=t("Array","keys"),TE}var OE,W8;function YTe(){if(W8)return OE;W8=1;var t=GTe();return OE=t,OE}var jE,K8;function QTe(){if(K8)return jE;K8=1,gl();var t=fl(),e=zr(),r=Br(),n=YTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return jE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},jE}var PE,G8;function XTe(){return G8||(G8=1,PE=QTe()),PE}var JTe=XTe(),_u=Je(JTe),Y8={},IE,Q8;function ZTe(){if(Q8)return IE;Q8=1;var t=vh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return IE=r,IE}var RE,X8;function eOe(){if(X8)return RE;X8=1;var t=dh(),e=t.match(/firefox\/(\d+)/i);return RE=!!e&&+e[1],RE}var ME,J8;function tOe(){if(J8)return ME;J8=1;var t=dh();return ME=/MSIE|Trident/.test(t),ME}var AE,Z8;function rOe(){if(Z8)return AE;Z8=1;var t=dh(),e=t.match(/AppleWebKit\/(\d+)\./);return AE=!!e&&+e[1],AE}var e7;function nOe(){if(e7)return Y8;e7=1;var t=qe(),e=St(),r=zo(),n=gs(),i=hl(),s=qse(),o=pl(),a=mt(),l=ZTe(),c=cb(),d=eOe(),h=tOe(),f=dm(),p=rOe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var C="",E,N,T,j;for(E=65;E<76;E++){switch(N=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:T=3;break;case 68:case 71:T=4;break;default:T=2}for(j=0;j<47;j++)m.push({k:N+j,v:T})}for(m.sort(function(I,O){return O.v-I.v}),j=0;j<m.length;j++)N=m[j].k.charAt(0),C.charAt(C.length-1)!==N&&(C+=N);return C!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(C){return function(E,N){return N===void 0?-1:E===void 0?1:C!==void 0?+C(E,N)||0:o(E)>o(N)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var N=n(this);if(x)return E===void 0?g(N):g(N,E);var T=[],j=i(N),I,O;for(O=0;O<j;O++)O in N&&v(T,N[O]);for(l(T,_(E)),I=i(T),O=0;O<I;)N[O]=T[O++];for(;O<j;)s(N,O++);return N}}),Y8}var DE,t7;function iOe(){if(t7)return DE;t7=1,nOe();var t=ii();return DE=t("Array","sort"),DE}var $E,r7;function sOe(){if(r7)return $E;r7=1;var t=Br(),e=iOe(),r=Array.prototype;return $E=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},$E}var FE,n7;function oOe(){if(n7)return FE;n7=1;var t=sOe();return FE=t,FE}var qE,i7;function aOe(){return i7||(i7=1,qE=oOe()),qE}var lOe=aOe(),WI=Je(lOe),LE,s7;function cOe(){if(s7)return LE;s7=1,ml();var t=ii();return LE=t("Array","values"),LE}var BE,o7;function uOe(){if(o7)return BE;o7=1;var t=cOe();return BE=t,BE}var zE,a7;function dOe(){if(a7)return zE;a7=1,gl();var t=fl(),e=zr(),r=Br(),n=uOe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return zE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},zE}var VE,l7;function hOe(){return l7||(l7=1,VE=dOe()),VE}var fOe=hOe(),c7=Je(fOe),UE,u7;function pOe(){return u7||(u7=1,UE=Ase()),UE}var mOe=pOe(),Gu=Je(mOe),HE,d7;function gOe(){if(d7)return HE;d7=1,ml();var t=ii();return HE=t("Array","entries"),HE}var WE,h7;function yOe(){if(h7)return WE;h7=1;var t=gOe();return WE=t,WE}var KE,f7;function vOe(){if(f7)return KE;f7=1,gl();var t=fl(),e=zr(),r=Br(),n=yOe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return KE=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},KE}var GE,p7;function bOe(){return p7||(p7=1,GE=vOe()),GE}var xOe=bOe(),wOe=Je(xOe);const Kr=[];for(let t=0;t<256;++t)Kr.push((t+256).toString(16).slice(1));function SOe(t,e=0){return(Kr[t[e+0]]+Kr[t[e+1]]+Kr[t[e+2]]+Kr[t[e+3]]+"-"+Kr[t[e+4]]+Kr[t[e+5]]+"-"+Kr[t[e+6]]+Kr[t[e+7]]+"-"+Kr[t[e+8]]+Kr[t[e+9]]+"-"+Kr[t[e+10]]+Kr[t[e+11]]+Kr[t[e+12]]+Kr[t[e+13]]+Kr[t[e+14]]+Kr[t[e+15]]).toLowerCase()}let YE;const _Oe=new Uint8Array(16);function EOe(){if(!YE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");YE=crypto.getRandomValues.bind(crypto)}return YE(_Oe)}const COe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var m7={randomUUID:COe};function NOe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??EOe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,SOe(n)}function kOe(t,e,r){return m7.randomUUID&&!t?m7.randomUUID():NOe(t)}function g7(t){return typeof t=="string"||typeof t=="number"}class qA{constructor(e){Wa(this,"_queue",[]),Wa(this,"_timeout",null),Wa(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new qA(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=uke(()=>{this.flush()},this.delay))}flush(){var e,r;Ac(e=Lse(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class Yv{constructor(){Wa(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Wa(this,"subscribe",Yv.prototype.on),Wa(this,"unsubscribe",Yv.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");Ac(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=Hu(n=this._subscribers[e]).call(n,i=>i!==r)}}var y7={},v7={},b7;function TOe(){if(b7)return v7;b7=1;var t=xoe(),e=woe();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),v7}var x7;function OOe(){return x7||(x7=1,TOe()),y7}var w7={},QE,S7;function tu(){if(S7)return QE;S7=1;var t=fh(),e=TypeError;return QE=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},QE}var XE,_7;function ru(){if(_7)return XE;_7=1;var t=wi(),e=Soe(),r=t("Set"),n=r.prototype;return XE={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},XE}var JE,E7;function nu(){if(E7)return JE;E7=1;var t=ni();return JE=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},JE}var ZE,C7;function _m(){if(C7)return ZE;C7=1;var t=nu();return ZE=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},ZE}var eC,N7;function LA(){if(N7)return eC;N7=1;var t=ru(),e=_m(),r=t.Set,n=t.add;return eC=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},eC}var tC,k7;function Em(){return k7||(k7=1,tC=function(t){return t.size}),tC}var rC,T7;function jOe(){return T7||(T7=1,rC=function(t){return{iterator:t,next:t.next,done:!1}}),rC}var nC,O7;function iu(){if(O7)return nC;O7=1;var t=zo(),e=Vo(),r=ni(),n=yh(),i=jOe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},nC=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},nC}var iC,j7;function POe(){if(j7)return iC;j7=1;var t=tu(),e=ru(),r=LA(),n=Em(),i=iu(),s=_m(),o=nu(),a=e.has,l=e.remove;return iC=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},iC}var sC,P7;function su(){return P7||(P7=1,sC=function(){return!1}),sC}var I7;function IOe(){if(I7)return w7;I7=1;var t=qe(),e=POe(),r=mt(),n=su(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),w7}var R7={},oC,M7;function ROe(){if(M7)return oC;M7=1;var t=tu(),e=ru(),r=Em(),n=iu(),i=_m(),s=nu(),o=e.Set,a=e.add,l=e.has;return oC=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},oC}var A7;function MOe(){if(A7)return R7;A7=1;var t=qe(),e=mt(),r=ROe(),n=su(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),R7}var D7={},aC,$7;function AOe(){if($7)return aC;$7=1;var t=tu(),e=ru().has,r=Em(),n=iu(),i=_m(),s=nu(),o=$A();return aC=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},aC}var F7;function DOe(){if(F7)return D7;F7=1;var t=qe(),e=AOe(),r=su(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),D7}var q7={},lC,L7;function $Oe(){if(L7)return lC;L7=1;var t=tu(),e=Em(),r=_m(),n=iu();return lC=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},lC}var B7;function FOe(){if(B7)return q7;B7=1;var t=qe(),e=$Oe(),r=su(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),q7}var z7={},cC,V7;function qOe(){if(V7)return cC;V7=1;var t=tu(),e=ru().has,r=Em(),n=iu(),i=nu(),s=$A();return cC=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},cC}var U7;function LOe(){if(U7)return z7;U7=1;var t=qe(),e=qOe(),r=su(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),z7}var H7={},uC,W7;function BOe(){if(W7)return uC;W7=1;var t=tu(),e=ru(),r=LA(),n=iu(),i=nu(),s=e.add,o=e.has,a=e.remove;return uC=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},uC}var dC,K7;function Eoe(){return K7||(K7=1,dC=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),dC}var G7;function zOe(){if(G7)return H7;G7=1;var t=qe(),e=BOe(),r=Eoe(),n=su(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),H7}var Y7={},hC,Q7;function VOe(){if(Q7)return hC;Q7=1;var t=tu(),e=ru().add,r=LA(),n=iu(),i=nu();return hC=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},hC}var X7;function UOe(){if(X7)return Y7;X7=1;var t=qe(),e=VOe(),r=Eoe(),n=su(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),Y7}var fC,J7;function HOe(){if(J7)return fC;J7=1,ml(),OOe(),IOe(),MOe(),DOe(),FOe(),LOe(),zOe(),UOe(),lb();var t=jr();return fC=t.Set,fC}var pC,Z7;function WOe(){if(Z7)return pC;Z7=1;var t=HOe();return gl(),pC=t,pC}var mC,eV;function KOe(){return eV||(eV=1,mC=WOe()),mC}var GOe=KOe(),gC=Je(GOe),yC,tV;function YOe(){if(tV)return yC;tV=1,ml(),lb();var t=voe();return yC=t,yC}var vC,rV;function QOe(){if(rV)return vC;rV=1;var t=YOe();return gl(),vC=t,vC}var bC,nV;function XOe(){if(nV)return bC;nV=1;var t=QOe();return bC=t,bC}var xC,iV;function JOe(){if(iV)return xC;iV=1;var t=XOe();return xC=t,xC}var wC,sV;function ZOe(){return sV||(sV=1,wC=JOe()),wC}var SC,oV;function eje(){return oV||(oV=1,SC=ZOe()),SC}var tje=eje(),_C=Je(tje);class Hl{constructor(e){this._pairs=e}*[Gu](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return ns(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return ns(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=K2e(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new _oe(this._pairs)}toIdSet(){return new gC(this.toIdArray())}toItemSet(){return new gC(this.toItemArray())}cache(){return new Hl([...this._pairs])}distinct(e){const r=new gC;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new Hl({*[Gu](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new Hl({*[Gu](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=_C(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=_C(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new Hl({[Gu]:()=>{var r;return _C(WI(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function aV(t,e){var r=OA(t);if(Q6){var n=Q6(t);e&&(n=Hu(n).call(n,function(i){return moe(t,i).enumerable})),r.push.apply(r,n)}return r}function lV(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Ac(r=aV(Object(i),!0)).call(r,function(s){Wa(t,s,i[s])}):a8?_Te(t,a8(i)):Ac(n=aV(Object(i))).call(n,function(s){NTe(t,s,moe(i,s))})}return t}function rje(t,e){return t[e]==null&&(t[e]=kOe()),t}class Qd extends Yv{get idProp(){return this._idProp}constructor(e,r){super(),Wa(this,"_queue",null),e&&!Ns(e)&&(r=e,e=[]),this._options=r||{},this._data=new _oe,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=qA.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(Ns(e)){const s=ns(e).call(e,o=>o[this._idProp]);if(KTe(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=c=>{const d=c[a];if(d!=null&&this._data.has(d)){const h=c,f=A2e({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(c);n.push(h)}};if(Ns(e))for(let c=0,d=e.length;c<d;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const c={items:i,oldData:s,data:o};this._trigger("update",c,r)}return B2e(n).call(n,i)}updateOnly(e,r){var n;Ns(e)||(e=[e]);const i=ns(n=ns(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=eTe(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(i.length){const s={items:ns(i).call(i,o=>o.id),oldData:ns(i).call(i,o=>o.oldData),data:ns(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;g7(e)?(n=e,s=r):Ns(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&Hu(s),l=[];let c,d,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)c=this._data.get(i[p]),c!=null&&(!a||a(c))&&l.push(c);else{var f;d=[..._u(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const v=l[m],y=v[this._idProp];p[y]=v}return p}else return n!=null?c??null:l}getIds(e){const r=this._data,n=e&&Hu(e),i=e&&e.order,s=[..._u(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=this._data.get(c);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=r.get(c);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&Hu(r),i=this._data,s=[..._u(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const c=o[a],d=c[this._idProp];e(c,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,r){const n=r&&Hu(r),i=[],s=this._data,o=[..._u(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],d=this._data.get(c);d!=null&&(!n||n(d))&&i.push(e(d,c))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&_Ne(n=Ns(r)?r:OA(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;WI(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")WI(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=Ns(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(g7(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[..._u(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of c7(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of c7(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[..._u(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=rje(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+rke(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,lV(lV({},n),e)),r}stream(e){if(e){const n=this._data;return new Hl({*[Gu](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new Hl({[Gu]:Dse(r=wOe(this._data)).call(r,this._data)})}}}function nje(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof Ac(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ns(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function Coe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof Ac(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ns(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&nje(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var cV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uV={},of,dV;function $t(){if(dV)return of;dV=1;var t=function(e){return e&&e.Math===Math&&e};return of=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof cV=="object"&&cV)||t(typeof of=="object"&&of)||function(){return this}()||Function("return this")(),of}var EC,hV;function Ze(){return hV||(hV=1,EC=function(t){try{return!!t()}catch{return!0}}),EC}var CC,fV;function Cm(){if(fV)return CC;fV=1;var t=Ze();return CC=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),CC}var NC,pV;function hb(){if(pV)return NC;pV=1;var t=Cm(),e=Function.prototype,r=e.apply,n=e.call;return NC=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),NC}var kC,mV;function rt(){if(mV)return kC;mV=1;var t=Cm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return kC=t?n:function(i){return function(){return r.apply(i,arguments)}},kC}var TC,gV;function Us(){if(gV)return TC;gV=1;var t=rt(),e=t({}.toString),r=t("".slice);return TC=function(n){return r(e(n),8,-1)},TC}var OC,yV;function BA(){if(yV)return OC;yV=1;var t=Us(),e=rt();return OC=function(r){if(t(r)==="Function")return e(r)},OC}var jC,vV;function Ur(){if(vV)return jC;vV=1;var t=typeof document=="object"&&document.all;return jC=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},jC}var PC={},IC,bV;function cr(){if(bV)return IC;bV=1;var t=Ze();return IC=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),IC}var RC,xV;function si(){if(xV)return RC;xV=1;var t=Cm(),e=Function.prototype.call;return RC=t?e.bind(e):function(){return e.apply(e,arguments)},RC}var MC={},wV;function fb(){if(wV)return MC;wV=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return MC.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,MC}var AC,SV;function Nm(){return SV||(SV=1,AC=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),AC}var DC,_V;function pb(){if(_V)return DC;_V=1;var t=rt(),e=Ze(),r=Us(),n=Object,i=t("".split);return DC=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,DC}var $C,EV;function Sh(){return EV||(EV=1,$C=function(t){return t==null}),$C}var FC,CV;function Uo(){if(CV)return FC;CV=1;var t=Sh(),e=TypeError;return FC=function(r){if(t(r))throw new e("Can't call method on "+r);return r},FC}var qC,NV;function ys(){if(NV)return qC;NV=1;var t=pb(),e=Uo();return qC=function(r){return t(e(r))},qC}var LC,kV;function Hr(){if(kV)return LC;kV=1;var t=Ur();return LC=function(e){return typeof e=="object"?e!==null:t(e)},LC}var BC,TV;function gt(){return TV||(TV=1,BC={}),BC}var zC,OV;function Si(){if(OV)return zC;OV=1;var t=gt(),e=$t(),r=Ur(),n=function(i){return r(i)?i:void 0};return zC=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},zC}var VC,jV;function wr(){if(jV)return VC;jV=1;var t=rt();return VC=t({}.isPrototypeOf),VC}var UC,PV;function _h(){if(PV)return UC;PV=1;var t=$t(),e=t.navigator,r=e&&e.userAgent;return UC=r?String(r):"",UC}var HC,IV;function km(){if(IV)return HC;IV=1;var t=$t(),e=_h(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),HC=a,HC}var WC,RV;function Eh(){if(RV)return WC;RV=1;var t=km(),e=Ze(),r=$t(),n=r.String;return WC=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),WC}var KC,MV;function Noe(){if(MV)return KC;MV=1;var t=Eh();return KC=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",KC}var GC,AV;function Tm(){if(AV)return GC;AV=1;var t=Si(),e=Ur(),r=wr(),n=Noe(),i=Object;return GC=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},GC}var YC,DV;function Ch(){if(DV)return YC;DV=1;var t=String;return YC=function(e){try{return t(e)}catch{return"Object"}},YC}var QC,$V;function Ho(){if($V)return QC;$V=1;var t=Ur(),e=Ch(),r=TypeError;return QC=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},QC}var XC,FV;function zA(){if(FV)return XC;FV=1;var t=Ho(),e=Sh();return XC=function(r,n){var i=r[n];return e(i)?void 0:t(i)},XC}var JC,qV;function ije(){if(qV)return JC;qV=1;var t=si(),e=Ur(),r=Hr(),n=TypeError;return JC=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},JC}var ZC={exports:{}},eN,LV;function Nh(){return LV||(LV=1,eN=!0),eN}var tN,BV;function sje(){if(BV)return tN;BV=1;var t=$t(),e=Object.defineProperty;return tN=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},tN}var zV;function VA(){if(zV)return ZC.exports;zV=1;var t=Nh(),e=$t(),r=sje(),n="__core-js_shared__",i=ZC.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),ZC.exports}var rN,VV;function kh(){if(VV)return rN;VV=1;var t=VA();return rN=function(e,r){return t[e]||(t[e]=r||{})},rN}var nN,UV;function _i(){if(UV)return nN;UV=1;var t=Uo(),e=Object;return nN=function(r){return e(t(r))},nN}var iN,HV;function rn(){if(HV)return iN;HV=1;var t=rt(),e=_i(),r=t({}.hasOwnProperty);return iN=Object.hasOwn||function(i,s){return r(e(i),s)},iN}var sN,WV;function mb(){if(WV)return sN;WV=1;var t=rt(),e=0,r=Math.random(),n=t(1.1.toString);return sN=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},sN}var oN,KV;function Sr(){if(KV)return oN;KV=1;var t=$t(),e=kh(),r=rn(),n=mb(),i=Eh(),s=Noe(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return oN=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},oN}var aN,GV;function koe(){if(GV)return aN;GV=1;var t=si(),e=Hr(),r=Tm(),n=zA(),i=ije(),s=Sr(),o=TypeError,a=s("toPrimitive");return aN=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},aN}var lN,YV;function UA(){if(YV)return lN;YV=1;var t=koe(),e=Tm();return lN=function(r){var n=t(r,"string");return e(n)?n:n+""},lN}var cN,QV;function Toe(){if(QV)return cN;QV=1;var t=$t(),e=Hr(),r=t.document,n=e(r)&&e(r.createElement);return cN=function(i){return n?r.createElement(i):{}},cN}var uN,XV;function Ooe(){if(XV)return uN;XV=1;var t=cr(),e=Ze(),r=Toe();return uN=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),uN}var JV;function gb(){if(JV)return PC;JV=1;var t=cr(),e=si(),r=fb(),n=Nm(),i=ys(),s=UA(),o=rn(),a=Ooe(),l=Object.getOwnPropertyDescriptor;return PC.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},PC}var dN,ZV;function oje(){if(ZV)return dN;ZV=1;var t=Ze(),e=Ur(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return dN=n,dN}var hN,eU;function yb(){if(eU)return hN;eU=1;var t=BA(),e=Ho(),r=Cm(),n=t(t.bind);return hN=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},hN}var fN={},pN,tU;function joe(){if(tU)return pN;tU=1;var t=cr(),e=Ze();return pN=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),pN}var mN,rU;function Hs(){if(rU)return mN;rU=1;var t=Hr(),e=String,r=TypeError;return mN=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},mN}var nU;function Ki(){if(nU)return fN;nU=1;var t=cr(),e=Ooe(),r=joe(),n=Hs(),i=UA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return fN.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},fN}var gN,iU;function Th(){if(iU)return gN;iU=1;var t=cr(),e=Ki(),r=Nm();return gN=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},gN}var yN,sU;function Oe(){if(sU)return yN;sU=1;var t=$t(),e=hb(),r=BA(),n=Ur(),i=gb().f,s=oje(),o=gt(),a=yb(),l=Th(),c=rn(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return yN=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,C,E,N,T,j,I;for(C in f)x=s(m?C:p+(g?".":"#")+C,h.forced),S=!x&&y&&c(y,C),N=b[C],S&&(h.dontCallGetSet?(I=i(y,C),T=I&&I.value):T=y[C]),E=S&&T?T:f[C],!(!x&&!v&&typeof N==typeof E)&&(h.bind&&S?j=a(E,t):h.wrap&&S?j=d(E):v&&n(E)?j=r(E):j=E,(h.sham||E&&E.sham||N&&N.sham)&&l(j,"sham",!0),l(b,C,j),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],C,E),h.real&&w&&(x||!w[C])&&l(w,C,E)))},yN}var vN,oU;function aje(){if(oU)return vN;oU=1;var t=Math.ceil,e=Math.floor;return vN=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},vN}var bN,aU;function Oh(){if(aU)return bN;aU=1;var t=aje();return bN=function(e){var r=+e;return r!==r||r===0?0:t(r)},bN}var xN,lU;function vb(){if(lU)return xN;lU=1;var t=Oh(),e=Math.max,r=Math.min;return xN=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},xN}var wN,cU;function Poe(){if(cU)return wN;cU=1;var t=Oh(),e=Math.min;return wN=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},wN}var SN,uU;function Wo(){if(uU)return SN;uU=1;var t=Poe();return SN=function(e){return t(e.length)},SN}var _N,dU;function HA(){if(dU)return _N;dU=1;var t=ys(),e=vb(),r=Wo(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return _N={includes:n(!0),indexOf:n(!1)},_N}var EN,hU;function Om(){return hU||(hU=1,EN={}),EN}var CN,fU;function Ioe(){if(fU)return CN;fU=1;var t=rt(),e=rn(),r=ys(),n=HA().indexOf,i=Om(),s=t([].push);return CN=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},CN}var NN,pU;function WA(){return pU||(pU=1,NN=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),NN}var kN,mU;function jm(){if(mU)return kN;mU=1;var t=Ioe(),e=WA();return kN=Object.keys||function(n){return t(n,e)},kN}var TN={},gU;function bb(){return gU||(gU=1,TN.f=Object.getOwnPropertySymbols),TN}var ON,yU;function lje(){if(yU)return ON;yU=1;var t=cr(),e=rt(),r=si(),n=Ze(),i=jm(),s=bb(),o=fb(),a=_i(),l=pb(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return ON=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,C=0,E;_>C;)E=S[C++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,ON}var vU;function cje(){if(vU)return uV;vU=1;var t=Oe(),e=lje();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),uV}var jN,bU;function uje(){if(bU)return jN;bU=1,cje();var t=gt();return jN=t.Object.assign,jN}var PN,xU;function dje(){if(xU)return PN;xU=1;var t=uje();return PN=t,PN}var IN,wU;function hje(){return wU||(wU=1,IN=dje()),IN}var fje=hje(),mr=$e(fje),SU={},RN,_U;function jh(){if(_U)return RN;_U=1;var t=rt();return RN=t([].slice),RN}var MN,EU;function pje(){if(EU)return MN;EU=1;var t=rt(),e=Ho(),r=Hr(),n=rn(),i=jh(),s=Cm(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return MN=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},MN}var CU;function mje(){if(CU)return SU;CU=1;var t=Oe(),e=pje();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),SU}var AN,NU;function nn(){if(NU)return AN;NU=1;var t=$t(),e=gt();return AN=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},AN}var DN,kU;function gje(){if(kU)return DN;kU=1,mje();var t=nn();return DN=t("Function","bind"),DN}var $N,TU;function yje(){if(TU)return $N;TU=1;var t=wr(),e=gje(),r=Function.prototype;return $N=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},$N}var FN,OU;function vje(){if(OU)return FN;OU=1;var t=yje();return FN=t,FN}var qN,jU;function bje(){return jU||(jU=1,qN=vje()),qN}var xje=bje(),se=$e(xje);function KA(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function wje(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function Sje(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function _je(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function Eje(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function Cje(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function Roe(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function KI(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,c=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,c,d,c),t.bezierCurveTo(d-o,c,e,h+a,e,h),t.closePath()}function Moe(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,c=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),v=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+c,f,p,f),t.bezierCurveTo(p-c,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-c,r,p,r),t.bezierCurveTo(p+c,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+c,v,p,v),t.bezierCurveTo(p-c,v,e,g+d,e,g),t.lineTo(e,m)}function Aoe(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,c=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+c*c)),p=a<0?-p:p,e+=p,r+=c*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function Nje(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const PU={circle:KA,dashedLine:Aoe,database:Moe,diamond:Cje,ellipse:KI,ellipse_vis:KI,hexagon:Nje,roundRect:Roe,square:wje,star:Eje,triangle:Sje,triangleDown:_je};function kje(t){return Object.prototype.hasOwnProperty.call(PU,t)?PU[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var LN={exports:{}},IU;function Tje(){return IU||(IU=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(LN)),LN.exports}var Oje=Tje(),Doe=$e(Oje),RU={},BN,MU;function ou(){if(MU)return BN;MU=1;var t=Us();return BN=Array.isArray||function(r){return t(r)==="Array"},BN}var zN,AU;function $oe(){if(AU)return zN;AU=1;var t=TypeError,e=9007199254740991;return zN=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},zN}var VN,DU;function xb(){if(DU)return VN;DU=1;var t=cr(),e=Ki(),r=Nm();return VN=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},VN}var UN,$U;function GA(){if($U)return UN;$U=1;var t=Sr(),e=t("toStringTag"),r={};return r[e]="z",UN=String(r)==="[object z]",UN}var HN,FU;function Ph(){if(FU)return HN;FU=1;var t=GA(),e=Ur(),r=Us(),n=Sr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return HN=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},HN}var WN,qU;function jje(){if(qU)return WN;qU=1;var t=rt(),e=Ur(),r=VA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),WN=r.inspectSource,WN}var KN,LU;function Foe(){if(LU)return KN;LU=1;var t=rt(),e=Ze(),r=Ur(),n=Ph(),i=Si(),s=jje(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,KN=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,KN}var GN,BU;function Pje(){if(BU)return GN;BU=1;var t=ou(),e=Foe(),r=Hr(),n=Sr(),i=n("species"),s=Array;return GN=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},GN}var YN,zU;function YA(){if(zU)return YN;zU=1;var t=Pje();return YN=function(e,r){return new(t(e))(r===0?0:r)},YN}var QN,VU;function Pm(){if(VU)return QN;VU=1;var t=Ze(),e=Sr(),r=km(),n=e("species");return QN=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},QN}var UU;function qoe(){if(UU)return RU;UU=1;var t=Oe(),e=Ze(),r=ou(),n=Hr(),i=_i(),s=Wo(),o=$oe(),a=xb(),l=YA(),c=Pm(),d=Sr(),h=km(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,C,E,N;for(S=-1,C=arguments.length;S<C;S++)if(N=S===-1?b:arguments[S],m(N))for(E=s(N),o(x+E),_=0;_<E;_++,x++)_ in N&&a(w,x,N[_]);else o(x+1),a(w,x++,N);return w.length=x,w}}),RU}var HU={},WU={},XN,KU;function Gi(){if(KU)return XN;KU=1;var t=Ph(),e=String;return XN=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},XN}var JN={},GU;function QA(){if(GU)return JN;GU=1;var t=cr(),e=joe(),r=Ki(),n=Hs(),i=ys(),s=jm();return JN.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},JN}var ZN,YU;function Ije(){if(YU)return ZN;YU=1;var t=Si();return ZN=t("document","documentElement"),ZN}var e2,QU;function wb(){if(QU)return e2;QU=1;var t=kh(),e=mb(),r=t("keys");return e2=function(n){return r[n]||(r[n]=e(n))},e2}var t2,XU;function Im(){if(XU)return t2;XU=1;var t=Hs(),e=QA(),r=WA(),n=Om(),i=Ije(),s=Toe(),o=wb(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,t2=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},t2}var r2={},JU;function Sb(){if(JU)return r2;JU=1;var t=Ioe(),e=WA(),r=e.concat("length","prototype");return r2.f=Object.getOwnPropertyNames||function(i){return t(i,r)},r2}var n2={},ZU;function XA(){if(ZU)return n2;ZU=1;var t=Us(),e=ys(),r=Sb().f,n=jh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return n2.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},n2}var i2,eH;function Rm(){if(eH)return i2;eH=1;var t=Th();return i2=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},i2}var s2,tH;function JA(){if(tH)return s2;tH=1;var t=Ki();return s2=function(e,r,n){return t.f(e,r,n)},s2}var o2={},rH;function _b(){if(rH)return o2;rH=1;var t=Sr();return o2.f=t,o2}var a2,nH;function Ht(){if(nH)return a2;nH=1;var t=gt(),e=rn(),r=_b(),n=Ki().f;return a2=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},a2}var l2,iH;function Loe(){if(iH)return l2;iH=1;var t=si(),e=Si(),r=Sr(),n=Rm();return l2=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},l2}var c2,sH;function Rje(){if(sH)return c2;sH=1;var t=GA(),e=Ph();return c2=t?{}.toString:function(){return"[object "+e(this)+"]"},c2}var u2,oH;function au(){if(oH)return u2;oH=1;var t=GA(),e=Ki().f,r=Th(),n=rn(),i=Rje(),s=Sr(),o=s("toStringTag");return u2=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},u2}var d2,aH;function Boe(){if(aH)return d2;aH=1;var t=$t(),e=Ur(),r=t.WeakMap;return d2=e(r)&&/native code/.test(String(r)),d2}var h2,lH;function lu(){if(lH)return h2;lH=1;var t=Boe(),e=$t(),r=Hr(),n=Th(),i=rn(),s=VA(),o=wb(),a=Om(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return h2={set:h,get:f,has:p,enforce:m,getterFor:g},h2}var f2,cH;function yl(){if(cH)return f2;cH=1;var t=yb(),e=rt(),r=pb(),n=_i(),i=Wo(),s=YA(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),C=t(y,b),E=0,N=w||s,T=c?N(v,_):d||m?N(v,0):void 0,j,I;_>E;E++)if((g||E in S)&&(j=S[E],I=C(j,E,x),l))if(c)T[E]=I;else if(I)switch(l){case 3:return!0;case 5:return j;case 6:return E;case 2:o(T,j)}else switch(l){case 4:return!1;case 7:o(T,j)}return p?-1:h||f?f:T}};return f2={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},f2}var uH;function Mje(){if(uH)return WU;uH=1;var t=Oe(),e=$t(),r=si(),n=rt(),i=Nh(),s=cr(),o=Eh(),a=Ze(),l=rn(),c=wr(),d=Hs(),h=ys(),f=UA(),p=Gi(),m=Nm(),g=Im(),v=jm(),y=Sb(),b=XA(),w=bb(),x=gb(),S=Ki(),_=QA(),C=fb(),E=Rm(),N=JA(),T=kh(),j=wb(),I=Om(),O=mb(),D=Sr(),z=_b(),R=Ht(),B=Loe(),q=au(),$=lu(),G=yl().forEach,K=j("hidden"),F="Symbol",X="prototype",Q=$.set,Ee=$.getterFor(F),we=Object[X],Le=e.Symbol,ot=Le&&Le[X],Wr=e.RangeError,rr=e.TypeError,Wt=e.QObject,_r=x.f,nt=S.f,mn=b.f,Dn=C.f,Pr=n([].push),yt=T("symbols"),nr=T("op-symbols"),Ws=T("wks"),Er=!Wt||!Wt[X]||!Wt[X].findChild,A=function(_e,ne,fe){var ce=_r(we,ne);ce&&delete we[ne],nt(_e,ne,fe),ce&&_e!==we&&nt(we,ne,ce)},L=s&&a(function(){return g(nt({},"a",{get:function(){return nt(this,"a",{value:7}).a}})).a!==7})?A:nt,H=function(_e,ne){var fe=yt[_e]=g(ot);return Q(fe,{type:F,tag:_e,description:ne}),s||(fe.description=ne),fe},le=function(ne,fe,ce){ne===we&&le(nr,fe,ce),d(ne);var Ce=f(fe);return d(ce),l(yt,Ce)?(ce.enumerable?(l(ne,K)&&ne[K][Ce]&&(ne[K][Ce]=!1),ce=g(ce,{enumerable:m(0,!1)})):(l(ne,K)||nt(ne,K,m(1,g(null))),ne[K][Ce]=!0),L(ne,Ce,ce)):nt(ne,Ce,ce)},ee=function(ne,fe){d(ne);var ce=h(fe),Ce=v(ce).concat(_t(ce));return G(Ce,function(We){(!s||r(pe,ce,We))&&le(ne,We,ce[We])}),ne},Z=function(ne,fe){return fe===void 0?g(ne):ee(g(ne),fe)},pe=function(ne){var fe=f(ne),ce=r(Dn,this,fe);return this===we&&l(yt,fe)&&!l(nr,fe)?!1:ce||!l(this,fe)||!l(yt,fe)||l(this,K)&&this[K][fe]?ce:!0},ze=function(ne,fe){var ce=h(ne),Ce=f(fe);if(!(ce===we&&l(yt,Ce)&&!l(nr,Ce))){var We=_r(ce,Ce);return We&&l(yt,Ce)&&!(l(ce,K)&&ce[K][Ce])&&(We.enumerable=!0),We}},Ve=function(ne){var fe=mn(h(ne)),ce=[];return G(fe,function(Ce){!l(yt,Ce)&&!l(I,Ce)&&Pr(ce,Ce)}),ce},_t=function(_e){var ne=_e===we,fe=mn(ne?nr:h(_e)),ce=[];return G(fe,function(Ce){l(yt,Ce)&&(!ne||l(we,Ce))&&Pr(ce,yt[Ce])}),ce};return o||(Le=function(){if(c(ot,this))throw new rr("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),fe=O(ne),ce=function(Ce){var We=this===void 0?e:this;We===we&&r(ce,nr,Ce),l(We,K)&&l(We[K],fe)&&(We[K][fe]=!1);var oi=m(1,Ce);try{L(We,fe,oi)}catch(gn){if(!(gn instanceof Wr))throw gn;A(We,fe,oi)}};return s&&Er&&L(we,fe,{configurable:!0,set:ce}),H(fe,ne)},ot=Le[X],E(ot,"toString",function(){return Ee(this).tag}),E(Le,"withoutSetter",function(_e){return H(O(_e),_e)}),C.f=pe,S.f=le,_.f=ee,x.f=ze,y.f=b.f=Ve,w.f=_t,z.f=function(_e){return H(D(_e),_e)},s&&(N(ot,"description",{configurable:!0,get:function(){return Ee(this).description}}),i||E(we,"propertyIsEnumerable",pe,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Le}),G(v(Ws),function(_e){R(_e)}),t({target:F,stat:!0,forced:!o},{useSetter:function(){Er=!0},useSimple:function(){Er=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Z,defineProperty:le,defineProperties:ee,getOwnPropertyDescriptor:ze}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ve}),B(),q(Le,F),I[K]=!0,WU}var dH={},p2,hH;function zoe(){if(hH)return p2;hH=1;var t=Eh();return p2=t&&!!Symbol.for&&!!Symbol.keyFor,p2}var fH;function Aje(){if(fH)return dH;fH=1;var t=Oe(),e=Si(),r=rn(),n=Gi(),i=kh(),s=zoe(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),dH}var pH={},mH;function Dje(){if(mH)return pH;mH=1;var t=Oe(),e=rn(),r=Tm(),n=Ch(),i=kh(),s=zoe(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),pH}var gH={},m2,yH;function $je(){if(yH)return m2;yH=1;var t=rt(),e=ou(),r=Ur(),n=Us(),i=Gi(),s=t([].push);return m2=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},m2}var vH;function Voe(){if(vH)return gH;vH=1;var t=Oe(),e=Si(),r=hb(),n=si(),i=rt(),s=Ze(),o=Ur(),a=Tm(),l=jh(),c=$je(),d=Eh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var N=e("Symbol")("stringify detection");return f([N])!=="[null]"||f({a:N})!=="{}"||f(Object(N))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),C=function(N,T){var j=l(arguments),I=c(T);if(!(!o(I)&&(N===void 0||a(N))))return j[1]=function(O,D){if(o(I)&&(D=n(I,this,h(O),D)),!a(D))return D},r(f,null,j)},E=function(N,T,j){var I=m(j,T-1),O=m(j,T+1);return p(w,N)&&!p(x,O)||p(x,N)&&!p(w,I)?"\\u"+y(g(N,0),16):N};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(T,j,I){var O=l(arguments),D=r(S?C:f,null,O);return _&&typeof D=="string"?v(D,b,E):D}}),gH}var bH={},xH;function Fje(){if(xH)return bH;xH=1;var t=Oe(),e=Eh(),r=Ze(),n=bb(),i=_i(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),bH}var wH;function Uoe(){return wH||(wH=1,Mje(),Aje(),Dje(),Voe(),Fje()),HU}var SH={},_H;function Hoe(){if(_H)return SH;_H=1;var t=Ht();return t("asyncDispose"),SH}var EH={},CH;function qje(){if(CH)return EH;CH=1;var t=Ht();return t("asyncIterator"),EH}var NH={},kH;function Woe(){if(kH)return NH;kH=1;var t=Ht();return t("dispose"),NH}var TH={},OH;function Lje(){if(OH)return TH;OH=1;var t=Ht();return t("hasInstance"),TH}var jH={},PH;function Bje(){if(PH)return jH;PH=1;var t=Ht();return t("isConcatSpreadable"),jH}var IH={},RH;function Koe(){if(RH)return IH;RH=1;var t=Ht();return t("iterator"),IH}var MH={},AH;function zje(){if(AH)return MH;AH=1;var t=Ht();return t("match"),MH}var DH={},$H;function Vje(){if($H)return DH;$H=1;var t=Ht();return t("matchAll"),DH}var FH={},qH;function Uje(){if(qH)return FH;qH=1;var t=Ht();return t("replace"),FH}var LH={},BH;function Hje(){if(BH)return LH;BH=1;var t=Ht();return t("search"),LH}var zH={},VH;function Wje(){if(VH)return zH;VH=1;var t=Ht();return t("species"),zH}var UH={},HH;function Kje(){if(HH)return UH;HH=1;var t=Ht();return t("split"),UH}var WH={},KH;function Goe(){if(KH)return WH;KH=1;var t=Ht(),e=Loe();return t("toPrimitive"),e(),WH}var GH={},YH;function Gje(){if(YH)return GH;YH=1;var t=Si(),e=Ht(),r=au();return e("toStringTag"),r(t("Symbol"),"Symbol"),GH}var QH={},XH;function Yje(){if(XH)return QH;XH=1;var t=Ht();return t("unscopables"),QH}var JH={},ZH;function Qje(){if(ZH)return JH;ZH=1;var t=$t(),e=au();return e(t.JSON,"JSON",!0),JH}var g2,eW;function Xje(){if(eW)return g2;eW=1,qoe(),Uoe(),Hoe(),qje(),Woe(),Lje(),Bje(),Koe(),zje(),Vje(),Uje(),Hje(),Wje(),Kje(),Goe(),Gje(),Yje(),Qje();var t=gt();return g2=t.Symbol,g2}var tW={},y2,rW;function ZA(){return rW||(rW=1,y2=function(){}),y2}var v2,nW;function Ih(){return nW||(nW=1,v2={}),v2}var b2,iW;function Jje(){if(iW)return b2;iW=1;var t=cr(),e=rn(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return b2={EXISTS:i,PROPER:s,CONFIGURABLE:o},b2}var x2,sW;function Yoe(){if(sW)return x2;sW=1;var t=Ze();return x2=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),x2}var w2,oW;function Eb(){if(oW)return w2;oW=1;var t=rn(),e=Ur(),r=_i(),n=wb(),i=Yoe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return w2=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},w2}var S2,aW;function Qoe(){if(aW)return S2;aW=1;var t=Ze(),e=Ur(),r=Hr(),n=Im(),i=Eb(),s=Rm(),o=Sr(),a=Nh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),S2={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},S2}var _2,lW;function Zje(){if(lW)return _2;lW=1;var t=Qoe().IteratorPrototype,e=Im(),r=Nm(),n=au(),i=Ih(),s=function(){return this};return _2=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},_2}var E2,cW;function ePe(){if(cW)return E2;cW=1;var t=rt(),e=Ho();return E2=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},E2}var C2,uW;function tPe(){if(uW)return C2;uW=1;var t=Hr();return C2=function(e){return t(e)||e===null},C2}var N2,dW;function rPe(){if(dW)return N2;dW=1;var t=tPe(),e=String,r=TypeError;return N2=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},N2}var k2,hW;function nPe(){if(hW)return k2;hW=1;var t=ePe(),e=Hr(),r=Uo(),n=rPe();return k2=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),k2}var T2,fW;function eD(){if(fW)return T2;fW=1;var t=Oe(),e=si(),r=Nh(),n=Jje(),i=Ur(),s=Zje(),o=Eb(),a=nPe(),l=au(),c=Th(),d=Rm(),h=Sr(),f=Ih(),p=Qoe(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return T2=function(C,E,N,T,j,I,O){s(N,E,T);var D=function(Q){if(Q===j&&$)return $;if(!y&&Q&&Q in B)return B[Q];switch(Q){case w:return function(){return new N(this,Q)};case x:return function(){return new N(this,Q)};case S:return function(){return new N(this,Q)}}return function(){return new N(this)}},z=E+" Iterator",R=!1,B=C.prototype,q=B[b]||B["@@iterator"]||j&&B[j],$=!y&&q||D(j),G=E==="Array"&&B.entries||q,K,F,X;if(G&&(K=o(G.call(new C)),K!==Object.prototype&&K.next&&(!r&&o(K)!==v&&(a?a(K,v):i(K[b])||d(K,b,_)),l(K,z,!0,!0),r&&(f[z]=_))),m&&j===x&&q&&q.name!==x&&(!r&&g?c(B,"name",x):(R=!0,$=function(){return e(q,this)})),j)if(F={values:D(x),keys:I?$:D(w),entries:D(S)},O)for(X in F)(y||R||!(X in B))&&d(B,X,F[X]);else t({target:E,proto:!0,forced:y||R},F);return(!r||O)&&B[b]!==$&&d(B,b,$,{name:j}),f[E]=$,F},T2}var O2,pW;function tD(){return pW||(pW=1,O2=function(t,e){return{value:t,done:e}}),O2}var j2,mW;function Rh(){if(mW)return j2;mW=1;var t=ys(),e=ZA(),r=Ih(),n=lu(),i=Ki().f,s=eD(),o=tD(),a=Nh(),l=cr(),c="Array Iterator",d=n.set,h=n.getterFor(c);j2=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return j2}var P2,gW;function iPe(){return gW||(gW=1,P2={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),P2}var yW;function Mh(){if(yW)return tW;yW=1,Rh();var t=iPe(),e=$t(),r=au(),n=Ih();for(var i in t)r(e[i],i),n[i]=n.Array;return tW}var I2,vW;function Xoe(){if(vW)return I2;vW=1;var t=Xje();return Mh(),I2=t,I2}var R2,bW;function sPe(){return bW||(bW=1,R2=Xoe()),R2}var oPe=sPe(),aPe=$e(oPe),xW={},wW;function lPe(){if(wW)return xW;wW=1;var t=Oe(),e=ou(),r=Foe(),n=Hr(),i=vb(),s=Wo(),o=ys(),a=xb(),l=Sr(),c=Pm(),d=jh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,C,E;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(C=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in b&&a(C,E,b[x]);return C.length=E,C}}),xW}var M2,SW;function cPe(){if(SW)return M2;SW=1,lPe();var t=nn();return M2=t("Array","slice"),M2}var A2,_W;function uPe(){if(_W)return A2;_W=1;var t=wr(),e=cPe(),r=Array.prototype;return A2=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},A2}var D2,EW;function dPe(){if(EW)return D2;EW=1;var t=uPe();return D2=t,D2}var $2,CW;function hPe(){return CW||(CW=1,$2=dPe()),$2}var fPe=hPe(),Ps=$e(fPe),F2,NW;function pPe(){if(NW)return F2;NW=1;var t=Si(),e=rt(),r=Sb(),n=bb(),i=Hs(),s=e([].concat);return F2=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},F2}var kW={},TW;function mPe(){if(TW)return kW;TW=1;var t=Oe(),e=ou();return t({target:"Array",stat:!0},{isArray:e}),kW}var q2,OW;function gPe(){if(OW)return q2;OW=1,mPe();var t=gt();return q2=t.Array.isArray,q2}var L2,jW;function yPe(){if(jW)return L2;jW=1;var t=gPe();return L2=t,L2}var B2,PW;function vPe(){return PW||(PW=1,B2=yPe()),B2}var bPe=vPe(),tr=$e(bPe),IW={},RW;function xPe(){if(RW)return IW;RW=1;var t=Oe(),e=yl().map,r=Pm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),IW}var z2,MW;function wPe(){if(MW)return z2;MW=1,xPe();var t=nn();return z2=t("Array","map"),z2}var V2,AW;function SPe(){if(AW)return V2;AW=1;var t=wr(),e=wPe(),r=Array.prototype;return V2=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},V2}var U2,DW;function _Pe(){if(DW)return U2;DW=1;var t=SPe();return U2=t,U2}var H2,$W;function EPe(){return $W||($W=1,H2=_Pe()),H2}var CPe=EPe(),Xd=$e(CPe),FW={},qW;function NPe(){if(qW)return FW;qW=1;var t=Oe(),e=_i(),r=jm(),n=Ze(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),FW}var W2,LW;function kPe(){if(LW)return W2;LW=1,NPe();var t=gt();return W2=t.Object.keys,W2}var K2,BW;function TPe(){if(BW)return K2;BW=1;var t=kPe();return K2=t,K2}var G2,zW;function OPe(){return zW||(zW=1,G2=TPe()),G2}var jPe=OPe(),Xt=$e(jPe),VW={},UW;function PPe(){if(UW)return VW;UW=1;var t=Oe(),e=rt(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),VW}var Y2,HW;function IPe(){if(HW)return Y2;HW=1,PPe();var t=gt();return Y2=t.Date.now,Y2}var Q2,WW;function RPe(){if(WW)return Q2;WW=1;var t=IPe();return Q2=t,Q2}var X2,KW;function MPe(){return KW||(KW=1,X2=RPe()),X2}var APe=MPe(),Qv=$e(APe),GW={},J2,YW;function Ah(){if(YW)return J2;YW=1;var t=Ze();return J2=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},J2}var Z2,QW;function DPe(){if(QW)return Z2;QW=1;var t=yl().forEach,e=Ah(),r=e("forEach");return Z2=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},Z2}var XW;function $Pe(){if(XW)return GW;XW=1;var t=Oe(),e=DPe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),GW}var ek,JW;function FPe(){if(JW)return ek;JW=1,$Pe();var t=nn();return ek=t("Array","forEach"),ek}var tk,ZW;function qPe(){if(ZW)return tk;ZW=1;var t=FPe();return tk=t,tk}var rk,e9;function LPe(){if(e9)return rk;e9=1;var t=Ph(),e=rn(),r=wr(),n=qPe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return rk=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},rk}var nk,t9;function BPe(){return t9||(t9=1,nk=LPe()),nk}var zPe=BPe(),wt=$e(zPe),r9={},n9;function VPe(){if(n9)return r9;n9=1;var t=Oe(),e=rt(),r=ou(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),r9}var ik,i9;function UPe(){if(i9)return ik;i9=1,VPe();var t=nn();return ik=t("Array","reverse"),ik}var sk,s9;function HPe(){if(s9)return sk;s9=1;var t=wr(),e=UPe(),r=Array.prototype;return sk=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},sk}var ok,o9;function WPe(){if(o9)return ok;o9=1;var t=HPe();return ok=t,ok}var ak,a9;function KPe(){return a9||(a9=1,ak=WPe()),ak}var GPe=KPe(),fc=$e(GPe),l9={},lk,c9;function YPe(){if(c9)return lk;c9=1;var t=cr(),e=ou(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return lk=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},lk}var ck,u9;function Joe(){if(u9)return ck;u9=1;var t=Ch(),e=TypeError;return ck=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},ck}var d9;function QPe(){if(d9)return l9;d9=1;var t=Oe(),e=_i(),r=vb(),n=Oh(),i=Wo(),s=YPe(),o=$oe(),a=YA(),l=xb(),c=Joe(),d=Pm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,C,E,N,T;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),C=a(y,_),E=0;E<_;E++)N=w+E,N in y&&l(C,E,y[N]);if(C.length=_,S<_){for(E=w;E<b-_;E++)N=E+_,T=E+S,N in y?y[T]=y[N]:c(y,T);for(E=b;E>b-_+S;E--)c(y,E-1)}else if(S>_)for(E=b-_;E>w;E--)N=E+_-1,T=E+S-1,N in y?y[T]=y[N]:c(y,T);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,b-_+S),C}}),l9}var uk,h9;function XPe(){if(h9)return uk;h9=1,QPe();var t=nn();return uk=t("Array","splice"),uk}var dk,f9;function JPe(){if(f9)return dk;f9=1;var t=wr(),e=XPe(),r=Array.prototype;return dk=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},dk}var hk,p9;function ZPe(){if(p9)return hk;p9=1;var t=JPe();return hk=t,hk}var fk,m9;function eIe(){return m9||(m9=1,fk=ZPe()),fk}var tIe=eIe(),Eo=$e(tIe),g9={},y9;function rIe(){if(y9)return g9;y9=1;var t=Oe(),e=HA().includes,r=Ze(),n=ZA(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),g9}var pk,v9;function nIe(){if(v9)return pk;v9=1,rIe();var t=nn();return pk=t("Array","includes"),pk}var b9={},mk,x9;function iIe(){if(x9)return mk;x9=1;var t=Hr(),e=Us(),r=Sr(),n=r("match");return mk=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},mk}var gk,w9;function sIe(){if(w9)return gk;w9=1;var t=iIe(),e=TypeError;return gk=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},gk}var yk,S9;function oIe(){if(S9)return yk;S9=1;var t=Sr(),e=t("match");return yk=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},yk}var _9;function aIe(){if(_9)return b9;_9=1;var t=Oe(),e=rt(),r=sIe(),n=Uo(),i=Gi(),s=oIe(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),b9}var vk,E9;function lIe(){if(E9)return vk;E9=1,aIe();var t=nn();return vk=t("String","includes"),vk}var bk,C9;function cIe(){if(C9)return bk;C9=1;var t=wr(),e=nIe(),r=lIe(),n=Array.prototype,i=String.prototype;return bk=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},bk}var xk,N9;function uIe(){if(N9)return xk;N9=1;var t=cIe();return xk=t,xk}var wk,k9;function dIe(){return k9||(k9=1,wk=uIe()),wk}var hIe=dIe(),Ga=$e(hIe),T9={},O9;function fIe(){if(O9)return T9;O9=1;var t=Oe(),e=Ze(),r=_i(),n=Eb(),i=Yoe(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),T9}var Sk,j9;function pIe(){if(j9)return Sk;j9=1,fIe();var t=gt();return Sk=t.Object.getPrototypeOf,Sk}var _k,P9;function mIe(){if(P9)return _k;P9=1;var t=pIe();return _k=t,_k}var Ek,I9;function gIe(){return I9||(I9=1,Ek=mIe()),Ek}var yIe=gIe(),R9=$e(yIe),Ck,M9;function vIe(){if(M9)return Ck;M9=1,qoe();var t=nn();return Ck=t("Array","concat"),Ck}var Nk,A9;function bIe(){if(A9)return Nk;A9=1;var t=wr(),e=vIe(),r=Array.prototype;return Nk=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},Nk}var kk,D9;function xIe(){if(D9)return kk;D9=1;var t=bIe();return kk=t,kk}var Tk,$9;function wIe(){return $9||($9=1,Tk=xIe()),Tk}var SIe=wIe(),_Ie=$e(SIe),F9={},q9;function EIe(){if(q9)return F9;q9=1;var t=Oe(),e=yl().filter,r=Pm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),F9}var Ok,L9;function CIe(){if(L9)return Ok;L9=1,EIe();var t=nn();return Ok=t("Array","filter"),Ok}var jk,B9;function NIe(){if(B9)return jk;B9=1;var t=wr(),e=CIe(),r=Array.prototype;return jk=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},jk}var Pk,z9;function kIe(){if(z9)return Pk;z9=1;var t=NIe();return Pk=t,Pk}var Ik,V9;function TIe(){return V9||(V9=1,Ik=kIe()),Ik}var OIe=TIe(),Hn=$e(OIe),U9={},Rk,H9;function jIe(){if(H9)return Rk;H9=1;var t=cr(),e=Ze(),r=rt(),n=Eb(),i=jm(),s=ys(),o=fb().f,a=r(o),l=r([].push),c=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=c&&n(p)===null,v=m.length,y=0,b=[],w;v>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(b,h?[w,p[w]]:p[w]);return b}};return Rk={entries:d(!0),values:d(!1)},Rk}var W9;function PIe(){if(W9)return U9;W9=1;var t=Oe(),e=jIe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),U9}var Mk,K9;function IIe(){if(K9)return Mk;K9=1,PIe();var t=gt();return Mk=t.Object.values,Mk}var Ak,G9;function RIe(){if(G9)return Ak;G9=1;var t=IIe();return Ak=t,Ak}var Dk,Y9;function MIe(){return Y9||(Y9=1,Dk=RIe()),Dk}var AIe=MIe(),DIe=$e(AIe),Q9={},$k,X9;function rD(){return X9||(X9=1,$k=`	
\v\f\r \u2028\u2029\uFEFF`),$k}var Fk,J9;function Zoe(){if(J9)return Fk;J9=1;var t=rt(),e=Uo(),r=Gi(),n=rD(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(c){var d=r(e(c));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return Fk={start:a(1),end:a(2),trim:a(3)},Fk}var qk,Z9;function $Ie(){if(Z9)return qk;Z9=1;var t=$t(),e=Ze(),r=rt(),n=Gi(),i=Zoe().trim,s=rD(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,c=/^[+-]?0x/i,d=r(c.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return qk=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(c,g)?16:10))}:o,qk}var eK;function FIe(){if(eK)return Q9;eK=1;var t=Oe(),e=$Ie();return t({global:!0,forced:parseInt!==e},{parseInt:e}),Q9}var Lk,tK;function qIe(){if(tK)return Lk;tK=1,FIe();var t=gt();return Lk=t.parseInt,Lk}var Bk,rK;function LIe(){if(rK)return Bk;rK=1;var t=qIe();return Bk=t,Bk}var zk,nK;function BIe(){return nK||(nK=1,zk=LIe()),zk}var zIe=BIe(),is=$e(zIe),iK={},sK;function VIe(){if(sK)return iK;sK=1;var t=Oe(),e=BA(),r=HA().indexOf,n=Ah(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var c=arguments.length>1?arguments[1]:void 0;return s?i(this,l,c)||0:r(this,l,c)}}),iK}var Vk,oK;function UIe(){if(oK)return Vk;oK=1,VIe();var t=nn();return Vk=t("Array","indexOf"),Vk}var Uk,aK;function HIe(){if(aK)return Uk;aK=1;var t=wr(),e=UIe(),r=Array.prototype;return Uk=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},Uk}var Hk,lK;function WIe(){if(lK)return Hk;lK=1;var t=HIe();return Hk=t,Hk}var Wk,cK;function KIe(){return cK||(cK=1,Wk=WIe()),Wk}var GIe=KIe(),ft=$e(GIe),uK={},dK;function YIe(){if(dK)return uK;dK=1;var t=Oe(),e=cr(),r=Im();return t({target:"Object",stat:!0,sham:!e},{create:r}),uK}var Kk,hK;function QIe(){if(hK)return Kk;hK=1,YIe();var t=gt(),e=t.Object;return Kk=function(n,i){return e.create(n,i)},Kk}var Gk,fK;function XIe(){if(fK)return Gk;fK=1;var t=QIe();return Gk=t,Gk}var Yk,pK;function JIe(){return pK||(pK=1,Yk=XIe()),Yk}var ZIe=JIe(),pc=$e(ZIe),mK={},Qk,gK;function eRe(){if(gK)return Qk;gK=1;var t=Oh(),e=Gi(),r=Uo(),n=RangeError;return Qk=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},Qk}var Xk,yK;function tRe(){if(yK)return Xk;yK=1;var t=rt(),e=Poe(),r=Gi(),n=eRe(),i=Uo(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return Xk={start:l(!1),end:l(!0)},Xk}var Jk,vK;function rRe(){if(vK)return Jk;vK=1;var t=rt(),e=Ze(),r=tRe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return Jk=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,Jk}var bK;function nRe(){if(bK)return mK;bK=1;var t=Oe(),e=si(),r=_i(),n=koe(),i=rRe(),s=Us(),o=Ze(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),mK}var Zk,xK;function iRe(){if(xK)return Zk;xK=1,nRe(),Voe();var t=gt(),e=hb();return t.JSON||(t.JSON={stringify:JSON.stringify}),Zk=function(n,i,s){return e(t.JSON.stringify,null,arguments)},Zk}var eT,wK;function sRe(){if(wK)return eT;wK=1;var t=iRe();return eT=t,eT}var tT,SK;function oRe(){return SK||(SK=1,tT=sRe()),tT}var aRe=oRe(),Mm=$e(aRe),_K={},EK={},rT,CK;function eae(){if(CK)return rT;CK=1;var t=$t(),e=_h(),r=Us(),n=function(i){return e.slice(0,i.length)===i};return rT=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),rT}var nT,NK;function lRe(){if(NK)return nT;NK=1;var t=TypeError;return nT=function(e,r){if(e<r)throw new t("Not enough arguments");return e},nT}var iT,kK;function tae(){if(kK)return iT;kK=1;var t=$t(),e=hb(),r=Ur(),n=eae(),i=_h(),s=jh(),o=lRe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return iT=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?c(y,p):c(y)}:c},iT}var TK;function cRe(){if(TK)return EK;TK=1;var t=Oe(),e=$t(),r=tae(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),EK}var OK={},jK;function uRe(){if(jK)return OK;jK=1;var t=Oe(),e=$t(),r=tae(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),OK}var PK;function rae(){return PK||(PK=1,cRe(),uRe()),_K}var sT,IK;function dRe(){if(IK)return sT;IK=1,rae();var t=gt();return sT=t.setTimeout,sT}var oT,RK;function hRe(){return RK||(RK=1,oT=dRe()),oT}var fRe=hRe(),Co=$e(fRe),MK={},aT,AK;function pRe(){if(AK)return aT;AK=1;var t=_i(),e=vb(),r=Wo();return aT=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,d=c===void 0?o:e(c,o);d>l;)s[l++]=i;return s},aT}var DK;function mRe(){if(DK)return MK;DK=1;var t=Oe(),e=pRe(),r=ZA();return t({target:"Array",proto:!0},{fill:e}),r("fill"),MK}var lT,$K;function gRe(){if($K)return lT;$K=1,mRe();var t=nn();return lT=t("Array","fill"),lT}var cT,FK;function yRe(){if(FK)return cT;FK=1;var t=wr(),e=gRe(),r=Array.prototype;return cT=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},cT}var uT,qK;function vRe(){if(qK)return uT;qK=1;var t=yRe();return uT=t,uT}var dT,LK;function bRe(){return LK||(LK=1,dT=vRe()),dT}var xRe=bRe(),Am=$e(xRe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function fs(){return fs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fs.apply(this,arguments)}function Yi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function qg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var GI;typeof Object.assign!="function"?GI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:GI=Object.assign;var qc=GI,BK=["","webkit","Moz","MS","ms","o"],wRe=typeof document>"u"?{style:{}}:document.createElement("div"),SRe="function",Yu=Math.round,Lc=Math.abs,nD=Date.now;function Cb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<BK.length;){if(r=BK[s],n=r?r+i:e,n in t)return n;s++}}var No;typeof window>"u"?No={}:No=window;var nae=Cb(wRe.style,"touchAction"),iae=nae!==void 0;function _Re(){if(!iae)return!1;var t={},e=No.CSS&&No.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?No.CSS.supports("touch-action",r):!0}),t}var sae="compute",oae="auto",YI="manipulation",mc="none",Pp="pan-x",Ip="pan-y",Lg=_Re(),ERe=/mobile|tablet|ip(ad|hone|od)|android/i,aae="ontouchstart"in No,CRe=Cb(No,"PointerEvent")!==void 0,NRe=aae&&ERe.test(navigator.userAgent),Dm="touch",kRe="pen",iD="mouse",TRe="kinect",ORe=25,In=1,cu=2,gr=4,ri=8,Xv=1,$m=2,Fm=4,qm=8,Jd=16,Ls=$m|Fm,gc=qm|Jd,lae=Ls|gc,cae=["x","y"],Jv=["clientX","clientY"];function ko(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function Nb(t,e){return typeof t===SRe?t.apply(e&&e[0]||void 0,e):t}function Wl(t,e){return t.indexOf(e)>-1}function jRe(t){if(Wl(t,mc))return mc;var e=Wl(t,Pp),r=Wl(t,Ip);return e&&r?mc:e||r?e?Pp:Ip:Wl(t,YI)?YI:oae}var uae=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===sae&&(n=this.compute()),iae&&this.manager.element.style&&Lg[n]&&(this.manager.element.style[nae]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return ko(this.manager.recognizers,function(i){Nb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),jRe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Wl(o,mc)&&!Lg[mc],l=Wl(o,Ip)&&!Lg[Ip],c=Wl(o,Pp)&&!Lg[Pp];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&Ls||c&&s&gc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function sD(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function dae(t){var e=t.length;if(e===1)return{x:Yu(t[0].clientX),y:Yu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Yu(r/e),y:Yu(n/e)}}function zK(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Yu(t.pointers[r].clientX),clientY:Yu(t.pointers[r].clientY)},r++;return{timeStamp:nD(),pointers:e,center:dae(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Zv(t,e,r){r||(r=cae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function QI(t,e,r){r||(r=cae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function hae(t,e){return t===e?Xv:Lc(t)>=Lc(e)?t<0?$m:Fm:e<0?qm:Jd}function PRe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===In||s.eventType===gr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function fae(t,e,r){return{x:e/t||0,y:r/t||0}}function IRe(t,e){return Zv(e[0],e[1],Jv)/Zv(t[0],t[1],Jv)}function RRe(t,e){return QI(e[1],e[0],Jv)+QI(t[1],t[0],Jv)}function MRe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ri&&(n>ORe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=fae(n,l,c);s=d.x,o=d.y,i=Lc(d.x)>Lc(d.y)?d.x:d.y,a=hae(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function ARe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=zK(e)),i>1&&!r.firstMultiple?r.firstMultiple=zK(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=dae(n);e.timeStamp=nD(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=QI(a,l),e.distance=Zv(a,l),PRe(r,e),e.offsetDirection=hae(e.deltaX,e.deltaY);var c=fae(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Lc(c.x)>Lc(c.y)?c.x:c.y,e.scale=o?IRe(o.pointers,n):1,e.rotation=o?RRe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,MRe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,sD(f,d)&&(d=f),e.target=d}function DRe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&In&&n-i===0,o=e&(gr|ri)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,ARe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Rp(t){return t.trim().split(/\s+/g)}function Bf(t,e,r){ko(Rp(e),function(n){t.addEventListener(n,r,!1)})}function zf(t,e,r){ko(Rp(e),function(n){t.removeEventListener(n,r,!1)})}function VK(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Dh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){Nb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Bf(this.element,this.evEl,this.domHandler),this.evTarget&&Bf(this.target,this.evTarget,this.domHandler),this.evWin&&Bf(VK(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&zf(this.element,this.evEl,this.domHandler),this.evTarget&&zf(this.target,this.evTarget,this.domHandler),this.evWin&&zf(VK(this.element),this.evWin,this.domHandler)},t}();function Bc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var $Re={pointerdown:In,pointermove:cu,pointerup:gr,pointercancel:ri,pointerout:ri},FRe={2:Dm,3:kRe,4:iD,5:TRe},pae="pointerdown",mae="pointermove pointerup pointercancel";No.MSPointerEvent&&!No.PointerEvent&&(pae="MSPointerDown",mae="MSPointerMove MSPointerUp MSPointerCancel");var gae=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=pae,i.evWin=mae,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=$Re[a],c=FRe[i.pointerType]||i.pointerType,d=c===Dm,h=Bc(s,i.pointerId,"pointerId");l&In&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(gr|ri)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(Dh);function Mp(t){return Array.prototype.slice.call(t,0)}function oD(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Bc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var qRe={touchstart:In,touchmove:cu,touchend:gr,touchcancel:ri},LRe="touchstart touchmove touchend touchcancel",aD=function(t){Yi(e,t);function e(){var n;return e.prototype.evTarget=LRe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=qRe[i.type],o=BRe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Dm,srcEvent:i})},e}(Dh);function BRe(t,e){var r=Mp(t.touches),n=this.targetIds;if(e&(In|cu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Mp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return sD(c.target,l)}),e===In)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(gr|ri)&&delete n[o[i].identifier],i++;if(a.length)return[oD(s.concat(a),"identifier",!0),a]}var zRe={mousedown:In,mousemove:cu,mouseup:gr},VRe="mousedown",URe="mousemove mouseup",lD=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=VRe,i.evWin=URe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=zRe[i.type];s&In&&i.button===0&&(this.pressed=!0),s&cu&&i.which!==1&&(s=gr),this.pressed&&(s&gr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:iD,srcEvent:i}))},e}(Dh),HRe=2500,UK=25;function HK(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,HRe)}}function WRe(t,e){t&In?(this.primaryTouch=e.changedPointers[0].identifier,HK.call(this,e)):t&(gr|ri)&&HK.call(this,e)}function KRe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=UK&&o<=UK)return!0}return!1}var yae=function(){var t=function(e){Yi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===Dm,h=c.pointerType===iD;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)WRe.call(qg(qg(o)),l,c);else if(h&&KRe.call(qg(qg(o)),c))return;o.callback(a,l,c)}},o.touch=new aD(o.manager,o.handler),o.mouse=new lD(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Dh);return t}();function GRe(t){var e,r=t.options.inputClass;return r?e=r:CRe?e=gae:NRe?e=aD:aae?e=yae:e=lD,new e(t,DRe)}function Qu(t,e,r){return Array.isArray(t)?(ko(t,r[e],r),!0):!1}var fy=1,zi=2,Zd=4,Ya=8,To=Ya,Ap=16,Rs=32,YRe=1;function QRe(){return YRe++}function Bg(t,e){var r=e.manager;return r?r.get(t):t}function WK(t){return t&Ap?"cancel":t&Ya?"end":t&Zd?"move":t&zi?"start":""}var Lm=function(){function t(r){r===void 0&&(r={}),this.options=fs({enable:!0},r),this.id=QRe(),this.manager=null,this.state=fy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return qc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Qu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Bg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Qu(n,"dropRecognizeWith",this)?this:(n=Bg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Qu(n,"requireFailure",this))return this;var i=this.requireFail;return n=Bg(n,this),Bc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Qu(n,"dropRequireFailure",this))return this;n=Bg(n,this);var i=Bc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ya&&o(i.options.event+WK(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ya&&o(i.options.event+WK(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Rs},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Rs|fy)))return!1;n++}return!0},e.recognize=function(n){var i=qc({},n);if(!Nb(this.options.enable,[this,i])){this.reset(),this.state=Rs;return}this.state&(To|Ap|Rs)&&(this.state=fy),this.state=this.process(i),this.state&(zi|Zd|Ya|Ap)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),XI=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[YI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&In&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==gr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Zv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=To,s.tryEmit()},o.interval),zi):To}return Rs},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Rs},this.options.interval),Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===To&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Lm),eh=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(zi|Zd),l=this.attrTest(i);return a&&(o&ri||!l)?s|Ap:a||l?o&gr?s|Ya:s&zi?s|Zd:zi:Rs},e}(Lm);function vae(t){return t===Jd?"down":t===qm?"up":t===$m?"left":t===Fm?"right":""}var cD=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"pan",threshold:10,pointers:1,direction:lae},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Ls&&s.push(Ip),i&gc&&s.push(Pp),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Ls?(l=c===0?Xv:c<0?$m:Fm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Xv:d<0?qm:Jd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return eh.prototype.attrTest.call(this,i)&&(this.state&zi||!(this.state&zi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=vae(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(eh),bae=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"swipe",threshold:10,velocity:.3,direction:Ls|gc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return cD.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Ls|gc)?o=i.overallVelocity:s&Ls?o=i.overallVelocityX:s&gc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Lc(o)>this.options.velocity&&i.eventType&gr},r.emit=function(i){var s=vae(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(eh),xae=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[mc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&zi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(eh),wae=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[mc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&zi)},e}(eh),Sae=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[oae]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(gr|ri)&&!c)this.reset();else if(i.eventType&In)this.reset(),this._timer=setTimeout(function(){s.state=To,s.tryEmit()},o.time);else if(i.eventType&gr)return To;return Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===To&&(i&&i.eventType&gr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=nD(),this.manager.emit(this.options.event,this._input)))},e}(Lm),_ae={domEvents:!1,touchAction:sae,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},KK=[[wae,{enable:!1}],[xae,{enable:!1},["rotate"]],[bae,{direction:Ls}],[cD,{direction:Ls},["swipe"]],[XI],[XI,{event:"doubletap",taps:2},["tap"]],[Sae]],XRe=1,GK=2;function YK(t,e){var r=t.element;if(r.style){var n;ko(t.options.cssProps,function(i,s){n=Cb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function JRe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var QK=function(){function t(r,n){var i=this;this.options=qc({},_ae,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=GRe(this),this.touchAction=new uae(this,this.options.touchAction),YK(this,!0),ko(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return qc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?GK:XRe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&To)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==GK&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(zi|Zd|Ya)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Lm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Qu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Qu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Bc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return ko(Rp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return ko(Rp(n),function(o){i?s[o]&&s[o].splice(Bc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&JRe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&YK(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),ZRe={touchstart:In,touchmove:cu,touchend:gr,touchcancel:ri},eMe="touchstart",tMe="touchstart touchmove touchend touchcancel",rMe=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evTarget=eMe,i.evWin=tMe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=ZRe[i.type];if(s===In&&(this.started=!0),!!this.started){var o=nMe.call(this,i,s);s&(gr|ri)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Dm,srcEvent:i})}},e}(Dh);function nMe(t,e){var r=Mp(t.touches),n=Mp(t.changedTouches);return e&(gr|ri)&&(r=oD(r.concat(n),"identifier",!0)),[r,n]}function Eae(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Cae=Eae(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),iMe=Eae(function(t,e){return Cae(t,e,!0)},"merge","Use `assign`.");function sMe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&qc(i,r)}function XK(t,e){return function(){return t.apply(e,arguments)}}var Nae=function(){var t=function(r,n){return n===void 0&&(n={}),new QK(r,fs({recognizers:KK.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=lae,t.DIRECTION_DOWN=Jd,t.DIRECTION_LEFT=$m,t.DIRECTION_RIGHT=Fm,t.DIRECTION_UP=qm,t.DIRECTION_HORIZONTAL=Ls,t.DIRECTION_VERTICAL=gc,t.DIRECTION_NONE=Xv,t.DIRECTION_DOWN=Jd,t.INPUT_START=In,t.INPUT_MOVE=cu,t.INPUT_END=gr,t.INPUT_CANCEL=ri,t.STATE_POSSIBLE=fy,t.STATE_BEGAN=zi,t.STATE_CHANGED=Zd,t.STATE_ENDED=Ya,t.STATE_RECOGNIZED=To,t.STATE_CANCELLED=Ap,t.STATE_FAILED=Rs,t.Manager=QK,t.Input=Dh,t.TouchAction=uae,t.TouchInput=aD,t.MouseInput=lD,t.PointerEventInput=gae,t.TouchMouseInput=yae,t.SingleTouchInput=rMe,t.Recognizer=Lm,t.AttrRecognizer=eh,t.Tap=XI,t.Pan=cD,t.Swipe=bae,t.Pinch=xae,t.Rotate=wae,t.Press=Sae,t.on=Bf,t.off=zf,t.each=ko,t.merge=iMe,t.extend=Cae,t.bindFn=XK,t.assign=qc,t.inherit=sMe,t.bindFn=XK,t.prefixed=Cb,t.toArray=Mp,t.inArray=Bc,t.uniqueArray=oD,t.splitStr=Rp,t.boolOrFn=Nb,t.hasParent=sD,t.addEventListeners=Bf,t.removeEventListeners=zf,t.defaults=qc({},_ae,{preset:KK}),t}();Nae.defaults;aPe("DELETE");function kb(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return oMe(e.length?e:[Qv()])}function oMe(t){let[e,r,n]=aMe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function aMe(){const t=lMe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function lMe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function cMe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const uD=typeof window<"u"?window.Hammer||Nae:function(){return cMe()};function Ms(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=uD(this._dom.overlay);r.on("tap",se(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];wt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{uMe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}Doe(Ms.prototype);Ms.current=null;Ms.prototype.destroy=function(){this.deactivate();for(const r of fc(t=Eo(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Ms.prototype.activate=function(){Ms.current&&Ms.current.deactivate(),Ms.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Ms.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Ms.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function uMe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const dMe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,hMe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,fMe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,pMe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function aa(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(aa(e),t.removeChild(e))}}function ld(t){return t instanceof String||typeof t=="string"}function JK(t){return typeof t=="object"&&t!==null}function zc(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function kae(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")zc(t,e,n,r);else{const i=t[n],s=e[n];JK(i)&&JK(s)&&kae(i,s,r)}}function $h(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(tr(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Ct(e[s],r[s],!1,n):zc(e,r,s,n);else{if(tr(r[s]))throw new TypeError("Arrays are not supported by deepExtend");zc(e,r,s,n)}}return e}function e0(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(tr(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Ga(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?Ct(e[i],r[i]):zc(e,r,i,n);else if(tr(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else zc(e,r,i,n);return e}function Ct(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&R9(e[s])===Object.prototype)t[s]===void 0?t[s]=Ct({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&R9(t[s])===Object.prototype?Ct(t[s],e[s],r):zc(t,e,s,n);else if(tr(e[s])){var i;t[s]=Ps(i=e[s]).call(i)}else zc(t,e,s,n);return t}function t0(t,e){return[...t,e]}function mMe(t){return Ps(t).call(t)}function gMe(t){return t.getBoundingClientRect().left}function yMe(t){return t.getBoundingClientRect().top}function Ye(t,e){if(tr(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function dD(t){let e;switch(t.length){case 3:case 4:return e=hMe.exec(t),e?{r:is(e[1]+e[1],16),g:is(e[2]+e[2],16),b:is(e[3]+e[3],16)}:null;case 6:case 7:return e=dMe.exec(t),e?{r:is(e[1],16),g:is(e[2],16),b:is(e[3],16)}:null;default:return null}}function Di(t,e){if(Ga(t).call(t,"rgba"))return t;if(Ga(t).call(t,"rgb")){const r=t.substr(ft(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=dD(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function Tae(t,e,r){var n;return"#"+Ps(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function JI(t,e){if(ld(t)){let n=t;if(jae(n)){var r;const i=Xd(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return is(s)});n=Tae(i[0],i[1],i[2])}if(Oae(n)===!0){const i=vMe(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=ZI(o.h,o.s,o.v),l=ZI(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:ld(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:ld(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function vf(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function py(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),c=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=c,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=c,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function ZI(t,e,r){const n=py(t,e,r);return Tae(n.r,n.g,n.b)}function vMe(t){const e=dD(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return vf(e.r,e.g,e.b)}function Oae(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function jae(t){return fMe.test(t)}function bMe(t){return pMe.test(t)}function Qa(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=pc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Qa(t[r]));return e}function Pi(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const v=m[g],y=p[g];for(const b in v)Object.prototype.hasOwnProperty.call(v,b)&&(y[b]=v[b])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=pc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const xMe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function la(t,e){let r;tr(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const wMe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let SMe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return wMe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),ld(e)===!0){if(jae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(bMe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(Oae(e)===!0){const s=dD(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Mm(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=mr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Co(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=mr({},e)),this.color=e;const n=vf(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=vf(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=py(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=vf(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Am(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=se(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=se(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=se(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=se(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new uD(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,c=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=py(o*c,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,c=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*d+s,f=Math.sin(c)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=c/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=vf(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const v=py(g.h,g.s,g.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function eR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(eR(...Ps(e).call(e,1))),n}}let _Me=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},mr(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new SMe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(tr(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Hn(e)!==void 0&&(this.options.filter=Hn(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Hn(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Hn(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||ft(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return wt(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(eR("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&ft(e).call(e,r)!==-1&&(s=ft(e).call(e,r));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],i.appendChild(c)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,c="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,c="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,c="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);c!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Co(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Co(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Hn(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],c=t0(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!tr(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(c);if(tr(l))this._handleArray(l,d,c);else if(typeof l=="string")this._makeTextInput(l,d,c);else if(typeof l=="boolean")this._makeCheckbox(l,d,c);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=t0(c,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(eR("pre","const options = "+Mm(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},EMe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=is(e),this.y=is(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-r<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},af=!1,ZK;const tR="background: #FFeeee; color: #dd0000";let CMe=class Gt{static validate(e,r,n){af=!1,ZK=r;let i=r;return n!==void 0&&(i=r[n]),Gt.parse(e,i,[]),af}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&Gt.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){Gt.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=Gt.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),Gt.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+Gt.printLocation(o,e),tR)},l=Gt.getType(r[e]),c=s[l];c!==void 0?Gt.getType(c)==="array"&&ft(c).call(c,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+Gt.print(c)+' not "'+r[e]+'". '),af=!0):l==="object"&&i!=="__any__"&&(o=t0(o,e),Gt.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+Gt.print(Xt(s))+". Received ["+l+'] "'+r[e]+'"'),af=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":tr(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=Gt.findInOptions(e,r,n,!1),s=Gt.findInOptions(e,ZK,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+Gt.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+Gt.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+Gt.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+Gt.printLocation(i.path,e):l=". Did you mean one of these: "+Gt.print(Xt(r))+Gt.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,tR),af=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=Gt.findInOptions(e,r[h],t0(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,c=p.indexMatch)}else{var d;ft(d=h.toLowerCase()).call(d,l)!==-1&&(c=h),f=Gt.levenshteinDistance(e,h),s>f&&(o=h,a=mMe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return Mm(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const NMe=Ms,kMe=_Me,cd=uD,TMe=EMe,Pae=tR,OMe=CMe;function jMe(t){return ja=t,MMe()}var Iae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},hD=pc(Iae);hD.color="color.color";hD.style="dashes";var Sn={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},eG={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},ja="",th=0,Ke="",Ie="",zn=Sn.NULL;function PMe(){th=0,Ke=ja.charAt(0)}function Ir(){th++,Ke=ja.charAt(th)}function Eu(){return ja.charAt(th+1)}function tG(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function nl(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function IMe(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function Rae(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=nl(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),ft(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=nl(i.attr,e.attr))}function RMe(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=nl({},t.edge);e.attr=nl(r,e.attr)}}function Mae(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=nl({},t.edge)),s.attr=nl(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function kt(){for(zn=Sn.NULL,Ie="";Ke===" "||Ke==="	"||Ke===`
`||Ke==="\r";)Ir();do{var t=!1;if(Ke==="#"){for(var e=th-1;ja.charAt(e)===" "||ja.charAt(e)==="	";)e--;if(ja.charAt(e)===`
`||ja.charAt(e)===""){for(;Ke!=""&&Ke!=`
`;)Ir();t=!0}}if(Ke==="/"&&Eu()==="/"){for(;Ke!=""&&Ke!=`
`;)Ir();t=!0}if(Ke==="/"&&Eu()==="*"){for(;Ke!="";)if(Ke==="*"&&Eu()==="/"){Ir(),Ir();break}else Ir();t=!0}for(;Ke===" "||Ke==="	"||Ke===`
`||Ke==="\r";)Ir()}while(t);if(Ke===""){zn=Sn.DELIMITER;return}var r=Ke+Eu();if(eG[r]){zn=Sn.DELIMITER,Ie=r,Ir(),Ir();return}if(eG[Ke]){zn=Sn.DELIMITER,Ie=Ke,Ir();return}if(tG(Ke)||Ke==="-"){for(Ie+=Ke,Ir();tG(Ke);)Ie+=Ke,Ir();Ie==="false"?Ie=!1:Ie==="true"?Ie=!0:isNaN(Number(Ie))||(Ie=Number(Ie)),zn=Sn.IDENTIFIER;return}if(Ke==='"'){for(Ir();Ke!=""&&(Ke!='"'||Ke==='"'&&Eu()==='"');)Ke==='"'?(Ie+=Ke,Ir()):Ke==="\\"&&Eu()==="n"?(Ie+=`
`,Ir()):Ie+=Ke,Ir();if(Ke!='"')throw _n('End of string " expected');Ir(),zn=Sn.IDENTIFIER;return}for(zn=Sn.UNKNOWN;Ke!="";)Ie+=Ke,Ir();throw new SyntaxError('Syntax error in part "'+Fae(Ie,30)+'"')}function MMe(){var t={};if(PMe(),kt(),Ie==="strict"&&(t.strict=!0,kt()),(Ie==="graph"||Ie==="digraph")&&(t.type=Ie,kt()),zn===Sn.IDENTIFIER&&(t.id=Ie,kt()),Ie!="{")throw _n("Angle bracket { expected");if(kt(),Aae(t),Ie!="}")throw _n("Angle bracket } expected");if(kt(),Ie!=="")throw _n("End of file expected");return kt(),delete t.node,delete t.edge,delete t.graph,t}function Aae(t){for(;Ie!==""&&Ie!="}";)AMe(t),Ie===";"&&kt()}function AMe(t){var e=Dae(t);if(e){$ae(t,e);return}var r=DMe(t);if(!r){if(zn!=Sn.IDENTIFIER)throw _n("Identifier expected");var n=Ie;if(kt(),Ie==="="){if(kt(),zn!=Sn.IDENTIFIER)throw _n("Identifier expected");t[n]=Ie,kt()}else $Me(t,n)}}function Dae(t){var e=null;if(Ie==="subgraph"&&(e={},e.type="subgraph",kt(),zn===Sn.IDENTIFIER&&(e.id=Ie,kt())),Ie==="{"){if(kt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Aae(e),Ie!="}")throw _n("Angle bracket } expected");kt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function DMe(t){return Ie==="node"?(kt(),t.node=Vf(),"node"):Ie==="edge"?(kt(),t.edge=Vf(),"edge"):Ie==="graph"?(kt(),t.graph=Vf(),"graph"):null}function $Me(t,e){var r={id:e},n=Vf();n&&(r.attr=n),Rae(t,r),$ae(t,e)}function $ae(t,e){for(;Ie==="->"||Ie==="--";){var r,n=Ie;kt();var i=Dae(t);if(i)r=i;else{if(zn!=Sn.IDENTIFIER)throw _n("Identifier or subgraph expected");r=Ie,Rae(t,{id:r}),kt()}var s=Vf(),o=Mae(t,e,r,n,s);RMe(t,o),e=r}}function Vf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Ie==="[";){for(kt(),e={};Ie!==""&&Ie!="]";){if(zn!=Sn.IDENTIFIER)throw _n("Attribute name expected");var o=Ie;if(kt(),Ie!="=")throw _n("Equal sign = expected");if(kt(),zn!=Sn.IDENTIFIER)throw _n("Attribute value expected");var a=Ie;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),kt(),Ie==","&&kt()}if(Ie!="]")throw _n("Bracket ] expected");kt()}if(Ga(s).call(s,"dir")){var c={};for(c.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)c.arrows.to=t;else if(i[t].value.from!=null)c.arrows.from=t;else throw _n("Invalid value of arrows");else i[t].name==="dir"&&(c.dir=t);var d=i[c.dir].value;if(!Ga(s).call(s,"arrows"))if(d==="both")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1,i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[c.dir].attr,name:"arrows",value:""}),c.arrows.to=i.length-1;else throw _n('Invalid dir type "'+d+'"');var h,f;if(d==="both")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},Eo(i).call(i,c.arrows.from,1)):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="arrow",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")c.arrows.to&&c.arrows.from?(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f="",h="arrow",c.arrows.from=c.arrows.to,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{from:{enabled:!0,type:i[c.arrows.from].value.from.type}}};else if(d==="none"){var p;c.arrows.to?p=c.arrows.to:p=c.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h="",c.arrows.to=c.arrows.from,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:i[c.arrows.to].value.to.type}}};else throw _n('Invalid dir type "'+d+'"');Eo(i).call(i,c.dir,1)}var m;if(Ga(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)IMe(i[t].attr,i[t].name,i[t].value);return e}function _n(t){return new SyntaxError(t+', got "'+Fae(Ie,30)+'" (char '+th+")")}function Fae(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function FMe(t,e,r){tr(t)?wt(t).call(t,function(n){tr(e)?wt(e).call(e,function(i){r(n,i)}):r(n,e)}):tr(e)?wt(e).call(e,function(n){r(t,n)}):r(t,e)}function hT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function rG(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];tr(i)?wt(i).call(i,function(s){hT(r,s,t[n])}):typeof i=="string"?hT(r,i,t[n]):hT(r,n,t[n])}return r}function qMe(t){var e=jMe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;wt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};nl(a,rG(o.attr,Iae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return nl(a,rG(o.attr,hD)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};wt(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var c;wt(c=o.from.edges).call(c,function(h){var f=s(h);r.edges.push(f)})}if(FMe(a,l,function(h,f){var p=Mae(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;wt(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function LMe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=Xd(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:Xd(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const BMe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},zMe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},VMe={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},UMe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},HMe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},WMe={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},KMe={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},GMe={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},YMe={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},QMe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},XMe={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var JMe=Object.freeze({__proto__:null,cn:GMe,cs:XMe,de:zMe,en:BMe,es:VMe,fr:QMe,it:UMe,nl:HMe,pt:WMe,ru:KMe,uk:YMe});function ZMe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(_Ie(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class eAe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),c=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,c,s],[5*c,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class tAe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new eAe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var nG={},iG={},fT={exports:{}},pT,sG;function rAe(){if(sG)return pT;sG=1;var t=Ze();return pT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),pT}var mT,oG;function nAe(){if(oG)return mT;oG=1;var t=Ze(),e=Hr(),r=Us(),n=rAe(),i=Object.isExtensible,s=t(function(){});return mT=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,mT}var gT,aG;function qae(){if(aG)return gT;aG=1;var t=Ze();return gT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),gT}var lG;function Tb(){if(lG)return fT.exports;lG=1;var t=Oe(),e=rt(),r=Om(),n=Hr(),i=rn(),s=Ki().f,o=Sb(),a=XA(),l=nAe(),c=mb(),d=qae(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(C){for(var E=x(C),N=0,T=E.length;N<T;N++)if(E[N]===f){S(E,N,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=fT.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,fT.exports}var yT,cG;function iAe(){if(cG)return yT;cG=1;var t=Sr(),e=Ih(),r=t("iterator"),n=Array.prototype;return yT=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},yT}var vT,uG;function Lae(){if(uG)return vT;uG=1;var t=Ph(),e=zA(),r=Sh(),n=Ih(),i=Sr(),s=i("iterator");return vT=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},vT}var bT,dG;function sAe(){if(dG)return bT;dG=1;var t=si(),e=Ho(),r=Hs(),n=Ch(),i=Lae(),s=TypeError;return bT=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},bT}var xT,hG;function fD(){if(hG)return xT;hG=1;var t=si(),e=Hs(),r=zA();return xT=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},xT}var wT,fG;function Ob(){if(fG)return wT;fG=1;var t=yb(),e=si(),r=Hs(),n=Ch(),i=iAe(),s=Wo(),o=wr(),a=sAe(),l=Lae(),c=fD(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return wT=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,C,E,N,T,j,I,O=function(z){return _&&c(_,"normal"),new h(!0,z)},D=function(z){return y?(r(z),x?S(z[0],z[1],O):S(z[0],z[1])):x?S(z,O):S(z)};if(b)_=p.iterator;else if(w)_=p;else{if(C=l(p),!C)throw new d(n(p)+" is not iterable");if(i(C)){for(E=0,N=s(p);N>E;E++)if(T=D(p[E]),T&&o(f,T))return T;return new h(!1)}_=a(p,C)}for(j=b?p.next:_.next;!(I=e(j,_)).done;){try{T=D(I.value)}catch(z){c(_,"throw",z)}if(typeof T=="object"&&T&&o(f,T))return T}return new h(!1)},wT}var ST,pG;function pD(){if(pG)return ST;pG=1;var t=wr(),e=TypeError;return ST=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},ST}var _T,mG;function mD(){if(mG)return _T;mG=1;var t=Oe(),e=$t(),r=Tb(),n=Ze(),i=Th(),s=Ob(),o=pD(),a=Ur(),l=Hr(),c=Sh(),d=au(),h=Ki().f,f=yl().forEach,p=cr(),m=lu(),g=m.set,v=m.getterFor;return _T=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",C=e[y],E=C&&C.prototype,N={},T;if(!p||!a(C)||!(S||E.forEach&&!n(function(){new C().entries().next()})))T=w.getConstructor(b,y,x,_),r.enable();else{T=b(function(O,D){g(o(O,j),{type:y,collection:new C}),c(D)||s(D,O[_],{that:O,AS_ENTRIES:x})});var j=T.prototype,I=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in E&&!(S&&O==="clear")&&i(j,O,function(z,R){var B=I(this).collection;if(!D&&S&&!l(z))return O==="get"?void 0:!1;var q=B[O](z===0?0:z,R);return D?this:q})}),S||h(j,"size",{configurable:!0,get:function(){return I(this).collection.size}})}return d(T,y,!1,!0),N[y]=T,t({global:!0,forced:!0},N),S||w.setStrong(T,y,x),T},_T}var ET,gG;function gD(){if(gG)return ET;gG=1;var t=Rm();return ET=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},ET}var CT,yG;function oAe(){if(yG)return CT;yG=1;var t=Si(),e=JA(),r=Sr(),n=cr(),i=r("species");return CT=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},CT}var NT,vG;function Bae(){if(vG)return NT;vG=1;var t=Im(),e=JA(),r=gD(),n=yb(),i=pD(),s=Sh(),o=Ob(),a=eD(),l=tD(),c=oAe(),d=cr(),h=Tb().fastKey,f=lu(),p=f.set,m=f.getterFor;return NT={getConstructor:function(g,v,y,b){var w=g(function(E,N){i(E,x),p(E,{type:v,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(N)||o(N,E[b],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(E,N,T){var j=S(E),I=C(E,N),O,D;return I?I.value=T:(j.last=I={index:D=h(N,!0),key:N,value:T,previous:O=j.last,next:null,removed:!1},j.first||(j.first=I),O&&(O.next=I),d?j.size++:E.size++,D!=="F"&&(j.index[D]=I)),E},C=function(E,N){var T=S(E),j=h(N),I;if(j!=="F")return T.index[j];for(I=T.first;I;I=I.next)if(I.key===N)return I};return r(x,{clear:function(){for(var N=this,T=S(N),j=T.first;j;)j.removed=!0,j.previous&&(j.previous=j.previous.next=null),j=j.next;T.first=T.last=null,T.index=t(null),d?T.size=0:N.size=0},delete:function(E){var N=this,T=S(N),j=C(N,E);if(j){var I=j.next,O=j.previous;delete T.index[j.index],j.removed=!0,O&&(O.next=I),I&&(I.previous=O),T.first===j&&(T.first=I),T.last===j&&(T.last=O),d?T.size--:N.size--}return!!j},forEach:function(N){for(var T=S(this),j=n(N,arguments.length>1?arguments[1]:void 0),I;I=I?I.next:T.first;)for(j(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(N){return!!C(this,N)}}),r(x,y?{get:function(N){var T=C(this,N);return T&&T.value},set:function(N,T){return _(this,N===0?0:N,T)}}:{add:function(N){return _(this,N=N===0?0:N,N)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,C=S.last;C&&C.removed;)C=C.previous;return!S.target||!(S.last=C=C?C.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?C.key:_==="values"?C.value:[C.key,C.value],!1)},y?"entries":"values",!y,!0),c(v)}},NT}var bG;function aAe(){if(bG)return iG;bG=1;var t=mD(),e=Bae();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),iG}var xG;function lAe(){return xG||(xG=1,aAe()),nG}var wG={},kT,SG;function zae(){return SG||(SG=1,kT=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),kT}var TT,_G;function cAe(){if(_G)return TT;_G=1;var t=Si(),e=zae(),r=t("Map");return TT={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},TT}var EG;function uAe(){if(EG)return wG;EG=1;var t=Oe(),e=rt(),r=Ho(),n=Uo(),i=Ob(),s=cAe(),o=Nh(),a=Ze(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),wG}var CG={},OT,NG;function dAe(){if(NG)return OT;NG=1;var t=rt(),e=Oh(),r=Gi(),n=Uo(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return OT={codeAt:a(!1),charAt:a(!0)},OT}var kG;function yD(){if(kG)return CG;kG=1;var t=dAe().charAt,e=Gi(),r=lu(),n=eD(),i=tD(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),CG}var jT,TG;function hAe(){if(TG)return jT;TG=1,Rh(),lAe(),uAe(),yD();var t=gt();return jT=t.Map,jT}var PT,OG;function fAe(){if(OG)return PT;OG=1;var t=hAe();return Mh(),PT=t,PT}var IT,jG;function pAe(){return jG||(jG=1,IT=fAe()),IT}var mAe=pAe(),vD=$e(mAe);class gAe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},mr(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ft(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new vD,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var PG={},IG;function yAe(){if(IG)return PG;IG=1;var t=Oe();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),PG}var RT,RG;function vAe(){if(RG)return RT;RG=1,yAe();var t=gt();return RT=t.Number.isNaN,RT}var MT,MG;function bAe(){if(MG)return MT;MG=1;var t=vAe();return MT=t,MT}var AT,AG;function xAe(){return AG||(AG=1,AT=bAe()),AT}var wAe=xAe(),rR=$e(wAe),DG={},DT,$G;function SAe(){if($G)return DT;$G=1;var t=$t(),e=t.isFinite;return DT=Number.isFinite||function(n){return typeof n=="number"&&e(n)},DT}var FG;function _Ae(){if(FG)return DG;FG=1;var t=Oe(),e=SAe();return t({target:"Number",stat:!0},{isFinite:e}),DG}var $T,qG;function EAe(){if(qG)return $T;qG=1,_Ae();var t=gt();return $T=t.Number.isFinite,$T}var FT,LG;function CAe(){if(LG)return FT;LG=1;var t=EAe();return FT=t,FT}var qT,BG;function NAe(){return BG||(BG=1,qT=CAe()),qT}var kAe=NAe(),Kl=$e(kAe),zG={},VG;function TAe(){if(VG)return zG;VG=1;var t=Oe(),e=yl().some,r=Ah(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),zG}var LT,UG;function OAe(){if(UG)return LT;UG=1,TAe();var t=nn();return LT=t("Array","some"),LT}var BT,HG;function jAe(){if(HG)return BT;HG=1;var t=wr(),e=OAe(),r=Array.prototype;return BT=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},BT}var zT,WG;function PAe(){if(WG)return zT;WG=1;var t=jAe();return zT=t,zT}var VT,KG;function IAe(){return KG||(KG=1,VT=PAe()),VT}var RAe=IAe(),MAe=$e(RAe),UT={exports:{}},GG={},YG;function AAe(){if(YG)return GG;YG=1;var t=Oe(),e=cr(),r=Ki().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),GG}var QG;function DAe(){if(QG)return UT.exports;QG=1,AAe();var t=gt(),e=t.Object,r=UT.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),UT.exports}var HT,XG;function Vae(){if(XG)return HT;XG=1;var t=DAe();return HT=t,HT}var WT,JG;function $Ae(){if(JG)return WT;JG=1;var t=Vae();return WT=t,WT}var KT,ZG;function FAe(){if(ZG)return KT;ZG=1;var t=$Ae();return KT=t,KT}var GT,eY;function qAe(){return eY||(eY=1,GT=FAe()),GT}var LAe=qAe(),BAe=$e(LAe),tY={},rY;function zAe(){if(rY)return tY;rY=1;var t=Sr(),e=Ki().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),tY}var nY={},iY;function VAe(){return iY||(iY=1,Hoe()),nY}var sY={},oY;function UAe(){return oY||(oY=1,Woe()),sY}var aY={},lY;function HAe(){if(lY)return aY;lY=1;var t=Ht();return t("metadata"),aY}var YT,cY;function WAe(){if(cY)return YT;cY=1;var t=Xoe();return zAe(),VAe(),UAe(),HAe(),YT=t,YT}var uY={},QT,dY;function Uae(){if(dY)return QT;dY=1;var t=Si(),e=rt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return QT=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},QT}var hY;function KAe(){if(hY)return uY;hY=1;var t=Oe(),e=Uae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),uY}var fY={},XT,pY;function Hae(){if(pY)return XT;pY=1;for(var t=kh(),e=Si(),r=rt(),n=Tm(),i=Sr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return XT=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},XT}var mY;function GAe(){if(mY)return fY;mY=1;var t=Oe(),e=Hae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),fY}var gY={},yY;function YAe(){if(yY)return gY;yY=1;var t=Ht();return t("customMatcher"),gY}var vY={},bY;function QAe(){if(bY)return vY;bY=1;var t=Ht();return t("observable"),vY}var xY={},wY;function XAe(){if(wY)return xY;wY=1;var t=Oe(),e=Uae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),xY}var SY={},_Y;function JAe(){if(_Y)return SY;_Y=1;var t=Oe(),e=Hae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),SY}var EY={},CY;function ZAe(){if(CY)return EY;CY=1;var t=Ht();return t("matcher"),EY}var NY={},kY;function eDe(){if(kY)return NY;kY=1;var t=Ht();return t("metadataKey"),NY}var TY={},OY;function tDe(){if(OY)return TY;OY=1;var t=Ht();return t("patternMatch"),TY}var jY={},PY;function rDe(){if(PY)return jY;PY=1;var t=Ht();return t("replaceAll"),jY}var JT,IY;function nDe(){if(IY)return JT;IY=1;var t=WAe();return KAe(),GAe(),YAe(),QAe(),XAe(),JAe(),ZAe(),eDe(),tDe(),rDe(),JT=t,JT}var ZT,RY;function iDe(){return RY||(RY=1,ZT=nDe()),ZT}var sDe=iDe(),zg=$e(sDe),eO,MY;function oDe(){if(MY)return eO;MY=1,Rh(),yD(),Koe();var t=_b();return eO=t.f("iterator"),eO}var tO,AY;function aDe(){if(AY)return tO;AY=1;var t=oDe();return Mh(),tO=t,tO}var rO,DY;function lDe(){if(DY)return rO;DY=1;var t=aDe();return rO=t,rO}var nO,$Y;function cDe(){if($Y)return nO;$Y=1;var t=lDe();return nO=t,nO}var iO,FY;function uDe(){return FY||(FY=1,iO=cDe()),iO}var dDe=uDe(),hDe=$e(dDe);function Dp(t){"@babel/helpers - typeof";return Dp=typeof zg=="function"&&typeof hDe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof zg=="function"&&e.constructor===zg&&e!==zg.prototype?"symbol":typeof e},Dp(t)}var sO,qY;function fDe(){if(qY)return sO;qY=1,Goe();var t=_b();return sO=t.f("toPrimitive"),sO}var oO,LY;function pDe(){if(LY)return oO;LY=1;var t=fDe();return oO=t,oO}var aO,BY;function mDe(){if(BY)return aO;BY=1;var t=pDe();return aO=t,aO}var lO,zY;function gDe(){if(zY)return lO;zY=1;var t=mDe();return lO=t,lO}var cO,VY;function yDe(){return VY||(VY=1,cO=gDe()),cO}var vDe=yDe(),bDe=$e(vDe);function xDe(t,e){if(Dp(t)!="object"||!t)return t;var r=t[bDe];if(r!==void 0){var n=r.call(t,e);if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wDe(t){var e=xDe(t,"string");return Dp(e)=="symbol"?e:e+""}function go(t,e,r){return(e=wDe(e))in t?BAe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var UY={},uO,HY;function SDe(){if(HY)return uO;HY=1;var t=$t(),e=Ze(),r=rt(),n=Gi(),i=Zoe().trim,s=rD(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,c=l&&l.iterator,d=1/a(s+"-0")!==-1/0||c&&!e(function(){a(Object(c))});return uO=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,uO}var WY;function _De(){if(WY)return UY;WY=1;var t=Oe(),e=SDe();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),UY}var dO,KY;function EDe(){if(KY)return dO;KY=1,_De();var t=gt();return dO=t.parseFloat,dO}var hO,GY;function CDe(){if(GY)return hO;GY=1;var t=EDe();return hO=t,hO}var fO,YY;function NDe(){return YY||(YY=1,fO=CDe()),fO}var kDe=NDe(),Wae=$e(kDe),QY={},XY;function TDe(){if(XY)return QY;XY=1;var t=Oe(),e=Ze(),r=XA().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),QY}var pO,JY;function ODe(){if(JY)return pO;JY=1,TDe();var t=gt(),e=t.Object;return pO=function(n){return e.getOwnPropertyNames(n)},pO}var mO,ZY;function jDe(){if(ZY)return mO;ZY=1;var t=ODe();return mO=t,mO}var gO,eQ;function PDe(){return eQ||(eQ=1,gO=jDe()),gO}var IDe=PDe(),RDe=$e(IDe),yO,tQ;function MDe(){if(tQ)return yO;tQ=1,Uoe();var t=gt();return yO=t.Object.getOwnPropertySymbols,yO}var vO,rQ;function ADe(){if(rQ)return vO;rQ=1;var t=MDe();return vO=t,vO}var bO,nQ;function DDe(){return nQ||(nQ=1,bO=ADe()),bO}var $De=DDe(),il=$e($De),xO={exports:{}},iQ={},sQ;function FDe(){if(sQ)return iQ;sQ=1;var t=Oe(),e=Ze(),r=ys(),n=gb().f,i=cr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),iQ}var oQ;function qDe(){if(oQ)return xO.exports;oQ=1,FDe();var t=gt(),e=t.Object,r=xO.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),xO.exports}var wO,aQ;function LDe(){if(aQ)return wO;aQ=1;var t=qDe();return wO=t,wO}var SO,lQ;function BDe(){return lQ||(lQ=1,SO=LDe()),SO}var zDe=BDe(),vl=$e(zDe),cQ={},uQ;function VDe(){if(uQ)return cQ;uQ=1;var t=Oe(),e=cr(),r=pPe(),n=ys(),i=gb(),s=xb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),cQ}var _O,dQ;function UDe(){if(dQ)return _O;dQ=1,VDe();var t=gt();return _O=t.Object.getOwnPropertyDescriptors,_O}var EO,hQ;function HDe(){if(hQ)return EO;hQ=1;var t=UDe();return EO=t,EO}var CO,fQ;function WDe(){return fQ||(fQ=1,CO=HDe()),CO}var KDe=WDe(),sl=$e(KDe),NO={exports:{}},pQ={},mQ;function GDe(){if(mQ)return pQ;mQ=1;var t=Oe(),e=cr(),r=QA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),pQ}var gQ;function YDe(){if(gQ)return NO.exports;gQ=1,GDe();var t=gt(),e=t.Object,r=NO.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),NO.exports}var kO,yQ;function QDe(){if(yQ)return kO;yQ=1;var t=YDe();return kO=t,kO}var TO,vQ;function XDe(){return vQ||(vQ=1,TO=QDe()),TO}var JDe=XDe(),jb=$e(JDe),OO,bQ;function ZDe(){return bQ||(bQ=1,OO=Vae()),OO}var e$e=ZDe(),Pb=$e(e$e);function bD(t,e){const r=["node","edge","label"];let n=!0;const i=la(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(ft(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=la(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function nR(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function r0(t){return typeof t=="string"&&t!==""}function Kae(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var jO,xQ;function t$e(){if(xQ)return jO;xQ=1,Rh();var t=nn();return jO=t("Array","values"),jO}var PO,wQ;function r$e(){if(wQ)return PO;wQ=1;var t=t$e();return PO=t,PO}var IO,SQ;function n$e(){if(SQ)return IO;SQ=1,Mh();var t=Ph(),e=rn(),r=wr(),n=r$e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return IO=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},IO}var RO,_Q;function i$e(){return _Q||(_Q=1,RO=n$e()),RO}var s$e=i$e(),Gae=$e(s$e);class o$e{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=mr({},Gae(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};mr(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const a$e={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class EQ{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=a$e[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class l$e{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let c=0;return o!==""&&(c=this.ctx.measureText(o).width),{width:c,values:l}};this.lines=new o$e(s)}process(e){if(!r0(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.splitStringIntoLines(c,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.lines.append(c,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new EQ(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new EQ(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Ps(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Ps(o).call(o,0,a),r),i[0]=Ps(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=Ps(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=Ps(i).call(i,o)}}}}const lf=["bold","ital","boldital","mono"];class ud{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),r0(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(Ye(lf,r=>{this.fontOptions[r]={}}),ud.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}Ye(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=la(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=la(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=la(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=la(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=la(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=la(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),Ct(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=bD("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};ud.parseFontString(s,i)&&(i=s),Ye(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(ft(lf).call(lf,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(ud.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<lf.length;++n){const i=lf[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);Ye(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let c=0;c<a.blocks.length;c++){const d=a.blocks[c];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=Di(i,o),s=Di(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,c,d){return c==="normal"?d==="mod"?"":l[d]:l[c][d]!==void 0?l[c][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new l$e(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class uu{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Am(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let c$e=class extends uu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Roe(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class xD extends uu{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),KA(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let u$e=class extends xD{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class d$e extends xD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class bl extends uu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),kje(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const c=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,c,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function CQ(t,e){var r=Xt(t);if(il){var n=il(t);e&&(n=Hn(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function h$e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?wt(r=CQ(Object(i),!0)).call(r,function(s){go(t,s,i[s])}):sl?jb(t,sl(i)):wt(n=CQ(Object(i))).call(n,function(s){Pb(t,s,vl(i,s))})}return t}class f$e extends bl{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:h$e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class p$e extends uu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Moe(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let m$e=class extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class g$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class NQ extends uu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),KI(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class y$e extends uu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let v$e=class extends xD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const c=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:c)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=Di(f,o.opacity),p=Di(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Am(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class b$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class x$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class w$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class S$e extends uu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let _$e=class extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class E$e extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function kQ(t,e){var r=Xt(t);if(il){var n=il(t);e&&(n=Hn(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function TQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?wt(r=kQ(Object(i),!0)).call(r,function(s){go(t,s,i[s])}):sl?jb(t,sl(i)):wt(n=kQ(Object(i))).call(n,function(s){Pb(t,s,vl(i,s))})}return t}class At{constructor(e,r,n,i,s,o){this.options=Qa(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new ud(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;ft(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=ft(r=this.edges).call(r,e);if(n!=-1){var i;Eo(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");At.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=is(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=is(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=Wae(e.value)),At.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=bD("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&At.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(At.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Hn(i=RDe(r)).call(i,c=>r[c]!=null);l.push("font"),e0(l,e,a),e.color=JI(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(e0(["color","fixed","shadow"],e,r,n),At.checkMass(r),e.opacity!==void 0&&(At.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(At.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!At.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Pi(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=JI(r.color);kae(e.color,a)}else n===!0&&r.color===null&&(e.color=Qa(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Qa(i.font)),At.updateGroupOptions(e,r,s),r.scaling!==void 0&&Pi(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=Di(e.borderColor,r),e.color=Di(e.color,r),e.shadowColor=Di(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),At.updateGroupOptions(this.options,TQ(TQ({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new c$e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new u$e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new d$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new f$e(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new p$e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new m$e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new g$e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new NQ(this.options,this.body,this.labelModule);break;case"icon":this.shape=new y$e(this.options,this.body,this.labelModule);break;case"image":this.shape=new v$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new b$e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new x$e(this.options,this.body,this.labelModule);break;case"star":this.shape=new w$e(this.options,this.body,this.labelModule);break;case"text":this.shape=new S$e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new _$e(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new E$e(this.options,this.body,this.labelModule);break;default:this.shape=new NQ(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&nR(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),nR(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",Pae),e.mass=1}}}class C$e{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=se(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,c){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(c-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Qa(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",se(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",se(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{Ye(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(At.parseOptions(this.options,e),e.opacity!==void 0&&(rR(e.opacity)||!Kl(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of Xt(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(Coe("id",e))this.body.data.nodes=e;else if(tr(e))this.body.data.nodes=new Qd,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Qd;else throw new TypeError("Array or DataSet expected");if(n&&Ye(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;Ye(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const c=r[o];l!==void 0?l.setOptions(c)&&(s=!0):(s=!0,l=this.create(c),i[a]=l)}!s&&n!==void 0&&(s=MAe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:At;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ye(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(tr(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),Co(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var OQ={},jQ;function N$e(){if(jQ)return OQ;jQ=1;var t=Oe(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,c=0,d=arguments.length,h=0,f,p;c<d;)f=r(arguments[c++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),OQ}var MO,PQ;function k$e(){if(PQ)return MO;PQ=1,N$e();var t=gt();return MO=t.Math.hypot,MO}var AO,IQ;function T$e(){if(IQ)return AO;IQ=1;var t=k$e();return AO=t,AO}var DO,RQ;function O$e(){return RQ||(RQ=1,DO=T$e()),DO}var j$e=O$e(),P$e=$e(j$e);class or{static transform(e,r){tr(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],c=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*c,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let I$e=class extends or{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class R$e extends or{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return or.transform(n,r),or.drawPath(e,n),!0}}class M$e{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return or.transform(n,r),or.drawPath(e,n),!0}}class A$e{static draw(e,r){const n={x:-.4,y:0};or.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class D$e{static draw(e,r){const n={x:-.3,y:0};or.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class $$e{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return or.transform(n,r),or.drawPath(e,n),!0}}class F$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return or.transform(n,r),or.drawPath(e,n),!0}}class q$e{static draw(e,r){const n={x:-.4,y:0};return or.transform(n,r),KA(e,n.x,n.y,r.length*.4),!0}}class L$e{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return or.transform(n,r),or.drawPath(e,n),!0}}class B$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return or.transform(n,r),or.drawPath(e,n),!0}}class z$e{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return or.transform(n,r),or.drawPath(e,n),!0}}class V$e{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return or.transform(n,r),or.drawPath(e,n),!0}}class Yae{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return I$e.draw(e,r);case"circle":return q$e.draw(e,r);case"box":return B$e.draw(e,r);case"crow":return M$e.draw(e,r);case"curve":return A$e.draw(e,r);case"diamond":return z$e.draw(e,r);case"inv_curve":return D$e.draw(e,r);case"triangle":return $$e.draw(e,r);case"inv_triangle":return F$e.draw(e,r);case"bar":return L$e.draw(e,r);case"vee":return V$e.draw(e,r);case"arrow":default:return R$e.draw(e,r)}}}function MQ(t,e){var r=Xt(t);if(il){var n=il(t);e&&(n=Hn(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function AQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?wt(r=MQ(Object(i),!0)).call(r,function(s){go(t,s,i[s])}):sl?jb(t,sl(i)):wt(n=MQ(Object(i))).call(n,function(s){Pb(t,s,vl(i,s))})}return t}class Qae{constructor(e,r,n){go(this,"color",{}),go(this,"colorDirty",!0),go(this,"hoverWidth",1.5),go(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=tr(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)Aoe(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Ps(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=Kae(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,c=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const v=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,v)+m,b=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-b;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<c);return AQ(AQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=Di(this.from.options.color.border,r.opacity),s=Di(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?Di(this.to.options.color.border,r.opacity):Di(this.from.options.color.border,r.opacity)}else return Di(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,c=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,c]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-c)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,c=a*a+l*l;let d=((s-e)*a+(o-r)*l)/c;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,c,d,h,f,p;const m=o.width;r==="from"?(c=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(c=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(c=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(c!=d){const w=P$e(c.x-d.x,c.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(c,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(c.y-d.y,c.x-d.x),l=this._findBorderPosition(c,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),C=this.getPoint(.5-S,n);a=Math.atan2(_.y-C.y,_.x-C.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,C=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:C,direction:-1});a=E.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=E}else if(r==="to"){const _=this.options.selfReference.angle,C=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:C,direction:1});a=E.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=E}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const v=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:v,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,Yae.draw(e,s)&&(this.enableShadow(e,r),Am(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=tr(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function DQ(t,e){var r=Xt(t);if(il){var n=il(t);e&&(n=Hn(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function $Q(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?wt(r=DQ(Object(i),!0)).call(r,function(s){go(t,s,i[s])}):sl?jb(t,sl(i)):wt(n=DQ(Object(i))).call(n,function(s){Pb(t,s,vl(i,s))})}return t}class wD extends Qae{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,c=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(c=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(c.y-d.y,c.x-d.x),g=c.distanceToBorder(r,m)+f,v=Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)),y=g-v;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return $Q($Q({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,c,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(c=this._getDistanceToLine(m,g,f,p,s,o),l=c<l?c:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class FQ extends wD{constructor(e,r,n){super(e,r,n),go(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class qQ extends wD{constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class U$e extends wD{constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let c=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,v=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(d,h,g,v,s,o);c=y<c?y:c}d=g,h=v}return c}}class LQ extends U$e{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class BQ extends Qae{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),c=e.distanceToBorder(r,s),d=(l-c)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class Xa{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Qa(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new ud(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;Xa.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=Wae(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=bD("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if($h(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(Kl(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(Kl(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),r0(r.label)?e.label=r.label:r0(e.label)||(e.label=void 0),Pi(e,r,"smooth",i),Pi(e,r,"shadow",i),Pi(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=pc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Pi(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=pc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=ft(a).call(a,"to")!=-1,e.arrows.middle.enabled=ft(a).call(a,"middle")!=-1,e.arrows.from.enabled=ft(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Pi(e.arrows,r.arrows,"to",i.arrows),Pi(e.arrows,r.arrows,"middle",i.arrows),Pi(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Mm(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=pc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=ld(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)Ct(l,i.color,!1,n);else for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&delete l[c];if(ld(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let c=!1;a.color!==void 0&&(l.color=a.color,c=!0),a.highlight!==void 0&&(l.highlight=a.highlight,c=!0),a.hover!==void 0&&(l.hover=a.hover,c=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),c===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Qa(i.color));n===!0&&r.font===null&&(e.font=Qa(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof FQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof LQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof qQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof BQ&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new FQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new LQ(this.options,this.body,this.labelModule):this.edgeType=new qQ(this.options,this.body,this.labelModule):this.edgeType=new BQ(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=Kae(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();nR(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class H$e{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=se(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const c=1/(o-s);return Math.max(0,(l-s)*c)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Ct(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],c=e.body.data.edges.get(a);if(c!=null){const d=c.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",se(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",se(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{Ye(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){Xa.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(Coe("id",e))this.body.data.edges=e;else if(tr(e))this.body.data.edges=new Qd,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Qd;else throw new TypeError("Array or DataSet expected");if(n&&Ye(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){Ye(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;Ye(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){Ye(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new Xa(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];Ye(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];wt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class Xae{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=kb("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let v=1;v<i;v++){const y=e[r[v]],b=y.x,w=y.y;y.options.mass>0&&(b<s&&(s=b),b>a&&(a=b),w<o&&(o=w),w>l&&(l=w))}const c=Math.abs(a-s)-Math.abs(l-o);c>0?(o-=.5*c,l+=.5*c):(s+=.5*c,a-=.5*c);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let v=0;v<i;v++)n=e[r[v]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class W$e{constructor(e,r,n){this._rng=kb("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=c[d[g]];for(let v=g+1;v<d.length;v++)l=c[d[v]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class K$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const c=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<c?m=-Math.pow(p*f,2)+Math.pow(p*c,2):m=0,f!==0&&(m=m/f);const g=d*m,v=h*m;n[o.id].x-=g,n[o.id].y-=v,n[l.id].x+=g,n[l.id].y+=v}}}}}class $O{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,c=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=c),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=c)}}class G$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=c[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let v=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];v+=p[S].x,y+=p[S].y}const b=v/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=b,p[S].y-=w}}}class my{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const c=o[l];i=s[c],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class Y$e extends Xae{constructor(e,r,n){super(e,r,n),this._rng=kb("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,c=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=c}}class Q$e extends my{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class X$e{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},mr(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,e0(["stabilization"],this.options,e),Pi(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||rR(r.x))&&(r.x=0),(typeof r.y!="number"||rR(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new Y$e(this.body,this.physicsBody,e),this.edgesSolver=new $O(this.body,this.physicsBody,e),this.gravitySolver=new Q$e(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new W$e(this.body,this.physicsBody,e),this.edgesSolver=new $O(this.body,this.physicsBody,e),this.gravitySolver=new my(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new K$e(this.body,this.physicsBody,e),this.edgesSolver=new G$e(this.body,this.physicsBody,e),this.gravitySolver=new my(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new Xae(this.body,this.physicsBody,e),this.edgesSolver=new $O(this.body,this.physicsBody,e),this.gravitySolver=new my(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=se(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=Qv();this.physicsTick(),(Qv()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&Co(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=Xt(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,Co(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;Co(se(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),c=Math.min(Math.max(5,l),15),d=3*c,h=ZI((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=c,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,Yae.draw(e,{type:"arrow",point:f,angle:p,length:d}),Am(e).call(e)}}}const Gr=[];for(let t=0;t<256;++t)Gr.push((t+256).toString(16).slice(1));function J$e(t,e=0){return(Gr[t[e+0]]+Gr[t[e+1]]+Gr[t[e+2]]+Gr[t[e+3]]+"-"+Gr[t[e+4]]+Gr[t[e+5]]+"-"+Gr[t[e+6]]+Gr[t[e+7]]+"-"+Gr[t[e+8]]+Gr[t[e+9]]+"-"+Gr[t[e+10]]+Gr[t[e+11]]+Gr[t[e+12]]+Gr[t[e+13]]+Gr[t[e+14]]+Gr[t[e+15]]).toLowerCase()}let FO;const Z$e=new Uint8Array(16);function eFe(){if(!FO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");FO=crypto.getRandomValues.bind(crypto)}return FO(Z$e)}const tFe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var zQ={randomUUID:tFe};function rFe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??eFe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,J$e(n)}function Uf(t,e,r){return zQ.randomUUID&&!t?zQ.randomUUID():rFe(t)}class Cn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(Ct(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):Ct(n,e.options,!0),n}}class nFe extends At{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],Ye(r.edges,n=>{delete this.containedEdges[n.id]}),Ye(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},Ye(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},Ye(r.edges,n=>{Ye(this.edges,i=>{var s,o;const a=ft(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(Ye(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),Eo(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class iFe{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},mr(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};Ye(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,Ye(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let c=0;c<this.body.nodeIndices.length;c++){const d={},h={},f=this.body.nodeIndices[c],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(v){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=Cn.cloneOptions(v);return r.joinCondition(y)};let g=!0;for(let v=0;v<a.length;v++){o=a[v];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(Xt(d).length>0&&Xt(h).length>0&&g===!0){const y=function(){for(let b=0;b<i.length;++b)for(const w in d)if(i[b].nodes[w]!==void 0)return i[b]}();if(y!==void 0){for(const b in d)y.nodes[b]===void 0&&(y.nodes[b]=d[b]);for(const b in h)y.edges[b]===void 0&&(y.edges[b]=h[b])}else i.push({nodes:d,edges:h})}}}}for(let c=0;c<i.length;c++)this._cluster(i[c].nodes,i[c].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,c=Cn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=Cn.cloneOptions(this.body.nodes[p]);r.joinCondition(c,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=Xd(n=Xt(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];ft(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,c,d;const h=Xt(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let v=0;v<a.edges.length;v++)s=a.edges[v],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,c=s.fromId,d=c):(l=s.toId,c=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:c,toId:l}))}const p=[],m=function(g){for(let v=0;v<p.length;v++){const y=p[v],b=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(b||w)return y}return null};for(let g=0;g<f.length;g++){const v=f[g],y=v.edge;let b=m(v);b===null?(b=this._createClusteredEdge(v.fromId,v.toId,y,i),p.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(Xt(e).length==0||Xt(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=Ct({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=Cn.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=Cn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+Uf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const c=this.body.functions.createNode(o,nFe);c.containedNodes=e,c.containedEdges=r,c.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=c,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=Xt(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=ft(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else Ye(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const c=[];for(let d=0;d<i.edges.length;d++)c.push(i.edges[d]);for(let d=0;d<c.length;d++){const h=c[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],v=this.body.edges[g];if(v!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[v.id]=v,delete l[v.id];let b=v.fromId,w=v.toId;v.toId==f?w=p.clusterId:b=p.clusterId,this._createClusteredEdge(b,w,v,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(v)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),fc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return fc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const c=l.clusteringEdgeReplacingIds;if(c===void 0)i.push(a);else for(let d=0;d<c.length;++d){const h=c[d];ft(r).call(r,c)!==-1||ft(n).call(n,c)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const c=this.body.nodes[this.body.nodeIndices[l]];c.edges.length>i&&(i=c.edges.length),e+=c.edges.length,r+=Math.pow(c.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=Cn.cloneOptions(n,"edge");Ct(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+Uf(),s!==void 0&&Ct(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof Xa){const s=r,o={};o[s.id]=s,r=o}if(e instanceof At){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return Ye(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{Ye(this.body.nodes,c=>{c.isCluster===!0&&l(c)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let c=0;c<r.length;c++)delete l.containedNodes[r[c]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];Ye(this.clusteredEdges,l=>{const c=this.body.edges[l];(c===void 0||!c.endPointsValid())&&(n[l]=l)}),i(function(l){Ye(l.containedEdges,(c,d)=>{!c.endPointsValid()&&!n[d]&&(n[d]=d)})}),Ye(this.body.edges,(l,c)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;Ye(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[c]=c)}),i(l=>{Ye(n,c=>{delete l.containedEdges[c],Ye(l.edges,(d,h)=>{if(d.id===c){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),Ye(n,l=>{delete this.clusteredEdges[l]}),Ye(n,l=>{delete this.body.edges[l]});const s=Xt(this.body.edges);Ye(s,l=>{const c=this.body.edges[l],d=this._isClusteredNode(c.fromId)||this._isClusteredNode(c.toId);if(d!==this._isClusteredEdge(c.id))if(d){const h=this._getClusterNodeForNode(c.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[c.fromId],c,h);const f=this._getClusterNodeForNode(c.toId);f!==void 0&&this._clusterEdges(this.body.nodes[c.toId],c,f)}else delete this._clusterEdges[l],this._restoreEdge(c)});let o=!1,a=!0;for(;a;){const l=[];i(function(c){const d=Xt(c.containedNodes).length,h=c.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(c.id)});for(let c=0;c<l.length;++c)this.openCluster(l[c],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class sFe{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},mr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=Co(()=>{var r;this.zooming=!1,se(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",se(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&$h(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(se(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,c=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:c.y,left:c.x,bottom:d.y,right:d.x},f=[];for(let v=0;v<i.length;v++)if(s=n[i[v]],s.hover)a.push(i[v]);else if(s.isSelected())o.push(i[v]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}return{drawExternalLabels:()=>{for(const v of f)v()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var qO,VQ;function oFe(){if(VQ)return qO;VQ=1,rae();var t=gt();return qO=t.setInterval,qO}var LO,UQ;function aFe(){return UQ||(UQ=1,LO=oFe()),LO}var lFe=aFe(),cFe=$e(lFe);function n0(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function Jae(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class uFe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},mr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",se(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&$h(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=cFe(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=se(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;wt(e=fc(r=Eo(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(ft(e).call(e,"%")!==-1||ft(e).call(e,"px")!==-1)return e;if(ft(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new cd(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:cd.DIRECTION_ALL}),n0(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new cd(this.frame),Jae(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function dFe(t,e){const r=mr({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!tr(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class hFe{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",se(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",se(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=dFe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=Cn.getRange(this.body.nodes,e.nodes);else if(r===!0){let c=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(c+=1);if(c>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=Cn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=Cn.getRange(this.body.nodes,e.nodes);const c=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/c,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:Cn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!Kl(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!Kl(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!Kl(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!Kl(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=se(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=se(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=xMe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=se(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function HQ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){c(d,"keydown")},l=function(d){c(d,"keyup")},c=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class fFe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new cd(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;n0(a,se(n=this._fit).call(n,this))}else{var i;n0(a,se(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new cd(this.canvas.frame);Jae(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=se(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=HQ({container:window,preventDefault:!0}):this.keycharm=HQ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,c,d,h,f,p,m,g,v,y,b,w,x,S,_,C,E;se(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),se(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),se(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),se(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),se(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(c=this.keycharm).call(c,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),se(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),se(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),se(v=this.keycharm).call(v,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),se(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(b=this.keycharm).call(b,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(C=this.keycharm).call(C,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(E=this.keycharm).call(E,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class pFe{constructor(e,r,n){var i,s,o,a,l,c,d,h,f,p,m,g,v;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new fFe(e,r),this.body.eventListeners.onTap=se(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=se(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=se(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=se(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=se(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=se(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=se(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=se(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=se(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=se(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=se(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=se(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=se(v=this.getPointer).call(v,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},mr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(e0(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Pi(this.options,e,"keyboard"),e.tooltip&&(mr(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=JI(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-gMe(this.canvas.frame.canvas),y:e.y-yMe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];ft(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=mr({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;wt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Hn(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});wt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(wt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const c=this.canvas.canvasToDOM(i);this.drag.pointer.x=c.x,this.drag.pointer.y=c.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=Co(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,c=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=c[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,c=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=c[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new TMe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var WQ={},KQ={},GQ;function mFe(){if(GQ)return KQ;GQ=1;var t=mD(),e=Bae();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),KQ}var YQ;function gFe(){return YQ||(YQ=1,mFe()),WQ}var QQ={},BO,XQ;function du(){if(XQ)return BO;XQ=1;var t=Ch(),e=TypeError;return BO=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},BO}var zO,JQ;function hu(){if(JQ)return zO;JQ=1;var t=Si(),e=zae(),r=t("Set"),n=r.prototype;return zO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},zO}var VO,ZQ;function fu(){if(ZQ)return VO;ZQ=1;var t=si();return VO=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},VO}var UO,eX;function Bm(){if(eX)return UO;eX=1;var t=fu();return UO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},UO}var HO,tX;function SD(){if(tX)return HO;tX=1;var t=hu(),e=Bm(),r=t.Set,n=t.add;return HO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},HO}var WO,rX;function zm(){return rX||(rX=1,WO=function(t){return t.size}),WO}var KO,nX;function yFe(){return nX||(nX=1,KO=function(t){return{iterator:t,next:t.next,done:!1}}),KO}var GO,iX;function pu(){if(iX)return GO;iX=1;var t=Ho(),e=Hs(),r=si(),n=Oh(),i=yFe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},GO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},GO}var YO,sX;function vFe(){if(sX)return YO;sX=1;var t=du(),e=hu(),r=SD(),n=zm(),i=pu(),s=Bm(),o=fu(),a=e.has,l=e.remove;return YO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},YO}var QO,oX;function mu(){return oX||(oX=1,QO=function(){return!1}),QO}var aX;function bFe(){if(aX)return QQ;aX=1;var t=Oe(),e=vFe(),r=Ze(),n=mu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),QQ}var lX={},XO,cX;function xFe(){if(cX)return XO;cX=1;var t=du(),e=hu(),r=zm(),n=pu(),i=Bm(),s=fu(),o=e.Set,a=e.add,l=e.has;return XO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},XO}var uX;function wFe(){if(uX)return lX;uX=1;var t=Oe(),e=Ze(),r=xFe(),n=mu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),lX}var dX={},JO,hX;function SFe(){if(hX)return JO;hX=1;var t=du(),e=hu().has,r=zm(),n=pu(),i=Bm(),s=fu(),o=fD();return JO=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},JO}var fX;function _Fe(){if(fX)return dX;fX=1;var t=Oe(),e=SFe(),r=mu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),dX}var pX={},ZO,mX;function EFe(){if(mX)return ZO;mX=1;var t=du(),e=zm(),r=Bm(),n=pu();return ZO=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},ZO}var gX;function CFe(){if(gX)return pX;gX=1;var t=Oe(),e=EFe(),r=mu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),pX}var yX={},ej,vX;function NFe(){if(vX)return ej;vX=1;var t=du(),e=hu().has,r=zm(),n=pu(),i=fu(),s=fD();return ej=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},ej}var bX;function kFe(){if(bX)return yX;bX=1;var t=Oe(),e=NFe(),r=mu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),yX}var xX={},tj,wX;function TFe(){if(wX)return tj;wX=1;var t=du(),e=hu(),r=SD(),n=pu(),i=fu(),s=e.add,o=e.has,a=e.remove;return tj=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},tj}var rj,SX;function Zae(){return SX||(SX=1,rj=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),rj}var _X;function OFe(){if(_X)return xX;_X=1;var t=Oe(),e=TFe(),r=Zae(),n=mu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),xX}var EX={},nj,CX;function jFe(){if(CX)return nj;CX=1;var t=du(),e=hu().add,r=SD(),n=pu(),i=fu();return nj=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},nj}var NX;function PFe(){if(NX)return EX;NX=1;var t=Oe(),e=jFe(),r=Zae(),n=mu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),EX}var ij,kX;function IFe(){if(kX)return ij;kX=1,Rh(),gFe(),bFe(),wFe(),_Fe(),CFe(),kFe(),OFe(),PFe(),yD();var t=gt();return ij=t.Set,ij}var sj,TX;function RFe(){if(TX)return sj;TX=1;var t=IFe();return Mh(),sj=t,sj}var oj,OX;function MFe(){return OX||(OX=1,oj=RFe()),oj}var AFe=MFe(),fa=$e(AFe),jX={},PX={},aj,IX;function DFe(){if(IX)return aj;IX=1;var t=rt(),e=gD(),r=Tb().getWeakData,n=pD(),i=Hs(),s=Sh(),o=Hr(),a=Ob(),l=yl(),c=rn(),d=lu(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),v=0,y=function(x){return x.frozen||(x.frozen=new b)},b=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return b.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},aj={getConstructor:function(x,S,_,C){var E=x(function(I,O){n(I,N),h(I,{type:S,id:v++,frozen:null}),s(O)||a(O,I[C],{that:I,AS_ENTRIES:_})}),N=E.prototype,T=f(S),j=function(I,O,D){var z=T(I),R=r(i(O),!0);return R===!0?y(z).set(O,D):R[z.id]=D,I};return e(N,{delete:function(I){var O=T(this);if(!o(I))return!1;var D=r(I);return D===!0?y(O).delete(I):D&&c(D,O.id)&&delete D[O.id]},has:function(O){var D=T(this);if(!o(O))return!1;var z=r(O);return z===!0?y(D).has(O):z&&c(z,D.id)}}),e(N,_?{get:function(O){var D=T(this);if(o(O)){var z=r(O);if(z===!0)return y(D).get(O);if(z)return z[D.id]}},set:function(O,D){return j(this,O,D)}}:{add:function(O){return j(this,O,!0)}}),E}},aj}var RX;function $Fe(){if(RX)return PX;RX=1;var t=qae(),e=$t(),r=rt(),n=gD(),i=Tb(),s=mD(),o=DFe(),a=Hr(),l=lu().enforce,c=Ze(),d=Boe(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,v=h.freeze,y=h.seal,b=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(I){return function(){return I(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,C=r(_.set),E=function(){return t&&c(function(){var I=v([]);return C(new S,I,1),!m(I)})};if(d)if(b){w=o.getConstructor(x,"WeakMap",!0),i.enable();var N=r(_.delete),T=r(_.has),j=r(_.get);n(_,{delete:function(I){if(a(I)&&!p(I)){var O=l(this);return O.frozen||(O.frozen=new w),N(this,I)||O.frozen.delete(I)}return N(this,I)},has:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),T(this,O)||D.frozen.has(O)}return T(this,O)},get:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),T(this,O)?j(this,O):D.frozen.get(O)}return j(this,O)},set:function(O,D){if(a(O)&&!p(O)){var z=l(this);z.frozen||(z.frozen=new w),T(this,O)?C(this,O,D):z.frozen.set(O,D)}else C(this,O,D);return this}})}else E()&&n(_,{set:function(O,D){var z;return f(O)&&(m(O)?z=v:g(O)&&(z=y)),C(this,O,D),z&&z(O),this}});return PX}var MX;function FFe(){return MX||(MX=1,$Fe()),jX}var lj,AX;function qFe(){if(AX)return lj;AX=1,Rh(),FFe();var t=gt();return lj=t.WeakMap,lj}var cj,DX;function LFe(){if(DX)return cj;DX=1;var t=qFe();return Mh(),cj=t,cj}var uj,$X;function BFe(){return $X||($X=1,uj=LFe()),uj}var zFe=BFe(),Vm=$e(zFe);function Hf(t,e,r){VFe(t,e),e.set(t,r)}function VFe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function iR(t,e,r){return t.set(ele(t,e),r),r}function Et(t,e){return t.get(ele(t,e))}function ele(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function FX(t,e){const r=new fa;for(const n of e)t.has(n)||r.add(n);return r}var Cu=new Vm,Xi=new Vm;class qX{constructor(){Hf(this,Cu,new fa),Hf(this,Xi,new fa)}get size(){return Et(Xi,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Et(Xi,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Et(Xi,this).delete(i)}clear(){Et(Xi,this).clear()}getSelection(){return[...Et(Xi,this)]}getChanges(){return{added:[...FX(Et(Cu,this),Et(Xi,this))],deleted:[...FX(Et(Xi,this),Et(Cu,this))],previous:[...new fa(Et(Cu,this))],current:[...new fa(Et(Xi,this))]}}commit(){const e=this.getChanges();iR(Cu,this,Et(Xi,this)),iR(Xi,this,new fa(Et(Cu,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var Tl=new Vm,Ol=new Vm,dj=new Vm;class UFe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Hf(this,Tl,new qX),Hf(this,Ol,new qX),Hf(this,dj,void 0),iR(dj,this,e)}get sizeNodes(){return Et(Tl,this).size}get sizeEdges(){return Et(Ol,this).size}getNodes(){return Et(Tl,this).getSelection()}getEdges(){return Et(Ol,this).getSelection()}addNodes(){Et(Tl,this).add(...arguments)}addEdges(){Et(Ol,this).add(...arguments)}deleteNodes(e){Et(Tl,this).delete(e)}deleteEdges(e){Et(Ol,this).delete(e)}clear(){Et(Tl,this).clear(),Et(Ol,this).clear()}commit(){const e={nodes:Et(Tl,this).commit(),edges:Et(Ol,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Et(dj,this).call(this,e,...n),e}}class HFe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new UFe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},mr(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&$h(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof At?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],c=o[l];if(c.connected){const d=c.from.x,h=c.from.y,f=c.to.x,p=c.to.y,m=c.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof At?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof At?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof At?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof At?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof At&&n.id!=s||n instanceof Xa)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof Xa&&n.id!=s||n instanceof At&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=Xt(this.hoverObj.edges).length,o=Xt(this.hoverObj.nodes).length,a=n instanceof Xa&&s===0&&o===0,l=n instanceof At&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof At&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return Xd(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return Xd(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var LX={},hj,BX;function WFe(){if(BX)return hj;BX=1;var t=jh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return hj=r,hj}var fj,zX;function KFe(){if(zX)return fj;zX=1;var t=_h(),e=t.match(/firefox\/(\d+)/i);return fj=!!e&&+e[1],fj}var pj,VX;function GFe(){if(VX)return pj;VX=1;var t=_h();return pj=/MSIE|Trident/.test(t),pj}var mj,UX;function YFe(){if(UX)return mj;UX=1;var t=_h(),e=t.match(/AppleWebKit\/(\d+)\./);return mj=!!e&&+e[1],mj}var HX;function QFe(){if(HX)return LX;HX=1;var t=Oe(),e=rt(),r=Ho(),n=_i(),i=Wo(),s=Joe(),o=Gi(),a=Ze(),l=WFe(),c=Ah(),d=KFe(),h=GFe(),f=km(),p=YFe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var C="",E,N,T,j;for(E=65;E<76;E++){switch(N=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:T=3;break;case 68:case 71:T=4;break;default:T=2}for(j=0;j<47;j++)m.push({k:N+j,v:T})}for(m.sort(function(I,O){return O.v-I.v}),j=0;j<m.length;j++)N=m[j].k.charAt(0),C.charAt(C.length-1)!==N&&(C+=N);return C!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(C){return function(E,N){return N===void 0?-1:E===void 0?1:C!==void 0?+C(E,N)||0:o(E)>o(N)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var N=n(this);if(x)return E===void 0?g(N):g(N,E);var T=[],j=i(N),I,O;for(O=0;O<j;O++)O in N&&v(T,N[O]);for(l(T,_(E)),I=i(T),O=0;O<I;)N[O]=T[O++];for(;O<j;)s(N,O++);return N}}),LX}var gj,WX;function XFe(){if(WX)return gj;WX=1,QFe();var t=nn();return gj=t("Array","sort"),gj}var yj,KX;function JFe(){if(KX)return yj;KX=1;var t=wr(),e=XFe(),r=Array.prototype;return yj=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},yj}var vj,GX;function ZFe(){if(GX)return vj;GX=1;var t=JFe();return vj=t,vj}var bj,YX;function e4e(){return YX||(YX=1,bj=ZFe()),bj}var t4e=e4e(),dd=$e(t4e),QX={},xj,XX;function r4e(){if(XX)return xj;XX=1;var t=Ho(),e=_i(),r=pb(),n=Wo(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return xj={left:o(!1),right:o(!0)},xj}var wj,JX;function n4e(){if(JX)return wj;JX=1;var t=eae();return wj=t==="NODE",wj}var ZX;function i4e(){if(ZX)return QX;ZX=1;var t=Oe(),e=r4e().left,r=Ah(),n=km(),i=n4e(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),QX}var Sj,eJ;function s4e(){if(eJ)return Sj;eJ=1,i4e();var t=nn();return Sj=t("Array","reduce"),Sj}var _j,tJ;function o4e(){if(tJ)return _j;tJ=1;var t=wr(),e=s4e(),r=Array.prototype;return _j=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},_j}var Ej,rJ;function a4e(){if(rJ)return Ej;rJ=1;var t=o4e();return Ej=t,Ej}var Cj,nJ;function l4e(){return nJ||(nJ=1,Cj=a4e()),Cj}var c4e=l4e(),tle=$e(c4e);class rle{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class u4e extends rle{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){dd(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class d4e extends rle{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){dd(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var iJ={},sJ;function h4e(){if(sJ)return iJ;sJ=1;var t=Oe(),e=yl().every,r=Ah(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),iJ}var Nj,oJ;function f4e(){if(oJ)return Nj;oJ=1,h4e();var t=nn();return Nj=t("Array","every"),Nj}var kj,aJ;function p4e(){if(aJ)return kj;aJ=1;var t=wr(),e=f4e(),r=Array.prototype;return kj=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},kj}var Tj,lJ;function m4e(){if(lJ)return Tj;lJ=1;var t=p4e();return Tj=t,Tj}var Oj,cJ;function g4e(){return cJ||(cJ=1,Oj=m4e()),Oj}var y4e=g4e(),nle=$e(y4e);function v4e(t,e){const r=new fa;return wt(t).call(t,n=>{var i;wt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),wt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function b4e(t){return ile(e=>{var r,n;return nle(r=Hn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function x4e(t){return ile(e=>{var r,n;return nle(r=Hn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function ile(t,e,r,n){var i;const s=pc(null),o=tle(i=[...Gae(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var c,d;if(!n.has(h))continue;const v=s[g.id]+l;if(wt(c=Hn(d=g.edges).call(d,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(c,y=>{const b=y[a],w=s[b];(w==null||e(v,w))&&(s[b]=v,p.push(y[r]))}),m>o)return v4e(n,s);++m}}return s}class w4e{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new vD;let n=0;const i=dd(e=[...new fa(DIe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return Xt(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class S4e{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+Qv()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},mr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if($h(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Pi(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),Ct(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=kb(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const c=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(c==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const c=this.body.nodes[e[l]];c.predefinedPosition===!1&&(c.x+=(.5-this._rng())*a,c.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=Cn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=Cn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new w4e;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let b=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;b+=x+this.options.hierarchical.treeSpacing,s(w+1,b)}},s=(y,b)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,b)},o=()=>{const y=[];for(let b=0;b<this.hierarchical.numTrees();b++)y.push(this.direction.getTreeSize(b));return y},a=(y,b)=>{if(!b[y.id]&&(b[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],b)}},l=function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const C in y)if(Object.prototype.hasOwnProperty.call(y,C)){const E=e.body.nodes[C],N=e.hierarchical.levels[E.id],T=e.direction.getPosition(E),[j,I]=e._getSpaceAroundNode(E,y);w=Math.min(j,w),x=Math.min(I,x),N<=b&&(S=Math.min(T,S),_=Math.max(T,_))}return[S,_,w,x]},c=(y,b)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(b.id);return Math.min(w,x)},d=(y,b,w)=>{const x=this.hierarchical;for(let S=0;S<b.length;S++){const _=b[S],C=x.distributionOrdering[_];if(C.length>1)for(let E=0;E<C.length-1;E++){const N=C[E],T=C[E+1];x.hasSameParent(N,T)&&x.inSameSubNetwork(N,T)&&y(N,T,w)}}},h=function(y,b){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(b),_=Math.abs(S-x),C=e.options.hierarchical.nodeSpacing;if(_>C){const E={},N={};a(y,E),a(b,N);const T=c(y,b),j=l(E,T),I=l(N,T),O=j[1],D=I[0],z=I[2];if(Math.abs(O-D)>C){let B=O-D+C;B<-z+C&&(B=-z+C),B<0&&(e._shiftBlock(b.id,B),r=!0,w===!0&&e._centerParent(b))}}},f=(y,b)=>{const w=b.id,x=b.edges,S=this.hierarchical.levels[b.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,C={},E=[];for(let z=0;z<x.length;z++){const R=x[z];if(R.toId!=R.fromId){const B=R.toId==w?R.from:R.to;C[x[z].id]=B,this.hierarchical.levels[B.id]<S&&E.push(R)}}const N=(z,R)=>{let B=0;for(let q=0;q<R.length;q++)if(C[R[q].id]!==void 0){const $=this.direction.getPosition(C[R[q].id])-z;B+=$/Math.sqrt($*$+_)}return B},T=(z,R)=>{let B=0;for(let q=0;q<R.length;q++)if(C[R[q].id]!==void 0){const $=this.direction.getPosition(C[R[q].id])-z;B-=_*Math.pow($*$+_,-1.5)}return B},j=(z,R)=>{let B=this.direction.getPosition(b);const q={};for(let $=0;$<z;$++){const G=N(B,R),K=T(B,R),F=40,X=Math.max(-F,Math.min(F,Math.round(G/K)));if(B=B-X,q[B]!==void 0)break;q[B]=$}return B},I=z=>{const R=this.direction.getPosition(b);if(n[b.id]===void 0){const F={};a(b,F),n[b.id]=F}const B=l(n[b.id]),q=B[2],$=B[3],G=z-R;let K=0;G>0?K=Math.min(G,$-this.options.hierarchical.nodeSpacing):G<0&&(K=-Math.min(-G,q-this.options.hierarchical.nodeSpacing)),K!=0&&(this._shiftBlock(b.id,K),r=!0)},O=z=>{const R=this.direction.getPosition(b),[B,q]=this._getSpaceAroundNode(b),$=z-R;let G=R;$>0?G=Math.min(R+(q-this.options.hierarchical.nodeSpacing),z):$<0&&(G=Math.max(R-(B-this.options.hierarchical.nodeSpacing),z)),G!==R&&(this.direction.setPosition(b,G),r=!0)};let D=j(y,E);I(D),D=j(y,x),O(D)},p=y=>{let b=this.hierarchical.getLevels();b=fc(b).call(b);for(let w=0;w<y;w++){r=!1;for(let x=0;x<b.length;x++){const S=b[x],_=this.hierarchical.distributionOrdering[S];for(let C=0;C<_.length;C++)f(1e3,_[C])}if(r!==!0)break}},m=y=>{let b=this.hierarchical.getLevels();b=fc(b).call(b);for(let w=0;w<y&&(r=!1,d(h,b,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},v=()=>{let y=this.hierarchical.getLevels();y=fc(y).call(y);for(let b=0;b<y.length;b++){const w=y[b],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&v(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,c=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);c=Math.min(c,h-o)}}return[l,c]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[c,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=Xt(e[n]);i=this._indexArrayToNodes(i),dd(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let c=l*s;s>0&&(c=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,c,n),this._validatePositionAndContinue(a,n,c),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);dd(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],c=this.hierarchical.levels[l.id];if(c>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,c),this._validatePositionAndContinue(l,c,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return Ye(e.edges,n=>{var i;ft(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;Ye(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return Ye(e,i=>{n.push(Number(i))}),dd(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;Ye(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(Cn.cloneOptions(i,"node"),Cn.cloneOptions(s,"node"),Cn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=tle(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new vD);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=x4e(r):this.hierarchical.levels=b4e(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let c=0;c<l.length;c++){const d=l[c];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new u4e(this):this.direction=new d4e(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class _4e{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},mr(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",se(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",se(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,Ct(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,se(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",se(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,se(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",se(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=Ct({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,se(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",se(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",se(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",se(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",se(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",se(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,se(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",se(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",se(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",se(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",se(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",c=>{const d=o.edgeType.findBorderPositions(c);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=Ct({},this.options.controlNodeStyle);n.id="targetNode"+Uf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},aa(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,se(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(aa(this.editModeDiv),aa(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of Eo(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),aa(this.manipulationDiv),aa(this.editModeDiv),aa(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,se(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Mm(Xt(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new cd(e,{});n0(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=ft(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;Eo(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=ft(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;Eo(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=mr({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=mr({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+Uf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(ft(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(ft(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:Uf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const ae="string",ie="boolean",W="number",bf="array",Ne="object",sle="dom",E4e="any",jj=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],Pj={borderWidth:{number:W},borderWidthSelected:{number:W,undefined:"undefined"},brokenImage:{string:ae,undefined:"undefined"},chosen:{label:{boolean:ie,function:"function"},node:{boolean:ie,function:"function"},__type__:{object:Ne,boolean:ie}},color:{border:{string:ae},background:{string:ae},highlight:{border:{string:ae},background:{string:ae},__type__:{object:Ne,string:ae}},hover:{border:{string:ae},background:{string:ae},__type__:{object:Ne,string:ae}},__type__:{object:Ne,string:ae}},opacity:{number:W,undefined:"undefined"},fixed:{x:{boolean:ie},y:{boolean:ie},__type__:{object:Ne,boolean:ie}},font:{align:{string:ae},color:{string:ae},size:{number:W},face:{string:ae},background:{string:ae},strokeWidth:{number:W},strokeColor:{string:ae},vadjust:{number:W},multi:{boolean:ie,string:ae},bold:{color:{string:ae},size:{number:W},face:{string:ae},mod:{string:ae},vadjust:{number:W},__type__:{object:Ne,string:ae}},boldital:{color:{string:ae},size:{number:W},face:{string:ae},mod:{string:ae},vadjust:{number:W},__type__:{object:Ne,string:ae}},ital:{color:{string:ae},size:{number:W},face:{string:ae},mod:{string:ae},vadjust:{number:W},__type__:{object:Ne,string:ae}},mono:{color:{string:ae},size:{number:W},face:{string:ae},mod:{string:ae},vadjust:{number:W},__type__:{object:Ne,string:ae}},__type__:{object:Ne,string:ae}},group:{string:ae,number:W,undefined:"undefined"},heightConstraint:{minimum:{number:W},valign:{string:ae},__type__:{object:Ne,boolean:ie,number:W}},hidden:{boolean:ie},icon:{face:{string:ae},code:{string:ae},size:{number:W},color:{string:ae},weight:{string:ae,number:W},__type__:{object:Ne}},id:{string:ae,number:W},image:{selected:{string:ae,undefined:"undefined"},unselected:{string:ae,undefined:"undefined"},__type__:{object:Ne,string:ae}},imagePadding:{top:{number:W},right:{number:W},bottom:{number:W},left:{number:W},__type__:{object:Ne,number:W}},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:ie},level:{number:W,undefined:"undefined"},margin:{top:{number:W},right:{number:W},bottom:{number:W},left:{number:W},__type__:{object:Ne,number:W}},mass:{number:W},physics:{boolean:ie},scaling:{min:{number:W},max:{number:W},label:{enabled:{boolean:ie},min:{number:W},max:{number:W},maxVisible:{number:W},drawThreshold:{number:W},__type__:{object:Ne,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:Ne}},shadow:{enabled:{boolean:ie},color:{string:ae},size:{number:W},x:{number:W},y:{number:W},__type__:{object:Ne,boolean:ie}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:ie,array:bf},borderRadius:{number:W},interpolation:{boolean:ie},useImageSize:{boolean:ie},useBorderWithImage:{boolean:ie},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ne}},size:{number:W},title:{string:ae,dom:sle,undefined:"undefined"},value:{number:W,undefined:"undefined"},widthConstraint:{minimum:{number:W},maximum:{number:W},__type__:{object:Ne,boolean:ie,number:W}},x:{number:W},y:{number:W},__type__:{object:Ne}},C4e={configure:{enabled:{boolean:ie},filter:{boolean:ie,string:ae,array:bf,function:"function"},container:{dom:sle},showButton:{boolean:ie},__type__:{object:Ne,boolean:ie,string:ae,array:bf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:ie},scaleFactor:{number:W},type:{string:jj},imageHeight:{number:W},imageWidth:{number:W},src:{string:ae},__type__:{object:Ne,boolean:ie}},middle:{enabled:{boolean:ie},scaleFactor:{number:W},type:{string:jj},imageWidth:{number:W},imageHeight:{number:W},src:{string:ae},__type__:{object:Ne,boolean:ie}},from:{enabled:{boolean:ie},scaleFactor:{number:W},type:{string:jj},imageWidth:{number:W},imageHeight:{number:W},src:{string:ae},__type__:{object:Ne,boolean:ie}},__type__:{string:["from","to","middle"],object:Ne}},endPointOffset:{from:{number:W},to:{number:W},__type__:{object:Ne,number:W}},arrowStrikethrough:{boolean:ie},background:{enabled:{boolean:ie},color:{string:ae},size:{number:W},dashes:{boolean:ie,array:bf},__type__:{object:Ne,boolean:ie}},chosen:{label:{boolean:ie,function:"function"},edge:{boolean:ie,function:"function"},__type__:{object:Ne,boolean:ie}},color:{color:{string:ae},highlight:{string:ae},hover:{string:ae},inherit:{string:["from","to","both"],boolean:ie},opacity:{number:W},__type__:{object:Ne,string:ae}},dashes:{boolean:ie,array:bf},font:{color:{string:ae},size:{number:W},face:{string:ae},background:{string:ae},strokeWidth:{number:W},strokeColor:{string:ae},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:W},multi:{boolean:ie,string:ae},bold:{color:{string:ae},size:{number:W},face:{string:ae},mod:{string:ae},vadjust:{number:W},__type__:{object:Ne,string:ae}},boldital:{color:{string:ae},size:{number:W},face:{string:ae},mod:{string:ae},vadjust:{number:W},__type__:{object:Ne,string:ae}},ital:{color:{string:ae},size:{number:W},face:{string:ae},mod:{string:ae},vadjust:{number:W},__type__:{object:Ne,string:ae}},mono:{color:{string:ae},size:{number:W},face:{string:ae},mod:{string:ae},vadjust:{number:W},__type__:{object:Ne,string:ae}},__type__:{object:Ne,string:ae}},hidden:{boolean:ie},hoverWidth:{function:"function",number:W},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:ie},length:{number:W,undefined:"undefined"},physics:{boolean:ie},scaling:{min:{number:W},max:{number:W},label:{enabled:{boolean:ie},min:{number:W},max:{number:W},maxVisible:{number:W},drawThreshold:{number:W},__type__:{object:Ne,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:Ne}},selectionWidth:{function:"function",number:W},selfReferenceSize:{number:W},selfReference:{size:{number:W},angle:{number:W},renderBehindTheNode:{boolean:ie},__type__:{object:Ne}},shadow:{enabled:{boolean:ie},color:{string:ae},size:{number:W},x:{number:W},y:{number:W},__type__:{object:Ne,boolean:ie}},smooth:{enabled:{boolean:ie},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:W},forceDirection:{string:["horizontal","vertical","none"],boolean:ie},__type__:{object:Ne,boolean:ie}},title:{string:ae,undefined:"undefined"},width:{number:W},widthConstraint:{maximum:{number:W},__type__:{object:Ne,boolean:ie,number:W}},value:{number:W,undefined:"undefined"},__type__:{object:Ne}},groups:{useDefaultGroups:{boolean:ie},__any__:Pj,__type__:{object:Ne}},interaction:{dragNodes:{boolean:ie},dragView:{boolean:ie},hideEdgesOnDrag:{boolean:ie},hideEdgesOnZoom:{boolean:ie},hideNodesOnDrag:{boolean:ie},hover:{boolean:ie},keyboard:{enabled:{boolean:ie},speed:{x:{number:W},y:{number:W},zoom:{number:W},__type__:{object:Ne}},bindToWindow:{boolean:ie},autoFocus:{boolean:ie},__type__:{object:Ne,boolean:ie}},multiselect:{boolean:ie},navigationButtons:{boolean:ie},selectable:{boolean:ie},selectConnectedEdges:{boolean:ie},hoverConnectedEdges:{boolean:ie},tooltipDelay:{number:W},zoomView:{boolean:ie},zoomSpeed:{number:W},__type__:{object:Ne}},layout:{randomSeed:{undefined:"undefined",number:W,string:ae},improvedLayout:{boolean:ie},clusterThreshold:{number:W},hierarchical:{enabled:{boolean:ie},levelSeparation:{number:W},nodeSpacing:{number:W},treeSpacing:{number:W},blockShifting:{boolean:ie},edgeMinimization:{boolean:ie},parentCentralization:{boolean:ie},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ne,boolean:ie}},__type__:{object:Ne}},manipulation:{enabled:{boolean:ie},initiallyActive:{boolean:ie},addNode:{boolean:ie,function:"function"},addEdge:{boolean:ie,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ne,boolean:ie,function:"function"}},deleteNode:{boolean:ie,function:"function"},deleteEdge:{boolean:ie,function:"function"},controlNodeStyle:Pj,__type__:{object:Ne,boolean:ie}},nodes:Pj,physics:{enabled:{boolean:ie},barnesHut:{theta:{number:W},gravitationalConstant:{number:W},centralGravity:{number:W},springLength:{number:W},springConstant:{number:W},damping:{number:W},avoidOverlap:{number:W},__type__:{object:Ne}},forceAtlas2Based:{theta:{number:W},gravitationalConstant:{number:W},centralGravity:{number:W},springLength:{number:W},springConstant:{number:W},damping:{number:W},avoidOverlap:{number:W},__type__:{object:Ne}},repulsion:{centralGravity:{number:W},springLength:{number:W},springConstant:{number:W},nodeDistance:{number:W},damping:{number:W},__type__:{object:Ne}},hierarchicalRepulsion:{centralGravity:{number:W},springLength:{number:W},springConstant:{number:W},nodeDistance:{number:W},damping:{number:W},avoidOverlap:{number:W},__type__:{object:Ne}},maxVelocity:{number:W},minVelocity:{number:W},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:ie},iterations:{number:W},updateInterval:{number:W},onlyDynamicEdges:{boolean:ie},fit:{boolean:ie},__type__:{object:Ne,boolean:ie}},timestep:{number:W},adaptiveTimestep:{boolean:ie},wind:{x:{number:W},y:{number:W},__type__:{object:Ne}},__type__:{object:Ne,boolean:ie}},autoResize:{boolean:ie},clickToUse:{boolean:ie},locale:{string:ae},locales:{__any__:{any:E4e},__type__:{object:Ne}},height:{string:ae},width:{string:ae},__type__:{object:Ne}},ole={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},N4e=(t,e,r)=>{var n;return!!(Ga(t).call(t,"physics")&&Ga(n=ole.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class k4e{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],c={};i[l]=c;for(let d=0;d<r.length;d++)c[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],c=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],v=Math.min(f[m],f[l]+c[m]);f[m]=v,g[h]=v}}}return i}}class T4e{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new k4e}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),c=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<c;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const c=r[l];if(n[c].predefinedPosition!==!0||n[c].isCluster===!0&&e===!0||n[c].options.fixed.x!==!0||n[c].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(c);i<d&&(i=d,s=c,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const c=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,C=s[S].y,E=h[S],N=f[S],T=1/((c-_)**2+(d-C)**2)**1.5;o+=E*(1-N*(d-C)**2*T),a+=E*(N*(c-_)*(d-C)*T),l+=E*(1-N*(c-_)**2*T)}}const p=o,m=a,g=r,v=l,y=n,b=(g/p+y/m)/(m/p-v/m),w=-(m*b+g)/p;s[e].x+=w,s[e].y+=b,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let c=n;c<e.length;c++){const d=e[c];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][c]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][c],a+=this.E_matrix[i][c][0],l+=this.E_matrix[i][c][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let c=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],v=n[f].x,y=n[f].y,b=1/Math.sqrt((a-v)**2+(l-y)**2),w=s[f]*(a-v-o[f]*(a-v)*b),x=s[f]*(l-y-o[f]*(l-y)*b);i[h]=[w,x],c+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[c,d]}}function Se(t,e,r){var n,i,s,o;if(!(this instanceof Se))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:JMe,clickToUse:!1},mr(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:se(n=this.on).call(n,this),off:se(i=this.off).call(i,this),emit:se(s=this.emit).call(s,this),once:se(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new tAe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new gAe,this.canvas=new uFe(this.body),this.selectionHandler=new HFe(this.body,this.canvas),this.interactionHandler=new pFe(this.body,this.canvas,this.selectionHandler),this.view=new hFe(this.body,this.canvas),this.renderer=new sFe(this.body,this.canvas),this.physics=new X$e(this.body),this.layoutEngine=new S4e(this.body),this.clustering=new iFe(this.body),this.manipulation=new _4e(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new C$e(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new H$e(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new T4e(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}Doe(Se.prototype);Se.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(OMe.validate(t,C4e)===!0&&console.error("%cErrors have been found in the supplied options object.",Pae),$h(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=ZMe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new kMe(this,this.body.container,ole,this.canvas.pixelRatio,N4e)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Ct(n.nodes,this.nodesHandler.options),Ct(n.edges,this.edgesHandler.options),Ct(n.layout,this.layoutEngine.options),Ct(n.interaction,this.selectionHandler.options),Ct(n.interaction,this.renderer.options),Ct(n.interaction,this.interactionHandler.options),Ct(n.manipulation,this.manipulation.options),Ct(n.physics,this.physics.options),Ct(n.global,this.canvas.options),Ct(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new NMe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};Se.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};Se.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};Se.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=qMe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=LMe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};Se.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];aa(this.body.container)};Se.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};Se.prototype.isActive=function(){return!this.activator||this.activator.active};Se.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};Se.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};Se.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};Se.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};Se.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};Se.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};Se.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};Se.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};Se.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};Se.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};Se.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};Se.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};Se.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};Se.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};Se.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};Se.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};Se.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};Se.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};Se.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};Se.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};Se.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};Se.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};Se.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};Se.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};Se.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};Se.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};Se.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};Se.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};Se.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};Se.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};Se.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};Se.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};Se.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};Se.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};Se.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};Se.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};Se.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};Se.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};Se.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};Se.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Se.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Se.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};Se.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};Se.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};Se.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};Se.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};Se.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};Se.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};Se.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};Se.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};Se.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};Se.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function O4e({graphData:t,startPersonId:e,onNodeClick:r}){const n=k.useRef(null),i=k.useRef(null),s=ps(),o=k.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);k.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new Qd(t.nodes),h=new Qd(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new Se(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),v={},y=new Set;m.forEach(([b,w])=>{if(y.has(b)||y.has(w))return;const x=g[b],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;v[b]={x:_-60,y:x.y},v[w]={x:_+60,y:S.y},y.add(b),y.add(w)}),Object.entries(v).forEach(([b,w])=>{p.moveNode(b,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},c=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[u.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:u.jsx(Jpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:u.jsx(Zpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:u.jsx(qte,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),u.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const j4e=["parent","child","spouse","lover","partner"];function P4e(t){return j4e.includes(t==null?void 0:t.toLowerCase())}function I4e(t){return(t==null?void 0:t.toLowerCase())==="parent"}function R4e(t){return(t==null?void 0:t.toLowerCase())==="child"}function M4e(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function A4e(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var b,w,x,S;let p=h.name||((b=h.title)==null?void 0:b.rendered)||h.title||`Person ${f}`;if(p&&typeof p=="string"&&typeof document<"u"){const _=document.createElement("textarea");_.innerHTML=p,p=_.value}let m=null,g=((w=h.acf)==null?void 0:w.birth_date)||null;if(g){const _=new Date(g);isNaN(_.getTime())||(m=Math.floor((new Date-_)/(365.25*24*60*60*1e3)))}let v="";switch((x=h.acf)==null?void 0:x.gender){case"male":v="";break;case"female":v="";break;case"non_binary":case"other":case"prefer_not_to_say":v="";break}let y="";if(g)try{const _=new Date(g);if(!isNaN(_.getTime())){const C=String(_.getDate()).padStart(2,"0"),E=String(_.getMonth()+1).padStart(2,"0"),N=_.getFullYear();y=`${C}-${E}-${N}`}}catch{}return{id:f,name:p,gender:((S=h.acf)==null?void 0:S.gender)||"",genderSymbol:v,photo:h.thumbnail||null,age:m,birthDate:g,formattedBirthDate:y}}const c=o.get(t);for(c&&n.set(t,l(c,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!P4e(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const v=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===v||`${w.from}-${w.to}`===y)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(I4e(w))i.push({from:g,to:h,type:"parent-child"});else if(R4e(w))i.push({from:h,to:g,type:"parent-child"});else if(M4e(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function D4e(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(v=>{s.set(v.id,[]),o.set(v.id,[]),a.set(v.id,[])}),i.forEach(v=>{var y,b,w,x;v.type==="parent-child"?((y=s.get(v.to))==null||y.push(v.from),(b=o.get(v.from))==null||b.push(v.to)):v.type==="spouse"&&((w=a.get(v.from))==null||w.push(v.to),(x=a.get(v.to))==null||x.push(v.from))});const l=new Map,c=new Set,d=[{id:e,generation:0}];for(l.set(e,0),c.add(e);d.length>0;){const{id:v,generation:y}=d.shift(),b=s.get(v)||[];for(const S of b)c.has(S)||(c.add(S),l.set(S,y-1),d.push({id:S,generation:y-1}));const w=o.get(v)||[];for(const S of w)c.has(S)||(c.add(S),l.set(S,y+1),d.push({id:S,generation:y+1}));const x=a.get(v)||[];for(const S of x)c.has(S)||(c.add(S),l.set(S,y),d.push({id:S,generation:y}))}n.forEach(v=>{l.has(v.id)||l.set(v.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((v,y)=>{f.set(y,v-h)});function p(v,y,b=!1){const w=v?v.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2):"?";let x,S;b?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(v=>{const y=f.get(v.id)||0,b=v.id===e,w=r[v.id]||!1;let x=v.name;w&&(x=v.name+" ");let S=[x],_="";v.genderSymbol&&(_+=v.genderSymbol+" "),v.age!==null&&(_+=v.age+" "),v.formattedBirthDate&&(_+=v.formattedBirthDate),_.trim()&&S.push(_.trim());const C=v.photo||p(v.name,b,w);let E="#d1d5db";return b?E="#f59e0b":w&&(E="#9ca3af"),{id:v.id,label:S.join(`
`),level:y,shape:"circularImage",image:C,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:E,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:b?3:2,data:{...v,isDeceased:w}}}),g=i.map((v,y)=>{const b=v.type==="spouse";return{id:`edge-${y}`,from:v.from,to:v.to,arrows:{to:{enabled:!1}},color:{color:b?"#ec4899":"#9ca3af",highlight:b?"#db2777":"#6b7280"},width:2,dashes:b?[5,5]:!1,smooth:!1,length:b?50:300}});return{nodes:m,edges:g}}function $4e(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var c,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((c=o.relationship_type)==null?void 0:c.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function F4e(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function q4e(){var p,m;const{id:t}=nM(),e=ps(),r=parseInt(t,10),{data:n,isLoading:i}=Qte(t),{data:s=[],isLoading:o}=Wc(),{data:a=[]}=lt({queryKey:["relationship-types"],queryFn:async()=>(await Fe.getRelationshipTypes()).data}),l=k.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),c=ry({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await Me.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=k.useMemo(()=>{const g={};return c.forEach((v,y)=>{if(v.data&&l[y]){const b=l[y],w=v.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[b]=w}}),g},[c,l]);ch(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=k.useMemo(()=>{if(!n||!s.length)return null;try{const g=$4e(s);a.length>0&&F4e(g,a);const v=A4e(r,s,g);return!v||v.nodes.length===0?null:D4e(v,r,d)}catch(g){return console.error("Error building family tree:",g),null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?u.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(Ge,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(T0,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),u.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),u.jsx("div",{className:"card p-6",children:u.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?u.jsx(O4e,{graphData:h,startPersonId:r,onNodeClick:f}):u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),u.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),u.jsx(Ge,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function L4e(){const{loginUrl:t,isLoggedIn:e}=dM();return Wte(),k.useEffect(()=>{e||(window.location.href=t)},[e,t]),u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function B4e({children:t}){const{data:e,isLoading:r,error:n}=lt({queryKey:["current-user"],queryFn:async()=>(await Me.getCurrentUser()).data,retry:!1});return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Mo,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Mo,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function z4e({children:t}){const{isLoggedIn:e,isLoading:r}=dM();return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?u.jsx(B4e,{children:t}):u.jsx(Hee,{to:"/login",replace:!0})}function V4e(){return u.jsxs(mF,{children:[u.jsx(vn,{path:"/login",element:u.jsx(L4e,{})}),u.jsx(vn,{path:"/*",element:u.jsx(z4e,{children:u.jsx(Vme,{children:u.jsxs(mF,{children:[u.jsx(vn,{path:"/",element:u.jsx(q_e,{})}),u.jsx(vn,{path:"/people",element:u.jsx(B_e,{})}),u.jsx(vn,{path:"/people/:id/family-tree",element:u.jsx(q4e,{})}),u.jsx(vn,{path:"/people/:id",element:u.jsx(yEe,{})}),u.jsx(vn,{path:"/companies",element:u.jsx(bEe,{})}),u.jsx(vn,{path:"/companies/:id",element:u.jsx(xEe,{})}),u.jsx(vn,{path:"/dates",element:u.jsx(_Ee,{})}),u.jsx(vn,{path:"/todos",element:u.jsx(EEe,{})}),u.jsx(vn,{path:"/settings",element:u.jsx(jEe,{})}),u.jsx(vn,{path:"/settings/relationship-types",element:u.jsx(DEe,{})}),u.jsx(vn,{path:"/settings/user-approval",element:u.jsx($Ee,{})}),u.jsx(vn,{path:"*",element:u.jsx(Hee,{to:"/",replace:!0})})]})})})})]})}const U4e=new Uhe({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),Ij=document.getElementById("root");if(!Ij)console.error('Root element not found! Make sure there is a <div id="root"></div> in your HTML.');else try{Rj.createRoot(Ij).render(u.jsx(xe.StrictMode,{children:u.jsx(Hhe,{client:U4e,children:u.jsx(hhe,{children:u.jsx(V4e,{})})})}))}catch(t){console.error("Error mounting React app:",t),Ij.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
